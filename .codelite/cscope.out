cscope 15 $HOME/storage/home/david/Devel/1_Current/paraDroid/Current/.codelite               0002312040
	@../data/config.ini

1 [
O±iÚs
]

2 
	gwšWidth
=640

3 
wšHeight
=480

4 
TICKS_PER_SECOND
=30

5 
MAX_FRAMESKIP
=5

6 
g¿v™y
=110.50

7 
»äeshR©e
=60

8 
vsyncO±iÚ
=1

9 
sw­M‘hod
=2

10 
autoCÚv”tB™m­s
=1

11 
u£HŞdB™m­
=1

12 
u£BackšgB™m­
=1

13 
u£CŞlisiÚD‘eùiÚ
=1

14 
doÜF¿meD–ay
=30.00

15 
doCÏmpPÏy”V–oc™y
=1

16 
´og»ssB¬LßdTimes
=0.02

17 
®lDroidsVisibË
=1

18 
u£SoundToggË
=0

19 
fuÎSü“n
=0

20 
vŞumeLev–
=25

	@../data/scripts/commonDefines.h

5 cÚ¡ 
	gSND_PAN_CENTER
 = 0.0f;

6 cÚ¡ 
	gSND_PAN_LEFT
 = -1.0f;

7 cÚ¡ 
	gSND_PAN_RIGHT
 = 1.0f;

12 cÚ¡ 
	gFONT_MEDIUM
 = 0;

13 cÚ¡ 
	gFONT_LARGE
 = 1;

14 cÚ¡ 
	gFONT_GUI
 = 2;

20 cÚ¡ 
	gGUI_SCREEN_MAIN
 = 0;

21 cÚ¡ 
	gGUI_SCREEN_OPTIONS
 = 1;

22 cÚ¡ 
	gGUI_SCREEN_VIDEO
 = 2;

23 cÚ¡ 
	gGUI_SCREEN_AUDIO
 = 3;

24 cÚ¡ 
	gGUI_SCREEN_GRAPHICS
 = 4;

25 cÚ¡ 
	gGUI_SCREEN_EXIT
 = 5;

26 cÚ¡ 
	gGUI_SCREEN_TERMINAL
 = 6;

29 cÚ¡ 
	gMODE_CONSOLE
 = 1;

30 cÚ¡ 
	gMODE_SHOWLEVEL
 = 2;

31 cÚ¡ 
	gMODE_LOADING
 = 3;

32 cÚ¡ 
	gMODE_LIFT_VIEW
 = 4;

33 cÚ¡ 
	gMODE_SHOW_SPLASH
 = 5;

34 cÚ¡ 
	gMODE_TERMINAL_MENU
 = 6;

35 cÚ¡ 
	gMODE_TERMINAL_SIDEVIEW
 = 7;

36 cÚ¡ 
	gMODE_TERMINAL_LEVEL
 = 8;

37 cÚ¡ 
	gMODE_TERMINAL_DB
 = 9;

38 cÚ¡ 
	gMODE_GUI
 = 10;

39 cÚ¡ 
	gMODE_INTRO
 = 11;

41 cÚ¡ 
	gMODE_TRANSFER_INTRO
 = 13;

42 cÚ¡ 
	gMODE_TRANSFER_INTRO_1
 = 14;

43 cÚ¡ 
	gMODE_TRANSFER_INTRO_2
 = 15;

44 cÚ¡ 
	gMODE_TRANSFER_FINISH
 = 16;

45 cÚ¡ 
	gMODE_TRANSFER_START
 = 17;

46 cÚ¡ 
	gMODE_TRANSFER_COPY
 = 18;

47 cÚ¡ 
	gMODE_TRANSFER_DRAW
 = 19;

48 cÚ¡ 
	gMODE_TRANSFER_SELECT
 = 20;

49 cÚ¡ 
	gMODE_TRANSFER_SELECT_SIDE
 = 21;

50 cÚ¡ 
	gMODE_PAUSED
 = 22;

52 
	emySounds
 {

53 
	mSND_COLLIDE_1
 = 0,

54 
	mSND_END_TRANSMISSION1
,

55 
	mSND_GREEN_ALERT
,

56 
	mSND_LIFT_1
,

57 
	mSND_SCROLLBEEPS
,

58 
	mSND_TRANSFER_DEADLOCK
,

59 
	mSND_YELLOW_ALERT
,

60 
	mSND_CONSOLE_1
,

61 
	mSND_END_TRANSMISSION_2
,

62 
	mSND_KEYPRESS_BAD
,

63 
	mSND_LIFT_2
,

64 
	mSND_START_1
,

65 
	mSND_TRANSFER_SELECT
,

66 
	mSND_CONSOLE_2
,

67 
	mSND_ENERGY_HEAL
,

68 
	mSND_KEYPRESS_GOOD
,

69 
	mSND_LIFT_3
,

70 
	mSND_START_2
,

71 
	mSND_TRANSFER_STAGE_1
,

72 
	mSND_DAMAGE
,

73 
	mSND_EXPLODE_1
,

74 
	mSND_LASER
,

75 
	mSND_LOW_ENERGY
,

76 
	mSND_START_ALL
,

77 
	mSND_TRANSFER_STAGE_2
,

78 
	mSND_DISRUPTOR
,

79 
	mSND_EXPLODE_2
,

80 
	mSND_LEVEL_SHUTDOWN
,

81 
	mSND_RED_ALERT
,

82 
	mSND_TRANSFER_1
,

83 
	mSND_TRANSFER_START
,

84 
	mSND_DOOR
,

85 
	mNUM_SOUNDS


	@../data/scripts/conCommands.sc

2 
	~"d©a/süts/commÚDefšes.h
"

4 cÚ¡ 
	gCON_COMMAND
 = 1;

5 cÚ¡ 
	gCON_USAGE
 = 2;

6 cÚ¡ 
	gCON_FUNC
 = 3;

7 cÚ¡ 
	gCON_PARAM
 = 4;

9 cÚ¡ 
	gNUM_OF_LEVELS
 = 21;

14 
	$as_£tDroidVisib™y
(&
š
 
·¿m1
)

17 ià(0 =ğ
·¿m1
)

19 
®lDroidsVisibË
 = 
çl£
;

20 
	`sys_´štCÚSŒ
("LOS visibility is", " false");

24 
®lDroidsVisibË
 = 
Œue
;

25 
	`sys_´štCÚSŒ
("LOS visibility is", "rue");

27 
	}
}

34 
	$as_£tS‹psLOS
(&
š
 
·¿m1
)

37 ià((
·¿m1
 < 0) || (param1 > 32))

39 
	`sys_´štCÚSŒ
("Error:", "Parameter is out of„ange");

42 
g_LšeOfSightS‹p
 = 
·¿m1
;

43 
	}
}

48 
	$as_chªgeToLev–
(&
š
 
·¿m1
)

51 ià((
·¿m1
 < 0è|| (·¿m1 > 
NUM_OF_LEVELS
) || (param1 == 7))

53 
	`sys_´štCÚSŒ
("Error: ", "Parameter is invalid");

56 
	`gam_chªgeToLev–
(
·¿m1
);

57 
	}
}

62 
boŞ
 
	$as_toggËTeCŞlisiÚ
(&
š
 
·¿m1
)

65 ià(0 =ğ
·¿m1
)

67 
u£CŞlisiÚD‘eùiÚ
 = 
çl£
;

68 
	`sys_´štCÚSŒ
("Tile Collision seto", " false");

72 
u£CŞlisiÚD‘eùiÚ
 = 
Œue
;

73 
	`sys_´štCÚSŒ
("Tile collision seto", "rue");

75  
Œue
;

76 
	}
}

81 
boŞ
 
	$as_cÚCommªdQu™
()

84 
gameIsRuÂšg
 = 
çl£
;

86  
Œue
;

87 
	}
}

92 
boŞ
 
	$as_cÚCommªdEx™
()

95 
gameIsRuÂšg
 = 
çl£
;

97  
Œue
;

98 
	}
}

103 
	$as_addAÎSütCommªds
()

108 
	`sys_addSütCommªd
("qu™", "Qu™h´og¿m", "boŞ‡s_cÚCommªdQu™()", 
çl£
);

109 
	`sys_addSütCommªd
("ex™", "Qu™h´og¿m", "boŞ‡s_cÚCommªdQu™()", 
çl£
);

110 
	`sys_addSütCommªd
("tecŞlisiÚ", "ToggËcŞlisiÚ", "boŞ‡s_toggËTeCŞlisiÚ(šˆ·¿m1)", 
Œue
);

111 
	`sys_addSütCommªd
("chªg‘Şev–", "ChªgtØÃw deck", "void‡s_chªgeToLev–(šˆ·¿m1)", 
Œue
);

112 
	`sys_addSütCommªd
("lšeofsight¡•s","S‹p fÜ LOS", "void‡s_£tS‹psLOS(šˆ·¿m1)", 
Œue
);

113 
	`sys_addSütCommªd
("droidsvisibË", "ToggË droid visib™y", "void‡s_£tDroidVisib™y(šˆ&š)", 
Œue
);

115 
numCÚsŞeCommªds
 = 6;

116 
	}
}

	@../data/scripts/gui_main.sc

3 
	~"d©a/süts/commÚDefšes.h
"

6 
	gGUI_BUTTON_ACTIVE_COL
 = 0;

7 
	gGUI_BUTTON_INACTIVE_COL
 = 1;

8 
	gGUI_BUTTON_ACTIVE_EDGE_COL
 = 2;

9 
	gGUI_BUTTON_INACTIVE_EDGE_COL
 = 3;

10 
	gGUI_BUTTON_ACTIVE_LABEL_COL
 = 4;

11 
	gGUI_BUTTON_INACTIVE_LABEL_COL
 = 5;

13 
	gGUI_CHECKBOX_TICKED_COL
 = 6;

14 
	gGUI_CHECKBOX_NOT_TICKED_COL
 = 7;

15 
	gGUI_OBJECT_TEXT_LABEL_COLOR
 = 8;

20 
	gGUI_COORD_TYPE_PIXEL
 = 0;

21 
	gGUI_COORD_TYPE_PERCENT
 = 1;

23 
	gGUI_LABEL_CENTER
 = 0;

24 
	gGUI_LABEL_LEFT
 = 1;

25 
	gGUI_LABEL_RIGHT
 = 2;

30 
	gGUI_OBJECT_SCREEN
 = 1;

31 
	gGUI_OBJECT_BUTTON
 = 2;

32 
	gGUI_OBJECT_CHECKBOX
 = 3;

33 
	gGUI_OBJECT_TEXT_LABEL
 = 4;

34 
	gGUI_OBJECT_POPUP
 = 5;

40 
	$as_guiHªdËMou£Ov”
(
¡ršg
 &
š
)

44 
	}
}

49 
	$as_guiHªdËBu‰ÚP»ss
(
¡ršg
 &
š
 
objeùID
)

54 
cu¼’tGUISü“n
)

56 
GUI_SCREEN_MAIN
:

58 if(
objeùID
 == "buttonStartGame")

60 
cu¼’tMode
 = 
MODE_SHOWLEVEL
;

61 
	`gam_chªgeToLev–
(0);

64 if(
objeùID
 == "buttonOptions")

66 
cu¼’tGUISü“n
 = 
GUI_SCREEN_OPTIONS
;

67 
cu¼’tObjeùS–eùed
 = 0;

70 if(
objeùID
 == "buttonHelp")

72 
cu¼’tMode
 = 
MODE_INTRO
;

75 if(
objeùID
 == "buttonQuit")

77 
cu¼’tGUISü“n
 = 
GUI_SCREEN_EXIT
;

78 
cu¼’tObjeùS–eùed
 = 0;

83 
GUI_SCREEN_OPTIONS
:

85 if(
objeùID
 == "buttonOptionVideo")

87 
cu¼’tGUISü“n
 = 
GUI_SCREEN_VIDEO
;

88 
cu¼’tObjeùS–eùed
 = 0;

91 if(
objeùID
 == "buttonOptionAudio")

93 
cu¼’tGUISü“n
 = 
GUI_SCREEN_AUDIO
;

94 
cu¼’tObjeùS–eùed
 = 0;

97 if(
objeùID
 == "buttonOptionGraphics")

99 
cu¼’tGUISü“n
 = 
GUI_SCREEN_GRAPHICS
;

100 
cu¼’tObjeùS–eùed
 = 0;

103 if(
objeùID
 == "buttonOptionReturn")

105 
cu¼’tGUISü“n
 = 
GUI_SCREEN_MAIN
;

106 
cu¼’tObjeùS–eùed
 = 0;

111 
GUI_SCREEN_VIDEO
:

113 if(
objeùID
 == "checkBoxFullScreen")

115 
	`as_guiS‘CheckboxTick
("checkBoxFullScreen", 1);

119 if(
objeùID
 == "buttonVideoOptionsApply")

121 
cu¼’tGUISü“n
 = 
GUI_SCREEN_MAIN
;

122 
cu¼’tObjeùS–eùed
 = 0;

125 if(
objeùID
 == "buttonVideoOptionsCancel")

127 
cu¼’tGUISü“n
 = 
GUI_SCREEN_OPTIONS
;

128 
cu¼’tObjeùS–eùed
 = 0;

133 
GUI_SCREEN_AUDIO
:

135 if(
objeùID
 == "buttonAudioOptionsApply")

137 
cu¼’tGUISü“n
 = 
GUI_SCREEN_MAIN
;

138 
cu¼’tObjeùS–eùed
 = 0;

141 if(
objeùID
 == "buttonAudioOptionsCancel")

143 
cu¼’tGUISü“n
 = 
GUI_SCREEN_OPTIONS
;

144 
cu¼’tObjeùS–eùed
 = 0;

149 
GUI_SCREEN_GRAPHICS
:

151 if(
objeùID
 == "buttonGraphicsApply")

153 
cu¼’tGUISü“n
 = 
GUI_SCREEN_MAIN
;

154 
cu¼’tObjeùS–eùed
 = 0;

157 if(
objeùID
 == "buttonGraphicsCancel")

159 
cu¼’tGUISü“n
 = 
GUI_SCREEN_OPTIONS
;

160 
cu¼’tObjeùS–eùed
 = 0;

165 
GUI_SCREEN_EXIT
:

167 if(
objeùID
 == "buttonExitYes")

169 
gameIsRuÂšg
 = 
çl£
;

172 if(
objeùID
 == "buttonExitCancel")

174 
cu¼’tGUISü“n
 = 
GUI_SCREEN_MAIN
;

175 
cu¼’tObjeùS–eùed
 = 0;

180 
GUI_SCREEN_TERMINAL
:

182 if(
objeùID
 == "buttonTermLogOff")

184 
	`as_chªgeGameMode
(
MODE_SHOWLEVEL
, 
Œue
);

187 if(
objeùID
 == "buttonTermInfo")

189 
	`as_chªgeGameMode
(
MODE_TERMINAL_DB
, 
Œue
);

190 
	`as_£tdbV®ues
();

191 
	`as_guiS‘upDBText
();

194 if(
objeùID
 == "buttonTermDeck")

196 
	`as_chªgeGameMode
(
MODE_TERMINAL_LEVEL
, 
Œue
);

199 if(
objeùID
 == "buttonTermShip")

201 
	`as_chªgeGameMode
(
MODE_TERMINAL_SIDEVIEW
, 
Œue
);

206 
	}
}

212 
	$as_£tupGUIT”mš®
()

215 
	`as_guiC»©eNewSü“n
("scrTerminal");

217 
	`as_guiC»©eObjeù
(
GUI_OBJECT_BUTTON
, "buttonTermLogOff");

218 
	`as_guiS‘ObjeùPos™iÚ
(
GUI_OBJECT_BUTTON
, "bu‰ÚT”mLogOff", 
GUI_COORD_TYPE_PERCENT
, 25, 20, 50, 7);

219 
	`as_guiS‘ObjeùLab–
(
GUI_OBJECT_BUTTON
, "bu‰ÚT”mLogOff", 
GUI_LABEL_CENTER
, "Logofferminal");

220 
	`as_guiS‘ObjeùFunùiÚs
(
GUI_OBJECT_BUTTON
, "buttonTermLogOff", "scr_guiHandleButtonPress", "scr_guiHandleMouseOver");

221 
	`as_guiAddObjeùToSü“n
(
GUI_OBJECT_BUTTON
, "buttonTermLogOff", "scrTerminal");

223 
	`as_guiC»©eObjeù
(
GUI_OBJECT_BUTTON
, "buttonTermInfo");

224 
	`as_guiS‘ObjeùPos™iÚ
(
GUI_OBJECT_BUTTON
, "bu‰ÚT”mInfo", 
GUI_COORD_TYPE_PERCENT
, 25, 40, 50, 7);

225 
	`as_guiS‘ObjeùLab–
(
GUI_OBJECT_BUTTON
, "bu‰ÚT”mInfo", 
GUI_LABEL_CENTER
, "Droid Information");

226 
	`as_guiS‘ObjeùFunùiÚs
(
GUI_OBJECT_BUTTON
, "buttonTermInfo", "scr_guiHandleButtonPress", "scr_guiHandleMouseOver");

227 
	`as_guiAddObjeùToSü“n
(
GUI_OBJECT_BUTTON
, "buttonTermInfo", "scrTerminal");

229 
	`as_guiC»©eObjeù
(
GUI_OBJECT_BUTTON
, "buttonTermDeck");

230 
	`as_guiS‘ObjeùPos™iÚ
(
GUI_OBJECT_BUTTON
, "bu‰ÚT”mDeck", 
GUI_COORD_TYPE_PERCENT
, 25, 60, 50, 7);

231 
	`as_guiS‘ObjeùLab–
(
GUI_OBJECT_BUTTON
, "bu‰ÚT”mDeck", 
GUI_LABEL_CENTER
, "Deck Map");

232 
	`as_guiS‘ObjeùFunùiÚs
(
GUI_OBJECT_BUTTON
, "buttonTermDeck", "scr_guiHandleButtonPress", "scr_guiHandleMouseOver");

233 
	`as_guiAddObjeùToSü“n
(
GUI_OBJECT_BUTTON
, "buttonTermDeck", "scrTerminal");

235 
	`as_guiC»©eObjeù
(
GUI_OBJECT_BUTTON
, "buttonTermShip");

236 
	`as_guiS‘ObjeùPos™iÚ
(
GUI_OBJECT_BUTTON
, "bu‰ÚT”mSh", 
GUI_COORD_TYPE_PERCENT
, 25, 80, 50, 7);

237 
	`as_guiS‘ObjeùLab–
(
GUI_OBJECT_BUTTON
, "bu‰ÚT”mSh", 
GUI_LABEL_CENTER
, "Ship View");

238 
	`as_guiS‘ObjeùFunùiÚs
(
GUI_OBJECT_BUTTON
, "buttonTermShip", "scr_guiHandleButtonPress", "scr_guiHandleMouseOver");

239 
	`as_guiAddObjeùToSü“n
(
GUI_OBJECT_BUTTON
, "buttonTermShip", "scrTerminal");

241 
	}
}

245 
	$as_£tupGUIMašM’u
()

248 
	`as_guiC»©eNewSü“n
("scrMainMenu");

250 
	`as_guiC»©eObjeù
(
GUI_OBJECT_BUTTON
, "buttonStartGame");

251 
	`as_guiS‘ObjeùPos™iÚ
(
GUI_OBJECT_BUTTON
, "bu‰ÚS¹Game", 
GUI_COORD_TYPE_PERCENT
, 25, 20, 50, 7);

252 
	`as_guiS‘ObjeùLab–
(
GUI_OBJECT_BUTTON
, "bu‰ÚS¹Game", 
GUI_LABEL_CENTER
, "Start Game");

253 
	`as_guiS‘ObjeùFunùiÚs
(
GUI_OBJECT_BUTTON
, "buttonStartGame", "scr_guiHandleButtonPress", "scr_guiHandleMouseOver");

254 
	`as_guiAddObjeùToSü“n
(
GUI_OBJECT_BUTTON
, "buttonStartGame", "scrMainMenu");

256 
	`as_guiC»©eObjeù
(
GUI_OBJECT_BUTTON
, "buttonOptions");

257 
	`as_guiS‘ObjeùPos™iÚ
(
GUI_OBJECT_BUTTON
, "bu‰ÚO±iÚs", 
GUI_COORD_TYPE_PERCENT
, 25, 40, 50, 7);

258 
	`as_guiS‘ObjeùLab–
(
GUI_OBJECT_BUTTON
, "bu‰ÚO±iÚs", 
GUI_LABEL_CENTER
, "Options");

259 
	`as_guiS‘ObjeùFunùiÚs
(
GUI_OBJECT_BUTTON
, "buttonOptions", "scr_guiHandleButtonPress", "scr_guiHandleMouseOver");

260 
	`as_guiAddObjeùToSü“n
(
GUI_OBJECT_BUTTON
, "buttonOptions", "scrMainMenu");

262 
	`as_guiC»©eObjeù
(
GUI_OBJECT_BUTTON
, "buttonHelp");

263 
	`as_guiS‘ObjeùPos™iÚ
(
GUI_OBJECT_BUTTON
, "bu‰ÚH–p", 
GUI_COORD_TYPE_PERCENT
, 25, 60, 50, 7);

264 
	`as_guiS‘ObjeùLab–
(
GUI_OBJECT_BUTTON
, "bu‰ÚH–p", 
GUI_LABEL_CENTER
, "Help");

265 
	`as_guiS‘ObjeùFunùiÚs
(
GUI_OBJECT_BUTTON
, "buttonHelp", "scr_guiHandleButtonPress", "scr_guiHandleMouseOver");

266 
	`as_guiAddObjeùToSü“n
(
GUI_OBJECT_BUTTON
, "buttonHelp", "scrMainMenu");

268 
	`as_guiC»©eObjeù
(
GUI_OBJECT_BUTTON
, "buttonQuit");

269 
	`as_guiS‘ObjeùPos™iÚ
(
GUI_OBJECT_BUTTON
, "bu‰ÚQu™", 
GUI_COORD_TYPE_PERCENT
, 25, 80, 50, 7);

270 
	`as_guiS‘ObjeùLab–
(
GUI_OBJECT_BUTTON
, "bu‰ÚQu™", 
GUI_LABEL_CENTER
, "Quit");

271 
	`as_guiS‘ObjeùFunùiÚs
(
GUI_OBJECT_BUTTON
, "buttonQuit", "scr_guiHandleButtonPress", "scr_guiHandleMouseOver");

272 
	`as_guiAddObjeùToSü“n
(
GUI_OBJECT_BUTTON
, "buttonQuit", "scrMainMenu");

273 
	}
}

279 
	$as_£tupGUISü“nO±iÚs
()

282 
	`as_guiC»©eNewSü“n
("scrOptions");

284 
	`as_guiC»©eObjeù
(
GUI_OBJECT_BUTTON
, "buttonOptionVideo");

285 
	`as_guiS‘ObjeùPos™iÚ
(
GUI_OBJECT_BUTTON
, "bu‰ÚO±iÚVideo", 
GUI_COORD_TYPE_PERCENT
, 25, 20, 50, 7);

286 
	`as_guiS‘ObjeùLab–
(
GUI_OBJECT_BUTTON
, "bu‰ÚO±iÚVideo", 
GUI_LABEL_CENTER
, "Video");

287 
	`as_guiS‘ObjeùFunùiÚs
(
GUI_OBJECT_BUTTON
, "buttonOptionVideo", "scr_guiHandleButtonPress", "scr_guiHandleMouseOver");

288 
	`as_guiAddObjeùToSü“n
(
GUI_OBJECT_BUTTON
, "buttonOptionVideo", "scrOptions");

290 
	`as_guiC»©eObjeù
(
GUI_OBJECT_BUTTON
, "buttonOptionAudio");

291 
	`as_guiS‘ObjeùPos™iÚ
(
GUI_OBJECT_BUTTON
, "bu‰ÚO±iÚAudio", 
GUI_COORD_TYPE_PERCENT
, 25, 35, 50, 7);

292 
	`as_guiS‘ObjeùLab–
(
GUI_OBJECT_BUTTON
, "bu‰ÚO±iÚAudio", 
GUI_LABEL_CENTER
, "Audio");

293 
	`as_guiS‘ObjeùFunùiÚs
(
GUI_OBJECT_BUTTON
, "buttonOptionAudio", "scr_guiHandleButtonPress", "scr_guiHandleMouseOver");

294 
	`as_guiAddObjeùToSü“n
(
GUI_OBJECT_BUTTON
, "buttonOptionAudio", "scrOptions");

296 
	`as_guiC»©eObjeù
(
GUI_OBJECT_BUTTON
, "buttonOptionGraphics");

297 
	`as_guiS‘ObjeùPos™iÚ
(
GUI_OBJECT_BUTTON
, "bu‰ÚO±iÚG¿phics", 
GUI_COORD_TYPE_PERCENT
, 25, 50, 50, 7);

298 
	`as_guiS‘ObjeùLab–
(
GUI_OBJECT_BUTTON
, "bu‰ÚO±iÚG¿phics", 
GUI_LABEL_CENTER
, "Graphics");

299 
	`as_guiS‘ObjeùFunùiÚs
(
GUI_OBJECT_BUTTON
, "buttonOptionGraphics", "scr_guiHandleButtonPress", "scr_guiHandleMouseOver");

300 
	`as_guiAddObjeùToSü“n
(
GUI_OBJECT_BUTTON
, "buttonOptionGraphics", "scrOptions");

302 
	`as_guiC»©eObjeù
(
GUI_OBJECT_BUTTON
, "buttonOptionReturn");

303 
	`as_guiS‘ObjeùPos™iÚ
(
GUI_OBJECT_BUTTON
, "bu‰ÚO±iÚR‘uº", 
GUI_COORD_TYPE_PERCENT
, 25, 80, 50, 7);

304 
	`as_guiS‘ObjeùLab–
(
GUI_OBJECT_BUTTON
, "bu‰ÚO±iÚR‘uº", 
GUI_LABEL_CENTER
, "Main Menu");

305 
	`as_guiS‘ObjeùFunùiÚs
(
GUI_OBJECT_BUTTON
, "buttonOptionReturn", "scr_guiHandleButtonPress", "scr_guiHandleMouseOver");

306 
	`as_guiAddObjeùToSü“n
(
GUI_OBJECT_BUTTON
, "buttonOptionReturn", "scrOptions");

307 
	}
}

313 
	$as_guiGUIS‘upVideo
()

316 
	`as_guiC»©eNewSü“n
("scrVideoOptions");

318 
	`as_guiC»©eObjeù
(
GUI_OBJECT_TEXT_LABEL
, "textLabelResolution");

319 
	`as_guiS‘ObjeùPos™iÚ
(
GUI_OBJECT_TEXT_LABEL
, "‹xtLab–ResŞutiÚ", 
GUI_COORD_TYPE_PERCENT
, 25, 20, 25, 25);

320 
	`as_guiS‘ObjeùLab–
(
GUI_OBJECT_TEXT_LABEL
, "‹xtLab–ResŞutiÚ", 
GUI_LABEL_CENTER
, "Video Options");

321 
	`as_guiAddObjeùToSü“n
(
GUI_OBJECT_TEXT_LABEL
, "textLabelResolution", "scrVideoOptions");

323 
	`as_guiC»©eObjeù
(
GUI_OBJECT_CHECKBOX
, "checkBoxFullScreen");

324 
	`as_guiS‘ObjeùPos™iÚ
(
GUI_OBJECT_CHECKBOX
, "checkBoxFuÎSü“n", 
GUI_COORD_TYPE_PERCENT
, 30, 35, 25, 25);

325 
	`as_guiS‘ObjeùLab–
(
GUI_OBJECT_CHECKBOX
, "checkBoxFuÎSü“n", 
GUI_LABEL_CENTER
, "Full screen");

326 
	`as_guiS‘ObjeùFunùiÚs
(
GUI_OBJECT_CHECKBOX
, "checkBoxFullScreen", "scr_guiHandleFullScreenOption", "scr_guiHandleMouseOver");

327 
	`as_guiS‘CheckboxGroup
("checkBoxFullScreen", 1);

328 
	`as_guiAddObjeùToSü“n
(
GUI_OBJECT_CHECKBOX
, "checkBoxFullScreen", "scrVideoOptions");

330 
	`as_guiC»©eObjeù
(
GUI_OBJECT_BUTTON
, "buttonVideoOptionsApply");

331 
	`as_guiS‘ObjeùPos™iÚ
(
GUI_OBJECT_BUTTON
, "bu‰ÚVideoO±iÚsAµly", 
GUI_COORD_TYPE_PERCENT
, 25, 70, 50, 7);

332 
	`as_guiS‘ObjeùLab–
(
GUI_OBJECT_BUTTON
, "bu‰ÚVideoO±iÚsAµly", 
GUI_LABEL_CENTER
, "Apply");

333 
	`as_guiS‘ObjeùFunùiÚs
(
GUI_OBJECT_BUTTON
, "buttonVideoOptionsApply", "scr_guiHandleButtonPress", "scr_guiHandleMouseOver");

334 
	`as_guiAddObjeùToSü“n
(
GUI_OBJECT_BUTTON
, "buttonVideoOptionsApply", "scrVideoOptions");

336 
	`as_guiC»©eObjeù
(
GUI_OBJECT_BUTTON
, "buttonVideoOptionsCancel");

337 
	`as_guiS‘ObjeùPos™iÚ
(
GUI_OBJECT_BUTTON
, "bu‰ÚVideoO±iÚsCªûl", 
GUI_COORD_TYPE_PERCENT
, 25, 80, 50, 7);

338 
	`as_guiS‘ObjeùLab–
(
GUI_OBJECT_BUTTON
, "bu‰ÚVideoO±iÚsCªûl", 
GUI_LABEL_CENTER
, "Cancel");

339 
	`as_guiS‘ObjeùFunùiÚs
(
GUI_OBJECT_BUTTON
, "buttonVideoOptionsCancel", "scr_guiHandleButtonPress", "scr_guiHandleMouseOver");

340 
	`as_guiAddObjeùToSü“n
(
GUI_OBJECT_BUTTON
, "buttonVideoOptionsCancel", "scrVideoOptions");

341 
	}
}

346 
	$as_guiGUIS‘upAudio
()

349 
	`as_guiC»©eNewSü“n
("scrAudioOptions");

351 
	`as_guiC»©eObjeù
(
GUI_OBJECT_TEXT_LABEL
, "textLabelSoundOptions");

352 
	`as_guiS‘ObjeùPos™iÚ
(
GUI_OBJECT_TEXT_LABEL
, "‹xtLab–SoundO±iÚs", 
GUI_COORD_TYPE_PERCENT
, 25, 20, 25, 25);

353 
	`as_guiS‘ObjeùLab–
(
GUI_OBJECT_TEXT_LABEL
, "‹xtLab–SoundO±iÚs", 
GUI_LABEL_CENTER
, "Sound Options");

354 
	`as_guiAddObjeùToSü“n
(
GUI_OBJECT_TEXT_LABEL
, "textLabelSoundOptions", "scrAudioOptions");

356 if(
çl£
 =ğ
as_u£Sound
)

358 
	`as_guiC»©eObjeù
(
GUI_OBJECT_TEXT_LABEL
, "textLabelNoSound");

359 
	`as_guiS‘ObjeùPos™iÚ
(
GUI_OBJECT_TEXT_LABEL
, "‹xtLab–NoSound", 
GUI_COORD_TYPE_PERCENT
, 30, 35, 25, 25);

360 
	`as_guiS‘ObjeùLab–
(
GUI_OBJECT_TEXT_LABEL
, "‹xtLab–NoSound", 
GUI_LABEL_CENTER
, "Sound is‚ot‡vailable.");

361 
	`as_guiAddObjeùToSü“n
(
GUI_OBJECT_TEXT_LABEL
, "textLabelNoSound", "scrAudioOptions");

365 
	`as_guiC»©eObjeù
(
GUI_OBJECT_TEXT_LABEL
, "textLabelUseSound");

366 
	`as_guiS‘ObjeùPos™iÚ
(
GUI_OBJECT_TEXT_LABEL
, "‹xtLab–U£Sound", 
GUI_COORD_TYPE_PERCENT
, 30, 35, 25, 25);

367 
	`as_guiS‘ObjeùLab–
(
GUI_OBJECT_TEXT_LABEL
, "‹xtLab–U£Sound", 
GUI_LABEL_CENTER
, "Show sound options.");

368 
	`as_guiAddObjeùToSü“n
(
GUI_OBJECT_TEXT_LABEL
, "textLabelUseSound", "scrAudioOptions");

371 
	`as_guiC»©eObjeù
(
GUI_OBJECT_BUTTON
, "buttonAudioOptionsApply");

372 
	`as_guiS‘ObjeùPos™iÚ
(
GUI_OBJECT_BUTTON
, "bu‰ÚAudioO±iÚsAµly", 
GUI_COORD_TYPE_PERCENT
, 25, 70, 50, 7);

373 
	`as_guiS‘ObjeùLab–
(
GUI_OBJECT_BUTTON
, "bu‰ÚAudioO±iÚsAµly", 
GUI_LABEL_CENTER
, "Apply");

374 
	`as_guiS‘ObjeùFunùiÚs
(
GUI_OBJECT_BUTTON
, "buttonAudioOptionsApply", "scr_guiHandleButtonPress", "scr_guiHandleMouseOver");

375 
	`as_guiAddObjeùToSü“n
(
GUI_OBJECT_BUTTON
, "buttonAudioOptionsApply", "scrAudioOptions");

377 
	`as_guiC»©eObjeù
(
GUI_OBJECT_BUTTON
, "buttonAudioOptionsCancel");

378 
	`as_guiS‘ObjeùPos™iÚ
(
GUI_OBJECT_BUTTON
, "bu‰ÚAudioO±iÚsCªûl", 
GUI_COORD_TYPE_PERCENT
, 25, 80, 50, 7);

379 
	`as_guiS‘ObjeùLab–
(
GUI_OBJECT_BUTTON
, "bu‰ÚAudioO±iÚsCªûl", 
GUI_LABEL_CENTER
, "Cancel");

380 
	`as_guiS‘ObjeùFunùiÚs
(
GUI_OBJECT_BUTTON
, "buttonAudioOptionsCancel", "scr_guiHandleButtonPress", "scr_guiHandleMouseOver");

381 
	`as_guiAddObjeùToSü“n
(
GUI_OBJECT_BUTTON
, "buttonAudioOptionsCancel", "scrAudioOptions");

382 
	}
}

388 
	$as_guiGUIS‘upG¿phics
()

391 
	`as_guiC»©eNewSü“n
("scrGraphics");

393 
	`as_guiC»©eObjeù
(
GUI_OBJECT_TEXT_LABEL
, "textLabelGraphics");

394 
	`as_guiS‘ObjeùPos™iÚ
(
GUI_OBJECT_TEXT_LABEL
, "‹xtLab–G¿phics", 
GUI_COORD_TYPE_PERCENT
, 25, 20, 25, 25);

395 
	`as_guiS‘ObjeùLab–
(
GUI_OBJECT_TEXT_LABEL
, "‹xtLab–G¿phics", 
GUI_LABEL_CENTER
, "Graphics Options");

396 
	`as_guiAddObjeùToSü“n
(
GUI_OBJECT_TEXT_LABEL
, "textLabelGraphics", "scrGraphics");

398 
	`as_guiC»©eObjeù
(
GUI_OBJECT_BUTTON
, "buttonGraphicsApply");

399 
	`as_guiS‘ObjeùPos™iÚ
(
GUI_OBJECT_BUTTON
, "bu‰ÚG¿phicsAµly", 
GUI_COORD_TYPE_PERCENT
, 25, 70, 50, 7);

400 
	`as_guiS‘ObjeùLab–
(
GUI_OBJECT_BUTTON
, "bu‰ÚG¿phicsAµly", 
GUI_LABEL_CENTER
, "Apply");

401 
	`as_guiS‘ObjeùFunùiÚs
(
GUI_OBJECT_BUTTON
, "buttonGraphicsApply", "scr_guiHandleButtonPress", "scr_guiHandleMouseOver");

402 
	`as_guiAddObjeùToSü“n
(
GUI_OBJECT_BUTTON
, "buttonGraphicsApply", "scrGraphics");

404 
	`as_guiC»©eObjeù
(
GUI_OBJECT_BUTTON
, "buttonGraphicsCancel");

405 
	`as_guiS‘ObjeùPos™iÚ
(
GUI_OBJECT_BUTTON
, "bu‰ÚG¿phicsCªûl", 
GUI_COORD_TYPE_PERCENT
, 25, 80, 50, 7);

406 
	`as_guiS‘ObjeùLab–
(
GUI_OBJECT_BUTTON
, "bu‰ÚG¿phicsCªûl", 
GUI_LABEL_CENTER
, "Cancel");

407 
	`as_guiS‘ObjeùFunùiÚs
(
GUI_OBJECT_BUTTON
, "buttonGraphicsCancel", "scr_guiHandleButtonPress", "scr_guiHandleMouseOver");

408 
	`as_guiAddObjeùToSü“n
(
GUI_OBJECT_BUTTON
, "buttonGraphicsCancel", "scrGraphics");

409 
	}
}

415 
	$as_guiS‘upEx™Que¡iÚ
()

418 
	`as_guiC»©eNewSü“n
("scrExitQuestion");

420 
	`as_guiC»©eObjeù
(
GUI_OBJECT_TEXT_LABEL
, "textLabelExitQuestion");

421 
	`as_guiS‘ObjeùPos™iÚ
(
GUI_OBJECT_TEXT_LABEL
, "‹xtLab–Ex™Que¡iÚ", 
GUI_COORD_TYPE_PERCENT
, 25, 40, 25, 25);

422 
	`as_guiS‘ObjeùLab–
(
GUI_OBJECT_TEXT_LABEL
, "‹xtLab–Ex™Que¡iÚ", 
GUI_LABEL_CENTER
, "Do you wisho");

423 
	`as_guiAddObjeùToSü“n
(
GUI_OBJECT_TEXT_LABEL
, "textLabelExitQuestion", "scrExitQuestion");

425 
	`as_guiC»©eObjeù
(
GUI_OBJECT_TEXT_LABEL
, "textLabelExitQuestion1");

426 
	`as_guiS‘ObjeùPos™iÚ
(
GUI_OBJECT_TEXT_LABEL
, "‹xtLab–Ex™Que¡iÚ1", 
GUI_COORD_TYPE_PERCENT
, 25, 45, 25, 25);

427 
	`as_guiS‘ObjeùLab–
(
GUI_OBJECT_TEXT_LABEL
, "‹xtLab–Ex™Que¡iÚ1", 
GUI_LABEL_CENTER
, "terminate your connection ?");

428 
	`as_guiAddObjeùToSü“n
(
GUI_OBJECT_TEXT_LABEL
, "textLabelExitQuestion1", "scrExitQuestion");

430 
	`as_guiC»©eObjeù
(
GUI_OBJECT_BUTTON
, "buttonExitYes");

431 
	`as_guiS‘ObjeùPos™iÚ
(
GUI_OBJECT_BUTTON
, "bu‰ÚEx™Yes", 
GUI_COORD_TYPE_PERCENT
, 25, 70, 50, 7);

432 
	`as_guiS‘ObjeùLab–
(
GUI_OBJECT_BUTTON
, "bu‰ÚEx™Yes", 
GUI_LABEL_CENTER
, "Confirm");

433 
	`as_guiS‘ObjeùFunùiÚs
(
GUI_OBJECT_BUTTON
, "buttonExitYes", "scr_guiHandleButtonPress", "scr_guiHandleMouseOver");

434 
	`as_guiAddObjeùToSü“n
(
GUI_OBJECT_BUTTON
, "buttonExitYes", "scrExitQuestion");

436 
	`as_guiC»©eObjeù
(
GUI_OBJECT_BUTTON
, "buttonExitCancel");

437 
	`as_guiS‘ObjeùPos™iÚ
(
GUI_OBJECT_BUTTON
, "bu‰ÚEx™Cªûl", 
GUI_COORD_TYPE_PERCENT
, 25, 80, 50, 7);

438 
	`as_guiS‘ObjeùLab–
(
GUI_OBJECT_BUTTON
, "bu‰ÚEx™Cªûl", 
GUI_LABEL_CENTER
, "Cancel");

439 
	`as_guiS‘ObjeùFunùiÚs
(
GUI_OBJECT_BUTTON
, "buttonExitCancel", "scr_guiHandleButtonPress", "scr_guiHandleMouseOver");

440 
	`as_guiAddObjeùToSü“n
(
GUI_OBJECT_BUTTON
, "buttonExitCancel", "scrExitQuestion");

442 
	}
}

447 
	$as_£tdbV®ues
()

451 
dbImagePos™iÚX
 = (
wšWidth
 - 290.0f);

452 
dbImagePos™iÚY
 = 165.0f;

455 
dbS¹X
 = 70;

456 
dbS¹Y
 = 50;

457 
dbWidth
 = (
wšWidth
 - 
dbS¹X
) - 40.0f;

458 
dbHeight
 = 
wšHeight
 - 
dbS¹Y
;

459 
dbSüŞl¥“d
 = 0.85;

460 
dbBackRed
 = 0.0;

461 
dbBackG»’
 = 0.0;

462 
dbBackBlue
 = 1.0;

463 
dbBackAÍha
 = 1.0;

464 
dbFÚtRed
 = 0.4;

465 
dbFÚtG»’
 = 0.7;

466 
dbFÚtBlue
 = 0.7;

467 
dbFÚtAÍha
 = 0.8;

468 
dbSüŞlD–ay
 = 0.35f;

469 
	}
}

474 
	$as_guiS‘upGUI
()

477 
bu‰ÚCurveX
 = 10.0f;

478 
bu‰ÚCurveY
 = 10.0f;

480 
	`as_£tupGUIMašM’u
();

481 
	`as_£tupGUISü“nO±iÚs
();

482 
	`as_guiGUIS‘upVideo
();

483 
	`as_guiGUIS‘upAudio
();

484 
	`as_guiGUIS‘upG¿phics
();

485 
	`as_guiS‘upEx™Que¡iÚ
();

486 
	`as_£tupGUIT”mš®
();

490 
	`as_guiS‘ObjeùCŞÜ
(
GUI_OBJECT_CHECKBOX
, "ALL", 
GUI_CHECKBOX_TICKED_COL
, 0.9f, 0.9f, 0.9f, 1.0f);

491 
	`as_guiS‘ObjeùCŞÜ
(
GUI_OBJECT_CHECKBOX
, "ALL", 
GUI_CHECKBOX_NOT_TICKED_COL
, 0.6f, 0.6f, 0.6f, 1.0f);

495 
	`as_guiS‘ObjeùCŞÜ
(
GUI_OBJECT_BUTTON
, "ALL", 
GUI_BUTTON_ACTIVE_COL
, 0.4f, 0.7f, 0.7f, 0.8f);

496 
	`as_guiS‘ObjeùCŞÜ
(
GUI_OBJECT_BUTTON
, "ALL", 
GUI_BUTTON_INACTIVE_COL
, 0.0f, 0.3f, 0.3f, 0.0f);

497 
	`as_guiS‘ObjeùCŞÜ
(
GUI_OBJECT_BUTTON
, "ALL", 
GUI_BUTTON_ACTIVE_EDGE_COL
, 0.6f, 0.9f, 0.9f, 0.8f);

498 
	`as_guiS‘ObjeùCŞÜ
(
GUI_OBJECT_BUTTON
, "ALL", 
GUI_BUTTON_INACTIVE_EDGE_COL
, 0.2f, 0.5f, 0.5f, 0.0f);

499 
	`as_guiS‘ObjeùCŞÜ
(
GUI_OBJECT_BUTTON
, "ALL", 
GUI_BUTTON_ACTIVE_LABEL_COL
, 0.0f, 0.2f, 0.2f, 0.8f);

500 
	`as_guiS‘ObjeùCŞÜ
(
GUI_OBJECT_BUTTON
, "ALL", 
GUI_BUTTON_INACTIVE_LABEL_COL
, 0.2f, 0.5f, 0.5f, 0.0f);

504 
	`as_guiS‘ObjeùCŞÜ
(
GUI_OBJECT_TEXT_LABEL
, "ALL", 
GUI_OBJECT_TEXT_LABEL_COLOR
, 0.4f, 0.7f, 0.7f, 0.8f);

505 
	}
}

	@../data/scripts/gui_terminal.sc

5 
	gTERM_MODE_MENU
 = 0;

6 
	gTERM_MODE_DB
 = 1;

7 
	gTERM_MODE_LEVEL
 = 2;

8 
	gTERM_MODE_SIDE
 = 3;

12 
	$as_d¿wT”mš®M’u
()

15 
di¡ªûY
;

16 
¡¬tX
, 
¡¬tY
;

17 
‹rm0PosX
, 
‹rm0PosY
, 
‹rm1PosX
, 
‹rm1PosY
, 
‹rm2PosX
, 
‹rm2PosY
, 
‹rm3PosX
, 
‹rm3PosY
;

18 
‹xtS·û
;

19 
aùiveOff£t
 = 5;

21 
¡¬tX
 = 50.0f;

22 
¡¬tY
 = 75.0f;

23 
‹xtS·û
 = 95.0f;

25 
di¡ªûY
 = 
wšHeight
 - 75;

26 
di¡ªûY
 -= 100;

27 
di¡ªûY
 /= 4;

29 
‹rm0PosX
 = 
¡¬tX
 + 32.0f;

30 
‹rm0PosY
 = 
¡¬tY
 + 
di¡ªûY
 + 32.0f;

32 
‹rm1PosX
 = 
¡¬tX
;

33 
‹rm1PosY
 = 
¡¬tY
 + (
di¡ªûY
 * 2);

35 
‹rm2PosX
 = 
¡¬tX
;

36 
‹rm2PosY
 = 
¡¬tY
 + (
di¡ªûY
 * 3);

38 
‹rm3PosX
 = 
¡¬tX
;

39 
‹rm3PosY
 = 
¡¬tY
 + (
di¡ªûY
 * 4);

41 
	`sys_£tFÚt
(
FONT_LARGE
);

43 ià(
cu¼’tT”mM’u
 =ğ
TERM_MODE_MENU
)

45 
	`gam_d¿wS´™eFromSüt
(
‹rm0Index
, 
‹rm0PosX
 + 
aùiveOff£t
, 
‹rm0PosY
, 1.0f, 1.0f, 1.0f, 1.0f);

46 
	`sys_£tFÚtCŞÜ
(1.0f, 1.0f, 1.0f, 1.0f);

47 
	`sys_´štSŒšg
(
‹rm0PosX
 + 
‹xtS·û
 - 28.0, 
‹rm0PosY
 - 24.0f, "Logoff");

51 
	`gam_d¿wS´™eFromSüt
(
‹rm0Index
, 
‹rm0PosX
, 
‹rm0PosY
, 0.5f, 0.5f, 0.5f, 1.0f);

52 
	`sys_£tFÚtCŞÜ
(0.5f, 0.5f, 0.5f, 1.0f);

53 
	`sys_´štSŒšg
(
‹rm0PosX
 + 
‹xtS·û
 - 28.0, 
‹rm0PosY
 - 24.0f, "Logoff");

58 ià(
cu¼’tT”mM’u
 =ğ
TERM_MODE_DB
)

60 
	`gam_d¿wB™m­FromSüt
(
‹rm1Index
, 
‹rm1PosX
 + 
aùiveOff£t
, 
‹rm1PosY
, 1.0f, 1.0f, 1.0f, 1.0f);

61 
	`sys_£tFÚtCŞÜ
(1.0f, 1.0f, 1.0f, 1.0f);

62 
	`sys_´štSŒšg
(
‹rm1PosX
 + 
‹xtS·û
, 
‹rm1PosY
, "Droid Description");

66 
	`gam_d¿wB™m­FromSüt
(
‹rm1Index
, 
‹rm1PosX
, 
‹rm1PosY
, 0.5f, 0.5f, 0.5f, 1.0f);

67 
	`sys_£tFÚtCŞÜ
(0.5f, 0.5f, 0.5f, 1.0f);

68 
	`sys_´štSŒšg
(
‹rm1PosX
 + 
‹xtS·û
, 
‹rm1PosY
, "Droid Description");

72 ià(
cu¼’tT”mM’u
 =ğ
TERM_MODE_LEVEL
)

74 
	`gam_d¿wB™m­FromSüt
(
‹rm2Index
, 
‹rm2PosX
 + 
aùiveOff£t
, 
‹rm2PosY
, 1.0f, 1.0f, 1.0f, 1.0f);

75 
	`sys_£tFÚtCŞÜ
(1.0f, 1.0f, 1.0f, 1.0f);

76 
	`sys_´štSŒšg
(
‹rm2PosX
 + 
‹xtS·û
, 
‹rm2PosY
, "Deck View");

80 
	`gam_d¿wB™m­FromSüt
(
‹rm2Index
, 
‹rm2PosX
, 
‹rm2PosY
, 0.5f, 0.5f, 0.5f, 1.0f);

81 
	`sys_£tFÚtCŞÜ
(0.5f, 0.5f, 0.5f, 1.0f);

82 
	`sys_´štSŒšg
(
‹rm2PosX
 + 
‹xtS·û
, 
‹rm2PosY
, "Deck View");

86 ià(
cu¼’tT”mM’u
 =ğ
TERM_MODE_SIDE
)

88 
	`gam_d¿wB™m­FromSüt
(
‹rm3Index
, 
‹rm3PosX
 + 
aùiveOff£t
, 
‹rm3PosY
, 1.0f, 1.0f, 1.0f, 1.0f);

89 
	`sys_£tFÚtCŞÜ
(1.0f, 1.0f, 1.0f, 1.0f);

90 
	`sys_´štSŒšg
(
‹rm3PosX
 + 
‹xtS·û
, 
‹rm3PosY
, "Ship View");

94 
	`gam_d¿wB™m­FromSüt
(
‹rm3Index
, 
‹rm3PosX
, 
‹rm3PosY
, 0.5f, 0.5f, 0.5f, 1.0f);

95 
	`sys_£tFÚtCŞÜ
(0.5f, 0.5f, 0.5f, 1.0f);

96 
	`sys_´štSŒšg
(
‹rm3PosX
 + 
‹xtS·û
, 
‹rm3PosY
, "Ship View");

100 
	}
}

	@../data/scripts/shutdown.sc

5 
	$as_shutdown
()

18 
	`sys_´štCÚSŒ
("Finished„unning shutdown script","");

20 
	`io_şo£CÚfigFe
();

21 
	}
}

	@../data/scripts/startup.sc

2 
	~"d©a/süts/commÚDefšes.h
"

4 
	eALLEGRO_DISPLAY_OPTIONS


6 
	mALLEGRO_RED_SIZE
,

7 
	mALLEGRO_GREEN_SIZE
,

8 
	mALLEGRO_BLUE_SIZE
,

9 
	mALLEGRO_ALPHA_SIZE
,

10 
	mALLEGRO_RED_SHIFT
,

11 
	mALLEGRO_GREEN_SHIFT
,

12 
	mALLEGRO_BLUE_SHIFT
,

13 
	mALLEGRO_ALPHA_SHIFT
,

14 
	mALLEGRO_ACC_RED_SIZE
,

15 
	mALLEGRO_ACC_GREEN_SIZE
,

16 
	mALLEGRO_ACC_BLUE_SIZE
,

17 
	mALLEGRO_ACC_ALPHA_SIZE
,

18 
	mALLEGRO_STEREO
,

19 
	mALLEGRO_AUX_BUFFERS
,

20 
	mALLEGRO_COLOR_SIZE
,

21 
	mALLEGRO_DEPTH_SIZE
,

22 
	mALLEGRO_STENCIL_SIZE
,

23 
	mALLEGRO_SAMPLE_BUFFERS
,

24 
	mALLEGRO_SAMPLES
,

25 
	mALLEGRO_RENDER_METHOD
,

26 
	mALLEGRO_FLOAT_COLOR
,

27 
	mALLEGRO_FLOAT_DEPTH
,

28 
	mALLEGRO_SINGLE_BUFFER
,

29 
	mALLEGRO_SWAP_METHOD
,

30 
	mALLEGRO_COMPATIBLE_DISPLAY
,

31 
	mALLEGRO_UPDATE_DISPLAY_REGION
,

32 
	mALLEGRO_VSYNC
,

33 
	mALLEGRO_MAX_BITMAP_SIZE
,

34 
	mALLEGRO_SUPPORT_NPOT_BITMAP
,

35 
	mALLEGRO_CAN_DRAW_INTO_BITMAP
,

36 
	mALLEGRO_SUPPORT_SEPARATE_ALPHA
,

37 
	mALLEGRO_AUTO_CONVERT_BITMAPS
,

38 
	mALLEGRO_SUPPORTED_ORIENTATIONS
,

39 
	mALLEGRO_DISPLAY_OPTIONS_COUNT


42 
	eimpÜnû


44 
	mALLEGRO_DONTCARE
,

45 
	mALLEGRO_REQUIRE
,

46 
	mALLEGRO_SUGGEST


50 
	eALLEGRO_DISPLAY_ENUM


52 
	mALLEGRO_WINDOWED
 = 1 << 0,

53 
	mALLEGRO_FULLSCREEN
 = 1 << 1,

54 
	mALLEGRO_OPENGL
 = 1 << 2,

55 
	mALLEGRO_DIRECT3D_INTERNAL
 = 1 << 3,

56 
	mALLEGRO_RESIZABLE
 = 1 << 4,

57 
	mALLEGRO_FRAMELESS
 = 1 << 5,

58 
	mALLEGRO_NOFRAME
 = 
ALLEGRO_FRAMELESS
,

59 
	mALLEGRO_GENERATE_EXPOSE_EVENTS
 = 1 << 6,

60 
	mALLEGRO_OPENGL_3_0
 = 1 << 7,

61 
	mALLEGRO_OPENGL_FORWARD_COMPATIBLE
 = 1 << 8,

62 
	mALLEGRO_FULLSCREEN_WINDOW
 = 1 << 9,

63 
	mALLEGRO_MINIMIZED
 = 1 << 10,

64 
	mALLEGRO_PROGRAMMABLE_PIPELINE
 = 1 << 11,

65 
	mALLEGRO_GTK_TOPLEVEL_INTERNAL
 = 1 << 12

73 
	$as_lßdFÚts
()

76 
	`io_lßd‰fFÚt
(
FONT_MEDIUM
, 14.0f, "Digital.ttf");

77 
	`io_lßd‰fFÚt
(
FONT_LARGE
, 32.0f, "Digital.ttf");

78 
	`io_lßd‰fFÚt
(
FONT_GUI
, 24.0f, "Digital.ttf");

79 
	}
}

84 
	$as_£tIÁroV®ues
()

87 
šŒoS¹X
 = 50;

88 
šŒoWidth
 = 740;

89 
šŒoHeight
 = 410;

90 
šŒoSüŞl¥“d
 = 0.8;

91 
šŒoBackRed
 = 0.0;

92 
šŒoBackG»’
 = 0.0;

93 
šŒoBackBlue
 = 1.0;

94 
šŒoBackAÍha
 = 1.0;

95 
šŒoFÚtRed
 = 0.4;

96 
šŒoFÚtG»’
 = 0.7;

97 
šŒoFÚtBlue
 = 0.7;

98 
šŒoFÚtAÍha
 = 0.8;

99 
šŒoSüŞlD–ay
 = 0.75f;

100 
	}
}

105 
	$as_£tDeçuÉTeS‘
()

108 
	`io_£tTeS‘Ty³
("future");

109 
	`io_£tTeS‘CŞÜ
("green");

110 
	}
}

115 
	$as_š™GameV¬s
()

118 
»tuºBoŞ
;

120 
	`io_lßdCÚfigFe
("config.ini");

122 
wšWidth
 = 
	`io_»adCÚfigV®uesIÁ
("winWidth");

126 
wšHeight
 = 
	`io_»adCÚfigV®uesIÁ
("winHeight");

129 
as_u£Sound
 = 
	`io_»adCÚfigV®uesIÁ
("u£SoundToggË"è=ğ1 ? 
Œue
 : 
çl£
;

131 ià(
Œue
 =ğ
as_u£Sound
)

133 
vŞumeLev–
 = 
	`io_»adCÚfigV®uesIÁ
("volumeLevel");

136 
cu¼’tMode
 = 
MODE_CONSOLE
;

137 
TICKS_PER_SECOND
 = 
	`io_»adCÚfigV®uesIÁ
("TICKS_PER_SECOND");

138 
MAX_FRAMESKIP
 = 
	`io_»adCÚfigV®uesIÁ
("MAX_FRAMESKIP");

139 
SKIP_TICKS
 = (1000.0à/ 
TICKS_PER_SECOND
) * 0.001f;

141 
g¿v™y
 = 
	`io_»adCÚfigV®uesFlßt
("gravity");

143 
fuÎSü“nV®ue
 = 
	`io_»adCÚfigV®uesIÁ
("fullScreen");

145 if(1 =ğ
fuÎSü“nV®ue
)

146 
	`®_£t_Ãw_di¥Ïy_æags
(
ALLEGRO_FULLSCREEN
);

148 
	`®_£t_Ãw_di¥Ïy_æags
(
ALLEGRO_WINDOWED
);

150 
	`®_£t_Ãw_di¥Ïy_æags
(
ALLEGRO_OPENGL
);

152 
	`®_£t_Ãw_di¥Ïy_İtiÚ
(
ALLEGRO_SINGLE_BUFFER
, 0, 
ALLEGRO_SUGGEST
);

153 
	`®_£t_Ãw_di¥Ïy_İtiÚ
(
ALLEGRO_VSYNC
, 
	`io_»adCÚfigV®uesIÁ
("vsyncO±iÚ"), 
ALLEGRO_SUGGEST
);

154 
	`®_£t_Ãw_di¥Ïy_İtiÚ
(
ALLEGRO_SWAP_METHOD
, 
	`io_»adCÚfigV®uesIÁ
("sw­M‘hod"), 
ALLEGRO_SUGGEST
);

155 
	`®_£t_Ãw_di¥Ïy_İtiÚ
(
ALLEGRO_AUTO_CONVERT_BITMAPS
, 
	`io_»adCÚfigV®uesIÁ
("autoCÚv”tB™m­s"), 
ALLEGRO_SUGGEST
);

156 
	`®_£t_Ãw_di¥Ïy_»äesh_¿‹
(
	`io_»adCÚfigV®uesIÁ
("refreshRate"));

158 
´og»ssB¬LßdTimes
 = 
	`io_»adCÚfigV®uesFlßt
("progressBarLoadTimes");

161 
u£HŞdB™m­
 = 
	`io_»adCÚfigV®uesIÁ
("u£HŞdB™m­"è=ğ1 ? 
Œue
 : 
çl£
;

164 
u£BackšgB™m­
 = 
	`io_»adCÚfigV®uesIÁ
("u£BackšgB™m­"è=ğ1 ? 
Œue
 : 
çl£
;

167 
u£CŞlisiÚD‘eùiÚ
 = 
	`io_»adCÚfigV®uesIÁ
("u£CŞlisiÚD‘eùiÚ"è=ğ1 ? 
Œue
 : 
çl£
;

170 
doÜF¿meD–ay
 = 
	`io_»adCÚfigV®uesFlßt
("doorFrameDelay");

173 
®lDroidsVisibË
 = 
	`io_»adCÚfigV®uesIÁ
("®lDroidsVisibË"è=ğ1 ? 
Œue
 : 
çl£
;

176 
¶ay”MaxV–oc™y
 = 30.0f;

179 
doCÏmpPÏy”V–oc™y
 = 
	`io_»adCÚfigV®uesIÁ
("doCÏmpPÏy”V–oc™y"è=ğ1 ? 
Œue
 : 
çl£
;

182 
g_LšeOfSightS‹p
 = 1.0f;

185 
wayPoštDe¡š©iÚSize
 = 7.5f;

188 
buÎ‘T¿v–S³ed
 = 10.0f;

191 
ex¶odeF¿meD–ay
 = 20.0f;

194 
ba£DroidAnim©eV®ue
 = 35.0f;

197 
maxDi¡ªûFromP©h
 = 1.0f;

200 
moveBackToLšeSegm’t
 = 4.0f;

203 
numSrs
 = 100;

207 
wšWidth
)

210 
¡©usTextX
 = 20;

211 
scÜeTextX
 = 70;

215 
¡©usTextX
 = 32;

216 
scÜeTextX
 = 83;

220 
¡©usTextY
 = 0;

223 
scÜeD–ay
 = 6.0f;

224 
scÜeD–ayV®ue
 = 2.0f;

225 
y–lowAË¹Lev–
 = 50;

226 
»dAË¹Lev–
 = 300;

229 
as_numSam¶es
 = 8;

232 
as_numMuÉiSam¶es
 = 8;

235 
ŒªsãrDroidPosX
 = 5;

236 
ŒªsãrDroidPosY
 = 165;

237 
ŒªsãrTextPosX
 = 185;

238 
ŒªsãrTextPosY
 = 150;

239 
ŒªsãrTextHeight
 = 30;

240 
ŒªsãrT™ËPosX
 = 70;

241 
ŒªsãrT™ËPosY
 = 110;

244 
buÎ‘Di¤u±S³ed
 = 20.0f;

247 
h—lšgR©e
 = 5.0f;

250 
h—lšgTim”
 = 2.0f;

253 
cŞlisiÚDamageInæiùed
 = 2;

256 
cŞlisiÚEx¶osiÚDamage
 = 3;

259 
shDampšg
 = 0.2f;

260 
cŞlisiÚSlİ
 = 0.9f;

261 
w®lFriùiÚ
 = 0.8f;

262 
w®lRadius
 = 2.0f;

264 
¶ay”Mass
 = 0.6f;

265 
¶ay”Radius
 = 12.0f;

266 
¶ay”FriùiÚ
 = 0.5f;

267 
¶ay”EÏ¡ic
 = 0.8f;

268 
buÎ‘Mass
 = 0.8f;

270 
Ëv–BÚus
 = 500;

273 
numASrP©hs
 = 6;

276 
	}
}

	@../data/scripts/transferDroidAI.sc

1 
	~"sütT¿nsãr.h
"

2 
	~"d©a/süts/commÚDefšes.h
"

4 
	gPLAYER_TRANSFER
 = 0;

5 
	gDROID_TRANSFER
 = 1;

7 
	gMOVE_UP
 = 0;

8 
	gMOVE_DOWN
 = 1;

10 
	g’emyBlockDœeùiÚ
 = -1;

11 
boŞ
 
	gcœcu™Found
 = 
çl£
;

12 
	gÃxtCœcu™ToU£
 = 0;

13 
	gmi¡akeChªû
;

19 
	$chªûOfMi¡ake
(
droidTy³
)

22 
»tuºV®ue
;

24 
»tuºV®ue
 = (24 + 5è- 
droidTy³
;

28 ià(
»tuºV®ue
 == 0)

29 
»tuºV®ue
 = 1;

31  
»tuºV®ue
;

32 
	}
}

39 
	$fšdSu™abËCœcu™ToU£
 (
whichSide
)

42 
i
 = 0;

43 
cœcu™Ty³
 = -1;

45 
i
 = 0; i !ğ
NUM_CELLS
; i++)

47 ià(
LEFT_SIDE
 =ğ
whichSide
)

49 ià(
çl£
 =ğ
	`as_cœcu™NÙPow”ed
 (
i
, 
whichSide
) )

51 
cœcu™Ty³
 = 
ËáSide
[
i
];

57 ià(
çl£
 =ğ
	`as_cœcu™NÙPow”ed
 (
i
, 
whichSide
) )

58 
cœcu™Ty³
 = 
rightSide
[
i
];

61 ià(
cœcu™Ty³
 != -1)

63 
cœcu™Ty³
)

65 
CIRCUIT_ONE_INTO_TWO
:

66 
cœcu™Found
 = 
Œue
;

67  
i
;

70 
CIRCUIT_ONE_INTO_TWO_SHORT
:

71 
cœcu™Found
 = 
Œue
;

72  
i
;

75 
CIRCUIT_NORMAL
:

76 
CIRCUIT_NORMAL_1
:

77 
CIRCUIT_NORMAL_2
:

78 
cœcu™Found
 = 
Œue
;

79  
i
;

82 
CIRCUIT_THREEQUARTERS
:

83 
CIRCUIT_HALF
:

84 
CIRCUIT_QUARTER
:

85 
mi¡akeChªû
 = 
	`as_g‘C­³dRªdomNum
(100);

86 ià(
mi¡akeChªû
 < 
	`chªûOfMi¡ake
(
droidToT¿nsãrIÁo
))

88 
cœcu™Found
 = 
Œue
;

89  
i
;

93 
CIRCUIT_TWO_INTO_ONE
:

96 
CIRCUIT_SPLIT_HALF
:

97 
CIRCUIT_SPLIT_TWO_INTO_ONE
:

98 
mi¡akeChªû
 = 
	`as_g‘C­³dRªdomNum
(100);

99 ià(
mi¡akeChªû
 < 
	`chªûOfMi¡ake
(
droidToT¿nsãrIÁo
))

101 
cœcu™Found
 = 
Œue
;

102  
i
;

110 
	}
}

115 
	$moveEÃmyTok’
(
dœeùiÚ
)

118 ià(
MOVE_UP
 =ğ
dœeùiÚ
)

120 
droidBlockPos
--;

121 ià(
droidBlockPos
 < 0)

122 
droidBlockPos
 = 
NUM_CELLS
 - 1;

125 ià(
MOVE_DOWN
 =ğ
dœeùiÚ
)

127 
droidBlockPos
++;

128 ià(
droidBlockPos
 > 
NUM_CELLS
 - 1)

129 
droidBlockPos
 = 0;

131 
	`sys_¶aySoundFromSüt
(
SND_KEYPRESS_GOOD
, 
SND_PAN_CENTER
, 
çl£
);

132 
	}
}

137 
	$moveToCœcu™
()

144 ià(-1 =ğ
ÃxtCœcu™ToU£
)

146 
	`moveEÃmyTok’
(
MOVE_UP
);

150 ià(
droidBlockPos
 =ğ
ÃxtCœcu™ToU£
)

152 
	`Œn_¶aûTok’
(
droidBlockPos
, 
droidOnSide
, 
DROID_TRANSFER
);

153 
cœcu™Found
 = 
çl£
;

154 
droidBlockPos
 = 0;

155 
numDroidTok’s
--;

159 ià(
’emyBlockDœeùiÚ
 =ğ
MOVE_UP
)

161 
	`moveEÃmyTok’
(
MOVE_UP
);

165 
	`moveEÃmyTok’
(
MOVE_DOWN
);

168 
	}
}

173 
	$as_´oûssT¿nsãrAI
()

176 ià(
numDroidTok’s
 < 0)

179 ià(
çl£
 =ğ
cœcu™Found
)

181 
ÃxtCœcu™ToU£
 = 
	`fšdSu™abËCœcu™ToU£
 (
droidOnSide
);

182 ià(
ÃxtCœcu™ToU£
 != -1)

184 
cœcu™Found
 = 
Œue
;

185 ià(
ÃxtCœcu™ToU£
 > 7)

186 
’emyBlockDœeùiÚ
 = 
MOVE_UP
;

188 
’emyBlockDœeùiÚ
 = 
MOVE_DOWN
;

193 
	`moveToCœcu™
();

195 
	}
}

	@../data/scripts/transferGame.sc

1 
	~"sütT¿nsãr.h
"

6 
	$isCœcu™S¶™
 (
whichTy³
)

9 iàĞ(
whichTy³
 =ğ
CIRCUIT_TWO_INTO_ONE
) ||

10 (
whichTy³
 =ğ
CIRCUIT_ONE_INTO_TWO
) ||

11 (
whichTy³
 =ğ
CIRCUIT_SPLIT_HALF
) ||

12 (
whichTy³
 =ğ
CIRCUIT_SPLIT_TWO_INTO_ONE
) )

14  
TRUE
;

17  
FALSE
;

18 
	}
}

23 
	$£tupT¿nsãrC–lV®ues
()

26 
i
 = 0;

27 
¿ndNum
 = 0;

28 
¿ndEfãù
 = 0;

29 
boŞ
 
v®idCœcu™
;

31 
i
 = 0; i !ğ
NUM_CELLS
; i++)

33 
	`as_ŒªsS‘DeçuÉV®ues
 (
i
);

37 
¿ndNum
 = 
	`as_g‘C­³dRªdomNum
 (
NUM_CIRCUITS
);

38 
¿ndNum
 =„andNum + 1;

40 iàĞ(
i
 =ğ0è|| (˜=ğ
NUM_CELLS
 - 1) )

42 ià(
TRUE
 =ğ
	`isCœcu™S¶™
 (
¿ndNum
) )

43 
ËáSide
[
i
] = 
CIRCUIT_NORMAL
;

45 
ËáSide
[
i
] = 
¿ndNum
;

47 ià(
CIRCUIT_ONE_INTO_TWO
 =ğ
¿ndNum
)

49 ià(
TRUE
 =ğ
	`isCœcu™S¶™
 (
ËáSide
[
i
 - 1]) )

50 
ËáSide
[
i
] = 
CIRCUIT_NORMAL
;

53 
ËáSide
[
i
] = 
¿ndNum
;

54 
ËáSide
[
i
 - 1] = 
CIRCUIT_SPLIT_HALF
;

55 
i
++;

56 
ËáSide
[
i
] = 
CIRCUIT_SPLIT_HALF
;

59 ià(
CIRCUIT_TWO_INTO_ONE
 =ğ
¿ndNum
)

61 ià(
TRUE
 =ğ
	`isCœcu™S¶™
 (
ËáSide
[
i
 - 1]) )

62 
ËáSide
[
i
] = 
CIRCUIT_NORMAL
;

65 
ËáSide
[
i
] = 
¿ndNum
;

66 
ËáSide
[
i
 - 1] = 
CIRCUIT_SPLIT_TWO_INTO_ONE
;

67 
i
++;

68 
ËáSide
[
i
] = 
CIRCUIT_SPLIT_TWO_INTO_ONE
;

73 
ËáSide
[
i
] = 
¿ndNum
;

80 
i
 = 0; i !ğ
NUM_CELLS
; i++)

82 
	`as_ŒªsS‘DeçuÉV®ues
 (
i
);

84 
¿ndNum
 = 
	`as_g‘C­³dRªdomNum
 (
NUM_CIRCUITS
);

85 
¿ndNum
 =„andNum + 1;

87 iàĞ(
i
 =ğ0è|| (˜=ğ
NUM_CELLS
 - 1) )

89 ià(
TRUE
 =ğ
	`isCœcu™S¶™
 (
¿ndNum
) )

90 
rightSide
[
i
] = 
CIRCUIT_NORMAL
;

92 
rightSide
[
i
] = 
¿ndNum
;

94 ià(
CIRCUIT_ONE_INTO_TWO
 =ğ
¿ndNum
)

96 ià(
TRUE
 =ğ
	`isCœcu™S¶™
 (
rightSide
[
i
 - 1]) )

97 
rightSide
[
i
] = 
CIRCUIT_NORMAL
;

100 
rightSide
[
i
] = 
¿ndNum
;

101 
rightSide
[
i
 - 1] = 
CIRCUIT_SPLIT_HALF
;

102 
i
++;

103 
rightSide
[
i
] = 
CIRCUIT_SPLIT_HALF
;

106 ià(
CIRCUIT_TWO_INTO_ONE
 =ğ
¿ndNum
)

108 ià(
TRUE
 =ğ
	`isCœcu™S¶™
 (
rightSide
[ 
i
 - 1]) )

109 
rightSide
[
i
] = 
CIRCUIT_NORMAL
;

112 
rightSide
[
i
] = 
¿ndNum
;

113 
rightSide
[
i
 - 1] = 
CIRCUIT_SPLIT_TWO_INTO_ONE
;

114 
i
++;

115 
rightSide
[
i
] = 
CIRCUIT_SPLIT_TWO_INTO_ONE
;

120 
rightSide
[
i
] = 
¿ndNum
;

125 
i
 = 0; i !ğ
NUM_CELLS
; i++)

127 
¿ndEfãù
 = 
	`as_g‘C­³dRªdomNum
 (
MAX_EFFECT
);

128 
¿ndEfãù
 += 1;

130 ià(
ËáSide
[
i
] =ğ
CIRCUIT_NORMAL
)

132 ià(
¿ndEfãù
 =ğ
CIRCUIT_REVERSED
)

133 
	`as_ŒªS‘EfãùTy³
 (
i
, 
LEFT_SIDE
, 
CIRCUIT_REVERSED
);

134 ià(
¿ndEfãù
 =ğ
CIRCUIT_REPEATER
)

135 
	`as_ŒªS‘EfãùTy³
 (
i
, 
LEFT_SIDE
, 
CIRCUIT_REPEATER
);

138 
¿ndEfãù
 = 
	`as_g‘C­³dRªdomNum
 (
MAX_EFFECT
);

139 
¿ndEfãù
 += 1;

141 ià(
rightSide
[
i
] =ğ
CIRCUIT_NORMAL
)

143 ià(
¿ndEfãù
 =ğ
CIRCUIT_REVERSED
)

144 
	`as_ŒªS‘EfãùTy³
 (
i
, 
RIGHT_SIDE
, 
CIRCUIT_REVERSED
);

145 ià(
¿ndEfãù
 =ğ
CIRCUIT_REPEATER
)

146 
	`as_ŒªS‘EfãùTy³
 (
i
, 
RIGHT_SIDE
, 
CIRCUIT_REPEATER
);

149 
	`as_ŒªS‘Cœcu™Ty³
 (
i
, 
LEFT_SIDE
, 
ËáSide
[i]);

150 
	`as_ŒªS‘Cœcu™Ty³
 (
i
, 
RIGHT_SIDE
, 
rightSide
[i]);

152 
	}
}

157 
	$£tupDeçuÉC–lV®ues
()

160 
i
 = 0;

161 
¡¬tX
 = 320;

162 
¡¬tY
 = 10;

164 
cœcu™TimeAlive
 = 5.0f;

166 
squ¬eHeight
 = (
wšHeight
 * 0.025);

167 
squ¬eWidth
 = (
wšWidth
 * 0.666);

169 
squ¬eHeight
 = 16.0f;

170 
squ¬eWidth
 = 32.0f;

172 
¡¬tX
 = (
wšWidth
 / 2è- (
squ¬eWidth
 / 2);

173 
¡¬tY
 = (
wšHeight
 - (
NUM_CELLS
 * 
squ¬eHeight
) ) - 70;

175 
i
 = 0; i !ğ
NUM_CELLS
; i++)

177 
	`as_ŒªsS‘DeçuÉV®ues
 (
i
);

178 
	`as_ŒªsS‘C–lPos
 (
i
, 
¡¬tX
, 
¡¬tY
 + (˜* 
squ¬eHeight
) );

179 
	`as_ŒªsS‘C–lCŞÜ
 (
i
, 
POWER_PURPLE
, 0.54f, 0.27f, 0.68f, 1.0f);

182 
i
 = 0; i < 
NUM_CELLS
; i++)

184 
	`as_ŒªsS‘C–lCŞÜ
 (
i
, 
POWER_YELLOW
, 1.0f, 1.0f, 0.0f, 1.0f);

185 
i
++;

187 
	`£tupT¿nsãrC–lV®ues
();

188 
	}
}

	@../data/todo.txt

2 
	gP¬tişes


4 - 
S·rk
 
äom
 
buÎ‘
 
h™tšg
 
a
 
	gw®l


5 -- 
VeùÜ
 
dœeùiÚ
 
is
 
b‘w“n
 
¶ay”
 
ªd
 
w®l
 
h™
 
	gpošt


7 - 
La£r
 
	gŒa


8 -- 
S·wÃr
 
is
 
buÎ‘
 
	gpos™iÚ


9 -- 
S·wn
 
	gtime


10 -- 
Fade
 
time


12 
	gCŞlisiÚ


13 - 
	gNÙhšg
 - 
·ss
 
	gthrough
 - 
no
 
good
 
	g»®ism


15 - 
OÃ
 
	g¡İs
, 
the
 
Ùh”
 
k“ps
 
	ggošg


17 - 
BÙh
 
¡İ
 
ªd
 
	g·u£


19 - 
Look
 
ah—d
 
ªd
 
£e
 
th”e
 
wl
 
be
 
a
 
	gcŞlisiÚ
 - 
	gso
, 
low”
 
Ëv–
 
droid
 
chªges
 
	gdœeùiÚ
?

20 - 
High”
 
Ëv–
 
	gdroid
, 
movšg
 
ç¡”
 
wl
 
ÿtch
 
	gup


22 - 
Movšg
 
š
 
§me
 
	gdœeùiÚ
, 
ç¡”
 
droid
 
m©ches
 
¥“d
 
a
 
û¹aš
 
time
 
befÜe
 
»v”sšg
 direction.

24 - 
Pass
 
mes§ges
 
b‘w“n
 
	gdroids
:

25 - 
Ët
 
me
 
·ss
 - 
droids
 
go
 
što
 
·u£
 
mode
 
ªd
 
no
 
cŞlisiÚ


26 - 
go
 
to
 
a
 
û¹aš
 
loÿtiÚ


28 - 
On
 
cŞlisiÚ
, 
e™h”
 
	g·u£
, 
Ü
 
sw­
 
	gdœeùiÚ


32 
	gG¿phics


33 - 
Ëave
 
scÜch
 
m¬k
 
aá”
 
	gex¶osiÚ
?

34 - 
	gT¿nsãr
 - 
make
 
cÚÃùiÚ
 
efãù
 
mÜe
 
nÙicŸbË
 
y–low


36 
	gSound


37 - 
PÏy
 
bË•
 
sound
 
wh’
 
droid
 
	gcŞlide
 - 
·ss
 
	gmes§ges
?

39 
	gGUI


40 - 
	gO±iÚs
 â€“ 
Sound
 
	gOn
/
	gOff
, 
Vsync
 On/Off, 
FBO
 On/Off,

41 - 
S‘
 
vŞume
 
Ëv–


43 
	gSüt


44 - 
N“d
 
to
 
	g»ad
 / 
wr™e
 
cÚfig
 
v®ues


46 
	gPhysics


47 - 
Check
 
sh­e
 
	gbuÎ‘s
 - 
Ãeds
 
a
 
»ùªgË
 
nÙ
‡ 
¥r™e
 
sized
 
	gsqu¬e


48 - 
S‘
 
Glob®
 
´İ”t›s
 
äom
 
süt


50 
	gAI


53 
	gTODO


55 
	gDONE
 - 
DoÜ
 
	gİ’šg
 / 
şosšg
 
	gsound
 - 
·n
 
	gËá
/
right
 
d•’dªt
 
Ú
 
pos™iÚ
 
»Ïtive
 
to
 
¶ay”


56 
	gDONE
 - 
Fix
 
up
 
droid
 
movšg
 
to
 
h—lšg
 
waypošt
 
¦owšg
 
—ch
 
	$te
 (
—ch
 
waypošt
)

57 
DONE
 - 
FÜ
 
—ch
 
sŞid
 
te
 â€“ dØ
a
 
boundšg
 
box


58 
DONE
 - 
FÜ
 
—ch
 
‹rmš®
, dØ
a
 
h®f
 
box


59 
DONE
 - 
Cœşe
 
sh­e
 
—ch
 
droid
 
Ú
 
Ëv–


60 
DONE
 - 
Sh­e
 
buÎ‘s
 â€“ 
cŞlide
 
w™h
 
bÙh
 
¶ay”
 
ªd
 
’emy


61 
DONE
 - 
P©rŞ
 - 
fŞlow
 
waypošts


62 
DONE
 - 
Lßd
 
sound
 
fes


63 
DONE
 - 
CÚŒŞ
 
sound
 
fes


64 
DONE
 - 
SüŞlbox


65 
DONE
 - 
Bu‰Ú


66 
DONE
 - 
D¿w
 
¥r™e
 â€“ 
usšg
 
cu¼’t
 
äame


67 
DONE
 - 
Anim©e
 
¥r™e
 â€“ 
rÙ©e
 
äame


68 
DONE
 - 
CŞÜ
 
¶ay”
 
¥r™e
 
wh™e


69 
DONE
 - 
FŞlow
 
waypošts


70 
DONE
 - 
A
* 
to
 
loÿtiÚ


71 
DONE
 - 
Make
 
scÜeS¹X
 
cÚfigu¿¿bË
 
äom
 
süt


72 
DONE
 - 
Put
 
š
 
scÜe
 
´oûss
 
routše
 
so
 
high”
 scÜ
couÁs
 
down


73 
DONE
 - 
Make
 
süts
 
hÙ
 
»lßdabË


74 
DONE
 - 
Make
 
cœcu™
 
Œªsãr
 
efãù
 - 
¥¬kË


75 
DONE
 - 
PÏy”
 
cÚŒŞs
 
Œªsãr
 
tok’s
 
ªd
 
£Ëù
 
cœcu™s
 
to
 
pow”


76 
DONE
 - 
Sound
 
mªag”


77 
DONE
 - 
Make
 
scÜe
 
th»shŞds
 
sübË


78 
DONE
 - 
Add
 
Œªsãr
, 
de¡royšg
 
droid
 
scÜe
 
to
 
cu¼’tscÜe


79 
DONE
 - 
Fix
 
wh’
 
¶ay”
 
fœes
 - 
cu¼’t
 
dœeùiÚ
, 
nÙ
 cu¼’ˆ
veùÜ


80 
DONE
 - 
Do
 
h—lšg
 
wh’
 
¶ay”
 
ov”
 h—lšg 
te


81 
DONE
 - 
Upd©e
 
®”t
 
tes
 
wh’
‡Ë¹ 
Ëv–
 
chªges


82 
DONE
 - 
EÃmy
 
·thfšd
 
to
 
a
 
h—lšg
 
te


83 
DONE
 - 
Chªged
 
Œªsãr
 
efãù
 
to
 
PRIM_POINT
 - 
nÙ
 
put_pix–
 - 
ÿn
't see yellowƒffect

84 
DONE
 - 
Chªged
 
cÚsŞe
 
to
 
u£
 
¡ršg
 
şass
 
š¡—d
 
of
 *

85 
DONE
 - 
Chªged
 
T”mš®
 
to
 
u£
 
GUI
 
sütšg
 
sy¡em


86 
DONE
 - 
G‘
 
droid
 
to
 
A
-
Sr
Ø
h—lšg
 
te
 
wh’
 
h—Éh
 
b–ow
 
û¹aš
 
Ëv–


87 
DONE
 - 
Add
 
ev’t
 
hªdlšg
 
wšdow
 
aùiÚs
, 
move
, 
şo£
 
‘c
 - 
Pau£
 
Ú
 
lo£
 
focus


88 
DONE
 - 
Put
 
š
 
®”t
 
Ëv–
 
mªagem’t
 
ªd
 
d¿w
 
cu¼’t
‡Ë¹ 
tes


89 
DONE
 - 
Add
 
bÚus
 
scÜe
 
wh’
 
®”ev–
 
is
 
nÙ
 
g»’


90 
DONE
 - 
CouÁ
 
numb”
 
of
 
droids
 
Ú
 
Ëv–
 
ªd
 
wh’
 
z”o
 
make
 
bÏck
 - 
DARK
 
tes
 
exi¡
‡nd 
lßded


91 
DONE
 - 
U£
 
sound
 
to
 
sk
 
through
 
šŒo
 
sü“ns
 
Œªsãr
 
ªd


92 
DONE
 - 
Stİ
 
¶ayšg
 
background
 
sound
 
wh’
 
Œªsãr
 
¡¬ts


93 
DONE
 - 
Süt
 
ªd
 
maš
 
´og¿m
 
ÿn
 
now
 
sh¬e
 
a
 
commÚDefšes
 
fes


94 
DONE
 - 
RÙ©šg
 
¥Ù
 
lights
 
äom
 
®”t
 
tes


95 
DONE
 - 
Di¥Ïy
 
deck
 
Çme
 
š
 deck 
v›w
 iÀ
‹rmš®


96 
DONE
 - 
New
 
g¿phics
 
‹rmš®
 
v›w
 
of
 
sh
 
Ëv–


97 
DONE
 - 
Shutdown
 
süt
 
nÙ
 
bešg
 
ÿÎed


98 
DONE
 - 
Put
 
doÜs
 
ªd
 
d‘eùiÚ
 
¬—s
 
što
 
physics
 
routšes
 
so
 
buÎ‘s
 
g‘
 
¡İ³d
 - 
chmunk
 
£nsÜs
??

99 
DONE
 - 
P¬tişe
 
sy¡em
 
buÎ‘
 
Œas
, 
ex¶osiÚs
 
ªd
 
buÎ‘s
 
h™tšg
 
w®ls


100 
DONE
 - 
BÚus
 
pošts
 
ş—ršg
 
Ëv–


101 
DONE
 - 
TuÃ
 
w—pÚ
 
»ch¬ge
 
time
 - 
Ãeds
 
to
 
be
 
lÚg”


102 
DONE
 - 
G‘
 
loÿtiÚ
 
wh”e
 
buÎ‘
 
h™
 
w®l
 
ªd
 
d¿w
 
¥¬ks
 - 
have
†oÿtiÚ 
ÿlc
 
dÚe


104 
Remove
 
b™m­
 
as£ts
 
u£d
 
š
 
Şd
 
‹rmš®
 
mode


105 
Chªge
 
ty³
 
of
 
fÚt
 
size
 
š
 
HUD


106 
V”ify
 
backup
 
b™m­FBO
 
is
 
aùu®ly
 
došg
 
som‘hšg


107 
Put
 
¡ršgs
 
što
 
ex‹º®
 
fe
 
Ü
 
süt
 
Œª¦©iÚ
 / 
ed™šg


108 - 
Süt
 
fe
 
—ch
 
Ïnguage


109 - 
Süt
 
fe
 
to
 
m­
 
Ïnguage
o file

110 - 
Add
 
Ïnguauge
 
İtiÚ
 
äom
 
süt
 
što
 
GUI


111 
MÚ™Ü
 
süt
 
fes
 
ªy
 
chªges
 - 
»lßd
 
them
 - 
Lšux
 
u£
 
šÙify


112 
Add
 
š
 "DØyou wªˆtØqu™" 
pİup
 - 
GUI
 
£tup
 
®»ady
 iÀ
süt


113 
Put
 
š
 
MODE_FINISH
 
mode
 
to
 
hªdË
 
scÜe
, 
ex™
 
sü“n
 
‘c


114 
Add
 
d—th
 / 
fšish
 
sü“n


115 
High
 
scÜe
 
bË
 
ªd
 
’‹r
 
Çme
 
sü“n


116 
Save
 
high
 
scÜe
 
to
 
fe


117 
U£
 
sound
 
to
 
sk
 
through
 
¡¬t
 
b—m
 
Úto
 
sh


118 
Do
 
timeout
 
wh’
 
š
 
a
 
Œªsã¼ed
 
droid


119 
Put
 
š
 
tutÜŸl
 
ty³
 
sü“ns
 
wh’
 
¡¬tšg
 - 
ªd
 
Œªsãr
 
game


120 
S³ed
 
afãùed
 
by
 
®”t
 
Ëv–
 ? - 
G»’
, 
®l
 
move
 
¦owly


121 
WÜk
 
out
 
di¡ªû
 
to
 
Ã¬e¡
 
®”t
 
ªd
 
çde
 
background
 
sound
 
accÜdšg
o distance

122 
B©ch
 
cÚv”t
 
sounds
 
to
 
®l
 
the
 
§me
 
Ëv–


124 
BUGS


126 
FIXED
 - 
HUD
 
nÙ
 
bešg
 
shown
 
š
 
d©aba£


127 
FIXED
 - 
D©aba£
 
image
 
nÙ
 
bešg
 
shown


128 
FIXED
 - 
S¶ash
 
sü“n
 
nÙ
 
fuÎ
 sü“n. 
D¿w_Image
 
now
 
kes
 
fuÎSü“n
 
æag
 
ªd
 
wl
 
sÿË
 
b™m­
 
to
 sü“À
size


129 
FIXED
 - 
Key´es£s
 
bešg
 
»³©ed
 
š
 
cÚsŞe


130 
FIXED
 - 
G‘
 
rid
 
of
 ' when starting console

131 
FIXED
 - 
CË¬
 
‹xt
 
¬¿y
 
aá”
 
ruÂšg
 
a
 
cÚsŞe
 
commªd


132 
FIXED
 - 
Movšg
 
to
 
ªÙh”
 
d©aba£
 
sü“n
 
æashed
 
cÚsŞe
 screen

133 
FIXED
 - 
Fix
 
up
 
´štšg
 
of
 
scÜe


134 
FIXED
 - 
Di¥Ïy
 
š
 
Pau£d
 
¡©e
 
Ü
 
nÙ
 - 
Pau£
 
toggË
 
is
‚Ù 
wÜkšg
 
´İ”ly


135 
FIXED
 - 
Background
 
»ùªgË
 
š
 
Œªsãr
 
šfÜm©iÚ
 
sü“n
 
nÙ
 
bešg
 
di¥Ïyed
 
´İ”ly


136 
FIXED
 - 
u£SoundToggË
 
is
 
nÙ
 
wÜkšg
 
äom
 
cÚfig
 
fe


137 
FIXED
 - 
Numb”
 
of
 
tok’s
 
nÙ
 
»æeùed
 
äom
 
Œªsãr
 
to
 
droid


138 
FIXED
 - 
Lßdšg
 
tes
 
š
 
¡¬tup
 
äom
 
süt
 
nÙ
 
wÜkšg
 - 
check
 
log
 
fe
 - 
ruÂšg
 
sütR–ßd
 
ªd
 
the
 
blue
 
Úes
 
­³¬


139 
FIXED
 - 
T¿nsãr
 
sü“ns
 
sk
 
wh’
 
sound
 
is
 
nÙ
 
bešg
 
u£d


140 
FIXED
 - 
Usšg
 
´e
-
ÿlcuÏ‹d
 
te
 
coÜds
 
makes
 
them
 
upside
 
down


141 
FIXED
 - 
ScÜe
 
Ãeds
 
to
 
move
 
aüoss
Ø
the
 
Ëá
 
mÜe


142 
FIXED
 - 
No
 
¶ay”
 
droid
 
d¿wn
 
š
 
Œªsãr
 
wh’
 
nÙ
 
a
 001

143 
FIXED
 - 
Chªge
 
‹xt
 
š
 
show
 
Ëv–
 
to
 
be
 
Show
 
Deck
 - 
§me
 
as
 
bÙtom
exˆ
ªd
 
m’u


144 
FIXED
 - 
Seg
 
FauÉ
 
wh’
 
fœšg
 
buÎ‘
 wh’ 
nÙ
 
´essšg
 
dœeùiÚ
 
key


145 
FIXED
 - 
Anim©e
 
droid
 
¥r™es


146 
FIXED
 - 
Di¤u±”
 
droids
 
¬e
 
fœšg
 
Ùh”
 
droid
 
¥r™es


147 
FIXED
 - 
Why
 
is
 
the
 
¥r™e
 
movem’t
 
so
 
ç¡
 
aá”
 
·u£
 
š
 
debug
, 
but
 
ªim©iÚ
 i 
ok
?

148 
FIXED
 - 
P»ssšg
 
fœe
 
aá”
 
Œªsã¼šg
 
što
 247. 
Cau£d
 
by
 
šv®id
 
buÎ‘
 
ty³
 
šdex
 
·s£d
 
to
 
b™m­
 
routšes


149 
FIXED
 - 
Text
 
š
 
HUD
 
now
 
di¥Ïyed
 
ba£d
 
Ú
 
³rûÁage
 
of
 HUD 
width


150 
FIXED
 - 
Big
 
pu½Ë
 
»ùªgË
 
š
 
Œªsãr
 
game
 - 
£ems
 
to
 
be
 
äom
 
şo£¡
…u½Ë 
»³©”
?

151 
FIXED
 - 
T¿nsãr
 - 
»v”£
 
tok’s
 
¬e
 
afãùšg
 
the
 
cŞÜ
 
w™hout
 
bešg
 
aùiv©ed


152 
FIXED
 - 
Fix
 
up
 
‹xt
 
®ignm’t
 
Ú
 
süŞlšg
 
šŒo
 - 
too
 Ğ
check
 
width
 
£‰šg
 
š
 
cÚfig
 
fe
 )

153 
FIXED
 - 
PÏy”
 
to
 
Droid
 
cŞlisiÚ
 
is
 
out
 - 
off£t
 
by
 
a
 
te
?

154 
FIXED
 - 
Rai£
 
vŞume
 
of
 
background
 
loİ
 
ªd
 
»move
 
şick
 
noi£


155 
FIXED
 - 
W™h
 
sound
 
Ú
 - 
Œªsãr
 
hªgs
 
©
 
¡age
 2 - 
showšg
 
de¡š©iÚ
 
droid
. 
Was
 
ÿÎšg
 
çde
 
routše
 
—ch
 
time
, 
»£‰šg
 
the
 fad
couÁ”


156 
FIXED
 - 
PÏy”
 
buÎ‘s
 
gošg
 
ov”
 
the
 
HUD
 
wh’
 
no
 
te
 
w®l
 
to
 
h™


157 
FIXED
 - 
PÏy”
 
buÎ‘s
 
cŞlidšg
 
wh’
 
too
 
şo£
 
a
 
w®l
 - 
check
 
deùeùiÚ
 
size
 
Ü
 
loÿtiÚ


158 
FIXED
 - 
Wh’
 
ÿlcuÏtšg
 
h—lšg
 
·th
, 
droids
 
physics
 
is
 
out
 
of
 
sync
 
w™h
 
Ú
 
sü“n
 
pos™iÚ


159 
FIXED
 - 
Stus
 
‹xt
 
nÙ
 
showšg
 
wh’
 
š
 
Œªsãr
 
mode


160 
FIXED
 - 
Stİ
 
sound
 
wh’
 
š
 
Pau£
 
mode


161 
FIXED
 - 
Physics
 
k“p
 
movšg
 
wh’
 
š
 
·u£
 
mode


162 
FIXED
 - 
Stİ
 
background
 
sound
 
wh’
 
š
 
liá
 
mode
 
ªd
 
‹rmš®
 mode

163 
FIXED
 - 
Stus
 
‹xt
 
æpšg
 
b‘w“n
 
h—lšg
 
ªd
 
move
 
wh’
 
¶ay”
 
Ú
 h—lšg 
te


164 
FIXED
 - 
PÏy”
 
shoÙšg
 
sound
, 
Úly
 
Úe
 sound 
©
 
a
 
time
 - 
Ãed
 
muÉË


165 
FIXED
 - 
Droid
 
Œªsãr
 
tok’
 
move
 
ªd
 
¶aû
 
¬’
't making sounds

166 
FIXED
 - 
ExŒa
 
Œªsãr
 
tok’
 
is
 
u£d
 
wh’
 
¶ay”
 
should
 
have
 
run
 
out


167 
FIXED
 - 
Check
 
io_»adCÚfig
 - 
£t
 
buÎ‘
 
ty³
 
to
 -1 
nÚ
 
¬med
 
droids


168 
FIXED
 - 
T¿nsãr
 
sü“n
 - 
this
 
is
 
the
 
droid
 
you
 
cÚŒŞ
 
®ways
 
shows
 001 - 
nÙ
 
cu¼’t
 droid

169 
FIXED
 - 
Di¤u±”
 
w—pÚ
 
kls
 
®l
 
droids
 
Ú
 
Ëv–
, 
visibË
 
Ü
 
nÙ


170 
FIXED
 - 
D©aba£
 
‹rmš®
 
desütiÚ
 
‹xt
 
wrÚg
 - 
off
 
by
 2

171 
FIXED
 - 
T”mš®
 
D©aba£
 - 
Droid
 
ªim©iÚ
 
dÛ¢
't change‡fter using keyso move up/down

172 
FIXED
 - 
T”mš®
 
d©aba£
 - 
shows
 
¥r™e_001
 
wh’
 
fœ¡
 
showšg
 
droid


173 
FIXED
 - 
Droids
 
ocÿsiÚ®ly
 
dÚ
't die when shot -‡fter being healed?? - Healing continues oncehey‡re offhe healingile

174 
FIXED
 - 
Stİ
 
v–oc™y
 
as
 
soÚ
‡ 
Œªsãr
 
cŞlisiÚ
 
is
 
dÚe


175 
FIXED
 - 
Aá”
 
Œªsãr
 - 
Úly
 
shÙ
 
Úû
, 
th’
 
no
 
mÜe
 - 
¡ays
 
š
 
ch¬gšg
 
mode


176 
FIXED
 - 
Di¤u±”
 
w—pÚ
 
makšg
 
Ëv–
 
go
 
d¬k
 
w™h
 
droids
 
¡l
 
Ëá
 
®ive


177 
FIXED
 - 
Di¤u±”
 
damage
 
is
 
too
 
high


178 
FIXED
 - 
Put
 
£t_gaš
 
Ú
 
§m¶es
 
muÉi
 
u£
 
as
 
w–l


179 
FIXED
 - 
PossibË
 
bug
 - 
check
 
th©
 
h—lšg
 
te
 
ÿlcu©iÚ
 
is
 
dÚe
 
wh’
 
fœ¡
 
¡¬tšg
 
Ú
 fœ¡ 
Ëv–


180 
FIXED
 - 
Stİ
 
sound
 
wh’
 
’‹ršg
 
cÚsŞe
 
mode


181 
FIXED
 - 
Debug
 
i¢
't„eflectinghe…roper‚umber ofiles

182 
FIXED
 - 
Fœ¡
 
te
 
is
 
missšg
 
Ú
 
Ëv–
 
»nd”
; 
DoÜ
 
Œigg”
 
ov”wr™šg
 
fœ¡
 
loÿtiÚ


183 
FIXED
 - 
Lev–
 
nÙ
 
gošg
 
d¬k
 
aá”
 
de¡royšg
 
®l
 
droids


185 
T¿nsãr
 
sü“n
 - 
Pu½Ë
 
side
 - 
Y–low
 
»v”£
 - 
efãù
 
gÛs
 
off
 
to
 
right


186 
In
 
Œªsãr
 
game
, 
pu½Ë
 
droid
 
side
 
som‘imes
 
u£s
 
¶ay”
 
y–low
 sid
aùiv©šg
 
	`cœcu™s
 ( 
which
 sid
nÙ
 
£t
 ??è- 
bu‰Ú
 
´ess


187 
N“d
 
time
 
³riod
 
aá”
 
Œªsãr
 
wh”e
 
¶ay”
 
i¢
't hurt byƒxplosion

188 
T¿nsãr
 
sü“ns
 
nÙ
 
»®ly
 
¿ndom


189 
Droid
 
·thfšdšg
 
brok’
 
aá”
 
™
 
h—ls


190 
Fixup
 
¶ay”
 
loÿtiÚ
 
š
 
‹rmš®
 
Ëv–
 
v›w
 - 
gam_»nd”


191 
Bug
 
š
 
·¹işes
 - 
som‘imes
 
Ëaves
 
a
 
buÎ‘
 
Œa
 
by
 
™£lf


	@../hdr/chipmunk/chipmunk.h

22 #iâdeà
CHIPMUNK_H


23 
	#CHIPMUNK_H


	)

25 
	~<¡dlib.h
>

26 
	~<m©h.h
>

28 #ifdeà
WIN32


30 
	~<m®loc.h
>

31 
	#CP_EXPORT
 
	`__deş¥ec
(
dÎexpÜt
)

	)

33 
	~<®loÿ.h
>

34 
	#CP_EXPORT


	)

37 #ifdeà
__ılu¥lus


41 
CP_EXPORT
 
ıMes§ge
(cÚ¡ *
cÚd™iÚ
, cÚ¡ *
fe
, 
lše
, 
isE¼Ü
, 
isH¬dE¼Ü
, cÚ¡ *
mes§ge
, ...);

42 #ifdeà
NDEBUG


43 
	#ıAs£¹W¬n
(
__cÚd™iÚ__
, ...)

	)

44 
	#ıAs£¹Soá
(
__cÚd™iÚ__
, ...)

	)

46 
	#ıAs£¹Soá
(
__cÚd™iÚ__
, ...èif(!(__cÚd™iÚ__)){
	`ıMes§ge
(#__cÚd™iÚ__, 
__FILE__
, 
__LINE__
, 1, 0, 
__VA_ARGS__
); 
	`abÜt
();}

	)

47 
	#ıAs£¹W¬n
(
__cÚd™iÚ__
, ...èif(!(__cÚd™iÚ__)è
	`ıMes§ge
(#__cÚd™iÚ__, 
__FILE__
, 
__LINE__
, 0, 0, 
__VA_ARGS__
)

	)

51 
	#ıAs£¹H¬d
(
__cÚd™iÚ__
, ...èif(!(__cÚd™iÚ__)){
	`ıMes§ge
(#__cÚd™iÚ__, 
__FILE__
, 
__LINE__
, 1, 1, 
__VA_ARGS__
); 
	`abÜt
();}

	)

53 
	~"chmunk_ty³s.h
"

59 #iâdeà
CP_BUFFER_BYTES


60 
	#CP_BUFFER_BYTES
 (32*1024)

	)

63 #iâdeà
ıÿÎoc


65 
	#ıÿÎoc
 
ÿÎoc


	)

68 #iâdeà
ı»®loc


70 
	#ı»®loc
 
»®loc


	)

73 #iâdeà
ıä“


75 
	#ıä“
 
ä“


	)

78 
ıA¼ay
 
	tıA¼ay
;

79 
ıHashS‘
 
	tıHashS‘
;

81 
ıBody
 
	tıBody
;

83 
ıSh­e
 
	tıSh­e
;

84 
ıCœşeSh­e
 
	tıCœşeSh­e
;

85 
ıSegm’tSh­e
 
	tıSegm’tSh­e
;

86 
ıPŞySh­e
 
	tıPŞySh­e
;

88 
ıCÚ¡¿št
 
	tıCÚ¡¿št
;

89 
ıPšJošt
 
	tıPšJošt
;

90 
ıSlideJošt
 
	tıSlideJošt
;

91 
ıPivÙJošt
 
	tıPivÙJošt
;

92 
ıGrooveJošt
 
	tıGrooveJošt
;

93 
ıDam³dS´šg
 
	tıDam³dS´šg
;

94 
ıDam³dRÙ¬yS´šg
 
	tıDam³dRÙ¬yS´šg
;

95 
ıRÙ¬yLim™Jošt
 
	tıRÙ¬yLim™Jošt
;

96 
ıR©ch‘Jošt
 
	tıR©ch‘Jošt
;

97 
ıG—rJošt
 
	tıG—rJošt
;

98 
ıSim¶eMÙÜJošt
 
	tıSim¶eMÙÜJošt
;

100 
ıCŞlisiÚHªdËr
 
	tıCŞlisiÚHªdËr
;

101 
ıCÚùPoštS‘
 
	tıCÚùPoštS‘
;

102 
ıArb™”
 
	tıArb™”
;

104 
ıS·û
 
	tıS·û
;

106 
	~"ıVeù.h
"

107 
	~"ıBB.h
"

108 
	~"ıT¿nsfÜm.h
"

109 
	~"ıS·tŸlIndex.h
"

111 
	~"ıArb™”.h
"

113 
	~"ıBody.h
"

114 
	~"ıSh­e.h
"

115 
	~"ıPŞySh­e.h
"

117 
	~"ıCÚ¡¿št.h
"

119 
	~"ıS·û.h
"

122 
	#CP_VERSION_MAJOR
 7

	)

123 
	#CP_VERSION_MINOR
 0

	)

124 
	#CP_VERSION_RELEASE
 1

	)

127 
CP_EXPORT
 cÚ¡ *
ıV”siÚSŒšg
;

131 
CP_EXPORT
 
ıFlßt
 
ıMom’tFÜCœşe
(ıFlßˆ
m
, cpFlßˆ
r1
, cpFlßˆ
r2
, 
ıVeù
 
off£t
);

135 
CP_EXPORT
 
ıFlßt
 
ıA»aFÜCœşe
(ıFlßˆ
r1
, cpFlßˆ
r2
);

139 
CP_EXPORT
 
ıFlßt
 
ıMom’tFÜSegm’t
(ıFlßˆ
m
, 
ıVeù
 
a
, cpVeù 
b
, cpFlßˆ
¿dius
);

142 
CP_EXPORT
 
ıFlßt
 
ıA»aFÜSegm’t
(
ıVeù
 
a
, cpVeù 
b
, cpFlßˆ
¿dius
);

145 
CP_EXPORT
 
ıFlßt
 
ıMom’tFÜPŞy
(ıFlßˆ
m
, 
couÁ
, cÚ¡ 
ıVeù
 *
v”ts
, cpVeù 
off£t
, cpFlßˆ
¿dius
);

149 
CP_EXPORT
 
ıFlßt
 
ıA»aFÜPŞy
(cÚ¡ 
couÁ
, cÚ¡ 
ıVeù
 *
v”ts
, cpFlßˆ
¿dius
);

152 
CP_EXPORT
 
ıVeù
 
ıC’ŒoidFÜPŞy
(cÚ¡ 
couÁ
, cÚ¡ cpVeù *
v”ts
);

155 
CP_EXPORT
 
ıFlßt
 
ıMom’tFÜBox
(ıFlßˆ
m
, cpFlßˆ
width
, cpFlßˆ
height
);

158 
CP_EXPORT
 
ıFlßt
 
ıMom’tFÜBox2
(ıFlßˆ
m
, 
ıBB
 
box
);

164 
CP_EXPORT
 
ıCÚvexHuÎ
(
couÁ
, cÚ¡ 
ıVeù
 *
v”ts
, cpVeù *
»suÉ
, *
fœ¡
, 
ıFlßt
 
tŞ
);

166 #ifdeà
_MSC_VER


167 
	~"m®loc.h
"

174 
	#CP_CONVEX_HULL
(
__couÁ__
, 
__v”ts__
, 
__couÁ_v¬__
, 
__v”ts_v¬__
) \

175 
ıVeù
 *
__v”ts_v¬__
 = (ıVeù *)
	`®loÿ
(
__couÁ__
*(cpVect)); \

176 
__couÁ_v¬__
 = 
	`ıCÚvexHuÎ
(
__couÁ__
, 
__v”ts__
, 
__v”ts_v¬__
, 
NULL
, 0.0); \

177 

	)

179 
šlše
 
ıVeù


180 
ıClo£tPoštOnSegm’t
(cÚ¡ 
ıVeù
 
p
, cÚ¡ cpVeù 
a
, cÚ¡ cpVeù 
b
)

182 
ıVeù
 
	gd–
 = 
ıvsub
(
a
, 
b
);

183 
ıFlßt
 
	gt
 = 
ıfşamp01
(
ıvdÙ
(
d–
, 
ıvsub
(
p
, 
b
))/
ıvËngthsq
(delta));

184  
ıvadd
(
b
, 
ıvmuÉ
(
d–
, 
t
));

187 #ià
defšed
(
__has_ex‹nsiÚ
)

188 #ià
__has_ex‹nsiÚ
(
blocks
)

193 
ıS·ûEachBody_b
(
ıS·û
 *
¥aû
, (^
block
)(
ıBody
 *
body
));

194 
ıS·ûEachSh­e_b
(
ıS·û
 *
¥aû
, (^
block
)(
ıSh­e
 *
sh­e
));

195 
ıS·ûEachCÚ¡¿št_b
(
ıS·û
 *
¥aû
, (^
block
)(
ıCÚ¡¿št
 *
cÚ¡¿št
));

197 
ıBodyEachSh­e_b
(
ıBody
 *
body
, (^
block
)(
ıSh­e
 *
sh­e
));

198 
ıBodyEachCÚ¡¿št_b
(
ıBody
 *
body
, (^
block
)(
ıCÚ¡¿št
 *
cÚ¡¿št
));

199 
ıBodyEachArb™”_b
(
ıBody
 *
body
, (^
block
)(
ıArb™”
 *
¬b™”
));

201 (^
	gıS·ûPoštQu”yBlock
)(
	tıSh­e
 *
	tsh­e
, 
	tıVeù
 
	tpošt
, 
	tıFlßt
 
	tdi¡ªû
, cpVeù 
	tg¿d›Á
);

202 
ıS·ûPoštQu”y_b
(
ıS·û
 *
¥aû
, 
ıVeù
 
pošt
, 
ıFlßt
 
maxDi¡ªû
, 
ıSh­eF‹r
 
f‹r
, 
ıS·ûPoštQu”yBlock
 
block
);

204 (^
	gıS·ûSegm’tQu”yBlock
)(
	tıSh­e
 *
	tsh­e
, 
	tıVeù
 
	tpošt
, cpVeù 
	tnÜm®
, 
	tıFlßt
 
	t®pha
);

205 
ıS·ûSegm’tQu”y_b
(
ıS·û
 *
¥aû
, 
ıVeù
 
¡¬t
, cpVeù 
’d
, 
ıFlßt
 
¿dius
, 
ıSh­eF‹r
 
f‹r
, 
ıS·ûSegm’tQu”yBlock
 
block
);

207 (^
	gıS·ûBBQu”yBlock
)(
	tıSh­e
 *
	tsh­e
);

208 
ıS·ûBBQu”y_b
(
ıS·û
 *
¥aû
, 
ıBB
 
bb
, 
ıSh­eF‹r
 
f‹r
, 
ıS·ûBBQu”yBlock
 
block
);

210 (^
	gıS·ûSh­eQu”yBlock
)(
	tıSh­e
 *
	tsh­e
, 
	tıCÚùPoštS‘
 *
	tpošts
);

211 
ıBoŞ
 
ıS·ûSh­eQu”y_b
(
ıS·û
 *
¥aû
, 
ıSh­e
 *
sh­e
, 
ıS·ûSh­eQu”yBlock
 
block
);

219 #ifdeà
__ılu¥lus


222 
šlše
 
ıVeù
 
	gİ”©Ü
 *(cÚ¡ cpVeù 
	gv
, cÚ¡ 
ıFlßt
 
	gs
){ 
ıvmuÉ
(
v
, 
s
);}

223 
šlše
 
ıVeù
 
	gİ”©Ü
 +(cÚ¡ cpVeù 
	gv1
, cÚ¡ cpVeù 
	gv2
){ 
ıvadd
(
v1
, 
v2
);}

224 
šlše
 
ıVeù
 
	gİ”©Ü
 -(cÚ¡ cpVeù 
	gv1
, cÚ¡ cpVeù 
	gv2
){ 
ıvsub
(
v1
, 
v2
);}

225 
šlše
 
ıBoŞ
 
	gİ”©Ü
 ==(cÚ¡ 
ıVeù
 
v1
, cÚ¡ cpVeù 
	gv2
){ 
ıveql
(v1, 
v2
);}

226 
šlše
 
ıVeù
 
	gİ”©Ü
 -(cÚ¡ cpVeù 
	gv
){ 
ıvÃg
(
v
);}

	@../hdr/chipmunk/chipmunk_ffi.h

22 #ifdeà
CHIPMUNK_FFI


28 #ifdeà
_MSC_VER


29 #ià
_MSC_VER
 >= 1600

30 
	#MAKE_REF
(
Çme
è
CP_EXPORT
 
	`deşty³
Òameè*
_
##Çmğ
	)
name

32 
	#MAKE_REF
(
Çme
)

	)

35 
	#MAKE_REF
(
Çme
è
	`__ty³of__
Òameè*
_
##Çmğ
	)
name

38 #ifdeà
__ılu¥lus


42 
MAKE_REF
(
ıv
);

43 
MAKE_REF
(
ıveql
);

44 
MAKE_REF
(
ıvadd
);

45 
MAKE_REF
(
ıvÃg
);

46 
MAKE_REF
(
ıvsub
);

47 
MAKE_REF
(
ıvmuÉ
);

48 
MAKE_REF
(
ıvdÙ
);

49 
MAKE_REF
(
ıvüoss
);

50 
MAKE_REF
(
ıv³½
);

51 
MAKE_REF
(
ıv½”p
);

52 
MAKE_REF
(
ıv´ojeù
);

53 
MAKE_REF
(
ıvfÜªgË
);

54 
MAKE_REF
(
ıvtßngË
);

55 
MAKE_REF
(
ıvrÙ©e
);

56 
MAKE_REF
(
ıvuÄÙ©e
);

57 
MAKE_REF
(
ıvËngthsq
);

58 
MAKE_REF
(
ıvËngth
);

59 
MAKE_REF
(
ıvË½
);

60 
MAKE_REF
(
ıvnÜm®ize
);

61 
MAKE_REF
(
ıvşamp
);

62 
MAKE_REF
(
ıvË½cÚ¡
);

63 
MAKE_REF
(
ıvdi¡
);

64 
MAKE_REF
(
ıvdi¡sq
);

65 
MAKE_REF
(
ıvÃ¬
);

67 
MAKE_REF
(
ıfmax
);

68 
MAKE_REF
(
ıfmš
);

69 
MAKE_REF
(
ıçbs
);

70 
MAKE_REF
(
ıfşamp
);

71 
MAKE_REF
(
ıæ”p
);

72 
MAKE_REF
(
ıæ”pcÚ¡
);

74 
MAKE_REF
(
ıBBNew
);

75 
MAKE_REF
(
ıBBNewFÜEx‹Ás
);

76 
MAKE_REF
(
ıBBNewFÜCœşe
);

77 
MAKE_REF
(
ıBBIÁ”£ùs
);

78 
MAKE_REF
(
ıBBCÚšsBB
);

79 
MAKE_REF
(
ıBBCÚšsVeù
);

80 
MAKE_REF
(
ıBBM”ge
);

81 
MAKE_REF
(
ıBBEx·nd
);

82 
MAKE_REF
(
ıBBC’‹r
);

83 
MAKE_REF
(
ıBBA»a
);

84 
MAKE_REF
(
ıBBM”gedA»a
);

85 
MAKE_REF
(
ıBBSegm’tQu”y
);

86 
MAKE_REF
(
ıBBIÁ”£ùsSegm’t
);

87 
MAKE_REF
(
ıBBCÏmpVeù
);

89 
MAKE_REF
(
ıS·tŸlIndexDe¡roy
);

90 
MAKE_REF
(
ıS·tŸlIndexCouÁ
);

91 
MAKE_REF
(
ıS·tŸlIndexEach
);

92 
MAKE_REF
(
ıS·tŸlIndexCÚšs
);

93 
MAKE_REF
(
ıS·tŸlIndexIn£¹
);

94 
MAKE_REF
(
ıS·tŸlIndexRemove
);

95 
MAKE_REF
(
ıS·tŸlIndexRešdex
);

96 
MAKE_REF
(
ıS·tŸlIndexRešdexObjeù
);

97 
MAKE_REF
(
ıS·tŸlIndexSegm’tQu”y
);

98 
MAKE_REF
(
ıS·tŸlIndexQu”y
);

99 
MAKE_REF
(
ıS·tŸlIndexRešdexQu”y
);

101 #ifdeà
__ılu¥lus


	@../hdr/chipmunk/chipmunk_private.h

22 #iâdeà
CHIPMUNK_PRIVATE_H


23 
	#CHIPMUNK_PRIVATE_H


	)

25 
	~"chmunk/chmunk.h
"

26 
	~"chmunk/chmunk_¡ruùs.h
"

28 
	#CP_HASH_COEF
 (3344921057ul)

	)

29 
	#CP_HASH_PAIR
(
A
, 
B
è((
ıHashV®ue
)(A)*
CP_HASH_COEF
 ^ (ıHashV®ue)(B)*CP_HASH_COEF)

	)

32 
	#MAGIC_EPSILON
 1e-5

	)

37 
ıA¼ay
 *
ıA¼ayNew
(
size
);

39 
ıA¼ayF»e
(
ıA¼ay
 *
¬r
);

41 
ıA¼ayPush
(
ıA¼ay
 *
¬r
, *
objeù
);

42 *
ıA¼ayPİ
(
ıA¼ay
 *
¬r
);

43 
ıA¼ayD–‘eObj
(
ıA¼ay
 *
¬r
, *
obj
);

44 
ıBoŞ
 
ıA¼ayCÚšs
(
ıA¼ay
 *
¬r
, *
±r
);

46 
ıA¼ayF»eEach
(
ıA¼ay
 *
¬r
, (
ä“Func
)(*));

51 
	$ıBoŞ
 (*
	tıHashS‘EqlFunc
)(*
	t±r
, *
	t–t
);

52 *(*
	tıHashS‘T¿nsFunc
)(*
	t±r
, *
	td©a
);

54 
ıHashS‘
 *
	`ıHashS‘New
(
size
, 
ıHashS‘EqlFunc
 
eqlFunc
);

55 
	`ıHashS‘S‘DeçuÉV®ue
(
ıHashS‘
 *
£t
, *
deçuÉ_v®ue
);

57 
	`ıHashS‘F»e
(
ıHashS‘
 *
£t
);

59 
	`ıHashS‘CouÁ
(
ıHashS‘
 *
£t
);

60 *
	`ıHashS‘In£¹
(
ıHashS‘
 *
£t
, 
ıHashV®ue
 
hash
, *
±r
, 
ıHashS‘T¿nsFunc
 
Œªs
, *
d©a
);

61 *
	`ıHashS‘Remove
(
ıHashS‘
 *
£t
, 
ıHashV®ue
 
hash
, *
±r
);

62 *
	`ıHashS‘Fšd
(
ıHashS‘
 *
£t
, 
ıHashV®ue
 
hash
, *
±r
);

64 (*
	tıHashS‘I‹¿tÜFunc
)(*
	t–t
, *
	td©a
);

65 
	`ıHashS‘Each
(
ıHashS‘
 *
£t
, 
ıHashS‘I‹¿tÜFunc
 
func
, *
d©a
);

67 
	$ıBoŞ
 (*
	tıHashS‘F‹rFunc
)(*
	t–t
, *
	td©a
);

68 
	`ıHashS‘F‹r
(
ıHashS‘
 *
£t
, 
ıHashS‘F‹rFunc
 
func
, *
d©a
);

73 
	`ıBodyAddSh­e
(
ıBody
 *
body
, 
ıSh­e
 *
sh­e
);

74 
	`ıBodyRemoveSh­e
(
ıBody
 *
body
, 
ıSh­e
 *
sh­e
);

77 
	`ıBodyAccumuÏ‹MassFromSh­es
(
ıBody
 *
body
);

79 
	`ıBodyRemoveCÚ¡¿št
(
ıBody
 *
body
, 
ıCÚ¡¿št
 *
cÚ¡¿št
);

84 
ıS·tŸlIndex
 *
	`ıS·tŸlIndexIn™
(ıS·tŸlIndex *
šdex
, 
ıS·tŸlIndexCÏss
 *
kÏss
, 
ıS·tŸlIndexBBFunc
 
bbfunc
, cpS·tŸlIndex *
¡©icIndex
);

89 
ıArb™”
* 
	`ıArb™”In™
(ıArb™” *
¬b
, 
ıSh­e
 *
a
, cpSh­*
b
);

91 
šlše
 
ıArb™”Th»ad
 *

92 
	$ıArb™”Th»adFÜBody
(
ıArb™”
 *
¬b
, 
ıBody
 *
body
)

94  (
¬b
->
body_a
 =ğ
body
 ? &¬b->
th»ad_a
 : &¬b->
th»ad_b
);

95 
	}
}

97 
ıArb™”UÁh»ad
(
ıArb™”
 *
¬b
);

99 
ıArb™”Upd©e
(
ıArb™”
 *
¬b
, 
ıCŞlisiÚInfo
 *
šfo
, 
ıS·û
 *
¥aû
);

100 
ıArb™”P»S‹p
(
ıArb™”
 *
¬b
, 
ıFlßt
 
dt
, cpFlßˆ
bŸs
, cpFlßˆ
¦İ
);

101 
ıArb™”AµlyCachedImpul£
(
ıArb™”
 *
¬b
, 
ıFlßt
 
dt_cÛf
);

102 
ıArb™”AµlyImpul£
(
ıArb™”
 *
¬b
);

107 
ıSh­e
 *
ıSh­eIn™
(ıSh­*
sh­e
, cÚ¡ 
ıSh­eCÏss
 *
kÏss
, 
ıBody
 *
body
, 
ıSh­eMassInfo
 
massInfo
);

109 
šlše
 
ıBoŞ


110 
	$ıSh­eAùive
(
ıSh­e
 *
sh­e
)

114  (
sh­e
->
´ev
 || (sh­e->
body
 && sh­e->body->
sh­eLi¡
 == shape));

115 
	}
}

118 
ıCŞlisiÚInfo
 
ıCŞlide
(cÚ¡ 
ıSh­e
 *
a
, cÚ¡ cpSh­*
b
, 
ıCŞlisiÚID
 
id
, 
ıCÚù
 *
cÚùs
);

120 
šlše
 

121 
	$CœşeSegm’tQu”y
(
ıSh­e
 *
sh­e
, 
ıVeù
 
ûÁ”
, 
ıFlßt
 
r1
, cpVeù 
a
, cpVeù 
b
, cpFlßˆ
r2
, 
ıSegm’tQu”yInfo
 *
šfo
)

123 
ıVeù
 
da
 = 
	`ıvsub
(
a
, 
ûÁ”
);

124 
ıVeù
 
db
 = 
	`ıvsub
(
b
, 
ûÁ”
);

125 
ıFlßt
 
rsum
 = 
r1
 + 
r2
;

127 
ıFlßt
 
qa
 = 
	`ıvdÙ
(
da
, daè- 2.0f*ıvdÙ(da, 
db
) + cpvdot(db, db);

128 
ıFlßt
 
qb
 = 
	`ıvdÙ
(
da
, 
db
) - cpvdot(da, da);

129 
ıFlßt
 
d‘
 = 
qb
*qb - 
qa
*(
	`ıvdÙ
(
da
, daè- 
rsum
*rsum);

131 if(
d‘
 >= 0.0f){

132 
ıFlßt
 
t
 = (-
qb
 - 
	`ıfsq¹
(
d‘
))/(
qa
);

133 if(0.0f<ğ
t
 && <= 1.0f){

134 
ıVeù
 
n
 = 
	`ıvnÜm®ize
(
	`ıvË½
(
da
, 
db
, 
t
));

136 
šfo
->
sh­e
 = shape;

137 
šfo
->
pošt
 = 
	`ıvsub
(
	`ıvË½
(
a
, 
b
, 
t
), 
	`ıvmuÉ
(
n
, 
r2
));

138 
šfo
->
nÜm®
 = 
n
;

139 
šfo
->
®pha
 = 
t
;

142 
	}
}

144 
šlše
 
ıBoŞ


145 
	$ıSh­eF‹rRejeù
(
ıSh­eF‹r
 
a
, cpSh­eF‹¸
b
)

150 (
a
.
group
 !ğ0 &&‡.grou°=ğ
b
.group) ||

152 (
a
.
ÿ‹gÜ›s
 & 
b
.
mask
) == 0 ||

153 (
b
.
ÿ‹gÜ›s
 & 
a
.
mask
) == 0

155 
	}
}

157 
ıLoİIndexes
(cÚ¡ 
ıVeù
 *
v”ts
, 
couÁ
, *
¡¬t
, *
’d
);

163 
ıCÚ¡¿štIn™
(
ıCÚ¡¿št
 *
cÚ¡¿št
, cÚ¡ 
ıCÚ¡¿štCÏss
 *
kÏss
, 
ıBody
 *
a
, cpBody *
b
);

165 
šlše
 

166 
	$ıCÚ¡¿štAùiv©eBod›s
(
ıCÚ¡¿št
 *
cÚ¡¿št
)

168 
ıBody
 *
a
 = 
cÚ¡¿št
->a; 
	`ıBodyAùiv©e
(a);

169 
ıBody
 *
b
 = 
cÚ¡¿št
->b; 
	`ıBodyAùiv©e
(b);

170 
	}
}

172 
šlše
 
ıVeù


173 
	$»Ïtive_v–oc™y
(
ıBody
 *
a
, cpBody *
b
, 
ıVeù
 
r1
, cpVeù 
r2
){

174 
ıVeù
 
v1_sum
 = 
	`ıvadd
(
a
->
v
, 
	`ıvmuÉ
(
	`ıv³½
(
r1
),‡->
w
));

175 
ıVeù
 
v2_sum
 = 
	`ıvadd
(
b
->
v
, 
	`ıvmuÉ
(
	`ıv³½
(
r2
), b->
w
));

177  
	`ıvsub
(
v2_sum
, 
v1_sum
);

178 
	}
}

180 
šlše
 
ıFlßt


181 
	$nÜm®_»Ïtive_v–oc™y
(
ıBody
 *
a
, cpBody *
b
, 
ıVeù
 
r1
, cpVeù 
r2
, cpVeù 
n
){

182  
	`ıvdÙ
(
	`»Ïtive_v–oc™y
(
a
, 
b
, 
r1
, 
r2
), 
n
);

183 
	}
}

185 
šlše
 

186 
	$­¶y_impul£
(
ıBody
 *
body
, 
ıVeù
 
j
, cpVeù 
r
){

187 
body
->
v
 = 
	`ıvadd
(body->v, 
	`ıvmuÉ
(
j
, body->
m_šv
));

188 
body
->
w
 +ğbody->
i_šv
*
	`ıvüoss
(
r
, 
j
);

189 
	}
}

191 
šlše
 

192 
	$­¶y_impul£s
(
ıBody
 *
a
 , cpBody *
b
, 
ıVeù
 
r1
, cpVeù 
r2
, cpVeù 
j
)

194 
	`­¶y_impul£
(
a
, 
	`ıvÃg
(
j
), 
r1
);

195 
	`­¶y_impul£
(
b
, 
j
, 
r2
);

196 
	}
}

198 
šlše
 

199 
	$­¶y_bŸs_impul£
(
ıBody
 *
body
, 
ıVeù
 
j
, cpVeù 
r
)

201 
body
->
v_bŸs
 = 
	`ıvadd
(body->v_bŸs, 
	`ıvmuÉ
(
j
, body->
m_šv
));

202 
body
->
w_bŸs
 +ğbody->
i_šv
*
	`ıvüoss
(
r
, 
j
);

203 
	}
}

205 
šlše
 

206 
	$­¶y_bŸs_impul£s
(
ıBody
 *
a
 , cpBody *
b
, 
ıVeù
 
r1
, cpVeù 
r2
, cpVeù 
j
)

208 
	`­¶y_bŸs_impul£
(
a
, 
	`ıvÃg
(
j
), 
r1
);

209 
	`­¶y_bŸs_impul£
(
b
, 
j
, 
r2
);

210 
	}
}

212 
šlše
 
ıFlßt


213 
	$k_sÿÏr_body
(
ıBody
 *
body
, 
ıVeù
 
r
, cpVeù 
n
)

215 
ıFlßt
 
rú
 = 
	`ıvüoss
(
r
, 
n
);

216  
body
->
m_šv
 + body->
i_šv
*
rú
*rcn;

217 
	}
}

219 
šlše
 
ıFlßt


220 
	$k_sÿÏr
(
ıBody
 *
a
, cpBody *
b
, 
ıVeù
 
r1
, cpVeù 
r2
, cpVeù 
n
)

222 
ıFlßt
 
v®ue
 = 
	`k_sÿÏr_body
(
a
, 
r1
, 
n
è+ k_sÿÏr_body(
b
, 
r2
,‚);

223 
	`ıAs£¹Soá
(
v®ue
 != 0.0, "Unsolvable collision or constraint.");

225  
v®ue
;

226 
	}
}

228 
šlše
 
ıM©2x2


229 
	$k_‹nsÜ
(
ıBody
 *
a
, cpBody *
b
, 
ıVeù
 
r1
, cpVeù 
r2
)

231 
ıFlßt
 
m_sum
 = 
a
->
m_šv
 + 
b
->m_inv;

234 
ıFlßt
 
k11
 = 
m_sum
, 
k12
 = 0.0f;

235 
ıFlßt
 
k21
 = 0.0f, 
k22
 = 
m_sum
;

238 
ıFlßt
 
a_i_šv
 = 
a
->
i_šv
;

239 
ıFlßt
 
r1xsq
 = 
r1
.
x
 *„1.x * 
a_i_šv
;

240 
ıFlßt
 
r1ysq
 = 
r1
.
y
 *„1.y * 
a_i_šv
;

241 
ıFlßt
 
r1nxy
 = -
r1
.
x
 *„1.
y
 * 
a_i_šv
;

242 
k11
 +ğ
r1ysq
; 
k12
 +ğ
r1nxy
;

243 
k21
 +ğ
r1nxy
; 
k22
 +ğ
r1xsq
;

246 
ıFlßt
 
b_i_šv
 = 
b
->
i_šv
;

247 
ıFlßt
 
r2xsq
 = 
r2
.
x
 *„2.x * 
b_i_šv
;

248 
ıFlßt
 
r2ysq
 = 
r2
.
y
 *„2.y * 
b_i_šv
;

249 
ıFlßt
 
r2nxy
 = -
r2
.
x
 *„2.
y
 * 
b_i_šv
;

250 
k11
 +ğ
r2ysq
; 
k12
 +ğ
r2nxy
;

251 
k21
 +ğ
r2nxy
; 
k22
 +ğ
r2xsq
;

254 
ıFlßt
 
d‘
 = 
k11
*
k22
 - 
k12
*
k21
;

255 
	`ıAs£¹Soá
(
d‘
 != 0.0, "Unsolvable constraint.");

257 
ıFlßt
 
d‘_šv
 = 1.0f/
d‘
;

258  
	`ıM©2x2New
(

259 
k22
*
d‘_šv
, -
k12
*det_inv,

260 -
k21
*
d‘_šv
, 
k11
*det_inv

262 
	}
}

264 
šlše
 
ıFlßt


265 
	$bŸs_cÛf
(
ıFlßt
 
”rÜBŸs
, cpFlßˆ
dt
)

267  1.0à- 
	`ıåow
(
”rÜBŸs
, 
dt
);

268 
	}
}

273 
	#ıAs£¹S·ûUÆocked
(
¥aû
) \

274 
	`ıAs£¹H¬d
(!
¥aû
->
locked
, \

277 );

	)

279 
ıS·ûS‘SticBody
(
ıS·û
 *
¥aû
, 
ıBody
 *
body
);

281 
ıCŞlisiÚHªdËr
 
ıCŞlisiÚHªdËrDoNÙhšg
;

283 
ıS·ûProûssCompÚ’ts
(
ıS·û
 *
¥aû
, 
ıFlßt
 
dt
);

285 
ıS·ûPushF»shCÚùBufãr
(
ıS·û
 *
¥aû
);

286 
ıCÚù
 *
ıCÚùBufãrG‘A¼ay
(
ıS·û
 *
¥aû
);

287 
ıS·ûPushCÚùs
(
ıS·û
 *
¥aû
, 
couÁ
);

289 
ıPo¡S‹pC®lback
 *
ıS·ûG‘Po¡S‹pC®lback
(
ıS·û
 *
¥aû
, *
key
);

291 
ıBoŞ
 
ıS·ûArb™”S‘F‹r
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
);

292 
ıS·ûF‹rArb™”s
(
ıS·û
 *
¥aû
, 
ıBody
 *
body
, 
ıSh­e
 *
f‹r
);

294 
ıS·ûAùiv©eBody
(
ıS·û
 *
¥aû
, 
ıBody
 *
body
);

295 
ıS·ûLock
(
ıS·û
 *
¥aû
);

296 
ıS·ûUÆock
(
ıS·û
 *
¥aû
, 
ıBoŞ
 
runPo¡S‹p
);

298 
šlše
 

299 
	$ıS·ûUnÿcheArb™”
(
ıS·û
 *
¥aû
, 
ıArb™”
 *
¬b
)

301 cÚ¡ 
ıSh­e
 *
a
 = 
¬b
->a, *
b
 =‡rb->b;

302 cÚ¡ 
ıSh­e
 *
sh­e_·œ
[] = {
a
, 
b
};

303 
ıHashV®ue
 
¬bHashID
 = 
	`CP_HASH_PAIR
((ıHashV®ue)
a
, (ıHashV®ue)
b
);

304 
	`ıHashS‘Remove
(
¥aû
->
ÿchedArb™”s
, 
¬bHashID
, 
sh­e_·œ
);

305 
	`ıA¼ayD–‘eObj
(
¥aû
->
¬b™”s
, 
¬b
);

306 
	}
}

308 
šlše
 
ıA¼ay
 *

309 
	$ıS·ûA¼ayFÜBodyTy³
(
ıS·û
 *
¥aû
, 
ıBodyTy³
 
ty³
)

311  (
ty³
 =ğ
CP_BODY_TYPE_STATIC
 ? 
¥aû
->
¡©icBod›s
 : s·û->
dyÇmicBod›s
);

312 
	}
}

314 
ıSh­eUpd©eFunc
(
ıSh­e
 *
sh­e
, *
unu£d
);

315 
ıCŞlisiÚID
 
ıS·ûCŞlideSh­es
(
ıSh­e
 *
a
, cpSh­*
b
, cpCŞlisiÚID 
id
, 
ıS·û
 *
¥aû
);

320 
šlše
 
ıCÚ¡¿št
 *

321 
	$ıCÚ¡¿štNext
(
ıCÚ¡¿št
 *
node
, 
ıBody
 *
body
)

323  (
node
->
a
 =ğ
body
 ?‚ode->
Ãxt_a
 :‚ode->
Ãxt_b
);

324 
	}
}

326 
	#CP_BODY_FOREACH_CONSTRAINT
(
bdy
, 
v¬
)\

327 
ıCÚ¡¿št
 *
v¬
 = 
bdy
->
cÚ¡¿štLi¡
; v¬; v¬ = 
	`ıCÚ¡¿štNext
(v¬, bdy))

	)

329 
šlše
 
ıArb™”
 *

330 
	$ıArb™”Next
(
ıArb™”
 *
node
, 
ıBody
 *
body
)

332  (
node
->
body_a
 =ğ
body
 ?‚ode->
th»ad_a
.
Ãxt
 :‚ode->
th»ad_b
.next);

333 
	}
}

335 
	#CP_BODY_FOREACH_ARBITER
(
bdy
, 
v¬
)\

336 
ıArb™”
 *
v¬
 = 
bdy
->
¬b™”Li¡
; v¬; v¬ = 
	`ıArb™”Next
(v¬, bdy))

	)

338 
	#CP_BODY_FOREACH_SHAPE
(
body
, 
v¬
)\

339 
ıSh­e
 *
v¬
 = 
body
->
sh­eLi¡
; v¬; v¬ = v¬->
Ãxt
)

	)

341 
	#CP_BODY_FOREACH_COMPONENT
(
roÙ
, 
v¬
)\

342 
ıBody
 *
v¬
 = 
roÙ
; v¬; v¬ = v¬->
¦“pšg
.
Ãxt
)

	)

	@../hdr/chipmunk/chipmunk_structs.h

25 #iâdeà
CHIPMUNK_STRUCTS_H


26 
	#CHIPMUNK_STRUCTS_H


	)

28 
	~"chmunk/chmunk.h
"

30 
	sıA¼ay
 {

31 
	mnum
, 
	mmax
;

32 **
	m¬r
;

35 
	sıBody
 {

37 
ıBodyV–oc™yFunc
 
	mv–oc™y_func
;

38 
ıBodyPos™iÚFunc
 
	mpos™iÚ_func
;

41 
ıFlßt
 
	mm
;

42 
ıFlßt
 
	mm_šv
;

45 
ıFlßt
 
	mi
;

46 
ıFlßt
 
	mi_šv
;

49 
ıVeù
 
	mcog
;

52 
ıVeù
 
	mp
;

53 
ıVeù
 
	mv
;

54 
ıVeù
 
	mf
;

57 
ıFlßt
 
	ma
;

58 
ıFlßt
 
	mw
;

59 
ıFlßt
 
	mt
;

61 
ıT¿nsfÜm
 
	mŒªsfÜm
;

63 
ıD©aPoš‹r
 
	mu£rD©a
;

67 
ıVeù
 
	mv_bŸs
;

68 
ıFlßt
 
	mw_bŸs
;

70 
ıS·û
 *
	m¥aû
;

72 
ıSh­e
 *
	msh­eLi¡
;

73 
ıArb™”
 *
	m¬b™”Li¡
;

74 
ıCÚ¡¿št
 *
	mcÚ¡¿štLi¡
;

77 
ıBody
 *
	mroÙ
;

78 
ıBody
 *
	mÃxt
;

79 
ıFlßt
 
	midËTime
;

80 } 
	m¦“pšg
;

83 
	eıArb™”S‹
 {

85 
	mCP_ARBITER_STATE_FIRST_COLLISION
,

87 
	mCP_ARBITER_STATE_NORMAL
,

90 
	mCP_ARBITER_STATE_IGNORE
,

92 
	mCP_ARBITER_STATE_CACHED
,

94 
	mCP_ARBITER_STATE_INVALIDATED
,

97 
	sıArb™”Th»ad
 {

98 
ıArb™”
 *
	mÃxt
, *
	m´ev
;

101 
	sıCÚù
 {

102 
ıVeù
 
	mr1
, 
	mr2
;

104 
ıFlßt
 
	mnMass
, 
	mtMass
;

105 
ıFlßt
 
	mbounû
;

107 
ıFlßt
 
	mjnAcc
, 
	mjtAcc
, 
	mjBŸs
;

108 
ıFlßt
 
	mbŸs
;

110 
ıHashV®ue
 
	mhash
;

113 
	sıCŞlisiÚInfo
 {

114 cÚ¡ 
ıSh­e
 *
	ma
, *
	mb
;

115 
ıCŞlisiÚID
 
	mid
;

117 
ıVeù
 
	mn
;

119 
	mcouÁ
;

121 
ıCÚù
 *
	m¬r
;

124 
	sıArb™”
 {

125 
ıFlßt
 
	me
;

126 
ıFlßt
 
	mu
;

127 
ıVeù
 
	msurçû_vr
;

129 
ıD©aPoš‹r
 
	md©a
;

131 cÚ¡ 
ıSh­e
 *
	ma
, *
	mb
;

132 
ıBody
 *
	mbody_a
, *
	mbody_b
;

133 
ıArb™”Th»ad
 
	mth»ad_a
, 
	mth»ad_b
;

135 
	mcouÁ
;

136 
ıCÚù
 *
	mcÚùs
;

137 
ıVeù
 
	mn
;

140 
ıCŞlisiÚHªdËr
 *
	mhªdËr
, *
	mhªdËrA
, *
	mhªdËrB
;

141 
ıBoŞ
 
	msw­³d
;

143 
ıTime¡amp
 
	m¡amp
;

144 
ıArb™”S‹
 
	m¡©e
;

147 
	sıSh­eMassInfo
 {

148 
ıFlßt
 
	mm
;

149 
ıFlßt
 
	mi
;

150 
ıVeù
 
	mcog
;

151 
ıFlßt
 
	m¬—
;

154 
	eıSh­eTy³
{

155 
	mCP_CIRCLE_SHAPE
,

156 
	mCP_SEGMENT_SHAPE
,

157 
	mCP_POLY_SHAPE
,

158 
	mCP_NUM_SHAPES


159 } 
	tıSh­eTy³
;

161 
	$ıBB
 (*
	tıSh­eCacheD©aIm¶
)(
	tıSh­e
 *
	tsh­e
, 
	tıT¿nsfÜm
 
	tŒªsfÜm
);

162 (*
	tıSh­eDe¡royIm¶
)(
	tıSh­e
 *
	tsh­e
);

163 (*
	tıSh­ePoštQu”yIm¶
)(cÚ¡ 
	tıSh­e
 *
	tsh­e
, 
	tıVeù
 
	tp
, 
	tıPoštQu”yInfo
 *
	tšfo
);

164 (*
	tıSh­eSegm’tQu”yIm¶
)(cÚ¡ 
	tıSh­e
 *
	tsh­e
, 
	tıVeù
 
	ta
, cpVeù 
	tb
, 
	tıFlßt
 
	t¿dius
, 
	tıSegm’tQu”yInfo
 *
	tšfo
);

166 
ıSh­eCÏss
 
	tıSh­eCÏss
;

168 
	sıSh­eCÏss
 {

169 
ıSh­eTy³
 
ty³
;

171 
ıSh­eCacheD©aIm¶
 
ÿcheD©a
;

172 
ıSh­eDe¡royIm¶
 
de¡roy
;

173 
ıSh­ePoštQu”yIm¶
 
poštQu”y
;

174 
ıSh­eSegm’tQu”yIm¶
 
£gm’tQu”y
;

177 
	sıSh­e
 {

178 cÚ¡ 
ıSh­eCÏss
 *
kÏss
;

180 
ıS·û
 *
¥aû
;

181 
ıBody
 *
body
;

182 
ıSh­eMassInfo
 
massInfo
;

183 
ıBB
 
bb
;

185 
ıBoŞ
 
£nsÜ
;

187 
ıFlßt
 
e
;

188 
ıFlßt
 
u
;

189 
ıVeù
 
surçûV
;

191 
ıD©aPoš‹r
 
u£rD©a
;

193 
ıCŞlisiÚTy³
 
ty³
;

194 
ıSh­eF‹r
 
f‹r
;

196 
ıSh­e
 *
Ãxt
;

197 
ıSh­e
 *
´ev
;

199 
ıHashV®ue
 
hashid
;

202 
	sıCœşeSh­e
 {

203 
ıSh­e
 
sh­e
;

205 
ıVeù
 
c
, 
tc
;

206 
ıFlßt
 
r
;

209 
	sıSegm’tSh­e
 {

210 
ıSh­e
 
sh­e
;

212 
ıVeù
 
a
, 
b
, 
n
;

213 
ıVeù
 

, 
tb
, 
Š
;

214 
ıFlßt
 
r
;

216 
ıVeù
 
a_ng’t
, 
b_ng’t
;

219 
	sıS¶™tšgPÏÃ
 {

220 
ıVeù
 
v0
, 
n
;

223 
	#CP_POLY_SHAPE_INLINE_ALLOC
 6

	)

225 
	sıPŞySh­e
 {

226 
ıSh­e
 
sh­e
;

228 
ıFlßt
 
r
;

230 
couÁ
;

232 
ıS¶™tšgPÏÃ
 *
¶ªes
;

235 
ıS¶™tšgPÏÃ
 
_¶ªes
[2*
CP_POLY_SHAPE_INLINE_ALLOC
];

238 (*
	tıCÚ¡¿štP»S‹pIm¶
)(
	tıCÚ¡¿št
 *
	tcÚ¡¿št
, 
	tıFlßt
 
	tdt
);

239 (*
	tıCÚ¡¿štAµlyCachedImpul£Im¶
)(
	tıCÚ¡¿št
 *
	tcÚ¡¿št
, 
	tıFlßt
 
	tdt_cÛf
);

240 (*
	tıCÚ¡¿štAµlyImpul£Im¶
)(
	tıCÚ¡¿št
 *
	tcÚ¡¿št
, 
	tıFlßt
 
	tdt
);

241 
	$ıFlßt
 (*
	tıCÚ¡¿štG‘Impul£Im¶
)(
	tıCÚ¡¿št
 *
	tcÚ¡¿št
);

243 
	sıCÚ¡¿štCÏss
 {

244 
ıCÚ¡¿štP»S‹pIm¶
 
´eS‹p
;

245 
ıCÚ¡¿štAµlyCachedImpul£Im¶
 
­¶yCachedImpul£
;

246 
ıCÚ¡¿štAµlyImpul£Im¶
 
­¶yImpul£
;

247 
ıCÚ¡¿štG‘Impul£Im¶
 
g‘Impul£
;

248 } 
	tıCÚ¡¿štCÏss
;

250 
	sıCÚ¡¿št
 {

251 cÚ¡ 
ıCÚ¡¿štCÏss
 *
kÏss
;

253 
ıS·û
 *
¥aû
;

255 
ıBody
 *
a
, *
b
;

256 
ıCÚ¡¿št
 *
Ãxt_a
, *
Ãxt_b
;

258 
ıFlßt
 
maxFÜû
;

259 
ıFlßt
 
”rÜBŸs
;

260 
ıFlßt
 
maxBŸs
;

262 
ıBoŞ
 
cŞlideBod›s
;

264 
ıCÚ¡¿štP»SŞveFunc
 
´eSŞve
;

265 
ıCÚ¡¿štPo¡SŞveFunc
 
po¡SŞve
;

267 
ıD©aPoš‹r
 
u£rD©a
;

270 
	sıPšJošt
 {

271 
ıCÚ¡¿št
 
cÚ¡¿št
;

272 
ıVeù
 
ªchÜA
, 
ªchÜB
;

273 
ıFlßt
 
di¡
;

275 
ıVeù
 
r1
, 
r2
;

276 
ıVeù
 
n
;

277 
ıFlßt
 
nMass
;

279 
ıFlßt
 
jnAcc
;

280 
ıFlßt
 
bŸs
;

283 
	sıSlideJošt
 {

284 
ıCÚ¡¿št
 
cÚ¡¿št
;

285 
ıVeù
 
ªchÜA
, 
ªchÜB
;

286 
ıFlßt
 
mš
, 
max
;

288 
ıVeù
 
r1
, 
r2
;

289 
ıVeù
 
n
;

290 
ıFlßt
 
nMass
;

292 
ıFlßt
 
jnAcc
;

293 
ıFlßt
 
bŸs
;

296 
	sıPivÙJošt
 {

297 
ıCÚ¡¿št
 
cÚ¡¿št
;

298 
ıVeù
 
ªchÜA
, 
ªchÜB
;

300 
ıVeù
 
r1
, 
r2
;

301 
ıM©2x2
 
k
;

303 
ıVeù
 
jAcc
;

304 
ıVeù
 
bŸs
;

307 
	sıGrooveJošt
 {

308 
ıCÚ¡¿št
 
cÚ¡¿št
;

309 
ıVeù
 
grv_n
, 
grv_a
, 
grv_b
;

310 
ıVeù
 
ªchÜB
;

312 
ıVeù
 
grv_Š
;

313 
ıFlßt
 
şamp
;

314 
ıVeù
 
r1
, 
r2
;

315 
ıM©2x2
 
k
;

317 
ıVeù
 
jAcc
;

318 
ıVeù
 
bŸs
;

321 
	sıDam³dS´šg
 {

322 
ıCÚ¡¿št
 
cÚ¡¿št
;

323 
ıVeù
 
ªchÜA
, 
ªchÜB
;

324 
ıFlßt
 
»¡L’gth
;

325 
ıFlßt
 
¡ifâess
;

326 
ıFlßt
 
dampšg
;

327 
ıDam³dS´šgFÜûFunc
 
¥ršgFÜûFunc
;

329 
ıFlßt
 
rg‘_vº
;

330 
ıFlßt
 
v_cÛf
;

332 
ıVeù
 
r1
, 
r2
;

333 
ıFlßt
 
nMass
;

334 
ıVeù
 
n
;

336 
ıFlßt
 
jAcc
;

339 
	sıDam³dRÙ¬yS´šg
 {

340 
ıCÚ¡¿št
 
cÚ¡¿št
;

341 
ıFlßt
 
»¡AngË
;

342 
ıFlßt
 
¡ifâess
;

343 
ıFlßt
 
dampšg
;

344 
ıDam³dRÙ¬yS´šgTÜqueFunc
 
¥ršgTÜqueFunc
;

346 
ıFlßt
 
rg‘_wº
;

347 
ıFlßt
 
w_cÛf
;

349 
ıFlßt
 
iSum
;

350 
ıFlßt
 
jAcc
;

353 
	sıRÙ¬yLim™Jošt
 {

354 
ıCÚ¡¿št
 
cÚ¡¿št
;

355 
ıFlßt
 
mš
, 
max
;

357 
ıFlßt
 
iSum
;

359 
ıFlßt
 
bŸs
;

360 
ıFlßt
 
jAcc
;

363 
	sıR©ch‘Jošt
 {

364 
ıCÚ¡¿št
 
cÚ¡¿št
;

365 
ıFlßt
 
ªgË
, 
pha£
, 
¿tch‘
;

367 
ıFlßt
 
iSum
;

369 
ıFlßt
 
bŸs
;

370 
ıFlßt
 
jAcc
;

373 
	sıG—rJošt
 {

374 
ıCÚ¡¿št
 
cÚ¡¿št
;

375 
ıFlßt
 
pha£
, 
¿tio
;

376 
ıFlßt
 
¿tio_šv
;

378 
ıFlßt
 
iSum
;

380 
ıFlßt
 
bŸs
;

381 
ıFlßt
 
jAcc
;

384 
	sıSim¶eMÙÜ
 {

385 
ıCÚ¡¿št
 
cÚ¡¿št
;

386 
ıFlßt
 
¿‹
;

388 
ıFlßt
 
iSum
;

390 
ıFlßt
 
jAcc
;

393 
ıCÚùBufãrH—d”
 
	tıCÚùBufãrH—d”
;

394 (*
	tıS·ûArb™”AµlyImpul£Func
)(
	tıArb™”
 *
	t¬b
);

396 
	sıS·û
 {

397 
™”©iÚs
;

399 
ıVeù
 
g¿v™y
;

400 
ıFlßt
 
dampšg
;

402 
ıFlßt
 
idËS³edTh»shŞd
;

403 
ıFlßt
 
¦“pTimeTh»shŞd
;

405 
ıFlßt
 
cŞlisiÚSlİ
;

406 
ıFlßt
 
cŞlisiÚBŸs
;

407 
ıTime¡amp
 
cŞlisiÚP”si¡’û
;

409 
ıD©aPoš‹r
 
u£rD©a
;

411 
ıTime¡amp
 
¡amp
;

412 
ıFlßt
 
cu¼_dt
;

414 
ıA¼ay
 *
dyÇmicBod›s
;

415 
ıA¼ay
 *
¡©icBod›s
;

416 
ıA¼ay
 *
rou£dBod›s
;

417 
ıA¼ay
 *
¦“pšgCompÚ’ts
;

419 
ıHashV®ue
 
sh­eIDCouÁ”
;

420 
ıS·tŸlIndex
 *
¡©icSh­es
;

421 
ıS·tŸlIndex
 *
dyÇmicSh­es
;

423 
ıA¼ay
 *
cÚ¡¿šts
;

425 
ıA¼ay
 *
¬b™”s
;

426 
ıCÚùBufãrH—d”
 *
cÚùBufãrsH—d
;

427 
ıHashS‘
 *
ÿchedArb™”s
;

428 
ıA¼ay
 *
poŞedArb™”s
;

430 
ıA¼ay
 *
®loÿ‹dBufãrs
;

431 
locked
;

433 
ıBoŞ
 
u£sWdÿrds
;

434 
ıHashS‘
 *
cŞlisiÚHªdËrs
;

435 
ıCŞlisiÚHªdËr
 
deçuÉHªdËr
;

437 
ıBoŞ
 
skPo¡S‹p
;

438 
ıA¼ay
 *
po¡S‹pC®lbacks
;

440 
ıBody
 *
¡©icBody
;

441 
ıBody
 
_¡©icBody
;

444 
	sıPo¡S‹pC®lback
 {

445 
ıPo¡S‹pFunc
 
func
;

446 *
key
;

447 *
d©a
;

448 } 
	tıPo¡S‹pC®lback
;

	@../hdr/chipmunk/chipmunk_types.h

22 #iâdeà
CHIPMUNK_TYPES_H


23 
	#CHIPMUNK_TYPES_H


	)

25 
	~<¡dšt.h
>

26 
	~<æßt.h
>

27 
	~<m©h.h
>

29 #ifdeà
__APPLE__


30 
	~"T¬g‘CÚd™iÚ®s.h
"

36 #ià(
TARGET_OS_IPHONE
 || 
TARGET_OS_MAC
è&& (!
defšed
 
CP_USE_CGTYPES
)

37 
	#CP_USE_CGTYPES
 1

	)

40 #ià
CP_USE_CGTYPES


41 #ià
TARGET_OS_IPHONE


42 #impÜˆ<
CÜeG¿phics
/
CGGeom‘ry
.
h
>

43 #impÜˆ<
CÜeG¿phics
/
CGAffšeT¿nsfÜm
.
h
>

44 #–ià
TARGET_OS_MAC


45 
	~<AµliÿtiÚS”viûs/AµliÿtiÚS”viûs.h
>

48 #ià
defšed
(
__LP64__
) && __LP64__

49 
	#CP_USE_DOUBLES
 1

	)

51 
	#CP_USE_DOUBLES
 0

	)

55 #iâdeà
CP_USE_DOUBLES


57 
	#CP_USE_DOUBLES
 1

	)

64 #ià
CP_USE_DOUBLES


67 
	tıFlßt
;

68 
	#ıfsq¹
 
sq¹


	)

69 
	#ıfsš
 
sš


	)

70 
	#ıfcos
 
cos


	)

71 
	#ıçcos
 
acos


	)

72 
	#ıçn2
 
©ª2


	)

73 
	#ıfmod
 
fmod


	)

74 
	#ıãxp
 
exp


	)

75 
	#ıåow
 
pow


	)

76 
	#ıfæoÜ
 
æoÜ


	)

77 
	#ıfû
 
û


	)

78 
	#CPFLOAT_MIN
 
DBL_MIN


	)

80 
	tıFlßt
;

81 
	#ıfsq¹
 
sq¹f


	)

82 
	#ıfsš
 
sšf


	)

83 
	#ıfcos
 
cosf


	)

84 
	#ıçcos
 
acosf


	)

85 
	#ıçn2
 
©ª2f


	)

86 
	#ıfmod
 
fmodf


	)

87 
	#ıãxp
 
expf


	)

88 
	#ıåow
 
powf


	)

89 
	#ıfæoÜ
 
æoÜf


	)

90 
	#ıfû
 
ûf


	)

91 
	#CPFLOAT_MIN
 
FLT_MIN


	)

94 #iâdeà
INFINITY


95 #ifdeà
_MSC_VER


96 
	uMSVC_EVIL_FLOAT_HACK


98 
__št8
 
	mBy‹s
[4];

99 
	mV®ue
;

101 
MSVC_EVIL_FLOAT_HACK
 
	gINFINITY_HACK
 = {{0x00, 0x00, 0x80, 0x7F}};

102 
	#INFINITY
 (
INFINITY_HACK
.
V®ue
)

	)

105 #ifdeà
__GNUC__


106 
	#INFINITY
 (
	`__butš_šf
())

	)

109 #iâdeà
INFINITY


110 
	#INFINITY
 (1e1000)

	)

115 
	#CP_PI
 ((
ıFlßt
)3.14159265358979323846264338327950288)

	)

119 
šlše
 
ıFlßt
 
	$ıfmax
(
ıFlßt
 
a
, cpFlßˆ
b
)

121  (
a
 > 
b
) ?‡ : b;

122 
	}
}

125 
šlše
 
ıFlßt
 
	$ıfmš
(
ıFlßt
 
a
, cpFlßˆ
b
)

127  (
a
 < 
b
) ?‡ : b;

128 
	}
}

131 
šlše
 
ıFlßt
 
	$ıçbs
(
ıFlßt
 
f
)

133  (
f
 < 0) ? -f : f;

134 
	}
}

137 
šlše
 
ıFlßt
 
	$ıfşamp
(
ıFlßt
 
f
, cpFlßˆ
mš
, cpFlßˆ
max
)

139  
	`ıfmš
(
	`ıfmax
(
f
, 
mš
), 
max
);

140 
	}
}

143 
šlše
 
ıFlßt
 
	$ıfşamp01
(
ıFlßt
 
f
)

145  
	`ıfmax
(0.0f, 
	`ıfmš
(
f
, 1.0f));

146 
	}
}

151 
šlše
 
ıFlßt
 
	$ıæ”p
(
ıFlßt
 
f1
, cpFlßˆ
f2
, cpFlßˆ
t
)

153  
f1
*(1.0à- 
t
è+ 
f2
*t;

154 
	}
}

157 
šlše
 
ıFlßt
 
	$ıæ”pcÚ¡
(
ıFlßt
 
f1
, cpFlßˆ
f2
, cpFlßˆ
d
)

159  
f1
 + 
	`ıfşamp
(
f2
 - f1, -
d
, d);

160 
	}
}

163 #ifdeà
CP_HASH_VALUE_TYPE


164 
CP_HASH_VALUE_TYPE
 
	tıHashV®ue
;

166 
ušŒ_t
 
	tıHashV®ue
;

171 
ušt32_t
 
	tıCŞlisiÚID
;

175 #ifdeà
CP_BOOL_TYPE


176 
CP_BOOL_TYPE
 
	tıBoŞ
;

178 
	tıBoŞ
;

181 #iâdeà
ıTrue


183 
	#ıTrue
 1

	)

186 #iâdeà
ıF®£


188 
	#ıF®£
 0

	)

191 #ifdeà
CP_DATA_POINTER_TYPE


192 
CP_DATA_POINTER_TYPE
 
	tıD©aPoš‹r
;

195 * 
	tıD©aPoš‹r
;

198 #ifdeà
CP_COLLISION_TYPE_TYPE


199 
CP_COLLISION_TYPE_TYPE
 
	tıCŞlisiÚTy³
;

202 
ušŒ_t
 
	tıCŞlisiÚTy³
;

205 #ifdeà
CP_GROUP_TYPE


206 
CP_GROUP_TYPE
 
	tıGroup
;

209 
ušŒ_t
 
	tıGroup
;

212 #ifdeà
CP_BITMASK_TYPE


213 
CP_BITMASK_TYPE
 
	tıB™mask
;

216 
	tıB™mask
;

219 #ifdeà
CP_TIMESTAMP_TYPE


220 
CP_TIMESTAMP_TYPE
 
	tıTime¡amp
;

223 
	tıTime¡amp
;

226 #iâdeà
CP_NO_GROUP


228 
	#CP_NO_GROUP
 ((
ıGroup
)0)

	)

231 #iâdeà
CP_ALL_CATEGORIES


233 
	#CP_ALL_CATEGORIES
 (~(
ıB™mask
)0)

	)

236 #iâdeà
CP_WILDCARD_COLLISION_TYPE


238 
	#CP_WILDCARD_COLLISION_TYPE
 (~(
ıCŞlisiÚTy³
)0)

	)

245 #ià
CP_USE_CGTYPES


246 
CGPošt
 
	tıVeù
;

250 
	sıVeù
{
ıFlßt
 
	mx
,
	my
;} 
	tıVeù
;

253 #ià
CP_USE_CGTYPES


254 
CGAffšeT¿nsfÜm
 
	tıT¿nsfÜm
;

257 
	sıT¿nsfÜm
 {

258 
ıFlßt
 
	ma
, 
	mb
, 
	mc
, 
	md
, 
	mtx
, 
	mty
;

259 } 
	tıT¿nsfÜm
;

263 
	sıM©2x2
 {

265 
ıFlßt
 
	ma
, 
	mb
, 
	mc
, 
	md
;

266 } 
	tıM©2x2
;

	@../hdr/chipmunk/chipmunk_unsafe.h

39 #iâdeà
CHIPMUNK_UNSAFE_H


40 
	#CHIPMUNK_UNSAFE_H


	)

42 #ifdeà
__ılu¥lus


47 
CP_EXPORT
 
ıCœşeSh­eS‘Radius
(
ıSh­e
 *
sh­e
, 
ıFlßt
 
¿dius
);

49 
CP_EXPORT
 
ıCœşeSh­eS‘Off£t
(
ıSh­e
 *
sh­e
, 
ıVeù
 
off£t
);

52 
CP_EXPORT
 
ıSegm’tSh­eS‘Endpošts
(
ıSh­e
 *
sh­e
, 
ıVeù
 
a
, cpVeù 
b
);

54 
CP_EXPORT
 
ıSegm’tSh­eS‘Radius
(
ıSh­e
 *
sh­e
, 
ıFlßt
 
¿dius
);

57 
CP_EXPORT
 
ıPŞySh­eS‘V”ts
(
ıSh­e
 *
sh­e
, 
couÁ
, 
ıVeù
 *
v”ts
, 
ıT¿nsfÜm
 
ŒªsfÜm
);

58 
CP_EXPORT
 
ıPŞySh­eS‘V”tsRaw
(
ıSh­e
 *
sh­e
, 
couÁ
, 
ıVeù
 *
v”ts
);

60 
CP_EXPORT
 
ıPŞySh­eS‘Radius
(
ıSh­e
 *
sh­e
, 
ıFlßt
 
¿dius
);

62 #ifdeà
__ılu¥lus


	@../hdr/chipmunk/cpArbiter.h

29 
	#CP_MAX_CONTACTS_PER_ARBITER
 2

	)

32 
CP_EXPORT
 
ıFlßt
 
ıArb™”G‘Re¡™utiÚ
(cÚ¡ 
ıArb™”
 *
¬b
);

34 
CP_EXPORT
 
ıArb™”S‘Re¡™utiÚ
(
ıArb™”
 *
¬b
, 
ıFlßt
 
»¡™utiÚ
);

36 
CP_EXPORT
 
ıFlßt
 
ıArb™”G‘FriùiÚ
(cÚ¡ 
ıArb™”
 *
¬b
);

38 
CP_EXPORT
 
ıArb™”S‘FriùiÚ
(
ıArb™”
 *
¬b
, 
ıFlßt
 
äiùiÚ
);

41 
CP_EXPORT
 
ıVeù
 
ıArb™”G‘SurçûV–oc™y
(
ıArb™”
 *
¬b
);

45 
CP_EXPORT
 
ıArb™”S‘SurçûV–oc™y
(
ıArb™”
 *
¬b
, 
ıVeù
 
vr
);

48 
CP_EXPORT
 
ıD©aPoš‹r
 
ıArb™”G‘U£rD©a
(cÚ¡ 
ıArb™”
 *
¬b
);

51 
CP_EXPORT
 
ıArb™”S‘U£rD©a
(
ıArb™”
 *
¬b
, 
ıD©aPoš‹r
 
u£rD©a
);

55 
CP_EXPORT
 
ıVeù
 
ıArb™”TÙ®Impul£
(cÚ¡ 
ıArb™”
 *
¬b
);

58 
CP_EXPORT
 
ıFlßt
 
ıArb™”TÙ®KE
(cÚ¡ 
ıArb™”
 *
¬b
);

62 
CP_EXPORT
 
ıBoŞ
 
ıArb™”IgnÜe
(
ıArb™”
 *
¬b
);

67 
CP_EXPORT
 
ıArb™”G‘Sh­es
(cÚ¡ 
ıArb™”
 *
¬b
, 
ıSh­e
 **
a
, cpSh­**
b
);

70 
	#CP_ARBITER_GET_SHAPES
(
__¬b__
, 
__a__
, 
__b__
è
ıSh­e
 *__a__, *__b__; 
	`ıArb™”G‘Sh­es
(__¬b__, &__a__, &__b__);

	)

75 
CP_EXPORT
 
ıArb™”G‘Bod›s
(cÚ¡ 
ıArb™”
 *
¬b
, 
ıBody
 **
a
, cpBody **
b
);

78 
	#CP_ARBITER_GET_BODIES
(
__¬b__
, 
__a__
, 
__b__
è
ıBody
 *__a__, *__b__; 
	`ıArb™”G‘Bod›s
(__¬b__, &__a__, &__b__);

	)

81 
	sıCÚùPoštS‘
 {

83 
	mcouÁ
;

86 
ıVeù
 
	mnÜm®
;

91 
ıVeù
 
	mpoštA
, 
	mpoštB
;

94 
ıFlßt
 
	mdi¡ªû
;

95 } 
	mpošts
[
CP_MAX_CONTACTS_PER_ARBITER
];

99 
CP_EXPORT
 
ıCÚùPoštS‘
 
ıArb™”G‘CÚùPoštS‘
(cÚ¡ 
ıArb™”
 *
¬b
);

103 
CP_EXPORT
 
ıArb™”S‘CÚùPoštS‘
(
ıArb™”
 *
¬b
, 
ıCÚùPoštS‘
 *
£t
);

106 
CP_EXPORT
 
ıBoŞ
 
ıArb™”IsFœ¡CÚù
(cÚ¡ 
ıArb™”
 *
¬b
);

108 
CP_EXPORT
 
ıBoŞ
 
ıArb™”IsRemov®
(cÚ¡ 
ıArb™”
 *
¬b
);

111 
CP_EXPORT
 
ıArb™”G‘CouÁ
(cÚ¡ 
ıArb™”
 *
¬b
);

113 
CP_EXPORT
 
ıVeù
 
ıArb™”G‘NÜm®
(cÚ¡ 
ıArb™”
 *
¬b
);

115 
CP_EXPORT
 
ıVeù
 
ıArb™”G‘PoštA
(cÚ¡ 
ıArb™”
 *
¬b
, 
i
);

117 
CP_EXPORT
 
ıVeù
 
ıArb™”G‘PoštB
(cÚ¡ 
ıArb™”
 *
¬b
, 
i
);

119 
CP_EXPORT
 
ıFlßt
 
ıArb™”G‘D•th
(cÚ¡ 
ıArb™”
 *
¬b
, 
i
);

123 
CP_EXPORT
 
ıBoŞ
 
ıArb™”C®lWdÿrdBegšA
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
);

126 
CP_EXPORT
 
ıBoŞ
 
ıArb™”C®lWdÿrdBegšB
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
);

130 
CP_EXPORT
 
ıBoŞ
 
ıArb™”C®lWdÿrdP»SŞveA
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
);

133 
CP_EXPORT
 
ıBoŞ
 
ıArb™”C®lWdÿrdP»SŞveB
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
);

136 
CP_EXPORT
 
ıArb™”C®lWdÿrdPo¡SŞveA
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
);

138 
CP_EXPORT
 
ıArb™”C®lWdÿrdPo¡SŞveB
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
);

141 
CP_EXPORT
 
ıArb™”C®lWdÿrdS•¬©eA
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
);

143 
CP_EXPORT
 
ıArb™”C®lWdÿrdS•¬©eB
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
);

	@../hdr/chipmunk/cpBB.h

22 #iâdeà
CHIPMUNK_BB_H


23 
	#CHIPMUNK_BB_H


	)

25 
	~"chmunk_ty³s.h
"

26 
	~"ıVeù.h
"

33 
	sıBB
{

34 
ıFlßt
 
	ml
, 
	mb
, 
	mr
 ,
	mt
;

35 } 
	tıBB
;

38 
šlše
 
ıBB
 
	$ıBBNew
(cÚ¡ 
ıFlßt
 
l
, cÚ¡ cpFlßˆ
b
, cÚ¡ cpFlßˆ
r
, cÚ¡ cpFlßˆ
t
)

40 
ıBB
 
bb
 = {
l
, 
b
, 
r
, 
t
};

41  
bb
;

42 
	}
}

45 
šlše
 
ıBB


46 
	$ıBBNewFÜEx‹Ás
(cÚ¡ 
ıVeù
 
c
, cÚ¡ 
ıFlßt
 
hw
, cÚ¡ cpFlßˆ
hh
)

48  
	`ıBBNew
(
c
.
x
 - 
hw
, c.
y
 - 
hh
, c.x + hw, c.y + hh);

49 
	}
}

52 
šlše
 
ıBB
 
	$ıBBNewFÜCœşe
(cÚ¡ 
ıVeù
 
p
, cÚ¡ 
ıFlßt
 
r
)

54  
	`ıBBNewFÜEx‹Ás
(
p
, 
r
,„);

55 
	}
}

58 
šlše
 
ıBoŞ
 
	$ıBBIÁ”£ùs
(cÚ¡ 
ıBB
 
a
, cÚ¡ cpBB 
b
)

60  (
a
.
l
 <ğ
b
.
r
 && b.È<ğa.¸&&‡.b <ğb.
t
 && b.b <=‡.t);

61 
	}
}

64 
šlše
 
ıBoŞ
 
	$ıBBCÚšsBB
(cÚ¡ 
ıBB
 
bb
, cÚ¡ cpBB 
Ùh”
)

66  (
bb
.
l
 <ğ
Ùh”
.È&& bb.
r
 >ğÙh”.¸&& bb.
b
 <ğÙh”.b && bb.
t
 >= other.t);

67 
	}
}

70 
šlše
 
ıBoŞ
 
	$ıBBCÚšsVeù
(cÚ¡ 
ıBB
 
bb
, cÚ¡ 
ıVeù
 
v
)

72  (
bb
.
l
 <ğ
v
.
x
 && bb.
r
 >ğv.x && bb.
b
 <ğv.
y
 && bb.
t
 >= v.y);

73 
	}
}

76 
šlše
 
ıBB
 
	$ıBBM”ge
(cÚ¡ 
ıBB
 
a
, cÚ¡ cpBB 
b
){

77  
	`ıBBNew
(

78 
	`ıfmš
(
a
.
l
, 
b
.l),

79 
	`ıfmš
(
a
.
b
, b.b),

80 
	`ıfmax
(
a
.
r
, 
b
.r),

81 
	`ıfmax
(
a
.
t
, 
b
.t)

83 
	}
}

86 
šlše
 
ıBB
 
	$ıBBEx·nd
(cÚ¡ 
ıBB
 
bb
, cÚ¡ 
ıVeù
 
v
){

87  
	`ıBBNew
(

88 
	`ıfmš
(
bb
.
l
, 
v
.
x
),

89 
	`ıfmš
(
bb
.
b
, 
v
.
y
),

90 
	`ıfmax
(
bb
.
r
, 
v
.
x
),

91 
	`ıfmax
(
bb
.
t
, 
v
.
y
)

93 
	}
}

96 
šlše
 
ıVeù


97 
	$ıBBC’‹r
(
ıBB
 
bb
)

99  
	`ıvË½
(
	`ıv
(
bb
.
l
, bb.
b
), cpv(bb.
r
, bb.
t
), 0.5f);

100 
	}
}

103 
šlše
 
ıFlßt
 
	$ıBBA»a
(
ıBB
 
bb
)

105  (
bb
.
r
 - bb.
l
)*(bb.
t
 - bb.
b
);

106 
	}
}

109 
šlše
 
ıFlßt
 
	$ıBBM”gedA»a
(
ıBB
 
a
, cpBB 
b
)

111  (
	`ıfmax
(
a
.
r
, 
b
.rè- 
	`ıfmš
×.
l
, b.l))*(ıfmax×.
t
, b.t) - cpfmin(a.b, b.b));

112 
	}
}

115 
šlše
 
ıFlßt
 
	$ıBBSegm’tQu”y
(
ıBB
 
bb
, 
ıVeù
 
a
, cpVeù 
b
)

117 
ıVeù
 
d–
 = 
	`ıvsub
(
b
, 
a
);

118 
ıFlßt
 
tmš
 = -
INFINITY
, 
tmax
 = INFINITY;

120 if(
d–
.
x
 != 0.0f){

121 
ıFlßt
 
t1
 = (
bb
.
l
 - 
a
.
x
)/
d–
.x;

122 
ıFlßt
 
t2
 = (
bb
.
r
 - 
a
.
x
)/
d–
.x;

123 
tmš
 = 
	`ıfmax
Ñmš, 
	`ıfmš
(
t1
, 
t2
));

124 
tmax
 = 
	`ıfmš
Ñmax, 
	`ıfmax
(
t1
, 
t2
));

127 if(
d–
.
y
 != 0.0f){

128 
ıFlßt
 
t1
 = (
bb
.
b
 - 
a
.
y
)/
d–
.y;

129 
ıFlßt
 
t2
 = (
bb
.
t
 - 
a
.
y
)/
d–
.y;

130 
tmš
 = 
	`ıfmax
Ñmš, 
	`ıfmš
(
t1
, 
t2
));

131 
tmax
 = 
	`ıfmš
Ñmax, 
	`ıfmax
(
t1
, 
t2
));

134 if(
tmš
 <ğ
tmax
 && 0.0f <=max &&min <= 1.0f){

135  
	`ıfmax
(
tmš
, 0.0f);

138  
INFINITY
;

139 
	}
}

142 
šlše
 
ıBoŞ
 
	$ıBBIÁ”£ùsSegm’t
(
ıBB
 
bb
, 
ıVeù
 
a
, cpVeù 
b
)

144  (
	`ıBBSegm’tQu”y
(
bb
, 
a
, 
b
è!ğ
INFINITY
);

145 
	}
}

148 
šlše
 
ıVeù


149 
	$ıBBCÏmpVeù
(cÚ¡ 
ıBB
 
bb
, cÚ¡ 
ıVeù
 
v
)

151  
	`ıv
(
	`ıfşamp
(
v
.
x
, 
bb
.
l
, bb.
r
), cpfşamp(v.
y
, bb.
b
, bb.
t
));

152 
	}
}

155 
šlše
 
ıVeù


156 
	$ıBBW¿pVeù
(cÚ¡ 
ıBB
 
bb
, cÚ¡ 
ıVeù
 
v
)

158 
ıFlßt
 
dx
 = 
	`ıçbs
(
bb
.
r
 - bb.
l
);

159 
ıFlßt
 
modx
 = 
	`ıfmod
(
v
.
x
 - 
bb
.
l
, 
dx
);

160 
ıFlßt
 
x
 = (
modx
 > 0.0fè? modx : modx + 
dx
;

162 
ıFlßt
 
dy
 = 
	`ıçbs
(
bb
.
t
 - bb.
b
);

163 
ıFlßt
 
mody
 = 
	`ıfmod
(
v
.
y
 - 
bb
.
b
, 
dy
);

164 
ıFlßt
 
y
 = (
mody
 > 0.0fè? mody : mody + 
dy
;

166  
	`ıv
(
x
 + 
bb
.
l
, 
y
 + bb.
b
);

167 
	}
}

170 
šlše
 
ıBB


171 
	$ıBBOff£t
(cÚ¡ 
ıBB
 
bb
, cÚ¡ 
ıVeù
 
v
)

173  
	`ıBBNew
(

174 
bb
.
l
 + 
v
.
x
,

175 
bb
.
b
 + 
v
.
y
,

176 
bb
.
r
 + 
v
.
x
,

177 
bb
.
t
 + 
v
.
y


179 
	}
}

	@../hdr/chipmunk/cpBody.h

28 
	eıBodyTy³
 {

31 
	mCP_BODY_TYPE_DYNAMIC
,

36 
	mCP_BODY_TYPE_KINEMATIC
,

40 
	mCP_BODY_TYPE_STATIC
,

41 } 
	tıBodyTy³
;

44 (*
	tıBodyV–oc™yFunc
)(
	tıBody
 *
	tbody
, 
	tıVeù
 
	tg¿v™y
, 
	tıFlßt
 
	tdampšg
, cpFlßˆ
	tdt
);

46 (*
	tıBodyPos™iÚFunc
)(
	tıBody
 *
	tbody
, 
	tıFlßt
 
	tdt
);

49 
CP_EXPORT
 
ıBody
* 
	`ıBodyAÎoc
();

51 
CP_EXPORT
 
ıBody
* 
	`ıBodyIn™
(ıBody *
body
, 
ıFlßt
 
mass
, cpFlßˆ
mom’t
);

53 
CP_EXPORT
 
ıBody
* 
	`ıBodyNew
(
ıFlßt
 
mass
, cpFlßˆ
mom’t
);

56 
CP_EXPORT
 
ıBody
* 
	`ıBodyNewKšem©ic
();

58 
CP_EXPORT
 
ıBody
* 
	`ıBodyNewStic
();

61 
CP_EXPORT
 
	`ıBodyDe¡roy
(
ıBody
 *
body
);

63 
CP_EXPORT
 
	`ıBodyF»e
(
ıBody
 *
body
);

67 
CP_EXPORT
 
	`ıBodyAùiv©e
(
ıBody
 *
body
);

69 
CP_EXPORT
 
	`ıBodyAùiv©eStic
(
ıBody
 *
body
, 
ıSh­e
 *
f‹r
);

72 
CP_EXPORT
 
	`ıBodySË•
(
ıBody
 *
body
);

74 
CP_EXPORT
 
	`ıBodySË•W™hGroup
(
ıBody
 *
body
, cpBody *
group
);

77 
CP_EXPORT
 
ıBoŞ
 
	`ıBodyIsSË•šg
(cÚ¡ 
ıBody
 *
body
);

80 
CP_EXPORT
 
ıBodyTy³
 
	`ıBodyG‘Ty³
(
ıBody
 *
body
);

82 
CP_EXPORT
 
	`ıBodyS‘Ty³
(
ıBody
 *
body
, 
ıBodyTy³
 
ty³
);

85 
CP_EXPORT
 
ıS·û
* 
	`ıBodyG‘S·û
(cÚ¡ 
ıBody
 *
body
);

88 
CP_EXPORT
 
ıFlßt
 
	`ıBodyG‘Mass
(cÚ¡ 
ıBody
 *
body
);

90 
CP_EXPORT
 
	`ıBodyS‘Mass
(
ıBody
 *
body
, 
ıFlßt
 
m
);

93 
CP_EXPORT
 
ıFlßt
 
	`ıBodyG‘Mom’t
(cÚ¡ 
ıBody
 *
body
);

95 
CP_EXPORT
 
	`ıBodyS‘Mom’t
(
ıBody
 *
body
, 
ıFlßt
 
i
);

98 
CP_EXPORT
 
ıVeù
 
	`ıBodyG‘Pos™iÚ
(cÚ¡ 
ıBody
 *
body
);

100 
CP_EXPORT
 
	`ıBodyS‘Pos™iÚ
(
ıBody
 *
body
, 
ıVeù
 
pos
);

103 
CP_EXPORT
 
ıVeù
 
	`ıBodyG‘C’‹rOfG¿v™y
(cÚ¡ 
ıBody
 *
body
);

105 
CP_EXPORT
 
	`ıBodyS‘C’‹rOfG¿v™y
(
ıBody
 *
body
, 
ıVeù
 
cog
);

108 
CP_EXPORT
 
ıVeù
 
	`ıBodyG‘V–oc™y
(cÚ¡ 
ıBody
 *
body
);

110 
CP_EXPORT
 
	`ıBodyS‘V–oc™y
(
ıBody
 *
body
, 
ıVeù
 
v–oc™y
);

113 
CP_EXPORT
 
ıVeù
 
	`ıBodyG‘FÜû
(cÚ¡ 
ıBody
 *
body
);

115 
CP_EXPORT
 
	`ıBodyS‘FÜû
(
ıBody
 *
body
, 
ıVeù
 
fÜû
);

118 
CP_EXPORT
 
ıFlßt
 
	`ıBodyG‘AngË
(cÚ¡ 
ıBody
 *
body
);

120 
CP_EXPORT
 
	`ıBodyS‘AngË
(
ıBody
 *
body
, 
ıFlßt
 
a
);

123 
CP_EXPORT
 
ıFlßt
 
	`ıBodyG‘AnguÏrV–oc™y
(cÚ¡ 
ıBody
 *
body
);

125 
CP_EXPORT
 
	`ıBodyS‘AnguÏrV–oc™y
(
ıBody
 *
body
, 
ıFlßt
 
ªguÏrV–oc™y
);

128 
CP_EXPORT
 
ıFlßt
 
	`ıBodyG‘TÜque
(cÚ¡ 
ıBody
 *
body
);

130 
CP_EXPORT
 
	`ıBodyS‘TÜque
(
ıBody
 *
body
, 
ıFlßt
 
tÜque
);

133 
CP_EXPORT
 
ıVeù
 
	`ıBodyG‘RÙ©iÚ
(cÚ¡ 
ıBody
 *
body
);

136 
CP_EXPORT
 
ıD©aPoš‹r
 
	`ıBodyG‘U£rD©a
(cÚ¡ 
ıBody
 *
body
);

138 
CP_EXPORT
 
	`ıBodyS‘U£rD©a
(
ıBody
 *
body
, 
ıD©aPoš‹r
 
u£rD©a
);

141 
CP_EXPORT
 
	`ıBodyS‘V–oc™yUpd©eFunc
(
ıBody
 *
body
, 
ıBodyV–oc™yFunc
 
v–oc™yFunc
);

144 
CP_EXPORT
 
	`ıBodyS‘Pos™iÚUpd©eFunc
(
ıBody
 *
body
, 
ıBodyPos™iÚFunc
 
pos™iÚFunc
);

147 
CP_EXPORT
 
	`ıBodyUpd©eV–oc™y
(
ıBody
 *
body
, 
ıVeù
 
g¿v™y
, 
ıFlßt
 
dampšg
, cpFlßˆ
dt
);

149 
CP_EXPORT
 
	`ıBodyUpd©ePos™iÚ
(
ıBody
 *
body
, 
ıFlßt
 
dt
);

152 
CP_EXPORT
 
ıVeù
 
	`ıBodyLoÿlToWÜld
(cÚ¡ 
ıBody
 *
body
, cÚ¡ cpVeù 
pošt
);

154 
CP_EXPORT
 
ıVeù
 
	`ıBodyWÜldToLoÿl
(cÚ¡ 
ıBody
 *
body
, cÚ¡ cpVeù 
pošt
);

157 
CP_EXPORT
 
	`ıBodyAµlyFÜûAtWÜldPošt
(
ıBody
 *
body
, 
ıVeù
 
fÜû
, cpVeù 
pošt
);

159 
CP_EXPORT
 
	`ıBodyAµlyFÜûAtLoÿlPošt
(
ıBody
 *
body
, 
ıVeù
 
fÜû
, cpVeù 
pošt
);

162 
CP_EXPORT
 
	`ıBodyAµlyImpul£AtWÜldPošt
(
ıBody
 *
body
, 
ıVeù
 
impul£
, cpVeù 
pošt
);

164 
CP_EXPORT
 
	`ıBodyAµlyImpul£AtLoÿlPošt
(
ıBody
 *
body
, 
ıVeù
 
impul£
, cpVeù 
pošt
);

167 
CP_EXPORT
 
ıVeù
 
	`ıBodyG‘V–oc™yAtWÜldPošt
(cÚ¡ 
ıBody
 *
body
, cpVeù 
pošt
);

169 
CP_EXPORT
 
ıVeù
 
	`ıBodyG‘V–oc™yAtLoÿlPošt
(cÚ¡ 
ıBody
 *
body
, cpVeù 
pošt
);

172 
CP_EXPORT
 
ıFlßt
 
	`ıBodyKš‘icEÃrgy
(cÚ¡ 
ıBody
 *
body
);

175 (*
	tıBodySh­eI‹¿tÜFunc
)(
	tıBody
 *
	tbody
, 
	tıSh­e
 *
	tsh­e
, *
	td©a
);

177 
CP_EXPORT
 
	`ıBodyEachSh­e
(
ıBody
 *
body
, 
ıBodySh­eI‹¿tÜFunc
 
func
, *
d©a
);

180 (*
	tıBodyCÚ¡¿štI‹¿tÜFunc
)(
	tıBody
 *
	tbody
, 
	tıCÚ¡¿št
 *
	tcÚ¡¿št
, *
	td©a
);

182 
CP_EXPORT
 
	`ıBodyEachCÚ¡¿št
(
ıBody
 *
body
, 
ıBodyCÚ¡¿štI‹¿tÜFunc
 
func
, *
d©a
);

185 (*
	tıBodyArb™”I‹¿tÜFunc
)(
	tıBody
 *
	tbody
, 
	tıArb™”
 *
	t¬b™”
, *
	td©a
);

187 
CP_EXPORT
 
	`ıBodyEachArb™”
(
ıBody
 *
body
, 
ıBodyArb™”I‹¿tÜFunc
 
func
, *
d©a
);

	@../hdr/chipmunk/cpConstraint.h

26 (*
	tıCÚ¡¿štP»SŞveFunc
)(
	tıCÚ¡¿št
 *
	tcÚ¡¿št
, 
	tıS·û
 *
	t¥aû
);

28 (*
	tıCÚ¡¿štPo¡SŞveFunc
)(
	tıCÚ¡¿št
 *
	tcÚ¡¿št
, 
	tıS·û
 *
	t¥aû
);

31 
CP_EXPORT
 
	`ıCÚ¡¿štDe¡roy
(
ıCÚ¡¿št
 *
cÚ¡¿št
);

33 
CP_EXPORT
 
	`ıCÚ¡¿štF»e
(
ıCÚ¡¿št
 *
cÚ¡¿št
);

36 
CP_EXPORT
 
ıS·û
* 
	`ıCÚ¡¿štG‘S·û
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

39 
CP_EXPORT
 
ıBody
* 
	`ıCÚ¡¿štG‘BodyA
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

42 
CP_EXPORT
 
ıBody
* 
	`ıCÚ¡¿štG‘BodyB
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

45 
CP_EXPORT
 
ıFlßt
 
	`ıCÚ¡¿štG‘MaxFÜû
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

47 
CP_EXPORT
 
	`ıCÚ¡¿štS‘MaxFÜû
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
maxFÜû
);

50 
CP_EXPORT
 
ıFlßt
 
	`ıCÚ¡¿štG‘E¼ÜBŸs
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

54 
CP_EXPORT
 
	`ıCÚ¡¿štS‘E¼ÜBŸs
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
”rÜBŸs
);

57 
CP_EXPORT
 
ıFlßt
 
	`ıCÚ¡¿štG‘MaxBŸs
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

59 
CP_EXPORT
 
	`ıCÚ¡¿štS‘MaxBŸs
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
maxBŸs
);

62 
CP_EXPORT
 
ıBoŞ
 
	`ıCÚ¡¿štG‘CŞlideBod›s
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

64 
CP_EXPORT
 
	`ıCÚ¡¿štS‘CŞlideBod›s
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıBoŞ
 
cŞlideBod›s
);

67 
CP_EXPORT
 
ıCÚ¡¿štP»SŞveFunc
 
	`ıCÚ¡¿štG‘P»SŞveFunc
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

69 
CP_EXPORT
 
	`ıCÚ¡¿štS‘P»SŞveFunc
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıCÚ¡¿štP»SŞveFunc
 
´eSŞveFunc
);

72 
CP_EXPORT
 
ıCÚ¡¿štPo¡SŞveFunc
 
	`ıCÚ¡¿štG‘Po¡SŞveFunc
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

74 
CP_EXPORT
 
	`ıCÚ¡¿štS‘Po¡SŞveFunc
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıCÚ¡¿štPo¡SŞveFunc
 
po¡SŞveFunc
);

77 
CP_EXPORT
 
ıD©aPoš‹r
 
	`ıCÚ¡¿štG‘U£rD©a
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

79 
CP_EXPORT
 
	`ıCÚ¡¿štS‘U£rD©a
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıD©aPoš‹r
 
u£rD©a
);

82 
CP_EXPORT
 
ıFlßt
 
	`ıCÚ¡¿štG‘Impul£
(
ıCÚ¡¿št
 *
cÚ¡¿št
);

84 
	~"ıPšJošt.h
"

85 
	~"ıSlideJošt.h
"

86 
	~"ıPivÙJošt.h
"

87 
	~"ıGrooveJošt.h
"

88 
	~"ıDam³dS´šg.h
"

89 
	~"ıDam³dRÙ¬yS´šg.h
"

90 
	~"ıRÙ¬yLim™Jošt.h
"

91 
	~"ıR©ch‘Jošt.h
"

92 
	~"ıG—rJošt.h
"

93 
	~"ıSim¶eMÙÜ.h
"

	@../hdr/chipmunk/cpDampedRotarySpring.h

26 
CP_EXPORT
 
ıBoŞ
 
ıCÚ¡¿štIsDam³dRÙ¬yS´šg
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

29 
	$ıFlßt
 (*
	tıDam³dRÙ¬yS´šgTÜqueFunc
)(
	tıCÚ¡¿št
 *
	t¥ršg
, 
	tıFlßt
 
	t»ÏtiveAngË
);

32 
CP_EXPORT
 
ıDam³dRÙ¬yS´šg
* 
	`ıDam³dRÙ¬yS´šgAÎoc
();

34 
CP_EXPORT
 
ıDam³dRÙ¬yS´šg
* 
	`ıDam³dRÙ¬yS´šgIn™
(ıDam³dRÙ¬yS´šg *
jošt
, 
ıBody
 *
a
, cpBody *
b
, 
ıFlßt
 
»¡AngË
, cpFlßˆ
¡ifâess
, cpFlßˆ
dampšg
);

36 
CP_EXPORT
 
ıCÚ¡¿št
* 
	`ıDam³dRÙ¬yS´šgNew
(
ıBody
 *
a
, cpBody *
b
, 
ıFlßt
 
»¡AngË
, cpFlßˆ
¡ifâess
, cpFlßˆ
dampšg
);

39 
CP_EXPORT
 
ıFlßt
 
	`ıDam³dRÙ¬yS´šgG‘Re¡AngË
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

41 
CP_EXPORT
 
	`ıDam³dRÙ¬yS´šgS‘Re¡AngË
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
»¡AngË
);

44 
CP_EXPORT
 
ıFlßt
 
	`ıDam³dRÙ¬yS´šgG‘Stifâess
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

46 
CP_EXPORT
 
	`ıDam³dRÙ¬yS´šgS‘Stifâess
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
¡ifâess
);

49 
CP_EXPORT
 
ıFlßt
 
	`ıDam³dRÙ¬yS´šgG‘Dampšg
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

51 
CP_EXPORT
 
	`ıDam³dRÙ¬yS´šgS‘Dampšg
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
dampšg
);

54 
CP_EXPORT
 
ıDam³dRÙ¬yS´šgTÜqueFunc
 
	`ıDam³dRÙ¬yS´šgG‘S´šgTÜqueFunc
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

56 
CP_EXPORT
 
	`ıDam³dRÙ¬yS´šgS‘S´šgTÜqueFunc
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıDam³dRÙ¬yS´šgTÜqueFunc
 
¥ršgTÜqueFunc
);

	@../hdr/chipmunk/cpDampedSpring.h

26 
CP_EXPORT
 
ıBoŞ
 
ıCÚ¡¿štIsDam³dS´šg
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

29 
	$ıFlßt
 (*
	tıDam³dS´šgFÜûFunc
)(
	tıCÚ¡¿št
 *
	t¥ršg
, 
	tıFlßt
 
	tdi¡
);

32 
CP_EXPORT
 
ıDam³dS´šg
* 
	`ıDam³dS´šgAÎoc
();

34 
CP_EXPORT
 
ıDam³dS´šg
* 
	`ıDam³dS´šgIn™
(ıDam³dS´šg *
jošt
, 
ıBody
 *
a
, cpBody *
b
, 
ıVeù
 
ªchÜA
, cpVeù 
ªchÜB
, 
ıFlßt
 
»¡L’gth
, cpFlßˆ
¡ifâess
, cpFlßˆ
dampšg
);

36 
CP_EXPORT
 
ıCÚ¡¿št
* 
	`ıDam³dS´šgNew
(
ıBody
 *
a
, cpBody *
b
, 
ıVeù
 
ªchÜA
, cpVeù 
ªchÜB
, 
ıFlßt
 
»¡L’gth
, cpFlßˆ
¡ifâess
, cpFlßˆ
dampšg
);

39 
CP_EXPORT
 
ıVeù
 
	`ıDam³dS´šgG‘AnchÜA
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

41 
CP_EXPORT
 
	`ıDam³dS´šgS‘AnchÜA
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıVeù
 
ªchÜA
);

44 
CP_EXPORT
 
ıVeù
 
	`ıDam³dS´šgG‘AnchÜB
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

46 
CP_EXPORT
 
	`ıDam³dS´šgS‘AnchÜB
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıVeù
 
ªchÜB
);

49 
CP_EXPORT
 
ıFlßt
 
	`ıDam³dS´šgG‘Re¡L’gth
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

51 
CP_EXPORT
 
	`ıDam³dS´šgS‘Re¡L’gth
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
»¡L’gth
);

54 
CP_EXPORT
 
ıFlßt
 
	`ıDam³dS´šgG‘Stifâess
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

56 
CP_EXPORT
 
	`ıDam³dS´šgS‘Stifâess
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
¡ifâess
);

59 
CP_EXPORT
 
ıFlßt
 
	`ıDam³dS´šgG‘Dampšg
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

61 
CP_EXPORT
 
	`ıDam³dS´šgS‘Dampšg
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
dampšg
);

64 
CP_EXPORT
 
ıDam³dS´šgFÜûFunc
 
	`ıDam³dS´šgG‘S´šgFÜûFunc
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

66 
CP_EXPORT
 
	`ıDam³dS´šgS‘S´šgFÜûFunc
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıDam³dS´šgFÜûFunc
 
¥ršgFÜûFunc
);

	@../hdr/chipmunk/cpGearJoint.h

26 
CP_EXPORT
 
ıBoŞ
 
ıCÚ¡¿štIsG—rJošt
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

29 
CP_EXPORT
 
ıG—rJošt
* 
ıG—rJoštAÎoc
();

31 
CP_EXPORT
 
ıG—rJošt
* 
ıG—rJoštIn™
(ıG—rJošˆ*
jošt
, 
ıBody
 *
a
, cpBody *
b
, 
ıFlßt
 
pha£
, cpFlßˆ
¿tio
);

33 
CP_EXPORT
 
ıCÚ¡¿št
* 
ıG—rJoštNew
(
ıBody
 *
a
, cpBody *
b
, 
ıFlßt
 
pha£
, cpFlßˆ
¿tio
);

36 
CP_EXPORT
 
ıFlßt
 
ıG—rJoštG‘Pha£
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

38 
CP_EXPORT
 
ıG—rJoštS‘Pha£
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
pha£
);

41 
CP_EXPORT
 
ıFlßt
 
ıG—rJoštG‘R©io
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

43 
CP_EXPORT
 
ıG—rJoštS‘R©io
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
¿tio
);

	@../hdr/chipmunk/cpGrooveJoint.h

26 
CP_EXPORT
 
ıBoŞ
 
ıCÚ¡¿štIsGrooveJošt
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

29 
CP_EXPORT
 
ıGrooveJošt
* 
ıGrooveJoštAÎoc
();

31 
CP_EXPORT
 
ıGrooveJošt
* 
ıGrooveJoštIn™
(ıGrooveJošˆ*
jošt
, 
ıBody
 *
a
, cpBody *
b
, 
ıVeù
 
groove_a
, cpVeù 
groove_b
, cpVeù 
ªchÜB
);

33 
CP_EXPORT
 
ıCÚ¡¿št
* 
ıGrooveJoštNew
(
ıBody
 *
a
, cpBody *
b
, 
ıVeù
 
groove_a
, cpVeù 
groove_b
, cpVeù 
ªchÜB
);

36 
CP_EXPORT
 
ıVeù
 
ıGrooveJoštG‘GrooveA
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

38 
CP_EXPORT
 
ıGrooveJoštS‘GrooveA
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıVeù
 
grooveA
);

41 
CP_EXPORT
 
ıVeù
 
ıGrooveJoštG‘GrooveB
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

43 
CP_EXPORT
 
ıGrooveJoštS‘GrooveB
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıVeù
 
grooveB
);

46 
CP_EXPORT
 
ıVeù
 
ıGrooveJoštG‘AnchÜB
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

48 
CP_EXPORT
 
ıGrooveJoštS‘AnchÜB
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıVeù
 
ªchÜB
);

	@../hdr/chipmunk/cpHastySpace.h

8 
	gıHa¡yS·û
;

9 
ıHa¡yS·û
 
	tıHa¡yS·û
;

14 
CP_EXPORT
 
ıS·û
 *
ıHa¡yS·ûNew
();

15 
CP_EXPORT
 
ıHa¡yS·ûF»e
(
ıS·û
 *
¥aû
);

21 
CP_EXPORT
 
ıHa¡yS·ûS‘Th»ads
(
ıS·û
 *
¥aû
, 
th»ads
);

24 
CP_EXPORT
 
ıHa¡yS·ûG‘Th»ads
(
ıS·û
 *
¥aû
);

27 
CP_EXPORT
 
ıHa¡yS·ûS‹p
(
ıS·û
 *
¥aû
, 
ıFlßt
 
dt
);

	@../hdr/chipmunk/cpMarch.h

6 
	$ıFlßt
 (*
	tıM¬chSam¶eFunc
)(
	tıVeù
 
	tpošt
, *
	td©a
);

10 (*
	tıM¬chSegm’tFunc
)(
	tıVeù
 
	tv0
, cpVeù 
	tv1
, *
	td©a
);

15 
CP_EXPORT
 
	`ıM¬chSoá
(

16 
ıBB
 
bb
, 
x_§m¶es
, 
y_§m¶es
, 
ıFlßt
 
th»shŞd
,

17 
ıM¬chSegm’tFunc
 
£gm’t
, *
£gm’t_d©a
,

18 
ıM¬chSam¶eFunc
 
§m¶e
, *
§m¶e_d©a


24 
CP_EXPORT
 
	`ıM¬chH¬d
(

25 
ıBB
 
bb
, 
x_§m¶es
, 
y_§m¶es
, 
ıFlßt
 
th»shŞd
,

26 
ıM¬chSegm’tFunc
 
£gm’t
, *
£gm’t_d©a
,

27 
ıM¬chSam¶eFunc
 
§m¶e
, *
§m¶e_d©a


	@../hdr/chipmunk/cpPinJoint.h

26 
CP_EXPORT
 
ıBoŞ
 
ıCÚ¡¿štIsPšJošt
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

29 
CP_EXPORT
 
ıPšJošt
* 
ıPšJoštAÎoc
();

31 
CP_EXPORT
 
ıPšJošt
* 
ıPšJoštIn™
(ıPšJošˆ*
jošt
, 
ıBody
 *
a
, cpBody *
b
, 
ıVeù
 
ªchÜA
, cpVeù 
ªchÜB
);

33 
CP_EXPORT
 
ıCÚ¡¿št
* 
ıPšJoštNew
(
ıBody
 *
a
, cpBody *
b
, 
ıVeù
 
ªchÜA
, cpVeù 
ªchÜB
);

36 
CP_EXPORT
 
ıVeù
 
ıPšJoštG‘AnchÜA
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

38 
CP_EXPORT
 
ıPšJoštS‘AnchÜA
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıVeù
 
ªchÜA
);

41 
CP_EXPORT
 
ıVeù
 
ıPšJoštG‘AnchÜB
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

43 
CP_EXPORT
 
ıPšJoštS‘AnchÜB
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıVeù
 
ªchÜB
);

46 
CP_EXPORT
 
ıFlßt
 
ıPšJoštG‘Di¡
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

48 
CP_EXPORT
 
ıPšJoštS‘Di¡
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
di¡
);

	@../hdr/chipmunk/cpPivotJoint.h

26 
CP_EXPORT
 
ıBoŞ
 
ıCÚ¡¿štIsPivÙJošt
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

29 
CP_EXPORT
 
ıPivÙJošt
* 
ıPivÙJoštAÎoc
();

31 
CP_EXPORT
 
ıPivÙJošt
* 
ıPivÙJoštIn™
(ıPivÙJošˆ*
jošt
, 
ıBody
 *
a
, cpBody *
b
, 
ıVeù
 
ªchÜA
, cpVeù 
ªchÜB
);

33 
CP_EXPORT
 
ıCÚ¡¿št
* 
ıPivÙJoštNew
(
ıBody
 *
a
, cpBody *
b
, 
ıVeù
 
pivÙ
);

35 
CP_EXPORT
 
ıCÚ¡¿št
* 
ıPivÙJoštNew2
(
ıBody
 *
a
, cpBody *
b
, 
ıVeù
 
ªchÜA
, cpVeù 
ªchÜB
);

38 
CP_EXPORT
 
ıVeù
 
ıPivÙJoštG‘AnchÜA
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

40 
CP_EXPORT
 
ıPivÙJoštS‘AnchÜA
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıVeù
 
ªchÜA
);

43 
CP_EXPORT
 
ıVeù
 
ıPivÙJoštG‘AnchÜB
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

45 
CP_EXPORT
 
ıPivÙJoštS‘AnchÜB
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıVeù
 
ªchÜB
);

	@../hdr/chipmunk/cpPolyShape.h

26 
CP_EXPORT
 
ıPŞySh­e
* 
ıPŞySh­eAÎoc
();

29 
CP_EXPORT
 
ıPŞySh­e
* 
ıPŞySh­eIn™
(ıPŞySh­*
pŞy
, 
ıBody
 *
body
, 
couÁ
, cÚ¡ 
ıVeù
 *
v”ts
, 
ıT¿nsfÜm
 
ŒªsfÜm
, 
ıFlßt
 
¿dius
);

32 
CP_EXPORT
 
ıPŞySh­e
* 
ıPŞySh­eIn™Raw
(ıPŞySh­*
pŞy
, 
ıBody
 *
body
, 
couÁ
, cÚ¡ 
ıVeù
 *
v”ts
, 
ıFlßt
 
¿dius
);

35 
CP_EXPORT
 
ıSh­e
* 
ıPŞySh­eNew
(
ıBody
 *
body
, 
couÁ
, cÚ¡ 
ıVeù
 *
v”ts
, 
ıT¿nsfÜm
 
ŒªsfÜm
, 
ıFlßt
 
¿dius
);

38 
CP_EXPORT
 
ıSh­e
* 
ıPŞySh­eNewRaw
(
ıBody
 *
body
, 
couÁ
, cÚ¡ 
ıVeù
 *
v”ts
, 
ıFlßt
 
¿dius
);

41 
CP_EXPORT
 
ıPŞySh­e
* 
ıBoxSh­eIn™
(ıPŞySh­*
pŞy
, 
ıBody
 *
body
, 
ıFlßt
 
width
, cpFlßˆ
height
, cpFlßˆ
¿dius
);

43 
CP_EXPORT
 
ıPŞySh­e
* 
ıBoxSh­eIn™2
(ıPŞySh­*
pŞy
, 
ıBody
 *
body
, 
ıBB
 
box
, 
ıFlßt
 
¿dius
);

45 
CP_EXPORT
 
ıSh­e
* 
ıBoxSh­eNew
(
ıBody
 *
body
, 
ıFlßt
 
width
, cpFlßˆ
height
, cpFlßˆ
¿dius
);

47 
CP_EXPORT
 
ıSh­e
* 
ıBoxSh­eNew2
(
ıBody
 *
body
, 
ıBB
 
box
, 
ıFlßt
 
¿dius
);

50 
CP_EXPORT
 
ıPŞySh­eG‘CouÁ
(cÚ¡ 
ıSh­e
 *
sh­e
);

52 
CP_EXPORT
 
ıVeù
 
ıPŞySh­eG‘V”t
(cÚ¡ 
ıSh­e
 *
sh­e
, 
šdex
);

54 
CP_EXPORT
 
ıFlßt
 
ıPŞySh­eG‘Radius
(cÚ¡ 
ıSh­e
 *
sh­e
);

	@../hdr/chipmunk/cpPolyline.h

7 
	sıPŞylše
 {

8 
	mcouÁ
, 
	mÿ·c™y
;

9 
ıVeù
 
	mv”ts
[];

10 } 
	tıPŞylše
;

13 
CP_EXPORT
 
ıPŞylšeF»e
(
ıPŞylše
 *
lše
);

16 
CP_EXPORT
 
ıBoŞ
 
ıPŞylšeIsClo£d
(
ıPŞylše
 *
lše
);

22 
CP_EXPORT
 
ıPŞylše
 *
ıPŞylšeSim¶ifyCurves
(ıPŞylš*
lše
, 
ıFlßt
 
tŞ
);

28 
CP_EXPORT
 
ıPŞylše
 *
ıPŞylšeSim¶ifyV”‹xes
(ıPŞylš*
lše
, 
ıFlßt
 
tŞ
);

31 
CP_EXPORT
 
ıPŞylše
 *
ıPŞylšeToCÚvexHuÎ
(ıPŞylš*
lše
, 
ıFlßt
 
tŞ
);

35 
	sıPŞylšeS‘
 {

36 
	mcouÁ
, 
	mÿ·c™y
;

37 
ıPŞylše
 **
	mlšes
;

38 } 
	tıPŞylšeS‘
;

41 
CP_EXPORT
 
ıPŞylšeS‘
 *
ıPŞylšeS‘AÎoc
();

44 
CP_EXPORT
 
ıPŞylšeS‘
 *
ıPŞylšeS‘In™
(ıPŞylšeS‘ *
£t
);

47 
CP_EXPORT
 
ıPŞylšeS‘
 *
ıPŞylšeS‘New
();

50 
CP_EXPORT
 
ıPŞylšeS‘De¡roy
(
ıPŞylšeS‘
 *
£t
, 
ıBoŞ
 
ä“PŞylšes
);

53 
CP_EXPORT
 
ıPŞylšeS‘F»e
(
ıPŞylšeS‘
 *
£t
, 
ıBoŞ
 
ä“PŞylšes
);

60 
CP_EXPORT
 
ıPŞylšeS‘CŞËùSegm’t
(
ıVeù
 
v0
, cpVeù 
v1
, 
ıPŞylšeS‘
 *
lšes
);

68 
CP_EXPORT
 
ıPŞylšeS‘
 *
ıPŞylšeCÚvexDecompos™iÚ
(
ıPŞylše
 *
lše
, 
ıFlßt
 
tŞ
);

70 
	#ıPŞylšeCÚvexDecompos™iÚ_BETA
 
ıPŞylšeCÚvexDecompos™iÚ


	)

	@../hdr/chipmunk/cpRatchetJoint.h

26 
CP_EXPORT
 
ıBoŞ
 
ıCÚ¡¿štIsR©ch‘Jošt
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

29 
CP_EXPORT
 
ıR©ch‘Jošt
* 
ıR©ch‘JoštAÎoc
();

31 
CP_EXPORT
 
ıR©ch‘Jošt
* 
ıR©ch‘JoštIn™
(ıR©ch‘Jošˆ*
jošt
, 
ıBody
 *
a
, cpBody *
b
, 
ıFlßt
 
pha£
, cpFlßˆ
¿tch‘
);

33 
CP_EXPORT
 
ıCÚ¡¿št
* 
ıR©ch‘JoštNew
(
ıBody
 *
a
, cpBody *
b
, 
ıFlßt
 
pha£
, cpFlßˆ
¿tch‘
);

36 
CP_EXPORT
 
ıFlßt
 
ıR©ch‘JoštG‘AngË
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

38 
CP_EXPORT
 
ıR©ch‘JoštS‘AngË
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
ªgË
);

41 
CP_EXPORT
 
ıFlßt
 
ıR©ch‘JoštG‘Pha£
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

43 
CP_EXPORT
 
ıR©ch‘JoštS‘Pha£
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
pha£
);

46 
CP_EXPORT
 
ıFlßt
 
ıR©ch‘JoštG‘R©ch‘
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

48 
CP_EXPORT
 
ıR©ch‘JoštS‘R©ch‘
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
¿tch‘
);

	@../hdr/chipmunk/cpRobust.h

1 
	~"chmunk/ıVeù.h
"

8 
ıBoŞ
 
ıCheckPoštG»©”
(cÚ¡ 
ıVeù
 
a
, cÚ¡ cpVeù 
b
, cÚ¡ cpVeù 
c
);

11 
ıBoŞ
 
ıCheckAxis
(
ıVeù
 
v0
, cpVeù 
v1
, cpVeù 
p
, cpVeù 
n
);

	@../hdr/chipmunk/cpRotaryLimitJoint.h

26 
CP_EXPORT
 
ıBoŞ
 
ıCÚ¡¿štIsRÙ¬yLim™Jošt
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

29 
CP_EXPORT
 
ıRÙ¬yLim™Jošt
* 
ıRÙ¬yLim™JoštAÎoc
();

31 
CP_EXPORT
 
ıRÙ¬yLim™Jošt
* 
ıRÙ¬yLim™JoštIn™
(ıRÙ¬yLim™Jošˆ*
jošt
, 
ıBody
 *
a
, cpBody *
b
, 
ıFlßt
 
mš
, cpFlßˆ
max
);

33 
CP_EXPORT
 
ıCÚ¡¿št
* 
ıRÙ¬yLim™JoštNew
(
ıBody
 *
a
, cpBody *
b
, 
ıFlßt
 
mš
, cpFlßˆ
max
);

36 
CP_EXPORT
 
ıFlßt
 
ıRÙ¬yLim™JoštG‘Mš
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

38 
CP_EXPORT
 
ıRÙ¬yLim™JoštS‘Mš
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
mš
);

41 
CP_EXPORT
 
ıFlßt
 
ıRÙ¬yLim™JoštG‘Max
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

43 
CP_EXPORT
 
ıRÙ¬yLim™JoštS‘Max
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
max
);

	@../hdr/chipmunk/cpShape.h

27 
	sıPoštQu”yInfo
 {

29 cÚ¡ 
ıSh­e
 *
	msh­e
;

31 
ıVeù
 
	mpošt
;

33 
ıFlßt
 
	mdi¡ªû
;

36 
ıVeù
 
	mg¿d›Á
;

37 } 
	tıPoštQu”yInfo
;

40 
	sıSegm’tQu”yInfo
 {

42 cÚ¡ 
ıSh­e
 *
	msh­e
;

44 
ıVeù
 
	mpošt
;

46 
ıVeù
 
	mnÜm®
;

48 
ıFlßt
 
	m®pha
;

49 } 
	tıSegm’tQu”yInfo
;

52 
	sıSh­eF‹r
 {

55 
ıGroup
 
	mgroup
;

58 
ıB™mask
 
	mÿ‹gÜ›s
;

61 
ıB™mask
 
	mmask
;

62 } 
	tıSh­eF‹r
;

65 cÚ¡ 
ıSh­eF‹r
 
	gCP_SHAPE_FILTER_ALL
 = {
CP_NO_GROUP
, 
CP_ALL_CATEGORIES
, CP_ALL_CATEGORIES};

67 cÚ¡ 
ıSh­eF‹r
 
	gCP_SHAPE_FILTER_NONE
 = {
CP_NO_GROUP
, ~
CP_ALL_CATEGORIES
, ~CP_ALL_CATEGORIES};

70 
šlše
 
ıSh­eF‹r


71 
	$ıSh­eF‹rNew
(
ıGroup
 
group
, 
ıB™mask
 
ÿ‹gÜ›s
, cpB™mask 
mask
)

73 
ıSh­eF‹r
 
f‹r
 = {
group
, 
ÿ‹gÜ›s
, 
mask
};

74  
f‹r
;

75 
	}
}

78 
CP_EXPORT
 
ıSh­eDe¡roy
(
ıSh­e
 *
sh­e
);

80 
CP_EXPORT
 
ıSh­eF»e
(
ıSh­e
 *
sh­e
);

83 
CP_EXPORT
 
ıBB
 
ıSh­eCacheBB
(
ıSh­e
 *
sh­e
);

85 
CP_EXPORT
 
ıBB
 
ıSh­eUpd©e
(
ıSh­e
 *
sh­e
, 
ıT¿nsfÜm
 
ŒªsfÜm
);

89 
CP_EXPORT
 
ıFlßt
 
ıSh­ePoštQu”y
(cÚ¡ 
ıSh­e
 *
sh­e
, 
ıVeù
 
p
, 
ıPoštQu”yInfo
 *
out
);

92 
CP_EXPORT
 
ıBoŞ
 
ıSh­eSegm’tQu”y
(cÚ¡ 
ıSh­e
 *
sh­e
, 
ıVeù
 
a
, cpVeù 
b
, 
ıFlßt
 
¿dius
, 
ıSegm’tQu”yInfo
 *
šfo
);

95 
CP_EXPORT
 
ıCÚùPoštS‘
 
ıSh­esCŞlide
(cÚ¡ 
ıSh­e
 *
a
, cÚ¡ cpSh­*
b
);

98 
CP_EXPORT
 
ıS·û
* 
ıSh­eG‘S·û
(cÚ¡ 
ıSh­e
 *
sh­e
);

101 
CP_EXPORT
 
ıBody
* 
ıSh­eG‘Body
(cÚ¡ 
ıSh­e
 *
sh­e
);

104 
CP_EXPORT
 
ıSh­eS‘Body
(
ıSh­e
 *
sh­e
, 
ıBody
 *
body
);

107 
CP_EXPORT
 
ıFlßt
 
ıSh­eG‘Mass
(
ıSh­e
 *
sh­e
);

109 
CP_EXPORT
 
ıSh­eS‘Mass
(
ıSh­e
 *
sh­e
, 
ıFlßt
 
mass
);

112 
CP_EXPORT
 
ıFlßt
 
ıSh­eG‘D’s™y
(
ıSh­e
 *
sh­e
);

114 
CP_EXPORT
 
ıSh­eS‘D’s™y
(
ıSh­e
 *
sh­e
, 
ıFlßt
 
d’s™y
);

117 
CP_EXPORT
 
ıFlßt
 
ıSh­eG‘Mom’t
(
ıSh­e
 *
sh­e
);

119 
CP_EXPORT
 
ıFlßt
 
ıSh­eG‘A»a
(
ıSh­e
 *
sh­e
);

121 
CP_EXPORT
 
ıVeù
 
ıSh­eG‘C’‹rOfG¿v™y
(
ıSh­e
 *
sh­e
);

124 
CP_EXPORT
 
ıBB
 
ıSh­eG‘BB
(cÚ¡ 
ıSh­e
 *
sh­e
);

127 
CP_EXPORT
 
ıBoŞ
 
ıSh­eG‘S’sÜ
(cÚ¡ 
ıSh­e
 *
sh­e
);

129 
CP_EXPORT
 
ıSh­eS‘S’sÜ
(
ıSh­e
 *
sh­e
, 
ıBoŞ
 
£nsÜ
);

132 
CP_EXPORT
 
ıFlßt
 
ıSh­eG‘EÏ¡ic™y
(cÚ¡ 
ıSh­e
 *
sh­e
);

134 
CP_EXPORT
 
ıSh­eS‘EÏ¡ic™y
(
ıSh­e
 *
sh­e
, 
ıFlßt
 
–a¡ic™y
);

137 
CP_EXPORT
 
ıFlßt
 
ıSh­eG‘FriùiÚ
(cÚ¡ 
ıSh­e
 *
sh­e
);

139 
CP_EXPORT
 
ıSh­eS‘FriùiÚ
(
ıSh­e
 *
sh­e
, 
ıFlßt
 
äiùiÚ
);

142 
CP_EXPORT
 
ıVeù
 
ıSh­eG‘SurçûV–oc™y
(cÚ¡ 
ıSh­e
 *
sh­e
);

144 
CP_EXPORT
 
ıSh­eS‘SurçûV–oc™y
(
ıSh­e
 *
sh­e
, 
ıVeù
 
surçûV–oc™y
);

147 
CP_EXPORT
 
ıD©aPoš‹r
 
ıSh­eG‘U£rD©a
(cÚ¡ 
ıSh­e
 *
sh­e
);

149 
CP_EXPORT
 
ıSh­eS‘U£rD©a
(
ıSh­e
 *
sh­e
, 
ıD©aPoš‹r
 
u£rD©a
);

152 
CP_EXPORT
 
ıCŞlisiÚTy³
 
ıSh­eG‘CŞlisiÚTy³
(cÚ¡ 
ıSh­e
 *
sh­e
);

154 
CP_EXPORT
 
ıSh­eS‘CŞlisiÚTy³
(
ıSh­e
 *
sh­e
, 
ıCŞlisiÚTy³
 
cŞlisiÚTy³
);

157 
CP_EXPORT
 
ıSh­eF‹r
 
ıSh­eG‘F‹r
(cÚ¡ 
ıSh­e
 *
sh­e
);

159 
CP_EXPORT
 
ıSh­eS‘F‹r
(
ıSh­e
 *
sh­e
, 
ıSh­eF‹r
 
f‹r
);

166 
CP_EXPORT
 
ıCœşeSh­e
* 
ıCœşeSh­eAÎoc
();

168 
CP_EXPORT
 
ıCœşeSh­e
* 
ıCœşeSh­eIn™
(ıCœşeSh­*
cœşe
, 
ıBody
 *
body
, 
ıFlßt
 
¿dius
, 
ıVeù
 
off£t
);

170 
CP_EXPORT
 
ıSh­e
* 
ıCœşeSh­eNew
(
ıBody
 *
body
, 
ıFlßt
 
¿dius
, 
ıVeù
 
off£t
);

173 
CP_EXPORT
 
ıVeù
 
ıCœşeSh­eG‘Off£t
(cÚ¡ 
ıSh­e
 *
sh­e
);

175 
CP_EXPORT
 
ıFlßt
 
ıCœşeSh­eG‘Radius
(cÚ¡ 
ıSh­e
 *
sh­e
);

181 
CP_EXPORT
 
ıSegm’tSh­e
* 
ıSegm’tSh­eAÎoc
();

183 
CP_EXPORT
 
ıSegm’tSh­e
* 
ıSegm’tSh­eIn™
(ıSegm’tSh­*
£g
, 
ıBody
 *
body
, 
ıVeù
 
a
, cpVeù 
b
, 
ıFlßt
 
¿dius
);

185 
CP_EXPORT
 
ıSh­e
* 
ıSegm’tSh­eNew
(
ıBody
 *
body
, 
ıVeù
 
a
, cpVeù 
b
, 
ıFlßt
 
¿dius
);

188 
CP_EXPORT
 
ıSegm’tSh­eS‘NeighbÜs
(
ıSh­e
 *
sh­e
, 
ıVeù
 
´ev
, cpVeù 
Ãxt
);

191 
CP_EXPORT
 
ıVeù
 
ıSegm’tSh­eG‘A
(cÚ¡ 
ıSh­e
 *
sh­e
);

193 
CP_EXPORT
 
ıVeù
 
ıSegm’tSh­eG‘B
(cÚ¡ 
ıSh­e
 *
sh­e
);

195 
CP_EXPORT
 
ıVeù
 
ıSegm’tSh­eG‘NÜm®
(cÚ¡ 
ıSh­e
 *
sh­e
);

197 
CP_EXPORT
 
ıFlßt
 
ıSegm’tSh­eG‘Radius
(cÚ¡ 
ıSh­e
 *
sh­e
);

	@../hdr/chipmunk/cpSimpleMotor.h

26 
ıSim¶eMÙÜ
 
	tıSim¶eMÙÜ
;

29 
CP_EXPORT
 
ıBoŞ
 
ıCÚ¡¿štIsSim¶eMÙÜ
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

32 
CP_EXPORT
 
ıSim¶eMÙÜ
* 
ıSim¶eMÙÜAÎoc
();

34 
CP_EXPORT
 
ıSim¶eMÙÜ
* 
ıSim¶eMÙÜIn™
(ıSim¶eMÙÜ *
jošt
, 
ıBody
 *
a
, cpBody *
b
, 
ıFlßt
 
¿‹
);

36 
CP_EXPORT
 
ıCÚ¡¿št
* 
ıSim¶eMÙÜNew
(
ıBody
 *
a
, cpBody *
b
, 
ıFlßt
 
¿‹
);

39 
CP_EXPORT
 
ıFlßt
 
ıSim¶eMÙÜG‘R©e
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

41 
CP_EXPORT
 
ıSim¶eMÙÜS‘R©e
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
¿‹
);

	@../hdr/chipmunk/cpSlideJoint.h

26 
CP_EXPORT
 
ıBoŞ
 
ıCÚ¡¿štIsSlideJošt
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

29 
CP_EXPORT
 
ıSlideJošt
* 
ıSlideJoštAÎoc
();

31 
CP_EXPORT
 
ıSlideJošt
* 
ıSlideJoštIn™
(ıSlideJošˆ*
jošt
, 
ıBody
 *
a
, cpBody *
b
, 
ıVeù
 
ªchÜA
, cpVeù 
ªchÜB
, 
ıFlßt
 
mš
, cpFlßˆ
max
);

33 
CP_EXPORT
 
ıCÚ¡¿št
* 
ıSlideJoštNew
(
ıBody
 *
a
, cpBody *
b
, 
ıVeù
 
ªchÜA
, cpVeù 
ªchÜB
, 
ıFlßt
 
mš
, cpFlßˆ
max
);

36 
CP_EXPORT
 
ıVeù
 
ıSlideJoštG‘AnchÜA
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

38 
CP_EXPORT
 
ıSlideJoštS‘AnchÜA
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıVeù
 
ªchÜA
);

41 
CP_EXPORT
 
ıVeù
 
ıSlideJoštG‘AnchÜB
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

43 
CP_EXPORT
 
ıSlideJoštS‘AnchÜB
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıVeù
 
ªchÜB
);

46 
CP_EXPORT
 
ıFlßt
 
ıSlideJoštG‘Mš
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

48 
CP_EXPORT
 
ıSlideJoštS‘Mš
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
mš
);

51 
CP_EXPORT
 
ıFlßt
 
ıSlideJoštG‘Max
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
);

53 
CP_EXPORT
 
ıSlideJoštS‘Max
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
max
);

	@../hdr/chipmunk/cpSpace.h

30 
	$ıBoŞ
 (*
	tıCŞlisiÚBegšFunc
)(
	tıArb™”
 *
	t¬b
, 
	tıS·û
 *
	t¥aû
, 
	tıD©aPoš‹r
 
	tu£rD©a
);

33 
	$ıBoŞ
 (*
	tıCŞlisiÚP»SŞveFunc
)(
	tıArb™”
 *
	t¬b
, 
	tıS·û
 *
	t¥aû
, 
	tıD©aPoš‹r
 
	tu£rD©a
);

35 (*
	tıCŞlisiÚPo¡SŞveFunc
)(
	tıArb™”
 *
	t¬b
, 
	tıS·û
 *
	t¥aû
, 
	tıD©aPoš‹r
 
	tu£rD©a
);

37 (*
	tıCŞlisiÚS•¬©eFunc
)(
	tıArb™”
 *
	t¬b
, 
	tıS·û
 *
	t¥aû
, 
	tıD©aPoš‹r
 
	tu£rD©a
);

41 
	sıCŞlisiÚHªdËr
 {

44 cÚ¡ 
ıCŞlisiÚTy³
 
ty³A
;

47 cÚ¡ 
ıCŞlisiÚTy³
 
ty³B
;

49 
ıCŞlisiÚBegšFunc
 
begšFunc
;

52 
ıCŞlisiÚP»SŞveFunc
 
´eSŞveFunc
;

55 
ıCŞlisiÚPo¡SŞveFunc
 
po¡SŞveFunc
;

57 
ıCŞlisiÚS•¬©eFunc
 
£·¿‹Func
;

59 
ıD©aPoš‹r
 
u£rD©a
;

68 
CP_EXPORT
 
ıS·û
* 
	`ıS·ûAÎoc
();

70 
CP_EXPORT
 
ıS·û
* 
	`ıS·ûIn™
(ıS·û *
¥aû
);

72 
CP_EXPORT
 
ıS·û
* 
	`ıS·ûNew
();

75 
CP_EXPORT
 
	`ıS·ûDe¡roy
(
ıS·û
 *
¥aû
);

77 
CP_EXPORT
 
	`ıS·ûF»e
(
ıS·û
 *
¥aû
);

83 
CP_EXPORT
 
	`ıS·ûG‘I‹¿tiÚs
(cÚ¡ 
ıS·û
 *
¥aû
);

84 
CP_EXPORT
 
	`ıS·ûS‘I‹¿tiÚs
(
ıS·û
 *
¥aû
, 
™”©iÚs
);

87 
CP_EXPORT
 
ıVeù
 
	`ıS·ûG‘G¿v™y
(cÚ¡ 
ıS·û
 *
¥aû
);

88 
CP_EXPORT
 
	`ıS·ûS‘G¿v™y
(
ıS·û
 *
¥aû
, 
ıVeù
 
g¿v™y
);

94 
CP_EXPORT
 
ıFlßt
 
	`ıS·ûG‘Dampšg
(cÚ¡ 
ıS·û
 *
¥aû
);

95 
CP_EXPORT
 
	`ıS·ûS‘Dampšg
(
ıS·û
 *
¥aû
, 
ıFlßt
 
dampšg
);

99 
CP_EXPORT
 
ıFlßt
 
	`ıS·ûG‘IdËS³edTh»shŞd
(cÚ¡ 
ıS·û
 *
¥aû
);

100 
CP_EXPORT
 
	`ıS·ûS‘IdËS³edTh»shŞd
(
ıS·û
 *
¥aû
, 
ıFlßt
 
idËS³edTh»shŞd
);

105 
CP_EXPORT
 
ıFlßt
 
	`ıS·ûG‘SË•TimeTh»shŞd
(cÚ¡ 
ıS·û
 *
¥aû
);

106 
CP_EXPORT
 
	`ıS·ûS‘SË•TimeTh»shŞd
(
ıS·û
 *
¥aû
, 
ıFlßt
 
¦“pTimeTh»shŞd
);

112 
CP_EXPORT
 
ıFlßt
 
	`ıS·ûG‘CŞlisiÚSlİ
(cÚ¡ 
ıS·û
 *
¥aû
);

113 
CP_EXPORT
 
	`ıS·ûS‘CŞlisiÚSlİ
(
ıS·û
 *
¥aû
, 
ıFlßt
 
cŞlisiÚSlİ
);

118 
CP_EXPORT
 
ıFlßt
 
	`ıS·ûG‘CŞlisiÚBŸs
(cÚ¡ 
ıS·û
 *
¥aû
);

119 
CP_EXPORT
 
	`ıS·ûS‘CŞlisiÚBŸs
(
ıS·û
 *
¥aû
, 
ıFlßt
 
cŞlisiÚBŸs
);

123 
CP_EXPORT
 
ıTime¡amp
 
	`ıS·ûG‘CŞlisiÚP”si¡’û
(cÚ¡ 
ıS·û
 *
¥aû
);

124 
CP_EXPORT
 
	`ıS·ûS‘CŞlisiÚP”si¡’û
(
ıS·û
 *
¥aû
, 
ıTime¡amp
 
cŞlisiÚP”si¡’û
);

129 
CP_EXPORT
 
ıD©aPoš‹r
 
	`ıS·ûG‘U£rD©a
(cÚ¡ 
ıS·û
 *
¥aû
);

130 
CP_EXPORT
 
	`ıS·ûS‘U£rD©a
(
ıS·û
 *
¥aû
, 
ıD©aPoš‹r
 
u£rD©a
);

134 
CP_EXPORT
 
ıBody
* 
	`ıS·ûG‘SticBody
(cÚ¡ 
ıS·û
 *
¥aû
);

138 
CP_EXPORT
 
ıFlßt
 
	`ıS·ûG‘Cu¼’tTimeS‹p
(cÚ¡ 
ıS·û
 *
¥aû
);

141 
CP_EXPORT
 
ıBoŞ
 
	`ıS·ûIsLocked
(
ıS·û
 *
¥aû
);

147 
CP_EXPORT
 
ıCŞlisiÚHªdËr
 *
	`ıS·ûAddDeçuÉCŞlisiÚHªdËr
(
ıS·û
 *
¥aû
);

150 
CP_EXPORT
 
ıCŞlisiÚHªdËr
 *
	`ıS·ûAddCŞlisiÚHªdËr
(
ıS·û
 *
¥aû
, 
ıCŞlisiÚTy³
 
a
, cpCŞlisiÚTy³ 
b
);

152 
CP_EXPORT
 
ıCŞlisiÚHªdËr
 *
	`ıS·ûAddWdÿrdHªdËr
(
ıS·û
 *
¥aû
, 
ıCŞlisiÚTy³
 
ty³
);

159 
CP_EXPORT
 
ıSh­e
* 
	`ıS·ûAddSh­e
(
ıS·û
 *
¥aû
, cpSh­*
sh­e
);

161 
CP_EXPORT
 
ıBody
* 
	`ıS·ûAddBody
(
ıS·û
 *
¥aû
, cpBody *
body
);

163 
CP_EXPORT
 
ıCÚ¡¿št
* 
	`ıS·ûAddCÚ¡¿št
(
ıS·û
 *
¥aû
, cpCÚ¡¿šˆ*
cÚ¡¿št
);

166 
CP_EXPORT
 
	`ıS·ûRemoveSh­e
(
ıS·û
 *
¥aû
, 
ıSh­e
 *
sh­e
);

168 
CP_EXPORT
 
	`ıS·ûRemoveBody
(
ıS·û
 *
¥aû
, 
ıBody
 *
body
);

170 
CP_EXPORT
 
	`ıS·ûRemoveCÚ¡¿št
(
ıS·û
 *
¥aû
, 
ıCÚ¡¿št
 *
cÚ¡¿št
);

173 
CP_EXPORT
 
ıBoŞ
 
	`ıS·ûCÚšsSh­e
(
ıS·û
 *
¥aû
, 
ıSh­e
 *
sh­e
);

175 
CP_EXPORT
 
ıBoŞ
 
	`ıS·ûCÚšsBody
(
ıS·û
 *
¥aû
, 
ıBody
 *
body
);

177 
CP_EXPORT
 
ıBoŞ
 
	`ıS·ûCÚšsCÚ¡¿št
(
ıS·û
 *
¥aû
, 
ıCÚ¡¿št
 *
cÚ¡¿št
);

182 (*
	tıPo¡S‹pFunc
)(
	tıS·û
 *
	t¥aû
, *
	tkey
, *
	td©a
);

187 
CP_EXPORT
 
ıBoŞ
 
	`ıS·ûAddPo¡S‹pC®lback
(
ıS·û
 *
¥aû
, 
ıPo¡S‹pFunc
 
func
, *
key
, *
d©a
);

196 (*
	tıS·ûPoštQu”yFunc
)(
	tıSh­e
 *
	tsh­e
, 
	tıVeù
 
	tpošt
, 
	tıFlßt
 
	tdi¡ªû
, cpVeù 
	tg¿d›Á
, *
	td©a
);

198 
CP_EXPORT
 
	`ıS·ûPoštQu”y
(
ıS·û
 *
¥aû
, 
ıVeù
 
pošt
, 
ıFlßt
 
maxDi¡ªû
, 
ıSh­eF‹r
 
f‹r
, 
ıS·ûPoštQu”yFunc
 
func
, *
d©a
);

200 
CP_EXPORT
 
ıSh­e
 *
	`ıS·ûPoštQu”yN—»¡
(
ıS·û
 *
¥aû
, 
ıVeù
 
pošt
, 
ıFlßt
 
maxDi¡ªû
, 
ıSh­eF‹r
 
f‹r
, 
ıPoštQu”yInfo
 *
out
);

203 (*
	tıS·ûSegm’tQu”yFunc
)(
	tıSh­e
 *
	tsh­e
, 
	tıVeù
 
	tpošt
, cpVeù 
	tnÜm®
, 
	tıFlßt
 
	t®pha
, *
	td©a
);

205 
CP_EXPORT
 
	`ıS·ûSegm’tQu”y
(
ıS·û
 *
¥aû
, 
ıVeù
 
¡¬t
, cpVeù 
’d
, 
ıFlßt
 
¿dius
, 
ıSh­eF‹r
 
f‹r
, 
ıS·ûSegm’tQu”yFunc
 
func
, *
d©a
);

207 
CP_EXPORT
 
ıSh­e
 *
	`ıS·ûSegm’tQu”yFœ¡
(
ıS·û
 *
¥aû
, 
ıVeù
 
¡¬t
, cpVeù 
’d
, 
ıFlßt
 
¿dius
, 
ıSh­eF‹r
 
f‹r
, 
ıSegm’tQu”yInfo
 *
out
);

210 (*
	tıS·ûBBQu”yFunc
)(
	tıSh­e
 *
	tsh­e
, *
	td©a
);

213 
CP_EXPORT
 
	`ıS·ûBBQu”y
(
ıS·û
 *
¥aû
, 
ıBB
 
bb
, 
ıSh­eF‹r
 
f‹r
, 
ıS·ûBBQu”yFunc
 
func
, *
d©a
);

216 (*
	tıS·ûSh­eQu”yFunc
)(
	tıSh­e
 *
	tsh­e
, 
	tıCÚùPoštS‘
 *
	tpošts
, *
	td©a
);

218 
CP_EXPORT
 
ıBoŞ
 
	`ıS·ûSh­eQu”y
(
ıS·û
 *
¥aû
, 
ıSh­e
 *
sh­e
, 
ıS·ûSh­eQu”yFunc
 
func
, *
d©a
);

224 (*
	tıS·ûBodyI‹¿tÜFunc
)(
	tıBody
 *
	tbody
, *
	td©a
);

226 
CP_EXPORT
 
	`ıS·ûEachBody
(
ıS·û
 *
¥aû
, 
ıS·ûBodyI‹¿tÜFunc
 
func
, *
d©a
);

229 (*
	tıS·ûSh­eI‹¿tÜFunc
)(
	tıSh­e
 *
	tsh­e
, *
	td©a
);

231 
CP_EXPORT
 
	`ıS·ûEachSh­e
(
ıS·û
 *
¥aû
, 
ıS·ûSh­eI‹¿tÜFunc
 
func
, *
d©a
);

234 (*
	tıS·ûCÚ¡¿štI‹¿tÜFunc
)(
	tıCÚ¡¿št
 *
	tcÚ¡¿št
, *
	td©a
);

236 
CP_EXPORT
 
	`ıS·ûEachCÚ¡¿št
(
ıS·û
 *
¥aû
, 
ıS·ûCÚ¡¿štI‹¿tÜFunc
 
func
, *
d©a
);

242 
CP_EXPORT
 
	`ıS·ûRešdexStic
(
ıS·û
 *
¥aû
);

244 
CP_EXPORT
 
	`ıS·ûRešdexSh­e
(
ıS·û
 *
¥aû
, 
ıSh­e
 *
sh­e
);

246 
CP_EXPORT
 
	`ıS·ûRešdexSh­esFÜBody
(
ıS·û
 *
¥aû
, 
ıBody
 *
body
);

249 
CP_EXPORT
 
	`ıS·ûU£S·tŸlHash
(
ıS·û
 *
¥aû
, 
ıFlßt
 
dim
, 
couÁ
);

255 
CP_EXPORT
 
	`ıS·ûS‹p
(
ıS·û
 *
¥aû
, 
ıFlßt
 
dt
);

260 #iâdeà
CP_SPACE_DISABLE_DEBUG_API


263 
	sıS·ûDebugCŞÜ
 {

264 
r
, 
g
, 
b
, 
a
;

265 } 
	tıS·ûDebugCŞÜ
;

268 (*
	tıS·ûDebugD¿wCœşeIm¶
)(
	tıVeù
 
	tpos
, 
	tıFlßt
 
	tªgË
, cpFlßˆ
	t¿dius
, 
	tıS·ûDebugCŞÜ
 
	toušeCŞÜ
, cpS·ûDebugCŞÜ 
	tflCŞÜ
, 
	tıD©aPoš‹r
 
	td©a
);

270 (*
	tıS·ûDebugD¿wSegm’tIm¶
)(
	tıVeù
 
	ta
, cpVeù 
	tb
, 
	tıS·ûDebugCŞÜ
 
	tcŞÜ
, 
	tıD©aPoš‹r
 
	td©a
);

272 (*
	tıS·ûDebugD¿wF©Segm’tIm¶
)(
	tıVeù
 
	ta
, cpVeù 
	tb
, 
	tıFlßt
 
	t¿dius
, 
	tıS·ûDebugCŞÜ
 
	toušeCŞÜ
, cpS·ûDebugCŞÜ 
	tflCŞÜ
, 
	tıD©aPoš‹r
 
	td©a
);

274 (*
	tıS·ûDebugD¿wPŞygÚIm¶
)(
	tcouÁ
, cÚ¡ 
	tıVeù
 *
	tv”ts
, 
	tıFlßt
 
	t¿dius
, 
	tıS·ûDebugCŞÜ
 
	toušeCŞÜ
, cpS·ûDebugCŞÜ 
	tflCŞÜ
, 
	tıD©aPoš‹r
 
	td©a
);

276 (*
	tıS·ûDebugD¿wDÙIm¶
)(
	tıFlßt
 
	tsize
, 
	tıVeù
 
	tpos
, 
	tıS·ûDebugCŞÜ
 
	tcŞÜ
, 
	tıD©aPoš‹r
 
	td©a
);

278 
	$ıS·ûDebugCŞÜ
 (*
	tıS·ûDebugD¿wCŞÜFÜSh­eIm¶
)(
	tıSh­e
 *
	tsh­e
, 
	tıD©aPoš‹r
 
	td©a
);

280 
	eıS·ûDebugD¿wFÏgs
 {

281 
CP_SPACE_DEBUG_DRAW_SHAPES
 = 1<<0,

282 
CP_SPACE_DEBUG_DRAW_CONSTRAINTS
 = 1<<1,

283 
CP_SPACE_DEBUG_DRAW_COLLISION_POINTS
 = 1<<2,

284 } 
	tıS·ûDebugD¿wFÏgs
;

287 
	sıS·ûDebugD¿wO±iÚs
 {

289 
ıS·ûDebugD¿wCœşeIm¶
 
d¿wCœşe
;

291 
ıS·ûDebugD¿wSegm’tIm¶
 
d¿wSegm’t
;

293 
ıS·ûDebugD¿wF©Segm’tIm¶
 
d¿wF©Segm’t
;

295 
ıS·ûDebugD¿wPŞygÚIm¶
 
d¿wPŞygÚ
;

297 
ıS·ûDebugD¿wDÙIm¶
 
d¿wDÙ
;

300 
ıS·ûDebugD¿wFÏgs
 
æags
;

302 
ıS·ûDebugCŞÜ
 
sh­eOušeCŞÜ
;

304 
ıS·ûDebugD¿wCŞÜFÜSh­eIm¶
 
cŞÜFÜSh­e
;

306 
ıS·ûDebugCŞÜ
 
cÚ¡¿štCŞÜ
;

308 
ıS·ûDebugCŞÜ
 
cŞlisiÚPoštCŞÜ
;

311 
ıD©aPoš‹r
 
d©a
;

312 } 
	tıS·ûDebugD¿wO±iÚs
;

315 
CP_EXPORT
 
	`ıS·ûDebugD¿w
(
ıS·û
 *
¥aû
, 
ıS·ûDebugD¿wO±iÚs
 *
İtiÚs
);

	@../hdr/chipmunk/cpSpatialIndex.h

45 
	$ıBB
 (*
	tıS·tŸlIndexBBFunc
)(*
	tobj
);

47 (*
	tıS·tŸlIndexI‹¿tÜFunc
)(*
	tobj
, *
	td©a
);

49 
	$ıCŞlisiÚID
 (*
	tıS·tŸlIndexQu”yFunc
)(*
	tobj1
, *
	tobj2
, 
	tıCŞlisiÚID
 
	tid
, *
	td©a
);

51 
	$ıFlßt
 (*
	tıS·tŸlIndexSegm’tQu”yFunc
)(*
	tobj1
, *
	tobj2
, *
	td©a
);

54 
ıS·tŸlIndexCÏss
 
	tıS·tŸlIndexCÏss
;

55 
ıS·tŸlIndex
 
	tıS·tŸlIndex
;

58 
	sıS·tŸlIndex
 {

59 
ıS·tŸlIndexCÏss
 *
kÏss
;

61 
ıS·tŸlIndexBBFunc
 
bbfunc
;

63 
ıS·tŸlIndex
 *
¡©icIndex
, *
dyÇmicIndex
;

69 
ıS·ûHash
 
	tıS·ûHash
;

72 
CP_EXPORT
 
ıS·ûHash
* 
	`ıS·ûHashAÎoc
();

74 
CP_EXPORT
 
ıS·tŸlIndex
* 
	`ıS·ûHashIn™
(
ıS·ûHash
 *
hash
, 
ıFlßt
 
ûÎdim
, 
numûÎs
, 
ıS·tŸlIndexBBFunc
 
bbfunc
, cpS·tŸlIndex *
¡©icIndex
);

76 
CP_EXPORT
 
ıS·tŸlIndex
* 
	`ıS·ûHashNew
(
ıFlßt
 
ûÎdim
, 
ûÎs
, 
ıS·tŸlIndexBBFunc
 
bbfunc
, cpS·tŸlIndex *
¡©icIndex
);

82 
CP_EXPORT
 
	`ıS·ûHashResize
(
ıS·ûHash
 *
hash
, 
ıFlßt
 
ûÎdim
, 
numûÎs
);

86 
ıBBT»e
 
	tıBBT»e
;

89 
CP_EXPORT
 
ıBBT»e
* 
	`ıBBT»eAÎoc
();

91 
CP_EXPORT
 
ıS·tŸlIndex
* 
	`ıBBT»eIn™
(
ıBBT»e
 *
Œ“
, 
ıS·tŸlIndexBBFunc
 
bbfunc
, cpS·tŸlIndex *
¡©icIndex
);

93 
CP_EXPORT
 
ıS·tŸlIndex
* 
	`ıBBT»eNew
(
ıS·tŸlIndexBBFunc
 
bbfunc
, cpS·tŸlIndex *
¡©icIndex
);

96 
CP_EXPORT
 
	`ıBBT»eO±imize
(
ıS·tŸlIndex
 *
šdex
);

100 
	$ıVeù
 (*
	tıBBT»eV–oc™yFunc
)(*
	tobj
);

102 
CP_EXPORT
 
	`ıBBT»eS‘V–oc™yFunc
(
ıS·tŸlIndex
 *
šdex
, 
ıBBT»eV–oc™yFunc
 
func
);

106 
ıSw“p1D
 
	tıSw“p1D
;

109 
CP_EXPORT
 
ıSw“p1D
* 
	`ıSw“p1DAÎoc
();

111 
CP_EXPORT
 
ıS·tŸlIndex
* 
	`ıSw“p1DIn™
(
ıSw“p1D
 *
sw“p
, 
ıS·tŸlIndexBBFunc
 
bbfunc
, cpS·tŸlIndex *
¡©icIndex
);

113 
CP_EXPORT
 
ıS·tŸlIndex
* 
	`ıSw“p1DNew
(
ıS·tŸlIndexBBFunc
 
bbfunc
, cpS·tŸlIndex *
¡©icIndex
);

117 (*
	tıS·tŸlIndexDe¡royIm¶
)(
	tıS·tŸlIndex
 *
	tšdex
);

119 (*
	tıS·tŸlIndexCouÁIm¶
)(
	tıS·tŸlIndex
 *
	tšdex
);

120 (*
	tıS·tŸlIndexEachIm¶
)(
	tıS·tŸlIndex
 *
	tšdex
, 
	tıS·tŸlIndexI‹¿tÜFunc
 
	tfunc
, *
	td©a
);

122 
	$ıBoŞ
 (*
	tıS·tŸlIndexCÚšsIm¶
)(
	tıS·tŸlIndex
 *
	tšdex
, *
	tobj
, 
	tıHashV®ue
 
	thashid
);

123 (*
	tıS·tŸlIndexIn£¹Im¶
)(
	tıS·tŸlIndex
 *
	tšdex
, *
	tobj
, 
	tıHashV®ue
 
	thashid
);

124 (*
	tıS·tŸlIndexRemoveIm¶
)(
	tıS·tŸlIndex
 *
	tšdex
, *
	tobj
, 
	tıHashV®ue
 
	thashid
);

126 (*
	tıS·tŸlIndexRešdexIm¶
)(
	tıS·tŸlIndex
 *
	tšdex
);

127 (*
	tıS·tŸlIndexRešdexObjeùIm¶
)(
	tıS·tŸlIndex
 *
	tšdex
, *
	tobj
, 
	tıHashV®ue
 
	thashid
);

128 (*
	tıS·tŸlIndexRešdexQu”yIm¶
)(
	tıS·tŸlIndex
 *
	tšdex
, 
	tıS·tŸlIndexQu”yFunc
 
	tfunc
, *
	td©a
);

130 (*
	tıS·tŸlIndexQu”yIm¶
)(
	tıS·tŸlIndex
 *
	tšdex
, *
	tobj
, 
	tıBB
 
	tbb
, 
	tıS·tŸlIndexQu”yFunc
 
	tfunc
, *
	td©a
);

131 (*
	tıS·tŸlIndexSegm’tQu”yIm¶
)(
	tıS·tŸlIndex
 *
	tšdex
, *
	tobj
, 
	tıVeù
 
	ta
, cpVeù 
	tb
, 
	tıFlßt
 
	tt_ex™
, 
	tıS·tŸlIndexSegm’tQu”yFunc
 
	tfunc
, *
	td©a
);

133 
	sıS·tŸlIndexCÏss
 {

134 
ıS·tŸlIndexDe¡royIm¶
 
de¡roy
;

136 
ıS·tŸlIndexCouÁIm¶
 
couÁ
;

137 
ıS·tŸlIndexEachIm¶
 
—ch
;

139 
ıS·tŸlIndexCÚšsIm¶
 
cÚšs
;

140 
ıS·tŸlIndexIn£¹Im¶
 
š£¹
;

141 
ıS·tŸlIndexRemoveIm¶
 
»move
;

143 
ıS·tŸlIndexRešdexIm¶
 
»šdex
;

144 
ıS·tŸlIndexRešdexObjeùIm¶
 
»šdexObjeù
;

145 
ıS·tŸlIndexRešdexQu”yIm¶
 
»šdexQu”y
;

147 
ıS·tŸlIndexQu”yIm¶
 
qu”y
;

148 
ıS·tŸlIndexSegm’tQu”yIm¶
 
£gm’tQu”y
;

152 
CP_EXPORT
 
	`ıS·tŸlIndexF»e
(
ıS·tŸlIndex
 *
šdex
);

154 
CP_EXPORT
 
	`ıS·tŸlIndexCŞlideStic
(
ıS·tŸlIndex
 *
dyÇmicIndex
, cpS·tŸlIndex *
¡©icIndex
, 
ıS·tŸlIndexQu”yFunc
 
func
, *
d©a
);

157 
šlše
 
	$ıS·tŸlIndexDe¡roy
(
ıS·tŸlIndex
 *
šdex
)

159 if(
šdex
->
kÏss
èšdex->kÏss->
	`de¡roy
(index);

160 
	}
}

163 
šlše
 
	$ıS·tŸlIndexCouÁ
(
ıS·tŸlIndex
 *
šdex
)

165  
šdex
->
kÏss
->
	`couÁ
(index);

166 
	}
}

169 
šlše
 
	$ıS·tŸlIndexEach
(
ıS·tŸlIndex
 *
šdex
, 
ıS·tŸlIndexI‹¿tÜFunc
 
func
, *
d©a
)

171 
šdex
->
kÏss
->
	`—ch
(šdex, 
func
, 
d©a
);

172 
	}
}

176 
šlše
 
ıBoŞ
 
	$ıS·tŸlIndexCÚšs
(
ıS·tŸlIndex
 *
šdex
, *
obj
, 
ıHashV®ue
 
hashid
)

178  
šdex
->
kÏss
->
	`cÚšs
(šdex, 
obj
, 
hashid
);

179 
	}
}

183 
šlše
 
	$ıS·tŸlIndexIn£¹
(
ıS·tŸlIndex
 *
šdex
, *
obj
, 
ıHashV®ue
 
hashid
)

185 
šdex
->
kÏss
->
	`š£¹
(šdex, 
obj
, 
hashid
);

186 
	}
}

190 
šlše
 
	$ıS·tŸlIndexRemove
(
ıS·tŸlIndex
 *
šdex
, *
obj
, 
ıHashV®ue
 
hashid
)

192 
šdex
->
kÏss
->
	`»move
(šdex, 
obj
, 
hashid
);

193 
	}
}

196 
šlše
 
	$ıS·tŸlIndexRešdex
(
ıS·tŸlIndex
 *
šdex
)

198 
šdex
->
kÏss
->
	`»šdex
(index);

199 
	}
}

202 
šlše
 
	$ıS·tŸlIndexRešdexObjeù
(
ıS·tŸlIndex
 *
šdex
, *
obj
, 
ıHashV®ue
 
hashid
)

204 
šdex
->
kÏss
->
	`»šdexObjeù
(šdex, 
obj
, 
hashid
);

205 
	}
}

208 
šlše
 
	$ıS·tŸlIndexQu”y
(
ıS·tŸlIndex
 *
šdex
, *
obj
, 
ıBB
 
bb
, 
ıS·tŸlIndexQu”yFunc
 
func
, *
d©a
)

210 
šdex
->
kÏss
->
	`qu”y
(šdex, 
obj
, 
bb
, 
func
, 
d©a
);

211 
	}
}

214 
šlše
 
	$ıS·tŸlIndexSegm’tQu”y
(
ıS·tŸlIndex
 *
šdex
, *
obj
, 
ıVeù
 
a
, cpVeù 
b
, 
ıFlßt
 
t_ex™
, 
ıS·tŸlIndexSegm’tQu”yFunc
 
func
, *
d©a
)

216 
šdex
->
kÏss
->
	`£gm’tQu”y
(šdex, 
obj
, 
a
, 
b
, 
t_ex™
, 
func
, 
d©a
);

217 
	}
}

222 
šlše
 
	$ıS·tŸlIndexRešdexQu”y
(
ıS·tŸlIndex
 *
šdex
, 
ıS·tŸlIndexQu”yFunc
 
func
, *
d©a
)

224 
šdex
->
kÏss
->
	`»šdexQu”y
(šdex, 
func
, 
d©a
);

225 
	}
}

	@../hdr/chipmunk/cpTransform.h

22 #iâdeà
CHIPMUNK_TRANSFORM_H


23 
	#CHIPMUNK_TRANSFORM_H


	)

25 
	~"chmunk_ty³s.h
"

26 
	~"ıVeù.h
"

27 
	~"ıBB.h
"

30 cÚ¡ 
ıT¿nsfÜm
 
	gıT¿nsfÜmId’t™y
 = {1.0f, 0.0f, 0.0f, 1.0f, 0.0f, 0.0f};

36 
šlše
 
ıT¿nsfÜm


37 
	$ıT¿nsfÜmNew
(
ıFlßt
 
a
, cpFlßˆ
b
, cpFlßˆ
c
, cpFlßˆ
d
, cpFlßˆ
tx
, cpFlßˆ
ty
)

39 
ıT¿nsfÜm
 
t
 = {
a
, 
b
, 
c
, 
d
, 
tx
, 
ty
};

40  
t
;

41 
	}
}

44 
šlše
 
ıT¿nsfÜm


45 
	$ıT¿nsfÜmNewT¿n¥o£
(
ıFlßt
 
a
, cpFlßˆ
c
, cpFlßˆ
tx
, cpFlßˆ
b
, cpFlßˆ
d
, cpFlßˆ
ty
)

47 
ıT¿nsfÜm
 
t
 = {
a
, 
b
, 
c
, 
d
, 
tx
, 
ty
};

48  
t
;

49 
	}
}

52 
šlše
 
ıT¿nsfÜm


53 
	$ıT¿nsfÜmInv”£
(
ıT¿nsfÜm
 
t
)

55 
ıFlßt
 
šv_d‘
 = 1.0/(
t
.
a
*t.
d
 -.
c
*t.
b
);

56  
	`ıT¿nsfÜmNewT¿n¥o£
(

57 
t
.
d
*
šv_d‘
, -t.
c
*šv_d‘, (t.c*t.
ty
 -.
tx
*t.d)*inv_det,

58 -
t
.
b
*
šv_d‘
,.
a
*šv_d‘, (t.
tx
*t.b -.a*t.
ty
)*inv_det

60 
	}
}

63 
šlše
 
ıT¿nsfÜm


64 
	$ıT¿nsfÜmMuÉ
(
ıT¿nsfÜm
 
t1
, cpT¿nsfÜm 
t2
)

66  
	`ıT¿nsfÜmNewT¿n¥o£
(

67 
t1
.
a
*
t2
.¨+1.
c
*t2.
b
,1.a*t2.ø+1.c*t2.
d
,1.a*t2.
tx
 +1.c*t2.
ty
 +1.tx,

68 
t1
.
b
*
t2
.
a
 +1.
d
*t2.b,1.b*t2.
c
 +1.d*t2.d,1.b*t2.
tx
 +1.d*t2.
ty
 +1.ty

70 
	}
}

73 
šlše
 
ıVeù


74 
	$ıT¿nsfÜmPošt
(
ıT¿nsfÜm
 
t
, 
ıVeù
 
p
)

76  
	`ıv
(
t
.
a
*
p
.
x
 +.
c
*p.
y
 +.
tx
,.
b
*p.x +.
d
*p.y +.
ty
);

77 
	}
}

80 
šlše
 
ıVeù


81 
	$ıT¿nsfÜmVeù
(
ıT¿nsfÜm
 
t
, 
ıVeù
 
v
)

83  
	`ıv
(
t
.
a
*
v
.
x
 +.
c
*v.
y
,.
b
*v.x +.
d
*v.y);

84 
	}
}

87 
šlše
 
ıBB


88 
	$ıT¿nsfÜmbBB
(
ıT¿nsfÜm
 
t
, 
ıBB
 
bb
)

90 
ıVeù
 
ûÁ”
 = 
	`ıBBC’‹r
(
bb
);

91 
ıFlßt
 
hw
 = (
bb
.
r
 - bb.
l
)*0.5;

92 
ıFlßt
 
hh
 = (
bb
.
t
 - bb.
b
)*0.5;

94 
ıFlßt
 
a
 = 
t
.a*
hw
, 
b
 =.
c
*
hh
, 
d
 =.b*hw, 
e
 =.d*hh;

95 
ıFlßt
 
hw_max
 = 
	`ıfmax
(
	`ıçbs
(
a
 + 
b
), cpfabs(a - b));

96 
ıFlßt
 
hh_max
 = 
	`ıfmax
(
	`ıçbs
(
d
 + 
e
), cpfabs(d -ƒ));

97  
	`ıBBNewFÜEx‹Ás
(
	`ıT¿nsfÜmPošt
(
t
, 
ûÁ”
), 
hw_max
, 
hh_max
);

98 
	}
}

101 
šlše
 
ıT¿nsfÜm


102 
	$ıT¿nsfÜmT¿n¦©e
(
ıVeù
 
Œª¦©e
)

104  
	`ıT¿nsfÜmNewT¿n¥o£
(

105 1.0, 0.0, 
Œª¦©e
.
x
,

106 0.0, 1.0, 
Œª¦©e
.
y


108 
	}
}

111 
šlše
 
ıT¿nsfÜm


112 
	$ıT¿nsfÜmSÿË
(
ıFlßt
 
sÿËX
, cpFlßˆ
sÿËY
)

114  
	`ıT¿nsfÜmNewT¿n¥o£
(

115 
sÿËX
, 0.0, 0.0,

116 0.0, 
sÿËY
, 0.0

118 
	}
}

121 
šlše
 
ıT¿nsfÜm


122 
	$ıT¿nsfÜmRÙ©e
(
ıFlßt
 
¿dŸns
)

124 
ıVeù
 
rÙ
 = 
	`ıvfÜªgË
(
¿dŸns
);

125  
	`ıT¿nsfÜmNewT¿n¥o£
(

126 
rÙ
.
x
, -rÙ.
y
, 0.0,

127 
rÙ
.
y
,„Ù.
x
, 0.0

129 
	}
}

132 
šlše
 
ıT¿nsfÜm


133 
	$ıT¿nsfÜmRigid
(
ıVeù
 
Œª¦©e
, 
ıFlßt
 
¿dŸns
)

135 
ıVeù
 
rÙ
 = 
	`ıvfÜªgË
(
¿dŸns
);

136  
	`ıT¿nsfÜmNewT¿n¥o£
(

137 
rÙ
.
x
, -rÙ.
y
, 
Œª¦©e
.x,

138 
rÙ
.
y
,„Ù.
x
, 
Œª¦©e
.y

140 
	}
}

143 
šlše
 
ıT¿nsfÜm


144 
	$ıT¿nsfÜmRigidInv”£
(
ıT¿nsfÜm
 
t
)

146  
	`ıT¿nsfÜmNewT¿n¥o£
(

147 
t
.
d
, -t.
c
, (t.c*t.
ty
 -.
tx
*t.d),

148 -
t
.
b
,.
a
, (t.
tx
*t.b -.a*t.
ty
)

150 
	}
}

155 
šlše
 
ıT¿nsfÜm


156 
	$ıT¿nsfÜmW¿p
(
ıT¿nsfÜm
 
ou‹r
, cpT¿nsfÜm 
šÃr
)

158  
	`ıT¿nsfÜmMuÉ
(
	`ıT¿nsfÜmInv”£
(
ou‹r
), cpT¿nsfÜmMuÉ(
šÃr
, outer));

159 
	}
}

161 
šlše
 
ıT¿nsfÜm


162 
	$ıT¿nsfÜmW¿pInv”£
(
ıT¿nsfÜm
 
ou‹r
, cpT¿nsfÜm 
šÃr
)

164  
	`ıT¿nsfÜmMuÉ
(
ou‹r
, cpT¿nsfÜmMuÉ(
šÃr
, 
	`ıT¿nsfÜmInv”£
(outer)));

165 
	}
}

167 
šlše
 
ıT¿nsfÜm


168 
	$ıT¿nsfÜmO¹ho
(
ıBB
 
bb
)

170  
	`ıT¿nsfÜmNewT¿n¥o£
(

171 2.0/(
bb
.
r
 - bb.
l
), 0.0, -(bb.r + bb.l)/(bb.r - bb.l),

172 0.0, 2.0/(
bb
.
t
 - bb.
b
), -(bb.t + bb.b)/(bb.t - bb.b)

174 
	}
}

176 
šlše
 
ıT¿nsfÜm


177 
	$ıT¿nsfÜmBÚeSÿË
(
ıVeù
 
v0
, cpVeù 
v1
)

179 
ıVeù
 
d
 = 
	`ıvsub
(
v1
, 
v0
);

180  
	`ıT¿nsfÜmNewT¿n¥o£
(

181 
d
.
x
, -d.
y
, 
v0
.x,

182 
d
.
y
, d.
x
, 
v0
.y

184 
	}
}

186 
šlše
 
ıT¿nsfÜm


187 
	$ıT¿nsfÜmAxŸlSÿË
(
ıVeù
 
axis
, cpVeù 
pivÙ
, 
ıFlßt
 
sÿË
)

189 
ıFlßt
 
A
 = 
axis
.
x
*axis.
y
*(
sÿË
 - 1.0);

190 
ıFlßt
 
B
 = 
	`ıvdÙ
(
axis
, 
pivÙ
)*(1.0 - 
sÿË
);

192  
	`ıT¿nsfÜmNewT¿n¥o£
(

193 
sÿË
*
axis
.
x
*axis.x +‡xis.
y
*axis.y, 
A
,‡xis.x*
B
,

194 
A
, 
axis
.
x
*axis.x + 
sÿË
*axis.
y
*axis.y,‡xis.y*
B


196 
	}
}

	@../hdr/chipmunk/cpVect.h

22 #iâdeà
CHIPMUNK_VECT_H


23 
	#CHIPMUNK_VECT_H


	)

25 
	~"chmunk_ty³s.h
"

32 cÚ¡ 
ıVeù
 
	gıvz”o
 = {0.0f,0.0f};

35 
šlše
 
ıVeù
 
	$ıv
(cÚ¡ 
ıFlßt
 
x
, cÚ¡ cpFlßˆ
y
)

37 
ıVeù
 
v
 = {
x
, 
y
};

38  
v
;

39 
	}
}

42 
šlše
 
ıBoŞ
 
	$ıveql
(cÚ¡ 
ıVeù
 
v1
, cÚ¡ cpVeù 
v2
)

44  (
v1
.
x
 =ğ
v2
.x && v1.
y
 == v2.y);

45 
	}
}

48 
šlše
 
ıVeù
 
	$ıvadd
(cÚ¡ 
ıVeù
 
v1
, cÚ¡ cpVeù 
v2
)

50  
	`ıv
(
v1
.
x
 + 
v2
.x, v1.
y
 + v2.y);

51 
	}
}

54 
šlše
 
ıVeù
 
	$ıvsub
(cÚ¡ 
ıVeù
 
v1
, cÚ¡ cpVeù 
v2
)

56  
	`ıv
(
v1
.
x
 - 
v2
.x, v1.
y
 - v2.y);

57 
	}
}

60 
šlše
 
ıVeù
 
	$ıvÃg
(cÚ¡ 
ıVeù
 
v
)

62  
	`ıv
(-
v
.
x
, -v.
y
);

63 
	}
}

66 
šlše
 
ıVeù
 
	$ıvmuÉ
(cÚ¡ 
ıVeù
 
v
, cÚ¡ 
ıFlßt
 
s
)

68  
	`ıv
(
v
.
x
*
s
, v.
y
*s);

69 
	}
}

72 
šlše
 
ıFlßt
 
	$ıvdÙ
(cÚ¡ 
ıVeù
 
v1
, cÚ¡ cpVeù 
v2
)

74  
v1
.
x
*
v2
.x + v1.
y
*v2.y;

75 
	}
}

80 
šlše
 
ıFlßt
 
	$ıvüoss
(cÚ¡ 
ıVeù
 
v1
, cÚ¡ cpVeù 
v2
)

82  
v1
.
x
*
v2
.
y
 - v1.y*v2.x;

83 
	}
}

86 
šlše
 
ıVeù
 
	$ıv³½
(cÚ¡ 
ıVeù
 
v
)

88  
	`ıv
(-
v
.
y
, v.
x
);

89 
	}
}

92 
šlše
 
ıVeù
 
	$ıv½”p
(cÚ¡ 
ıVeù
 
v
)

94  
	`ıv
(
v
.
y
, -v.
x
);

95 
	}
}

98 
šlše
 
ıVeù
 
	$ıv´ojeù
(cÚ¡ 
ıVeù
 
v1
, cÚ¡ cpVeù 
v2
)

100  
	`ıvmuÉ
(
v2
, 
	`ıvdÙ
(
v1
, v2)/cpvdot(v2, v2));

101 
	}
}

104 
šlše
 
ıVeù
 
	$ıvfÜªgË
(cÚ¡ 
ıFlßt
 
a
)

106  
	`ıv
(
	`ıfcos
(
a
), 
	`ıfsš
(a));

107 
	}
}

110 
šlše
 
ıFlßt
 
	$ıvtßngË
(cÚ¡ 
ıVeù
 
v
)

112  
	`ıçn2
(
v
.
y
, v.
x
);

113 
	}
}

116 
šlše
 
ıVeù
 
	$ıvrÙ©e
(cÚ¡ 
ıVeù
 
v1
, cÚ¡ cpVeù 
v2
)

118  
	`ıv
(
v1
.
x
*
v2
.x - v1.
y
*v2.y, v1.x*v2.y + v1.y*v2.x);

119 
	}
}

122 
šlše
 
ıVeù
 
	$ıvuÄÙ©e
(cÚ¡ 
ıVeù
 
v1
, cÚ¡ cpVeù 
v2
)

124  
	`ıv
(
v1
.
x
*
v2
.x + v1.
y
*v2.y, v1.y*v2.x - v1.x*v2.y);

125 
	}
}

128 
šlše
 
ıFlßt
 
	$ıvËngthsq
(cÚ¡ 
ıVeù
 
v
)

130  
	`ıvdÙ
(
v
, v);

131 
	}
}

134 
šlše
 
ıFlßt
 
	$ıvËngth
(cÚ¡ 
ıVeù
 
v
)

136  
	`ıfsq¹
(
	`ıvdÙ
(
v
, v));

137 
	}
}

140 
šlše
 
ıVeù
 
	$ıvË½
(cÚ¡ 
ıVeù
 
v1
, cÚ¡ cpVeù 
v2
, cÚ¡ 
ıFlßt
 
t
)

142  
	`ıvadd
(
	`ıvmuÉ
(
v1
, 1.0à- 
t
), cpvmuÉ(
v2
,));

143 
	}
}

146 
šlše
 
ıVeù
 
	$ıvnÜm®ize
(cÚ¡ 
ıVeù
 
v
)

149  
	`ıvmuÉ
(
v
, 1.0f/(
	`ıvËngth
(vè+ 
CPFLOAT_MIN
));

150 
	}
}

153 
šlše
 
ıVeù


154 
	$ıv¦”p
(cÚ¡ 
ıVeù
 
v1
, cÚ¡ cpVeù 
v2
, cÚ¡ 
ıFlßt
 
t
)

156 
ıFlßt
 
dÙ
 = 
	`ıvdÙ
(
	`ıvnÜm®ize
(
v1
), cpvnÜm®ize(
v2
));

157 
ıFlßt
 
omega
 = 
	`ıçcos
(
	`ıfşamp
(
dÙ
, -1.0f, 1.0f));

159 if(
omega
 < 1e-3){

161  
	`ıvË½
(
v1
, 
v2
, 
t
);

163 
ıFlßt
 
d’om
 = 1.0f/
	`ıfsš
(
omega
);

164  
	`ıvadd
(
	`ıvmuÉ
(
v1
, 
	`ıfsš
((1.0à- 
t
)*
omega
)*
d’om
), cpvmuÉ(
v2
, cpfsin(t*omega)*denom));

166 
	}
}

169 
šlše
 
ıVeù


170 
	$ıv¦”pcÚ¡
(cÚ¡ 
ıVeù
 
v1
, cÚ¡ cpVeù 
v2
, cÚ¡ 
ıFlßt
 
a
)

172 
ıFlßt
 
dÙ
 = 
	`ıvdÙ
(
	`ıvnÜm®ize
(
v1
), cpvnÜm®ize(
v2
));

173 
ıFlßt
 
omega
 = 
	`ıçcos
(
	`ıfşamp
(
dÙ
, -1.0f, 1.0f));

175  
	`ıv¦”p
(
v1
, 
v2
, 
	`ıfmš
(
a
, 
omega
)/omega);

176 
	}
}

179 
šlše
 
ıVeù
 
	$ıvşamp
(cÚ¡ 
ıVeù
 
v
, cÚ¡ 
ıFlßt
 
Ën
)

181  (
	`ıvdÙ
(
v
,vè> 
Ën
*Ënè? 
	`ıvmuÉ
(
	`ıvnÜm®ize
(v),†en) : v;

182 
	}
}

185 
šlše
 
ıVeù
 
	$ıvË½cÚ¡
(
ıVeù
 
v1
, cpVeù 
v2
, 
ıFlßt
 
d
)

187  
	`ıvadd
(
v1
, 
	`ıvşamp
(
	`ıvsub
(
v2
, v1), 
d
));

188 
	}
}

191 
šlše
 
ıFlßt
 
	$ıvdi¡
(cÚ¡ 
ıVeù
 
v1
, cÚ¡ cpVeù 
v2
)

193  
	`ıvËngth
(
	`ıvsub
(
v1
, 
v2
));

194 
	}
}

197 
šlše
 
ıFlßt
 
	$ıvdi¡sq
(cÚ¡ 
ıVeù
 
v1
, cÚ¡ cpVeù 
v2
)

199  
	`ıvËngthsq
(
	`ıvsub
(
v1
, 
v2
));

200 
	}
}

203 
šlše
 
ıBoŞ
 
	$ıvÃ¬
(cÚ¡ 
ıVeù
 
v1
, cÚ¡ cpVeù 
v2
, cÚ¡ 
ıFlßt
 
di¡
)

205  
	`ıvdi¡sq
(
v1
, 
v2
è< 
di¡
*dist;

206 
	}
}

215 
šlše
 
ıM©2x2


216 
	$ıM©2x2New
(
ıFlßt
 
a
, cpFlßˆ
b
, cpFlßˆ
c
, cpFlßˆ
d
)

218 
ıM©2x2
 
m
 = {
a
, 
b
, 
c
, 
d
};

219  
m
;

220 
	}
}

222 
šlše
 
ıVeù


223 
	$ıM©2x2T¿nsfÜm
(
ıM©2x2
 
m
, 
ıVeù
 
v
)

225  
	`ıv
(
v
.
x
*
m
.
a
 + v.
y
*m.
b
, v.x*m.
c
 + v.y*m.
d
);

226 
	}
}

	@../hdr/game/gam_LOS.h

1 #´agm¨
Úû


3 
g_LšeOfSightS‹p
;

4 
boŞ
 
®lDroidsVisibË
;

7 
lvl_LOS
();

10 
lvl_debugLOS
();

	@../hdr/game/gam_bullet.h

1 #´agm¨
Úû


3 
	s_buÎ‘


5 
boŞ
 
	m®ive
;

6 
	mªgË
;

7 
ıVeù
 
	mwÜldPos
;

8 
ıVeù
 
	mŒav–DœeùiÚ
;

9 
	mty³
;

10 
	mcu¼’tAnimF¿me
;

11 
	mªimD–ayCouÁ
;

12 
	m¥“d
;

13 
	msourûDroid
;

14 
	m¿dius
;

15 
boŞ
 
	mdamageDÚe
;

16 
	m·¹işeIndex
;

18 
_physicObjeù
 
	mbuÎ‘PhysicsObjeù
;

21 
_buÎ‘
 
buÎ‘
[];

23 
buÎ‘T¿v–S³ed
;

24 
buÎ‘Di¤u±S³ed
;

27 
bul_´oûssBuÎ‘s
();

30 
bul_ÃwBuÎ‘
(
ıVeù
 
sourûPos
, cpVeù 
de¡Pos
, 
ty³
, 
sourûDroid
);

33 
bul_d¿wBuÎ‘s
();

35 
bul_š™BuÎ‘s
();

38 
bul_´oûssDi¤u±”
(
whichLev–
, 
whichBuÎ‘
);

41 
bul_g‘BuÎ‘ImageByTy³
(
whichTy³
);

	@../hdr/game/gam_database.h

1 #´agm¨
Úû


3 
	s_d©aBa£EÁry


5 
	mmaxH—Éh
;

6 
	mmaxS³ed
;

7 
	macûË¿‹
;

8 
	mscÜe
;

9 
	mbounûDamage
;

10 
boŞ
 
	mÿnShoÙ
;

11 
	mbuÎ‘Ty³
;

12 
	mchªûToShoÙ
;

13 
	mbuÎ‘Damage
;

14 
boŞ
 
	mdi¤u±”ImmuÃ
;

15 
	m»ch¬geTime
;

16 
	mtok’CouÁ
;

17 
	mimageIndex
;

18 
	mdesütiÚ
 [
MAX_STRING_SIZE
];

19 
	mdbImageFeName
 [
MAX_STRING_SIZE
];

20 
	mşassName
 [
MAX_STRING_SIZE
];

21 
	mheight
 [
MAX_STRING_SIZE
];

22 
	mweight
 [
MAX_STRING_SIZE
];

23 
	mdrive
 [
MAX_STRING_SIZE
];

24 
	mb¿š
 [
MAX_STRING_SIZE
];

25 
	mw—pÚ
 [
MAX_STRING_SIZE
];

26 
	m£nsÜ1
 [
MAX_STRING_SIZE
];

27 
	m£nsÜ2
 [
MAX_STRING_SIZE
];

28 
	m£nsÜ3
 [
MAX_STRING_SIZE
];

29 
	mnÙes
 [
MAX_STRING_SIZE
 * 2];

32 
_d©aBa£EÁry
 
d©aBa£EÁry
[];

35 
boŞ
 
gam_g‘DBInfÜm©iÚ
();

	@../hdr/game/gam_doors.h

1 #´agm¨
Úû


7 
	#DOOR_ACROSS
 14

	)

8 
	#DOOR_ACROSS_OPEN_1
 15

	)

9 
	#DOOR_ACROSS_OPEN_2
 16

	)

10 
	#DOOR_ACROSS_OPENED
 
NO_PASS_TILE
 + 10

	)

11 
	#DOOR_ACROSS_CLOSING_1
 22

	)

12 
	#DOOR_ACROSS_CLOSING_2
 21

	)

13 
	#DOOR_ACROSS_CLOSED
 14

	)

15 
	#DOOR_UP
 11

	)

16 
	#DOOR_UP_OPEN_1
 12

	)

17 
	#DOOR_UP_OPEN_2
 13

	)

18 
	#DOOR_UP_OPENED
 
NO_PASS_TILE
 + 9

	)

19 
	#DOOR_UP_CLOSING_1
 19

	)

20 
	#DOOR_UP_CLOSING_2
 18

	)

21 
	#DOOR_UP_CLOSED
 11

	)

23 
	#MAX_NUM_OF_DOORS
 21

	)

33 
	mm­Pos
;

34 
	mm­X
;

35 
	mm­Y
;

36 
ıVeù
 
	mtİLeá
;

37 
ıVeù
 
	mtİRight
;

38 
ıVeù
 
	mbÙLeá
;

39 
ıVeù
 
	mbÙRight
;

40 
	mcu¼’tF¿me
;

41 
	mäameD–ay
;

42 
	mÃxtF¿me
;

43 
boŞ
 
	mšU£
;

44 
_physicObjeù
 
	mphysics
;

45 } 
	t_doÜTrigg”
;

47 
_doÜTrigg”
 
doÜTrigg”
[
MAX_NUM_OF_DOORS
];

48 
numDoÜsOnLev–
;

49 
doÜF¿meD–ay
;

52 
gam_doÜTrigg”S‘up
();

55 
gam_doÜDebugTrigg”
();

58 
gam_doÜProûssAùiÚs
();

61 
gam_doÜCheckTrigg”A»as
();

	@../hdr/game/gam_droid.h

1 #´agm¨
Úû


3 
	s_droid


5 
	mdroidTy³
;

6 
	mcu¼’tH—Éh
;

7 
	mwayPoštIndex
;

8 
	mwayPoštDœeùiÚ
;

9 
	mov”TeMiddË
;

11 
	mcu¼’tS³ed
;

12 
ıVeù
 
	mwÜldPos
;

13 
ıVeù
 
	mwÜldPosMiddË
;

14 
ıVeù
 
	macûË¿tiÚ
;

15 
ıVeù
 
	mv–oc™y
;

16 
ıVeù
 
	msü“nPos
;

17 
ıVeù
 
	m´eviousWaypošts
;

18 
ıVeù
 
	mde¡š©iÚCoÜds
;

19 
ıVeù
 
	mde¡DœeùiÚ
;

20 
	mmass
;

23 
boŞ
 
	mw—pÚCªFœe
;

24 
	mw—pÚD–ay
;

27 
boŞ
 
	misStİ³d
;

28 
boŞ
 
	mhasCŞlided
;

29 
boŞ
 
	misAlive
;

30 
boŞ
 
	mvisibËToPÏy”
;

31 
boŞ
 
	misEx¶odšg
;

33 
	mcu¼’tF¿meD–ay
;

34 
	mcu¼’tF¿me
;

37 
	maSrP©hIndex
;

38 
	mai_moveMode
;

39 
	mnumb”P©hNodes
;

40 
	mcu¼’tASrIndex
;

47 
boŞ
 
	maSrDe¡š©iÚFound
;

48 
boŞ
 
	maSrIn™DÚe
;

50 
	mai_cu¼’tS‹
;

51 
	mai_ÃxtS‹
;

52 
	mai_noAùiÚCouÁ”
;

53 
	mai_noAùiÚCouÁ
;

54 
	mcŞlidedW™h
;

55 
boŞ
 
	mignÜeCŞlisiÚs
;

56 
	mignÜeCŞlisiÚsCouÁ”
;

57 
	mcŞlisiÚCouÁ
;

59 
ıVeù
 
	mÜigšPos™iÚ
;

60 
boŞ
 
	mfoundOrigšP©h
;

61 
boŞ
 
	m»tuºToOrigš
;

62 
boŞ
 
	mfoundOrigšPos™iÚ
;

63 
boŞ
 
	mÚH—lšgTe
;

64 
boŞ
 
	mfoundH—lšgTe
;

65 
	mh—lšgCouÁ
;

66 
boŞ
 
	mfoundWPTe
;

68 
boŞ
 
	misNÙP©rŞlšg
;

69 
boŞ
 
	mÚResumeDe¡Te
;

70 
boŞ
 
	mde¡S‘
;

71 
ıVeù
 
	mde¡š©iÚTe
;

72 
boŞ
 
	m»sumeDe¡Found
;

73 
boŞ
 
	m»sumeTh»adS¹ed
;

74 
ALLEGRO_THREAD
 *
	mth»adP©hFšd
;

76 
ıBody
 *
	mbody
;

77 
ıSh­e
 *
	msh­e
;

80 
_droid
 
droid
[];

81 
ex¶odeF¿meD–ay
;

82 
ba£DroidAnim©eV®ue
;

83 
maxDi¡ªûFromP©h
;

84 
moveBackToLšeSegm’t
;

85 
cŞlisiÚDamageInæiùed
;

86 
cŞlisiÚEx¶osiÚDamage
;

87 
h—lšgTim”
;

90 
gam_d¿wAÎDroids
(
whichLev–
);

93 
gam_š™DroidV®ues
(
whichLev–
);

96 
ai_moveDroidToWaypošt
(
whichDroid
);

98 
gam_isCŞlidšg
(
whichDroid
);

101 
gam_š™DroidPhysics
(
whichËv–
, 
´eviousLev–
);

104 
drd_g‘Ov”WhichTe
(
whichDroid
);

107 
boŞ
 
gam_checkDroidToDroidCŞlisiÚ
(
whichLev–
, 
whichDroid
);

110 
gam_hªdËDroidCŞlisiÚ
(
whichLev–
, 
whichDroid
);

113 
gam_ªim©eDroid
(
whichLev–
, 
whichDroid
);

116 
gam_de¡royDroid
(
whichLev–
, 
whichDroid
);

119 
drd_damageToDroid
(
whichLev–
, 
whichDroid
, 
damageSourû
, 
sourûDroid
);

122 
gam_droidW—pÚCh¬ge
(
whichLev–
, 
whichDroid
);

125 
gam_´oûssIgnÜeCŞlisiÚs
(
whichLev–
, 
whichDroid
);

128 
gam_¡İDroidMovem’t
(
whichLev–
, 
whichDroid
);

132 
gam_šüem’tCŞlisiÚCouÁ
(
whichLev–
, 
droid1
, 
droid2
);

135 
drd_upd©eDroidPos™iÚ
(
whichDroid
);

	@../hdr/game/gam_droidAI.h

1 #´agm¨
Úû


3 
	#AI_PATROL
 0

	)

4 
	#AI_PATHFIND
 1

5 
	#AI_ATTACK
 2

	)

6 
	#AI_FLEE
 3

	)

7 
	#AI_PATHFIND_START
 4

	)

8 
	#AI_PATHFIND_END
 5

	)

9 
	#AI_MODE_CONTINUE_PATH
 6

	)

12 
	#AI_NO_ACTION
 8

	)

13 
	#AI_FOLLOW_PATH
 9

14 
	#AI_CHECK_HEALTH
 10

	)

15 
	#AI_EVAL_NEXT_OPTION
 11

	)

17 
	#AI_MODE_WAYPOINT
 0

	)

18 
	#AI_MODE_ASTAR
 1

	)

20 
	#AI_STATE_PATROL
 0

	)

21 
	#AI_STATE_HEALTH
 1

	)

23 cÚ¡ 
	gAI_NODE_SEQUENCE
 = 1;

24 cÚ¡ 
	gAI_NODE_SELECTOR
 = 2;

25 cÚ¡ 
	gAI_NODE_EXECUTE
 = 3;

26 cÚ¡ 
	gAI_NODE_ALWAYS_SUCCEED
 = 4;

28 cÚ¡ 
	gAI_RESULT_INVALID
 = 0;

29 cÚ¡ 
	gAI_RESULT_SUCCESS
 = 1;

30 cÚ¡ 
	gAI_RESULT_FAILED
 = 2;

31 cÚ¡ 
	gAI_RESULT_RUNNING
 = 3;

33 cÚ¡ 
	gTILE_TYPE_HEALING
 = 1;

34 cÚ¡ 
	gTILE_TYPE_NEAREST_WP
 = 2;

38 
¡ršg
 
	mnodeName
;

39 
	mnodeTy³
;

40 
	mfunùiÚResuÉ
;

41 
	m·»ÁIndex
;

42 
boŞ
 
	mhasChd»n
;

43 
	mnumChd»n
;

44 
	mchdVis™edCouÁ”
;

45 
	mveùÜ
<> 
	mchdIndex
;

46 
Ex‹ºFunc
 
	mfunùiÚName
;

47 } 
	t_aiNode
;

49 
veùÜ
<
_aiNode
> 
aiT»e
;

50 
boŞ
 
backToAIRoÙ
;

52 
	~"gam_droidAI_Resume.h
"

61 
ai_£tupAIT»e
();

64 
ai_w®kT»e
(
¡ršg
 
¡¬tNode
, 
whichDroid
);

67 
ai_debugT»e
(
¡ršg
 
¡¬tNode
);

70 
boŞ
 
ai_addNode
(
nodeTy³
, 
¡ršg
 
·»ÁNode
, sŒšg 
nodeName
, 
Ex‹ºFunc
 
funùiÚPŒ
);

72 
wayPoštDe¡š©iÚSize
;

73 
mšChªgeDœeùiÚS³ed
;

74 
boŞ
 
u£DroidAcûË¿tiÚ
;

77 
drd_ş—rHadCŞlidedFÏg
();

86 
ai_g‘NextWaypošt
(
whichDroid
);

89 
ai_h—ÉhIsOk
(
whichDroid
);

95 
ai_ÿnMove
(
whichDroid
);

98 
ai_ÿnRev”£DœeùiÚ
(
whichDroid
);

101 
ıVeù
 
ai_fšdN—»¡Te
(
whichDroid
, 
teTy³
);

110 
ai_isDroidH—Éhy
(
whichDroid
);

113 
ai_fšdN—»¡H—lšgTe
(
whichDroid
);

115 
ai_»achedH—lšgTe
(
whichDroid
);

118 
ai_ÚH—lšgTe
(
whichDroid
);

127 
ai_ÜigšN“dToRun
(
whichDroid
);

130 
ai_»tuºToOrigš
(
whichDroid
);

133 
ai_foundOrigšPos™iÚ
(
whichDroid
);

136 
ai_ÜigšFoundP©h
(
whichDroid
);

140 
ai_´oûssCŞlisiÚCouÁ”
(
whichDroid
);

143 
drd_´oûssDroidAI
(
whichLev–
);

146 
gam_sw­WaypoštDœeùiÚ
(
whichLev–
, 
whichDroid1
, 
whichDroid2
);

149 
gam_fœeAtPÏy”
(
whichLev–
, 
whichDroid
);

152 
drd_£tAINoAùiÚ
(
whichDroid
, 
timeL’gth
);

155 
ai_fšdN—»¡H—lšgTe
(
whichDroid
);

	@../hdr/game/gam_droidAI_Resume.h

1 #´agm¨
Úû


4 
ai_isNÙP©rŞlšg
(
whichDroid
);

7 
ai_ÚResumeDe¡
(
whichDroid
);

10 
ai_»achedResumeDe¡
(
whichDroid
);

13 
ai_foundResumeDe¡
(
whichDroid
);

	@../hdr/game/gam_intro.h

1 #´agm¨
Úû


3 
šŒoS¹X
;

4 
šŒoS¹Y
;

5 
šŒoWidth
;

6 
šŒoHeight
;

7 
šŒoSüŞl¥“d
;

8 
šŒoBackRed
;

9 
šŒoBackG»’
;

10 
šŒoBackBlue
;

11 
šŒoBackAÍha
;

12 
šŒoFÚtRed
;

13 
šŒoFÚtG»’
;

14 
šŒoFÚtBlue
;

15 
šŒoFÚtAÍha
;

16 
šŒoSüŞlD–ay
;

19 
gam_di¥ÏyIÁroText
();

	@../hdr/game/gam_levels.h

1 #´agm¨
Úû


3 
	#MAP_VERSION
 115

	)

5 
	#MAX_NUM_SPRITES
 20

6 
	#MAX_NUM_OF_WAYPOINTS
 100

	)

7 
	#NUM_OF_LEVELS
 21

	)

8 
	#MAX_NUM_OF_LIFTS
 3

	)

10 
	#TILE_SIZE
 32

	)

12 
	#NO_PASS_TILE
 40

	)

13 
	#LIFT_TILE
 
NO_PASS_TILE
 + 1

	)

14 
	#HEALING_TILE
 
LIFT_TILE
 + 4

	)

16 
	#ALERT_GREEN_TILE
 4

	)

17 
	#ALERT_YELLOW_TILE
 5

	)

18 
	#ALERT_RED_TILE
 6

	)

20 
	#TERMINAL_TOP
 51

	)

21 
	#TERMINAL_BOTTOM
 52

	)

22 
	#TERMINAL_RIGHT
 53

	)

23 
	#TERMINAL_LEFT
 54

	)

25 
	#HEALING_TILE
 
LIFT_TILE
 + 4

	)

27 
cu¼’tAË¹Lev–
;

29 
	s_my2DIÁ


31 
	mx
;

32 
	my
;

35 
_my2DIÁ
 
d¿wOff£t
;

44 
ıVeù
 
	m¡¬t
;

45 
ıVeù
 
	mfšish
;

46 } 
	t_lšeSegm’t
;

53 
	s_liáBasic


55 
	mtuÂ–
;

56 
	mposX
;

57 
	mposY
;

60 
	s_Ëv–SŒuù


62 
	mm­V”siÚ
;

63 
	mnumLšeSegm’ts
;

64 
	mnumWaypošts
;

65 
	mnumDroids
;

66 
	mnumLiás
;

67 
ıVeù
 
	mËv–Dim’siÚs
;

68 
	mveùÜ
<
	m_lšeSegm’t
> 
	mlšeSegm’ts
;

69 
	mveùÜ
<
	mıVeù
> 
	mwayPošts
;

70 
	mveùÜ
<> 
	mtes
;

71 
	mveùÜ
<> 
	mdroidTy³s
;

72 
	mËv–Name
[20];

76 
	mnumEÃm›sAlive
;

77 
	mveùÜ
<
	m_droid
> 
	mdroid
;

78 
	mveùÜ
<
	m_liáBasic
> 
	mliás
;

96 
_Ëv–SŒuù
 
shLev–
[];

98 
cu¼’tLev–
;

105 
	s_basicH—lšg


107 
	mnumOnLev–
;

108 
	mpos
;

109 
	mnumF¿mes
;

110 
	mcu¼’tF¿me
;

111 
	mäameD–ay
;

112 
	mÃxtF¿me
;

113 
ıVeù
 
	mwÜldPos™iÚ
;

116 
_basicH—lšg
 *
h—lšg
;

118 
di¥ÏyScÜeSŒšg
[
NUM_SCORE_CHARS
];

119 
cu¼’tScÜe
;

120 
di¥ÏyScÜe
;

121 
scÜeD–ay
;

122 
scÜeD–ayV®ue
;

123 
y–lowAË¹Lev–
;

124 
»dAË¹Lev–
;

125 
Ëv–BÚus
;

134 
boŞ
 
gam_lßdAÎLev–s
();

137 
gam_putPÏy”OnLiá
(
whichLiá
);

140 
gam_chªgeToLev–
(
ÃwËv–
, 
whichLiá
);

143 
gam_chªgeToLev–FromSüt
(
ÃwLev–
);

147 
gam_fšdH—lšgTes
(
whichLev–
);

150 
gam_ªim©eH—lTes
(
whichLev–
);

153 
lvl_g‘LiáPos™iÚs
(
whichLev–
);

156 
gam_checkAË¹Lev–
();

159 
gam_pow”DownLev–
(
whichLev–
, 
boŞ
 
¶aySound
);

166 
gam_´oûssScÜe
(
š‹½Ş©e
);

169 
gam_addToScÜe
(
scÜeV®ue
);

	@../hdr/game/gam_particles.h

1 #´agm¨
Úû


3 
	#PARTICLE_TYPE_EXPLOSION
 0x00

	)

4 
	#PARTICLE_TYPE_TRAIL
 0x01

	)

5 
	#PARTICLE_TYPE_SPARK
 0x02

	)

9 
ALLEGRO_COLOR
 
	mcŞÜ
;

10 
ıVeù
 
	mdœeùiÚ
;

11 
ıVeù
 
	mwÜldPos
;

12 
ıBody
 *
	mbody
;

13 
ıSh­e
 *
	msh­e
;

14 } 
	t_·¹işe
;

18 
ıVeù
 
	mwÜldPos
;

19 
	mnumP¬tişesAlive
;

20 
	mty³
;

21 
	mbuÎ‘Lšk
;

22 
	mli¡
<
	m_·¹işe
> 
	m·¹işe
;

23 } 
	t_em™‹r
;

25 
li¡
<
_em™‹r
> 
em™‹r
;

26 
¡d
::
li¡
<
_·¹işe
>::
™”©Ü
 
™r
;

29 
·r_š™Em™‹r
(
ıVeù
 
wÜldPos
, 
ty³
, 
whichBuÎ‘
);

32 
·r_d¿wP¬tişes
();

35 
·r_ªim©eP¬tişes
();

38 
·r_»moveEm™‹r
(
whichEm™‹r
);

41 
·r_debugP¬tişes
();

	@../hdr/game/gam_pathFind.h

1 #´agm¨
Úû


3 
	#NODE_UP
 0x0

	)

4 
	#NODE_DOWN
 0x1

	)

5 
	#NODE_LEFT
 0x2

	)

6 
	#NODE_RIGHT
 0x4

	)

10 
boŞ
 
	mw®kabË
;

11 
ıVeù
 
	mteLoÿtiÚ
;

12 
	m·»Á
;

13 
	mg_movem’tCo¡
;

14 
	mh_e¡MoveCo¡
;

15 
	mf_scÜe
;

16 } 
	t_·thNode
;

20 
	mwhichDroid
;

21 
boŞ
 
	m·thR—dy
;

22 
boŞ
 
	mwayPoštsR—dy
;

23 
ıVeù
 
	m¡¬tTe
;

24 
ıVeù
 
	mde¡Te
;

25 
	mcu¼’tNodePŒClo£dLi¡
;

26 
	mveùÜ
<
	m_·thNode
> 
	mİ’Nodes
;

27 
	mveùÜ
<
	m_·thNode
> 
	mşo£dNodes
;

28 
	mveùÜ
<
	m_·thNode
> 
	mfoundP©h
;

29 
	mveùÜ
<
	mıVeù
> 
	mwayPošts
;

30 
ALLEGRO_THREAD
 *
	mth»ad
;

31 } 
	t_nodeLi¡
;

33 
veùÜ
<
_nodeLi¡
> 
·th
;

34 
numASrP©hs
;

35 
ALLEGRO_MUTEX
 *
mu‹xWayPoštsR—dy
;

39 
gam_ASrReque¡NewP©h
 (
ıVeù
 
¡¬t
, cpVeù 
de¡š©iÚ
, 
whichDroid
);

42 
boŞ
 
gam_ASrIsP©hR—dy
 (
whichP©h
);

45 
gam_ASrRemoveP©h
 (
whichP©h
);

48 
gam_ASrG‘NumWaypošts
(
whichP©h
);

51 
gam_ASrDebugWayPošts
 (
whichP©h
);

54 
gam_ASrDebugP©hs
 ();

	@../hdr/game/gam_player.h

1 #´agm¨
Úû


3 
ıVeù
 
¶ay”V–oc™y
;

4 
ıVeù
 
¶ay”WÜldPos
;

5 
ıVeù
 
¶ay”WÜldMiddËPos
;

6 
ıVeù
 
¶ay”WÜldNextPos
;

7 
ıVeù
 
¶ay”Sü“nPos
;

8 
¶ay”Cu¼’tF¿me
;

10 
¶ay”AcûË¿tiÚ
;

11 
¶ay”MaxS³ed
;

12 
¶ay”MaxV–oc™y
;

13 
¶ay”Cu¼’tH—Éh
;

14 
¶ay”DroidTy³DBIndex
;

16 
boŞ
 
¶ay”W—pÚR—dyToFœe
;

17 
¶ay”W—pÚRech¬geTime
;

19 
¶ay”DroidTy³Image
;

21 
g¿v™y
;

24 
boŞ
 
teCŞlisiÚOn
;

25 
boŞ
 
doCÏmpPÏy”V–oc™y
;

26 
boŞ
 
šT¿nsãrMode
;

28 
¶ay”Ov”Te
;

30 
h—lšgR©e
;

33 
gam_´oûssPÏy”Movem’t
(
thškTime
);

37 
gam_£tupPÏy”V®ues
(
cİyFrom
);

39 
gam_ªim©ePÏy”S´™e
(
d–ayIÁ”v®
);

42 
gam_w—pÚRech¬gePÏy”
();

45 
gam_checkT¿nsãrSound
();

48 
gam_checkPÏy”H—lšgTe
(
thškTime
);

52 
gam_doDamageToPÏy”
(
damageSourû
, 
sourûDroid
);

	@../hdr/game/gam_render.h

1 #´agm¨
Úû


3 
boŞ
 
´oûssFadeV®ue
;

4 
cu¼’tFadeAùiÚ
;

5 
çdeV®ue
;

6 
modeAá”FadeOff
;

8 
tePosX
;

9 
tePosY
;

10 
pix–X
;

11 
pix–Y
;

12 
¡©usText
[32];

13 
¡©usTextX
, 
¡©usTextY
, 
scÜeTextX
;

17 
gam_d¿wAÎTes
();

20 
gam_d¿wImage
(
imageIndex
, 
posX
, 
posY
, 
æags
);

23 
boŞ
 
gam_£tupFBO
(
æags
);

26 
gam_´oûssFadeV®ue
();

29 
gam_d¿wS´™e
(
cu¼’tF¿me
, 
imageIndex
, 
ıVeù
 
pos™iÚ
, 
ªgË
, 
ALLEGRO_COLOR
 
cŞÜ
);

32 
gam_d¿wB™m­FromSüt
(
šdex
, 
posX
, 
posY
, 
»d
, 
g»’
, 
blue
, 
®pha
);

35 
gam_d¿wS´™eFromSüt
(
šdex
, 
posX
, 
posY
, 
»d
, 
g»’
, 
blue
, 
®pha
);

38 
gam_ä“TeTexMemÜy
();

41 
gam_ÿlcTeTexCoÜds
();

44 
ıVeù
 
gam_g‘TeTexCoÜds
(
whichTe
);

47 
gam_d¿wSideV›w
();

50 
gam_d¿wSrf›ld
();

53 
‹rm_showCu¼’tLev–
();

56 
gam_d¿wHud
();

59 
gam_£tHUDS‹
(
ÃwS‹
);

	@../hdr/game/gam_sideView.h

1 #´agm¨
Úû


9 
	#MAX_LEVELS
 29

	)

10 
	#NUM_OF_TUNNELS
 8

	)

12 
cu¼’tTuÂ–
;

20 
	s_basicTuÂ–


22 
	mtİ
;

23 
	mbÙtom
;

24 
	mcu¼’t
;

25 
	mcu¼’t_deck
;

26 
	mdecks
[6];

29 
_basicTuÂ–
 
tuÂ–
[
NUM_OF_TUNNELS
];

31 
	s_sidev›wBasicLev–


33 
	mx1
;

34 
	my1
;

35 
	mx2
;

36 
	my2
;

37 
	mup
;

38 
	mdown
;

41 
	s_myReùªgË


43 
	mx1
;

44 
	my1
;

45 
	mx2
;

46 
	my2
;

49 
_sidev›wBasicLev–
 
sidev›wLev–s
[
MAX_LEVELS
];

52 
boŞ
 
io_lßdSideV›wD©a
(cÚ¡ *
sidev›wFeName
);

55 
gam_d¿wSideV›wLev–s
();

58 
gam_£tupTuÂ–s
();

61 
gam_g‘TuÂ–ToU£
();

64 
gam_putPÏy”OnLiáFromTuÂ–
();

	@../hdr/game/gam_spotLight.h

1 #´agm¨
Úû


5 
ıVeù
 
	mwÜldPos™iÚ
;

6 
ıVeù
 
	m¤cPos™iÚ
;

7 
	mrÙ©eAngË
;

8 
	mrÙ©eS³edCouÁ
;

9 
	mb™m­Width
;

10 
	mb™m­Height
;

11 } 
	t_¥ÙLight
;

13 
veùÜ
<
_¥ÙLight
> 
¥ÙLight
;

16 
gam_fšdAÎAË¹Tes
(
boŞ
 
ş—rVeùÜ
);

19 
gam_ªim©eSpÙLights
();

22 
gam_d¿wSpÙLights
();

	@../hdr/game/gam_starfield.h

1 #´agm¨
Úû


3 
ALLEGRO_VERTEX
 *
¡¬s
;

4 
numSrs
;

5 
boŞ
 
u£Srf›ld
;

8 
gam_ä“SrF›ld
();

13 
boŞ
 
gam_£tupSrF›ld
();

16 
gam_ªim©eSrF›ld
(
š‹½Ş©e
);

	@../hdr/game/gam_terminal.h

1 #´agm¨
Úû


3 
	#TERM_MODE_MENU
 0

	)

4 
	#TERM_MODE_DB
 1

	)

5 
	#TERM_MODE_LEVEL
 2

	)

6 
	#TERM_MODE_SIDE
 3

	)

8 
cu¼’tT”mM’u
;

9 
cu¼’tT”mMode
;

11 
‹rm0PosX
;

12 
‹rm0PosY
;

14 
‹rm1PosX
;

15 
‹rm1PosY
;

17 
‹rm2PosX
;

18 
‹rm2PosY
;

20 
‹rm3PosX
;

21 
‹rm3PosY
;

23 
‹rm0Index
;

24 
‹rm1Index
;

25 
‹rm2Index
;

26 
‹rm3Index
;

28 
dbImagePos™iÚX
;

29 
dbImagePos™iÚY
;

31 
dbS¹X
;

32 
dbS¹Y
;

33 
dbWidth
;

34 
dbHeight
;

35 
dbSüŞl¥“d
;

36 
dbBackRed
;

37 
dbBackG»’
;

38 
dbBackBlue
;

39 
dbBackAÍha
;

40 
dbFÚtRed
;

41 
dbFÚtG»’
;

42 
dbFÚtBlue
;

43 
dbFÚtAÍha
;

44 
dbSüŞlD–ay
;

46 
droidTy³DBIndex
;

49 
boŞ
 
gui_d¿wT”mš®Sü“n
();

52 
gam_d¿wDB_Droid
();

55 
gam_ªim©eDB_Droid
();

58 
gam_£tupDBText
();

61 
gam_g‘NextDroid
();

64 
gam_g‘P»viousDroid
();

67 
boŞ
 
gam_lßdDroidMod–
(
whichDroid
);

	@../hdr/game/gam_transfer.h

1 #´agm¨
Úû


3 
	#PLAYER_TRANSFER
 0

	)

4 
	#DROID_TRANSFER
 1

	)

6 
	#CIRCUIT_REVERSED
 1

	)

7 
	#CIRCUIT_REPEATER
 2

	)

9 
	#CIRCUIT_NORMAL
 1

	)

10 
	#CIRCUIT_THREEQUARTERS
 2

	)

11 
	#CIRCUIT_HALF
 3

	)

12 
	#CIRCUIT_QUARTER
 4

	)

13 
	#CIRCUIT_TWO_INTO_ONE
 5

	)

14 
	#CIRCUIT_ONE_INTO_TWO
 6

	)

15 
	#CIRCUIT_NORMAL_1
 7

	)

16 
	#CIRCUIT_NORMAL_2
 8

	)

18 
	#CIRCUIT_SPLIT_HALF
 16

	)

19 
	#CIRCUIT_ONE_INTO_TWO_SHORT
 17

	)

20 
	#CIRCUIT_SPLIT_TWO_INTO_ONE
 18

	)

22 
	#NUMBER_CELLS
 16

23 
	#POWER_ON_TIME
 20

	)

25 
	#LEFT_SIDE
 1

	)

26 
	#RIGHT_SIDE
 2

	)

28 
	#TRANSFER_DELAY
 2.0f

	)

29 
	#TRANSFER_SPEED
 1.0f

	)

31 
	#TOKEN_POS_LAUNCH
 -1

	)

32 
	#TOKEN_POS_HIDE
 -2

	)

34 
	#POWER_YELLOW
 1

	)

35 
	#POWER_PURPLE
 2

	)

36 
	#POWER_DISPUTE
 3

	)

38 
¶ay”OnSide
;

39 
droidOnSide
;

40 
squ¬eWidth
;

41 
squ¬eHeight
;

44 
droidTy³ToT¿nsãrIÁo
;

45 
numPÏy”Tok’s
;

46 
numDroidTok’s
;

47 
ÃxtCœcu™ToU£
;

48 
¶ay”BlockPos
;

49 
droidBlockPos
;

50 
£ËùSideCouÁ”
;

51 
d–ayT¿nsãrIÁro
;

53 
ŒªsãrDroidPosX
;

54 
ŒªsãrDroidPosY
;

55 
ŒªsãrTextPosX
;

56 
ŒªsãrTextHeight
;

57 
ŒªsãrTextPosY
;

58 
ŒªsãrT™ËPosX
;

59 
ŒªsãrT™ËPosY
;

61 
boŞ
 
cœcu™Found
;

62 
cœcu™TimeAlive
;

64 
ALLEGRO_COLOR
 
cu¼’tWšÃr
;

66 
numAùiveLeá
;

67 
numAùiveRight
;

68 
numAùiveDi¥u‹
;

70 
	s_ŒªsãrC–ls


72 
	m¡¬tX
;

73 
	m¡¬tY
;

74 
	mcu¼’tCŞÜ
;

75 
ALLEGRO_COLOR
 
	mcŞÜ
;

77 
boŞ
 
	mpow”OnLeá
;

78 
	mpow”OnS¹Leá
;

79 
	mcœcu™Ty³Leá
;

81 
boŞ
 
	mpow”OnRight
;

82 
	mpow”OnS¹Right
;

83 
	mcœcu™Ty³Right
;

85 
boŞ
 
	m»³©”LeáAùiv©ed
;

86 
boŞ
 
	m»³©”RightAùiv©ed
;

88 
boŞ
 
	m»v”£dLeáAùiv©ed
;

89 
boŞ
 
	m»v”£dRightAùiv©ed
;

91 
boŞ
 
	misR•—‹rLeá
;

92 
boŞ
 
	misR•—‹rRight
;

94 
boŞ
 
	misRev”£dLeá
;

95 
boŞ
 
	misRev”£dRight
;

98 
_ŒªsãrC–ls
 
ŒªsãrC–ls
[];

107 
ho¡_ŒªsS‘EfãùTy³
(
whichC–l
, 
whichSide
, 
whichEfãù
);

110 
ho¡_ŒªsS‘DeçuÉV®ues
(
whichC–l
);

113 
ho¡_ŒªS‘Cœcu™Ty³
(
whichC–l
, 
whichSide
, 
ty³S‘
);

116 
ho¡_ŒªsS‘C–lCŞÜ
(
whichC–l
, 
cŞTy³
, 
»d
, 
g»’
, 
blue
, 
®pha
);

119 
ho¡_ŒªsS‘C–lPos
(
whichC–l
, 
posX
, 
posY
);

122 
ho¡_g‘C­³dRªdomNum
(
ÿp
);

125 
boŞ
 
ho¡_cœcu™NÙPow”ed
(
whichC–l
, 
whichSide
);

128 
Œn_aùiv©eCœcu™
(
whichC–l
, 
whichSide
);

131 
Œn_£tupTok’s
();

135 
Œn_¶aûTok’
(
whichC–l
, 
whichSide
, 
¶ay”OrDroid
);

138 
Œn_moveTok’
(
whichDœeùiÚ
);

141 
Œn_´oûssT¿nsãrSü“n
();

144 
Œn_´oûssCœcu™s
(
š‹½Ş©e
);

147 
Œn_´oûssEÃmyMove
();

150 
Œn_ÃxtPÏy”Tok’
();

159 
gam_doT¿nsãrThšk
(
thškIÁ”v®
);

162 
Œn_ÃxtDroidTok’
();

171 
Œª_d¿wT¿nsãrC–ls
(
boŞ
 
ju¡Background
);

174 
Œª_debugCœcu™s
();

178 
Œª_d¿wCœcu™Block
(
blockDœeùiÚ
, 
whichC–l
, 
posX
, 
»d
, 
g»’
, 
blue
, 
®pha
);

181 
Œª_d¿wTok’s
();

185 
Œn_¡¬tT¿nsãrMode
(
ŒªsãrToDroid
);

188 
Œn_ex™T¿nsãrmode
();

191 
Œn_´oûssT¿nsãrSü“n
(
š‹½Ş©e
);

196 
Œn_d¿wT¿nsãrSü“n
();

	@../hdr/gui/gui_main.h

1 #´agm¨
Úû


3 
	#GUI_LABEL_SIZE
 32

	)

5 
	#GUI_COORD_TYPE_PIXEL
 0

	)

6 
	#GUI_COORD_TYPE_PERCENT
 1

	)

8 
	#SLIDER_LABEL_GUTTER
 7.0f

	)

10 
	#LABEL_GUTTER_HEIGHT
 4

	)

11 
	#LABEL_GUTTER_LEFT
 15

	)

12 
	#LABEL_GUTTER_RIGHT
 15

	)

15 
	#GUI_OBJECT_SCREEN
 1

	)

16 
	#GUI_OBJECT_BUTTON
 2

	)

17 
	#GUI_OBJECT_CHECKBOX
 3

	)

18 
	#GUI_OBJECT_TEXT_LABEL
 4

	)

32 
	#GUI_BUTTON_ACTIVE_COL
 0

	)

33 
	#GUI_BUTTON_INACTIVE_COL
 1

	)

34 
	#GUI_BUTTON_ACTIVE_EDGE_COL
 2

	)

35 
	#GUI_BUTTON_INACTIVE_EDGE_COL
 3

	)

36 
	#GUI_BUTTON_ACTIVE_LABEL_COL
 4

	)

37 
	#GUI_BUTTON_INACTIVE_LABEL_COL
 5

	)

39 
	#GUI_CHECKBOX_TICKED_COL
 6

	)

40 
	#GUI_CHECKBOX_NOT_TICKED_COL
 7

	)

41 
	#GUI_OBJECT_TEXT_LABEL_COLOR
 8

	)

43 
	#GUI_LABEL_CENTER
 0

	)

44 
	#GUI_LABEL_LEFT
 1

	)

45 
	#GUI_LABEL_RIGHT
 2

	)

47 
	#FOCUS_NEXT
 0

	)

48 
	#FOCUS_PREVIOUS
 1

	)

50 
boŞ
 
guiR—dy
;

54 
	mx
, 
	my
, 
	mw
, 
	mh
;

55 } 
	t_objCoÜds
;

59 
	m£ËùedObjeù
;

60 
¡ršg
 
	msü“nID
;

61 
	mveùÜ
<> 
	mobjeùIDIndex
;

62 
	mveùÜ
<> 
	mobjeùTy³
;

63 } 
	t_sü“nObjeù
;

67 
boŞ
 
	m£Ëùed
;

68 
¡ršg
 
	mobjeùID
;

69 
	mobjeùTy³
;

70 
	msü“nID
;

71 
	mcoÜdTy³
;

72 
	mÏb–Pos
;

73 
ALLEGRO_COLOR
 
	maùiveCŞ
;

74 
ALLEGRO_COLOR
 
	mšAùiveCŞ
;

75 
ALLEGRO_COLOR
 
	medgeAùiveCŞ
;

76 
ALLEGRO_COLOR
 
	medgeInAùiveCŞ
;

77 
ALLEGRO_COLOR
 
	maùiveLab–CŞ
;

78 
ALLEGRO_COLOR
 
	mšAùiveLab–CŞ
;

79 
_objCoÜds
 
	mboundšgBox
;

80 
	mÏb–S¹X
;

81 
	mÏb–S¹Y
;

82 
¡ršg
 
	mÏb–
;

83 
¡ršg
 
	maùiÚ
;

84 } 
	t_guiObjeù
;

88 
_guiObjeù
 
	m©Œibu‹s
;

89 
	mbu‰ÚOÃ
;

90 
	mbu‰ÚTwo
;

91 } 
	t_guiPİUp
;

93 
_guiPİUp
 
guiPİUp
;

97 
_guiObjeù
 
	m©Œibu‹s
;

98 
boŞ
 
	mticked
;

99 
	m‹xtG­
;

100 
	mcheckG­
;

101 
	mÏb–G­
;

102 
	mwhichGroup
;

103 } 
	t_guiCheckBox
;

105 
veùÜ
<
_sü“nObjeù
> 
guiSü“ns
;

106 
veùÜ
<
_guiCheckBox
> 
guiCheckBoxes
;

107 
veùÜ
<
_guiObjeù
> 
guiBu‰Ús
;

108 
veùÜ
<
_guiObjeù
> 
guiTextLab–s
;

111 
cu¼’tObjeùS–eùed
;

113 
cu¼’tGUISü“n
;

114 
mou£PosX
;

115 
mou£PosY
;

117 
bu‰ÚCurveX
;

118 
bu‰ÚCurveY
;

120 
¿¡”PosY
;

125 
gui_fšdIndex
(
guiObjeùTy³
, 
¡ršg
 
objeùID
);

128 
gui_ho¡C»©eNewSü“n
(
¡ršg
 
sü“nID
);

131 
gui_ho¡C»©eObjeù
(
guiObjeùTy³
, 
¡ršg
 
objeùID
);

134 
gui_ho¡AddObjeùToSü“n
(
guiObjeùTy³
, 
¡ršg
 
whichObjeù
, sŒšg 
whichSü“n
);

137 
gui_ho¡S‘ObjeùPos™iÚ
(
guiObjeùTy³
, 
¡ršg
 
objeùID
, 
coÜdTy³
, 
¡¬tX
, 
¡¬tY
, 
width
, 
height
);

140 
gui_ho¡S‘ObjeùFunùiÚs
(
guiObjeùTy³
, 
¡ršg
 
objeùID
, sŒšg 
şickFunùiÚ
, sŒšg 
mou£FunùiÚ
);

143 
gui_ho¡S‘ObjeùCŞÜ
(
guiObjeùTy³
, 
¡ršg
 
objeùID
, 
whichCŞÜ
, 
»d
, 
g»’
, 
blue
, 
®pha
);

146 
gui_ho¡S‘ObjeùLab–
(
guiObjeùTy³
, 
¡ršg
 
objeùID
, 
Ïb–Pos
, sŒšg 
ÃwLab–
);

149 
gui_ho¡S‘CheckboxGroup
(
¡ršg
 
objeùID
, 
whichGroup
);

153 
gui_ho¡S‘CheckboxTick
(
¡ršg
 
objeùID
, 
whichGroup
);

156 
boŞ
 
gui_š™GUI
();

159 
gui_hªdËFocusMove
(
moveDœeùiÚ
, 
boŞ
 
keAùiÚ
);

162 
gui_debugGUI
();

165 
gui_d¿wRa¡”Lšes
();

168 
gui_ªim©eRa¡”Lše
();

	@../hdr/gui/gui_scrollBox.h

1 #´agm¨
Úû


5 
	m‹xt
[
MAX_NUM_CHARS_IN_LINE
];

6 } 
	t_süŞlLše
;

10 
	m¡¬tX
;

11 
	m¡¬tY
;

12 
	mwidth
;

13 
	mheight
;

14 
	mwhichFÚt
;

15 
ALLEGRO_COLOR
 
	mbackGroundCŞ
;

16 
ALLEGRO_COLOR
 
	mfÚtCŞ
;

17 
	mlšesToPršt
;

18 
	mch¬PŒ
;

19 
	msüŞlY
;

20 
	msüŞlS³ed
;

21 
	msüŞlD–ayCouÁ
;

22 
	msüŞlD–ay
;

23 
_süŞlLše
 
	mlše
[
MAX_LINES_IN_SCREEN
];

24 *
	msourûText
;

25 
Ex‹ºFunc
 
	mfuncPŒ
;

26 } 
	t_süŞlBox
;

28 
_süŞlBox
 
šŒoSüŞlBox
;

29 
_süŞlBox
 
d©aba£SüŞlBox
;

32 
gui_£tupSüŞlBox
(
whichSüŞlBox
, 
_süŞlBox
 *
süŞlBox
, cÚ¡ *
£ùiÚ
, cÚ¡ *
sourûText
, 
Ex‹ºFunc
 
funcPŒ
);

35 
boŞ
 
gui_d¿wSüŞlBox
(
_süŞlBox
 *
süŞlBox
);

38 
gui_süŞlSüŞlBox
(
_süŞlBox
 *
süŞlBox
);

	@../hdr/io/io_configFile.h

1 #´agm¨
Úû


4 
io_lßdCÚfigFe
(
¡ršg
 
feName
);

7 
io_şo£CÚfigFe
();

10 
io_§veCÚfigFe
(
¡ršg
 
feName
);

13 
io_»adCÚfigV®uesIÁ
(
¡ršg
 
v¬Name
);

16 
io_»adCÚfigV®uesFlßt
 (
¡ršg
 
v¬Name
);

19 
io_§veCÚfigV®ueSŒšg
(
¡ršg
 
v¬Name
, sŒšg 
v¬V®ue
);

22 
io_§veCÚfigV®ueFlßt
(
¡ršg
 
v¬Name
, 
v¬V®ue
);

25 
io_§veCÚfigV®ueIÁ
(
¡ršg
 
v¬Name
, 
v¬V®ue
);

28 
boŞ
 
io_g‘DBDroidInfo
(
dbIndex
, cÚ¡ *
feName
);

	@../hdr/io/io_images.h

1 #´agm¨
Úû


5 
	mæagKeyCŞÜ
 = 1,

6 
	mæagFuÎSü“n
 = 2,

7 
	mæagC’‹rX
 = 4,

8 
	mæagC’‹rY
 = 8

13 
	mTILESET_CLASSIC
 = 0,

14 
	mTILESET_FUTURE
,

15 
	mTILESET_RETRO
,

16 
	mTILESET_RED
,

17 
	mTILESET_GREEN
,

18 
	mTILESET_BLUE
,

19 
	mTILESET_DARK
,

20 
	mTILESET_GREY
,

21 
	mTILESET_YELLOW
,

22 
	mTILESET_TURQUOISE
,

23 
	mTILESET_HELP


28 
	mtes
 = 0,

29 
	mhud
,

30 
	m¥r™e_001
,

31 
	m¥r™e_123
,

32 
	m¥r™e_139
,

33 
	m¥r™e_247
,

34 
	m¥r™e_249
,

35 
	m¥r™e_296
,

36 
	m¥r™e_302
,

37 
	m¥r™e_329
,

38 
	m¥r™e_420
,

39 
	m¥r™e_476
,

40 
	m¥r™e_493
,

41 
	m¥r™e_516
,

42 
	m¥r™e_571
,

43 
	m¥r™e_598
,

44 
	m¥r™e_614
,

45 
	m¥r™e_615
,

46 
	m¥r™e_629
,

47 
	m¥r™e_711
,

48 
	m¥r™e_742
,

49 
	m¥r™e_751
,

50 
	m¥r™e_821
,

51 
	m¥r™e_834
,

52 
	m¥r™e_883
,

53 
	m¥r™e_999
,

54 
	m¥ÏshImg
,

55 
	mbuÎ‘Ty³1
,

56 
	mbuÎ‘Ty³2
,

57 
	mbuÎ‘Ty³3
,

58 
	mex¶osiÚ
,

59 
	m‹rm1
,

60 
	m‹rm2
,

61 
	m‹rm3
,

62 
	mdbImage
,

63 
	m¥ÙLightImg
,

64 
	mtesSm®l
,

65 
	mnumImages


68 
	s_images


70 
ALLEGRO_BITMAP
 *
	mimage
;

71 cÚ¡ *
	mfeName
;

72 
boŞ
 
	mlßdedOk
;

73 
	mimageFÏgs
;

76 
_images
 
image
[];

78 
cu¼’tTeTy³
;

79 
cu¼’tTeCŞÜ
;

82 
boŞ
 
io_lßdImage
(
šdex
, cÚ¡ *
feName
);

85 
boŞ
 
io_lßdAÎImages
();

88 
boŞ
 
io_lßdB™m­FÚt
();

91 
io_cÚv”tImages
();

97 
io_£tTeS‘Ty³
(
¡ršg
 
teTy³
);

100 
io_£tTeS‘CŞÜ
(
¡ršg
 
teCŞÜ
);

102 
®e_sü“nshÙ
(cÚ¡ *
de¡š©iÚ_·th
, cÚ¡ *
gam’ame
);

	@../hdr/io/io_keyBind.h

1 #´agm¨
Úû


9 
	#KEYBIND_FILENAME
 "keybšd.d©"

	)

11 *
key¡©e
;

13 
	eaùiÚNames


15 
gameLeá
, 
gameRight
, 
gameUp
, 
gameDown
, 
cÚsŞeAùiÚ
, 
gameFœe
, 
gameEsÿ³
,

16 
aùiÚSü“nShÙ
, 
m’uUp
, 
m’uDown
, 
m’uAùiÚ
, 
gamePau£
,

17 
NUMBER_ACTIONS


18 } 
_aùiÚNames
;

20 
	s_šputAùiÚ


22 
	mkeyV®ue
;

23 
boŞ
 
	mcu¼’yDown
;

24 
	m¡ršgV®ue
[
MAX_STRING_SIZE
];

27 
_šputAùiÚ
 
šputAùiÚ
[
NUMBER_ACTIONS
];

30 
io_m­AùiÚKeys
();

33 
boŞ
 
io_§veKeyBšdšgs
(*
feName
);

36 
boŞ
 
io_»adKeyBšdšgs
(*
feName
);

40 
boŞ
 
io_doKeyBšdšgs
(*
feName
);

43 
io_»£tKeybßrdS‹s
();

	@../hdr/io/io_keyboard.h

1 #´agm¨
Úû


3 
u£KeysD–ay
;

4 
cÚsŞeKeysD–ay
;

7 
io_»adKeybßrd
();

	@../hdr/io/io_logFile.h

2 #´agm¨
Úû


4 
boŞ
 
feLoggšgOn
;

8 
boŞ
 
io_İ’LogFe
(cÚ¡ *
logFeName
);

12 
io_¡¬tLogFe
(cÚ¡ *
logFeName
);

15 
io_logTimeToFe
();

18 
io_şo£LogFe
();

21 
io_logToFe
 (cÚ¡ *
fÜm©
, ...);

	@../hdr/io/io_packFile.h

1 #´agm¨
Úû


3 
	~<physfs.h
>

6 
boŞ
 
io_¡¬tFeSy¡em
(boŞ 
showArchiv”s
);

	@../hdr/script/angelscript.h

39 #iâdeà
ANGELSCRIPT_H


40 
	#ANGELSCRIPT_H


	)

42 
	~<¡ddef.h
>

43 #iâdeà
_MSC_VER


44 
	~<¡dšt.h
>

47 #ifdeà
AS_USE_NAMESPACE


48 
	#BEGIN_AS_NAMESPACE
 
Çme¥aû
 
Ang–Süt
 {

	)

49 
	#END_AS_NAMESPACE
 }

	)

50 
	#AS_NAMESPACE_QUALIFIER
 
Ang–Süt
::

	)

52 
	#BEGIN_AS_NAMESPACE


	)

53 
	#END_AS_NAMESPACE


	)

54 
	#AS_NAMESPACE_QUALIFIER


	)

57 
	gBEGIN_AS_NAMESPACE


61 
	#ANGELSCRIPT_VERSION
 22401

	)

62 
	#ANGELSCRIPT_VERSION_STRING
 "2.24.1"

	)

66 
şass
 
	gasISütEngše
;

67 
şass
 
	gasISütModuË
;

68 
şass
 
	gasISütCÚ‹xt
;

69 
şass
 
	gasISütG’”ic
;

70 
şass
 
	gasISütObjeù
;

71 
şass
 
	gasIObjeùTy³
;

72 
şass
 
	gasISütFunùiÚ
;

73 
şass
 
	gasIBš¬ySŒ—m
;

74 
şass
 
	gasIJITComp”
;

79 
	easEEngšePrİ


81 
	masEP_ALLOW_UNSAFE_REFERENCES
 = 1,

82 
	masEP_OPTIMIZE_BYTECODE
 = 2,

83 
	masEP_COPY_SCRIPT_SECTIONS
 = 3,

84 
	masEP_MAX_STACK_SIZE
 = 4,

85 
	masEP_USE_CHARACTER_LITERALS
 = 5,

86 
	masEP_ALLOW_MULTILINE_STRINGS
 = 6,

87 
	masEP_ALLOW_IMPLICIT_HANDLE_TYPES
 = 7,

88 
	masEP_BUILD_WITHOUT_LINE_CUES
 = 8,

89 
	masEP_INIT_GLOBAL_VARS_AFTER_BUILD
 = 9,

90 
	masEP_REQUIRE_ENUM_SCOPE
 = 10,

91 
	masEP_SCRIPT_SCANNER
 = 11,

92 
	masEP_INCLUDE_JIT_INSTRUCTIONS
 = 12,

93 
	masEP_STRING_ENCODING
 = 13,

94 
	masEP_PROPERTY_ACCESSOR_MODE
 = 14,

95 
	masEP_EXPAND_DEF_ARRAY_TO_TMPL
 = 15,

96 
	masEP_AUTO_GARBAGE_COLLECT
 = 16,

97 
	masEP_DISALLOW_GLOBAL_VARS
 = 17,

98 
	masEP_ALWAYS_IMPL_DEFAULT_CONSTRUCT
 = 18

102 
	easEC®lCÚvTy³s


104 
	masCALL_CDECL
 = 0,

105 
	masCALL_STDCALL
 = 1,

106 
	masCALL_THISCALL
 = 2,

107 
	masCALL_CDECL_OBJLAST
 = 3,

108 
	masCALL_CDECL_OBJFIRST
 = 4,

109 
	masCALL_GENERIC
 = 5

113 
	easEObjTy³FÏgs


115 
	masOBJ_REF
 = 0x01,

116 
	masOBJ_VALUE
 = 0x02,

117 
	masOBJ_GC
 = 0x04,

118 
	masOBJ_POD
 = 0x08,

119 
	masOBJ_NOHANDLE
 = 0x10,

120 
	masOBJ_SCOPED
 = 0x20,

121 
	masOBJ_TEMPLATE
 = 0x40,

122 
	masOBJ_ASHANDLE
 = 0x80,

123 
	masOBJ_APP_CLASS
 = 0x100,

124 
	masOBJ_APP_CLASS_CONSTRUCTOR
 = 0x200,

125 
	masOBJ_APP_CLASS_DESTRUCTOR
 = 0x400,

126 
	masOBJ_APP_CLASS_ASSIGNMENT
 = 0x800,

127 
	masOBJ_APP_CLASS_COPY_CONSTRUCTOR
 = 0x1000,

128 
	masOBJ_APP_CLASS_C
 = (
asOBJ_APP_CLASS
 + 
asOBJ_APP_CLASS_CONSTRUCTOR
),

129 
	masOBJ_APP_CLASS_CD
 = (
asOBJ_APP_CLASS
 + 
asOBJ_APP_CLASS_CONSTRUCTOR
 + 
asOBJ_APP_CLASS_DESTRUCTOR
),

130 
	masOBJ_APP_CLASS_CA
 = (
asOBJ_APP_CLASS
 + 
asOBJ_APP_CLASS_CONSTRUCTOR
 + 
asOBJ_APP_CLASS_ASSIGNMENT
),

131 
	masOBJ_APP_CLASS_CK
 = (
asOBJ_APP_CLASS
 + 
asOBJ_APP_CLASS_CONSTRUCTOR
 + 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
),

132 
	masOBJ_APP_CLASS_CDA
 = (
asOBJ_APP_CLASS
 + 
asOBJ_APP_CLASS_CONSTRUCTOR
 + 
asOBJ_APP_CLASS_DESTRUCTOR
 + 
asOBJ_APP_CLASS_ASSIGNMENT
),

133 
	masOBJ_APP_CLASS_CDK
 = (
asOBJ_APP_CLASS
 + 
asOBJ_APP_CLASS_CONSTRUCTOR
 + 
asOBJ_APP_CLASS_DESTRUCTOR
 + 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
),

134 
	masOBJ_APP_CLASS_CAK
 = (
asOBJ_APP_CLASS
 + 
asOBJ_APP_CLASS_CONSTRUCTOR
 + 
asOBJ_APP_CLASS_ASSIGNMENT
 + 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
),

135 
	masOBJ_APP_CLASS_CDAK
 = (
asOBJ_APP_CLASS
 + 
asOBJ_APP_CLASS_CONSTRUCTOR
 + 
asOBJ_APP_CLASS_DESTRUCTOR
 + 
asOBJ_APP_CLASS_ASSIGNMENT
 + 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
),

136 
	masOBJ_APP_CLASS_D
 = (
asOBJ_APP_CLASS
 + 
asOBJ_APP_CLASS_DESTRUCTOR
),

137 
	masOBJ_APP_CLASS_DA
 = (
asOBJ_APP_CLASS
 + 
asOBJ_APP_CLASS_DESTRUCTOR
 + 
asOBJ_APP_CLASS_ASSIGNMENT
),

138 
	masOBJ_APP_CLASS_DK
 = (
asOBJ_APP_CLASS
 + 
asOBJ_APP_CLASS_DESTRUCTOR
 + 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
),

139 
	masOBJ_APP_CLASS_DAK
 = (
asOBJ_APP_CLASS
 + 
asOBJ_APP_CLASS_DESTRUCTOR
 + 
asOBJ_APP_CLASS_ASSIGNMENT
 + 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
),

140 
	masOBJ_APP_CLASS_A
 = (
asOBJ_APP_CLASS
 + 
asOBJ_APP_CLASS_ASSIGNMENT
),

141 
	masOBJ_APP_CLASS_AK
 = (
asOBJ_APP_CLASS
 + 
asOBJ_APP_CLASS_ASSIGNMENT
 + 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
),

142 
	masOBJ_APP_CLASS_K
 = (
asOBJ_APP_CLASS
 + 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
),

143 
	masOBJ_APP_PRIMITIVE
 = 0x2000,

144 
	masOBJ_APP_FLOAT
 = 0x4000,

145 
	masOBJ_APP_CLASS_ALLINTS
 = 0x8000,

146 
	masOBJ_APP_CLASS_ALLFLOATS
 = 0x10000,

147 
	masOBJ_NOCOUNT
 = 0x20000,

148 
	masOBJ_MASK_VALID_FLAGS
 = 0x3FFFF,

149 
	masOBJ_SCRIPT_OBJECT
 = 0x80000,

150 
	masOBJ_SHARED
 = 0x100000,

151 
	masOBJ_NOINHERIT
 = 0x200000

155 
	easEBehaviours


158 
	masBEHAVE_CONSTRUCT
,

159 
	masBEHAVE_DESTRUCT
,

162 
	masBEHAVE_FACTORY
,

163 
	masBEHAVE_LIST_FACTORY
,

164 
	masBEHAVE_ADDREF
,

165 
	masBEHAVE_RELEASE
,

168 
	masBEHAVE_VALUE_CAST
,

169 
	masBEHAVE_IMPLICIT_VALUE_CAST
,

170 
	masBEHAVE_REF_CAST
,

171 
	masBEHAVE_IMPLICIT_REF_CAST
,

172 
	masBEHAVE_TEMPLATE_CALLBACK
,

175 
	masBEHAVE_FIRST_GC
,

176 
	masBEHAVE_GETREFCOUNT
 = 
asBEHAVE_FIRST_GC
,

177 
	masBEHAVE_SETGCFLAG
,

178 
	masBEHAVE_GETGCFLAG
,

179 
	masBEHAVE_ENUMREFS
,

180 
	masBEHAVE_RELEASEREFS
,

181 
	masBEHAVE_LAST_GC
 = 
asBEHAVE_RELEASEREFS
,

183 
	masBEHAVE_MAX


187 
	easER‘Codes


189 
	masSUCCESS
 = 0,

190 
	masERROR
 = -1,

191 
	masCONTEXT_ACTIVE
 = -2,

192 
	masCONTEXT_NOT_FINISHED
 = -3,

193 
	masCONTEXT_NOT_PREPARED
 = -4,

194 
	masINVALID_ARG
 = -5,

195 
	masNO_FUNCTION
 = -6,

196 
	masNOT_SUPPORTED
 = -7,

197 
	masINVALID_NAME
 = -8,

198 
	masNAME_TAKEN
 = -9,

199 
	masINVALID_DECLARATION
 = -10,

200 
	masINVALID_OBJECT
 = -11,

201 
	masINVALID_TYPE
 = -12,

202 
	masALREADY_REGISTERED
 = -13,

203 
	masMULTIPLE_FUNCTIONS
 = -14,

204 
	masNO_MODULE
 = -15,

205 
	masNO_GLOBAL_VAR
 = -16,

206 
	masINVALID_CONFIGURATION
 = -17,

207 
	masINVALID_INTERFACE
 = -18,

208 
	masCANT_BIND_ALL_FUNCTIONS
 = -19,

209 
	masLOWER_ARRAY_DIMENSION_NOT_REGISTERED
 = -20,

210 
	masWRONG_CONFIG_GROUP
 = -21,

211 
	masCONFIG_GROUP_IS_IN_USE
 = -22,

212 
	masILLEGAL_BEHAVIOUR_FOR_TYPE
 = -23,

213 
	masWRONG_CALLING_CONV
 = -24,

214 
	masBUILD_IN_PROGRESS
 = -25,

215 
	masINIT_GLOBAL_VARS_FAILED
 = -26,

216 
	masOUT_OF_MEMORY
 = -27

220 
	easECÚ‹xtS‹


222 
	masEXECUTION_FINISHED
 = 0,

223 
	masEXECUTION_SUSPENDED
 = 1,

224 
	masEXECUTION_ABORTED
 = 2,

225 
	masEXECUTION_EXCEPTION
 = 3,

226 
	masEXECUTION_PREPARED
 = 4,

227 
	masEXECUTION_UNINITIALIZED
 = 5,

228 
	masEXECUTION_ACTIVE
 = 6,

229 
	masEXECUTION_ERROR
 = 7

233 
	easEMsgTy³


235 
	masMSGTYPE_ERROR
 = 0,

236 
	masMSGTYPE_WARNING
 = 1,

237 
	masMSGTYPE_INFORMATION
 = 2

241 
	easEGCFÏgs


243 
	masGC_FULL_CYCLE
 = 1,

244 
	masGC_ONE_STEP
 = 2,

245 
	masGC_DESTROY_GARBAGE
 = 4,

246 
	masGC_DETECT_GARBAGE
 = 8

250 
	easETok’CÏss


252 
	masTC_UNKNOWN
 = 0,

253 
	masTC_KEYWORD
 = 1,

254 
	masTC_VALUE
 = 2,

255 
	masTC_IDENTIFIER
 = 3,

256 
	masTC_COMMENT
 = 4,

257 
	masTC_WHITESPACE
 = 5

260 #ifdeà
AS_DEPRECATED


263 cÚ¡ 
	gasPREPARE_PREVIOUS
 = -1;

267 
	easETy³IdFÏgs


269 
	masTYPEID_VOID
 = 0,

270 
	masTYPEID_BOOL
 = 1,

271 
	masTYPEID_INT8
 = 2,

272 
	masTYPEID_INT16
 = 3,

273 
	masTYPEID_INT32
 = 4,

274 
	masTYPEID_INT64
 = 5,

275 
	masTYPEID_UINT8
 = 6,

276 
	masTYPEID_UINT16
 = 7,

277 
	masTYPEID_UINT32
 = 8,

278 
	masTYPEID_UINT64
 = 9,

279 
	masTYPEID_FLOAT
 = 10,

280 
	masTYPEID_DOUBLE
 = 11,

281 
	masTYPEID_OBJHANDLE
 = 0x40000000,

282 
	masTYPEID_HANDLETOCONST
 = 0x20000000,

283 
	masTYPEID_MASK_OBJECT
 = 0x1C000000,

284 
	masTYPEID_APPOBJECT
 = 0x04000000,

285 
	masTYPEID_SCRIPTOBJECT
 = 0x08000000,

286 
	masTYPEID_TEMPLATE
 = 0x10000000,

287 
	masTYPEID_MASK_SEQNBR
 = 0x03FFFFFF

291 
	easETy³Modif›rs


293 
	masTM_NONE
 = 0,

294 
	masTM_INREF
 = 1,

295 
	masTM_OUTREF
 = 2,

296 
	masTM_INOUTREF
 = 3

300 
	easEGMFÏgs


302 
	masGM_ONLY_IF_EXISTS
 = 0,

303 
	masGM_CREATE_IF_NOT_EXISTS
 = 1,

304 
	masGM_ALWAYS_CREATE
 = 2

308 
	easECompeFÏgs


310 
	masCOMP_ADD_TO_MODULE
 = 1

314 
	easEFuncTy³


316 
	masFUNC_DUMMY
 =-1,

317 
	masFUNC_SYSTEM
 = 0,

318 
	masFUNC_SCRIPT
 = 1,

319 
	masFUNC_INTERFACE
 = 2,

320 
	masFUNC_VIRTUAL
 = 3,

321 
	masFUNC_FUNCDEF
 = 4,

322 
	masFUNC_IMPORTED
 = 5

332 
	tasBYTE
;

333 
	tasWORD
;

334 
	tasUINT
;

335 #ià
defšed
(
_MSC_VER
) && _MSC_VER <= 1200

339 
size_t
 
	tasPWORD
;

341 
ušŒ_t
 
	tasPWORD
;

343 #ifdeà
__LP64__


344 
	tasDWORD
;

345 
	tasQWORD
;

346 
	tasINT64
;

348 
	tasDWORD
;

349 #ià
defšed
(
__GNUC__
è|| defšed(
__MWERKS__
)

350 
ušt64_t
 
	tasQWORD
;

351 
št64_t
 
	tasINT64
;

353 
	t__št64
 
	tasQWORD
;

354 
__št64
 
	tasINT64
;

359 #ià
defšed
(
__LP64__
è|| defšed(
__amd64__
è|| defšed(
__x86_64__
è|| defšed(
_M_X64
)

360 #iâdeà
AS_64BIT_PTR


361 
	#AS_64BIT_PTR


	)

365 (*
	gasFUNCTION_t
)();

366 (*
	tasGENFUNC_t
)(
	tasISütG’”ic
 *);

367 *(*
	tasALLOCFUNC_t
)(
	tsize_t
);

368 (*
	tasFREEFUNC_t
)(*);

369 (*
	tasCLEANENGINEFUNC_t
)(
	tasISütEngše
 *);

370 (*
	tasCLEANMODULEFUNC_t
)(
	tasISütModuË
 *);

371 (*
	tasCLEANCONTEXTFUNC_t
)(
	tasISütCÚ‹xt
 *);

372 (*
	tasCLEANFUNCTIONFUNC_t
)(
	tasISütFunùiÚ
 *);

373 (*
	tasCLEANOBJECTTYPEFUNC_t
)(
	tasIObjeùTy³
 *);

377 
	#asOFFSET
(
s
,
m
è((
size_t
)(&
»š‹½»t_ÿ¡
<s*>(100000)->m)-100000)

	)

379 
	#asFUNCTION
(
f
è
	`asFunùiÚPŒ
(f)

	)

380 #ià(
	`defšed
(
_MSC_VER
è&& _MSC_VER <ğ1200è|| (defšed(
__BORLANDC__
) && __BORLANDC__ < 0x590)

385 
	#asFUNCTIONPR
(
f
,
p
,
r
è
	`asFunùiÚPŒ
(((*)())((
	`r
 (*í)(f)))

	)

387 
	#asFUNCTIONPR
(
f
,
p
,
r
è
	`asFunùiÚPŒ
(((*)())(
¡©ic_ÿ¡
<
	`r
 (*í>(f)))

	)

390 #iâdeà
AS_NO_CLASS_METHODS


392 
şass
 
asCUnknownCÏss
;

393 (
	tasCUnknownCÏss
::*
	tasMETHOD_t
)();

395 
	sasSFuncPŒ


402 
dummy
[25];

403 ¡ruù {
asMETHOD_t
 
mthd
; 
dummy
[25-×sMETHOD_t)];} 
m
;

404 ¡ruù {
asFUNCTION_t
 
func
; 
dummy
[25-×sFUNCTION_t)];} 
f
;

405 } 
±r
;

406 
asBYTE
 
æag
;

409 #ià
	`defšed
(
__BORLANDC__
)

413 #ià 
__BORLANDC__
 < 0x590

417 
	#AS_METHOD_AMBIGUITY_CAST
(
t
èÑ)

	)

419 
‹m¶©e
 <
ty³Çme
 
T
>

420 
T
 
	$_im¶ic™_ÿ¡
 (
T
 
v®
)

421 {  
v®
; 
	}
}

422 
	#AS_METHOD_AMBIGUITY_CAST
(
t
è
AS_NAMESPACE_QUALIFIER
 
_im¶ic™_ÿ¡
<ˆ>

	)

425 
	#AS_METHOD_AMBIGUITY_CAST
(
t
è
¡©ic_ÿ¡
<ˆ>

	)

428 
	#asMETHOD
(
c
,
m
è
asSM‘hodPŒ
<((c::*)())>::
	`CÚv”t
(((c::*)())(&c::m))

	)

429 
	#asMETHODPR
(
c
,
m
,
p
,
r
è
asSM‘hodPŒ
<((c::*)())>::
	`CÚv”t
(
	`AS_METHOD_AMBIGUITY_CAST
(
	`r
 (c::*í)(&c::m))

	)

433 
	sasSFuncPŒ


437 
	mdummy
[25];

438 ¡ruù {
asFUNCTION_t
 
	mfunc
; 
	mdummy
[25-×sFUNCTION_t)];} 
	mf
;

439 } 
	m±r
;

440 
asBYTE
 
	mæag
;

445 
	sasSMes§geInfo


447 cÚ¡ *
	m£ùiÚ
;

448 
	mrow
;

449 
	mcŞ
;

450 
asEMsgTy³
 
	mty³
;

451 cÚ¡ *
	mmes§ge
;

463 #ià
defšed
(
WIN32
è|| defšed(
_WIN32
è|| defšed(
__CYGWIN__
)

464 #ià
defšed
(
ANGELSCRIPT_EXPORT
)

465 
	#AS_API
 
	`__deş¥ec
(
dÎexpÜt
)

	)

466 #–ià
defšed
(
ANGELSCRIPT_DLL_LIBRARY_IMPORT
)

467 
	#AS_API
 
	`__deş¥ec
(
dÎimpÜt
)

	)

469 
	#AS_API


	)

471 #–ià
defšed
(
__GNUC__
)

472 #ià
defšed
(
ANGELSCRIPT_EXPORT
)

473 
	#AS_API
 
	`__©Œibu‹__
((
	`visib™y
 ("deçuÉ")))

	)

475 
	#AS_API


	)

478 
	#AS_API


	)

481 #iâdeà
ANGELSCRIPT_DLL_MANUAL_IMPORT


485 
AS_API
 
asISütEngše
 * 
asC»©eSütEngše
(
asDWORD
 
v”siÚ
);

486 
AS_API
 cÚ¡ * 
asG‘Lib¿ryV”siÚ
();

487 
AS_API
 cÚ¡ * 
asG‘Lib¿ryO±iÚs
();

490 
AS_API
 
asISütCÚ‹xt
 * 
asG‘AùiveCÚ‹xt
();

493 
AS_API
 
asP»·»MuÉ™h»ad
();

494 
AS_API
 
asUÅ»·»MuÉ™h»ad
();

495 
AS_API
 
asAcquœeExşusiveLock
();

496 
AS_API
 
asR–—£ExşusiveLock
();

497 
AS_API
 
asAcquœeSh¬edLock
();

498 
AS_API
 
asR–—£Sh¬edLock
();

499 
AS_API
 
asTh»adCËªup
();

502 
AS_API
 
asS‘Glob®MemÜyFunùiÚs
(
asALLOCFUNC_t
 
®locFunc
, 
asFREEFUNC_t
 
ä“Func
);

503 
AS_API
 
asRe£tGlob®MemÜyFunùiÚs
();

509 şas 
	casISütEngše


511 
public
:

513 
vœtu®
 
	$AddRef
() const = 0;

514 
vœtu®
 
	$R–—£
() const = 0;

517 
vœtu®
 
	`S‘EngšePrİ”ty
(
asEEngšePrİ
 
´İ”ty
, 
asPWORD
 
v®ue
) = 0;

518 
vœtu®
 
asPWORD
 
	$G‘EngšePrİ”ty
(
asEEngšePrİ
 
´İ”ty
) const = 0;

521 
vœtu®
 
	`S‘Mes§geC®lback
(cÚ¡ 
asSFuncPŒ
 &
ÿÎback
, *
obj
, 
asDWORD
 
ÿÎCÚv
) = 0;

522 
vœtu®
 
	`CË¬Mes§geC®lback
() = 0;

523 
vœtu®
 
	`Wr™eMes§ge
(cÚ¡ *
£ùiÚ
, 
row
, 
cŞ
, 
asEMsgTy³
 
ty³
, cÚ¡ *
mes§ge
) = 0;

526 
vœtu®
 
	`S‘JITComp”
(
asIJITComp”
 *
comp”
) = 0;

527 
vœtu®
 
asIJITComp”
 *
	$G‘JITComp”
() const = 0;

530 
vœtu®
 
	`Regi¡”Glob®FunùiÚ
(cÚ¡ *
deş¬©iÚ
, cÚ¡ 
asSFuncPŒ
 &
funcPoš‹r
, 
asDWORD
 
ÿÎCÚv
) = 0;

531 
vœtu®
 
asUINT
 
	$G‘Glob®FunùiÚCouÁ
() const = 0;

532 #ifdeà
AS_DEPRECATED


534 
vœtu®
 
	$G‘Glob®FunùiÚIdByIndex
(
asUINT
 
šdex
) const = 0;

536 
vœtu®
 
asISütFunùiÚ
 *
	$G‘Glob®FunùiÚByIndex
(
asUINT
 
šdex
) const = 0;

537 
vœtu®
 
asISütFunùiÚ
 *
	$G‘Glob®FunùiÚByDeş
(cÚ¡ *
deş¬©iÚ
) const = 0;

540 
vœtu®
 
	`Regi¡”Glob®Prİ”ty
(cÚ¡ *
deş¬©iÚ
, *
poš‹r
) = 0;

541 
vœtu®
 
asUINT
 
	$G‘Glob®Prİ”tyCouÁ
() const = 0;

542 
vœtu®
 
	$G‘Glob®Prİ”tyByIndex
(
asUINT
 
šdex
, cÚ¡ **
Çme
, cÚ¡ **
ÇmeS·û
 = 0, *
ty³Id
 = 0, 
boŞ
 *
isCÚ¡
 = 0, cÚ¡ **
cÚfigGroup
 = 0, **
poš‹r
 = 0, 
asDWORD
 *
acûssMask
 = 0) const = 0;

543 
vœtu®
 
	$G‘Glob®Prİ”tyIndexByName
(cÚ¡ *
Çme
) const = 0;

544 
vœtu®
 
	$G‘Glob®Prİ”tyIndexByDeş
(cÚ¡ *
deş
) const = 0;

547 
vœtu®
 
	`Regi¡”ObjeùTy³
(cÚ¡ *
obj
, 
by‹Size
, 
asDWORD
 
æags
) = 0;

548 
vœtu®
 
	`Regi¡”ObjeùPrİ”ty
(cÚ¡ *
obj
, cÚ¡ *
deş¬©iÚ
, 
by‹Off£t
) = 0;

549 
vœtu®
 
	`Regi¡”ObjeùM‘hod
(cÚ¡ *
obj
, cÚ¡ *
deş¬©iÚ
, cÚ¡ 
asSFuncPŒ
 &
funcPoš‹r
, 
asDWORD
 
ÿÎCÚv
) = 0;

550 
vœtu®
 
	`Regi¡”ObjeùBehaviour
(cÚ¡ *
obj
, 
asEBehaviours
 
behaviour
, cÚ¡ *
deş¬©iÚ
, cÚ¡ 
asSFuncPŒ
 &
funcPoš‹r
, 
asDWORD
 
ÿÎCÚv
) = 0;

551 
vœtu®
 
	`Regi¡”IÁ”çû
(cÚ¡ *
Çme
) = 0;

552 
vœtu®
 
	`Regi¡”IÁ”çûM‘hod
(cÚ¡ *
štf
, cÚ¡ *
deş¬©iÚ
) = 0;

553 
vœtu®
 
asUINT
 
	$G‘ObjeùTy³CouÁ
() const = 0;

554 
vœtu®
 
asIObjeùTy³
 *
	$G‘ObjeùTy³ByIndex
(
asUINT
 
šdex
) const = 0;

555 
vœtu®
 
asIObjeùTy³
 *
	$G‘ObjeùTy³ByName
(cÚ¡ *
Çme
) const = 0;

558 
vœtu®
 
	`Regi¡”SŒšgFaùÜy
(cÚ¡ *
d©©y³
, cÚ¡ 
asSFuncPŒ
 &
çùÜyFunc
, 
asDWORD
 
ÿÎCÚv
) = 0;

559 
vœtu®
 
	$G‘SŒšgFaùÜyR‘uºTy³Id
() const = 0;

562 
vœtu®
 
	`Regi¡”DeçuÉA¼ayTy³
(cÚ¡ *
ty³
) = 0;

563 
vœtu®
 
	$G‘DeçuÉA¼ayTy³Id
() const = 0;

566 
vœtu®
 
	`Regi¡”Enum
(cÚ¡ *
ty³
) = 0;

567 
vœtu®
 
	`Regi¡”EnumV®ue
(cÚ¡ *
ty³
, cÚ¡ *
Çme
, 
v®ue
) = 0;

568 
vœtu®
 
asUINT
 
	$G‘EnumCouÁ
() const = 0;

569 
vœtu®
 cÚ¡ *
	$G‘EnumByIndex
(
asUINT
 
šdex
, *
’umTy³Id
, cÚ¡ **
ÇmeS·û
 = 0, cÚ¡ **
cÚfigGroup
 = 0, 
asDWORD
 *
acûssMask
 = 0) const = 0;

570 
vœtu®
 
	$G‘EnumV®ueCouÁ
(
’umTy³Id
) const = 0;

571 
vœtu®
 cÚ¡ *
	$G‘EnumV®ueByIndex
(
’umTy³Id
, 
asUINT
 
šdex
, *
outV®ue
) const = 0;

574 
vœtu®
 
	`Regi¡”Funcdef
(cÚ¡ *
deş
) = 0;

575 
vœtu®
 
asUINT
 
	$G‘FuncdefCouÁ
() const = 0;

576 
vœtu®
 
asISütFunùiÚ
 *
	$G‘FuncdefByIndex
(
asUINT
 
šdex
) const = 0;

579 
vœtu®
 
	`Regi¡”Ty³def
(cÚ¡ *
ty³
, cÚ¡ *
deş
) = 0;

580 
vœtu®
 
asUINT
 
	$G‘Ty³defCouÁ
() const = 0;

581 
vœtu®
 cÚ¡ *
	$G‘Ty³defByIndex
(
asUINT
 
šdex
, *
ty³Id
, cÚ¡ **
ÇmeS·û
 = 0, cÚ¡ **
cÚfigGroup
 = 0, 
asDWORD
 *
acûssMask
 = 0) const = 0;

584 
vœtu®
 
	`BegšCÚfigGroup
(cÚ¡ *
groupName
) = 0;

585 
vœtu®
 
	`EndCÚfigGroup
() = 0;

586 
vœtu®
 
	`RemoveCÚfigGroup
(cÚ¡ *
groupName
) = 0;

587 
vœtu®
 
asDWORD
 
	`S‘DeçuÉAcûssMask
×sDWORD 
deçuÉMask
) = 0;

588 
vœtu®
 
	`S‘DeçuÉName¥aû
(cÚ¡ *
ÇmeS·û
) = 0;

591 
vœtu®
 
asISütModuË
 *
	`G‘ModuË
(cÚ¡ *
moduË
, 
asEGMFÏgs
 
æag
 = 
asGM_ONLY_IF_EXISTS
) = 0;

592 
vœtu®
 
	`DisÿrdModuË
(cÚ¡ *
moduË
) = 0;

595 
vœtu®
 
asISütFunùiÚ
 *
	$G‘FunùiÚById
(
funcId
) const = 0;

598 
vœtu®
 
asIObjeùTy³
 *
	$G‘ObjeùTy³ById
(
ty³Id
) const = 0;

599 
vœtu®
 
	$G‘Ty³IdByDeş
(cÚ¡ *
deş
) const = 0;

600 
vœtu®
 cÚ¡ *
	$G‘Ty³Deş¬©iÚ
(
ty³Id
, 
boŞ
 
šşudeName¥aû
 = 
çl£
) const = 0;

601 
vœtu®
 
	$G‘SizeOfPrim™iveTy³
(
ty³Id
) const = 0;

604 
vœtu®
 
asISütCÚ‹xt
 *
	`C»©eCÚ‹xt
() = 0;

605 
vœtu®
 *
	`C»©eSütObjeù
(
ty³Id
) = 0;

606 
vœtu®
 *
	`C»©eSütObjeùCİy
(*
obj
, 
ty³Id
) = 0;

607 
vœtu®
 *
	`C»©eUnš™ŸlizedSütObjeù
(
ty³Id
) = 0;

608 #ifdeà
AS_DEPRECATED


610 
vœtu®
 
	`CİySütObjeù
(*
d¡Obj
, *
¤cObj
, 
ty³Id
) = 0;

612 
vœtu®
 
	`AssignSütObjeù
(*
d¡Obj
, *
¤cObj
, 
ty³Id
) = 0;

613 
vœtu®
 
	`R–—£SütObjeù
(*
obj
, 
ty³Id
) = 0;

614 
vœtu®
 
	`R–—£SütObjeù
(*
obj
, cÚ¡ 
asIObjeùTy³
 *
ty³
) = 0;

615 
vœtu®
 
	`AddRefSütObjeù
(*
obj
, 
ty³Id
) = 0;

616 
vœtu®
 
	`AddRefSütObjeù
(*
obj
, cÚ¡ 
asIObjeùTy³
 *
ty³
) = 0;

617 
vœtu®
 
boŞ
 
	$IsHªdËCom·tibËW™hObjeù
(*
obj
, 
objTy³Id
, 
hªdËTy³Id
) const = 0;

620 
vœtu®
 
asETok’CÏss
 
	$P¬£Tok’
(cÚ¡ *
¡ršg
, 
size_t
 
¡ršgL’gth
 = 0, *
tok’L’gth
 = 0) const = 0;

623 
vœtu®
 
	`G¬bageCŞËù
(
asDWORD
 
æags
 = 
asGC_FULL_CYCLE
) = 0;

624 
vœtu®
 
	$G‘GCSti¡ics
(
asUINT
 *
cu¼’tSize
,‡sUINT *
tÙ®De¡royed
 = 0,‡sUINT *
tÙ®D‘eùed
 = 0,‡sUINT *
ÃwObjeùs
 = 0,‡sUINT *
tÙ®NewDe¡royed
 = 0) const = 0;

625 
vœtu®
 
	`NÙifyG¬bageCŞËùÜOfNewObjeù
(*
obj
, 
asIObjeùTy³
 *
ty³
) = 0;

626 
vœtu®
 
	`GCEnumC®lback
(*
»ã»nû
) = 0;

629 
vœtu®
 *
	`S‘U£rD©a
(*
d©a
, 
asPWORD
 
ty³
 = 0) = 0;

630 
vœtu®
 *
	$G‘U£rD©a
(
asPWORD
 
ty³
 = 0) const = 0;

631 
vœtu®
 
	`S‘EngšeU£rD©aCËªupC®lback
(
asCLEANENGINEFUNC_t
 
ÿÎback
, 
asPWORD
 
ty³
 = 0) = 0;

632 
vœtu®
 
	`S‘ModuËU£rD©aCËªupC®lback
(
asCLEANMODULEFUNC_t
 
ÿÎback
) = 0;

633 
vœtu®
 
	`S‘CÚ‹xtU£rD©aCËªupC®lback
(
asCLEANCONTEXTFUNC_t
 
ÿÎback
) = 0;

634 
vœtu®
 
	`S‘FunùiÚU£rD©aCËªupC®lback
(
asCLEANFUNCTIONFUNC_t
 
ÿÎback
) = 0;

635 
vœtu®
 
	`S‘ObjeùTy³U£rD©aCËªupC®lback
(
asCLEANOBJECTTYPEFUNC_t
 
ÿÎback
, 
asPWORD
 
ty³
 = 0) = 0;

637 
´Ùeùed
:

638 
vœtu®
 ~
	$asISütEngše
() {}

639 
	}
};

641 şas 
	casISütModuË


643 
	mpublic
:

644 
vœtu®
 
asISütEngše
 *
	$G‘Engše
() const = 0;

645 
vœtu®
 
	`S‘Name
(cÚ¡ *
Çme
) = 0;

646 
vœtu®
 cÚ¡ *
	$G‘Name
() const = 0;

649 
vœtu®
 
	`AddSütSeùiÚ
(cÚ¡ *
Çme
, cÚ¡ *
code
, 
size_t
 
codeL’gth
 = 0, 
lšeOff£t
 = 0) = 0;

650 
vœtu®
 
	`Bud
() = 0;

651 
vœtu®
 
	`CompeFunùiÚ
(cÚ¡ *
£ùiÚName
, cÚ¡ *
code
, 
lšeOff£t
, 
asDWORD
 
compeFÏgs
, 
asISütFunùiÚ
 **
outFunc
) = 0;

652 
vœtu®
 
	`CompeGlob®V¬
(cÚ¡ *
£ùiÚName
, cÚ¡ *
code
, 
lšeOff£t
) = 0;

653 
vœtu®
 
asDWORD
 
	`S‘AcûssMask
×sDWORD 
acûssMask
) = 0;

654 
vœtu®
 
	`S‘DeçuÉName¥aû
(cÚ¡ *
ÇmeS·û
) = 0;

657 
vœtu®
 
asUINT
 
	$G‘FunùiÚCouÁ
() const = 0;

658 #ifdeà
AS_DEPRECATED


660 
vœtu®
 
	$G‘FunùiÚIdByIndex
(
asUINT
 
šdex
) const = 0;

661 
vœtu®
 
	$G‘FunùiÚIdByName
(cÚ¡ *
Çme
) const = 0;

662 
vœtu®
 
	$G‘FunùiÚIdByDeş
(cÚ¡ *
deş
) const = 0;

664 
vœtu®
 
asISütFunùiÚ
 *
	$G‘FunùiÚByIndex
(
asUINT
 
šdex
) const = 0;

665 
vœtu®
 
asISütFunùiÚ
 *
	$G‘FunùiÚByDeş
(cÚ¡ *
deş
) const = 0;

666 
vœtu®
 
asISütFunùiÚ
 *
	$G‘FunùiÚByName
(cÚ¡ *
Çme
) const = 0;

667 #ifdeà
AS_DEPRECATED


669 
vœtu®
 
	`RemoveFunùiÚ
(
funcId
) = 0;

671 
vœtu®
 
	`RemoveFunùiÚ
(
asISütFunùiÚ
 *
func
) = 0;

674 
vœtu®
 
	`Re£tGlob®V¬s
(
asISütCÚ‹xt
 *
ùx
 = 0) = 0;

675 
vœtu®
 
asUINT
 
	$G‘Glob®V¬CouÁ
() const = 0;

676 
vœtu®
 
	$G‘Glob®V¬IndexByName
(cÚ¡ *
Çme
) const = 0;

677 
vœtu®
 
	$G‘Glob®V¬IndexByDeş
(cÚ¡ *
deş
) const = 0;

678 
vœtu®
 cÚ¡ *
	$G‘Glob®V¬Deş¬©iÚ
(
asUINT
 
šdex
, 
boŞ
 
šşudeName¥aû
 = 
çl£
) const = 0;

679 
vœtu®
 
	$G‘Glob®V¬
(
asUINT
 
šdex
, cÚ¡ **
Çme
, cÚ¡ **
ÇmeS·û
 = 0, *
ty³Id
 = 0, 
boŞ
 *
isCÚ¡
 = 0) const = 0;

680 
vœtu®
 *
	`G‘Add»ssOfGlob®V¬
(
asUINT
 
šdex
) = 0;

681 
vœtu®
 
	`RemoveGlob®V¬
(
asUINT
 
šdex
) = 0;

684 
vœtu®
 
asUINT
 
	$G‘ObjeùTy³CouÁ
() const = 0;

685 
vœtu®
 
asIObjeùTy³
 *
	$G‘ObjeùTy³ByIndex
(
asUINT
 
šdex
) const = 0;

686 
vœtu®
 
asIObjeùTy³
 *
	$G‘ObjeùTy³ByName
(cÚ¡ *
Çme
) const = 0;

687 
vœtu®
 
	$G‘Ty³IdByDeş
(cÚ¡ *
deş
) const = 0;

690 
vœtu®
 
asUINT
 
	$G‘EnumCouÁ
() const = 0;

691 
vœtu®
 cÚ¡ *
	$G‘EnumByIndex
(
asUINT
 
šdex
, *
’umTy³Id
, cÚ¡ **
ÇmeS·û
 = 0) const = 0;

692 
vœtu®
 
	$G‘EnumV®ueCouÁ
(
’umTy³Id
) const = 0;

693 
vœtu®
 cÚ¡ *
	$G‘EnumV®ueByIndex
(
’umTy³Id
, 
asUINT
 
šdex
, *
outV®ue
) const = 0;

696 
vœtu®
 
asUINT
 
	$G‘Ty³defCouÁ
() const = 0;

697 
vœtu®
 cÚ¡ *
	$G‘Ty³defByIndex
(
asUINT
 
šdex
, *
ty³Id
, cÚ¡ **
ÇmeS·û
 = 0) const = 0;

700 
vœtu®
 
asUINT
 
	$G‘ImpÜ‹dFunùiÚCouÁ
() const = 0;

701 
vœtu®
 
	$G‘ImpÜ‹dFunùiÚIndexByDeş
(cÚ¡ *
deş
) const = 0;

702 
vœtu®
 cÚ¡ *
	$G‘ImpÜ‹dFunùiÚDeş¬©iÚ
(
asUINT
 
impÜtIndex
) const = 0;

703 
vœtu®
 cÚ¡ *
	$G‘ImpÜ‹dFunùiÚSourûModuË
(
asUINT
 
impÜtIndex
) const = 0;

704 
vœtu®
 
	`BšdImpÜ‹dFunùiÚ
(
asUINT
 
impÜtIndex
, 
asISütFunùiÚ
 *
func
) = 0;

705 
vœtu®
 
	`UnbšdImpÜ‹dFunùiÚ
(
asUINT
 
impÜtIndex
) = 0;

706 
vœtu®
 
	`BšdAÎImpÜ‹dFunùiÚs
() = 0;

707 
vœtu®
 
	`UnbšdAÎImpÜ‹dFunùiÚs
() = 0;

710 
vœtu®
 
	$SaveBy‹Code
(
asIBš¬ySŒ—m
 *
out
) const = 0;

711 
vœtu®
 
	`LßdBy‹Code
(
asIBš¬ySŒ—m
 *
š
) = 0;

714 
vœtu®
 *
	`S‘U£rD©a
(*
d©a
) = 0;

715 
vœtu®
 *
	$G‘U£rD©a
() const = 0;

717 
´Ùeùed
:

718 
vœtu®
 ~
	$asISütModuË
() {}

719 
	}
};

721 şas 
	casISütCÚ‹xt


723 
	mpublic
:

725 
vœtu®
 
	$AddRef
() const = 0;

726 
vœtu®
 
	$R–—£
() const = 0;

729 
vœtu®
 
asISütEngše
 *
	$G‘Engše
() const = 0;

732 
vœtu®
 
	`P»·»
(
asISütFunùiÚ
 *
func
) = 0;

733 #ifdeà
AS_DEPRECATED


735 
vœtu®
 
	`P»·»
(
funcId
) = 0;

737 
vœtu®
 
	`UÅ»·»
() = 0;

738 
vœtu®
 
	`Execu‹
() = 0;

739 
vœtu®
 
	`AbÜt
() = 0;

740 
vœtu®
 
	`Su¥’d
() = 0;

741 
vœtu®
 
asECÚ‹xtS‹
 
	$G‘S‹
() const = 0;

742 
vœtu®
 
	`PushS‹
() = 0;

743 
vœtu®
 
	`PİS‹
() = 0;

744 
vœtu®
 
boŞ
 
	$IsNe¡ed
(
asUINT
 *
Ã¡CouÁ
 = 0) const = 0;

747 
vœtu®
 
	`S‘Objeù
(*
obj
) = 0;

750 
vœtu®
 
	`S‘ArgBy‹
(
asUINT
 
¬g
, 
asBYTE
 
v®ue
) = 0;

751 
vœtu®
 
	`S‘ArgWÜd
(
asUINT
 
¬g
, 
asWORD
 
v®ue
) = 0;

752 
vœtu®
 
	`S‘ArgDWÜd
(
asUINT
 
¬g
, 
asDWORD
 
v®ue
) = 0;

753 
vœtu®
 
	`S‘ArgQWÜd
(
asUINT
 
¬g
, 
asQWORD
 
v®ue
) = 0;

754 
vœtu®
 
	`S‘ArgFlßt
(
asUINT
 
¬g
, 
v®ue
) = 0;

755 
vœtu®
 
	`S‘ArgDoubË
(
asUINT
 
¬g
, 
v®ue
) = 0;

756 
vœtu®
 
	`S‘ArgAdd»ss
(
asUINT
 
¬g
, *
addr
) = 0;

757 
vœtu®
 
	`S‘ArgObjeù
(
asUINT
 
¬g
, *
obj
) = 0;

758 
vœtu®
 *
	`G‘Add»ssOfArg
(
asUINT
 
¬g
) = 0;

761 
vœtu®
 
asBYTE
 
	`G‘R‘uºBy‹
() = 0;

762 
vœtu®
 
asWORD
 
	`G‘R‘uºWÜd
() = 0;

763 
vœtu®
 
asDWORD
 
	`G‘R‘uºDWÜd
() = 0;

764 
vœtu®
 
asQWORD
 
	`G‘R‘uºQWÜd
() = 0;

765 
vœtu®
 
	`G‘R‘uºFlßt
() = 0;

766 
vœtu®
 
	`G‘R‘uºDoubË
() = 0;

767 
vœtu®
 *
	`G‘R‘uºAdd»ss
() = 0;

768 
vœtu®
 *
	`G‘R‘uºObjeù
() = 0;

769 
vœtu®
 *
	`G‘Add»ssOfR‘uºV®ue
() = 0;

772 
vœtu®
 
	`S‘Exû±iÚ
(cÚ¡ *
¡ršg
) = 0;

773 
vœtu®
 
	`G‘Exû±iÚLšeNumb”
(*
cŞumn
 = 0, cÚ¡ **
£ùiÚName
 = 0) = 0;

774 
vœtu®
 
asISütFunùiÚ
 *
	`G‘Exû±iÚFunùiÚ
() = 0;

775 
vœtu®
 cÚ¡ * 
	`G‘Exû±iÚSŒšg
() = 0;

776 
vœtu®
 
	`S‘Exû±iÚC®lback
(
asSFuncPŒ
 
ÿÎback
, *
obj
, 
ÿÎCÚv
) = 0;

777 
vœtu®
 
	`CË¬Exû±iÚC®lback
() = 0;

780 
vœtu®
 
	`S‘LšeC®lback
(
asSFuncPŒ
 
ÿÎback
, *
obj
, 
ÿÎCÚv
) = 0;

781 
vœtu®
 
	`CË¬LšeC®lback
() = 0;

782 
vœtu®
 
asUINT
 
	$G‘C®l¡ackSize
() const = 0;

783 
vœtu®
 
asISütFunùiÚ
 *
	`G‘FunùiÚ
(
asUINT
 
¡ackLev–
 = 0) = 0;

784 
vœtu®
 
	`G‘LšeNumb”
(
asUINT
 
¡ackLev–
 = 0, *
cŞumn
 = 0, cÚ¡ **
£ùiÚName
 = 0) = 0;

785 
vœtu®
 
	`G‘V¬CouÁ
(
asUINT
 
¡ackLev–
 = 0) = 0;

786 
vœtu®
 cÚ¡ *
	`G‘V¬Name
(
asUINT
 
v¬Index
,‡sUINT 
¡ackLev–
 = 0) = 0;

787 
vœtu®
 cÚ¡ *
	`G‘V¬Deş¬©iÚ
(
asUINT
 
v¬Index
,‡sUINT 
¡ackLev–
 = 0) = 0;

788 
vœtu®
 
	`G‘V¬Ty³Id
(
asUINT
 
v¬Index
,‡sUINT 
¡ackLev–
 = 0) = 0;

789 
vœtu®
 *
	`G‘Add»ssOfV¬
(
asUINT
 
v¬Index
,‡sUINT 
¡ackLev–
 = 0) = 0;

790 
vœtu®
 
boŞ
 
	`IsV¬InScİe
(
asUINT
 
v¬Index
,‡sUINT 
¡ackLev–
 = 0) = 0;

791 
vœtu®
 
	`G‘ThisTy³Id
(
asUINT
 
¡ackLev–
 = 0) = 0;

792 
vœtu®
 *
	`G‘ThisPoš‹r
(
asUINT
 
¡ackLev–
 = 0) = 0;

793 
vœtu®
 
asISütFunùiÚ
 *
	`G‘Sy¡emFunùiÚ
() = 0;

796 
vœtu®
 *
	`S‘U£rD©a
(*
d©a
) = 0;

797 
vœtu®
 *
	$G‘U£rD©a
() const = 0;

799 
´Ùeùed
:

800 
vœtu®
 ~
	$asISütCÚ‹xt
() {}

801 
	}
};

803 şas 
	casISütG’”ic


805 
	mpublic
:

807 
vœtu®
 
asISütEngše
 *
	$G‘Engše
() const = 0;

808 #ifdeà
AS_DEPRECATED


810 
vœtu®
 
	$G‘FunùiÚId
() const = 0;

811 
vœtu®
 *
	$G‘FunùiÚU£rD©a
() const = 0;

813 
vœtu®
 
asISütFunùiÚ
 *
	$G‘FunùiÚ
() const = 0;

816 
vœtu®
 *
	`G‘Objeù
() = 0;

817 
vœtu®
 
	$G‘ObjeùTy³Id
() const = 0;

820 
vœtu®
 
	$G‘ArgCouÁ
() const = 0;

821 
vœtu®
 
	$G‘ArgTy³Id
(
asUINT
 
¬g
) const = 0;

822 
vœtu®
 
asBYTE
 
	`G‘ArgBy‹
(
asUINT
 
¬g
) = 0;

823 
vœtu®
 
asWORD
 
	`G‘ArgWÜd
(
asUINT
 
¬g
) = 0;

824 
vœtu®
 
asDWORD
 
	`G‘ArgDWÜd
(
asUINT
 
¬g
) = 0;

825 
vœtu®
 
asQWORD
 
	`G‘ArgQWÜd
(
asUINT
 
¬g
) = 0;

826 
vœtu®
 
	`G‘ArgFlßt
(
asUINT
 
¬g
) = 0;

827 
vœtu®
 
	`G‘ArgDoubË
(
asUINT
 
¬g
) = 0;

828 
vœtu®
 *
	`G‘ArgAdd»ss
(
asUINT
 
¬g
) = 0;

829 
vœtu®
 *
	`G‘ArgObjeù
(
asUINT
 
¬g
) = 0;

830 
vœtu®
 *
	`G‘Add»ssOfArg
(
asUINT
 
¬g
) = 0;

833 
vœtu®
 
	$G‘R‘uºTy³Id
() const = 0;

834 
vœtu®
 
	`S‘R‘uºBy‹
(
asBYTE
 
v®
) = 0;

835 
vœtu®
 
	`S‘R‘uºWÜd
(
asWORD
 
v®
) = 0;

836 
vœtu®
 
	`S‘R‘uºDWÜd
(
asDWORD
 
v®
) = 0;

837 
vœtu®
 
	`S‘R‘uºQWÜd
(
asQWORD
 
v®
) = 0;

838 
vœtu®
 
	`S‘R‘uºFlßt
(
v®
) = 0;

839 
vœtu®
 
	`S‘R‘uºDoubË
(
v®
) = 0;

840 
vœtu®
 
	`S‘R‘uºAdd»ss
(*
addr
) = 0;

841 
vœtu®
 
	`S‘R‘uºObjeù
(*
obj
) = 0;

842 
vœtu®
 *
	`G‘Add»ssOfR‘uºLoÿtiÚ
() = 0;

844 
´Ùeùed
:

845 
vœtu®
 ~
	$asISütG’”ic
() {}

846 
	}
};

848 şas 
	casISütObjeù


850 
	mpublic
:

852 
vœtu®
 
	$AddRef
() const = 0;

853 
vœtu®
 
	$R–—£
() const = 0;

856 
vœtu®
 
	$G‘Ty³Id
() const = 0;

857 
vœtu®
 
asIObjeùTy³
 *
	$G‘ObjeùTy³
() const = 0;

860 
vœtu®
 
asUINT
 
	$G‘Prİ”tyCouÁ
() const = 0;

861 
vœtu®
 
	$G‘Prİ”tyTy³Id
(
asUINT
 
´İ
) const = 0;

862 
vœtu®
 cÚ¡ *
	$G‘Prİ”tyName
(
asUINT
 
´İ
) const = 0;

863 
vœtu®
 *
	`G‘Add»ssOfPrİ”ty
(
asUINT
 
´İ
) = 0;

865 
vœtu®
 
asISütEngše
 *
	$G‘Engše
() const = 0;

866 
vœtu®
 
	`CİyFrom
(
asISütObjeù
 *
Ùh”
) = 0;

868 
´Ùeùed
:

869 
vœtu®
 ~
	$asISütObjeù
() {}

870 
	}
};

872 şas 
	casIObjeùTy³


874 
	mpublic
:

875 
vœtu®
 
asISütEngše
 *
	$G‘Engše
() const = 0;

876 
vœtu®
 cÚ¡ *
	$G‘CÚfigGroup
() const = 0;

877 
vœtu®
 
asDWORD
 
	$G‘AcûssMask
() const = 0;

880 
vœtu®
 
	$AddRef
() const = 0;

881 
vœtu®
 
	$R–—£
() const = 0;

884 
vœtu®
 cÚ¡ *
	$G‘Name
() const = 0;

885 
vœtu®
 cÚ¡ *
	$G‘Name¥aû
() const = 0;

886 
vœtu®
 
asIObjeùTy³
 *
	$G‘Ba£Ty³
() const = 0;

887 
vœtu®
 
boŞ
 
	$D”ivesFrom
(cÚ¡ 
asIObjeùTy³
 *
objTy³
) const = 0;

888 
vœtu®
 
asDWORD
 
	$G‘FÏgs
() const = 0;

889 
vœtu®
 
asUINT
 
	$G‘Size
() const = 0;

890 
vœtu®
 
	$G‘Ty³Id
() const = 0;

891 
vœtu®
 
	$G‘SubTy³Id
() const = 0;

892 
vœtu®
 
asIObjeùTy³
 *
	$G‘SubTy³
() const = 0;

895 
vœtu®
 
asUINT
 
	$G‘IÁ”çûCouÁ
() const = 0;

896 
vœtu®
 
asIObjeùTy³
 *
	$G‘IÁ”çû
(
asUINT
 
šdex
) const = 0;

897 
vœtu®
 
boŞ
 
	$Im¶em’ts
(cÚ¡ 
asIObjeùTy³
 *
objTy³
) const = 0;

900 
vœtu®
 
asUINT
 
	$G‘FaùÜyCouÁ
() const = 0;

901 #ifdeà
AS_DEPRECATED


903 
vœtu®
 
	$G‘FaùÜyIdByIndex
(
asUINT
 
šdex
) const = 0;

904 
vœtu®
 
	$G‘FaùÜyIdByDeş
(cÚ¡ *
deş
) const = 0;

906 
vœtu®
 
asISütFunùiÚ
 *
	$G‘FaùÜyByIndex
(
asUINT
 
šdex
) const = 0;

907 
vœtu®
 
asISütFunùiÚ
 *
	$G‘FaùÜyByDeş
(cÚ¡ *
deş
) const = 0;

910 
vœtu®
 
asUINT
 
	$G‘M‘hodCouÁ
() const = 0;

911 #ifdeà
AS_DEPRECATED


913 
vœtu®
 
	$G‘M‘hodIdByIndex
(
asUINT
 
šdex
, 
boŞ
 
g‘Vœtu®
 = 
Œue
) const = 0;

914 
vœtu®
 
	$G‘M‘hodIdByName
(cÚ¡ *
Çme
, 
boŞ
 
g‘Vœtu®
 = 
Œue
) const = 0;

915 
vœtu®
 
	$G‘M‘hodIdByDeş
(cÚ¡ *
deş
, 
boŞ
 
g‘Vœtu®
 = 
Œue
) const = 0;

917 
vœtu®
 
asISütFunùiÚ
 *
	$G‘M‘hodByIndex
(
asUINT
 
šdex
, 
boŞ
 
g‘Vœtu®
 = 
Œue
) const = 0;

918 
vœtu®
 
asISütFunùiÚ
 *
	$G‘M‘hodByName
(cÚ¡ *
Çme
, 
boŞ
 
g‘Vœtu®
 = 
Œue
) const = 0;

919 
vœtu®
 
asISütFunùiÚ
 *
	$G‘M‘hodByDeş
(cÚ¡ *
deş
, 
boŞ
 
g‘Vœtu®
 = 
Œue
) const = 0;

922 
vœtu®
 
asUINT
 
	$G‘Prİ”tyCouÁ
() const = 0;

923 
vœtu®
 
	$G‘Prİ”ty
(
asUINT
 
šdex
, cÚ¡ **
Çme
, *
ty³Id
 = 0, 
boŞ
 *
isPriv©e
 = 0, *
off£t
 = 0, boŞ *
isReã»nû
 = 0, 
asDWORD
 *
acûssMask
 = 0) const = 0;

924 
vœtu®
 cÚ¡ *
	$G‘Prİ”tyDeş¬©iÚ
(
asUINT
 
šdex
) const = 0;

927 
vœtu®
 
asUINT
 
	$G‘BehaviourCouÁ
() const = 0;

928 
vœtu®
 
asISütFunùiÚ
 *
	$G‘BehaviourByIndex
(
asUINT
 
šdex
, 
asEBehaviours
 *
outBehaviour
) const = 0;

931 
vœtu®
 *
	`S‘U£rD©a
(*
d©a
, 
asPWORD
 
ty³
 = 0) = 0;

932 
vœtu®
 *
	$G‘U£rD©a
(
asPWORD
 
ty³
 = 0) const = 0;

934 
´Ùeùed
:

935 
vœtu®
 ~
	$asIObjeùTy³
() {}

936 
	}
};

938 şas 
	casISütFunùiÚ


940 
	mpublic
:

941 
vœtu®
 
asISütEngše
 *
	$G‘Engše
() const = 0;

944 
vœtu®
 
	$AddRef
() const = 0;

945 
vœtu®
 
	$R–—£
() const = 0;

947 
vœtu®
 
	$G‘Id
() const = 0;

948 
vœtu®
 
asEFuncTy³
 
	$G‘FuncTy³
() const = 0;

949 
vœtu®
 cÚ¡ *
	$G‘ModuËName
() const = 0;

950 
vœtu®
 cÚ¡ *
	$G‘SütSeùiÚName
() const = 0;

951 
vœtu®
 cÚ¡ *
	$G‘CÚfigGroup
() const = 0;

952 
vœtu®
 
asDWORD
 
	$G‘AcûssMask
() const = 0;

953 
vœtu®
 
asIObjeùTy³
 *
	$G‘ObjeùTy³
() const = 0;

954 
vœtu®
 cÚ¡ *
	$G‘ObjeùName
() const = 0;

955 
vœtu®
 cÚ¡ *
	$G‘Name
() const = 0;

956 
vœtu®
 cÚ¡ *
	$G‘Name¥aû
() const = 0;

957 
vœtu®
 cÚ¡ *
	$G‘Deş¬©iÚ
(
boŞ
 
šşudeObjeùName
 = 
Œue
, boŞ 
šşudeName¥aû
 = 
çl£
) const = 0;

958 
vœtu®
 
boŞ
 
	$IsR—dOÆy
() const = 0;

959 
vœtu®
 
boŞ
 
	$IsPriv©e
() const = 0;

960 
vœtu®
 
boŞ
 
	$IsFš®
() const = 0;

961 
vœtu®
 
boŞ
 
	$IsOv”ride
() const = 0;

962 
vœtu®
 
boŞ
 
	$IsSh¬ed
() const = 0;

964 
vœtu®
 
asUINT
 
	$G‘P¬amCouÁ
() const = 0;

965 
vœtu®
 
	$G‘P¬amTy³Id
(
asUINT
 
šdex
, 
asDWORD
 *
æags
 = 0) const = 0;

966 
vœtu®
 
	$G‘R‘uºTy³Id
() const = 0;

969 
vœtu®
 
asUINT
 
	$G‘V¬CouÁ
() const = 0;

970 
vœtu®
 
	$G‘V¬
(
asUINT
 
šdex
, cÚ¡ **
Çme
, *
ty³Id
 = 0) const = 0;

971 
vœtu®
 cÚ¡ * 
	$G‘V¬Deş
(
asUINT
 
šdex
) const = 0;

972 
vœtu®
 
	$FšdNextLšeW™hCode
(
lše
) const = 0;

975 
vœtu®
 
asDWORD
 *
	`G‘By‹Code
(
asUINT
 *
Ëngth
 = 0) = 0;

978 
vœtu®
 *
	`S‘U£rD©a
(*
u£rD©a
) = 0;

979 
vœtu®
 *
	$G‘U£rD©a
() const = 0;

981 
´Ùeùed
:

982 
vœtu®
 ~
	$asISütFunùiÚ
() {};

983 
	}
};

985 şas 
	casIBš¬ySŒ—m


987 
	mpublic
:

988 
vœtu®
 
R—d
(*
±r
, 
asUINT
 
size
) = 0;

989 
vœtu®
 
Wr™e
(cÚ¡ *
±r
, 
asUINT
 
size
) = 0;

991 
	mpublic
:

992 
vœtu®
 ~
	$asIBš¬ySŒ—m
() {}

993 
	}
};

999 
šlše
 
	$asMemCË¬
(*
_p
, 
size_t
 
size
)

1001 *
p
 = 
»š‹½»t_ÿ¡
<*>(
_p
);

1002 cÚ¡ *
e
 = 
p
 + 
size
;

1003  ; 
p
 < 
e
;…++ )

1004 *
p
 = 0;

1005 
	}
}

1007 
šlše
 
	$asMemCİy
(*
_d
, cÚ¡ *
_s
, 
size_t
 
size
)

1009 *
d
 = 
»š‹½»t_ÿ¡
<*>(
_d
);

1010 cÚ¡ *
s
 = 
»š‹½»t_ÿ¡
<cÚ¡ *>(
_s
);

1011 cÚ¡ *
e
 = 
s
 + 
size
;

1012  ; 
s
 < 
e
; 
d
++, s++ )

1013 *
d
 = *
s
;

1014 
	}
}

1018 
	g‹m¶©e
 <
şass
 
	gT
>

1019 
šlše
 
asSFuncPŒ
 
	$asFunùiÚPŒ
(
T
 
func
)

1021 
asSFuncPŒ
 
p
;

1022 
	`asMemCË¬
(&
p
, (p));

1024 #ifdeà
AS_64BIT_PTR


1027 
p
.
±r
.
f
.
func
 = 
»š‹½»t_ÿ¡
<
asFUNCTION_t
>(
	`size_t
(func));

1031 
p
.
±r
.
f
.
func
 = 
»š‹½»t_ÿ¡
<
asFUNCTION_t
>(func);

1035 
p
.
æag
 = 2;

1037  
p
;

1038 
	}
}

1041 
	g‹m¶©e
<>

1042 
šlše
 
asSFuncPŒ
 
	gasFunùiÚPŒ
<
	gasGENFUNC_t
>(
asGENFUNC_t
 
	gfunc
)

1044 
asSFuncPŒ
 
	gp
;

1045 
asMemCË¬
(&
p
, (p));

1046 
	gp
.
	g±r
.
	gf
.
	gfunc
 = 
»š‹½»t_ÿ¡
<
asFUNCTION_t
>(
func
);

1049 
	gp
.
	gæag
 = 1;

1051  
	gp
;

1054 #iâdeà
AS_NO_CLASS_METHODS


1059 şas 
	casCSim¶eDummy
 {};

1060 (
	gasCSim¶eDummy
::*
	tasSIMPLEMETHOD_t
)();

1061 cÚ¡ 
	gSINGLE_PTR_SIZE
 = (
asSIMPLEMETHOD_t
);

1064 
	g‹m¶©e
 <
	gN
>

1065 
	sasSM‘hodPŒ


1067 
	m‹m¶©e
<
şass
 
	mM
>

1068 
asSFuncPŒ
 
CÚv”t
(
M
 
Mthd
)

1073 
	mERROR_UnsuµÜ‹dM‘hodPŒ
[
N
-100];

1075 
asSFuncPŒ
 
	mp
;

1076  
	mp
;

1081 
	g‹m¶©e
 <>

1082 
	gasSM‘hodPŒ
<
	gSINGLE_PTR_SIZE
>

1084 
	g‹m¶©e
<
şass
 
	gM
>

1085 
asSFuncPŒ
 
CÚv”t
(
M
 
Mthd
)

1087 
asSFuncPŒ
 
	gp
;

1088 
asMemCË¬
(&
p
, (p));

1090 
asMemCİy
(&
p
, &
Mthd
, 
SINGLE_PTR_SIZE
);

1093 
	gp
.
	gæag
 = 3;

1095  
	gp
;

1099 #ià
defšed
(
_MSC_VER
è&& !defšed(
__MWERKS__
)

1102 
	g‹m¶©e
 <>

1103 
	gasSM‘hodPŒ
<
	gSINGLE_PTR_SIZE
+1*()>

1105 
	g‹m¶©e
 <
şass
 
	gM
>

1106 
asSFuncPŒ
 
CÚv”t
(
M
 
Mthd
)

1108 
asSFuncPŒ
 
	gp
;

1109 
asMemCË¬
(&
p
, (p));

1111 
asMemCİy
(&
p
, &
Mthd
, 
SINGLE_PTR_SIZE
+());

1114 
	gp
.
	gæag
 = 3;

1116  
	gp
;

1120 
	g‹m¶©e
 <>

1121 
	gasSM‘hodPŒ
<
	gSINGLE_PTR_SIZE
+2*()>

1123 
	g‹m¶©e
 <
şass
 
	gM
>

1124 
asSFuncPŒ
 
CÚv”t
(
M
 
Mthd
)

1129 
asSFuncPŒ
 
	gp
;

1130 
asMemCË¬
(&
p
, (p));

1132 
asMemCİy
(&
p
, &
Mthd
, 
SINGLE_PTR_SIZE
+2*());

1135 
	gp
.
	gæag
 = 3;

1140 #ià
defšed
(
_MSC_VER
è&& !defšed(
AS_64BIT_PTR
)

1158 *(
	g¡©ic_ÿ¡
<
	gasDWORD
*>(&
	gp
)+3èğ*(
¡©ic_ÿ¡
<
asDWORD
*>(&
p
)+2);

1161  
	gp
;

1165 
	g‹m¶©e
 <>

1166 
	gasSM‘hodPŒ
<
	gSINGLE_PTR_SIZE
+3*()>

1168 
	g‹m¶©e
 <
şass
 
	gM
>

1169 
asSFuncPŒ
 
CÚv”t
(
M
 
Mthd
)

1171 
asSFuncPŒ
 
	gp
;

1172 
asMemCË¬
(&
p
, (p));

1174 
asMemCİy
(&
p
, &
Mthd
, 
SINGLE_PTR_SIZE
+3*());

1177 
	gp
.
	gæag
 = 3;

1179  
	gp
;

1183 
	g‹m¶©e
 <>

1184 
	gasSM‘hodPŒ
<
	gSINGLE_PTR_SIZE
+4*()>

1186 
	g‹m¶©e
 <
şass
 
	gM
>

1187 
asSFuncPŒ
 
CÚv”t
(
M
 
Mthd
)

1192 
asSFuncPŒ
 
	gp
;

1193 
asMemCË¬
(&
p
, (p));

1195 
asMemCİy
(&
p
, &
Mthd
, 
SINGLE_PTR_SIZE
+4*());

1198 
	gp
.
	gæag
 = 3;

1200  
	gp
;

1211 
	sasSVMRegi¡”s


1213 
asDWORD
 *
	m´og¿mPoš‹r
;

1214 
asDWORD
 *
	m¡ackF¿mePoš‹r
;

1215 
asDWORD
 *
	m¡ackPoš‹r
;

1216 
asQWORD
 
	mv®ueRegi¡”
;

1217 *
	mobjeùRegi¡”
;

1218 
asIObjeùTy³
 *
	mobjeùTy³
;

1219 
boŞ
 
	mdoProûssSu¥’d
;

1220 
asISütCÚ‹xt
 *
	mùx
;

1223 (*
	tasJITFunùiÚ
)(
	tasSVMRegi¡”s
 *
	t»gi¡”s
, 
	tasPWORD
 
	tj™Arg
);

1225 şas 
	casIJITComp”


1227 
public
:

1228 
vœtu®
 
	`CompeFunùiÚ
(
asISütFunùiÚ
 *
funùiÚ
, 
asJITFunùiÚ
 *
ouut
) = 0;

1229 
vœtu®
 
	`R–—£JITFunùiÚ
(
asJITFunùiÚ
 
func
) = 0;

1230 
public
:

1231 
vœtu®
 ~
	$asIJITComp”
() {}

1232 
	}
};

1235 
	easEBCIn¡r


1237 
	masBC_PİPŒ
 = 0,

1238 
	masBC_PshGPŒ
 = 1,

1239 
	masBC_PshC4
 = 2,

1240 
	masBC_PshV4
 = 3,

1241 
	masBC_PSF
 = 4,

1242 
	masBC_Sw­PŒ
 = 5,

1243 
	masBC_NOT
 = 6,

1244 
	masBC_PshG4
 = 7,

1245 
	masBC_LdGRdR4
 = 8,

1246 
	masBC_CALL
 = 9,

1247 
	masBC_RET
 = 10,

1248 
	masBC_JMP
 = 11,

1249 
	masBC_JZ
 = 12,

1250 
	masBC_JNZ
 = 13,

1251 
	masBC_JS
 = 14,

1252 
	masBC_JNS
 = 15,

1253 
	masBC_JP
 = 16,

1254 
	masBC_JNP
 = 17,

1255 
	masBC_TZ
 = 18,

1256 
	masBC_TNZ
 = 19,

1257 
	masBC_TS
 = 20,

1258 
	masBC_TNS
 = 21,

1259 
	masBC_TP
 = 22,

1260 
	masBC_TNP
 = 23,

1261 
	masBC_NEGi
 = 24,

1262 
	masBC_NEGf
 = 25,

1263 
	masBC_NEGd
 = 26,

1264 
	masBC_INCi16
 = 27,

1265 
	masBC_INCi8
 = 28,

1266 
	masBC_DECi16
 = 29,

1267 
	masBC_DECi8
 = 30,

1268 
	masBC_INCi
 = 31,

1269 
	masBC_DECi
 = 32,

1270 
	masBC_INCf
 = 33,

1271 
	masBC_DECf
 = 34,

1272 
	masBC_INCd
 = 35,

1273 
	masBC_DECd
 = 36,

1274 
	masBC_IncVi
 = 37,

1275 
	masBC_DecVi
 = 38,

1276 
	masBC_BNOT
 = 39,

1277 
	masBC_BAND
 = 40,

1278 
	masBC_BOR
 = 41,

1279 
	masBC_BXOR
 = 42,

1280 
	masBC_BSLL
 = 43,

1281 
	masBC_BSRL
 = 44,

1282 
	masBC_BSRA
 = 45,

1283 
	masBC_COPY
 = 46,

1284 
	masBC_PshC8
 = 47,

1285 
	masBC_PshVPŒ
 = 48,

1286 
	masBC_RDSPŒ
 = 49,

1287 
	masBC_CMPd
 = 50,

1288 
	masBC_CMPu
 = 51,

1289 
	masBC_CMPf
 = 52,

1290 
	masBC_CMPi
 = 53,

1291 
	masBC_CMPIi
 = 54,

1292 
	masBC_CMPIf
 = 55,

1293 
	masBC_CMPIu
 = 56,

1294 
	masBC_JMPP
 = 57,

1295 
	masBC_PİRPŒ
 = 58,

1296 
	masBC_PshRPŒ
 = 59,

1297 
	masBC_STR
 = 60,

1298 
	masBC_CALLSYS
 = 61,

1299 
	masBC_CALLBND
 = 62,

1300 
	masBC_SUSPEND
 = 63,

1301 
	masBC_ALLOC
 = 64,

1302 
	masBC_FREE
 = 65,

1303 
	masBC_LOADOBJ
 = 66,

1304 
	masBC_STOREOBJ
 = 67,

1305 
	masBC_GETOBJ
 = 68,

1306 
	masBC_REFCPY
 = 69,

1307 
	masBC_CHKREF
 = 70,

1308 
	masBC_GETOBJREF
 = 71,

1309 
	masBC_GETREF
 = 72,

1310 
	masBC_PshNuÎ
 = 73,

1311 
	masBC_CÌVPŒ
 = 74,

1312 
	masBC_OBJTYPE
 = 75,

1313 
	masBC_TYPEID
 = 76,

1314 
	masBC_S‘V4
 = 77,

1315 
	masBC_S‘V8
 = 78,

1316 
	masBC_ADDSi
 = 79,

1317 
	masBC_CpyVtoV4
 = 80,

1318 
	masBC_CpyVtoV8
 = 81,

1319 
	masBC_CpyVtoR4
 = 82,

1320 
	masBC_CpyVtoR8
 = 83,

1321 
	masBC_CpyVtoG4
 = 84,

1322 
	masBC_CpyRtoV4
 = 85,

1323 
	masBC_CpyRtoV8
 = 86,

1324 
	masBC_CpyGtoV4
 = 87,

1325 
	masBC_WRTV1
 = 88,

1326 
	masBC_WRTV2
 = 89,

1327 
	masBC_WRTV4
 = 90,

1328 
	masBC_WRTV8
 = 91,

1329 
	masBC_RDR1
 = 92,

1330 
	masBC_RDR2
 = 93,

1331 
	masBC_RDR4
 = 94,

1332 
	masBC_RDR8
 = 95,

1333 
	masBC_LDG
 = 96,

1334 
	masBC_LDV
 = 97,

1335 
	masBC_PGA
 = 98,

1336 
	masBC_CmpPŒ
 = 99,

1337 
	masBC_VAR
 = 100,

1338 
	masBC_iTOf
 = 101,

1339 
	masBC_fTOi
 = 102,

1340 
	masBC_uTOf
 = 103,

1341 
	masBC_fTOu
 = 104,

1342 
	masBC_sbTOi
 = 105,

1343 
	masBC_swTOi
 = 106,

1344 
	masBC_ubTOi
 = 107,

1345 
	masBC_uwTOi
 = 108,

1346 
	masBC_dTOi
 = 109,

1347 
	masBC_dTOu
 = 110,

1348 
	masBC_dTOf
 = 111,

1349 
	masBC_iTOd
 = 112,

1350 
	masBC_uTOd
 = 113,

1351 
	masBC_fTOd
 = 114,

1352 
	masBC_ADDi
 = 115,

1353 
	masBC_SUBi
 = 116,

1354 
	masBC_MULi
 = 117,

1355 
	masBC_DIVi
 = 118,

1356 
	masBC_MODi
 = 119,

1357 
	masBC_ADDf
 = 120,

1358 
	masBC_SUBf
 = 121,

1359 
	masBC_MULf
 = 122,

1360 
	masBC_DIVf
 = 123,

1361 
	masBC_MODf
 = 124,

1362 
	masBC_ADDd
 = 125,

1363 
	masBC_SUBd
 = 126,

1364 
	masBC_MULd
 = 127,

1365 
	masBC_DIVd
 = 128,

1366 
	masBC_MODd
 = 129,

1367 
	masBC_ADDIi
 = 130,

1368 
	masBC_SUBIi
 = 131,

1369 
	masBC_MULIi
 = 132,

1370 
	masBC_ADDIf
 = 133,

1371 
	masBC_SUBIf
 = 134,

1372 
	masBC_MULIf
 = 135,

1373 
	masBC_S‘G4
 = 136,

1374 
	masBC_ChkRefS
 = 137,

1375 
	masBC_ChkNuÎV
 = 138,

1376 
	masBC_CALLINTF
 = 139,

1377 
	masBC_iTOb
 = 140,

1378 
	masBC_iTOw
 = 141,

1379 
	masBC_S‘V1
 = 142,

1380 
	masBC_S‘V2
 = 143,

1381 
	masBC_Ca¡
 = 144,

1382 
	masBC_i64TOi
 = 145,

1383 
	masBC_uTOi64
 = 146,

1384 
	masBC_iTOi64
 = 147,

1385 
	masBC_fTOi64
 = 148,

1386 
	masBC_dTOi64
 = 149,

1387 
	masBC_fTOu64
 = 150,

1388 
	masBC_dTOu64
 = 151,

1389 
	masBC_i64TOf
 = 152,

1390 
	masBC_u64TOf
 = 153,

1391 
	masBC_i64TOd
 = 154,

1392 
	masBC_u64TOd
 = 155,

1393 
	masBC_NEGi64
 = 156,

1394 
	masBC_INCi64
 = 157,

1395 
	masBC_DECi64
 = 158,

1396 
	masBC_BNOT64
 = 159,

1397 
	masBC_ADDi64
 = 160,

1398 
	masBC_SUBi64
 = 161,

1399 
	masBC_MULi64
 = 162,

1400 
	masBC_DIVi64
 = 163,

1401 
	masBC_MODi64
 = 164,

1402 
	masBC_BAND64
 = 165,

1403 
	masBC_BOR64
 = 166,

1404 
	masBC_BXOR64
 = 167,

1405 
	masBC_BSLL64
 = 168,

1406 
	masBC_BSRL64
 = 169,

1407 
	masBC_BSRA64
 = 170,

1408 
	masBC_CMPi64
 = 171,

1409 
	masBC_CMPu64
 = 172,

1410 
	masBC_ChkNuÎS
 = 173,

1411 
	masBC_CÌHi
 = 174,

1412 
	masBC_J™EÁry
 = 175,

1413 
	masBC_C®lPŒ
 = 176,

1414 
	masBC_FuncPŒ
 = 177,

1415 
	masBC_LßdThisR
 = 178,

1416 
	masBC_PshV8
 = 179,

1417 
	masBC_DIVu
 = 180,

1418 
	masBC_MODu
 = 181,

1419 
	masBC_DIVu64
 = 182,

1420 
	masBC_MODu64
 = 183,

1421 
	masBC_LßdRObjR
 = 184,

1422 
	masBC_LßdVObjR
 = 185,

1423 
	masBC_RefCpyV
 = 186,

1424 
	masBC_JLowZ
 = 187,

1425 
	masBC_JLowNZ
 = 188,

1427 
	masBC_MAXBYTECODE
 = 189,

1430 
	masBC_V¬Deş
 = 251,

1431 
	masBC_Block
 = 252,

1432 
	masBC_ObjInfo
 = 253,

1433 
	masBC_LINE
 = 254,

1434 
	masBC_LABEL
 = 255

1438 
	easEBCTy³


1440 
	masBCTYPE_INFO
 = 0,

1441 
	masBCTYPE_NO_ARG
 = 1,

1442 
	masBCTYPE_W_ARG
 = 2,

1443 
	masBCTYPE_wW_ARG
 = 3,

1444 
	masBCTYPE_DW_ARG
 = 4,

1445 
	masBCTYPE_rW_DW_ARG
 = 5,

1446 
	masBCTYPE_QW_ARG
 = 6,

1447 
	masBCTYPE_DW_DW_ARG
 = 7,

1448 
	masBCTYPE_wW_rW_rW_ARG
 = 8,

1449 
	masBCTYPE_wW_QW_ARG
 = 9,

1450 
	masBCTYPE_wW_rW_ARG
 = 10,

1451 
	masBCTYPE_rW_ARG
 = 11,

1452 
	masBCTYPE_wW_DW_ARG
 = 12,

1453 
	masBCTYPE_wW_rW_DW_ARG
 = 13,

1454 
	masBCTYPE_rW_rW_ARG
 = 14,

1455 
	masBCTYPE_wW_W_ARG
 = 15,

1456 
	masBCTYPE_QW_DW_ARG
 = 16,

1457 
	masBCTYPE_rW_QW_ARG
 = 17,

1458 
	masBCTYPE_W_DW_ARG
 = 18,

1459 
	masBCTYPE_rW_W_DW_ARG
 = 19

1463 cÚ¡ 
	gasBCTy³Size
[20] =

1488 
	sasSBCInfo


1490 
asEBCIn¡r
 
	mbc
;

1491 
asEBCTy³
 
	mty³
;

1492 
	m¡ackInc
;

1493 cÚ¡ *
	mÇme
;

1496 #iâdeà
AS_64BIT_PTR


1497 
	#asBCTYPE_PTR_ARG
 
asBCTYPE_DW_ARG


	)

1498 
	#asBCTYPE_PTR_DW_ARG
 
asBCTYPE_DW_DW_ARG


	)

1499 
	#asBCTYPE_wW_PTR_ARG
 
asBCTYPE_wW_DW_ARG


	)

1500 
	#asBCTYPE_rW_PTR_ARG
 
asBCTYPE_rW_DW_ARG


	)

1501 #iâdeà
AS_PTR_SIZE


1502 
	#AS_PTR_SIZE
 1

	)

1505 
	#asBCTYPE_PTR_ARG
 
asBCTYPE_QW_ARG


	)

1506 
	#asBCTYPE_PTR_DW_ARG
 
asBCTYPE_QW_DW_ARG


	)

1507 
	#asBCTYPE_wW_PTR_ARG
 
asBCTYPE_wW_QW_ARG


	)

1508 
	#asBCTYPE_rW_PTR_ARG
 
asBCTYPE_rW_QW_ARG


	)

1509 #iâdeà
AS_PTR_SIZE


1510 
	#AS_PTR_SIZE
 2

	)

1514 
	#asBCINFO
(
b
,
t
,
s
è{
asBC_
##b, 
asBCTYPE_
##t, s, #b}

	)

1515 
	#asBCINFO_DUMMY
(
b
è{
asBC_MAXBYTECODE
, 
asBCTYPE_INFO
, 0, "BC_" #b}

	)

1517 cÚ¡ 
asSBCInfo
 
	gasBCInfo
[256] =

1519 
asBCINFO
(
PİPŒ
, 
NO_ARG
, -
AS_PTR_SIZE
),

1520 
asBCINFO
(
PshGPŒ
, 
PTR_ARG
, 
AS_PTR_SIZE
),

1521 
asBCINFO
(
PshC4
, 
DW_ARG
, 1),

1522 
asBCINFO
(
PshV4
, 
rW_ARG
, 1),

1523 
asBCINFO
(
PSF
, 
rW_ARG
, 
AS_PTR_SIZE
),

1524 
asBCINFO
(
Sw­PŒ
, 
NO_ARG
, 0),

1525 
asBCINFO
(
NOT
, 
rW_ARG
, 0),

1526 
asBCINFO
(
PshG4
, 
PTR_ARG
, 1),

1527 
asBCINFO
(
LdGRdR4
, 
wW_PTR_ARG
, 0),

1528 
asBCINFO
(
CALL
, 
DW_ARG
, 0xFFFF),

1529 
asBCINFO
(
RET
, 
W_ARG
, 0xFFFF),

1530 
asBCINFO
(
JMP
, 
DW_ARG
, 0),

1531 
asBCINFO
(
JZ
, 
DW_ARG
, 0),

1532 
asBCINFO
(
JNZ
, 
DW_ARG
, 0),

1533 
asBCINFO
(
JS
, 
DW_ARG
, 0),

1534 
asBCINFO
(
JNS
, 
DW_ARG
, 0),

1535 
asBCINFO
(
JP
, 
DW_ARG
, 0),

1536 
asBCINFO
(
JNP
, 
DW_ARG
, 0),

1537 
asBCINFO
(
TZ
, 
NO_ARG
, 0),

1538 
asBCINFO
(
TNZ
, 
NO_ARG
, 0),

1539 
asBCINFO
(
TS
, 
NO_ARG
, 0),

1540 
asBCINFO
(
TNS
, 
NO_ARG
, 0),

1541 
asBCINFO
(
TP
, 
NO_ARG
, 0),

1542 
asBCINFO
(
TNP
, 
NO_ARG
, 0),

1543 
asBCINFO
(
NEGi
, 
rW_ARG
, 0),

1544 
asBCINFO
(
NEGf
, 
rW_ARG
, 0),

1545 
asBCINFO
(
NEGd
, 
rW_ARG
, 0),

1546 
asBCINFO
(
INCi16
, 
NO_ARG
, 0),

1547 
asBCINFO
(
INCi8
, 
NO_ARG
, 0),

1548 
asBCINFO
(
DECi16
, 
NO_ARG
, 0),

1549 
asBCINFO
(
DECi8
, 
NO_ARG
, 0),

1550 
asBCINFO
(
INCi
, 
NO_ARG
, 0),

1551 
asBCINFO
(
DECi
, 
NO_ARG
, 0),

1552 
asBCINFO
(
INCf
, 
NO_ARG
, 0),

1553 
asBCINFO
(
DECf
, 
NO_ARG
, 0),

1554 
asBCINFO
(
INCd
, 
NO_ARG
, 0),

1555 
asBCINFO
(
DECd
, 
NO_ARG
, 0),

1556 
asBCINFO
(
IncVi
, 
rW_ARG
, 0),

1557 
asBCINFO
(
DecVi
, 
rW_ARG
, 0),

1558 
asBCINFO
(
BNOT
, 
rW_ARG
, 0),

1559 
asBCINFO
(
BAND
, 
wW_rW_rW_ARG
, 0),

1560 
asBCINFO
(
BOR
, 
wW_rW_rW_ARG
, 0),

1561 
asBCINFO
(
BXOR
, 
wW_rW_rW_ARG
, 0),

1562 
asBCINFO
(
BSLL
, 
wW_rW_rW_ARG
, 0),

1563 
asBCINFO
(
BSRL
, 
wW_rW_rW_ARG
, 0),

1564 
asBCINFO
(
BSRA
, 
wW_rW_rW_ARG
, 0),

1565 
asBCINFO
(
COPY
, 
W_DW_ARG
, -
AS_PTR_SIZE
),

1566 
asBCINFO
(
PshC8
, 
QW_ARG
, 2),

1567 
asBCINFO
(
PshVPŒ
, 
rW_ARG
, 
AS_PTR_SIZE
),

1568 
asBCINFO
(
RDSPŒ
, 
NO_ARG
, 0),

1569 
asBCINFO
(
CMPd
, 
rW_rW_ARG
, 0),

1570 
asBCINFO
(
CMPu
, 
rW_rW_ARG
, 0),

1571 
asBCINFO
(
CMPf
, 
rW_rW_ARG
, 0),

1572 
asBCINFO
(
CMPi
, 
rW_rW_ARG
, 0),

1573 
asBCINFO
(
CMPIi
, 
rW_DW_ARG
, 0),

1574 
asBCINFO
(
CMPIf
, 
rW_DW_ARG
, 0),

1575 
asBCINFO
(
CMPIu
, 
rW_DW_ARG
, 0),

1576 
asBCINFO
(
JMPP
, 
rW_ARG
, 0),

1577 
asBCINFO
(
PİRPŒ
, 
NO_ARG
, -
AS_PTR_SIZE
),

1578 
asBCINFO
(
PshRPŒ
, 
NO_ARG
, 
AS_PTR_SIZE
),

1579 
asBCINFO
(
STR
, 
W_ARG
, 1+
AS_PTR_SIZE
),

1580 
asBCINFO
(
CALLSYS
, 
DW_ARG
, 0xFFFF),

1581 
asBCINFO
(
CALLBND
, 
DW_ARG
, 0xFFFF),

1582 
asBCINFO
(
SUSPEND
, 
NO_ARG
, 0),

1583 
asBCINFO
(
ALLOC
, 
PTR_DW_ARG
, 0xFFFF),

1584 
asBCINFO
(
FREE
, 
wW_PTR_ARG
, 0),

1585 
asBCINFO
(
LOADOBJ
, 
rW_ARG
, 0),

1586 
asBCINFO
(
STOREOBJ
, 
wW_ARG
, 0),

1587 
asBCINFO
(
GETOBJ
, 
W_ARG
, 0),

1588 
asBCINFO
(
REFCPY
, 
PTR_ARG
, -
AS_PTR_SIZE
),

1589 
asBCINFO
(
CHKREF
, 
NO_ARG
, 0),

1590 
asBCINFO
(
GETOBJREF
, 
W_ARG
, 0),

1591 
asBCINFO
(
GETREF
, 
W_ARG
, 0),

1592 
asBCINFO
(
PshNuÎ
, 
NO_ARG
, 
AS_PTR_SIZE
),

1593 
asBCINFO
(
CÌVPŒ
, 
rW_ARG
, 0),

1594 
asBCINFO
(
OBJTYPE
, 
PTR_ARG
, 
AS_PTR_SIZE
),

1595 
asBCINFO
(
TYPEID
, 
DW_ARG
, 1),

1596 
asBCINFO
(
S‘V4
, 
wW_DW_ARG
, 0),

1597 
asBCINFO
(
S‘V8
, 
wW_QW_ARG
, 0),

1598 
asBCINFO
(
ADDSi
, 
W_DW_ARG
, 0),

1599 
asBCINFO
(
CpyVtoV4
, 
wW_rW_ARG
, 0),

1600 
asBCINFO
(
CpyVtoV8
, 
wW_rW_ARG
, 0),

1601 
asBCINFO
(
CpyVtoR4
, 
rW_ARG
, 0),

1602 
asBCINFO
(
CpyVtoR8
, 
rW_ARG
, 0),

1603 
asBCINFO
(
CpyVtoG4
, 
rW_PTR_ARG
, 0),

1604 
asBCINFO
(
CpyRtoV4
, 
wW_ARG
, 0),

1605 
asBCINFO
(
CpyRtoV8
, 
wW_ARG
, 0),

1606 
asBCINFO
(
CpyGtoV4
, 
wW_PTR_ARG
, 0),

1607 
asBCINFO
(
WRTV1
, 
rW_ARG
, 0),

1608 
asBCINFO
(
WRTV2
, 
rW_ARG
, 0),

1609 
asBCINFO
(
WRTV4
, 
rW_ARG
, 0),

1610 
asBCINFO
(
WRTV8
, 
rW_ARG
, 0),

1611 
asBCINFO
(
RDR1
, 
wW_ARG
, 0),

1612 
asBCINFO
(
RDR2
, 
wW_ARG
, 0),

1613 
asBCINFO
(
RDR4
, 
wW_ARG
, 0),

1614 
asBCINFO
(
RDR8
, 
wW_ARG
, 0),

1615 
asBCINFO
(
LDG
, 
PTR_ARG
, 0),

1616 
asBCINFO
(
LDV
, 
rW_ARG
, 0),

1617 
asBCINFO
(
PGA
, 
PTR_ARG
, 
AS_PTR_SIZE
),

1618 
asBCINFO
(
CmpPŒ
, 
rW_rW_ARG
, 0),

1619 
asBCINFO
(
VAR
, 
rW_ARG
, 
AS_PTR_SIZE
),

1620 
asBCINFO
(
iTOf
, 
rW_ARG
, 0),

1621 
asBCINFO
(
fTOi
, 
rW_ARG
, 0),

1622 
asBCINFO
(
uTOf
, 
rW_ARG
, 0),

1623 
asBCINFO
(
fTOu
, 
rW_ARG
, 0),

1624 
asBCINFO
(
sbTOi
, 
rW_ARG
, 0),

1625 
asBCINFO
(
swTOi
, 
rW_ARG
, 0),

1626 
asBCINFO
(
ubTOi
, 
rW_ARG
, 0),

1627 
asBCINFO
(
uwTOi
, 
rW_ARG
, 0),

1628 
asBCINFO
(
dTOi
, 
wW_rW_ARG
, 0),

1629 
asBCINFO
(
dTOu
, 
wW_rW_ARG
, 0),

1630 
asBCINFO
(
dTOf
, 
wW_rW_ARG
, 0),

1631 
asBCINFO
(
iTOd
, 
wW_rW_ARG
, 0),

1632 
asBCINFO
(
uTOd
, 
wW_rW_ARG
, 0),

1633 
asBCINFO
(
fTOd
, 
wW_rW_ARG
, 0),

1634 
asBCINFO
(
ADDi
, 
wW_rW_rW_ARG
, 0),

1635 
asBCINFO
(
SUBi
, 
wW_rW_rW_ARG
, 0),

1636 
asBCINFO
(
MULi
, 
wW_rW_rW_ARG
, 0),

1637 
asBCINFO
(
DIVi
, 
wW_rW_rW_ARG
, 0),

1638 
asBCINFO
(
MODi
, 
wW_rW_rW_ARG
, 0),

1639 
asBCINFO
(
ADDf
, 
wW_rW_rW_ARG
, 0),

1640 
asBCINFO
(
SUBf
, 
wW_rW_rW_ARG
, 0),

1641 
asBCINFO
(
MULf
, 
wW_rW_rW_ARG
, 0),

1642 
asBCINFO
(
DIVf
, 
wW_rW_rW_ARG
, 0),

1643 
asBCINFO
(
MODf
, 
wW_rW_rW_ARG
, 0),

1644 
asBCINFO
(
ADDd
, 
wW_rW_rW_ARG
, 0),

1645 
asBCINFO
(
SUBd
, 
wW_rW_rW_ARG
, 0),

1646 
asBCINFO
(
MULd
, 
wW_rW_rW_ARG
, 0),

1647 
asBCINFO
(
DIVd
, 
wW_rW_rW_ARG
, 0),

1648 
asBCINFO
(
MODd
, 
wW_rW_rW_ARG
, 0),

1649 
asBCINFO
(
ADDIi
, 
wW_rW_DW_ARG
, 0),

1650 
asBCINFO
(
SUBIi
, 
wW_rW_DW_ARG
, 0),

1651 
asBCINFO
(
MULIi
, 
wW_rW_DW_ARG
, 0),

1652 
asBCINFO
(
ADDIf
, 
wW_rW_DW_ARG
, 0),

1653 
asBCINFO
(
SUBIf
, 
wW_rW_DW_ARG
, 0),

1654 
asBCINFO
(
MULIf
, 
wW_rW_DW_ARG
, 0),

1655 
asBCINFO
(
S‘G4
, 
PTR_DW_ARG
, 0),

1656 
asBCINFO
(
ChkRefS
, 
NO_ARG
, 0),

1657 
asBCINFO
(
ChkNuÎV
, 
rW_ARG
, 0),

1658 
asBCINFO
(
CALLINTF
, 
DW_ARG
, 0xFFFF),

1659 
asBCINFO
(
iTOb
, 
rW_ARG
, 0),

1660 
asBCINFO
(
iTOw
, 
rW_ARG
, 0),

1661 
asBCINFO
(
S‘V1
, 
wW_DW_ARG
, 0),

1662 
asBCINFO
(
S‘V2
, 
wW_DW_ARG
, 0),

1663 
asBCINFO
(
Ca¡
, 
DW_ARG
, -
AS_PTR_SIZE
),

1664 
asBCINFO
(
i64TOi
, 
wW_rW_ARG
, 0),

1665 
asBCINFO
(
uTOi64
, 
wW_rW_ARG
, 0),

1666 
asBCINFO
(
iTOi64
, 
wW_rW_ARG
, 0),

1667 
asBCINFO
(
fTOi64
, 
wW_rW_ARG
, 0),

1668 
asBCINFO
(
dTOi64
, 
rW_ARG
, 0),

1669 
asBCINFO
(
fTOu64
, 
wW_rW_ARG
, 0),

1670 
asBCINFO
(
dTOu64
, 
rW_ARG
, 0),

1671 
asBCINFO
(
i64TOf
, 
wW_rW_ARG
, 0),

1672 
asBCINFO
(
u64TOf
, 
wW_rW_ARG
, 0),

1673 
asBCINFO
(
i64TOd
, 
rW_ARG
, 0),

1674 
asBCINFO
(
u64TOd
, 
rW_ARG
, 0),

1675 
asBCINFO
(
NEGi64
, 
rW_ARG
, 0),

1676 
asBCINFO
(
INCi64
, 
NO_ARG
, 0),

1677 
asBCINFO
(
DECi64
, 
NO_ARG
, 0),

1678 
asBCINFO
(
BNOT64
, 
rW_ARG
, 0),

1679 
asBCINFO
(
ADDi64
, 
wW_rW_rW_ARG
, 0),

1680 
asBCINFO
(
SUBi64
, 
wW_rW_rW_ARG
, 0),

1681 
asBCINFO
(
MULi64
, 
wW_rW_rW_ARG
, 0),

1682 
asBCINFO
(
DIVi64
, 
wW_rW_rW_ARG
, 0),

1683 
asBCINFO
(
MODi64
, 
wW_rW_rW_ARG
, 0),

1684 
asBCINFO
(
BAND64
, 
wW_rW_rW_ARG
, 0),

1685 
asBCINFO
(
BOR64
, 
wW_rW_rW_ARG
, 0),

1686 
asBCINFO
(
BXOR64
, 
wW_rW_rW_ARG
, 0),

1687 
asBCINFO
(
BSLL64
, 
wW_rW_rW_ARG
, 0),

1688 
asBCINFO
(
BSRL64
, 
wW_rW_rW_ARG
, 0),

1689 
asBCINFO
(
BSRA64
, 
wW_rW_rW_ARG
, 0),

1690 
asBCINFO
(
CMPi64
, 
rW_rW_ARG
, 0),

1691 
asBCINFO
(
CMPu64
, 
rW_rW_ARG
, 0),

1692 
asBCINFO
(
ChkNuÎS
, 
W_ARG
, 0),

1693 
asBCINFO
(
CÌHi
, 
NO_ARG
, 0),

1694 
asBCINFO
(
J™EÁry
, 
PTR_ARG
, 0),

1695 
asBCINFO
(
C®lPŒ
, 
rW_ARG
, 0xFFFF),

1696 
asBCINFO
(
FuncPŒ
, 
PTR_ARG
, 
AS_PTR_SIZE
),

1697 
asBCINFO
(
LßdThisR
, 
W_DW_ARG
, 0),

1698 
asBCINFO
(
PshV8
, 
rW_ARG
, 2),

1699 
asBCINFO
(
DIVu
, 
wW_rW_rW_ARG
, 0),

1700 
asBCINFO
(
MODu
, 
wW_rW_rW_ARG
, 0),

1701 
asBCINFO
(
DIVu64
, 
wW_rW_rW_ARG
, 0),

1702 
asBCINFO
(
MODu64
, 
wW_rW_rW_ARG
, 0),

1703 
asBCINFO
(
LßdRObjR
, 
rW_W_DW_ARG
, 0),

1704 
asBCINFO
(
LßdVObjR
, 
rW_W_DW_ARG
, 0),

1705 
asBCINFO
(
RefCpyV
, 
wW_PTR_ARG
, 0),

1706 
asBCINFO
(
JLowZ
, 
DW_ARG
, 0),

1707 
asBCINFO
(
JLowNZ
, 
DW_ARG
, 0),

1709 
asBCINFO_DUMMY
(189),

1710 
asBCINFO_DUMMY
(190),

1711 
asBCINFO_DUMMY
(191),

1712 
asBCINFO_DUMMY
(192),

1713 
asBCINFO_DUMMY
(193),

1714 
asBCINFO_DUMMY
(194),

1715 
asBCINFO_DUMMY
(195),

1716 
asBCINFO_DUMMY
(196),

1717 
asBCINFO_DUMMY
(197),

1718 
asBCINFO_DUMMY
(198),

1719 
asBCINFO_DUMMY
(199),

1720 
asBCINFO_DUMMY
(200),

1721 
asBCINFO_DUMMY
(201),

1722 
asBCINFO_DUMMY
(202),

1723 
asBCINFO_DUMMY
(203),

1724 
asBCINFO_DUMMY
(204),

1725 
asBCINFO_DUMMY
(205),

1726 
asBCINFO_DUMMY
(206),

1727 
asBCINFO_DUMMY
(207),

1728 
asBCINFO_DUMMY
(208),

1729 
asBCINFO_DUMMY
(209),

1730 
asBCINFO_DUMMY
(210),

1731 
asBCINFO_DUMMY
(211),

1732 
asBCINFO_DUMMY
(212),

1733 
asBCINFO_DUMMY
(213),

1734 
asBCINFO_DUMMY
(214),

1735 
asBCINFO_DUMMY
(215),

1736 
asBCINFO_DUMMY
(216),

1737 
asBCINFO_DUMMY
(217),

1738 
asBCINFO_DUMMY
(218),

1739 
asBCINFO_DUMMY
(219),

1740 
asBCINFO_DUMMY
(220),

1741 
asBCINFO_DUMMY
(221),

1742 
asBCINFO_DUMMY
(222),

1743 
asBCINFO_DUMMY
(223),

1744 
asBCINFO_DUMMY
(224),

1745 
asBCINFO_DUMMY
(225),

1746 
asBCINFO_DUMMY
(226),

1747 
asBCINFO_DUMMY
(227),

1748 
asBCINFO_DUMMY
(228),

1749 
asBCINFO_DUMMY
(229),

1750 
asBCINFO_DUMMY
(230),

1751 
asBCINFO_DUMMY
(231),

1752 
asBCINFO_DUMMY
(232),

1753 
asBCINFO_DUMMY
(233),

1754 
asBCINFO_DUMMY
(234),

1755 
asBCINFO_DUMMY
(235),

1756 
asBCINFO_DUMMY
(236),

1757 
asBCINFO_DUMMY
(237),

1758 
asBCINFO_DUMMY
(238),

1759 
asBCINFO_DUMMY
(239),

1760 
asBCINFO_DUMMY
(240),

1761 
asBCINFO_DUMMY
(241),

1762 
asBCINFO_DUMMY
(242),

1763 
asBCINFO_DUMMY
(243),

1764 
asBCINFO_DUMMY
(244),

1765 
asBCINFO_DUMMY
(245),

1766 
asBCINFO_DUMMY
(246),

1767 
asBCINFO_DUMMY
(247),

1768 
asBCINFO_DUMMY
(248),

1769 
asBCINFO_DUMMY
(249),

1770 
asBCINFO_DUMMY
(250),

1772 
asBCINFO
(
V¬Deş
, 
W_ARG
, 0),

1773 
asBCINFO
(
Block
, 
INFO
, 0),

1774 
asBCINFO
(
ObjInfo
, 
rW_DW_ARG
, 0),

1775 
asBCINFO
(
LINE
, 
INFO
, 0),

1776 
asBCINFO
(
LABEL
, 
INFO
, 0)

1780 
	#asBC_DWORDARG
(
x
è(
	`asDWORD
(*(x+1)))

	)

1781 
	#asBC_INTARG
(
x
è((*(x+1)))

	)

1782 
	#asBC_QWORDARG
(
x
è(*(
asQWORD
*)(x+1))

	)

1783 
	#asBC_FLOATARG
(
x
è(*(*)(x+1))

	)

1784 
	#asBC_PTRARG
(
x
è(*(
asPWORD
*)(x+1))

	)

1785 
	#asBC_WORDARG0
(
x
è(*(((
asWORD
*)x)+1))

	)

1786 
	#asBC_WORDARG1
(
x
è(*(((
asWORD
*)x)+2))

	)

1787 
	#asBC_SWORDARG0
(
x
è(*(((*)x)+1))

	)

1788 
	#asBC_SWORDARG1
(
x
è(*(((*)x)+2))

	)

1789 
	#asBC_SWORDARG2
(
x
è(*(((*)x)+3))

	)

1792 
	gEND_AS_NAMESPACE


	@../hdr/script/as_array.h

31 #iâdeà
AS_ARRAY_H


32 
	#AS_ARRAY_H


	)

34 #ià!
defšed
(
AS_NO_MEMORY_H
)

35 
	~<memÜy.h
>

37 
	~<¡ršg.h
>

39 #ifdeà
_MSC_VER


40 #´agm¨
w¬nšg
(
di§bË
:4345)

43 
BEGIN_AS_NAMESPACE


45 
	g‹m¶©e
 <
şass
 
	gT
> cÏs 
	casCA¼ay


47 
	mpublic
:

48 
asCA¼ay
();

49 
asCA¼ay
(cÚ¡‡sCA¼ay<
T
> &);

50 
asCA¼ay
(
size_t
 
»£rve
);

51 ~
asCA¼ay
();

53 
AÎoÿ‹
(
size_t
 
numEËm’ts
, 
boŞ
 
k“pD©a
);

54 
AÎoÿ‹NoCÚ¡ruù
(
size_t
 
numEËm’ts
, 
boŞ
 
k“pD©a
);

55 
size_t
 
	$G‘C­ac™y
() const;

57 
	`PushLa¡
(cÚ¡ 
T
 &
–em’t
);

58 
T
 
	`PİLa¡
();

60 
	`S‘L’gth
(
size_t
 
numEËm’ts
);

61 
	`S‘L’gthNoCÚ¡ruù
(
size_t
 
numEËm’ts
);

62 
size_t
 
	$G‘L’gth
() const;

64 
	`Cİy
(cÚ¡ 
T
*, 
size_t
 
couÁ
);

65 
asCA¼ay
<
T
> &
İ”©Ü
 =(const‡sCArray<T> &);

67 cÚ¡ 
T
 &
İ”©Ü
 [](
size_t
 
šdex
) const;

68 
T
 &
İ”©Ü
 [](
size_t
 
šdex
);

69 
T
 *
	`Add»ssOf
();

70 cÚ¡ 
T
 *
	$Add»ssOf
() const;

72 
	`CÚÿ‹Ç‹
(cÚ¡ 
asCA¼ay
<
T
> &);

73 
	`CÚÿ‹Ç‹
(
T
*, 
couÁ
);

75 
boŞ
 
	$Exi¡s
(
T
 &
–em’t
) const;

76 
	$IndexOf
(
T
 &
–em’t
) const;

77 
	`RemoveIndex
(
size_t
 
šdex
);

78 
	`RemoveV®ue
(cÚ¡ 
T
 &
–em’t
);

80 
boŞ
 
İ”©Ü
==(cÚ¡ 
asCA¼ay
<
T
> &) const;

81 
boŞ
 
İ”©Ü
!=(cÚ¡ 
asCA¼ay
<
T
> &) const;

83 
´Ùeùed
:

84 
T
 *
¬¿y
;

85 
size_t
 
Ëngth
;

86 
size_t
 
maxL’gth
;

87 
buf
[8];

92 
‹m¶©e
 <
şass
 
T
>

93 
T
 *
asCA¼ay
<T>::
	$Add»ssOf
()

95  
¬¿y
;

96 
	}
}

98 
	g‹m¶©e
 <
şass
 
	gT
>

99 cÚ¡ 
T
 *
	gasCA¼ay
<
	gT
>::
	$Add»ssOf
() const

101  
¬¿y
;

102 
	}
}

104 
	g‹m¶©e
 <
şass
 
	gT
>

105 
	gasCA¼ay
<
	gT
>::
	$asCA¼ay
()

107 
¬¿y
 = 0;

108 
Ëngth
 = 0;

109 
maxL’gth
 = 0;

110 
	}
}

112 
	g‹m¶©e
 <
şass
 
	gT
>

113 
	gasCA¼ay
<
	gT
>::
asCA¼ay
(cÚ¡‡sCA¼ay<
T
> &
cİy
)

115 
¬¿y
 = 0;

116 
	gËngth
 = 0;

117 
	gmaxL’gth
 = 0;

119 *
	gthis
 = 
cİy
;

122 
	g‹m¶©e
 <
şass
 
	gT
>

123 
	gasCA¼ay
<
	gT
>::
	$asCA¼ay
(
size_t
 
»£rve
)

125 
¬¿y
 = 0;

126 
Ëngth
 = 0;

127 
maxL’gth
 = 0;

129 
	`AÎoÿ‹
(
»£rve
, 
çl£
);

130 
	}
}

132 
	g‹m¶©e
 <
şass
 
	gT
>

133 
	gasCA¼ay
<
	gT
>::~
	$asCA¼ay
()

136 
	`AÎoÿ‹
(0,0);

137 
	}
}

139 
	g‹m¶©e
 <
şass
 
	gT
>

140 
size_t
 
	gasCA¼ay
<
	gT
>::
	$G‘L’gth
() const

142  
Ëngth
;

143 
	}
}

145 
	g‹m¶©e
 <
şass
 
	gT
>

146 cÚ¡ 
	gT
 &
	gasCA¼ay
<T>::
İ”©Ü
 [](
size_t
 
šdex
) const

148 
asASSERT
(
šdex
 < 
Ëngth
);

150  
	g¬¿y
[
šdex
];

153 
	g‹m¶©e
 <
şass
 
	gT
>

154 
	gT
 &
	gasCA¼ay
<T>::
İ”©Ü
 [](
size_t
 
šdex
)

156 
asASSERT
(
šdex
 < 
Ëngth
);

158  
	g¬¿y
[
šdex
];

161 
	g‹m¶©e
 <
şass
 
	gT
>

162 
	gasCA¼ay
<
	gT
>::
	$PushLa¡
(cÚ¡ 
T
 &
–em’t
)

164 ifĞ
Ëngth
 =ğ
maxL’gth
 )

166 ifĞ
maxL’gth
 == 0 )

167 
	`AÎoÿ‹
(1, 
çl£
);

169 
	`AÎoÿ‹
(2*
maxL’gth
, 
Œue
);

171 ifĞ
Ëngth
 =ğ
maxL’gth
 )

178 
¬¿y
[
Ëngth
++] = 
–em’t
;

179 
	}
}

181 
	g‹m¶©e
 <
şass
 
	gT
>

182 
T
 
	gasCA¼ay
<
	gT
>::
	$PİLa¡
()

184 
	`asASSERT
(
Ëngth
 > 0);

186  
¬¿y
[--
Ëngth
];

187 
	}
}

189 
	g‹m¶©e
 <
şass
 
	gT
>

190 
	gasCA¼ay
<
	gT
>::
	$AÎoÿ‹
(
size_t
 
numEËm’ts
, 
boŞ
 
k“pD©a
)

198 
T
 *
tmp
 = 0;

199 ifĞ
numEËm’ts
 )

201 ifĞ(
T
)*
numEËm’ts
 <= 8 )

203 
tmp
 = 
»š‹½»t_ÿ¡
<
T
*>(
buf
);

207 
tmp
 = 
	`asNEWARRAY
(
T
,
numEËm’ts
);

208 ifĞ
tmp
 == 0 )

215 ifĞ
¬¿y
 =ğ
tmp
 )

218  
size_t
 
n
 = 
Ëngth
;‚ < 
numEËm’ts
;‚++ )

219 
	`Ãw
 (&
tmp
[
n
]è
	`T
();

224  
size_t
 
n
 = 0;‚ < 
numEËm’ts
;‚++ )

225 
	`Ãw
 (&
tmp
[
n
]è
	`T
();

229 ifĞ
¬¿y
 )

231 
size_t
 
ŞdL’gth
 = 
Ëngth
;

233 ifĞ
¬¿y
 =ğ
tmp
 )

235 ifĞ
k“pD©a
 )

237 ifĞ
Ëngth
 > 
numEËm’ts
 )

238 
Ëngth
 = 
numEËm’ts
;

241 
Ëngth
 = 0;

244  
size_t
 
n
 = 
Ëngth
;‚ < 
ŞdL’gth
;‚++ )

245 
¬¿y
[
n
].~
	`T
();

249 ifĞ
k“pD©a
 )

251 ifĞ
Ëngth
 > 
numEËm’ts
 )

252 
Ëngth
 = 
numEËm’ts
;

254  
size_t
 
n
 = 0;‚ < 
Ëngth
;‚++ )

255 
tmp
[
n
] = 
¬¿y
[n];

258 
Ëngth
 = 0;

261  
size_t
 
n
 = 0;‚ < 
ŞdL’gth
;‚++ )

262 
¬¿y
[
n
].~
	`T
();

264 ifĞ
¬¿y
 !ğ
»š‹½»t_ÿ¡
<
T
*>(
buf
) )

265 
	`asDELETEARRAY
(
¬¿y
);

269 
¬¿y
 = 
tmp
;

270 
maxL’gth
 = 
numEËm’ts
;

271 
	}
}

273 
	g‹m¶©e
 <
şass
 
	gT
>

274 
	gasCA¼ay
<
	gT
>::
	$AÎoÿ‹NoCÚ¡ruù
(
size_t
 
numEËm’ts
, 
boŞ
 
k“pD©a
)

282 
T
 *
tmp
 = 0;

283 ifĞ
numEËm’ts
 )

285 ifĞ(
T
)*
numEËm’ts
 <= 8 )

287 
tmp
 = 
»š‹½»t_ÿ¡
<
T
*>(
buf
);

291 
tmp
 = 
	`asNEWARRAY
(
T
,
numEËm’ts
);

292 ifĞ
tmp
 == 0 )

300 ifĞ
¬¿y
 )

302 ifĞ
¬¿y
 =ğ
tmp
 )

304 ifĞ
k“pD©a
 )

306 ifĞ
Ëngth
 > 
numEËm’ts
 )

307 
Ëngth
 = 
numEËm’ts
;

310 
Ëngth
 = 0;

314 ifĞ
k“pD©a
 )

316 ifĞ
Ëngth
 > 
numEËm’ts
 )

317 
Ëngth
 = 
numEËm’ts
;

319 
	`memıy
(
tmp
, 
¬¿y
, (
T
)*
Ëngth
);

322 
Ëngth
 = 0;

324 ifĞ
¬¿y
 !ğ
»š‹½»t_ÿ¡
<
T
*>(
buf
) )

325 
	`asDELETEARRAY
(
¬¿y
);

329 
¬¿y
 = 
tmp
;

330 
maxL’gth
 = 
numEËm’ts
;

331 
	}
}

333 
	g‹m¶©e
 <
şass
 
	gT
>

334 
size_t
 
	gasCA¼ay
<
	gT
>::
	$G‘C­ac™y
() const

336  
maxL’gth
;

337 
	}
}

339 
	g‹m¶©e
 <
şass
 
	gT
>

340 
	gasCA¼ay
<
	gT
>::
	$S‘L’gth
(
size_t
 
numEËm’ts
)

342 ifĞ
numEËm’ts
 > 
maxL’gth
 )

344 
	`AÎoÿ‹
(
numEËm’ts
, 
Œue
);

345 ifĞ
numEËm’ts
 > 
maxL’gth
 )

352 
Ëngth
 = 
numEËm’ts
;

353 
	}
}

355 
	g‹m¶©e
 <
şass
 
	gT
>

356 
	gasCA¼ay
<
	gT
>::
	$S‘L’gthNoCÚ¡ruù
(
size_t
 
numEËm’ts
)

358 ifĞ
numEËm’ts
 > 
maxL’gth
 )

360 
	`AÎoÿ‹NoCÚ¡ruù
(
numEËm’ts
, 
Œue
);

361 ifĞ
numEËm’ts
 > 
maxL’gth
 )

368 
Ëngth
 = 
numEËm’ts
;

369 
	}
}

371 
	g‹m¶©e
 <
şass
 
	gT
>

372 
	gasCA¼ay
<
	gT
>::
	$Cİy
(cÚ¡ 
T
 *
d©a
, 
size_t
 
couÁ
)

374 ifĞ
maxL’gth
 < 
couÁ
 )

376 
	`AÎoÿ‹
(
couÁ
, 
çl£
);

377 ifĞ
maxL’gth
 < 
couÁ
 )

384  
size_t
 
n
 = 0;‚ < 
couÁ
;‚++ )

385 
¬¿y
[
n
] = 
d©a
[n];

387 
Ëngth
 = 
couÁ
;

388 
	}
}

390 
	g‹m¶©e
 <
şass
 
	gT
>

391 
	gasCA¼ay
<
	gT
> &asCA¼ay<T>::
İ”©Ü
 =(cÚ¡ 
asCA¼ay
<
T
> &
cİy
)

393 
Cİy
(
cİy
.
¬¿y
, cİy.
Ëngth
);

395  *
	gthis
;

398 
	g‹m¶©e
 <
şass
 
	gT
>

399 
boŞ
 
	gasCA¼ay
<
	gT
>::
İ”©Ü
 ==(cÚ¡ 
asCA¼ay
<
T
> &
Ùh”
) const

401 ifĞ
Ëngth
 !ğ
Ùh”
.Ëngth )  
çl£
;

403  
size_t
 
	gn
 = 0;‚ < 
	gËngth
;‚++ )

404 ifĞ
	g¬¿y
[
n
] !ğ
Ùh”
.
¬¿y
[n] )

405  
çl£
;

407  
	gŒue
;

410 
	g‹m¶©e
 <
şass
 
	gT
>

411 
boŞ
 
	gasCA¼ay
<
	gT
>::
İ”©Ü
 !=(cÚ¡ 
asCA¼ay
<
T
> &
Ùh”
) const

413  !(*
this
 =ğ
Ùh”
);

416 
	g‹m¶©e
 <
şass
 
	gT
>

417 
	gasCA¼ay
<
	gT
>::
CÚÿ‹Ç‹
(cÚ¡ 
asCA¼ay
<
T
> &
Ùh”
)

419 ifĞ
maxL’gth
 < 
Ëngth
 + 
Ùh”
.length )

420 
AÎoÿ‹
(
Ëngth
 + 
Ùh”
.Ëngth, 
Œue
);

422  
size_t
 
	gn
 = 0;‚ < 
	gÙh”
.
	gËngth
;‚++ )

423 
	g¬¿y
[
Ëngth
+
n
] = 
Ùh”
.
¬¿y
[n];

425 
	gËngth
 +ğ
Ùh”
.
Ëngth
;

428 
	g‹m¶©e
 <
şass
 
	gT
>

429 
	gasCA¼ay
<
	gT
>::
	$CÚÿ‹Ç‹
(
T
* 
¬¿y
, 
couÁ
)

431  
c
 = 0; c < 
couÁ
; c++ )

432 
	`PushLa¡
(
¬¿y
[
c
]);

433 
	}
}

435 
	g‹m¶©e
 <
şass
 
	gT
>

436 
boŞ
 
	gasCA¼ay
<
	gT
>::
	$Exi¡s
(
T
 &
e
) const

438  
	`IndexOf
(
e
è=ğ-1 ? 
çl£
 : 
Œue
;

439 
	}
}

441 
	g‹m¶©e
 <
şass
 
	gT
>

442 
	gasCA¼ay
<
	gT
>::
	$IndexOf
(
T
 &
e
) const

444  
size_t
 
n
 = 0;‚ < 
Ëngth
;‚++ )

445 ifĞ
¬¿y
[
n
] =ğ
e
 )  
¡©ic_ÿ¡
<>(n);

448 
	}
}

450 
	g‹m¶©e
 <
şass
 
	gT
>

451 
	gasCA¼ay
<
	gT
>::
	$RemoveIndex
(
size_t
 
šdex
)

453 ifĞ
šdex
 < 
Ëngth
 )

455  
size_t
 
n
 = 
šdex
;‚ < 
Ëngth
-1;‚++ )

456 
¬¿y
[
n
] =‡rray[n+1];

458 
	`PİLa¡
();

460 
	}
}

462 
	g‹m¶©e
 <
şass
 
	gT
>

463 
	gasCA¼ay
<
	gT
>::
	$RemoveV®ue
(cÚ¡ 
T
 &
e
)

465  
size_t
 
n
 = 0;‚ < 
Ëngth
;‚++ )

467 ifĞ
¬¿y
[
n
] =ğ
e
 )

469 
	`RemoveIndex
(
n
);

473 
	}
}

475 
	gEND_AS_NAMESPACE


	@../hdr/script/as_arrayobject.h

41 #iâdeà
AS_ARRAYOBJECT_H


42 
	#AS_ARRAYOBJECT_H


	)

44 
	~"as_cÚfig.h
"

45 
	~"as_©omic.h
"

47 
BEGIN_AS_NAMESPACE


49 
	gsA¼ayBufãr
;

51 şas 
	casCA¼ayObjeù
 : 
public
 
asISütA¼ay


53 
public
:

54 
asCA¼ayObjeù
(
asUINT
 
Ëngth
, 
asIObjeùTy³
 *
Ù
);

55 
	mvœtu®
 ~
asCA¼ayObjeù
();

57 
asISütEngše
 *
	$G‘Engše
() const;

59 
	`AddRef
();

60 
	`R–—£
();

62 
	`G‘A¼ayTy³Id
();

63 
	`G‘EËm’tTy³Id
();

65 
	`Resize
(
asUINT
 
numEËm’ts
);

66 
asUINT
 
	`G‘EËm’tCouÁ
();

67 *
	`G‘EËm’tPoš‹r
(
asUINT
 
šdex
);

68 *
	`©
(
asUINT
 
šdex
);

69 
asCA¼ayObjeù
 &
İ”©Ü
=(asCArrayObject&);

71 
	`CİyFrom
(
asISütA¼ay
 *
Ùh”
);

74 
	`De¡ruù
();

75 
	`G‘RefCouÁ
();

76 
	`S‘FÏg
();

77 
boŞ
 
	`G‘FÏg
();

78 
	`EnumReã»nûs
(
asISütEngše
 *
’gše
);

79 
	`R–—£AÎHªdËs
(
asISütEngše
 *
’gše
);

81 
´Ùeùed
:

82 
asCAtomic
 
»fCouÁ
;

83 
boŞ
 
gcFÏg
;

84 
asIObjeùTy³
 *
objTy³
;

85 
sA¼ayBufãr
 *
bufãr
;

86 
boŞ
 
isA¼ayOfHªdËs
;

87 
–em’tSize
;

89 
boŞ
 
	`CheckMaxSize
(
asUINT
 
numEËm’ts
);

91 
	`C»©eBufãr
(
sA¼ayBufãr
 **
buf
, 
asUINT
 
numEËm’ts
);

92 
	`D–‘eBufãr
(
sA¼ayBufãr
 *
buf
);

93 
	`CİyBufãr
(
sA¼ayBufãr
 *
d¡
, sA¼ayBufã¸*
¤c
);

95 
	`CÚ¡ruù
(
sA¼ayBufãr
 *
buf
, 
asUINT
 
¡¬t
,‡sUINT 
’d
);

96 
	`De¡ruù
(
sA¼ayBufãr
 *
buf
, 
asUINT
 
¡¬t
,‡sUINT 
’d
);

99 
	`Regi¡”A¼ayObjeù
(
asISütEngše
 *
’gše
);

100 
asCA¼ayObjeù
 *
	`A¼ayObjeùFaùÜy
(
asIObjeùTy³
 *
Ù
);

102 
END_AS_NAMESPACE


	@../hdr/script/as_atomic.h

42 #iâdeà
AS_ATOMIC_H


43 
	#AS_ATOMIC_H


	)

45 
	~"as_cÚfig.h
"

46 
	~"as_ü™iÿl£ùiÚ.h
"

48 
BEGIN_AS_NAMESPACE


50 şas 
	casCAtomic


52 
	mpublic
:

53 
asCAtomic
();

55 
asDWORD
 
	$g‘
() const;

56 
	`£t
(
asDWORD
 
v®
);

59 
asDWORD
 
	`©omicInc
();

62 
asDWORD
 
	`©omicDec
();

64 
´Ùeùed
:

65 
asDWORD
 
v®ue
;

67 #ià!
	`defšed
(
AS_NO_THREADS
è&& 
	$defšed
(
AS_NO_ATOMIC
)

68 
	$DECLARECRITICALSECTION
(
cs
)

72 
END_AS_NAMESPACE


	@../hdr/script/as_builder.h

39 #iâdeà
AS_BUILDER_H


40 
	#AS_BUILDER_H


	)

42 
	~"as_cÚfig.h
"

43 
	~"as_sü‹ngše.h
"

44 
	~"as_moduË.h
"

45 
	~"as_¬¿y.h
"

46 
	~"as_sütcode.h
"

47 
	~"as_süŠode.h
"

48 
	~"as_d©©y³.h
"

49 
	~"as_´İ”ty.h
"

51 
	gBEGIN_AS_NAMESPACE


53 #iâdeà
AS_NO_COMPILER


55 
	ssEx¶ic™SigÇtu»


57 
sEx¶ic™SigÇtu»
(
¬gCouÁ
 = 0è: 
¬gTy³s
×rgCouÁ), 
¬gModif›rs
×rgCouÁ), 
¬gNames
×rgCouÁ), 
deçuÉArgs
(argCount) {}

59 
asCD©aTy³
 
	m»tuºTy³
;

60 
	masCA¼ay
<
	masCD©aTy³
> 
	m¬gTy³s
;

61 
	masCA¼ay
<
	masETy³Modif›rs
> 
	m¬gModif›rs
;

62 
	masCA¼ay
<
	masCSŒšg
> 
	m¬gNames
;

63 
	masCA¼ay
<
	masCSŒšg
 *> 
	mdeçuÉArgs
;

66 
	ssFunùiÚDesütiÚ


68 
asCSütCode
 *
	msüt
;

69 
asCSütNode
 *
	mnode
;

70 
asCSŒšg
 
	mÇme
;

71 
asCObjeùTy³
 *
	mobjTy³
;

72 
sEx¶ic™SigÇtu»
 *
	mex¶ic™SigÇtu»
;

73 
	mfuncId
;

74 
boŞ
 
	misExi¡šgSh¬ed
;

77 
	ssGlob®V¬ŸbËDesütiÚ


79 
asCSütCode
 *
	msüt
;

80 
asCSütNode
 *
	midNode
;

81 
asCSütNode
 *
	mÃxtNode
;

82 
asCSŒšg
 
	mÇme
;

83 
asCGlob®Prİ”ty
 *
	m´İ”ty
;

84 
asCD©aTy³
 
	md©©y³
;

85 
	mšdex
;

86 
boŞ
 
	misComped
;

87 
boŞ
 
	misPu»CÚ¡ªt
;

88 
boŞ
 
	misEnumV®ue
;

89 
asQWORD
 
	mcÚ¡ªtV®ue
;

92 
	ssCÏssDeş¬©iÚ


94 
sCÏssDeş¬©iÚ
(è{
	msüt
 = 0; 
	mnode
 = 0; 
	mv®idS‹
 = 0; 
	mobjTy³
 = 0; 
	misExi¡šgSh¬ed
 = 
çl£
; 
	misFš®
 = false;}

96 
asCSütCode
 *
	msüt
;

97 
asCSütNode
 *
	mnode
;

98 
asCSŒšg
 
	mÇme
;

99 
	mv®idS‹
;

100 
asCObjeùTy³
 *
	mobjTy³
;

101 
boŞ
 
	misExi¡šgSh¬ed
;

102 
boŞ
 
	misFš®
;

105 
	ssFuncDef


107 
asCSütCode
 *
	msüt
;

108 
asCSütNode
 *
	mnode
;

109 
asCSŒšg
 
	mÇme
;

110 
	midx
;

115 şas 
	casCBud”


117 
	mpublic
:

118 
asCBud”
(
asCSütEngše
 *
’gše
, 
asCModuË
 *
moduË
);

119 ~
asCBud”
();

122 
V”ifyPrİ”ty
(
asCD©aTy³
 *
dt
, cÚ¡ *
deş
, 
asCSŒšg
 &
outName
,‡sCD©aTy³ &
outTy³
, 
asSNameS·û
 *
ns
);

123 
P¬£D©aTy³
(cÚ¡ *
d©©y³
, 
asCD©aTy³
 *
»suÉ
, 
asSNameS·û
 *
im¶ic™Name¥aû
, 
boŞ
 
isR‘uºTy³
 = 
çl£
);

124 
P¬£Tem¶©eDeş
(cÚ¡ *
deş
, 
asCSŒšg
 *
Çme
,‡sCSŒšg *
subty³Name
);

125 
P¬£FunùiÚDeş¬©iÚ
(
asCObjeùTy³
 *
ty³
, cÚ¡ *
deş
, 
asCSütFunùiÚ
 *
func
, 
boŞ
 
isSy¡emFunùiÚ
, 
asCA¼ay
<boŞ> *
·¿mAutoHªdËs
 = 0, boŞ *
»tuºAutoHªdË
 = 0, 
asSNameS·û
 *
ns
 = 0);

126 
P¬£V¬ŸbËDeş¬©iÚ
(cÚ¡ *
deş
, 
asSNameS·û
 *
im¶ic™Name¥aû
, 
asCSŒšg
 &
outName
,‡sSNameS·û *&
outName¥aû
, 
asCD©aTy³
 &
outDt
);

127 
CheckNameCÚæiù
(cÚ¡ *
Çme
, 
asCSütNode
 *
node
, 
asCSütCode
 *
code
, 
asSNameS·û
 *
ns
);

128 
CheckNameCÚæiùMemb”
(
asCObjeùTy³
 *
ty³
, cÚ¡ *
Çme
, 
asCSütNode
 *
node
, 
asCSütCode
 *
code
, 
boŞ
 
isPrİ”ty
);

130 #iâdeà
AS_NO_COMPILER


131 
AddCode
(cÚ¡ *
Çme
, cÚ¡ *
code
, 
codeL’gth
, 
lšeOff£t
, 
£ùiÚIdx
, 
boŞ
 
makeCİy
);

132 
Bud
();

134 
CompeFunùiÚ
(cÚ¡ *
£ùiÚName
, cÚ¡ *
code
, 
lšeOff£t
, 
asDWORD
 
compeFÏgs
, 
asCSütFunùiÚ
 **
outFunc
);

135 
CompeGlob®V¬
(cÚ¡ *
£ùiÚName
, cÚ¡ *
code
, 
lšeOff£t
);

138 
	m´Ùeùed
:

139 
ä›nd
 
şass
 
asCModuË
;

140 
ä›nd
 
şass
 
	masCP¬£r
;

142 
Re£t
();

144 
Wr™eInfo
(cÚ¡ *
süŠame
, cÚ¡ *
msg
, 
r
, 
c
, 
boŞ
 
´eMes§ge
);

145 
Wr™eE¼Ü
(cÚ¡ *
süŠame
, cÚ¡ *
msg
, 
r
, 
c
);

146 
Wr™eW¬nšg
(cÚ¡ *
süŠame
, cÚ¡ *
msg
, 
r
, 
c
);

148 
asCObjeùPrİ”ty
 *
G‘ObjeùPrİ”ty
(
asCD©aTy³
 &
obj
, cÚ¡ *
´İ
);

149 
asCGlob®Prİ”ty
 *
G‘Glob®Prİ”ty
(cÚ¡ *
´İ
, 
asSNameS·û
 *
ns
, 
boŞ
 *
isComped
, boŞ *
isPu»CÚ¡ªt
, 
asQWORD
 *
cÚ¡ªtV®ue
, boŞ *
isAµPrİ
);

151 
asCSütFunùiÚ
 *
G‘FunùiÚDesütiÚ
(
funcId
);

152 
G‘FunùiÚDesütiÚs
(cÚ¡ *
Çme
, 
asCA¼ay
<> &
funcs
, 
asSNameS·û
 *
ns
);

153 
G‘ObjeùM‘hodDesütiÚs
(cÚ¡ *
Çme
, 
asCObjeùTy³
 *
objeùTy³
, 
asCA¼ay
<> &
m‘hods
, 
boŞ
 
objIsCÚ¡
, cÚ¡ 
asCSŒšg
 &
scİe
 = "");

155 
V®id©eDeçuÉArgs
(
asCSütCode
 *
süt
, 
asCSütNode
 *
node
, 
asCSütFunùiÚ
 *
func
);

156 
asCSŒšg
 
G‘CËªEx´essiÚSŒšg
(
asCSütNode
 *
n
, 
asCSütCode
 *
fe
);

158 
asCSŒšg
 
G‘ScİeFromNode
(
asCSütNode
 *
n
, 
asCSütCode
 *
süt
,‡sCSütNod**
Ãxt
 = 0);

160 
boŞ
 
DÛsTy³Exi¡
(cÚ¡ *
ty³
);

161 
asCObjeùTy³
 *
G‘ObjeùTy³
(cÚ¡ *
ty³
, 
asSNameS·û
 *
ns
);

162 
asCSütFunùiÚ
 *
G‘FuncDef
(cÚ¡ *
ty³
);

163 
asCObjeùTy³
 *
G‘ObjeùTy³FromTy³sKnownByObjeù
(cÚ¡ *
ty³
,‡sCObjeùTy³ *
cu¼’tTy³
);

164 
asCD©aTy³
 
C»©eD©aTy³FromNode
(
asCSütNode
 *
node
, 
asCSütCode
 *
fe
, 
asSNameS·û
 *
im¶ic™Name¥aû
, 
boŞ
 
acû±HªdËFÜScİe
 = 
çl£
, 
asCObjeùTy³
 *
cu¼’tTy³
 = 0);

165 
asCD©aTy³
 
ModifyD©aTy³FromNode
(cÚ¡‡sCD©aTy³ &
ty³
, 
asCSütNode
 *
node
, 
asCSütCode
 *
fe
, 
asETy³Modif›rs
 *
šOutFÏg
, 
boŞ
 *
autoHªdË
);

167 
	s´eMes§ge_t


169 
boŞ
 
	misS‘
;

170 
asCSŒšg
 
	mmes§ge
;

171 
	mr
;

172 
	mc
;

173 } 
	g´eMes§ge
;

175 
	gnumE¼Üs
;

176 
	gnumW¬nšgs
;

178 
asCSütEngše
 *
	g’gše
;

179 
asCModuË
 *
	gmoduË
;

181 #iâdeà
AS_NO_COMPILER


182 
	g´Ùeùed
:

183 
ä›nd
 
şass
 
asCComp”
;

185 
Regi¡”SütFunùiÚ
(
funcID
, 
asCSütNode
 *
node
, 
asCSütCode
 *
fe
, 
asCObjeùTy³
 *
objeù
 = 0, 
boŞ
 
isIÁ”çû
 = 
çl£
, boŞ 
isGlob®FunùiÚ
 = f®£, 
asSNameS·û
 *
ns
 = 0, boŞ 
isExi¡šgSh¬ed
 = false);

186 
Regi¡”SütFunùiÚW™hSigÇtu»
(
funcID
, 
asCSütNode
 *
node
, 
asCSütCode
 *
fe
, 
asCSŒšg
 &
Çme
, 
sEx¶ic™SigÇtu»
 *
sigÇtu»
, 
asCObjeùTy³
 *
objeù
 = 0, 
boŞ
 
isIÁ”çû
 = 
çl£
, boŞ 
isGlob®FunùiÚ
 = f®£, boŞ 
isPriv©e
 = f®£, boŞ 
isCÚ¡
 = f®£, boŞ 
isFš®
 = f®£, boŞ 
isOv”ride
 = f®£, boŞ 
Œ—tAsPrİ”ty
 = f®£, 
asSNameS·û
 *
ns
 = 0);

187 
Regi¡”Vœtu®Prİ”ty
(
asCSütNode
 *
node
, 
asCSütCode
 *
fe
, 
asCObjeùTy³
 *
objeù
 = 0, 
boŞ
 
isIÁ”çû
 = 
çl£
, boŞ 
isGlob®FunùiÚ
 = f®£, 
asSNameS·û
 *
ns
 = 0, boŞ 
isExi¡šgSh¬ed
 = false);

188 
Regi¡”ImpÜ‹dFunùiÚ
(
funcID
, 
asCSütNode
 *
node
, 
asCSütCode
 *
fe
, 
asSNameS·û
 *
ns
);

189 
Regi¡”Glob®V¬
(
asCSütNode
 *
node
, 
asCSütCode
 *
fe
, 
asSNameS·û
 *
ns
);

190 
Regi¡”CÏss
(
asCSütNode
 *
node
, 
asCSütCode
 *
fe
, 
asSNameS·û
 *
ns
);

191 
Regi¡”IÁ”çû
(
asCSütNode
 *
node
, 
asCSütCode
 *
fe
, 
asSNameS·û
 *
ns
);

192 
Regi¡”Enum
(
asCSütNode
 *
node
, 
asCSütCode
 *
fe
, 
asSNameS·û
 *
ns
);

193 
Regi¡”Ty³def
(
asCSütNode
 *
node
, 
asCSütCode
 *
fe
, 
asSNameS·û
 *
ns
);

194 
Regi¡”FuncDef
(
asCSütNode
 *
node
, 
asCSütCode
 *
fe
, 
asSNameS·û
 *
ns
);

195 
Com¶‘eFuncDef
(
sFuncDef
 *
funcDef
);

196 
CompeCÏs£s
();

197 
G‘P¬£dFunùiÚD‘as
(
asCSütNode
 *
node
, 
asCSütCode
 *
fe
, 
asCObjeùTy³
 *
objTy³
, 
asCSŒšg
 &
Çme
, 
asCD©aTy³
 &
»tuºTy³
, 
asCA¼ay
<asCD©aTy³> &
·¿m‘”Ty³s
,‡sCA¼ay<
asETy³Modif›rs
> &
šOutFÏgs
,‡sCA¼ay<asCSŒšg *> &
deçuÉArgs
, 
boŞ
 &
isCÚ¡M‘hod
, boŞ &
isCÚ¡ruùÜ
, boŞ &
isDe¡ruùÜ
, boŞ &
isPriv©e
, boŞ &
isOv”ride
, boŞ &
isFš®
, boŞ &
isSh¬ed
);

198 
boŞ
 
DÛsM‘hodExi¡
(
asCObjeùTy³
 *
objTy³
, 
m‘hodId
, 
asUINT
 *
m‘hodIndex
 = 0);

199 
AddDeçuÉCÚ¡ruùÜ
(
asCObjeùTy³
 *
objTy³
, 
asCSütCode
 *
fe
);

200 
asCObjeùPrİ”ty
 *
AddPrİ”tyToCÏss
(
sCÏssDeş¬©iÚ
 *
c
, cÚ¡ 
asCSŒšg
 &
Çme
, cÚ¡ 
asCD©aTy³
 &
ty³
, 
boŞ
 
isPriv©e
, 
asCSütCode
 *
fe
 = 0, 
asCSütNode
 *
node
 = 0);

201 
C»©eVœtu®FunùiÚ
(
asCSütFunùiÚ
 *
func
, 
idx
);

202 
P¬£Süts
();

203 
Regi¡”Ty³sFromSüt
(
asCSütNode
 *
node
, 
asCSütCode
 *
süt
, 
asSNameS·û
 *
ns
);

204 
Regi¡”NÚTy³sFromSüt
(
asCSütNode
 *
node
, 
asCSütCode
 *
süt
, 
asSNameS·û
 *
ns
);

205 
CompeFunùiÚs
();

206 
CompeGlob®V¬ŸbËs
();

207 
G‘EnumV®ueFromObjeùTy³
(
asCObjeùTy³
 *
objTy³
, cÚ¡ *
Çme
, 
asCD©aTy³
 &
outDt
, 
asDWORD
 &
outV®ue
);

208 
G‘EnumV®ue
(cÚ¡ *
Çme
, 
asCD©aTy³
 &
outDt
, 
asDWORD
 &
outV®ue
, 
asSNameS·û
 *
ns
);

210 
	gasCA¼ay
<
	gasCSütCode
 *> 
	gsüts
;

211 
	gasCA¼ay
<
	gsFunùiÚDesütiÚ
 *> 
	gfunùiÚs
;

212 
	gasCA¼ay
<
	gsGlob®V¬ŸbËDesütiÚ
 *> 
	gglobV¬ŸbËs
;

213 
	gasCA¼ay
<
	gsCÏssDeş¬©iÚ
 *> 
	gşassDeş¬©iÚs
;

214 
	gasCA¼ay
<
	gsCÏssDeş¬©iÚ
 *> 
	gš‹rçûDeş¬©iÚs
;

215 
	gasCA¼ay
<
	gsCÏssDeş¬©iÚ
 *> 
	gÇmedTy³Deş¬©iÚs
;

216 
	gasCA¼ay
<
	gsFuncDef
 *> 
	gfuncDefs
;

220 
	gEND_AS_NAMESPACE


	@../hdr/script/as_bytecode.h

40 #iâdeà
AS_BYTECODE_H


41 
	#AS_BYTECODE_H


	)

43 
	~"as_cÚfig.h
"

45 #iâdeà
AS_NO_COMPILER


47 
	~"as_¬¿y.h
"

49 
	gBEGIN_AS_NAMESPACE


51 
	#BYTECODE_SIZE
 4

	)

52 
	#MAX_DATA_SIZE
 8

	)

53 
	#MAX_INSTR_SIZE
 (
BYTECODE_SIZE
+
MAX_DATA_SIZE
)

	)

55 
şass
 
	gasCSütEngše
;

56 
şass
 
	gasCSütFunùiÚ
;

57 
şass
 
	gcBy‹In¡ruùiÚ
;

59 şas 
	casCBy‹Code


61 
	mpublic
:

62 
asCBy‹Code
(
asCSütEngše
 *
’gše
);

63 ~
asCBy‹Code
();

65 
CË¬AÎ
();

67 
G‘Size
();

69 
Fš®ize
();

71 
O±imize
();

72 
ExŒaùLšeNumb”s
();

73 
ExŒaùObjeùV¬ŸbËInfo
(
asCSütFunùiÚ
 *
outFunc
);

74 
ResŞveJumpAdd»s£s
();

75 
FšdLab–
(
Ïb–
, 
cBy‹In¡ruùiÚ
 *
äom
, cBy‹In¡ruùiÚ **
de¡
, *
pos™iÚD–
);

77 
AddP©h
(
asCA¼ay
<
cBy‹In¡ruùiÚ
 *> &
·ths
, cBy‹In¡ruùiÚ *
š¡r
, 
¡ackSize
);

79 
Ouut
(
asDWORD
 *
¬¿y
);

80 
AddCode
(
asCBy‹Code
 *
bc
);

82 
Po¡Proûss
();

84 #ifdeà
AS_DEBUG


85 
DebugOuut
(cÚ¡ *
Çme
, 
asCSütEngše
 *
’gše
, 
asCSütFunùiÚ
 *
func
);

88 
G‘La¡In¡r
();

89 
RemoveLa¡In¡r
();

90 
asDWORD
 
G‘La¡In¡rV®ueDW
();

92 
In£¹IfNÙExi¡s
(
asCA¼ay
<> &
v¬s
, 
v¬
);

93 
G‘V¬sU£d
(
asCA¼ay
<> &
v¬s
);

94 
boŞ
 
IsV¬U£d
(
off£t
);

95 
ExchªgeV¬
(
ŞdOff£t
, 
ÃwOff£t
);

96 
boŞ
 
IsSim¶eEx´essiÚ
();

98 
Lab–
(
Ïb–
);

99 
Lše
(
lše
, 
cŞumn
);

100 
ObjInfo
(
off£t
, 
šfo
);

101 
Block
(
boŞ
 
¡¬t
);

102 
V¬Deş
(
v¬DeşIdx
);

103 
C®l
(
asEBCIn¡r
 
bc
, 
funcID
, 
pİ
);

104 
C®lPŒ
(
asEBCIn¡r
 
bc
, 
funcPŒV¬
, 
pİ
);

105 
AÎoc
(
asEBCIn¡r
 
bc
, *
objID
, 
funcID
, 
pİ
);

106 
R‘
(
pİ
);

107 
JmpP
(
v¬
, 
asDWORD
 
max
);

109 
In£¹Fœ¡In¡rDWORD
(
asEBCIn¡r
 
bc
, 
asDWORD
 
·¿m
);

110 
In£¹Fœ¡In¡rQWORD
(
asEBCIn¡r
 
bc
, 
asQWORD
 
·¿m
);

111 
In¡r
(
asEBCIn¡r
 
bc
);

112 
In¡rQWORD
(
asEBCIn¡r
 
bc
, 
asQWORD
 
·¿m
);

113 
In¡rDOUBLE
(
asEBCIn¡r
 
bc
, 
·¿m
);

114 
In¡rPTR
(
asEBCIn¡r
 
bc
, *
·¿m
);

115 
In¡rDWORD
(
asEBCIn¡r
 
bc
, 
asDWORD
 
·¿m
);

116 
In¡rWORD
(
asEBCIn¡r
 
bc
, 
asWORD
 
·¿m
);

117 
In¡rSHORT
(
asEBCIn¡r
 
bc
, 
·¿m
);

118 
In¡rFLOAT
(
asEBCIn¡r
 
bc
, 
·¿m
);

119 
In¡rINT
(
asEBCIn¡r
 
bc
, 
·¿m
);

120 
In¡rW_W_W
(
asEBCIn¡r
 
bc
, 
a
, 
b
, 
c
);

121 
In¡rSHORT_B
(
asEBCIn¡r
 
bc
, 
a
, 
asBYTE
 
b
);

122 
In¡rSHORT_W
(
asEBCIn¡r
 
bc
, 
a
, 
asWORD
 
b
);

123 
In¡rSHORT_DW
(
asEBCIn¡r
 
bc
, 
a
, 
asDWORD
 
b
);

124 
In¡rSHORT_QW
(
asEBCIn¡r
 
bc
, 
a
, 
asQWORD
 
b
);

125 
In¡rW_DW
(
asEBCIn¡r
 
bc
, 
asWORD
 
a
, 
asDWORD
 
b
);

126 
In¡rW_QW
(
asEBCIn¡r
 
bc
, 
asWORD
 
a
, 
asQWORD
 
b
);

127 
In¡rW_PTR
(
asEBCIn¡r
 
bc
, 
a
, *
·¿m
);

128 
In¡rW_FLOAT
(
asEBCIn¡r
 
bc
, 
asWORD
 
a
, 
b
);

129 
In¡rW_W
(
asEBCIn¡r
 
bc
, 
w
, 
b
);

131 
	masCA¼ay
<> 
	mlšeNumb”s
;

132 
	mÏrge¡SckU£d
;

134 
DefšeTempÜ¬yV¬ŸbË
(
v¬Off£t
);

136 
	m´Ùeùed
:

138 
boŞ
 
CªBeSw­³d
(
cBy‹In¡ruùiÚ
 *
cu¼
);

139 
boŞ
 
IsCombš©iÚ
(
cBy‹In¡ruùiÚ
 *
cu¼
, 
asEBCIn¡r
 
bc1
,‡sEBCIn¡¸
bc2
);

140 
boŞ
 
IsCombš©iÚ
(
cBy‹In¡ruùiÚ
 *
cu¼
, 
asEBCIn¡r
 
bc1
,‡sEBCIn¡¸
bc2
,‡sEBCIn¡¸
bc3
);

141 
cBy‹In¡ruùiÚ
 *
ChªgeFœ¡D–‘eNext
(cBy‹In¡ruùiÚ *
cu¼
, 
asEBCIn¡r
 
bc
);

142 
cBy‹In¡ruùiÚ
 *
D–‘eFœ¡ChªgeNext
(cBy‹In¡ruùiÚ *
cu¼
, 
asEBCIn¡r
 
bc
);

143 
cBy‹In¡ruùiÚ
 *
D–‘eIn¡ruùiÚ
(cBy‹In¡ruùiÚ *
š¡r
);

144 
RemoveIn¡ruùiÚ
(
cBy‹In¡ruùiÚ
 *
š¡r
);

145 
cBy‹In¡ruùiÚ
 *
GoBack
(cBy‹In¡ruùiÚ *
cu¼
);

146 
In£¹BefÜe
(
cBy‹In¡ruùiÚ
 *
befÜe
, cBy‹In¡ruùiÚ *
š¡r
);

147 
boŞ
 
RemoveUnu£dV®ue
(
cBy‹In¡ruùiÚ
 *
cu¼
, cBy‹In¡ruùiÚ **
Ãxt
);

148 
boŞ
 
IsTempÜ¬y
(
off£t
);

149 
boŞ
 
IsTempRegU£d
(
cBy‹In¡ruùiÚ
 *
cu¼
);

150 
boŞ
 
IsTempV¬R—d
(
cBy‹In¡ruùiÚ
 *
cu¼
, 
off£t
);

151 
boŞ
 
Po¡pÚeIn™OfTemp
(
cBy‹In¡ruùiÚ
 *
cu¼
, cBy‹In¡ruùiÚ **
Ãxt
);

152 
boŞ
 
IsTempV¬R—dByIn¡r
(
cBy‹In¡ruùiÚ
 *
cu¼
, 
v¬
);

153 
boŞ
 
IsTempV¬Ov”wr™‹nByIn¡r
(
cBy‹In¡ruùiÚ
 *
cu¼
, 
v¬
);

154 
boŞ
 
IsIn¡rJmpOrLab–
(
cBy‹In¡ruùiÚ
 *
cu¼
);

156 
AddIn¡ruùiÚ
();

157 
AddIn¡ruùiÚFœ¡
();

159 
cBy‹In¡ruùiÚ
 *
	mfœ¡
;

160 
cBy‹In¡ruùiÚ
 *
	mÏ¡
;

162 
	masCA¼ay
<> 
	m‹mpÜ¬yV¬ŸbËs
;

164 
asCSütEngše
 *
	m’gše
;

167 şas 
	ccBy‹In¡ruùiÚ


169 
	mpublic
:

170 
cBy‹In¡ruùiÚ
();

172 
AddAá”
(
cBy‹In¡ruùiÚ
 *
ÃxtCode
);

173 
AddBefÜe
(
cBy‹In¡ruùiÚ
 *
ÃxtCode
);

174 
Remove
();

176 
G‘Size
();

177 
G‘SckInü—£
();

179 
cBy‹In¡ruùiÚ
 *
	mÃxt
;

180 
cBy‹In¡ruùiÚ
 *
	m´ev
;

182 
asEBCIn¡r
 
	mİ
;

183 
asQWORD
 
	m¬g
;

184 
	mwArg
[3];

185 
	msize
;

186 
	m¡ackInc
;

189 
boŞ
 
	mm¬ked
;

190 
	m¡ackSize
;

193 
	gEND_AS_NAMESPACE


	@../hdr/script/as_callfunc.h

39 #iâdeà
AS_CALLFUNC_H


40 
	#AS_CALLFUNC_H


	)

42 
	~"as_¬¿y.h
"

44 
BEGIN_AS_NAMESPACE


46 
şass
 
	gasCCÚ‹xt
;

47 
şass
 
	gasCSütEngše
;

48 
şass
 
	gasCSütFunùiÚ
;

49 
	gasSSy¡emFunùiÚIÁ”çû
;

51 
D‘eùC®lšgCÚv’tiÚ
(
boŞ
 
isM‘hod
, cÚ¡ 
asSFuncPŒ
 &
±r
, 
ÿÎCÚv
, 
asSSy¡emFunùiÚIÁ”çû
 *
š‹º®
);

53 
P»·»Sy¡emFunùiÚG’”ic
(
asCSütFunùiÚ
 *
func
, 
asSSy¡emFunùiÚIÁ”çû
 *
š‹º®
, 
asCSütEngše
 *
’gše
);

55 
P»·»Sy¡emFunùiÚ
(
asCSütFunùiÚ
 *
func
, 
asSSy¡emFunùiÚIÁ”çû
 *
š‹º®
, 
asCSütEngše
 *
’gše
);

57 
C®lSy¡emFunùiÚ
(
id
, 
asCCÚ‹xt
 *
cÚ‹xt
, *
objeùPoš‹r
);

59 
šlše
 
asPWORD
 
	$FuncPŒToUIÁ
(
asFUNCTION_t
 
func
)

63 uniÚ { 
asFUNCTION_t
 
func
; 
asPWORD
 
idx
; } 
u
;

64 
u
.
func
 = func;

66  
u
.
idx
;

67 
	}
}

69 
	eš‹º®C®lCÚv


71 
	mICC_GENERIC_FUNC
,

72 
	mICC_GENERIC_FUNC_RETURNINMEM
,

73 
	mICC_CDECL
,

74 
	mICC_CDECL_RETURNINMEM
,

75 
	mICC_STDCALL
,

76 
	mICC_STDCALL_RETURNINMEM
,

77 
	mICC_THISCALL
,

78 
	mICC_THISCALL_RETURNINMEM
,

79 
	mICC_VIRTUAL_THISCALL
,

80 
	mICC_VIRTUAL_THISCALL_RETURNINMEM
,

81 
	mICC_CDECL_OBJLAST
,

82 
	mICC_CDECL_OBJLAST_RETURNINMEM
,

83 
	mICC_CDECL_OBJFIRST
,

84 
	mICC_CDECL_OBJFIRST_RETURNINMEM
,

85 
	mICC_GENERIC_METHOD
,

86 
	mICC_GENERIC_METHOD_RETURNINMEM


89 
	sasSSy¡emFunùiÚIÁ”çû


91 
asFUNCTION_t
 
	mfunc
;

92 
	mba£Off£t
;

93 
š‹º®C®lCÚv
 
	mÿÎCÚv
;

94 
	msütR‘uºSize
;

95 
boŞ
 
	mho¡R‘uºInMemÜy
;

96 
boŞ
 
	mho¡R‘uºFlßt
;

97 
	mho¡R‘uºSize
;

98 
	m·¿mSize
;

99 
boŞ
 
	mkesObjByV®
;

100 
	masCA¼ay
<
	mboŞ
> 
	m·¿mAutoHªdËs
;

101 
boŞ
 
	m»tuºAutoHªdË
;

102 
boŞ
 
	mhasAutoHªdËs
;

104 
asSSy¡emFunùiÚIÁ”çû
() {}

106 
asSSy¡emFunùiÚIÁ”çû
(cÚ¡‡sSSy¡emFunùiÚIÁ”çû &
š
)

108 *
	mthis
 = 
š
;

111 
	masSSy¡emFunùiÚIÁ”çû
 &
	mİ”©Ü
=(cÚ¡ 
asSSy¡emFunùiÚIÁ”çû
 &
š
)

113 
func
 = 
š
.func;

114 
	mba£Off£t
 = 
š
.
ba£Off£t
;

115 
	mÿÎCÚv
 = 
š
.
ÿÎCÚv
;

116 
	msütR‘uºSize
 = 
š
.
sütR‘uºSize
;

117 
	mho¡R‘uºInMemÜy
 = 
š
.
ho¡R‘uºInMemÜy
;

118 
	mho¡R‘uºFlßt
 = 
š
.
ho¡R‘uºFlßt
;

119 
	mho¡R‘uºSize
 = 
š
.
ho¡R‘uºSize
;

120 
	m·¿mSize
 = 
š
.
·¿mSize
;

121 
	mkesObjByV®
 = 
š
.
kesObjByV®
;

122 
	m·¿mAutoHªdËs
 = 
š
.
·¿mAutoHªdËs
;

123 
	m»tuºAutoHªdË
 = 
š
.
»tuºAutoHªdË
;

124 
	mhasAutoHªdËs
 = 
š
.
hasAutoHªdËs
;

125  *
	mthis
;

129 
	gEND_AS_NAMESPACE


	@../hdr/script/as_compiler.h

40 #iâdeà
AS_COMPILER_H


41 
	#AS_COMPILER_H


	)

43 
	~"as_cÚfig.h
"

45 #iâdeà
AS_NO_COMPILER


47 
	~"as_bud”.h
"

48 
	~"as_sütfunùiÚ.h
"

49 
	~"as_v¬ŸbËscİe.h
"

50 
	~"as_by‹code.h
"

51 
	~"as_¬¿y.h
"

52 
	~"as_d©©y³.h
"

53 
	~"as_ty³šfo.h
"

55 
BEGIN_AS_NAMESPACE


57 
	gasSEx´CÚ‹xt
;

59 
	sasSDeã¼edP¬am


61 
asSDeã¼edP¬am
(è{
	m¬gNode
 = 0; 
	mÜigEx´
 = 0;}

63 
asCSütNode
 *
	m¬gNode
;

64 
asCTy³Info
 
	m¬gTy³
;

65 
	m¬gInOutFÏgs
;

66 
asSEx´CÚ‹xt
 *
	mÜigEx´
;

69 
	sasSEx´CÚ‹xt


71 
asSEx´CÚ‹xt
(
asCSütEngše
 *
’gše
è: 
bc
(engine)

73 
ex´Node
 = 0;

74 
	mÜigEx´
 = 0;

75 
	m´İ”ty_g‘
 = 0;

76 
	m´İ”ty_£t
 = 0;

77 
	m´İ”ty_cÚ¡
 = 
çl£
;

78 
	m´İ”ty_hªdË
 = 
çl£
;

79 
	m´İ”ty_»f
 = 
çl£
;

80 
	m´İ”ty_¬g
 = 0;

82 ~
asSEx´CÚ‹xt
()

84 ifĞ
	m´İ”ty_¬g
 )

85 
asDELETE
(
´İ”ty_¬g
, 
asSEx´CÚ‹xt
);

87 
CË¬
()

89 
	mbc
.
CË¬AÎ
();

90 
	mty³
.
S‘Dummy
();

91 ifĞ
	m´İ”ty_¬g
 )

92 
asDELETE
(
´İ”ty_¬g
, 
asSEx´CÚ‹xt
);

93 
	m´İ”ty_¬g
 = 0;

94 
	mdeã¼edP¬ams
.
S‘L’gth
(0);

95 
	mex´Node
 = 0;

96 
	mÜigEx´
 = 0;

97 
	m´İ”ty_g‘
 = 0;

98 
	m´İ”ty_£t
 = 0;

99 
	m´İ”ty_cÚ¡
 = 
çl£
;

100 
	m´İ”ty_hªdË
 = 
çl£
;

101 
	m´İ”ty_»f
 = 
çl£
;

104 
asCBy‹Code
 
	mbc
;

105 
asCTy³Info
 
	mty³
;

106 
	m´İ”ty_g‘
;

107 
	m´İ”ty_£t
;

108 
boŞ
 
	m´İ”ty_cÚ¡
;

109 
boŞ
 
	m´İ”ty_hªdË
;

110 
boŞ
 
	m´İ”ty_»f
;

111 
asSEx´CÚ‹xt
 *
	m´İ”ty_¬g
;

112 
	masCA¼ay
<
	masSDeã¼edP¬am
> 
	mdeã¼edP¬ams
;

113 
asCSütNode
 *
	mex´Node
;

114 
asSEx´CÚ‹xt
 *
	mÜigEx´
;

117 
	eEIm¶ic™CÚv


119 
	masIC_IMPLICIT_CONV
,

120 
	masIC_EXPLICIT_REF_CAST
,

121 
	masIC_EXPLICIT_VAL_CAST


124 
	eECÚvCo¡


126 
	masCC_NO_CONV
 = 0,

127 
	masCC_CONST_CONV
 = 1,

128 
	masCC_PRIMITIVE_SIZE_CONV
 = 2,

129 
	masCC_SIGNED_CONV
 = 3,

130 
	masCC_INT_FLOAT_CONV
 = 4,

131 
	masCC_REF_CONV
 = 5,

132 
	masCC_OBJ_TO_PRIMITIVE_CONV
 = 6,

133 
	masCC_TO_OBJECT_CONV
 = 7,

134 
	masCC_VARIABLE_CONV
 = 8

137 şas 
	casCComp”


139 
	mpublic
:

140 
asCComp”
(
asCSütEngše
 *
’gše
);

141 ~
asCComp”
();

143 
CompeFunùiÚ
(
asCBud”
 *
bud”
, 
asCSütCode
 *
süt
, 
sEx¶ic™SigÇtu»
 *
sigÇtu»
, 
asCSütNode
 *
func
, 
asCSütFunùiÚ
 *
outFunc
);

144 
CompeDeçuÉCÚ¡ruùÜ
(
asCBud”
 *
bud”
, 
asCSütCode
 *
süt
, 
asCSütNode
 *
node
, 
asCSütFunùiÚ
 *
outFunc
);

145 
CompeFaùÜy
(
asCBud”
 *
bud”
, 
asCSütCode
 *
süt
, 
asCSütFunùiÚ
 *
outFunc
);

146 
CompeGlob®V¬ŸbË
(
asCBud”
 *
bud”
, 
asCSütCode
 *
süt
, 
asCSütNode
 *
ex´
, 
sGlob®V¬ŸbËDesütiÚ
 *
gv¬
, 
asCSütFunùiÚ
 *
outFunc
);

148 
	m´Ùeùed
:

149 
ä›nd
 
şass
 
asCBud”
;

151 
Re£t
(
asCBud”
 *
bud”
, 
asCSütCode
 *
süt
, 
asCSütFunùiÚ
 *
outFunc
);

154 
CompeS‹m’tBlock
(
asCSütNode
 *
block
, 
boŞ
 
ownV¬ŸbËScİe
, boŞ *
hasR‘uº
, 
asCBy‹Code
 *
bc
);

155 
CompeDeş¬©iÚ
(
asCSütNode
 *
deş
, 
asCBy‹Code
 *
bc
);

156 
CompeS‹m’t
(
asCSütNode
 *
¡©em’t
, 
boŞ
 *
hasR‘uº
, 
asCBy‹Code
 *
bc
);

157 
CompeIfS‹m’t
(
asCSütNode
 *
node
, 
boŞ
 *
hasR‘uº
, 
asCBy‹Code
 *
bc
);

158 
CompeSw™chS‹m’t
(
asCSütNode
 *
node
, 
boŞ
 *
hasR‘uº
, 
asCBy‹Code
 *
bc
);

159 
CompeCa£
(
asCSütNode
 *
node
, 
asCBy‹Code
 *
bc
);

160 
CompeFÜS‹m’t
(
asCSütNode
 *
node
, 
asCBy‹Code
 *
bc
);

161 
CompeWheS‹m’t
(
asCSütNode
 *
node
, 
asCBy‹Code
 *
bc
);

162 
CompeDoWheS‹m’t
(
asCSütNode
 *
node
, 
asCBy‹Code
 *
bc
);

163 
CompeB»akS‹m’t
(
asCSütNode
 *
node
, 
asCBy‹Code
 *
bc
);

164 
CompeCÚtšueS‹m’t
(
asCSütNode
 *
node
, 
asCBy‹Code
 *
bc
);

165 
CompeR‘uºS‹m’t
(
asCSütNode
 *
node
, 
asCBy‹Code
 *
bc
);

166 
CompeEx´essiÚS‹m’t
(
asCSütNode
 *
node
, 
asCBy‹Code
 *
bc
);

169 
CompeAssignm’t
(
asCSütNode
 *
ex´
, 
asSEx´CÚ‹xt
 *
out
);

170 
CompeCÚd™iÚ
(
asCSütNode
 *
ex´
, 
asSEx´CÚ‹xt
 *
out
);

171 
CompeEx´essiÚ
(
asCSütNode
 *
ex´
, 
asSEx´CÚ‹xt
 *
out
);

172 
CompePo¡FixEx´essiÚ
(
asCA¼ay
<
asCSütNode
 *> *
po¡fix
, 
asSEx´CÚ‹xt
 *
out
);

173 
CompeEx´essiÚT”m
(
asCSütNode
 *
node
, 
asSEx´CÚ‹xt
 *
out
);

174 
CompeEx´essiÚP»Op
(
asCSütNode
 *
node
, 
asSEx´CÚ‹xt
 *
out
);

175 
CompeEx´essiÚPo¡Op
(
asCSütNode
 *
node
, 
asSEx´CÚ‹xt
 *
out
);

176 
CompeEx´essiÚV®ue
(
asCSütNode
 *
node
, 
asSEx´CÚ‹xt
 *
out
);

177 
CompeFunùiÚC®l
(
asCSütNode
 *
node
, 
asSEx´CÚ‹xt
 *
out
, 
asCObjeùTy³
 *
objeùTy³
, 
boŞ
 
objIsCÚ¡
, cÚ¡ 
asCSŒšg
 &
scİe
 = "");

178 
CompeCÚ¡ruùC®l
(
asCSütNode
 *
node
, 
asSEx´CÚ‹xt
 *
out
);

179 
CompeCÚv”siÚ
(
asCSütNode
 *
node
, 
asSEx´CÚ‹xt
 *
out
);

180 
CompeO³¿tÜ
(
asCSütNode
 *
node
, 
asSEx´CÚ‹xt
 *
l
,‡sSEx´CÚ‹xˆ*
r
,‡sSEx´CÚ‹xˆ*
out
);

181 
CompeO³¿tÜOnHªdËs
(
asCSütNode
 *
node
, 
asSEx´CÚ‹xt
 *
l
,‡sSEx´CÚ‹xˆ*
r
,‡sSEx´CÚ‹xˆ*
out
);

182 
CompeM©hO³¿tÜ
(
asCSütNode
 *
node
, 
asSEx´CÚ‹xt
 *
l
,‡sSEx´CÚ‹xˆ*
r
,‡sSEx´CÚ‹xˆ*
out
);

183 
CompeB™wi£O³¿tÜ
(
asCSütNode
 *
node
, 
asSEx´CÚ‹xt
 *
l
,‡sSEx´CÚ‹xˆ*
r
,‡sSEx´CÚ‹xˆ*
out
);

184 
CompeCom·risÚO³¿tÜ
(
asCSütNode
 *
node
, 
asSEx´CÚ‹xt
 *
l
,‡sSEx´CÚ‹xˆ*
r
,‡sSEx´CÚ‹xˆ*
out
);

185 
CompeBoŞ—nO³¿tÜ
(
asCSütNode
 *
node
, 
asSEx´CÚ‹xt
 *
l
,‡sSEx´CÚ‹xˆ*
r
,‡sSEx´CÚ‹xˆ*
out
);

186 
boŞ
 
CompeOv”lßdedDu®O³¿tÜ
(
asCSütNode
 *
node
, 
asSEx´CÚ‹xt
 *
l
,‡sSEx´CÚ‹xˆ*
r
,‡sSEx´CÚ‹xˆ*
out
);

187 
CompeOv”lßdedDu®O³¿tÜ2
(
asCSütNode
 *
node
, cÚ¡ *
m‘hodName
, 
asSEx´CÚ‹xt
 *
l
,‡sSEx´CÚ‹xˆ*
r
,‡sSEx´CÚ‹xˆ*
out
, 
boŞ
 
¥ecificR‘uº
 = 
çl£
, cÚ¡ 
asCD©aTy³
 &
»tuºTy³
 =‡sCD©aTy³::
C»©ePrim™ive
(
‰Void
, false));

189 
CompeIn™Li¡
(
asCTy³Info
 *
v¬
, 
asCSütNode
 *
node
, 
asCBy‹Code
 *
bc
);

191 
C®lDeçuÉCÚ¡ruùÜ
(
asCD©aTy³
 &
ty³
, 
off£t
, 
boŞ
 
isObjeùOnH—p
, 
asCBy‹Code
 *
bc
, 
asCSütNode
 *
node
, boŞ 
isGlob®V¬
 = 
çl£
, boŞ 
deãrDe¡
 = false);

192 
C®lCİyCÚ¡ruùÜ
(
asCD©aTy³
 &
ty³
, 
off£t
, 
boŞ
 
isObjeùOnH—p
, 
asCBy‹Code
 *
bc
, 
asSEx´CÚ‹xt
 *
¬g
, 
asCSütNode
 *
node
, boŞ 
isGlob®V¬
 = 
çl£
, boŞ 
d”efDe¡š©iÚ
 = false);

193 
C®lDe¡ruùÜ
(
asCD©aTy³
 &
ty³
, 
off£t
, 
boŞ
 
isObjeùOnH—p
, 
asCBy‹Code
 *
bc
);

194 
CompeArgum’tLi¡
(
asCSütNode
 *
node
, 
asCA¼ay
<
asSEx´CÚ‹xt
 *> &
¬gs
);

195 
CompeDeçuÉArgs
(
asCSütNode
 *
node
, 
asCA¼ay
<
asSEx´CÚ‹xt
*> &
¬gs
, 
asCSütFunùiÚ
 *
func
);

196 
asUINT
 
M©chFunùiÚs
(
asCA¼ay
<> &
funcs
,‡sCA¼ay<
asSEx´CÚ‹xt
*> &
¬gs
, 
asCSütNode
 *
node
, cÚ¡ *
Çme
, 
asCObjeùTy³
 *
objeùTy³
 = 
NULL
, 
boŞ
 
isCÚ¡M‘hod
 = 
çl£
, boŞ 
s’t
 = f®£, boŞ 
®lowObjeùCÚ¡ruù
 = 
Œue
, cÚ¡ 
asCSŒšg
 &
scİe
 = "");

197 
CompeV¬ŸbËAcûss
(cÚ¡ 
asCSŒšg
 &
Çme
, cÚ¡‡sCSŒšg &
scİe
, 
asSEx´CÚ‹xt
 *
ùx
, 
asCSütNode
 *
”rNode
, 
boŞ
 
isO±iÚ®
 = 
çl£
, boŞ 
noFunùiÚ
 = f®£, 
asCObjeùTy³
 *
objTy³
 = 0);

200 
ProûssPrİ”tyG‘AcûssÜ
(
asSEx´CÚ‹xt
 *
ùx
, 
asCSütNode
 *
node
);

201 
ProûssPrİ”tyS‘AcûssÜ
(
asSEx´CÚ‹xt
 *
ùx
,‡sSEx´CÚ‹xˆ*
¬g
, 
asCSütNode
 *
node
);

202 
FšdPrİ”tyAcûssÜ
(cÚ¡ 
asCSŒšg
 &
Çme
, 
asSEx´CÚ‹xt
 *
ùx
, 
asCSütNode
 *
node
, 
boŞ
 
isThisAcûss
 = 
çl£
);

203 
FšdPrİ”tyAcûssÜ
(cÚ¡ 
asCSŒšg
 &
Çme
, 
asSEx´CÚ‹xt
 *
ùx
,‡sSEx´CÚ‹xˆ*
¬g
, 
asCSütNode
 *
node
, 
boŞ
 
isThisAcûss
 = 
çl£
);

204 
P»·»TempÜ¬yObjeù
(
asCSütNode
 *
node
, 
asSEx´CÚ‹xt
 *
ùx
, 
boŞ
 
fÜûOnH—p
 = 
çl£
);

205 
P»·»O³¿nd
(
asSEx´CÚ‹xt
 *
ùx
, 
asCSütNode
 *
node
);

206 
P»·»FÜAssignm’t
(
asCD©aTy³
 *
lv®ue
, 
asSEx´CÚ‹xt
 *
rv®ue
, 
asCSütNode
 *
node
, 
boŞ
 
toTempÜ¬y
,‡sSEx´CÚ‹xˆ*
lv®ueEx´
 = 0);

207 
P”fÜmAssignm’t
(
asCTy³Info
 *
lv®ue
,‡sCTy³InfØ*
rv®ue
, 
asCBy‹Code
 *
bc
, 
asCSütNode
 *
node
);

208 
boŞ
 
IsV¬ŸbËIn™Ÿlized
(
asCTy³Info
 *
ty³
, 
asCSütNode
 *
node
);

209 
D”eã»nû
(
asSEx´CÚ‹xt
 *
ùx
, 
boŞ
 
g’”©eCode
);

210 
boŞ
 
CompeRefCa¡
(
asSEx´CÚ‹xt
 *
ùx
, cÚ¡ 
asCD©aTy³
 &
to
, boŞ 
isEx¶ic™
, 
asCSütNode
 *
node
, boŞ 
g’”©eCode
 = 
Œue
);

211 
asUINT
 
M©chArgum’t
(
asCA¼ay
<> &
funcs
,‡sCA¼ay<> &
m©ches
, cÚ¡ 
asCTy³Info
 *
¬gTy³
, 
·¿mNum
, 
boŞ
 
®lowObjeùCÚ¡ruù
 = 
Œue
);

212 
P”fÜmFunùiÚC®l
(
funcId
, 
asSEx´CÚ‹xt
 *
out
, 
boŞ
 
isCÚ¡ruùÜ
 = 
çl£
, 
asCA¼ay
<asSEx´CÚ‹xt*> *
¬gs
 = 0, 
asCObjeùTy³
 *
objTy³FÜCÚ¡ruù
 = 0, boŞ 
u£V¬ŸbË
 = f®£, 
v¬Off£t
 = 0, 
funcPŒV¬
 = 0);

213 
MoveArgsToSck
(
funcId
, 
asCBy‹Code
 *
bc
, 
asCA¼ay
<
asSEx´CÚ‹xt
 *> &
¬gs
, 
boŞ
 
addOÃToOff£t
);

214 
MakeFunùiÚC®l
(
asSEx´CÚ‹xt
 *
ùx
, 
funcId
, 
asCObjeùTy³
 *
objeùTy³
, 
asCA¼ay
<asSEx´CÚ‹xt*> &
¬gs
, 
asCSütNode
 *
node
, 
boŞ
 
u£V¬ŸbË
 = 
çl£
, 
¡ackOff£t
 = 0, 
funcPŒV¬
 = 0);

215 
P»·»FunùiÚC®l
(
funcId
, 
asCBy‹Code
 *
bc
, 
asCA¼ay
<
asSEx´CÚ‹xt
 *> &
¬gs
);

216 
Aá”FunùiÚC®l
(
funcId
, 
asCA¼ay
<
asSEx´CÚ‹xt
*> &
¬gs
,‡sSEx´CÚ‹xˆ*
ùx
, 
boŞ
 
deãrAÎ
);

217 
ProûssDeã¼edP¬ams
(
asSEx´CÚ‹xt
 *
ùx
);

218 
P»·»Argum’t
(
asCD©aTy³
 *
·¿mTy³
, 
asSEx´CÚ‹xt
 *
ùx
, 
asCSütNode
 *
node
, 
boŞ
 
isFunùiÚ
 = 
çl£
, 
»fTy³
 = 0, boŞ 
isMakšgCİy
 = false);

219 
P»·»Argum’t2
(
asSEx´CÚ‹xt
 *
ùx
,‡sSEx´CÚ‹xˆ*
¬g
, 
asCD©aTy³
 *
·¿mTy³
, 
boŞ
 
isFunùiÚ
 = 
çl£
, 
»fTy³
 = 0, boŞ 
isMakšgCİy
 = false);

220 
boŞ
 
IsLV®ue
(
asCTy³Info
 &
ty³
);

221 
DoAssignm’t
(
asSEx´CÚ‹xt
 *
out
,‡sSEx´CÚ‹xˆ*
lùx
,‡sSEx´CÚ‹xˆ*
rùx
, 
asCSütNode
 *
Ëx´
,‡sCSütNod*
»x´
, 
İ
,‡sCSütNod*
İNode
);

222 
M”geEx´By‹code
(
asSEx´CÚ‹xt
 *
befÜe
,‡sSEx´CÚ‹xˆ*
aá”
);

223 
M”geEx´By‹codeAndTy³
(
asSEx´CÚ‹xt
 *
befÜe
,‡sSEx´CÚ‹xˆ*
aá”
);

224 
F‹rCÚ¡
(
asCA¼ay
<> &
funcs
, 
boŞ
 
»moveCÚ¡
 = 
Œue
);

225 
CÚv”tToV¬ŸbË
(
asSEx´CÚ‹xt
 *
ùx
);

226 
CÚv”tToV¬ŸbËNÙIn
(
asSEx´CÚ‹xt
 *
ùx
,‡sSEx´CÚ‹xˆ*
exşude
);

227 
CÚv”tToTempV¬ŸbË
(
asSEx´CÚ‹xt
 *
ùx
);

228 
CÚv”tToTempV¬ŸbËNÙIn
(
asSEx´CÚ‹xt
 *
ùx
,‡sSEx´CÚ‹xˆ*
exşude
);

229 
CÚv”tToReã»nû
(
asSEx´CÚ‹xt
 *
ùx
);

230 
PushV¬ŸbËOnSck
(
asSEx´CÚ‹xt
 *
ùx
, 
boŞ
 
asReã»nû
);

231 
De¡royV¬ŸbËs
(
asCBy‹Code
 *
bc
);

232 
asSNameS·û
 *
D‘”mšeNameS·û
(cÚ¡ 
asCSŒšg
 &
scİe
);

235 
asUINT
 
Im¶ic™CÚv”siÚ
(
asSEx´CÚ‹xt
 *
ùx
, cÚ¡ 
asCD©aTy³
 &
to
, 
asCSütNode
 *
node
, 
EIm¶ic™CÚv
 
cÚvTy³
, 
boŞ
 
g’”©eCode
 = 
Œue
, boŞ 
®lowObjeùCÚ¡ruù
 =rue);

236 
asUINT
 
Im¶ic™CÚvPrim™iveToPrim™ive
(
asSEx´CÚ‹xt
 *
ùx
, cÚ¡ 
asCD©aTy³
 &
to
, 
asCSütNode
 *
node
, 
EIm¶ic™CÚv
 
cÚvTy³
, 
boŞ
 
g’”©eCode
 = 
Œue
);

237 
asUINT
 
Im¶ic™CÚvObjeùToPrim™ive
(
asSEx´CÚ‹xt
 *
ùx
, cÚ¡ 
asCD©aTy³
 &
to
, 
asCSütNode
 *
node
, 
EIm¶ic™CÚv
 
cÚvTy³
, 
boŞ
 
g’”©eCode
 = 
Œue
);

238 
asUINT
 
Im¶ic™CÚvPrim™iveToObjeù
(
asSEx´CÚ‹xt
 *
ùx
, cÚ¡ 
asCD©aTy³
 &
to
, 
asCSütNode
 *
node
, 
EIm¶ic™CÚv
 
cÚvTy³
, 
boŞ
 
g’”©eCode
 = 
Œue
, boŞ 
®lowObjeùCÚ¡ruù
 =rue);

239 
asUINT
 
Im¶ic™CÚvObjeùToObjeù
(
asSEx´CÚ‹xt
 *
ùx
, cÚ¡ 
asCD©aTy³
 &
to
, 
asCSütNode
 *
node
, 
EIm¶ic™CÚv
 
cÚvTy³
, 
boŞ
 
g’”©eCode
 = 
Œue
, boŞ 
®lowObjeùCÚ¡ruù
 =rue);

240 
asUINT
 
Im¶ic™CÚvObjeùRef
(
asSEx´CÚ‹xt
 *
ùx
, cÚ¡ 
asCD©aTy³
 &
to
, 
asCSütNode
 *
node
, 
EIm¶ic™CÚv
 
cÚvTy³
, 
boŞ
 
g’”©eCode
);

241 
asUINT
 
Im¶ic™CÚvObjeùV®ue
(
asSEx´CÚ‹xt
 *
ùx
, cÚ¡ 
asCD©aTy³
 &
to
, 
asCSütNode
 *
node
, 
EIm¶ic™CÚv
 
cÚvTy³
, 
boŞ
 
g’”©eCode
);

242 
Im¶ic™CÚv”siÚCÚ¡ªt
(
asSEx´CÚ‹xt
 *
ùx
, cÚ¡ 
asCD©aTy³
 &
to
, 
asCSütNode
 *
node
, 
EIm¶ic™CÚv
 
cÚvTy³
);

244 
LšeIn¡r
(
asCBy‹Code
 *
bc
, 
size_t
 
pos
);

246 
asUINT
 
ProûssSŒšgCÚ¡ªt
(
asCSŒšg
 &
¡r
, 
asCSütNode
 *
node
, 
boŞ
 
´oûssEsÿ³Sequ’ûs
 = 
Œue
);

247 
ProûssH”edocSŒšgCÚ¡ªt
(
asCSŒšg
 &
¡r
, 
asCSütNode
 *
node
);

248 
G‘P»ûd’û
(
asCSütNode
 *
İ
);

249 
E¼Ü
(cÚ¡ *
msg
, 
asCSütNode
 *
node
);

250 
W¬nšg
(cÚ¡ *
msg
, 
asCSütNode
 *
node
);

251 
InfÜm©iÚ
(cÚ¡ *
msg
, 
asCSütNode
 *
node
);

252 
PrštM©chšgFuncs
(
asCA¼ay
<> &
funcs
, 
asCSütNode
 *
node
);

253 
AddV¬ŸbËScİe
(
boŞ
 
isB»akScİe
 = 
çl£
, boŞ 
isCÚtšueScİe
 = false);

254 
RemoveV¬ŸbËScİe
();

255 
Fš®izeFunùiÚ
();

257 
asCBy‹Code
 
	mby‹Code
;

259 
boŞ
 
	mhasCompeE¼Üs
;

261 
	mÃxtLab–
;

263 
asCV¬ŸbËScİe
 *
	mv¬ŸbËs
;

264 
asCBud”
 *
	mbud”
;

265 
asCSütEngše
 *
	m’gše
;

266 
asCSütCode
 *
	msüt
;

267 
asCSütFunùiÚ
 *
	moutFunc
;

269 
boŞ
 
	mm_isCÚ¡ruùÜ
;

270 
boŞ
 
	mm_isCÚ¡ruùÜC®Ëd
;

272 
	masCA¼ay
<> 
	mb»akLab–s
;

273 
	masCA¼ay
<> 
	mcÚtšueLab–s
;

275 
AÎoÿ‹V¬ŸbË
(cÚ¡ 
asCD©aTy³
 &
ty³
, 
boŞ
 
isTempÜ¬y
, boŞ 
fÜûOnH—p
 = 
çl£
);

276 
AÎoÿ‹V¬ŸbËNÙIn
(cÚ¡ 
asCD©aTy³
 &
ty³
, 
boŞ
 
isTempÜ¬y
, boŞ 
fÜûOnH—p
, 
asSEx´CÚ‹xt
 *
ùx
);

277 
G‘V¬ŸbËOff£t
(
v¬Index
);

278 
G‘V¬ŸbËSlÙ
(
v¬Off£t
);

279 
D—Îoÿ‹V¬ŸbË
(
pos
);

280 
R–—£TempÜ¬yV¬ŸbË
(
asCTy³Info
 &
t
, 
asCBy‹Code
 *
bc
);

281 
R–—£TempÜ¬yV¬ŸbË
(
off£t
, 
asCBy‹Code
 *
bc
);

282 
boŞ
 
IsV¬ŸbËOnH—p
(
off£t
);

284 
	masCA¼ay
<
	masCD©aTy³
> 
	mv¬ŸbËAÎoÿtiÚs
;

285 
	masCA¼ay
<
	mboŞ
> 
	mv¬ŸbËIsTempÜ¬y
;

286 
	masCA¼ay
<
	mboŞ
> 
	mv¬ŸbËIsOnH—p
;

287 
	masCA¼ay
<> 
	mä“V¬ŸbËs
;

288 
	masCA¼ay
<> 
	m‹mpV¬ŸbËs
;

289 
	masCA¼ay
<> 
	m»£rvedV¬ŸbËs
;

291 
boŞ
 
	misCompšgDeçuÉArg
;

292 
boŞ
 
	misProûssšgDeã¼edP¬ams
;

293 
	mnoCodeOuut
;

296 
	gEND_AS_NAMESPACE


	@../hdr/script/as_config.h

38 #iâdeà
AS_CONFIG_H


39 
	#AS_CONFIG_H


	)

330 
	#VALUE_OF_BOOLEAN_TRUE
 1

	)

331 
	#STDCALL_RETURN_SIMPLE_IN_MEMORY_MIN_SIZE
 0

	)

332 
	#CDECL_RETURN_SIMPLE_IN_MEMORY_MIN_SIZE
 0

	)

333 
	#THISCALL_RETURN_SIMPLE_IN_MEMORY_MIN_SIZE
 0

	)

334 
	#THISCALL_CALLEE_POPS_HIDDEN_RETURN_POINTER


	)

338 #ià
defšed
(
__BORLANDC__
)

339 #iâdeà
_Wšdows


342 #ià
defšed
(
_M_X64
)

346 
	#MULTI_BASE_OFFSET
(
x
è(*((
asDWORD
*)(&x)+1))

	)

347 
	#HAVE_VIRTUAL_BASE_OFFSET


	)

348 
	#VIRTUAL_BASE_OFFSET
(
x
è(*((
asDWORD
*)(&x)+2))

	)

349 
	#THISCALL_RETURN_SIMPLE_IN_MEMORY


	)

350 
	#CDECL_RETURN_SIMPLE_IN_MEMORY


	)

351 
	#STDCALL_RETURN_SIMPLE_IN_MEMORY


	)

352 #undeà
STDCALL_RETURN_SIMPLE_IN_MEMORY_MIN_SIZE


353 #undeà
CDECL_RETURN_SIMPLE_IN_MEMORY_MIN_SIZE


354 #undeà
THISCALL_RETURN_SIMPLE_IN_MEMORY_MIN_SIZE


355 
	#STDCALL_RETURN_SIMPLE_IN_MEMORY_MIN_SIZE
 2

	)

356 
	#CDECL_RETURN_SIMPLE_IN_MEMORY_MIN_SIZE
 2

	)

357 
	#THISCALL_RETURN_SIMPLE_IN_MEMORY_MIN_SIZE
 2

	)

359 
	#THISCALL_PASS_OBJECT_POINTER_ON_THE_STACK


	)

360 
	#COMPLEX_MASK
 (
asOBJ_APP_CLASS_CONSTRUCTOR
 | 
asOBJ_APP_CLASS_DESTRUCTOR
)

	)

361 
	#COMPLEX_RETURN_MASK
 (
asOBJ_APP_CLASS_CONSTRUCTOR
 | 
asOBJ_APP_CLASS_DESTRUCTOR
)

	)

362 
	#STDCALL
 
__¡dÿÎ


	)

363 
	#AS_SIZEOF_BOOL
 1

	)

364 
	#AS_WINDOWS_THREADS


	)

365 #undeà
THISCALL_CALLEE_POPS_HIDDEN_RETURN_POINTER


367 
	#AS_WIN


	)

368 
	#AS_X86


	)

369 
	#ASM_INTEL


	)

371 
	#asVSNPRINTF
(
a
, 
b
, 
c
, 
d
è
	`_v¢´štf
×, b, c, d)

	)

373 
	#fmodf
(
a
,
b
è
	`fmod
×,b)

	)

375 
	#UNREACHABLE_RETURN


	)

379 #ià
defšed
(
_MSC_VER
è&& !defšed(
__MWERKS__
)

380 #ifdeà
_M_X64


381 
	#MULTI_BASE_OFFSET
(
x
è(*((
asDWORD
*)(&x)+2))

	)

382 
	#VIRTUAL_BASE_OFFSET
(
x
è(*((
asDWORD
*)(&x)+4))

	)

384 
	#MULTI_BASE_OFFSET
(
x
è(*((
asDWORD
*)(&x)+1))

	)

385 
	#VIRTUAL_BASE_OFFSET
(
x
è(*((
asDWORD
*)(&x)+3))

	)

387 
	#HAVE_VIRTUAL_BASE_OFFSET


	)

388 
	#THISCALL_RETURN_SIMPLE_IN_MEMORY


	)

389 
	#THISCALL_PASS_OBJECT_POINTER_IN_ECX


	)

394 #ià
defšed
(
AS_MARMALADE
è|| defšed (
MARMALADE
)

395 #iâdeà
AS_MARMALADE


397 
	#AS_MARMALADE


	)

401 
	#asVSNPRINTF
(
a
, 
b
, 
c
, 
d
è
	`v¢´štf
×, b, c, d)

	)

402 
	#AS_POSIX_THREADS


	)

403 
	#AS_NO_ATOMIC


	)

405 #ià
_MSC_VER
 < 1500

406 
	#asVSNPRINTF
(
a
, 
b
, 
c
, 
d
è
	`_v¢´štf
×, b, c, d)

	)

408 
	#asVSNPRINTF
(
a
, 
b
, 
c
, 
d
è
	`v¢´štf_s
×, b, 
_TRUNCATE
, c, d)

	)

411 
	#AS_WINDOWS_THREADS


	)

414 
	#THISCALL_CALLEE_POPS_ARGUMENTS


	)

415 
	#STDCALL
 
__¡dÿÎ


	)

416 
	#AS_SIZEOF_BOOL
 1

	)

418 
	#ASM_INTEL


419 

	)

420 #ià
defšed
(
WIN32
è|| defšed(
_WIN32
è|| defšed(
_WIN64
)

421 
	#AS_WIN


	)

424 #ià
_XBOX_VER
 >= 200

426 
	#AS_XBOX360


	)

427 
	#AS_XENON


	)

428 
	#AS_BIG_ENDIAN


	)

430 #ià
defšed
(
_XBOX
è|| (defšed(
_M_IX86
è&& !defšed(
__LP64__
))

431 
	#AS_X86


	)

432 #–ià
defšed
(
_M_X64
)

433 
	#AS_X64_MSVC


	)

434 
	#AS_CALLEE_DESTROY_OBJ_BY_VAL


	)

435 
	#AS_LARGE_OBJS_PASSED_BY_REF


	)

436 
	#AS_LARGE_OBJ_MIN_SIZE
 3

	)

437 
	#COMPLEX_OBJS_PASSED_BY_REF


	)

438 
	#COMPLEX_RETURN_MASK
 (
asOBJ_APP_CLASS_CONSTRUCTOR
 | 
asOBJ_APP_CLASS_DESTRUCTOR
 | 
asOBJ_APP_CLASS_ASSIGNMENT
 | 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
)

	)

439 
	#COMPLEX_MASK
 (
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
)

	)

443 #ifdeà
_ARM_


444 
	#AS_ALIGN


	)

445 
	#AS_ARM


	)

446 
	#AS_CALLEE_DESTROY_OBJ_BY_VAL


	)

447 
	#CDECL_RETURN_SIMPLE_IN_MEMORY


	)

448 
	#STDCALL_RETURN_SIMPLE_IN_MEMORY


	)

449 
	#COMPLEX_OBJS_PASSED_BY_REF


	)

450 
	#COMPLEX_MASK
 
asOBJ_APP_CLASS_ASSIGNMENT


	)

451 
	#COMPLEX_RETURN_MASK
 
asOBJ_APP_CLASS_ASSIGNMENT


	)

454 #iâdeà
COMPLEX_MASK


455 
	#COMPLEX_MASK
 (
asOBJ_APP_CLASS_CONSTRUCTOR
 | 
asOBJ_APP_CLASS_DESTRUCTOR
 | 
asOBJ_APP_CLASS_ASSIGNMENT
)

	)

458 #iâdeà
COMPLEX_RETURN_MASK


459 
	#COMPLEX_RETURN_MASK
 (
asOBJ_APP_CLASS_CONSTRUCTOR
 | 
asOBJ_APP_CLASS_DESTRUCTOR
 | 
asOBJ_APP_CLASS_ASSIGNMENT
)

	)

462 
	#UNREACHABLE_RETURN


	)

466 #ià
defšed
(
__MWERKS__
è&& !defšed(
EPPC
)

467 
	#MULTI_BASE_OFFSET
(
x
è(*((
asDWORD
*)(&x)+1))

	)

468 
	#HAVE_VIRTUAL_BASE_OFFSET


	)

469 
	#VIRTUAL_BASE_OFFSET
(
x
è(*((
asDWORD
*)(&x)+3))

	)

470 
	#THISCALL_RETURN_SIMPLE_IN_MEMORY


	)

471 
	#THISCALL_PASS_OBJECT_POINTER_IN_ECX


	)

472 
	#asVSNPRINTF
(
a
, 
b
, 
c
, 
d
è
	`_v¢´štf
×, b, c, d)

	)

473 
	#THISCALL_CALLEE_POPS_ARGUMENTS


	)

474 
	#COMPLEX_MASK
 (
asOBJ_APP_CLASS_CONSTRUCTOR
 | 
asOBJ_APP_CLASS_DESTRUCTOR
 | 
asOBJ_APP_CLASS_ASSIGNMENT
)

	)

475 
	#COMPLEX_RETURN_MASK
 (
asOBJ_APP_CLASS_CONSTRUCTOR
 | 
asOBJ_APP_CLASS_DESTRUCTOR
 | 
asOBJ_APP_CLASS_ASSIGNMENT
)

	)

476 
	#AS_SIZEOF_BOOL
 1

	)

477 
	#AS_WINDOWS_THREADS


	)

478 
	#STDCALL
 
__¡dÿÎ


	)

481 #ià
defšed
(
_M_IX86
è&& !defšed(
__LP64__
)

482 
	#AS_X86


	)

483 
	#ASM_INTEL


485 

	)

486 
	#UNREACHABLE_RETURN


	)

490 #ià
defšed
(
__SNC__
è|| defšed(
SNSYS
)

491 
	#GNU_STYLE_VIRTUAL_METHOD


	)

492 
	#MULTI_BASE_OFFSET
(
x
è(*((
asDWORD
*)(&x)+1))

	)

493 
	#CALLEE_POPS_HIDDEN_RETURN_POINTER


	)

494 
	#COMPLEX_OBJS_PASSED_BY_REF


	)

495 
	#ASM_AT_N_T


496 
	#COMPLEX_MASK
 (
asOBJ_APP_CLASS_DESTRUCTOR
)

	)

497 
	#COMPLEX_RETURN_MASK
 (
asOBJ_APP_CLASS_DESTRUCTOR
)

	)

498 
	#AS_SIZEOF_BOOL
 1

	)

499 
	#asVSNPRINTF
(
a
, 
b
, 
c
, 
d
è
	`v¢´štf
×, b, c, d)

	)

504 
	#STDCALL


	)

507 #ifdeà
__lšux__


508 
	#THISCALL_RETURN_SIMPLE_IN_MEMORY


	)

509 
	#CDECL_RETURN_SIMPLE_IN_MEMORY


	)

510 
	#STDCALL_RETURN_SIMPLE_IN_MEMORY


	)

514 #ià
defšed
(
i386
è&& !defšed(
__LP64__
)

515 
	#AS_X86


	)

517 #–ià(
defšed
(
__PPC__
è|| defšed(
__µc__
)è&& defšed(
__PPU__
)

519 
	#AS_PS3


	)

520 
	#AS_PPC_64


	)

522 #–ià
defšed
(
__p¥__
)

523 
	#AS_NO_MEMORY_H


	)

524 
	#AS_MIPS


	)

525 
	#AS_PSP


	)

528 
	#UNREACHABLE_RETURN


	)

532 #ià(
defšed
(
__GNUC__
è&& !defšed(
__SNC__
)è|| defšed(
EPPC
è|| defšed(
__CYGWIN__
)

533 
	#GNU_STYLE_VIRTUAL_METHOD


	)

534 #ià!
defšed
Ğ
__amd64__
 )

535 
	#MULTI_BASE_OFFSET
(
x
è(*((
asDWORD
*)(&x)+1))

	)

537 
	#MULTI_BASE_OFFSET
(
x
è(*((
asQWORD
*)(&x)+1))

	)

539 
	#asVSNPRINTF
(
a
, 
b
, 
c
, 
d
è
	`v¢´štf
×, b, c, d)

	)

540 
	#CALLEE_POPS_HIDDEN_RETURN_POINTER


	)

541 
	#COMPLEX_OBJS_PASSED_BY_REF


	)

542 
	#COMPLEX_MASK
 (
asOBJ_APP_CLASS_DESTRUCTOR
)

	)

543 
	#COMPLEX_RETURN_MASK
 (
asOBJ_APP_CLASS_DESTRUCTOR
)

	)

544 
	#AS_NO_MEMORY_H


	)

545 
	#AS_SIZEOF_BOOL
 1

	)

546 
	#STDCALL
 
	`__©Œibu‹__
((
¡dÿÎ
))

	)

547 
	#ASM_AT_N_T


	)

550 #ifdeà
__APPLE__


552 
	~<T¬g‘CÚd™iÚ®s.h
>

555 #ifdeà
TARGET_OS_IPHONE


556 
	#AS_IPHONE


	)

558 
	#AS_MAC


	)

562 #undeà
AS_SIZEOF_BOOL


563 #ià
defšed
(
__µc__
)

564 
	#AS_SIZEOF_BOOL
 4

	)

566 #undeà
STDCALL


567 
	#STDCALL


	)

569 
	#AS_SIZEOF_BOOL
 1

	)

572 #ià
defšed
(
i386
è&& !defšed(
__LP64__
)

574 
	#AS_X86


	)

575 #undeà
COMPLEX_MASK


576 
	#COMPLEX_MASK
 (
asOBJ_APP_CLASS_DESTRUCTOR
 | 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
)

	)

577 #undeà
COMPLEX_RETURN_MASK


578 
	#COMPLEX_RETURN_MASK
 (
asOBJ_APP_CLASS_DESTRUCTOR
 | 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
)

	)

579 #–ià
defšed
(
__LP64__
è&& !defšed(
__µc__
è&& !defšed(
__PPC__
)

581 
	#AS_X64_GCC


	)

582 
	#HAS_128_BIT_PRIMITIVES


	)

583 
	#SPLIT_OBJS_BY_MEMBER_TYPES


	)

584 #undeà
COMPLEX_MASK


585 
	#COMPLEX_MASK
 (
asOBJ_APP_CLASS_DESTRUCTOR
 | 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
)

	)

586 #undeà
COMPLEX_RETURN_MASK


587 
	#COMPLEX_RETURN_MASK
 (
asOBJ_APP_CLASS_DESTRUCTOR
 | 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
)

	)

588 
	#AS_LARGE_OBJS_PASSED_BY_REF


	)

589 
	#AS_LARGE_OBJ_MIN_SIZE
 5

	)

591 #undeà
STDCALL


592 
	#STDCALL


	)

593 #–ià(
defšed
(
__µc__
è|| defšed(
__PPC__
)è&& !defšed(
__LP64__
)

595 
	#AS_PPC


	)

596 
	#THISCALL_RETURN_SIMPLE_IN_MEMORY


	)

597 
	#CDECL_RETURN_SIMPLE_IN_MEMORY


	)

598 
	#STDCALL_RETURN_SIMPLE_IN_MEMORY


	)

599 #undeà
COMPLEX_MASK


600 
	#COMPLEX_MASK
 (
asOBJ_APP_CLASS_DESTRUCTOR
 | 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
)

	)

601 #undeà
COMPLEX_RETURN_MASK


602 
	#COMPLEX_RETURN_MASK
 (
asOBJ_APP_CLASS_DESTRUCTOR
 | 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
)

	)

603 #–ià(
defšed
(
__µc__
è|| defšed(
__PPC__
)è&& defšed(
__LP64__
)

604 
	#AS_PPC_64


	)

605 #–ià(
defšed
(
_ARM_
è|| defšed(
__¬m__
))

607 
	#AS_ARM


	)

608 
	#AS_IPHONE


	)

609 
	#AS_ALIGN


	)

610 
	#AS_CALLEE_DESTROY_OBJ_BY_VAL


	)

611 
	#CDECL_RETURN_SIMPLE_IN_MEMORY


	)

612 
	#STDCALL_RETURN_SIMPLE_IN_MEMORY


	)

613 
	#THISCALL_RETURN_SIMPLE_IN_MEMORY


	)

615 #undeà
GNU_STYLE_VIRTUAL_METHOD


617 #undeà
THISCALL_RETURN_SIMPLE_IN_MEMORY_MIN_SIZE


618 #undeà
CDECL_RETURN_SIMPLE_IN_MEMORY_MIN_SIZE


619 #undeà
STDCALL_RETURN_SIMPLE_IN_MEMORY_MIN_SIZE


621 
	#THISCALL_RETURN_SIMPLE_IN_MEMORY_MIN_SIZE
 2

	)

622 
	#CDECL_RETURN_SIMPLE_IN_MEMORY_MIN_SIZE
 2

	)

623 
	#STDCALL_RETURN_SIMPLE_IN_MEMORY_MIN_SIZE
 2

	)

624 
	#COMPLEX_OBJS_PASSED_BY_REF


	)

625 #undeà
COMPLEX_MASK


626 
	#COMPLEX_MASK
 (
asOBJ_APP_CLASS_DESTRUCTOR
 | 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
)

	)

627 #undeà
COMPLEX_RETURN_MASK


628 
	#COMPLEX_RETURN_MASK
 (
asOBJ_APP_CLASS_DESTRUCTOR
 | 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
)

	)

631 #undeà
STDCALL


632 
	#STDCALL


	)

635 
	#AS_MAX_PORTABILITY


	)

637 
	#AS_POSIX_THREADS


	)

640 #–ià
defšed
(
WIN32
è|| defšed(
_WIN32
è|| defšed(
_WIN64
è|| defšed(
__CYGWIN__
)

646 #undeà
COMPLEX_MASK


647 
	#COMPLEX_MASK
 (
asOBJ_APP_CLASS_DESTRUCTOR
 | 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
)

	)

648 #undeà
COMPLEX_RETURN_MASK


649 
	#COMPLEX_RETURN_MASK
 (
asOBJ_APP_CLASS_DESTRUCTOR
 | 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
)

	)

651 #ià
defšed
(
i386
è&& !defšed(
__LP64__
)

653 
	#AS_X86


	)

654 #–ià
defšed
(
__x86_64__
)

655 
	#AS_X64_MINGW


	)

656 
	#AS_CALLEE_DESTROY_OBJ_BY_VAL


	)

657 
	#AS_LARGE_OBJS_PASSED_BY_REF


	)

658 
	#AS_LARGE_OBJ_MIN_SIZE
 3

	)

659 
	#COMPLEX_OBJS_PASSED_BY_REF


	)

661 
	#AS_MAX_PORTABILITY


	)

663 
	#AS_WIN


	)

664 
	#AS_WINDOWS_THREADS


	)

667 #–ià
defšed
(
__lšux__
è&& !defšed(
ANDROID
)

668 #ià
defšed
(
i386
è&& !defšed(
__LP64__
)

669 
	#THISCALL_RETURN_SIMPLE_IN_MEMORY


	)

670 
	#CDECL_RETURN_SIMPLE_IN_MEMORY


	)

671 
	#STDCALL_RETURN_SIMPLE_IN_MEMORY


	)

673 #undeà
COMPLEX_MASK


674 
	#COMPLEX_MASK
 (
asOBJ_APP_CLASS_DESTRUCTOR
 | 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
)

	)

675 #undeà
COMPLEX_RETURN_MASK


676 
	#COMPLEX_RETURN_MASK
 (
asOBJ_APP_CLASS_DESTRUCTOR
 | 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
)

	)

679 
	#AS_X86


	)

680 #–ià
defšed
(
__LP64__
)

681 
	#AS_X64_GCC


	)

682 
	#HAS_128_BIT_PRIMITIVES


	)

683 
	#SPLIT_OBJS_BY_MEMBER_TYPES


	)

684 #undeà
COMPLEX_MASK


685 
	#COMPLEX_MASK
 (
asOBJ_APP_CLASS_DESTRUCTOR
 | 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
)

	)

686 #undeà
COMPLEX_RETURN_MASK


687 
	#COMPLEX_RETURN_MASK
 (
asOBJ_APP_CLASS_DESTRUCTOR
 | 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
)

	)

688 
	#AS_LARGE_OBJS_PASSED_BY_REF


	)

689 
	#AS_LARGE_OBJ_MIN_SIZE
 5

	)

691 #undeà
STDCALL


692 
	#STDCALL


	)

693 #–ià
defšed
(
__ARMEL__
è|| defšed(
__¬m__
)

694 
	#AS_ARM


	)

695 
	#AS_ALIGN


	)

696 
	#AS_NO_ATOMIC


	)

697 
	#AS_CALLEE_DESTROY_OBJ_BY_VAL


	)

699 
	#CDECL_RETURN_SIMPLE_IN_MEMORY


	)

700 
	#STDCALL_RETURN_SIMPLE_IN_MEMORY


	)

701 
	#THISCALL_RETURN_SIMPLE_IN_MEMORY


	)

703 #undeà
THISCALL_RETURN_SIMPLE_IN_MEMORY_MIN_SIZE


704 #undeà
CDECL_RETURN_SIMPLE_IN_MEMORY_MIN_SIZE


705 #undeà
STDCALL_RETURN_SIMPLE_IN_MEMORY_MIN_SIZE


707 
	#THISCALL_RETURN_SIMPLE_IN_MEMORY_MIN_SIZE
 2

	)

708 
	#CDECL_RETURN_SIMPLE_IN_MEMORY_MIN_SIZE
 2

	)

709 
	#STDCALL_RETURN_SIMPLE_IN_MEMORY_MIN_SIZE
 2

	)

711 
	#AS_MAX_PORTABILITY


	)

713 
	#AS_LINUX


	)

714 
	#AS_POSIX_THREADS


	)

716 #ià!ĞĞ(
__GNUC__
 =ğ4è&& (
__GNUC_MINOR__
 >= 1) || __GNUC__ > 4) )

718 
	#AS_NO_ATOMIC


	)

722 #–ià
defšed
(
__F»eBSD__
è|| defšed(
__D¿gÚFly__
è|| defšed(
__O³nBSD__
)

723 
	#AS_BSD


	)

724 #ià
defšed
(
i386
è&& !defšed(
__LP64__
)

725 #undeà
COMPLEX_MASK


726 
	#COMPLEX_MASK
 (
asOBJ_APP_CLASS_DESTRUCTOR
 | 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
)

	)

727 #undeà
COMPLEX_RETURN_MASK


728 
	#COMPLEX_RETURN_MASK
 (
asOBJ_APP_CLASS_DESTRUCTOR
 | 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
)

	)

729 
	#AS_X86


	)

730 #–ià
defšed
(
__LP64__
)

731 
	#AS_X64_GCC


	)

732 
	#HAS_128_BIT_PRIMITIVES


	)

733 
	#SPLIT_OBJS_BY_MEMBER_TYPES


	)

734 #undeà
COMPLEX_MASK


735 
	#COMPLEX_MASK
 (
asOBJ_APP_CLASS_DESTRUCTOR
 | 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
)

	)

736 #undeà
COMPLEX_RETURN_MASK


737 
	#COMPLEX_RETURN_MASK
 (
asOBJ_APP_CLASS_DESTRUCTOR
 | 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
)

	)

738 
	#AS_LARGE_OBJS_PASSED_BY_REF


	)

739 
	#AS_LARGE_OBJ_MIN_SIZE
 5

	)

740 #undeà
STDCALL


741 
	#STDCALL


	)

743 
	#AS_MAX_PORTABILITY


	)

745 
	#AS_POSIX_THREADS


	)

746 #ià!ĞĞ(
__GNUC__
 =ğ4è&& (
__GNUC_MINOR__
 >= 1) || __GNUC__ > 4) )

748 
	#AS_NO_ATOMIC


	)

752 #–ià
defšed
(
__PSP__
è|| defšed(
__p¥__
è|| defšed(
_EE_
è|| defšed(
_PSP
è|| defšed(
_PS2
)

754 #ià(
defšed
(
_MIPS_ARCH
è|| defšed(
_ms
è|| defšed(
__MIPSEL__
)è&& !defšed(
__LP64__
)

755 
	#AS_MIPS


	)

757 
	#AS_MAX_PORTABILITY


	)

761 #–ià(
defšed
(
__PPC__
è|| defšed(
__µc__
)è&& defšed(
__PPU__
)

763 
	#AS_PS3


	)

764 
	#AS_PPC_64


	)

765 
	#SPLIT_OBJS_BY_MEMBER_TYPES


	)

766 
	#THISCALL_RETURN_SIMPLE_IN_MEMORY


	)

767 
	#CDECL_RETURN_SIMPLE_IN_MEMORY


	)

768 
	#STDCALL_RETURN_SIMPLE_IN_MEMORY


	)

770 #undeà
STDCALL


771 
	#STDCALL


	)

774 #–ià
__SH4_SINGLE_ONLY__


776 
	#AS_DC


	)

777 
	#AS_SH4


	)

780 #–ià
defšed
(
EPPC
)

781 
	#AS_WII


	)

782 
	#THISCALL_RETURN_SIMPLE_IN_MEMORY


	)

783 
	#CDECL_RETURN_SIMPLE_IN_MEMORY


	)

784 
	#STDCALL_RETURN_SIMPLE_IN_MEMORY


	)

785 #undeà
STDCALL


786 
	#STDCALL


	)

789 #–ià
defšed
(
ANDROID
)

790 
	#AS_ANDROID


	)

791 
	#AS_NO_ATOMIC


	)

793 
	#CDECL_RETURN_SIMPLE_IN_MEMORY


	)

794 
	#STDCALL_RETURN_SIMPLE_IN_MEMORY


	)

795 
	#THISCALL_RETURN_SIMPLE_IN_MEMORY


	)

797 #undeà
THISCALL_RETURN_SIMPLE_IN_MEMORY_MIN_SIZE


798 #undeà
CDECL_RETURN_SIMPLE_IN_MEMORY_MIN_SIZE


799 #undeà
STDCALL_RETURN_SIMPLE_IN_MEMORY_MIN_SIZE


801 
	#THISCALL_RETURN_SIMPLE_IN_MEMORY_MIN_SIZE
 2

	)

802 
	#CDECL_RETURN_SIMPLE_IN_MEMORY_MIN_SIZE
 2

	)

803 
	#STDCALL_RETURN_SIMPLE_IN_MEMORY_MIN_SIZE
 2

	)

805 #ià(
defšed
(
_ARM_
è|| defšed(
__¬m__
))

807 #undeà
STDCALL


808 
	#STDCALL


	)

810 #undeà
GNU_STYLE_VIRTUAL_METHOD


812 #undeà
COMPLEX_MASK


813 
	#COMPLEX_MASK
 (
asOBJ_APP_CLASS_DESTRUCTOR
 | 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
)

	)

814 #undeà
COMPLEX_RETURN_MASK


815 
	#COMPLEX_RETURN_MASK
 (
asOBJ_APP_CLASS_DESTRUCTOR
 | 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
)

	)

817 
	#AS_ARM


	)

818 
	#AS_CALLEE_DESTROY_OBJ_BY_VAL


	)

819 
	#AS_ALIGN


	)

823 #–ià
__HAIKU__


824 
	#AS_HAIKU


	)

828 #ià
defšed
(
i386
è&& !defšed(
__LP64__
)

829 
	#AS_X86


	)

830 
	#THISCALL_RETURN_SIMPLE_IN_MEMORY


	)

831 
	#CDECL_RETURN_SIMPLE_IN_MEMORY


	)

832 
	#STDCALL_RETURN_SIMPLE_IN_MEMORY


	)

834 
	#AS_MAX_PORTABILITY


	)

837 
	#AS_POSIX_THREADS


	)

838 #ià!ĞĞ(
__GNUC__
 =ğ4è&& (
__GNUC_MINOR__
 >= 1) || __GNUC__ > 4) )

840 
	#AS_NO_ATOMIC


	)

844 #–ià
defšed
(
__sun
)

845 #ià
defšed
(
__i386__
è&& !defšed(
__LP64__
)

846 
	#THISCALL_RETURN_SIMPLE_IN_MEMORY


	)

847 
	#CDECL_RETURN_SIMPLE_IN_MEMORY


	)

848 
	#STDCALL_RETURN_SIMPLE_IN_MEMORY


	)

851 
	#AS_X86


	)

852 #–ià
defšed
(
__LP64__
)

853 
	#AS_X64_GCC


	)

854 
	#HAS_128_BIT_PRIMITIVES


	)

855 
	#SPLIT_OBJS_BY_MEMBER_TYPES


	)

857 #undeà
STDCALL


858 
	#STDCALL


	)

860 
	#AS_MAX_PORTABILITY


	)

862 
	#AS_ILLUMOS


	)

863 
	#AS_POSIX_THREADS


	)

865 #ià!ĞĞ(
__GNUC__
 =ğ4è&& (
__GNUC_MINOR__
 >= 1) || __GNUC__ > 4) )

867 
	#AS_NO_ATOMIC


	)

871 
	#UNREACHABLE_RETURN


	)

880 #ià
defšed
(
__i386__
è|| defšed(
_M_IX86
)

885 #ià
defšed
(
_MIPS_ARCH
è|| defšed(
_ms
è|| defšed(
__MIPSEL__
è|| defšed(
__PSP__
è|| defšed(
__p¥__
è|| defšed(
_EE_
è|| defšed(
_PSP
è|| defšed(
_PS2
)

886 
	#AS_ALIGN


887 
	#AS_USE_DOUBLE_AS_FLOAT


889 

	)

891 #ià
defšed
(
__PPC__
è|| defšed(
__µc__
è|| defšed(
_PPC_
è|| defšed(
EPPC
)

892 
	#AS_BIG_ENDIAN


	)

895 #ià
defšed
(
_GC
)

896 
	#AS_ALIGN


	)

897 
	#AS_USE_DOUBLE_AS_FLOAT


	)

900 #ià(
_XBOX_VER
 >= 200)

901 
	#AS_ALIGN


	)

904 #ià
defšed
(
__PPU__
)

905 
	#AS_ALIGN


	)

908 #ià
defšed
(
EPPC
)

909 
	#AS_ALIGN


	)

914 #ifdeà
__SH4_SINGLE_ONLY__


915 
	#AS_ALIGN


916 
	#AS_USE_DOUBLE_AS_FLOAT


918 

	)

921 #ià(!
defšed
(
AS_X86
è&& !defšed(
AS_SH4
è&& !defšed(
AS_MIPS
è&& !defšed(
AS_PPC
è&& !defšed(
AS_PPC_64
è&& !defšed(
AS_XENON
è&& !defšed(
AS_X64_GCC
è&& !defšed(
AS_X64_MSVC
è&& !defšed(
AS_ARM
è&& !defšed(
AS_X64_MINGW
))

922 #iâdeà
AS_MAX_PORTABILITY


923 
	#AS_MAX_PORTABILITY


	)

930 #ià!
defšed
(
AS_POSIX_THREADS
è&& !defšed(
AS_WINDOWS_THREADS
)

931 
	#AS_NO_THREADS


	)

936 #ià
defšed
(
ANDROID
)

937 #ià
defšed
(
AS_DEBUG
)

938 
	~<ªdroid/log.h
>

939 
	~<¡dlib.h
>

940 
	#asASSERT
(
x
è\

	)

942 ià(!(
	gx
)) { \

943 
__ªdroid_log_´št
(
ANDROID_LOG_ERROR
, "Ang–Süt", "As£¹ faed‡ˆ%s:%d - %s", 
__FILE__
, 
__LINE__
, #x); \

944 
ex™
(1); \

948 
	#asASSERT
(
x
)

	)

951 
	~<as£¹.h
>

952 
	#asASSERT
(
x
è
	`as£¹
(x)

	)

961 #ifdeà
AS_ALIGN


962 
	#ALIGN
(
b
è(((b)+3)&(~3))

	)

964 
	#ALIGN
(
b
è(b)

	)

967 
	#ARG_W
(
b
è((
asWORD
*)&b)

	)

968 
	#ARG_DW
(
b
è((
asDWORD
*)&b)

	)

969 
	#ARG_QW
(
b
è((
asQWORD
*)&b)

	)

970 
	#ARG_PTR
(
b
è((
asPWORD
*)&b)

	)

971 
	#BCARG_W
(
b
è((
asWORD
*)&(b)[1])

	)

972 
	#BCARG_DW
(
b
è((
asDWORD
*)&(b)[1])

	)

973 
	#BCARG_QW
(
b
è((
asQWORD
*)&(b)[1])

	)

974 
	#BCARG_PTR
(
b
è((
asPWORD
*)&(b)[1])

	)

978 
	#UNUSED_VAR
(
x
è(x)=(x)

	)

980 
	~"ªg–süt.h
"

981 
	~"as_memÜy.h
"

983 #ifdeà
AS_USE_NAMESPACE


984 
usšg
 
Çme¥aû
 
Ang–Süt
;

	@../hdr/script/as_configgroup.h

40 #iâdeà
AS_CONFIGGROUP_H


41 
	#AS_CONFIGGROUP_H


	)

43 
	~"as_cÚfig.h
"

44 
	~"as_¡ršg.h
"

45 
	~"as_¬¿y.h
"

46 
	~"as_objeùty³.h
"

48 
BEGIN_AS_NAMESPACE


50 şas 
	casCCÚfigGroup


52 
	mpublic
:

53 
asCCÚfigGroup
();

54 ~
asCCÚfigGroup
();

57 
AddRef
();

58 
R–—£
();

60 
asCObjeùTy³
 *
FšdTy³
(cÚ¡ *
obj
);

61 
RefCÚfigGroup
(
asCCÚfigGroup
 *
group
);

63 
boŞ
 
HasLiveObjeùs
();

64 
RemoveCÚfigu¿tiÚ
(
asCSütEngše
 *
’gše
, 
boŞ
 
nÙU£d
 = 
çl£
);

66 #ifdeà
AS_DEBUG


67 
V®id©eNoU§ge
(
asCSütEngše
 *
’gše
, 
asCObjeùTy³
 *
ty³
);

70 
asCSŒšg
 
	mgroupName
;

71 
	m»fCouÁ
;

73 
	masCA¼ay
<
	masCObjeùTy³
*> 
	mobjTy³s
;

74 
	masCA¼ay
<
	masCSütFunùiÚ
*> 
	msütFunùiÚs
;

75 
	masCA¼ay
<
	masCGlob®Prİ”ty
*> 
	mglob®Prİs
;

76 
	masCA¼ay
<
	masCCÚfigGroup
*> 
	m»ã»nûdCÚfigGroups
;

77 
	masCA¼ay
<
	masCSütFunùiÚ
*> 
	mfuncDefs
;

80 
	gEND_AS_NAMESPACE


	@../hdr/script/as_context.h

39 #iâdeà
AS_CONTEXT_H


40 
	#AS_CONTEXT_H


	)

42 
	~"as_cÚfig.h
"

43 
	~"as_©omic.h
"

44 
	~"as_¬¿y.h
"

45 
	~"as_¡ršg.h
"

46 
	~"as_objeùty³.h
"

47 
	~"as_ÿÎfunc.h
"

49 
BEGIN_AS_NAMESPACE


51 
şass
 
	gasCSütFunùiÚ
;

52 
şass
 
	gasCSütEngše
;

54 şas 
	casCCÚ‹xt
 : 
public
 
asISütCÚ‹xt


56 
public
:

58 
	$AddRef
() const;

59 
	$R–—£
() const;

62 
asISütEngše
 *
	$G‘Engše
() const;

65 
	`P»·»
(
asISütFunùiÚ
 *
func
);

66 #ifdeà
AS_DEPRECATED


68 
	`P»·»
(
funùiÚId
);

70 
	`UÅ»·»
();

71 
	`Execu‹
();

72 
	`AbÜt
();

73 
	`Su¥’d
();

74 
asECÚ‹xtS‹
 
	$G‘S‹
() const;

75 
	`PushS‹
();

76 
	`PİS‹
();

77 
boŞ
 
	$IsNe¡ed
(
asUINT
 *
Ã¡CouÁ
 = 0) const;

80 
	`S‘Objeù
(*
obj
);

83 
	`S‘ArgBy‹
(
asUINT
 
¬g
, 
asBYTE
 
v®ue
);

84 
	`S‘ArgWÜd
(
asUINT
 
¬g
, 
asWORD
 
v®ue
);

85 
	`S‘ArgDWÜd
(
asUINT
 
¬g
, 
asDWORD
 
v®ue
);

86 
	`S‘ArgQWÜd
(
asUINT
 
¬g
, 
asQWORD
 
v®ue
);

87 
	`S‘ArgFlßt
(
asUINT
 
¬g
, 
v®ue
);

88 
	`S‘ArgDoubË
(
asUINT
 
¬g
, 
v®ue
);

89 
	`S‘ArgAdd»ss
(
asUINT
 
¬g
, *
addr
);

90 
	`S‘ArgObjeù
(
asUINT
 
¬g
, *
obj
);

91 *
	`G‘Add»ssOfArg
(
asUINT
 
¬g
);

94 
asBYTE
 
	`G‘R‘uºBy‹
();

95 
asWORD
 
	`G‘R‘uºWÜd
();

96 
asDWORD
 
	`G‘R‘uºDWÜd
();

97 
asQWORD
 
	`G‘R‘uºQWÜd
();

98 
	`G‘R‘uºFlßt
();

99 
	`G‘R‘uºDoubË
();

100 *
	`G‘R‘uºAdd»ss
();

101 *
	`G‘R‘uºObjeù
();

102 *
	`G‘Add»ssOfR‘uºV®ue
();

105 
	`S‘Exû±iÚ
(cÚ¡ *
desü
);

106 
	`G‘Exû±iÚLšeNumb”
(*
cŞumn
, cÚ¡ **
£ùiÚName
);

107 
asISütFunùiÚ
 *
	`G‘Exû±iÚFunùiÚ
();

108 cÚ¡ * 
	`G‘Exû±iÚSŒšg
();

109 
	`S‘Exû±iÚC®lback
(
asSFuncPŒ
 
ÿÎback
, *
obj
, 
ÿÎCÚv
);

110 
	`CË¬Exû±iÚC®lback
();

113 
	`S‘LšeC®lback
(
asSFuncPŒ
 
ÿÎback
, *
obj
, 
ÿÎCÚv
);

114 
	`CË¬LšeC®lback
();

115 
asUINT
 
	$G‘C®l¡ackSize
() const;

116 
asISütFunùiÚ
 *
	`G‘FunùiÚ
(
asUINT
 
¡ackLev–
);

117 
	`G‘LšeNumb”
(
asUINT
 
¡ackLev–
, *
cŞumn
, cÚ¡ **
£ùiÚName
);

118 
	`G‘V¬CouÁ
(
asUINT
 
¡ackLev–
);

119 cÚ¡ *
	`G‘V¬Name
(
asUINT
 
v¬Index
,‡sUINT 
¡ackLev–
);

120 cÚ¡ *
	`G‘V¬Deş¬©iÚ
(
asUINT
 
v¬Index
,‡sUINT 
¡ackLev–
);

121 
	`G‘V¬Ty³Id
(
asUINT
 
v¬Index
,‡sUINT 
¡ackLev–
);

122 *
	`G‘Add»ssOfV¬
(
asUINT
 
v¬Index
,‡sUINT 
¡ackLev–
);

123 
boŞ
 
	`IsV¬InScİe
(
asUINT
 
v¬Index
,‡sUINT 
¡ackLev–
);

124 
	`G‘ThisTy³Id
(
asUINT
 
¡ackLev–
);

125 *
	`G‘ThisPoš‹r
(
asUINT
 
¡ackLev–
);

126 
asISütFunùiÚ
 *
	`G‘Sy¡emFunùiÚ
();

129 *
	`S‘U£rD©a
(*
d©a
);

130 *
	$G‘U£rD©a
() const;

132 
public
:

134 
	`asCCÚ‹xt
(
asCSütEngše
 *
’gše
, 
boŞ
 
hŞdRef
);

135 
vœtu®
 ~
	`asCCÚ‹xt
();

138 
ä›nd
 
şass
 
asCSütEngše
;

140 
	`C®lLšeC®lback
();

141 
	`C®lExû±iÚC®lback
();

143 
	`C®lG’”ic
(
funcID
, *
objeùPoš‹r
);

145 
	`D‘achEngše
();

147 
	`Execu‹Next
();

148 
	`CËªSck
();

149 
	`CËªSckF¿me
();

150 
	`CËªR‘uºObjeù
();

151 
	`D‘”mšeLiveObjeùs
(
asCA¼ay
<> &
liveObjeùs
, 
asUINT
 
¡ackLev–
);

153 
	`PushC®lS‹
();

154 
	`PİC®lS‹
();

155 
	`C®lSütFunùiÚ
(
asCSütFunùiÚ
 *
func
);

156 
	`C®lIÁ”çûM‘hod
(
asCSütFunùiÚ
 *
func
);

157 
	`P»·»SütFunùiÚ
();

159 
boŞ
 
	`Re£rveSckS·û
(
asUINT
 
size
);

161 
	`S‘IÁ”ÇlExû±iÚ
(cÚ¡ *
desü
);

164 
mubË
 
asCAtomic
 
m_»fCouÁ
;

166 
boŞ
 
m_hŞdEngšeRef
;

167 
asCSütEngše
 *
m_’gše
;

169 
asECÚ‹xtS‹
 
m_¡©us
;

170 
boŞ
 
m_doSu¥’d
;

171 
boŞ
 
m_doAbÜt
;

172 
boŞ
 
m_ex‹º®Su¥’dReque¡
;

174 
asCSütFunùiÚ
 *
m_cu¼’tFunùiÚ
;

175 
asCSütFunùiÚ
 *
m_ÿÎšgSy¡emFunùiÚ
;

178 
asCA¼ay
<
size_t
> 
m_ÿÎSck
;

181 
asCA¼ay
<
asDWORD
 *> 
m_¡ackBlocks
;

182 
asUINT
 
m_¡ackBlockSize
;

183 
asUINT
 
m_¡ackIndex
;

184 
asDWORD
 *
m_Üigš®SckPoš‹r
;

187 
boŞ
 
m_isSckMemÜyNÙAÎoÿ‹d
;

188 
boŞ
 
m_šExû±iÚHªdËr
;

189 
asCSŒšg
 
m_exû±iÚSŒšg
;

190 
m_exû±iÚFunùiÚ
;

191 
m_exû±iÚLše
;

192 
m_exû±iÚCŞumn
;

195 
asCSütFunùiÚ
 *
m_š™ŸlFunùiÚ
;

196 
m_»tuºV®ueSize
;

197 
m_¬gum’tsSize
;

200 
boŞ
 
m_lšeC®lback
;

201 
asSSy¡emFunùiÚIÁ”çû
 
m_lšeC®lbackFunc
;

202 * 
m_lšeC®lbackObj
;

204 
boŞ
 
m_exû±iÚC®lback
;

205 
asSSy¡emFunùiÚIÁ”çû
 
m_exû±iÚC®lbackFunc
;

206 * 
m_exû±iÚC®lbackObj
;

208 *
m_u£rD©a
;

211 
asSVMRegi¡”s
 
m_»gs
;

214 
END_AS_NAMESPACE


	@../hdr/script/as_criticalsection.h

39 #iâdeà
AS_CRITICALSECTION_H


40 
	#AS_CRITICALSECTION_H


	)

42 
	~"as_cÚfig.h
"

44 
	gBEGIN_AS_NAMESPACE


46 #ifdeà
AS_NO_THREADS


48 
	#DECLARECRITICALSECTION
(
x
)

	)

49 
	#ENTERCRITICALSECTION
(
x
)

	)

50 
	#LEAVECRITICALSECTION
(
x
)

	)

52 
šlše
 
boŞ
 
	$ŒyEÁ”
(è{  
Œue
; 
	}
}

53 
	#TRYENTERCRITICALSECTION
(
x
è
	`ŒyEÁ”
()

	)

55 
	#DECLAREREADWRITELOCK
(
x
)

	)

56 
	#ACQUIREEXCLUSIVE
(
x
)

	)

57 
	#RELEASEEXCLUSIVE
(
x
)

	)

58 
	#ACQUIRESHARED
(
x
)

	)

59 
	#RELEASESHARED
(
x
)

	)

63 
	#DECLARECRITICALSECTION
(
x
è
asCTh»adCr™iÿlSeùiÚ
 x;

	)

64 
	#ENTERCRITICALSECTION
(
x
èx.
	`EÁ”
()

	)

65 
	#LEAVECRITICALSECTION
(
x
èx.
	`L—ve
()

	)

66 
	#TRYENTERCRITICALSECTION
(
x
èx.
	`TryEÁ”
()

	)

68 
	#DECLAREREADWRITELOCK
(
x
è
asCTh»adR—dWr™eLock
 x;

	)

69 
	#ACQUIREEXCLUSIVE
(
x
èx.
	`AcquœeExşusive
()

	)

70 
	#RELEASEEXCLUSIVE
(
x
èx.
	`R–—£Exşusive
()

	)

71 
	#ACQUIRESHARED
(
x
èx.
	`AcquœeSh¬ed
()

	)

72 
	#RELEASESHARED
(
x
èx.
	`R–—£Sh¬ed
()

	)

74 #ifdeà
AS_POSIX_THREADS


76 
	gEND_AS_NAMESPACE


77 
	~<±h»ad.h
>

78 
BEGIN_AS_NAMESPACE


80 şas 
	casCTh»adCr™iÿlSeùiÚ


82 
	mpublic
:

83 
asCTh»adCr™iÿlSeùiÚ
();

84 ~
asCTh»adCr™iÿlSeùiÚ
();

86 
EÁ”
();

87 
L—ve
();

88 
boŞ
 
TryEÁ”
();

90 
	m´Ùeùed
:

91 
±h»ad_mu‹x_t
 
cs
;

94 şas 
	casCTh»adR—dWr™eLock


96 
	mpublic
:

97 
asCTh»adR—dWr™eLock
();

98 ~
asCTh»adR—dWr™eLock
();

100 
AcquœeExşusive
();

101 
R–—£Exşusive
();

102 
boŞ
 
TryAcquœeExşusive
();

104 
AcquœeSh¬ed
();

105 
R–—£Sh¬ed
();

106 
boŞ
 
TryAcquœeSh¬ed
();

108 
	m´Ùeùed
:

109 
±h»ad_rwlock_t
 
lock
;

112 #–ià
defšed
(
AS_WINDOWS_THREADS
)

114 
	gEND_AS_NAMESPACE


115 #ifdeà
AS_XBOX360


116 
	~<x.h
>

118 
	#WIN32_LEAN_AND_MEAN


	)

119 #iâdeà
_WIN32_WINNT


120 
	#_WIN32_WINNT
 0x0400

122 
	~<wšdows.h
>

	)

124 
	gBEGIN_AS_NAMESPACE


127 #undeà
G‘Objeù


128 #undeà
Regi¡”CÏss


130 şas 
	casCTh»adCr™iÿlSeùiÚ


132 
	mpublic
:

133 
asCTh»adCr™iÿlSeùiÚ
();

134 ~
asCTh»adCr™iÿlSeùiÚ
();

136 
EÁ”
();

137 
L—ve
();

138 
boŞ
 
TryEÁ”
();

140 
	m´Ùeùed
:

141 
CRITICAL_SECTION
 
cs
;

144 şas 
	casCTh»adR—dWr™eLock


146 
	mpublic
:

147 
asCTh»adR—dWr™eLock
();

148 ~
asCTh»adR—dWr™eLock
();

150 
AcquœeExşusive
();

151 
R–—£Exşusive
();

153 
AcquœeSh¬ed
();

154 
R–—£Sh¬ed
();

156 
	m´Ùeùed
:

172 
CRITICAL_SECTION
 
wr™eLock
;

173 
HANDLE
 
	m»adLocks
;

178 cÚ¡ 
asUINT
 
	gmaxR—d”s
 = 10;

184 
	gEND_AS_NAMESPACE


	@../hdr/script/as_datatype.h

40 #iâdeà
AS_DATATYPE_H


41 
	#AS_DATATYPE_H


	)

43 
	~"as_tok’def.h
"

44 
	~"as_¡ršg.h
"

46 
BEGIN_AS_NAMESPACE


48 
	gasSTy³Behaviour
;

49 
şass
 
	gasCSütEngše
;

50 
şass
 
	gasCObjeùTy³
;

51 
şass
 
	gasCSütFunùiÚ
;

53 şas 
	casCD©aTy³


55 
	mpublic
:

56 
asCD©aTy³
();

57 
asCD©aTy³
(const‡sCDataType &);

58 ~
asCD©aTy³
();

60 
boŞ
 
	$IsV®id
() const;

62 
asCSŒšg
 
	$FÜm©
(
boŞ
 
šşudeName¥aû
 = 
çl£
) const;

64 
asCD©aTy³
 
	`C»©ePrim™ive
(
eTok’Ty³
 
‰
, 
boŞ
 
isCÚ¡
);

65 
asCD©aTy³
 
	`C»©eObjeù
(
asCObjeùTy³
 *
Ù
, 
boŞ
 
isCÚ¡
);

66 
asCD©aTy³
 
	`C»©eObjeùHªdË
(
asCObjeùTy³
 *
Ù
, 
boŞ
 
isCÚ¡
);

67 
asCD©aTy³
 
	`C»©eFuncDef
(
asCSütFunùiÚ
 *
Ù
);

68 
asCD©aTy³
 
	`C»©eNuÎHªdË
();

70 
	`MakeHªdË
(
boŞ
 
b
, boŞ 
acû±HªdËFÜScİe
 = 
çl£
);

71 
	`MakeA¼ay
(
asCSütEngše
 *
’gše
);

72 
	`MakeReã»nû
(
boŞ
 
b
);

73 
	`MakeR—dOÆy
(
boŞ
 
b
);

74 
	`MakeHªdËToCÚ¡
(
boŞ
 
b
);

76 
boŞ
 
	$IsTem¶©e
() const;

77 
boŞ
 
	$IsSütObjeù
() const;

78 
boŞ
 
	$IsPrim™ive
() const;

79 
boŞ
 
	$IsObjeù
() const;

80 
boŞ
 
	$IsReã»nû
(ècÚ¡ { 
isReã»nû
;}

81 
boŞ
 
	$IsR—dOÆy
() const;

82 
boŞ
 
	$IsIÁeg”Ty³
() const;

83 
boŞ
 
	$IsUnsigÃdTy³
() const;

84 
boŞ
 
	$IsFlßtTy³
() const;

85 
boŞ
 
	$IsDoubËTy³
() const;

86 
boŞ
 
	$IsBoŞ—nTy³
() const;

87 
boŞ
 
	$IsObjeùHªdË
(ècÚ¡ { 
isObjeùHªdË
;
	}
}

88 
boŞ
 
	$IsHªdËToCÚ¡
() const;

89 
boŞ
 
	$IsA¼ayTy³
() const;

90 
boŞ
 
	$IsEnumTy³
() const;

92 
boŞ
 
	$IsSamePrim™iveBa£Ty³
(cÚ¡ 
asCD©aTy³
 &
dt
) const;

93 
boŞ
 
	$IsEqu®Exû±Ref
(cÚ¡ 
asCD©aTy³
 &) const;

94 
boŞ
 
	$IsEqu®Exû±RefAndCÚ¡
(cÚ¡ 
asCD©aTy³
 &) const;

95 
boŞ
 
	$IsEqu®Exû±CÚ¡
(cÚ¡ 
asCD©aTy³
 &) const;

96 
boŞ
 
	$IsEqu®Exû±IÁ”çûTy³
(cÚ¡ 
asCD©aTy³
 &
dt
) const;

97 
boŞ
 
	$IsNuÎHªdË
() const;

99 
boŞ
 
	$SuµÜtHªdËs
() const;

100 
boŞ
 
	$CªBeIn¡ªcŸ‹d
() const;

101 
boŞ
 
	$CªBeCİ›d
() const;

103 
boŞ
 
İ”©Ü
 ==(cÚ¡ 
asCD©aTy³
 &) const;

104 
boŞ
 
İ”©Ü
 !=(cÚ¡ 
asCD©aTy³
 &) const;

106 
asCD©aTy³
 
	$G‘SubTy³
() const;

107 
eTok’Ty³
 
	$G‘Tok’Ty³
(ècÚ¡ { 
tok’Ty³
;
	}
}

108 
asCObjeùTy³
 *
	$G‘ObjeùTy³
(ècÚ¡ { 
objeùTy³
;
	}
}

109 
asCSütFunùiÚ
 *
	$G‘FuncDef
(ècÚ¡ { 
funcDef
;
	}
}

111 
	$G‘SizeOnSckDWÜds
() const;

112 
	$G‘SizeInMemÜyBy‹s
() const;

113 
	$G‘SizeInMemÜyDWÜds
() const;

115 
	$S‘Tok’Ty³
(
eTok’Ty³
 
‰
è{
tok’Ty³
 =t;
	}
}

116 
	$S‘ObjeùTy³
(
asCObjeùTy³
 *
obj
è{
objeùTy³
 = obj;
	}
}

117 
	$S‘FuncDef
(
asCSütFunùiÚ
 *
func
è{ 
	`asASSERT
(
funcDef
); funcDeàğfunc; 
	}
}

119 
	gasCD©aTy³
 &
	gİ”©Ü
 =(cÚ¡ 
asCD©aTy³
 &);

121 
asSTy³Behaviour
 *
	$G‘Behaviour
() const;

123 
´Ùeùed
:

125 
eTok’Ty³
 
tok’Ty³
;

128 
asCObjeùTy³
 *
objeùTy³
;

129 
asCSütFunùiÚ
 *
funcDef
;

132 
boŞ
 
isReã»nû
:1;

133 
boŞ
 
isR—dOÆy
:1;

134 
boŞ
 
isObjeùHªdË
:1;

135 
boŞ
 
isCÚ¡HªdË
:1;

136 
dummy
:4;

137 
	}
};

139 
	gEND_AS_NAMESPACE


	@../hdr/script/as_debug.h

36 #iâdeà
AS_DEBUG_H


37 
	#AS_DEBUG_H


	)

39 #iâdeà
AS_WII


42 #iâdeà
_WIN32_WCE


46 #ià
defšed
(
__GNUC__
è|| defšedĞ
AS_MARMALADE
 )

48 
	~<sys/¡©.h
>

49 
	~<sys/ty³s.h
>

50 
	#_mkdœ
(
dœÇme
è
	`mkdœ
(dœÇme, 
S_IRWXU
)

	)

52 
	~<dœeù.h
>

	@../hdr/script/as_gc.h

40 #iâdeà
AS_GC_H


41 
	#AS_GC_H


	)

43 
	~"as_cÚfig.h
"

44 
	~"as_¬¿y.h
"

45 
	~"as_m­.h
"

46 
	~"as_th»ad.h
"

48 
BEGIN_AS_NAMESPACE


50 
şass
 
	gasCSütEngše
;

51 
şass
 
	gasCObjeùTy³
;

53 şas 
	casCG¬bageCŞËùÜ


55 
	mpublic
:

56 
asCG¬bageCŞËùÜ
();

58 
G¬bageCŞËù
(
asDWORD
 
æags
);

59 
	$G‘Sti¡ics
(
asUINT
 *
cu¼’tSize
,‡sUINT *
tÙ®De¡royed
,‡sUINT *
tÙ®D‘eùed
,‡sUINT *
ÃwObjeùs
,‡sUINT *
tÙ®NewDe¡royed
) const;

60 
	`GCEnumC®lback
(*
»ã»nû
);

61 
	`AddSütObjeùToGC
(*
obj
, 
asCObjeùTy³
 *
objTy³
);

63 
	`R•ÜtAndR–—£Unde¡royedObjeùs
();

65 
asCSütEngše
 *
’gše
;

67 
´Ùeùed
:

68 
	sasSObjTy³Paœ
 {*
obj
; 
asCObjeùTy³
 *
ty³
; 
couÁ
;};

69 
	sasSIÁTy³Paœ
 {
i
; 
asCObjeùTy³
 *
ty³
;
	}
};

71 
	eegcDe¡royS‹


73 
	gde¡royG¬bage_š™
 = 0,

74 
	gde¡royG¬bage_loİ
,

75 
	gde¡royG¬bage_haveMÜe


78 
	eegcD‘eùS‹


80 
	gş—rCouÁ”s_š™
 = 0,

81 
	gş—rCouÁ”s_loİ
,

82 
	gbudM­_š™
,

83 
	gbudM­_loİ
,

84 
	gcouÁReã»nûs_š™
,

85 
	gcouÁReã»nûs_loİ
,

86 
	gd‘eùG¬bage_š™
,

87 
	gd‘eùG¬bage_loİ1
,

88 
	gd‘eùG¬bage_loİ2
,

89 
	gv”ifyUnm¬ked_š™
,

90 
	gv”ifyUnm¬ked_loİ
,

91 
	gb»akCœşes_š™
,

92 
	gb»akCœşes_loİ
,

93 
	gb»akCœşes_haveG¬bage


96 
De¡royNewG¬bage
();

97 
De¡royOldG¬bage
();

98 
Id’tifyG¬bageW™hCyşicRefs
();

99 
asSObjTy³Paœ
 
G‘NewObjeùAtIdx
(
idx
);

100 
asSObjTy³Paœ
 
G‘OldObjeùAtIdx
(
idx
);

101 
RemoveNewObjeùAtIdx
(
idx
);

102 
RemoveOldObjeùAtIdx
(
idx
);

103 
MoveObjeùToOldLi¡
(
idx
);

104 
Inü—£CouÁ”FÜNewObjeù
(
idx
);

107 
	gasCA¼ay
<
	gasSObjTy³Paœ
> 
	ggcNewObjeùs
;

108 
	gasCA¼ay
<
	gasSObjTy³Paœ
> 
	ggcOldObjeùs
;

111 
	gasCA¼ay
<*> 
	gliveObjeùs
;

115 
	gasCM­
<*, 
	gasSIÁTy³Paœ
> 
	ggcM­
;

118 
egcDe¡royS‹
 
	gde¡royNewS‹
;

119 
egcDe¡royS‹
 
	gde¡royOldS‹
;

120 
asUINT
 
	gde¡royNewIdx
;

121 
asUINT
 
	gde¡royOldIdx
;

122 
asUINT
 
	gnumDe¡royed
;

123 
asUINT
 
	gnumNewDe¡royed
;

124 
egcD‘eùS‹
 
	gd‘eùS‹
;

125 
asUINT
 
	gd‘eùIdx
;

126 
asUINT
 
	gnumD‘eùed
;

127 
	gasSM­Node
<*, 
	gasSIÁTy³Paœ
> *
	ggcM­CursÜ
;

128 
boŞ
 
	gisProûssšg
;

131 
	$DECLARECRITICALSECTION
(
gcCr™iÿl
)

132 
	`DECLARECRITICALSECTION
(
gcCŞËùšg
)

133 
	}
};

135 
	gEND_AS_NAMESPACE


	@../hdr/script/as_generic.h

39 #iâdeà
AS_GENERIC_H


40 
	#AS_GENERIC_H


	)

42 
	~"as_cÚfig.h
"

44 
BEGIN_AS_NAMESPACE


46 
şass
 
	gasCSütEngše
;

47 
şass
 
	gasCSütFunùiÚ
;

49 şas 
	casCG’”ic
 : 
public
 
asISütG’”ic


51 
public
:

56 
asISütEngše
 *
	$G‘Engše
() const;

57 #ifdeà
AS_DEPRECATED


59 
	$G‘FunùiÚId
() const;

60 *
	$G‘FunùiÚU£rD©a
() const;

62 
asISütFunùiÚ
 *
	$G‘FunùiÚ
() const;

65 *
	`G‘Objeù
();

66 
	$G‘ObjeùTy³Id
() const;

69 
	$G‘ArgCouÁ
() const;

70 
	$G‘ArgTy³Id
(
asUINT
 
¬g
) const;

71 
asBYTE
 
	`G‘ArgBy‹
(
asUINT
 
¬g
);

72 
asWORD
 
	`G‘ArgWÜd
(
asUINT
 
¬g
);

73 
asDWORD
 
	`G‘ArgDWÜd
(
asUINT
 
¬g
);

74 
asQWORD
 
	`G‘ArgQWÜd
(
asUINT
 
¬g
);

75 
	`G‘ArgFlßt
(
asUINT
 
¬g
);

76 
	`G‘ArgDoubË
(
asUINT
 
¬g
);

77 *
	`G‘ArgAdd»ss
(
asUINT
 
¬g
);

78 *
	`G‘ArgObjeù
(
asUINT
 
¬g
);

79 *
	`G‘Add»ssOfArg
(
asUINT
 
¬g
);

82 
	$G‘R‘uºTy³Id
() const;

83 
	`S‘R‘uºBy‹
(
asBYTE
 
v®
);

84 
	`S‘R‘uºWÜd
(
asWORD
 
v®
);

85 
	`S‘R‘uºDWÜd
(
asDWORD
 
v®
);

86 
	`S‘R‘uºQWÜd
(
asQWORD
 
v®
);

87 
	`S‘R‘uºFlßt
(
v®
);

88 
	`S‘R‘uºDoubË
(
v®
);

89 
	`S‘R‘uºAdd»ss
(*
addr
);

90 
	`S‘R‘uºObjeù
(*
obj
);

91 *
	`G‘Add»ssOfR‘uºLoÿtiÚ
();

96 
	`asCG’”ic
(
asCSütEngše
 *
’gše
, 
asCSütFunùiÚ
 *
sysFunùiÚ
, *
cu¼’tObjeù
, 
asDWORD
 *
¡ackPoš‹r
);

97 
vœtu®
 ~
	`asCG’”ic
();

99 *
	`G‘R‘uºPoš‹r
();

101 
asCSütEngše
 *
’gše
;

102 
asCSütFunùiÚ
 *
sysFunùiÚ
;

103 *
cu¼’tObjeù
;

104 
asDWORD
 *
¡ackPoš‹r
;

105 *
objeùRegi¡”
;

107 
asQWORD
 
»tuºV®
;

110 
END_AS_NAMESPACE


	@../hdr/script/as_map.h

39 #iâdeà
AS_MAP_H


40 
	#AS_MAP_H


	)

42 
	g‹m¶©e
 <
şass
 
	gKEY
, cÏs 
	gVAL
> 
	gasSM­Node
;

44 
	g‹m¶©e
 <
şass
 
	gKEY
, cÏs 
	gVAL
> cÏs 
	casCM­


46 
	mpublic
:

47 
asCM­
();

48 ~
asCM­
();

50 
In£¹
(cÚ¡ 
KEY
 &
key
, cÚ¡ 
VAL
 &
v®ue
);

51 
	$G‘CouÁ
() const;

53 cÚ¡ 
KEY
 &
	`G‘Key
(cÚ¡ 
asSM­Node
<KEY,
VAL
> *
cursÜ
) const;

54 cÚ¡ 
VAL
 &
	`G‘V®ue
(cÚ¡ 
asSM­Node
<
KEY
,VAL> *
cursÜ
) const;

55 
VAL
 &
	`G‘V®ue
(
asSM­Node
<
KEY
,VAL> *
cursÜ
);

57 
	`E¿£
(
asSM­Node
<
KEY
,
VAL
> *
cursÜ
);

58 
	`E¿£AÎ
();

62 
boŞ
 
	`MoveTo
(
asSM­Node
<
KEY
,
VAL
> **
out
, cÚ¡ KEY &
key
) const;

63 
boŞ
 
	`MoveFœ¡
(
asSM­Node
<
KEY
,
VAL
> **
out
) const;

64 
boŞ
 
	`MoveLa¡
(
asSM­Node
<
KEY
,
VAL
> **
out
) const;

65 
boŞ
 
	`MoveNext
(
asSM­Node
<
KEY
,
VAL
> **
out
,‡sSM­Node<KEY,VAL> *
cursÜ
) const;

66 
boŞ
 
	`MoveP»v
(
asSM­Node
<
KEY
,
VAL
> **
out
,‡sSM­Node<KEY,VAL> *
cursÜ
) const;

70 
	`CheckIÁegr™y
(
asSM­Node
<
KEY
,
VAL
> *
node
) const;

72 
´Ùeùed
:

73 
	`B®ªûIn£¹
(
asSM­Node
<
KEY
,
VAL
> *
node
);

74 
	`B®ªûE¿£
(
asSM­Node
<
KEY
,
VAL
> *
chd
,‡sSM­Node<KEY,VAL> *
·»Á
);

76 
	`E¿£AÎ
(
asSM­Node
<
KEY
,
VAL
> *
node
);

77 
	`RÙ©eLeá
(
asSM­Node
<
KEY
,
VAL
> *
node
);

78 
	`RÙ©eRight
(
asSM­Node
<
KEY
,
VAL
> *
node
);

80 
asSM­Node
<
KEY
,
VAL
> *
roÙ
;

81 
asSM­Node
<
KEY
,
VAL
> 
dummy
;

83 
couÁ
;

96 
	#ISRED
(
x
è((x !ğ0è&& (x)->
isRed
)

	)

97 
	#ISBLACK
(
x
è(!
	`ISRED
(x))

	)

99 
‹m¶©e
 <
şass
 
KEY
, cÏs 
VAL
> 
	sasSM­Node


101 
	`asSM­Node
(è{
·»Á
 = 0; 
Ëá
 = 0; 
right
 = 0; 
isRed
 = 
Œue
;}

103 
asSM­Node
 *
·»Á
;

104 
asSM­Node
 *
Ëá
;

105 
asSM­Node
 *
right
;

106 
boŞ
 
isRed
;

108 
KEY
 
key
;

109 
VAL
 
v®ue
;

112 
‹m¶©e
 <
şass
 
KEY
, cÏs 
VAL
>

113 
asCM­
<
KEY
, 
VAL
>::
	$asCM­
()

115 
roÙ
 = 0;

116 
couÁ
 = 0;

117 
	}
}

119 
	g‹m¶©e
 <
şass
 
	gKEY
, cÏs 
	gVAL
>

120 
	gasCM­
<
	gKEY
, 
	gVAL
>::~
	$asCM­
()

122 
	`E¿£AÎ
();

123 
	}
}

125 
	g‹m¶©e
 <
şass
 
	gKEY
, cÏs 
	gVAL
>

126 
	gasCM­
<
	gKEY
, 
	gVAL
>::
	$E¿£AÎ
()

128 
	`E¿£AÎ
(
roÙ
);

129 
roÙ
 = 0;

130 
	}
}

132 
	g‹m¶©e
 <
şass
 
	gKEY
, cÏs 
	gVAL
>

133 
	gasCM­
<
	gKEY
, 
	gVAL
>::
E¿£AÎ
(
asSM­Node
<
KEY
, 
VAL
> *
p
)

135 ifĞ
	gp
 == 0 )  -1;

137 
E¿£AÎ
Ğ
p
->
Ëá
 );

138 
E¿£AÎ
Ğ
p
->
right
 );

140 
	gasSM­Node
<
	tKEY
,
	tVAL
> 
	tnode_t
;

141 
asDELETE
(
p
,
node_t
);

143 
	gcouÁ
--;

148 
	g‹m¶©e
 <
şass
 
	gKEY
, cÏs 
	gVAL
>

149 
	gasCM­
<
	gKEY
, 
	gVAL
>::
	$G‘CouÁ
() const

151  
couÁ
;

152 
	}
}

154 
	g‹m¶©e
 <
şass
 
	gKEY
, cÏs 
	gVAL
>

155 
	gasCM­
<
	gKEY
, 
	gVAL
>::
	$In£¹
(cÚ¡ 
KEY
 &
key
, cÚ¡ 
VAL
 &
v®ue
)

157 
asSM­Node
<
	tKEY
,
	tVAL
> 
	tnode_t
;

158 
asSM­Node
<
KEY
,
VAL
> *
Âode
 = 
	`asNEW
(
node_t
);

159 ifĞ
Âode
 == 0 )

165 
Âode
->
key
 = key;

166 
Âode
->
v®ue
 = value;

169 ifĞ
roÙ
 == 0 )

170 
roÙ
 = 
Âode
;

173 
asSM­Node
<
KEY
,
VAL
> *
p
 = 
roÙ
;

176 ifĞ
Âode
->
key
 < 
p
->key )

178 ifĞ
p
->
Ëá
 == 0 )

180 
Âode
->
·»Á
 = 
p
;

181 
p
->
Ëá
 = 
Âode
;

185 
p
 =…->
Ëá
;

189 ifĞ
p
->
right
 == 0 )

191 
Âode
->
·»Á
 = 
p
;

192 
p
->
right
 = 
Âode
;

196 
p
 =…->
right
;

201 
	`B®ªûIn£¹
(
Âode
);

203 
couÁ
++;

206 
	}
}

208 
	g‹m¶©e
 <
şass
 
	gKEY
, cÏs 
	gVAL
>

209 
	gasCM­
<
	gKEY
, 
	gVAL
>::
B®ªûIn£¹
(
asSM­Node
<
KEY
, 
VAL
> *
node
)

212  
	gnode
 !ğ
roÙ
 && 
node
->
·»Á
->
isRed
 )

215 ifĞ
node
->
·»Á
 =ğnode->·»Á->·»Á->
Ëá
 )

217 
asSM­Node
<
KEY
,
VAL
> *
unşe
 = 
node
->
·»Á
->·»Á->
right
;

218 ifĞ
ISRED
(
unşe
) )

225 
	gnode
->
	g·»Á
->
	gisRed
 = 
çl£
;

226 
	gunşe
->
	gisRed
 = 
çl£
;

227 
	gnode
->
	g·»Á
->·»Á->
	gisRed
 = 
Œue
;

230 
	gnode
 = 
node
->
·»Á
->parent;

238 ifĞ
	gnode
 =ğ
node
->
·»Á
->
right
 )

241 
node
 =‚ode->
·»Á
;

242 
RÙ©eLeá
(
node
);

247 
	gnode
->
	g·»Á
->
	gisRed
 = 
çl£
;

248 
	gnode
->
	g·»Á
->·»Á->
	gisRed
 = 
Œue
;

249 
RÙ©eRight
(
node
->
·»Á
->parent);

254 
	gasSM­Node
<
	gKEY
,
	gVAL
> *
	gunşe
 = 
node
->
·»Á
->·»Á->
Ëá
;

255 ifĞ
ISRED
(
unşe
) )

263 
	gnode
->
	g·»Á
->
	gisRed
 = 
çl£
;

264 
	gunşe
->
	gisRed
 = 
çl£
;

265 
	gnode
 = 
node
->
·»Á
->parent;

266 
	gnode
->
	gisRed
 = 
Œue
;

274 ifĞ
	gnode
 =ğ
node
->
·»Á
->
Ëá
 )

277 
node
 =‚ode->
·»Á
;

278 
RÙ©eRight
(
node
);

283 
	gnode
->
	g·»Á
->
	gisRed
 = 
çl£
;

284 
	gnode
->
	g·»Á
->·»Á->
	gisRed
 = 
Œue
;

285 
RÙ©eLeá
(
node
->
·»Á
->parent);

290 
	groÙ
->
	gisRed
 = 
çl£
;

294 
	g‹m¶©e
 <
şass
 
	gKEY
, cÏs 
	gVAL
>

295 
	gasCM­
<
	gKEY
, 
	gVAL
>::
CheckIÁegr™y
(
asSM­Node
<
KEY
, 
VAL
> *
node
) const

297 ifĞ
	gnode
 == 0 )

299 ifĞ
roÙ
 == 0 )

301 ifĞ
ISRED
(
roÙ
) )

304 
	gnode
 = 
roÙ
;

307 
	gËá
 = 0, 
	gright
 = 0;

308 ifĞ
	gnode
->
	gËá
 )

309 
	gËá
 = 
CheckIÁegr™y
(
node
->
Ëá
);

310 ifĞ
	gnode
->
	gright
 )

311 
	gright
 = 
CheckIÁegr™y
(
node
->
right
);

313 ifĞ
	gËá
 !ğ
right
 || 
Ëá
 == -1 )

316 ifĞ
ISBLACK
(
node
) )

317  
	gËá
+1;

319  
	gËá
;

323 
	g‹m¶©e
 <
şass
 
	gKEY
, cÏs 
	gVAL
>

324 
boŞ
 
	gasCM­
<
	gKEY
, 
	gVAL
>::
MoveTo
(
asSM­Node
<
KEY
,
VAL
> **
out
, cÚ¡ KEY &
key
) const

326 
	gasSM­Node
<
	gKEY
,
	gVAL
> *
	gp
 = 
roÙ
;

327  
	gp
 )

329 ifĞ
	gkey
 < 
	gp
->key )

330 
	gp
 = 
p
->
Ëá
;

331 ifĞ
	gkey
 =ğ
p
->
key
 )

333 ifĞ
out
 ) *ouˆğ
p
;

334  
	gŒue
;

337 
	gp
 = 
p
->
right
;

340 ifĞ
	gout
 ) *out = 0;

341  
	gçl£
;

344 
	g‹m¶©e
 <
şass
 
	gKEY
, cÏs 
	gVAL
>

345 
	gasCM­
<
	gKEY
, 
	gVAL
>::
E¿£
(
asSM­Node
<
KEY
,
VAL
> *
cursÜ
)

347 ifĞ
	gcursÜ
 == 0 ) ;

349 
	gasSM­Node
<
	gKEY
,
	gVAL
> *
	gnode
 = 
cursÜ
;

353 
	gasSM­Node
<
	gKEY
,
	gVAL
> *
	g»move
;

354 ifĞ
	gnode
->
	gËá
 =ğ0 || 
node
->
right
 == 0 )

355 
»move
 = 
node
;

358 
	g»move
 = 
node
->
right
;

359  
	g»move
->
	gËá
 )„emovğ
»move
->
Ëá
;

364 
	gasSM­Node
<
	gKEY
,
	gVAL
> *
	gchd
;

365 ifĞ
	g»move
->
	gËá
 )

366 
	gchd
 = 
»move
->
Ëá
;

368 
	gchd
 = 
»move
->
right
;

370 ifĞ
	gchd
 ) chd->
	g·»Á
 = 
»move
->
·»Á
;

371 ifĞ
	g»move
->
	g·»Á
 )

373 ifĞ
	g»move
 =ğ
»move
->
·»Á
->
Ëá
 )

374 
»move
->
·»Á
->
Ëá
 = 
chd
;

376 
	g»move
->
	g·»Á
->
	gright
 = 
chd
;

379 
	groÙ
 = 
chd
;

382 ifĞ
ISBLACK
(
»move
) )

383 
B®ªûE¿£
(
chd
, 
»move
->
·»Á
);

387 ifĞ
	g»move
 !ğ
node
 )

389 ifĞ
node
->
·»Á
 )

391 ifĞ
node
->
·»Á
->
Ëá
 ==‚ode )

392 
node
->
·»Á
->
Ëá
 = 
»move
;

394 
	gnode
->
	g·»Á
->
	gright
 = 
»move
;

397 
	groÙ
 = 
»move
;

399 
	g»move
->
	gisRed
 = 
node
->
isRed
;

400 
	g»move
->
	g·»Á
 = 
node
->
·»Á
;

402 
	g»move
->
	gËá
 = 
node
->
Ëá
;

403 ifĞ
	g»move
->
	gËá
 )„emove->Ëá->
	g·»Á
 = 
»move
;

404 
	g»move
->
	gright
 = 
node
->
right
;

405 ifĞ
	g»move
->
	gright
 )„emove->right->
	g·»Á
 = 
»move
;

408 
	gasSM­Node
<
	tKEY
,
	tVAL
> 
	tnode_t
;

409 
asDELETE
(
node
,
node_t
);

411 
	gcouÁ
--;

416 
	g‹m¶©e
 <
şass
 
	gKEY
, cÏs 
	gVAL
>

417 
	gasCM­
<
	gKEY
, 
	gVAL
>::
B®ªûE¿£
(
asSM­Node
<
KEY
, 
VAL
> *
chd
,‡sSM­Node<KEY, VAL> *
·»Á
)

446  
	gchd
 !ğ
roÙ
 && 
ISBLACK
(
chd
) )

448 ifĞ
chd
 =ğ
·»Á
->
Ëá
 )

450 
asSM­Node
<
KEY
,
VAL
> *
brÙh”
 = 
·»Á
->
right
;

453 ifĞ
ISRED
(
brÙh”
) )

455 
	gbrÙh”
->
	gisRed
 = 
çl£
;

456 
	g·»Á
->
	gisRed
 = 
Œue
;

457 
RÙ©eLeá
(
·»Á
);

458 
	gbrÙh”
 = 
·»Á
->
right
;

462 ifĞ
	gbrÙh”
 == 0 ) ;

463 ifĞ
ISBLACK
(
brÙh”
->
Ëá
è&& ISBLACK(brÙh”->
right
) )

466 ifĞ
ISRED
(
·»Á
) )

468 
	g·»Á
->
	gisRed
 = 
çl£
;

469 
	gbrÙh”
->
	gisRed
 = 
Œue
;

473 
	gbrÙh”
->
	gisRed
 = 
Œue
;

474 
	gchd
 = 
·»Á
;

475 
	g·»Á
 = 
chd
->
·»Á
;

480 ifĞ
ISBLACK
(
brÙh”
->
right
) )

482 
	gbrÙh”
->
	gËá
->
	gisRed
 = 
çl£
;

483 
	gbrÙh”
->
	gisRed
 = 
Œue
;

484 
RÙ©eRight
(
brÙh”
);

485 
	gbrÙh”
 = 
·»Á
->
right
;

489 
	gbrÙh”
->
	gisRed
 = 
·»Á
->
isRed
;

490 
	g·»Á
->
	gisRed
 = 
çl£
;

491 
	gbrÙh”
->
	gright
->
	gisRed
 = 
çl£
;

492 
RÙ©eLeá
(
·»Á
);

498 
	gasSM­Node
<
	gKEY
,
	gVAL
> *
	gbrÙh”
 = 
·»Á
->
Ëá
;

501 ifĞ
ISRED
(
brÙh”
) )

503 
	gbrÙh”
->
	gisRed
 = 
çl£
;

504 
	g·»Á
->
	gisRed
 = 
Œue
;

505 
RÙ©eRight
(
·»Á
);

506 
	gbrÙh”
 = 
·»Á
->
Ëá
;

510 ifĞ
	gbrÙh”
 == 0 ) ;

511 ifĞ
ISBLACK
(
brÙh”
->
Ëá
è&& ISBLACK(brÙh”->
right
) )

514 ifĞ
ISRED
(
·»Á
) )

516 
	g·»Á
->
	gisRed
 = 
çl£
;

517 
	gbrÙh”
->
	gisRed
 = 
Œue
;

521 
	gbrÙh”
->
	gisRed
 = 
Œue
;

522 
	gchd
 = 
·»Á
;

523 
	g·»Á
 = 
chd
->
·»Á
;

528 ifĞ
ISBLACK
(
brÙh”
->
Ëá
) )

530 
	gbrÙh”
->
	gright
->
	gisRed
 = 
çl£
;

531 
	gbrÙh”
->
	gisRed
 = 
Œue
;

532 
RÙ©eLeá
(
brÙh”
);

533 
	gbrÙh”
 = 
·»Á
->
Ëá
;

537 
	gbrÙh”
->
	gisRed
 = 
·»Á
->
isRed
;

538 
	g·»Á
->
	gisRed
 = 
çl£
;

539 
	gbrÙh”
->
	gËá
->
	gisRed
 = 
çl£
;

540 
RÙ©eRight
(
·»Á
);

546 ifĞ
	gchd
 )

547 
	gchd
->
	gisRed
 = 
çl£
;

550 
	g‹m¶©e
 <
şass
 
	gKEY
, cÏs 
	gVAL
>

551 
	gasCM­
<
	gKEY
, 
	gVAL
>::
RÙ©eRight
(
asSM­Node
<
KEY
, 
VAL
> *
node
)

559 ifĞ
	gnode
->
	gËá
 == 0 )  -1;

561 
	gasSM­Node
<
	gKEY
,
	gVAL
> *
	gËá
 = 
node
->
Ëá
;

564 ifĞ
	gnode
->
	g·»Á
 )

566 
	gasSM­Node
<
	gKEY
,
	gVAL
> *
	g·»Á
 = 
node
->
·»Á
;

567 ifĞ
	g·»Á
->
	gËá
 =ğ
node
 )

568 
·»Á
->
Ëá
 =†eft;

570 
	g·»Á
->
	gright
 = 
Ëá
;

572 
	gËá
->
	g·»Á
 = 
·»Á
;

576 
	groÙ
 = 
Ëá
;

577 
	gËá
->
	g·»Á
 = 0;

581 
	gnode
->
	gËá
 = 
Ëá
->
right
;

582 ifĞ
	gnode
->
	gËá
 )‚ode->Ëá->
	g·»Á
 = 
node
;

585 
	gËá
->
	gright
 = 
node
;

586 
	gnode
->
	g·»Á
 = 
Ëá
;

591 
	g‹m¶©e
 <
şass
 
	gKEY
, cÏs 
	gVAL
>

592 
	gasCM­
<
	gKEY
, 
	gVAL
>::
RÙ©eLeá
(
asSM­Node
<
KEY
, 
VAL
> *
node
)

600 ifĞ
	gnode
->
	gright
 == 0 )  -1;

602 
	gasSM­Node
<
	gKEY
,
	gVAL
> *
	gright
 = 
node
->
right
;

605 ifĞ
	gnode
->
	g·»Á
 )

607 
	gasSM­Node
<
	gKEY
,
	gVAL
> *
	g·»Á
 = 
node
->
·»Á
;

608 ifĞ
	g·»Á
->
	gright
 =ğ
node
 )

609 
·»Á
->
right
 =„ight;

611 
	g·»Á
->
	gËá
 = 
right
;

613 
	gright
->
	g·»Á
 = 
·»Á
;

617 
	groÙ
 = 
right
;

618 
	gright
->
	g·»Á
 = 0;

622 
	gnode
->
	gright
 = 
right
->
Ëá
;

623 ifĞ
	gnode
->
	gright
 )‚ode->right->
	g·»Á
 = 
node
;

626 
	gright
->
	gËá
 = 
node
;

627 
	gnode
->
	g·»Á
 = 
right
;

632 
	g‹m¶©e
 <
şass
 
	gKEY
, cÏs 
	gVAL
>

633 cÚ¡ 
	gVAL
 &
	gasCM­
<
	gKEY
, VAL>::
G‘V®ue
(cÚ¡ 
asSM­Node
<
KEY
,
VAL
> *
cursÜ
) const

635 ifĞ
	gcursÜ
 == 0 )

636  
dummy
.
v®ue
;

638  
	gcursÜ
->
	gv®ue
;

641 
	g‹m¶©e
 <
şass
 
	gKEY
, cÏs 
	gVAL
>

642 
	gVAL
 &
	gasCM­
<
	gKEY
, VAL>::
G‘V®ue
(
asSM­Node
<
KEY
,
VAL
> *
cursÜ
)

644 ifĞ
	gcursÜ
 == 0 )

645  
dummy
.
v®ue
;

647  
	gcursÜ
->
	gv®ue
;

650 
	g‹m¶©e
 <
şass
 
	gKEY
, cÏs 
	gVAL
>

651 cÚ¡ 
	gKEY
 &
	gasCM­
<KEY, 
	gVAL
>::
G‘Key
(cÚ¡ 
asSM­Node
<
KEY
,
VAL
> *
cursÜ
) const

653 ifĞ
	gcursÜ
 == 0 )

654  
dummy
.
key
;

656  
	gcursÜ
->
	gkey
;

659 
	g‹m¶©e
 <
şass
 
	gKEY
, cÏs 
	gVAL
>

660 
boŞ
 
	gasCM­
<
	gKEY
, 
	gVAL
>::
MoveFœ¡
(
asSM­Node
<
KEY
,
VAL
> **
out
) const

662 *
	gout
 = 
roÙ
;

663 ifĞ
	groÙ
 =ğ0 )  
çl£
;

665  (*
	gout
)->
	gËá
 )

666 *
	gout
 = (*
out
)->
Ëá
;

668  
	gŒue
;

671 
	g‹m¶©e
 <
şass
 
	gKEY
, cÏs 
	gVAL
>

672 
boŞ
 
	gasCM­
<
	gKEY
, 
	gVAL
>::
MoveLa¡
(
asSM­Node
<
KEY
,
VAL
> **
out
) const

674 *
	gout
 = 
roÙ
;

675 ifĞ
	groÙ
 =ğ0 )  
çl£
;

677  (*
	gout
)->
	gright
 )

678 *
	gout
 = (*
out
)->
right
;

680  
	gŒue
;

683 
	g‹m¶©e
 <
şass
 
	gKEY
, cÏs 
	gVAL
>

684 
boŞ
 
	gasCM­
<
	gKEY
, 
	gVAL
>::
MoveNext
(
asSM­Node
<
KEY
,
VAL
> **
out
,‡sSM­Node<KEY,VAL> *
cursÜ
) const

686 ifĞ
	gcursÜ
 == 0 )

688 *
out
 = 0;

689  
	gçl£
;

692 ifĞ
	gcursÜ
->
	gright
 == 0 )

695  
cursÜ
->
·»Á
 && cursÜ->·»Á->
right
 == cursor )

696 
cursÜ
 = cursÜ->
·»Á
;

698 
	gcursÜ
 = 
cursÜ
->
·»Á
;

699 *
	gout
 = 
cursÜ
;

700 ifĞ
	gcursÜ
 == 0 )

701  
çl£
;

703  
	gŒue
;

706 
	gcursÜ
 = 
cursÜ
->
right
;

707  
	gcursÜ
->
	gËá
 )

708 
	gcursÜ
 = 
cursÜ
->
Ëá
;

710 *
	gout
 = 
cursÜ
;

711  
	gŒue
;

714 
	g‹m¶©e
 <
şass
 
	gKEY
, cÏs 
	gVAL
>

715 
boŞ
 
	gasCM­
<
	gKEY
, 
	gVAL
>::
MoveP»v
(
asSM­Node
<
KEY
,
VAL
> **
out
,‡sSM­Node<KEY,VAL> *
cursÜ
) const

717 ifĞ
	gcursÜ
 == 0 )

719 *
out
 = 0;

720  
	gçl£
;

723 ifĞ
	gcursÜ
->
	gËá
 == 0 )

726  
cursÜ
->
·»Á
 && cursÜ->·»Á->
Ëá
 == cursor )

727 
cursÜ
 = cursÜ->
·»Á
;

729 
	gcursÜ
 = 
cursÜ
->
·»Á
;

731 *
	gout
 = 
cursÜ
;

732 ifĞ
	gcursÜ
 == 0 )

733  
çl£
;

735  
	gŒue
;

738 
	gcursÜ
 = 
cursÜ
->
Ëá
;

739  
	gcursÜ
->
	gright
 )

740 
	gcursÜ
 = 
cursÜ
->
right
;

742 *
	gout
 = 
cursÜ
;

743  
	gŒue
;

	@../hdr/script/as_memory.h

41 #iâdeà
AS_MEMORY_H


42 
	#AS_MEMORY_H


	)

44 
	~"as_cÚfig.h
"

46 
BEGIN_AS_NAMESPACE


48 
asALLOCFUNC_t
 
u£rAÎoc
;

49 
asFREEFUNC_t
 
u£rF»e
;

53 #iâdeà
AS_DEBUG


55 
	#asNEW
(
x
è
	`Ãw
(
	`u£rAÎoc
((x))è
	)
x

56 
	#asDELETE
(
±r
,
x
è{*
tmp
 =…Œ; (±r)->~
	`x
(); 
	`u£rF»e
Ñmp);}

	)

58 
	#asNEWARRAY
(
x
,
út
è(x*)
	`u£rAÎoc
((x)*út)

	)

59 
	#asDELETEARRAY
(
±r
è
	`u£rF»e
ÕŒ)

	)

63 *(*
	tasALLOCFUNCDEBUG_t
)(
	tsize_t
, const *, );

65 
	#asNEW
(
x
è
	`Ãw
(((
asALLOCFUNCDEBUG_t
)(
u£rAÎoc
))((x), 
__FILE__
, 
__LINE__
)è
	)
x

66 
	#asDELETE
(
±r
,
x
è{*
tmp
 =…Œ; (±r)->~
	`x
(); 
	`u£rF»e
Ñmp);}

	)

68 
	#asNEWARRAY
(
x
,
út
è(x*)((
asALLOCFUNCDEBUG_t
)(
u£rAÎoc
))((x)*út, 
__FILE__
, 
__LINE__
)

	)

69 
	#asDELETEARRAY
(
±r
è
	`u£rF»e
ÕŒ)

	)

73 
	gEND_AS_NAMESPACE


75 
	~<Ãw
>

76 
	~"as_ü™iÿl£ùiÚ.h
"

77 
	~"as_¬¿y.h
"

79 
BEGIN_AS_NAMESPACE


81 şas 
	casCMemÜyMgr


83 
	mpublic
:

84 
asCMemÜyMgr
();

85 ~
asCMemÜyMgr
();

87 
F»eUnu£dMemÜy
();

89 *
AÎocSütNode
();

90 
F»eSütNode
(*
±r
);

92 #iâdeà
AS_NO_COMPILER


93 *
AÎocBy‹In¡ruùiÚ
();

94 
F»eBy‹In¡ruùiÚ
(*
±r
);

97 
	m´Ùeùed
:

98 
	$DECLARECRITICALSECTION
(
cs
)

99 
asCA¼ay
<*> 
sütNodePoŞ
;

100 
asCA¼ay
<*> 
by‹In¡ruùiÚPoŞ
;

103 
END_AS_NAMESPACE


	@../hdr/script/as_module.h

39 #iâdeà
AS_MODULE_H


40 
	#AS_MODULE_H


	)

42 
	~"as_cÚfig.h
"

43 
	~"as_©omic.h
"

44 
	~"as_¡ršg.h
"

45 
	~"as_¬¿y.h
"

46 
	~"as_d©©y³.h
"

47 
	~"as_sütfunùiÚ.h
"

48 
	~"as_´İ”ty.h
"

50 
BEGIN_AS_NAMESPACE


53 cÚ¡ 
	gFUNC_IMPORTED
 = 0x40000000;

55 
şass
 
	gasCSütEngše
;

56 
şass
 
	gasCComp”
;

57 
şass
 
	gasCBud”
;

58 
şass
 
	gasCCÚ‹xt
;

59 
şass
 
	gasCCÚfigGroup
;

60 
	gasSNameS·û
;

62 
	ssBšdInfo


64 
asCSütFunùiÚ
 *
	mimpÜ‹dFunùiÚSigÇtu»
;

65 
asCSŒšg
 
	mimpÜtFromModuË
;

66 
	mboundFunùiÚId
;

69 
	ssObjeùTy³Paœ


71 
asCObjeùTy³
 *
	ma
;

72 
asCObjeùTy³
 *
	mb
;

91 şas 
	casCModuË
 : 
public
 
asISütModuË


96 
public
:

97 
vœtu®
 
asISütEngše
 *
	$G‘Engše
() const;

98 
vœtu®
 
	`S‘Name
(cÚ¡ *
Çme
);

99 
vœtu®
 cÚ¡ *
	$G‘Name
() const;

102 
vœtu®
 
	`AddSütSeùiÚ
(cÚ¡ *
Çme
, cÚ¡ *
code
, 
size_t
 
codeL’gth
, 
lšeOff£t
);

103 
vœtu®
 
	`Bud
();

104 
vœtu®
 
	`CompeFunùiÚ
(cÚ¡ *
£ùiÚName
, cÚ¡ *
code
, 
lšeOff£t
, 
asDWORD
 
»£rved
, 
asISütFunùiÚ
 **
outFunc
);

105 
vœtu®
 
	`CompeGlob®V¬
(cÚ¡ *
£ùiÚName
, cÚ¡ *
code
, 
lšeOff£t
);

106 
vœtu®
 
asDWORD
 
	`S‘AcûssMask
×sDWORD 
acûssMask
);

107 
vœtu®
 
	`S‘DeçuÉName¥aû
(cÚ¡ *
ÇmeS·û
);

110 
vœtu®
 
asUINT
 
	$G‘FunùiÚCouÁ
() const;

111 #ifdeà
AS_DEPRECATED


113 
vœtu®
 
	$G‘FunùiÚIdByIndex
(
asUINT
 
šdex
) const;

114 
vœtu®
 
	$G‘FunùiÚIdByName
(cÚ¡ *
Çme
) const;

115 
vœtu®
 
	$G‘FunùiÚIdByDeş
(cÚ¡ *
deş
) const;

117 
vœtu®
 
asISütFunùiÚ
 *
	$G‘FunùiÚByIndex
(
asUINT
 
šdex
) const;

118 
vœtu®
 
asISütFunùiÚ
 *
	$G‘FunùiÚByDeş
(cÚ¡ *
deş
) const;

119 
vœtu®
 
asISütFunùiÚ
 *
	$G‘FunùiÚByName
(cÚ¡ *
Çme
) const;

120 #ifdeà
AS_DEPRECATED


122 
vœtu®
 
	`RemoveFunùiÚ
(
funcId
);

124 
vœtu®
 
	`RemoveFunùiÚ
(
asISütFunùiÚ
 *
func
);

128 
vœtu®
 
	`Re£tGlob®V¬s
(
asISütCÚ‹xt
 *
ùx
);

129 
vœtu®
 
asUINT
 
	$G‘Glob®V¬CouÁ
() const;

130 
vœtu®
 
	$G‘Glob®V¬IndexByName
(cÚ¡ *
Çme
) const;

131 
vœtu®
 
	$G‘Glob®V¬IndexByDeş
(cÚ¡ *
deş
) const;

132 
vœtu®
 cÚ¡ *
	$G‘Glob®V¬Deş¬©iÚ
(
asUINT
 
šdex
, 
boŞ
 
šşudeName¥aû
) const;

133 
vœtu®
 
	$G‘Glob®V¬
(
asUINT
 
šdex
, cÚ¡ **
Çme
, cÚ¡ **
ÇmeS·û
, *
ty³Id
, 
boŞ
 *
isCÚ¡
) const;

134 
vœtu®
 *
	`G‘Add»ssOfGlob®V¬
(
asUINT
 
šdex
);

135 
vœtu®
 
	`RemoveGlob®V¬
(
asUINT
 
šdex
);

138 
vœtu®
 
asUINT
 
	$G‘ObjeùTy³CouÁ
() const;

139 
vœtu®
 
asIObjeùTy³
 *
	$G‘ObjeùTy³ByIndex
(
asUINT
 
šdex
) const;

140 
vœtu®
 
asIObjeùTy³
 *
	$G‘ObjeùTy³ByName
(cÚ¡ *
Çme
) const;

141 
vœtu®
 
	$G‘Ty³IdByDeş
(cÚ¡ *
deş
) const;

144 
vœtu®
 
asUINT
 
	$G‘EnumCouÁ
() const;

145 
vœtu®
 cÚ¡ *
	$G‘EnumByIndex
(
asUINT
 
šdex
, *
’umTy³Id
, cÚ¡ **
ÇmeS·û
) const;

146 
vœtu®
 
	$G‘EnumV®ueCouÁ
(
’umTy³Id
) const;

147 
vœtu®
 cÚ¡ *
	$G‘EnumV®ueByIndex
(
’umTy³Id
, 
asUINT
 
šdex
, *
outV®ue
) const;

150 
vœtu®
 
asUINT
 
	$G‘Ty³defCouÁ
() const;

151 
vœtu®
 cÚ¡ *
	$G‘Ty³defByIndex
(
asUINT
 
šdex
, *
ty³Id
, cÚ¡ **
ÇmeS·û
) const;

154 
vœtu®
 
asUINT
 
	$G‘ImpÜ‹dFunùiÚCouÁ
() const;

155 
vœtu®
 
	$G‘ImpÜ‹dFunùiÚIndexByDeş
(cÚ¡ *
deş
) const;

156 
vœtu®
 cÚ¡ *
	$G‘ImpÜ‹dFunùiÚDeş¬©iÚ
(
asUINT
 
impÜtIndex
) const;

157 
vœtu®
 cÚ¡ *
	$G‘ImpÜ‹dFunùiÚSourûModuË
(
asUINT
 
impÜtIndex
) const;

158 
vœtu®
 
	`BšdImpÜ‹dFunùiÚ
(
asUINT
 
šdex
, 
asISütFunùiÚ
 *
func
);

159 
vœtu®
 
	`UnbšdImpÜ‹dFunùiÚ
(
asUINT
 
impÜtIndex
);

160 
vœtu®
 
	`BšdAÎImpÜ‹dFunùiÚs
();

161 
vœtu®
 
	`UnbšdAÎImpÜ‹dFunùiÚs
();

164 
vœtu®
 
	$SaveBy‹Code
(
asIBš¬ySŒ—m
 *
out
) const;

165 
vœtu®
 
	`LßdBy‹Code
(
asIBš¬ySŒ—m
 *
š
);

168 
vœtu®
 *
	`S‘U£rD©a
(*
d©a
);

169 
vœtu®
 *
	$G‘U£rD©a
() const;

174 
	`asCModuË
(cÚ¡ *
Çme
, 
asCSütEngše
 *
’gše
);

175 ~
	`asCModuË
();

178 
ä›nd
 
şass
 
asCSütEngše
;

179 
ä›nd
 
şass
 
asCBud”
;

180 
ä›nd
 
şass
 
asCComp”
;

181 
ä›nd
 
şass
 
asCCÚ‹xt
;

182 
ä›nd
 
şass
 
asCRe¡Üe
;

184 
	`IÁ”ÇlRe£t
();

186 
	`C®lIn™
(
asISütCÚ‹xt
 *
ùx
);

187 
	`C®lEx™
();

189 
	`JITCompe
();

191 
	`AddSütFunùiÚ
(
£ùiÚIdx
, 
id
, cÚ¡ *
Çme
, cÚ¡ 
asCD©aTy³
 &
»tuºTy³
,‡sCD©aTy³ *
·¿ms
, 
asETy³Modif›rs
 *
šOutFÏgs
, 
asCSŒšg
 **
deçuÉArgs
, 
·¿mCouÁ
, 
boŞ
 
isIÁ”çû
, 
asCObjeùTy³
 *
objTy³
 = 0, boŞ 
isCÚ¡M‘hod
 = 
çl£
, boŞ 
isGlob®FunùiÚ
 = f®£, boŞ 
isPriv©e
 = f®£, boŞ 
isFš®
 = f®£, boŞ 
isOv”ride
 = f®£, boŞ 
isSh¬ed
 = f®£, 
asSNameS·û
 *
ns
 = 0);

192 
	`AddSütFunùiÚ
(
asCSütFunùiÚ
 *
func
);

193 
	`AddImpÜ‹dFunùiÚ
(
id
, cÚ¡ *
Çme
, cÚ¡ 
asCD©aTy³
 &
»tuºTy³
,‡sCD©aTy³ *
·¿ms
, 
asETy³Modif›rs
 *
šOutFÏgs
, 
·¿mCouÁ
, cÚ¡ 
asCSŒšg
 &
moduËName
);

194 
	`AddFuncDef
(cÚ¡ *
Çme
, 
asSNameS·û
 *
ns
);

196 
	`G‘NextImpÜ‹dFunùiÚId
();

198 
asCSütFunùiÚ
 *
	$G‘ImpÜ‹dFunùiÚ
(
funcId
) const;

200 
asCObjeùTy³
 *
	`G‘ObjeùTy³
(cÚ¡ *
ty³
, 
asSNameS·û
 *
ns
);

202 
asCGlob®Prİ”ty
 *
	`AÎoÿ‹Glob®Prİ”ty
(cÚ¡ *
Çme
, cÚ¡ 
asCD©aTy³
 &
dt
, 
asSNameS·û
 *
ns
);

205 
asCSŒšg
 
Çme
;

207 
asCSütEngše
 *
’gše
;

208 
asCBud”
 *
bud”
;

209 *
u£rD©a
;

210 
asDWORD
 
acûssMask
;

211 
asSNameS·û
 *
deçuÉName¥aû
;

214 
asCA¼ay
<
asCSütFunùiÚ
 *> 
sütFunùiÚs
;

216 
asCA¼ay
<
asCSütFunùiÚ
 *> 
glob®FunùiÚs
;

218 
asCA¼ay
<
sBšdInfo
 *> 
bšdInfÜm©iÚs
;

221 
asCA¼ay
<
asCGlob®Prİ”ty
 *> 
sütGlob®s
;

222 
boŞ
 
isGlob®V¬In™Ÿlized
;

225 
asCA¼ay
<
asCObjeùTy³
*> 
şassTy³s
;

227 
asCA¼ay
<
asCObjeùTy³
*> 
’umTy³s
;

229 
asCA¼ay
<
asCObjeùTy³
*> 
ty³Defs
;

231 
asCA¼ay
<
asCSütFunùiÚ
*> 
funcDefs
;

234 
END_AS_NAMESPACE


	@../hdr/script/as_objecttype.h

41 #iâdeà
AS_OBJECTTYPE_H


42 
	#AS_OBJECTTYPE_H


	)

44 
	~"as_©omic.h
"

45 
	~"as_¡ršg.h
"

46 
	~"as_´İ”ty.h
"

47 
	~"as_¬¿y.h
"

48 
	~"as_sütfunùiÚ.h
"

50 
BEGIN_AS_NAMESPACE


57 cÚ¡ 
asDWORD
 
	gasOBJ_IMPLICIT_HANDLE
 = 0x00400000;

58 cÚ¡ 
asDWORD
 
	gasOBJ_TYPEDEF
 = 0x40000000;

59 cÚ¡ 
asDWORD
 
	gasOBJ_ENUM
 = 0x10000000;

60 cÚ¡ 
asDWORD
 
	gasOBJ_TEMPLATE_SUBTYPE
 = 0x20000000;

76 
	sasSTy³Behaviour


78 
asSTy³Behaviour
()

80 
	mçùÜy
 = 0;

81 
	mli¡FaùÜy
 = 0;

82 
	mcİyçùÜy
 = 0;

83 
	mcÚ¡ruù
 = 0;

84 
	mcİycÚ¡ruù
 = 0;

85 
	mde¡ruù
 = 0;

86 
	mcİy
 = 0;

87 
	madd»f
 = 0;

88 
	m»Ëa£
 = 0;

89 
	mgcG‘RefCouÁ
 = 0;

90 
	mgcS‘FÏg
 = 0;

91 
	mgcG‘FÏg
 = 0;

92 
	mgcEnumReã»nûs
 = 0;

93 
	mgcR–—£AÎReã»nûs
 = 0;

94 
	m‹m¶©eC®lback
 = 0;

97 
	mçùÜy
;

98 
	mli¡FaùÜy
;

99 
	mcİyçùÜy
;

100 
	mcÚ¡ruù
;

101 
	mcİycÚ¡ruù
;

102 
	mde¡ruù
;

103 
	mcİy
;

104 
	madd»f
;

105 
	m»Ëa£
;

106 
	m‹m¶©eC®lback
;

109 
	mgcG‘RefCouÁ
;

110 
	mgcS‘FÏg
;

111 
	mgcG‘FÏg
;

112 
	mgcEnumReã»nûs
;

113 
	mgcR–—£AÎReã»nûs
;

115 
	masCA¼ay
<> 
	mçùÜ›s
;

116 
	masCA¼ay
<> 
	mcÚ¡ruùÜs
;

117 
	masCA¼ay
<> 
	mİ”©Üs
;

120 
	sasSEnumV®ue


122 
asCSŒšg
 
	mÇme
;

123 
	mv®ue
;

126 
şass
 
	gasCSütEngše
;

127 
	gasSNameS·û
;

129 
Regi¡”ObjeùTy³GCBehaviours
(
asCSütEngše
 *
’gše
);

131 şas 
	casCObjeùTy³
 : 
public
 
asIObjeùTy³


133 
public
:

137 
asISütEngše
 *
	$G‘Engše
() const;

138 cÚ¡ *
	$G‘CÚfigGroup
() const;

139 
asDWORD
 
	$G‘AcûssMask
() const;

142 
	$AddRef
() const;

143 
	$R–—£
() const;

146 cÚ¡ *
	$G‘Name
() const;

147 cÚ¡ *
	$G‘Name¥aû
() const;

148 
asIObjeùTy³
 *
	$G‘Ba£Ty³
() const;

149 
boŞ
 
	$D”ivesFrom
(cÚ¡ 
asIObjeùTy³
 *
objTy³
) const;

150 
asDWORD
 
	$G‘FÏgs
() const;

151 
asUINT
 
	$G‘Size
() const;

152 
	$G‘Ty³Id
() const;

153 
	$G‘SubTy³Id
() const;

154 
asIObjeùTy³
 *
	$G‘SubTy³
() const;

157 
asUINT
 
	$G‘IÁ”çûCouÁ
() const;

158 
asIObjeùTy³
 *
	$G‘IÁ”çû
(
asUINT
 
šdex
) const;

159 
boŞ
 
	$Im¶em’ts
(cÚ¡ 
asIObjeùTy³
 *
objTy³
) const;

162 
asUINT
 
	$G‘FaùÜyCouÁ
() const;

163 #ifdeà
AS_DEPRECATED


165 
	$G‘FaùÜyIdByIndex
(
asUINT
 
šdex
) const;

166 
	$G‘FaùÜyIdByDeş
(cÚ¡ *
deş
) const;

168 
asISütFunùiÚ
 *
	$G‘FaùÜyByIndex
(
asUINT
 
šdex
) const;

169 
asISütFunùiÚ
 *
	$G‘FaùÜyByDeş
(cÚ¡ *
deş
) const;

172 
asUINT
 
	$G‘M‘hodCouÁ
() const;

173 #ifdeà
AS_DEPRECATED


175 
	$G‘M‘hodIdByIndex
(
asUINT
 
šdex
, 
boŞ
 
g‘Vœtu®
) const;

176 
	$G‘M‘hodIdByName
(cÚ¡ *
Çme
, 
boŞ
 
g‘Vœtu®
) const;

177 
	$G‘M‘hodIdByDeş
(cÚ¡ *
deş
, 
boŞ
 
g‘Vœtu®
) const;

179 
asISütFunùiÚ
 *
	$G‘M‘hodByIndex
(
asUINT
 
šdex
, 
boŞ
 
g‘Vœtu®
) const;

180 
asISütFunùiÚ
 *
	$G‘M‘hodByName
(cÚ¡ *
Çme
, 
boŞ
 
g‘Vœtu®
) const;

181 
asISütFunùiÚ
 *
	$G‘M‘hodByDeş
(cÚ¡ *
deş
, 
boŞ
 
g‘Vœtu®
) const;

184 
asUINT
 
	$G‘Prİ”tyCouÁ
() const;

185 
	$G‘Prİ”ty
(
asUINT
 
šdex
, cÚ¡ **
Çme
, *
ty³Id
, 
boŞ
 *
isPriv©e
, *
off£t
, boŞ *
isReã»nû
, 
asDWORD
 *
acûssMask
) const;

186 cÚ¡ *
	$G‘Prİ”tyDeş¬©iÚ
(
asUINT
 
šdex
) const;

189 
asUINT
 
	$G‘BehaviourCouÁ
() const;

190 
asISütFunùiÚ
 *
	$G‘BehaviourByIndex
(
asUINT
 
šdex
, 
asEBehaviours
 *
outBehaviour
) const;

193 *
	`S‘U£rD©a
(*
d©a
, 
asPWORD
 
ty³
);

194 *
	$G‘U£rD©a
(
asPWORD
 
ty³
) const;

199 
public
:

200 
	`asCObjeùTy³
(
asCSütEngše
 *
’gše
);

201 ~
	`asCObjeùTy³
();

203 
	`G‘RefCouÁ
();

204 
	`S‘GCFÏg
();

205 
boŞ
 
	`G‘GCFÏg
();

206 
	`EnumReã»nûs
(
asISütEngše
 *);

207 
	`R–—£AÎHªdËs
(
asISütEngše
 *);

209 
	`R–—£AÎFunùiÚs
();

211 
boŞ
 
	$IsIÁ”çû
() const;

212 
boŞ
 
	$IsSh¬ed
() const;

214 
asCObjeùPrİ”ty
 *
	`AddPrİ”tyToCÏss
(cÚ¡ 
asCSŒšg
 &
Çme
, cÚ¡ 
asCD©aTy³
 &
dt
, 
boŞ
 
isPriv©e
);

216 
asCSŒšg
 
Çme
;

217 
asSNameS·û
 *
ÇmeS·û
;

218 
size
;

219 
asCA¼ay
<
asCObjeùPrİ”ty
*> 
´İ”t›s
;

220 
asCA¼ay
<> 
m‘hods
;

221 
asCA¼ay
<
asCObjeùTy³
*> 
š‹rçûs
;

222 
asCA¼ay
<
asSEnumV®ue
*> 
’umV®ues
;

223 
asCObjeùTy³
 * 
d”ivedFrom
;

224 
asCA¼ay
<
asCSütFunùiÚ
*> 
vœtu®FunùiÚTabË
;

226 
asDWORD
 
æags
;

227 
asDWORD
 
acûssMask
;

229 
asSTy³Behaviour
 
beh
;

232 
asCD©aTy³
 
‹m¶©eSubTy³
;

233 
boŞ
 
acû±V®ueSubTy³
;

234 
boŞ
 
acû±RefSubTy³
;

236 
asCSütEngše
 *
’gše
;

237 
asCA¼ay
<
asPWORD
> 
u£rD©a
;

239 
´Ùeùed
:

240 
ä›nd
 
şass
 
asCSütEngše
;

241 
	`asCObjeùTy³
();

243 
mubË
 
asCAtomic
 
»fCouÁ
;

244 
mubË
 
boŞ
 
gcFÏg
;

247 
END_AS_NAMESPACE


	@../hdr/script/as_outputbuffer.h

40 #iâdeà
AS_OUTPUTBUFFER_H


41 
	#AS_OUTPUTBUFFER_H


	)

43 
	~"as_cÚfig.h
"

45 #iâdeà
AS_NO_COMPILER


47 
	~"as_¡ršg.h
"

48 
	~"as_¬¿y.h
"

50 
BEGIN_AS_NAMESPACE


52 
	gasSSy¡emFunùiÚIÁ”çû
;

53 
şass
 
	gasCSütEngše
;

55 şas 
	casCOuutBufãr


57 
	mpublic
:

58 ~
asCOuutBufãr
 ();

59 
CË¬
();

60 
C®lback
(
asSMes§geInfo
 *
msg
);

61 
Aµ’d
(
asCOuutBufãr
 &
š
);

62 
S’dToC®lback
(
asCSütEngše
 *
’gše
, 
asSSy¡emFunùiÚIÁ”çû
 *
func
, *
obj
);

64 
	smes§ge_t


66 
asCSŒšg
 
	m£ùiÚ
;

67 
	mrow
;

68 
	mcŞ
;

69 
asEMsgTy³
 
	mty³
;

70 
asCSŒšg
 
	mmsg
;

73 
	gasCA¼ay
<
	gmes§ge_t
*> 
	gmes§ges
;

76 
	gEND_AS_NAMESPACE


	@../hdr/script/as_parser.h

40 #iâdeà
AS_PARSER_H


41 
	#AS_PARSER_H


	)

43 
	~"as_süŠode.h
"

44 
	~"as_sütcode.h
"

45 
	~"as_bud”.h
"

46 
	~"as_tok’iz”.h
"

48 
BEGIN_AS_NAMESPACE


50 şas 
	casCP¬£r


52 
	mpublic
:

53 
asCP¬£r
(
asCBud”
 *
bud”
);

54 ~
asCP¬£r
();

56 
P¬£FunùiÚDefš™iÚ
(
asCSütCode
 *
süt
);

57 
P¬£Prİ”tyDeş¬©iÚ
(
asCSütCode
 *
süt
);

58 
P¬£D©aTy³
(
asCSütCode
 *
süt
, 
boŞ
 
isR‘uºTy³
);

59 
P¬£Tem¶©eDeş
(
asCSütCode
 *
süt
);

61 #iâdeà
AS_NO_COMPILER


62 
P¬£Süt
(
asCSütCode
 *
süt
);

65 
P¬£S‹m’tBlock
(
asCSütCode
 *
süt
, 
asCSütNode
 *
block
);

66 
P¬£Glob®V¬In™
(
asCSütCode
 *
süt
, 
asCSütNode
 *
š™
);

67 
P¬£Ex´essiÚ
(
asCSütCode
 *
süt
);

70 
asCSütNode
 *
G‘SütNode
();

72 
	m´Ùeùed
:

73 
Re£t
();

75 
G‘Tok’
(
sTok’
 *
tok’
);

76 
RewšdTo
(cÚ¡ 
sTok’
 *
tok’
);

77 
E¼Ü
(cÚ¡ *
‹xt
, 
sTok’
 *
tok’
);

79 
asCSütNode
 *
C»©eNode
(
eSütNode
 
ty³
);

81 
asCSütNode
 *
P¬£FunùiÚDefš™iÚ
();

82 
asCSütNode
 *
P¬£P¬am‘”Li¡
();

83 
asCSütNode
 *
Su³rficŸÎyP¬£Ex´essiÚ
();

84 
asCSütNode
 *
P¬£Ty³
(
boŞ
 
®lowCÚ¡
, boŞ 
®lowV¬ŸbËTy³
 = 
çl£
);

85 
asCSütNode
 *
P¬£Ty³Mod
(
boŞ
 
isP¬am
);

86 
P¬£O±iÚ®Scİe
(
asCSütNode
 *
node
);

87 
asCSütNode
 *
P¬£R—lTy³
();

88 
asCSütNode
 *
P¬£D©aTy³
(
boŞ
 
®lowV¬ŸbËTy³
 = 
çl£
);

89 
asCSütNode
 *
P¬£Id’tif›r
();

91 
boŞ
 
IsR—lTy³
(
tok’Ty³
);

92 
boŞ
 
IsD©aTy³
(cÚ¡ 
sTok’
 &
tok’
);

94 #iâdeà
AS_NO_COMPILER


96 
asCSütNode
 *
Su³rficŸÎyP¬£S‹m’tBlock
();

97 
asCSütNode
 *
Su³rficŸÎyP¬£Glob®V¬In™
();

98 
asCSütNode
 *
P¬£S‹m’tBlock
();

99 
asCSütNode
 *
P¬£S‹m’t
();

100 
asCSütNode
 *
P¬£Ex´essiÚS‹m’t
();

101 
asCSütNode
 *
P¬£Sw™ch
();

102 
asCSütNode
 *
P¬£Ca£
();

103 
asCSütNode
 *
P¬£If
();

104 
asCSütNode
 *
P¬£FÜ
();

105 
asCSütNode
 *
P¬£Whe
();

106 
asCSütNode
 *
P¬£DoWhe
();

107 
asCSütNode
 *
P¬£R‘uº
();

108 
asCSütNode
 *
P¬£B»ak
();

109 
asCSütNode
 *
P¬£CÚtšue
();

112 
asCSütNode
 *
P¬£Deş¬©iÚ
();

113 
asCSütNode
 *
P¬£ImpÜt
();

114 
asCSütNode
 *
P¬£Süt
(
boŞ
 
šBlock
);

115 
asCSütNode
 *
P¬£Name¥aû
();

116 
asCSütNode
 *
P¬£FunùiÚ
(
boŞ
 
isM‘hod
 = 
çl£
);

117 
asCSütNode
 *
P¬£FuncDef
();

118 
asCSütNode
 *
P¬£Glob®V¬
();

119 
asCSütNode
 *
P¬£CÏss
();

120 
asCSütNode
 *
P¬£In™Li¡
();

121 
asCSütNode
 *
P¬£IÁ”çû
();

122 
asCSütNode
 *
P¬£IÁ”çûM‘hod
();

123 
asCSütNode
 *
P¬£Vœtu®Prİ”tyDeş
(
boŞ
 
isM‘hod
, boŞ 
isIÁ”çû
);

124 
asCSütNode
 *
P¬£Enum”©iÚ
();

125 
asCSütNode
 *
P¬£Ty³def
();

126 
P¬£M‘hodOv”rideBehaviÜs
(
asCSütNode
 *
funcNode
);

127 
boŞ
 
IsV¬Deş
();

128 
boŞ
 
IsVœtu®Prİ”tyDeş
();

129 
boŞ
 
IsFuncDeş
(boŞ 
isM‘hod
);

132 
asCSütNode
 *
P¬£Assignm’t
();

133 
asCSütNode
 *
P¬£AssignO³¿tÜ
();

134 
asCSütNode
 *
P¬£CÚd™iÚ
();

135 
asCSütNode
 *
P¬£Ex´essiÚ
();

136 
asCSütNode
 *
P¬£Ex´T”m
();

137 
asCSütNode
 *
P¬£Ex´O³¿tÜ
();

138 
asCSütNode
 *
P¬£Ex´P»Op
();

139 
asCSütNode
 *
P¬£Ex´Po¡Op
();

140 
asCSütNode
 *
P¬£Ex´V®ue
();

141 
asCSütNode
 *
P¬£ArgLi¡
();

142 
asCSütNode
 *
P¬£FunùiÚC®l
();

143 
asCSütNode
 *
P¬£V¬ŸbËAcûss
();

144 
asCSütNode
 *
P¬£CÚ¡ruùC®l
();

145 
asCSütNode
 *
P¬£Ca¡
();

146 
asCSütNode
 *
P¬£CÚ¡ªt
();

147 
asCSütNode
 *
P¬£SŒšgCÚ¡ªt
();

149 
boŞ
 
IsCÚ¡ªt
(
tok’Ty³
);

150 
boŞ
 
IsO³¿tÜ
(
tok’Ty³
);

151 
boŞ
 
IsP»O³¿tÜ
(
tok’Ty³
);

152 
boŞ
 
IsPo¡O³¿tÜ
(
tok’Ty³
);

153 
boŞ
 
IsAssignO³¿tÜ
(
tok’Ty³
);

154 
boŞ
 
IsFunùiÚC®l
();

156 
boŞ
 
Id’tif›rIs
(cÚ¡ 
sTok’
 &
t
, cÚ¡ *
¡r
);

157 
boŞ
 
CheckTem¶©eTy³
(
sTok’
 &
t
);

160 
asCSütNode
 *
P¬£Tok’
(
tok’
);

161 
asCSütNode
 *
P¬£OÃOf
(*
tok’s
, 
num
);

163 
asCSŒšg
 
Ex³ùedTok’
(cÚ¡ *
tok’
);

164 
asCSŒšg
 
Ex³ùedTok’s
(cÚ¡ *
tok’1
, cÚ¡ *
tok’2
);

165 
asCSŒšg
 
Ex³ùedOÃOf
(*
tok’s
, 
couÁ
);

166 
asCSŒšg
 
Ex³ùedOÃOf
(cÚ¡ **
tok’s
, 
couÁ
);

168 
boŞ
 
	m”rÜWheP¬sšg
;

169 
boŞ
 
	misSyÁaxE¼Ü
;

170 
boŞ
 
	mcheckV®idTy³s
;

171 
boŞ
 
	misP¬sšgAµIÁ”çû
;

173 
asCSütEngše
 *
	m’gše
;

174 
asCBud”
 *
	mbud”
;

175 
asCSütCode
 *
	msüt
;

176 
asCSütNode
 *
	msütNode
;

178 
size_t
 
	msourûPos
;

181 
	gEND_AS_NAMESPACE


	@../hdr/script/as_property.h

40 #iâdeà
AS_PROPERTY_H


41 
	#AS_PROPERTY_H


	)

43 
	~"as_¡ršg.h
"

44 
	~"as_d©©y³.h
"

45 
	~"as_©omic.h
"

46 
	~"as_sütfunùiÚ.h
"

48 
BEGIN_AS_NAMESPACE


50 
	gasSNameS·û
;

52 şas 
	casCObjeùPrİ”ty


54 
	mpublic
:

55 
	$asCObjeùPrİ”ty
(è{
acûssMask
 = 0xFFFFFFFF;}

56 
asCSŒšg
 
Çme
;

57 
asCD©aTy³
 
ty³
;

58 
by‹Off£t
;

59 
boŞ
 
isPriv©e
;

60 
asDWORD
 
acûssMask
;

61 
	}
};

63 şas 
	casCGlob®Prİ”ty


65 
	mpublic
:

66 
asCGlob®Prİ”ty
();

67 ~
asCGlob®Prİ”ty
();

69 
AddRef
();

70 
R–—£
();

71 
G‘RefCouÁ
();

73 *
G‘Add»ssOfV®ue
();

74 
AÎoÿ‹MemÜy
();

75 
S‘Regi¡”edAdd»ss
(*
p
);

76 *
	$G‘Regi¡”edAdd»ss
() const;

78 
asCSŒšg
 
Çme
;

79 
asCD©aTy³
 
ty³
;

80 
asUINT
 
id
;

81 
asSNameS·û
 *
ÇmeS·û
;

83 
	`S‘In™Func
(
asCSütFunùiÚ
 *
š™Func
);

84 
asCSütFunùiÚ
 *
	`G‘In™Func
();

86 
	`Regi¡”GCBehaviours
(
asCSütEngše
 *
’gše
);

89 
	`S‘GCFÏg
();

90 
boŞ
 
	`G‘GCFÏg
();

91 
	`EnumReã»nûs
(
asISütEngše
 *);

92 
	`R–—£AÎHªdËs
(
asISütEngše
 *);

95 *
»®Add»ss
;

97 
boŞ
 
memÜyAÎoÿ‹d
;

98 *
memÜy
;

99 
asQWORD
 
¡Üage
;

101 
asCSütFunùiÚ
 *
š™Func
;

103 
asDWORD
 
acûssMask
;

107 
asCAtomic
 
»fCouÁ
;

108 
boŞ
 
gcFÏg
;

111 
END_AS_NAMESPACE


	@../hdr/script/as_restore.h

39 #iâdeà
AS_RESTORE_H


40 
	#AS_RESTORE_H


	)

42 
	~"as_sü‹ngše.h
"

43 
	~"as_cÚ‹xt.h
"

44 
	~"as_m­.h
"

46 
BEGIN_AS_NAMESPACE


48 şas 
	casCR—d”


50 
	mpublic
:

51 
asCR—d”
(
asCModuË
 *
moduË
, 
asIBš¬ySŒ—m
 *
¡»am
, 
asCSütEngše
 *
’gše
);

53 
R—d
();

55 
	m´Ùeùed
:

56 
asCModuË
 *
moduË
;

57 
asIBš¬ySŒ—m
 *
	m¡»am
;

58 
asCSütEngše
 *
	m’gše
;

59 
boŞ
 
	m”rÜ
;

61 
R—dIÂ”
();

63 
R—dD©a
(*
d©a
, 
asUINT
 
size
);

64 
R—dSŒšg
(
asCSŒšg
 *
¡r
);

65 
asCSütFunùiÚ
 *
R—dFunùiÚ
(
boŞ
 
addToModuË
 = 
Œue
, boŞ 
addToEngše
 =rue, boŞ 
addToGC
 =rue);

66 
R—dFunùiÚSigÇtu»
(
asCSütFunùiÚ
 *
func
);

67 
R—dGlob®Prİ”ty
();

68 
R—dObjeùPrİ”ty
(
asCObjeùTy³
 *
Ù
);

69 
R—dD©aTy³
(
asCD©aTy³
 *
dt
);

70 
asCObjeùTy³
 * 
R—dObjeùTy³
();

71 
R—dObjeùTy³Deş¬©iÚ
(
asCObjeùTy³
 *
Ù
, 
pha£
);

72 
R—dBy‹Code
(
asCSütFunùiÚ
 *
func
);

73 
asWORD
 
R—dEncodedUIÁ16
();

74 
asUINT
 
R—dEncodedUIÁ
();

75 
asQWORD
 
R—dEncodedUIÁ64
();

77 
R—dU£dTy³Ids
();

78 
R—dU£dFunùiÚs
();

79 
R—dU£dGlob®Prİs
();

80 
R—dU£dSŒšgCÚ¡ªts
();

81 
R—dU£dObjeùPrİs
();

83 
asCObjeùTy³
 * 
FšdObjeùTy³
(
idx
);

84 
FšdTy³Id
(
idx
);

85 
FšdObjeùPrİOff£t
(
asWORD
 
šdex
);

86 
asCSütFunùiÚ
 *
FšdFunùiÚ
(
idx
);

89 
T¿n¦©eFunùiÚ
(
asCSütFunùiÚ
 *
func
);

90 
C®cuÏ‹Adju¡m’tByPos
(
asCSütFunùiÚ
 *
func
);

91 
Adju¡SckPos™iÚ
(
pos
);

92 
Adju¡G‘Off£t
(
off£t
, 
asCSütFunùiÚ
 *
func
, 
asDWORD
 
´og¿mPos
);

93 
C®cuÏ‹SckN“ded
(
asCSütFunùiÚ
 *
func
);

94 
asCSütFunùiÚ
 *
G‘C®ËdFunùiÚ
×sCSütFunùiÚ *
func
, 
asDWORD
 
´og¿mPos
);

97 
	masCA¼ay
<> 
	mu£dTy³Ids
;

98 
	masCA¼ay
<
	masCObjeùTy³
*> 
	mu£dTy³s
;

99 
	masCA¼ay
<
	masCSütFunùiÚ
*> 
	mu£dFunùiÚs
;

100 
	masCA¼ay
<*> 
	mu£dGlob®Prİ”t›s
;

101 
	masCA¼ay
<> 
	mu£dSŒšgCÚ¡ªts
;

103 
	masCA¼ay
<
	masCSütFunùiÚ
*> 
	m§vedFunùiÚs
;

104 
	masCA¼ay
<
	masCD©aTy³
> 
	m§vedD©aTy³s
;

105 
	masCA¼ay
<
	masCSŒšg
> 
	m§vedSŒšgs
;

107 
	masCA¼ay
<> 
	madju¡ByPos
;

108 
	masCA¼ay
<> 
	madju¡Neg©iveSckByPos
;

110 
	sSObjPrİ


112 
asCObjeùTy³
 *
	mobjTy³
;

113 
	moff£t
;

115 
	gasCA¼ay
<
	gSObjPrİ
> 
	gu£dObjeùPrİ”t›s
;

117 
	gasCM­
<*,
	gboŞ
> 
	gexi¡šgSh¬ed
;

118 
	gasCM­
<
	gasCSütFunùiÚ
*,
	gboŞ
> 
	gdÚtT¿n¦©e
;

121 #iâdeà
AS_NO_COMPILER


123 şas 
	casCWr™”


125 
	mpublic
:

126 
asCWr™”
(
asCModuË
 *
moduË
, 
asIBš¬ySŒ—m
 *
¡»am
, 
asCSütEngše
 *
’gše
);

128 
Wr™e
();

130 
	m´Ùeùed
:

131 
asCModuË
 *
moduË
;

132 
asIBš¬ySŒ—m
 *
	m¡»am
;

133 
asCSütEngše
 *
	m’gše
;

135 
Wr™eD©a
(cÚ¡ *
d©a
, 
asUINT
 
size
);

137 
Wr™eSŒšg
(
asCSŒšg
 *
¡r
);

138 
Wr™eFunùiÚ
(
asCSütFunùiÚ
 *
func
);

139 
Wr™eFunùiÚSigÇtu»
(
asCSütFunùiÚ
 *
func
);

140 
Wr™eGlob®Prİ”ty
(
asCGlob®Prİ”ty
 *
´İ
);

141 
Wr™eObjeùPrİ”ty
(
asCObjeùPrİ”ty
 *
´İ
);

142 
Wr™eD©aTy³
(cÚ¡ 
asCD©aTy³
 *
dt
);

143 
Wr™eObjeùTy³
(
asCObjeùTy³
 *
Ù
);

144 
Wr™eObjeùTy³Deş¬©iÚ
(
asCObjeùTy³
 *
Ù
, 
pha£
);

145 
Wr™eBy‹Code
(
asCSütFunùiÚ
 *
func
);

146 
Wr™eEncodedIÁ64
(
asINT64
 
i
);

149 
FšdObjeùTy³Idx
(
asCObjeùTy³
*);

150 
FšdTy³IdIdx
(
ty³Id
);

151 
FšdFunùiÚIndex
(
asCSütFunùiÚ
 *
func
);

152 
FšdGlob®PrİPŒIndex
(*);

153 
FšdSŒšgCÚ¡ªtIndex
(
id
);

154 
FšdObjeùPrİIndex
(
off£t
, 
ty³Id
);

156 
C®cuÏ‹Adju¡m’tByPos
(
asCSütFunùiÚ
 *
func
);

157 
Adju¡SckPos™iÚ
(
pos
);

158 
Adju¡Prog¿mPos™iÚ
(
pos
);

159 
Adju¡G‘Off£t
(
off£t
, 
asCSütFunùiÚ
 *
func
, 
asDWORD
 
´og¿mPos
);

162 
Wr™eU£dTy³Ids
();

163 
Wr™eU£dFunùiÚs
();

164 
Wr™eU£dGlob®Prİs
();

165 
Wr™eU£dSŒšgCÚ¡ªts
();

166 
Wr™eU£dObjeùPrİs
();

169 
	masCA¼ay
<> 
	mu£dTy³Ids
;

170 
	masCA¼ay
<
	masCObjeùTy³
*> 
	mu£dTy³s
;

171 
	masCA¼ay
<
	masCSütFunùiÚ
*> 
	mu£dFunùiÚs
;

172 
	masCA¼ay
<*> 
	mu£dGlob®Prİ”t›s
;

173 
	masCA¼ay
<> 
	mu£dSŒšgCÚ¡ªts
;

174 
	masCM­
<, > 
	m¡ršgIdToIndexM­
;

176 
	masCA¼ay
<
	masCSütFunùiÚ
*> 
	m§vedFunùiÚs
;

177 
	masCA¼ay
<
	masCD©aTy³
> 
	m§vedD©aTy³s
;

178 
	masCA¼ay
<
	masCSŒšg
> 
	m§vedSŒšgs
;

179 
	masCM­
<
	masCSŒšgPoš‹r
, > 
	m¡ršgToIdM­
;

180 
	masCA¼ay
<> 
	madju¡SckByPos
;

181 
	masCA¼ay
<> 
	madju¡Neg©iveSckByPos
;

182 
	masCA¼ay
<> 
	mby‹codeNbrByPos
;

184 
	sSObjPrİ


186 
asCObjeùTy³
 *
	mobjTy³
;

187 
	moff£t
;

189 
	gasCA¼ay
<
	gSObjPrİ
> 
	gu£dObjeùPrİ”t›s
;

194 
	gEND_AS_NAMESPACE


	@../hdr/script/as_scriptcode.h

40 #iâdeà
AS_SCRIPTCODE_H


41 
	#AS_SCRIPTCODE_H


	)

43 
	~"as_¬¿y.h
"

44 
	~"as_¡ršg.h
"

46 
BEGIN_AS_NAMESPACE


48 şas 
	casCSütCode


50 
	mpublic
:

51 
asCSütCode
();

52 ~
asCSütCode
();

54 
S‘Code
(cÚ¡ *
Çme
, cÚ¡ *
code
, 
boŞ
 
makeCİy
);

55 
S‘Code
(cÚ¡ *
Çme
, cÚ¡ *
code
, 
size_t
 
Ëngth
, 
boŞ
 
makeCİy
);

57 
CÚv”tPosToRowCŞ
(
size_t
 
pos
, *
row
, *
cŞ
);

59 
boŞ
 
Tok’Equ®s
(
size_t
 
pos
, size_ˆ
Ën
, cÚ¡ *
¡r
);

61 
asCSŒšg
 
	mÇme
;

62 *
	mcode
;

63 
size_t
 
	mcodeL’gth
;

64 
boŞ
 
	msh¬edCode
;

65 
	midx
;

66 
	mlšeOff£t
;

67 
	masCA¼ay
<
	msize_t
> 
	mlšePos™iÚs
;

70 
	gEND_AS_NAMESPACE


	@../hdr/script/as_scriptengine.h

40 #iâdeà
AS_SCRIPTENGINE_H


41 
	#AS_SCRIPTENGINE_H


	)

43 
	~"as_cÚfig.h
"

44 
	~"as_©omic.h
"

45 
	~"as_sütfunùiÚ.h
"

46 
	~"as_¬¿y.h
"

47 
	~"as_d©©y³.h
"

48 
	~"as_objeùty³.h
"

49 
	~"as_moduË.h
"

50 
	~"as_»¡Üe.h
"

51 
	~"as_ÿÎfunc.h
"

52 
	~"as_cÚfiggroup.h
"

53 
	~"as_memÜy.h
"

54 
	~"as_gc.h
"

55 
	~"as_tok’iz”.h
"

57 
BEGIN_AS_NAMESPACE


59 
şass
 
	gasCBud”
;

60 
şass
 
	gasCCÚ‹xt
;

63 
	gsBšdInfo
;

71 
	sasSNameS·û


73 
asCSŒšg
 
	mÇme
;

79 şas 
	casCSütEngše
 : 
public
 
asISütEngše


84 
public
:

86 
vœtu®
 
	$AddRef
() const;

87 
vœtu®
 
	$R–—£
() const;

90 
vœtu®
 
	`S‘EngšePrİ”ty
(
asEEngšePrİ
 
´İ”ty
, 
asPWORD
 
v®ue
);

91 
vœtu®
 
asPWORD
 
	$G‘EngšePrİ”ty
(
asEEngšePrİ
 
´İ”ty
) const;

94 
vœtu®
 
	`S‘Mes§geC®lback
(cÚ¡ 
asSFuncPŒ
 &
ÿÎback
, *
obj
, 
asDWORD
 
ÿÎCÚv
);

95 
vœtu®
 
	`CË¬Mes§geC®lback
();

96 
vœtu®
 
	`Wr™eMes§ge
(cÚ¡ *
£ùiÚ
, 
row
, 
cŞ
, 
asEMsgTy³
 
ty³
, cÚ¡ *
mes§ge
);

99 
vœtu®
 
	`S‘JITComp”
(
asIJITComp”
 *
comp”
);

100 
vœtu®
 
asIJITComp”
 *
	$G‘JITComp”
() const;

103 
vœtu®
 
	`Regi¡”Glob®FunùiÚ
(cÚ¡ *
deş¬©iÚ
, cÚ¡ 
asSFuncPŒ
 &
funcPoš‹r
, 
asDWORD
 
ÿÎCÚv
);

104 
vœtu®
 
asUINT
 
	$G‘Glob®FunùiÚCouÁ
() const;

105 #ifdeà
AS_DEPRECATED


107 
vœtu®
 
	$G‘Glob®FunùiÚIdByIndex
(
asUINT
 
šdex
) const;

109 
vœtu®
 
asISütFunùiÚ
 *
	$G‘Glob®FunùiÚByIndex
(
asUINT
 
šdex
) const;

110 
vœtu®
 
asISütFunùiÚ
 *
	$G‘Glob®FunùiÚByDeş
(cÚ¡ *
deş¬©iÚ
) const;

113 
vœtu®
 
	`Regi¡”Glob®Prİ”ty
(cÚ¡ *
deş¬©iÚ
, *
poš‹r
);

114 
vœtu®
 
asUINT
 
	$G‘Glob®Prİ”tyCouÁ
() const;

115 
vœtu®
 
	$G‘Glob®Prİ”tyByIndex
(
asUINT
 
šdex
, cÚ¡ **
Çme
, cÚ¡ **
ÇmeS·û
 = 0, *
ty³Id
 = 0, 
boŞ
 *
isCÚ¡
 = 0, cÚ¡ **
cÚfigGroup
 = 0, **
poš‹r
 = 0, 
asDWORD
 *
acûssMask
 = 0) const;

116 
vœtu®
 
	$G‘Glob®Prİ”tyIndexByName
(cÚ¡ *
Çme
) const;

117 
vœtu®
 
	$G‘Glob®Prİ”tyIndexByDeş
(cÚ¡ *
deş
) const;

120 
vœtu®
 
	`Regi¡”ObjeùTy³
(cÚ¡ *
obj
, 
by‹Size
, 
asDWORD
 
æags
);

121 
vœtu®
 
	`Regi¡”ObjeùPrİ”ty
(cÚ¡ *
obj
, cÚ¡ *
deş¬©iÚ
, 
by‹Off£t
);

122 
vœtu®
 
	`Regi¡”ObjeùM‘hod
(cÚ¡ *
obj
, cÚ¡ *
deş¬©iÚ
, cÚ¡ 
asSFuncPŒ
 &
funcPoš‹r
, 
asDWORD
 
ÿÎCÚv
);

123 
vœtu®
 
	`Regi¡”ObjeùBehaviour
(cÚ¡ *
obj
, 
asEBehaviours
 
behaviour
, cÚ¡ *
deş¬©iÚ
, cÚ¡ 
asSFuncPŒ
 &
funcPoš‹r
, 
asDWORD
 
ÿÎCÚv
);

124 
vœtu®
 
	`Regi¡”IÁ”çû
(cÚ¡ *
Çme
);

125 
vœtu®
 
	`Regi¡”IÁ”çûM‘hod
(cÚ¡ *
štf
, cÚ¡ *
deş¬©iÚ
);

126 
vœtu®
 
asUINT
 
	$G‘ObjeùTy³CouÁ
() const;

127 
vœtu®
 
asIObjeùTy³
 *
	$G‘ObjeùTy³ByIndex
(
asUINT
 
šdex
) const;

128 
vœtu®
 
asIObjeùTy³
 *
	$G‘ObjeùTy³ByName
(cÚ¡ *
Çme
) const;

131 
vœtu®
 
	`Regi¡”SŒšgFaùÜy
(cÚ¡ *
d©©y³
, cÚ¡ 
asSFuncPŒ
 &
çùÜyFunc
, 
asDWORD
 
ÿÎCÚv
);

132 
vœtu®
 
	$G‘SŒšgFaùÜyR‘uºTy³Id
() const;

135 
vœtu®
 
	`Regi¡”DeçuÉA¼ayTy³
(cÚ¡ *
ty³
);

136 
vœtu®
 
	$G‘DeçuÉA¼ayTy³Id
() const;

139 
vœtu®
 
	`Regi¡”Enum
(cÚ¡ *
ty³
);

140 
vœtu®
 
	`Regi¡”EnumV®ue
(cÚ¡ *
ty³
, cÚ¡ *
Çme
, 
v®ue
);

141 
vœtu®
 
asUINT
 
	$G‘EnumCouÁ
() const;

142 
vœtu®
 cÚ¡ *
	$G‘EnumByIndex
(
asUINT
 
šdex
, *
’umTy³Id
, cÚ¡ **
ÇmeS·û
, cÚ¡ **
cÚfigGroup
 = 0, 
asDWORD
 *
acûssMask
 = 0) const;

143 
vœtu®
 
	$G‘EnumV®ueCouÁ
(
’umTy³Id
) const;

144 
vœtu®
 cÚ¡ *
	$G‘EnumV®ueByIndex
(
’umTy³Id
, 
asUINT
 
šdex
, *
outV®ue
) const;

147 
vœtu®
 
	`Regi¡”Funcdef
(cÚ¡ *
deş
);

148 
vœtu®
 
asUINT
 
	$G‘FuncdefCouÁ
() const;

149 
vœtu®
 
asISütFunùiÚ
 *
	$G‘FuncdefByIndex
(
asUINT
 
šdex
) const;

152 
vœtu®
 
	`Regi¡”Ty³def
(cÚ¡ *
ty³
, cÚ¡ *
deş
);

153 
vœtu®
 
asUINT
 
	$G‘Ty³defCouÁ
() const;

154 
vœtu®
 cÚ¡ *
	$G‘Ty³defByIndex
(
asUINT
 
šdex
, *
ty³Id
, cÚ¡ **
ÇmeS·û
, cÚ¡ **
cÚfigGroup
 = 0, 
asDWORD
 *
acûssMask
 = 0) const;

157 
vœtu®
 
	`BegšCÚfigGroup
(cÚ¡ *
groupName
);

158 
vœtu®
 
	`EndCÚfigGroup
();

159 
vœtu®
 
	`RemoveCÚfigGroup
(cÚ¡ *
groupName
);

160 
vœtu®
 
asDWORD
 
	`S‘DeçuÉAcûssMask
×sDWORD 
deçuÉMask
);

161 
vœtu®
 
	`S‘DeçuÉName¥aû
(cÚ¡ *
ÇmeS·û
);

164 
vœtu®
 
asISütModuË
 *
	`G‘ModuË
(cÚ¡ *
moduË
, 
asEGMFÏgs
 
æag
);

165 
vœtu®
 
	`DisÿrdModuË
(cÚ¡ *
moduË
);

168 
vœtu®
 
asISütFunùiÚ
 *
	$G‘FunùiÚById
(
funcId
) const;

171 
vœtu®
 
asIObjeùTy³
 *
	$G‘ObjeùTy³ById
(
ty³Id
) const;

172 
vœtu®
 
	$G‘Ty³IdByDeş
(cÚ¡ *
deş
) const;

173 
vœtu®
 cÚ¡ *
	$G‘Ty³Deş¬©iÚ
(
ty³Id
, 
boŞ
 
šşudeName¥aû
 = 
çl£
) const;

174 
vœtu®
 
	$G‘SizeOfPrim™iveTy³
(
ty³Id
) const;

177 
vœtu®
 
asISütCÚ‹xt
 *
	`C»©eCÚ‹xt
();

179 
vœtu®
 *
	`C»©eSütObjeù
(
ty³Id
);

181 
vœtu®
 *
	`C»©eSütObjeùCİy
(*
obj
, 
ty³Id
);

183 
vœtu®
 *
	`C»©eUnš™ŸlizedSütObjeù
(
ty³Id
);

184 #ifdeà
AS_DEPRECATED


186 
vœtu®
 
	`CİySütObjeù
(*
d¡Obj
, *
¤cObj
, 
ty³Id
);

189 
vœtu®
 
	`AssignSütObjeù
(*
d¡Obj
, *
¤cObj
, 
ty³Id
);

191 
vœtu®
 
	`R–—£SütObjeù
(*
obj
, 
ty³Id
);

192 
vœtu®
 
	`R–—£SütObjeù
(*
obj
, cÚ¡ 
asIObjeùTy³
 *
ty³
);

194 
vœtu®
 
	`AddRefSütObjeù
(*
obj
, 
ty³Id
);

195 
vœtu®
 
	`AddRefSütObjeù
(*
obj
, cÚ¡ 
asIObjeùTy³
 *
ty³
);

200 
vœtu®
 
boŞ
 
	$IsHªdËCom·tibËW™hObjeù
(*
obj
, 
objTy³Id
, 
hªdËTy³Id
) const;

203 
vœtu®
 
asETok’CÏss
 
	$P¬£Tok’
(cÚ¡ *
¡ršg
, 
size_t
 
¡ršgL’gth
 = 0, *
tok’L’gth
 = 0) const;

206 
vœtu®
 
	`G¬bageCŞËù
(
asDWORD
 
æags
 = 
asGC_FULL_CYCLE
);

207 
vœtu®
 
	$G‘GCSti¡ics
(
asUINT
 *
cu¼’tSize
,‡sUINT *
tÙ®De¡royed
,‡sUINT *
tÙ®D‘eùed
,‡sUINT *
ÃwObjeùs
,‡sUINT *
tÙ®NewDe¡royed
) const;

208 
vœtu®
 
	`NÙifyG¬bageCŞËùÜOfNewObjeù
(*
obj
, 
asIObjeùTy³
 *
ty³
);

209 
vœtu®
 
	`GCEnumC®lback
(*
»ã»nû
);

212 
vœtu®
 *
	`S‘U£rD©a
(*
d©a
, 
asPWORD
 
ty³
 = 0);

213 
vœtu®
 *
	$G‘U£rD©a
(
asPWORD
 
ty³
 = 0) const;

214 
vœtu®
 
	`S‘EngšeU£rD©aCËªupC®lback
(
asCLEANENGINEFUNC_t
 
ÿÎback
, 
asPWORD
 
ty³
 = 0);

215 
vœtu®
 
	`S‘ModuËU£rD©aCËªupC®lback
(
asCLEANMODULEFUNC_t
 
ÿÎback
);

216 
vœtu®
 
	`S‘CÚ‹xtU£rD©aCËªupC®lback
(
asCLEANCONTEXTFUNC_t
 
ÿÎback
);

217 
vœtu®
 
	`S‘FunùiÚU£rD©aCËªupC®lback
(
asCLEANFUNCTIONFUNC_t
 
ÿÎback
);

218 
vœtu®
 
	`S‘ObjeùTy³U£rD©aCËªupC®lback
(
asCLEANOBJECTTYPEFUNC_t
 
ÿÎback
, 
asPWORD
 
ty³
);

223 
public
:

224 
	`asCSütEngše
();

225 
vœtu®
 ~
	`asCSütEngše
();

228 
ä›nd
 
şass
 
asCBud”
;

229 
ä›nd
 
şass
 
asCComp”
;

230 
ä›nd
 
şass
 
asCCÚ‹xt
;

231 
ä›nd
 
şass
 
asCD©aTy³
;

232 
ä›nd
 
şass
 
asCModuË
;

233 
ä›nd
 
şass
 
asCRe¡Üe
;

234 
ä›nd
 
şass
 
asCBy‹Code
;

235 
ä›nd
 
	`P»·»Sy¡emFunùiÚ
(
asCSütFunùiÚ
 *
func
, 
asSSy¡emFunùiÚIÁ”çû
 *
š‹º®
, 
asCSütEngše
 *
’gše
);

237 
	`Regi¡”M‘hodToObjeùTy³
(
asCObjeùTy³
 *
objeùTy³
, cÚ¡ *
deş¬©iÚ
, cÚ¡ 
asSFuncPŒ
 &
funcPoš‹r
, 
asDWORD
 
ÿÎCÚv
);

238 
	`Regi¡”BehaviourToObjeùTy³
(
asCObjeùTy³
 *
objeùTy³
, 
asEBehaviours
 
behaviour
, cÚ¡ *
deş
, cÚ¡ 
asSFuncPŒ
 &
funcPoš‹r
, 
asDWORD
 
ÿÎCÚv
);

240 
	`V”ifyV¬Ty³NÙInFunùiÚ
(
asCSütFunùiÚ
 *
func
);

242 *
	$C®lAÎoc
(
asCObjeùTy³
 *
objTy³
) const;

243 
	$C®lF»e
(*
obj
) const;

245 *
	`C®lGlob®FunùiÚR‘PŒ
(
func
);

246 *
	`C®lGlob®FunùiÚR‘PŒ
(
func
, *
·¿m1
);

247 *
	`C®lGlob®FunùiÚR‘PŒ
(
asSSy¡emFunùiÚIÁ”çû
 *
func
, 
asCSütFunùiÚ
 *
desc
);

248 *
	`C®lGlob®FunùiÚR‘PŒ
(
asSSy¡emFunùiÚIÁ”çû
 *
i
, 
asCSütFunùiÚ
 *
s
, *
·¿m1
);

249 
	`C®lObjeùM‘hod
(*
obj
, 
func
);

250 
	`C®lObjeùM‘hod
(*
obj
, *
·¿m
, 
func
);

251 
	`C®lObjeùM‘hod
(*
obj
, 
asSSy¡emFunùiÚIÁ”çû
 *
func
, 
asCSütFunùiÚ
 *
desc
);

252 
	`C®lObjeùM‘hod
(*
obj
, *
·¿m
, 
asSSy¡emFunùiÚIÁ”çû
 *
func
, 
asCSütFunùiÚ
 *
desc
);

253 
boŞ
 
	`C®lObjeùM‘hodR‘BoŞ
(*
obj
, 
func
);

254 
	`C®lObjeùM‘hodR‘IÁ
(*
obj
, 
func
);

255 
	`C®lGlob®FunùiÚ
(*
·¿m1
, *
·¿m2
, 
asSSy¡emFunùiÚIÁ”çû
 *
func
, 
asCSütFunùiÚ
 *
desc
);

256 
boŞ
 
	`C®lGlob®FunùiÚR‘BoŞ
(*
·¿m1
, *
·¿m2
, 
asSSy¡emFunùiÚIÁ”çû
 *
func
, 
asCSütFunùiÚ
 *
desc
);

258 
	`CÚ¡ruùSütObjeùCİy
(*
mem
, *
obj
, 
asCObjeùTy³
 *
ty³
);

260 
	`CË¬Unu£dTy³s
();

261 
	`RemoveTem¶©eIn¡ªûTy³
(
asCObjeùTy³
 *
t
);

262 
	`RemoveTy³AndR–©edFromLi¡
(
asCA¼ay
<
asCObjeùTy³
*> &
ty³s
,‡sCObjeùTy³ *
Ù
);

264 
asCCÚfigGroup
 *
	$FšdCÚfigGroupFÜFunùiÚ
(
funcId
) const;

265 
asCCÚfigGroup
 *
	$FšdCÚfigGroupFÜGlob®V¬
(
gv¬Id
) const;

266 
asCCÚfigGroup
 *
	$FšdCÚfigGroupFÜObjeùTy³
(cÚ¡ 
asCObjeùTy³
 *
ty³
) const;

267 
asCCÚfigGroup
 *
	$FšdCÚfigGroupFÜFuncDef
(cÚ¡ 
asCSütFunùiÚ
 *
funcDef
) const;

269 
	`Reque¡Bud
();

270 
	`BudCom¶‘ed
();

272 
	`P»·»Engše
();

273 
boŞ
 
isP»·»d
;

275 
	`C»©eCÚ‹xt
(
asISütCÚ‹xt
 **
cÚ‹xt
, 
boŞ
 
isIÁ”Çl
);

277 
asCObjeùTy³
 *
	`G‘ObjeùTy³
(cÚ¡ *
ty³
, 
asSNameS·û
 *
ns
);

279 
	`AddBehaviourFunùiÚ
(
asCSütFunùiÚ
 &
func
, 
asSSy¡emFunùiÚIÁ”çû
 &
š‹º®
);

281 
asCSŒšg
 
	`G‘FunùiÚDeş¬©iÚ
(
funcId
);

283 
asCSütFunùiÚ
 *
	$G‘SütFunùiÚ
(
funcId
) const;

285 
asCModuË
 *
	`G‘ModuË
(cÚ¡ *
Çme
, 
boŞ
 
ü—‹
);

286 
asCModuË
 *
	`G‘ModuËFromFuncId
(
funcId
);

288 
	`G‘M‘hodIdByDeş
(cÚ¡ 
asCObjeùTy³
 *
Ù
, cÚ¡ *
deş
, 
asCModuË
 *
mod
);

289 
	`G‘FaùÜyIdByDeş
(cÚ¡ 
asCObjeùTy³
 *
Ù
, cÚ¡ *
deş
);

291 
	`G‘NextSütFunùiÚId
();

292 
	`S‘SütFunùiÚ
(
asCSütFunùiÚ
 *
func
);

293 
	`F»eSütFunùiÚId
(
id
);

295 
	`CÚfigE¼Ü
(
”r
, cÚ¡ *
funcName
, cÚ¡ *
¬g1
, cÚ¡ *
¬g2
);

297 
	$G‘Ty³IdFromD©aTy³
(cÚ¡ 
asCD©aTy³
 &
dt
) const;

298 
asCD©aTy³
 
	$G‘D©aTy³FromTy³Id
(
ty³Id
) const;

299 
asCObjeùTy³
 *
	$G‘ObjeùTy³FromTy³Id
(
ty³Id
) const;

300 
	`RemoveFromTy³IdM­
(
asCObjeùTy³
 *
ty³
);

302 
boŞ
 
	$IsTem¶©eTy³
(cÚ¡ *
Çme
) const;

303 
asCObjeùTy³
 *
	`G‘Tem¶©eIn¡ªûTy³
×sCObjeùTy³ *
‹m¶©eTy³
, 
asCD©aTy³
 &
subTy³
);

304 
asCSütFunùiÚ
 *
	`G’”©eTem¶©eFaùÜyStub
(
asCObjeùTy³
 *
‹m¶©eTy³
,‡sCObjeùTy³ *
‹m¶©eIn¡ªûTy³
, 
ÜigFaùÜyId
);

305 
boŞ
 
	`G’”©eNewTem¶©eFunùiÚ
(
asCObjeùTy³
 *
‹m¶©eTy³
,‡sCObjeùTy³ *
‹m¶©eIn¡ªûTy³
, 
asCD©aTy³
 &
subTy³
, 
asCSütFunùiÚ
 *
‹m¶©eFunc
,‡sCSütFunùiÚ **
ÃwFunc
);

309 
	`AddCÚ¡ªtSŒšg
(cÚ¡ *
¡r
, 
size_t
 
Ëngth
);

310 cÚ¡ 
asCSŒšg
 &
	`G‘CÚ¡ªtSŒšg
(
id
);

313 
asCGlob®Prİ”ty
 *
	`AÎoÿ‹Glob®Prİ”ty
();

314 
	`F»eUnu£dGlob®Prİ”t›s
();

316 
	`G‘SütSeùiÚNameIndex
(cÚ¡ *
Çme
);

319 
asSNameS·û
 *
	`AddNameS·û
(cÚ¡ *
Çme
);

320 
asSNameS·û
 *
	`FšdNameS·û
(cÚ¡ *
Çme
);

325 
asCMemÜyMgr
 
memÜyMgr
;

327 
asUINT
 
š™ŸlCÚ‹xtSckSize
;

329 
asCObjeùTy³
 *
deçuÉA¼ayObjeùTy³
;

330 
asCObjeùTy³
 
sütTy³Behaviours
;

331 
asCObjeùTy³
 
funùiÚBehaviours
;

332 
asCObjeùTy³
 
objeùTy³Behaviours
;

333 
asCObjeùTy³
 
glob®Prİ”tyBehaviours
;

336 
asCA¼ay
<
asCObjeùTy³
 *> 
»gi¡”edObjTy³s
;

337 
asCA¼ay
<
asCObjeùTy³
 *> 
»gi¡”edTy³Defs
;

338 
asCA¼ay
<
asCObjeùTy³
 *> 
»gi¡”edEnums
;

339 
asCA¼ay
<
asCGlob®Prİ”ty
 *> 
»gi¡”edGlob®Prİs
;

340 
asCA¼ay
<
asCSütFunùiÚ
 *> 
»gi¡”edGlob®Funcs
;

341 
asCA¼ay
<
asCSütFunùiÚ
 *> 
»gi¡”edFuncDefs
;

342 
asCSütFunùiÚ
 *
¡ršgFaùÜy
;

343 
boŞ
 
cÚfigFaed
;

346 
asCA¼ay
<
asCObjeùTy³
 *> 
objeùTy³s
;

347 
asCA¼ay
<
asCObjeùTy³
 *> 
‹m¶©eSubTy³s
;

350 
asCA¼ay
<
asCObjeùTy³
 *> 
‹m¶©eTy³s
;

354 
asCA¼ay
<
asCGlob®Prİ”ty
 *> 
glob®Prİ”t›s
;

355 
asCA¼ay
<> 
ä“Glob®Prİ”tyIds
;

358 
asCA¼ay
<
asCSütFunùiÚ
 *> 
sütFunùiÚs
;

359 
asCA¼ay
<> 
ä“SütFunùiÚIds
;

360 
asCA¼ay
<
asCSütFunùiÚ
 *> 
sigÇtu»Ids
;

363 
asCA¼ay
<
sBšdInfo
 *> 
impÜ‹dFunùiÚs
;

364 
asCA¼ay
<> 
ä“ImpÜ‹dFunùiÚIdxs
;

367 
mubË
 
asCAtomic
 
»fCouÁ
;

368 
asCA¼ay
<
asCModuË
 *> 
sütModuËs
;

369 
asCModuË
 *
Ï¡ModuË
;

370 
boŞ
 
isBudšg
;

371 
boŞ
 
deãrV®id©iÚOfTem¶©eTy³s
;

374 
asCTok’iz”
 
tok
;

377 
asCA¼ay
<
asCObjeùTy³
 *> 
şassTy³s
;

379 
asCA¼ay
<
asCObjeùTy³
 *> 
‹m¶©eIn¡ªûTy³s
;

381 
asCA¼ay
<
asCSütFunùiÚ
 *> 
funcDefs
;

384 
asCA¼ay
<
asCSŒšg
 *> 
sütSeùiÚNames
;

387 
mubË
 
ty³IdSeqNbr
;

388 
mubË
 
asCM­
<, 
asCD©aTy³
*> 
m­Ty³IdToD©aTy³
;

391 
asCG¬bageCŞËùÜ
 
gc
;

394 
asCCÚfigGroup
 
deçuÉGroup
;

395 
asCA¼ay
<
asCCÚfigGroup
*> 
cÚfigGroups
;

396 
asCCÚfigGroup
 *
cu¼’tGroup
;

397 
asDWORD
 
deçuÉAcûssMask
;

398 
asSNameS·û
 *
deçuÉName¥aû
;

401 
boŞ
 
msgC®lback
;

402 
asSSy¡emFunùiÚIÁ”çû
 
msgC®lbackFunc
;

403 *
msgC®lbackObj
;

405 
asIJITComp”
 *
j™Comp”
;

410 
asCA¼ay
<
asSNameS·û
*> 
ÇmeS·ûs
;

415 
asCA¼ay
<
asCSŒšg
*> 
¡ršgCÚ¡ªts
;

416 
asCM­
<
asCSŒšgPoš‹r
, > 
¡ršgToIdM­
;

419 
asCA¼ay
<
asPWORD
> 
u£rD©a
;

421 
	sSEngšeCËª
 { 
asPWORD
 
ty³
; 
asCLEANENGINEFUNC_t
 
ş—nFunc
; };

422 
asCA¼ay
<
SEngšeCËª
> 
ş—nEngšeFuncs
;

423 
asCLEANMODULEFUNC_t
 
ş—nModuËFunc
;

424 
asCLEANCONTEXTFUNC_t
 
ş—nCÚ‹xtFunc
;

425 
asCLEANFUNCTIONFUNC_t
 
ş—nFunùiÚFunc
;

426 
	sSObjTy³CËª
 { 
asPWORD
 
ty³
; 
asCLEANOBJECTTYPEFUNC_t
 
ş—nFunc
; 
	}
};

427 
	gasCA¼ay
<
	gSObjTy³CËª
> 
	gş—nObjeùTy³Funcs
;

430 
	$DECLAREREADWRITELOCK
(
mubË
 
’gšeRWLock
)

435 
boŞ
 
®lowUn§ãReã»nûs
;

436 
boŞ
 
İtimizeBy‹Code
;

437 
boŞ
 
cİySütSeùiÚs
;

438 
asUINT
 
maximumCÚ‹xtSckSize
;

439 
boŞ
 
u£Ch¬aù”L™”®s
;

440 
boŞ
 
®lowMuÉšeSŒšgs
;

441 
boŞ
 
®lowIm¶ic™HªdËTy³s
;

442 
boŞ
 
budW™houtLšeCues
;

443 
boŞ
 
š™Glob®V¬sAá”Bud
;

444 
boŞ
 
»quœeEnumScİe
;

445 
sÿÂ”
;

446 
boŞ
 
šşudeJ™In¡ruùiÚs
;

447 
¡ršgEncodšg
;

448 
´İ”tyAcûssÜMode
;

449 
boŞ
 
ex·ndDeçuÉA¼ayToTem¶©e
;

450 
boŞ
 
autoG¬bageCŞËù
;

451 
boŞ
 
di§ÎowGlob®V¬s
;

452 
boŞ
 
®waysIm¶DeçuÉCÚ¡ruù
;

453 
	}
} 
	g•
;

456 
	gEND_AS_NAMESPACE


	@../hdr/script/as_scriptfunction.h

40 #iâdeà
AS_SCRIPTFUNCTION_H


41 
	#AS_SCRIPTFUNCTION_H


	)

43 
	~"as_cÚfig.h
"

44 
	~"as_¡ršg.h
"

45 
	~"as_¬¿y.h
"

46 
	~"as_d©©y³.h
"

47 
	~"as_©omic.h
"

49 
BEGIN_AS_NAMESPACE


51 
şass
 
	gasCSütEngše
;

52 
şass
 
	gasCModuË
;

53 
şass
 
	gasCCÚfigGroup
;

54 
şass
 
	gasCGlob®Prİ”ty
;

55 
	gasSNameS·û
;

57 
	sasSSütV¬ŸbË


59 
asCSŒšg
 
	mÇme
;

60 
asCD©aTy³
 
	mty³
;

61 
	m¡ackOff£t
;

62 
asUINT
 
	mdeş¬edAtProg¿mPos
;

65 
	easEObjV¬InfoO±iÚ


67 
	masOBJ_UNINIT
,

68 
	masOBJ_INIT
,

69 
	masBLOCK_BEGIN
,

70 
	masBLOCK_END


73 
	sasSObjeùV¬ŸbËInfo


75 
asUINT
 
	m´og¿mPos
;

76 
	mv¬ŸbËOff£t
;

77 
asUINT
 
	mİtiÚ
;

80 
	gasSSy¡emFunùiÚIÁ”çû
;

95 
Regi¡”SütFunùiÚ
(
asCSütEngše
 *
’gše
);

97 şas 
	casCSütFunùiÚ
 : 
public
 
asISütFunùiÚ


99 
public
:

101 
asISütEngše
 *
	$G‘Engše
() const;

104 
	$AddRef
() const;

105 
	$R–—£
() const;

107 
	$G‘Id
() const;

108 
asEFuncTy³
 
	$G‘FuncTy³
() const;

109 cÚ¡ *
	$G‘ModuËName
() const;

110 
asIObjeùTy³
 *
	$G‘ObjeùTy³
() const;

111 cÚ¡ *
	$G‘ObjeùName
() const;

112 cÚ¡ *
	$G‘Name
() const;

113 cÚ¡ *
	$G‘Name¥aû
() const;

114 cÚ¡ *
	$G‘Deş¬©iÚ
(
boŞ
 
šşudeObjeùName
 = 
Œue
, boŞ 
šşudeName¥aû
 = 
çl£
) const;

115 cÚ¡ *
	$G‘SütSeùiÚName
() const;

116 cÚ¡ *
	$G‘CÚfigGroup
() const;

117 
asDWORD
 
	$G‘AcûssMask
() const;

118 
boŞ
 
	$IsR—dOÆy
() const;

119 
boŞ
 
	$IsPriv©e
() const;

120 
boŞ
 
	$IsFš®
() const;

121 
boŞ
 
	$IsOv”ride
() const;

122 
boŞ
 
	$IsSh¬ed
() const;

124 
asUINT
 
	$G‘P¬amCouÁ
() const;

125 
	$G‘P¬amTy³Id
(
asUINT
 
šdex
, 
asDWORD
 *
æags
 = 0) const;

126 
	$G‘R‘uºTy³Id
() const;

129 
asUINT
 
	$G‘V¬CouÁ
() const;

130 
	$G‘V¬
(
asUINT
 
šdex
, cÚ¡ **
Çme
, *
ty³Id
 = 0) const;

131 cÚ¡ * 
	$G‘V¬Deş
(
asUINT
 
šdex
) const;

132 
	$FšdNextLšeW™hCode
(
lše
) const;

135 
asDWORD
 *
	`G‘By‹Code
(
asUINT
 *
Ëngth
 = 0);

138 *
	`S‘U£rD©a
(*
u£rD©a
);

139 *
	$G‘U£rD©a
() const;

141 
public
:

145 
	`asCSütFunùiÚ
(
asCSütEngše
 *
’gše
, 
asCModuË
 *
mod
, 
asEFuncTy³
 
funcTy³
);

146 ~
	`asCSütFunùiÚ
();

148 
	`De¡royIÁ”Çl
();

150 
	`AddV¬ŸbË
(
asCSŒšg
 &
Çme
, 
asCD©aTy³
 &
ty³
, 
¡ackOff£t
);

152 
	`G‘S·ûN“dedFÜArgum’ts
();

153 
	`G‘S·ûN“dedFÜR‘uºV®ue
();

154 
asCSŒšg
 
	$G‘Deş¬©iÚSŒ
(
boŞ
 
šşudeObjeùName
 = 
Œue
, boŞ 
šşudeName¥aû
 = 
çl£
) const;

155 
	`G‘LšeNumb”
(
´og¿mPos™iÚ
);

156 
	`Compu‹SigÇtu»Id
();

157 
boŞ
 
	$IsSigÇtu»Equ®
(cÚ¡ 
asCSütFunùiÚ
 *
func
) const;

158 
boŞ
 
	$IsSigÇtu»Exû±NameEqu®
(cÚ¡ 
asCSütFunùiÚ
 *
func
) const;

159 
boŞ
 
	`IsSigÇtu»Exû±NameEqu®
(cÚ¡ 
asCD©aTy³
 &
»tTy³
, cÚ¡ 
asCA¼ay
<asCD©aTy³> &
·¿mTy³s
, cÚ¡‡sCA¼ay<
asETy³Modif›rs
> &
šOutFÏgs
, cÚ¡ 
asCObjeùTy³
 *
ty³
, boŞ 
isR—dOÆy
) const;

160 
boŞ
 
	`IsSigÇtu»Exû±NameAndR‘uºTy³Equ®
(cÚ¡ 
asCA¼ay
<
asCD©aTy³
> &
·¿mTy³s
, cÚ¡‡sCA¼ay<
asETy³Modif›rs
> &
šOutFÏgs
, cÚ¡ 
asCObjeùTy³
 *
ty³
, boŞ 
isR—dOÆy
) const;

162 
boŞ
 
	$DÛsR‘uºOnSck
() const;

164 
	`JITCompe
();

166 
	`AddReã»nûs
();

167 
	`R–—£Reã»nûs
();

170 
asCGlob®Prİ”ty
 *
	`G‘Prİ”tyByGlob®V¬PŒ
(*
gv¬PŒ
);

173 
	`G‘RefCouÁ
();

174 
	`S‘FÏg
();

175 
boŞ
 
	`G‘FÏg
();

176 
	`EnumReã»nûs
(
asISütEngše
 *
’gše
);

177 
	`R–—£AÎHªdËs
(
asISütEngše
 *
’gše
);

179 
public
:

183 
mubË
 
asCAtomic
 
»fCouÁ
;

184 
mubË
 
boŞ
 
gcFÏg
;

185 
asCSütEngše
 *
’gše
;

186 
asCModuË
 *
moduË
;

188 *
u£rD©a
;

191 
asCSŒšg
 
Çme
;

192 
asCD©aTy³
 
»tuºTy³
;

193 
asCA¼ay
<
asCD©aTy³
> 
·¿m‘”Ty³s
;

194 
asCA¼ay
<
asETy³Modif›rs
> 
šOutFÏgs
;

195 
asCA¼ay
<
asCSŒšg
 *> 
deçuÉArgs
;

196 
boŞ
 
isR—dOÆy
;

197 
boŞ
 
isPriv©e
;

198 
boŞ
 
isFš®
;

199 
boŞ
 
isOv”ride
;

200 
asCObjeùTy³
 *
objeùTy³
;

201 
sigÇtu»Id
;

203 
id
;

205 
asEFuncTy³
 
funcTy³
;

206 
asDWORD
 
acûssMask
;

207 
boŞ
 
isSh¬ed
;

209 
asSNameS·û
 *
ÇmeS·û
;

212 
asCA¼ay
<
asDWORD
> 
by‹Code
;

214 
asDWORD
 
v¬ŸbËS·û
;

218 
asCA¼ay
<
asCObjeùTy³
*> 
objV¬ŸbËTy³s
;

219 
asCA¼ay
<
asCSütFunùiÚ
*> 
funcV¬ŸbËTy³s
;

220 
asCA¼ay
<> 
objV¬ŸbËPos
;

223 
asUINT
 
objV¬ŸbËsOnH—p
;

226 
asCA¼ay
<
asSObjeùV¬ŸbËInfo
> 
objV¬ŸbËInfo
;

229 
asCA¼ay
<
asSSütV¬ŸbË
*> 
v¬ŸbËs
;

231 
¡ackN“ded
;

232 
asCA¼ay
<> 
lšeNumb”s
;

233 
sütSeùiÚIdx
;

234 
boŞ
 
dÚtCËªUpOnExû±iÚ
;

237 
vfTabËIdx
;

240 
asSSy¡emFunùiÚIÁ”çû
 *
sysFuncIÁf
;

243 
asJITFunùiÚ
 
j™FunùiÚ
;

246 
END_AS_NAMESPACE


	@../hdr/script/as_scriptnode.h

39 #iâdeà
AS_SCRIPTNODE_H


40 
	#AS_SCRIPTNODE_H


	)

42 
	~"as_cÚfig.h
"

43 
	~"as_tok’def.h
"

45 
BEGIN_AS_NAMESPACE


47 
	eeSütNode


49 
	m¢Undefšed
,

50 
	m¢Süt
,

51 
	m¢FunùiÚ
,

52 
	m¢CÚ¡ªt
,

53 
	m¢D©aTy³
,

54 
	m¢Id’tif›r
,

55 
	m¢P¬am‘”Li¡
,

56 
	m¢S‹m’tBlock
,

57 
	m¢Deş¬©iÚ
,

58 
	m¢Ex´essiÚS‹m’t
,

59 
	m¢If
,

60 
	m¢FÜ
,

61 
	m¢Whe
,

62 
	m¢R‘uº
,

63 
	m¢Ex´essiÚ
,

64 
	m¢Ex´T”m
,

65 
	m¢FunùiÚC®l
,

66 
	m¢CÚ¡ruùC®l
,

67 
	m¢ArgLi¡
,

68 
	m¢Ex´P»Op
,

69 
	m¢Ex´Po¡Op
,

70 
	m¢Ex´O³¿tÜ
,

71 
	m¢Ex´V®ue
,

72 
	m¢B»ak
,

73 
	m¢CÚtšue
,

74 
	m¢DoWhe
,

75 
	m¢Assignm’t
,

76 
	m¢CÚd™iÚ
,

77 
	m¢Glob®V¬
,

78 
	m¢Sw™ch
,

79 
	m¢Ca£
,

80 
	m¢ImpÜt
,

81 
	m¢CÏss
,

82 
	m¢In™Li¡
,

83 
	m¢IÁ”çû
,

84 
	m¢Enum
,

85 
	m¢Ty³def
,

86 
	m¢Ca¡
,

87 
	m¢V¬ŸbËAcûss
,

88 
	m¢FuncDef
,

89 
	m¢Vœtu®Prİ”ty
,

90 
	m¢Name¥aû


93 
	ssTok’


95 
eTok’Ty³
 
	mty³
;

96 
size_t
 
	mpos
;

97 
size_t
 
	mËngth
;

100 
şass
 
	gasCSütEngše
;

102 şas 
	casCSütNode


104 
	mpublic
:

105 
asCSütNode
(
eSütNode
 
nodeTy³
);

107 
De¡roy
(
asCSütEngše
 *
’gše
);

109 
S‘Tok’
(
sTok’
 *
tok’
);

110 
AddChdLa¡
(
asCSütNode
 *
node
);

111 
DiscÚÃùP¬’t
();

113 
Upd©eSourûPos
(
size_t
 
pos
, size_ˆ
Ëngth
);

115 
eSütNode
 
	mnodeTy³
;

116 
eTok’Ty³
 
	mtok’Ty³
;

117 
size_t
 
	mtok’Pos
;

118 
size_t
 
	mtok’L’gth
;

120 
asCSütNode
 *
	m·»Á
;

121 
asCSütNode
 *
	mÃxt
;

122 
asCSütNode
 *
	m´ev
;

123 
asCSütNode
 *
	mfœ¡Chd
;

124 
asCSütNode
 *
	mÏ¡Chd
;

126 
	m´Ùeùed
:

128 ~
	$asCSütNode
() {}

129 
	}
};

131 
	gEND_AS_NAMESPACE


	@../hdr/script/as_scriptobject.h

41 #iâdeà
AS_SCRIPTOBJECT_H


42 
	#AS_SCRIPTOBJECT_H


	)

44 
	~"as_cÚfig.h
"

45 
	~"as_©omic.h
"

47 
BEGIN_AS_NAMESPACE


49 
şass
 
	gasCObjeùTy³
;

54 şas 
	casCSütObjeù
 : 
public
 
asISütObjeù


56 
public
:

60 
asISütEngše
 *
	$G‘Engše
() const;

63 
	$AddRef
() const;

64 
	$R–—£
() const;

67 
	$G‘Ty³Id
() const;

68 
asIObjeùTy³
 *
	$G‘ObjeùTy³
() const;

71 
asUINT
 
	$G‘Prİ”tyCouÁ
() const;

72 
	$G‘Prİ”tyTy³Id
(
asUINT
 
´İ
) const;

73 cÚ¡ *
	$G‘Prİ”tyName
(
asUINT
 
´İ
) const;

74 *
	`G‘Add»ssOfPrİ”ty
(
asUINT
 
´İ
);

76 
	`CİyFrom
(
asISütObjeù
 *
Ùh”
);

81 
	`asCSütObjeù
(
asCObjeùTy³
 *
objTy³
, 
boŞ
 
doIn™Ÿlize
 = 
Œue
);

82 
vœtu®
 ~
	`asCSütObjeù
();

84 
asCSütObjeù
 &
İ”©Ü
=(cÚ¡‡sCSütObjeù &
Ùh”
);

87 
	`De¡ruù
();

88 
	`G‘RefCouÁ
();

89 
	`S‘FÏg
();

90 
boŞ
 
	`G‘FÏg
();

91 
	`EnumReã»nûs
(
asISütEngše
 *
’gše
);

92 
	`R–—£AÎHªdËs
(
asISütEngše
 *
’gše
);

95 *
	`AÎoÿ‹Objeù
(
asCObjeùTy³
 *
objTy³
, 
asCSütEngše
 *
’gše
, 
boŞ
 
doIn™Ÿlize
);

96 
	`F»eObjeù
(*
±r
, 
asCObjeùTy³
 *
objTy³
, 
asCSütEngše
 *
’gše
);

97 
	`CİyObjeù
(*
¤c
, *
d¡
, 
asCObjeùTy³
 *
objTy³
, 
asCSütEngše
 *
’gše
);

98 
	`CİyHªdË
(
asPWORD
 *
¤c
,‡sPWORD *
d¡
, 
asCObjeùTy³
 *
objTy³
, 
asCSütEngše
 *
’gše
);

100 
	`C®lDe¡ruùÜ
();

102 
asCObjeùTy³
 *
objTy³
;

104 
´Ùeùed
:

105 
mubË
 
asCAtomic
 
»fCouÁ
;

106 
mubË
 
boŞ
 
gcFÏg
;

107 
boŞ
 
isDe¡ruùC®Ëd
;

110 
	`SütObjeù_CÚ¡ruù
(
asCObjeùTy³
 *
objTy³
, 
asCSütObjeù
 *
£lf
);

111 
asCSütObjeù
 &
	`SütObjeù_Assignm’t
×sCSütObjeù *
Ùh”
,‡sCSütObjeù *
£lf
);

113 
	`SütObjeù_CÚ¡ruùUn™Ÿlized
(
asCObjeùTy³
 *
objTy³
, 
asCSütObjeù
 *
£lf
);

115 
	`SütObjeù_CÚ¡ruù_G’”ic
(
asISütG’”ic
 *
g’
);

116 
	`SütObjeù_Assignm’t_G’”ic
(
asISütG’”ic
 *
g’
);

118 
	`Regi¡”SütObjeù
(
asCSütEngše
 *
’gše
);

120 
asISütObjeù
 *
	`SütObjeùFaùÜy
(cÚ¡ 
asCObjeùTy³
 *
objTy³
, 
asCSütEngše
 *
’gše
);

122 
END_AS_NAMESPACE


	@../hdr/script/as_string.h

35 #iâdeà
AS_STRING_H


36 
	#AS_STRING_H


	)

38 
	~<¡dio.h
>

39 
	~<¡ršg.h
>

41 şas 
	casCSŒšg


43 
	mpublic
:

44 
asCSŒšg
();

45 ~
asCSŒšg
();

47 
asCSŒšg
(const‡sCString &);

48 
asCSŒšg
(const *);

49 
asCSŒšg
(cÚ¡ *, 
size_t
 
Ëngth
);

50 
ex¶ic™
 
asCSŒšg
();

52 
AÎoÿ‹
(
size_t
 
Ën
, 
boŞ
 
k“pD©a
);

53 
S‘L’gth
(
size_t
 
Ën
);

54 
size_t
 
	$G‘L’gth
() const;

56 
	`CÚÿ‹Ç‹
(cÚ¡ *
¡r
, 
size_t
 
Ëngth
);

57 
asCSŒšg
 &
İ”©Ü
 +=(const‡sCString &);

58 
asCSŒšg
 &
İ”©Ü
 +=(const *);

59 
asCSŒšg
 &
İ”©Ü
 +=();

61 
	`Assign
(cÚ¡ *
¡r
, 
size_t
 
Ëngth
);

62 
asCSŒšg
 &
İ”©Ü
 =(const‡sCString &);

63 
asCSŒšg
 &
İ”©Ü
 =(const *);

64 
asCSŒšg
 &
İ”©Ü
 =();

66 
asCSŒšg
 
	`SubSŒšg
(
size_t
 
¡¬t
, size_ˆ
Ëngth
 = (size_t)(-1)) const;

68 
	$FšdLa¡
(cÚ¡ *
¡r
) const;

70 
size_t
 
	`FÜm©
(cÚ¡ *
fmt
, ...);

72 
	$Com·»
(cÚ¡ *
¡r
) const;

73 
	$Com·»
(cÚ¡ 
asCSŒšg
 &
¡r
) const;

74 
	$Com·»
(cÚ¡ *
¡r
, 
size_t
 
Ëngth
) const;

76 *
	`Add»ssOf
();

77 cÚ¡ *
	$Add»ssOf
() const;

78 &
İ”©Ü
 [](
size_t
 
šdex
);

79 cÚ¡ &
İ”©Ü
[](
size_t
 
šdex
) const;

80 
size_t
 
	`ReÿlcuÏ‹L’gth
();

82 
´Ùeùed
:

83 
Ëngth
;

86 *
dyÇmic
;

87 
loÿl
[12];

89 
	}
};

93 
boŞ
 
	gİ”©Ü
 ==(cÚ¡ 
asCSŒšg
 &, cÚ¡ 
	gasCSŒšg
 &);

94 
boŞ
 
	gİ”©Ü
 !=(cÚ¡ 
asCSŒšg
 &, cÚ¡ 
	gasCSŒšg
 &);

96 
boŞ
 
	gİ”©Ü
 ==(cÚ¡ 
asCSŒšg
 &, const *);

97 
boŞ
 
	gİ”©Ü
 !=(cÚ¡ 
asCSŒšg
 &, const *);

99 
boŞ
 
	gİ”©Ü
 ==(cÚ¡ *, cÚ¡ 
	gasCSŒšg
 &);

100 
boŞ
 
	gİ”©Ü
 !=(cÚ¡ *, cÚ¡ 
	gasCSŒšg
 &);

102 
boŞ
 
	gİ”©Ü
 <(cÚ¡ 
	gasCSŒšg
 &, const‡sCString &);

104 
asCSŒšg
 
	gİ”©Ü
 +(cÚ¡ 
	gasCSŒšg
 &, const *);

105 
asCSŒšg
 
	gİ”©Ü
 +(cÚ¡ *, cÚ¡ 
	gasCSŒšg
 &);

106 
asCSŒšg
 
	gİ”©Ü
 +(cÚ¡ 
	gasCSŒšg
 &, const‡sCString &);

109 şas 
	casCSŒšgPoš‹r


111 
	mpublic
:

112 
asCSŒšgPoš‹r
();

113 
asCSŒšgPoš‹r
(cÚ¡ *
¡r
, 
size_t
 
Ën
);

114 
asCSŒšgPoš‹r
(
asCSŒšg
 *
c¡r
);

116 cÚ¡ *
	$Add»ssOf
() const;

117 
size_t
 
	$G‘L’gth
() const;

119 
boŞ
 
İ”©Ü
==(cÚ¡ 
asCSŒšgPoš‹r
& 
Ùh”
) const;

120 
boŞ
 
İ”©Ü
<(cÚ¡ 
asCSŒšgPoš‹r
& 
Ùh”
) const;

122 
´iv©e
:

124 cÚ¡ *
¡ršg
;

125 
size_t
 
Ëngth
;

126 
asCSŒšg
 *
c¡ršg
;

	@../hdr/script/as_string_util.h

32 #iâdeà
AS_STRING_UTIL_H


33 
	#AS_STRING_UTIL_H


	)

35 
	~"as_cÚfig.h
"

37 
BEGIN_AS_NAMESPACE


39 
asCom·»SŒšgs
(cÚ¡ *
¡r1
, 
size_t
 
Ën1
, cÚ¡ *
¡r2
, size_ˆ
Ën2
);

41 
asSŒšgSÿnDoubË
(cÚ¡ *
¡ršg
, 
size_t
 *
numSÿÂed
);

42 
asQWORD
 
asSŒšgSÿnUIÁ64
(cÚ¡ *
¡ršg
, 
ba£
, 
size_t
 *
numSÿÂed
);

44 
asSŒšgEncodeUTF8
(
v®ue
, *
outEncodedBufãr
);

45 
asSŒšgDecodeUTF8
(cÚ¡ *
’codedBufãr
, *
outL’gth
);

47 
asSŒšgEncodeUTF16
(
v®ue
, *
outEncodedBufãr
);

49 
	gEND_AS_NAMESPACE


	@../hdr/script/as_texts.h

39 #iâdeà
AS_TEXTS_H


40 
	#AS_TEXTS_H


	)

44 
	#TXT_s_ALREADY_DECLARED
 "'%s' i ®»ady deş¬ed"

	)

45 
	#TXT_ARG_NOT_LVALUE
 "Argum’ˆÿÂÙ bassigÃd. OuuˆwÈbdisÿrded."

	)

47 
	#TXT_BOTH_MUST_BE_SAME
 "BÙhƒx´essiÚ mu¡ havth§mty³"

	)

48 
	#TXT_BOTH_CONDITIONS_MUST_CALL_CONSTRUCTOR
 "BÙh cÚd™iÚ mu¡ c®ÈcÚ¡ruùÜ"

	)

49 
	#TEXT_BASE_DOESNT_HAVE_DEF_CONSTR
 "Ba£ cÏs dÛ¢'ˆhavdeçuÉ cÚ¡ruùÜ. Makex¶ic™ c®ÈtØba£ cÚ¡ruùÜ"

	)

51 
	#TXT_CANDIDATES_ARE
 "Cªdid©e ¬e:"

	)

52 
	#TXT_CANNOT_CALL_CONSTRUCTOR_IN_LOOPS
 "Cª'ˆÿÎ‡ cÚ¡ruùÜ iÀloİs"

	)

53 
	#TXT_CANNOT_CALL_CONSTRUCTOR_IN_SWITCH
 "Cª'ˆÿÎ‡ cÚ¡ruùÜ iÀsw™ch"

	)

54 
	#TXT_CANNOT_CALL_CONSTRUCTOR_TWICE
 "Cª'ˆÿÎ‡ cÚ¡ruùÜ muÉËimes"

	)

55 
	#TXT_CANNOT_INHERIT_FROM_s_FINAL
 "Cª'ˆšh”™ from cÏs '%s' m¬ked‡ fš®"

	)

56 
	#TXT_CANNOT_INHERIT_FROM_MULTIPLE_CLASSES
 "Cª'ˆšh”™ from muÉË cÏs£s"

	)

57 
	#TXT_CANNOT_INHERIT_FROM_SELF
 "Cª'ˆšh”™ from it£lf, o¸ªÙh” cÏs th© inh”™ äomhi şass"

	)

58 
	#TXT_CANNOT_INSTANCIATE_TEMPLATE_s_WITH_s
 "Cª'ˆš¡ªcŸ‹em¶©'%s' w™h subty³ '%s'"

	)

59 
	#TXT_CANT_IMPLICITLY_CONVERT_s_TO_s
 "Cª'ˆim¶ic™ly cÚv”ˆäom '%s'Ø'%s'."

	)

60 
	#TXT_CANNOT_RETURN_REF_TO_LOCAL
 "Cª'ˆ»tuº„eã»nûØloÿÈv®ue."

	)

61 
	#TXT_CANT_RETURN_VALUE
 "Cª'ˆ»tuº v®uwh’„‘uºy³ i 'void'"

	)

62 
	#TXT_CHANGE_SIGN
 "Im¶ic™ cÚv”siÚ chªged sigÀoàv®ue"

	)

63 
	#TXT_COMPILING_s
 "Compšg %s"

	)

64 
	#TXT_COMPOUND_ASGN_WITH_PROP
 "Compound‡ssignm’t w™h…rİ”ty‡cûssÜ ¬nÙ‡Îowed"

	)

65 
	#TXT_CONSTRUCTOR_NAME_ERROR
 "ThcÚ¡ruùÜ‚ammu¡ bth§ma thşass"

	)

67 
	#TXT_DATA_TYPE_CANT_BE_s
 "D©¨ty³ cª'ˆb'%s'"

	)

68 
	#TXT_DECL_IN_SWITCH
 "V¬ŸbË ÿÂÙ bdeş¬ed iÀsw™ch ca£s,ƒxû± insid¡©em’ˆblocks"

	)

69 
	#TXT_DEFAULT_MUST_BE_LAST
 "ThdeçuÉ ca£ mu¡ bthÏ¡ oÃ"

	)

70 
	#TXT_DEF_ARG_MISSING_IN_FUNC_s
 "AÎ sub£qu’ˆ·¿m‘” aá”hfœ¡ deçuÉ v®umu¡ havdeçuÉ v®ue š funùiÚ '%s'"

	)

71 
	#TXT_DESTRUCTOR_MAY_NOT_HAVE_PARM
 "Thde¡ruùÜ mu¡‚Ù havªy…¬am‘”s"

	)

72 
	#TXT_DUPLICATE_SWITCH_CASE
 "Du¶iÿ‹ sw™ch ca£"

	)

74 
	#TXT_ELSE_WITH_EMPTY_STATEMENT
 "El£ w™hƒm±y s‹m’t"

	)

75 
	#TXT_EMPTY_SWITCH
 "Em±y sw™ch s‹m’t"

	)

76 
	#TXT_EXPECTED_s
 "Ex³ùed '%s'"

	)

77 
	#TXT_EXPECTED_CONSTANT
 "Ex³ùed cÚ¡ªt"

	)

78 
	#TXT_EXPECTED_DATA_TYPE
 "Ex³ùed d©¨ty³"

	)

79 
	#TXT_EXPECTED_EXPRESSION_VALUE
 "Ex³ùedƒx´essiÚ v®ue"

	)

80 
	#TXT_EXPECTED_IDENTIFIER
 "Ex³ùed id’tif›r"

	)

81 
	#TXT_EXPECTED_METHOD_OR_PROPERTY
 "Ex³ùed m‘hod o¸´İ”ty"

	)

82 
	#TXT_EXPECTED_ONE_OF
 "Ex³ùed oÃ of: "

	)

83 
	#TXT_EXPECTED_OPERATOR
 "Ex³ùed o³¿tÜ"

	)

84 
	#TXT_EXPECTED_s_OR_s
 "Ex³ùed '%s' o¸'%s'"

	)

85 
	#TXT_EXPECTED_POST_OPERATOR
 "Ex³ùed…o¡ o³¿tÜ"

	)

86 
	#TXT_EXPECTED_PRE_OPERATOR
 "Ex³ùed…» o³¿tÜ"

	)

87 
	#TXT_EXPECTED_STRING
 "Ex³ùed sŒšg"

	)

88 
	#TXT_EXPR_DOESNT_EVAL_TO_FUNC
 "Ex´essiÚ dÛ¢'ˆev®u©tØ¨funùiÚ"

	)

89 
	#TXT_EXPR_MUST_BE_BOOL
 "Ex´essiÚ mu¡ boàboŞ—Àty³"

	)

91 
	#TXT_FAILED_TO_COMPILE_DEF_ARG_d_IN_FUNC_s
 "Faed whcompšg deçuÉ‡rg fÜ…¬am‘” %d iÀfunùiÚ '%s'"

	)

92 
	#TXT_FAILED_TO_CREATE_TEMP_OBJ
 "P»viou ”rÜ occu¼ed wh©‹m±šgØü—‹‡empÜ¬y cİy oàobjeù"

	)

93 
	#TXT_FOUND_MULTIPLE_ENUM_VALUES
 "Found muÉË m©chšgƒnum v®ues"

	)

94 
	#TXT_FUNCTION_ALREADY_EXIST
 "A funùiÚ w™hh§mÇmªd…¬am‘” ®»adyƒxi¡"

	)

95 
	#TXT_FUNCTION_s_NOT_FOUND
 "FunùiÚ '%s'‚Ù found"

	)

97 
	#TXT_GET_SET_ACCESSOR_TYPE_MISMATCH_FOR_s
 "Th´İ”ty '%s' ha mism©chšgy³ fÜhg‘‡nd s‘‡cûssÜs"

	)

98 
	#TXT_GLOBAL_VARS_NOT_ALLOWED
 "Glob® v¬ŸbË havb“Àdi§bËd byh­¶iÿtiÚ"

	)

100 
	#TXT_HANDLE_ASSIGN_ON_NON_HANDLE_PROP
 "Iˆi nÙ‡ÎowedØ³rfÜm‡ hªdË‡ssignm’ˆÚ‡‚Ú-hªdË…rİ”ty"

	)

101 
	#TXT_HANDLE_COMPARISON
 "Thİ”ªd i im¶ic™ly cÚv”‹dØhªdË iÀÜd”Øcom·»hem"

	)

103 
	#TXT_IDENTIFIER_s_NOT_DATA_TYPE
 "Id’tif›¸'%s' i nÙ‡ d©¨ty³"

	)

104 
	#TXT_IF_WITH_EMPTY_STATEMENT
 "Iàw™hƒm±y s‹m’t"

	)

105 
	#TXT_ILLEGAL_MEMBER_TYPE
 "IÎeg® memb”y³"

	)

107 
	#TXT_ILLEGAL_OPERATION
 "IÎeg® o³¿tiÚ oÀthi d©©y³"

	)

108 
	#TXT_ILLEGAL_OPERATION_ON_s
 "IÎeg® o³¿tiÚ oÀ'%s'"

	)

109 
	#TXT_ILLEGAL_TARGET_TYPE_FOR_REF_CAST
 "IÎeg®¬g‘y³ fÜ„eã»nû ca¡"

	)

110 
	#TXT_ILLEGAL_VARIABLE_NAME_s
 "IÎeg® v¬ŸbË‚am'%s'."

	)

111 
	#TXT_INIT_LIST_CANNOT_BE_USED_WITH_s
 "In™Ÿliz©iÚ†i¡ ÿÂÙ bu£d w™h '%s'"

	)

112 
	#TXT_INTERFACE_s_ALREADY_IMPLEMENTED
 "Thš‹rçû '%s' i ®»ady im¶em’‹d"

	)

113 
	#TXT_INVALID_BREAK
 "Inv®id 'b»ak'"

	)

114 
	#TXT_INVALID_CHAR_LITERAL
 "Inv®id ch¬aù”†™”®"

	)

115 
	#TXT_INVALID_CONTINUE
 "Inv®id 'cÚtšue'"

	)

116 
	#TXT_INVALID_ESCAPE_SEQUENCE
 "Inv®idƒsÿ³ sequ’û"

	)

117 
	#TXT_INVALID_REF_PROP_ACCESS
 "Inv®id„eã»nû. Prİ”ty‡cûssÜ ÿÂÙ bu£d iÀcombšed„—d/wr™İ”©iÚs"

	)

118 
	#TXT_INVALID_SCOPE
 "Inv®id scİ»sŞutiÚ"

	)

119 
	#TXT_INVALID_TYPE
 "Inv®idy³"

	)

120 
	#TXT_INVALID_UNICODE_FORMAT_EXPECTED_d
 "Inv®id unicodesÿ³ sequ’û,ƒx³ùed %d hex dig™s"

	)

121 
	#TXT_INVALID_UNICODE_VALUE
 "Inv®id unicodcodpošt"

	)

122 
	#TXT_INVALID_UNICODE_SEQUENCE_IN_SRC
 "Inv®id unicod£qu’û iÀsourû"

	)

124 
	#TXT_METHOD_CANNOT_OVERRIDE_s
 "M‘hod '%s' deş¬ed‡ fš®‡nd cªnÙ bov”ridd’"

	)

125 
	#TXT_METHOD_CANT_HAVE_NAME_OF_CLASS
 "Thm‘hod cªnÙ bÇmed w™hhşas Çme"

	)

126 
	#TXT_METHOD_s_DOES_NOT_OVERRIDE
 "M‘hod '%s' m¬ked‡ ov”ridbuˆdÛ nÙ„•Ïû‡ny ba£ cÏs Ü iÁ”çû m‘hod"

	)

127 
	#TXT_MISSING_IMPLEMENTATION_OF_s
 "Missšg im¶em’tiÚ oà'%s'"

	)

128 
	#TXT_MORE_THAN_ONE_MATCHING_OP
 "Found mÜthª oÃ m©chšg o³¿tÜ"

	)

129 
	#TXT_MULTIPLE_MATCHING_SIGNATURES_TO_s
 "MuÉË m©chšg sigÇtu» tØ'%s'"

	)

130 
	#TXT_MULTIPLE_PROP_GET_ACCESSOR_FOR_s
 "Found muÉË g‘‡cûssÜ fÜ…rİ”ty '%s'"

	)

131 
	#TXT_MULTIPLE_PROP_SET_ACCESSOR_FOR_s
 "Found muÉË s‘‡cûssÜ fÜ…rİ”ty '%s'"

	)

132 
	#TXT_MULTILINE_STRINGS_NOT_ALLOWED
 "MuÉš¡ršg ¬nÙ‡Îowed iÀthi ­¶iÿtiÚ"

	)

133 
	#TXT_MUST_BE_OBJECT
 "OÆy objeù havcÚ¡ruùÜs"

	)

134 
	#TXT_MUST_RETURN_VALUE
 "Mu¡„‘uº‡ v®ue"

	)

136 
	#TXT_NAMESPACE_s_DOESNT_EXIST
 "Name¥aû '%s' dÛ¢'ˆexi¡."

	)

137 
	#TXT_NAME_CONFLICT_s_EXTENDED_TYPE
 "NamcÚæiù. '%s' i ªƒx‹nded d©¨ty³."

	)

138 
	#TXT_NAME_CONFLICT_s_GLOBAL_PROPERTY
 "NamcÚæiù. '%s' i ¨glob®…rİ”ty."

	)

139 
	#TXT_NAME_CONFLICT_s_IS_NAMED_TYPE
 "NamcÚæiù. '%s' i ¨Çmedy³."

	)

140 
	#TXT_NAME_CONFLICT_s_IS_FUNCDEF
 "NamcÚæiù. '%s' i ¨funcdef."

	)

141 
	#TXT_NAME_CONFLICT_s_STRUCT
 "NamcÚæiù. '%s' i ¨şass."

	)

142 
	#TXT_NAME_CONFLICT_s_OBJ_PROPERTY
 "NamcÚæiù. '%s' i ª objeù…rİ”ty."

	)

143 
	#TXT_NAME_CONFLICT_s_METHOD
 "NamcÚæiù. '%s' i ¨şas m‘hod."

	)

144 
	#TXT_NAME_CONFLICT_s_ALREADY_USED
 "NamcÚæiù. '%s' i ®»ady u£d."

	)

145 
	#TXT_NO_APPROPRIATE_INDEX_OPERATOR
 "NØ­´İrŸ‹ indexšg o³¿tÜ found"

	)

146 
	#TXT_NO_APPROPRIATE_OPASSIGN
 "NØ­´İrŸ‹ opAssigÀm‘hod found"

	)

147 
	#TXT_NO_APPROPRIATE_OPEQUALS
 "NØ­´İrŸ‹ opEqu® m‘hod found"

	)

148 
	#TXT_NO_CONVERSION_s_TO_s
 "NØcÚv”siÚ from '%s'Ø'%s'‡vaabË."

	)

149 
	#TXT_NO_CONVERSION_s_TO_MATH_TYPE
 "NØcÚv”siÚ from '%s'Øm©hy³‡vaabË."

	)

150 
	#TXT_NO_DEFAULT_ARRAY_TYPE
 "Th­¶iÿtiÚ dÛ¢'ˆsuµÜˆthdeçuÉ‡¼ayy³."

	)

151 
	#TXT_NO_DEFAULT_CONSTRUCTOR_FOR_s
 "NØdeçuÉ cÚ¡ruùÜ fÜ objeù oàty³ '%s'."

	)

152 
	#TXT_NO_DEFAULT_COPY_OP_FOR_s
 "Th”i nØcİy o³¿tÜ fÜhty³ '%s'‡vaabË."

	)

153 
	#TXT_NO_COPY_CONSTRUCTOR_FOR_s
 "NØcİy cÚ¡ruùÜ fÜ objeù oàty³ '%s'."

	)

154 
	#TXT_NO_MATCHING_SIGNATURES_TO_s
 "NØm©chšg sigÇtu» tØ'%s'"

	)

155 
	#TXT_NO_MATCHING_OP_FOUND_FOR_TYPE_s
 "NØm©chšg o³¿tÜh©ake thty³ '%s' found"

	)

156 
	#TXT_NO_MATCHING_OP_FOUND_FOR_TYPES_s_AND_s
 "NØm©chšg o³¿tÜh©ake thty³ '%s'‡nd '%s' found"

	)

157 
	#TXT_NON_CONST_METHOD_ON_CONST_OBJ
 "NÚ-cÚ¡ m‘hod c®ÈÚ„—d-Úly objeù„eã»nû"

	)

158 
	#TXT_NOT_A_FUNC_s_IS_VAR
 "Ex´essiÚ dÛ¢'ˆfÜm‡ funùiÚ c®l. '%s' i ¨v¬ŸbË oà¨nÚ-funùiÚy³"

	)

159 
	#TXT_NOT_ALL_PATHS_RETURN
 "NÙ‡Î…©h »tuº‡ v®ue"

	)

160 
	#TXT_s_NOT_DECLARED
 "'%s' i nÙ deş¬ed"

	)

161 
	#TXT_NOT_EXACT
 "Im¶ic™ cÚv”siÚ oàv®ui nÙƒxaù"

	)

162 
	#TXT_s_NOT_INITIALIZED
 "'%s' i nÙ in™Ÿlized."

	)

163 
	#TXT_NOT_LVALUE
 "Ex´essiÚ i nÙ‡Àl-v®ue"

	)

164 
	#TXT_s_NOT_MEMBER_OF_s
 "'%s' i nÙ‡ memb” oà'%s'"

	)

165 
	#TXT_NOT_VALID_REFERENCE
 "NÙ‡ v®id„eã»nû"

	)

166 
	#TXT_NOT_VALID_LVALUE
 "NÙ‡ v®id†v®ue"

	)

168 
	#TXT_OBJECT_DOESNT_SUPPORT_INDEX_OP
 "Ty³ '%s' dÛ¢'ˆsuµÜˆthšdexšg o³¿tÜ"

	)

169 
	#TXT_OBJECT_HANDLE_NOT_SUPPORTED
 "Objeù hªdË i nÙ suµÜ‹d fÜhi ty³"

	)

170 
	#TXT_ONLY_OBJECTS_MAY_USE_REF_INOUT
 "OÆy objeùy³ th© suµÜˆobjeù hªdË ÿÀu£ &šout. U£ &š o¸&ouˆš¡—d"

	)

171 
	#TXT_ONLY_ONE_ARGUMENT_IN_CAST
 "A ca¡ o³¿tÜ ha Ú¬gum’t"

	)

172 
	#TXT_ONLY_ONE_FUNCTION_ALLOWED
 "Thcodmu¡ cÚš oÃ‡nd oÆy oÃ funùiÚ"

	)

173 
	#TXT_ONLY_ONE_VARIABLE_ALLOWED
 "Thcodmu¡ cÚš oÃ‡nd oÆy oÃ glob® v¬ŸbË"

	)

174 
	#TXT_OPERANDS_MUST_BE_HANDLES
 "BÙh o³¿nd mu¡ bhªdË wh’ com·ršg id’t™y"

	)

176 
	#TXT_PARAMETER_ALREADY_DECLARED
 "P¬am‘”‡Ì—dy deş¬ed"

	)

177 
	#TXT_PARAMETER_CANT_BE_s
 "P¬am‘”y³ cª'ˆb'%s', beÿu£hty³ cªnÙ bš¡ªcŸ‹d."

	)

178 
	#TXT_POSSIBLE_LOSS_OF_PRECISION
 "CÚv”siÚ from doubËØæßt,…ossibË†os oà´ecisiÚ"

	)

179 
	#TXT_PRIVATE_METHOD_CALL_s
 "IÎeg® c®ÈtØ´iv©m‘hod '%s'"

	)

180 
	#TXT_PRIVATE_PROP_ACCESS_s
 "IÎeg®‡cûs tØ´iv©´İ”ty '%s'"

	)

181 
	#TXT_PROPERTY_ACCESSOR_DISABLED
 "Prİ”ty‡cûssÜ havb“Àdi§bËd byh­¶iÿtiÚ"

	)

182 
	#TXT_PROPERTY_ACCESSOR_MUST_BE_IMPLEMENTED
 "Prİ”ty‡cûssÜ mu¡ bim¶em’‹d"

	)

183 
	#TXT_PROPERTY_CANT_BE_CONST
 "CÏs ´İ”t› ÿÂÙ bdeş¬ed‡ cÚ¡"

	)

184 
	#TXT_PROPERTY_HAS_NO_GET_ACCESSOR
 "Th´İ”ty ha nØg‘‡cûssÜ"

	)

185 
	#TXT_PROPERTY_HAS_NO_SET_ACCESSOR
 "Th´İ”ty ha nØ£ˆacûssÜ"

	)

187 
	#TXT_REF_IS_READ_ONLY
 "Reã»nû i »ad-Úly"

	)

188 
	#TXT_REF_IS_TEMP
 "Reã»nû i ‹mpÜ¬y"

	)

189 
	#TXT_RETURN_CANT_BE_s
 "R‘uºy³ cª'ˆb'%s'"

	)

190 
	#TXT_REF_CANT_BE_RETURNED_DEFERRED_PARAM
 "ResuÉšg„eã»nû cªnÙ b»tuºed. Th”¬deã¼ed‡rgum’t th© may inv®id©™."

	)

191 
	#TXT_REF_CANT_BE_RETURNED_LOCAL_VARS
 "ResuÉšg„eã»nû cªnÙ b»tuºed. Thex´essiÚ u£ objeù th© duršg cËªu°may inv®id©™."

	)

193 
	#TXT_SHARED_CANNOT_ACCESS_NON_SHARED_VAR_s
 "Sh¬ed codÿÂÙ‡cûs nÚ-sh¬ed glob® v¬ŸbË '%s'"

	)

194 
	#TXT_SHARED_CANNOT_CALL_NON_SHARED_FUNC_s
 "Sh¬ed codÿÂÙ c®ÈnÚ-sh¬ed funùiÚ '%s'"

	)

195 
	#TXT_SHARED_CANNOT_IMPLEMENT_NON_SHARED_s
 "Sh¬ed cÏs ÿÂÙ im¶em’ˆnÚ-sh¬ed iÁ”çû '%s'"

	)

196 
	#TXT_SHARED_CANNOT_INHERIT_FROM_NON_SHARED_s
 "Sh¬ed cÏs ÿÂÙ inh”™ from‚Ú-sh¬ed cÏs '%s'"

	)

197 
	#TXT_SHARED_CANNOT_USE_NON_SHARED_TYPE_s
 "Sh¬ed codÿÂÙ u£‚Ú-sh¬edy³ '%s'"

	)

198 
	#TXT_SHARED_DOESNT_MATCH_ORIGINAL
 "Sh¬edy³ dÛ¢'ˆm©chhÜigš® deş¬©iÚ iÀÙh” moduË"

	)

199 
	#TXT_SIGNED_UNSIGNED_MISMATCH
 "SigÃd/UnsigÃd mism©ch"

	)

200 
	#TXT_STRINGS_NOT_RECOGNIZED
 "SŒšg ¬nÙ„ecognized byh­¶iÿtiÚ"

	)

201 
	#TXT_SWITCH_CASE_MUST_BE_CONSTANT
 "Ca£ƒx´essiÚ mu¡ bcÚ¡ªts"

	)

202 
	#TXT_SWITCH_MUST_BE_INTEGRAL
 "Sw™chƒx´essiÚ mu¡ bš‹g¿Ènumb”s"

	)

204 
	#TXT_TYPE_s_NOT_AVAILABLE_FOR_MODULE
 "Ty³ '%s' i nÙ‡vaabË fÜhi moduË"

	)

206 
	#TXT_UNEXPECTED_END_OF_FILE
 "UÃx³ùedƒnd oàfe"

	)

207 
	#TXT_UNEXPECTED_TOKEN_s
 "UÃx³ùedok’ '%s'"

	)

208 
	#TXT_UNINITIALIZED_GLOBAL_VAR_s
 "U£ oàunš™Ÿlized glob® v¬ŸbË '%s'."

	)

209 
	#TXT_UNREACHABLE_CODE
 "UÄ—chabË code"

	)

210 
	#TXT_UNRECOGNIZED_VIRTUAL_PROPERTY_NODE
 "Vœtu®…rİ”ty cÚš uÄecognized‡¥eù"

	)

211 
	#TXT_UNUSED_SCRIPT_NODE
 "Unu£d süˆnode"

	)

213 
	#TXT_VALUE_TOO_LARGE_FOR_TYPE
 "V®ui toØÏrgfÜ d©¨ty³"

	)

217 
	#TXT_FAILED_TO_INITIALIZE_s
 "FaedØš™Ÿlizglob® v¬ŸbË '%s'"

	)

218 
	#TXT_EXCEPTION_s_IN_s
 "Exû±iÚ '%s' iÀ'%s'"

	)

222 
	#TXT_AUTOHANDLE_CANNOT_BE_USED_FOR_NOCOUNT
 "AutohªdË ÿÂÙ bu£d w™hy³ th© havb“À»gi¡”ed w™h NOCOUNT"

	)

223 
	#TXT_INVALID_CONFIGURATION
 "Inv®id cÚfigu¿tiÚ. V”ifyh»gi¡”ed‡µliÿtiÚ iÁ”çû."

	)

224 
	#TXT_VALUE_TYPE_MUST_HAVE_SIZE
 "A v®uty³ mu¡ b»gi¡”ed w™h‡‚Ú-z”Øsize"

	)

225 
	#TXT_TYPE_s_IS_MISSING_BEHAVIOURS
 "Ty³ '%s' i missšg behaviours"

	)

226 
	#TXT_ILLEGAL_BEHAVIOUR_FOR_TYPE
 "Thbehaviou¸i nÙ com·tibË w™hhty³"

	)

227 
	#TXT_GC_REQUIRE_ADD_REL_GC_BEHAVIOUR
 "A g¬bagcŞËùedy³ mu¡ havthadd»f,„–—£,‡nd‡Î gøbehaviours"

	)

228 
	#TXT_SCOPE_REQUIRE_REL_BEHAVIOUR
 "A scİed„eã»nûy³ mu¡ havth»Ëa£ behaviour"

	)

229 
	#TXT_REF_REQUIRE_ADD_REL_BEHAVIOUR
 "A„eã»nûy³ mu¡ havthadd»àªd„–—£ behaviours"

	)

230 
	#TXT_NON_POD_REQUIRE_CONSTR_DESTR_BEHAVIOUR
 "A‚Ú-pod v®uty³ mu¡ havthdeçuÉ cÚ¡ruùÜ‡nd de¡ruùÜ behaviours"

	)

231 
	#TXT_CANNOT_PASS_TYPE_s_BY_VAL
 "Cª'ˆ·s ty³ '%s' by v®uuÆes th­¶iÿtiÚy³ i šfÜmed iÀth»gi¡¿tiÚ"

	)

232 
	#TXT_CANNOT_RET_TYPE_s_BY_VAL
 "Cª'ˆ»tuºy³ '%s' by v®uuÆes th­¶iÿtiÚy³ i šfÜmed iÀth»gi¡¿tiÚ"

	)

234 
	#TXT_DONT_SUPPORT_TYPE_s_BY_VAL
 "DÚ'ˆsuµÜˆ·ssšgy³ '%s' by v®utØ­¶iÿtiÚ iÀÇtivÿÎšg cÚv’tiÚ oÀthi ¶©fÜm"

	)

236 
	#TXT_DONT_SUPPORT_RET_TYPE_s_BY_VAL
 "DÚ'ˆsuµÜˆ»tuºšgy³ '%s' by v®uäom‡µliÿtiÚ iÀÇtivÿÎšg cÚv’tiÚ oÀthi ¶©fÜm"

	)

237 
	#TXT_GC_CANNOT_FREE_OBJ_OF_TYPE_s
 "GC cªnÙ f»ª objeù oàty³ '%s', iˆi k•ˆ®ivbyh­¶iÿtiÚ"

	)

238 
	#TXT_OBJECT_TYPE_s_DOESNT_EXIST
 "Objeùy³ '%s' dÛ¢'ˆexi¡"

	)

239 
	#TXT_TEMPLATE_TYPE_s_DOESNT_EXIST
 "Tem¶©ty³ '%s' dÛ¢'ˆexi¡"

	)

240 
	#TXT_TEMPLATE_SUBTYPE_s_DOESNT_EXIST
 "Tem¶©subty³ '%s' dÛ¢'ˆexi¡"

	)

241 
	#TXT_FAILED_READ_SUBTYPE_OF_TEMPLATE_s
 "FaedØ»ad subty³ oà‹m¶©ty³ '%s'"

	)

242 
	#TXT_INSTANCING_INVLD_TMPL_TYPE_s_s
 "A‰em±šgØš¡ªcŸ‹ inv®idem¶©ty³ '%s<%s>'"

	)

243 
	#TXT_FAILED_IN_FUNC_s
 "Faed iÀÿÎØfunùiÚ '%s'"

	)

244 
	#TXT_FAILED_IN_FUNC_s_WITH_s
 "Faed iÀÿÎØfunùiÚ '%s' w™h '%s'"

	)

245 
	#TXT_FAILED_IN_FUNC_s_WITH_s_AND_s
 "Faed iÀÿÎØfunùiÚ '%s' w™h '%s'‡nd '%s'"

	)

246 
	#TXT_GC_RECEIVED_NULL_PTR
 "AddSütObjeùToGC c®Ëd w™h‚uÎ…oš‹r"

	)

247 
	#TXT_EXCEPTION_IN_NESTED_CALL
 "AÀexû±iÚ occu¼ed iÀ¨Ã¡ed c®l"

	)

251 
	#TXT_PROPERTY
 "Prİ”ty"

	)

252 
	#TXT_SYSTEM_FUNCTION
 "Sy¡em funùiÚ"

	)

253 
	#TXT_VARIABLE_DECL
 "V¬ŸbË deş¬©iÚ"

	)

257 
	#TXT_STACK_OVERFLOW
 "Sck ov”æow"

	)

258 
	#TXT_NULL_POINTER_ACCESS
 "NuÎ…oš‹¸acûss"

	)

259 
	#TXT_DIVIDE_BY_ZERO
 "Dividby z”o"

	)

260 
	#TXT_UNRECOGNIZED_BYTE_CODE
 "UÄecognized by‹ code"

	)

261 
	#TXT_INVALID_CALLING_CONVENTION
 "Inv®id c®lšg cÚv’tiÚ"

	)

262 
	#TXT_UNBOUND_FUNCTION
 "Unbound funùiÚ c®Ëd"

	)

263 
	#TXT_OUT_OF_BOUNDS
 "Ouˆoà¿nge"

	)

	@../hdr/script/as_thread.h

39 #iâdeà
AS_THREAD_H


40 
	#AS_THREAD_H


	)

42 
	~"as_cÚfig.h
"

43 
	~"as_¡ršg.h
"

44 
	~"as_¬¿y.h
"

45 
	~"as_m­.h
"

46 
	~"as_ü™iÿl£ùiÚ.h
"

48 
BEGIN_AS_NAMESPACE


50 
şass
 
	gasCTh»adLoÿlD©a
;

52 şas 
	casCTh»adMªag”


54 
	mpublic
:

55 
asCTh»adLoÿlD©a
 *
G‘LoÿlD©a
();

56 
CËªupLoÿlD©a
();

58 
P»·»
();

59 
UÅ»·»
();

62 
	$DECLAREREADWRITELOCK
(
­pRWLock
)

64 
´Ùeùed
:

65 
	`asCTh»adMªag”
();

66 ~
	`asCTh»adMªag”
();

70 
»fCouÁ
;

72 #iâdeà
AS_NO_THREADS


73 
	`DECLARECRITICALSECTION
(
ü™iÿlSeùiÚ
);

75 
asCTh»adLoÿlD©a
 *
	`G‘LoÿlD©a
(
asPWORD
 
th»adId
);

76 
	`S‘LoÿlD©a
(
asPWORD
 
th»adId
, 
asCTh»adLoÿlD©a
 *
d
);

78 
asCM­
<
asPWORD
,
asCTh»adLoÿlD©a
*> 
dM­
;

80 
asCTh»adLoÿlD©a
 *
d
;

86 
şass
 
asISütCÚ‹xt
;

88 şas 
	casCTh»adLoÿlD©a


90 
public
:

91 
asCA¼ay
<
asISütCÚ‹xt
 *> 
aùiveCÚ‹xts
;

92 
asCSŒšg
 
¡ršg
;

94 
´Ùeùed
:

95 
ä›nd
 
şass
 
asCTh»adMªag”
;

97 
	`asCTh»adLoÿlD©a
();

98 ~
	`asCTh»adLoÿlD©a
();

101 
END_AS_NAMESPACE


	@../hdr/script/as_tokendef.h

39 #iâdeà
AS_TOKENDEF_H


40 
	#AS_TOKENDEF_H


	)

42 
	~"as_cÚfig.h
"

44 
BEGIN_AS_NAMESPACE


46 
	eeTok’Ty³


48 
	m‰UÄecognizedTok’
,

50 
	m‰End
,

53 
	m‰Wh™eS·û
,

54 
	m‰OÃlšeComm’t
,

55 
	m‰MuÉšeComm’t
,

58 
	m‰Id’tif›r
,

59 
	m‰IÁCÚ¡ªt
,

60 
	m‰FlßtCÚ¡ªt
,

61 
	m‰DoubËCÚ¡ªt
,

62 
	m‰SŒšgCÚ¡ªt
,

63 
	m‰MuÉšeSŒšgCÚ¡ªt
,

64 
	m‰H”edocSŒšgCÚ¡ªt
,

65 
	m‰NÚT”mš©edSŒšgCÚ¡ªt
,

66 
	m‰B™sCÚ¡ªt
,

69 
	m‰Plus
,

70 
	m‰Mšus
,

71 
	m‰Sr
,

72 
	m‰SÏsh
,

73 
	m‰P”ûÁ
,

75 
	m‰HªdË
,

77 
	m‰AddAssign
,

78 
	m‰SubAssign
,

79 
	m‰MulAssign
,

80 
	m‰DivAssign
,

81 
	m‰ModAssign
,

83 
	m‰OrAssign
,

84 
	m‰AndAssign
,

85 
	m‰XÜAssign
,

86 
	m‰ShiáLeáAssign
,

87 
	m‰ShiáRightLAssign
,

88 
	m‰ShiáRightAAssign
,

90 
	m‰Inc
,

91 
	m‰Dec
,

93 
	m‰DÙ
,

94 
	m‰Scİe
,

97 
	m‰Assignm’t
,

98 
	m‰EndS‹m’t
,

99 
	m‰Li¡S•¬©Ü
,

100 
	m‰S¹S‹m’tBlock
,

101 
	m‰EndS‹m’tBlock
,

102 
	m‰O³nP¬ªthesis
,

103 
	m‰Clo£P¬ªthesis
,

104 
	m‰O³nB¿ck‘
,

105 
	m‰Clo£B¿ck‘
,

106 
	m‰Amp
,

109 
	m‰B™Or
,

110 
	m‰B™NÙ
,

111 
	m‰B™XÜ
,

112 
	m‰B™ShiáLeá
,

113 
	m‰B™ShiáRight
,

114 
	m‰B™ShiáRightAr™h
,

117 
	m‰Equ®
,

118 
	m‰NÙEqu®
,

119 
	m‰LessThª
,

120 
	m‰G»©”Thª
,

121 
	m‰LessThªOrEqu®
,

122 
	m‰G»©”ThªOrEqu®
,

124 
	m‰Que¡iÚ
,

125 
	m‰CŞÚ
,

128 
	m‰If
,

129 
	m‰El£
,

130 
	m‰FÜ
,

131 
	m‰Whe
,

132 
	m‰BoŞ
,

133 
	m‰FuncDef
,

134 
	m‰ImpÜt
,

135 
	m‰IÁ
,

136 
	m‰IÁ8
,

137 
	m‰IÁ16
,

138 
	m‰IÁ64
,

139 
	m‰IÁ”çû
,

140 
	m‰Is
,

141 
	m‰NÙIs
,

142 
	m‰UIÁ
,

143 
	m‰UIÁ8
,

144 
	m‰UIÁ16
,

145 
	m‰UIÁ64
,

146 
	m‰Flßt
,

147 
	m‰Void
,

148 
	m‰True
,

149 
	m‰F®£
,

150 
	m‰R‘uº
,

151 
	m‰NÙ
,

152 
	m‰And
,

153 
	m‰Or
,

154 
	m‰XÜ
,

155 
	m‰B»ak
,

156 
	m‰CÚtšue
,

157 
	m‰CÚ¡
,

158 
	m‰Do
,

159 
	m‰DoubË
,

160 
	m‰Sw™ch
,

161 
	m‰Ca£
,

162 
	m‰DeçuÉ
,

163 
	m‰In
,

164 
	m‰Out
,

165 
	m‰InOut
,

166 
	m‰NuÎ
,

167 
	m‰CÏss
,

168 
	m‰Ty³def
,

169 
	m‰Enum
,

170 
	m‰Ca¡
,

171 
	m‰Priv©e
,

172 
	m‰Name¥aû


175 
	ssTok’WÜd


177 cÚ¡ *
	mwÜd
;

178 
eTok’Ty³
 
	mtok’Ty³
;

181 
sTok’WÜd
 cÚ¡ 
	gtok’WÜds
[] =

183 {"+" , 
‰Plus
},

184 {"+=" , 
‰AddAssign
},

185 {"++" , 
‰Inc
},

186 {"-" , 
‰Mšus
},

187 {"-=" , 
‰SubAssign
},

188 {"--" , 
‰Dec
},

189 {"*" , 
‰Sr
},

190 {"*=" , 
‰MulAssign
},

191 {"/" , 
‰SÏsh
},

192 {"/=" , 
‰DivAssign
},

193 {"%" , 
‰P”ûÁ
},

194 {"%=" , 
‰ModAssign
},

195 {"=" , 
‰Assignm’t
},

196 {"==" , 
‰Equ®
},

197 {"." , 
‰DÙ
},

198 {"|" , 
‰B™Or
},

199 {"|=" , 
‰OrAssign
},

200 {"||" , 
‰Or
},

201 {"&" , 
‰Amp
},

202 {"&=" , 
‰AndAssign
},

203 {"&&" , 
‰And
},

204 {"^" , 
‰B™XÜ
},

205 {"^=" , 
‰XÜAssign
},

206 {"^^" , 
‰XÜ
},

207 {"<" , 
‰LessThª
},

208 {"<=" , 
‰LessThªOrEqu®
},

209 {"<<" , 
‰B™ShiáLeá
},

210 {"<<=" , 
‰ShiáLeáAssign
},

211 {">" , 
‰G»©”Thª
},

212 {">=" , 
‰G»©”ThªOrEqu®
},

213 {">>" , 
‰B™ShiáRight
},

214 {">>=" , 
‰ShiáRightLAssign
},

215 {">>>" , 
‰B™ShiáRightAr™h
},

216 {">>>=" , 
‰ShiáRightAAssign
},

217 {"~" , 
‰B™NÙ
},

218 {";" , 
‰EndS‹m’t
},

219 {"," , 
‰Li¡S•¬©Ü
},

220 {"{" , 
‰S¹S‹m’tBlock
},

221 {"}" , 
‰EndS‹m’tBlock
},

222 {"(" , 
‰O³nP¬ªthesis
},

223 {")" , 
‰Clo£P¬ªthesis
},

224 {"[" , 
‰O³nB¿ck‘
},

225 {"]" , 
‰Clo£B¿ck‘
},

226 {"?" , 
‰Que¡iÚ
},

227 {":" , 
‰CŞÚ
},

228 {"::" , 
‰Scİe
},

229 {"!" , 
‰NÙ
},

230 {"!=" , 
‰NÙEqu®
},

231 {"!is" , 
‰NÙIs
},

232 {"@" , 
‰HªdË
},

233 {"ªd" , 
‰And
},

234 {"boŞ" , 
‰BoŞ
},

235 {"b»ak" , 
‰B»ak
},

236 {"ÿ£" , 
‰Ca£
},

237 {"ÿ¡" , 
‰Ca¡
},

238 {"şass" , 
‰CÏss
},

239 {"cÚ¡" , 
‰CÚ¡
},

240 {"cÚtšue" , 
‰CÚtšue
},

241 {"deçuÉ" , 
‰DeçuÉ
},

242 {"do" , 
‰Do
},

243 #ifdeà 
AS_USE_DOUBLE_AS_FLOAT


244 {"doubË" , 
‰Flßt
},

246 {"doubË" , 
‰DoubË
},

248 {"–£" , 
‰El£
},

249 {"’um" , 
‰Enum
},

250 {"çl£" , 
‰F®£
},

251 {"æßt" , 
‰Flßt
},

252 {"fÜ" , 
‰FÜ
},

253 {"funcdef" , 
‰FuncDef
},

254 {"if" , 
‰If
},

255 {"impÜt" , 
‰ImpÜt
},

256 {"š" , 
‰In
},

257 {"šout" , 
‰InOut
},

258 {"št" , 
‰IÁ
},

259 {"št8" , 
‰IÁ8
},

260 {"št16" , 
‰IÁ16
},

261 {"št32" , 
‰IÁ
},

262 {"št64" , 
‰IÁ64
},

263 {"š‹rçû" , 
‰IÁ”çû
},

264 {"is" , 
‰Is
},

265 {"Çme¥aû" , 
‰Name¥aû
},

266 {"nÙ" , 
‰NÙ
},

267 {"nuÎ" , 
‰NuÎ
},

268 {"Ü" , 
‰Or
},

269 {"out" , 
‰Out
},

270 {"´iv©e" , 
‰Priv©e
},

271 {"»tuº" , 
‰R‘uº
},

272 {"sw™ch" , 
‰Sw™ch
},

273 {"Œue" , 
‰True
},

274 {"ty³def" , 
‰Ty³def
},

275 {"ušt" , 
‰UIÁ
},

276 {"ušt8" , 
‰UIÁ8
},

277 {"ušt16" , 
‰UIÁ16
},

278 {"ušt32" , 
‰UIÁ
},

279 {"ušt64" , 
‰UIÁ64
},

280 {"void" , 
‰Void
},

281 {"whe" , 
‰Whe
},

282 {"xÜ" , 
‰XÜ
},

285 cÚ¡ 
	gnumTok’WÜds
 = (
tok’WÜds
)/(
sTok’WÜd
);

287 cÚ¡ * cÚ¡ 
	gwh™eS·û
 = " \t\r\n";

292 cÚ¡ * cÚ¡ 
	gTHIS_TOKEN
 = "this";

293 cÚ¡ * cÚ¡ 
	gFROM_TOKEN
 = "from";

294 cÚ¡ * cÚ¡ 
	gSUPER_TOKEN
 = "super";

295 cÚ¡ * cÚ¡ 
	gSHARED_TOKEN
 = "shared";

296 cÚ¡ * cÚ¡ 
	gFINAL_TOKEN
 = "final";

297 cÚ¡ * cÚ¡ 
	gOVERRIDE_TOKEN
 = "override";

298 cÚ¡ * cÚ¡ 
	gGET_TOKEN
 = "get";

299 cÚ¡ * cÚ¡ 
	gSET_TOKEN
 = "set";

301 
	gEND_AS_NAMESPACE


	@../hdr/script/as_tokenizer.h

40 #iâdeà
AS_TOKENIZER_H


41 
	#AS_TOKENIZER_H


	)

43 
	~"as_cÚfig.h
"

44 
	~"as_tok’def.h
"

45 
	~"as_m­.h
"

46 
	~"as_¡ršg.h
"

48 
BEGIN_AS_NAMESPACE


50 şas 
	casCTok’iz”


52 
	mpublic
:

53 
eTok’Ty³
 
	$G‘Tok’
(cÚ¡ *
sourû
, 
size_t
 
sourûL’gth
, size_ˆ*
tok’L’gth
, 
asETok’CÏss
 *
tc
 = 0) const;

55 cÚ¡ *
	`G‘Defš™iÚ
(
tok’Ty³
);

57 
´Ùeùed
:

58 
ä›nd
 
şass
 
asCSütEngše
;

60 
	`asCTok’iz”
();

61 ~
	`asCTok’iz”
();

63 
asETok’CÏss
 
	$P¬£Tok’
(cÚ¡ *
sourû
, 
size_t
 
sourûL’gth
, size_ˆ&
tok’L’gth
, 
eTok’Ty³
 &
tok’Ty³
) const;

64 
boŞ
 
	$IsWh™eS·û
(cÚ¡ *
sourû
, 
size_t
 
sourûL’gth
, size_ˆ&
tok’L’gth
, 
eTok’Ty³
 &
tok’Ty³
) const;

65 
boŞ
 
	$IsComm’t
(cÚ¡ *
sourû
, 
size_t
 
sourûL’gth
, size_ˆ&
tok’L’gth
, 
eTok’Ty³
 &
tok’Ty³
) const;

66 
boŞ
 
	$IsCÚ¡ªt
(cÚ¡ *
sourû
, 
size_t
 
sourûL’gth
, size_ˆ&
tok’L’gth
, 
eTok’Ty³
 &
tok’Ty³
) const;

67 
boŞ
 
	$IsKeyWÜd
(cÚ¡ *
sourû
, 
size_t
 
sourûL’gth
, size_ˆ&
tok’L’gth
, 
eTok’Ty³
 &
tok’Ty³
) const;

68 
boŞ
 
	$IsId’tif›r
(cÚ¡ *
sourû
, 
size_t
 
sourûL’gth
, size_ˆ&
tok’L’gth
, 
eTok’Ty³
 &
tok’Ty³
) const;

70 cÚ¡ 
asCSütEngše
 *
’gše
;

72 
asCM­
<
asCSŒšgPoš‹r
, 
eTok’Ty³
> 
®phaKeywÜdM­
;

73 
asCM­
<
asCSŒšgPoš‹r
, 
eTok’Ty³
> 
nÚAÍhaKeywÜdM­
;

76 
END_AS_NAMESPACE


	@../hdr/script/as_typeinfo.h

40 #iâdeà
AS_TYPEINFO_H


41 
	#AS_TYPEINFO_H


	)

43 
	~"as_cÚfig.h
"

44 
	~"as_d©©y³.h
"

46 
BEGIN_AS_NAMESPACE


48 
	sasCTy³Info


50 
asCTy³Info
();

51 
S‘
(cÚ¡ 
asCD©aTy³
 &
d©aTy³
);

53 
S‘V¬ŸbË
(cÚ¡ 
asCD©aTy³
 &
d©aTy³
, 
¡ackOff£t
, 
boŞ
 
isTempÜ¬y
);

54 
S‘CÚ¡ªtB
(cÚ¡ 
asCD©aTy³
 &
d©aTy³
, 
asBYTE
 
v®ue
);

55 
S‘CÚ¡ªtQW
(cÚ¡ 
asCD©aTy³
 &
d©aTy³
, 
asQWORD
 
v®ue
);

56 
S‘CÚ¡ªtDW
(cÚ¡ 
asCD©aTy³
 &
d©aTy³
, 
asDWORD
 
v®ue
);

57 
S‘CÚ¡ªtF
(cÚ¡ 
asCD©aTy³
 &
d©aTy³
, 
v®ue
);

58 
S‘CÚ¡ªtD
(cÚ¡ 
asCD©aTy³
 &
d©aTy³
, 
v®ue
);

59 
S‘NuÎCÚ¡ªt
();

60 
S‘Dummy
();

62 
boŞ
 
IsNuÎCÚ¡ªt
();

64 
asCD©aTy³
 
	md©aTy³
;

65 
boŞ
 
	misLV®ue
 : 1;

66 
boŞ
 
	misTempÜ¬y
 : 1;

67 
boŞ
 
	misCÚ¡ªt
 : 1;

68 
boŞ
 
	misV¬ŸbË
 : 1;

69 
boŞ
 
	misEx¶ic™HªdË
 : 1;

70 
	mdummy
 : 11;

71 
	m¡ackOff£t
;

74 
asQWORD
 
	mqwÜdV®ue
;

75 
	mdoubËV®ue
;

76 
asDWORD
 
	mdwÜdV®ue
;

77 
	mæßtV®ue
;

78 
	mštV®ue
;

79 
asWORD
 
	mwÜdV®ue
;

80 
asBYTE
 
	mby‹V®ue
;

84 
	gEND_AS_NAMESPACE


	@../hdr/script/as_variablescope.h

39 #iâdeà
AS_VARIABLESCOPE_H


40 
	#AS_VARIABLESCOPE_H


	)

42 
	~"as_cÚfig.h
"

44 #iâdeà
AS_NO_COMPILER


46 
	~"as_¬¿y.h
"

47 
	~"as_¡ršg.h
"

48 
	~"as_d©©y³.h
"

50 
BEGIN_AS_NAMESPACE


52 
	ssV¬ŸbË


54 
asCSŒšg
 
	mÇme
;

55 
asCD©aTy³
 
	mty³
;

56 
	m¡ackOff£t
;

57 
boŞ
 
	misIn™Ÿlized
;

58 
boŞ
 
	misPu»CÚ¡ªt
;

59 
asQWORD
 
	mcÚ¡ªtV®ue
;

60 
boŞ
 
	mÚH—p
;

63 şas 
	casCV¬ŸbËScİe


65 
	mpublic
:

66 
asCV¬ŸbËScİe
×sCV¬ŸbËScİ*
·»Á
);

67 ~
asCV¬ŸbËScİe
();

69 
Re£t
();

71 
Deş¬eV¬ŸbË
(cÚ¡ *
Çme
, cÚ¡ 
asCD©aTy³
 &
ty³
, 
¡ackOff£t
, 
boŞ
 
isObjeùOnH—p
);

72 
sV¬ŸbË
 *
G‘V¬ŸbË
(cÚ¡ *
Çme
);

73 
sV¬ŸbË
 *
G‘V¬ŸbËByOff£t
(
off£t
);

75 
asCV¬ŸbËScİe
 *
	m·»Á
;

77 
boŞ
 
	misB»akScİe
;

78 
boŞ
 
	misCÚtšueScİe
;

80 
	masCA¼ay
<
	msV¬ŸbË
 *> 
	mv¬ŸbËs
;

83 
	gEND_AS_NAMESPACE


	@../hdr/script/scriptarray.h

1 #iâdeà
SCRIPTARRAY_H


2 
	#SCRIPTARRAY_H


	)

4 #iâdeà
ANGELSCRIPT_H


6 
	~<ªg–süt.h
>

16 #iâdeà
AS_USE_STLNAMES


17 
	#AS_USE_STLNAMES
 0

	)

20 
BEGIN_AS_NAMESPACE


22 
	gSA¼ayBufãr
;

23 
	gSA¼ayCache
;

25 şas 
	cCSütA¼ay


27 
	mpublic
:

28 
CSütA¼ay
(
asUINT
 
Ëngth
, 
asIObjeùTy³
 *
Ù
);

29 
CSütA¼ay
(
asUINT
 
Ëngth
, *
defV®
, 
asIObjeùTy³
 *
Ù
);

30 
	mvœtu®
 ~
CSütA¼ay
();

32 
	$AddRef
() const;

33 
	$R–—£
() const;

36 
asIObjeùTy³
 *
	$G‘A¼ayObjeùTy³
() const;

37 
	$G‘A¼ayTy³Id
() const;

38 
	$G‘EËm’tTy³Id
() const;

40 
	`Re£rve
(
asUINT
 
maxEËm’ts
);

41 
	`Resize
(
asUINT
 
numEËm’ts
);

42 
asUINT
 
	$G‘Size
() const;

43 
boŞ
 
	$IsEm±y
() const;

46 *
	`At
(
asUINT
 
šdex
);

47 cÚ¡ *
	$At
(
asUINT
 
šdex
) const;

50 
	`S‘V®ue
(
asUINT
 
šdex
, *
v®ue
);

52 
CSütA¼ay
 &
İ”©Ü
=(const CScriptArray&);

53 
boŞ
 
İ”©Ü
==(cÚ¡ 
CSütA¼ay
 &) const;

55 
	`In£¹At
(
asUINT
 
šdex
, *
v®ue
);

56 
	`RemoveAt
(
asUINT
 
šdex
);

57 
	`In£¹La¡
(*
v®ue
);

58 
	`RemoveLa¡
();

59 
	`SÜtAsc
();

60 
	`SÜtDesc
();

61 
	`SÜtAsc
(
asUINT
 
šdex
,‡sUINT 
couÁ
);

62 
	`SÜtDesc
(
asUINT
 
šdex
,‡sUINT 
couÁ
);

63 
	`SÜt
(
asUINT
 
šdex
,‡sUINT 
couÁ
, 
boŞ
 
asc
);

64 
	`Rev”£
();

65 
	$Fšd
(*
v®ue
) const;

66 
	$Fšd
(
asUINT
 
šdex
, *
v®ue
) const;

69 
	`G‘RefCouÁ
();

70 
	`S‘FÏg
();

71 
boŞ
 
	`G‘FÏg
();

72 
	`EnumReã»nûs
(
asISütEngše
 *
’gše
);

73 
	`R–—£AÎHªdËs
(
asISütEngše
 *
’gše
);

75 
´Ùeùed
:

76 
mubË
 
»fCouÁ
;

77 
mubË
 
boŞ
 
gcFÏg
;

78 
asIObjeùTy³
 *
objTy³
;

79 
SA¼ayBufãr
 *
bufãr
;

80 
–em’tSize
;

81 
subTy³Id
;

83 
boŞ
 
	`Less
(cÚ¡ *
a
, cÚ¡ *
b
, boŞ 
asc
, 
asISütCÚ‹xt
 *
ùx
);

84 *
	`G‘A¼ayI‹mPoš‹r
(
šdex
);

85 *
	`G‘D©aPoš‹r
(*
bufãr
);

86 
	`Cİy
(*
d¡
, *
¤c
);

87 
	`P»ÿche
();

88 
boŞ
 
	`CheckMaxSize
(
asUINT
 
numEËm’ts
);

89 
	`Resize
(
d–
, 
asUINT
 
©
);

90 
	`C»©eBufãr
(
SA¼ayBufãr
 **
buf
, 
asUINT
 
numEËm’ts
);

91 
	`D–‘eBufãr
(
SA¼ayBufãr
 *
buf
);

92 
	`CİyBufãr
(
SA¼ayBufãr
 *
d¡
, SA¼ayBufã¸*
¤c
);

93 
	`CÚ¡ruù
(
SA¼ayBufãr
 *
buf
, 
asUINT
 
¡¬t
,‡sUINT 
’d
);

94 
	`De¡ruù
(
SA¼ayBufãr
 *
buf
, 
asUINT
 
¡¬t
,‡sUINT 
’d
);

95 
boŞ
 
	$Equ®s
(cÚ¡ *
a
, cÚ¡ *
b
, 
asISütCÚ‹xt
 *
ùx
, 
SA¼ayCache
 *
ÿche
) const;

98 
	`Regi¡”SütA¼ay
(
asISütEngše
 *
’gše
, 
boŞ
 
deçuÉA¼ay
);

100 
END_AS_NAMESPACE


	@../hdr/script/scriptstdstring.h

11 #iâdeà
SCRIPTSTDSTRING_H


12 
	#SCRIPTSTDSTRING_H


	)

14 #iâdeà
ANGELSCRIPT_H


16 
	~<ªg–süt.h
>

19 
	~<¡ršg
>

31 #iâdeà
AS_USE_STRINGPOOL


32 
	#AS_USE_STRINGPOOL
 1

	)

42 #iâdeà
AS_USE_STLNAMES


43 
	#AS_USE_STLNAMES
 0

	)

46 
BEGIN_AS_NAMESPACE


48 
Regi¡”StdSŒšg
(
asISütEngše
 *
’gše
);

49 
Regi¡”StdSŒšgUts
(
asISütEngše
 *
’gše
);

51 
	gEND_AS_NAMESPACE


	@../hdr/sys_globals.h

1 #´agm¨
Úû


3 
usšg
 
Çme¥aû
 
	g¡d
;

4 
	~<veùÜ
>

5 
	~<li¡
>

6 
	~<¡ršg
>

7 
	~<¡dio.h
>

9 
	~"±h»ad.h
"

14 
	~"ªg–süt.h
"

15 
	~"süt¡d¡ršg.h
"

16 
	~"sü¼ay.h
"

24 (*
	gEx‹ºFunc
)(...);

27 
	~<®Ëgro5/®Ëgro.h
>

28 
	~<®Ëgro5/®Ëgro_fÚt.h
>

29 
	~<®Ëgro5/®Ëgro_image.h
>

30 
	~<®Ëgro5/®Ëgro_Çtive_dŸlog.h
>

31 
	~<®Ëgro5/®Ëgro_´im™ives.h
>

32 
	~<®Ëgro5/®Ëgro_physfs.h
>

33 
	~<®Ëgro5/®Ëgro_‰f.h
>

34 
	~<®Ëgro5/®Ëgro_audio.h
>

35 
	~<®Ëgro5/®Ëgro_acodec.h
>

40 
	~"d©a/süts/commÚDefšes.h
"

42 
	~"sy¡em/sys_defšes.h
"

44 
	~"chmunk/chmunk.h
"

46 
	~"gui/gui_maš.h
"

47 
	~"gui/gui_»nd”.h
"

48 
	~"gui/gui_süŞlBox.h
"

50 
	~"io/io_logFe.h
"

51 
	~"io/io_cÚfigFe.h
"

52 
	~"io/io_keybßrd.h
"

53 
	~"io/io_images.h
"

54 
	~"io/io_keyBšd.h
"

55 
	~"io/io_·ckFe.h
"

57 
	~"sy¡em/sys_süt.h
"

58 
	~"sy¡em/sys_cÚsŞe.h
"

59 
	~"sy¡em/sys_cÚCommªds.h
"

60 
	~"sy¡em/sys_defšes.h
"

61 
	~"sy¡em/sys_shutdown.h
"

62 
	~"sy¡em/sys_¡¬tup.h
"

63 
	~"sy¡em/sys_timšg.h
"

64 
	~"sy¡em/sys_äame.h
"

65 
	~"sy¡em/sys_uts.h
"

66 
	~"sy¡em/sys_physicsCŞlisiÚs.h
"

67 
	~"sy¡em/sys_physics.h
"

68 
	~"sy¡em/sys_pix–CŞlide.h
"

69 
	~"sy¡em/sys_fÚt.h
"

70 
	~"sy¡em/sys_sound.h
"

71 
	~"sy¡em/sys_m©hs.h
"

72 
	~"sy¡em/sys_debug.h
"

74 
	~"game/gam_Œªsãr.h
"

75 
	~"game/gam_droid.h
"

76 
	~"game/gam_Ëv–s.h
"

77 
	~"game/gam_¡¬f›ld.h
"

78 
	~"game/gam_»nd”.h
"

79 
	~"game/gam_¶ay”.h
"

80 
	~"game/gam_droidAI.h
"

81 
	~"game/gam_doÜs.h
"

82 
	~"game/gam_sideV›w.h
"

83 
	~"game/gam_LOS.h
"

84 
	~"game/gam_d©aba£.h
"

85 
	~"game/gam_buÎ‘.h
"

86 
	~"game/gam_‹rmš®.h
"

87 
	~"game/gam_šŒo.h
"

88 
	~"game/gam_¥ÙLight.h
"

89 
	~"game/gam_·¹işes.h
"

90 
	~"game/gam_·thFšd.h
"

92 
	#RET_FALSE
(
n
, 
v
è{
	`io_logToFe
Ò, v);  
çl£
;}

	)

94 
ALLEGRO_DISPLAY
 *
di¥Ïy
;

95 
ALLEGRO_EVENT_QUEUE
 *
ev’tQueue
;

96 
ALLEGRO_FONT
 *
butInFÚt
;

97 
ALLEGRO_EVENT
 
ev’t
;

98 
ALLEGRO_BITMAP
 *
b™m­FBO
;

100 
åsPršt
;

101 
thškFpsPršt
;

102 
»nd”Tick1
;

103 
thškTick1
;

105 
´og»ssB¬LßdTimes
;

107 
boŞ
 
u£HŞdB™m­
;

108 
boŞ
 
gameIsRuÂšg
;

109 
boŞ
 
u£BackšgB™m­
;

111 
wšWidth
;

112 
wšHeight
;

113 
fuÎSü“nV®ue
;

115 
cu¼’tMode
;

117 
boŞ
 
u£CŞlisiÚD‘eùiÚ
;

119 
maxNumS´™esFÜPhysics
;

121 
boŞ
 
¡İLßdšgTh»ad
;

122 
ALLEGRO_THREAD
 *
lßdšgTh»ad
;

123 
boŞ
 
lßdedAÎB™m­s
;

124 
boŞ
 
lßdšgTh»adHasFšished
;

129 
´ofeTeC®cSk³d
;

130 
´ofeTÙ®TeD¿wn
;

132 
´ofeTimeS¹
;

133 
´ofeTimeEnd
;

134 
´ofeTimeAv”age
;

135 
´ofeTimeCouÁ
;

136 
´ofeTimeTÙ®
;

138 
teCŞlisiÚ
;

	@../hdr/system/sys_conCommands.h

1 #´agm¨
Úû


4 
boŞ
 
sys_cÚCommªdH–p
();

7 
boŞ
 
sys_cÚImageInfo
();

10 
cÚ_sütEngšeRe¡¬t
();

13 
boŞ
 
sys_cÚSoundInfo
();

16 
boŞ
 
sys_cÚShowNumH—lšgTes
();

19 
boŞ
 
sys_£tASrDebugIndex
(
¡ršg
 
·¿m1
);

22 
boŞ
 
sys_debugP¬tişes
();

25 
boŞ
 
sys_debugP©hFšdšg
();

	@../hdr/system/sys_console.h

1 #´agm¨
Úû


3 
	#NUM_CON_LINES
 100

	)

4 
	#NUM_MAX_CON_COMMANDS
 40

	)

6 
	#CON_COMMAND_HOST
 1

	)

7 
	#CON_COMMAND_SCRIPT
 2

	)

11 
	mty³
;

12 
¡ršg
 
	mcommªd
;

13 
¡ršg
 
	mu§ge
;

14 
¡ršg
 
	msütFunc
;

15 
Ex‹ºFunc
 
	mcÚFunc
;

16 } 
	t_cÚCommªd
;

18 
veùÜ
<
_cÚCommªd
> 
cÚCommªds
;

19 
cÚCu¼’tNumCommªds
;

23 
¡ršg
 
	mcÚLše
;

24 
ALLEGRO_COLOR
 
	mcÚLšeCŞÜ
;

25 } 
	t_cÚLše
;

27 
ALLEGRO_COLOR
 
cu¼’tCÚLšeCŞÜ
;

29 
_cÚLše
 
cÚLšes
[
NUM_CON_LINES
];

30 
_cÚLše
 
cÚP»vCommªds
[
NUM_MAX_CON_COMMANDS
];

31 
_cÚLše
 
cÚCu¼’tLše
;

32 
_cÚLše
 
cÚCu¼’tProm±
;

34 
cÚCu¼’tCh¬CouÁ
;

35 
cÚBackS·ûDown
;

37 
	#CON_CURSOR_MAX_COUNT
 100

	)

39 
boŞ
 
cÚCursÜIsOn
;

40 
cÚCursÜCouÁ
;

42 
cÚS¹Y
;

43 
cÚBackS·ûD–ay
;

45 
cÚHi¡ÜyPŒ
;

46 
cÚNumInHi¡Üy
;

49 
cÚ_d¿wSü“n
(
boŞ
 
upd©eNow
, 
äameIÁ”v®
);

52 
cÚ_´št
(
boŞ
 
feLog
, boŞ 
upd©eNow
, cÚ¡ *
´štText
, ...);

55 
sys_sütPrštIÁ
(
¡ršg
 *
msgText
, *
štP¬am
);

58 
sys_sütPrštSŒ
(
¡ršg
 *
msgText
, sŒšg *
msgP¬am
);

61 
cÚ_š™CÚsŞe
();

64 
cÚ_´oûssCommªd
(
¡ršg
 
comLše
);

67 
boŞ
 
cÚ_addCommªd
(
¡ršg
 
commªd
, sŒšg 
u§ge
, 
Ex‹ºFunc
 
funùiÚPŒ
);

70 
cÚ_´oûssBack¥aûKey
(
äameIÁ”v®
);

73 
cÚ_´oûssCursÜ
(
äameIÁ”v®
);

76 
cÚ_com¶‘eCommªd
(
¡ršg
 
lookFÜ
);

79 
cÚ_pİHi¡ÜyCommªd
();

82 
cÚ_´štUpd©e
 (
boŞ
 
feLog
, cÚ¡ *
´štText
, ...);

85 
cÚ_£tCŞÜ
 (
»d
, 
g»’
, 
blue
, 
®pha
);

88 
cÚ_addSütCommªd
(
¡ršg
 
commªd
, sŒšg 
u§ge
, sŒšg 
funcPŒ
, 
boŞ
 
£tP¬am
);

91 
cÚ_addCÚsŞeCommªds
();

100 
boŞ
 
sys_cÚCommªdH–p
();

	@../hdr/system/sys_debug.h

1 #´agm¨
Úû


3 
debugCu¼’tCœcu™Ty³
;

6 
LOSTimeS¹
;

7 
LOSTimeStİ
;

10 
debugASrIndex
;

13 
sys_di¥ÏyDebug
();

16 
gam_debugShowWaypošts
();

19 
gam_debugLšeSegm’ts
();

22 
sys_debugDroidSts
();

25 
gam_debugShowDe¡š©iÚ
();

28 
sys_di¥ÏySü“nMiddË
();

	@../hdr/system/sys_defines.h

2 #´agm¨
Úû


4 
	#PROGRAM_NAME
 "Droid3"

	)

6 
	#MAX_STRING_SIZE
 128

	)

8 
	#MAX_PATH
 128

	)

10 
	#SPRITE_SIZE
 32

	)

11 
	#DROID_BODY_SIZE
 20

	)

12 
	#NUM_FRAMES_IN_DROID
 8

	)

13 
	#NUM_FRAMES_IN_BULLET
 8

	)

14 
	#NUM_FRAMES_IN_EXPLOSION
 25

	)

16 
	#NO_PASS_TILE
 40

17 

	)

18 
	#COLLIDE_TILE
 1

	)

19 
	#COLLIDE_PLAYER
 2

	)

20 
	#COLLIDE_DROID
 3

	)

22 
	#MAX_NUM_SPRITES
 20

23 

	)

24 
	#MAX_NUM_BULLETS
 12

25 

	)

26 
	#NUM_SPRITE_TYPES
 24

27 

	)

28 
	#WAYPOINT_UP
 0

	)

29 
	#WAYPOINT_DOWN
 1

	)

31 
	#MOVE_LEFT
 0

	)

32 
	#MOVE_RIGHT
 1

	)

33 
	#MOVE_UP
 2

	)

34 
	#MOVE_DOWN
 3

	)

36 
	#FADE_OFF
 0

	)

37 
	#FADE_ON
 1

	)

39 
	#TILE_CHECK_BULLET
 0

	)

40 
	#TILE_CHECK_PLAYER
 1

	)

41 
	#TILE_CHECK_ASTAR
 2

	)

42 
	#TILE_CHECK_LOS
 3

	)

44 
	#DAMAGE_BULLET
 0

	)

45 
	#DAMAGE_EXPLOSION
 1

	)

46 
	#DAMAGE_COLLISION
 2

	)

48 
	#LIFT_COLOR
 
	`®_m­_rgb
(18, 76, 88)

	)

49 
	#ACTIVE_LIFT_COLOR
 
	`®_m­_rgb
(38, 221, 188)

	)

50 
	#SHIP_COLOR
 
	`®_m­_rgb
(142, 182, 12)

	)

51 
	#ACTIVE_DECK_COLOR
 
	`®_m­_rgb
(71, 199, 232)

	)

52 
	#ENGINE_COLOR
 
	`®_m­_rgb
(34, 34, 34)

	)

54 
	#MAX_LINES_IN_SCREEN
 64

	)

55 
	#MAX_NUM_CHARS_IN_LINE
 128

	)

58 
	#NUM_DB_FRAMES
 32

59 

	)

60 
	#SCROLLBOX_INTRO
 0

	)

61 
	#SCROLLBOX_DB
 1

	)

63 
	#SELECT_COUNTER
 12

	)

64 
	#TRANSFER_COUNTER
 10

	)

66 
	#NUM_SCORE_CHARS
 7

	)

68 
	#COL_PURPLE
 0.54f,0.27f,0.68f,1.0f

	)

69 
	#COL_YELLOW
 1.0f,1.0f,0.0f,1.0f

	)

70 
	#COL_BLACK
 0.0f,0.0f,0.0f,1.0f

	)

71 
	#COL_WHITE
 1.0f,1.0f,1.0f,1.0f

	)

73 
	#HUD_STATE_HEALING
 1

	)

74 
	#HUD_STATE_TRANSFER
 2

	)

75 
	#HUD_STATE_TERMINAL
 3

	)

76 
	#HUD_STATE_MOVE
 4

	)

77 
	#HUD_STATE_PAUSED
 5

	)

78 
	#HUD_STATE_LIFT
 6

	)

79 
	#HUD_STATE_SHIP_VIEW
 7

	)

80 
	#HUD_STATE_DATABASE
 8

	)

81 
	#HUD_STATE_DECK_VIEW
 9

	)

82 
	#HUD_STATE_CAPTURED
 10

	)

83 
	#HUD_STATE_SELECT_TIME
 11

	)

84 
	#HUD_STATE_TIME_LEFT
 12

	)

85 
	#HUD_STATE_CHARGING
 13

	)

87 
	#BULLET_TYPE_NORMAL
 0

	)

88 
	#BULLET_TYPE_SINGLE
 1

	)

89 
	#BULLET_TYPE_DOUBLE
 2

	)

90 
	#BULLET_TYPE_DISRUPTER
 3

	)

92 
	#IGNORE_COLLISION_TIME
 2.0f

	@../hdr/system/sys_font.h

1 #´agm¨
Úû


5 
	#NUM_FONTS
 3

	)

9 
ALLEGRO_FONT
 *
	m‰fFÚt
;

10 
boŞ
 
	mv®id
;

11 
	mfeName
[
MAX_STRING_SIZE
];

12 
	mfÚtSize
;

13 } 
	t_fÚt
;

15 
_fÚt
 
fÚt
[];

16 
cu¼’tFÚt
;

19 
ALLEGRO_COLOR
 
fÚtCŞÜ
;

22 
boŞ
 
io_lßd‰fFÚt
(
fÚtIndex
, 
fÚtSize
, 
¡ršg
 
fÚtName
);

25 
sys_š™TTFSy¡em
();

28 
sys_£tFÚtCŞÜ
(
r
, 
g
, 
b
, 
a
);

31 
sys_´štSŒšg
(
posX
, 
posY
, 
¡ršg
 
‹xtIn
);

34 
sys_´štSŒšgExt
(
posX
, 
posY
, cÚ¡ *
fÜm©
, ...);

37 
sys_£tFÚt
(
ÃwFÚt
);

	@../hdr/system/sys_frame.h

1 #´agm¨
Úû


3 
lßdšgB¬P”ûÁ
;

4 
lßdšgStus
[
MAX_STRING_SIZE
];

6 
boŞ
 
gamePau£d
;

11 
sys_di¥ÏyF¿me
 (
š‹½Ş©iÚ
);

14 
sys_upd©eF¿me
();

	@../hdr/system/sys_maths.h

1 #´agm¨
Úû


3 
cosTabË
[];

4 
sšTabË
[];

7 
sys_£tupTabËs
();

10 
ıVeù
 
sys_rÙ©ePošt
(ıVeù 
pošt
, cpVeù 
Üigš
, 
deg»e
);

13 
sys_CÏmp
(
d
, 
mš
, 
max
);

16 
ıVeù
 
sys_g‘VeùÜDœeùiÚ
(ıVeù 
veùA
, cpVeù 
veùB
);

19 
sys_g‘Di¡ªû
(
ıVeù
 
pošt1
, cpVeù 
pošt2
);

22 
ıVeù
 
sys_g‘DœeùiÚ
(ıVeù 
sourûPošt
, cpVeù 
de¡Pošt
);

27 
sys_di¡ªûtoLšeSegm’t
(
ıVeù
 
±1
, cpVeù 
±2
, cpVeù 
pošt
);

30 
ıVeù
 
sys_şo£¡PoštOnLše
(ıVeù 
±S¹
, cpVeù 
±End
, cpVeù 
±Check
);

33 
boŞ
 
sys_cœşeCŞlisiÚ
(
ıVeù
 
pos1
, 
¿dius1
, cpVeù 
pos2
, 
¿dius2
);

36 
boŞ
 
sys_movšgTow¬ds
(
ıVeù
 
pošt1
, cpVeù 
pošt2
, cpVeù 
pošt1V–oc™y
);

	@../hdr/system/sys_physics.h

1 #´agm¨
Úû


5 
ıBody
 *
	mbody
;

6 
ıSh­e
 *
	msh­e
;

7 } 
	t_physicObjeù
;

9 
ıS·û
 *
¥aû
;

10 
shDampšg
;

11 
cŞlisiÚSlİ
;

12 
w®lFriùiÚ
;

13 
w®lRadius
;

14 
¶ay”Mass
;

15 
¶ay”Radius
;

16 
¶ay”FriùiÚ
;

17 
¶ay”EÏ¡ic
;

18 
buÎ‘Mass
;

28 
boŞ
 
sys_£tupPhysicsEngše
();

31 
sys_ä“PhysicsEngše
();

34 
sys_de¡royPhysicObjeùs
();

37 
sys_£tupPÏy”Physics
();

40 
sys_de¡royPÏy”Physics
();

43 
sys_£tPÏy”PhysicsPos™iÚ
(
ıVeù
 
ÃwPos™iÚ
);

46 
sys_ü—‹SŞidW®ls
();

49 
sys_»moveDroidCPInfo
(
whichDroid
);

52 
sys_ü—‹DoÜS’sÜ
(
whichDoÜ
, 
ıFlßt
 
width
, cpFlßˆ
height
, 
ıVeù
 
ûÁ”
);

55 
sys_debugLšeSegm’ts
();

60 
gam_upd©eSüŞlšgV¬s
(
boŞ
 
g‘PÏy”Pos
);

63 
sys_debugBoundšgBoxes
();

66 
sys_¡İPÏy”Movem’t
();

69 
boŞ
 
sys_isOv”SŞidTe
(
ıVeù
 
checkPošt
, 
objeùTy³
);

72 
boŞ
 
sys_checkDroidTeCŞlisiÚ
(
whichLev–
, 
whichDroid
, 
whichDœeùiÚ
);

	@../hdr/system/sys_physicsCollisions.h

1 #´agm¨
Úû


3 
	#PHYSIC_TYPE_WALL
 0x01

	)

4 
	#PHYSIC_TYPE_ENEMY
 0x02

	)

5 
	#PHYSIC_TYPE_PLAYER
 0x04

	)

6 
	#PHYSIC_TYPE_BULLET
 0x08

	)

7 
	#PHYSIC_TYPE_DOOR
 0x16

	)

8 
	#PHYSIC_TYPE_PARTICLE
 0x32

	)

11 
sys_£tupCŞlisiÚHªdËrs
();

	@../hdr/system/sys_pixelCollide.h

18 
	~<®Ëgro5/®Ëgro.h
>

20 
	smask


22 
	mw
,
	mh
;

23 *
	mb™s
;

24 } 
	tmask_t
;

27 
mask_t
 *
Mask_New
(
ALLEGRO_BITMAP
 *
bmp
);

29 
mask_t
 *
Mask_C»©e
(
w
, 
h
);

32 
Mask_CË¬
(
mask_t
 *
m
);

34 
Mask_Fl
(
mask_t
 *
m
);

36 
Mask_D–‘e
(
mask_t
 *
m
);

38 
Mask_S‘B™
(
mask_t
 *
m
, 
x
, 
y
);

40 
Mask_Un£tB™
(
mask_t
 *
m
, 
x
, 
y
);

47 
Mask_CŞlide
(cÚ¡ 
mask_t
 *
a
, cÚ¡ mask_ˆ*
b
, 
xoff£t
, 
yoff£t
);

50 
Mask_D¿w
(
mask_t
 *
m
, 
x
, 
y
);

53 
CŞÜ_Equiv
(
ALLEGRO_COLOR
 
cŞ1
, ALLEGRO_COLOR 
cŞ2
);

54 
T¿n¥¬’t
(
ALLEGRO_COLOR
 
cŞ1
);

	@../hdr/system/sys_script.h

1 #´agm¨
Úû


5 
¡ršg
 
	msütFunùiÚName
;

6 *
	mho¡FunùiÚPŒ
;

7 } 
	t_ho¡SütFunùiÚs
;

9 
_ho¡SütFunùiÚs
 
ho¡V¬ŸbËs
[];

11 
numSütFunùiÚs
;

12 
boŞ
 
sütEngšeS¹ed
;

13 
numCÚsŞeCommªds
;

16 
boŞ
 
sys_š™SütEngše
();

19 
sys_ş—nupSütEngše
(
boŞ
 
»¡¬t
);

22 
boŞ
 
sys_execu‹SütFunùiÚ
 (
¡ršg
 
funùiÚName
, sŒšg 
funcP¬am
);

25 
boŞ
 
sys_addSütCÚsŞeFunùiÚ
 (
¡ršg
 
funcName
, sŒšg 
funcPŒ
, boŞ 
£tP¬am
);

28 
boŞ
 
sys_»¡¬tSütEngše
();

32 
sys_´štV¬ŸbËs
();

36 
boŞ
 
sys_cÚLi¡V¬ŸbËs
();

40 
boŞ
 
sys_cÚG‘V¬ŸbË
(
¡ršg
 
·¿m1
);

44 
boŞ
 
sys_cÚS‘V¬ŸbË
(
¡ršg
 
·¿m1
, sŒšg 
·¿m2
);

	@../hdr/system/sys_shutdown.h

1 #´agm¨
Úû


4 
boŞ
 
sys_shutDown
();

7 
sys_”rÜF©®
(cÚ¡ *
sourûfe
, 
sourûlše
, cÚ¡ *
‹xt
, ...);

	@../hdr/system/sys_sound.h

1 #´agm¨
Úû


3 
numSoundDeviûs
;

4 
boŞ
 
soundAvaabË
;

5 
boŞ
 
as_u£Sound
;

6 
as_numSam¶es
;

7 
as_numMuÉiSam¶es
;

8 
boŞ
 
·u£Sound
;

9 
vŞumeLev–
;

12 
	s_sounds


14 
ALLEGRO_SAMPLE
 *
	m§m¶e
;

15 cÚ¡ *
	mfeName
;

16 
boŞ
 
	mlßdedOk
;

17 
ALLEGRO_SAMPLE_INSTANCE
 *
	mš¡ªû
;

20 
_sounds
 
sound
[];

26 
	s_muÉiSounds


28 
ALLEGRO_SAMPLE_INSTANCE
 *
	mš¡ªû
;

31 
_muÉiSounds
 *
muÉiSounds
;

34 
boŞ
 
sys_¡¬tSound
();

37 
sys_»Ëa£Sound
();

40 
sys_lßdSoundSam¶es
();

43 
boŞ
 
sys_¶aySound
(
whichSound
, 
·n
, 
ALLEGRO_PLAYMODE
 
loİ
);

46 
sys_¡İSound
(
whichSound
);

49 
boŞ
 
sys_isSoundPÏyšg
(
whichSound
);

52 
sys_¡İAÎSounds
();

55 
sys_·u£SoundSy¡em
(
boŞ
 
ÃwS‹
);

58 
sys_¶aySoundFromSüt
(
whichSound
, 
·n
, 
boŞ
 
loİIt
);

	@../hdr/system/sys_startup.h

1 #´agm¨
Úû


3 
curvePošts
[];

4 
bez›rPošts
[];

7 
boŞ
 
sys_¡¬tOnû
();

	@../hdr/system/sys_timing.h

1 #´agm¨
Úû


3 
TICKS_PER_SECOND
;

4 
SKIP_TICKS
;

5 
MAX_FRAMESKIP
;

7 
thškIÁ”v®
;

10 
sys_C®cuÏ‹ThškF¿meR©e
(
timeV®ue
);

13 
sys_C®cuÏ‹F¿meR©e
(
timeV®ue
);

	@../hdr/system/sys_utils.h

1 #´agm¨
Úû


3 
ıVeù
 
v›wabËSü“nCoÜd
;

4 
¡¬tStusX
;

5 
¡¬tScÜeX
;

8 
sys_chªgeMode
(
ÃwMode
, 
boŞ
 
u£Fade
);

11 
ıVeù
 
sys_wÜldToSü“n
(ıVeù 
wÜldPos
, 
sh­eSize
);

14 
boŞ
 
sys_visibËOnSü“n
(
ıVeù
 
wÜldCoÜd
, 
sh­eSize
);

17 
sys_ÿlcHudTextPos™iÚ
(
hudWidth
, 
hudHeight
);

20 
size_t
 
¡¾ıy
(*
d¡
, cÚ¡ *
¤c
, size_ˆ
size
);

22 
size_t
 
¡¾ÿt
(*
d¡
, cÚ¡ *
¤c
, size_ˆ
size
);

	@../main.cpp

1 
	~"hdr/sys_glob®s.h
"

3 
ALLEGRO_DISPLAY
 *
	gdi¥Ïy
 = 
NULL
;

4 
ALLEGRO_FONT
 *
	gbutInFÚt
 = 
NULL
;

6 
ALLEGRO_KEYBOARD_STATE
 *
	gkeybßrdS‹
 = 
NULL
;

7 
ALLEGRO_EVENT_QUEUE
 *
	gev’tQueue
 = 
NULL
;

8 
ALLEGRO_EVENT
 
	gev’t
;

9 
ALLEGRO_BITMAP
 *
	gb™m­FBO
;

11 
	g´og»ssB¬LßdTimes
;

12 
boŞ
 
	ggameIsRuÂšg
 = 
Œue
;

13 
boŞ
 
	gu£HŞdB™m­
 = 
Œue
;

14 
boŞ
 
	gu£BackšgB™m­
 = 
Œue
;

16 
boŞ
 
	gu£CŞlisiÚD‘eùiÚ
 = 
çl£
;

18 
	gÃxt_game_tick
;

19 
	gloİs
;

20 
	gš‹½Ş©iÚ
;

22 
	gwšWidth
;

23 
	gwšHeight
;

24 
	gfuÎSü“nV®ue
;

26 
	gteCŞlisiÚ
 = 
çl£
;

31 
	$maš
 (
¬gc
, **
¬gv
)

34 
sšgËTimeV®ue
;

36 ià(
çl£
 =ğ
	`sys_¡¬tOnû
() )

38 
	`ex™
 (-1);

41 
»nd”Tick1
 = 0.0f;

42 
thškTick1
 = 0.0f;

44 
Ãxt_game_tick
 = 
	`®_g‘_time
();

46  
Œue
 =ğ
gameIsRuÂšg
 )

48 
loİs
 = 0;

49 
sšgËTimeV®ue
 = 
	`®_g‘_time
();

51 
sšgËTimeV®ue
 > 
Ãxt_game_tick
 && 
loİs
 < 
MAX_FRAMESKIP
)

53 
	`sys_upd©eF¿me
();

54 
Ãxt_game_tick
 +ğ
SKIP_TICKS
;

55 
loİs
++;

56 
	`sys_C®cuÏ‹ThškF¿meR©e
 (
sšgËTimeV®ue
);

59 
	`io_»adKeybßrd
();

61 
š‹½Ş©iÚ
 = (
sšgËTimeV®ue
 + 
SKIP_TICKS
 - 
Ãxt_game_tick
) / (SKIP_TICKS);

63 
	`sys_di¥ÏyF¿me
 ( 
š‹½Ş©iÚ
 );

65 
	`sys_C®cuÏ‹F¿meR©e
 (
sšgËTimeV®ue
);

68 
	`sys_shutDown
();

71 
	}
}

	@../src/chipmunk/chipmunk.c

22 
	~<¡dio.h
>

23 
	~<¡ršg.h
>

24 
	~<¡d¬g.h
>

25 #ià
defšed
(
ANDROID
)

26 
	~<ªdroid/log.h
>

29 
	~"chmunk/chmunk_´iv©e.h
"

32 
	$ıMes§ge
(cÚ¡ *
cÚd™iÚ
, cÚ¡ *
fe
, 
lše
, 
isE¼Ü
, 
isH¬dE¼Ü
, cÚ¡ *
mes§ge
, ...)

34 
	`årštf
(
¡d”r
, (
isE¼Ü
 ? "Aborting dueo Chipmunkƒrror: " : "Chipmunk warning: "));

36 
va_li¡
 
v¬gs
;

37 
	`va_¡¬t
(
v¬gs
, 
mes§ge
); {

38 #ià
	`defšed
(
ANDROID
)

39 
	`__ªdroid_log_´št
Ğ
ANDROID_LOG_INFO
, "Chmunk", "%s(%d)", 
fe
, 
lše
 );

40 
	`__ªdroid_log_´št
Ğ
ANDROID_LOG_INFO
, "Chmunk", 
mes§ge
, 
v¬gs
 );

42 
	`vårštf
(
¡d”r
, 
mes§ge
, 
v¬gs
);

43 
	`årštf
(
¡d”r
, "\n");

45 } 
	`va_’d
(
v¬gs
);

47 #ià
	`defšed
(
ANDROID
)

48 
	`__ªdroid_log_´št
(
ANDROID_LOG_INFO
, "Chmunk", "\tFaed cÚd™iÚ: %s\n", 
cÚd™iÚ
);

49 
	`__ªdroid_log_´št
(
ANDROID_LOG_INFO
, "Chmunk", "\tSourû:%s:%d\n", 
fe
, 
lše
);

51 
	`årštf
(
¡d”r
, "\tFaed cÚd™iÚ: %s\n", 
cÚd™iÚ
);

52 
	`årštf
(
¡d”r
, "\tSourû:%s:%d\n", 
fe
, 
lše
);

54 
	}
}

56 
	#STR
(
s
è#s

	)

57 
	#XSTR
(
s
è
	`STR
(s)

	)

59 cÚ¡ *
	gıV”siÚSŒšg
 = 
XSTR
(
CP_VERSION_MAJOR
)"."XSTR(
CP_VERSION_MINOR
)"."XSTR(
CP_VERSION_RELEASE
);

63 
ıFlßt


64 
	$ıMom’tFÜCœşe
(
ıFlßt
 
m
, cpFlßˆ
r1
, cpFlßˆ
r2
, 
ıVeù
 
off£t
)

66  
m
*(0.5f*(
r1
*r1 + 
r2
*r2è+ 
	`ıvËngthsq
(
off£t
));

67 
	}
}

69 
ıFlßt


70 
	$ıA»aFÜCœşe
(
ıFlßt
 
r1
, cpFlßˆ
r2
)

72  (
ıFlßt
)
CP_PI
*
	`ıçbs
(
r1
*r1 - 
r2
*r2);

73 
	}
}

75 
ıFlßt


76 
	$ıMom’tFÜSegm’t
(
ıFlßt
 
m
, 
ıVeù
 
a
, cpVeù 
b
, cpFlßˆ
r
)

78 
ıVeù
 
off£t
 = 
	`ıvË½
(
a
, 
b
, 0.5f);

81 
ıFlßt
 
Ëngth
 = 
	`ıvdi¡
(
b
, 
a
è+ 2.0f*
r
;

82  
m
*((
Ëngth
*Ëngth + 4.0f*
r
*r)/12.0à+ 
	`ıvËngthsq
(
off£t
));

83 
	}
}

85 
ıFlßt


86 
	$ıA»aFÜSegm’t
(
ıVeù
 
a
, cpVeù 
b
, 
ıFlßt
 
r
)

88  
r
*((
ıFlßt
)
CP_PI
*¸+ 2.0f*
	`ıvdi¡
(
a
, 
b
));

89 
	}
}

91 
ıFlßt


92 
	$ıMom’tFÜPŞy
(
ıFlßt
 
m
, cÚ¡ 
couÁ
, cÚ¡ 
ıVeù
 *
v”ts
, cpVeù 
off£t
, cpFlßˆ
r
)

95 if(
couÁ
 =ğ2è 
	`ıMom’tFÜSegm’t
(
m
, 
v”ts
[0], verts[1], 0.0f);

97 
ıFlßt
 
sum1
 = 0.0f;

98 
ıFlßt
 
sum2
 = 0.0f;

99 
i
=0; i<
couÁ
; i++){

100 
ıVeù
 
v1
 = 
	`ıvadd
(
v”ts
[
i
], 
off£t
);

101 
ıVeù
 
v2
 = 
	`ıvadd
(
v”ts
[(
i
+1)%
couÁ
], 
off£t
);

103 
ıFlßt
 
a
 = 
	`ıvüoss
(
v2
, 
v1
);

104 
ıFlßt
 
b
 = 
	`ıvdÙ
(
v1
, v1è+ cpvdÙ(v1, 
v2
) + cpvdot(v2, v2);

106 
sum1
 +ğ
a
*
b
;

107 
sum2
 +ğ
a
;

110  (
m
*
sum1
)/(6.0f*
sum2
);

111 
	}
}

113 
ıFlßt


114 
	$ıA»aFÜPŞy
(cÚ¡ 
couÁ
, cÚ¡ 
ıVeù
 *
v”ts
, 
ıFlßt
 
r
)

116 
ıFlßt
 
¬—
 = 0.0f;

117 
ıFlßt
 
³rim‘”
 = 0.0f;

118 
i
=0; i<
couÁ
; i++){

119 
ıVeù
 
v1
 = 
v”ts
[
i
];

120 
ıVeù
 
v2
 = 
v”ts
[(
i
+1)%
couÁ
];

122 
¬—
 +ğ
	`ıvüoss
(
v1
, 
v2
);

123 
³rim‘”
 +ğ
	`ıvdi¡
(
v1
, 
v2
);

126  
r
*(
CP_PI
*
	`ıçbs
Ôè+ 
³rim‘”
è+ 
¬—
/2.0f;

127 
	}
}

129 
ıVeù


130 
	$ıC’ŒoidFÜPŞy
(cÚ¡ 
couÁ
, cÚ¡ 
ıVeù
 *
v”ts
)

132 
ıFlßt
 
sum
 = 0.0f;

133 
ıVeù
 
vsum
 = 
ıvz”o
;

135 
i
=0; i<
couÁ
; i++){

136 
ıVeù
 
v1
 = 
v”ts
[
i
];

137 
ıVeù
 
v2
 = 
v”ts
[(
i
+1)%
couÁ
];

138 
ıFlßt
 
üoss
 = 
	`ıvüoss
(
v1
, 
v2
);

140 
sum
 +ğ
üoss
;

141 
vsum
 = 
	`ıvadd
(vsum, 
	`ıvmuÉ
(ıvadd(
v1
, 
v2
), 
üoss
));

144  
	`ıvmuÉ
(
vsum
, 1.0f/(3.0f*
sum
));

145 
	}
}

156 
ıFlßt


157 
	$ıMom’tFÜBox
(
ıFlßt
 
m
, cpFlßˆ
width
, cpFlßˆ
height
)

159  
m
*(
width
*width + 
height
*height)/12.0f;

160 
	}
}

162 
ıFlßt


163 
	$ıMom’tFÜBox2
(
ıFlßt
 
m
, 
ıBB
 
box
)

165 
ıFlßt
 
width
 = 
box
.
r
 - box.
l
;

166 
ıFlßt
 
height
 = 
box
.
t
 - box.
b
;

167 
ıVeù
 
off£t
 = 
	`ıvmuÉ
(
	`ıv
(
box
.
l
 + box.
r
, box.
b
 + box.
t
), 0.5f);

170  
	`ıMom’tFÜBox
(
m
, 
width
, 
height
è+ m*
	`ıvËngthsq
(
off£t
);

171 
	}
}

176 
	$ıLoİIndexes
(cÚ¡ 
ıVeù
 *
v”ts
, 
couÁ
, *
¡¬t
, *
’d
)

178 (*
¡¬t
èğ(*
’d
) = 0;

179 
ıVeù
 
mš
 = 
v”ts
[0];

180 
ıVeù
 
max
 = 
mš
;

182 
i
=1; i<
couÁ
; i++){

183 
ıVeù
 
v
 = 
v”ts
[
i
];

185 if(
v
.
x
 < 
mš
.x || (v.x =ğmš.x && v.
y
 < min.y)){

186 
mš
 = 
v
;

187 (*
¡¬t
èğ
i
;

188 } if(
v
.
x
 > 
max
.x || (v.x =ğmax.x && v.
y
 > max.y)){

189 
max
 = 
v
;

190 (*
’d
èğ
i
;

193 
	}
}

195 
	#SWAP
(
__A__
, 
__B__
è{
ıVeù
 
__TMP__
 = __A__; __A__ = __B__; __B__ = __TMP__;}

	)

198 
	$QHuÎP¬t™iÚ
(
ıVeù
 *
v”ts
, 
couÁ
, cpVeù 
a
, cpVeù 
b
, 
ıFlßt
 
tŞ
)

200 if(
couÁ
 == 0)  0;

202 
ıFlßt
 
max
 = 0;

203 
pivÙ
 = 0;

205 
ıVeù
 
d–
 = 
	`ıvsub
(
b
, 
a
);

206 
ıFlßt
 
v®ueTŞ
 = 
tŞ
*
	`ıvËngth
(
d–
);

208 
h—d
 = 0;

209 

 = 
couÁ
-1; 
h—d
 <=ail;){

210 
ıFlßt
 
v®ue
 = 
	`ıvüoss
(
	`ıvsub
(
v”ts
[
h—d
], 
a
), 
d–
);

211 if(
v®ue
 > 
v®ueTŞ
){

212 if(
v®ue
 > 
max
){

213 
max
 = 
v®ue
;

214 
pivÙ
 = 
h—d
;

217 
h—d
++;

219 
	`SWAP
(
v”ts
[
h—d
], v”ts[

]);

220 

--;

225 if(
pivÙ
 !ğ0è
	`SWAP
(
v”ts
[0], verts[pivot]);

226  
h—d
;

227 
	}
}

230 
	$QHuÎReduû
(
ıFlßt
 
tŞ
, 
ıVeù
 *
v”ts
, 
couÁ
, cpVeù 
a
, cpVeù 
pivÙ
, cpVeù 
b
, cpVeù *
»suÉ
)

232 if(
couÁ
 < 0){

234 } if(
couÁ
 == 0) {

235 
»suÉ
[0] = 
pivÙ
;

238 
Ëá_couÁ
 = 
	`QHuÎP¬t™iÚ
(
v”ts
, 
couÁ
, 
a
, 
pivÙ
, 
tŞ
);

239 
šdex
 = 
	`QHuÎReduû
(
tŞ
, 
v”ts
 + 1, 
Ëá_couÁ
 - 1, 
a
, v”ts[0], 
pivÙ
, 
»suÉ
);

241 
»suÉ
[
šdex
++] = 
pivÙ
;

243 
right_couÁ
 = 
	`QHuÎP¬t™iÚ
(
v”ts
 + 
Ëá_couÁ
, 
couÁ
 -†eá_couÁ, 
pivÙ
, 
b
, 
tŞ
);

244  
šdex
 + 
	`QHuÎReduû
(
tŞ
, 
v”ts
 + 
Ëá_couÁ
 + 1, 
right_couÁ
 - 1, 
pivÙ
, v”ts[Ëá_couÁ], 
b
, 
»suÉ
 + index);

246 
	}
}

251 
	$ıCÚvexHuÎ
(
couÁ
, cÚ¡ 
ıVeù
 *
v”ts
, cpVeù *
»suÉ
, *
fœ¡
, 
ıFlßt
 
tŞ
)

253 if(
v”ts
 !ğ
»suÉ
){

255 
	`memıy
(
»suÉ
, 
v”ts
, 
couÁ
*(
ıVeù
));

259 
¡¬t
, 
’d
;

260 
	`ıLoİIndexes
(
v”ts
, 
couÁ
, &
¡¬t
, &
’d
);

261 if(
¡¬t
 =ğ
’d
){

262 if(
fœ¡
) (*first) = 0;

266 
	`SWAP
(
»suÉ
[0],„esuÉ[
¡¬t
]);

267 
	`SWAP
(
»suÉ
[1],„esuÉ[
’d
 =ğ0 ? 
¡¬t
 :ƒnd]);

269 
ıVeù
 
a
 = 
»suÉ
[0];

270 
ıVeù
 
b
 = 
»suÉ
[1];

272 if(
fœ¡
è(*fœ¡èğ
¡¬t
;

273  
	`QHuÎReduû
(
tŞ
, 
»suÉ
 + 2, 
couÁ
 - 2, 
a
, 
b
,‡,„esult + 1) + 1;

274 
	}
}

278 #ià
defšed
(
__has_ex‹nsiÚ
)

279 #ià
__has_ex‹nsiÚ
(
blocks
)

281 
I‹¿tÜFunc
(*
±r
, (^
block
)(*ptr)){block(ptr);}

283 
ıS·ûEachBody_b
(
ıS·û
 *
¥aû
, (^
block
)(
ıBody
 *
body
)){

284 
ıS·ûEachBody
(
¥aû
, (
ıS·ûBodyI‹¿tÜFunc
)
I‹¿tÜFunc
, 
block
);

287 
ıS·ûEachSh­e_b
(
ıS·û
 *
¥aû
, (^
block
)(
ıSh­e
 *
sh­e
)){

288 
ıS·ûEachSh­e
(
¥aû
, (
ıS·ûSh­eI‹¿tÜFunc
)
I‹¿tÜFunc
, 
block
);

291 
ıS·ûEachCÚ¡¿št_b
(
ıS·û
 *
¥aû
, (^
block
)(
ıCÚ¡¿št
 *
cÚ¡¿št
)){

292 
ıS·ûEachCÚ¡¿št
(
¥aû
, (
ıS·ûCÚ¡¿štI‹¿tÜFunc
)
I‹¿tÜFunc
, 
block
);

295 
BodyI‹¿tÜFunc
(
ıBody
 *
body
, *
±r
, (^
block
)(*ptr)){block(ptr);}

297 
ıBodyEachSh­e_b
(
ıBody
 *
body
, (^
block
)(
ıSh­e
 *
sh­e
)){

298 
ıBodyEachSh­e
(
body
, (
ıBodySh­eI‹¿tÜFunc
)
BodyI‹¿tÜFunc
, 
block
);

301 
ıBodyEachCÚ¡¿št_b
(
ıBody
 *
body
, (^
block
)(
ıCÚ¡¿št
 *
cÚ¡¿št
)){

302 
ıBodyEachCÚ¡¿št
(
body
, (
ıBodyCÚ¡¿štI‹¿tÜFunc
)
BodyI‹¿tÜFunc
, 
block
);

305 
ıBodyEachArb™”_b
(
ıBody
 *
body
, (^
block
)(
ıArb™”
 *
¬b™”
)){

306 
ıBodyEachArb™”
(
body
, (
ıBodyArb™”I‹¿tÜFunc
)
BodyI‹¿tÜFunc
, 
block
);

309 
	$PoštQu”yI‹¿tÜFunc
(
ıSh­e
 *
sh­e
, 
ıVeù
 
p
, 
ıFlßt
 
d
, cpVeù 
g
, 
ıS·ûPoštQu”yBlock
 
block
){
	`block
(sh­e,…, d, g);
	}
}

310 
	$ıS·ûPoštQu”y_b
(
ıS·û
 *
¥aû
, 
ıVeù
 
pošt
, 
ıFlßt
 
maxDi¡ªû
, 
ıSh­eF‹r
 
f‹r
, 
ıS·ûPoštQu”yBlock
 
block
){

311 
	`ıS·ûPoštQu”y
(
¥aû
, 
pošt
, 
maxDi¡ªû
, 
f‹r
, (
ıS·ûPoštQu”yFunc
)
PoštQu”yI‹¿tÜFunc
, 
block
);

312 
	}
}

314 
	$Segm’tQu”yI‹¿tÜFunc
(
ıSh­e
 *
sh­e
, 
ıVeù
 
p
, cpVeù 
n
, 
ıFlßt
 
t
, 
ıS·ûSegm’tQu”yBlock
 
block
){
	`block
(sh­e,…,‚,);
	}
}

315 
	$ıS·ûSegm’tQu”y_b
(
ıS·û
 *
¥aû
, 
ıVeù
 
¡¬t
, cpVeù 
’d
, 
ıFlßt
 
¿dius
, 
ıSh­eF‹r
 
f‹r
, 
ıS·ûSegm’tQu”yBlock
 
block
){

316 
	`ıS·ûSegm’tQu”y
(
¥aû
, 
¡¬t
, 
’d
, 
¿dius
, 
f‹r
, (
ıS·ûSegm’tQu”yFunc
)
Segm’tQu”yI‹¿tÜFunc
, 
block
);

317 
	}
}

319 
	$ıS·ûBBQu”y_b
(
ıS·û
 *
¥aû
, 
ıBB
 
bb
, 
ıSh­eF‹r
 
f‹r
, 
ıS·ûBBQu”yBlock
 
block
){

320 
	`ıS·ûBBQu”y
(
¥aû
, 
bb
, 
f‹r
, (
ıS·ûBBQu”yFunc
)
I‹¿tÜFunc
, 
block
);

321 
	}
}

323 
	$Sh­eQu”yI‹¿tÜFunc
(
ıSh­e
 *
sh­e
, 
ıCÚùPoštS‘
 *
pošts
, 
ıS·ûSh­eQu”yBlock
 
block
){
	`block
(sh­e,…ošts);
	}
}

324 
ıBoŞ
 
	$ıS·ûSh­eQu”y_b
(
ıS·û
 *
¥aû
, 
ıSh­e
 *
sh­e
, 
ıS·ûSh­eQu”yBlock
 
block
){

325  
	`ıS·ûSh­eQu”y
(
¥aû
, 
sh­e
, (
ıS·ûSh­eQu”yFunc
)
Sh­eQu”yI‹¿tÜFunc
, 
block
);

326 
	}
}

331 
	~"chmunk/chmunk_ffi.h
"

	@../src/chipmunk/cpArbiter.c

22 
	~"chmunk/chmunk_´iv©e.h
"

25 
šlše
 

26 
	$uÁh»adH–³r
(
ıArb™”
 *
¬b
, 
ıBody
 *
body
)

28 
ıArb™”Th»ad
 *
th»ad
 = 
	`ıArb™”Th»adFÜBody
(
¬b
, 
body
);

29 
ıArb™”
 *
´ev
 = 
th»ad
->prev;

30 
ıArb™”
 *
Ãxt
 = 
th»ad
->next;

32 if(
´ev
){

33 
	`ıArb™”Th»adFÜBody
(
´ev
, 
body
)->
Ãxt
 =‚ext;

34 } if(
body
->
¬b™”Li¡
 =ğ
¬b
) {

38 
body
->
¬b™”Li¡
 = 
Ãxt
;

41 if(
Ãxt
è
	`ıArb™”Th»adFÜBody
Òext, 
body
)->
´ev
 =…rev;

43 
th»ad
->
´ev
 = 
NULL
;

44 
th»ad
->
Ãxt
 = 
NULL
;

45 
	}
}

48 
	$ıArb™”UÁh»ad
(
ıArb™”
 *
¬b
)

50 
	`uÁh»adH–³r
(
¬b
,‡rb->
body_a
);

51 
	`uÁh»adH–³r
(
¬b
,‡rb->
body_b
);

52 
	}
}

54 
ıBoŞ
 
	$ıArb™”IsFœ¡CÚù
(cÚ¡ 
ıArb™”
 *
¬b
)

56  
¬b
->
¡©e
 =ğ
CP_ARBITER_STATE_FIRST_COLLISION
;

57 
	}
}

59 
ıBoŞ
 
	$ıArb™”IsRemov®
(cÚ¡ 
ıArb™”
 *
¬b
)

61  
¬b
->
¡©e
 =ğ
CP_ARBITER_STATE_INVALIDATED
;

62 
	}
}

64 
	$ıArb™”G‘CouÁ
(cÚ¡ 
ıArb™”
 *
¬b
)

67  (
¬b
->
¡©e
 < 
CP_ARBITER_STATE_CACHED
 ?‡rb->
couÁ
 : 0);

68 
	}
}

70 
ıVeù


71 
	$ıArb™”G‘NÜm®
(cÚ¡ 
ıArb™”
 *
¬b
)

73  
	`ıvmuÉ
(
¬b
->
n
,‡rb->
sw­³d
 ? -1.0f : 1.0);

74 
	}
}

76 
ıVeù


77 
	$ıArb™”G‘PoštA
(cÚ¡ 
ıArb™”
 *
¬b
, 
i
)

79 
	`ıAs£¹H¬d
(0 <ğ
i
 && i < 
	`ıArb™”G‘CouÁ
(
¬b
), "Indexƒrror: The specified contact index is invalid forhis‡rbiter");

80  
	`ıvadd
(
¬b
->
body_a
->
p
,‡rb->
cÚùs
[
i
].
r1
);

81 
	}
}

83 
ıVeù


84 
	$ıArb™”G‘PoštB
(cÚ¡ 
ıArb™”
 *
¬b
, 
i
)

86 
	`ıAs£¹H¬d
(0 <ğ
i
 && i < 
	`ıArb™”G‘CouÁ
(
¬b
), "Indexƒrror: The specified contact index is invalid forhis‡rbiter");

87  
	`ıvadd
(
¬b
->
body_b
->
p
,‡rb->
cÚùs
[
i
].
r2
);

88 
	}
}

90 
ıFlßt


91 
	$ıArb™”G‘D•th
(cÚ¡ 
ıArb™”
 *
¬b
, 
i
)

93 
	`ıAs£¹H¬d
(0 <ğ
i
 && i < 
	`ıArb™”G‘CouÁ
(
¬b
), "Indexƒrror: The specified contact index is invalid forhis‡rbiter");

95 
ıCÚù
 *
cÚ
 = &
¬b
->
cÚùs
[
i
];

96  
	`ıvdÙ
(
	`ıvadd
(
	`ıvsub
(
cÚ
->
r2
, cÚ->
r1
), cpvsub(
¬b
->
body_b
->
p
,‡rb->
body_a
->p)),‡rb->
n
);

97 
	}
}

99 
ıCÚùPoštS‘


100 
	$ıArb™”G‘CÚùPoštS‘
(cÚ¡ 
ıArb™”
 *
¬b
)

102 
ıCÚùPoštS‘
 
£t
;

103 
£t
.
couÁ
 = 
	`ıArb™”G‘CouÁ
(
¬b
);

105 
ıBoŞ
 
sw­³d
 = 
¬b
->swapped;

106 
ıVeù
 
n
 = 
¬b
->n;

107 
£t
.
nÜm®
 = (
sw­³d
 ? 
	`ıvÃg
(
n
) :‚);

109 
i
=0; i<
£t
.
couÁ
; i++){

111 
ıVeù
 
p1
 = 
	`ıvadd
(
¬b
->
body_a
->
p
,‡rb->
cÚùs
[
i
].
r1
);

112 
ıVeù
 
p2
 = 
	`ıvadd
(
¬b
->
body_b
->
p
,‡rb->
cÚùs
[
i
].
r2
);

114 
£t
.
pošts
[
i
].
poštA
 = (
sw­³d
 ? 
p2
 : 
p1
);

115 
£t
.
pošts
[
i
].
poštB
 = (
sw­³d
 ? 
p1
 : 
p2
);

116 
£t
.
pošts
[
i
].
di¡ªû
 = 
	`ıvdÙ
(
	`ıvsub
(
p2
, 
p1
), 
n
);

119  
£t
;

120 
	}
}

123 
	$ıArb™”S‘CÚùPoštS‘
(
ıArb™”
 *
¬b
, 
ıCÚùPoštS‘
 *
£t
)

125 
couÁ
 = 
£t
->count;

126 
	`ıAs£¹H¬d
(
couÁ
 =ğ
¬b
->count, "The‚umber of contact…oints cannot be changed.");

128 
ıBoŞ
 
sw­³d
 = 
¬b
->swapped;

129 
¬b
->
n
 = (
sw­³d
 ? 
	`ıvÃg
(
£t
->
nÜm®
) : set->normal);

131 
i
=0; i<
couÁ
; i++){

133 
ıVeù
 
p1
 = 
£t
->
pošts
[
i
].
poštA
;

134 
ıVeù
 
p2
 = 
£t
->
pošts
[
i
].
poštB
;

136 
¬b
->
cÚùs
[
i
].
r1
 = 
	`ıvsub
(
sw­³d
 ? 
p2
 : 
p1
,‡rb->
body_a
->
p
);

137 
¬b
->
cÚùs
[
i
].
r2
 = 
	`ıvsub
(
sw­³d
 ? 
p1
 : 
p2
,‡rb->
body_b
->
p
);

139 
	}
}

141 
ıVeù


142 
	$ıArb™”TÙ®Impul£
(cÚ¡ 
ıArb™”
 *
¬b
)

144 
ıCÚù
 *
cÚùs
 = 
¬b
->contacts;

145 
ıVeù
 
n
 = 
¬b
->n;

146 
ıVeù
 
sum
 = 
ıvz”o
;

148 
i
=0, 
couÁ
=
	`ıArb™”G‘CouÁ
(
¬b
); i<count; i++){

149 
ıCÚù
 *
cÚ
 = &
cÚùs
[
i
];

150 
sum
 = 
	`ıvadd
(sum, 
	`ıvrÙ©e
(
n
, 
	`ıv
(
cÚ
->
jnAcc
, cÚ->
jtAcc
)));

153  (
¬b
->
sw­³d
 ? 
sum
 : 
	`ıvÃg
(sum));

154  
ıvz”o
;

155 
	}
}

157 
ıFlßt


158 
	$ıArb™”TÙ®KE
(cÚ¡ 
ıArb™”
 *
¬b
)

160 
ıFlßt
 
eCÛf
 = (1 - 
¬b
->
e
)/(1 +‡rb->e);

161 
ıFlßt
 
sum
 = 0.0;

163 
ıCÚù
 *
cÚùs
 = 
¬b
->contacts;

164 
i
=0, 
couÁ
=
	`ıArb™”G‘CouÁ
(
¬b
); i<count; i++){

165 
ıCÚù
 *
cÚ
 = &
cÚùs
[
i
];

166 
ıFlßt
 
jnAcc
 = 
cÚ
->jnAcc;

167 
ıFlßt
 
jtAcc
 = 
cÚ
->jtAcc;

169 
sum
 +ğ
eCÛf
*
jnAcc
*jnAcc/
cÚ
->
nMass
 + 
jtAcc
*jtAcc/cÚ->
tMass
;

172  
sum
;

173 
	}
}

175 
ıBoŞ


176 
	$ıArb™”IgnÜe
(
ıArb™”
 *
¬b
)

178 
¬b
->
¡©e
 = 
CP_ARBITER_STATE_IGNORE
;

179  
ıF®£
;

180 
	}
}

182 
ıFlßt


183 
	$ıArb™”G‘Re¡™utiÚ
(cÚ¡ 
ıArb™”
 *
¬b
)

185  
¬b
->
e
;

186 
	}
}

189 
	$ıArb™”S‘Re¡™utiÚ
(
ıArb™”
 *
¬b
, 
ıFlßt
 
»¡™utiÚ
)

191 
¬b
->
e
 = 
»¡™utiÚ
;

192 
	}
}

194 
ıFlßt


195 
	$ıArb™”G‘FriùiÚ
(cÚ¡ 
ıArb™”
 *
¬b
)

197  
¬b
->
u
;

198 
	}
}

201 
	$ıArb™”S‘FriùiÚ
(
ıArb™”
 *
¬b
, 
ıFlßt
 
äiùiÚ
)

203 
¬b
->
u
 = 
äiùiÚ
;

204 
	}
}

206 
ıVeù


207 
	$ıArb™”G‘SurçûV–oc™y
(
ıArb™”
 *
¬b
)

209  
	`ıvmuÉ
(
¬b
->
surçû_vr
,‡rb->
sw­³d
 ? -1.0f : 1.0);

210 
	}
}

213 
	$ıArb™”S‘SurçûV–oc™y
(
ıArb™”
 *
¬b
, 
ıVeù
 
vr
)

215 
¬b
->
surçû_vr
 = 
	`ıvmuÉ
(
vr
,‡rb->
sw­³d
 ? -1.0f : 1.0);

216 
	}
}

218 
ıD©aPoš‹r


219 
	$ıArb™”G‘U£rD©a
(cÚ¡ 
ıArb™”
 *
¬b
)

221  
¬b
->
d©a
;

222 
	}
}

225 
	$ıArb™”S‘U£rD©a
(
ıArb™”
 *
¬b
, 
ıD©aPoš‹r
 
u£rD©a
)

227 
¬b
->
d©a
 = 
u£rD©a
;

228 
	}
}

231 
	$ıArb™”G‘Sh­es
(cÚ¡ 
ıArb™”
 *
¬b
, 
ıSh­e
 **
a
, cpSh­**
b
)

233 if(
¬b
->
sw­³d
){

234 (*
a
èğ(
ıSh­e
 *)
¬b
->
b
, (*b) = (cpShape *)arb->a;

236 (*
a
èğ(
ıSh­e
 *)
¬b
->a, (*
b
) = (cpShape *)arb->b;

238 
	}
}

240 
	$ıArb™”G‘Bod›s
(cÚ¡ 
ıArb™”
 *
¬b
, 
ıBody
 **
a
, cpBody **
b
)

242 
	`CP_ARBITER_GET_SHAPES
(
¬b
, 
sh­e_a
, 
sh­e_b
);

243 (*
a
èğ
sh­e_a
->
body
;

244 (*
b
èğ
sh­e_b
->
body
;

245 
	}
}

247 
ıBoŞ


248 
	$ıArb™”C®lWdÿrdBegšA
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
)

250 
ıCŞlisiÚHªdËr
 *
hªdËr
 = 
¬b
->
hªdËrA
;

251  
hªdËr
->
	`begšFunc
(
¬b
, 
¥aû
, hªdËr->
u£rD©a
);

252 
	}
}

254 
ıBoŞ


255 
	$ıArb™”C®lWdÿrdBegšB
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
)

257 
ıCŞlisiÚHªdËr
 *
hªdËr
 = 
¬b
->
hªdËrB
;

258 
¬b
->
sw­³d
 = !arb->swapped;

259 
ıBoŞ
 
»tv®
 = 
hªdËr
->
	`begšFunc
(
¬b
, 
¥aû
, hªdËr->
u£rD©a
);

260 
¬b
->
sw­³d
 = !arb->swapped;

261  
»tv®
;

262 
	}
}

264 
ıBoŞ


265 
	$ıArb™”C®lWdÿrdP»SŞveA
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
)

267 
ıCŞlisiÚHªdËr
 *
hªdËr
 = 
¬b
->
hªdËrA
;

268  
hªdËr
->
	`´eSŞveFunc
(
¬b
, 
¥aû
, hªdËr->
u£rD©a
);

269 
	}
}

271 
ıBoŞ


272 
	$ıArb™”C®lWdÿrdP»SŞveB
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
)

274 
ıCŞlisiÚHªdËr
 *
hªdËr
 = 
¬b
->
hªdËrB
;

275 
¬b
->
sw­³d
 = !arb->swapped;

276 
ıBoŞ
 
»tv®
 = 
hªdËr
->
	`´eSŞveFunc
(
¬b
, 
¥aû
, hªdËr->
u£rD©a
);

277 
¬b
->
sw­³d
 = !arb->swapped;

278  
»tv®
;

279 
	}
}

282 
	$ıArb™”C®lWdÿrdPo¡SŞveA
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
)

284 
ıCŞlisiÚHªdËr
 *
hªdËr
 = 
¬b
->
hªdËrA
;

285 
hªdËr
->
	`po¡SŞveFunc
(
¬b
, 
¥aû
, hªdËr->
u£rD©a
);

286 
	}
}

289 
	$ıArb™”C®lWdÿrdPo¡SŞveB
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
)

291 
ıCŞlisiÚHªdËr
 *
hªdËr
 = 
¬b
->
hªdËrB
;

292 
¬b
->
sw­³d
 = !arb->swapped;

293 
hªdËr
->
	`po¡SŞveFunc
(
¬b
, 
¥aû
, hªdËr->
u£rD©a
);

294 
¬b
->
sw­³d
 = !arb->swapped;

295 
	}
}

298 
	$ıArb™”C®lWdÿrdS•¬©eA
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
)

300 
ıCŞlisiÚHªdËr
 *
hªdËr
 = 
¬b
->
hªdËrA
;

301 
hªdËr
->
	`£·¿‹Func
(
¬b
, 
¥aû
, hªdËr->
u£rD©a
);

302 
	}
}

305 
	$ıArb™”C®lWdÿrdS•¬©eB
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
)

307 
ıCŞlisiÚHªdËr
 *
hªdËr
 = 
¬b
->
hªdËrB
;

308 
¬b
->
sw­³d
 = !arb->swapped;

309 
hªdËr
->
	`£·¿‹Func
(
¬b
, 
¥aû
, hªdËr->
u£rD©a
);

310 
¬b
->
sw­³d
 = !arb->swapped;

311 
	}
}

313 
ıArb™”
*

314 
	$ıArb™”In™
(
ıArb™”
 *
¬b
, 
ıSh­e
 *
a
, cpSh­*
b
)

316 
¬b
->
hªdËr
 = 
NULL
;

317 
¬b
->
sw­³d
 = 
ıF®£
;

319 
¬b
->
hªdËr
 = 
NULL
;

320 
¬b
->
hªdËrA
 = 
NULL
;

321 
¬b
->
hªdËrB
 = 
NULL
;

323 
¬b
->
e
 = 0.0f;

324 
¬b
->
u
 = 0.0f;

325 
¬b
->
surçû_vr
 = 
ıvz”o
;

327 
¬b
->
couÁ
 = 0;

328 
¬b
->
cÚùs
 = 
NULL
;

330 
¬b
->
a
 =‡;‡rb->
body_a
 =‡->
body
;

331 
¬b
->
b
 = b;‡rb->
body_b
 = b->
body
;

333 
¬b
->
th»ad_a
.
Ãxt
 = 
NULL
;

334 
¬b
->
th»ad_b
.
Ãxt
 = 
NULL
;

335 
¬b
->
th»ad_a
.
´ev
 = 
NULL
;

336 
¬b
->
th»ad_b
.
´ev
 = 
NULL
;

338 
¬b
->
¡amp
 = 0;

339 
¬b
->
¡©e
 = 
CP_ARBITER_STATE_FIRST_COLLISION
;

341 
¬b
->
d©a
 = 
NULL
;

343  
¬b
;

344 
	}
}

346 
šlše
 
ıCŞlisiÚHªdËr
 *

347 
	$ıS·ûLookupHªdËr
(
ıS·û
 *
¥aû
, 
ıCŞlisiÚTy³
 
a
, cpCŞlisiÚTy³ 
b
, 
ıCŞlisiÚHªdËr
 *
deçuÉV®ue
)

349 
ıCŞlisiÚTy³
 
ty³s
[] = {
a
, 
b
};

350 
ıCŞlisiÚHªdËr
 *
hªdËr
 = (ıCŞlisiÚHªdË¸*)
	`ıHashS‘Fšd
(
¥aû
->
cŞlisiÚHªdËrs
, 
	`CP_HASH_PAIR
(
a
, 
b
), 
ty³s
);

351  (
hªdËr
 ? hªdË¸: 
deçuÉV®ue
);

352 
	}
}

355 
	$ıArb™”Upd©e
(
ıArb™”
 *
¬b
, 
ıCŞlisiÚInfo
 *
šfo
, 
ıS·û
 *
¥aû
)

357 cÚ¡ 
ıSh­e
 *
a
 = 
šfo
->a, *
b
 = info->b;

360 
¬b
->
a
 =‡;‡rb->
body_a
 =‡->
body
;

361 
¬b
->
b
 = b;‡rb->
body_b
 = b->
body
;

364 
i
=0; i<
šfo
->
couÁ
; i++){

365 
ıCÚù
 *
cÚ
 = &
šfo
->
¬r
[
i
];

369 
cÚ
->
r1
 = 
	`ıvsub
(cÚ->r1, 
a
->
body
->
p
);

370 
cÚ
->
r2
 = 
	`ıvsub
(cÚ->r2, 
b
->
body
->
p
);

373 
cÚ
->
jnAcc
 = cÚ->
jtAcc
 = 0.0f;

375 
j
=0; j<
¬b
->
couÁ
; j++){

376 
ıCÚù
 *
Şd
 = &
¬b
->
cÚùs
[
j
];

379 if(
cÚ
->
hash
 =ğ
Şd
->hash){

381 
cÚ
->
jnAcc
 = 
Şd
->jnAcc;

382 
cÚ
->
jtAcc
 = 
Şd
->jtAcc;

387 
¬b
->
cÚùs
 = 
šfo
->
¬r
;

388 
¬b
->
couÁ
 = 
šfo
->count;

389 
¬b
->
n
 = 
šfo
->n;

391 
¬b
->
e
 = 
a
->* 
b
->e;

392 
¬b
->
u
 = 
a
->u * 
b
->u;

394 
ıVeù
 
surçû_vr
 = 
	`ıvsub
(
b
->
surçûV
, 
a
->surfaceV);

395 
¬b
->
surçû_vr
 = 
	`ıvsub
(surçû_vr, 
	`ıvmuÉ
(
šfo
->
n
, 
	`ıvdÙ
(surface_vr, info->n)));

397 
ıCŞlisiÚTy³
 
ty³A
 = 
šfo
->
a
->
ty³
, 
ty³B
 = info->
b
->type;

398 
ıCŞlisiÚHªdËr
 *
deçuÉHªdËr
 = &
¥aû
->defaultHandler;

399 
ıCŞlisiÚHªdËr
 *
hªdËr
 = 
¬b
->hªdË¸ğ
	`ıS·ûLookupHªdËr
(
¥aû
, 
ty³A
, 
ty³B
, 
deçuÉHªdËr
);

402 
ıBoŞ
 
sw­³d
 = 
¬b
->sw­³d = (
ty³A
 !ğ
hªdËr
->ty³A && hªdËr->ty³A !ğ
CP_WILDCARD_COLLISION_TYPE
);

404 if(
hªdËr
 !ğ
deçuÉHªdËr
 || 
¥aû
->
u£sWdÿrds
){

406 
¬b
->
hªdËrA
 = 
	`ıS·ûLookupHªdËr
(
¥aû
, (
sw­³d
 ? 
ty³B
 : 
ty³A
), 
CP_WILDCARD_COLLISION_TYPE
, &
ıCŞlisiÚHªdËrDoNÙhšg
);

407 
¬b
->
hªdËrB
 = 
	`ıS·ûLookupHªdËr
(
¥aû
, (
sw­³d
 ? 
ty³A
 : 
ty³B
), 
CP_WILDCARD_COLLISION_TYPE
, &
ıCŞlisiÚHªdËrDoNÙhšg
);

411 if(
¬b
->
¡©e
 =ğ
CP_ARBITER_STATE_CACHED
è¬b->¡©ğ
CP_ARBITER_STATE_FIRST_COLLISION
;

412 
	}
}

415 
	$ıArb™”P»S‹p
(
ıArb™”
 *
¬b
, 
ıFlßt
 
dt
, cpFlßˆ
¦İ
, cpFlßˆ
bŸs
)

417 
ıBody
 *
a
 = 
¬b
->
body_a
;

418 
ıBody
 *
b
 = 
¬b
->
body_b
;

419 
ıVeù
 
n
 = 
¬b
->n;

420 
ıVeù
 
body_d–
 = 
	`ıvsub
(
b
->
p
, 
a
->p);

422 
i
=0; i<
¬b
->
couÁ
; i++){

423 
ıCÚù
 *
cÚ
 = &
¬b
->
cÚùs
[
i
];

426 
cÚ
->
nMass
 = 1.0f/
	`k_sÿÏr
(
a
, 
b
, cÚ->
r1
, cÚ->
r2
, 
n
);

427 
cÚ
->
tMass
 = 1.0f/
	`k_sÿÏr
(
a
, 
b
, cÚ->
r1
, cÚ->
r2
, 
	`ıv³½
(
n
));

430 
ıFlßt
 
di¡
 = 
	`ıvdÙ
(
	`ıvadd
(
	`ıvsub
(
cÚ
->
r2
, cÚ->
r1
), 
body_d–
), 
n
);

431 
cÚ
->
bŸs
 = -bŸs*
	`ıfmš
(0.0f, 
di¡
 + 
¦İ
)/
dt
;

432 
cÚ
->
jBŸs
 = 0.0f;

435 
cÚ
->
bounû
 = 
	`nÜm®_»Ïtive_v–oc™y
(
a
, 
b
, cÚ->
r1
, cÚ->
r2
, 
n
)*
¬b
->
e
;

437 
	}
}

440 
	$ıArb™”AµlyCachedImpul£
(
ıArb™”
 *
¬b
, 
ıFlßt
 
dt_cÛf
)

442 if(
	`ıArb™”IsFœ¡CÚù
(
¬b
)) ;

444 
ıBody
 *
a
 = 
¬b
->
body_a
;

445 
ıBody
 *
b
 = 
¬b
->
body_b
;

446 
ıVeù
 
n
 = 
¬b
->n;

448 
i
=0; i<
¬b
->
couÁ
; i++){

449 
ıCÚù
 *
cÚ
 = &
¬b
->
cÚùs
[
i
];

450 
ıVeù
 
j
 = 
	`ıvrÙ©e
(
n
, 
	`ıv
(
cÚ
->
jnAcc
, cÚ->
jtAcc
));

451 
	`­¶y_impul£s
(
a
, 
b
, 
cÚ
->
r1
, cÚ->
r2
, 
	`ıvmuÉ
(
j
, 
dt_cÛf
));

453 
	}
}

458 
	$ıArb™”AµlyImpul£
(
ıArb™”
 *
¬b
)

460 
ıBody
 *
a
 = 
¬b
->
body_a
;

461 
ıBody
 *
b
 = 
¬b
->
body_b
;

462 
ıVeù
 
n
 = 
¬b
->n;

463 
ıVeù
 
surçû_vr
 = 
¬b
->surface_vr;

464 
ıFlßt
 
äiùiÚ
 = 
¬b
->
u
;

466 
i
=0; i<
¬b
->
couÁ
; i++){

467 
ıCÚù
 *
cÚ
 = &
¬b
->
cÚùs
[
i
];

468 
ıFlßt
 
nMass
 = 
cÚ
->nMass;

469 
ıVeù
 
r1
 = 
cÚ
->r1;

470 
ıVeù
 
r2
 = 
cÚ
->r2;

472 
ıVeù
 
vb1
 = 
	`ıvadd
(
a
->
v_bŸs
, 
	`ıvmuÉ
(
	`ıv³½
(
r1
),‡->
w_bŸs
));

473 
ıVeù
 
vb2
 = 
	`ıvadd
(
b
->
v_bŸs
, 
	`ıvmuÉ
(
	`ıv³½
(
r2
), b->
w_bŸs
));

474 
ıVeù
 
vr
 = 
	`ıvadd
(
	`»Ïtive_v–oc™y
(
a
, 
b
, 
r1
, 
r2
), 
surçû_vr
);

476 
ıFlßt
 
vbn
 = 
	`ıvdÙ
(
	`ıvsub
(
vb2
, 
vb1
), 
n
);

477 
ıFlßt
 
vº
 = 
	`ıvdÙ
(
vr
, 
n
);

478 
ıFlßt
 
v¹
 = 
	`ıvdÙ
(
vr
, 
	`ıv³½
(
n
));

480 
ıFlßt
 
jbn
 = (
cÚ
->
bŸs
 - 
vbn
)*
nMass
;

481 
ıFlßt
 
jbnOld
 = 
cÚ
->
jBŸs
;

482 
cÚ
->
jBŸs
 = 
	`ıfmax
(
jbnOld
 + 
jbn
, 0.0f);

484 
ıFlßt
 
jn
 = -(
cÚ
->
bounû
 + 
vº
)*
nMass
;

485 
ıFlßt
 
jnOld
 = 
cÚ
->
jnAcc
;

486 
cÚ
->
jnAcc
 = 
	`ıfmax
(
jnOld
 + 
jn
, 0.0f);

488 
ıFlßt
 
jtMax
 = 
äiùiÚ
*
cÚ
->
jnAcc
;

489 
ıFlßt
 
jt
 = -
v¹
*
cÚ
->
tMass
;

490 
ıFlßt
 
jtOld
 = 
cÚ
->
jtAcc
;

491 
cÚ
->
jtAcc
 = 
	`ıfşamp
(
jtOld
 + 
jt
, -
jtMax
, jtMax);

493 
	`­¶y_bŸs_impul£s
(
a
, 
b
, 
r1
, 
r2
, 
	`ıvmuÉ
(
n
, 
cÚ
->
jBŸs
 - 
jbnOld
));

494 
	`­¶y_impul£s
(
a
, 
b
, 
r1
, 
r2
, 
	`ıvrÙ©e
(
n
, 
	`ıv
(
cÚ
->
jnAcc
 - 
jnOld
, cÚ->
jtAcc
 - 
jtOld
)));

496 
	}
}

	@../src/chipmunk/cpArray.c

22 
	~<¡ršg.h
>

24 
	~"chmunk/chmunk_´iv©e.h
"

27 
ıA¼ay
 *

28 
	$ıA¼ayNew
(
size
)

30 
ıA¼ay
 *
¬r
 = (ıA¼ay *)
	`ıÿÎoc
(1, (cpArray));

32 
¬r
->
num
 = 0;

33 
¬r
->
max
 = (
size
 ? size : 4);

34 
¬r
->¬¸ğ(**)
	`ıÿÎoc
×¼->
max
, (*));

36  
¬r
;

37 
	}
}

40 
	$ıA¼ayF»e
(
ıA¼ay
 *
¬r
)

42 if(
¬r
){

43 
	`ıä“
(
¬r
->arr);

44 
¬r
->¬¸ğ
NULL
;

46 
	`ıä“
(
¬r
);

48 
	}
}

51 
	$ıA¼ayPush
(
ıA¼ay
 *
¬r
, *
objeù
)

53 if(
¬r
->
num
 =ğ¬r->
max
){

54 
¬r
->
max
 = 3*(arr->max + 1)/2;

55 
¬r
->¬¸ğ(**)
	`ı»®loc
×¼->¬r,‡¼->
max
*(*));

58 
¬r
->¬r[¬r->
num
] = 
objeù
;

59 
¬r
->
num
++;

60 
	}
}

63 
	$ıA¼ayPİ
(
ıA¼ay
 *
¬r
)

65 
¬r
->
num
--;

67 *
v®ue
 = 
¬r
->¬r[¬r->
num
];

68 
¬r
->¬r[¬r->
num
] = 
NULL
;

70  
v®ue
;

71 
	}
}

74 
	$ıA¼ayD–‘eObj
(
ıA¼ay
 *
¬r
, *
obj
)

76 
i
=0; i<
¬r
->
num
; i++){

77 if(
¬r
->¬r[
i
] =ğ
obj
){

78 
¬r
->
num
--;

80 
¬r
->¬r[
i
] =‡¼->¬r[¬r->
num
];

81 
¬r
->¬r[¬r->
num
] = 
NULL
;

86 
	}
}

89 
ıA¼ayF»eEach
(
ıA¼ay
 *
¬r
, (
ä“Func
)(*))

91 
i
=0; i<
¬r
->
num
; i++è
	`ä“Func
(arr->arr[i]);

92 
	}
}

94 
ıBoŞ


95 
	$ıA¼ayCÚšs
(
ıA¼ay
 *
¬r
, *
±r
)

97 
i
=0; i<
¬r
->
num
; i++)

98 if(
¬r
->¬r[
i
] =ğ
±r
è 
ıTrue
;

100  
ıF®£
;

101 
	}
}

	@../src/chipmunk/cpBBTree.c

22 
	~"¡dlib.h
"

23 
	~"¡dio.h
"

25 
	~"chmunk/chmunk_´iv©e.h
"

27 
šlše
 
ıS·tŸlIndexCÏss
 *
KÏss
();

29 
Node
 
	tNode
;

30 
Paœ
 
	tPaœ
;

32 
	sıBBT»e
 {

33 
ıS·tŸlIndex
 
	m¥©ŸlIndex
;

34 
ıBBT»eV–oc™yFunc
 
	mv–oc™yFunc
;

36 
ıHashS‘
 *
	mËaves
;

37 
Node
 *
	mroÙ
;

39 
Node
 *
	mpoŞedNodes
;

40 
Paœ
 *
	mpoŞedPaœs
;

41 
ıA¼ay
 *
	m®loÿ‹dBufãrs
;

43 
ıTime¡amp
 
	m¡amp
;

46 
	sNode
 {

47 *
	mobj
;

48 
ıBB
 
	mbb
;

49 
Node
 *
	m·»Á
;

53 ¡ruù { 
Node
 *
	ma
, *
	mb
; } 
	mchd»n
;

57 
ıTime¡amp
 
	m¡amp
;

58 
Paœ
 *
	m·œs
;

59 } 
	mËaf
;

60 } 
	mnode
;

64 
	#A
 
node
.
chd»n
.
a


	)

65 
	#B
 
node
.
chd»n
.
b


	)

66 
	#STAMP
 
node
.
Ëaf
.
¡amp


	)

67 
	#PAIRS
 
node
.
Ëaf
.
·œs


	)

69 
	sTh»ad
 {

70 
Paœ
 *
	m´ev
;

71 
Node
 *
	mËaf
;

72 
Paœ
 *
	mÃxt
;

73 } 
	tTh»ad
;

75 
	sPaœ
 {

76 
Th»ad
 
	ma
, 
	mb
;

77 
ıCŞlisiÚID
 
	mid
;

82 
šlše
 
ıBB


83 
	$G‘BB
(
ıBBT»e
 *
Œ“
, *
obj
)

85 
ıBB
 
bb
 = 
Œ“
->
¥©ŸlIndex
.
	`bbfunc
(
obj
);

87 
ıBBT»eV–oc™yFunc
 
v–oc™yFunc
 = 
Œ“
->velocityFunc;

88 if(
v–oc™yFunc
){

89 
ıFlßt
 
cÛf
 = 0.1f;

90 
ıFlßt
 
x
 = (
bb
.
r
 - bb.
l
)*
cÛf
;

91 
ıFlßt
 
y
 = (
bb
.
t
 - bb.
b
)*
cÛf
;

93 
ıVeù
 
v
 = 
	`ıvmuÉ
(
	`v–oc™yFunc
(
obj
), 0.1f);

94  
	`ıBBNew
(
bb
.
l
 + 
	`ıfmš
(-
x
, 
v
.x), bb.
b
 + cpfmš(-
y
, v.y), bb.
r
 + 
	`ıfmax
(x, v.x), bb.
t
 + cpfmax(y, v.y));

96  
bb
;

98 
	}
}

100 
šlše
 
ıBBT»e
 *

101 
	$G‘T»e
(
ıS·tŸlIndex
 *
šdex
)

103  (
šdex
 && index->
kÏss
 =ğ
	`KÏss
(è? (
ıBBT»e
 *)šdex : 
NULL
);

104 
	}
}

106 
šlše
 
Node
 *

107 
	$G‘RoÙIfT»e
(
ıS·tŸlIndex
 *
šdex
){

108  (
šdex
 && index->
kÏss
 =ğ
	`KÏss
(è? ((
ıBBT»e
 *)šdex)->
roÙ
 : 
NULL
);

109 
	}
}

111 
šlše
 
ıBBT»e
 *

112 
	$G‘Ma¡”T»e
(
ıBBT»e
 *
Œ“
)

114 
ıBBT»e
 *
dyÇmicT»e
 = 
	`G‘T»e
(
Œ“
->
¥©ŸlIndex
.
dyÇmicIndex
);

115  (
dyÇmicT»e
 ? dyÇmicT»: 
Œ“
);

116 
	}
}

118 
šlše
 

119 
	$Inüem’tSmp
(
ıBBT»e
 *
Œ“
)

121 
ıBBT»e
 *
dyÇmicT»e
 = 
	`G‘T»e
(
Œ“
->
¥©ŸlIndex
.
dyÇmicIndex
);

122 if(
dyÇmicT»e
){

123 
dyÇmicT»e
->
¡amp
++;

125 
Œ“
->
¡amp
++;

127 
	}
}

132 
	$PaœRecyşe
(
ıBBT»e
 *
Œ“
, 
Paœ
 *
·œ
)

136 
Œ“
 = 
	`G‘Ma¡”T»e
(tree);

138 
·œ
->
a
.
Ãxt
 = 
Œ“
->
poŞedPaœs
;

139 
Œ“
->
poŞedPaœs
 = 
·œ
;

140 
	}
}

142 
Paœ
 *

143 
	$PaœFromPoŞ
(
ıBBT»e
 *
Œ“
)

147 
Œ“
 = 
	`G‘Ma¡”T»e
(tree);

149 
Paœ
 *
·œ
 = 
Œ“
->
poŞedPaœs
;

151 if(
·œ
){

152 
Œ“
->
poŞedPaœs
 = 
·œ
->
a
.
Ãxt
;

153  
·œ
;

156 
couÁ
 = 
CP_BUFFER_BYTES
/(
Paœ
);

157 
	`ıAs£¹H¬d
(
couÁ
, "Internal Error: Buffer size isoo small.");

159 
Paœ
 *
bufãr
 = (Paœ *)
	`ıÿÎoc
(1, 
CP_BUFFER_BYTES
);

160 
	`ıA¼ayPush
(
Œ“
->
®loÿ‹dBufãrs
, 
bufãr
);

163 
i
=1; i<
couÁ
; i++è
	`PaœRecyşe
(
Œ“
, 
bufãr
 + i);

164  
bufãr
;

166 
	}
}

168 
šlše
 

169 
	$Th»adUÆšk
(
Th»ad
 
th»ad
)

171 
Paœ
 *
Ãxt
 = 
th»ad
.next;

172 
Paœ
 *
´ev
 = 
th»ad
.prev;

174 if(
Ãxt
){

175 if(
Ãxt
->
a
.
Ëaf
 =ğ
th»ad
.ËafèÃxt->a.
´ev
 =…»v; Ãxt->
b
.prev =…rev;

178 if(
´ev
){

179 if(
´ev
->
a
.
Ëaf
 =ğ
th»ad
.Ëafè´ev->a.
Ãxt
 =‚ext; ´ev->
b
.next =‚ext;

181 
th»ad
.
Ëaf
->
PAIRS
 = 
Ãxt
;

183 
	}
}

186 
	$PaœsCË¬
(
Node
 *
Ëaf
, 
ıBBT»e
 *
Œ“
)

188 
Paœ
 *
·œ
 = 
Ëaf
->
PAIRS
;

189 
Ëaf
->
PAIRS
 = 
NULL
;

191 
·œ
){

192 if(
·œ
->
a
.
Ëaf
 ==†eaf){

193 
Paœ
 *
Ãxt
 = 
·œ
->
a
.next;

194 
	`Th»adUÆšk
(
·œ
->
b
);

195 
	`PaœRecyşe
(
Œ“
, 
·œ
);

196 
·œ
 = 
Ãxt
;

198 
Paœ
 *
Ãxt
 = 
·œ
->
b
.next;

199 
	`Th»adUÆšk
(
·œ
->
a
);

200 
	`PaœRecyşe
(
Œ“
, 
·œ
);

201 
·œ
 = 
Ãxt
;

204 
	}
}

207 
	$PaœIn£¹
(
Node
 *
a
, Nod*
b
, 
ıBBT»e
 *
Œ“
)

209 
Paœ
 *
ÃxtA
 = 
a
->
PAIRS
, *
ÃxtB
 = 
b
->PAIRS;

210 
Paœ
 *
·œ
 = 
	`PaœFromPoŞ
(
Œ“
);

211 
Paœ
 
‹mp
 = {{
NULL
, 
a
, 
ÃxtA
},{NULL, 
b
, 
ÃxtB
}, 0};

213 
a
->
PAIRS
 = 
b
->PAIRS = 
·œ
;

214 *
·œ
 = 
‹mp
;

216 if(
ÃxtA
){

217 if(
ÃxtA
->
a
.
Ëaf
 =ğaèÃxtA->a.
´ev
 = 
·œ
; ÃxtA->
b
.prev =…air;

220 if(
ÃxtB
){

221 if(
ÃxtB
->
a
.
Ëaf
 =ğ
b
èÃxtB->a.
´ev
 = 
·œ
; nextB->b.prev =…air;

223 
	}
}

229 
	$NodeRecyşe
(
ıBBT»e
 *
Œ“
, 
Node
 *
node
)

231 
node
->
·»Á
 = 
Œ“
->
poŞedNodes
;

232 
Œ“
->
poŞedNodes
 = 
node
;

233 
	}
}

235 
Node
 *

236 
	$NodeFromPoŞ
(
ıBBT»e
 *
Œ“
)

238 
Node
 *
node
 = 
Œ“
->
poŞedNodes
;

240 if(
node
){

241 
Œ“
->
poŞedNodes
 = 
node
->
·»Á
;

242  
node
;

245 
couÁ
 = 
CP_BUFFER_BYTES
/(
Node
);

246 
	`ıAs£¹H¬d
(
couÁ
, "Internal Error: Buffer size isoo small.");

248 
Node
 *
bufãr
 = (Nod*)
	`ıÿÎoc
(1, 
CP_BUFFER_BYTES
);

249 
	`ıA¼ayPush
(
Œ“
->
®loÿ‹dBufãrs
, 
bufãr
);

252 
i
=1; i<
couÁ
; i++è
	`NodeRecyşe
(
Œ“
, 
bufãr
 + i);

253  
bufãr
;

255 
	}
}

257 
šlše
 

258 
	$NodeS‘A
(
Node
 *
node
, Nod*
v®ue
)

260 
node
->
A
 = 
v®ue
;

261 
v®ue
->
·»Á
 = 
node
;

262 
	}
}

264 
šlše
 

265 
	$NodeS‘B
(
Node
 *
node
, Nod*
v®ue
)

267 
node
->
B
 = 
v®ue
;

268 
v®ue
->
·»Á
 = 
node
;

269 
	}
}

271 
Node
 *

272 
	$NodeNew
(
ıBBT»e
 *
Œ“
, 
Node
 *
a
, Nod*
b
)

274 
Node
 *
node
 = 
	`NodeFromPoŞ
(
Œ“
);

276 
node
->
obj
 = 
NULL
;

277 
node
->
bb
 = 
	`ıBBM”ge
(
a
->bb, 
b
->bb);

278 
node
->
·»Á
 = 
NULL
;

280 
	`NodeS‘A
(
node
, 
a
);

281 
	`NodeS‘B
(
node
, 
b
);

283  
node
;

284 
	}
}

286 
šlše
 
ıBoŞ


287 
	$NodeIsL—f
(
Node
 *
node
)

289  (
node
->
obj
 !ğ
NULL
);

290 
	}
}

292 
šlše
 
Node
 *

293 
	$NodeOth”
(
Node
 *
node
, Nod*
chd
)

295  (
node
->
A
 =ğ
chd
 ?‚ode->
B
 :‚ode->A);

296 
	}
}

298 
šlše
 

299 
	$NodeR•ÏûChd
(
Node
 *
·»Á
, Nod*
chd
, Nod*
v®ue
, 
ıBBT»e
 *
Œ“
)

301 
	`ıAs£¹Soá
(!
	`NodeIsL—f
(
·»Á
), "Internal Error: Cannot„eplace child of‡†eaf.");

302 
	`ıAs£¹Soá
(
chd
 =ğ
·»Á
->
A
 || chd =ğ·»Á->
B
, "Internal Error: Node is‚ot‡ child of…arent.");

304 if(
·»Á
->
A
 =ğ
chd
){

305 
	`NodeRecyşe
(
Œ“
, 
·»Á
->
A
);

306 
	`NodeS‘A
(
·»Á
, 
v®ue
);

308 
	`NodeRecyşe
(
Œ“
, 
·»Á
->
B
);

309 
	`NodeS‘B
(
·»Á
, 
v®ue
);

312 
Node
 *
node
=
·»Á
;‚ode;‚ode =‚ode->parent){

313 
node
->
bb
 = 
	`ıBBM”ge
Òode->
A
->bb,‚ode->
B
->bb);

315 
	}
}

319 
šlše
 
ıFlßt


320 
	$ıBBProxim™y
(
ıBB
 
a
, cpBB 
b
)

322  
	`ıçbs
(
a
.
l
 +‡.
r
 - 
b
.È- b.rè+ cpçbs×.b +‡.
t
 - b.b - b.t);

323 
	}
}

325 
Node
 *

326 
	$SubŒ“In£¹
(
Node
 *
subŒ“
, Nod*
Ëaf
, 
ıBBT»e
 *
Œ“
)

328 if(
subŒ“
 =ğ
NULL
){

329  
Ëaf
;

330 } if(
	`NodeIsL—f
(
subŒ“
)){

331  
	`NodeNew
(
Œ“
, 
Ëaf
, 
subŒ“
);

333 
ıFlßt
 
co¡_a
 = 
	`ıBBA»a
(
subŒ“
->
B
->
bb
è+ 
	`ıBBM”gedA»a
(subŒ“->
A
->bb, 
Ëaf
->bb);

334 
ıFlßt
 
co¡_b
 = 
	`ıBBA»a
(
subŒ“
->
A
->
bb
è+ 
	`ıBBM”gedA»a
(subŒ“->
B
->bb, 
Ëaf
->bb);

336 if(
co¡_a
 =ğ
co¡_b
){

337 
co¡_a
 = 
	`ıBBProxim™y
(
subŒ“
->
A
->
bb
, 
Ëaf
->bb);

338 
co¡_b
 = 
	`ıBBProxim™y
(
subŒ“
->
B
->
bb
, 
Ëaf
->bb);

341 if(
co¡_b
 < 
co¡_a
){

342 
	`NodeS‘B
(
subŒ“
, 
	`SubŒ“In£¹
(subŒ“->
B
, 
Ëaf
, 
Œ“
));

344 
	`NodeS‘A
(
subŒ“
, 
	`SubŒ“In£¹
(subŒ“->
A
, 
Ëaf
, 
Œ“
));

347 
subŒ“
->
bb
 = 
	`ıBBM”ge
(subŒ“->bb, 
Ëaf
->bb);

348  
subŒ“
;

350 
	}
}

353 
	$SubŒ“Qu”y
(
Node
 *
subŒ“
, *
obj
, 
ıBB
 
bb
, 
ıS·tŸlIndexQu”yFunc
 
func
, *
d©a
)

355 if(
	`ıBBIÁ”£ùs
(
subŒ“
->
bb
, bb)){

356 if(
	`NodeIsL—f
(
subŒ“
)){

357 
	`func
(
obj
, 
subŒ“
->obj, 0, 
d©a
);

359 
	`SubŒ“Qu”y
(
subŒ“
->
A
, 
obj
, 
bb
, 
func
, 
d©a
);

360 
	`SubŒ“Qu”y
(
subŒ“
->
B
, 
obj
, 
bb
, 
func
, 
d©a
);

363 
	}
}

366 
ıFlßt


367 
	$SubŒ“Segm’tQu”y
(
Node
 *
subŒ“
, *
obj
, 
ıVeù
 
a
, cpVeù 
b
, 
ıFlßt
 
t_ex™
, 
ıS·tŸlIndexSegm’tQu”yFunc
 
func
, *
d©a
)

369 if(
	`NodeIsL—f
(
subŒ“
)){

370  
	`func
(
obj
, 
subŒ“
->obj, 
d©a
);

372 
ıFlßt
 
t_a
 = 
	`ıBBSegm’tQu”y
(
subŒ“
->
A
->
bb
, 
a
, 
b
);

373 
ıFlßt
 
t_b
 = 
	`ıBBSegm’tQu”y
(
subŒ“
->
B
->
bb
, 
a
, 
b
);

375 if(
t_a
 < 
t_b
){

376 if(
t_a
 < 
t_ex™
èt_ex™ = 
	`ıfmš
Ñ_ex™, 
	`SubŒ“Segm’tQu”y
(
subŒ“
->
A
, 
obj
, 
a
, 
b
,_ex™, 
func
, 
d©a
));

377 if(
t_b
 < 
t_ex™
èt_ex™ = 
	`ıfmš
Ñ_ex™, 
	`SubŒ“Segm’tQu”y
(
subŒ“
->
B
, 
obj
, 
a
, 
b
,_ex™, 
func
, 
d©a
));

379 if(
t_b
 < 
t_ex™
èt_ex™ = 
	`ıfmš
Ñ_ex™, 
	`SubŒ“Segm’tQu”y
(
subŒ“
->
B
, 
obj
, 
a
, 
b
,_ex™, 
func
, 
d©a
));

380 if(
t_a
 < 
t_ex™
èt_ex™ = 
	`ıfmš
Ñ_ex™, 
	`SubŒ“Segm’tQu”y
(
subŒ“
->
A
, 
obj
, 
a
, 
b
,_ex™, 
func
, 
d©a
));

383  
t_ex™
;

385 
	}
}

388 
	$SubŒ“Recyşe
(
ıBBT»e
 *
Œ“
, 
Node
 *
node
)

390 if(!
	`NodeIsL—f
(
node
)){

391 
	`SubŒ“Recyşe
(
Œ“
, 
node
->
A
);

392 
	`SubŒ“Recyşe
(
Œ“
, 
node
->
B
);

393 
	`NodeRecyşe
(
Œ“
, 
node
);

395 
	}
}

397 
šlše
 
Node
 *

398 
	$SubŒ“Remove
(
Node
 *
subŒ“
, Nod*
Ëaf
, 
ıBBT»e
 *
Œ“
)

400 if(
Ëaf
 =ğ
subŒ“
){

401  
NULL
;

403 
Node
 *
·»Á
 = 
Ëaf
->parent;

404 if(
·»Á
 =ğ
subŒ“
){

405 
Node
 *
Ùh”
 = 
	`NodeOth”
(
subŒ“
, 
Ëaf
);

406 
Ùh”
->
·»Á
 = 
subŒ“
->parent;

407 
	`NodeRecyşe
(
Œ“
, 
subŒ“
);

408  
Ùh”
;

410 
	`NodeR•ÏûChd
(
·»Á
->·»Á,…¬’t, 
	`NodeOth”
Õ¬’t, 
Ëaf
), 
Œ“
);

411  
subŒ“
;

414 
	}
}

418 
	sM¬kCÚ‹xt
 {

419 
ıBBT»e
 *
	mŒ“
;

420 
Node
 *
	m¡©icRoÙ
;

421 
ıS·tŸlIndexQu”yFunc
 
	mfunc
;

422 *
	md©a
;

423 } 
	tM¬kCÚ‹xt
;

426 
	$M¬kL—fQu”y
(
Node
 *
subŒ“
, Nod*
Ëaf
, 
ıBoŞ
 
Ëá
, 
M¬kCÚ‹xt
 *
cÚ‹xt
)

428 if(
	`ıBBIÁ”£ùs
(
Ëaf
->
bb
, 
subŒ“
->bb)){

429 if(
	`NodeIsL—f
(
subŒ“
)){

430 if(
Ëá
){

431 
	`PaœIn£¹
(
Ëaf
, 
subŒ“
, 
cÚ‹xt
->
Œ“
);

433 if(
subŒ“
->
STAMP
 < 
Ëaf
->STAMPè
	`PaœIn£¹
(subŒ“,†—f, 
cÚ‹xt
->
Œ“
);

434 
cÚ‹xt
->
	`func
(
Ëaf
->
obj
, 
subŒ“
->obj, 0, cÚ‹xt->
d©a
);

437 
	`M¬kL—fQu”y
(
subŒ“
->
A
, 
Ëaf
, 
Ëá
, 
cÚ‹xt
);

438 
	`M¬kL—fQu”y
(
subŒ“
->
B
, 
Ëaf
, 
Ëá
, 
cÚ‹xt
);

441 
	}
}

444 
	$M¬kL—f
(
Node
 *
Ëaf
, 
M¬kCÚ‹xt
 *
cÚ‹xt
)

446 
ıBBT»e
 *
Œ“
 = 
cÚ‹xt
->tree;

447 if(
Ëaf
->
STAMP
 =ğ
	`G‘Ma¡”T»e
(
Œ“
)->
¡amp
){

448 
Node
 *
¡©icRoÙ
 = 
cÚ‹xt
->staticRoot;

449 if(
¡©icRoÙ
è
	`M¬kL—fQu”y
(¡©icRoÙ, 
Ëaf
, 
ıF®£
, 
cÚ‹xt
);

451 
Node
 *
node
 = 
Ëaf
;‚ode->
·»Á
;‚ode =‚ode->parent){

452 if(
node
 =ğnode->
·»Á
->
A
){

453 
	`M¬kL—fQu”y
(
node
->
·»Á
->
B
, 
Ëaf
, 
ıTrue
, 
cÚ‹xt
);

455 
	`M¬kL—fQu”y
(
node
->
·»Á
->
A
, 
Ëaf
, 
ıF®£
, 
cÚ‹xt
);

459 
Paœ
 *
·œ
 = 
Ëaf
->
PAIRS
;

460 
·œ
){

461 if(
Ëaf
 =ğ
·œ
->
b
.leaf){

462 
·œ
->
id
 = 
cÚ‹xt
->
	`func
Õaœ->
a
.
Ëaf
->
obj
,†—f->obj,…aœ->id, cÚ‹xt->
d©a
);

463 
·œ
 =…aœ->
b
.
Ãxt
;

465 
·œ
 =…aœ->
a
.
Ãxt
;

469 
	}
}

472 
	$M¬kSubŒ“
(
Node
 *
subŒ“
, 
M¬kCÚ‹xt
 *
cÚ‹xt
)

474 if(
	`NodeIsL—f
(
subŒ“
)){

475 
	`M¬kL—f
(
subŒ“
, 
cÚ‹xt
);

477 
	`M¬kSubŒ“
(
subŒ“
->
A
, 
cÚ‹xt
);

478 
	`M¬kSubŒ“
(
subŒ“
->
B
, 
cÚ‹xt
);

480 
	}
}

484 
Node
 *

485 
	$L—fNew
(
ıBBT»e
 *
Œ“
, *
obj
, 
ıBB
 
bb
)

487 
Node
 *
node
 = 
	`NodeFromPoŞ
(
Œ“
);

488 
node
->
obj
 = obj;

489 
node
->
bb
 = 
	`G‘BB
(
Œ“
, 
obj
);

491 
node
->
·»Á
 = 
NULL
;

492 
node
->
STAMP
 = 0;

493 
node
->
PAIRS
 = 
NULL
;

495  
node
;

496 
	}
}

498 
ıBoŞ


499 
	$L—fUpd©e
(
Node
 *
Ëaf
, 
ıBBT»e
 *
Œ“
)

501 
Node
 *
roÙ
 = 
Œ“
->root;

502 
ıBB
 
bb
 = 
Œ“
->
¥©ŸlIndex
.
	`bbfunc
(
Ëaf
->
obj
);

504 if(!
	`ıBBCÚšsBB
(
Ëaf
->
bb
, bb)){

505 
Ëaf
->
bb
 = 
	`G‘BB
(
Œ“
,†—f->
obj
);

507 
roÙ
 = 
	`SubŒ“Remove
ÔoÙ, 
Ëaf
, 
Œ“
);

508 
Œ“
->
roÙ
 = 
	`SubŒ“In£¹
ÔoÙ, 
Ëaf
,ree);

510 
	`PaœsCË¬
(
Ëaf
, 
Œ“
);

511 
Ëaf
->
STAMP
 = 
	`G‘Ma¡”T»e
(
Œ“
)->
¡amp
;

513  
ıTrue
;

515  
ıF®£
;

517 
	}
}

519 
ıCŞlisiÚID
 
	$VoidQu”yFunc
(*
obj1
, *
obj2
, 
ıCŞlisiÚID
 
id
, *
d©a
){ id;
	}
}

522 
	$L—fAddPaœs
(
Node
 *
Ëaf
, 
ıBBT»e
 *
Œ“
)

524 
ıS·tŸlIndex
 *
dyÇmicIndex
 = 
Œ“
->
¥©ŸlIndex
.dynamicIndex;

525 if(
dyÇmicIndex
){

526 
Node
 *
dyÇmicRoÙ
 = 
	`G‘RoÙIfT»e
(
dyÇmicIndex
);

527 if(
dyÇmicRoÙ
){

528 
ıBBT»e
 *
dyÇmicT»e
 = 
	`G‘T»e
(
dyÇmicIndex
);

529 
M¬kCÚ‹xt
 
cÚ‹xt
 = {
dyÇmicT»e
, 
NULL
, NULL, NULL};

530 
	`M¬kL—fQu”y
(
dyÇmicRoÙ
, 
Ëaf
, 
ıTrue
, &
cÚ‹xt
);

533 
Node
 *
¡©icRoÙ
 = 
	`G‘RoÙIfT»e
(
Œ“
->
¥©ŸlIndex
.
¡©icIndex
);

534 
M¬kCÚ‹xt
 
cÚ‹xt
 = {
Œ“
, 
¡©icRoÙ
, 
VoidQu”yFunc
, 
NULL
};

535 
	`M¬kL—f
(
Ëaf
, &
cÚ‹xt
);

537 
	}
}

541 
ıBBT»e
 *

542 
	$ıBBT»eAÎoc
()

544  (
ıBBT»e
 *)
	`ıÿÎoc
(1, (cpBBTree));

545 
	}
}

548 
	$ËafS‘Eql
(*
obj
, 
Node
 *
node
)

550  (
obj
 =ğ
node
->obj);

551 
	}
}

554 
	$ËafS‘T¿ns
(*
obj
, 
ıBBT»e
 *
Œ“
)

556  
	`L—fNew
(
Œ“
, 
obj
,»e->
¥©ŸlIndex
.
	`bbfunc
(obj));

557 
	}
}

559 
ıS·tŸlIndex
 *

560 
	$ıBBT»eIn™
(
ıBBT»e
 *
Œ“
, 
ıS·tŸlIndexBBFunc
 
bbfunc
, 
ıS·tŸlIndex
 *
¡©icIndex
)

562 
	`ıS·tŸlIndexIn™
((
ıS·tŸlIndex
 *)
Œ“
, 
	`KÏss
(), 
bbfunc
, 
¡©icIndex
);

564 
Œ“
->
v–oc™yFunc
 = 
NULL
;

566 
Œ“
->
Ëaves
 = 
	`ıHashS‘New
(0, (
ıHashS‘EqlFunc
)
ËafS‘Eql
);

567 
Œ“
->
roÙ
 = 
NULL
;

569 
Œ“
->
poŞedNodes
 = 
NULL
;

570 
Œ“
->
®loÿ‹dBufãrs
 = 
	`ıA¼ayNew
(0);

572 
Œ“
->
¡amp
 = 0;

574  (
ıS·tŸlIndex
 *)
Œ“
;

575 
	}
}

578 
	$ıBBT»eS‘V–oc™yFunc
(
ıS·tŸlIndex
 *
šdex
, 
ıBBT»eV–oc™yFunc
 
func
)

580 if(
šdex
->
kÏss
 !ğ
	`KÏss
()){

581 
	`ıAs£¹W¬n
(
ıF®£
, "Ignoring cpBBTreeSetVelocityFunc() callo‚on-tree spatial index.");

585 ((
ıBBT»e
 *)
šdex
)->
v–oc™yFunc
 = 
func
;

586 
	}
}

588 
ıS·tŸlIndex
 *

589 
	$ıBBT»eNew
(
ıS·tŸlIndexBBFunc
 
bbfunc
, 
ıS·tŸlIndex
 *
¡©icIndex
)

591  
	`ıBBT»eIn™
(
	`ıBBT»eAÎoc
(), 
bbfunc
, 
¡©icIndex
);

592 
	}
}

595 
	$ıBBT»eDe¡roy
(
ıBBT»e
 *
Œ“
)

597 
	`ıHashS‘F»e
(
Œ“
->
Ëaves
);

599 if(
Œ“
->
®loÿ‹dBufãrs
è
	`ıA¼ayF»eEach
Ñ»e->®loÿ‹dBufãrs, 
ıä“
);

600 
	`ıA¼ayF»e
(
Œ“
->
®loÿ‹dBufãrs
);

601 
	}
}

606 
	$ıBBT»eIn£¹
(
ıBBT»e
 *
Œ“
, *
obj
, 
ıHashV®ue
 
hashid
)

608 
Node
 *
Ëaf
 = (Nod*)
	`ıHashS‘In£¹
(
Œ“
->
Ëaves
, 
hashid
, 
obj
, (
ıHashS‘T¿nsFunc
)
ËafS‘T¿ns
,ree);

610 
Node
 *
roÙ
 = 
Œ“
->root;

611 
Œ“
->
roÙ
 = 
	`SubŒ“In£¹
ÔoÙ, 
Ëaf
,ree);

613 
Ëaf
->
STAMP
 = 
	`G‘Ma¡”T»e
(
Œ“
)->
¡amp
;

614 
	`L—fAddPaœs
(
Ëaf
, 
Œ“
);

615 
	`Inüem’tSmp
(
Œ“
);

616 
	}
}

619 
	$ıBBT»eRemove
(
ıBBT»e
 *
Œ“
, *
obj
, 
ıHashV®ue
 
hashid
)

621 
Node
 *
Ëaf
 = (Nod*)
	`ıHashS‘Remove
(
Œ“
->
Ëaves
, 
hashid
, 
obj
);

623 
Œ“
->
roÙ
 = 
	`SubŒ“Remove
Ñ»e->roÙ, 
Ëaf
,ree);

624 
	`PaœsCË¬
(
Ëaf
, 
Œ“
);

625 
	`NodeRecyşe
(
Œ“
, 
Ëaf
);

626 
	}
}

628 
ıBoŞ


629 
	$ıBBT»eCÚšs
(
ıBBT»e
 *
Œ“
, *
obj
, 
ıHashV®ue
 
hashid
)

631  (
	`ıHashS‘Fšd
(
Œ“
->
Ëaves
, 
hashid
, 
obj
è!ğ
NULL
);

632 
	}
}

636 
	$L—fUpd©eW¿p
(
Node
 *
Ëaf
, 
ıBBT»e
 *
Œ“
è{
	`L—fUpd©e
Ö—f,»e);
	}
}

639 
	$ıBBT»eRešdexQu”y
(
ıBBT»e
 *
Œ“
, 
ıS·tŸlIndexQu”yFunc
 
func
, *
d©a
)

641 if(!
Œ“
->
roÙ
) ;

644 
	`ıHashS‘Each
(
Œ“
->
Ëaves
, (
ıHashS‘I‹¿tÜFunc
)
L—fUpd©eW¿p
,ree);

646 
ıS·tŸlIndex
 *
¡©icIndex
 = 
Œ“
->
¥©ŸlIndex
.staticIndex;

647 
Node
 *
¡©icRoÙ
 = (
¡©icIndex
 && sticIndex->
kÏss
 =ğ
	`KÏss
(è? ((
ıBBT»e
 *)¡©icIndex)->
roÙ
 : 
NULL
);

649 
M¬kCÚ‹xt
 
cÚ‹xt
 = {
Œ“
, 
¡©icRoÙ
, 
func
, 
d©a
};

650 
	`M¬kSubŒ“
(
Œ“
->
roÙ
, &
cÚ‹xt
);

651 if(
¡©icIndex
 && !
¡©icRoÙ
è
	`ıS·tŸlIndexCŞlideStic
((
ıS·tŸlIndex
 *)
Œ“
, sticIndex, 
func
, 
d©a
);

653 
	`Inüem’tSmp
(
Œ“
);

654 
	}
}

657 
	$ıBBT»eRešdex
(
ıBBT»e
 *
Œ“
)

659 
	`ıBBT»eRešdexQu”y
(
Œ“
, 
VoidQu”yFunc
, 
NULL
);

660 
	}
}

663 
	$ıBBT»eRešdexObjeù
(
ıBBT»e
 *
Œ“
, *
obj
, 
ıHashV®ue
 
hashid
)

665 
Node
 *
Ëaf
 = (Nod*)
	`ıHashS‘Fšd
(
Œ“
->
Ëaves
, 
hashid
, 
obj
);

666 if(
Ëaf
){

667 if(
	`L—fUpd©e
(
Ëaf
, 
Œ“
)è
	`L—fAddPaœs
(leaf,ree);

668 
	`Inüem’tSmp
(
Œ“
);

670 
	}
}

675 
	$ıBBT»eSegm’tQu”y
(
ıBBT»e
 *
Œ“
, *
obj
, 
ıVeù
 
a
, cpVeù 
b
, 
ıFlßt
 
t_ex™
, 
ıS·tŸlIndexSegm’tQu”yFunc
 
func
, *
d©a
)

677 
Node
 *
roÙ
 = 
Œ“
->root;

678 if(
roÙ
è
	`SubŒ“Segm’tQu”y
ÔoÙ, 
obj
, 
a
, 
b
, 
t_ex™
, 
func
, 
d©a
);

679 
	}
}

682 
	$ıBBT»eQu”y
(
ıBBT»e
 *
Œ“
, *
obj
, 
ıBB
 
bb
, 
ıS·tŸlIndexQu”yFunc
 
func
, *
d©a
)

684 if(
Œ“
->
roÙ
è
	`SubŒ“Qu”y
Ñ»e->roÙ, 
obj
, 
bb
, 
func
, 
d©a
);

685 
	}
}

690 
	$ıBBT»eCouÁ
(
ıBBT»e
 *
Œ“
)

692  
	`ıHashS‘CouÁ
(
Œ“
->
Ëaves
);

693 
	}
}

695 
	s—chCÚ‹xt
 {

696 
ıS·tŸlIndexI‹¿tÜFunc
 
	mfunc
;

697 *
	md©a
;

698 } 
	t—chCÚ‹xt
;

700 
	$—ch_h–³r
(
Node
 *
node
, 
—chCÚ‹xt
 *
cÚ‹xt
){cÚ‹xt->
	`func
Òode->
obj
, cÚ‹xt->
d©a
);
	}
}

703 
	$ıBBT»eEach
(
ıBBT»e
 *
Œ“
, 
ıS·tŸlIndexI‹¿tÜFunc
 
func
, *
d©a
)

705 
—chCÚ‹xt
 
cÚ‹xt
 = {
func
, 
d©a
};

706 
	`ıHashS‘Each
(
Œ“
->
Ëaves
, (
ıHashS‘I‹¿tÜFunc
)
—ch_h–³r
, &
cÚ‹xt
);

707 
	}
}

709 
ıS·tŸlIndexCÏss
 
	gkÏss
 = {

710 (
ıS·tŸlIndexDe¡royIm¶
)
ıBBT»eDe¡roy
,

712 (
ıS·tŸlIndexCouÁIm¶
)
ıBBT»eCouÁ
,

713 (
ıS·tŸlIndexEachIm¶
)
ıBBT»eEach
,

715 (
ıS·tŸlIndexCÚšsIm¶
)
ıBBT»eCÚšs
,

716 (
ıS·tŸlIndexIn£¹Im¶
)
ıBBT»eIn£¹
,

717 (
ıS·tŸlIndexRemoveIm¶
)
ıBBT»eRemove
,

719 (
ıS·tŸlIndexRešdexIm¶
)
ıBBT»eRešdex
,

720 (
ıS·tŸlIndexRešdexObjeùIm¶
)
ıBBT»eRešdexObjeù
,

721 (
ıS·tŸlIndexRešdexQu”yIm¶
)
ıBBT»eRešdexQu”y
,

723 (
ıS·tŸlIndexQu”yIm¶
)
ıBBT»eQu”y
,

724 (
ıS·tŸlIndexSegm’tQu”yIm¶
)
ıBBT»eSegm’tQu”y
,

727 
šlše
 
ıS·tŸlIndexCÏss
 *
	$KÏss
(){ &
kÏss
;
	}
}

733 
	$ıfcom·»
(cÚ¡ 
ıFlßt
 *
a
, cÚ¡ cpFlßˆ*
b
){

734  (*
a
 < *
b
 ? -1 : (*b < *a ? 1 : 0));

735 
	}
}

738 
	$flNodeA¼ay
(
Node
 *
node
, Nod***
cursÜ
){

739 (**
cursÜ
èğ
node
;

740 (*
cursÜ
)++;

741 
	}
}

743 
Node
 *

744 
	$·¹™iÚNodes
(
ıBBT»e
 *
Œ“
, 
Node
 **
nodes
, 
couÁ
)

746 if(
couÁ
 == 1){

747  
nodes
[0];

748 } if(
couÁ
 == 2) {

749  
	`NodeNew
(
Œ“
, 
nodes
[0],‚odes[1]);

753 
ıBB
 
bb
 = 
nodes
[0]->bb;

754 
i
=1; i<
couÁ
; i++è
bb
 = 
	`ıBBM”ge
(bb, 
nodes
[i]->bb);

757 
ıBoŞ
 
¥l™Width
 = (
bb
.
r
 - bb.
l
 > bb.
t
 - bb.
b
);

760 
ıFlßt
 *
bounds
 = (ıFlßˆ*)
	`ıÿÎoc
(
couÁ
*2, (cpFloat));

761 if(
¥l™Width
){

762 
i
=0; i<
couÁ
; i++){

763 
bounds
[2*
i
 + 0] = 
nodes
[i]->
bb
.
l
;

764 
bounds
[2*
i
 + 1] = 
nodes
[i]->
bb
.
r
;

767 
i
=0; i<
couÁ
; i++){

768 
bounds
[2*
i
 + 0] = 
nodes
[i]->
bb
.
b
;

769 
bounds
[2*
i
 + 1] = 
nodes
[i]->
bb
.
t
;

773 
	`qsÜt
(
bounds
, 
couÁ
*2, (
ıFlßt
), ((*)(cÚ¡ *, cÚ¡ *))
ıfcom·»
);

774 
ıFlßt
 
¥l™
 = (
bounds
[
couÁ
 - 1] + bounds[count])*0.5f;

775 
	`ıä“
(
bounds
);

778 
ıBB
 
a
 = 
bb
, 
b
 = bb;

779 if(
¥l™Width
è
a
.
r
 = 
b
.
l
 = 
¥l™
; a.
t
 = b.b = split;

782 
right
 = 
couÁ
;

783 
Ëá
=0;†eá < 
right
;){

784 
Node
 *
node
 = 
nodes
[
Ëá
];

785 if(
	`ıBBM”gedA»a
(
node
->
bb
, 
b
è< cpBBM”gedA»aÒode->bb, 
a
)){

787 
right
--;

788 
nodes
[
Ëá
] =‚odes[
right
];

789 
nodes
[
right
] = 
node
;

791 
Ëá
++;

795 if(
right
 =ğ
couÁ
){

796 
Node
 *
node
 = 
NULL
;

797 
i
=0; i<
couÁ
; i++è
node
 = 
	`SubŒ“In£¹
Òode, 
nodes
[i], 
Œ“
);

798  
node
;

802  
	`NodeNew
(
Œ“
,

803 
	`·¹™iÚNodes
(
Œ“
, 
nodes
, 
right
),

804 
	`·¹™iÚNodes
(
Œ“
, 
nodes
 + 
right
, 
couÁ
 -„ight)

806 
	}
}

828 
	$ıBBT»eO±imize
(
ıS·tŸlIndex
 *
šdex
)

830 if(
šdex
->
kÏss
 != &klass){

831 
	`ıAs£¹W¬n
(
ıF®£
, "Ignoring cpBBTreeOptimize() callo‚on-tree spatial index.");

835 
ıBBT»e
 *
Œ“
 = (ıBBT»*)
šdex
;

836 
Node
 *
roÙ
 = 
Œ“
->root;

837 if(!
roÙ
) ;

839 
couÁ
 = 
	`ıBBT»eCouÁ
(
Œ“
);

840 
Node
 **
nodes
 = (Nod**)
	`ıÿÎoc
(
couÁ
, (Node *));

841 
Node
 **
cursÜ
 = 
nodes
;

843 
	`ıHashS‘Each
(
Œ“
->
Ëaves
, (
ıHashS‘I‹¿tÜFunc
)
flNodeA¼ay
, &
cursÜ
);

845 
	`SubŒ“Recyşe
(
Œ“
, 
roÙ
);

846 
Œ“
->
roÙ
 = 
	`·¹™iÚNodes
Ñ»e, 
nodes
, 
couÁ
);

847 
	`ıä“
(
nodes
);

848 
	}
}

853 #ifdeà
CP_BBTREE_DEBUG_DRAW


854 
	~"O³nGL/gl.h
"

855 
	~"O³nGL/glu.h
"

856 
	~<GLUT/glut.h
>

859 
	$NodeR’d”
(
Node
 *
node
, 
d•th
)

861 if(!
	`NodeIsL—f
(
node
è&& 
d•th
 <= 10){

862 
	`NodeR’d”
(
node
->
a
, 
d•th
 + 1);

863 
	`NodeR’d”
(
node
->
b
, 
d•th
 + 1);

866 
ıBB
 
bb
 = 
node
->bb;

870 
	`glLšeWidth
(
	`ıfmax
(5.0à- 
d•th
, 1.0f));

871 
	`glBegš
(
GL_LINES
); {

872 
	`glV”‹x2f
(
bb
.
l
, bb.
b
);

873 
	`glV”‹x2f
(
bb
.
l
, bb.
t
);

875 
	`glV”‹x2f
(
bb
.
l
, bb.
t
);

876 
	`glV”‹x2f
(
bb
.
r
, bb.
t
);

878 
	`glV”‹x2f
(
bb
.
r
, bb.
t
);

879 
	`glV”‹x2f
(
bb
.
r
, bb.
b
);

881 
	`glV”‹x2f
(
bb
.
r
, bb.
b
);

882 
	`glV”‹x2f
(
bb
.
l
, bb.
b
);

883 }; 
	`glEnd
();

884 
	}
}

887 
	$ıBBT»eR’d”Debug
(
ıS·tŸlIndex
 *
šdex
){

888 if(
šdex
->
kÏss
 != &klass){

889 
	`ıAs£¹W¬n
(
ıF®£
, "Ignoring cpBBTreeRenderDebug() callo‚on-tree spatial index.");

893 
ıBBT»e
 *
Œ“
 = (ıBBT»*)
šdex
;

894 if(
Œ“
->
roÙ
è
	`NodeR’d”
(tree->root, 0);

895 
	}
}

	@../src/chipmunk/cpBody.c

22 
	~<æßt.h
>

23 
	~<¡d¬g.h
>

25 
	~"chmunk/chmunk_´iv©e.h
"

27 
ıBody
*

28 
	$ıBodyAÎoc
()

30  (
ıBody
 *)
	`ıÿÎoc
(1, (cpBody));

31 
	}
}

33 
ıBody
 *

34 
	$ıBodyIn™
(
ıBody
 *
body
, 
ıFlßt
 
mass
, cpFlßˆ
mom’t
)

36 
body
->
¥aû
 = 
NULL
;

37 
body
->
sh­eLi¡
 = 
NULL
;

38 
body
->
¬b™”Li¡
 = 
NULL
;

39 
body
->
cÚ¡¿štLi¡
 = 
NULL
;

41 
body
->
v–oc™y_func
 = 
ıBodyUpd©eV–oc™y
;

42 
body
->
pos™iÚ_func
 = 
ıBodyUpd©ePos™iÚ
;

44 
body
->
¦“pšg
.
roÙ
 = 
NULL
;

45 
body
->
¦“pšg
.
Ãxt
 = 
NULL
;

46 
body
->
¦“pšg
.
idËTime
 = 0.0f;

48 
body
->
p
 = 
ıvz”o
;

49 
body
->
v
 = 
ıvz”o
;

50 
body
->
f
 = 
ıvz”o
;

52 
body
->
w
 = 0.0f;

53 
body
->
t
 = 0.0f;

55 
body
->
v_bŸs
 = 
ıvz”o
;

56 
body
->
w_bŸs
 = 0.0f;

58 
body
->
u£rD©a
 = 
NULL
;

61 
	`ıBodyS‘Mass
(
body
, 
mass
);

62 
	`ıBodyS‘Mom’t
(
body
, 
mom’t
);

63 
	`ıBodyS‘AngË
(
body
, 0.0f);

65  
body
;

66 
	}
}

68 
ıBody
*

69 
	$ıBodyNew
(
ıFlßt
 
mass
, cpFlßˆ
mom’t
)

71  
	`ıBodyIn™
(
	`ıBodyAÎoc
(), 
mass
, 
mom’t
);

72 
	}
}

74 
ıBody
*

75 
	$ıBodyNewKšem©ic
()

77 
ıBody
 *
body
 = 
	`ıBodyNew
(0.0f, 0.0f);

78 
	`ıBodyS‘Ty³
(
body
, 
CP_BODY_TYPE_KINEMATIC
);

80  
body
;

81 
	}
}

83 
ıBody
*

84 
	$ıBodyNewStic
()

86 
ıBody
 *
body
 = 
	`ıBodyNew
(0.0f, 0.0f);

87 
	`ıBodyS‘Ty³
(
body
, 
CP_BODY_TYPE_STATIC
);

89  
body
;

90 
	}
}

92 
	$ıBodyDe¡roy
(
ıBody
 *
body
){
	}
}

95 
	$ıBodyF»e
(
ıBody
 *
body
)

97 if(
body
){

98 
	`ıBodyDe¡roy
(
body
);

99 
	`ıä“
(
body
);

101 
	}
}

103 #ifdeà
NDEBUG


104 
	#ıAs£¹SªeBody
(
body
)

	)

106 
	$ıv_as£¹_Çn
(
ıVeù
 
v
, *
mes§ge
){
	`ıAs£¹H¬d
(v.
x
 =ğv.x && v.
y
 =ğv.y, mes§ge);
	}
}

107 
	$ıv_as£¹_šfš™e
(
ıVeù
 
v
, *
mes§ge
){
	`ıAs£¹H¬d
(
	`ıçbs
(v.
x
è!ğ
INFINITY
 && cpçbs(v.
y
è!ğINFINITY, mes§ge);
	}
}

108 
	$ıv_as£¹_§Ã
(
ıVeù
 
v
, *
mes§ge
){
	`ıv_as£¹_Çn
(v, mes§ge); 
	`ıv_as£¹_šfš™e
(v, mes§ge);
	}
}

111 
	$ıBodySª™yCheck
(cÚ¡ 
ıBody
 *
body
)

113 
	`ıAs£¹H¬d
(
body
->
m
 =ğbody->m && body->
m_šv
 == body->m_inv, "Body's mass is NaN.");

114 
	`ıAs£¹H¬d
(
body
->
i
 =ğbody->˜&& body->
i_šv
 == body->i_inv, "Body's moment is NaN.");

115 
	`ıAs£¹H¬d
(
body
->
m
 >= 0.0f, "Body's mass is‚egative.");

116 
	`ıAs£¹H¬d
(
body
->
i
 >= 0.0f, "Body's moment is‚egative.");

118 
	`ıv_as£¹_§Ã
(
body
->
p
, "Body's…osition is invalid.");

119 
	`ıv_as£¹_§Ã
(
body
->
v
, "Body's velocity is invalid.");

120 
	`ıv_as£¹_§Ã
(
body
->
f
, "Body's force is invalid.");

122 
	`ıAs£¹H¬d
(
body
->
a
 =ğbody->¨&& 
	`ıçbs
(body->aè!ğ
INFINITY
, "Body's‡ngle is invalid.");

123 
	`ıAs£¹H¬d
(
body
->
w
 =ğbody->w && 
	`ıçbs
(body->wè!ğ
INFINITY
, "Body's‡ngular velocity is invalid.");

124 
	`ıAs£¹H¬d
(
body
->
t
 =ğbody->ˆ&& 
	`ıçbs
(body->tè!ğ
INFINITY
, "Body'sorque is invalid.");

125 
	}
}

127 
	#ıAs£¹SªeBody
(
body
è
	`ıBodySª™yCheck
(body)

	)

130 
ıBoŞ


131 
	$ıBodyIsSË•šg
(cÚ¡ 
ıBody
 *
body
)

133  (
body
->
¦“pšg
.
roÙ
 !ğ((
ıBody
*)0));

134 
	}
}

136 
ıBodyTy³


137 
	$ıBodyG‘Ty³
(
ıBody
 *
body
)

139 if(
body
->
¦“pšg
.
idËTime
 =ğ
INFINITY
){

140  
CP_BODY_TYPE_STATIC
;

141 } if(
body
->
m
 =ğ
INFINITY
){

142  
CP_BODY_TYPE_KINEMATIC
;

144  
CP_BODY_TYPE_DYNAMIC
;

146 
	}
}

149 
	$ıBodyS‘Ty³
(
ıBody
 *
body
, 
ıBodyTy³
 
ty³
)

151 
ıBodyTy³
 
ŞdTy³
 = 
	`ıBodyG‘Ty³
(
body
);

152 if(
ŞdTy³
 =ğ
ty³
) ;

156 
body
->
¦“pšg
.
idËTime
 = (
ty³
 =ğ
CP_BODY_TYPE_STATIC
 ? 
INFINITY
 : 0.0f);

158 if(
ty³
 =ğ
CP_BODY_TYPE_DYNAMIC
){

159 
body
->
m
 = body->
i
 = 0.0f;

160 
body
->
m_šv
 = body->
i_šv
 = 
INFINITY
;

162 
	`ıBodyAccumuÏ‹MassFromSh­es
(
body
);

164 
body
->
m
 = body->
i
 = 
INFINITY
;

165 
body
->
m_šv
 = body->
i_šv
 = 0.0f;

167 
body
->
v
 = 
ıvz”o
;

168 
body
->
w
 = 0.0f;

172 
ıS·û
 *
¥aû
 = 
	`ıBodyG‘S·û
(
body
);

173 if(
¥aû
 !ğ
NULL
){

174 
	`ıAs£¹S·ûUÆocked
(
¥aû
);

176 if(
ŞdTy³
 =ğ
CP_BODY_TYPE_STATIC
){

180 
	`ıBodyAùiv©e
(
body
);

184 
ıA¼ay
 *
äomA¼ay
 = 
	`ıS·ûA¼ayFÜBodyTy³
(
¥aû
, 
ŞdTy³
);

185 
ıA¼ay
 *
toA¼ay
 = 
	`ıS·ûA¼ayFÜBodyTy³
(
¥aû
, 
ty³
);

186 if(
äomA¼ay
 !ğ
toA¼ay
){

187 
	`ıA¼ayD–‘eObj
(
äomA¼ay
, 
body
);

188 
	`ıA¼ayPush
(
toA¼ay
, 
body
);

192 
ıS·tŸlIndex
 *
äomIndex
 = (
ŞdTy³
 =ğ
CP_BODY_TYPE_STATIC
 ? 
¥aû
->
¡©icSh­es
 : s·û->
dyÇmicSh­es
);

193 
ıS·tŸlIndex
 *
toIndex
 = (
ty³
 =ğ
CP_BODY_TYPE_STATIC
 ? 
¥aû
->
¡©icSh­es
 : s·û->
dyÇmicSh­es
);

194 if(
äomIndex
 !ğ
toIndex
){

195 
	`CP_BODY_FOREACH_SHAPE
(
body
, 
sh­e
){

196 
	`ıS·tŸlIndexRemove
(
äomIndex
, 
sh­e
, sh­e->
hashid
);

197 
	`ıS·tŸlIndexIn£¹
(
toIndex
, 
sh­e
, sh­e->
hashid
);

201 
	}
}

207 
	$ıBodyAccumuÏ‹MassFromSh­es
(
ıBody
 *
body
)

209 if(
body
 =ğ
NULL
 || 
	`ıBodyG‘Ty³
(bodyè!ğ
CP_BODY_TYPE_DYNAMIC
) ;

212 
body
->
m
 = body->
i
 = 0.0f;

213 
body
->
cog
 = 
ıvz”o
;

216 
ıVeù
 
pos
 = 
	`ıBodyG‘Pos™iÚ
(
body
);

219 
	`CP_BODY_FOREACH_SHAPE
(
body
, 
sh­e
){

220 
ıSh­eMassInfo
 *
šfo
 = &
sh­e
->
massInfo
;

221 
ıFlßt
 
m
 = 
šfo
->m;

223 if(
m
 > 0.0f){

224 
ıFlßt
 
msum
 = 
body
->
m
 + m;

226 
body
->
i
 +ğ
m
*
šfo
->˜+ 
	`ıvdi¡sq
(body->
cog
, info->cog)*(m*body->m)/
msum
;

227 
body
->
cog
 = 
	`ıvË½
(body->cog, 
šfo
->cog, 
m
/
msum
);

228 
body
->
m
 = 
msum
;

233 
body
->
m_šv
 = 1.0f/body->
m
;

234 
body
->
i_šv
 = 1.0f/body->
i
;

237 
	`ıBodyS‘Pos™iÚ
(
body
, 
pos
);

238 
	`ıAs£¹SªeBody
(
body
);

239 
	}
}

241 
ıS·û
 *

242 
	$ıBodyG‘S·û
(cÚ¡ 
ıBody
 *
body
)

244  
body
->
¥aû
;

245 
	}
}

247 
ıFlßt


248 
	$ıBodyG‘Mass
(cÚ¡ 
ıBody
 *
body
)

250  
body
->
m
;

251 
	}
}

254 
	$ıBodyS‘Mass
(
ıBody
 *
body
, 
ıFlßt
 
mass
)

256 
	`ıAs£¹H¬d
(
	`ıBodyG‘Ty³
(
body
è=ğ
CP_BODY_TYPE_DYNAMIC
, "You cannot sethe mass of kinematic or static bodies.");

257 
	`ıAs£¹H¬d
(0.0à<ğ
mass
 && mas < 
INFINITY
, "Mass must be…ositive‡nd finite.");

259 
	`ıBodyAùiv©e
(
body
);

260 
body
->
m
 = 
mass
;

261 
body
->
m_šv
 = 1.0f/
mass
;

262 
	`ıAs£¹SªeBody
(
body
);

263 
	}
}

265 
ıFlßt


266 
	$ıBodyG‘Mom’t
(cÚ¡ 
ıBody
 *
body
)

268  
body
->
i
;

269 
	}
}

272 
	$ıBodyS‘Mom’t
(
ıBody
 *
body
, 
ıFlßt
 
mom’t
)

274 
	`ıAs£¹H¬d
(
mom’t
 >= 0.0f, "Moment of Inertia must be…ositive.");

276 
	`ıBodyAùiv©e
(
body
);

277 
body
->
i
 = 
mom’t
;

278 
body
->
i_šv
 = 1.0f/
mom’t
;

279 
	`ıAs£¹SªeBody
(
body
);

280 
	}
}

282 
ıVeù


283 
	$ıBodyG‘RÙ©iÚ
(cÚ¡ 
ıBody
 *
body
)

285  
	`ıv
(
body
->
ŒªsfÜm
.
a
, body->ŒªsfÜm.
b
);

286 
	}
}

289 
	$ıBodyAddSh­e
(
ıBody
 *
body
, 
ıSh­e
 *
sh­e
)

291 
ıSh­e
 *
Ãxt
 = 
body
->
sh­eLi¡
;

292 if(
Ãxt
èÃxt->
´ev
 = 
sh­e
;

294 
sh­e
->
Ãxt
 =‚ext;

295 
body
->
sh­eLi¡
 = 
sh­e
;

297 if(
sh­e
->
massInfo
.
m
 > 0.0f){

298 
	`ıBodyAccumuÏ‹MassFromSh­es
(
body
);

300 
	}
}

303 
	$ıBodyRemoveSh­e
(
ıBody
 *
body
, 
ıSh­e
 *
sh­e
)

305 
ıSh­e
 *
´ev
 = 
sh­e
->prev;

306 
ıSh­e
 *
Ãxt
 = 
sh­e
->next;

308 if(
´ev
){

309 
´ev
->
Ãxt
 =‚ext;

311 
body
->
sh­eLi¡
 = 
Ãxt
;

314 if(
Ãxt
){

315 
Ãxt
->
´ev
 =…rev;

318 
sh­e
->
´ev
 = 
NULL
;

319 
sh­e
->
Ãxt
 = 
NULL
;

321 if(
	`ıBodyG‘Ty³
(
body
è=ğ
CP_BODY_TYPE_DYNAMIC
 && 
sh­e
->
massInfo
.
m
 > 0.0f){

322 
	`ıBodyAccumuÏ‹MassFromSh­es
(
body
);

324 
	}
}

326 
ıCÚ¡¿št
 *

327 
	$f‹rCÚ¡¿šts
(
ıCÚ¡¿št
 *
node
, 
ıBody
 *
body
, cpCÚ¡¿šˆ*
f‹r
)

329 if(
node
 =ğ
f‹r
){

330  
	`ıCÚ¡¿štNext
(
node
, 
body
);

331 } if(
node
->
a
 =ğ
body
){

332 
node
->
Ãxt_a
 = 
	`f‹rCÚ¡¿šts
Òode->Ãxt_a, 
body
, 
f‹r
);

334 
node
->
Ãxt_b
 = 
	`f‹rCÚ¡¿šts
Òode->Ãxt_b, 
body
, 
f‹r
);

337  
node
;

338 
	}
}

341 
	$ıBodyRemoveCÚ¡¿št
(
ıBody
 *
body
, 
ıCÚ¡¿št
 *
cÚ¡¿št
)

343 
body
->
cÚ¡¿štLi¡
 = 
	`f‹rCÚ¡¿šts
(body->cÚ¡¿štLi¡, body, 
cÚ¡¿št
);

344 
	}
}

348 
	$S‘T¿nsfÜm
(
ıBody
 *
body
, 
ıVeù
 
p
, 
ıFlßt
 
a
)

350 
ıVeù
 
rÙ
 = 
	`ıvfÜªgË
(
a
);

351 
ıVeù
 
c
 = 
body
->
cog
;

353 
body
->
ŒªsfÜm
 = 
	`ıT¿nsfÜmNewT¿n¥o£
(

354 
rÙ
.
x
, -rÙ.
y
, 
p
.x - (
c
.x*rot.x - c.y*rot.y),

355 
rÙ
.
y
,„Ù.
x
, 
p
.y - (
c
.x*rot.y + c.y*rot.x)

357 
	}
}

359 
šlše
 
ıFlßt


360 
	$S‘AngË
(
ıBody
 *
body
, 
ıFlßt
 
a
)

362 
body
->
a
 =‡;

363 
	`ıAs£¹SªeBody
(
body
);

365  
a
;

366 
	}
}

368 
ıVeù


369 
	$ıBodyG‘Pos™iÚ
(cÚ¡ 
ıBody
 *
body
)

371  
	`ıT¿nsfÜmPošt
(
body
->
ŒªsfÜm
, 
ıvz”o
);

372 
	}
}

375 
	$ıBodyS‘Pos™iÚ
(
ıBody
 *
body
, 
ıVeù
 
pos™iÚ
)

377 
	`ıBodyAùiv©e
(
body
);

378 
ıVeù
 
p
 = 
body
->°ğ
	`ıvadd
(
	`ıT¿nsfÜmVeù
(body->
ŒªsfÜm
, body->
cog
), 
pos™iÚ
);

379 
	`ıAs£¹SªeBody
(
body
);

381 
	`S‘T¿nsfÜm
(
body
, 
p
, body->
a
);

382 
	}
}

384 
ıVeù


385 
	$ıBodyG‘C’‹rOfG¿v™y
(cÚ¡ 
ıBody
 *
body
)

387  
body
->
cog
;

388 
	}
}

391 
	$ıBodyS‘C’‹rOfG¿v™y
(
ıBody
 *
body
, 
ıVeù
 
cog
)

393 
	`ıBodyAùiv©e
(
body
);

394 
body
->
cog
 = cog;

395 
	`ıAs£¹SªeBody
(
body
);

396 
	}
}

398 
ıVeù


399 
	$ıBodyG‘V–oc™y
(cÚ¡ 
ıBody
 *
body
)

401  
body
->
v
;

402 
	}
}

405 
	$ıBodyS‘V–oc™y
(
ıBody
 *
body
, 
ıVeù
 
v–oc™y
)

407 
	`ıBodyAùiv©e
(
body
);

408 
body
->
v
 = 
v–oc™y
;

409 
	`ıAs£¹SªeBody
(
body
);

410 
	}
}

412 
ıVeù


413 
	$ıBodyG‘FÜû
(cÚ¡ 
ıBody
 *
body
)

415  
body
->
f
;

416 
	}
}

419 
	$ıBodyS‘FÜû
(
ıBody
 *
body
, 
ıVeù
 
fÜû
)

421 
	`ıBodyAùiv©e
(
body
);

422 
body
->
f
 = 
fÜû
;

423 
	`ıAs£¹SªeBody
(
body
);

424 
	}
}

426 
ıFlßt


427 
	$ıBodyG‘AngË
(cÚ¡ 
ıBody
 *
body
)

429  
body
->
a
;

430 
	}
}

433 
	$ıBodyS‘AngË
(
ıBody
 *
body
, 
ıFlßt
 
ªgË
)

435 
	`ıBodyAùiv©e
(
body
);

436 
	`S‘AngË
(
body
, 
ªgË
);

438 
	`S‘T¿nsfÜm
(
body
, body->
p
, 
ªgË
);

439 
	}
}

441 
ıFlßt


442 
	$ıBodyG‘AnguÏrV–oc™y
(cÚ¡ 
ıBody
 *
body
)

444  
body
->
w
;

445 
	}
}

448 
	$ıBodyS‘AnguÏrV–oc™y
(
ıBody
 *
body
, 
ıFlßt
 
ªguÏrV–oc™y
)

450 
	`ıBodyAùiv©e
(
body
);

451 
body
->
w
 = 
ªguÏrV–oc™y
;

452 
	`ıAs£¹SªeBody
(
body
);

453 
	}
}

455 
ıFlßt


456 
	$ıBodyG‘TÜque
(cÚ¡ 
ıBody
 *
body
)

458  
body
->
t
;

459 
	}
}

462 
	$ıBodyS‘TÜque
(
ıBody
 *
body
, 
ıFlßt
 
tÜque
)

464 
	`ıBodyAùiv©e
(
body
);

465 
body
->
t
 = 
tÜque
;

466 
	`ıAs£¹SªeBody
(
body
);

467 
	}
}

469 
ıD©aPoš‹r


470 
	$ıBodyG‘U£rD©a
(cÚ¡ 
ıBody
 *
body
)

472  
body
->
u£rD©a
;

473 
	}
}

476 
	$ıBodyS‘U£rD©a
(
ıBody
 *
body
, 
ıD©aPoš‹r
 
u£rD©a
)

478 
body
->
u£rD©a
 = userData;

479 
	}
}

482 
	$ıBodyS‘V–oc™yUpd©eFunc
(
ıBody
 *
body
, 
ıBodyV–oc™yFunc
 
v–oc™yFunc
)

484 
body
->
v–oc™y_func
 = 
v–oc™yFunc
;

485 
	}
}

488 
	$ıBodyS‘Pos™iÚUpd©eFunc
(
ıBody
 *
body
, 
ıBodyPos™iÚFunc
 
pos™iÚFunc
)

490 
body
->
pos™iÚ_func
 = 
pos™iÚFunc
;

491 
	}
}

494 
	$ıBodyUpd©eV–oc™y
(
ıBody
 *
body
, 
ıVeù
 
g¿v™y
, 
ıFlßt
 
dampšg
, cpFlßˆ
dt
)

497 if(
	`ıBodyG‘Ty³
(
body
è=ğ
CP_BODY_TYPE_KINEMATIC
) ;

499 
	`ıAs£¹Soá
(
body
->
m
 > 0.0à&& body->
i
 > 0.0f, "Body's mass‡nd moment must be…ositiveo simulate. (Mass: %f Moment: %f)", body->m, body->i);

501 
body
->
v
 = 
	`ıvadd
(
	`ıvmuÉ
(body->v, 
dampšg
), cpvmuÉ(ıvadd(
g¿v™y
, cpvmuÉ(body->
f
, body->
m_šv
)), 
dt
));

502 
body
->
w
 = body->w*
dampšg
 + body->
t
*body->
i_šv
*
dt
;

505 
body
->
f
 = 
ıvz”o
;

506 
body
->
t
 = 0.0f;

508 
	`ıAs£¹SªeBody
(
body
);

509 
	}
}

512 
	$ıBodyUpd©ePos™iÚ
(
ıBody
 *
body
, 
ıFlßt
 
dt
)

514 
ıVeù
 
p
 = 
body
->°ğ
	`ıvadd
(body->p, 
	`ıvmuÉ
(ıvadd(body->
v
, body->
v_bŸs
), 
dt
));

515 
ıFlßt
 
a
 = 
	`S‘AngË
(
body
, body->¨+ (body->
w
 + body->
w_bŸs
)*
dt
);

516 
	`S‘T¿nsfÜm
(
body
, 
p
, 
a
);

518 
body
->
v_bŸs
 = 
ıvz”o
;

519 
body
->
w_bŸs
 = 0.0f;

521 
	`ıAs£¹SªeBody
(
body
);

522 
	}
}

524 
ıVeù


525 
	$ıBodyLoÿlToWÜld
(cÚ¡ 
ıBody
 *
body
, cÚ¡ 
ıVeù
 
pošt
)

527  
	`ıT¿nsfÜmPošt
(
body
->
ŒªsfÜm
, 
pošt
);

528 
	}
}

530 
ıVeù


531 
	$ıBodyWÜldToLoÿl
(cÚ¡ 
ıBody
 *
body
, cÚ¡ 
ıVeù
 
pošt
)

533  
	`ıT¿nsfÜmPošt
(
	`ıT¿nsfÜmRigidInv”£
(
body
->
ŒªsfÜm
), 
pošt
);

534 
	}
}

537 
	$ıBodyAµlyFÜûAtWÜldPošt
(
ıBody
 *
body
, 
ıVeù
 
fÜû
, cpVeù 
pošt
)

539 
	`ıBodyAùiv©e
(
body
);

540 
body
->
f
 = 
	`ıvadd
(body->f, 
fÜû
);

542 
ıVeù
 
r
 = 
	`ıvsub
(
pošt
, 
	`ıT¿nsfÜmPošt
(
body
->
ŒªsfÜm
, body->
cog
));

543 
body
->
t
 +ğ
	`ıvüoss
(
r
, 
fÜû
);

544 
	}
}

547 
	$ıBodyAµlyFÜûAtLoÿlPošt
(
ıBody
 *
body
, 
ıVeù
 
fÜû
, cpVeù 
pošt
)

549 
	`ıBodyAµlyFÜûAtWÜldPošt
(
body
, 
	`ıT¿nsfÜmVeù
(body->
ŒªsfÜm
, 
fÜû
), 
	`ıT¿nsfÜmPošt
(body->ŒªsfÜm, 
pošt
));

550 
	}
}

553 
	$ıBodyAµlyImpul£AtWÜldPošt
(
ıBody
 *
body
, 
ıVeù
 
impul£
, cpVeù 
pošt
)

555 
	`ıBodyAùiv©e
(
body
);

557 
ıVeù
 
r
 = 
	`ıvsub
(
pošt
, 
	`ıT¿nsfÜmPošt
(
body
->
ŒªsfÜm
, body->
cog
));

558 
	`­¶y_impul£
(
body
, 
impul£
, 
r
);

559 
	}
}

562 
	$ıBodyAµlyImpul£AtLoÿlPošt
(
ıBody
 *
body
, 
ıVeù
 
impul£
, cpVeù 
pošt
)

564 
	`ıBodyAµlyImpul£AtWÜldPošt
(
body
, 
	`ıT¿nsfÜmVeù
(body->
ŒªsfÜm
, 
impul£
), 
	`ıT¿nsfÜmPošt
(body->ŒªsfÜm, 
pošt
));

565 
	}
}

567 
ıVeù


568 
	$ıBodyG‘V–oc™yAtLoÿlPošt
(cÚ¡ 
ıBody
 *
body
, 
ıVeù
 
pošt
)

570 
ıVeù
 
r
 = 
	`ıT¿nsfÜmVeù
(
body
->
ŒªsfÜm
, 
	`ıvsub
(
pošt
, body->
cog
));

571  
	`ıvadd
(
body
->
v
, 
	`ıvmuÉ
(
	`ıv³½
(
r
), body->
w
));

572 
	}
}

574 
ıVeù


575 
	$ıBodyG‘V–oc™yAtWÜldPošt
(cÚ¡ 
ıBody
 *
body
, 
ıVeù
 
pošt
)

577 
ıVeù
 
r
 = 
	`ıvsub
(
pošt
, 
	`ıT¿nsfÜmPošt
(
body
->
ŒªsfÜm
, body->
cog
));

578  
	`ıvadd
(
body
->
v
, 
	`ıvmuÉ
(
	`ıv³½
(
r
), body->
w
));

579 
	}
}

581 
ıFlßt


582 
	$ıBodyKš‘icEÃrgy
(cÚ¡ 
ıBody
 *
body
)

585 
ıFlßt
 
vsq
 = 
	`ıvdÙ
(
body
->
v
, body->v);

586 
ıFlßt
 
wsq
 = 
body
->
w
*body->w;

587  (
vsq
 ? vsq*
body
->
m
 : 0.0fè+ (
wsq
 ? wsq*body->
i
 : 0.0f);

588 
	}
}

591 
	$ıBodyEachSh­e
(
ıBody
 *
body
, 
ıBodySh­eI‹¿tÜFunc
 
func
, *
d©a
)

593 
ıSh­e
 *
sh­e
 = 
body
->
sh­eLi¡
;

594 
sh­e
){

595 
ıSh­e
 *
Ãxt
 = 
sh­e
->next;

596 
	`func
(
body
, 
sh­e
, 
d©a
);

597 
sh­e
 = 
Ãxt
;

599 
	}
}

602 
	$ıBodyEachCÚ¡¿št
(
ıBody
 *
body
, 
ıBodyCÚ¡¿štI‹¿tÜFunc
 
func
, *
d©a
)

604 
ıCÚ¡¿št
 *
cÚ¡¿št
 = 
body
->
cÚ¡¿štLi¡
;

605 
cÚ¡¿št
){

606 
ıCÚ¡¿št
 *
Ãxt
 = 
	`ıCÚ¡¿štNext
(
cÚ¡¿št
, 
body
);

607 
	`func
(
body
, 
cÚ¡¿št
, 
d©a
);

608 
cÚ¡¿št
 = 
Ãxt
;

610 
	}
}

613 
	$ıBodyEachArb™”
(
ıBody
 *
body
, 
ıBodyArb™”I‹¿tÜFunc
 
func
, *
d©a
)

615 
ıArb™”
 *
¬b
 = 
body
->
¬b™”Li¡
;

616 
¬b
){

617 
ıArb™”
 *
Ãxt
 = 
	`ıArb™”Next
(
¬b
, 
body
);

619 
ıBoŞ
 
sw­³d
 = 
¬b
->swapped; {

620 
¬b
->
sw­³d
 = (
body
 =ğ¬b->
body_b
);

621 
	`func
(
body
, 
¬b
, 
d©a
);

622 } 
¬b
->
sw­³d
 = swapped;

624 
¬b
 = 
Ãxt
;

626 
	}
}

	@../src/chipmunk/cpCollision.c

22 
	~<¡dio.h
>

23 
	~<¡ršg.h
>

25 
	~"chmunk/chmunk_´iv©e.h
"

26 
	~"chmunk/ıRobu¡.h
"

28 #ià
DEBUG
 && 0

29 
	~"ChmunkDemo.h
"

30 
	#DRAW_ALL
 0

	)

31 
	#DRAW_GJK
 (0 || 
DRAW_ALL
)

	)

32 
	#DRAW_EPA
 (0 || 
DRAW_ALL
)

	)

33 
	#DRAW_CLOSEST
 (0 || 
DRAW_ALL
)

	)

34 
	#DRAW_CLIP
 (0 || 
DRAW_ALL
)

	)

36 
	#PRINT_LOG
 0

	)

39 
	#MAX_GJK_ITERATIONS
 30

	)

40 
	#MAX_EPA_ITERATIONS
 30

	)

41 
	#WARN_GJK_ITERATIONS
 20

	)

42 
	#WARN_EPA_ITERATIONS
 20

	)

44 
šlše
 

45 
	$ıCŞlisiÚInfoPushCÚù
(
ıCŞlisiÚInfo
 *
šfo
, 
ıVeù
 
p1
, cpVeù 
p2
, 
ıHashV®ue
 
hash
)

47 
	`ıAs£¹Soá
(
šfo
->
couÁ
 <ğ
CP_MAX_CONTACTS_PER_ARBITER
, "Internalƒrror: Triedo…ushoo many contacts.");

49 
ıCÚù
 *
cÚ
 = &
šfo
->
¬r
[šfo->
couÁ
];

50 
cÚ
->
r1
 = 
p1
;

51 
cÚ
->
r2
 = 
p2
;

52 
cÚ
->
hash
 = hash;

54 
šfo
->
couÁ
++;

55 
	}
}

62 
šlše
 

63 
	$PŞySuµÜtPoštIndex
(cÚ¡ 
couÁ
, cÚ¡ 
ıS¶™tšgPÏÃ
 *
¶ªes
, cÚ¡ 
ıVeù
 
n
)

65 
ıFlßt
 
max
 = -
INFINITY
;

66 
šdex
 = 0;

68 
i
=0; i<
couÁ
; i++){

69 
ıVeù
 
v
 = 
¶ªes
[
i
].
v0
;

70 
ıFlßt
 
d
 = 
	`ıvdÙ
(
v
, 
n
);

71 if(
d
 > 
max
){

72 
max
 = 
d
;

73 
šdex
 = 
i
;

77  
šdex
;

78 
	}
}

80 
	sSuµÜtPošt
 {

81 
ıVeù
 
	mp
;

83 
ıCŞlisiÚID
 
	mšdex
;

86 
šlše
 
SuµÜtPošt


87 
	$SuµÜtPoštNew
(
ıVeù
 
p
, 
ıCŞlisiÚID
 
šdex
)

89 
SuµÜtPošt
 
pošt
 = {
p
, 
šdex
};

90  
pošt
;

91 
	}
}

93 
	$SuµÜtPošt
 (*
	tSuµÜtPoštFunc
)(cÚ¡ 
	tıSh­e
 *
	tsh­e
, cÚ¡ 
	tıVeù
 
	tn
);

95 
šlše
 
SuµÜtPošt


96 
	$CœşeSuµÜtPošt
(cÚ¡ 
ıCœşeSh­e
 *
cœşe
, cÚ¡ 
ıVeù
 
n
)

98  
	`SuµÜtPoštNew
(
cœşe
->
tc
, 0);

99 
	}
}

101 
šlše
 
SuµÜtPošt


102 
	$Segm’tSuµÜtPošt
(cÚ¡ 
ıSegm’tSh­e
 *
£g
, cÚ¡ 
ıVeù
 
n
)

104 if(
	`ıvdÙ
(
£g
->

, 
n
è> cpvdÙ(£g->
tb
,‚)){

105  
	`SuµÜtPoštNew
(
£g
->

, 0);

107  
	`SuµÜtPoštNew
(
£g
->
tb
, 1);

109 
	}
}

111 
šlše
 
SuµÜtPošt


112 
	$PŞySuµÜtPošt
(cÚ¡ 
ıPŞySh­e
 *
pŞy
, cÚ¡ 
ıVeù
 
n
)

114 cÚ¡ 
ıS¶™tšgPÏÃ
 *
¶ªes
 = 
pŞy
->planes;

115 
i
 = 
	`PŞySuµÜtPoštIndex
(
pŞy
->
couÁ
, 
¶ªes
, 
n
);

116  
	`SuµÜtPoštNew
(
¶ªes
[
i
].
v0
, i);

117 
	}
}

120 
	sMškowskiPošt
 {

122 
ıVeù
 
	ma
, 
	mb
;

124 
ıVeù
 
	mab
;

126 
ıCŞlisiÚID
 
	mid
;

129 
šlše
 
MškowskiPošt


130 
	$MškowskiPoštNew
(cÚ¡ 
SuµÜtPošt
 
a
, cÚ¡ SuµÜtPošˆ
b
)

132 
MškowskiPošt
 
pošt
 = {
a
.
p
, 
b
.p, 
	`ıvsub
(b.p,‡.p), (a.
šdex
 & 0xFF)<<8 | (b.index & 0xFF)};

133  
pošt
;

134 
	}
}

136 
	sSuµÜtCÚ‹xt
 {

137 cÚ¡ 
ıSh­e
 *
	msh­e1
, *
	msh­e2
;

138 
SuµÜtPoštFunc
 
	mfunc1
, 
	mfunc2
;

142 
šlše
 
MškowskiPošt


143 
	$SuµÜt
(cÚ¡ 
SuµÜtCÚ‹xt
 *
ùx
, cÚ¡ 
ıVeù
 
n
)

145 
SuµÜtPošt
 
a
 = 
ùx
->
	`func1
(ùx->
sh­e1
, 
	`ıvÃg
(
n
));

146 
SuµÜtPošt
 
b
 = 
ùx
->
	`func2
(ùx->
sh­e2
, 
n
);

147  
	`MškowskiPoštNew
(
a
, 
b
);

148 
	}
}

150 
	sEdgePošt
 {

151 
ıVeù
 
	mp
;

153 
ıHashV®ue
 
	mhash
;

157 
	sEdge
 {

158 
EdgePošt
 
	ma
, 
	mb
;

159 
ıFlßt
 
	mr
;

160 
ıVeù
 
	mn
;

163 
Edge


164 
	$SuµÜtEdgeFÜPŞy
(cÚ¡ 
ıPŞySh­e
 *
pŞy
, cÚ¡ 
ıVeù
 
n
)

166 
couÁ
 = 
pŞy
->count;

167 
i1
 = 
	`PŞySuµÜtPoštIndex
(
pŞy
->
couÁ
,…Şy->
¶ªes
, 
n
);

170 
i0
 = (
i1
 - 1 + 
couÁ
)%count;

171 
i2
 = (
i1
 + 1)%
couÁ
;

173 cÚ¡ 
ıS¶™tšgPÏÃ
 *
¶ªes
 = 
pŞy
->planes;

174 
ıHashV®ue
 
hashid
 = 
pŞy
->
sh­e
.hashid;

175 if(
	`ıvdÙ
(
n
, 
¶ªes
[
i1
].nè> cpvdÙÒ,…ÏÃs[
i2
].n)){

176 
Edge
 
edge
 = {{
¶ªes
[
i0
].
v0
, 
	`CP_HASH_PAIR
(
hashid
, i0)}, {¶ªes[
i1
].v0, CP_HASH_PAIR(hashid, i1)}, 
pŞy
->
r
,…ÏÃs[i1].
n
};

177  
edge
;

179 
Edge
 
edge
 = {{
¶ªes
[
i1
].
v0
, 
	`CP_HASH_PAIR
(
hashid
, i1)}, {¶ªes[
i2
].v0, CP_HASH_PAIR(hashid, i2)}, 
pŞy
->
r
,…ÏÃs[i2].
n
};

180  
edge
;

182 
	}
}

184 
Edge


185 
	$SuµÜtEdgeFÜSegm’t
(cÚ¡ 
ıSegm’tSh­e
 *
£g
, cÚ¡ 
ıVeù
 
n
)

187 
ıHashV®ue
 
hashid
 = 
£g
->
sh­e
.hashid;

188 if(
	`ıvdÙ
(
£g
->
Š
, 
n
) > 0.0){

189 
Edge
 
edge
 = {{
£g
->

, 
	`CP_HASH_PAIR
(
hashid
, 0)}, {£g->
tb
, CP_HASH_PAIR(hashid, 1)}, seg->
r
, seg->
Š
};

190  
edge
;

192 
Edge
 
edge
 = {{
£g
->
tb
, 
	`CP_HASH_PAIR
(
hashid
, 1)}, {£g->

, CP_HASH_PAIR(hashid, 0)}, seg->
r
, 
	`ıvÃg
(£g->
Š
)};

193  
edge
;

195 
	}
}

199 
šlše
 
ıFlßt


200 
	$Clo£¡T
(cÚ¡ 
ıVeù
 
a
, cÚ¡ cpVeù 
b
)

202 
ıVeù
 
d–
 = 
	`ıvsub
(
b
, 
a
);

203  -
	`ıfşamp
(
	`ıvdÙ
(
d–
, 
	`ıvadd
(
a
, 
b
))/
	`ıvËngthsq
(delta), -1.0f, 1.0f);

204 
	}
}

207 
šlše
 
ıVeù


208 
	$L”pT
(cÚ¡ 
ıVeù
 
a
, cÚ¡ cpVeù 
b
, cÚ¡ 
ıFlßt
 
t
)

210 
ıFlßt
 
ht
 = 0.5f*
t
;

211  
	`ıvadd
(
	`ıvmuÉ
(
a
, 0.5à- 
ht
), cpvmuÉ(
b
, 0.5f + ht));

212 
	}
}

215 
	sClo£¡Pošts
 {

217 
ıVeù
 
	ma
, 
	mb
;

219 
ıVeù
 
	mn
;

221 
ıFlßt
 
	md
;

223 
ıCŞlisiÚID
 
	mid
;

227 
šlše
 
Clo£¡Pošts


228 
	$Clo£¡PoštsNew
(cÚ¡ 
MškowskiPošt
 
v0
, cÚ¡ MškowskiPošˆ
v1
)

231 
ıFlßt
 
t
 = 
	`Clo£¡T
(
v0
.
ab
, 
v1
.ab);

232 
ıVeù
 
p
 = 
	`L”pT
(
v0
.
ab
, 
v1
.ab, 
t
);

236 
ıVeù
 
·
 = 
	`L”pT
(
v0
.
a
, 
v1
.a, 
t
);

237 
ıVeù
 
pb
 = 
	`L”pT
(
v0
.
b
, 
v1
.b, 
t
);

238 
ıCŞlisiÚID
 
id
 = (
v0
.id & 0xFFFF)<<16 | (
v1
.id & 0xFFFF);

242 
ıVeù
 
d–
 = 
	`ıvsub
(
v1
.
ab
, 
v0
.ab);

243 
ıVeù
 
n
 = 
	`ıvnÜm®ize
(
	`ıv½”p
(
d–
));

244 
ıFlßt
 
d
 = 
	`ıvdÙ
(
n
, 
p
);

246 if(
d
 <ğ0.0à|| (-1.0à< 
t
 && < 1.0f)){

248 
Clo£¡Pošts
 
pošts
 = {
·
, 
pb
, 
n
, 
d
, 
id
};

249  
pošts
;

252 
ıFlßt
 
d2
 = 
	`ıvËngth
(
p
);

253 
ıVeù
 
n2
 = 
	`ıvmuÉ
(
p
, 1.0f/(
d2
 + 
CPFLOAT_MIN
));

255 
Clo£¡Pošts
 
pošts
 = {
·
, 
pb
, 
n2
, 
d2
, 
id
};

256  
pošts
;

258 
	}
}

262 
šlše
 
ıFlßt


263 
	$Clo£¡Di¡
(cÚ¡ 
ıVeù
 
v0
,cÚ¡ cpVeù 
v1
)

265  
	`ıvËngthsq
(
	`L”pT
(
v0
, 
v1
, 
	`Clo£¡T
(v0, v1)));

266 
	}
}

270 
Clo£¡Pošts


271 
	$EPARecur£
(cÚ¡ 
SuµÜtCÚ‹xt
 *
ùx
, cÚ¡ 
couÁ
, cÚ¡ 
MškowskiPošt
 *
huÎ
, cÚ¡ 
™”©iÚ
)

273 
mši
 = 0;

274 
ıFlßt
 
mšDi¡
 = 
INFINITY
;

278 
j
=0, 
i
=
couÁ
-1; j<count; i=j, j++){

279 
ıFlßt
 
d
 = 
	`Clo£¡Di¡
(
huÎ
[
i
].
ab
, huÎ[
j
].ab);

280 if(
d
 < 
mšDi¡
){

281 
mšDi¡
 = 
d
;

282 
mši
 = 
i
;

286 
MškowskiPošt
 
v0
 = 
huÎ
[
mši
];

287 
MškowskiPošt
 
v1
 = 
huÎ
[(
mši
 + 1)%
couÁ
];

288 
	`ıAs£¹Soá
(!
	`ıveql
(
v0
.
ab
, 
v1
.ab), "IÁ”ÇÈE¼Ü: EPA v”‹xe ¬th§m(%d‡nd %d)", 
mši
, (mš˜+ 1)%
couÁ
);

291 
MškowskiPošt
 
p
 = 
	`SuµÜt
(
ùx
, 
	`ıv³½
(
	`ıvsub
(
v1
.
ab
, 
v0
.ab)));

293 #ià
DRAW_EPA


294 
ıVeù
 
v”ts
[
couÁ
];

295 
i
=0; i<
couÁ
; i++è
v”ts
[i] = 
huÎ
[i].
ab
;

297 
	`ChmunkDebugD¿wPŞygÚ
(
couÁ
, 
v”ts
, 0.0, 
	`RGBACŞÜ
(1, 1, 0, 1), RGBAColor(1, 1, 0, 0.25));

298 
	`ChmunkDebugD¿wSegm’t
(
v0
.
ab
, 
v1
.ab, 
	`RGBACŞÜ
(1, 0, 0, 1));

300 
	`ChmunkDebugD¿wDÙ
(5, 
p
.
ab
, 
	`LACŞÜ
(1, 1));

305 
ıBoŞ
 
du¶iÿ‹
 = (
p
.
id
 =ğ
v0
.id ||….id =ğ
v1
.id);

307 if(!
du¶iÿ‹
 && 
	`ıCheckPoštG»©”
(
v0
.
ab
, 
v1
.ab, 
p
.abè&& 
™”©iÚ
 < 
MAX_EPA_ITERATIONS
){

309 
MškowskiPošt
 *
huÎ2
 = (MškowskiPošˆ*)
	`®loÿ
((
couÁ
 + 1)*(MinkowskiPoint));

310 
couÁ2
 = 1;

311 
huÎ2
[0] = 
p
;

313 
i
=0; i<
couÁ
; i++){

314 
šdex
 = (
mši
 + 1 + 
i
)%
couÁ
;

316 
ıVeù
 
h0
 = 
huÎ2
[
couÁ2
 - 1].
ab
;

317 
ıVeù
 
h1
 = 
huÎ
[
šdex
].
ab
;

318 
ıVeù
 
h2
 = (
i
 + 1 < 
couÁ
 ? 
huÎ
[(
šdex
 + 1)%couÁ] : 
p
).
ab
;

320 if(
	`ıCheckPoštG»©”
(
h0
, 
h2
, 
h1
)){

321 
huÎ2
[
couÁ2
] = 
huÎ
[
šdex
];

322 
couÁ2
++;

326  
	`EPARecur£
(
ùx
, 
couÁ2
, 
huÎ2
, 
™”©iÚ
 + 1);

329 
	`ıAs£¹W¬n
(
™”©iÚ
 < 
WARN_EPA_ITERATIONS
, "High EPA iterations: %d", iteration);

330  
	`Clo£¡PoštsNew
(
v0
, 
v1
);

332 
	}
}

337 
Clo£¡Pošts


338 
	$EPA
(cÚ¡ 
SuµÜtCÚ‹xt
 *
ùx
, cÚ¡ 
MškowskiPošt
 
v0
, cÚ¡ MškowskiPošˆ
v1
, cÚ¡ MškowskiPošˆ
v2
)

341 
MškowskiPošt
 
huÎ
[3] = {
v0
, 
v1
, 
v2
};

342  
	`EPARecur£
(
ùx
, 3, 
huÎ
, 1);

343 
	}
}

348 
šlše
 
Clo£¡Pošts


349 
	$GJKRecur£
(cÚ¡ 
SuµÜtCÚ‹xt
 *
ùx
, cÚ¡ 
MškowskiPošt
 
v0
, cÚ¡ MškowskiPošˆ
v1
, cÚ¡ 
™”©iÚ
)

351 if(
™”©iÚ
 > 
MAX_GJK_ITERATIONS
){

352 
	`ıAs£¹W¬n
(
™”©iÚ
 < 
WARN_GJK_ITERATIONS
, "High GJK iterations: %d", iteration);

353  
	`Clo£¡PoštsNew
(
v0
, 
v1
);

356 if(
	`ıCheckPoštG»©”
(
v1
.
ab
, 
v0
.ab, 
ıvz”o
)){

358  
	`GJKRecur£
(
ùx
, 
v1
, 
v0
, 
™”©iÚ
);

360 
ıFlßt
 
t
 = 
	`Clo£¡T
(
v0
.
ab
, 
v1
.ab);

361 
ıVeù
 
n
 = (-1.0à< 
t
 && < 1.0à? 
	`ıv³½
(
	`ıvsub
(
v1
.
ab
, 
v0
.ab)è: 
	`ıvÃg
(
	`L”pT
(v0.ab, v1.ab,)));

362 
MškowskiPošt
 
p
 = 
	`SuµÜt
(
ùx
, 
n
);

364 #ià
DRAW_GJK


365 
	`ChmunkDebugD¿wSegm’t
(
v0
.
ab
, 
v1
.ab, 
	`RGBACŞÜ
(1, 1, 1, 1));

366 
ıVeù
 
c
 = 
	`ıvË½
(
v0
.
ab
, 
v1
.ab, 0.5);

367 
	`ChmunkDebugD¿wSegm’t
(
c
, 
	`ıvadd
(c, 
	`ıvmuÉ
(
	`ıvnÜm®ize
(
n
), 5.0)), 
	`RGBACŞÜ
(1, 0, 0, 1));

369 
	`ChmunkDebugD¿wDÙ
(5.0, 
p
.
ab
, 
	`LACŞÜ
(1, 1));

372 if(
	`ıCheckPoštG»©”
(
p
.
ab
, 
v0
.ab, 
ıvz”o
è&& cpCheckPoštG»©”(
v1
.ab,….ab, cpvzero)){

374 
	`ıAs£¹W¬n
(
™”©iÚ
 < 
WARN_GJK_ITERATIONS
, "High GJK->EPA iterations: %d", iteration);

375  
	`EPA
(
ùx
, 
v0
, 
p
, 
v1
);

377 if(
	`ıCheckAxis
(
v0
.
ab
, 
v1
.ab, 
p
.ab, 
n
)){

379 
	`ıAs£¹W¬n
(
™”©iÚ
 < 
WARN_GJK_ITERATIONS
, "High GJK iterations: %d", iteration);

380  
	`Clo£¡PoštsNew
(
v0
, 
v1
);

384 if(
	`Clo£¡Di¡
(
v0
.
ab
, 
p
.abè< Clo£¡Di¡Õ.ab, 
v1
.ab)){

385  
	`GJKRecur£
(
ùx
, 
v0
, 
p
, 
™”©iÚ
 + 1);

387  
	`GJKRecur£
(
ùx
, 
p
, 
v1
, 
™”©iÚ
 + 1);

392 
	}
}

395 
SuµÜtPošt


396 
	$Sh­ePošt
(cÚ¡ 
ıSh­e
 *
sh­e
, cÚ¡ 
i
)

398 
sh­e
->
kÏss
->
ty³
){

399 
CP_CIRCLE_SHAPE
: {

400  
	`SuµÜtPoštNew
(((
ıCœşeSh­e
 *)
sh­e
)->
tc
, 0);

401 } 
CP_SEGMENT_SHAPE
: {

402 
ıSegm’tSh­e
 *
£g
 = (ıSegm’tSh­*)
sh­e
;

403  
	`SuµÜtPoštNew
(
i
 =ğ0 ? 
£g
->

 : seg->
tb
, i);

404 } 
CP_POLY_SHAPE
: {

405 
ıPŞySh­e
 *
pŞy
 = (ıPŞySh­*)
sh­e
;

407 
šdex
 = (
i
 < 
pŞy
->
couÁ
 ? i : 0);

408  
	`SuµÜtPoštNew
(
pŞy
->
¶ªes
[
šdex
].
v0
, index);

410  
	`SuµÜtPoštNew
(
ıvz”o
, 0);

413 
	}
}

416 
Clo£¡Pošts


417 
	$GJK
(cÚ¡ 
SuµÜtCÚ‹xt
 *
ùx
, 
ıCŞlisiÚID
 *
id
)

419 #ià
DRAW_GJK
 || 
DRAW_EPA


420 
couÁ1
 = 1;

421 
couÁ2
 = 1;

423 
ùx
->
sh­e1
->
kÏss
->
ty³
){

424 
CP_SEGMENT_SHAPE
: 
couÁ1
 = 2; ;

425 
CP_POLY_SHAPE
: 
couÁ1
 = ((
ıPŞySh­e
 *)
ùx
->
sh­e1
)->
couÁ
; ;

429 
ùx
->
sh­e2
->
kÏss
->
ty³
){

430 
CP_SEGMENT_SHAPE
: 
couÁ1
 = 2; ;

431 
CP_POLY_SHAPE
: 
couÁ2
 = ((
ıPŞySh­e
 *)
ùx
->
sh­e2
)->
couÁ
; ;

437 
ıVeù
 
Üigš
 = 
ıvz”o
;

438 
	`ChmunkDebugD¿wDÙ
(5.0, 
Üigš
, 
	`RGBACŞÜ
(1,0,0,1));

440 
mdiffCouÁ
 = 
couÁ1
*
couÁ2
;

441 
ıVeù
 *
mdiffV”ts
 = 
	`®loÿ
(
mdiffCouÁ
*(cpVect));

443 
i
=0; i<
couÁ1
; i++){

444 
j
=0; j<
couÁ2
; j++){

445 
ıVeù
 
v
 = 
	`ıvsub
(
	`Sh­ePošt
(
ùx
->
sh­e2
, 
j
).
p
, Sh­ePošt(ùx->
sh­e1
, 
i
).p);

446 
mdiffV”ts
[
i
*
couÁ2
 + 
j
] = 
v
;

447 
	`ChmunkDebugD¿wDÙ
(2.0, 
v
, 
	`RGBACŞÜ
(1, 0, 0, 1));

451 
ıVeù
 *
huÎV”ts
 = 
	`®loÿ
(
mdiffCouÁ
*(cpVect));

452 
huÎCouÁ
 = 
	`ıCÚvexHuÎ
(
mdiffCouÁ
, 
mdiffV”ts
, 
huÎV”ts
, 
NULL
, 0.0);

454 
	`ChmunkDebugD¿wPŞygÚ
(
huÎCouÁ
, 
huÎV”ts
, 0.0, 
	`RGBACŞÜ
(1, 0, 0, 1), RGBAColor(1, 0, 0, 0.25));

457 
MškowskiPošt
 
v0
, 
v1
;

458 if(*
id
){

460 
v0
 = 
	`MškowskiPoštNew
(
	`Sh­ePošt
(
ùx
->
sh­e1
, (*
id
>>24)&0xFF), Sh­ePošt(ùx->
sh­e2
, (*id>>16)&0xFF));

461 
v1
 = 
	`MškowskiPoštNew
(
	`Sh­ePošt
(
ùx
->
sh­e1
, (*
id
>> 8)&0xFF), Sh­ePošt(ùx->
sh­e2
, (*id )&0xFF));

464 
ıVeù
 
axis
 = 
	`ıv³½
(
	`ıvsub
(
	`ıBBC’‹r
(
ùx
->
sh­e1
->
bb
), cpBBC’‹r(ùx->
sh­e2
->bb)));

465 
v0
 = 
	`SuµÜt
(
ùx
, 
axis
);

466 
v1
 = 
	`SuµÜt
(
ùx
, 
	`ıvÃg
(
axis
));

469 
Clo£¡Pošts
 
pošts
 = 
	`GJKRecur£
(
ùx
, 
v0
, 
v1
, 1);

470 *
id
 = 
pošts
.id;

471  
pošts
;

472 
	}
}

477 
šlše
 

478 
	$CÚùPošts
(cÚ¡ 
Edge
 
e1
, cÚ¡ Edg
e2
, cÚ¡ 
Clo£¡Pošts
 
pošts
, 
ıCŞlisiÚInfo
 *
šfo
)

480 
ıFlßt
 
mšdi¡
 = 
e1
.
r
 + 
e2
.r;

481 if(
pošts
.
d
 <ğ
mšdi¡
){

482 #ifdeà
DRAW_CLIP


483 
	`ChmunkDebugD¿wF©Segm’t
(
e1
.
a
.
p
,ƒ1.
b
.p,ƒ1.
r
, 
	`RGBACŞÜ
(0, 1, 0, 1), 
	`LACŞÜ
(0, 0));

484 
	`ChmunkDebugD¿wF©Segm’t
(
e2
.
a
.
p
,ƒ2.
b
.p,ƒ2.
r
, 
	`RGBACŞÜ
(1, 0, 0, 1), 
	`LACŞÜ
(0, 0));

486 
ıVeù
 
n
 = 
šfo
->Àğ
pošts
.n;

489 
ıFlßt
 
d_e1_a
 = 
	`ıvüoss
(
e1
.
a
.
p
, 
n
);

490 
ıFlßt
 
d_e1_b
 = 
	`ıvüoss
(
e1
.
b
.
p
, 
n
);

491 
ıFlßt
 
d_e2_a
 = 
	`ıvüoss
(
e2
.
a
.
p
, 
n
);

492 
ıFlßt
 
d_e2_b
 = 
	`ıvüoss
(
e2
.
b
.
p
, 
n
);

495 
ıFlßt
 
e1_d’om
 = 1.0f/(
d_e1_b
 - 
d_e1_a
 + 
CPFLOAT_MIN
);

496 
ıFlßt
 
e2_d’om
 = 1.0f/(
d_e2_b
 - 
d_e2_a
 + 
CPFLOAT_MIN
);

501 
ıVeù
 
p1
 = 
	`ıvadd
(
	`ıvmuÉ
(
n
, 
e1
.
r
), 
	`ıvË½
Ó1.
a
.
p
,ƒ1.
b
.p, 
	`ıfşamp01
((
d_e2_b
 - 
d_e1_a
)*
e1_d’om
)));

502 
ıVeù
 
p2
 = 
	`ıvadd
(
	`ıvmuÉ
(
n
, -
e2
.
r
), 
	`ıvË½
Ó2.
a
.
p
,ƒ2.
b
.p, 
	`ıfşamp01
((
d_e1_a
 - 
d_e2_a
)*
e2_d’om
)));

503 
ıFlßt
 
di¡
 = 
	`ıvdÙ
(
	`ıvsub
(
p2
, 
p1
), 
n
);

504 if(
di¡
 <= 0.0f){

505 
ıHashV®ue
 
hash_1a2b
 = 
	`CP_HASH_PAIR
(
e1
.
a
.
hash
, 
e2
.
b
.hash);

506 
	`ıCŞlisiÚInfoPushCÚù
(
šfo
, 
p1
, 
p2
, 
hash_1a2b
);

509 
ıVeù
 
p1
 = 
	`ıvadd
(
	`ıvmuÉ
(
n
, 
e1
.
r
), 
	`ıvË½
Ó1.
a
.
p
,ƒ1.
b
.p, 
	`ıfşamp01
((
d_e2_a
 - 
d_e1_a
)*
e1_d’om
)));

510 
ıVeù
 
p2
 = 
	`ıvadd
(
	`ıvmuÉ
(
n
, -
e2
.
r
), 
	`ıvË½
Ó2.
a
.
p
,ƒ2.
b
.p, 
	`ıfşamp01
((
d_e1_b
 - 
d_e2_a
)*
e2_d’om
)));

511 
ıFlßt
 
di¡
 = 
	`ıvdÙ
(
	`ıvsub
(
p2
, 
p1
), 
n
);

512 if(
di¡
 <= 0.0f){

513 
ıHashV®ue
 
hash_1b2a
 = 
	`CP_HASH_PAIR
(
e1
.
b
.
hash
, 
e2
.
a
.hash);

514 
	`ıCŞlisiÚInfoPushCÚù
(
šfo
, 
p1
, 
p2
, 
hash_1b2a
);

518 
	}
}

522 (*
	tCŞlisiÚFunc
)(cÚ¡ 
	tıSh­e
 *
	ta
, cÚ¡ cpSh­*
	tb
, 
	tıCŞlisiÚInfo
 *
	tšfo
);

526 
	$CœşeToCœşe
(cÚ¡ 
ıCœşeSh­e
 *
c1
, cÚ¡ cpCœşeSh­*
c2
, 
ıCŞlisiÚInfo
 *
šfo
)

528 
ıFlßt
 
mšdi¡
 = 
c1
->
r
 + 
c2
->r;

529 
ıVeù
 
d–
 = 
	`ıvsub
(
c2
->
tc
, 
c1
->tc);

530 
ıFlßt
 
di¡sq
 = 
	`ıvËngthsq
(
d–
);

532 if(
di¡sq
 < 
mšdi¡
*mindist){

533 
ıFlßt
 
di¡
 = 
	`ıfsq¹
(
di¡sq
);

534 
ıVeù
 
n
 = 
šfo
->Àğ(
di¡
 ? 
	`ıvmuÉ
(
d–
, 1.0f/di¡è: 
	`ıv
(1.0f, 0.0f));

535 
	`ıCŞlisiÚInfoPushCÚù
(
šfo
, 
	`ıvadd
(
c1
->
tc
, 
	`ıvmuÉ
(
n
, c1->
r
)), cpvadd(
c2
->tc, cpvmult(n, -c2->r)), 0);

537 
	}
}

540 
	$CœşeToSegm’t
(cÚ¡ 
ıCœşeSh­e
 *
cœşe
, cÚ¡ 
ıSegm’tSh­e
 *
£gm’t
, 
ıCŞlisiÚInfo
 *
šfo
)

542 
ıVeù
 
£g_a
 = 
£gm’t
->

;

543 
ıVeù
 
£g_b
 = 
£gm’t
->
tb
;

544 
ıVeù
 
ûÁ”
 = 
cœşe
->
tc
;

547 
ıVeù
 
£g_d–
 = 
	`ıvsub
(
£g_b
, 
£g_a
);

548 
ıFlßt
 
şo£¡_t
 = 
	`ıfşamp01
(
	`ıvdÙ
(
£g_d–
, 
	`ıvsub
(
ûÁ”
, 
£g_a
))/
	`ıvËngthsq
(seg_delta));

549 
ıVeù
 
şo£¡
 = 
	`ıvadd
(
£g_a
, 
	`ıvmuÉ
(
£g_d–
, 
şo£¡_t
));

552 
ıFlßt
 
mšdi¡
 = 
cœşe
->
r
 + 
£gm’t
->r;

553 
ıVeù
 
d–
 = 
	`ıvsub
(
şo£¡
, 
ûÁ”
);

554 
ıFlßt
 
di¡sq
 = 
	`ıvËngthsq
(
d–
);

555 if(
di¡sq
 < 
mšdi¡
*mindist){

556 
ıFlßt
 
di¡
 = 
	`ıfsq¹
(
di¡sq
);

558 
ıVeù
 
n
 = 
šfo
->Àğ(
di¡
 ? 
	`ıvmuÉ
(
d–
, 1.0f/di¡è: 
£gm’t
->
Š
);

561 
ıVeù
 
rÙ
 = 
	`ıBodyG‘RÙ©iÚ
(
£gm’t
->
sh­e
.
body
);

563 (
şo£¡_t
 !ğ0.0à|| 
	`ıvdÙ
(
n
, 
	`ıvrÙ©e
(
£gm’t
->
a_ng’t
, 
rÙ
)) >= 0.0) &&

564 (
şo£¡_t
 !ğ1.0à|| 
	`ıvdÙ
(
n
, 
	`ıvrÙ©e
(
£gm’t
->
b_ng’t
, 
rÙ
)) >= 0.0)

566 
	`ıCŞlisiÚInfoPushCÚù
(
šfo
, 
	`ıvadd
(
ûÁ”
, 
	`ıvmuÉ
(
n
, 
cœşe
->
r
)), cpvadd(
şo£¡
, cpvmuÉÒ, -
£gm’t
->r)), 0);

569 
	}
}

572 
	$Segm’tToSegm’t
(cÚ¡ 
ıSegm’tSh­e
 *
£g1
, cÚ¡ cpSegm’tSh­*
£g2
, 
ıCŞlisiÚInfo
 *
šfo
)

574 
SuµÜtCÚ‹xt
 
cÚ‹xt
 = {(
ıSh­e
 *)
£g1
, (ıSh­*)
£g2
, (
SuµÜtPoštFunc
)
Segm’tSuµÜtPošt
, (SupportPointFunc)SegmentSupportPoint};

575 
Clo£¡Pošts
 
pošts
 = 
	`GJK
(&
cÚ‹xt
, &
šfo
->
id
);

577 #ià
DRAW_CLOSEST


578 #ià
PRINT_LOG


582 
	`ChmunkDebugD¿wDÙ
(6.0, 
pošts
.
a
, 
	`RGBACŞÜ
(1, 1, 1, 1));

583 
	`ChmunkDebugD¿wDÙ
(6.0, 
pošts
.
b
, 
	`RGBACŞÜ
(1, 1, 1, 1));

584 
	`ChmunkDebugD¿wSegm’t
(
pošts
.
a
,…ošts.
b
, 
	`RGBACŞÜ
(1, 1, 1, 1));

585 
	`ChmunkDebugD¿wSegm’t
(
pošts
.
a
, 
	`ıvadd
Õošts.a, 
	`ıvmuÉ
Õošts.
n
, 10.0)), 
	`RGBACŞÜ
(1, 0, 0, 1));

588 
ıVeù
 
n
 = 
pošts
.n;

589 
ıVeù
 
rÙ1
 = 
	`ıBodyG‘RÙ©iÚ
(
£g1
->
sh­e
.
body
);

590 
ıVeù
 
rÙ2
 = 
	`ıBodyG‘RÙ©iÚ
(
£g2
->
sh­e
.
body
);

594 
pošts
.
d
 <ğ(
£g1
->
r
 + 
£g2
->r) && (

596 (!
	`ıveql
(
pošts
.
a
, 
£g1
->

è|| 
	`ıvdÙ
(
n
, 
	`ıvrÙ©e
(£g1->
a_ng’t
, 
rÙ1
)) <= 0.0) &&

597 (!
	`ıveql
(
pošts
.
a
, 
£g1
->
tb
è|| 
	`ıvdÙ
(
n
, 
	`ıvrÙ©e
(£g1->
b_ng’t
, 
rÙ1
)) <= 0.0) &&

598 (!
	`ıveql
(
pošts
.
b
, 
£g2
->

è|| 
	`ıvdÙ
(
n
, 
	`ıvrÙ©e
(£g2->
a_ng’t
, 
rÙ2
)) >= 0.0) &&

599 (!
	`ıveql
(
pošts
.
b
, 
£g2
->
tb
è|| 
	`ıvdÙ
(
n
, 
	`ıvrÙ©e
(£g2->
b_ng’t
, 
rÙ2
)) >= 0.0)

602 
	`CÚùPošts
(
	`SuµÜtEdgeFÜSegm’t
(
£g1
, 
n
), SuµÜtEdgeFÜSegm’t(
£g2
, 
	`ıvÃg
Ò)), 
pošts
, 
šfo
);

604 
	}
}

607 
	$PŞyToPŞy
(cÚ¡ 
ıPŞySh­e
 *
pŞy1
, cÚ¡ cpPŞySh­*
pŞy2
, 
ıCŞlisiÚInfo
 *
šfo
)

609 
SuµÜtCÚ‹xt
 
cÚ‹xt
 = {(
ıSh­e
 *)
pŞy1
, (ıSh­*)
pŞy2
, (
SuµÜtPoštFunc
)
PŞySuµÜtPošt
, (SupportPointFunc)PolySupportPoint};

610 
Clo£¡Pošts
 
pošts
 = 
	`GJK
(&
cÚ‹xt
, &
šfo
->
id
);

612 #ià
DRAW_CLOSEST


613 #ià
PRINT_LOG


617 
	`ChmunkDebugD¿wDÙ
(3.0, 
pošts
.
a
, 
	`RGBACŞÜ
(1, 1, 1, 1));

618 
	`ChmunkDebugD¿wDÙ
(3.0, 
pošts
.
b
, 
	`RGBACŞÜ
(1, 1, 1, 1));

619 
	`ChmunkDebugD¿wSegm’t
(
pošts
.
a
,…ošts.
b
, 
	`RGBACŞÜ
(1, 1, 1, 1));

620 
	`ChmunkDebugD¿wSegm’t
(
pošts
.
a
, 
	`ıvadd
Õošts.a, 
	`ıvmuÉ
Õošts.
n
, 10.0)), 
	`RGBACŞÜ
(1, 0, 0, 1));

624 if(
pošts
.
d
 - 
pŞy1
->
r
 - 
pŞy2
->r <= 0.0){

625 
	`CÚùPošts
(
	`SuµÜtEdgeFÜPŞy
(
pŞy1
, 
pošts
.
n
), SuµÜtEdgeFÜPŞy(
pŞy2
, 
	`ıvÃg
Õošts.n)),…ošts, 
šfo
);

627 
	}
}

630 
	$Segm’tToPŞy
(cÚ¡ 
ıSegm’tSh­e
 *
£g
, cÚ¡ 
ıPŞySh­e
 *
pŞy
, 
ıCŞlisiÚInfo
 *
šfo
)

632 
SuµÜtCÚ‹xt
 
cÚ‹xt
 = {(
ıSh­e
 *)
£g
, (ıSh­*)
pŞy
, (
SuµÜtPoštFunc
)
Segm’tSuµÜtPošt
, (SuµÜtPoštFunc)
PŞySuµÜtPošt
};

633 
Clo£¡Pošts
 
pošts
 = 
	`GJK
(&
cÚ‹xt
, &
šfo
->
id
);

635 #ià
DRAW_CLOSEST


636 #ià
PRINT_LOG


640 
	`ChmunkDebugD¿wDÙ
(3.0, 
pošts
.
a
, 
	`RGBACŞÜ
(1, 1, 1, 1));

641 
	`ChmunkDebugD¿wDÙ
(3.0, 
pošts
.
b
, 
	`RGBACŞÜ
(1, 1, 1, 1));

642 
	`ChmunkDebugD¿wSegm’t
(
pošts
.
a
,…ošts.
b
, 
	`RGBACŞÜ
(1, 1, 1, 1));

643 
	`ChmunkDebugD¿wSegm’t
(
pošts
.
a
, 
	`ıvadd
Õošts.a, 
	`ıvmuÉ
Õošts.
n
, 10.0)), 
	`RGBACŞÜ
(1, 0, 0, 1));

646 
ıVeù
 
n
 = 
pošts
.n;

647 
ıVeù
 
rÙ
 = 
	`ıBodyG‘RÙ©iÚ
(
£g
->
sh­e
.
body
);

651 
pošts
.
d
 - 
£g
->
r
 - 
pŞy
->r <= 0.0 && (

653 (!
	`ıveql
(
pošts
.
a
, 
£g
->

è|| 
	`ıvdÙ
(
n
, 
	`ıvrÙ©e
(£g->
a_ng’t
, 
rÙ
)) <= 0.0) &&

654 (!
	`ıveql
(
pošts
.
a
, 
£g
->
tb
è|| 
	`ıvdÙ
(
n
, 
	`ıvrÙ©e
(£g->
b_ng’t
, 
rÙ
)) <= 0.0)

657 
	`CÚùPošts
(
	`SuµÜtEdgeFÜSegm’t
(
£g
, 
n
), 
	`SuµÜtEdgeFÜPŞy
(
pŞy
, 
	`ıvÃg
Ò)), 
pošts
, 
šfo
);

659 
	}
}

662 
	$CœşeToPŞy
(cÚ¡ 
ıCœşeSh­e
 *
cœşe
, cÚ¡ 
ıPŞySh­e
 *
pŞy
, 
ıCŞlisiÚInfo
 *
šfo
)

664 
SuµÜtCÚ‹xt
 
cÚ‹xt
 = {(
ıSh­e
 *)
cœşe
, (ıSh­*)
pŞy
, (
SuµÜtPoštFunc
)
CœşeSuµÜtPošt
, (SuµÜtPoštFunc)
PŞySuµÜtPošt
};

665 
Clo£¡Pošts
 
pošts
 = 
	`GJK
(&
cÚ‹xt
, &
šfo
->
id
);

667 #ià
DRAW_CLOSEST


668 
	`ChmunkDebugD¿wDÙ
(3.0, 
pošts
.
a
, 
	`RGBACŞÜ
(1, 1, 1, 1));

669 
	`ChmunkDebugD¿wDÙ
(3.0, 
pošts
.
b
, 
	`RGBACŞÜ
(1, 1, 1, 1));

670 
	`ChmunkDebugD¿wSegm’t
(
pošts
.
a
,…ošts.
b
, 
	`RGBACŞÜ
(1, 1, 1, 1));

671 
	`ChmunkDebugD¿wSegm’t
(
pošts
.
a
, 
	`ıvadd
Õošts.a, 
	`ıvmuÉ
Õošts.
n
, 10.0)), 
	`RGBACŞÜ
(1, 0, 0, 1));

675 if(
pošts
.
d
 <ğ
cœşe
->
r
 + 
pŞy
->r){

676 
ıVeù
 
n
 = 
šfo
->Àğ
pošts
.n;

677 
	`ıCŞlisiÚInfoPushCÚù
(
šfo
, 
	`ıvadd
(
pošts
.
a
, 
	`ıvmuÉ
(
n
, 
cœşe
->
r
)), cpvaddÕošts.
b
, cpvmuÉÒ, 
pŞy
->r)), 0);

679 
	}
}

682 
	$CŞlisiÚE¼Ü
(cÚ¡ 
ıSh­e
 *
cœşe
, cÚ¡ cpSh­*
pŞy
, 
ıCŞlisiÚInfo
 *
šfo
)

684 
	`ıAs£¹H¬d
(
ıF®£
, "Internal Error: Shapeypes‡re‚ot sorted.");

685 
	}
}

688 cÚ¡ 
CŞlisiÚFunc
 
	gButšCŞlisiÚFuncs
[9] = {

689 (
CŞlisiÚFunc
)
CœşeToCœşe
,

690 
CŞlisiÚE¼Ü
,

691 
CŞlisiÚE¼Ü
,

692 (
CŞlisiÚFunc
)
CœşeToSegm’t
,

693 (
CŞlisiÚFunc
)
Segm’tToSegm’t
,

694 
CŞlisiÚE¼Ü
,

695 (
CŞlisiÚFunc
)
CœşeToPŞy
,

696 (
CŞlisiÚFunc
)
Segm’tToPŞy
,

697 (
CŞlisiÚFunc
)
PŞyToPŞy
,

699 cÚ¡ 
CŞlisiÚFunc
 *
	gCŞlisiÚFuncs
 = 
ButšCŞlisiÚFuncs
;

701 
ıCŞlisiÚInfo


702 
	$ıCŞlide
(cÚ¡ 
ıSh­e
 *
a
, cÚ¡ cpSh­*
b
, 
ıCŞlisiÚID
 
id
, 
ıCÚù
 *
cÚùs
)

704 
ıCŞlisiÚInfo
 
šfo
 = {
a
, 
b
, 
id
, 
ıvz”o
, 0, 
cÚùs
};

707 if(
a
->
kÏss
->
ty³
 > 
b
->klass->type){

708 
šfo
.
a
 = 
b
;

709 
šfo
.
b
 = 
a
;

712 
CŞlisiÚFuncs
[
šfo
.
a
->
kÏss
->
ty³
 + info.
b
->kÏss->ty³*
CP_NUM_SHAPES
](info.a, info.b, &info);

725  
šfo
;

726 
	}
}

	@../src/chipmunk/cpConstraint.c

22 
	~"chmunk/chmunk_´iv©e.h
"

26 
	$ıCÚ¡¿štDe¡roy
(
ıCÚ¡¿št
 *
cÚ¡¿št
){
	}
}

29 
	$ıCÚ¡¿štF»e
(
ıCÚ¡¿št
 *
cÚ¡¿št
)

31 if(
cÚ¡¿št
){

32 
	`ıCÚ¡¿štDe¡roy
(
cÚ¡¿št
);

33 
	`ıä“
(
cÚ¡¿št
);

35 
	}
}

38 
	$ıCÚ¡¿štIn™
(
ıCÚ¡¿št
 *
cÚ¡¿št
, cÚ¡ 
ıCÚ¡¿štCÏss
 *
kÏss
, 
ıBody
 *
a
, cpBody *
b
)

40 
cÚ¡¿št
->
kÏss
 = klass;

42 
cÚ¡¿št
->
a
 =‡;

43 
cÚ¡¿št
->
b
 = b;

44 
cÚ¡¿št
->
¥aû
 = 
NULL
;

46 
cÚ¡¿št
->
Ãxt_a
 = 
NULL
;

47 
cÚ¡¿št
->
Ãxt_b
 = 
NULL
;

49 
cÚ¡¿št
->
maxFÜû
 = (
ıFlßt
)
INFINITY
;

50 
cÚ¡¿št
->
”rÜBŸs
 = 
	`ıåow
(1.0f - 0.1f, 60.0f);

51 
cÚ¡¿št
->
maxBŸs
 = (
ıFlßt
)
INFINITY
;

53 
cÚ¡¿št
->
cŞlideBod›s
 = 
ıTrue
;

55 
cÚ¡¿št
->
´eSŞve
 = 
NULL
;

56 
cÚ¡¿št
->
po¡SŞve
 = 
NULL
;

57 
	}
}

59 
ıS·û
 *

60 
	$ıCÚ¡¿štG‘S·û
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

62  
cÚ¡¿št
->
¥aû
;

63 
	}
}

65 
ıBody
 *

66 
	$ıCÚ¡¿štG‘BodyA
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

68  
cÚ¡¿št
->
a
;

69 
	}
}

71 
ıBody
 *

72 
	$ıCÚ¡¿štG‘BodyB
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

74  
cÚ¡¿št
->
b
;

75 
	}
}

77 
ıFlßt


78 
	$ıCÚ¡¿štG‘MaxFÜû
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

80  
cÚ¡¿št
->
maxFÜû
;

81 
	}
}

84 
	$ıCÚ¡¿štS‘MaxFÜû
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
maxFÜû
)

86 
	`ıAs£¹H¬d
(
maxFÜû
 >= 0.0f, "maxForce must be…ositive.");

87 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

88 
cÚ¡¿št
->
maxFÜû
 = maxForce;

89 
	}
}

91 
ıFlßt


92 
	$ıCÚ¡¿štG‘E¼ÜBŸs
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

94  
cÚ¡¿št
->
”rÜBŸs
;

95 
	}
}

98 
	$ıCÚ¡¿štS‘E¼ÜBŸs
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
”rÜBŸs
)

100 
	`ıAs£¹H¬d
(
”rÜBŸs
 >= 0.0f, "errorBias must be…ositive.");

101 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

102 
cÚ¡¿št
->
”rÜBŸs
 =ƒrrorBias;

103 
	}
}

105 
ıFlßt


106 
	$ıCÚ¡¿štG‘MaxBŸs
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

108  
cÚ¡¿št
->
maxBŸs
;

109 
	}
}

112 
	$ıCÚ¡¿štS‘MaxBŸs
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
maxBŸs
)

114 
	`ıAs£¹H¬d
(
maxBŸs
 >= 0.0f, "maxBias must be…ositive.");

115 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

116 
cÚ¡¿št
->
maxBŸs
 = maxBias;

117 
	}
}

119 
ıBoŞ


120 
	$ıCÚ¡¿štG‘CŞlideBod›s
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

122  
cÚ¡¿št
->
cŞlideBod›s
;

123 
	}
}

126 
	$ıCÚ¡¿štS‘CŞlideBod›s
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıBoŞ
 
cŞlideBod›s
)

128 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

129 
cÚ¡¿št
->
cŞlideBod›s
 = collideBodies;

130 
	}
}

132 
ıCÚ¡¿štP»SŞveFunc


133 
	$ıCÚ¡¿štG‘P»SŞveFunc
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

135  
cÚ¡¿št
->
´eSŞve
;

136 
	}
}

139 
	$ıCÚ¡¿štS‘P»SŞveFunc
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıCÚ¡¿štP»SŞveFunc
 
´eSŞveFunc
)

141 
cÚ¡¿št
->
´eSŞve
 = 
´eSŞveFunc
;

142 
	}
}

144 
ıCÚ¡¿štPo¡SŞveFunc


145 
	$ıCÚ¡¿štG‘Po¡SŞveFunc
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

147  
cÚ¡¿št
->
po¡SŞve
;

148 
	}
}

151 
	$ıCÚ¡¿štS‘Po¡SŞveFunc
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıCÚ¡¿štPo¡SŞveFunc
 
po¡SŞveFunc
)

153 
cÚ¡¿št
->
po¡SŞve
 = 
po¡SŞveFunc
;

154 
	}
}

156 
ıD©aPoš‹r


157 
	$ıCÚ¡¿štG‘U£rD©a
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

159  
cÚ¡¿št
->
u£rD©a
;

160 
	}
}

163 
	$ıCÚ¡¿štS‘U£rD©a
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıD©aPoš‹r
 
u£rD©a
)

165 
cÚ¡¿št
->
u£rD©a
 = userData;

166 
	}
}

169 
ıFlßt


170 
	$ıCÚ¡¿štG‘Impul£
(
ıCÚ¡¿št
 *
cÚ¡¿št
)

172  
cÚ¡¿št
->
kÏss
->
	`g‘Impul£
(constraint);

173 
	}
}

	@../src/chipmunk/cpDampedRotarySpring.c

22 
	~"chmunk/chmunk_´iv©e.h
"

24 
ıFlßt


25 
	$deçuÉS´šgTÜque
(
ıDam³dRÙ¬yS´šg
 *
¥ršg
, 
ıFlßt
 
»ÏtiveAngË
){

26  (
»ÏtiveAngË
 - 
¥ršg
->
»¡AngË
)*¥ršg->
¡ifâess
;

27 
	}
}

30 
	$´eS‹p
(
ıDam³dRÙ¬yS´šg
 *
¥ršg
, 
ıFlßt
 
dt
)

32 
ıBody
 *
a
 = 
¥ršg
->
cÚ¡¿št
.a;

33 
ıBody
 *
b
 = 
¥ršg
->
cÚ¡¿št
.b;

35 
ıFlßt
 
mom’t
 = 
a
->
i_šv
 + 
b
->i_inv;

36 
	`ıAs£¹Soá
(
mom’t
 != 0.0, "Unsolvable spring.");

37 
¥ršg
->
iSum
 = 1.0f/
mom’t
;

39 
¥ršg
->
w_cÛf
 = 1.0à- 
	`ıãxp
(-¥ršg->
dampšg
*
dt
*
mom’t
);

40 
¥ršg
->
rg‘_wº
 = 0.0f;

43 
ıFlßt
 
j_¥ršg
 = 
¥ršg
->
	`¥ršgTÜqueFunc
((
ıCÚ¡¿št
 *)¥ršg, 
a
->¨- 
b
->a)*
dt
;

44 
¥ršg
->
jAcc
 = 
j_¥ršg
;

46 
a
->
w
 -ğ
j_¥ršg
*a->
i_šv
;

47 
b
->
w
 +ğ
j_¥ršg
*b->
i_šv
;

48 
	}
}

50 
	$­¶yCachedImpul£
(
ıDam³dRÙ¬yS´šg
 *
¥ršg
, 
ıFlßt
 
dt_cÛf
){
	}
}

53 
	$­¶yImpul£
(
ıDam³dRÙ¬yS´šg
 *
¥ršg
, 
ıFlßt
 
dt
)

55 
ıBody
 *
a
 = 
¥ršg
->
cÚ¡¿št
.a;

56 
ıBody
 *
b
 = 
¥ršg
->
cÚ¡¿št
.b;

59 
ıFlßt
 
wº
 = 
a
->
w
 - 
b
->w;

63 
ıFlßt
 
w_damp
 = (
¥ršg
->
rg‘_wº
 - 
wº
)*¥ršg->
w_cÛf
;

64 
¥ršg
->
rg‘_wº
 = 
wº
 + 
w_damp
;

67 
ıFlßt
 
j_damp
 = 
w_damp
*
¥ršg
->
iSum
;

68 
¥ršg
->
jAcc
 +ğ
j_damp
;

70 
a
->
w
 +ğ
j_damp
*a->
i_šv
;

71 
b
->
w
 -ğ
j_damp
*b->
i_šv
;

72 
	}
}

74 
ıFlßt


75 
	$g‘Impul£
(
ıDam³dRÙ¬yS´šg
 *
¥ršg
)

77  
¥ršg
->
jAcc
;

78 
	}
}

80 cÚ¡ 
ıCÚ¡¿štCÏss
 
	gkÏss
 = {

81 (
ıCÚ¡¿štP»S‹pIm¶
)
´eS‹p
,

82 (
ıCÚ¡¿štAµlyCachedImpul£Im¶
)
­¶yCachedImpul£
,

83 (
ıCÚ¡¿štAµlyImpul£Im¶
)
­¶yImpul£
,

84 (
ıCÚ¡¿štG‘Impul£Im¶
)
g‘Impul£
,

87 
ıDam³dRÙ¬yS´šg
 *

88 
	$ıDam³dRÙ¬yS´šgAÎoc
()

90  (
ıDam³dRÙ¬yS´šg
 *)
	`ıÿÎoc
(1, (cpDampedRotarySpring));

91 
	}
}

93 
ıDam³dRÙ¬yS´šg
 *

94 
	$ıDam³dRÙ¬yS´šgIn™
(
ıDam³dRÙ¬yS´šg
 *
¥ršg
, 
ıBody
 *
a
, cpBody *
b
, 
ıFlßt
 
»¡AngË
, cpFlßˆ
¡ifâess
, cpFlßˆ
dampšg
)

96 
	`ıCÚ¡¿štIn™
((
ıCÚ¡¿št
 *)
¥ršg
, &
kÏss
, 
a
, 
b
);

98 
¥ršg
->
»¡AngË
 =„estAngle;

99 
¥ršg
->
¡ifâess
 = stiffness;

100 
¥ršg
->
dampšg
 = damping;

101 
¥ršg
->
¥ršgTÜqueFunc
 = (
ıDam³dRÙ¬yS´šgTÜqueFunc
)
deçuÉS´šgTÜque
;

103 
¥ršg
->
jAcc
 = 0.0f;

105  
¥ršg
;

106 
	}
}

108 
ıCÚ¡¿št
 *

109 
	$ıDam³dRÙ¬yS´šgNew
(
ıBody
 *
a
, cpBody *
b
, 
ıFlßt
 
»¡AngË
, cpFlßˆ
¡ifâess
, cpFlßˆ
dampšg
)

111  (
ıCÚ¡¿št
 *)
	`ıDam³dRÙ¬yS´šgIn™
(
	`ıDam³dRÙ¬yS´šgAÎoc
(), 
a
, 
b
, 
»¡AngË
, 
¡ifâess
, 
dampšg
);

112 
	}
}

114 
ıBoŞ


115 
	$ıCÚ¡¿štIsDam³dRÙ¬yS´šg
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

117  (
cÚ¡¿št
->
kÏss
 == &klass);

118 
	}
}

120 
ıFlßt


121 
	$ıDam³dRÙ¬yS´šgG‘Re¡AngË
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

123 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsDam³dRÙ¬yS´šg
(
cÚ¡¿št
), "Constraint is‚ot‡ damped„otary spring.");

124  ((
ıDam³dRÙ¬yS´šg
 *)
cÚ¡¿št
)->
»¡AngË
;

125 
	}
}

128 
	$ıDam³dRÙ¬yS´šgS‘Re¡AngË
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
»¡AngË
)

130 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsDam³dRÙ¬yS´šg
(
cÚ¡¿št
), "Constraint is‚ot‡ damped„otary spring.");

131 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

132 ((
ıDam³dRÙ¬yS´šg
 *)
cÚ¡¿št
)->
»¡AngË
 =„estAngle;

133 
	}
}

135 
ıFlßt


136 
	$ıDam³dRÙ¬yS´šgG‘Stifâess
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

138 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsDam³dRÙ¬yS´šg
(
cÚ¡¿št
), "Constraint is‚ot‡ damped„otary spring.");

139  ((
ıDam³dRÙ¬yS´šg
 *)
cÚ¡¿št
)->
¡ifâess
;

140 
	}
}

143 
	$ıDam³dRÙ¬yS´šgS‘Stifâess
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
¡ifâess
)

145 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsDam³dRÙ¬yS´šg
(
cÚ¡¿št
), "Constraint is‚ot‡ damped„otary spring.");

146 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

147 ((
ıDam³dRÙ¬yS´šg
 *)
cÚ¡¿št
)->
¡ifâess
 = stiffness;

148 
	}
}

150 
ıFlßt


151 
	$ıDam³dRÙ¬yS´šgG‘Dampšg
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

153 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsDam³dRÙ¬yS´šg
(
cÚ¡¿št
), "Constraint is‚ot‡ damped„otary spring.");

154  ((
ıDam³dRÙ¬yS´šg
 *)
cÚ¡¿št
)->
dampšg
;

155 
	}
}

158 
	$ıDam³dRÙ¬yS´šgS‘Dampšg
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
dampšg
)

160 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsDam³dRÙ¬yS´šg
(
cÚ¡¿št
), "Constraint is‚ot‡ damped„otary spring.");

161 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

162 ((
ıDam³dRÙ¬yS´šg
 *)
cÚ¡¿št
)->
dampšg
 = damping;

163 
	}
}

165 
ıDam³dRÙ¬yS´šgTÜqueFunc


166 
	$ıDam³dRÙ¬yS´šgG‘S´šgTÜqueFunc
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

168 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsDam³dRÙ¬yS´šg
(
cÚ¡¿št
), "Constraint is‚ot‡ damped„otary spring.");

169  ((
ıDam³dRÙ¬yS´šg
 *)
cÚ¡¿št
)->
¥ršgTÜqueFunc
;

170 
	}
}

173 
	$ıDam³dRÙ¬yS´šgS‘S´šgTÜqueFunc
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıDam³dRÙ¬yS´šgTÜqueFunc
 
¥ršgTÜqueFunc
)

175 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsDam³dRÙ¬yS´šg
(
cÚ¡¿št
), "Constraint is‚ot‡ damped„otary spring.");

176 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

177 ((
ıDam³dRÙ¬yS´šg
 *)
cÚ¡¿št
)->
¥ršgTÜqueFunc
 = springTorqueFunc;

178 
	}
}

	@../src/chipmunk/cpDampedSpring.c

22 
	~"chmunk/chmunk_´iv©e.h
"

24 
ıFlßt


25 
	$deçuÉS´šgFÜû
(
ıDam³dS´šg
 *
¥ršg
, 
ıFlßt
 
di¡
){

26  (
¥ršg
->
»¡L’gth
 - 
di¡
)*¥ršg->
¡ifâess
;

27 
	}
}

30 
	$´eS‹p
(
ıDam³dS´šg
 *
¥ršg
, 
ıFlßt
 
dt
)

32 
ıBody
 *
a
 = 
¥ršg
->
cÚ¡¿št
.a;

33 
ıBody
 *
b
 = 
¥ršg
->
cÚ¡¿št
.b;

35 
¥ršg
->
r1
 = 
	`ıT¿nsfÜmVeù
(
a
->
ŒªsfÜm
, 
	`ıvsub
(¥ršg->
ªchÜA
,‡->
cog
));

36 
¥ršg
->
r2
 = 
	`ıT¿nsfÜmVeù
(
b
->
ŒªsfÜm
, 
	`ıvsub
(¥ršg->
ªchÜB
, b->
cog
));

38 
ıVeù
 
d–
 = 
	`ıvsub
(
	`ıvadd
(
b
->
p
, 
¥ršg
->
r2
), cpvadd(
a
->p, s´šg->
r1
));

39 
ıFlßt
 
di¡
 = 
	`ıvËngth
(
d–
);

40 
¥ršg
->
n
 = 
	`ıvmuÉ
(
d–
, 1.0f/(
di¡
 ? di¡ : 
INFINITY
));

42 
ıFlßt
 
k
 = 
	`k_sÿÏr
(
a
, 
b
, 
¥ršg
->
r1
, s´šg->
r2
, s´šg->
n
);

43 
	`ıAs£¹Soá
(
k
 != 0.0, "Unsolvable spring.");

44 
¥ršg
->
nMass
 = 1.0f/
k
;

46 
¥ršg
->
rg‘_vº
 = 0.0f;

47 
¥ršg
->
v_cÛf
 = 1.0à- 
	`ıãxp
(-¥ršg->
dampšg
*
dt
*
k
);

50 
ıFlßt
 
f_¥ršg
 = 
¥ršg
->
	`¥ršgFÜûFunc
((
ıCÚ¡¿št
 *)¥ršg, 
di¡
);

51 
ıFlßt
 
j_¥ršg
 = 
¥ršg
->
jAcc
 = 
f_¥ršg
*
dt
;

52 
	`­¶y_impul£s
(
a
, 
b
, 
¥ršg
->
r1
, s´šg->
r2
, 
	`ıvmuÉ
(¥ršg->
n
, 
j_¥ršg
));

53 
	}
}

55 
	$­¶yCachedImpul£
(
ıDam³dS´šg
 *
¥ršg
, 
ıFlßt
 
dt_cÛf
){
	}
}

58 
	$­¶yImpul£
(
ıDam³dS´šg
 *
¥ršg
, 
ıFlßt
 
dt
)

60 
ıBody
 *
a
 = 
¥ršg
->
cÚ¡¿št
.a;

61 
ıBody
 *
b
 = 
¥ršg
->
cÚ¡¿št
.b;

63 
ıVeù
 
n
 = 
¥ršg
->n;

64 
ıVeù
 
r1
 = 
¥ršg
->r1;

65 
ıVeù
 
r2
 = 
¥ršg
->r2;

68 
ıFlßt
 
vº
 = 
	`nÜm®_»Ïtive_v–oc™y
(
a
, 
b
, 
r1
, 
r2
, 
n
);

71 
ıFlßt
 
v_damp
 = (
¥ršg
->
rg‘_vº
 - 
vº
)*¥ršg->
v_cÛf
;

72 
¥ršg
->
rg‘_vº
 = 
vº
 + 
v_damp
;

74 
ıFlßt
 
j_damp
 = 
v_damp
*
¥ršg
->
nMass
;

75 
¥ršg
->
jAcc
 +ğ
j_damp
;

76 
	`­¶y_impul£s
(
a
, 
b
, 
¥ršg
->
r1
, s´šg->
r2
, 
	`ıvmuÉ
(¥ršg->
n
, 
j_damp
));

77 
	}
}

79 
ıFlßt


80 
	$g‘Impul£
(
ıDam³dS´šg
 *
¥ršg
)

82  
¥ršg
->
jAcc
;

83 
	}
}

85 cÚ¡ 
ıCÚ¡¿štCÏss
 
	gkÏss
 = {

86 (
ıCÚ¡¿štP»S‹pIm¶
)
´eS‹p
,

87 (
ıCÚ¡¿štAµlyCachedImpul£Im¶
)
­¶yCachedImpul£
,

88 (
ıCÚ¡¿štAµlyImpul£Im¶
)
­¶yImpul£
,

89 (
ıCÚ¡¿štG‘Impul£Im¶
)
g‘Impul£
,

92 
ıDam³dS´šg
 *

93 
	$ıDam³dS´šgAÎoc
()

95  (
ıDam³dS´šg
 *)
	`ıÿÎoc
(1, (cpDampedSpring));

96 
	}
}

98 
ıDam³dS´šg
 *

99 
	$ıDam³dS´šgIn™
(
ıDam³dS´šg
 *
¥ršg
, 
ıBody
 *
a
, cpBody *
b
, 
ıVeù
 
ªchÜA
, cpVeù 
ªchÜB
, 
ıFlßt
 
»¡L’gth
, cpFlßˆ
¡ifâess
, cpFlßˆ
dampšg
)

101 
	`ıCÚ¡¿štIn™
((
ıCÚ¡¿št
 *)
¥ršg
, &
kÏss
, 
a
, 
b
);

103 
¥ršg
->
ªchÜA
 =‡nchorA;

104 
¥ršg
->
ªchÜB
 =‡nchorB;

106 
¥ršg
->
»¡L’gth
 =„estLength;

107 
¥ršg
->
¡ifâess
 = stiffness;

108 
¥ršg
->
dampšg
 = damping;

109 
¥ršg
->
¥ršgFÜûFunc
 = (
ıDam³dS´šgFÜûFunc
)
deçuÉS´šgFÜû
;

111 
¥ršg
->
jAcc
 = 0.0f;

113  
¥ršg
;

114 
	}
}

116 
ıCÚ¡¿št
 *

117 
	$ıDam³dS´šgNew
(
ıBody
 *
a
, cpBody *
b
, 
ıVeù
 
ªchÜA
, cpVeù 
ªchÜB
, 
ıFlßt
 
»¡L’gth
, cpFlßˆ
¡ifâess
, cpFlßˆ
dampšg
)

119  (
ıCÚ¡¿št
 *)
	`ıDam³dS´šgIn™
(
	`ıDam³dS´šgAÎoc
(), 
a
, 
b
, 
ªchÜA
, 
ªchÜB
, 
»¡L’gth
, 
¡ifâess
, 
dampšg
);

120 
	}
}

122 
ıBoŞ


123 
	$ıCÚ¡¿štIsDam³dS´šg
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

125  (
cÚ¡¿št
->
kÏss
 == &klass);

126 
	}
}

128 
ıVeù


129 
	$ıDam³dS´šgG‘AnchÜA
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

131 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsDam³dS´šg
(
cÚ¡¿št
), "Constraint is‚ot‡ damped spring.");

132  ((
ıDam³dS´šg
 *)
cÚ¡¿št
)->
ªchÜA
;

133 
	}
}

136 
	$ıDam³dS´šgS‘AnchÜA
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıVeù
 
ªchÜA
)

138 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsDam³dS´šg
(
cÚ¡¿št
), "Constraint is‚ot‡ damped spring.");

139 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

140 ((
ıDam³dS´šg
 *)
cÚ¡¿št
)->
ªchÜA
 =‡nchorA;

141 
	}
}

143 
ıVeù


144 
	$ıDam³dS´šgG‘AnchÜB
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

146 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsDam³dS´šg
(
cÚ¡¿št
), "Constraint is‚ot‡ damped spring.");

147  ((
ıDam³dS´šg
 *)
cÚ¡¿št
)->
ªchÜB
;

148 
	}
}

151 
	$ıDam³dS´šgS‘AnchÜB
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıVeù
 
ªchÜB
)

153 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsDam³dS´šg
(
cÚ¡¿št
), "Constraint is‚ot‡ damped spring.");

154 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

155 ((
ıDam³dS´šg
 *)
cÚ¡¿št
)->
ªchÜB
 =‡nchorB;

156 
	}
}

158 
ıFlßt


159 
	$ıDam³dS´šgG‘Re¡L’gth
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

161 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsDam³dS´šg
(
cÚ¡¿št
), "Constraint is‚ot‡ damped spring.");

162  ((
ıDam³dS´šg
 *)
cÚ¡¿št
)->
»¡L’gth
;

163 
	}
}

166 
	$ıDam³dS´šgS‘Re¡L’gth
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
»¡L’gth
)

168 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsDam³dS´šg
(
cÚ¡¿št
), "Constraint is‚ot‡ damped spring.");

169 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

170 ((
ıDam³dS´šg
 *)
cÚ¡¿št
)->
»¡L’gth
 =„estLength;

171 
	}
}

173 
ıFlßt


174 
	$ıDam³dS´šgG‘Stifâess
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

176 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsDam³dS´šg
(
cÚ¡¿št
), "Constraint is‚ot‡ damped spring.");

177  ((
ıDam³dS´šg
 *)
cÚ¡¿št
)->
¡ifâess
;

178 
	}
}

181 
	$ıDam³dS´šgS‘Stifâess
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
¡ifâess
)

183 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsDam³dS´šg
(
cÚ¡¿št
), "Constraint is‚ot‡ damped spring.");

184 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

185 ((
ıDam³dS´šg
 *)
cÚ¡¿št
)->
¡ifâess
 = stiffness;

186 
	}
}

188 
ıFlßt


189 
	$ıDam³dS´šgG‘Dampšg
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

191 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsDam³dS´šg
(
cÚ¡¿št
), "Constraint is‚ot‡ damped spring.");

192  ((
ıDam³dS´šg
 *)
cÚ¡¿št
)->
dampšg
;

193 
	}
}

196 
	$ıDam³dS´šgS‘Dampšg
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
dampšg
)

198 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsDam³dS´šg
(
cÚ¡¿št
), "Constraint is‚ot‡ damped spring.");

199 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

200 ((
ıDam³dS´šg
 *)
cÚ¡¿št
)->
dampšg
 = damping;

201 
	}
}

203 
ıDam³dS´šgFÜûFunc


204 
	$ıDam³dS´šgG‘S´šgFÜûFunc
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

206 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsDam³dS´šg
(
cÚ¡¿št
), "Constraint is‚ot‡ damped spring.");

207  ((
ıDam³dS´šg
 *)
cÚ¡¿št
)->
¥ršgFÜûFunc
;

208 
	}
}

211 
	$ıDam³dS´šgS‘S´šgFÜûFunc
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıDam³dS´šgFÜûFunc
 
¥ršgFÜûFunc
)

213 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsDam³dS´šg
(
cÚ¡¿št
), "Constraint is‚ot‡ damped spring.");

214 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

215 ((
ıDam³dS´šg
 *)
cÚ¡¿št
)->
¥ršgFÜûFunc
 = springForceFunc;

216 
	}
}

	@../src/chipmunk/cpGearJoint.c

22 
	~"chmunk/chmunk_´iv©e.h
"

25 
	$´eS‹p
(
ıG—rJošt
 *
jošt
, 
ıFlßt
 
dt
)

27 
ıBody
 *
a
 = 
jošt
->
cÚ¡¿št
.a;

28 
ıBody
 *
b
 = 
jošt
->
cÚ¡¿št
.b;

31 
jošt
->
iSum
 = 1.0f/(
a
->
i_šv
*jošt->
¿tio_šv
 + jošt->
¿tio
*
b
->i_inv);

34 
ıFlßt
 
maxBŸs
 = 
jošt
->
cÚ¡¿št
.maxBias;

35 
jošt
->
bŸs
 = 
	`ıfşamp
(-
	`bŸs_cÛf
(jošt->
cÚ¡¿št
.
”rÜBŸs
, 
dt
)*(
b
->
a
*jošt->
¿tio
 -‡->¨- jošt->
pha£
)/dt, -
maxBŸs
, maxBias);

36 
	}
}

39 
	$­¶yCachedImpul£
(
ıG—rJošt
 *
jošt
, 
ıFlßt
 
dt_cÛf
)

41 
ıBody
 *
a
 = 
jošt
->
cÚ¡¿št
.a;

42 
ıBody
 *
b
 = 
jošt
->
cÚ¡¿št
.b;

44 
ıFlßt
 
j
 = 
jošt
->
jAcc
*
dt_cÛf
;

45 
a
->
w
 -ğ
j
*a->
i_šv
*
jošt
->
¿tio_šv
;

46 
b
->
w
 +ğ
j
*b->
i_šv
;

47 
	}
}

50 
	$­¶yImpul£
(
ıG—rJošt
 *
jošt
, 
ıFlßt
 
dt
)

52 
ıBody
 *
a
 = 
jošt
->
cÚ¡¿št
.a;

53 
ıBody
 *
b
 = 
jošt
->
cÚ¡¿št
.b;

56 
ıFlßt
 
wr
 = 
b
->
w
*
jošt
->
¿tio
 - 
a
->w;

58 
ıFlßt
 
jMax
 = 
jošt
->
cÚ¡¿št
.
maxFÜû
*
dt
;

61 
ıFlßt
 
j
 = (
jošt
->
bŸs
 - 
wr
)*jošt->
iSum
;

62 
ıFlßt
 
jOld
 = 
jošt
->
jAcc
;

63 
jošt
->
jAcc
 = 
	`ıfşamp
(
jOld
 + 
j
, -
jMax
, jMax);

64 
j
 = 
jošt
->
jAcc
 - 
jOld
;

67 
a
->
w
 -ğ
j
*a->
i_šv
*
jošt
->
¿tio_šv
;

68 
b
->
w
 +ğ
j
*b->
i_šv
;

69 
	}
}

71 
ıFlßt


72 
	$g‘Impul£
(
ıG—rJošt
 *
jošt
)

74  
	`ıçbs
(
jošt
->
jAcc
);

75 
	}
}

77 cÚ¡ 
ıCÚ¡¿štCÏss
 
	gkÏss
 = {

78 (
ıCÚ¡¿štP»S‹pIm¶
)
´eS‹p
,

79 (
ıCÚ¡¿štAµlyCachedImpul£Im¶
)
­¶yCachedImpul£
,

80 (
ıCÚ¡¿štAµlyImpul£Im¶
)
­¶yImpul£
,

81 (
ıCÚ¡¿štG‘Impul£Im¶
)
g‘Impul£
,

84 
ıG—rJošt
 *

85 
	$ıG—rJoštAÎoc
()

87  (
ıG—rJošt
 *)
	`ıÿÎoc
(1, (cpGearJoint));

88 
	}
}

90 
ıG—rJošt
 *

91 
	$ıG—rJoštIn™
(
ıG—rJošt
 *
jošt
, 
ıBody
 *
a
, cpBody *
b
, 
ıFlßt
 
pha£
, cpFlßˆ
¿tio
)

93 
	`ıCÚ¡¿štIn™
((
ıCÚ¡¿št
 *)
jošt
, &
kÏss
, 
a
, 
b
);

95 
jošt
->
pha£
 =…hase;

96 
jošt
->
¿tio
 =„atio;

97 
jošt
->
¿tio_šv
 = 1.0f/
¿tio
;

99 
jošt
->
jAcc
 = 0.0f;

101  
jošt
;

102 
	}
}

104 
ıCÚ¡¿št
 *

105 
	$ıG—rJoštNew
(
ıBody
 *
a
, cpBody *
b
, 
ıFlßt
 
pha£
, cpFlßˆ
¿tio
)

107  (
ıCÚ¡¿št
 *)
	`ıG—rJoštIn™
(
	`ıG—rJoštAÎoc
(), 
a
, 
b
, 
pha£
, 
¿tio
);

108 
	}
}

110 
ıBoŞ


111 
	$ıCÚ¡¿štIsG—rJošt
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

113  (
cÚ¡¿št
->
kÏss
 == &klass);

114 
	}
}

116 
ıFlßt


117 
	$ıG—rJoštG‘Pha£
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

119 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsG—rJošt
(
cÚ¡¿št
), "Constraint is‚ot‡„atchet joint.");

120  ((
ıG—rJošt
 *)
cÚ¡¿št
)->
pha£
;

121 
	}
}

124 
	$ıG—rJoštS‘Pha£
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
pha£
)

126 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsG—rJošt
(
cÚ¡¿št
), "Constraint is‚ot‡„atchet joint.");

127 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

128 ((
ıG—rJošt
 *)
cÚ¡¿št
)->
pha£
 =…hase;

129 
	}
}

131 
ıFlßt


132 
	$ıG—rJoštG‘R©io
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

134 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsG—rJošt
(
cÚ¡¿št
), "Constraint is‚ot‡„atchet joint.");

135  ((
ıG—rJošt
 *)
cÚ¡¿št
)->
¿tio
;

136 
	}
}

139 
	$ıG—rJoštS‘R©io
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
¿tio
)

141 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsG—rJošt
(
cÚ¡¿št
), "Constraint is‚ot‡„atchet joint.");

142 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

143 ((
ıG—rJošt
 *)
cÚ¡¿št
)->
¿tio
 =„atio;

144 ((
ıG—rJošt
 *)
cÚ¡¿št
)->
¿tio_šv
 = 1.0f/
¿tio
;

145 
	}
}

	@../src/chipmunk/cpGrooveJoint.c

22 
	~"chmunk/chmunk_´iv©e.h
"

25 
	$´eS‹p
(
ıGrooveJošt
 *
jošt
, 
ıFlßt
 
dt
)

27 
ıBody
 *
a
 = 
jošt
->
cÚ¡¿št
.a;

28 
ıBody
 *
b
 = 
jošt
->
cÚ¡¿št
.b;

31 
ıVeù
 

 = 
	`ıT¿nsfÜmPošt
(
a
->
ŒªsfÜm
, 
jošt
->
grv_a
);

32 
ıVeù
 
tb
 = 
	`ıT¿nsfÜmPošt
(
a
->
ŒªsfÜm
, 
jošt
->
grv_b
);

35 
ıVeù
 
n
 = 
	`ıT¿nsfÜmVeù
(
a
->
ŒªsfÜm
, 
jošt
->
grv_n
);

36 
ıFlßt
 
d
 = 
	`ıvdÙ
(

, 
n
);

38 
jošt
->
grv_Š
 = 
n
;

39 
jošt
->
r2
 = 
	`ıT¿nsfÜmVeù
(
b
->
ŒªsfÜm
, 
	`ıvsub
(jošt->
ªchÜB
, b->
cog
));

42 
ıFlßt
 
td
 = 
	`ıvüoss
(
	`ıvadd
(
b
->
p
, 
jošt
->
r2
), 
n
);

44 if(
td
 <ğ
	`ıvüoss
(

, 
n
)){

45 
jošt
->
şamp
 = 1.0f;

46 
jošt
->
r1
 = 
	`ıvsub
(

, 
a
->
p
);

47 } if(
td
 >ğ
	`ıvüoss
(
tb
, 
n
)){

48 
jošt
->
şamp
 = -1.0f;

49 
jošt
->
r1
 = 
	`ıvsub
(
tb
, 
a
->
p
);

51 
jošt
->
şamp
 = 0.0f;

52 
jošt
->
r1
 = 
	`ıvsub
(
	`ıvadd
(
	`ıvmuÉ
(
	`ıv³½
(
n
), -
td
), cpvmuÉÒ, 
d
)), 
a
->
p
);

56 
jošt
->
k
 = 
	`k_‹nsÜ
(
a
, 
b
, jošt->
r1
, jošt->
r2
);

59 
ıVeù
 
d–
 = 
	`ıvsub
(
	`ıvadd
(
b
->
p
, 
jošt
->
r2
), cpvadd(
a
->p, jošt->
r1
));

60 
jošt
->
bŸs
 = 
	`ıvşamp
(
	`ıvmuÉ
(
d–
, -
	`bŸs_cÛf
(jošt->
cÚ¡¿št
.
”rÜBŸs
, 
dt
)/dt), jošt->cÚ¡¿št.
maxBŸs
);

61 
	}
}

64 
	$­¶yCachedImpul£
(
ıGrooveJošt
 *
jošt
, 
ıFlßt
 
dt_cÛf
)

66 
ıBody
 *
a
 = 
jošt
->
cÚ¡¿št
.a;

67 
ıBody
 *
b
 = 
jošt
->
cÚ¡¿št
.b;

69 
	`­¶y_impul£s
(
a
, 
b
, 
jošt
->
r1
, jošt->
r2
, 
	`ıvmuÉ
(jošt->
jAcc
, 
dt_cÛf
));

70 
	}
}

72 
šlše
 
ıVeù


73 
	$grooveCÚ¡¿š
(
ıGrooveJošt
 *
jošt
, 
ıVeù
 
j
, 
ıFlßt
 
dt
){

74 
ıVeù
 
n
 = 
jošt
->
grv_Š
;

75 
ıVeù
 
jCÏmp
 = (
jošt
->
şamp
*
	`ıvüoss
(
j
, 
n
è> 0.0fè? j : 
	`ıv´ojeù
(j,‚);

76  
	`ıvşamp
(
jCÏmp
, 
jošt
->
cÚ¡¿št
.
maxFÜû
*
dt
);

77 
	}
}

80 
	$­¶yImpul£
(
ıGrooveJošt
 *
jošt
, 
ıFlßt
 
dt
)

82 
ıBody
 *
a
 = 
jošt
->
cÚ¡¿št
.a;

83 
ıBody
 *
b
 = 
jošt
->
cÚ¡¿št
.b;

85 
ıVeù
 
r1
 = 
jošt
->r1;

86 
ıVeù
 
r2
 = 
jošt
->r2;

89 
ıVeù
 
vr
 = 
	`»Ïtive_v–oc™y
(
a
, 
b
, 
r1
, 
r2
);

91 
ıVeù
 
j
 = 
	`ıM©2x2T¿nsfÜm
(
jošt
->
k
, 
	`ıvsub
(jošt->
bŸs
, 
vr
));

92 
ıVeù
 
jOld
 = 
jošt
->
jAcc
;

93 
jošt
->
jAcc
 = 
	`grooveCÚ¡¿š
(jošt, 
	`ıvadd
(
jOld
, 
j
), 
dt
);

94 
j
 = 
	`ıvsub
(
jošt
->
jAcc
, 
jOld
);

97 
	`­¶y_impul£s
(
a
, 
b
, 
jošt
->
r1
, jošt->
r2
, 
j
);

98 
	}
}

100 
ıFlßt


101 
	$g‘Impul£
(
ıGrooveJošt
 *
jošt
)

103  
	`ıvËngth
(
jošt
->
jAcc
);

104 
	}
}

106 cÚ¡ 
ıCÚ¡¿štCÏss
 
	gkÏss
 = {

107 (
ıCÚ¡¿štP»S‹pIm¶
)
´eS‹p
,

108 (
ıCÚ¡¿štAµlyCachedImpul£Im¶
)
­¶yCachedImpul£
,

109 (
ıCÚ¡¿štAµlyImpul£Im¶
)
­¶yImpul£
,

110 (
ıCÚ¡¿štG‘Impul£Im¶
)
g‘Impul£
,

113 
ıGrooveJošt
 *

114 
	$ıGrooveJoštAÎoc
()

116  (
ıGrooveJošt
 *)
	`ıÿÎoc
(1, (cpGrooveJoint));

117 
	}
}

119 
ıGrooveJošt
 *

120 
	$ıGrooveJoštIn™
(
ıGrooveJošt
 *
jošt
, 
ıBody
 *
a
, cpBody *
b
, 
ıVeù
 
groove_a
, cpVeù 
groove_b
, cpVeù 
ªchÜB
)

122 
	`ıCÚ¡¿štIn™
((
ıCÚ¡¿št
 *)
jošt
, &
kÏss
, 
a
, 
b
);

124 
jošt
->
grv_a
 = 
groove_a
;

125 
jošt
->
grv_b
 = 
groove_b
;

126 
jošt
->
grv_n
 = 
	`ıv³½
(
	`ıvnÜm®ize
(
	`ıvsub
(
groove_b
, 
groove_a
)));

127 
jošt
->
ªchÜB
 =‡nchorB;

129 
jošt
->
jAcc
 = 
ıvz”o
;

131  
jošt
;

132 
	}
}

134 
ıCÚ¡¿št
 *

135 
	$ıGrooveJoštNew
(
ıBody
 *
a
, cpBody *
b
, 
ıVeù
 
groove_a
, cpVeù 
groove_b
, cpVeù 
ªchÜB
)

137  (
ıCÚ¡¿št
 *)
	`ıGrooveJoštIn™
(
	`ıGrooveJoštAÎoc
(), 
a
, 
b
, 
groove_a
, 
groove_b
, 
ªchÜB
);

138 
	}
}

140 
ıBoŞ


141 
	$ıCÚ¡¿štIsGrooveJošt
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

143  (
cÚ¡¿št
->
kÏss
 == &klass);

144 
	}
}

146 
ıVeù


147 
	$ıGrooveJoštG‘GrooveA
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

149 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsGrooveJošt
(
cÚ¡¿št
), "Constraint is‚ot‡ groove joint.");

150  ((
ıGrooveJošt
 *)
cÚ¡¿št
)->
grv_a
;

151 
	}
}

154 
	$ıGrooveJoštS‘GrooveA
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıVeù
 
v®ue
)

156 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsGrooveJošt
(
cÚ¡¿št
), "Constraint is‚ot‡ groove joint.");

157 
ıGrooveJošt
 *
g
 = (ıGrooveJošˆ*)
cÚ¡¿št
;

159 
g
->
grv_a
 = 
v®ue
;

160 
g
->
grv_n
 = 
	`ıv³½
(
	`ıvnÜm®ize
(
	`ıvsub
(g->
grv_b
, 
v®ue
)));

162 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

163 
	}
}

165 
ıVeù


166 
	$ıGrooveJoštG‘GrooveB
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

168 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsGrooveJošt
(
cÚ¡¿št
), "Constraint is‚ot‡ groove joint.");

169  ((
ıGrooveJošt
 *)
cÚ¡¿št
)->
grv_b
;

170 
	}
}

173 
	$ıGrooveJoštS‘GrooveB
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıVeù
 
v®ue
)

175 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsGrooveJošt
(
cÚ¡¿št
), "Constraint is‚ot‡ groove joint.");

176 
ıGrooveJošt
 *
g
 = (ıGrooveJošˆ*)
cÚ¡¿št
;

178 
g
->
grv_b
 = 
v®ue
;

179 
g
->
grv_n
 = 
	`ıv³½
(
	`ıvnÜm®ize
(
	`ıvsub
(
v®ue
, g->
grv_a
)));

181 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

182 
	}
}

184 
ıVeù


185 
	$ıGrooveJoštG‘AnchÜB
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

187 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsGrooveJošt
(
cÚ¡¿št
), "Constraint is‚ot‡ groove joint.");

188  ((
ıGrooveJošt
 *)
cÚ¡¿št
)->
ªchÜB
;

189 
	}
}

192 
	$ıGrooveJoštS‘AnchÜB
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıVeù
 
ªchÜB
)

194 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsGrooveJošt
(
cÚ¡¿št
), "Constraint is‚ot‡ groove joint.");

195 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

196 ((
ıGrooveJošt
 *)
cÚ¡¿št
)->
ªchÜB
 =‡nchorB;

197 
	}
}

	@../src/chipmunk/cpHashSet.c

22 
	~"chmunk/chmunk_´iv©e.h
"

23 
	~"´ime.h
"

25 
	sıHashS‘Bš
 {

26 *
	m–t
;

27 
ıHashV®ue
 
	mhash
;

28 
ıHashS‘Bš
 *
	mÃxt
;

29 } 
	tıHashS‘Bš
;

31 
	sıHashS‘
 {

32 
	m’Œ›s
, 
	msize
;

34 
ıHashS‘EqlFunc
 
	meql
;

35 *
	mdeçuÉ_v®ue
;

37 
ıHashS‘Bš
 **
	mbË
;

38 
ıHashS‘Bš
 *
	mpoŞedBšs
;

40 
ıA¼ay
 *
	m®loÿ‹dBufãrs
;

44 
	$ıHashS‘F»e
(
ıHashS‘
 *
£t
)

46 if(
£t
){

47 
	`ıä“
(
£t
->
bË
);

49 
	`ıA¼ayF»eEach
(
£t
->
®loÿ‹dBufãrs
, 
ıä“
);

50 
	`ıA¼ayF»e
(
£t
->
®loÿ‹dBufãrs
);

52 
	`ıä“
(
£t
);

54 
	}
}

56 
ıHashS‘
 *

57 
	$ıHashS‘New
(
size
, 
ıHashS‘EqlFunc
 
eqlFunc
)

59 
ıHashS‘
 *
£t
 = (ıHashS‘ *)
	`ıÿÎoc
(1, (cpHashSet));

61 
£t
->
size
 = 
	`Ãxt_´ime
(size);

62 
£t
->
’Œ›s
 = 0;

64 
£t
->
eql
 = 
eqlFunc
;

65 
£t
->
deçuÉ_v®ue
 = 
NULL
;

67 
£t
->
bË
 = (
ıHashS‘Bš
 **)
	`ıÿÎoc
(£t->
size
, (cpHashSetBin *));

68 
£t
->
poŞedBšs
 = 
NULL
;

70 
£t
->
®loÿ‹dBufãrs
 = 
	`ıA¼ayNew
(0);

72  
£t
;

73 
	}
}

76 
	$ıHashS‘S‘DeçuÉV®ue
(
ıHashS‘
 *
£t
, *
deçuÉ_v®ue
)

78 
£t
->
deçuÉ_v®ue
 = default_value;

79 
	}
}

82 
	$£tIsFuÎ
(
ıHashS‘
 *
£t
)

84  (
£t
->
’Œ›s
 >ğ£t->
size
);

85 
	}
}

88 
	$ıHashS‘Resize
(
ıHashS‘
 *
£t
)

91 
ÃwSize
 = 
	`Ãxt_´ime
(
£t
->
size
 + 1);

93 
ıHashS‘Bš
 **
ÃwTabË
 = (ıHashS‘Bš **)
	`ıÿÎoc
(
ÃwSize
, (cpHashSetBin *));

96 
i
=0; i<
£t
->
size
; i++){

98 
ıHashS‘Bš
 *
bš
 = 
£t
->
bË
[
i
];

99 
bš
){

100 
ıHashS‘Bš
 *
Ãxt
 = 
bš
->next;

102 
ıHashV®ue
 
idx
 = 
bš
->
hash
%
ÃwSize
;

103 
bš
->
Ãxt
 = 
ÃwTabË
[
idx
];

104 
ÃwTabË
[
idx
] = 
bš
;

106 
bš
 = 
Ãxt
;

110 
	`ıä“
(
£t
->
bË
);

112 
£t
->
bË
 = 
ÃwTabË
;

113 
£t
->
size
 = 
ÃwSize
;

114 
	}
}

116 
šlše
 

117 
	$»cyşeBš
(
ıHashS‘
 *
£t
, 
ıHashS‘Bš
 *
bš
)

119 
bš
->
Ãxt
 = 
£t
->
poŞedBšs
;

120 
£t
->
poŞedBšs
 = 
bš
;

121 
bš
->
–t
 = 
NULL
;

122 
	}
}

124 
ıHashS‘Bš
 *

125 
	$g‘Unu£dBš
(
ıHashS‘
 *
£t
)

127 
ıHashS‘Bš
 *
bš
 = 
£t
->
poŞedBšs
;

129 if(
bš
){

130 
£t
->
poŞedBšs
 = 
bš
->
Ãxt
;

131  
bš
;

134 
couÁ
 = 
CP_BUFFER_BYTES
/(
ıHashS‘Bš
);

135 
	`ıAs£¹H¬d
(
couÁ
, "Internal Error: Buffer size isoo small.");

137 
ıHashS‘Bš
 *
bufãr
 = (ıHashS‘Bš *)
	`ıÿÎoc
(1, 
CP_BUFFER_BYTES
);

138 
	`ıA¼ayPush
(
£t
->
®loÿ‹dBufãrs
, 
bufãr
);

141 
i
=1; i<
couÁ
; i++è
	`»cyşeBš
(
£t
, 
bufãr
 + i);

142  
bufãr
;

144 
	}
}

147 
	$ıHashS‘CouÁ
(
ıHashS‘
 *
£t
)

149  
£t
->
’Œ›s
;

150 
	}
}

153 
	$ıHashS‘In£¹
(
ıHashS‘
 *
£t
, 
ıHashV®ue
 
hash
, *
±r
, 
ıHashS‘T¿nsFunc
 
Œªs
, *
d©a
)

155 
ıHashV®ue
 
idx
 = 
hash
%
£t
->
size
;

158 
ıHashS‘Bš
 *
bš
 = 
£t
->
bË
[
idx
];

159 
bš
 && !
£t
->
	`eql
(
±r
, bš->
–t
))

160 
bš
 = bš->
Ãxt
;

163 if(!
bš
){

164 
bš
 = 
	`g‘Unu£dBš
(
£t
);

165 
bš
->
hash
 = hash;

166 
bš
->
–t
 = (
Œªs
 ? 
	`Œªs
(
±r
, 
d©a
) : data);

168 
bš
->
Ãxt
 = 
£t
->
bË
[
idx
];

169 
£t
->
bË
[
idx
] = 
bš
;

171 
£t
->
’Œ›s
++;

172 if(
	`£tIsFuÎ
(
£t
)è
	`ıHashS‘Resize
(set);

175  
bš
->
–t
;

176 
	}
}

179 
	$ıHashS‘Remove
(
ıHashS‘
 *
£t
, 
ıHashV®ue
 
hash
, *
±r
)

181 
ıHashV®ue
 
idx
 = 
hash
%
£t
->
size
;

183 
ıHashS‘Bš
 **
´ev_±r
 = &
£t
->
bË
[
idx
];

184 
ıHashS‘Bš
 *
bš
 = 
£t
->
bË
[
idx
];

187 
bš
 && !
£t
->
	`eql
(
±r
, bš->
–t
)){

188 
´ev_±r
 = &
bš
->
Ãxt
;

189 
bš
 = bš->
Ãxt
;

193 if(
bš
){

195 (*
´ev_±r
èğ
bš
->
Ãxt
;

196 
£t
->
’Œ›s
--;

198 *
–t
 = 
bš
->elt;

199 
	`»cyşeBš
(
£t
, 
bš
);

201  
–t
;

204  
NULL
;

205 
	}
}

208 
	$ıHashS‘Fšd
(
ıHashS‘
 *
£t
, 
ıHashV®ue
 
hash
, *
±r
)

210 
ıHashV®ue
 
idx
 = 
hash
%
£t
->
size
;

211 
ıHashS‘Bš
 *
bš
 = 
£t
->
bË
[
idx
];

212 
bš
 && !
£t
->
	`eql
(
±r
, bš->
–t
))

213 
bš
 = bš->
Ãxt
;

215  (
bš
 ? bš->
–t
 : 
£t
->
deçuÉ_v®ue
);

216 
	}
}

219 
	$ıHashS‘Each
(
ıHashS‘
 *
£t
, 
ıHashS‘I‹¿tÜFunc
 
func
, *
d©a
)

221 
i
=0; i<
£t
->
size
; i++){

222 
ıHashS‘Bš
 *
bš
 = 
£t
->
bË
[
i
];

223 
bš
){

224 
ıHashS‘Bš
 *
Ãxt
 = 
bš
->next;

225 
	`func
(
bš
->
–t
, 
d©a
);

226 
bš
 = 
Ãxt
;

229 
	}
}

232 
	$ıHashS‘F‹r
(
ıHashS‘
 *
£t
, 
ıHashS‘F‹rFunc
 
func
, *
d©a
)

234 
i
=0; i<
£t
->
size
; i++){

236 
ıHashS‘Bš
 **
´ev_±r
 = &
£t
->
bË
[
i
];

237 
ıHashS‘Bš
 *
bš
 = 
£t
->
bË
[
i
];

238 
bš
){

239 
ıHashS‘Bš
 *
Ãxt
 = 
bš
->next;

241 if(
	`func
(
bš
->
–t
, 
d©a
)){

242 
´ev_±r
 = &
bš
->
Ãxt
;

244 (*
´ev_±r
èğ
Ãxt
;

246 
£t
->
’Œ›s
--;

247 
	`»cyşeBš
(
£t
, 
bš
);

250 
bš
 = 
Ãxt
;

253 
	}
}

	@../src/chipmunk/cpHastySpace.c

4 
	~<¡dlib.h
>

5 
	~<¡dio.h
>

7 
	~<±h»ad.h
>

9 
	~<sys/sysùl.h
>

11 
	~"chmunk/chmunk_´iv©e.h
"

12 
	~"chmunk/ıHa¡yS·û.h
"

17 #ià
__ARM_NEON__


18 
	~<¬m_ÃÚ.h
>

22 #ià
defšed
(
__şªg_majÜ__
) && __clang_major__ < 3

23 #”rÜ 
Comp”
 
nÙ
 
suµÜ‹d
.

26 #ià
CP_USE_DOUBLES


27 #ià!
__¬m64


28 #”rÜ 
CªnÙ
 
u£
 
CP_USE_DOUBLES
 
Ú
 32 
b™
 
ARM
.

31 
æßt64_t
 
	tıFlßt_t
;

32 
æßt64x2_t
 
	tıFlßtx2_t
;

33 
	#vld
 
vld1q_f64


	)

34 
	#vdup_n
 
vdupq_n_f64


	)

35 
	#v¡
 
v¡1q_f64


	)

36 
	#v¡_ÏÃ
 
v¡1q_ÏÃ_f64


	)

37 
	#vadd
 
vaddq_f64


	)

38 
	#vsub
 
vsubq_f64


	)

39 
	#v·dd
 
v·ddq_f64


	)

40 
	#vmul
 
vmulq_f64


	)

41 
	#vmul_n
 
vmulq_n_f64


	)

42 
	#vÃg
 
vÃgq_f64


	)

43 
	#vg‘_ÏÃ
 
vg‘q_ÏÃ_f64


	)

44 
	#v£t_ÏÃ
 
v£tq_ÏÃ_f64


	)

45 
	#vmš
 
vmšq_f64


	)

46 
	#vmax
 
vmaxq_f64


	)

47 
	#v»v
(
__a
è
	`__butš_shufæeveùÜ
(__a, __a, 1, 0)

	)

49 
æßt32_t
 
	tıFlßt_t
;

50 
æßt32x2_t
 
	tıFlßtx2_t
;

51 
	#vld
 
vld1_f32


	)

52 
	#vdup_n
 
vdup_n_f32


	)

53 
	#v¡
 
v¡1_f32


	)

54 
	#v¡_ÏÃ
 
v¡1_ÏÃ_f32


	)

55 
	#vadd
 
vadd_f32


	)

56 
	#vsub
 
vsub_f32


	)

57 
	#v·dd
 
v·dd_f32


	)

58 
	#vmul
 
vmul_f32


	)

59 
	#vmul_n
 
vmul_n_f32


	)

60 
	#vÃg
 
vÃg_f32


	)

61 
	#vg‘_ÏÃ
 
vg‘_ÏÃ_f32


	)

62 
	#v£t_ÏÃ
 
v£t_ÏÃ_f32


	)

63 
	#vmš
 
vmš_f32


	)

64 
	#vmax
 
vmax_f32


	)

65 
	#v»v
 
v»v64_f32


	)

71 
šlše
 
ıFlßtx2_t


72 
	$vmake
(
ıFlßt_t
 
x
, cpFlßt_ˆ
y
)

81  (
ıFlßtx2_t
){
x
, 
y
};

82 
	}
}

85 
	$ıArb™”AµlyImpul£_NEON
(
ıArb™”
 *
¬b
)

87 
ıBody
 *
a
 = 
¬b
->
body_a
;

88 
ıBody
 *
b
 = 
¬b
->
body_b
;

89 
ıFlßtx2_t
 
surçû_vr
 = 
	`vld
((
ıFlßt_t
 *)&
¬b
->surface_vr);

90 
ıFlßtx2_t
 
n
 = 
	`vld
((
ıFlßt_t
 *)&
¬b
->n);

91 
ıFlßt_t
 
äiùiÚ
 = 
¬b
->
u
;

93 
numCÚùs
 = 
¬b
->
couÁ
;

94 
ıCÚù
 *
cÚùs
 = 
¬b
->contacts;

95 
i
=0; i<
numCÚùs
; i++){

96 
ıCÚù
 *
cÚ
 = 
cÚùs
 + 
i
;

97 
ıFlßtx2_t
 
r1
 = 
	`vld
((
ıFlßt_t
 *)&
cÚ
->r1);

98 
ıFlßtx2_t
 
r2
 = 
	`vld
((
ıFlßt_t
 *)&
cÚ
->r2);

100 
ıFlßtx2_t
 
³½
 = 
	`vmake
(-1.0, 1.0);

101 
ıFlßtx2_t
 
r1p
 = 
	`vmul
(
	`v»v
(
r1
), 
³½
);

102 
ıFlßtx2_t
 
r2p
 = 
	`vmul
(
	`v»v
(
r2
), 
³½
);

104 
ıFlßtx2_t
 
vBŸs_a
 = 
	`vld
((
ıFlßt_t
 *)&
a
->
v_bŸs
);

105 
ıFlßtx2_t
 
vBŸs_b
 = 
	`vld
((
ıFlßt_t
 *)&
b
->
v_bŸs
);

106 
ıFlßtx2_t
 
wBŸs
 = 
	`vmake
(
a
->
w_bŸs
, 
b
->w_bias);

108 
ıFlßtx2_t
 
vb1
 = 
	`vadd
(
vBŸs_a
, 
	`vmul_n
(
r1p
, 
	`vg‘_ÏÃ
(
wBŸs
, 0)));

109 
ıFlßtx2_t
 
vb2
 = 
	`vadd
(
vBŸs_b
, 
	`vmul_n
(
r2p
, 
	`vg‘_ÏÃ
(
wBŸs
, 1)));

110 
ıFlßtx2_t
 
vbr
 = 
	`vsub
(
vb2
, 
vb1
);

112 
ıFlßtx2_t
 
v_a
 = 
	`vld
((
ıFlßt_t
 *)&
a
->
v
);

113 
ıFlßtx2_t
 
v_b
 = 
	`vld
((
ıFlßt_t
 *)&
b
->
v
);

114 
ıFlßtx2_t
 
w
 = 
	`vmake
(
a
->w, 
b
->w);

115 
ıFlßtx2_t
 
v1
 = 
	`vadd
(
v_a
, 
	`vmul_n
(
r1p
, 
	`vg‘_ÏÃ
(
w
, 0)));

116 
ıFlßtx2_t
 
v2
 = 
	`vadd
(
v_b
, 
	`vmul_n
(
r2p
, 
	`vg‘_ÏÃ
(
w
, 1)));

117 
ıFlßtx2_t
 
vr
 = 
	`vsub
(
v2
, 
v1
);

119 
ıFlßtx2_t
 
vbn_vº
 = 
	`v·dd
(
	`vmul
(
vbr
, 
n
), vmul(
vr
,‚));

121 
ıFlßtx2_t
 
v_off£t
 = 
	`vmake
(
cÚ
->
bŸs
, -cÚ->
bounû
);

122 
ıFlßtx2_t
 
jOld
 = 
	`vmake
(
cÚ
->
jBŸs
, cÚ->
jnAcc
);

123 
ıFlßtx2_t
 
jbn_jn
 = 
	`vmul_n
(
	`vsub
(
v_off£t
, 
vbn_vº
), 
cÚ
->
nMass
);

124 
jbn_jn
 = 
	`vmax
(
	`vadd
(
jOld
, jbn_jn), 
	`vdup_n
(0.0));

125 
ıFlßtx2_t
 
jAµly
 = 
	`vsub
(
jbn_jn
, 
jOld
);

127 
ıFlßtx2_t
 
t
 = 
	`vmul
(
	`v»v
(
n
), 
³½
);

128 
ıFlßtx2_t
 
v¹_tmp
 = 
	`vmul
(
	`vadd
(
vr
, 
surçû_vr
), 
t
);

129 
ıFlßtx2_t
 
v¹
 = 
	`v·dd
(
v¹_tmp
, vrt_tmp);

131 
ıFlßtx2_t
 
jtOld
 = {}; jtOld = 
	`v£t_ÏÃ
(
cÚ
->
jtAcc
, jtOld, 0);

132 
ıFlßtx2_t
 
jtMax
 = 
	`v»v
(
	`vmul_n
(
jbn_jn
, 
äiùiÚ
));

133 
ıFlßtx2_t
 
jt
 = 
	`vmul_n
(
v¹
, -
cÚ
->
tMass
);

134 
jt
 = 
	`vmax
(
	`vÃg
(
jtMax
), 
	`vmš
(
	`vadd
(
jtOld
, jt), jtMax));

135 
ıFlßtx2_t
 
jtAµly
 = 
	`vsub
(
jt
, 
jtOld
);

137 
ıFlßtx2_t
 
i_šv
 = 
	`vmake
(-
a
->i_šv, 
b
->i_inv);

138 
ıFlßtx2_t
 
Å”p
 = 
	`vmake
(1.0, -1.0);

140 
ıFlßtx2_t
 
jBŸs
 = 
	`vmul_n
(
n
, 
	`vg‘_ÏÃ
(
jAµly
, 0));

141 
ıFlßtx2_t
 
jBŸsCross
 = 
	`vmul
(
	`v»v
(
jBŸs
), 
Å”p
);

142 
ıFlßtx2_t
 
bŸsCros£s
 = 
	`v·dd
(
	`vmul
(
r1
, 
jBŸsCross
), vmul(
r2
, jBiasCross));

143 
wBŸs
 = 
	`vadd
(wBŸs, 
	`vmul
(
i_šv
, 
bŸsCros£s
));

145 
vBŸs_a
 = 
	`vsub
(vBŸs_a, 
	`vmul_n
(
jBŸs
, 
a
->
m_šv
));

146 
vBŸs_b
 = 
	`vadd
(vBŸs_b, 
	`vmul_n
(
jBŸs
, 
b
->
m_šv
));

148 
ıFlßtx2_t
 
j
 = 
	`vadd
(
	`vmul_n
(
n
, 
	`vg‘_ÏÃ
(
jAµly
, 1)), vmul_n(
t
, vg‘_ÏÃ(
jtAµly
, 0)));

149 
ıFlßtx2_t
 
jCross
 = 
	`vmul
(
	`v»v
(
j
), 
Å”p
);

150 
ıFlßtx2_t
 
üos£s
 = 
	`v·dd
(
	`vmul
(
r1
, 
jCross
), vmul(
r2
, jCross));

151 
w
 = 
	`vadd
(w, 
	`vmul
(
i_šv
, 
üos£s
));

153 
v_a
 = 
	`vsub
(v_a, 
	`vmul_n
(
j
, 
a
->
m_šv
));

154 
v_b
 = 
	`vadd
(v_b, 
	`vmul_n
(
j
, 
b
->
m_šv
));

157 
	`v¡
((
ıFlßt_t
 *)&
a
->
v_bŸs
, 
vBŸs_a
);

158 
	`v¡
((
ıFlßt_t
 *)&
b
->
v_bŸs
, 
vBŸs_b
);

159 
	`v¡_ÏÃ
((
ıFlßt_t
 *)&
a
->
w_bŸs
, 
wBŸs
, 0);

160 
	`v¡_ÏÃ
((
ıFlßt_t
 *)&
b
->
w_bŸs
, 
wBŸs
, 1);

162 
	`v¡
((
ıFlßt_t
 *)&
a
->
v
, 
v_a
);

163 
	`v¡
((
ıFlßt_t
 *)&
b
->
v
, 
v_b
);

164 
	`v¡_ÏÃ
((
ıFlßt_t
 *)&
a
->
w
, w, 0);

165 
	`v¡_ÏÃ
((
ıFlßt_t
 *)&
b
->
w
, w, 1);

167 
	`v¡_ÏÃ
((
ıFlßt_t
 *)&
cÚ
->
jBŸs
, 
jbn_jn
, 0);

168 
	`v¡_ÏÃ
((
ıFlßt_t
 *)&
cÚ
->
jnAcc
, 
jbn_jn
, 1);

169 
	`v¡_ÏÃ
((
ıFlßt_t
 *)&
cÚ
->
jtAcc
, 
jt
, 0);

171 
	}
}

179 
	#MAX_THREADS
 2

	)

181 
	sTh»adCÚ‹xt
 {

182 
±h»ad_t
 
	mth»ad
;

183 
ıHa¡yS·û
 *
	m¥aû
;

184 
	mth»ad_num
;

187 (*
	tıHa¡yS·ûWÜkFunùiÚ
)(
	tıS·û
 *
	t¥aû
, 
	twÜk”
, 
	twÜk”_couÁ
);

189 
	sıHa¡yS·û
 {

190 
ıS·û
 
¥aû
;

193 
num_th»ads
;

196 
num_wÜkšg
;

199 
cÚ¡¿št_couÁ_th»shŞd
;

201 
±h»ad_mu‹x_t
 
mu‹x
;

202 
±h»ad_cÚd_t
 
cÚd_wÜk
, 
cÚd_»sume
;

205 
ıHa¡yS·ûWÜkFunùiÚ
 
wÜk
;

207 
Th»adCÚ‹xt
 
wÜk”s
[
MAX_THREADS
 - 1];

211 
	$WÜk”Th»adLoİ
(
Th»adCÚ‹xt
 *
cÚ‹xt
)

213 
ıHa¡yS·û
 *
ha¡y
 = 
cÚ‹xt
->
¥aû
;

215 
th»ad
 = 
cÚ‹xt
->
th»ad_num
;

216 
num_th»ads
 = 
ha¡y
->num_threads;

219 
	`±h»ad_mu‹x_lock
(&
ha¡y
->
mu‹x
); {

220 if(--
ha¡y
->
num_wÜkšg
 == 0){

221 
	`±h»ad_cÚd_sigÇl
(&
ha¡y
->
cÚd_»sume
);

224 
	`±h»ad_cÚd_wa™
(&
ha¡y
->
cÚd_wÜk
, &ha¡y->
mu‹x
);

225 } 
	`±h»ad_mu‹x_uÆock
(&
ha¡y
->
mu‹x
);

227 
ıHa¡yS·ûWÜkFunùiÚ
 
func
 = 
ha¡y
->
wÜk
;

228 if(
func
){

229 
ha¡y
->
	`wÜk
(&ha¡y->
¥aû
, 
th»ad
, 
num_th»ads
);

235  
NULL
;

236 
	}
}

239 
	$RunWÜk”s
(
ıHa¡yS·û
 *
ha¡y
, 
ıHa¡yS·ûWÜkFunùiÚ
 
func
)

241 
ha¡y
->
num_wÜkšg
 = ha¡y->
num_th»ads
 - 1;

242 
ha¡y
->
wÜk
 = 
func
;

244 if(
ha¡y
->
num_wÜkšg
 > 0){

245 
	`±h»ad_mu‹x_lock
(&
ha¡y
->
mu‹x
); {

246 
	`±h»ad_cÚd_brßdÿ¡
(&
ha¡y
->
cÚd_wÜk
);

247 } 
	`±h»ad_mu‹x_uÆock
(&
ha¡y
->
mu‹x
);

249 
	`func
((
ıS·û
 *)
ha¡y
, 0, ha¡y->
num_th»ads
);

251 
	`±h»ad_mu‹x_lock
(&
ha¡y
->
mu‹x
); {

252 if(
ha¡y
->
num_wÜkšg
 > 0){

253 
	`±h»ad_cÚd_wa™
(&
ha¡y
->
cÚd_»sume
, &ha¡y->
mu‹x
);

255 } 
	`±h»ad_mu‹x_uÆock
(&
ha¡y
->
mu‹x
);

257 
	`func
((
ıS·û
 *)
ha¡y
, 0, ha¡y->
num_th»ads
);

260 
ha¡y
->
wÜk
 = 
NULL
;

261 
	}
}

264 
	$SŞv”
(
ıS·û
 *
¥aû
, 
wÜk”
, 
wÜk”_couÁ
)

266 
ıA¼ay
 *
cÚ¡¿šts
 = 
¥aû
->constraints;

267 
ıA¼ay
 *
¬b™”s
 = 
¥aû
->arbiters;

269 
ıFlßt
 
dt
 = 
¥aû
->
cu¼_dt
;

270 
™”©iÚs
 = (
¥aû
->™”©iÚ + 
wÜk”_couÁ
 - 1)/worker_count;

272 
i
=0; i<
™”©iÚs
; i++){

273 
j
=0; j<
¬b™”s
->
num
; j++){

274 
ıArb™”
 *
¬b
 = (ıArb™” *)
¬b™”s
->
¬r
[
j
];

275 #ifdeà
__ARM_NEON__


276 
	`ıArb™”AµlyImpul£_NEON
(
¬b
);

278 
	`ıArb™”AµlyImpul£
(
¬b
);

282 
j
=0; j<
cÚ¡¿šts
->
num
; j++){

283 
ıCÚ¡¿št
 *
cÚ¡¿št
 = (ıCÚ¡¿šˆ*)
cÚ¡¿šts
->
¬r
[
j
];

284 
cÚ¡¿št
->
kÏss
->
	`­¶yImpul£
(cÚ¡¿št, 
dt
);

287 
	}
}

292 
	$H®tTh»ads
(
ıHa¡yS·û
 *
ha¡y
)

294 
±h»ad_mu‹x_t
 *
mu‹x
 = &
ha¡y
->mutex;

295 
	`±h»ad_mu‹x_lock
(
mu‹x
); {

296 
ha¡y
->
wÜk
 = 
NULL
;

297 
	`±h»ad_cÚd_brßdÿ¡
(&
ha¡y
->
cÚd_wÜk
);

298 } 
	`±h»ad_mu‹x_uÆock
(
mu‹x
);

300 
i
=0; i<(
ha¡y
->
num_th»ads
-1); i++){

301 
	`±h»ad_još
(
ha¡y
->
wÜk”s
[
i
].
th»ad
, 
NULL
);

303 
	}
}

306 
	$ıHa¡yS·ûS‘Th»ads
(
ıS·û
 *
¥aû
, 
th»ads
)

308 #ià
TARGET_IPHONE_SIMULATOR
 == 1

311 
th»ads
 = 1;

314 
ıHa¡yS·û
 *
ha¡y
 = (ıHa¡yS·û *)
¥aû
;

315 
	`H®tTh»ads
(
ha¡y
);

317 #ifdeà
__APPLE__


318 if(
th»ads
 == 0){

319 
size_t
 
size
 = (
th»ads
);

320 
	`sysùlbyÇme
("hw.nıu", &
th»ads
, &
size
, 
NULL
, 0);

323 if(
th»ads
 == 0)hreads = 1;

326 
ha¡y
->
num_th»ads
 = (
th»ads
 < 
MAX_THREADS
 ?hreads : MAX_THREADS);

327 
ha¡y
->
num_wÜkšg
 = ha¡y->
num_th»ads
 - 1;

330 if(
ha¡y
->
num_wÜkšg
 > 0){

331 
	`±h»ad_mu‹x_lock
(&
ha¡y
->
mu‹x
);

332 
i
=0; i<(
ha¡y
->
num_th»ads
-1); i++){

333 
ha¡y
->
wÜk”s
[
i
].
¥aû
 = hasty;

334 
ha¡y
->
wÜk”s
[
i
].
th»ad_num
 = i + 1;

336 
	`±h»ad_ü—‹
(&
ha¡y
->
wÜk”s
[
i
].
th»ad
, 
NULL
, (*)
WÜk”Th»adLoİ
, &hasty->workers[i]);

339 
	`±h»ad_cÚd_wa™
(&
ha¡y
->
cÚd_»sume
, &ha¡y->
mu‹x
);

340 
	`±h»ad_mu‹x_uÆock
(&
ha¡y
->
mu‹x
);

342 
	}
}

345 
	$ıHa¡yS·ûG‘Th»ads
(
ıS·û
 *
¥aû
)

347  ((
ıHa¡yS·û
 *)
¥aû
)->
num_th»ads
;

348 
	}
}

352 
ıS·û
 *

353 
	$ıHa¡yS·ûNew
()

355 
ıHa¡yS·û
 *
ha¡y
 = (ıHa¡yS·û *)
	`ıÿÎoc
(1, (cpHastySpace));

356 
	`ıS·ûIn™
((
ıS·û
 *)
ha¡y
);

358 
	`±h»ad_mu‹x_š™
(&
ha¡y
->
mu‹x
, 
NULL
);

359 
	`±h»ad_cÚd_š™
(&
ha¡y
->
cÚd_wÜk
, 
NULL
);

360 
	`±h»ad_cÚd_š™
(&
ha¡y
->
cÚd_»sume
, 
NULL
);

363 
ha¡y
->
cÚ¡¿št_couÁ_th»shŞd
 = 50;

366 
ha¡y
->
num_th»ads
 = 1;

367 
	`ıHa¡yS·ûS‘Th»ads
((
ıS·û
 *)
ha¡y
, 1);

369  (
ıS·û
 *)
ha¡y
;

370 
	}
}

373 
	$ıHa¡yS·ûF»e
(
ıS·û
 *
¥aû
)

375 
ıHa¡yS·û
 *
ha¡y
 = (ıHa¡yS·û *)
¥aû
;

377 
	`H®tTh»ads
(
ha¡y
);

379 
	`±h»ad_mu‹x_de¡roy
(&
ha¡y
->
mu‹x
);

380 
	`±h»ad_cÚd_de¡roy
(&
ha¡y
->
cÚd_wÜk
);

381 
	`±h»ad_cÚd_de¡roy
(&
ha¡y
->
cÚd_»sume
);

383 
	`ıS·ûF»e
(
¥aû
);

384 
	}
}

387 
	$ıHa¡yS·ûS‹p
(
ıS·û
 *
¥aû
, 
ıFlßt
 
dt
)

390 if(
dt
 == 0.0f) ;

392 
¥aû
->
¡amp
++;

394 
ıFlßt
 
´ev_dt
 = 
¥aû
->
cu¼_dt
;

395 
¥aû
->
cu¼_dt
 = 
dt
;

397 
ıA¼ay
 *
bod›s
 = 
¥aû
->
dyÇmicBod›s
;

398 
ıA¼ay
 *
cÚ¡¿šts
 = 
¥aû
->constraints;

399 
ıA¼ay
 *
¬b™”s
 = 
¥aû
->arbiters;

402 
i
=0; i<
¬b™”s
->
num
; i++){

403 
ıArb™”
 *
¬b
 = (ıArb™” *)
¬b™”s
->
¬r
[
i
];

404 
¬b
->
¡©e
 = 
CP_ARBITER_STATE_NORMAL
;

407 if(!
	`ıBodyIsSË•šg
(
¬b
->
body_a
è&& !ıBodyIsSË•šg×rb->
body_b
)){

408 
	`ıArb™”UÁh»ad
(
¬b
);

411 
¬b™”s
->
num
 = 0;

413 
	`ıS·ûLock
(
¥aû
); {

415 
i
=0; i<
bod›s
->
num
; i++){

416 
ıBody
 *
body
 = (ıBody *)
bod›s
->
¬r
[
i
];

417 
body
->
	`pos™iÚ_func
(body, 
dt
);

421 
	`ıS·ûPushF»shCÚùBufãr
(
¥aû
);

422 
	`ıS·tŸlIndexEach
(
¥aû
->
dyÇmicSh­es
, (
ıS·tŸlIndexI‹¿tÜFunc
)
ıSh­eUpd©eFunc
, 
NULL
);

423 
	`ıS·tŸlIndexRešdexQu”y
(
¥aû
->
dyÇmicSh­es
, (
ıS·tŸlIndexQu”yFunc
)
ıS·ûCŞlideSh­es
, space);

424 } 
	`ıS·ûUÆock
(
¥aû
, 
ıF®£
);

427 
	`ıS·ûProûssCompÚ’ts
(
¥aû
, 
dt
);

429 
	`ıS·ûLock
(
¥aû
); {

431 
	`ıHashS‘F‹r
(
¥aû
->
ÿchedArb™”s
, (
ıHashS‘F‹rFunc
)
ıS·ûArb™”S‘F‹r
, space);

434 
ıFlßt
 
¦İ
 = 
¥aû
->
cŞlisiÚSlİ
;

435 
ıFlßt
 
bŸsCÛf
 = 1.0à- 
	`ıåow
(
¥aû
->
cŞlisiÚBŸs
, 
dt
);

436 
i
=0; i<
¬b™”s
->
num
; i++){

437 
	`ıArb™”P»S‹p
((
ıArb™”
 *)
¬b™”s
->
¬r
[
i
], 
dt
, 
¦İ
, 
bŸsCÛf
);

440 
i
=0; i<
cÚ¡¿šts
->
num
; i++){

441 
ıCÚ¡¿št
 *
cÚ¡¿št
 = (ıCÚ¡¿šˆ*)
cÚ¡¿šts
->
¬r
[
i
];

443 
ıCÚ¡¿štP»SŞveFunc
 
´eSŞve
 = 
cÚ¡¿št
->preSolve;

444 if(
´eSŞve
è
	`´eSŞve
(
cÚ¡¿št
, 
¥aû
);

446 
cÚ¡¿št
->
kÏss
->
	`´eS‹p
(cÚ¡¿št, 
dt
);

450 
ıFlßt
 
dampšg
 = 
	`ıåow
(
¥aû
->dampšg, 
dt
);

451 
ıVeù
 
g¿v™y
 = 
¥aû
->gravity;

452 
i
=0; i<
bod›s
->
num
; i++){

453 
ıBody
 *
body
 = (ıBody *)
bod›s
->
¬r
[
i
];

454 
body
->
	`v–oc™y_func
(body, 
g¿v™y
, 
dampšg
, 
dt
);

458 
ıFlßt
 
dt_cÛf
 = (
´ev_dt
 =ğ0.0à? 0.0à: 
dt
/prev_dt);

459 
i
=0; i<
¬b™”s
->
num
; i++){

460 
	`ıArb™”AµlyCachedImpul£
((
ıArb™”
 *)
¬b™”s
->
¬r
[
i
], 
dt_cÛf
);

463 
i
=0; i<
cÚ¡¿šts
->
num
; i++){

464 
ıCÚ¡¿št
 *
cÚ¡¿št
 = (ıCÚ¡¿šˆ*)
cÚ¡¿šts
->
¬r
[
i
];

465 
cÚ¡¿št
->
kÏss
->
	`­¶yCachedImpul£
(cÚ¡¿št, 
dt_cÛf
);

469 
ıHa¡yS·û
 *
ha¡y
 = (ıHa¡yS·û *)
¥aû
;

470 if(()(
¬b™”s
->
num
 + 
cÚ¡¿šts
->numè> 
ha¡y
->
cÚ¡¿št_couÁ_th»shŞd
){

471 
	`RunWÜk”s
(
ha¡y
, 
SŞv”
);

473 
	`SŞv”
(
¥aû
, 0, 1);

477 
i
=0; i<
cÚ¡¿šts
->
num
; i++){

478 
ıCÚ¡¿št
 *
cÚ¡¿št
 = (ıCÚ¡¿šˆ*)
cÚ¡¿šts
->
¬r
[
i
];

480 
ıCÚ¡¿štPo¡SŞveFunc
 
po¡SŞve
 = 
cÚ¡¿št
->postSolve;

481 if(
po¡SŞve
è
	`po¡SŞve
(
cÚ¡¿št
, 
¥aû
);

485 
i
=0; i<
¬b™”s
->
num
; i++){

486 
ıArb™”
 *
¬b
 = (ıArb™” *è
¬b™”s
->
¬r
[
i
];

488 
ıCŞlisiÚHªdËr
 *
hªdËr
 = 
¬b
->handler;

489 
hªdËr
->
	`po¡SŞveFunc
(
¬b
, 
¥aû
, hªdËr->
u£rD©a
);

491 } 
	`ıS·ûUÆock
(
¥aû
, 
ıTrue
);

492 
	}
}

	@../src/chipmunk/cpMarch.c

4 
	~<¡dlib.h
>

5 
	~<¡dio.h
>

6 
	~<m©h.h
>

8 
	~"chmunk/chmunk.h
"

9 
	~"chmunk/ıM¬ch.h
"

12 (*
	tıM¬chC–lFunc
)(

13 
	tıFlßt
 
	tt
, cpFlßˆ
	ta
, cpFlßˆ
	tb
, cpFlßˆ
	tc
, cpFlßˆ
	td
,

14 
	tıFlßt
 
	tx0
, cpFlßˆ
	tx1
, cpFlßˆ
	ty0
, cpFlßˆ
	ty1
,

15 
	tıM¬chSegm’tFunc
 
	t£gm’t
, *
	t£gm’t_d©a


20 
	$ıM¬chC–ls
(

21 
ıBB
 
bb
, 
x_§m¶es
, 
y_§m¶es
, 
ıFlßt
 
t
,

22 
ıM¬chSegm’tFunc
 
£gm’t
, *
£gm’t_d©a
,

23 
ıM¬chSam¶eFunc
 
§m¶e
, *
§m¶e_d©a
,

24 
ıM¬chC–lFunc
 
ûÎ


26 
ıFlßt
 
x_d’om
 = 1.0/(ıFlßt)(
x_§m¶es
 - 1);

27 
ıFlßt
 
y_d’om
 = 1.0/(ıFlßt)(
y_§m¶es
 - 1);

32 
ıFlßt
 *
bufãr
 = (ıFlßˆ*)
	`ıÿÎoc
(
x_§m¶es
, (cpFloat));

33 
i
=0; i<
x_§m¶es
; i++è
bufãr
[i] = 
	`§m¶e
(
	`ıv
(
	`ıæ”p
(
bb
.
l
, bb.
r
, i*
x_d’om
), bb.
b
), 
§m¶e_d©a
);

35 
j
=0; j<
y_§m¶es
-1; j++){

36 
ıFlßt
 
y0
 = 
	`ıæ”p
(
bb
.
b
, bb.
t
, (
j
+0)*
y_d’om
);

37 
ıFlßt
 
y1
 = 
	`ıæ”p
(
bb
.
b
, bb.
t
, (
j
+1)*
y_d’om
);

39 
ıFlßt
 
a
, 
b
 = 
bufãr
[0];

40 
ıFlßt
 
c
, 
d
 = 
	`§m¶e
(
	`ıv
(
bb
.
l
, 
y1
), 
§m¶e_d©a
);

41 
bufãr
[0] = 
d
;

43 
i
=0; i<
x_§m¶es
-1; i++){

44 
ıFlßt
 
x0
 = 
	`ıæ”p
(
bb
.
l
, bb.
r
, (
i
+0)*
x_d’om
);

45 
ıFlßt
 
x1
 = 
	`ıæ”p
(
bb
.
l
, bb.
r
, (
i
+1)*
x_d’om
);

47 
a
 = 
b
, b = 
bufãr
[
i
 + 1];

48 
c
 = 
d
, d = 
	`§m¶e
(
	`ıv
(
x1
, 
y1
), 
§m¶e_d©a
);

49 
bufãr
[
i
 + 1] = 
d
;

51 
	`ûÎ
(
t
, 
a
, 
b
, 
c
, 
d
, 
x0
, 
x1
, 
y0
, 
y1
, 
£gm’t
, 
£gm’t_d©a
);

55 
	`ıä“
(
bufãr
);

56 
	}
}

60 
šlše
 

61 
	$£g
(
ıVeù
 
v0
, cpVeù 
v1
, 
ıM¬chSegm’tFunc
 
f
, *
d©a
)

63 if(!
	`ıveql
(
v0
, 
v1
)è
	`f
(v1, v0, 
d©a
);

64 
	}
}

67 
šlše
 
ıFlßt


68 
	$midË½
(
ıFlßt
 
x0
, cpFlßˆ
x1
, cpFlßˆ
s0
, cpFlßˆ
s1
, cpFlßˆ
t
)

70  
	`ıæ”p
(
x0
, 
x1
, (
t
 - 
s0
)/(
s1
 - s0));

71 
	}
}

74 
	$ıM¬chC–lSoá
(

75 
ıFlßt
 
t
, cpFlßˆ
a
, cpFlßˆ
b
, cpFlßˆ
c
, cpFlßˆ
d
,

76 
ıFlßt
 
x0
, cpFlßˆ
x1
, cpFlßˆ
y0
, cpFlßˆ
y1
,

77 
ıM¬chSegm’tFunc
 
£gm’t
, *
£gm’t_d©a


80 (
a
>
t
)<<0 | (
b
>t)<<1 | (
c
>t)<<2 | (
d
>t)<<3){

81 0x1: 
	`£g
(
	`ıv
(
x0
, 
	`midË½
(
y0
,
y1
,
a
,
c
,
t
)), cpv(midË½(x0,
x1
,a,
b
,t), y0), 
£gm’t
, 
£gm’t_d©a
); ;

82 0x2: 
	`£g
(
	`ıv
(
	`midË½
(
x0
,
x1
,
a
,
b
,
t
), 
y0
), cpv(x1, midË½(y0,
y1
,b,
d
,t)), 
£gm’t
, 
£gm’t_d©a
); ;

83 0x3: 
	`£g
(
	`ıv
(
x0
, 
	`midË½
(
y0
,
y1
,
a
,
c
,
t
)), cpv(
x1
, midË½(y0,y1,
b
,
d
,t)), 
£gm’t
, 
£gm’t_d©a
); ;

84 0x4: 
	`£g
(
	`ıv
(
	`midË½
(
x0
,
x1
,
c
,
d
,
t
), 
y1
), cpv(x0, midË½(
y0
,y1,
a
,c,t)), 
£gm’t
, 
£gm’t_d©a
); ;

85 0x5: 
	`£g
(
	`ıv
(
	`midË½
(
x0
,
x1
,
c
,
d
,
t
), 
y1
), cpv(midË½(x0,x1,
a
,
b
,t), 
y0
), 
£gm’t
, 
£gm’t_d©a
); ;

86 0x6: 
	`£g
(
	`ıv
(
	`midË½
(
x0
,
x1
,
a
,
b
,
t
), 
y0
), cpv(x1, midË½(y0,
y1
,b,
d
,t)), 
£gm’t
, 
£gm’t_d©a
);

87 
	`£g
(
	`ıv
(
	`midË½
(
x0
,
x1
,
c
,
d
,
t
), 
y1
), cpv(x0, midË½(
y0
,y1,
a
,c,t)), 
£gm’t
, 
£gm’t_d©a
); ;

88 0x7: 
	`£g
(
	`ıv
(
	`midË½
(
x0
,
x1
,
c
,
d
,
t
), 
y1
), cpv(x1, midË½(
y0
,y1,
b
,d,t)), 
£gm’t
, 
£gm’t_d©a
); ;

89 0x8: 
	`£g
(
	`ıv
(
x1
, 
	`midË½
(
y0
,
y1
,
b
,
d
,
t
)), cpv(midË½(
x0
,x1,
c
,d,t), y1), 
£gm’t
, 
£gm’t_d©a
); ;

90 0x9: 
	`£g
(
	`ıv
(
x0
, 
	`midË½
(
y0
,
y1
,
a
,
c
,
t
)), cpv(midË½(x0,
x1
,a,
b
,t), y0), 
£gm’t
, 
£gm’t_d©a
);

91 
	`£g
(
	`ıv
(
x1
, 
	`midË½
(
y0
,
y1
,
b
,
d
,
t
)), cpv(midË½(
x0
,x1,
c
,d,t), y1), 
£gm’t
, 
£gm’t_d©a
); ;

92 0xA: 
	`£g
(
	`ıv
(
	`midË½
(
x0
,
x1
,
a
,
b
,
t
), 
y0
), cpv(midË½(x0,x1,
c
,
d
,t), 
y1
), 
£gm’t
, 
£gm’t_d©a
); ;

93 0xB: 
	`£g
(
	`ıv
(
x0
, 
	`midË½
(
y0
,
y1
,
a
,
c
,
t
)), cpv(midË½(x0,
x1
,c,
d
,t), y1), 
£gm’t
, 
£gm’t_d©a
); ;

94 0xC: 
	`£g
(
	`ıv
(
x1
, 
	`midË½
(
y0
,
y1
,
b
,
d
,
t
)), cpv(
x0
, midË½(y0,y1,
a
,
c
,t)), 
£gm’t
, 
£gm’t_d©a
); ;

95 0xD: 
	`£g
(
	`ıv
(
x1
, 
	`midË½
(
y0
,
y1
,
b
,
d
,
t
)), cpv(midË½(
x0
,x1,
a
,b,t), y0), 
£gm’t
, 
£gm’t_d©a
); ;

96 0xE: 
	`£g
(
	`ıv
(
	`midË½
(
x0
,
x1
,
a
,
b
,
t
), 
y0
), cpv(x0, midË½(y0,
y1
,a,
c
,t)), 
£gm’t
, 
£gm’t_d©a
); ;

99 
	}
}

102 
	$ıM¬chSoá
(

103 
ıBB
 
bb
, 
x_§m¶es
, 
y_§m¶es
, 
ıFlßt
 
t
,

104 
ıM¬chSegm’tFunc
 
£gm’t
, *
£gm’t_d©a
,

105 
ıM¬chSam¶eFunc
 
§m¶e
, *
§m¶e_d©a


107 
	`ıM¬chC–ls
(
bb
, 
x_§m¶es
, 
y_§m¶es
, 
t
, 
£gm’t
, 
£gm’t_d©a
, 
§m¶e
, 
§m¶e_d©a
, 
ıM¬chC–lSoá
);

108 
	}
}

112 
šlše
 

113 
	$£gs
(
ıVeù
 
a
, cpVeù 
b
, cpVeù 
c
, 
ıM¬chSegm’tFunc
 
f
, *
d©a
)

115 
	`£g
(
b
, 
c
, 
f
, 
d©a
);

116 
	`£g
(
a
, 
b
, 
f
, 
d©a
);

117 
	}
}

120 
	$ıM¬chC–lH¬d
(

121 
ıFlßt
 
t
, cpFlßˆ
a
, cpFlßˆ
b
, cpFlßˆ
c
, cpFlßˆ
d
,

122 
ıFlßt
 
x0
, cpFlßˆ
x1
, cpFlßˆ
y0
, cpFlßˆ
y1
,

123 
ıM¬chSegm’tFunc
 
£gm’t
, *
£gm’t_d©a


126 
ıFlßt
 
xm
 = 
	`ıæ”p
(
x0
, 
x1
, 0.5f);

127 
ıFlßt
 
ym
 = 
	`ıæ”p
(
y0
, 
y1
, 0.5f);

129 (
a
>
t
)<<0 | (
b
>t)<<1 | (
c
>t)<<2 | (
d
>t)<<3){

130 0x1: 
	`£gs
(
	`ıv
(
x0
, 
ym
), cpv(
xm
, ym), cpv(xm, 
y0
), 
£gm’t
, 
£gm’t_d©a
); ;

131 0x2: 
	`£gs
(
	`ıv
(
xm
, 
y0
), cpv(xm, 
ym
), cpv(
x1
, ym), 
£gm’t
, 
£gm’t_d©a
); ;

132 0x3: 
	`£g
(
	`ıv
(
x0
, 
ym
), cpv(
x1
, ym), 
£gm’t
, 
£gm’t_d©a
); ;

133 0x4: 
	`£gs
(
	`ıv
(
xm
, 
y1
), cpv(xm, 
ym
), cpv(
x0
, ym), 
£gm’t
, 
£gm’t_d©a
); ;

134 0x5: 
	`£g
(
	`ıv
(
xm
, 
y1
), cpv(xm, 
y0
), 
£gm’t
, 
£gm’t_d©a
); ;

135 0x6: 
	`£gs
(
	`ıv
(
xm
, 
y0
), cpv(xm, 
ym
), cpv(
x0
, ym), 
£gm’t
, 
£gm’t_d©a
);

136 
	`£gs
(
	`ıv
(
xm
, 
y1
), cpv(xm, 
ym
), cpv(
x1
, ym), 
£gm’t
, 
£gm’t_d©a
); ;

137 0x7: 
	`£gs
(
	`ıv
(
xm
, 
y1
), cpv(xm, 
ym
), cpv(
x1
, ym), 
£gm’t
, 
£gm’t_d©a
); ;

138 0x8: 
	`£gs
(
	`ıv
(
x1
, 
ym
), cpv(
xm
, ym), cpv(xm, 
y1
), 
£gm’t
, 
£gm’t_d©a
); ;

139 0x9: 
	`£gs
(
	`ıv
(
x1
, 
ym
), cpv(
xm
, ym), cpv(xm, 
y0
), 
£gm’t
, 
£gm’t_d©a
);

140 
	`£gs
(
	`ıv
(
x0
, 
ym
), cpv(
xm
, ym), cpv(xm, 
y1
), 
£gm’t
, 
£gm’t_d©a
); ;

141 0xA: 
	`£g
(
	`ıv
(
xm
, 
y0
), cpv(xm, 
y1
), 
£gm’t
, 
£gm’t_d©a
); ;

142 0xB: 
	`£gs
(
	`ıv
(
x0
, 
ym
), cpv(
xm
, ym), cpv(xm, 
y1
), 
£gm’t
, 
£gm’t_d©a
); ;

143 0xC: 
	`£g
(
	`ıv
(
x1
, 
ym
), cpv(
x0
, ym), 
£gm’t
, 
£gm’t_d©a
); ;

144 0xD: 
	`£gs
(
	`ıv
(
x1
, 
ym
), cpv(
xm
, ym), cpv(xm, 
y0
), 
£gm’t
, 
£gm’t_d©a
); ;

145 0xE: 
	`£gs
(
	`ıv
(
xm
, 
y0
), cpv(xm, 
ym
), cpv(
x0
, ym), 
£gm’t
, 
£gm’t_d©a
); ;

148 
	}
}

151 
	$ıM¬chH¬d
(

152 
ıBB
 
bb
, 
x_§m¶es
, 
y_§m¶es
, 
ıFlßt
 
t
,

153 
ıM¬chSegm’tFunc
 
£gm’t
, *
£gm’t_d©a
,

154 
ıM¬chSam¶eFunc
 
§m¶e
, *
§m¶e_d©a


156 
	`ıM¬chC–ls
(
bb
, 
x_§m¶es
, 
y_§m¶es
, 
t
, 
£gm’t
, 
£gm’t_d©a
, 
§m¶e
, 
§m¶e_d©a
, 
ıM¬chC–lH¬d
);

157 
	}
}

	@../src/chipmunk/cpPinJoint.c

22 
	~"chmunk/chmunk_´iv©e.h
"

25 
	$´eS‹p
(
ıPšJošt
 *
jošt
, 
ıFlßt
 
dt
)

27 
ıBody
 *
a
 = 
jošt
->
cÚ¡¿št
.a;

28 
ıBody
 *
b
 = 
jošt
->
cÚ¡¿št
.b;

30 
jošt
->
r1
 = 
	`ıT¿nsfÜmVeù
(
a
->
ŒªsfÜm
, 
	`ıvsub
(jošt->
ªchÜA
,‡->
cog
));

31 
jošt
->
r2
 = 
	`ıT¿nsfÜmVeù
(
b
->
ŒªsfÜm
, 
	`ıvsub
(jošt->
ªchÜB
, b->
cog
));

33 
ıVeù
 
d–
 = 
	`ıvsub
(
	`ıvadd
(
b
->
p
, 
jošt
->
r2
), cpvadd(
a
->p, jošt->
r1
));

34 
ıFlßt
 
di¡
 = 
	`ıvËngth
(
d–
);

35 
jošt
->
n
 = 
	`ıvmuÉ
(
d–
, 1.0f/(
di¡
 ? di¡ : (
ıFlßt
)
INFINITY
));

38 
jošt
->
nMass
 = 1.0f/
	`k_sÿÏr
(
a
, 
b
, jošt->
r1
, jošt->
r2
, jošt->
n
);

41 
ıFlßt
 
maxBŸs
 = 
jošt
->
cÚ¡¿št
.maxBias;

42 
jošt
->
bŸs
 = 
	`ıfşamp
(-
	`bŸs_cÛf
(jošt->
cÚ¡¿št
.
”rÜBŸs
, 
dt
)*(
di¡
 - jošt->di¡)/dt, -
maxBŸs
, maxBias);

43 
	}
}

46 
	$­¶yCachedImpul£
(
ıPšJošt
 *
jošt
, 
ıFlßt
 
dt_cÛf
)

48 
ıBody
 *
a
 = 
jošt
->
cÚ¡¿št
.a;

49 
ıBody
 *
b
 = 
jošt
->
cÚ¡¿št
.b;

51 
ıVeù
 
j
 = 
	`ıvmuÉ
(
jošt
->
n
, jošt->
jnAcc
*
dt_cÛf
);

52 
	`­¶y_impul£s
(
a
, 
b
, 
jošt
->
r1
, jošt->
r2
, 
j
);

53 
	}
}

56 
	$­¶yImpul£
(
ıPšJošt
 *
jošt
, 
ıFlßt
 
dt
)

58 
ıBody
 *
a
 = 
jošt
->
cÚ¡¿št
.a;

59 
ıBody
 *
b
 = 
jošt
->
cÚ¡¿št
.b;

60 
ıVeù
 
n
 = 
jošt
->n;

63 
ıFlßt
 
vº
 = 
	`nÜm®_»Ïtive_v–oc™y
(
a
, 
b
, 
jošt
->
r1
, jošt->
r2
, 
n
);

65 
ıFlßt
 
jnMax
 = 
jošt
->
cÚ¡¿št
.
maxFÜû
*
dt
;

68 
ıFlßt
 
jn
 = (
jošt
->
bŸs
 - 
vº
)*jošt->
nMass
;

69 
ıFlßt
 
jnOld
 = 
jošt
->
jnAcc
;

70 
jošt
->
jnAcc
 = 
	`ıfşamp
(
jnOld
 + 
jn
, -
jnMax
, jnMax);

71 
jn
 = 
jošt
->
jnAcc
 - 
jnOld
;

74 
	`­¶y_impul£s
(
a
, 
b
, 
jošt
->
r1
, jošt->
r2
, 
	`ıvmuÉ
(
n
, 
jn
));

75 
	}
}

77 
ıFlßt


78 
	$g‘Impul£
(
ıPšJošt
 *
jošt
)

80  
	`ıçbs
(
jošt
->
jnAcc
);

81 
	}
}

83 cÚ¡ 
ıCÚ¡¿štCÏss
 
	gkÏss
 = {

84 (
ıCÚ¡¿štP»S‹pIm¶
)
´eS‹p
,

85 (
ıCÚ¡¿štAµlyCachedImpul£Im¶
)
­¶yCachedImpul£
,

86 (
ıCÚ¡¿štAµlyImpul£Im¶
)
­¶yImpul£
,

87 (
ıCÚ¡¿štG‘Impul£Im¶
)
g‘Impul£
,

91 
ıPšJošt
 *

92 
	$ıPšJoštAÎoc
()

94  (
ıPšJošt
 *)
	`ıÿÎoc
(1, (cpPinJoint));

95 
	}
}

97 
ıPšJošt
 *

98 
	$ıPšJoštIn™
(
ıPšJošt
 *
jošt
, 
ıBody
 *
a
, cpBody *
b
, 
ıVeù
 
ªchÜA
, cpVeù 
ªchÜB
)

100 
	`ıCÚ¡¿štIn™
((
ıCÚ¡¿št
 *)
jošt
, &
kÏss
, 
a
, 
b
);

102 
jošt
->
ªchÜA
 =‡nchorA;

103 
jošt
->
ªchÜB
 =‡nchorB;

106 
ıVeù
 
p1
 = (
a
 ? 
	`ıT¿nsfÜmPošt
×->
ŒªsfÜm
, 
ªchÜA
) :‡nchorA);

107 
ıVeù
 
p2
 = (
b
 ? 
	`ıT¿nsfÜmPošt
(b->
ŒªsfÜm
, 
ªchÜB
) :‡nchorB);

108 
jošt
->
di¡
 = 
	`ıvËngth
(
	`ıvsub
(
p2
, 
p1
));

110 
	`ıAs£¹W¬n
(
jošt
->
di¡
 > 0.0, "You created‡ 0†ength…in joint. A…ivot joint will be much more stable.");

112 
jošt
->
jnAcc
 = 0.0f;

114  
jošt
;

115 
	}
}

117 
ıCÚ¡¿št
 *

118 
	$ıPšJoštNew
(
ıBody
 *
a
, cpBody *
b
, 
ıVeù
 
ªchÜA
, cpVeù 
ªchÜB
)

120  (
ıCÚ¡¿št
 *)
	`ıPšJoštIn™
(
	`ıPšJoštAÎoc
(), 
a
, 
b
, 
ªchÜA
, 
ªchÜB
);

121 
	}
}

123 
ıBoŞ


124 
	$ıCÚ¡¿štIsPšJošt
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

126  (
cÚ¡¿št
->
kÏss
 == &klass);

127 
	}
}

129 
ıVeù


130 
	$ıPšJoštG‘AnchÜA
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

132 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsPšJošt
(
cÚ¡¿št
), "Constraint is‚ot‡…in joint.");

133  ((
ıPšJošt
 *)
cÚ¡¿št
)->
ªchÜA
;

134 
	}
}

137 
	$ıPšJoštS‘AnchÜA
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıVeù
 
ªchÜA
)

139 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsPšJošt
(
cÚ¡¿št
), "Constraint is‚ot‡…in joint.");

140 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

141 ((
ıPšJošt
 *)
cÚ¡¿št
)->
ªchÜA
 =‡nchorA;

142 
	}
}

144 
ıVeù


145 
	$ıPšJoštG‘AnchÜB
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

147 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsPšJošt
(
cÚ¡¿št
), "Constraint is‚ot‡…in joint.");

148  ((
ıPšJošt
 *)
cÚ¡¿št
)->
ªchÜB
;

149 
	}
}

152 
	$ıPšJoštS‘AnchÜB
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıVeù
 
ªchÜB
)

154 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsPšJošt
(
cÚ¡¿št
), "Constraint is‚ot‡…in joint.");

155 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

156 ((
ıPšJošt
 *)
cÚ¡¿št
)->
ªchÜB
 =‡nchorB;

157 
	}
}

159 
ıFlßt


160 
	$ıPšJoštG‘Di¡
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

162 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsPšJošt
(
cÚ¡¿št
), "Constraint is‚ot‡…in joint.");

163  ((
ıPšJošt
 *)
cÚ¡¿št
)->
di¡
;

164 
	}
}

167 
	$ıPšJoštS‘Di¡
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
di¡
)

169 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsPšJošt
(
cÚ¡¿št
), "Constraint is‚ot‡…in joint.");

170 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

171 ((
ıPšJošt
 *)
cÚ¡¿št
)->
di¡
 = dist;

172 
	}
}

	@../src/chipmunk/cpPivotJoint.c

22 
	~"chmunk/chmunk_´iv©e.h
"

25 
	$´eS‹p
(
ıPivÙJošt
 *
jošt
, 
ıFlßt
 
dt
)

27 
ıBody
 *
a
 = 
jošt
->
cÚ¡¿št
.a;

28 
ıBody
 *
b
 = 
jošt
->
cÚ¡¿št
.b;

30 
jošt
->
r1
 = 
	`ıT¿nsfÜmVeù
(
a
->
ŒªsfÜm
, 
	`ıvsub
(jošt->
ªchÜA
,‡->
cog
));

31 
jošt
->
r2
 = 
	`ıT¿nsfÜmVeù
(
b
->
ŒªsfÜm
, 
	`ıvsub
(jošt->
ªchÜB
, b->
cog
));

34 
jošt
-> 
k
 = 
	`k_‹nsÜ
(
a
, 
b
, jošt->
r1
, jošt->
r2
);

37 
ıVeù
 
d–
 = 
	`ıvsub
(
	`ıvadd
(
b
->
p
, 
jošt
->
r2
), cpvadd(
a
->p, jošt->
r1
));

38 
jošt
->
bŸs
 = 
	`ıvşamp
(
	`ıvmuÉ
(
d–
, -
	`bŸs_cÛf
(jošt->
cÚ¡¿št
.
”rÜBŸs
, 
dt
)/dt), jošt->cÚ¡¿št.
maxBŸs
);

39 
	}
}

42 
	$­¶yCachedImpul£
(
ıPivÙJošt
 *
jošt
, 
ıFlßt
 
dt_cÛf
)

44 
ıBody
 *
a
 = 
jošt
->
cÚ¡¿št
.a;

45 
ıBody
 *
b
 = 
jošt
->
cÚ¡¿št
.b;

47 
	`­¶y_impul£s
(
a
, 
b
, 
jošt
->
r1
, jošt->
r2
, 
	`ıvmuÉ
(jošt->
jAcc
, 
dt_cÛf
));

48 
	}
}

51 
	$­¶yImpul£
(
ıPivÙJošt
 *
jošt
, 
ıFlßt
 
dt
)

53 
ıBody
 *
a
 = 
jošt
->
cÚ¡¿št
.a;

54 
ıBody
 *
b
 = 
jošt
->
cÚ¡¿št
.b;

56 
ıVeù
 
r1
 = 
jošt
->r1;

57 
ıVeù
 
r2
 = 
jošt
->r2;

60 
ıVeù
 
vr
 = 
	`»Ïtive_v–oc™y
(
a
, 
b
, 
r1
, 
r2
);

63 
ıVeù
 
j
 = 
	`ıM©2x2T¿nsfÜm
(
jošt
->
k
, 
	`ıvsub
(jošt->
bŸs
, 
vr
));

64 
ıVeù
 
jOld
 = 
jošt
->
jAcc
;

65 
jošt
->
jAcc
 = 
	`ıvşamp
(
	`ıvadd
(jošt->jAcc, 
j
), jošt->
cÚ¡¿št
.
maxFÜû
*
dt
);

66 
j
 = 
	`ıvsub
(
jošt
->
jAcc
, 
jOld
);

69 
	`­¶y_impul£s
(
a
, 
b
, 
jošt
->
r1
, jošt->
r2
, 
j
);

70 
	}
}

72 
ıFlßt


73 
	$g‘Impul£
(
ıCÚ¡¿št
 *
jošt
)

75  
	`ıvËngth
(((
ıPivÙJošt
 *)
jošt
)->
jAcc
);

76 
	}
}

78 cÚ¡ 
ıCÚ¡¿štCÏss
 
	gkÏss
 = {

79 (
ıCÚ¡¿štP»S‹pIm¶
)
´eS‹p
,

80 (
ıCÚ¡¿štAµlyCachedImpul£Im¶
)
­¶yCachedImpul£
,

81 (
ıCÚ¡¿štAµlyImpul£Im¶
)
­¶yImpul£
,

82 (
ıCÚ¡¿štG‘Impul£Im¶
)
g‘Impul£
,

85 
ıPivÙJošt
 *

86 
	$ıPivÙJoštAÎoc
()

88  (
ıPivÙJošt
 *)
	`ıÿÎoc
(1, (cpPivotJoint));

89 
	}
}

91 
ıPivÙJošt
 *

92 
	$ıPivÙJoštIn™
(
ıPivÙJošt
 *
jošt
, 
ıBody
 *
a
, cpBody *
b
, 
ıVeù
 
ªchÜA
, cpVeù 
ªchÜB
)

94 
	`ıCÚ¡¿štIn™
((
ıCÚ¡¿št
 *)
jošt
, &
kÏss
, 
a
, 
b
);

96 
jošt
->
ªchÜA
 =‡nchorA;

97 
jošt
->
ªchÜB
 =‡nchorB;

99 
jošt
->
jAcc
 = 
ıvz”o
;

101  
jošt
;

102 
	}
}

104 
ıCÚ¡¿št
 *

105 
	$ıPivÙJoštNew2
(
ıBody
 *
a
, cpBody *
b
, 
ıVeù
 
ªchÜA
, cpVeù 
ªchÜB
)

107  (
ıCÚ¡¿št
 *)
	`ıPivÙJoštIn™
(
	`ıPivÙJoštAÎoc
(), 
a
, 
b
, 
ªchÜA
, 
ªchÜB
);

108 
	}
}

110 
ıCÚ¡¿št
 *

111 
	$ıPivÙJoštNew
(
ıBody
 *
a
, cpBody *
b
, 
ıVeù
 
pivÙ
)

113 
ıVeù
 
ªchÜA
 = (
a
 ? 
	`ıBodyWÜldToLoÿl
×, 
pivÙ
) :…ivot);

114 
ıVeù
 
ªchÜB
 = (
b
 ? 
	`ıBodyWÜldToLoÿl
(b, 
pivÙ
) :…ivot);

115  
	`ıPivÙJoštNew2
(
a
, 
b
, 
ªchÜA
, 
ªchÜB
);

116 
	}
}

118 
ıBoŞ


119 
	$ıCÚ¡¿štIsPivÙJošt
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

121  (
cÚ¡¿št
->
kÏss
 == &klass);

122 
	}
}

124 
ıVeù


125 
	$ıPivÙJoštG‘AnchÜA
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

127 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsPivÙJošt
(
cÚ¡¿št
), "Constraint is‚ot‡…ivot joint.");

128  ((
ıPivÙJošt
 *)
cÚ¡¿št
)->
ªchÜA
;

129 
	}
}

132 
	$ıPivÙJoštS‘AnchÜA
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıVeù
 
ªchÜA
)

134 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsPivÙJošt
(
cÚ¡¿št
), "Constraint is‚ot‡…ivot joint.");

135 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

136 ((
ıPivÙJošt
 *)
cÚ¡¿št
)->
ªchÜA
 =‡nchorA;

137 
	}
}

139 
ıVeù


140 
	$ıPivÙJoštG‘AnchÜB
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

142 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsPivÙJošt
(
cÚ¡¿št
), "Constraint is‚ot‡…ivot joint.");

143  ((
ıPivÙJošt
 *)
cÚ¡¿št
)->
ªchÜB
;

144 
	}
}

147 
	$ıPivÙJoštS‘AnchÜB
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıVeù
 
ªchÜB
)

149 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsPivÙJošt
(
cÚ¡¿št
), "Constraint is‚ot‡…ivot joint.");

150 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

151 ((
ıPivÙJošt
 *)
cÚ¡¿št
)->
ªchÜB
 =‡nchorB;

152 
	}
}

	@../src/chipmunk/cpPolyShape.c

22 
	~"chmunk/chmunk_´iv©e.h
"

23 
	~"chmunk/chmunk_un§ã.h
"

25 
ıPŞySh­e
 *

26 
	$ıPŞySh­eAÎoc
()

28  (
ıPŞySh­e
 *)
	`ıÿÎoc
(1, (cpPolyShape));

29 
	}
}

32 
	$ıPŞySh­eDe¡roy
(
ıPŞySh­e
 *
pŞy
)

34 if(
pŞy
->
couÁ
 > 
CP_POLY_SHAPE_INLINE_ALLOC
){

35 
	`ıä“
(
pŞy
->
¶ªes
);

37 
	}
}

39 
ıBB


40 
	$ıPŞySh­eCacheD©a
(
ıPŞySh­e
 *
pŞy
, 
ıT¿nsfÜm
 
ŒªsfÜm
)

42 
couÁ
 = 
pŞy
->count;

43 
ıS¶™tšgPÏÃ
 *
d¡
 = 
pŞy
->
¶ªes
;

44 
ıS¶™tšgPÏÃ
 *
¤c
 = 
d¡
 + 
couÁ
;

46 
ıFlßt
 
l
 = (ıFlßt)
INFINITY
, 
r
 = -(cpFloat)INFINITY;

47 
ıFlßt
 
b
 = (ıFlßt)
INFINITY
, 
t
 = -(cpFloat)INFINITY;

49 
i
=0; i<
couÁ
; i++){

50 
ıVeù
 
v
 = 
	`ıT¿nsfÜmPošt
(
ŒªsfÜm
, 
¤c
[
i
].
v0
);

51 
ıVeù
 
n
 = 
	`ıT¿nsfÜmVeù
(
ŒªsfÜm
, 
¤c
[
i
].n);

53 
d¡
[
i
].
v0
 = 
v
;

54 
d¡
[
i
].
n
 =‚;

56 
l
 = 
	`ıfmš
Ö, 
v
.
x
);

57 
r
 = 
	`ıfmax
Ô, 
v
.
x
);

58 
b
 = 
	`ıfmš
(b, 
v
.
y
);

59 
t
 = 
	`ıfmax
Ñ, 
v
.
y
);

62 
ıFlßt
 
¿dius
 = 
pŞy
->
r
;

63  (
pŞy
->
sh­e
.
bb
 = 
	`ıBBNew
(
l
 - 
¿dius
, 
b
 -„adius, 
r
 +„adius, 
t
 +„adius));

64 
	}
}

67 
	$ıPŞySh­ePoštQu”y
(
ıPŞySh­e
 *
pŞy
, 
ıVeù
 
p
, 
ıPoštQu”yInfo
 *
šfo
){

68 
couÁ
 = 
pŞy
->count;

69 
ıS¶™tšgPÏÃ
 *
¶ªes
 = 
pŞy
->planes;

70 
ıFlßt
 
r
 = 
pŞy
->r;

72 
ıVeù
 
v0
 = 
¶ªes
[
couÁ
 - 1].v0;

73 
ıFlßt
 
mšDi¡
 = 
INFINITY
;

74 
ıVeù
 
şo£¡Pošt
 = 
ıvz”o
;

75 
ıVeù
 
şo£¡NÜm®
 = 
ıvz”o
;

76 
ıBoŞ
 
outside
 = 
ıF®£
;

78 
i
=0; i<
couÁ
; i++){

79 
ıVeù
 
v1
 = 
¶ªes
[
i
].
v0
;

80 
outside
 = outsid|| (
	`ıvdÙ
(
¶ªes
[
i
].
n
, 
	`ıvsub
(
p
,
v1
)) > 0.0f);

82 
ıVeù
 
şo£¡
 = 
	`ıClo£tPoštOnSegm’t
(
p
, 
v0
, 
v1
);

84 
ıFlßt
 
di¡
 = 
	`ıvdi¡
(
p
, 
şo£¡
);

85 if(
di¡
 < 
mšDi¡
){

86 
mšDi¡
 = 
di¡
;

87 
şo£¡Pošt
 = 
şo£¡
;

88 
şo£¡NÜm®
 = 
¶ªes
[
i
].
n
;

91 
v0
 = 
v1
;

94 
ıFlßt
 
di¡
 = (
outside
 ? 
mšDi¡
 : -minDist);

95 
ıVeù
 
g
 = 
	`ıvmuÉ
(
	`ıvsub
(
p
, 
şo£¡Pošt
), 1.0f/
di¡
);

97 
šfo
->
sh­e
 = (
ıSh­e
 *)
pŞy
;

98 
šfo
->
pošt
 = 
	`ıvadd
(
şo£¡Pošt
, 
	`ıvmuÉ
(
g
, 
r
));

99 
šfo
->
di¡ªû
 = 
di¡
 - 
r
;

102 
šfo
->
g¿d›Á
 = (
mšDi¡
 > 
MAGIC_EPSILON
 ? 
g
 : 
şo£¡NÜm®
);

103 
	}
}

106 
	$ıPŞySh­eSegm’tQu”y
(
ıPŞySh­e
 *
pŞy
, 
ıVeù
 
a
, cpVeù 
b
, 
ıFlßt
 
r2
, 
ıSegm’tQu”yInfo
 *
šfo
)

108 
ıS¶™tšgPÏÃ
 *
¶ªes
 = 
pŞy
->planes;

109 
couÁ
 = 
pŞy
->count;

110 
ıFlßt
 
r
 = 
pŞy
->r;

111 
ıFlßt
 
rsum
 = 
r
 + 
r2
;

113 
i
=0; i<
couÁ
; i++){

114 
ıVeù
 
n
 = 
¶ªes
[
i
].n;

115 
ıFlßt
 
ª
 = 
	`ıvdÙ
(
a
, 
n
);

116 
ıFlßt
 
d
 = 
ª
 - 
	`ıvdÙ
(
¶ªes
[
i
].
v0
, 
n
è- 
rsum
;

117 if(
d
 < 0.0f) ;

119 
ıFlßt
 
bn
 = 
	`ıvdÙ
(
b
, 
n
);

120 
ıFlßt
 
t
 = 
d
/(
ª
 - 
bn
);

121 if(
t
 < 0.0f || 1.0f <) ;

123 
ıVeù
 
pošt
 = 
	`ıvË½
(
a
, 
b
, 
t
);

124 
ıFlßt
 
dt
 = 
	`ıvüoss
(
n
, 
pošt
);

125 
ıFlßt
 
dtMš
 = 
	`ıvüoss
(
n
, 
¶ªes
[(
i
 - 1 + 
couÁ
)%couÁ].
v0
);

126 
ıFlßt
 
dtMax
 = 
	`ıvüoss
(
n
, 
¶ªes
[
i
].
v0
);

128 if(
dtMš
 <ğ
dt
 && dˆ<ğ
dtMax
){

129 
šfo
->
sh­e
 = (
ıSh­e
 *)
pŞy
;

130 
šfo
->
pošt
 = 
	`ıvsub
(
	`ıvË½
(
a
, 
b
, 
t
), 
	`ıvmuÉ
(
n
, 
r2
));

131 
šfo
->
nÜm®
 = 
n
;

132 
šfo
->
®pha
 = 
t
;

137 if(
rsum
 > 0.0f){

138 
i
=0; i<
couÁ
; i++){

139 
ıSegm’tQu”yInfo
 
cœşe_šfo
 = {
NULL
, 
b
, 
ıvz”o
, 1.0f};

140 
	`CœşeSegm’tQu”y
(&
pŞy
->
sh­e
, 
¶ªes
[
i
].
v0
, 
r
, 
a
, 
b
, 
r2
, &
cœşe_šfo
);

141 if(
cœşe_šfo
.
®pha
 < 
šfo
->alpha) (*info) = circle_info;

144 
	}
}

147 
	$S‘V”ts
(
ıPŞySh­e
 *
pŞy
, 
couÁ
, cÚ¡ 
ıVeù
 *
v”ts
)

149 
pŞy
->
couÁ
 = count;

150 if(
couÁ
 <ğ
CP_POLY_SHAPE_INLINE_ALLOC
){

151 
pŞy
->
¶ªes
 =…Şy->
_¶ªes
;

153 
pŞy
->
¶ªes
 = (
ıS¶™tšgPÏÃ
 *)
	`ıÿÎoc
(2*
couÁ
, (cpSplittingPlane));

156 
i
=0; i<
couÁ
; i++){

157 
ıVeù
 
a
 = 
v”ts
[(
i
 - 1 + 
couÁ
)%count];

158 
ıVeù
 
b
 = 
v”ts
[
i
];

159 
ıVeù
 
n
 = 
	`ıvnÜm®ize
(
	`ıv½”p
(
	`ıvsub
(
b
, 
a
)));

161 
pŞy
->
¶ªes
[
i
 + 
couÁ
].
v0
 = 
b
;

162 
pŞy
->
¶ªes
[
i
 + 
couÁ
].
n
 =‚;

164 
	}
}

166 
ıSh­eMassInfo


167 
	$ıPŞySh­eMassInfo
(
ıFlßt
 
mass
, 
couÁ
, cÚ¡ 
ıVeù
 *
v”ts
, cpFlßˆ
¿dius
)

171 
ıVeù
 
ûÁroid
 = 
	`ıC’ŒoidFÜPŞy
(
couÁ
, 
v”ts
);

172 
ıSh­eMassInfo
 
šfo
 = {

173 
mass
, 
	`ıMom’tFÜPŞy
(1.0f, 
couÁ
, 
v”ts
, 
	`ıvÃg
(
ûÁroid
), 
¿dius
),

174 
ûÁroid
,

175 
	`ıA»aFÜPŞy
(
couÁ
, 
v”ts
, 
¿dius
),

178  
šfo
;

179 
	}
}

181 cÚ¡ 
ıSh­eCÏss
 
	gpŞyCÏss
 = {

182 
CP_POLY_SHAPE
,

183 (
ıSh­eCacheD©aIm¶
)
ıPŞySh­eCacheD©a
,

184 (
ıSh­eDe¡royIm¶
)
ıPŞySh­eDe¡roy
,

185 (
ıSh­ePoštQu”yIm¶
)
ıPŞySh­ePoštQu”y
,

186 (
ıSh­eSegm’tQu”yIm¶
)
ıPŞySh­eSegm’tQu”y
,

189 
ıPŞySh­e
 *

190 
	$ıPŞySh­eIn™
(
ıPŞySh­e
 *
pŞy
, 
ıBody
 *
body
, 
couÁ
, cÚ¡ 
ıVeù
 *
v”ts
, 
ıT¿nsfÜm
 
ŒªsfÜm
, 
ıFlßt
 
¿dius
)

192 
ıVeù
 *
huÎV”ts
 = (ıVeù *)
	`®loÿ
(
couÁ
*(cpVect));

195 
i
=0; i<
couÁ
; i++è
huÎV”ts
[i] = 
	`ıT¿nsfÜmPošt
(
ŒªsfÜm
, 
v”ts
[i]);

197 
huÎCouÁ
 = 
	`ıCÚvexHuÎ
(
couÁ
, 
huÎV”ts
, huÎV”ts, 
NULL
, 0.0);

198  
	`ıPŞySh­eIn™Raw
(
pŞy
, 
body
, 
huÎCouÁ
, 
huÎV”ts
, 
¿dius
);

199 
	}
}

201 
ıPŞySh­e
 *

202 
	$ıPŞySh­eIn™Raw
(
ıPŞySh­e
 *
pŞy
, 
ıBody
 *
body
, 
couÁ
, cÚ¡ 
ıVeù
 *
v”ts
, 
ıFlßt
 
¿dius
)

204 
	`ıSh­eIn™
((
ıSh­e
 *)
pŞy
, &
pŞyCÏss
, 
body
, 
	`ıPŞySh­eMassInfo
(0.0f, 
couÁ
, 
v”ts
, 
¿dius
));

206 
	`S‘V”ts
(
pŞy
, 
couÁ
, 
v”ts
);

207 
pŞy
->
r
 = 
¿dius
;

209  
pŞy
;

210 
	}
}

212 
ıSh­e
 *

213 
	$ıPŞySh­eNew
(
ıBody
 *
body
, 
couÁ
, cÚ¡ 
ıVeù
 *
v”ts
, 
ıT¿nsfÜm
 
ŒªsfÜm
, 
ıFlßt
 
¿dius
)

215  (
ıSh­e
 *)
	`ıPŞySh­eIn™
(
	`ıPŞySh­eAÎoc
(), 
body
, 
couÁ
, 
v”ts
, 
ŒªsfÜm
, 
¿dius
);

216 
	}
}

218 
ıSh­e
 *

219 
	$ıPŞySh­eNewRaw
(
ıBody
 *
body
, 
couÁ
, cÚ¡ 
ıVeù
 *
v”ts
, 
ıFlßt
 
¿dius
)

221  (
ıSh­e
 *)
	`ıPŞySh­eIn™Raw
(
	`ıPŞySh­eAÎoc
(), 
body
, 
couÁ
, 
v”ts
, 
¿dius
);

222 
	}
}

224 
ıPŞySh­e
 *

225 
	$ıBoxSh­eIn™
(
ıPŞySh­e
 *
pŞy
, 
ıBody
 *
body
, 
ıFlßt
 
width
, cpFlßˆ
height
, cpFlßˆ
¿dius
)

227 
ıFlßt
 
hw
 = 
width
/2.0f;

228 
ıFlßt
 
hh
 = 
height
/2.0f;

230  
	`ıBoxSh­eIn™2
(
pŞy
, 
body
, 
	`ıBBNew
(-
hw
, -
hh
, hw, hh), 
¿dius
);

231 
	}
}

233 
ıPŞySh­e
 *

234 
	$ıBoxSh­eIn™2
(
ıPŞySh­e
 *
pŞy
, 
ıBody
 *
body
, 
ıBB
 
box
, 
ıFlßt
 
¿dius
)

236 
ıVeù
 
v”ts
[] = {

237 
	`ıv
(
box
.
r
, box.
b
),

238 
	`ıv
(
box
.
r
, box.
t
),

239 
	`ıv
(
box
.
l
, box.
t
),

240 
	`ıv
(
box
.
l
, box.
b
),

243  
	`ıPŞySh­eIn™Raw
(
pŞy
, 
body
, 4, 
v”ts
, 
¿dius
);

244 
	}
}

246 
ıSh­e
 *

247 
	$ıBoxSh­eNew
(
ıBody
 *
body
, 
ıFlßt
 
width
, cpFlßˆ
height
, cpFlßˆ
¿dius
)

249  (
ıSh­e
 *)
	`ıBoxSh­eIn™
(
	`ıPŞySh­eAÎoc
(), 
body
, 
width
, 
height
, 
¿dius
);

250 
	}
}

252 
ıSh­e
 *

253 
	$ıBoxSh­eNew2
(
ıBody
 *
body
, 
ıBB
 
box
, 
ıFlßt
 
¿dius
)

255  (
ıSh­e
 *)
	`ıBoxSh­eIn™2
(
	`ıPŞySh­eAÎoc
(), 
body
, 
box
, 
¿dius
);

256 
	}
}

259 
	$ıPŞySh­eG‘CouÁ
(cÚ¡ 
ıSh­e
 *
sh­e
)

261 
	`ıAs£¹H¬d
(
sh­e
->
kÏss
 =ğ&
pŞyCÏss
, "Shape is‚ot‡…oly shape.");

262  ((
ıPŞySh­e
 *)
sh­e
)->
couÁ
;

263 
	}
}

265 
ıVeù


266 
	$ıPŞySh­eG‘V”t
(cÚ¡ 
ıSh­e
 *
sh­e
, 
i
)

268 
	`ıAs£¹H¬d
(
sh­e
->
kÏss
 =ğ&
pŞyCÏss
, "Shape is‚ot‡…oly shape.");

270 
couÁ
 = 
	`ıPŞySh­eG‘CouÁ
(
sh­e
);

271 
	`ıAs£¹H¬d
(0 <ğ
i
 && i < 
couÁ
, "Index out of„ange.");

273  ((
ıPŞySh­e
 *)
sh­e
)->
¶ªes
[
i
 + 
couÁ
].
v0
;

274 
	}
}

276 
ıFlßt


277 
	$ıPŞySh­eG‘Radius
(cÚ¡ 
ıSh­e
 *
sh­e
)

279 
	`ıAs£¹H¬d
(
sh­e
->
kÏss
 =ğ&
pŞyCÏss
, "Shape is‚ot‡…oly shape.");

280  ((
ıPŞySh­e
 *)
sh­e
)->
r
;

281 
	}
}

286 
	$ıPŞySh­eS‘V”ts
(
ıSh­e
 *
sh­e
, 
couÁ
, 
ıVeù
 *
v”ts
, 
ıT¿nsfÜm
 
ŒªsfÜm
)

288 
ıVeù
 *
huÎV”ts
 = (ıVeù *)
	`®loÿ
(
couÁ
*(cpVect));

291 
i
=0; i<
couÁ
; i++è
huÎV”ts
[i] = 
	`ıT¿nsfÜmPošt
(
ŒªsfÜm
, 
v”ts
[i]);

293 
huÎCouÁ
 = 
	`ıCÚvexHuÎ
(
couÁ
, 
huÎV”ts
, huÎV”ts, 
NULL
, 0.0);

294 
	`ıPŞySh­eS‘V”tsRaw
(
sh­e
, 
huÎCouÁ
, 
huÎV”ts
);

295 
	}
}

298 
	$ıPŞySh­eS‘V”tsRaw
(
ıSh­e
 *
sh­e
, 
couÁ
, 
ıVeù
 *
v”ts
)

300 
	`ıAs£¹H¬d
(
sh­e
->
kÏss
 =ğ&
pŞyCÏss
, "Shape is‚ot‡…oly shape.");

301 
ıPŞySh­e
 *
pŞy
 = (ıPŞySh­*)
sh­e
;

302 
	`ıPŞySh­eDe¡roy
(
pŞy
);

304 
	`S‘V”ts
(
pŞy
, 
couÁ
, 
v”ts
);

306 
ıFlßt
 
mass
 = 
sh­e
->
massInfo
.
m
;

307 
sh­e
->
massInfo
 = 
	`ıPŞySh­eMassInfo
(sh­e->massInfo.
m
, 
couÁ
, 
v”ts
, 
pŞy
->
r
);

308 if(
mass
 > 0.0fè
	`ıBodyAccumuÏ‹MassFromSh­es
(
sh­e
->
body
);

309 
	}
}

312 
	$ıPŞySh­eS‘Radius
(
ıSh­e
 *
sh­e
, 
ıFlßt
 
¿dius
)

314 
	`ıAs£¹H¬d
(
sh­e
->
kÏss
 =ğ&
pŞyCÏss
, "Shape is‚ot‡…oly shape.");

315 
ıPŞySh­e
 *
pŞy
 = (ıPŞySh­*)
sh­e
;

316 
pŞy
->
r
 = 
¿dius
;

323 
	}
}

	@../src/chipmunk/cpPolyline.c

4 
	~<¡dlib.h
>

5 
	~<¡dio.h
>

6 
	~<¡ršg.h
>

7 
	~<m©h.h
>

9 
	~"chmunk/chmunk_´iv©e.h
"

10 
	~"chmunk/ıPŞylše.h
"

13 
šlše
 
	$Next
(
i
, 
couÁ
){ (i+1)%couÁ;
	}
}

17 
	#DEFAULT_POLYLINE_CAPACITY
 16

	)

20 
	$ıPŞylšeSizeFÜC­ac™y
(
ÿ·c™y
)

22  (
ıPŞylše
è+ 
ÿ·c™y
*(
ıVeù
);

23 
	}
}

25 
ıPŞylše
 *

26 
	$ıPŞylšeMake
(
ÿ·c™y
)

28 
ÿ·c™y
 = (ÿ·c™y > 
DEFAULT_POLYLINE_CAPACITY
 ? capacity : DEFAULT_POLYLINE_CAPACITY);

30 
ıPŞylše
 *
lše
 = (ıPŞylš*)
	`ıÿÎoc
(1, 
	`ıPŞylšeSizeFÜC­ac™y
(
ÿ·c™y
));

31 
lše
->
couÁ
 = 0;

32 
lše
->
ÿ·c™y
 = capacity;

34  
lše
;

35 
	}
}

37 
ıPŞylše
 *

38 
	$ıPŞylšeMake2
(
ÿ·c™y
, 
ıVeù
 
a
, cpVeù 
b
)

40 
ıPŞylše
 *
lše
 = 
	`ıPŞylšeMake
(
ÿ·c™y
);

41 
lše
->
couÁ
 = 2;

42 
lše
->
v”ts
[0] = 
a
;

43 
lše
->
v”ts
[1] = 
b
;

45  
lše
;

46 
	}
}

48 
ıPŞylše
 *

49 
	$ıPŞylšeShršk
(
ıPŞylše
 *
lše
)

51 
lše
->
ÿ·c™y
 =†še->
couÁ
;

52  
	`ı»®loc
(
lše
, 
	`ıPŞylšeSizeFÜC­ac™y
Öše->
couÁ
));

53 
	}
}

56 
	$ıPŞylšeF»e
(
ıPŞylše
 *
lše
)

58 
	`ıä“
(
lše
);

59 
	}
}

62 
ıPŞylše
 *

63 
	$ıPŞylšeGrow
(
ıPŞylše
 *
lše
, 
couÁ
)

65 
lše
->
couÁ
 += count;

67 
ÿ·c™y
 = 
lše
->capacity;

68 
lše
->
couÁ
 > 
ÿ·c™y
) capacity *= 2;

70 if(
lše
->
ÿ·c™y
 < capacity){

71 
lše
->
ÿ·c™y
 = capacity;

72 
lše
 = 
	`ı»®loc
Öše, 
	`ıPŞylšeSizeFÜC­ac™y
(
ÿ·c™y
));

75  
lše
;

76 
	}
}

79 
ıPŞylše
 *

80 
	$ıPŞylšePush
(
ıPŞylše
 *
lše
, 
ıVeù
 
v
)

82 
couÁ
 = 
lše
->count;

83 
lše
 = 
	`ıPŞylšeGrow
(line, 1);

84 
lše
->
v”ts
[
couÁ
] = 
v
;

86  
lše
;

87 
	}
}

90 
ıPŞylše
 *

91 
	$ıPŞylšeEnqueue
(
ıPŞylše
 *
lše
, 
ıVeù
 
v
)

95 
couÁ
 = 
lše
->count;

96 
lše
 = 
	`ıPŞylšeGrow
(line, 1);

97 
	`memmove
(
lše
->
v”ts
 + 1,†še->v”ts, 
couÁ
*(
ıVeù
));

98 
lše
->
v”ts
[0] = 
v
;

100  
lše
;

101 
	}
}

104 
ıBoŞ


105 
	$ıPŞylšeIsClo£d
(
ıPŞylše
 *
lše
)

107  (
lše
->
couÁ
 > 1 && 
	`ıveql
Öše->
v”ts
[0],†ine->verts[line->count-1]));

108 
	}
}

112 
ıBoŞ


113 
	$ıPŞylšeIsShÜt
(
ıVeù
 *
pošts
, 
couÁ
, 
¡¬t
, 
’d
, 
ıFlßt
 
mš
)

115 
ıFlßt
 
Ëngth
 = 0.0f;

116 
i
=
¡¬t
; i!=
’d
; i=
	`Next
(i, 
couÁ
)){

117 
Ëngth
 +ğ
	`ıvdi¡
(
pošts
[
i
],…ošts[
	`Next
(i, 
couÁ
)]);

118 if(
Ëngth
 > 
mš
è 
ıF®£
;

121  
ıTrue
;

122 
	}
}

126 
šlše
 
ıFlßt


127 
	$Sh¬²ess
(
ıVeù
 
a
, cpVeù 
b
, cpVeù 
c
)

130  
	`ıvdÙ
(
	`ıvnÜm®ize
(
	`ıvsub
(
a
, 
b
)), cpvnÜm®ize(ıvsub(
c
, b)));

131 
	}
}

135 
ıPŞylše
 *

136 
	$ıPŞylšeSim¶ifyV”‹xes
(
ıPŞylše
 *
lše
, 
ıFlßt
 
tŞ
)

138 
ıPŞylše
 *
»duûd
 = 
	`ıPŞylšeMake2
(0, 
lše
->
v”ts
[0],†ine->verts[1]);

140 
ıFlßt
 
mšSh¬p
 = -
	`ıfcos
(
tŞ
);

142 
i
=2; i<
lše
->
couÁ
; i++){

143 
ıVeù
 
v”t
 = 
lše
->
v”ts
[
i
];

144 
ıFlßt
 
sh¬p
 = 
	`Sh¬²ess
(
»duûd
->
v”ts
[»duûd->
couÁ
 - 2],„eduûd->v”ts[»duûd->couÁ - 1], 
v”t
);

146 if(
sh¬p
 <ğ
mšSh¬p
){

147 
»duûd
->
v”ts
[»duûd->
couÁ
 - 1] = 
v”t
;

149 
»duûd
 = 
	`ıPŞylšePush
Ôeduûd, 
v”t
);

154 
	`ıPŞylšeIsClo£d
(
lše
) &&

155 
	`Sh¬²ess
(
»duûd
->
v”ts
[»duûd->
couÁ
 - 2],„eduûd->v”ts[0],„eduûd->v”ts[1]è< 
mšSh¬p


157 
»duûd
->
v”ts
[0] =„eduûd->v”ts[»duûd->
couÁ
 - 2];

158 
»duûd
->
couÁ
--;

162  
»duûd
;

163 
	}
}

166 
ıPŞylše
 *

167 
	$DougÏsPeuck”
(

168 
ıVeù
 *
v”ts
, 
ıPŞylše
 *
»duûd
,

169 
Ëngth
, 
¡¬t
, 
’d
,

170 
ıFlßt
 
mš
, cpFlßˆ
tŞ


173 if((
’d
 - 
¡¬t
 + 
Ëngth
)%Ëngth < 2è 
»duûd
;

175 
ıVeù
 
a
 = 
v”ts
[
¡¬t
];

176 
ıVeù
 
b
 = 
v”ts
[
’d
];

179 if(
	`ıvÃ¬
(
a
, 
b
, 
mš
è&& 
	`ıPŞylšeIsShÜt
(
v”ts
, 
Ëngth
, 
¡¬t
, 
’d
, mš)è 
»duûd
;

182 
ıFlßt
 
max
 = 0.0;

183 
maxi
 = 
¡¬t
;

185 
ıVeù
 
n
 = 
	`ıvnÜm®ize
(
	`ıv³½
(
	`ıvsub
(
b
, 
a
)));

186 
ıFlßt
 
d
 = 
	`ıvdÙ
(
n
, 
a
);

188 
i
=
	`Next
(
¡¬t
, 
Ëngth
); i!=
’d
; i=Next(i,†ength)){

189 
ıFlßt
 
di¡
 = 
	`çbs
(
	`ıvdÙ
(
n
, 
v”ts
[
i
]è- 
d
);

191 if(
di¡
 > 
max
){

192 
max
 = 
di¡
;

193 
maxi
 = 
i
;

197 if(
max
 > 
tŞ
){

198 
»duûd
 = 
	`DougÏsPeuck”
(
v”ts
,„eduûd, 
Ëngth
, 
¡¬t
, 
maxi
, 
mš
, 
tŞ
);

199 
»duûd
 = 
	`ıPŞylšePush
Ôeduûd, 
v”ts
[
maxi
]);

200 
»duûd
 = 
	`DougÏsPeuck”
(
v”ts
,„eduûd, 
Ëngth
, 
maxi
, 
’d
, 
mš
, 
tŞ
);

203  
»duûd
;

204 
	}
}

209 
ıPŞylše
 *

210 
	$ıPŞylšeSim¶ifyCurves
(
ıPŞylše
 *
lše
, 
ıFlßt
 
tŞ
)

212 
ıPŞylše
 *
»duûd
 = 
	`ıPŞylšeMake
(
lše
->
couÁ
);

214 
ıFlßt
 
mš
 = 
tŞ
/2.0f;

216 if(
	`ıPŞylšeIsClo£d
(
lše
)){

217 
¡¬t
, 
’d
;

218 
	`ıLoİIndexes
(
lše
->
v”ts
,†še->
couÁ
 - 1, &
¡¬t
, &
’d
);

220 
»duûd
 = 
	`ıPŞylšePush
Ôeduûd, 
lše
->
v”ts
[
¡¬t
]);

221 
»duûd
 = 
	`DougÏsPeuck”
(
lše
->
v”ts
,„eduûd,†še->
couÁ
 - 1, 
¡¬t
, 
’d
, 
mš
, 
tŞ
);

222 
»duûd
 = 
	`ıPŞylšePush
Ôeduûd, 
lše
->
v”ts
[
’d
]);

223 
»duûd
 = 
	`DougÏsPeuck”
(
lše
->
v”ts
,„eduûd,†še->
couÁ
 - 1, 
’d
, 
¡¬t
, 
mš
, 
tŞ
);

224 
»duûd
 = 
	`ıPŞylšePush
Ôeduûd, 
lše
->
v”ts
[
¡¬t
]);

226 
»duûd
 = 
	`ıPŞylšePush
Ôeduûd, 
lše
->
v”ts
[0]);

227 
»duûd
 = 
	`DougÏsPeuck”
(
lše
->
v”ts
,„eduûd,†še->
couÁ
, 0,†še->couÁ - 1, 
mš
, 
tŞ
);

228 
»duûd
 = 
	`ıPŞylšePush
Ôeduûd, 
lše
->
v”ts
[lše->
couÁ
 - 1]);

231  
	`ıPŞylšeShršk
(
»duûd
);

232 
	}
}

236 
ıPŞylšeS‘
 *

237 
	$ıPŞylšeS‘AÎoc
()

239  (
ıPŞylšeS‘
 *)
	`ıÿÎoc
(1, (cpPolylineSet));

240 
	}
}

242 
ıPŞylšeS‘
 *

243 
	$ıPŞylšeS‘In™
(
ıPŞylšeS‘
 *
£t
)

245 
£t
->
couÁ
 = 0;

246 
£t
->
ÿ·c™y
 = 8;

247 
£t
->
lšes
 = 
	`ıÿÎoc
(£t->
ÿ·c™y
, (
ıPŞylše
));

249  
£t
;

250 
	}
}

253 
ıPŞylšeS‘
 *

254 
	$ıPŞylšeS‘New
()

256  
	`ıPŞylšeS‘In™
(
	`ıPŞylšeS‘AÎoc
());

257 
	}
}

260 
	$ıPŞylšeS‘De¡roy
(
ıPŞylšeS‘
 *
£t
, 
ıBoŞ
 
ä“PŞylšes
)

262 if(
ä“PŞylšes
){

263 
i
=0; i<
£t
->
couÁ
; i++){

264 
	`ıPŞylšeF»e
(
£t
->
lšes
[
i
]);

268 
	`ıä“
(
£t
->
lšes
);

269 
	}
}

273 
	$ıPŞylšeS‘F»e
(
ıPŞylšeS‘
 *
£t
, 
ıBoŞ
 
ä“PŞylšes
)

275 if(
£t
){

276 
	`ıPŞylšeS‘De¡roy
(
£t
, 
ä“PŞylšes
);

277 
	`ıä“
(
£t
);

279 
	}
}

283 
	$ıPŞylšeS‘FšdEnds
(
ıPŞylšeS‘
 *
£t
, 
ıVeù
 
v
){

284 
couÁ
 = 
£t
->count;

285 
ıPŞylše
 **
lšes
 = 
£t
->lines;

287 
i
=0; i<
couÁ
; i++){

288 
ıPŞylše
 *
lše
 = 
lšes
[
i
];

289 if(
	`ıveql
(
lše
->
v”ts
[lše->
couÁ
 - 1], 
v
)è 
i
;

293 
	}
}

297 
	$ıPŞylšeS‘FšdS¹s
(
ıPŞylšeS‘
 *
£t
, 
ıVeù
 
v
){

298 
couÁ
 = 
£t
->count;

299 
ıPŞylše
 **
lšes
 = 
£t
->lines;

301 
i
=0; i<
couÁ
; i++){

302 if(
	`ıveql
(
lšes
[
i
]->
v”ts
[0], 
v
))  i;

306 
	}
}

310 
	$ıPŞylšeS‘Push
(
ıPŞylšeS‘
 *
£t
, 
ıPŞylše
 *
lše
)

313 
£t
->
couÁ
++;

314 if(
£t
->
couÁ
 > s‘->
ÿ·c™y
){

315 
£t
->
ÿ·c™y
 *= 2;

316 
£t
->
lšes
 = 
	`ı»®loc
(£t->lšes, s‘->
ÿ·c™y
*(
ıPŞylše
));

319 
£t
->
lšes
[£t->
couÁ
 - 1] = 
lše
;

320 
	}
}

324 
	$ıPŞylšeS‘Add
(
ıPŞylšeS‘
 *
£t
, 
ıVeù
 
v0
, cpVeù 
v1
)

326 
	`ıPŞylšeS‘Push
(
£t
, 
	`ıPŞylšeMake2
(
DEFAULT_POLYLINE_CAPACITY
, 
v0
, 
v1
));

327 
	}
}

331 
	$ıPŞylšeS‘Još
(
ıPŞylšeS‘
 *
£t
, 
befÜe
, 
aá”
)

333 
ıPŞylše
 *
lbefÜe
 = 
£t
->
lšes
[
befÜe
];

334 
ıPŞylše
 *
Ïá”
 = 
£t
->
lšes
[
aá”
];

337 
couÁ
 = 
lbefÜe
->count;

338 
lbefÜe
 = 
	`ıPŞylšeGrow
ÖbefÜe, 
Ïá”
->
couÁ
);

339 
	`memmove
(
lbefÜe
->
v”ts
 + 
couÁ
, 
Ïá”
->v”ts,†aá”->couÁ*(
ıVeù
));

340 
£t
->
lšes
[
befÜe
] = 
lbefÜe
;

343 
£t
->
couÁ
--;

344 
	`ıPŞylšeF»e
(
£t
->
lšes
[
aá”
]);

345 
£t
->
lšes
[
aá”
] = s‘->lšes[£t->
couÁ
];

346 
	}
}

351 
	$ıPŞylšeS‘CŞËùSegm’t
(
ıVeù
 
v0
, cpVeù 
v1
, 
ıPŞylšeS‘
 *
lšes
)

353 
befÜe
 = 
	`ıPŞylšeS‘FšdEnds
(
lšes
, 
v0
);

354 
aá”
 = 
	`ıPŞylšeS‘FšdS¹s
(
lšes
, 
v1
);

356 if(
befÜe
 >ğ0 && 
aá”
 >= 0){

357 if(
befÜe
 =ğ
aá”
){

359 
lšes
->lšes[
befÜe
] = 
	`ıPŞylšePush
Öšes->lšes[befÜe], 
v1
);

362 
	`ıPŞylšeS‘Još
(
lšes
, 
befÜe
, 
aá”
);

364 } if(
befÜe
 >= 0){

366 
lšes
->lšes[
befÜe
] = 
	`ıPŞylšePush
Öšes->lšes[befÜe], 
v1
);

367 } if(
aá”
 >= 0){

369 
lšes
->lšes[
aá”
] = 
	`ıPŞylšeEnqueue
Öšes->lšes[aá”], 
v0
);

372 
	`ıPŞylšeS‘Add
(
lšes
, 
v0
, 
v1
);

374 
	}
}

378 
ıPŞylše
 *

379 
	$ıPŞylšeToCÚvexHuÎ
(
ıPŞylše
 *
lše
, 
ıFlßt
 
tŞ
)

381 
ıPŞylše
 *
huÎ
 = 
	`ıPŞylšeMake
(
lše
->
couÁ
 + 1);

382 
huÎ
->
couÁ
 = 
	`ıCÚvexHuÎ
(
lše
->couÁ,†še->
v”ts
, huÎ->v”ts, 
NULL
, 
tŞ
);

383 
huÎ
 = 
	`ıPŞylšePush
(huÎ, huÎ->
v”ts
[0]);

385  
	`ıPŞylšeShršk
(
huÎ
);

386 
	}
}

390 
	sNÙch
 {

391 
	mi
;

392 
ıFlßt
 
	md
;

393 
ıVeù
 
	mv
;

394 
ıVeù
 
	mn
;

397 
ıFlßt


398 
	$FšdS‹š”
(
couÁ
, 
ıVeù
 *
v”ts
, 
NÙch
 
nÙch
)

400 
ıFlßt
 
mš
 = 
INFINITY
;

401 
ıFlßt
 
ã©u»
 = -1.0;

403 
i
=1; i<
couÁ
-1; i++){

404 
šdex
 = (
nÙch
.
i
 + i)%
couÁ
;

406 
ıVeù
 
£g_a
 = 
v”ts
[
šdex
];

407 
ıVeù
 
£g_b
 = 
v”ts
[
	`Next
(
šdex
, 
couÁ
)];

409 
ıFlßt
 
thšg_a
 = 
	`ıvüoss
(
nÙch
.
n
, 
	`ıvsub
(
£g_a
,‚Ùch.
v
));

410 
ıFlßt
 
thšg_b
 = 
	`ıvüoss
(
nÙch
.
n
, 
	`ıvsub
(
£g_b
,‚Ùch.
v
));

411 if(
thšg_a
*
thšg_b
 <= 0.0){

412 
ıFlßt
 
t
 = 
thšg_a
/Ñhšg_¨- 
thšg_b
);

413 
ıFlßt
 
di¡
 = 
	`ıvdÙ
(
nÙch
.
n
, 
	`ıvsub
(
	`ıvË½
(
£g_a
, 
£g_b
, 
t
),‚Ùch.
v
));

415 if(
di¡
 >ğ0.0 && di¡ <ğ
mš
){

416 
mš
 = 
di¡
;

417 
ã©u»
 = 
šdex
 + 
t
;

422  
ã©u»
;

423 
	}
}

561 
NÙch


562 
	$D“³¡NÙch
(
couÁ
, 
ıVeù
 *
v”ts
, 
huÎCouÁ
, cpVeù *
huÎV”ts
, 
fœ¡
, 
ıFlßt
 
tŞ
)

564 
NÙch
 
nÙch
 = {};

565 
j
 = 
	`Next
(
fœ¡
, 
couÁ
);

567 
i
=0; i<
huÎCouÁ
; i++){

568 
ıVeù
 
a
 = 
huÎV”ts
[
i
];

569 
ıVeù
 
b
 = 
huÎV”ts
[
	`Next
(
i
, 
huÎCouÁ
)];

572 
ıVeù
 
n
 = 
	`ıvnÜm®ize
(
	`ıv½”p
(
	`ıvsub
(
a
, 
b
)));

573 
ıFlßt
 
d
 = 
	`ıvdÙ
(
n
, 
a
);

575 
ıVeù
 
v
 = 
v”ts
[
j
];

576 !
	`ıveql
(
v
, 
b
)){

577 
ıFlßt
 
d•th
 = 
	`ıvdÙ
(
n
, 
v
è- 
d
;

579 if(
d•th
 > 
nÙch
.
d
){

580 
nÙch
.
d
 = 
d•th
;

581 
nÙch
.
i
 = 
j
;

582 
nÙch
.
v
 = v;

583 
nÙch
.
n
 =‚;

586 
j
 = 
	`Next
(j, 
couÁ
);

587 
v
 = 
v”ts
[
j
];

590 
j
 = 
	`Next
(j, 
couÁ
);

593  
nÙch
;

594 
	}
}

596 
šlše
 
	$IMAX
(
a
, 
b
){ (¨> b ?‡ : b);
	}
}

599 
	$Aµroxim©eCÚÿveDecompos™iÚ
(
ıVeù
 *
v”ts
, 
couÁ
, 
ıFlßt
 
tŞ
, 
ıPŞylšeS‘
 *
£t
)

601 
fœ¡
;

602 
ıVeù
 *
huÎV”ts
 = 
	`®loÿ
(
couÁ
*(cpVect));

603 
huÎCouÁ
 = 
	`ıCÚvexHuÎ
(
couÁ
, 
v”ts
, 
huÎV”ts
, &
fœ¡
, 0.0);

605 if(
huÎCouÁ
 !ğ
couÁ
){

606 
NÙch
 
nÙch
 = 
	`D“³¡NÙch
(
couÁ
, 
v”ts
, 
huÎCouÁ
, 
huÎV”ts
, 
fœ¡
, 
tŞ
);

608 if(
nÙch
.
d
 > 
tŞ
){

609 
ıFlßt
 
¡eš”_™
 = 
	`FšdS‹š”
(
couÁ
, 
v”ts
, 
nÙch
);

611 if(
¡eš”_™
 >= 0.0){

612 
¡eš”_i
 = ()
¡eš”_™
;

613 
ıVeù
 
¡eš”
 = 
	`ıvË½
(
v”ts
[
¡eš”_i
], v”ts[
	`Next
(¡eš”_i, 
couÁ
)], 
¡eš”_™
 - steiner_i);

616 
sub1_couÁ
 = (
¡eš”_i
 - 
nÙch
.
i
 + 
couÁ
)%count + 1;

617 
sub2_couÁ
 = 
couÁ
 - (
¡eš”_i
 - 
nÙch
.
i
 + count)%count;

618 
ıVeù
 *
sü©ch
 = 
	`®loÿ
((
	`IMAX
(
sub1_couÁ
, 
sub2_couÁ
) + 1)*(cpVect));

620 
i
=0; i<
sub1_couÁ
; i++è
sü©ch
[i] = 
v”ts
[(
nÙch
.˜+ i)%
couÁ
];

621 
sü©ch
[
sub1_couÁ
] = 
¡eš”
;

622 
	`Aµroxim©eCÚÿveDecompos™iÚ
(
sü©ch
, 
sub1_couÁ
 + 1, 
tŞ
, 
£t
);

624 
i
=0; i<
sub2_couÁ
; i++è
sü©ch
[i] = 
v”ts
[(
¡eš”_i
 + 1 + i)%
couÁ
];

625 
sü©ch
[
sub2_couÁ
] = 
¡eš”
;

626 
	`Aµroxim©eCÚÿveDecompos™iÚ
(
sü©ch
, 
sub2_couÁ
 + 1, 
tŞ
, 
£t
);

633 
ıPŞylše
 *
huÎ
 = 
	`ıPŞylšeMake
(
huÎCouÁ
 + 1);

635 
	`memıy
(
huÎ
->
v”ts
, 
huÎV”ts
, 
huÎCouÁ
*(
ıVeù
));

636 
huÎ
->
v”ts
[
huÎCouÁ
] = 
huÎV”ts
[0];

637 
huÎ
->
couÁ
 = 
huÎCouÁ
 + 1;

639 
	`ıPŞylšeS‘Push
(
£t
, 
huÎ
);

640 
	}
}

642 
ıPŞylšeS‘
 *

643 
	$ıPŞylšeCÚvexDecompos™iÚ_BETA
(
ıPŞylše
 *
lše
, 
ıFlßt
 
tŞ
)

645 
	`ıAs£¹Soá
(
	`ıPŞylšeIsClo£d
(
lše
), "Cannot decompose‡n open…olygon.");

646 
	`ıAs£¹Soá
(
	`ıA»aFÜPŞy
(
lše
->
couÁ
,†še->
v”ts
, 0.0) >= 0.0, "Winding is backwards. (Are you…assing‡ hole?)");

648 
ıPŞylšeS‘
 *
£t
 = 
	`ıPŞylšeS‘New
();

649 
	`Aµroxim©eCÚÿveDecompos™iÚ
(
lše
->
v”ts
,†še->
couÁ
 - 1, 
tŞ
, 
£t
);

651  
£t
;

652 
	}
}

	@../src/chipmunk/cpRatchetJoint.c

22 
	~"chmunk/chmunk_´iv©e.h
"

25 
	$´eS‹p
(
ıR©ch‘Jošt
 *
jošt
, 
ıFlßt
 
dt
)

27 
ıBody
 *
a
 = 
jošt
->
cÚ¡¿št
.a;

28 
ıBody
 *
b
 = 
jošt
->
cÚ¡¿št
.b;

30 
ıFlßt
 
ªgË
 = 
jošt
->angle;

31 
ıFlßt
 
pha£
 = 
jošt
->phase;

32 
ıFlßt
 
¿tch‘
 = 
jošt
->ratchet;

34 
ıFlßt
 
d–
 = 
b
->
a
 -‡->a;

35 
ıFlßt
 
diff
 = 
ªgË
 - 
d–
;

36 
ıFlßt
 
pdi¡
 = 0.0f;

38 if(
diff
*
¿tch‘
 > 0.0f){

39 
pdi¡
 = 
diff
;

41 
jošt
->
ªgË
 = 
	`ıfæoÜ
((
d–
 - 
pha£
)/
¿tch‘
)*ratchet +…hase;

45 
jošt
->
iSum
 = 1.0f/(
a
->
i_šv
 + 
b
->i_inv);

48 
ıFlßt
 
maxBŸs
 = 
jošt
->
cÚ¡¿št
.maxBias;

49 
jošt
->
bŸs
 = 
	`ıfşamp
(-
	`bŸs_cÛf
(jošt->
cÚ¡¿št
.
”rÜBŸs
, 
dt
)*
pdi¡
/dt, -
maxBŸs
, maxBias);

52 if(!
jošt
->
bŸs
èjošt->
jAcc
 = 0.0f;

53 
	}
}

56 
	$­¶yCachedImpul£
(
ıR©ch‘Jošt
 *
jošt
, 
ıFlßt
 
dt_cÛf
)

58 
ıBody
 *
a
 = 
jošt
->
cÚ¡¿št
.a;

59 
ıBody
 *
b
 = 
jošt
->
cÚ¡¿št
.b;

61 
ıFlßt
 
j
 = 
jošt
->
jAcc
*
dt_cÛf
;

62 
a
->
w
 -ğ
j
*a->
i_šv
;

63 
b
->
w
 +ğ
j
*b->
i_šv
;

64 
	}
}

67 
	$­¶yImpul£
(
ıR©ch‘Jošt
 *
jošt
, 
ıFlßt
 
dt
)

69 if(!
jošt
->
bŸs
) ;

71 
ıBody
 *
a
 = 
jošt
->
cÚ¡¿št
.a;

72 
ıBody
 *
b
 = 
jošt
->
cÚ¡¿št
.b;

75 
ıFlßt
 
wr
 = 
b
->
w
 - 
a
->w;

76 
ıFlßt
 
¿tch‘
 = 
jošt
->ratchet;

78 
ıFlßt
 
jMax
 = 
jošt
->
cÚ¡¿št
.
maxFÜû
*
dt
;

81 
ıFlßt
 
j
 = -(
jošt
->
bŸs
 + 
wr
)*jošt->
iSum
;

82 
ıFlßt
 
jOld
 = 
jošt
->
jAcc
;

83 
jošt
->
jAcc
 = 
	`ıfşamp
((
jOld
 + 
j
)*
¿tch‘
, 0.0f, 
jMax
*
	`ıçbs
(ratchet))/ratchet;

84 
j
 = 
jošt
->
jAcc
 - 
jOld
;

87 
a
->
w
 -ğ
j
*a->
i_šv
;

88 
b
->
w
 +ğ
j
*b->
i_šv
;

89 
	}
}

91 
ıFlßt


92 
	$g‘Impul£
(
ıR©ch‘Jošt
 *
jošt
)

94  
	`ıçbs
(
jošt
->
jAcc
);

95 
	}
}

97 cÚ¡ 
ıCÚ¡¿štCÏss
 
	gkÏss
 = {

98 (
ıCÚ¡¿štP»S‹pIm¶
)
´eS‹p
,

99 (
ıCÚ¡¿štAµlyCachedImpul£Im¶
)
­¶yCachedImpul£
,

100 (
ıCÚ¡¿štAµlyImpul£Im¶
)
­¶yImpul£
,

101 (
ıCÚ¡¿štG‘Impul£Im¶
)
g‘Impul£
,

104 
ıR©ch‘Jošt
 *

105 
	$ıR©ch‘JoštAÎoc
()

107  (
ıR©ch‘Jošt
 *)
	`ıÿÎoc
(1, (cpRatchetJoint));

108 
	}
}

110 
ıR©ch‘Jošt
 *

111 
	$ıR©ch‘JoštIn™
(
ıR©ch‘Jošt
 *
jošt
, 
ıBody
 *
a
, cpBody *
b
, 
ıFlßt
 
pha£
, cpFlßˆ
¿tch‘
)

113 
	`ıCÚ¡¿štIn™
((
ıCÚ¡¿št
 *)
jošt
, &
kÏss
, 
a
, 
b
);

115 
jošt
->
ªgË
 = 0.0f;

116 
jošt
->
pha£
 =…hase;

117 
jošt
->
¿tch‘
 =„atchet;

120 
jošt
->
ªgË
 = (
b
 ? b->
a
 : 0.0f) - (a ?‡->a : 0.0f);

122  
jošt
;

123 
	}
}

125 
ıCÚ¡¿št
 *

126 
	$ıR©ch‘JoštNew
(
ıBody
 *
a
, cpBody *
b
, 
ıFlßt
 
pha£
, cpFlßˆ
¿tch‘
)

128  (
ıCÚ¡¿št
 *)
	`ıR©ch‘JoštIn™
(
	`ıR©ch‘JoštAÎoc
(), 
a
, 
b
, 
pha£
, 
¿tch‘
);

129 
	}
}

131 
ıBoŞ


132 
	$ıCÚ¡¿štIsR©ch‘Jošt
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

134  (
cÚ¡¿št
->
kÏss
 == &klass);

135 
	}
}

137 
ıFlßt


138 
	$ıR©ch‘JoštG‘AngË
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

140 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsR©ch‘Jošt
(
cÚ¡¿št
), "Constraint is‚ot‡„atchet joint.");

141  ((
ıR©ch‘Jošt
 *)
cÚ¡¿št
)->
ªgË
;

142 
	}
}

145 
	$ıR©ch‘JoštS‘AngË
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
ªgË
)

147 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsR©ch‘Jošt
(
cÚ¡¿št
), "Constraint is‚ot‡„atchet joint.");

148 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

149 ((
ıR©ch‘Jošt
 *)
cÚ¡¿št
)->
ªgË
 =‡ngle;

150 
	}
}

152 
ıFlßt


153 
	$ıR©ch‘JoštG‘Pha£
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

155 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsR©ch‘Jošt
(
cÚ¡¿št
), "Constraint is‚ot‡„atchet joint.");

156  ((
ıR©ch‘Jošt
 *)
cÚ¡¿št
)->
pha£
;

157 
	}
}

160 
	$ıR©ch‘JoštS‘Pha£
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
pha£
)

162 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsR©ch‘Jošt
(
cÚ¡¿št
), "Constraint is‚ot‡„atchet joint.");

163 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

164 ((
ıR©ch‘Jošt
 *)
cÚ¡¿št
)->
pha£
 =…hase;

165 
	}
}

166 
ıFlßt


167 
	$ıR©ch‘JoštG‘R©ch‘
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

169 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsR©ch‘Jošt
(
cÚ¡¿št
), "Constraint is‚ot‡„atchet joint.");

170  ((
ıR©ch‘Jošt
 *)
cÚ¡¿št
)->
¿tch‘
;

171 
	}
}

174 
	$ıR©ch‘JoštS‘R©ch‘
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
¿tch‘
)

176 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsR©ch‘Jošt
(
cÚ¡¿št
), "Constraint is‚ot‡„atchet joint.");

177 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

178 ((
ıR©ch‘Jošt
 *)
cÚ¡¿št
)->
¿tch‘
 =„atchet;

179 
	}
}

	@../src/chipmunk/cpRobust.c

1 
	~"chmunk/ıRobu¡.h
"

4 
ıBoŞ


5 
	$ıCheckPoštG»©”
(cÚ¡ 
ıVeù
 
a
, cÚ¡ cpVeù 
b
, cÚ¡ cpVeù 
c
)

7  (
b
.
y
 - 
a
.y)*×.
x
 + b.x - 2*
c
.x) > (b.x -‡.x)*(a.y + b.y - 2*c.y);

8 
	}
}

10 
ıBoŞ


11 
	$ıCheckAxis
(
ıVeù
 
v0
, cpVeù 
v1
, cpVeù 
p
, cpVeù 
n
){

12  
	`ıvdÙ
(
p
, 
n
è<ğ
	`ıfmax
(ıvdÙ(
v0
,‚), cpvdÙ(
v1
,‚));

13 
	}
}

	@../src/chipmunk/cpRotaryLimitJoint.c

22 
	~"chmunk/chmunk_´iv©e.h
"

25 
	$´eS‹p
(
ıRÙ¬yLim™Jošt
 *
jošt
, 
ıFlßt
 
dt
)

27 
ıBody
 *
a
 = 
jošt
->
cÚ¡¿št
.a;

28 
ıBody
 *
b
 = 
jošt
->
cÚ¡¿št
.b;

30 
ıFlßt
 
di¡
 = 
b
->
a
 -‡->a;

31 
ıFlßt
 
pdi¡
 = 0.0f;

32 if(
di¡
 > 
jošt
->
max
) {

33 
pdi¡
 = 
jošt
->
max
 - 
di¡
;

34 } if(
di¡
 < 
jošt
->
mš
) {

35 
pdi¡
 = 
jošt
->
mš
 - 
di¡
;

39 
jošt
->
iSum
 = 1.0f/(
a
->
i_šv
 + 
b
->i_inv);

42 
ıFlßt
 
maxBŸs
 = 
jošt
->
cÚ¡¿št
.maxBias;

43 
jošt
->
bŸs
 = 
	`ıfşamp
(-
	`bŸs_cÛf
(jošt->
cÚ¡¿št
.
”rÜBŸs
, 
dt
)*
pdi¡
/dt, -
maxBŸs
, maxBias);

46 if(!
jošt
->
bŸs
èjošt->
jAcc
 = 0.0f;

47 
	}
}

50 
	$­¶yCachedImpul£
(
ıRÙ¬yLim™Jošt
 *
jošt
, 
ıFlßt
 
dt_cÛf
)

52 
ıBody
 *
a
 = 
jošt
->
cÚ¡¿št
.a;

53 
ıBody
 *
b
 = 
jošt
->
cÚ¡¿št
.b;

55 
ıFlßt
 
j
 = 
jošt
->
jAcc
*
dt_cÛf
;

56 
a
->
w
 -ğ
j
*a->
i_šv
;

57 
b
->
w
 +ğ
j
*b->
i_šv
;

58 
	}
}

61 
	$­¶yImpul£
(
ıRÙ¬yLim™Jošt
 *
jošt
, 
ıFlßt
 
dt
)

63 if(!
jošt
->
bŸs
) ;

65 
ıBody
 *
a
 = 
jošt
->
cÚ¡¿št
.a;

66 
ıBody
 *
b
 = 
jošt
->
cÚ¡¿št
.b;

69 
ıFlßt
 
wr
 = 
b
->
w
 - 
a
->w;

71 
ıFlßt
 
jMax
 = 
jošt
->
cÚ¡¿št
.
maxFÜû
*
dt
;

74 
ıFlßt
 
j
 = -(
jošt
->
bŸs
 + 
wr
)*jošt->
iSum
;

75 
ıFlßt
 
jOld
 = 
jošt
->
jAcc
;

76 if(
jošt
->
bŸs
 < 0.0f){

77 
jošt
->
jAcc
 = 
	`ıfşamp
(
jOld
 + 
j
, 0.0f, 
jMax
);

79 
jošt
->
jAcc
 = 
	`ıfşamp
(
jOld
 + 
j
, -
jMax
, 0.0f);

81 
j
 = 
jošt
->
jAcc
 - 
jOld
;

84 
a
->
w
 -ğ
j
*a->
i_šv
;

85 
b
->
w
 +ğ
j
*b->
i_šv
;

86 
	}
}

88 
ıFlßt


89 
	$g‘Impul£
(
ıRÙ¬yLim™Jošt
 *
jošt
)

91  
	`ıçbs
(
jošt
->
jAcc
);

92 
	}
}

94 cÚ¡ 
ıCÚ¡¿štCÏss
 
	gkÏss
 = {

95 (
ıCÚ¡¿štP»S‹pIm¶
)
´eS‹p
,

96 (
ıCÚ¡¿štAµlyCachedImpul£Im¶
)
­¶yCachedImpul£
,

97 (
ıCÚ¡¿štAµlyImpul£Im¶
)
­¶yImpul£
,

98 (
ıCÚ¡¿štG‘Impul£Im¶
)
g‘Impul£
,

101 
ıRÙ¬yLim™Jošt
 *

102 
	$ıRÙ¬yLim™JoštAÎoc
()

104  (
ıRÙ¬yLim™Jošt
 *)
	`ıÿÎoc
(1, (cpRotaryLimitJoint));

105 
	}
}

107 
ıRÙ¬yLim™Jošt
 *

108 
	$ıRÙ¬yLim™JoštIn™
(
ıRÙ¬yLim™Jošt
 *
jošt
, 
ıBody
 *
a
, cpBody *
b
, 
ıFlßt
 
mš
, cpFlßˆ
max
)

110 
	`ıCÚ¡¿štIn™
((
ıCÚ¡¿št
 *)
jošt
, &
kÏss
, 
a
, 
b
);

112 
jošt
->
mš
 = min;

113 
jošt
->
max
 = max;

115 
jošt
->
jAcc
 = 0.0f;

117  
jošt
;

118 
	}
}

120 
ıCÚ¡¿št
 *

121 
	$ıRÙ¬yLim™JoštNew
(
ıBody
 *
a
, cpBody *
b
, 
ıFlßt
 
mš
, cpFlßˆ
max
)

123  (
ıCÚ¡¿št
 *)
	`ıRÙ¬yLim™JoštIn™
(
	`ıRÙ¬yLim™JoštAÎoc
(), 
a
, 
b
, 
mš
, 
max
);

124 
	}
}

126 
ıBoŞ


127 
	$ıCÚ¡¿štIsRÙ¬yLim™Jošt
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

129  (
cÚ¡¿št
->
kÏss
 == &klass);

130 
	}
}

132 
ıFlßt


133 
	$ıRÙ¬yLim™JoštG‘Mš
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

135 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsRÙ¬yLim™Jošt
(
cÚ¡¿št
), "Constraint is‚ot‡„otary†imit joint.");

136  ((
ıRÙ¬yLim™Jošt
 *)
cÚ¡¿št
)->
mš
;

137 
	}
}

140 
	$ıRÙ¬yLim™JoštS‘Mš
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
mš
)

142 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsRÙ¬yLim™Jošt
(
cÚ¡¿št
), "Constraint is‚ot‡„otary†imit joint.");

143 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

144 ((
ıRÙ¬yLim™Jošt
 *)
cÚ¡¿št
)->
mš
 = min;

145 
	}
}

147 
ıFlßt


148 
	$ıRÙ¬yLim™JoštG‘Max
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

150 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsRÙ¬yLim™Jošt
(
cÚ¡¿št
), "Constraint is‚ot‡„otary†imit joint.");

151  ((
ıRÙ¬yLim™Jošt
 *)
cÚ¡¿št
)->
max
;

152 
	}
}

155 
	$ıRÙ¬yLim™JoštS‘Max
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
max
)

157 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsRÙ¬yLim™Jošt
(
cÚ¡¿št
), "Constraint is‚ot‡„otary†imit joint.");

158 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

159 ((
ıRÙ¬yLim™Jošt
 *)
cÚ¡¿št
)->
max
 = max;

160 
	}
}

	@../src/chipmunk/cpShape.c

22 
	~"chmunk/chmunk_´iv©e.h
"

23 
	~"chmunk/chmunk_un§ã.h
"

25 
	#CP_DefšeSh­eG‘‹r
(, 
ty³
, 
memb”
, 
Çme
) \

26 
	`CP_Deş¬eSh­eG‘‹r
(, 
ty³
, 
Çme
){ \

27 
	`ıAs£¹H¬d
(
sh­e
->
kÏss
 =ğ&##
CÏss
, "shape is‚ot‡ "#struct); \

28  ((*)
sh­e
)->
memb”
; \

29 }

	)

31 
ıSh­e
 *

32 
	$ıSh­eIn™
(
ıSh­e
 *
sh­e
, cÚ¡ 
ıSh­eCÏss
 *
kÏss
, 
ıBody
 *
body
, 
ıSh­eMassInfo
 
massInfo
)

34 
sh­e
->
kÏss
 = klass;

36 
sh­e
->
body
 = body;

37 
sh­e
->
massInfo
 = massInfo;

39 
sh­e
->
£nsÜ
 = 0;

41 
sh­e
->
e
 = 0.0f;

42 
sh­e
->
u
 = 0.0f;

43 
sh­e
->
surçûV
 = 
ıvz”o
;

45 
sh­e
->
ty³
 = 0;

46 
sh­e
->
f‹r
.
group
 = 
CP_NO_GROUP
;

47 
sh­e
->
f‹r
.
ÿ‹gÜ›s
 = 
CP_ALL_CATEGORIES
;

48 
sh­e
->
f‹r
.
mask
 = 
CP_ALL_CATEGORIES
;

50 
sh­e
->
u£rD©a
 = 
NULL
;

52 
sh­e
->
¥aû
 = 
NULL
;

54 
sh­e
->
Ãxt
 = 
NULL
;

55 
sh­e
->
´ev
 = 
NULL
;

57  
sh­e
;

58 
	}
}

61 
	$ıSh­eDe¡roy
(
ıSh­e
 *
sh­e
)

63 if(
sh­e
->
kÏss
 && sh­e->kÏss->
de¡roy
èsh­e->kÏss->
	`de¡roy
(shape);

64 
	}
}

67 
	$ıSh­eF»e
(
ıSh­e
 *
sh­e
)

69 if(
sh­e
){

70 
	`ıSh­eDe¡roy
(
sh­e
);

71 
	`ıä“
(
sh­e
);

73 
	}
}

75 
ıS·û
 *

76 
	$ıSh­eG‘S·û
(cÚ¡ 
ıSh­e
 *
sh­e
)

78  
sh­e
->
¥aû
;

79 
	}
}

81 
ıBody
 *

82 
	$ıSh­eG‘Body
(cÚ¡ 
ıSh­e
 *
sh­e
)

84  
sh­e
->
body
;

85 
	}
}

88 
	$ıSh­eS‘Body
(
ıSh­e
 *
sh­e
, 
ıBody
 *
body
)

90 
	`ıAs£¹H¬d
(!
	`ıSh­eAùive
(
sh­e
), "You cannot changehe body on‡n‡ctive shape. You must„emovehe shape fromhe space before changinghe body.");

91 
sh­e
->
body
 = body;

92 
	}
}

94 
ıFlßt
 
	$ıSh­eG‘Mass
(
ıSh­e
 *
sh­e
){  sh­e->
massInfo
.
m
; 
	}
}

97 
	$ıSh­eS‘Mass
(
ıSh­e
 *
sh­e
, 
ıFlßt
 
mass
){

98 
ıBody
 *
body
 = 
sh­e
->body;

99 
	`ıBodyAùiv©e
(
body
);

101 
sh­e
->
massInfo
.
m
 = 
mass
;

102 
	`ıBodyAccumuÏ‹MassFromSh­es
(
body
);

103 
	}
}

105 
ıFlßt
 
	$ıSh­eG‘D’s™y
(
ıSh­e
 *
sh­e
){  sh­e->
massInfo
.
m
/sh­e->massInfo.
¬—
; 
	}
}

106 
	$ıSh­eS‘D’s™y
(
ıSh­e
 *
sh­e
, 
ıFlßt
 
d’s™y
){ 
	`ıSh­eS‘Mass
(sh­e, d’s™y*sh­e->
massInfo
.
¬—
); 
	}
}

108 
ıFlßt
 
	$ıSh­eG‘Mom’t
(
ıSh­e
 *
sh­e
){  sh­e->
massInfo
.
m
*sh­e->massInfo.
i
; 
	}
}

109 
ıFlßt
 
	$ıSh­eG‘A»a
(
ıSh­e
 *
sh­e
){  sh­e->
massInfo
.
¬—
; 
	}
}

110 
ıVeù
 
	$ıSh­eG‘C’‹rOfG¿v™y
(
ıSh­e
 *
sh­e
è{  sh­e->
massInfo
.
cog
; 
	}
}

112 
ıBB


113 
	$ıSh­eG‘BB
(cÚ¡ 
ıSh­e
 *
sh­e
)

115  
sh­e
->
bb
;

116 
	}
}

118 
ıBoŞ


119 
	$ıSh­eG‘S’sÜ
(cÚ¡ 
ıSh­e
 *
sh­e
)

121  
sh­e
->
£nsÜ
;

122 
	}
}

125 
	$ıSh­eS‘S’sÜ
(
ıSh­e
 *
sh­e
, 
ıBoŞ
 
£nsÜ
)

127 
	`ıBodyAùiv©e
(
sh­e
->
body
);

128 
sh­e
->
£nsÜ
 = sensor;

129 
	}
}

131 
ıFlßt


132 
	$ıSh­eG‘EÏ¡ic™y
(cÚ¡ 
ıSh­e
 *
sh­e
)

134  
sh­e
->
e
;

135 
	}
}

138 
	$ıSh­eS‘EÏ¡ic™y
(
ıSh­e
 *
sh­e
, 
ıFlßt
 
–a¡ic™y
)

140 
	`ıAs£¹H¬d
(
–a¡ic™y
 >= 0.0f, "Elasticity must be…ositive‡nd‚on-zero.");

141 
	`ıBodyAùiv©e
(
sh­e
->
body
);

142 
sh­e
->
e
 = 
–a¡ic™y
;

143 
	}
}

145 
ıFlßt


146 
	$ıSh­eG‘FriùiÚ
(cÚ¡ 
ıSh­e
 *
sh­e
)

148  
sh­e
->
u
;

149 
	}
}

152 
	$ıSh­eS‘FriùiÚ
(
ıSh­e
 *
sh­e
, 
ıFlßt
 
äiùiÚ
)

154 
	`ıAs£¹H¬d
(
äiùiÚ
 >= 0.0f, "Friction must be…ostive‡nd‚on-zero.");

155 
	`ıBodyAùiv©e
(
sh­e
->
body
);

156 
sh­e
->
u
 = 
äiùiÚ
;

157 
	}
}

159 
ıVeù


160 
	$ıSh­eG‘SurçûV–oc™y
(cÚ¡ 
ıSh­e
 *
sh­e
)

162  
sh­e
->
surçûV
;

163 
	}
}

166 
	$ıSh­eS‘SurçûV–oc™y
(
ıSh­e
 *
sh­e
, 
ıVeù
 
surçûV–oc™y
)

168 
	`ıBodyAùiv©e
(
sh­e
->
body
);

169 
sh­e
->
surçûV
 = 
surçûV–oc™y
;

170 
	}
}

172 
ıD©aPoš‹r


173 
	$ıSh­eG‘U£rD©a
(cÚ¡ 
ıSh­e
 *
sh­e
)

175  
sh­e
->
u£rD©a
;

176 
	}
}

179 
	$ıSh­eS‘U£rD©a
(
ıSh­e
 *
sh­e
, 
ıD©aPoš‹r
 
u£rD©a
)

181 
sh­e
->
u£rD©a
 = userData;

182 
	}
}

184 
ıCŞlisiÚTy³


185 
	$ıSh­eG‘CŞlisiÚTy³
(cÚ¡ 
ıSh­e
 *
sh­e
)

187  
sh­e
->
ty³
;

188 
	}
}

191 
	$ıSh­eS‘CŞlisiÚTy³
(
ıSh­e
 *
sh­e
, 
ıCŞlisiÚTy³
 
cŞlisiÚTy³
)

193 
	`ıBodyAùiv©e
(
sh­e
->
body
);

194 
sh­e
->
ty³
 = 
cŞlisiÚTy³
;

195 
	}
}

197 
ıSh­eF‹r


198 
	$ıSh­eG‘F‹r
(cÚ¡ 
ıSh­e
 *
sh­e
)

200  
sh­e
->
f‹r
;

201 
	}
}

204 
	$ıSh­eS‘F‹r
(
ıSh­e
 *
sh­e
, 
ıSh­eF‹r
 
f‹r
)

206 
	`ıBodyAùiv©e
(
sh­e
->
body
);

207 
sh­e
->
f‹r
 = filter;

208 
	}
}

210 
ıBB


211 
	$ıSh­eCacheBB
(
ıSh­e
 *
sh­e
)

213  
	`ıSh­eUpd©e
(
sh­e
, sh­e->
body
->
ŒªsfÜm
);

214 
	}
}

216 
ıBB


217 
	$ıSh­eUpd©e
(
ıSh­e
 *
sh­e
, 
ıT¿nsfÜm
 
ŒªsfÜm
)

219  (
sh­e
->
bb
 = sh­e->
kÏss
->
	`ÿcheD©a
(sh­e, 
ŒªsfÜm
));

220 
	}
}

222 
ıFlßt


223 
	$ıSh­ePoštQu”y
(cÚ¡ 
ıSh­e
 *
sh­e
, 
ıVeù
 
p
, 
ıPoštQu”yInfo
 *
šfo
)

225 
ıPoštQu”yInfo
 
bÏnk
 = {
NULL
, 
ıvz”o
, 
INFINITY
, cpvzero};

226 if(
šfo
){

227 (*
šfo
èğ
bÏnk
;

229 
šfo
 = &
bÏnk
;

232 
sh­e
->
kÏss
->
	`poštQu”y
(sh­e, 
p
, 
šfo
);

233  
šfo
->
di¡ªû
;

234 
	}
}

237 
ıBoŞ


238 
	$ıSh­eSegm’tQu”y
(cÚ¡ 
ıSh­e
 *
sh­e
, 
ıVeù
 
a
, cpVeù 
b
, 
ıFlßt
 
¿dius
, 
ıSegm’tQu”yInfo
 *
šfo
){

239 
ıSegm’tQu”yInfo
 
bÏnk
 = {
NULL
, 
b
, 
ıvz”o
, 1.0f};

240 if(
šfo
){

241 (*
šfo
èğ
bÏnk
;

243 
šfo
 = &
bÏnk
;

246 
ıPoštQu”yInfo
 
Ã¬e¡
;

247 
sh­e
->
kÏss
->
	`poštQu”y
(sh­e, 
a
, &
Ã¬e¡
);

248 if(
Ã¬e¡
.
di¡ªû
 <ğ
¿dius
){

249 
šfo
->
sh­e
 = shape;

250 
šfo
->
®pha
 = 0.0;

251 
šfo
->
nÜm®
 = 
	`ıvnÜm®ize
(
	`ıvsub
(
a
, 
Ã¬e¡
.
pošt
));

253 
sh­e
->
kÏss
->
	`£gm’tQu”y
(sh­e, 
a
, 
b
, 
¿dius
, 
šfo
);

256  (
šfo
->
sh­e
 !ğ
NULL
);

257 
	}
}

259 
ıCÚùPoštS‘


260 
	$ıSh­esCŞlide
(cÚ¡ 
ıSh­e
 *
a
, cÚ¡ cpSh­*
b
)

262 
ıCÚù
 
cÚùs
[
CP_MAX_CONTACTS_PER_ARBITER
];

263 
ıCŞlisiÚInfo
 
šfo
 = 
	`ıCŞlide
(
a
, 
b
, 0, 
cÚùs
);

265 
ıCÚùPoštS‘
 
£t
;

266 
£t
.
couÁ
 = 
šfo
.count;

269 
ıBoŞ
 
sw­³d
 = (
a
 !ğ
šfo
.a);

270 
£t
.
nÜm®
 = (
sw­³d
 ? 
	`ıvÃg
(
šfo
.
n
) : info.n);

272 
i
=0; i<
šfo
.
couÁ
; i++){

274 
ıVeù
 
p1
 = 
cÚùs
[
i
].
r1
;

275 
ıVeù
 
p2
 = 
cÚùs
[
i
].
r2
;

277 
£t
.
pošts
[
i
].
poštA
 = (
sw­³d
 ? 
p2
 : 
p1
);

278 
£t
.
pošts
[
i
].
poštB
 = (
sw­³d
 ? 
p1
 : 
p2
);

279 
£t
.
pošts
[
i
].
di¡ªû
 = 
	`ıvdÙ
(
	`ıvsub
(
p2
, 
p1
), s‘.
nÜm®
);

282  
£t
;

283 
	}
}

285 
ıCœşeSh­e
 *

286 
	$ıCœşeSh­eAÎoc
()

288  (
ıCœşeSh­e
 *)
	`ıÿÎoc
(1, (cpCircleShape));

289 
	}
}

291 
ıBB


292 
	$ıCœşeSh­eCacheD©a
(
ıCœşeSh­e
 *
cœşe
, 
ıT¿nsfÜm
 
ŒªsfÜm
)

294 
ıVeù
 
c
 = 
cœşe
->
tc
 = 
	`ıT¿nsfÜmPošt
(
ŒªsfÜm
, circle->c);

295  
	`ıBBNewFÜCœşe
(
c
, 
cœşe
->
r
);

296 
	}
}

299 
	$ıCœşeSh­ePoštQu”y
(
ıCœşeSh­e
 *
cœşe
, 
ıVeù
 
p
, 
ıPoštQu”yInfo
 *
šfo
)

301 
ıVeù
 
d–
 = 
	`ıvsub
(
p
, 
cœşe
->
tc
);

302 
ıFlßt
 
d
 = 
	`ıvËngth
(
d–
);

303 
ıFlßt
 
r
 = 
cœşe
->r;

305 
šfo
->
sh­e
 = (
ıSh­e
 *)
cœşe
;

306 
šfo
->
pošt
 = 
	`ıvadd
(
cœşe
->
tc
, 
	`ıvmuÉ
(
d–
, 
r
/
d
));

307 
šfo
->
di¡ªû
 = 
d
 - 
r
;

310 
šfo
->
g¿d›Á
 = (
d
 > 
MAGIC_EPSILON
 ? 
	`ıvmuÉ
(
d–
, 1.0f/dè: 
	`ıv
(0.0f, 1.0f));

311 
	}
}

314 
	$ıCœşeSh­eSegm’tQu”y
(
ıCœşeSh­e
 *
cœşe
, 
ıVeù
 
a
, cpVeù 
b
, 
ıFlßt
 
¿dius
, 
ıSegm’tQu”yInfo
 *
šfo
)

316 
	`CœşeSegm’tQu”y
((
ıSh­e
 *)
cœşe
, cœşe->
tc
, cœşe->
r
, 
a
, 
b
, 
¿dius
, 
šfo
);

317 
	}
}

319 
ıSh­eMassInfo


320 
	$ıCœşeSh­eMassInfo
(
ıFlßt
 
mass
, cpFlßˆ
¿dius
, 
ıVeù
 
ûÁ”
)

322 
ıSh­eMassInfo
 
šfo
 = {

323 
mass
, 
	`ıMom’tFÜCœşe
(1.0f, 0.0f, 
¿dius
, 
ıvz”o
),

324 
ûÁ”
,

325 
	`ıA»aFÜCœşe
(0.0f, 
¿dius
),

328  
šfo
;

329 
	}
}

331 cÚ¡ 
ıSh­eCÏss
 
	gıCœşeSh­eCÏss
 = {

332 
CP_CIRCLE_SHAPE
,

333 (
ıSh­eCacheD©aIm¶
)
ıCœşeSh­eCacheD©a
,

334 
NULL
,

335 (
ıSh­ePoštQu”yIm¶
)
ıCœşeSh­ePoštQu”y
,

336 (
ıSh­eSegm’tQu”yIm¶
)
ıCœşeSh­eSegm’tQu”y
,

339 
ıCœşeSh­e
 *

340 
	$ıCœşeSh­eIn™
(
ıCœşeSh­e
 *
cœşe
, 
ıBody
 *
body
, 
ıFlßt
 
¿dius
, 
ıVeù
 
off£t
)

342 
cœşe
->
c
 = 
off£t
;

343 
cœşe
->
r
 = 
¿dius
;

345 
	`ıSh­eIn™
((
ıSh­e
 *)
cœşe
, &
ıCœşeSh­eCÏss
, 
body
, 
	`ıCœşeSh­eMassInfo
(0.0f, 
¿dius
, 
off£t
));

347  
cœşe
;

348 
	}
}

350 
ıSh­e
 *

351 
	$ıCœşeSh­eNew
(
ıBody
 *
body
, 
ıFlßt
 
¿dius
, 
ıVeù
 
off£t
)

353  (
ıSh­e
 *)
	`ıCœşeSh­eIn™
(
	`ıCœşeSh­eAÎoc
(), 
body
, 
¿dius
, 
off£t
);

354 
	}
}

356 
ıVeù


357 
	$ıCœşeSh­eG‘Off£t
(cÚ¡ 
ıSh­e
 *
sh­e
)

359 
	`ıAs£¹H¬d
(
sh­e
->
kÏss
 =ğ&
ıCœşeSh­eCÏss
, "Shape is‚ot‡ circle shape.");

360  ((
ıCœşeSh­e
 *)
sh­e
)->
c
;

361 
	}
}

363 
ıFlßt


364 
	$ıCœşeSh­eG‘Radius
(cÚ¡ 
ıSh­e
 *
sh­e
)

366 
	`ıAs£¹H¬d
(
sh­e
->
kÏss
 =ğ&
ıCœşeSh­eCÏss
, "Shape is‚ot‡ circle shape.");

367  ((
ıCœşeSh­e
 *)
sh­e
)->
r
;

368 
	}
}

371 
ıSegm’tSh­e
 *

372 
	$ıSegm’tSh­eAÎoc
()

374  (
ıSegm’tSh­e
 *)
	`ıÿÎoc
(1, (cpSegmentShape));

375 
	}
}

377 
ıBB


378 
	$ıSegm’tSh­eCacheD©a
(
ıSegm’tSh­e
 *
£g
, 
ıT¿nsfÜm
 
ŒªsfÜm
)

380 
£g
->

 = 
	`ıT¿nsfÜmPošt
(
ŒªsfÜm
, seg->
a
);

381 
£g
->
tb
 = 
	`ıT¿nsfÜmPošt
(
ŒªsfÜm
, seg->
b
);

382 
£g
->
Š
 = 
	`ıT¿nsfÜmVeù
(
ŒªsfÜm
, seg->
n
);

384 
ıFlßt
 
l
,
r
,
b
,
t
;

386 if(
£g
->

.
x
 < seg->
tb
.x){

387 
l
 = 
£g
->

.
x
;

388 
r
 = 
£g
->
tb
.
x
;

390 
l
 = 
£g
->
tb
.
x
;

391 
r
 = 
£g
->

.
x
;

394 if(
£g
->

.
y
 < seg->
tb
.y){

395 
b
 = 
£g
->

.
y
;

396 
t
 = 
£g
->
tb
.
y
;

398 
b
 = 
£g
->
tb
.
y
;

399 
t
 = 
£g
->

.
y
;

402 
ıFlßt
 
¿d
 = 
£g
->
r
;

403  
	`ıBBNew
(
l
 - 
¿d
, 
b
 -„ad, 
r
 +„ad, 
t
 +„ad);

404 
	}
}

407 
	$ıSegm’tSh­ePoštQu”y
(
ıSegm’tSh­e
 *
£g
, 
ıVeù
 
p
, 
ıPoštQu”yInfo
 *
šfo
)

409 
ıVeù
 
şo£¡
 = 
	`ıClo£tPoštOnSegm’t
(
p
, 
£g
->

, seg->
tb
);

411 
ıVeù
 
d–
 = 
	`ıvsub
(
p
, 
şo£¡
);

412 
ıFlßt
 
d
 = 
	`ıvËngth
(
d–
);

413 
ıFlßt
 
r
 = 
£g
->r;

414 
ıVeù
 
g
 = 
	`ıvmuÉ
(
d–
, 1.0f/
d
);

416 
šfo
->
sh­e
 = (
ıSh­e
 *)
£g
;

417 
šfo
->
pošt
 = (
d
 ? 
	`ıvadd
(
şo£¡
, 
	`ıvmuÉ
(
g
, 
r
)) : closest);

418 
šfo
->
di¡ªû
 = 
d
 - 
r
;

421 
šfo
->
g¿d›Á
 = (
d
 > 
MAGIC_EPSILON
 ? 
g
 : 
£g
->
n
);

422 
	}
}

425 
	$ıSegm’tSh­eSegm’tQu”y
(
ıSegm’tSh­e
 *
£g
, 
ıVeù
 
a
, cpVeù 
b
, 
ıFlßt
 
r2
, 
ıSegm’tQu”yInfo
 *
šfo
)

427 
ıVeù
 
n
 = 
£g
->
Š
;

428 
ıFlßt
 
d
 = 
	`ıvdÙ
(
	`ıvsub
(
£g
->

, 
a
), 
n
);

429 
ıFlßt
 
r
 = 
£g
->¸+ 
r2
;

431 
ıVeù
 
æ³d_n
 = (
d
 > 0.0à? 
	`ıvÃg
(
n
) :‚);

432 
ıVeù
 
£g_off£t
 = 
	`ıvsub
(
	`ıvmuÉ
(
æ³d_n
, 
r
), 
a
);

435 
ıVeù
 
£g_a
 = 
	`ıvadd
(
£g
->

, 
£g_off£t
);

436 
ıVeù
 
£g_b
 = 
	`ıvadd
(
£g
->
tb
, 
£g_off£t
);

437 
ıVeù
 
d–
 = 
	`ıvsub
(
b
, 
a
);

439 if(
	`ıvüoss
(
d–
, 
£g_a
)*ıvüoss(d–, 
£g_b
) <= 0.0f){

440 
ıFlßt
 
d_off£t
 = 
d
 + (d > 0.0à? -
r
 :„);

441 
ıFlßt
 
ad
 = -
d_off£t
;

442 
ıFlßt
 
bd
 = 
	`ıvdÙ
(
d–
, 
n
è- 
d_off£t
;

444 if(
ad
*
bd
 < 0.0f){

445 
ıFlßt
 
t
 = 
ad
/×d - 
bd
);

447 
šfo
->
sh­e
 = (
ıSh­e
 *)
£g
;

448 
šfo
->
pošt
 = 
	`ıvsub
(
	`ıvË½
(
a
, 
b
, 
t
), 
	`ıvmuÉ
(
æ³d_n
, 
r2
));

449 
šfo
->
nÜm®
 = 
æ³d_n
;

450 
šfo
->
®pha
 = 
t
;

452 } if(
r
 != 0.0f){

453 
ıSegm’tQu”yInfo
 
šfo1
 = {
NULL
, 
b
, 
ıvz”o
, 1.0f};

454 
ıSegm’tQu”yInfo
 
šfo2
 = {
NULL
, 
b
, 
ıvz”o
, 1.0f};

455 
	`CœşeSegm’tQu”y
((
ıSh­e
 *)
£g
, seg->

, seg->
r
, 
a
, 
b
, 
r2
, &
šfo1
);

456 
	`CœşeSegm’tQu”y
((
ıSh­e
 *)
£g
, seg->
tb
, seg->
r
, 
a
, 
b
, 
r2
, &
šfo2
);

458 if(
šfo1
.
®pha
 < 
šfo2
.alpha){

459 (*
šfo
èğ
šfo1
;

461 (*
šfo
èğ
šfo2
;

464 
	}
}

466 
ıSh­eMassInfo


467 
	$ıSegm’tSh­eMassInfo
(
ıFlßt
 
mass
, 
ıVeù
 
a
, cpVeù 
b
, cpFlßˆ
r
)

469 
ıSh­eMassInfo
 
šfo
 = {

470 
mass
, 
	`ıMom’tFÜBox
(1.0f, 
	`ıvdi¡
(
a
, 
b
è+ 2.0f*
r
, 2.0f*r),

471 
	`ıvË½
(
a
, 
b
, 0.5f),

472 
	`ıA»aFÜSegm’t
(
a
, 
b
, 
r
),

475  
šfo
;

476 
	}
}

478 cÚ¡ 
ıSh­eCÏss
 
	gıSegm’tSh­eCÏss
 = {

479 
CP_SEGMENT_SHAPE
,

480 (
ıSh­eCacheD©aIm¶
)
ıSegm’tSh­eCacheD©a
,

481 
NULL
,

482 (
ıSh­ePoštQu”yIm¶
)
ıSegm’tSh­ePoštQu”y
,

483 (
ıSh­eSegm’tQu”yIm¶
)
ıSegm’tSh­eSegm’tQu”y
,

486 
ıSegm’tSh­e
 *

487 
	$ıSegm’tSh­eIn™
(
ıSegm’tSh­e
 *
£g
, 
ıBody
 *
body
, 
ıVeù
 
a
, cpVeù 
b
, 
ıFlßt
 
r
)

489 
£g
->
a
 =‡;

490 
£g
->
b
 = b;

491 
£g
->
n
 = 
	`ıv½”p
(
	`ıvnÜm®ize
(
	`ıvsub
(
b
, 
a
)));

493 
£g
->
r
 =„;

495 
£g
->
a_ng’t
 = 
ıvz”o
;

496 
£g
->
b_ng’t
 = 
ıvz”o
;

498 
	`ıSh­eIn™
((
ıSh­e
 *)
£g
, &
ıSegm’tSh­eCÏss
, 
body
, 
	`ıSegm’tSh­eMassInfo
(0.0f, 
a
, 
b
, 
r
));

500  
£g
;

501 
	}
}

503 
ıSh­e
*

504 
	$ıSegm’tSh­eNew
(
ıBody
 *
body
, 
ıVeù
 
a
, cpVeù 
b
, 
ıFlßt
 
r
)

506  (
ıSh­e
 *)
	`ıSegm’tSh­eIn™
(
	`ıSegm’tSh­eAÎoc
(), 
body
, 
a
, 
b
, 
r
);

507 
	}
}

509 
ıVeù


510 
	$ıSegm’tSh­eG‘A
(cÚ¡ 
ıSh­e
 *
sh­e
)

512 
	`ıAs£¹H¬d
(
sh­e
->
kÏss
 =ğ&
ıSegm’tSh­eCÏss
, "Shape is‚ot‡ segment shape.");

513  ((
ıSegm’tSh­e
 *)
sh­e
)->
a
;

514 
	}
}

516 
ıVeù


517 
	$ıSegm’tSh­eG‘B
(cÚ¡ 
ıSh­e
 *
sh­e
)

519 
	`ıAs£¹H¬d
(
sh­e
->
kÏss
 =ğ&
ıSegm’tSh­eCÏss
, "Shape is‚ot‡ segment shape.");

520  ((
ıSegm’tSh­e
 *)
sh­e
)->
b
;

521 
	}
}

523 
ıVeù


524 
	$ıSegm’tSh­eG‘NÜm®
(cÚ¡ 
ıSh­e
 *
sh­e
)

526 
	`ıAs£¹H¬d
(
sh­e
->
kÏss
 =ğ&
ıSegm’tSh­eCÏss
, "Shape is‚ot‡ segment shape.");

527  ((
ıSegm’tSh­e
 *)
sh­e
)->
n
;

528 
	}
}

530 
ıFlßt


531 
	$ıSegm’tSh­eG‘Radius
(cÚ¡ 
ıSh­e
 *
sh­e
)

533 
	`ıAs£¹H¬d
(
sh­e
->
kÏss
 =ğ&
ıSegm’tSh­eCÏss
, "Shape is‚ot‡ segment shape.");

534  ((
ıSegm’tSh­e
 *)
sh­e
)->
r
;

535 
	}
}

538 
	$ıSegm’tSh­eS‘NeighbÜs
(
ıSh­e
 *
sh­e
, 
ıVeù
 
´ev
, cpVeù 
Ãxt
)

540 
	`ıAs£¹H¬d
(
sh­e
->
kÏss
 =ğ&
ıSegm’tSh­eCÏss
, "Shape is‚ot‡ segment shape.");

541 
ıSegm’tSh­e
 *
£g
 = (ıSegm’tSh­*)
sh­e
;

543 
£g
->
a_ng’t
 = 
	`ıvsub
(
´ev
, seg->
a
);

544 
£g
->
b_ng’t
 = 
	`ıvsub
(
Ãxt
, seg->
b
);

545 
	}
}

552 
	$ıCœşeSh­eS‘Radius
(
ıSh­e
 *
sh­e
, 
ıFlßt
 
¿dius
)

554 
	`ıAs£¹H¬d
(
sh­e
->
kÏss
 =ğ&
ıCœşeSh­eCÏss
, "Shape is‚ot‡ circle shape.");

555 
ıCœşeSh­e
 *
cœşe
 = (ıCœşeSh­*)
sh­e
;

557 
cœşe
->
r
 = 
¿dius
;

559 
ıFlßt
 
mass
 = 
sh­e
->
massInfo
.
m
;

560 
sh­e
->
massInfo
 = 
	`ıCœşeSh­eMassInfo
(
mass
, 
cœşe
->
r
, cœşe->
c
);

561 if(
mass
 > 0.0fè
	`ıBodyAccumuÏ‹MassFromSh­es
(
sh­e
->
body
);

562 
	}
}

565 
	$ıCœşeSh­eS‘Off£t
(
ıSh­e
 *
sh­e
, 
ıVeù
 
off£t
)

567 
	`ıAs£¹H¬d
(
sh­e
->
kÏss
 =ğ&
ıCœşeSh­eCÏss
, "Shape is‚ot‡ circle shape.");

568 
ıCœşeSh­e
 *
cœşe
 = (ıCœşeSh­*)
sh­e
;

570 
cœşe
->
c
 = 
off£t
;

572 
ıFlßt
 
mass
 = 
sh­e
->
massInfo
.
m
;

573 
sh­e
->
massInfo
 = 
	`ıCœşeSh­eMassInfo
(sh­e->massInfo.
m
, 
cœşe
->
r
, cœşe->
c
);

574 if(
mass
 > 0.0fè
	`ıBodyAccumuÏ‹MassFromSh­es
(
sh­e
->
body
);

575 
	}
}

578 
	$ıSegm’tSh­eS‘Endpošts
(
ıSh­e
 *
sh­e
, 
ıVeù
 
a
, cpVeù 
b
)

580 
	`ıAs£¹H¬d
(
sh­e
->
kÏss
 =ğ&
ıSegm’tSh­eCÏss
, "Shape is‚ot‡ segment shape.");

581 
ıSegm’tSh­e
 *
£g
 = (ıSegm’tSh­*)
sh­e
;

583 
£g
->
a
 =‡;

584 
£g
->
b
 = b;

585 
£g
->
n
 = 
	`ıv³½
(
	`ıvnÜm®ize
(
	`ıvsub
(
b
, 
a
)));

587 
ıFlßt
 
mass
 = 
sh­e
->
massInfo
.
m
;

588 
sh­e
->
massInfo
 = 
	`ıSegm’tSh­eMassInfo
(sh­e->massInfo.
m
, 
£g
->
a
, seg->
b
, seg->
r
);

589 if(
mass
 > 0.0fè
	`ıBodyAccumuÏ‹MassFromSh­es
(
sh­e
->
body
);

590 
	}
}

593 
	$ıSegm’tSh­eS‘Radius
(
ıSh­e
 *
sh­e
, 
ıFlßt
 
¿dius
)

595 
	`ıAs£¹H¬d
(
sh­e
->
kÏss
 =ğ&
ıSegm’tSh­eCÏss
, "Shape is‚ot‡ segment shape.");

596 
ıSegm’tSh­e
 *
£g
 = (ıSegm’tSh­*)
sh­e
;

598 
£g
->
r
 = 
¿dius
;

600 
ıFlßt
 
mass
 = 
sh­e
->
massInfo
.
m
;

601 
sh­e
->
massInfo
 = 
	`ıSegm’tSh­eMassInfo
(sh­e->massInfo.
m
, 
£g
->
a
, seg->
b
, seg->
r
);

602 if(
mass
 > 0.0fè
	`ıBodyAccumuÏ‹MassFromSh­es
(
sh­e
->
body
);

603 
	}
}

	@../src/chipmunk/cpSimpleMotor.c

22 
	~"chmunk/chmunk_´iv©e.h
"

25 
	$´eS‹p
(
ıSim¶eMÙÜ
 *
jošt
, 
ıFlßt
 
dt
)

27 
ıBody
 *
a
 = 
jošt
->
cÚ¡¿št
.a;

28 
ıBody
 *
b
 = 
jošt
->
cÚ¡¿št
.b;

31 
jošt
->
iSum
 = 1.0f/(
a
->
i_šv
 + 
b
->i_inv);

32 
	}
}

35 
	$­¶yCachedImpul£
(
ıSim¶eMÙÜ
 *
jošt
, 
ıFlßt
 
dt_cÛf
)

37 
ıBody
 *
a
 = 
jošt
->
cÚ¡¿št
.a;

38 
ıBody
 *
b
 = 
jošt
->
cÚ¡¿št
.b;

40 
ıFlßt
 
j
 = 
jošt
->
jAcc
*
dt_cÛf
;

41 
a
->
w
 -ğ
j
*a->
i_šv
;

42 
b
->
w
 +ğ
j
*b->
i_šv
;

43 
	}
}

46 
	$­¶yImpul£
(
ıSim¶eMÙÜ
 *
jošt
, 
ıFlßt
 
dt
)

48 
ıBody
 *
a
 = 
jošt
->
cÚ¡¿št
.a;

49 
ıBody
 *
b
 = 
jošt
->
cÚ¡¿št
.b;

52 
ıFlßt
 
wr
 = 
b
->
w
 - 
a
->w + 
jošt
->
¿‹
;

54 
ıFlßt
 
jMax
 = 
jošt
->
cÚ¡¿št
.
maxFÜû
*
dt
;

57 
ıFlßt
 
j
 = -
wr
*
jošt
->
iSum
;

58 
ıFlßt
 
jOld
 = 
jošt
->
jAcc
;

59 
jošt
->
jAcc
 = 
	`ıfşamp
(
jOld
 + 
j
, -
jMax
, jMax);

60 
j
 = 
jošt
->
jAcc
 - 
jOld
;

63 
a
->
w
 -ğ
j
*a->
i_šv
;

64 
b
->
w
 +ğ
j
*b->
i_šv
;

65 
	}
}

67 
ıFlßt


68 
	$g‘Impul£
(
ıSim¶eMÙÜ
 *
jošt
)

70  
	`ıçbs
(
jošt
->
jAcc
);

71 
	}
}

73 cÚ¡ 
ıCÚ¡¿štCÏss
 
	gkÏss
 = {

74 (
ıCÚ¡¿štP»S‹pIm¶
)
´eS‹p
,

75 (
ıCÚ¡¿štAµlyCachedImpul£Im¶
)
­¶yCachedImpul£
,

76 (
ıCÚ¡¿štAµlyImpul£Im¶
)
­¶yImpul£
,

77 (
ıCÚ¡¿štG‘Impul£Im¶
)
g‘Impul£
,

80 
ıSim¶eMÙÜ
 *

81 
	$ıSim¶eMÙÜAÎoc
()

83  (
ıSim¶eMÙÜ
 *)
	`ıÿÎoc
(1, (cpSimpleMotor));

84 
	}
}

86 
ıSim¶eMÙÜ
 *

87 
	$ıSim¶eMÙÜIn™
(
ıSim¶eMÙÜ
 *
jošt
, 
ıBody
 *
a
, cpBody *
b
, 
ıFlßt
 
¿‹
)

89 
	`ıCÚ¡¿štIn™
((
ıCÚ¡¿št
 *)
jošt
, &
kÏss
, 
a
, 
b
);

91 
jošt
->
¿‹
 =„ate;

93 
jošt
->
jAcc
 = 0.0f;

95  
jošt
;

96 
	}
}

98 
ıCÚ¡¿št
 *

99 
	$ıSim¶eMÙÜNew
(
ıBody
 *
a
, cpBody *
b
, 
ıFlßt
 
¿‹
)

101  (
ıCÚ¡¿št
 *)
	`ıSim¶eMÙÜIn™
(
	`ıSim¶eMÙÜAÎoc
(), 
a
, 
b
, 
¿‹
);

102 
	}
}

104 
ıBoŞ


105 
	$ıCÚ¡¿štIsSim¶eMÙÜ
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

107  (
cÚ¡¿št
->
kÏss
 == &klass);

108 
	}
}

110 
ıFlßt


111 
	$ıSim¶eMÙÜG‘R©e
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

113 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsSim¶eMÙÜ
(
cÚ¡¿št
), "Constraint is‚ot‡…in joint.");

114  ((
ıSim¶eMÙÜ
 *)
cÚ¡¿št
)->
¿‹
;

115 
	}
}

118 
	$ıSim¶eMÙÜS‘R©e
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
¿‹
)

120 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsSim¶eMÙÜ
(
cÚ¡¿št
), "Constraint is‚ot‡…in joint.");

121 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

122 ((
ıSim¶eMÙÜ
 *)
cÚ¡¿št
)->
¿‹
 =„ate;

123 
	}
}

	@../src/chipmunk/cpSlideJoint.c

22 
	~"chmunk/chmunk_´iv©e.h
"

25 
	$´eS‹p
(
ıSlideJošt
 *
jošt
, 
ıFlßt
 
dt
)

27 
ıBody
 *
a
 = 
jošt
->
cÚ¡¿št
.a;

28 
ıBody
 *
b
 = 
jošt
->
cÚ¡¿št
.b;

30 
jošt
->
r1
 = 
	`ıT¿nsfÜmVeù
(
a
->
ŒªsfÜm
, 
	`ıvsub
(jošt->
ªchÜA
,‡->
cog
));

31 
jošt
->
r2
 = 
	`ıT¿nsfÜmVeù
(
b
->
ŒªsfÜm
, 
	`ıvsub
(jošt->
ªchÜB
, b->
cog
));

33 
ıVeù
 
d–
 = 
	`ıvsub
(
	`ıvadd
(
b
->
p
, 
jošt
->
r2
), cpvadd(
a
->p, jošt->
r1
));

34 
ıFlßt
 
di¡
 = 
	`ıvËngth
(
d–
);

35 
ıFlßt
 
pdi¡
 = 0.0f;

36 if(
di¡
 > 
jošt
->
max
) {

37 
pdi¡
 = 
di¡
 - 
jošt
->
max
;

38 
jošt
->
n
 = 
	`ıvnÜm®ize
(
d–
);

39 } if(
di¡
 < 
jošt
->
mš
) {

40 
pdi¡
 = 
jošt
->
mš
 - 
di¡
;

41 
jošt
->
n
 = 
	`ıvÃg
(
	`ıvnÜm®ize
(
d–
));

43 
jošt
->
n
 = 
ıvz”o
;

44 
jošt
->
jnAcc
 = 0.0f;

48 
jošt
->
nMass
 = 1.0f/
	`k_sÿÏr
(
a
, 
b
, jošt->
r1
, jošt->
r2
, jošt->
n
);

51 
ıFlßt
 
maxBŸs
 = 
jošt
->
cÚ¡¿št
.maxBias;

52 
jošt
->
bŸs
 = 
	`ıfşamp
(-
	`bŸs_cÛf
(jošt->
cÚ¡¿št
.
”rÜBŸs
, 
dt
)*
pdi¡
/dt, -
maxBŸs
, maxBias);

53 
	}
}

56 
	$­¶yCachedImpul£
(
ıSlideJošt
 *
jošt
, 
ıFlßt
 
dt_cÛf
)

58 
ıBody
 *
a
 = 
jošt
->
cÚ¡¿št
.a;

59 
ıBody
 *
b
 = 
jošt
->
cÚ¡¿št
.b;

61 
ıVeù
 
j
 = 
	`ıvmuÉ
(
jošt
->
n
, jošt->
jnAcc
*
dt_cÛf
);

62 
	`­¶y_impul£s
(
a
, 
b
, 
jošt
->
r1
, jošt->
r2
, 
j
);

63 
	}
}

66 
	$­¶yImpul£
(
ıSlideJošt
 *
jošt
, 
ıFlßt
 
dt
)

68 if(
	`ıveql
(
jošt
->
n
, 
ıvz”o
)) ;

70 
ıBody
 *
a
 = 
jošt
->
cÚ¡¿št
.a;

71 
ıBody
 *
b
 = 
jošt
->
cÚ¡¿št
.b;

73 
ıVeù
 
n
 = 
jošt
->n;

74 
ıVeù
 
r1
 = 
jošt
->r1;

75 
ıVeù
 
r2
 = 
jošt
->r2;

78 
ıVeù
 
vr
 = 
	`»Ïtive_v–oc™y
(
a
, 
b
, 
r1
, 
r2
);

79 
ıFlßt
 
vº
 = 
	`ıvdÙ
(
vr
, 
n
);

82 
ıFlßt
 
jn
 = (
jošt
->
bŸs
 - 
vº
)*jošt->
nMass
;

83 
ıFlßt
 
jnOld
 = 
jošt
->
jnAcc
;

84 
jošt
->
jnAcc
 = 
	`ıfşamp
(
jnOld
 + 
jn
, -jošt->
cÚ¡¿št
.
maxFÜû
*
dt
, 0.0f);

85 
jn
 = 
jošt
->
jnAcc
 - 
jnOld
;

88 
	`­¶y_impul£s
(
a
, 
b
, 
jošt
->
r1
, jošt->
r2
, 
	`ıvmuÉ
(
n
, 
jn
));

89 
	}
}

91 
ıFlßt


92 
	$g‘Impul£
(
ıCÚ¡¿št
 *
jošt
)

94  
	`ıçbs
(((
ıSlideJošt
 *)
jošt
)->
jnAcc
);

95 
	}
}

97 cÚ¡ 
ıCÚ¡¿štCÏss
 
	gkÏss
 = {

98 (
ıCÚ¡¿štP»S‹pIm¶
)
´eS‹p
,

99 (
ıCÚ¡¿štAµlyCachedImpul£Im¶
)
­¶yCachedImpul£
,

100 (
ıCÚ¡¿štAµlyImpul£Im¶
)
­¶yImpul£
,

101 (
ıCÚ¡¿štG‘Impul£Im¶
)
g‘Impul£
,

104 
ıSlideJošt
 *

105 
	$ıSlideJoštAÎoc
()

107  (
ıSlideJošt
 *)
	`ıÿÎoc
(1, (cpSlideJoint));

108 
	}
}

110 
ıSlideJošt
 *

111 
	$ıSlideJoštIn™
(
ıSlideJošt
 *
jošt
, 
ıBody
 *
a
, cpBody *
b
, 
ıVeù
 
ªchÜA
, cpVeù 
ªchÜB
, 
ıFlßt
 
mš
, cpFlßˆ
max
)

113 
	`ıCÚ¡¿štIn™
((
ıCÚ¡¿št
 *)
jošt
, &
kÏss
, 
a
, 
b
);

115 
jošt
->
ªchÜA
 =‡nchorA;

116 
jošt
->
ªchÜB
 =‡nchorB;

117 
jošt
->
mš
 = min;

118 
jošt
->
max
 = max;

120 
jošt
->
jnAcc
 = 0.0f;

122  
jošt
;

123 
	}
}

125 
ıCÚ¡¿št
 *

126 
	$ıSlideJoštNew
(
ıBody
 *
a
, cpBody *
b
, 
ıVeù
 
ªchÜA
, cpVeù 
ªchÜB
, 
ıFlßt
 
mš
, cpFlßˆ
max
)

128  (
ıCÚ¡¿št
 *)
	`ıSlideJoštIn™
(
	`ıSlideJoštAÎoc
(), 
a
, 
b
, 
ªchÜA
, 
ªchÜB
, 
mš
, 
max
);

129 
	}
}

131 
ıBoŞ


132 
	$ıCÚ¡¿štIsSlideJošt
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

134  (
cÚ¡¿št
->
kÏss
 == &klass);

135 
	}
}

137 
ıVeù


138 
	$ıSlideJoštG‘AnchÜA
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

140 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsSlideJošt
(
cÚ¡¿št
), "Constraint is‚ot‡ slide joint.");

141  ((
ıSlideJošt
 *)
cÚ¡¿št
)->
ªchÜA
;

142 
	}
}

145 
	$ıSlideJoštS‘AnchÜA
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıVeù
 
ªchÜA
)

147 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsSlideJošt
(
cÚ¡¿št
), "Constraint is‚ot‡ slide joint.");

148 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

149 ((
ıSlideJošt
 *)
cÚ¡¿št
)->
ªchÜA
 =‡nchorA;

150 
	}
}

152 
ıVeù


153 
	$ıSlideJoštG‘AnchÜB
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

155 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsSlideJošt
(
cÚ¡¿št
), "Constraint is‚ot‡ slide joint.");

156  ((
ıSlideJošt
 *)
cÚ¡¿št
)->
ªchÜB
;

157 
	}
}

160 
	$ıSlideJoštS‘AnchÜB
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıVeù
 
ªchÜB
)

162 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsSlideJošt
(
cÚ¡¿št
), "Constraint is‚ot‡ slide joint.");

163 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

164 ((
ıSlideJošt
 *)
cÚ¡¿št
)->
ªchÜB
 =‡nchorB;

165 
	}
}

167 
ıFlßt


168 
	$ıSlideJoštG‘Mš
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

170 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsSlideJošt
(
cÚ¡¿št
), "Constraint is‚ot‡ slide joint.");

171  ((
ıSlideJošt
 *)
cÚ¡¿št
)->
mš
;

172 
	}
}

175 
	$ıSlideJoštS‘Mš
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
mš
)

177 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsSlideJošt
(
cÚ¡¿št
), "Constraint is‚ot‡ slide joint.");

178 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

179 ((
ıSlideJošt
 *)
cÚ¡¿št
)->
mš
 = min;

180 
	}
}

182 
ıFlßt


183 
	$ıSlideJoštG‘Max
(cÚ¡ 
ıCÚ¡¿št
 *
cÚ¡¿št
)

185 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsSlideJošt
(
cÚ¡¿št
), "Constraint is‚ot‡ slide joint.");

186  ((
ıSlideJošt
 *)
cÚ¡¿št
)->
max
;

187 
	}
}

190 
	$ıSlideJoštS‘Max
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıFlßt
 
max
)

192 
	`ıAs£¹H¬d
(
	`ıCÚ¡¿štIsSlideJošt
(
cÚ¡¿št
), "Constraint is‚ot‡ slide joint.");

193 
	`ıCÚ¡¿štAùiv©eBod›s
(
cÚ¡¿št
);

194 ((
ıSlideJošt
 *)
cÚ¡¿št
)->
max
 = max;

195 
	}
}

	@../src/chipmunk/cpSpace.c

22 
	~<¡dio.h
>

23 
	~<¡ršg.h
>

25 
	~"chmunk/chmunk_´iv©e.h
"

30 
ıBoŞ


31 
	$¬b™”S‘Eql
(
ıSh­e
 **
sh­es
, 
ıArb™”
 *
¬b
)

33 
ıSh­e
 *
a
 = 
sh­es
[0];

34 
ıSh­e
 *
b
 = 
sh­es
[1];

36  ((
a
 =ğ
¬b
->¨&& 
b
 ==‡rb->b) || (b ==‡rb->a &&‡ ==‡rb->b));

37 
	}
}

42 
ıBoŞ


43 
	$hªdËrS‘Eql
(
ıCŞlisiÚHªdËr
 *
check
, cpCŞlisiÚHªdË¸*
·œ
)

46 (
check
->
ty³A
 =ğ
·œ
->ty³A && check->
ty³B
 ==…air->typeB) ||

47 (
check
->
ty³B
 =ğ
·œ
->
ty³A
 && check->typeA ==…air->typeB)

49 
	}
}

53 
	$hªdËrS‘T¿ns
(
ıCŞlisiÚHªdËr
 *
hªdËr
, *
unu£d
)

55 
ıCŞlisiÚHªdËr
 *
cİy
 = (ıCŞlisiÚHªdË¸*)
	`ıÿÎoc
(1, (cpCollisionHandler));

56 
	`memıy
(
cİy
, 
hªdËr
, (
ıCŞlisiÚHªdËr
));

58  
cİy
;

59 
	}
}

65 
ıBoŞ


66 
	$DeçuÉBegš
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
, *
d©a
){

67 
ıBoŞ
 
»tA
 = 
	`ıArb™”C®lWdÿrdBegšA
(
¬b
, 
¥aû
);

68 
ıBoŞ
 
»tB
 = 
	`ıArb™”C®lWdÿrdBegšB
(
¬b
, 
¥aû
);

69  
»tA
 && 
»tB
;

70 
	}
}

72 
ıBoŞ


73 
	$DeçuÉP»SŞve
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
, *
d©a
){

74 
ıBoŞ
 
»tA
 = 
	`ıArb™”C®lWdÿrdP»SŞveA
(
¬b
, 
¥aû
);

75 
ıBoŞ
 
»tB
 = 
	`ıArb™”C®lWdÿrdP»SŞveB
(
¬b
, 
¥aû
);

76  
»tA
 && 
»tB
;

77 
	}
}

80 
	$DeçuÉPo¡SŞve
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
, *
d©a
){

81 
	`ıArb™”C®lWdÿrdPo¡SŞveA
(
¬b
, 
¥aû
);

82 
	`ıArb™”C®lWdÿrdPo¡SŞveB
(
¬b
, 
¥aû
);

83 
	}
}

86 
	$DeçuÉS•¬©e
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
, *
d©a
){

87 
	`ıArb™”C®lWdÿrdS•¬©eA
(
¬b
, 
¥aû
);

88 
	`ıArb™”C®lWdÿrdS•¬©eB
(
¬b
, 
¥aû
);

89 
	}
}

92 
ıCŞlisiÚHªdËr
 
	gıCŞlisiÚHªdËrDeçuÉ
 = {

93 
CP_WILDCARD_COLLISION_TYPE
, CP_WILDCARD_COLLISION_TYPE,

94 
DeçuÉBegš
, 
DeçuÉP»SŞve
, 
DeçuÉPo¡SŞve
, 
DeçuÉS•¬©e
, 
NULL


97 
ıBoŞ
 
	$AlwaysCŞlide
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
, *
d©a
){ 
ıTrue
;
	}
}

98 
	$DoNÙhšg
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
, *
d©a
){
	}
}

100 
ıCŞlisiÚHªdËr
 
	gıCŞlisiÚHªdËrDoNÙhšg
 = {

101 
CP_WILDCARD_COLLISION_TYPE
, CP_WILDCARD_COLLISION_TYPE,

102 
AlwaysCŞlide
, AlwaysCŞlide, 
DoNÙhšg
, DoNÙhšg, 
NULL


106 
ıVeù
 
	$Sh­eV–oc™yFunc
(
ıSh­e
 *
sh­e
){ sh­e->
body
->
v
;
	}
}

109 
	$F»eW¿p
(*
±r
, *
unu£d
){
	`ıä“
ÕŒ);
	}
}

113 
ıS·û
 *

114 
	$ıS·ûAÎoc
()

116  (
ıS·û
 *)
	`ıÿÎoc
(1, (cpSpace));

117 
	}
}

119 
ıS·û
*

120 
	$ıS·ûIn™
(
ıS·û
 *
¥aû
)

122 #iâdeà
NDEBUG


123 
ıBoŞ
 
dÚe
 = 
ıF®£
;

124 if(!
dÚe
){

125 
	`´štf
("In™Ÿlizšg cpS·û - Chmunk v% (Debug EÇbËd)\n", 
ıV”siÚSŒšg
);

126 
	`´štf
("Compile with -DNDEBUG definedo disable debug mode‡nd„untime‡ssertion checks\n");

127 
dÚe
 = 
ıTrue
;

131 
¥aû
->
™”©iÚs
 = 10;

133 
¥aû
->
g¿v™y
 = 
ıvz”o
;

134 
¥aû
->
dampšg
 = 1.0f;

136 
¥aû
->
cŞlisiÚSlİ
 = 0.1f;

137 
¥aû
->
cŞlisiÚBŸs
 = 
	`ıåow
(1.0f - 0.1f, 60.0f);

138 
¥aû
->
cŞlisiÚP”si¡’û
 = 3;

140 
¥aû
->
locked
 = 0;

141 
¥aû
->
¡amp
 = 0;

143 
¥aû
->
sh­eIDCouÁ”
 = 0;

144 
¥aû
->
¡©icSh­es
 = 
	`ıBBT»eNew
((
ıS·tŸlIndexBBFunc
)
ıSh­eG‘BB
, 
NULL
);

145 
¥aû
->
dyÇmicSh­es
 = 
	`ıBBT»eNew
((
ıS·tŸlIndexBBFunc
)
ıSh­eG‘BB
, s·û->
¡©icSh­es
);

146 
	`ıBBT»eS‘V–oc™yFunc
(
¥aû
->
dyÇmicSh­es
, (
ıBBT»eV–oc™yFunc
)
Sh­eV–oc™yFunc
);

148 
¥aû
->
®loÿ‹dBufãrs
 = 
	`ıA¼ayNew
(0);

150 
¥aû
->
dyÇmicBod›s
 = 
	`ıA¼ayNew
(0);

151 
¥aû
->
¡©icBod›s
 = 
	`ıA¼ayNew
(0);

152 
¥aû
->
¦“pšgCompÚ’ts
 = 
	`ıA¼ayNew
(0);

153 
¥aû
->
rou£dBod›s
 = 
	`ıA¼ayNew
(0);

155 
¥aû
->
¦“pTimeTh»shŞd
 = 
INFINITY
;

156 
¥aû
->
idËS³edTh»shŞd
 = 0.0f;

158 
¥aû
->
¬b™”s
 = 
	`ıA¼ayNew
(0);

159 
¥aû
->
poŞedArb™”s
 = 
	`ıA¼ayNew
(0);

161 
¥aû
->
cÚùBufãrsH—d
 = 
NULL
;

162 
¥aû
->
ÿchedArb™”s
 = 
	`ıHashS‘New
(0, (
ıHashS‘EqlFunc
)
¬b™”S‘Eql
);

164 
¥aû
->
cÚ¡¿šts
 = 
	`ıA¼ayNew
(0);

166 
¥aû
->
u£sWdÿrds
 = 
ıF®£
;

167 
	`memıy
(&
¥aû
->
deçuÉHªdËr
, &
ıCŞlisiÚHªdËrDoNÙhšg
, (
ıCŞlisiÚHªdËr
));

168 
¥aû
->
cŞlisiÚHªdËrs
 = 
	`ıHashS‘New
(0, (
ıHashS‘EqlFunc
)
hªdËrS‘Eql
);

170 
¥aû
->
po¡S‹pC®lbacks
 = 
	`ıA¼ayNew
(0);

171 
¥aû
->
skPo¡S‹p
 = 
ıF®£
;

173 
ıBody
 *
¡©icBody
 = 
	`ıBodyIn™
(&
¥aû
->
_¡©icBody
, 0.0f, 0.0f);

174 
	`ıBodyS‘Ty³
(
¡©icBody
, 
CP_BODY_TYPE_STATIC
);

175 
	`ıS·ûS‘SticBody
(
¥aû
, 
¡©icBody
);

177  
¥aû
;

178 
	}
}

180 
ıS·û
*

181 
	$ıS·ûNew
()

183  
	`ıS·ûIn™
(
	`ıS·ûAÎoc
());

184 
	}
}

186 
	$ıBodyAùiv©eW¿p
(
ıBody
 *
body
, *
unu£d
){
	`ıBodyAùiv©e
(body);
	}
}

189 
	$ıS·ûDe¡roy
(
ıS·û
 *
¥aû
)

191 
	`ıS·ûEachBody
(
¥aû
, (
ıS·ûBodyI‹¿tÜFunc
)
ıBodyAùiv©eW¿p
, 
NULL
);

193 
	`ıS·tŸlIndexF»e
(
¥aû
->
¡©icSh­es
);

194 
	`ıS·tŸlIndexF»e
(
¥aû
->
dyÇmicSh­es
);

196 
	`ıA¼ayF»e
(
¥aû
->
dyÇmicBod›s
);

197 
	`ıA¼ayF»e
(
¥aû
->
¡©icBod›s
);

198 
	`ıA¼ayF»e
(
¥aû
->
¦“pšgCompÚ’ts
);

199 
	`ıA¼ayF»e
(
¥aû
->
rou£dBod›s
);

201 
	`ıA¼ayF»e
(
¥aû
->
cÚ¡¿šts
);

203 
	`ıHashS‘F»e
(
¥aû
->
ÿchedArb™”s
);

205 
	`ıA¼ayF»e
(
¥aû
->
¬b™”s
);

206 
	`ıA¼ayF»e
(
¥aû
->
poŞedArb™”s
);

208 if(
¥aû
->
®loÿ‹dBufãrs
){

209 
	`ıA¼ayF»eEach
(
¥aû
->
®loÿ‹dBufãrs
, 
ıä“
);

210 
	`ıA¼ayF»e
(
¥aû
->
®loÿ‹dBufãrs
);

213 if(
¥aû
->
po¡S‹pC®lbacks
){

214 
	`ıA¼ayF»eEach
(
¥aû
->
po¡S‹pC®lbacks
, 
ıä“
);

215 
	`ıA¼ayF»e
(
¥aû
->
po¡S‹pC®lbacks
);

218 if(
¥aû
->
cŞlisiÚHªdËrs
è
	`ıHashS‘Each
(¥aû->cŞlisiÚHªdËrs, 
F»eW¿p
, 
NULL
);

219 
	`ıHashS‘F»e
(
¥aû
->
cŞlisiÚHªdËrs
);

220 
	}
}

223 
	$ıS·ûF»e
(
ıS·û
 *
¥aû
)

225 if(
¥aû
){

226 
	`ıS·ûDe¡roy
(
¥aû
);

227 
	`ıä“
(
¥aû
);

229 
	}
}

235 
	$ıS·ûG‘I‹¿tiÚs
(cÚ¡ 
ıS·û
 *
¥aû
)

237  
¥aû
->
™”©iÚs
;

238 
	}
}

241 
	$ıS·ûS‘I‹¿tiÚs
(
ıS·û
 *
¥aû
, 
™”©iÚs
)

243 
	`ıAs£¹H¬d
(
™”©iÚs
 > 0, "Iterations must be…ositive‡nd‚on-zero.");

244 
¥aû
->
™”©iÚs
 = iterations;

245 
	}
}

247 
ıVeù


248 
	$ıS·ûG‘G¿v™y
(cÚ¡ 
ıS·û
 *
¥aû
)

250  
¥aû
->
g¿v™y
;

251 
	}
}

254 
	$ıS·ûS‘G¿v™y
(
ıS·û
 *
¥aû
, 
ıVeù
 
g¿v™y
)

256 
¥aû
->
g¿v™y
 = gravity;

259 
ıA¼ay
 *
compÚ’ts
 = 
¥aû
->
¦“pšgCompÚ’ts
;

260 
i
=0; i<
compÚ’ts
->
num
; i++){

261 
	`ıBodyAùiv©e
((
ıBody
 *)
compÚ’ts
->
¬r
[
i
]);

263 
	}
}

265 
ıFlßt


266 
	$ıS·ûG‘Dampšg
(cÚ¡ 
ıS·û
 *
¥aû
)

268  
¥aû
->
dampšg
;

269 
	}
}

272 
	$ıS·ûS‘Dampšg
(
ıS·û
 *
¥aû
, 
ıFlßt
 
dampšg
)

274 
	`ıAs£¹H¬d
(
dampšg
 >= 0.0, "Damping must be…ositive.");

275 
¥aû
->
dampšg
 = damping;

276 
	}
}

278 
ıFlßt


279 
	$ıS·ûG‘IdËS³edTh»shŞd
(cÚ¡ 
ıS·û
 *
¥aû
)

281  
¥aû
->
idËS³edTh»shŞd
;

282 
	}
}

285 
	$ıS·ûS‘IdËS³edTh»shŞd
(
ıS·û
 *
¥aû
, 
ıFlßt
 
idËS³edTh»shŞd
)

287 
¥aû
->
idËS³edTh»shŞd
 = idleSpeedThreshold;

288 
	}
}

290 
ıFlßt


291 
	$ıS·ûG‘SË•TimeTh»shŞd
(cÚ¡ 
ıS·û
 *
¥aû
)

293  
¥aû
->
¦“pTimeTh»shŞd
;

294 
	}
}

297 
	$ıS·ûS‘SË•TimeTh»shŞd
(
ıS·û
 *
¥aû
, 
ıFlßt
 
¦“pTimeTh»shŞd
)

299 
¥aû
->
¦“pTimeTh»shŞd
 = sleepTimeThreshold;

300 
	}
}

302 
ıFlßt


303 
	$ıS·ûG‘CŞlisiÚSlİ
(cÚ¡ 
ıS·û
 *
¥aû
)

305  
¥aû
->
cŞlisiÚSlİ
;

306 
	}
}

309 
	$ıS·ûS‘CŞlisiÚSlİ
(
ıS·û
 *
¥aû
, 
ıFlßt
 
cŞlisiÚSlİ
)

311 
¥aû
->
cŞlisiÚSlİ
 = collisionSlop;

312 
	}
}

314 
ıFlßt


315 
	$ıS·ûG‘CŞlisiÚBŸs
(cÚ¡ 
ıS·û
 *
¥aû
)

317  
¥aû
->
cŞlisiÚBŸs
;

318 
	}
}

321 
	$ıS·ûS‘CŞlisiÚBŸs
(
ıS·û
 *
¥aû
, 
ıFlßt
 
cŞlisiÚBŸs
)

323 
¥aû
->
cŞlisiÚBŸs
 = collisionBias;

324 
	}
}

326 
ıTime¡amp


327 
	$ıS·ûG‘CŞlisiÚP”si¡’û
(cÚ¡ 
ıS·û
 *
¥aû
)

329  
¥aû
->
cŞlisiÚP”si¡’û
;

330 
	}
}

333 
	$ıS·ûS‘CŞlisiÚP”si¡’û
(
ıS·û
 *
¥aû
, 
ıTime¡amp
 
cŞlisiÚP”si¡’û
)

335 
¥aû
->
cŞlisiÚP”si¡’û
 = collisionPersistence;

336 
	}
}

338 
ıD©aPoš‹r


339 
	$ıS·ûG‘U£rD©a
(cÚ¡ 
ıS·û
 *
¥aû
)

341  
¥aû
->
u£rD©a
;

342 
	}
}

345 
	$ıS·ûS‘U£rD©a
(
ıS·û
 *
¥aû
, 
ıD©aPoš‹r
 
u£rD©a
)

347 
¥aû
->
u£rD©a
 = userData;

348 
	}
}

350 
ıBody
 *

351 
	$ıS·ûG‘SticBody
(cÚ¡ 
ıS·û
 *
¥aû
)

353  
¥aû
->
¡©icBody
;

354 
	}
}

356 
ıFlßt


357 
	$ıS·ûG‘Cu¼’tTimeS‹p
(cÚ¡ 
ıS·û
 *
¥aû
)

359  
¥aû
->
cu¼_dt
;

360 
	}
}

363 
	$ıS·ûS‘SticBody
(
ıS·û
 *
¥aû
, 
ıBody
 *
body
)

365 if(
¥aû
->
¡©icBody
 !ğ
NULL
){

366 
	`ıAs£¹H¬d
(
¥aû
->
¡©icBody
->
sh­eLi¡
 =ğ
NULL
, "Internal Error: Changinghe designated static body whilehe old one still had shapes‡ttached.");

367 
¥aû
->
¡©icBody
->¥aû = 
NULL
;

370 
¥aû
->
¡©icBody
 = 
body
;

371 
body
->
¥aû
 = space;

372 
	}
}

374 
ıBoŞ


375 
	$ıS·ûIsLocked
(
ıS·û
 *
¥aû
)

377  (
¥aû
->
locked
 > 0);

378 
	}
}

383 
	$ıS·ûU£WdÿrdDeçuÉHªdËr
(
ıS·û
 *
¥aû
)

386 if(!
¥aû
->
u£sWdÿrds
){

387 
¥aû
->
u£sWdÿrds
 = 
ıTrue
;

388 
	`memıy
(&
¥aû
->
deçuÉHªdËr
, &
ıCŞlisiÚHªdËrDeçuÉ
, (
ıCŞlisiÚHªdËr
));

390 
	}
}

392 
ıCŞlisiÚHªdËr
 *
	$ıS·ûAddDeçuÉCŞlisiÚHªdËr
(
ıS·û
 *
¥aû
)

394 
	`ıS·ûU£WdÿrdDeçuÉHªdËr
(
¥aû
);

395  &
¥aû
->
deçuÉHªdËr
;

396 
	}
}

398 
ıCŞlisiÚHªdËr
 *
	$ıS·ûAddCŞlisiÚHªdËr
(
ıS·û
 *
¥aû
, 
ıCŞlisiÚTy³
 
a
, cpCŞlisiÚTy³ 
b
)

400 
ıHashV®ue
 
hash
 = 
	`CP_HASH_PAIR
(
a
, 
b
);

401 
ıCŞlisiÚHªdËr
 
hªdËr
 = {
a
, 
b
, 
DeçuÉBegš
, 
DeçuÉP»SŞve
, 
DeçuÉPo¡SŞve
, 
DeçuÉS•¬©e
, 
NULL
};

402  (
ıCŞlisiÚHªdËr
*)
	`ıHashS‘In£¹
(
¥aû
->
cŞlisiÚHªdËrs
, 
hash
, &
hªdËr
, (
ıHashS‘T¿nsFunc
)
hªdËrS‘T¿ns
, 
NULL
);

403 
	}
}

405 
ıCŞlisiÚHªdËr
 *

406 
	$ıS·ûAddWdÿrdHªdËr
(
ıS·û
 *
¥aû
, 
ıCŞlisiÚTy³
 
ty³
)

408 
	`ıS·ûU£WdÿrdDeçuÉHªdËr
(
¥aû
);

410 
ıHashV®ue
 
hash
 = 
	`CP_HASH_PAIR
(
ty³
, 
CP_WILDCARD_COLLISION_TYPE
);

411 
ıCŞlisiÚHªdËr
 
hªdËr
 = {
ty³
, 
CP_WILDCARD_COLLISION_TYPE
, 
AlwaysCŞlide
, AlwaysCŞlide, 
DoNÙhšg
, DoNÙhšg, 
NULL
};

412  (
ıCŞlisiÚHªdËr
*)
	`ıHashS‘In£¹
(
¥aû
->
cŞlisiÚHªdËrs
, 
hash
, &
hªdËr
, (
ıHashS‘T¿nsFunc
)
hªdËrS‘T¿ns
, 
NULL
);

413 
	}
}

417 
ıSh­e
 *

418 
	$ıS·ûAddSh­e
(
ıS·û
 *
¥aû
, 
ıSh­e
 *
sh­e
)

420 
ıBody
 *
body
 = 
sh­e
->body;

422 
	`ıAs£¹H¬d
(
sh­e
->
¥aû
 != space, "You have‡lready‡ddedhis shapeohis space. You must‚ot‡dd it‡ secondime.");

423 
	`ıAs£¹H¬d
(!
sh­e
->
¥aû
, "You have‡lready‡ddedhis shapeo‡nother space. You cannot‡dd ito‡ second.");

425 
	`ıAs£¹S·ûUÆocked
(
¥aû
);

427 
ıBoŞ
 
isStic
 = (
	`ıBodyG‘Ty³
(
body
è=ğ
CP_BODY_TYPE_STATIC
);

428 if(!
isStic
è
	`ıBodyAùiv©e
(
body
);

429 
	`ıBodyAddSh­e
(
body
, 
sh­e
);

431 
sh­e
->
hashid
 = 
¥aû
->
sh­eIDCouÁ”
++;

432 
	`ıSh­eUpd©e
(
sh­e
, 
body
->
ŒªsfÜm
);

433 
	`ıS·tŸlIndexIn£¹
(
isStic
 ? 
¥aû
->
¡©icSh­es
 : s·û->
dyÇmicSh­es
, 
sh­e
, sh­e->
hashid
);

434 
sh­e
->
¥aû
 = space;

436  
sh­e
;

437 
	}
}

439 
ıBody
 *

440 
	$ıS·ûAddBody
(
ıS·û
 *
¥aû
, 
ıBody
 *
body
)

442 
	`ıAs£¹H¬d
(
body
->
¥aû
 != space, "You have‡lready‡ddedhis bodyohis space. You must‚ot‡dd it‡ secondime.");

443 
	`ıAs£¹H¬d
(!
body
->
¥aû
, "You have‡lready‡ddedhis bodyo‡nother space. You cannot‡dd ito‡ second.");

444 
	`ıAs£¹S·ûUÆocked
(
¥aû
);

446 
	`ıA¼ayPush
(
	`ıS·ûA¼ayFÜBodyTy³
(
¥aû
, 
	`ıBodyG‘Ty³
(
body
)), body);

447 
body
->
¥aû
 = space;

449  
body
;

450 
	}
}

452 
ıCÚ¡¿št
 *

453 
	$ıS·ûAddCÚ¡¿št
(
ıS·û
 *
¥aû
, 
ıCÚ¡¿št
 *
cÚ¡¿št
)

455 
	`ıAs£¹H¬d
(
cÚ¡¿št
->
¥aû
 != space, "You have‡lready‡ddedhis constraintohis space. You must‚ot‡dd it‡ secondime.");

456 
	`ıAs£¹H¬d
(!
cÚ¡¿št
->
¥aû
, "You have‡lready‡ddedhis constrainto‡nother space. You cannot‡dd ito‡ second.");

457 
	`ıAs£¹S·ûUÆocked
(
¥aû
);

459 
ıBody
 *
a
 = 
cÚ¡¿št
->a, *
b
 = constraint->b;

460 
	`ıAs£¹H¬d
(
a
 !ğ
NULL
 && 
b
 != NULL, "Constraint is‡ttachedo‡ NULL body.");

463 
	`ıBodyAùiv©e
(
a
);

464 
	`ıBodyAùiv©e
(
b
);

465 
	`ıA¼ayPush
(
¥aû
->
cÚ¡¿šts
, 
cÚ¡¿št
);

468 
cÚ¡¿št
->
Ãxt_a
 = 
a
->
cÚ¡¿štLi¡
;‡->constraintList = constraint;

469 
cÚ¡¿št
->
Ãxt_b
 = 
b
->
cÚ¡¿štLi¡
; b->constraintList = constraint;

470 
cÚ¡¿št
->
¥aû
 = space;

472  
cÚ¡¿št
;

473 
	}
}

475 
	s¬b™”F‹rCÚ‹xt
 {

476 
ıS·û
 *
	m¥aû
;

477 
ıBody
 *
	mbody
;

478 
ıSh­e
 *
	msh­e
;

481 
ıBoŞ


482 
	$ÿchedArb™”sF‹r
(
ıArb™”
 *
¬b
, 
¬b™”F‹rCÚ‹xt
 *
cÚ‹xt
)

484 
ıSh­e
 *
sh­e
 = 
cÚ‹xt
->shape;

485 
ıBody
 *
body
 = 
cÚ‹xt
->body;

490 (
body
 =ğ
¬b
->
body_a
 && (
sh­e
 =ğ¬b->
a
 || sh­=ğ
NULL
)) ||

491 (
body
 =ğ
¬b
->
body_b
 && (
sh­e
 =ğ¬b->
b
 || sh­=ğ
NULL
))

494 if(
sh­e
 && 
¬b
->
¡©e
 !ğ
CP_ARBITER_STATE_CACHED
){

496 
¬b
->
¡©e
 = 
CP_ARBITER_STATE_INVALIDATED
;

498 
ıCŞlisiÚHªdËr
 *
hªdËr
 = 
¬b
->handler;

499 
hªdËr
->
	`£·¿‹Func
(
¬b
, 
cÚ‹xt
->
¥aû
, hªdËr->
u£rD©a
);

502 
	`ıArb™”UÁh»ad
(
¬b
);

503 
	`ıA¼ayD–‘eObj
(
cÚ‹xt
->
¥aû
->
¬b™”s
, 
¬b
);

504 
	`ıA¼ayPush
(
cÚ‹xt
->
¥aû
->
poŞedArb™”s
, 
¬b
);

506  
ıF®£
;

509  
ıTrue
;

510 
	}
}

513 
	$ıS·ûF‹rArb™”s
(
ıS·û
 *
¥aû
, 
ıBody
 *
body
, 
ıSh­e
 *
f‹r
)

515 
	`ıS·ûLock
(
¥aû
); {

516 
¬b™”F‹rCÚ‹xt
 
cÚ‹xt
 = {
¥aû
, 
body
, 
f‹r
};

517 
	`ıHashS‘F‹r
(
¥aû
->
ÿchedArb™”s
, (
ıHashS‘F‹rFunc
)
ÿchedArb™”sF‹r
, &
cÚ‹xt
);

518 } 
	`ıS·ûUÆock
(
¥aû
, 
ıTrue
);

519 
	}
}

522 
	$ıS·ûRemoveSh­e
(
ıS·û
 *
¥aû
, 
ıSh­e
 *
sh­e
)

524 
ıBody
 *
body
 = 
sh­e
->body;

525 
	`ıAs£¹H¬d
(
	`ıS·ûCÚšsSh­e
(
¥aû
, 
sh­e
), "Cannot„emove‡ shapehat was‚ot‡ddedohe space. (Removedwice maybe?)");

526 
	`ıAs£¹S·ûUÆocked
(
¥aû
);

528 
ıBoŞ
 
isStic
 = (
	`ıBodyG‘Ty³
(
body
è=ğ
CP_BODY_TYPE_STATIC
);

529 if(
isStic
){

530 
	`ıBodyAùiv©eStic
(
body
, 
sh­e
);

532 
	`ıBodyAùiv©e
(
body
);

535 
	`ıBodyRemoveSh­e
(
body
, 
sh­e
);

536 
	`ıS·ûF‹rArb™”s
(
¥aû
, 
body
, 
sh­e
);

537 
	`ıS·tŸlIndexRemove
(
isStic
 ? 
¥aû
->
¡©icSh­es
 : s·û->
dyÇmicSh­es
, 
sh­e
, sh­e->
hashid
);

538 
sh­e
->
¥aû
 = 
NULL
;

539 
sh­e
->
hashid
 = 0;

540 
	}
}

543 
	$ıS·ûRemoveBody
(
ıS·û
 *
¥aû
, 
ıBody
 *
body
)

545 
	`ıAs£¹H¬d
(
body
 !ğ
	`ıS·ûG‘SticBody
(
¥aû
), "Cannot„emovehe designated static body forhe space.");

546 
	`ıAs£¹H¬d
(
	`ıS·ûCÚšsBody
(
¥aû
, 
body
), "Cannot„emove‡ bodyhat was‚ot‡ddedohe space. (Removedwice maybe?)");

549 
	`ıAs£¹S·ûUÆocked
(
¥aû
);

551 
	`ıBodyAùiv©e
(
body
);

553 
	`ıA¼ayD–‘eObj
(
	`ıS·ûA¼ayFÜBodyTy³
(
¥aû
, 
	`ıBodyG‘Ty³
(
body
)), body);

554 
body
->
¥aû
 = 
NULL
;

555 
	}
}

558 
	$ıS·ûRemoveCÚ¡¿št
(
ıS·û
 *
¥aû
, 
ıCÚ¡¿št
 *
cÚ¡¿št
)

560 
	`ıAs£¹H¬d
(
	`ıS·ûCÚšsCÚ¡¿št
(
¥aû
, 
cÚ¡¿št
), "Cannot„emove‡ constrainthat was‚ot‡ddedohe space. (Removedwice maybe?)");

561 
	`ıAs£¹S·ûUÆocked
(
¥aû
);

563 
	`ıBodyAùiv©e
(
cÚ¡¿št
->
a
);

564 
	`ıBodyAùiv©e
(
cÚ¡¿št
->
b
);

565 
	`ıA¼ayD–‘eObj
(
¥aû
->
cÚ¡¿šts
, 
cÚ¡¿št
);

567 
	`ıBodyRemoveCÚ¡¿št
(
cÚ¡¿št
->
a
, constraint);

568 
	`ıBodyRemoveCÚ¡¿št
(
cÚ¡¿št
->
b
, constraint);

569 
cÚ¡¿št
->
¥aû
 = 
NULL
;

570 
	}
}

572 
ıBoŞ
 
	$ıS·ûCÚšsSh­e
(
ıS·û
 *
¥aû
, 
ıSh­e
 *
sh­e
)

574  (
sh­e
->
¥aû
 == space);

575 
	}
}

577 
ıBoŞ
 
	$ıS·ûCÚšsBody
(
ıS·û
 *
¥aû
, 
ıBody
 *
body
)

579  (
body
->
¥aû
 == space);

580 
	}
}

582 
ıBoŞ
 
	$ıS·ûCÚšsCÚ¡¿št
(
ıS·û
 *
¥aû
, 
ıCÚ¡¿št
 *
cÚ¡¿št
)

584  (
cÚ¡¿št
->
¥aû
 == space);

585 
	}
}

590 
	$ıS·ûEachBody
(
ıS·û
 *
¥aû
, 
ıS·ûBodyI‹¿tÜFunc
 
func
, *
d©a
)

592 
	`ıS·ûLock
(
¥aû
); {

593 
ıA¼ay
 *
bod›s
 = 
¥aû
->
dyÇmicBod›s
;

594 
i
=0; i<
bod›s
->
num
; i++){

595 
	`func
((
ıBody
 *)
bod›s
->
¬r
[
i
], 
d©a
);

598 
ıA¼ay
 *
Ùh”Bod›s
 = 
¥aû
->
¡©icBod›s
;

599 
i
=0; i<
Ùh”Bod›s
->
num
; i++){

600 
	`func
((
ıBody
 *)
Ùh”Bod›s
->
¬r
[
i
], 
d©a
);

603 
ıA¼ay
 *
compÚ’ts
 = 
¥aû
->
¦“pšgCompÚ’ts
;

604 
i
=0; i<
compÚ’ts
->
num
; i++){

605 
ıBody
 *
roÙ
 = (ıBody *)
compÚ’ts
->
¬r
[
i
];

607 
ıBody
 *
body
 = 
roÙ
;

608 
body
){

609 
ıBody
 *
Ãxt
 = 
body
->
¦“pšg
.next;

610 
	`func
(
body
, 
d©a
);

611 
body
 = 
Ãxt
;

614 } 
	`ıS·ûUÆock
(
¥aû
, 
ıTrue
);

615 
	}
}

617 
	s¥aûSh­eCÚ‹xt
 {

618 
ıS·ûSh­eI‹¿tÜFunc
 
	mfunc
;

619 *
	md©a
;

620 } 
	t¥aûSh­eCÚ‹xt
;

623 
	$¥aûEachSh­eI‹¿tÜ
(
ıSh­e
 *
sh­e
, 
¥aûSh­eCÚ‹xt
 *
cÚ‹xt
)

625 
cÚ‹xt
->
	`func
(
sh­e
, cÚ‹xt->
d©a
);

626 
	}
}

629 
	$ıS·ûEachSh­e
(
ıS·û
 *
¥aû
, 
ıS·ûSh­eI‹¿tÜFunc
 
func
, *
d©a
)

631 
	`ıS·ûLock
(
¥aû
); {

632 
¥aûSh­eCÚ‹xt
 
cÚ‹xt
 = {
func
, 
d©a
};

633 
	`ıS·tŸlIndexEach
(
¥aû
->
dyÇmicSh­es
, (
ıS·tŸlIndexI‹¿tÜFunc
)
¥aûEachSh­eI‹¿tÜ
, &
cÚ‹xt
);

634 
	`ıS·tŸlIndexEach
(
¥aû
->
¡©icSh­es
, (
ıS·tŸlIndexI‹¿tÜFunc
)
¥aûEachSh­eI‹¿tÜ
, &
cÚ‹xt
);

635 } 
	`ıS·ûUÆock
(
¥aû
, 
ıTrue
);

636 
	}
}

639 
	$ıS·ûEachCÚ¡¿št
(
ıS·û
 *
¥aû
, 
ıS·ûCÚ¡¿štI‹¿tÜFunc
 
func
, *
d©a
)

641 
	`ıS·ûLock
(
¥aû
); {

642 
ıA¼ay
 *
cÚ¡¿šts
 = 
¥aû
->constraints;

644 
i
=0; i<
cÚ¡¿šts
->
num
; i++){

645 
	`func
((
ıCÚ¡¿št
 *)
cÚ¡¿šts
->
¬r
[
i
], 
d©a
);

647 } 
	`ıS·ûUÆock
(
¥aû
, 
ıTrue
);

648 
	}
}

653 
	$ıS·ûRešdexStic
(
ıS·û
 *
¥aû
)

655 
	`ıAs£¹H¬d
(!
¥aû
->
locked
, "You cannot manually„eindex objects whilehe space is†ocked. Wait untilhe current query or step is complete.");

657 
	`ıS·tŸlIndexEach
(
¥aû
->
¡©icSh­es
, (
ıS·tŸlIndexI‹¿tÜFunc
)&
ıSh­eUpd©eFunc
, 
NULL
);

658 
	`ıS·tŸlIndexRešdex
(
¥aû
->
¡©icSh­es
);

659 
	}
}

662 
	$ıS·ûRešdexSh­e
(
ıS·û
 *
¥aû
, 
ıSh­e
 *
sh­e
)

664 
	`ıAs£¹H¬d
(!
¥aû
->
locked
, "You cannot manually„eindex objects whilehe space is†ocked. Wait untilhe current query or step is complete.");

666 
	`ıSh­eCacheBB
(
sh­e
);

669 
	`ıS·tŸlIndexRešdexObjeù
(
¥aû
->
dyÇmicSh­es
, 
sh­e
, sh­e->
hashid
);

670 
	`ıS·tŸlIndexRešdexObjeù
(
¥aû
->
¡©icSh­es
, 
sh­e
, sh­e->
hashid
);

671 
	}
}

674 
	$ıS·ûRešdexSh­esFÜBody
(
ıS·û
 *
¥aû
, 
ıBody
 *
body
)

676 
	`CP_BODY_FOREACH_SHAPE
(
body
, 
sh­e
è
	`ıS·ûRešdexSh­e
(
¥aû
, shape);

677 
	}
}

681 
	$cİySh­es
(
ıSh­e
 *
sh­e
, 
ıS·tŸlIndex
 *
šdex
)

683 
	`ıS·tŸlIndexIn£¹
(
šdex
, 
sh­e
, sh­e->
hashid
);

684 
	}
}

687 
	$ıS·ûU£S·tŸlHash
(
ıS·û
 *
¥aû
, 
ıFlßt
 
dim
, 
couÁ
)

689 
ıS·tŸlIndex
 *
¡©icSh­es
 = 
	`ıS·ûHashNew
(
dim
, 
couÁ
, (
ıS·tŸlIndexBBFunc
)
ıSh­eG‘BB
, 
NULL
);

690 
ıS·tŸlIndex
 *
dyÇmicSh­es
 = 
	`ıS·ûHashNew
(
dim
, 
couÁ
, (
ıS·tŸlIndexBBFunc
)
ıSh­eG‘BB
, 
¡©icSh­es
);

692 
	`ıS·tŸlIndexEach
(
¥aû
->
¡©icSh­es
, (
ıS·tŸlIndexI‹¿tÜFunc
)
cİySh­es
, staticShapes);

693 
	`ıS·tŸlIndexEach
(
¥aû
->
dyÇmicSh­es
, (
ıS·tŸlIndexI‹¿tÜFunc
)
cİySh­es
, dynamicShapes);

695 
	`ıS·tŸlIndexF»e
(
¥aû
->
¡©icSh­es
);

696 
	`ıS·tŸlIndexF»e
(
¥aû
->
dyÇmicSh­es
);

698 
¥aû
->
¡©icSh­es
 = staticShapes;

699 
¥aû
->
dyÇmicSh­es
 = dynamicShapes;

700 
	}
}

	@../src/chipmunk/cpSpaceComponent.c

22 
	~<¡ršg.h
>

24 
	~"chmunk/chmunk_´iv©e.h
"

29 
	$ıS·ûAùiv©eBody
(
ıS·û
 *
¥aû
, 
ıBody
 *
body
)

31 
	`ıAs£¹H¬d
(
	`ıBodyG‘Ty³
(
body
è=ğ
CP_BODY_TYPE_DYNAMIC
, "Internalƒrror: Attemptingo‡ctivate‡‚on-dynamic body.");

33 if(
¥aû
->
locked
){

35 if(!
	`ıA¼ayCÚšs
(
¥aû
->
rou£dBod›s
, 
body
)è
	`ıA¼ayPush
(space->rousedBodies, body);

37 
	`ıAs£¹Soá
(
body
->
¦“pšg
.
roÙ
 =ğ
NULL
 && body->¦“pšg.
Ãxt
 == NULL, "Internalƒrror: Activating body‚on-NULL‚ode…ointers.");

38 
	`ıA¼ayPush
(
¥aû
->
dyÇmicBod›s
, 
body
);

40 
	`CP_BODY_FOREACH_SHAPE
(
body
, 
sh­e
){

41 
	`ıS·tŸlIndexRemove
(
¥aû
->
¡©icSh­es
, 
sh­e
, sh­e->
hashid
);

42 
	`ıS·tŸlIndexIn£¹
(
¥aû
->
dyÇmicSh­es
, 
sh­e
, sh­e->
hashid
);

45 
	`CP_BODY_FOREACH_ARBITER
(
body
, 
¬b
){

46 
ıBody
 *
bodyA
 = 
¬b
->
body_a
;

52 if(
body
 =ğ
bodyA
 || 
	`ıBodyG‘Ty³
(bodyAè=ğ
CP_BODY_TYPE_STATIC
){

53 
numCÚùs
 = 
¬b
->
couÁ
;

54 
ıCÚù
 *
cÚùs
 = 
¬b
->contacts;

57 
¬b
->
cÚùs
 = 
	`ıCÚùBufãrG‘A¼ay
(
¥aû
);

58 
	`memıy
(
¬b
->
cÚùs
, cÚùs, 
numCÚùs
*(
ıCÚù
));

59 
	`ıS·ûPushCÚùs
(
¥aû
, 
numCÚùs
);

62 cÚ¡ 
ıSh­e
 *
a
 = 
¬b
->a, *
b
 =‡rb->b;

63 cÚ¡ 
ıSh­e
 *
sh­e_·œ
[] = {
a
, 
b
};

64 
ıHashV®ue
 
¬bHashID
 = 
	`CP_HASH_PAIR
((ıHashV®ue)
a
, (ıHashV®ue)
b
);

65 
	`ıHashS‘In£¹
(
¥aû
->
ÿchedArb™”s
, 
¬bHashID
, 
sh­e_·œ
, 
NULL
, 
¬b
);

68 
¬b
->
¡amp
 = 
¥aû
->stamp;

69 
	`ıA¼ayPush
(
¥aû
->
¬b™”s
, 
¬b
);

71 
	`ıä“
(
cÚùs
);

75 
	`CP_BODY_FOREACH_CONSTRAINT
(
body
, 
cÚ¡¿št
){

76 
ıBody
 *
bodyA
 = 
cÚ¡¿št
->
a
;

77 if(
body
 =ğ
bodyA
 || 
	`ıBodyG‘Ty³
(bodyAè=ğ
CP_BODY_TYPE_STATIC
è
	`ıA¼ayPush
(
¥aû
->
cÚ¡¿šts
, 
cÚ¡¿št
);

80 
	}
}

83 
	$ıS·ûD—ùiv©eBody
(
ıS·û
 *
¥aû
, 
ıBody
 *
body
)

85 
	`ıAs£¹H¬d
(
	`ıBodyG‘Ty³
(
body
è=ğ
CP_BODY_TYPE_DYNAMIC
, "Internalƒrror: Attemptingo deactivate‡‚on-dynamic body.");

87 
	`ıA¼ayD–‘eObj
(
¥aû
->
dyÇmicBod›s
, 
body
);

89 
	`CP_BODY_FOREACH_SHAPE
(
body
, 
sh­e
){

90 
	`ıS·tŸlIndexRemove
(
¥aû
->
dyÇmicSh­es
, 
sh­e
, sh­e->
hashid
);

91 
	`ıS·tŸlIndexIn£¹
(
¥aû
->
¡©icSh­es
, 
sh­e
, sh­e->
hashid
);

94 
	`CP_BODY_FOREACH_ARBITER
(
body
, 
¬b
){

95 
ıBody
 *
bodyA
 = 
¬b
->
body_a
;

96 if(
body
 =ğ
bodyA
 || 
	`ıBodyG‘Ty³
(bodyAè=ğ
CP_BODY_TYPE_STATIC
){

97 
	`ıS·ûUnÿcheArb™”
(
¥aû
, 
¬b
);

100 
size_t
 
by‹s
 = 
¬b
->
couÁ
*(
ıCÚù
);

101 
ıCÚù
 *
cÚùs
 = (ıCÚù *)
	`ıÿÎoc
(1, 
by‹s
);

102 
	`memıy
(
cÚùs
, 
¬b
->cÚùs, 
by‹s
);

103 
¬b
->
cÚùs
 = contacts;

107 
	`CP_BODY_FOREACH_CONSTRAINT
(
body
, 
cÚ¡¿št
){

108 
ıBody
 *
bodyA
 = 
cÚ¡¿št
->
a
;

109 if(
body
 =ğ
bodyA
 || 
	`ıBodyG‘Ty³
(bodyAè=ğ
CP_BODY_TYPE_STATIC
è
	`ıA¼ayD–‘eObj
(
¥aû
->
cÚ¡¿šts
, 
cÚ¡¿št
);

111 
	}
}

113 
šlše
 
ıBody
 *

114 
	$CompÚ’tRoÙ
(
ıBody
 *
body
)

116  (
body
 ? body->
¦“pšg
.
roÙ
 : 
NULL
);

117 
	}
}

120 
	$ıBodyAùiv©e
(
ıBody
 *
body
)

122 if(
body
 !ğ
NULL
 && 
	`ıBodyG‘Ty³
(bodyè=ğ
CP_BODY_TYPE_DYNAMIC
){

123 
body
->
¦“pšg
.
idËTime
 = 0.0f;

125 
ıBody
 *
roÙ
 = 
	`CompÚ’tRoÙ
(
body
);

126 if(
roÙ
 && 
	`ıBodyIsSË•šg
(root)){

128 
	`ıAs£¹Soá
(
	`ıBodyG‘Ty³
(
roÙ
è=ğ
CP_BODY_TYPE_DYNAMIC
, "Internal Error: Non-dynamic body component„oot detected.");

130 
ıS·û
 *
¥aû
 = 
roÙ
->space;

131 
ıBody
 *
body
 = 
roÙ
;

132 
body
){

133 
ıBody
 *
Ãxt
 = 
body
->
¦“pšg
.next;

135 
body
->
¦“pšg
.
idËTime
 = 0.0f;

136 
body
->
¦“pšg
.
roÙ
 = 
NULL
;

137 
body
->
¦“pšg
.
Ãxt
 = 
NULL
;

138 
	`ıS·ûAùiv©eBody
(
¥aû
, 
body
);

140 
body
 = 
Ãxt
;

143 
	`ıA¼ayD–‘eObj
(
¥aû
->
¦“pšgCompÚ’ts
, 
roÙ
);

146 
	`CP_BODY_FOREACH_ARBITER
(
body
, 
¬b
){

149 
ıBody
 *
Ùh”
 = (
¬b
->
body_a
 =ğ
body
 ?‡rb->
body_b
 :‡rb->body_a);

150 if(
	`ıBodyG‘Ty³
(
Ùh”
è!ğ
CP_BODY_TYPE_STATIC
èÙh”->
¦“pšg
.
idËTime
 = 0.0f;

153 
	}
}

156 
	$ıBodyAùiv©eStic
(
ıBody
 *
body
, 
ıSh­e
 *
f‹r
)

158 
	`ıAs£¹H¬d
(
	`ıBodyG‘Ty³
(
body
è=ğ
CP_BODY_TYPE_STATIC
, "cpBodyActivateStatic() called on‡‚on-static body.");

160 
	`CP_BODY_FOREACH_ARBITER
(
body
, 
¬b
){

161 if(!
f‹r
 || f‹¸=ğ
¬b
->
a
 || f‹¸=ğ¬b->
b
){

162 
	`ıBodyAùiv©e
(
¬b
->
body_a
 =ğ
body
 ?‡rb->
body_b
 :‡rb->body_a);

167 
	}
}

169 
šlše
 

170 
	$ıBodyPushArb™”
(
ıBody
 *
body
, 
ıArb™”
 *
¬b
)

172 
	`ıAs£¹Soá
(
	`ıArb™”Th»adFÜBody
(
¬b
, 
body
)->
Ãxt
 =ğ
NULL
, "Internal Error: Dangling contact graph…ointers detected. (A)");

173 
	`ıAs£¹Soá
(
	`ıArb™”Th»adFÜBody
(
¬b
, 
body
)->
´ev
 =ğ
NULL
, "Internal Error: Dangling contact graph…ointers detected. (B)");

175 
ıArb™”
 *
Ãxt
 = 
body
->
¬b™”Li¡
;

176 
	`ıAs£¹Soá
(
Ãxt
 =ğ
NULL
 || 
	`ıArb™”Th»adFÜBody
Òext, 
body
)->
´ev
 == NULL, "Internal Error: Dangling contact graph…ointers detected. (C)");

177 
	`ıArb™”Th»adFÜBody
(
¬b
, 
body
)->
Ãxt
 =‚ext;

179 if(
Ãxt
è
	`ıArb™”Th»adFÜBody
Òext, 
body
)->
´ev
 = 
¬b
;

180 
body
->
¬b™”Li¡
 = 
¬b
;

181 
	}
}

183 
šlše
 

184 
	$CompÚ’tAdd
(
ıBody
 *
roÙ
, cpBody *
body
){

185 
body
->
¦“pšg
.
roÙ
 =„oot;

187 if(
body
 !ğ
roÙ
){

188 
body
->
¦“pšg
.
Ãxt
 = 
roÙ
->sleeping.next;

189 
roÙ
->
¦“pšg
.
Ãxt
 = 
body
;

191 
	}
}

193 
šlše
 

194 
	$FloodFlCompÚ’t
(
ıBody
 *
roÙ
, cpBody *
body
)

198 if(
	`ıBodyG‘Ty³
(
body
è=ğ
CP_BODY_TYPE_DYNAMIC
){

199 
ıBody
 *
Ùh”_roÙ
 = 
	`CompÚ’tRoÙ
(
body
);

200 if(
Ùh”_roÙ
 =ğ
NULL
){

201 
	`CompÚ’tAdd
(
roÙ
, 
body
);

202 
	`CP_BODY_FOREACH_ARBITER
(
body
, 
¬b
è
	`FloodFlCompÚ’t
(
roÙ
, (body =ğ¬b->
body_a
 ?‡rb->
body_b
 :‡rb->body_a));

203 
	`CP_BODY_FOREACH_CONSTRAINT
(
body
, 
cÚ¡¿št
è
	`FloodFlCompÚ’t
(
roÙ
, (body =ğcÚ¡¿št->
a
 ? cÚ¡¿št->
b
 : constraint->a));

205 
	`ıAs£¹Soá
(
Ùh”_roÙ
 =ğ
roÙ
, "Internal Error: Inconsistency dectected inhe contact graph.");

208 
	}
}

210 
šlše
 
ıBoŞ


211 
	$CompÚ’tAùive
(
ıBody
 *
roÙ
, 
ıFlßt
 
th»shŞd
)

213 
	`CP_BODY_FOREACH_COMPONENT
(
roÙ
, 
body
){

214 if(
body
->
¦“pšg
.
idËTime
 < 
th»shŞd
è 
ıTrue
;

217  
ıF®£
;

218 
	}
}

221 
	$ıS·ûProûssCompÚ’ts
(
ıS·û
 *
¥aû
, 
ıFlßt
 
dt
)

223 
ıBoŞ
 
¦“p
 = (
¥aû
->
¦“pTimeTh»shŞd
 !ğ
INFINITY
);

224 
ıA¼ay
 *
bod›s
 = 
¥aû
->
dyÇmicBod›s
;

226 #iâdeà
NDEBUG


227 
i
=0; i<
bod›s
->
num
; i++){

228 
ıBody
 *
body
 = (ıBody*)
bod›s
->
¬r
[
i
];

230 
	`ıAs£¹Soá
(
body
->
¦“pšg
.
Ãxt
 =ğ
NULL
, "Internal Error: Dangling‚ext…ointer detected in contact graph.");

231 
	`ıAs£¹Soá
(
body
->
¦“pšg
.
roÙ
 =ğ
NULL
, "Internal Error: Dangling„oot…ointer detected in contact graph.");

236 if(
¦“p
){

237 
ıFlßt
 
dv
 = 
¥aû
->
idËS³edTh»shŞd
;

238 
ıFlßt
 
dvsq
 = (
dv
 ? dv*dv : 
	`ıvËngthsq
(
¥aû
->
g¿v™y
)*
dt
*dt);

241 
i
=0; i<
bod›s
->
num
; i++){

242 
ıBody
 *
body
 = (ıBody*)
bod›s
->
¬r
[
i
];

245 if(
	`ıBodyG‘Ty³
(
body
è!ğ
CP_BODY_TYPE_DYNAMIC
) ;

248 
ıFlßt
 
keTh»shŞd
 = (
dvsq
 ? 
body
->
m
*dvsq : 0.0f);

249 
body
->
¦“pšg
.
idËTime
 = (
	`ıBodyKš‘icEÃrgy
(bodyè> 
keTh»shŞd
 ? 0.0à: body->¦“pšg.idËTim+ 
dt
);

254 
ıA¼ay
 *
¬b™”s
 = 
¥aû
->arbiters;

255 
i
=0, 
couÁ
=
¬b™”s
->
num
; i<count; i++){

256 
ıArb™”
 *
¬b
 = (ıArb™”*)
¬b™”s
->
¬r
[
i
];

257 
ıBody
 *
a
 = 
¬b
->
body_a
, *
b
 =‡rb->
body_b
;

259 if(
¦“p
){

261 if(
	`ıBodyG‘Ty³
(
b
è=ğ
CP_BODY_TYPE_KINEMATIC
 || 
	`ıBodyIsSË•šg
(
a
)è
	`ıBodyAùiv©e
(a);

262 if(
	`ıBodyG‘Ty³
(
a
è=ğ
CP_BODY_TYPE_KINEMATIC
 || 
	`ıBodyIsSË•šg
(
b
)è
	`ıBodyAùiv©e
(b);

265 
	`ıBodyPushArb™”
(
a
, 
¬b
);

266 
	`ıBodyPushArb™”
(
b
, 
¬b
);

269 if(
¦“p
){

271 
ıA¼ay
 *
cÚ¡¿šts
 = 
¥aû
->constraints;

272 
i
=0; i<
cÚ¡¿šts
->
num
; i++){

273 
ıCÚ¡¿št
 *
cÚ¡¿št
 = (ıCÚ¡¿šˆ*)
cÚ¡¿šts
->
¬r
[
i
];

274 
ıBody
 *
a
 = 
cÚ¡¿št
->a, *
b
 = constraint->b;

276 if(
	`ıBodyG‘Ty³
(
b
è=ğ
CP_BODY_TYPE_KINEMATIC
è
	`ıBodyAùiv©e
(
a
);

277 if(
	`ıBodyG‘Ty³
(
a
è=ğ
CP_BODY_TYPE_KINEMATIC
è
	`ıBodyAùiv©e
(
b
);

281 
i
=0; i<
bod›s
->
num
;){

282 
ıBody
 *
body
 = (ıBody*)
bod›s
->
¬r
[
i
];

284 if(
	`CompÚ’tRoÙ
(
body
è=ğ
NULL
){

287 
	`FloodFlCompÚ’t
(
body
, body);

290 if(!
	`CompÚ’tAùive
(
body
, 
¥aû
->
¦“pTimeTh»shŞd
)){

291 
	`ıA¼ayPush
(
¥aû
->
¦“pšgCompÚ’ts
, 
body
);

292 
	`CP_BODY_FOREACH_COMPONENT
(
body
, 
Ùh”
è
	`ıS·ûD—ùiv©eBody
(
¥aû
, other);

300 
i
++;

303 
body
->
¦“pšg
.
roÙ
 = 
NULL
;

304 
body
->
¦“pšg
.
Ãxt
 = 
NULL
;

307 
	}
}

310 
	$ıBodySË•
(
ıBody
 *
body
)

312 
	`ıBodySË•W™hGroup
(
body
, 
NULL
);

313 
	}
}

316 
	$ıBodySË•W™hGroup
(
ıBody
 *
body
, cpBody *
group
){

317 
	`ıAs£¹H¬d
(
	`ıBodyG‘Ty³
(
body
è=ğ
CP_BODY_TYPE_DYNAMIC
, "Non-dynamic bodies cannot be…uto sleep.");

319 
ıS·û
 *
¥aû
 = 
body
->space;

320 
	`ıAs£¹H¬d
(!
	`ıS·ûIsLocked
(
¥aû
), "Bodies cannot be…uto sleep during‡ query or‡ callo cpSpaceStep(). Puthese calls into‡…ost-step callback.");

321 
	`ıAs£¹H¬d
(
	`ıS·ûG‘SË•TimeTh»shŞd
(
¥aû
è< 
INFINITY
, "Sleeping is‚otƒnabled onhe space. You cannot sleep‡ body without setting‡ sleepimehreshold onhe space.");

322 
	`ıAs£¹H¬d
(
group
 =ğ
NULL
 || 
	`ıBodyIsSË•šg
(group), "Cannot use‡‚on-sleeping body‡s‡ group identifier.");

324 if(
	`ıBodyIsSË•šg
(
body
)){

325 
	`ıAs£¹H¬d
(
	`CompÚ’tRoÙ
(
body
è=ğCompÚ’tRoÙ(
group
), "The body is‡lready sleeping‡nd it's group cannot be„eassigned.");

329 
	`CP_BODY_FOREACH_SHAPE
(
body
, 
sh­e
è
	`ıSh­eCacheBB
(shape);

330 
	`ıS·ûD—ùiv©eBody
(
¥aû
, 
body
);

332 if(
group
){

333 
ıBody
 *
roÙ
 = 
	`CompÚ’tRoÙ
(
group
);

335 
body
->
¦“pšg
.
roÙ
 =„oot;

336 
body
->
¦“pšg
.
Ãxt
 = 
roÙ
->sleeping.next;

337 
body
->
¦“pšg
.
idËTime
 = 0.0f;

339 
roÙ
->
¦“pšg
.
Ãxt
 = 
body
;

341 
body
->
¦“pšg
.
roÙ
 = body;

342 
body
->
¦“pšg
.
Ãxt
 = 
NULL
;

343 
body
->
¦“pšg
.
idËTime
 = 0.0f;

345 
	`ıA¼ayPush
(
¥aû
->
¦“pšgCompÚ’ts
, 
body
);

348 
	`ıA¼ayD–‘eObj
(
¥aû
->
dyÇmicBod›s
, 
body
);

349 
	}
}

	@../src/chipmunk/cpSpaceDebug.c

22 
	~"chmunk/chmunk_´iv©e.h
"

24 #iâdeà
CP_SPACE_DISABLE_DEBUG_API


27 
	$ıS·ûDebugD¿wSh­e
(
ıSh­e
 *
sh­e
, 
ıS·ûDebugD¿wO±iÚs
 *
İtiÚs
)

29 
ıBody
 *
body
 = 
sh­e
->body;

30 
ıD©aPoš‹r
 
d©a
 = 
İtiÚs
->data;

32 
ıS·ûDebugCŞÜ
 
ouše_cŞÜ
 = 
İtiÚs
->
sh­eOušeCŞÜ
;

33 
ıS·ûDebugCŞÜ
 
fl_cŞÜ
 = 
İtiÚs
->
	`cŞÜFÜSh­e
(
sh­e
, 
d©a
);

35 
sh­e
->
kÏss
->
ty³
){

36 
CP_CIRCLE_SHAPE
: {

37 
ıCœşeSh­e
 *
cœşe
 = (ıCœşeSh­*)
sh­e
;

38 
İtiÚs
->
	`d¿wCœşe
(
cœşe
->
tc
, 
body
->
a
, cœşe->
r
, 
ouše_cŞÜ
, 
fl_cŞÜ
, 
d©a
);

41 
CP_SEGMENT_SHAPE
: {

42 
ıSegm’tSh­e
 *
£g
 = (ıSegm’tSh­*)
sh­e
;

43 
İtiÚs
->
	`d¿wF©Segm’t
(
£g
->

, seg->
tb
, seg->
r
, 
ouše_cŞÜ
, 
fl_cŞÜ
, 
d©a
);

46 
CP_POLY_SHAPE
: {

47 
ıPŞySh­e
 *
pŞy
 = (ıPŞySh­*)
sh­e
;

49 
couÁ
 = 
pŞy
->count;

50 
ıS¶™tšgPÏÃ
 *
¶ªes
 = 
pŞy
->planes;

51 
ıVeù
 *
v”ts
 = (ıVeù *)
	`®loÿ
(
couÁ
*(cpVect));

53 
i
=0; i<
couÁ
; i++è
v”ts
[i] = 
¶ªes
[i].
v0
;

54 
İtiÚs
->
	`d¿wPŞygÚ
(
couÁ
, 
v”ts
, 
pŞy
->
r
, 
ouše_cŞÜ
, 
fl_cŞÜ
, 
d©a
);

59 
	}
}

61 cÚ¡ 
ıVeù
 
	g¥ršg_v”ts
[] = {

78 cÚ¡ 
	g¥ršg_couÁ
 = (
¥ršg_v”ts
)/(
ıVeù
);

81 
	$ıS·ûDebugD¿wCÚ¡¿št
(
ıCÚ¡¿št
 *
cÚ¡¿št
, 
ıS·ûDebugD¿wO±iÚs
 *
İtiÚs
)

83 
ıD©aPoš‹r
 
d©a
 = 
İtiÚs
->data;

84 
ıS·ûDebugCŞÜ
 
cŞÜ
 = 
İtiÚs
->
cÚ¡¿štCŞÜ
;

86 
ıBody
 *
body_a
 = 
cÚ¡¿št
->
a
;

87 
ıBody
 *
body_b
 = 
cÚ¡¿št
->
b
;

89 if(
	`ıCÚ¡¿štIsPšJošt
(
cÚ¡¿št
)){

90 
ıPšJošt
 *
jošt
 = (ıPšJošˆ*)
cÚ¡¿št
;

92 
ıVeù
 
a
 = 
	`ıT¿nsfÜmPošt
(
body_a
->
ŒªsfÜm
, 
jošt
->
ªchÜA
);

93 
ıVeù
 
b
 = 
	`ıT¿nsfÜmPošt
(
body_b
->
ŒªsfÜm
, 
jošt
->
ªchÜB
);

95 
İtiÚs
->
	`d¿wDÙ
(5, 
a
, 
cŞÜ
, 
d©a
);

96 
İtiÚs
->
	`d¿wDÙ
(5, 
b
, 
cŞÜ
, 
d©a
);

97 
İtiÚs
->
	`d¿wSegm’t
(
a
, 
b
, 
cŞÜ
, 
d©a
);

98 } if(
	`ıCÚ¡¿štIsSlideJošt
(
cÚ¡¿št
)){

99 
ıSlideJošt
 *
jošt
 = (ıSlideJošˆ*)
cÚ¡¿št
;

101 
ıVeù
 
a
 = 
	`ıT¿nsfÜmPošt
(
body_a
->
ŒªsfÜm
, 
jošt
->
ªchÜA
);

102 
ıVeù
 
b
 = 
	`ıT¿nsfÜmPošt
(
body_b
->
ŒªsfÜm
, 
jošt
->
ªchÜB
);

104 
İtiÚs
->
	`d¿wDÙ
(5, 
a
, 
cŞÜ
, 
d©a
);

105 
İtiÚs
->
	`d¿wDÙ
(5, 
b
, 
cŞÜ
, 
d©a
);

106 
İtiÚs
->
	`d¿wSegm’t
(
a
, 
b
, 
cŞÜ
, 
d©a
);

107 } if(
	`ıCÚ¡¿štIsPivÙJošt
(
cÚ¡¿št
)){

108 
ıPivÙJošt
 *
jošt
 = (ıPivÙJošˆ*)
cÚ¡¿št
;

110 
ıVeù
 
a
 = 
	`ıT¿nsfÜmPošt
(
body_a
->
ŒªsfÜm
, 
jošt
->
ªchÜA
);

111 
ıVeù
 
b
 = 
	`ıT¿nsfÜmPošt
(
body_b
->
ŒªsfÜm
, 
jošt
->
ªchÜB
);

113 
İtiÚs
->
	`d¿wDÙ
(5, 
a
, 
cŞÜ
, 
d©a
);

114 
İtiÚs
->
	`d¿wDÙ
(5, 
b
, 
cŞÜ
, 
d©a
);

115 } if(
	`ıCÚ¡¿štIsGrooveJošt
(
cÚ¡¿št
)){

116 
ıGrooveJošt
 *
jošt
 = (ıGrooveJošˆ*)
cÚ¡¿št
;

118 
ıVeù
 
a
 = 
	`ıT¿nsfÜmPošt
(
body_a
->
ŒªsfÜm
, 
jošt
->
grv_a
);

119 
ıVeù
 
b
 = 
	`ıT¿nsfÜmPošt
(
body_a
->
ŒªsfÜm
, 
jošt
->
grv_b
);

120 
ıVeù
 
c
 = 
	`ıT¿nsfÜmPošt
(
body_b
->
ŒªsfÜm
, 
jošt
->
ªchÜB
);

122 
İtiÚs
->
	`d¿wDÙ
(5, 
c
, 
cŞÜ
, 
d©a
);

123 
İtiÚs
->
	`d¿wSegm’t
(
a
, 
b
, 
cŞÜ
, 
d©a
);

124 } if(
	`ıCÚ¡¿štIsDam³dS´šg
(
cÚ¡¿št
)){

125 
ıDam³dS´šg
 *
¥ršg
 = (ıDam³dS´šg *)
cÚ¡¿št
;

126 
ıD©aPoš‹r
 
d©a
 = 
İtiÚs
->data;

127 
ıS·ûDebugCŞÜ
 
cŞÜ
 = 
İtiÚs
->
cÚ¡¿štCŞÜ
;

129 
ıVeù
 
a
 = 
	`ıT¿nsfÜmPošt
(
body_a
->
ŒªsfÜm
, 
¥ršg
->
ªchÜA
);

130 
ıVeù
 
b
 = 
	`ıT¿nsfÜmPošt
(
body_b
->
ŒªsfÜm
, 
¥ršg
->
ªchÜB
);

132 
İtiÚs
->
	`d¿wDÙ
(5, 
a
, 
cŞÜ
, 
d©a
);

133 
İtiÚs
->
	`d¿wDÙ
(5, 
b
, 
cŞÜ
, 
d©a
);

135 
ıVeù
 
d–
 = 
	`ıvsub
(
b
, 
a
);

136 
ıFlßt
 
cos
 = 
d–
.
x
;

137 
ıFlßt
 
sš
 = 
d–
.
y
;

138 
ıFlßt
 
s
 = 1.0f/
	`ıvËngth
(
d–
);

140 
ıVeù
 
r1
 = 
	`ıv
(
cos
, -
sš
*
s
);

141 
ıVeù
 
r2
 = 
	`ıv
(
sš
, 
cos
*
s
);

143 
ıVeù
 *
v”ts
 = (ıVeù *)
	`®loÿ
(
¥ršg_couÁ
*(cpVect));

144 
i
=0; i<
¥ršg_couÁ
; i++){

145 
ıVeù
 
v
 = 
¥ršg_v”ts
[
i
];

146 
v”ts
[
i
] = 
	`ıv
(
	`ıvdÙ
(
v
, 
r1
è+ 
a
.
x
, cpvdÙ(v, 
r2
è+‡.
y
);

149 
i
=0; i<
¥ršg_couÁ
-1; i++){

150 
İtiÚs
->
	`d¿wSegm’t
(
v”ts
[
i
], v”ts[˜+ 1], 
cŞÜ
, 
d©a
);

153 
	}
}

156 
	$ıS·ûDebugD¿w
(
ıS·û
 *
¥aû
, 
ıS·ûDebugD¿wO±iÚs
 *
İtiÚs
)

158 if(
İtiÚs
->
æags
 & 
CP_SPACE_DEBUG_DRAW_SHAPES
){

159 
	`ıS·ûEachSh­e
(
¥aû
, (
ıS·ûSh­eI‹¿tÜFunc
)
ıS·ûDebugD¿wSh­e
, 
İtiÚs
);

162 if(
İtiÚs
->
æags
 & 
CP_SPACE_DEBUG_DRAW_CONSTRAINTS
){

163 
	`ıS·ûEachCÚ¡¿št
(
¥aû
, (
ıS·ûCÚ¡¿štI‹¿tÜFunc
)
ıS·ûDebugD¿wCÚ¡¿št
, 
İtiÚs
);

166 if(
İtiÚs
->
æags
 & 
CP_SPACE_DEBUG_DRAW_COLLISION_POINTS
){

167 
ıA¼ay
 *
¬b™”s
 = 
¥aû
->arbiters;

168 
ıS·ûDebugCŞÜ
 
cŞÜ
 = 
İtiÚs
->
cŞlisiÚPoštCŞÜ
;

169 
ıS·ûDebugD¿wSegm’tIm¶
 
d¿w_£g
 = 
İtiÚs
->
d¿wSegm’t
;

170 
ıD©aPoš‹r
 
d©a
 = 
İtiÚs
->data;

172 
i
=0; i<
¬b™”s
->
num
; i++){

173 
ıArb™”
 *
¬b
 = (ıArb™”*)
¬b™”s
->
¬r
[
i
];

174 
ıVeù
 
n
 = 
¬b
->n;

176 
j
=0; j<
¬b
->
couÁ
; j++){

177 
ıVeù
 
p1
 = 
	`ıvadd
(
¬b
->
body_a
->
p
,‡rb->
cÚùs
[
j
].
r1
);

178 
ıVeù
 
p2
 = 
	`ıvadd
(
¬b
->
body_b
->
p
,‡rb->
cÚùs
[
j
].
r2
);

180 
ıFlßt
 
d
 = 2.0f;

181 
ıVeù
 
a
 = 
	`ıvadd
(
p1
, 
	`ıvmuÉ
(
n
, -
d
));

182 
ıVeù
 
b
 = 
	`ıvadd
(
p2
, 
	`ıvmuÉ
(
n
, 
d
));

183 
	`d¿w_£g
(
a
, 
b
, 
cŞÜ
, 
d©a
);

187 
	}
}

	@../src/chipmunk/cpSpaceHash.c

22 
	~"chmunk/chmunk_´iv©e.h
"

23 
	~"´ime.h
"

25 
ıS·ûHashBš
 
	tıS·ûHashBš
;

26 
ıHªdË
 
	tıHªdË
;

28 
	sıS·ûHash
 {

29 
ıS·tŸlIndex
 
	m¥©ŸlIndex
;

31 
	mnumûÎs
;

32 
ıFlßt
 
	mûÎdim
;

34 
ıS·ûHashBš
 **
	mbË
;

35 
ıHashS‘
 *
	mhªdËS‘
;

37 
ıS·ûHashBš
 *
	mpoŞedBšs
;

38 
ıA¼ay
 *
	mpoŞedHªdËs
;

39 
ıA¼ay
 *
	m®loÿ‹dBufãrs
;

41 
ıTime¡amp
 
	m¡amp
;

47 
	sıHªdË
 {

48 *
	mobj
;

49 
	m»š
;

50 
ıTime¡amp
 
	m¡amp
;

53 
ıHªdË
*

54 
	$ıHªdËIn™
(
ıHªdË
 *
hªd
, *
obj
)

56 
hªd
->
obj
 = obj;

57 
hªd
->
»š
 = 0;

58 
hªd
->
¡amp
 = 0;

60  
hªd
;

61 
	}
}

63 
šlše
 
	$ıHªdËR‘aš
(
ıHªdË
 *
hªd
){hªd->
»š
++;
	}
}

65 
šlše
 

66 
	$ıHªdËR–—£
(
ıHªdË
 *
hªd
, 
ıA¼ay
 *
poŞedHªdËs
)

68 
hªd
->
»š
--;

69 if(
hªd
->
»š
 =ğ0è
	`ıA¼ayPush
(
poŞedHªdËs
, hand);

70 
	}
}

72 
	$hªdËS‘Eql
(*
obj
, 
ıHªdË
 *
hªd
){ (obj =ğhªd->obj);
	}
}

75 
	$hªdËS‘T¿ns
(*
obj
, 
ıS·ûHash
 *
hash
)

77 if(
hash
->
poŞedHªdËs
->
num
 == 0){

79 
couÁ
 = 
CP_BUFFER_BYTES
/(
ıHªdË
);

80 
	`ıAs£¹H¬d
(
couÁ
, "Internal Error: Buffer size isoo small.");

82 
ıHªdË
 *
bufãr
 = (ıHªdË *)
	`ıÿÎoc
(1, 
CP_BUFFER_BYTES
);

83 
	`ıA¼ayPush
(
hash
->
®loÿ‹dBufãrs
, 
bufãr
);

85 
i
=0; i<
couÁ
; i++è
	`ıA¼ayPush
(
hash
->
poŞedHªdËs
, 
bufãr
 + i);

88 
ıHªdË
 *
hªd
 = 
	`ıHªdËIn™
((ıHªdË *)
	`ıA¼ayPİ
(
hash
->
poŞedHªdËs
), 
obj
);

89 
	`ıHªdËR‘aš
(
hªd
);

91  
hªd
;

92 
	}
}

96 
	sıS·ûHashBš
 {

97 
ıHªdË
 *
	mhªdË
;

98 
ıS·ûHashBš
 *
	mÃxt
;

101 
šlše
 

102 
	$»cyşeBš
(
ıS·ûHash
 *
hash
, 
ıS·ûHashBš
 *
bš
)

104 
bš
->
Ãxt
 = 
hash
->
poŞedBšs
;

105 
hash
->
poŞedBšs
 = 
bš
;

106 
	}
}

108 
šlše
 

109 
	$ş—rTabËC–l
(
ıS·ûHash
 *
hash
, 
idx
)

111 
ıS·ûHashBš
 *
bš
 = 
hash
->
bË
[
idx
];

112 
bš
){

113 
ıS·ûHashBš
 *
Ãxt
 = 
bš
->next;

115 
	`ıHªdËR–—£
(
bš
->
hªdË
, 
hash
->
poŞedHªdËs
);

116 
	`»cyşeBš
(
hash
, 
bš
);

118 
bš
 = 
Ãxt
;

121 
hash
->
bË
[
idx
] = 
NULL
;

122 
	}
}

125 
	$ş—rTabË
(
ıS·ûHash
 *
hash
)

127 
i
=0; i<
hash
->
numûÎs
; i++è
	`ş—rTabËC–l
(hash, i);

128 
	}
}

131 
šlše
 
ıS·ûHashBš
 *

132 
	$g‘Em±yBš
(
ıS·ûHash
 *
hash
)

134 
ıS·ûHashBš
 *
bš
 = 
hash
->
poŞedBšs
;

136 if(
bš
){

137 
hash
->
poŞedBšs
 = 
bš
->
Ãxt
;

138  
bš
;

141 
couÁ
 = 
CP_BUFFER_BYTES
/(
ıS·ûHashBš
);

142 
	`ıAs£¹H¬d
(
couÁ
, "Internal Error: Buffer size isoo small.");

144 
ıS·ûHashBš
 *
bufãr
 = (ıS·ûHashBš *)
	`ıÿÎoc
(1, 
CP_BUFFER_BYTES
);

145 
	`ıA¼ayPush
(
hash
->
®loÿ‹dBufãrs
, 
bufãr
);

148 
i
=1; i<
couÁ
; i++è
	`»cyşeBš
(
hash
, 
bufãr
 + i);

149  
bufãr
;

151 
	}
}

155 
ıS·ûHash
 *

156 
	$ıS·ûHashAÎoc
()

158  (
ıS·ûHash
 *)
	`ıÿÎoc
(1, (cpSpaceHash));

159 
	}
}

163 
	$ıS·ûHashAÎocTabË
(
ıS·ûHash
 *
hash
, 
numûÎs
)

165 
	`ıä“
(
hash
->
bË
);

167 
hash
->
numûÎs
 =‚umcells;

168 
hash
->
bË
 = (
ıS·ûHashBš
 **)
	`ıÿÎoc
(
numûÎs
, (cpSpaceHashBin *));

169 
	}
}

171 
šlše
 
ıS·tŸlIndexCÏss
 *
KÏss
();

173 
ıS·tŸlIndex
 *

174 
	$ıS·ûHashIn™
(
ıS·ûHash
 *
hash
, 
ıFlßt
 
ûÎdim
, 
numûÎs
, 
ıS·tŸlIndexBBFunc
 
bbfunc
, 
ıS·tŸlIndex
 *
¡©icIndex
)

176 
	`ıS·tŸlIndexIn™
((
ıS·tŸlIndex
 *)
hash
, 
	`KÏss
(), 
bbfunc
, 
¡©icIndex
);

178 
	`ıS·ûHashAÎocTabË
(
hash
, 
	`Ãxt_´ime
(
numûÎs
));

179 
hash
->
ûÎdim
 = celldim;

181 
hash
->
hªdËS‘
 = 
	`ıHashS‘New
(0, (
ıHashS‘EqlFunc
)
hªdËS‘Eql
);

183 
hash
->
poŞedHªdËs
 = 
	`ıA¼ayNew
(0);

185 
hash
->
poŞedBšs
 = 
NULL
;

186 
hash
->
®loÿ‹dBufãrs
 = 
	`ıA¼ayNew
(0);

188 
hash
->
¡amp
 = 1;

190  (
ıS·tŸlIndex
 *)
hash
;

191 
	}
}

193 
ıS·tŸlIndex
 *

194 
	$ıS·ûHashNew
(
ıFlßt
 
ûÎdim
, 
ûÎs
, 
ıS·tŸlIndexBBFunc
 
bbfunc
, 
ıS·tŸlIndex
 *
¡©icIndex
)

196  
	`ıS·ûHashIn™
(
	`ıS·ûHashAÎoc
(), 
ûÎdim
, 
ûÎs
, 
bbfunc
, 
¡©icIndex
);

197 
	}
}

200 
	$ıS·ûHashDe¡roy
(
ıS·ûHash
 *
hash
)

202 if(
hash
->
bË
è
	`ş—rTabË
(hash);

203 
	`ıä“
(
hash
->
bË
);

205 
	`ıHashS‘F»e
(
hash
->
hªdËS‘
);

207 
	`ıA¼ayF»eEach
(
hash
->
®loÿ‹dBufãrs
, 
ıä“
);

208 
	`ıA¼ayF»e
(
hash
->
®loÿ‹dBufãrs
);

209 
	`ıA¼ayF»e
(
hash
->
poŞedHªdËs
);

210 
	}
}

214 
šlše
 
ıBoŞ


215 
	$cÚšsHªdË
(
ıS·ûHashBš
 *
bš
, 
ıHªdË
 *
hªd
)

217 
bš
){

218 if(
bš
->
hªdË
 =ğ
hªd
è 
ıTrue
;

219 
bš
 = bš->
Ãxt
;

222  
ıF®£
;

223 
	}
}

226 
šlše
 
ıHashV®ue


227 
	$hash_func
(
ıHashV®ue
 
x
, cpHashV®u
y
, cpHashV®u
n
)

229  (
x
*1640531513uÈ^ 
y
*2654435789ulè% 
n
;

230 
	}
}

234 
šlše
 

235 
	$æoÜ_št
(
ıFlßt
 
f
)

237 
i
 = ()
f
;

238  (
f
 < 0.0à&& f !ğ
i
 ? i - 1 : i);

239 
	}
}

241 
šlše
 

242 
	$hashHªdË
(
ıS·ûHash
 *
hash
, 
ıHªdË
 *
hªd
, 
ıBB
 
bb
)

245 
ıFlßt
 
dim
 = 
hash
->
ûÎdim
;

246 
l
 = 
	`æoÜ_št
(
bb
.l/
dim
);

247 
r
 = 
	`æoÜ_št
(
bb
.r/
dim
);

248 
b
 = 
	`æoÜ_št
(
bb
.b/
dim
);

249 
t
 = 
	`æoÜ_št
(
bb
.t/
dim
);

251 
n
 = 
hash
->
numûÎs
;

252 
i
=
l
; i<=
r
; i++){

253 
j
=
b
; j<=
t
; j++){

254 
ıHashV®ue
 
idx
 = 
	`hash_func
(
i
,
j
,
n
);

255 
ıS·ûHashBš
 *
bš
 = 
hash
->
bË
[
idx
];

258 if(
	`cÚšsHªdË
(
bš
, 
hªd
)) ;

260 
	`ıHªdËR‘aš
(
hªd
);

262 
ıS·ûHashBš
 *
ÃwBš
 = 
	`g‘Em±yBš
(
hash
);

263 
ÃwBš
->
hªdË
 = 
hªd
;

264 
ÃwBš
->
Ãxt
 = 
bš
;

265 
hash
->
bË
[
idx
] = 
ÃwBš
;

268 
	}
}

273 
	$ıS·ûHashIn£¹
(
ıS·ûHash
 *
hash
, *
obj
, 
ıHashV®ue
 
hashid
)

275 
ıHªdË
 *
hªd
 = (ıHªdË *)
	`ıHashS‘In£¹
(
hash
->
hªdËS‘
, 
hashid
, 
obj
, (
ıHashS‘T¿nsFunc
)
hªdËS‘T¿ns
, hash);

276 
	`hashHªdË
(
hash
, 
hªd
, hash->
¥©ŸlIndex
.
	`bbfunc
(
obj
));

277 
	}
}

280 
	$ıS·ûHashRehashObjeù
(
ıS·ûHash
 *
hash
, *
obj
, 
ıHashV®ue
 
hashid
)

282 
ıHªdË
 *
hªd
 = (ıHªdË *)
	`ıHashS‘Remove
(
hash
->
hªdËS‘
, 
hashid
, 
obj
);

284 if(
hªd
){

285 
hªd
->
obj
 = 
NULL
;

286 
	`ıHªdËR–—£
(
hªd
, 
hash
->
poŞedHªdËs
);

288 
	`ıS·ûHashIn£¹
(
hash
, 
obj
, 
hashid
);

290 
	}
}

293 
	$»hash_h–³r
(
ıHªdË
 *
hªd
, 
ıS·ûHash
 *
hash
)

295 
	`hashHªdË
(
hash
, 
hªd
, hash->
¥©ŸlIndex
.
	`bbfunc
(hªd->
obj
));

296 
	}
}

299 
	$ıS·ûHashRehash
(
ıS·ûHash
 *
hash
)

301 
	`ş—rTabË
(
hash
);

302 
	`ıHashS‘Each
(
hash
->
hªdËS‘
, (
ıHashS‘I‹¿tÜFunc
)
»hash_h–³r
, hash);

303 
	}
}

306 
	$ıS·ûHashRemove
(
ıS·ûHash
 *
hash
, *
obj
, 
ıHashV®ue
 
hashid
)

308 
ıHªdË
 *
hªd
 = (ıHªdË *)
	`ıHashS‘Remove
(
hash
->
hªdËS‘
, 
hashid
, 
obj
);

310 if(
hªd
){

311 
hªd
->
obj
 = 
NULL
;

312 
	`ıHªdËR–—£
(
hªd
, 
hash
->
poŞedHªdËs
);

314 
	}
}

316 
	s—chCÚ‹xt
 {

317 
ıS·tŸlIndexI‹¿tÜFunc
 
	mfunc
;

318 *
	md©a
;

319 } 
	t—chCÚ‹xt
;

321 
	$—chH–³r
(
ıHªdË
 *
hªd
, 
—chCÚ‹xt
 *
cÚ‹xt
){cÚ‹xt->
	`func
(hªd->
obj
, cÚ‹xt->
d©a
);
	}
}

324 
	$ıS·ûHashEach
(
ıS·ûHash
 *
hash
, 
ıS·tŸlIndexI‹¿tÜFunc
 
func
, *
d©a
)

326 
—chCÚ‹xt
 
cÚ‹xt
 = {
func
, 
d©a
};

327 
	`ıHashS‘Each
(
hash
->
hªdËS‘
, (
ıHashS‘I‹¿tÜFunc
)
—chH–³r
, &
cÚ‹xt
);

328 
	}
}

331 
	$»move_Üphªed_hªdËs
(
ıS·ûHash
 *
hash
, 
ıS·ûHashBš
 **
bš_±r
)

333 
ıS·ûHashBš
 *
bš
 = *
bš_±r
;

334 
bš
){

335 
ıHªdË
 *
hªd
 = 
bš
->
hªdË
;

336 
ıS·ûHashBš
 *
Ãxt
 = 
bš
->next;

338 if(!
hªd
->
obj
){

340 (*
bš_±r
èğ
bš
->
Ãxt
;

341 
	`»cyşeBš
(
hash
, 
bš
);

343 
	`ıHªdËR–—£
(
hªd
, 
hash
->
poŞedHªdËs
);

345 
bš_±r
 = &
bš
->
Ãxt
;

348 
bš
 = 
Ãxt
;

350 
	}
}

354 
šlše
 

355 
	$qu”y_h–³r
(
ıS·ûHash
 *
hash
, 
ıS·ûHashBš
 **
bš_±r
, *
obj
, 
ıS·tŸlIndexQu”yFunc
 
func
, *
d©a
)

357 
»¡¬t
:

358 
ıS·ûHashBš
 *
bš
 = *
bš_±r
; bš; bš = bš->
Ãxt
){

359 
ıHªdË
 *
hªd
 = 
bš
->
hªdË
;

360 *
Ùh”
 = 
hªd
->
obj
;

362 if(
hªd
->
¡amp
 =ğ
hash
->¡am°|| 
obj
 =ğ
Ùh”
){

364 } if(
Ùh”
){

365 
	`func
(
obj
, 
Ùh”
, 0, 
d©a
);

366 
hªd
->
¡amp
 = 
hash
->stamp;

370 
	`»move_Üphªed_hªdËs
(
hash
, 
bš_±r
);

371 
»¡¬t
;

374 
	}
}

377 
	$ıS·ûHashQu”y
(
ıS·ûHash
 *
hash
, *
obj
, 
ıBB
 
bb
, 
ıS·tŸlIndexQu”yFunc
 
func
, *
d©a
)

380 
ıFlßt
 
dim
 = 
hash
->
ûÎdim
;

381 
l
 = 
	`æoÜ_št
(
bb
.l/
dim
);

382 
r
 = 
	`æoÜ_št
(
bb
.r/
dim
);

383 
b
 = 
	`æoÜ_št
(
bb
.b/
dim
);

384 
t
 = 
	`æoÜ_št
(
bb
.t/
dim
);

386 
n
 = 
hash
->
numûÎs
;

387 
ıS·ûHashBš
 **
bË
 = 
hash
->table;

390 
i
=
l
; i<=
r
; i++){

391 
j
=
b
; j<=
t
; j++){

392 
	`qu”y_h–³r
(
hash
, &
bË
[
	`hash_func
(
i
,
j
,
n
)], 
obj
, 
func
, 
d©a
);

396 
hash
->
¡amp
++;

397 
	}
}

400 
	squ”yRehashCÚ‹xt
 {

401 
ıS·ûHash
 *
	mhash
;

402 
ıS·tŸlIndexQu”yFunc
 
	mfunc
;

403 *
	md©a
;

404 } 
	tqu”yRehashCÚ‹xt
;

408 
	$qu”yRehash_h–³r
(
ıHªdË
 *
hªd
, 
qu”yRehashCÚ‹xt
 *
cÚ‹xt
)

410 
ıS·ûHash
 *
hash
 = 
cÚ‹xt
->hash;

411 
ıS·tŸlIndexQu”yFunc
 
func
 = 
cÚ‹xt
->func;

412 *
d©a
 = 
cÚ‹xt
->data;

414 
ıFlßt
 
dim
 = 
hash
->
ûÎdim
;

415 
n
 = 
hash
->
numûÎs
;

417 *
obj
 = 
hªd
->obj;

418 
ıBB
 
bb
 = 
hash
->
¥©ŸlIndex
.
	`bbfunc
(
obj
);

420 
l
 = 
	`æoÜ_št
(
bb
.l/
dim
);

421 
r
 = 
	`æoÜ_št
(
bb
.r/
dim
);

422 
b
 = 
	`æoÜ_št
(
bb
.b/
dim
);

423 
t
 = 
	`æoÜ_št
(
bb
.t/
dim
);

425 
ıS·ûHashBš
 **
bË
 = 
hash
->table;

427 
i
=
l
; i<=
r
; i++){

428 
j
=
b
; j<=
t
; j++){

429 
ıHashV®ue
 
idx
 = 
	`hash_func
(
i
,
j
,
n
);

430 
ıS·ûHashBš
 *
bš
 = 
bË
[
idx
];

432 if(
	`cÚšsHªdË
(
bš
, 
hªd
)) ;

434 
	`ıHªdËR‘aš
(
hªd
);

435 
	`qu”y_h–³r
(
hash
, &
bš
, 
obj
, 
func
, 
d©a
);

437 
ıS·ûHashBš
 *
ÃwBš
 = 
	`g‘Em±yBš
(
hash
);

438 
ÃwBš
->
hªdË
 = 
hªd
;

439 
ÃwBš
->
Ãxt
 = 
bš
;

440 
bË
[
idx
] = 
ÃwBš
;

445 
hash
->
¡amp
++;

446 
	}
}

449 
	$ıS·ûHashRešdexQu”y
(
ıS·ûHash
 *
hash
, 
ıS·tŸlIndexQu”yFunc
 
func
, *
d©a
)

451 
	`ş—rTabË
(
hash
);

453 
qu”yRehashCÚ‹xt
 
cÚ‹xt
 = {
hash
, 
func
, 
d©a
};

454 
	`ıHashS‘Each
(
hash
->
hªdËS‘
, (
ıHashS‘I‹¿tÜFunc
)
qu”yRehash_h–³r
, &
cÚ‹xt
);

456 
	`ıS·tŸlIndexCŞlideStic
((
ıS·tŸlIndex
 *)
hash
, hash->
¥©ŸlIndex
.
¡©icIndex
, 
func
, 
d©a
);

457 
	}
}

459 
šlše
 
ıFlßt


460 
	$£gm’tQu”y_h–³r
(
ıS·ûHash
 *
hash
, 
ıS·ûHashBš
 **
bš_±r
, *
obj
, 
ıS·tŸlIndexSegm’tQu”yFunc
 
func
, *
d©a
)

462 
ıFlßt
 
t
 = 1.0f;

464 
»¡¬t
:

465 
ıS·ûHashBš
 *
bš
 = *
bš_±r
; bš; bš = bš->
Ãxt
){

466 
ıHªdË
 *
hªd
 = 
bš
->
hªdË
;

467 *
Ùh”
 = 
hªd
->
obj
;

470 if(
hªd
->
¡amp
 =ğ
hash
->stamp){

472 } if(
Ùh”
){

473 
t
 = 
	`ıfmš
Ñ, 
	`func
(
obj
, 
Ùh”
, 
d©a
));

474 
hªd
->
¡amp
 = 
hash
->stamp;

478 
	`»move_Üphªed_hªdËs
(
hash
, 
bš_±r
);

479 
»¡¬t
;

483  
t
;

484 
	}
}

488 
	$ıS·ûHashSegm’tQu”y
(
ıS·ûHash
 *
hash
, *
obj
, 
ıVeù
 
a
, cpVeù 
b
, 
ıFlßt
 
t_ex™
, 
ıS·tŸlIndexSegm’tQu”yFunc
 
func
, *
d©a
)

490 
a
 = 
	`ıvmuÉ
×, 1.0f/
hash
->
ûÎdim
);

491 
b
 = 
	`ıvmuÉ
(b, 1.0f/
hash
->
ûÎdim
);

493 
ûÎ_x
 = 
	`æoÜ_št
(
a
.
x
), 
ûÎ_y
 = floÜ_št×.
y
);

495 
ıFlßt
 
t
 = 0;

497 
x_šc
, 
y_šc
;

498 
ıFlßt
 
‹mp_v
, 
‹mp_h
;

500 ià(
b
.
x
 > 
a
.x){

501 
x_šc
 = 1;

502 
‹mp_h
 = (
	`ıfæoÜ
(
a
.
x
 + 1.0f) -‡.x);

504 
x_šc
 = -1;

505 
‹mp_h
 = (
a
.
x
 - 
	`ıfæoÜ
(a.x));

508 ià(
b
.
y
 > 
a
.y){

509 
y_šc
 = 1;

510 
‹mp_v
 = (
	`ıfæoÜ
(
a
.
y
 + 1.0f) -‡.y);

512 
y_šc
 = -1;

513 
‹mp_v
 = (
a
.
y
 - 
	`ıfæoÜ
(a.y));

517 
ıFlßt
 
dx
 = 
	`ıçbs
(
b
.
x
 - 
a
.x), 
dy
 = cpçbs(b.
y
 -‡.y);

518 
ıFlßt
 
dt_dx
 = (
dx
 ? 1.0f/dx : 
INFINITY
), 
dt_dy
 = (
dy
 ? 1.0f/dy : INFINITY);

521 
ıFlßt
 
Ãxt_h
 = (
‹mp_h
 ?emp_h*
dt_dx
 : dt_dx);

522 
ıFlßt
 
Ãxt_v
 = (
‹mp_v
 ?emp_v*
dt_dy
 : dt_dy);

524 
n
 = 
hash
->
numûÎs
;

525 
ıS·ûHashBš
 **
bË
 = 
hash
->table;

527 
t
 < 
t_ex™
){

528 
ıHashV®ue
 
idx
 = 
	`hash_func
(
ûÎ_x
, 
ûÎ_y
, 
n
);

529 
t_ex™
 = 
	`ıfmš
Ñ_ex™, 
	`£gm’tQu”y_h–³r
(
hash
, &
bË
[
idx
], 
obj
, 
func
, 
d©a
));

531 ià(
Ãxt_v
 < 
Ãxt_h
){

532 
ûÎ_y
 +ğ
y_šc
;

533 
t
 = 
Ãxt_v
;

534 
Ãxt_v
 +ğ
dt_dy
;

536 
ûÎ_x
 +ğ
x_šc
;

537 
t
 = 
Ãxt_h
;

538 
Ãxt_h
 +ğ
dt_dx
;

542 
hash
->
¡amp
++;

543 
	}
}

548 
	$ıS·ûHashResize
(
ıS·ûHash
 *
hash
, 
ıFlßt
 
ûÎdim
, 
numûÎs
)

550 if(
hash
->
¥©ŸlIndex
.
kÏss
 !ğ
	`KÏss
()){

551 
	`ıAs£¹W¬n
(
ıF®£
, "Ignoring cpSpaceHashResize() callo‚on-cpSpaceHash spatial index.");

555 
	`ş—rTabË
(
hash
);

557 
hash
->
ûÎdim
 = celldim;

558 
	`ıS·ûHashAÎocTabË
(
hash
, 
	`Ãxt_´ime
(
numûÎs
));

559 
	}
}

562 
	$ıS·ûHashCouÁ
(
ıS·ûHash
 *
hash
)

564  
	`ıHashS‘CouÁ
(
hash
->
hªdËS‘
);

565 
	}
}

568 
	$ıS·ûHashCÚšs
(
ıS·ûHash
 *
hash
, *
obj
, 
ıHashV®ue
 
hashid
)

570  
	`ıHashS‘Fšd
(
hash
->
hªdËS‘
, 
hashid
, 
obj
è!ğ
NULL
;

571 
	}
}

573 
ıS·tŸlIndexCÏss
 
	gkÏss
 = {

574 (
ıS·tŸlIndexDe¡royIm¶
)
ıS·ûHashDe¡roy
,

576 (
ıS·tŸlIndexCouÁIm¶
)
ıS·ûHashCouÁ
,

577 (
ıS·tŸlIndexEachIm¶
)
ıS·ûHashEach
,

578 (
ıS·tŸlIndexCÚšsIm¶
)
ıS·ûHashCÚšs
,

580 (
ıS·tŸlIndexIn£¹Im¶
)
ıS·ûHashIn£¹
,

581 (
ıS·tŸlIndexRemoveIm¶
)
ıS·ûHashRemove
,

583 (
ıS·tŸlIndexRešdexIm¶
)
ıS·ûHashRehash
,

584 (
ıS·tŸlIndexRešdexObjeùIm¶
)
ıS·ûHashRehashObjeù
,

585 (
ıS·tŸlIndexRešdexQu”yIm¶
)
ıS·ûHashRešdexQu”y
,

587 (
ıS·tŸlIndexQu”yIm¶
)
ıS·ûHashQu”y
,

588 (
ıS·tŸlIndexSegm’tQu”yIm¶
)
ıS·ûHashSegm’tQu”y
,

591 
šlše
 
ıS·tŸlIndexCÏss
 *
	$KÏss
(){ &
kÏss
;
	}
}

596 #ifdeà
CP_BBTREE_DEBUG_DRAW


597 
	~"O³nGL/gl.h
"

598 
	~"O³nGL/glu.h
"

599 
	~<GLUT/glut.h
>

602 
	$ıS·ûHashR’d”Debug
(
ıS·tŸlIndex
 *
šdex
)

604 if(
šdex
->
kÏss
 != &klass){

605 
	`ıAs£¹W¬n
(
ıF®£
, "Ignoring cpSpaceHashRenderDebug() callo‚on-spatial hash spatial index.");

609 
ıS·ûHash
 *
hash
 = (ıS·ûHash *)
šdex
;

610 
ıBB
 
bb
 = 
	`ıBBNew
(-320, -240, 320, 240);

612 
ıFlßt
 
dim
 = 
hash
->
ûÎdim
;

613 
n
 = 
hash
->
numûÎs
;

615 
l
 = ()
	`æoÜ
(
bb
.l/
dim
);

616 
r
 = ()
	`æoÜ
(
bb
.r/
dim
);

617 
b
 = ()
	`æoÜ
(
bb
.b/
dim
);

618 
t
 = ()
	`æoÜ
(
bb
.t/
dim
);

620 
i
=
l
; i<=
r
; i++){

621 
j
=
b
; j<=
t
; j++){

622 
ûÎ_couÁ
 = 0;

624 
šdex
 = 
	`hash_func
(
i
,
j
,
n
);

625 
ıS·ûHashBš
 *
bš
 = 
hash
->
bË
[
šdex
]; bš; bš = bš->
Ãxt
)

626 
ûÎ_couÁ
++;

628 
GLæßt
 
v
 = 1.0à- (GLæßt)
ûÎ_couÁ
/10.0f;

629 
	`glCŞÜ3f
(
v
,v,v);

630 
	`glReùf
(
i
*
dim
, 
j
*dim, (i + 1)*dim, (j + 1)*dim);

633 
	}
}

	@../src/chipmunk/cpSpaceQuery.c

22 
	~"chmunk/chmunk_´iv©e.h
"

26 
	sPoštQu”yCÚ‹xt
 {

27 
ıVeù
 
	mpošt
;

28 
ıFlßt
 
	mmaxDi¡ªû
;

29 
ıSh­eF‹r
 
	mf‹r
;

30 
ıS·ûPoštQu”yFunc
 
	mfunc
;

33 
ıCŞlisiÚID


34 
	$N—»¡PoštQu”y
(
PoštQu”yCÚ‹xt
 *
cÚ‹xt
, 
ıSh­e
 *
sh­e
, 
ıCŞlisiÚID
 
id
, *
d©a
)

37 !
	`ıSh­eF‹rRejeù
(
sh­e
->
f‹r
, 
cÚ‹xt
->filter)

39 
ıPoštQu”yInfo
 
šfo
;

40 
	`ıSh­ePoštQu”y
(
sh­e
, 
cÚ‹xt
->
pošt
, &
šfo
);

42 if(
šfo
.
sh­e
 && info.
di¡ªû
 < 
cÚ‹xt
->
maxDi¡ªû
ècÚ‹xt->
	`func
(sh­e, info.
pošt
, info.di¡ªû, info.
g¿d›Á
, 
d©a
);

45  
id
;

46 
	}
}

49 
	$ıS·ûPoštQu”y
(
ıS·û
 *
¥aû
, 
ıVeù
 
pošt
, 
ıFlßt
 
maxDi¡ªû
, 
ıSh­eF‹r
 
f‹r
, 
ıS·ûPoštQu”yFunc
 
func
, *
d©a
)

51 
PoštQu”yCÚ‹xt
 
cÚ‹xt
 = {
pošt
, 
maxDi¡ªû
, 
f‹r
, 
func
};

52 
ıBB
 
bb
 = 
	`ıBBNewFÜCœşe
(
pošt
, 
	`ıfmax
(
maxDi¡ªû
, 0.0f));

54 
	`ıS·ûLock
(
¥aû
); {

55 
	`ıS·tŸlIndexQu”y
(
¥aû
->
dyÇmicSh­es
, &
cÚ‹xt
, 
bb
, (
ıS·tŸlIndexQu”yFunc
)
N—»¡PoštQu”y
, 
d©a
);

56 
	`ıS·tŸlIndexQu”y
(
¥aû
->
¡©icSh­es
, &
cÚ‹xt
, 
bb
, (
ıS·tŸlIndexQu”yFunc
)
N—»¡PoštQu”y
, 
d©a
);

57 } 
	`ıS·ûUÆock
(
¥aû
, 
ıTrue
);

58 
	}
}

60 
ıCŞlisiÚID


61 
	$N—»¡PoštQu”yN—»¡
(
PoštQu”yCÚ‹xt
 *
cÚ‹xt
, 
ıSh­e
 *
sh­e
, 
ıCŞlisiÚID
 
id
, 
ıPoštQu”yInfo
 *
out
)

64 !
	`ıSh­eF‹rRejeù
(
sh­e
->
f‹r
, 
cÚ‹xt
->f‹rè&& !sh­e->
£nsÜ


66 
ıPoštQu”yInfo
 
šfo
;

67 
	`ıSh­ePoštQu”y
(
sh­e
, 
cÚ‹xt
->
pošt
, &
šfo
);

69 if(
šfo
.
di¡ªû
 < 
out
->distance) (*out) = info;

72  
id
;

73 
	}
}

75 
ıSh­e
 *

76 
	$ıS·ûPoštQu”yN—»¡
(
ıS·û
 *
¥aû
, 
ıVeù
 
pošt
, 
ıFlßt
 
maxDi¡ªû
, 
ıSh­eF‹r
 
f‹r
, 
ıPoštQu”yInfo
 *
out
)

78 
ıPoštQu”yInfo
 
šfo
 = {
NULL
, 
ıvz”o
, 
maxDi¡ªû
, cpvzero};

79 if(
out
){

80 (*
out
èğ
šfo
;

82 
out
 = &
šfo
;

85 
PoštQu”yCÚ‹xt
 
cÚ‹xt
 = {

86 
pošt
, 
maxDi¡ªû
,

87 
f‹r
,

88 
NULL


91 
ıBB
 
bb
 = 
	`ıBBNewFÜCœşe
(
pošt
, 
	`ıfmax
(
maxDi¡ªû
, 0.0f));

92 
	`ıS·tŸlIndexQu”y
(
¥aû
->
dyÇmicSh­es
, &
cÚ‹xt
, 
bb
, (
ıS·tŸlIndexQu”yFunc
)
N—»¡PoštQu”yN—»¡
, 
out
);

93 
	`ıS·tŸlIndexQu”y
(
¥aû
->
¡©icSh­es
, &
cÚ‹xt
, 
bb
, (
ıS·tŸlIndexQu”yFunc
)
N—»¡PoštQu”yN—»¡
, 
out
);

95  (
ıSh­e
 *)
out
->
sh­e
;

96 
	}
}

101 
	sSegm’tQu”yCÚ‹xt
 {

102 
ıVeù
 
	m¡¬t
, 
	m’d
;

103 
ıFlßt
 
	m¿dius
;

104 
ıSh­eF‹r
 
	mf‹r
;

105 
ıS·ûSegm’tQu”yFunc
 
	mfunc
;

108 
ıFlßt


109 
	$Segm’tQu”y
(
Segm’tQu”yCÚ‹xt
 *
cÚ‹xt
, 
ıSh­e
 *
sh­e
, *
d©a
)

111 
ıSegm’tQu”yInfo
 
šfo
;

114 !
	`ıSh­eF‹rRejeù
(
sh­e
->
f‹r
, 
cÚ‹xt
->filter) &&

115 
	`ıSh­eSegm’tQu”y
(
sh­e
, 
cÚ‹xt
->
¡¬t
, cÚ‹xt->
’d
, cÚ‹xt->
¿dius
, &
šfo
)

117 
cÚ‹xt
->
	`func
(
sh­e
, 
šfo
.
pošt
, info.
nÜm®
, info.
®pha
, 
d©a
);

121 
	}
}

124 
	$ıS·ûSegm’tQu”y
(
ıS·û
 *
¥aû
, 
ıVeù
 
¡¬t
, cpVeù 
’d
, 
ıFlßt
 
¿dius
, 
ıSh­eF‹r
 
f‹r
, 
ıS·ûSegm’tQu”yFunc
 
func
, *
d©a
)

126 
Segm’tQu”yCÚ‹xt
 
cÚ‹xt
 = {

127 
¡¬t
, 
’d
,

128 
¿dius
,

129 
f‹r
,

130 
func
,

133 
	`ıS·ûLock
(
¥aû
); {

134 
	`ıS·tŸlIndexSegm’tQu”y
(
¥aû
->
¡©icSh­es
, &
cÚ‹xt
, 
¡¬t
, 
’d
, 1.0f, (
ıS·tŸlIndexSegm’tQu”yFunc
)
Segm’tQu”y
, 
d©a
);

135 
	`ıS·tŸlIndexSegm’tQu”y
(
¥aû
->
dyÇmicSh­es
, &
cÚ‹xt
, 
¡¬t
, 
’d
, 1.0f, (
ıS·tŸlIndexSegm’tQu”yFunc
)
Segm’tQu”y
, 
d©a
);

136 } 
	`ıS·ûUÆock
(
¥aû
, 
ıTrue
);

137 
	}
}

139 
ıFlßt


140 
	$Segm’tQu”yFœ¡
(
Segm’tQu”yCÚ‹xt
 *
cÚ‹xt
, 
ıSh­e
 *
sh­e
, 
ıSegm’tQu”yInfo
 *
out
)

142 
ıSegm’tQu”yInfo
 
šfo
;

145 !
	`ıSh­eF‹rRejeù
(
sh­e
->
f‹r
, 
cÚ‹xt
->f‹rè&& !sh­e->
£nsÜ
 &&

146 
	`ıSh­eSegm’tQu”y
(
sh­e
, 
cÚ‹xt
->
¡¬t
, cÚ‹xt->
’d
, cÚ‹xt->
¿dius
, &
šfo
) &&

147 
šfo
.
®pha
 < 
out
->alpha

149 (*
out
èğ
šfo
;

152  
out
->
®pha
;

153 
	}
}

155 
ıSh­e
 *

156 
	$ıS·ûSegm’tQu”yFœ¡
(
ıS·û
 *
¥aû
, 
ıVeù
 
¡¬t
, cpVeù 
’d
, 
ıFlßt
 
¿dius
, 
ıSh­eF‹r
 
f‹r
, 
ıSegm’tQu”yInfo
 *
out
)

158 
ıSegm’tQu”yInfo
 
šfo
 = {
NULL
, 
’d
, 
ıvz”o
, 1.0f};

159 if(
out
){

160 (*
out
èğ
šfo
;

162 
out
 = &
šfo
;

165 
Segm’tQu”yCÚ‹xt
 
cÚ‹xt
 = {

166 
¡¬t
, 
’d
,

167 
¿dius
,

168 
f‹r
,

169 
NULL


172 
	`ıS·tŸlIndexSegm’tQu”y
(
¥aû
->
¡©icSh­es
, &
cÚ‹xt
, 
¡¬t
, 
’d
, 1.0f, (
ıS·tŸlIndexSegm’tQu”yFunc
)
Segm’tQu”yFœ¡
, 
out
);

173 
	`ıS·tŸlIndexSegm’tQu”y
(
¥aû
->
dyÇmicSh­es
, &
cÚ‹xt
, 
¡¬t
, 
’d
, 
out
->
®pha
, (
ıS·tŸlIndexSegm’tQu”yFunc
)
Segm’tQu”yFœ¡
, out);

175  (
ıSh­e
 *)
out
->
sh­e
;

176 
	}
}

180 
	sBBQu”yCÚ‹xt
 {

181 
ıBB
 
	mbb
;

182 
ıSh­eF‹r
 
	mf‹r
;

183 
ıS·ûBBQu”yFunc
 
	mfunc
;

186 
ıCŞlisiÚID


187 
	$BBQu”y
(
BBQu”yCÚ‹xt
 *
cÚ‹xt
, 
ıSh­e
 *
sh­e
, 
ıCŞlisiÚID
 
id
, *
d©a
)

190 !
	`ıSh­eF‹rRejeù
(
sh­e
->
f‹r
, 
cÚ‹xt
->filter) &&

191 
	`ıBBIÁ”£ùs
(
cÚ‹xt
->
bb
, 
sh­e
->bb)

193 
cÚ‹xt
->
	`func
(
sh­e
, 
d©a
);

196  
id
;

197 
	}
}

200 
	$ıS·ûBBQu”y
(
ıS·û
 *
¥aû
, 
ıBB
 
bb
, 
ıSh­eF‹r
 
f‹r
, 
ıS·ûBBQu”yFunc
 
func
, *
d©a
)

202 
BBQu”yCÚ‹xt
 
cÚ‹xt
 = {
bb
, 
f‹r
, 
func
};

204 
	`ıS·ûLock
(
¥aû
); {

205 
	`ıS·tŸlIndexQu”y
(
¥aû
->
dyÇmicSh­es
, &
cÚ‹xt
, 
bb
, (
ıS·tŸlIndexQu”yFunc
)
BBQu”y
, 
d©a
);

206 
	`ıS·tŸlIndexQu”y
(
¥aû
->
¡©icSh­es
, &
cÚ‹xt
, 
bb
, (
ıS·tŸlIndexQu”yFunc
)
BBQu”y
, 
d©a
);

207 } 
	`ıS·ûUÆock
(
¥aû
, 
ıTrue
);

208 
	}
}

212 
	sSh­eQu”yCÚ‹xt
 {

213 
ıS·ûSh­eQu”yFunc
 
	mfunc
;

214 *
	md©a
;

215 
ıBoŞ
 
	mªyCŞlisiÚ
;

219 
ıCŞlisiÚID


220 
	$Sh­eQu”y
(
ıSh­e
 *
a
, cpSh­*
b
, 
ıCŞlisiÚID
 
id
, 
Sh­eQu”yCÚ‹xt
 *
cÚ‹xt
)

222 if(
	`ıSh­eF‹rRejeù
(
a
->
f‹r
, 
b
->f‹rè||‡ =ğbè 
id
;

224 
ıCÚùPoštS‘
 
£t
 = 
	`ıSh­esCŞlide
(
a
, 
b
);

225 if(
£t
.
couÁ
){

226 if(
cÚ‹xt
->
func
ècÚ‹xt->
	`func
(
b
, &
£t
, cÚ‹xt->
d©a
);

227 
cÚ‹xt
->
ªyCŞlisiÚ
 = !(
a
->
£nsÜ
 || 
b
->sensor);

230  
id
;

231 
	}
}

233 
ıBoŞ


234 
	$ıS·ûSh­eQu”y
(
ıS·û
 *
¥aû
, 
ıSh­e
 *
sh­e
, 
ıS·ûSh­eQu”yFunc
 
func
, *
d©a
)

236 
ıBody
 *
body
 = 
sh­e
->body;

237 
ıBB
 
bb
 = (
body
 ? 
	`ıSh­eUpd©e
(
sh­e
, body->
ŒªsfÜm
) : shape->bb);

238 
Sh­eQu”yCÚ‹xt
 
cÚ‹xt
 = {
func
, 
d©a
, 
ıF®£
};

240 
	`ıS·ûLock
(
¥aû
); {

241 
	`ıS·tŸlIndexQu”y
(
¥aû
->
dyÇmicSh­es
, 
sh­e
, 
bb
, (
ıS·tŸlIndexQu”yFunc
)
Sh­eQu”y
, &
cÚ‹xt
);

242 
	`ıS·tŸlIndexQu”y
(
¥aû
->
¡©icSh­es
, 
sh­e
, 
bb
, (
ıS·tŸlIndexQu”yFunc
)
Sh­eQu”y
, &
cÚ‹xt
);

243 } 
	`ıS·ûUÆock
(
¥aû
, 
ıTrue
);

245  
cÚ‹xt
.
ªyCŞlisiÚ
;

246 
	}
}

	@../src/chipmunk/cpSpaceStep.c

22 
	~"chmunk/chmunk_´iv©e.h
"

26 
ıPo¡S‹pC®lback
 *

27 
	$ıS·ûG‘Po¡S‹pC®lback
(
ıS·û
 *
¥aû
, *
key
)

29 
ıA¼ay
 *
¬r
 = 
¥aû
->
po¡S‹pC®lbacks
;

30 
i
=0; i<
¬r
->
num
; i++){

31 
ıPo¡S‹pC®lback
 *
ÿÎback
 = (ıPo¡S‹pC®lback *)
¬r
->¬r[
i
];

32 if(
ÿÎback
 && c®lback->
key
 == key)  callback;

35  
NULL
;

36 
	}
}

38 
	$Po¡S‹pDoNÙhšg
(
ıS·û
 *
¥aû
, *
obj
, *
d©a
){
	}
}

40 
ıBoŞ


41 
	$ıS·ûAddPo¡S‹pC®lback
(
ıS·û
 *
¥aû
, 
ıPo¡S‹pFunc
 
func
, *
key
, *
d©a
)

43 
	`ıAs£¹W¬n
(
¥aû
->
locked
,

47 if(!
	`ıS·ûG‘Po¡S‹pC®lback
(
¥aû
, 
key
)){

48 
ıPo¡S‹pC®lback
 *
ÿÎback
 = (ıPo¡S‹pC®lback *)
	`ıÿÎoc
(1, (cpPostStepCallback));

49 
ÿÎback
->
func
 = (funø? funø: 
Po¡S‹pDoNÙhšg
);

50 
ÿÎback
->
key
 = key;

51 
ÿÎback
->
d©a
 = data;

53 
	`ıA¼ayPush
(
¥aû
->
po¡S‹pC®lbacks
, 
ÿÎback
);

54  
ıTrue
;

56  
ıF®£
;

58 
	}
}

63 
	$ıS·ûLock
(
ıS·û
 *
¥aû
)

65 
¥aû
->
locked
++;

66 
	}
}

69 
	$ıS·ûUÆock
(
ıS·û
 *
¥aû
, 
ıBoŞ
 
runPo¡S‹p
)

71 
¥aû
->
locked
--;

72 
	`ıAs£¹H¬d
(
¥aû
->
locked
 >= 0, "Internal Error: Space†ock underflow.");

74 if(
¥aû
->
locked
 == 0){

75 
ıA¼ay
 *
wakšg
 = 
¥aû
->
rou£dBod›s
;

77 
i
=0, 
couÁ
=
wakšg
->
num
; i<count; i++){

78 
	`ıS·ûAùiv©eBody
(
¥aû
, (
ıBody
 *)
wakšg
->
¬r
[
i
]);

79 
wakšg
->
¬r
[
i
] = 
NULL
;

82 
wakšg
->
num
 = 0;

84 if(
¥aû
->
locked
 =ğ0 && 
runPo¡S‹p
 && !¥aû->
skPo¡S‹p
){

85 
¥aû
->
skPo¡S‹p
 = 
ıTrue
;

87 
ıA¼ay
 *
¬r
 = 
¥aû
->
po¡S‹pC®lbacks
;

88 
i
=0; i<
¬r
->
num
; i++){

89 
ıPo¡S‹pC®lback
 *
ÿÎback
 = (ıPo¡S‹pC®lback *)
¬r
->¬r[
i
];

90 
ıPo¡S‹pFunc
 
func
 = 
ÿÎback
->func;

94 
ÿÎback
->
func
 = 
NULL
;

95 if(
func
è
	`func
(
¥aû
, 
ÿÎback
->
key
, c®lback->
d©a
);

97 
¬r
->¬r[
i
] = 
NULL
;

98 
	`ıä“
(
ÿÎback
);

101 
¬r
->
num
 = 0;

102 
¥aû
->
skPo¡S‹p
 = 
ıF®£
;

105 
	}
}

109 
	sıCÚùBufãrH—d”
 {

110 
ıTime¡amp
 
	m¡amp
;

111 
ıCÚùBufãrH—d”
 *
	mÃxt
;

112 
	mnumCÚùs
;

115 
	#CP_CONTACTS_BUFFER_SIZE
 ((
CP_BUFFER_BYTES
 - (
ıCÚùBufãrH—d”
))/(
ıCÚù
))

	)

116 
	sıCÚùBufãr
 {

117 
ıCÚùBufãrH—d”
 
	mh—d”
;

118 
ıCÚù
 
	mcÚùs
[
CP_CONTACTS_BUFFER_SIZE
];

119 } 
	tıCÚùBufãr
;

121 
ıCÚùBufãrH—d”
 *

122 
	$ıS·ûAÎocCÚùBufãr
(
ıS·û
 *
¥aû
)

124 
ıCÚùBufãr
 *
bufãr
 = (ıCÚùBufã¸*)
	`ıÿÎoc
(1, (cpContactBuffer));

125 
	`ıA¼ayPush
(
¥aû
->
®loÿ‹dBufãrs
, 
bufãr
);

126  (
ıCÚùBufãrH—d”
 *)
bufãr
;

127 
	}
}

129 
ıCÚùBufãrH—d”
 *

130 
	$ıCÚùBufãrH—d”In™
(
ıCÚùBufãrH—d”
 *
h—d”
, 
ıTime¡amp
 
¡amp
, cpCÚùBufãrH—d” *
¥liû
)

132 
h—d”
->
¡amp
 = stamp;

133 
h—d”
->
Ãxt
 = (
¥liû
 ? splice->next : header);

134 
h—d”
->
numCÚùs
 = 0;

136  
h—d”
;

137 
	}
}

140 
	$ıS·ûPushF»shCÚùBufãr
(
ıS·û
 *
¥aû
)

142 
ıTime¡amp
 
¡amp
 = 
¥aû
->stamp;

144 
ıCÚùBufãrH—d”
 *
h—d
 = 
¥aû
->
cÚùBufãrsH—d
;

146 if(!
h—d
){

148 
¥aû
->
cÚùBufãrsH—d
 = 
	`ıCÚùBufãrH—d”In™
(
	`ıS·ûAÎocCÚùBufãr
(¥aû), 
¡amp
, 
NULL
);

149 } if(
¡amp
 - 
h—d
->
Ãxt
->¡am°> 
¥aû
->
cŞlisiÚP”si¡’û
){

151 
ıCÚùBufãrH—d”
 *

 = 
h—d
->
Ãxt
;

152 
¥aû
->
cÚùBufãrsH—d
 = 
	`ıCÚùBufãrH—d”In™
(

, 
¡amp
,ail);

155 
ıCÚùBufãrH—d”
 *
bufãr
 = 
	`ıCÚùBufãrH—d”In™
(
	`ıS·ûAÎocCÚùBufãr
(
¥aû
), 
¡amp
, 
h—d
);

156 
¥aû
->
cÚùBufãrsH—d
 = 
h—d
->
Ãxt
 = 
bufãr
;

158 
	}
}

161 
ıCÚù
 *

162 
	$ıCÚùBufãrG‘A¼ay
(
ıS·û
 *
¥aû
)

164 if(
¥aû
->
cÚùBufãrsH—d
->
numCÚùs
 + 
CP_MAX_CONTACTS_PER_ARBITER
 > 
CP_CONTACTS_BUFFER_SIZE
){

166 
	`ıS·ûPushF»shCÚùBufãr
(
¥aû
);

169 
ıCÚùBufãrH—d”
 *
h—d
 = 
¥aû
->
cÚùBufãrsH—d
;

170  ((
ıCÚùBufãr
 *)
h—d
)->
cÚùs
 + h—d->
numCÚùs
;

171 
	}
}

174 
	$ıS·ûPushCÚùs
(
ıS·û
 *
¥aû
, 
couÁ
)

176 
	`ıAs£¹H¬d
(
couÁ
 <ğ
CP_MAX_CONTACTS_PER_ARBITER
, "Internal Error: Contact buffer overflow!");

177 
¥aû
->
cÚùBufãrsH—d
->
numCÚùs
 +ğ
couÁ
;

178 
	}
}

181 
	$ıS·ûPİCÚùs
(
ıS·û
 *
¥aû
, 
couÁ
){

182 
¥aû
->
cÚùBufãrsH—d
->
numCÚùs
 -ğ
couÁ
;

183 
	}
}

188 
	$ıS·ûArb™”S‘T¿ns
(
ıSh­e
 **
sh­es
, 
ıS·û
 *
¥aû
)

190 if(
¥aû
->
poŞedArb™”s
->
num
 == 0){

192 
couÁ
 = 
CP_BUFFER_BYTES
/(
ıArb™”
);

193 
	`ıAs£¹H¬d
(
couÁ
, "Internal Error: Buffer sizeoo small.");

195 
ıArb™”
 *
bufãr
 = (ıArb™” *)
	`ıÿÎoc
(1, 
CP_BUFFER_BYTES
);

196 
	`ıA¼ayPush
(
¥aû
->
®loÿ‹dBufãrs
, 
bufãr
);

198 
i
=0; i<
couÁ
; i++è
	`ıA¼ayPush
(
¥aû
->
poŞedArb™”s
, 
bufãr
 + i);

201  
	`ıArb™”In™
((
ıArb™”
 *)
	`ıA¼ayPİ
(
¥aû
->
poŞedArb™”s
), 
sh­es
[0], shapes[1]);

202 
	}
}

204 
šlše
 
ıBoŞ


205 
	$Qu”yRejeùCÚ¡¿št
(
ıBody
 *
a
, cpBody *
b
)

207 
	`CP_BODY_FOREACH_CONSTRAINT
(
a
, 
cÚ¡¿št
){

209 !
cÚ¡¿št
->
cŞlideBod›s
 && (

210 (
cÚ¡¿št
->
a
 =ğ¨&& cÚ¡¿št->
b
 == b) ||

211 (
cÚ¡¿št
->
a
 =ğ
b
 && constraint->b ==‡)

213 è 
ıTrue
;

216  
ıF®£
;

217 
	}
}

219 
šlše
 
ıBoŞ


220 
	$Qu”yRejeù
(
ıSh­e
 *
a
, cpSh­*
b
)

224 !
	`ıBBIÁ”£ùs
(
a
->
bb
, 
b
->bb)

226 || 
a
->
body
 =ğ
b
->body

228 || 
	`ıSh­eF‹rRejeù
(
a
->
f‹r
, 
b
->filter)

230 || 
	`Qu”yRejeùCÚ¡¿št
(
a
->
body
, 
b
->body)

232 
	}
}

235 
ıCŞlisiÚID


236 
	$ıS·ûCŞlideSh­es
(
ıSh­e
 *
a
, cpSh­*
b
, 
ıCŞlisiÚID
 
id
, 
ıS·û
 *
¥aû
)

239 if(
	`Qu”yRejeù
(
a
,
b
)è 
id
;

242 
ıCŞlisiÚInfo
 
šfo
 = 
	`ıCŞlide
(
a
, 
b
, 
id
, 
	`ıCÚùBufãrG‘A¼ay
(
¥aû
));

244 if(
šfo
.
couÁ
 =ğ0è info.
id
;

245 
	`ıS·ûPushCÚùs
(
¥aû
, 
šfo
.
couÁ
);

249 cÚ¡ 
ıSh­e
 *
sh­e_·œ
[] = {
šfo
.
a
, info.
b
};

250 
ıHashV®ue
 
¬bHashID
 = 
	`CP_HASH_PAIR
((ıHashV®ue)
šfo
.
a
, (ıHashV®ue)šfo.
b
);

251 
ıArb™”
 *
¬b
 = (ıArb™” *)
	`ıHashS‘In£¹
(
¥aû
->
ÿchedArb™”s
, 
¬bHashID
, 
sh­e_·œ
, (
ıHashS‘T¿nsFunc
)
ıS·ûArb™”S‘T¿ns
, space);

252 
	`ıArb™”Upd©e
(
¬b
, &
šfo
, 
¥aû
);

254 
ıCŞlisiÚHªdËr
 *
hªdËr
 = 
¬b
->handler;

257 if(
¬b
->
¡©e
 =ğ
CP_ARBITER_STATE_FIRST_COLLISION
 && !
hªdËr
->
	`begšFunc
×rb, 
¥aû
, hªdËr->
u£rD©a
)){

258 
	`ıArb™”IgnÜe
(
¬b
);

263 (
¬b
->
¡©e
 !ğ
CP_ARBITER_STATE_IGNORE
) &&

265 
hªdËr
->
	`´eSŞveFunc
(
¬b
, 
¥aû
, hªdËr->
u£rD©a
) &&

267 
¬b
->
¡©e
 !ğ
CP_ARBITER_STATE_IGNORE
 &&

269 !(
a
->
£nsÜ
 || 
b
->sensor) &&

272 !(
a
->
body
->
m
 =ğ
INFINITY
 && 
b
->body->m == INFINITY)

274 
	`ıA¼ayPush
(
¥aû
->
¬b™”s
, 
¬b
);

276 
	`ıS·ûPİCÚùs
(
¥aû
, 
šfo
.
couÁ
);

278 
¬b
->
cÚùs
 = 
NULL
;

279 
¬b
->
couÁ
 = 0;

283 if(
¬b
->
¡©e
 !ğ
CP_ARBITER_STATE_IGNORE
è¬b->¡©ğ
CP_ARBITER_STATE_NORMAL
;

287 
¬b
->
¡amp
 = 
¥aû
->stamp;

288  
šfo
.
id
;

289 
	}
}

292 
ıBoŞ


293 
	$ıS·ûArb™”S‘F‹r
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
)

295 
ıTime¡amp
 
ticks
 = 
¥aû
->
¡amp
 - 
¬b
->stamp;

297 
ıBody
 *
a
 = 
¬b
->
body_a
, *
b
 =‡rb->
body_b
;

303 (
	`ıBodyG‘Ty³
(
a
è=ğ
CP_BODY_TYPE_STATIC
 || 
	`ıBodyIsSË•šg
(a)) &&

304 (
	`ıBodyG‘Ty³
(
b
è=ğ
CP_BODY_TYPE_STATIC
 || 
	`ıBodyIsSË•šg
(b))

306  
ıTrue
;

310 if(
ticks
 >ğ1 && 
¬b
->
¡©e
 !ğ
CP_ARBITER_STATE_CACHED
){

311 
¬b
->
¡©e
 = 
CP_ARBITER_STATE_CACHED
;

312 
ıCŞlisiÚHªdËr
 *
hªdËr
 = 
¬b
->handler;

313 
hªdËr
->
	`£·¿‹Func
(
¬b
, 
¥aû
, hªdËr->
u£rD©a
);

316 if(
ticks
 >ğ
¥aû
->
cŞlisiÚP”si¡’û
){

317 
¬b
->
cÚùs
 = 
NULL
;

318 
¬b
->
couÁ
 = 0;

320 
	`ıA¼ayPush
(
¥aû
->
poŞedArb™”s
, 
¬b
);

321  
ıF®£
;

324  
ıTrue
;

325 
	}
}

330 
	$ıSh­eUpd©eFunc
(
ıSh­e
 *
sh­e
, *
unu£d
)

332 
	`ıSh­eCacheBB
(
sh­e
);

333 
	}
}

336 
	$ıS·ûS‹p
(
ıS·û
 *
¥aû
, 
ıFlßt
 
dt
)

339 if(
dt
 == 0.0f) ;

341 
¥aû
->
¡amp
++;

343 
ıFlßt
 
´ev_dt
 = 
¥aû
->
cu¼_dt
;

344 
¥aû
->
cu¼_dt
 = 
dt
;

346 
ıA¼ay
 *
bod›s
 = 
¥aû
->
dyÇmicBod›s
;

347 
ıA¼ay
 *
cÚ¡¿šts
 = 
¥aû
->constraints;

348 
ıA¼ay
 *
¬b™”s
 = 
¥aû
->arbiters;

351 
i
=0; i<
¬b™”s
->
num
; i++){

352 
ıArb™”
 *
¬b
 = (ıArb™” *)
¬b™”s
->
¬r
[
i
];

353 
¬b
->
¡©e
 = 
CP_ARBITER_STATE_NORMAL
;

356 if(!
	`ıBodyIsSË•šg
(
¬b
->
body_a
è&& !ıBodyIsSË•šg×rb->
body_b
)){

357 
	`ıArb™”UÁh»ad
(
¬b
);

360 
¬b™”s
->
num
 = 0;

362 
	`ıS·ûLock
(
¥aû
); {

364 
i
=0; i<
bod›s
->
num
; i++){

365 
ıBody
 *
body
 = (ıBody *)
bod›s
->
¬r
[
i
];

366 
body
->
	`pos™iÚ_func
(body, 
dt
);

370 
	`ıS·ûPushF»shCÚùBufãr
(
¥aû
);

371 
	`ıS·tŸlIndexEach
(
¥aû
->
dyÇmicSh­es
, (
ıS·tŸlIndexI‹¿tÜFunc
)
ıSh­eUpd©eFunc
, 
NULL
);

372 
	`ıS·tŸlIndexRešdexQu”y
(
¥aû
->
dyÇmicSh­es
, (
ıS·tŸlIndexQu”yFunc
)
ıS·ûCŞlideSh­es
, space);

373 } 
	`ıS·ûUÆock
(
¥aû
, 
ıF®£
);

376 
	`ıS·ûProûssCompÚ’ts
(
¥aû
, 
dt
);

378 
	`ıS·ûLock
(
¥aû
); {

380 
	`ıHashS‘F‹r
(
¥aû
->
ÿchedArb™”s
, (
ıHashS‘F‹rFunc
)
ıS·ûArb™”S‘F‹r
, space);

383 
ıFlßt
 
¦İ
 = 
¥aû
->
cŞlisiÚSlİ
;

384 
ıFlßt
 
bŸsCÛf
 = 1.0à- 
	`ıåow
(
¥aû
->
cŞlisiÚBŸs
, 
dt
);

385 
i
=0; i<
¬b™”s
->
num
; i++){

386 
	`ıArb™”P»S‹p
((
ıArb™”
 *)
¬b™”s
->
¬r
[
i
], 
dt
, 
¦İ
, 
bŸsCÛf
);

389 
i
=0; i<
cÚ¡¿šts
->
num
; i++){

390 
ıCÚ¡¿št
 *
cÚ¡¿št
 = (ıCÚ¡¿šˆ*)
cÚ¡¿šts
->
¬r
[
i
];

392 
ıCÚ¡¿štP»SŞveFunc
 
´eSŞve
 = 
cÚ¡¿št
->preSolve;

393 if(
´eSŞve
è
	`´eSŞve
(
cÚ¡¿št
, 
¥aû
);

395 
cÚ¡¿št
->
kÏss
->
	`´eS‹p
(cÚ¡¿št, 
dt
);

399 
ıFlßt
 
dampšg
 = 
	`ıåow
(
¥aû
->dampšg, 
dt
);

400 
ıVeù
 
g¿v™y
 = 
¥aû
->gravity;

401 
i
=0; i<
bod›s
->
num
; i++){

402 
ıBody
 *
body
 = (ıBody *)
bod›s
->
¬r
[
i
];

403 
body
->
	`v–oc™y_func
(body, 
g¿v™y
, 
dampšg
, 
dt
);

407 
ıFlßt
 
dt_cÛf
 = (
´ev_dt
 =ğ0.0à? 0.0à: 
dt
/prev_dt);

408 
i
=0; i<
¬b™”s
->
num
; i++){

409 
	`ıArb™”AµlyCachedImpul£
((
ıArb™”
 *)
¬b™”s
->
¬r
[
i
], 
dt_cÛf
);

412 
i
=0; i<
cÚ¡¿šts
->
num
; i++){

413 
ıCÚ¡¿št
 *
cÚ¡¿št
 = (ıCÚ¡¿šˆ*)
cÚ¡¿šts
->
¬r
[
i
];

414 
cÚ¡¿št
->
kÏss
->
	`­¶yCachedImpul£
(cÚ¡¿št, 
dt_cÛf
);

418 
i
=0; i<
¥aû
->
™”©iÚs
; i++){

419 
j
=0; j<
¬b™”s
->
num
; j++){

420 
	`ıArb™”AµlyImpul£
((
ıArb™”
 *)
¬b™”s
->
¬r
[
j
]);

423 
j
=0; j<
cÚ¡¿šts
->
num
; j++){

424 
ıCÚ¡¿št
 *
cÚ¡¿št
 = (ıCÚ¡¿šˆ*)
cÚ¡¿šts
->
¬r
[
j
];

425 
cÚ¡¿št
->
kÏss
->
	`­¶yImpul£
(cÚ¡¿št, 
dt
);

430 
i
=0; i<
cÚ¡¿šts
->
num
; i++){

431 
ıCÚ¡¿št
 *
cÚ¡¿št
 = (ıCÚ¡¿šˆ*)
cÚ¡¿šts
->
¬r
[
i
];

433 
ıCÚ¡¿štPo¡SŞveFunc
 
po¡SŞve
 = 
cÚ¡¿št
->postSolve;

434 if(
po¡SŞve
è
	`po¡SŞve
(
cÚ¡¿št
, 
¥aû
);

438 
i
=0; i<
¬b™”s
->
num
; i++){

439 
ıArb™”
 *
¬b
 = (ıArb™” *è
¬b™”s
->
¬r
[
i
];

441 
ıCŞlisiÚHªdËr
 *
hªdËr
 = 
¬b
->handler;

442 
hªdËr
->
	`po¡SŞveFunc
(
¬b
, 
¥aû
, hªdËr->
u£rD©a
);

444 } 
	`ıS·ûUÆock
(
¥aû
, 
ıTrue
);

445 
	}
}

	@../src/chipmunk/cpSpatialIndex.c

22 
	~"chmunk/chmunk_´iv©e.h
"

25 
	$ıS·tŸlIndexF»e
(
ıS·tŸlIndex
 *
šdex
)

27 if(
šdex
){

28 
	`ıS·tŸlIndexDe¡roy
(
šdex
);

29 
	`ıä“
(
šdex
);

31 
	}
}

33 
ıS·tŸlIndex
 *

34 
	$ıS·tŸlIndexIn™
(
ıS·tŸlIndex
 *
šdex
, 
ıS·tŸlIndexCÏss
 *
kÏss
, 
ıS·tŸlIndexBBFunc
 
bbfunc
, cpS·tŸlIndex *
¡©icIndex
)

36 
šdex
->
kÏss
 = klass;

37 
šdex
->
bbfunc
 = bbfunc;

38 
šdex
->
¡©icIndex
 = staticIndex;

40 if(
¡©icIndex
){

41 
	`ıAs£¹H¬d
(!
¡©icIndex
->
dyÇmicIndex
, "This static index is‡lready‡ssociated with‡ dynamic index.");

42 
¡©icIndex
->
dyÇmicIndex
 = 
šdex
;

45  
šdex
;

46 
	}
}

48 
	sdyÇmicToSticCÚ‹xt
 {

49 
ıS·tŸlIndexBBFunc
 
	mbbfunc
;

50 
ıS·tŸlIndex
 *
	m¡©icIndex
;

51 
ıS·tŸlIndexQu”yFunc
 
	mqu”yFunc
;

52 *
	md©a
;

53 } 
	tdyÇmicToSticCÚ‹xt
;

56 
	$dyÇmicToSticI‹r
(*
obj
, 
dyÇmicToSticCÚ‹xt
 *
cÚ‹xt
)

58 
	`ıS·tŸlIndexQu”y
(
cÚ‹xt
->
¡©icIndex
, 
obj
, cÚ‹xt->
	`bbfunc
(obj), cÚ‹xt->
qu”yFunc
, cÚ‹xt->
d©a
);

59 
	}
}

62 
	$ıS·tŸlIndexCŞlideStic
(
ıS·tŸlIndex
 *
dyÇmicIndex
, cpS·tŸlIndex *
¡©icIndex
, 
ıS·tŸlIndexQu”yFunc
 
func
, *
d©a
)

64 if(
¡©icIndex
 && 
	`ıS·tŸlIndexCouÁ
(staticIndex) > 0){

65 
dyÇmicToSticCÚ‹xt
 
cÚ‹xt
 = {
dyÇmicIndex
->
bbfunc
, 
¡©icIndex
, 
func
, 
d©a
};

66 
	`ıS·tŸlIndexEach
(
dyÇmicIndex
, (
ıS·tŸlIndexI‹¿tÜFunc
)
dyÇmicToSticI‹r
, &
cÚ‹xt
);

68 
	}
}

	@../src/chipmunk/cpSweep1D.c

22 
	~"chmunk/chmunk_´iv©e.h
"

24 
šlše
 
ıS·tŸlIndexCÏss
 *
KÏss
();

28 
	sBounds
 {

29 
ıFlßt
 
	mmš
, 
	mmax
;

30 } 
	tBounds
;

32 
	sTabËC–l
 {

33 *
	mobj
;

34 
Bounds
 
	mbounds
;

35 } 
	tTabËC–l
;

37 
	sıSw“p1D


39 
ıS·tŸlIndex
 
	m¥©ŸlIndex
;

41 
	mnum
;

42 
	mmax
;

43 
TabËC–l
 *
	mbË
;

46 
šlše
 
ıBoŞ


47 
	$BoundsOv”Ïp
(
Bounds
 
a
, Bound 
b
)

49  (
a
.
mš
 <ğ
b
.
max
 && b.min <=‡.max);

50 
	}
}

52 
šlše
 
Bounds


53 
	$BBToBounds
(
ıSw“p1D
 *
sw“p
, 
ıBB
 
bb
)

55 
Bounds
 
bounds
 = {
bb
.
l
, bb.
r
};

56  
bounds
;

57 
	}
}

59 
šlše
 
TabËC–l


60 
	$MakeTabËC–l
(
ıSw“p1D
 *
sw“p
, *
obj
)

62 
TabËC–l
 
ûÎ
 = {
obj
, 
	`BBToBounds
(
sw“p
, sw“p->
¥©ŸlIndex
.
	`bbfunc
(obj))};

63  
ûÎ
;

64 
	}
}

68 
ıSw“p1D
 *

69 
	$ıSw“p1DAÎoc
()

71  (
ıSw“p1D
 *)
	`ıÿÎoc
(1, (cpSweep1D));

72 
	}
}

75 
	$ResizeTabË
(
ıSw“p1D
 *
sw“p
, 
size
)

77 
sw“p
->
max
 = 
size
;

78 
sw“p
->
bË
 = (
TabËC–l
 *)
	`ı»®loc
(sw“p->bË, 
size
*(TableCell));

79 
	}
}

81 
ıS·tŸlIndex
 *

82 
	$ıSw“p1DIn™
(
ıSw“p1D
 *
sw“p
, 
ıS·tŸlIndexBBFunc
 
bbfunc
, 
ıS·tŸlIndex
 *
¡©icIndex
)

84 
	`ıS·tŸlIndexIn™
((
ıS·tŸlIndex
 *)
sw“p
, 
	`KÏss
(), 
bbfunc
, 
¡©icIndex
);

86 
sw“p
->
num
 = 0;

87 
	`ResizeTabË
(
sw“p
, 32);

89  (
ıS·tŸlIndex
 *)
sw“p
;

90 
	}
}

92 
ıS·tŸlIndex
 *

93 
	$ıSw“p1DNew
(
ıS·tŸlIndexBBFunc
 
bbfunc
, 
ıS·tŸlIndex
 *
¡©icIndex
)

95  
	`ıSw“p1DIn™
(
	`ıSw“p1DAÎoc
(), 
bbfunc
, 
¡©icIndex
);

96 
	}
}

99 
	$ıSw“p1DDe¡roy
(
ıSw“p1D
 *
sw“p
)

101 
	`ıä“
(
sw“p
->
bË
);

102 
sw“p
->
bË
 = 
NULL
;

103 
	}
}

108 
	$ıSw“p1DCouÁ
(
ıSw“p1D
 *
sw“p
)

110  
sw“p
->
num
;

111 
	}
}

114 
	$ıSw“p1DEach
(
ıSw“p1D
 *
sw“p
, 
ıS·tŸlIndexI‹¿tÜFunc
 
func
, *
d©a
)

116 
TabËC–l
 *
bË
 = 
sw“p
->table;

117 
i
=0, 
couÁ
=
sw“p
->
num
; i<couÁ; i++è
	`func
(
bË
[i].
obj
, 
d©a
);

118 
	}
}

121 
	$ıSw“p1DCÚšs
(
ıSw“p1D
 *
sw“p
, *
obj
, 
ıHashV®ue
 
hashid
)

123 
TabËC–l
 *
bË
 = 
sw“p
->table;

124 
i
=0, 
couÁ
=
sw“p
->
num
; i<count; i++){

125 if(
bË
[
i
].
obj
 =ğobjè 
ıTrue
;

128  
ıF®£
;

129 
	}
}

134 
	$ıSw“p1DIn£¹
(
ıSw“p1D
 *
sw“p
, *
obj
, 
ıHashV®ue
 
hashid
)

136 if(
sw“p
->
num
 =ğsw“p->
max
è
	`ResizeTabË
(sweep, sweep->max*2);

138 
sw“p
->
bË
[sw“p->
num
] = 
	`MakeTabËC–l
(sw“p, 
obj
);

139 
sw“p
->
num
++;

140 
	}
}

143 
	$ıSw“p1DRemove
(
ıSw“p1D
 *
sw“p
, *
obj
, 
ıHashV®ue
 
hashid
)

145 
TabËC–l
 *
bË
 = 
sw“p
->table;

146 
i
=0, 
couÁ
=
sw“p
->
num
; i<count; i++){

147 if(
bË
[
i
].
obj
 == obj){

148 
num
 = --
sw“p
->num;

150 
bË
[
i
] =abË[
num
];

151 
bË
[
num
].
obj
 = 
NULL
;

156 
	}
}

161 
	$ıSw“p1DRešdexObjeù
(
ıSw“p1D
 *
sw“p
, *
obj
, 
ıHashV®ue
 
hashid
)

164 
	}
}

167 
	$ıSw“p1DRešdex
(
ıSw“p1D
 *
sw“p
)

171 
	}
}

176 
	$ıSw“p1DQu”y
(
ıSw“p1D
 *
sw“p
, *
obj
, 
ıBB
 
bb
, 
ıS·tŸlIndexQu”yFunc
 
func
, *
d©a
)

181 
Bounds
 
bounds
 = 
	`BBToBounds
(
sw“p
, 
bb
);

183 
TabËC–l
 *
bË
 = 
sw“p
->table;

184 
i
=0, 
couÁ
=
sw“p
->
num
; i<count; i++){

185 
TabËC–l
 
ûÎ
 = 
bË
[
i
];

186 if(
	`BoundsOv”Ïp
(
bounds
, 
ûÎ
.boundsè&& 
obj
 !ğûÎ.objè
	`func
(obj, c–l.obj, 0, 
d©a
);

188 
	}
}

191 
	$ıSw“p1DSegm’tQu”y
(
ıSw“p1D
 *
sw“p
, *
obj
, 
ıVeù
 
a
, cpVeù 
b
, 
ıFlßt
 
t_ex™
, 
ıS·tŸlIndexSegm’tQu”yFunc
 
func
, *
d©a
)

193 
ıBB
 
bb
 = 
	`ıBBEx·nd
(
	`ıBBNew
(
a
.
x
,‡.
y
,‡.x,‡.y), 
b
);

194 
Bounds
 
bounds
 = 
	`BBToBounds
(
sw“p
, 
bb
);

196 
TabËC–l
 *
bË
 = 
sw“p
->table;

197 
i
=0, 
couÁ
=
sw“p
->
num
; i<count; i++){

198 
TabËC–l
 
ûÎ
 = 
bË
[
i
];

199 if(
	`BoundsOv”Ïp
(
bounds
, 
ûÎ
.bounds)è
	`func
(
obj
, c–l.obj, 
d©a
);

201 
	}
}

206 
	$TabËSÜt
(
TabËC–l
 *
a
, TabËC–È*
b
)

208  (
a
->
bounds
.
mš
 < 
b
->bounds.min ? -1 : (a->bounds.min > b->bounds.min ? 1 : 0));

209 
	}
}

212 
	$ıSw“p1DRešdexQu”y
(
ıSw“p1D
 *
sw“p
, 
ıS·tŸlIndexQu”yFunc
 
func
, *
d©a
)

214 
TabËC–l
 *
bË
 = 
sw“p
->table;

215 
couÁ
 = 
sw“p
->
num
;

218 
i
=0; i<
couÁ
; i++è
bË
[i] = 
	`MakeTabËC–l
(
sw“p
,abË[i].
obj
);

219 
	`qsÜt
(
bË
, 
couÁ
, (
TabËC–l
), ((*)(cÚ¡ *, cÚ¡ *))
TabËSÜt
);

221 
i
=0; i<
couÁ
; i++){

222 
TabËC–l
 
ûÎ
 = 
bË
[
i
];

223 
ıFlßt
 
max
 = 
ûÎ
.
bounds
.max;

225 
j
=
i
+1; 
bË
[j].
bounds
.
mš
 < 
max
 && j<
couÁ
; j++){

226 
	`func
(
ûÎ
.
obj
, 
bË
[
j
].obj, 0, 
d©a
);

232 
	`ıS·tŸlIndexCŞlideStic
((
ıS·tŸlIndex
 *)
sw“p
, sw“p->
¥©ŸlIndex
.
¡©icIndex
, 
func
, 
d©a
);

233 
	}
}

235 
ıS·tŸlIndexCÏss
 
	gkÏss
 = {

236 (
ıS·tŸlIndexDe¡royIm¶
)
ıSw“p1DDe¡roy
,

238 (
ıS·tŸlIndexCouÁIm¶
)
ıSw“p1DCouÁ
,

239 (
ıS·tŸlIndexEachIm¶
)
ıSw“p1DEach
,

240 (
ıS·tŸlIndexCÚšsIm¶
)
ıSw“p1DCÚšs
,

242 (
ıS·tŸlIndexIn£¹Im¶
)
ıSw“p1DIn£¹
,

243 (
ıS·tŸlIndexRemoveIm¶
)
ıSw“p1DRemove
,

245 (
ıS·tŸlIndexRešdexIm¶
)
ıSw“p1DRešdex
,

246 (
ıS·tŸlIndexRešdexObjeùIm¶
)
ıSw“p1DRešdexObjeù
,

247 (
ıS·tŸlIndexRešdexQu”yIm¶
)
ıSw“p1DRešdexQu”y
,

249 (
ıS·tŸlIndexQu”yIm¶
)
ıSw“p1DQu”y
,

250 (
ıS·tŸlIndexSegm’tQu”yIm¶
)
ıSw“p1DSegm’tQu”y
,

253 
šlše
 
ıS·tŸlIndexCÏss
 *
	$KÏss
(){ &
kÏss
;
	}
}

	@../src/chipmunk/prime.h

25 
	g´imes
[] = {

58 
šlše
 

59 
	$Ãxt_´ime
(
n
)

61 
i
 = 0;

62 
n
 > 
´imes
[
i
]){

63 
i
++;

64 
	`ıAs£¹H¬d
(
´imes
[
i
], "Triedo„esize‡ hashableo‡ size greaterhan 1610612741 O_o");

67  
´imes
[
i
];

68 
	}
}

	@../src/game/gam_LOS.cpp

1 
	~"../../hdr/sys_glob®s.h
"

3 
	gg_LšeOfSightS‹p
;

4 
boŞ
 
	g®lDroidsVisibË
;

11 
boŞ
 
	$gam_LOSC®Ëd
(
·ss_x
, 
·ss_y
)

14 
te
;

16 
·ss_x
 =…ass_x / 
TILE_SIZE
;

17 
·ss_y
 =…ass_y / 
TILE_SIZE
;

22 
te
 = 
shLev–
[
cu¼’tLev–
].
tes
[(
·ss_y
 * (shLev–[cu¼’tLev–].
Ëv–Dim’siÚs
.
x
è+ 
·ss_x
)];

24 ià(
te
 > 
NO_PASS_TILE
)

25  
çl£
;

27  
Œue
;

28 
	}
}

35 
	$lvl_doLšeSight
(
ıVeù
 
¡¬tPos
, cpVeù 
de¡Pos
, 
whichDroid
)

38 
di¡ªû
;

40 
ıVeù
 
veùDœeùiÚ
;

41 
ıVeù
 
veùVeùÜ
;

42 
ıVeù
 
cu¼’tDœeùiÚ
;

43 
ıVeù
 
cu¼’tPos™iÚ
;

45 
veùDœeùiÚ
 = 
	`sys_g‘VeùÜDœeùiÚ
(
¡¬tPos
, 
de¡Pos
);

47 
veùVeùÜ
 = 
	`ıvnÜm®ize
(
veùDœeùiÚ
);

49 
di¡ªû
 = 
	`sys_g‘Di¡ªû
(
¡¬tPos
, 
de¡Pos
);

50 
di¡ªû
 /ğ
g_LšeOfSightS‹p
;

52 
cu¼’tPos™iÚ
.
x
 = 
¡¬tPos
.x;

53 
cu¼’tPos™iÚ
.
y
 = 
¡¬tPos
.y;

55 
i
 = 0; i !ğ
di¡ªû
; i++)

57 
cu¼’tPos™iÚ
.
x
 +ğ
veùVeùÜ
.x * 
g_LšeOfSightS‹p
;

58 
cu¼’tPos™iÚ
.
y
 +ğ
veùVeùÜ
.y * 
g_LšeOfSightS‹p
;

60 ià(
Œue
 =ğ
	`gam_LOSC®Ëd
(
cu¼’tPos™iÚ
.
x
, cu¼’tPos™iÚ.
y
))

62 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
visibËToPÏy”
 = 
çl£
;

66 
	}
}

71 
	$lvl_LOS
()

74 
ıVeù
 
‹mpVeù
;

76 
‹mpCouÁ
 = 0;

78 
LOSTimeS¹
 = 
	`®_g‘_time
();

80 
‹mpCouÁ
 = 0;empCouÁ !ğ
shLev–
[
cu¼’tLev–
].
numDroids
;empCount++)

82 ià(
Œue
 =ğ
shLev–
[
cu¼’tLev–
].
droid
[
‹mpCouÁ
].
isAlive
)

84 
shLev–
[
cu¼’tLev–
].
droid
[
‹mpCouÁ
].
visibËToPÏy”
 = 
Œue
;

87 ià(
Œue
 =ğ
	`sys_visibËOnSü“n
(
shLev–
[
cu¼’tLev–
].
droid
[
‹mpCouÁ
].
wÜldPos
, 
SPRITE_SIZE
))

89 
‹mpVeù
 = 
shLev–
[
cu¼’tLev–
].
droid
[
‹mpCouÁ
].
wÜldPos
;

91 
‹mpVeù
.
x
 +ğ
TILE_SIZE
;

92 
‹mpVeù
.
y
 +ğ
TILE_SIZE
;

94 
	`lvl_doLšeSight
(
¶ay”WÜldMiddËPos
, 
‹mpVeù
, 
‹mpCouÁ
);

96 ià(
Œue
 =ğ
®lDroidsVisibË
)

97 
shLev–
[
cu¼’tLev–
].
droid
[
‹mpCouÁ
].
visibËToPÏy”
 = 
Œue
;

102 
LOSTimeStİ
 = 
	`®_g‘_time
();

103 
	}
}

108 
	$lvl_debugLOS
()

111 
ıVeù
 
sü“nPos
;

112 
ıVeù
 
sü“nPÏy”WÜldPos
;

114 
i
 = 0; i !ğ
shLev–
[
cu¼’tLev–
].
numDroids
; i++)

116 
sü“nPos
 = 
	`sys_wÜldToSü“n
(
shLev–
[
cu¼’tLev–
].
droid
[
i
].
wÜldPos
, 
DROID_BODY_SIZE
);

117 
sü“nPÏy”WÜldPos
 = 
	`sys_wÜldToSü“n
(
¶ay”WÜldMiddËPos
, 
DROID_BODY_SIZE
);

119 
	`®_d¿w_lše
(
sü“nPÏy”WÜldPos
.
x
, sü“nPÏy”WÜldPos.
y
, 
sü“nPos
.x + 
TILE_SIZE
, sü“nPos.y + TILE_SIZE, 
	`®_m­_rgb_f
(1.0f, 1.0f, 1.0f), 2);

121 
	}
}

	@../src/game/gam_bullet.cpp

1 
	~"../../hdr/sys_glob®s.h
"

3 
_buÎ‘
 
	gbuÎ‘
[
MAX_NUM_BULLETS
];

4 
	gbuÎ‘T¿v–S³ed
;

5 
	gbuÎ‘Di¤u±S³ed
;

10 
	$bul_´oûssDi¤u±”
(
whichLev–
, 
whichBuÎ‘
)

16 
j
 = 0; j !ğ
shLev–
[
whichLev–
].
numDroids
; j++)

18 ià(
Œue
 =ğ
shLev–
[
whichLev–
].
droid
[
j
].
visibËToPÏy”
)

20 ià(
Œue
 =ğ
shLev–
[
whichLev–
].
droid
[
j
].
isAlive
)

22 ià(
çl£
 =ğ
shLev–
[
whichLev–
].
droid
[
j
].
isEx¶odšg
)

24 ià(
çl£
 =ğ
d©aBa£EÁry
[
shLev–
[
whichLev–
].
droid
[
j
].
droidTy³
].
di¤u±”ImmuÃ
)

26 
	`drd_damageToDroid
(
whichLev–
, 
j
, 
DAMAGE_BULLET
, 
buÎ‘
[
whichBuÎ‘
].
sourûDroid
);

32 
	}
}

37 
	$bul_š™BuÎ‘s
()

40 
i
 = 0; i !ğ
MAX_NUM_BULLETS
; i++)

42 
buÎ‘
[
i
].
®ive
 = 
çl£
;

43 
buÎ‘
[
i
].
ªgË
 = 0.0f;

44 
buÎ‘
[
i
].
ty³
 = -1;

45 
buÎ‘
[
i
].
cu¼’tAnimF¿me
 = 0;

46 
buÎ‘
[
i
].
ªimD–ayCouÁ
 = 0.0f;

47 
buÎ‘
[
i
].
¥“d
 = 
buÎ‘T¿v–S³ed
;

49 
	}
}

55 
ıVeù
 
	$bul_g‘PÏy”BuÎ‘DœeùiÚ
()

58 
ıVeù
 
buÎ‘DœeùiÚ
;

60 
buÎ‘DœeùiÚ
.
x
 = 0;

61 
buÎ‘DœeùiÚ
.
y
 = 0;

63 ià(
Œue
 =ğ
šputAùiÚ
[
gameLeá
].
cu¼’yDown
)

64 
buÎ‘DœeùiÚ
.
x
 = -1;

66 ià(
Œue
 =ğ
šputAùiÚ
[
gameRight
].
cu¼’yDown
)

67 
buÎ‘DœeùiÚ
.
x
 = 1;

69 ià(
Œue
 =ğ
šputAùiÚ
[
gameDown
].
cu¼’yDown
)

70 
buÎ‘DœeùiÚ
.
y
 = 1;

72 ià(
Œue
 =ğ
šputAùiÚ
[
gameUp
].
cu¼’yDown
)

73 
buÎ‘DœeùiÚ
.
y
 = -1;

75  
buÎ‘DœeùiÚ
;

76 
	}
}

82 
ıVeù
 
	$bul_g‘S¹šgPos™iÚ
(
ıVeù
 
cu¼’tPos
, cpVeù 
buÎ‘DœeùiÚ
, 
¿dius
)

85 
ıVeù
 
buÎ‘S¹
 = {0.0f, 0.0f};

87 
buÎ‘S¹
 = 
cu¼’tPos
;

89 
buÎ‘S¹
.
x
 +ğ
buÎ‘DœeùiÚ
.x * (
¿dius
);

90 
buÎ‘S¹
.
y
 +ğ
buÎ‘DœeùiÚ
.y * (
¿dius
);

92 
buÎ‘S¹
.
y
 -ğ
TILE_SIZE
 / 2;

94  
buÎ‘S¹
;

95 
	}
}

100 
	$bul_ÃwBuÎ‘
(
ıVeù
 
sourûPos
, cpVeù 
de¡Pos
, 
ty³
, 
sourûDroid
)

103 
ıVeù
 
buÎ‘Off£t
;

105 
buÎ‘Off£t
 = {0.0f, 0.0f};

107 
i
 = 0; i !ğ
MAX_NUM_BULLETS
; i++)

109 ià(
çl£
 =ğ
buÎ‘
[
i
].
®ive
)

111 ià(-1 =ğ
sourûDroid
)

113 
buÎ‘
[
i
].
Œav–DœeùiÚ
 = 
	`bul_g‘PÏy”BuÎ‘DœeùiÚ
();

116 ià((0 =ğ
buÎ‘
[
i
].
Œav–DœeùiÚ
.
x
è&& (0 =ğbuÎ‘[i].Œav–DœeùiÚ.
y
))

117 
buÎ‘
[
i
].
Œav–DœeùiÚ
 = 
	`ıvsub
(
de¡Pos
, 
sourûPos
);

121 
buÎ‘
[
i
].
Œav–DœeùiÚ
 = 
	`ıvsub
(
de¡Pos
, 
sourûPos
);

124 ià(
BULLET_TYPE_DISRUPTER
 !ğ
ty³
)

126 
buÎ‘
[
i
].
cu¼’tAnimF¿me
 = 0;

127 
buÎ‘
[
i
].
Œav–DœeùiÚ
 = 
	`ıvnÜm®ize
(bullet[i].travelDirection);

128 
buÎ‘
[
i
].
wÜldPos
 = 
sourûPos
;

130 
buÎ‘
[
i
].
ªgË
 = 
	`ıvtßngË
(buÎ‘[i].
Œav–DœeùiÚ
);

132 ià(
ty³
 == -1)

133 
ty³
 = 
BULLET_TYPE_NORMAL
;

135 
buÎ‘
[
i
].
¿dius
 = 
	`®_g‘_b™m­_width
(
image
[
	`bul_g‘BuÎ‘ImageByTy³
(
ty³
)].imageè/ 
NUM_FRAMES_IN_BULLET
;

136 
buÎ‘
[
i
].
¿dius
 -= 3;

138 
buÎ‘
[
i
].
wÜldPos
 = 
	`bul_g‘S¹šgPos™iÚ
(
sourûPos
, buÎ‘[i].
Œav–DœeùiÚ
, buÎ‘[i].
¿dius
);

142 
buÎ‘
[
i
].
buÎ‘PhysicsObjeù
.
body
 = 
	`ıS·ûAddBody
(
¥aû
, 
	`ıBodyNew
(
buÎ‘Mass
, 
	`ıMom’tFÜCœşe
(buÎ‘Mass, 0.0f, buÎ‘[i].
¿dius
, 
buÎ‘Off£t
)));

143 
	`ıBodyS‘Mass
(
buÎ‘
[
i
].
buÎ‘PhysicsObjeù
.
body
, 
buÎ‘Mass
);

145 
buÎ‘
[
i
].
buÎ‘PhysicsObjeù
.
sh­e
 = 
	`ıS·ûAddSh­e
(
¥aû
, 
	`ıCœşeSh­eNew
(buÎ‘[i].buÎ‘PhysicsObjeù.
body
, buÎ‘[i].
¿dius
, 
buÎ‘Off£t
));

146 
	`ıSh­eS‘CŞlisiÚTy³
(
buÎ‘
[
i
].
buÎ‘PhysicsObjeù
.
sh­e
, 
PHYSIC_TYPE_BULLET
);

147 
	`ıSh­eS‘U£rD©a
(
buÎ‘
[
i
].
buÎ‘PhysicsObjeù
.
sh­e
, i);

149 
	`sys_¶aySound
(
SND_LASER
, 0.0f, 
ALLEGRO_PLAYMODE_ONCE
);

151 
	`·r_š™Em™‹r
(
buÎ‘
[
i
].
wÜldPos
, 
PARTICLE_TYPE_TRAIL
, i);

155 
	`sys_¶aySound
(
SND_DISRUPTOR
, 0.0f, 
ALLEGRO_PLAYMODE_ONCE
);

156 
ty³
 = 
BULLET_TYPE_DISRUPTER
;

157 
buÎ‘
[
i
].
damageDÚe
 = 
çl£
;

160 
buÎ‘
[
i
].
ty³
 =ype;

161 
buÎ‘
[
i
].
sourûDroid
 = sourceDroid;

162 
buÎ‘
[
i
].
®ive
 = 
Œue
;

167 
	`cÚ_´št
 (
Œue
, 
çl£
, "No more bullet slots.");

168 
	}
}

173 
	$bul_moveBuÎ‘
(
whichBuÎ‘
)

176 
ıVeù
 
‹mpV–oc™y
;

178 ià(
BULLET_TYPE_DISRUPTER
 =ğ
buÎ‘
[
whichBuÎ‘
].
ty³
)

181 
‹mpV–oc™y
 = 
	`ıvmuÉ
(
buÎ‘
[
whichBuÎ‘
].
Œav–DœeùiÚ
, buÎ‘[whichBuÎ‘].
¥“d
);

182 
buÎ‘
[
whichBuÎ‘
].
wÜldPos
 = 
	`ıvadd
(buÎ‘[whichBuÎ‘].wÜldPos, 
‹mpV–oc™y
);

187 
	`ıBodyS‘Pos™iÚ
(
buÎ‘
[
whichBuÎ‘
].
buÎ‘PhysicsObjeù
.
body
, buÎ‘[whichBuÎ‘].
wÜldPos
);

188 
	`ıS·ûRešdexSh­esFÜBody
(
¥aû
, 
buÎ‘
[
whichBuÎ‘
].
buÎ‘PhysicsObjeù
.
body
);

189 
	}
}

194 
	$bul_ªim©eBuÎ‘
(
whichBuÎ‘
)

197 
buÎ‘AnimS³ed
 = 5.0f;

199 ià(
buÎ‘
[
whichBuÎ‘
].
ty³
 =ğ
BULLET_TYPE_DISRUPTER
)

201 
buÎ‘
[
whichBuÎ‘
].
ªimD–ayCouÁ
 +ğ
buÎ‘Di¤u±S³ed
 * 
thškIÁ”v®
;

202 ià(
buÎ‘
[
whichBuÎ‘
].
ªimD–ayCouÁ
 > 1.0f)

204 
buÎ‘
[
whichBuÎ‘
].
ªimD–ayCouÁ
 = 0.0f;

205 
buÎ‘
[
whichBuÎ‘
].
®ive
 = 
çl£
;

210 
buÎ‘
[
whichBuÎ‘
].
ªimD–ayCouÁ
 +ğ
buÎ‘AnimS³ed
 * 
thškIÁ”v®
;

211 ià(
buÎ‘
[
whichBuÎ‘
].
ªimD–ayCouÁ
 > 1.0f)

213 
buÎ‘
[
whichBuÎ‘
].
ªimD–ayCouÁ
 = 0.0f;

214 
buÎ‘
[
whichBuÎ‘
].
cu¼’tAnimF¿me
++;

215 ià(
buÎ‘
[
whichBuÎ‘
].
cu¼’tAnimF¿me
 > 
NUM_FRAMES_IN_BULLET
)

216 
buÎ‘
[
whichBuÎ‘
].
cu¼’tAnimF¿me
 = 0;

219 
	}
}

224 
	$bul_g‘BuÎ‘ImageByTy³
(
whichTy³
)

227 
whichTy³
)

229 
BULLET_TYPE_NORMAL
:

230  
buÎ‘Ty³1
;

233 
BULLET_TYPE_SINGLE
:

234  
buÎ‘Ty³2
;

237 
BULLET_TYPE_DOUBLE
:

238  
buÎ‘Ty³3
;

241 
	}
}

246 
	$bul_d¿wBuÎ‘
(
whichBuÎ‘
)

249 
buÎ‘Image
 = 0;

251 ià(
BULLET_TYPE_DISRUPTER
 =ğ
buÎ‘
[
whichBuÎ‘
].
ty³
)

253 
	`®_d¿w_fËd_»ùªgË
(0.0f, 0.0f, 
wšWidth
, 
wšHeight
, 
	`®_m­_rgba_f
(1.0f, 1.0f, 1.0f, 0.3f));

257 
buÎ‘Image
 = 
	`bul_g‘BuÎ‘ImageByTy³
(
buÎ‘
[
whichBuÎ‘
].
ty³
);

260 
	`gam_d¿wS´™e
(
buÎ‘
[
whichBuÎ‘
].
cu¼’tAnimF¿me
, 
buÎ‘Image
, 
	`sys_wÜldToSü“n
(buÎ‘[whichBuÎ‘].
wÜldPos
, 
DROID_BODY_SIZE
), buÎ‘[whichBuÎ‘].
ªgË
, 
	`®_m­_rgb_f
(1.0f, 1.0f, 1.0f));

262 
	}
}

267 
	$bul_´oûssBuÎ‘s
()

270 
i
 = 0; i !ğ
MAX_NUM_BULLETS
; i++)

272 ià(
Œue
 =ğ
buÎ‘
[
i
].
®ive
)

274 ià(
BULLET_TYPE_DISRUPTER
 =ğ
buÎ‘
[
i
].
ty³
)

276 ià(
çl£
 =ğ
buÎ‘
[
i
].
damageDÚe
)

278 
	`bul_´oûssDi¤u±”
(
cu¼’tLev–
, 
i
);

279 
buÎ‘
[
i
].
damageDÚe
 = 
Œue
;

283 
	`bul_moveBuÎ‘
(
i
);

285 
	`bul_ªim©eBuÎ‘
(
i
);

288 
	}
}

293 
	$bul_d¿wBuÎ‘s
()

296 
i
 = 0; i !ğ
MAX_NUM_BULLETS
; i++)

298 ià(
Œue
 =ğ
buÎ‘
[
i
].
®ive
)

300 
	`bul_d¿wBuÎ‘
(
i
);

303 
	}
}

	@../src/game/gam_database.cpp

1 
	~"../../hdr/sys_glob®s.h
"

3 
_d©aBa£EÁry
 
	gd©aBa£EÁry
[
NUM_SPRITE_TYPES
];

8 
boŞ
 
	$gam_g‘DBInfÜm©iÚ
()

11 
	`cÚ_´št
(
Œue
, 
çl£
, "Get droid database information.");

13 
	`io_g‘DBDroidInfo
(0, "001.txt");

14 
	`io_g‘DBDroidInfo
(1, "123.txt");

15 
	`io_g‘DBDroidInfo
(2, "139.txt");

16 
	`io_g‘DBDroidInfo
(3, "247.txt");

17 
	`io_g‘DBDroidInfo
(4, "249.txt");

18 
	`io_g‘DBDroidInfo
(5, "296.txt");

19 
	`io_g‘DBDroidInfo
(6, "302.txt");

20 
	`io_g‘DBDroidInfo
(7, "329.txt");

21 
	`io_g‘DBDroidInfo
(8, "420.txt");

22 
	`io_g‘DBDroidInfo
(9, "476.txt");

23 
	`io_g‘DBDroidInfo
(10, "493.txt");

24 
	`io_g‘DBDroidInfo
(11, "516.txt");

25 
	`io_g‘DBDroidInfo
(12, "571.txt");

26 
	`io_g‘DBDroidInfo
(13, "598.txt");

27 
	`io_g‘DBDroidInfo
(14, "614.txt");

28 
	`io_g‘DBDroidInfo
(15, "615.txt");

29 
	`io_g‘DBDroidInfo
(16, "629.txt");

30 
	`io_g‘DBDroidInfo
(17, "711.txt");

31 
	`io_g‘DBDroidInfo
(18, "742.txt");

32 
	`io_g‘DBDroidInfo
(19, "751.txt");

33 
	`io_g‘DBDroidInfo
(20, "821.txt");

34 
	`io_g‘DBDroidInfo
(21, "834.txt");

35 
	`io_g‘DBDroidInfo
(22, "883.txt");

36 
	`io_g‘DBDroidInfo
(23, "999.txt");

38 
lßdšgB¬P”ûÁ
 = 0.0f;

39  
Œue
;

40 
	}
}

	@../src/game/gam_doors.cpp

1 
	~"../../hdr/sys_glob®s.h
"

3 
_doÜTrigg”
 
	gdoÜTrigg”
[
MAX_NUM_OF_DOORS
];

4 
	gnumDoÜsOnLev–
;

5 
	gdoÜF¿meD–ay
;

10 
	$gam_doÜCheckTrigg”A»as
()

13 
i
 = 0;

14 
j
 = 0;

16 ià(0 =ğ
numDoÜsOnLev–
)

19 
i
 = 0; i !ğ
numDoÜsOnLev–
; i++)

21 ià(Ğ
¶ay”WÜldMiddËPos
.
x
 > 
doÜTrigg”
[
i
].
tİLeá
.x)

22 && (
¶ay”WÜldMiddËPos
.
y
 > 
doÜTrigg”
[
i
].
tİLeá
.y)

23 && (
¶ay”WÜldMiddËPos
.
x
 < 
doÜTrigg”
[
i
].
bÙRight
.x)

24 && (
¶ay”WÜldMiddËPos
.
y
 < 
doÜTrigg”
[
i
].
bÙRight
.y))

26 
doÜTrigg”
[
i
].
šU£
 = 
Œue
;

30 
doÜTrigg”
[
i
].
šU£
 = 
çl£
;

36 
i
 = 0; i !ğ
numDoÜsOnLev–
; i++)

38 
j
 = 0; j !ğ
shLev–
[
cu¼’tLev–
].
numDroids
; j++)

40 ià(
Œue
 =ğ
shLev–
[
cu¼’tLev–
].
droid
[
j
].
isAlive
)

42 ià((
shLev–
[
cu¼’tLev–
].
droid
[
j
].
wÜldPos
.
x
 + (
SPRITE_SIZE
 / 2è> 
doÜTrigg”
[
i
].
tİLeá
.x) &&

43 (
shLev–
[
cu¼’tLev–
].
droid
[
j
].
wÜldPos
.
y
 + (
SPRITE_SIZE
 / 2è> 
doÜTrigg”
[
i
].
tİLeá
.y) &&

44 (
shLev–
[
cu¼’tLev–
].
droid
[
j
].
wÜldPos
.
x
 + (
SPRITE_SIZE
 / 2è< 
doÜTrigg”
[
i
].
bÙRight
.x) &&

45 (
shLev–
[
cu¼’tLev–
].
droid
[
j
].
wÜldPos
.
y
 + (
SPRITE_SIZE
 / 2è< 
doÜTrigg”
[
i
].
bÙRight
.y))

47 
doÜTrigg”
[
i
].
šU£
 = 
Œue
;

52 
	}
}

57 
	$gam_¶ayDoÜSound
(
whichDoÜ
)

60 ià(
doÜTrigg”
[
whichDoÜ
].
tİLeá
.
x
 < 
¶ay”WÜldMiddËPos
.x)

61 
	`sys_¶aySound
(
SND_DOOR
, 
SND_PAN_LEFT
, 
ALLEGRO_PLAYMODE_ONCE
);

63 
	`sys_¶aySound
(
SND_DOOR
, 
SND_PAN_RIGHT
, 
ALLEGRO_PLAYMODE_ONCE
);

64 
	}
}

69 
	$gam_doÜProûssAùiÚs
()

72 
i
;

74 
i
 = 0; i < 
numDoÜsOnLev–
; i++)

76 ià(
Œue
 =ğ
doÜTrigg”
[
i
].
šU£
)

78 
doÜTrigg”
[
i
].
ÃxtF¿me
 +ğdoÜTrigg”[i].
äameD–ay
 * 
thškIÁ”v®
;

79 ià(
doÜTrigg”
[
i
].
ÃxtF¿me
 > 1.0f)

81 
doÜTrigg”
[
i
].
ÃxtF¿me
 = 0.0f;

82 
doÜTrigg”
[
i
].
cu¼’tF¿me
)

84 
DOOR_ACROSS
:

85 
doÜTrigg”
[
i
].
cu¼’tF¿me
 = 
DOOR_ACROSS_OPEN_1
;

86 
	`gam_¶ayDoÜSound
(
i
);

88 
DOOR_ACROSS_OPEN_1
:

89 
doÜTrigg”
[
i
].
cu¼’tF¿me
 = 
DOOR_ACROSS_OPEN_2
;

91 
DOOR_ACROSS_OPEN_2
:

92 
doÜTrigg”
[
i
].
cu¼’tF¿me
 = 
DOOR_ACROSS_OPENED
;

94 
DOOR_ACROSS_OPENED
:

95 
doÜTrigg”
[
i
].
cu¼’tF¿me
 = 
DOOR_ACROSS_OPENED
;

97 
DOOR_ACROSS_CLOSING_1
:

98 
doÜTrigg”
[
i
].
cu¼’tF¿me
 = 
DOOR_ACROSS_OPENED
;

100 
DOOR_ACROSS_CLOSING_2
:

101 
doÜTrigg”
[
i
].
cu¼’tF¿me
 = 
DOOR_ACROSS_CLOSING_1
;

105 
DOOR_UP
:

106 
doÜTrigg”
[
i
].
cu¼’tF¿me
 = 
DOOR_UP_OPEN_1
;

107 
	`gam_¶ayDoÜSound
(
i
);

109 
DOOR_UP_OPEN_1
:

110 
doÜTrigg”
[
i
].
cu¼’tF¿me
 = 
DOOR_UP_OPEN_2
;

112 
DOOR_UP_OPEN_2
:

113 
doÜTrigg”
[
i
].
cu¼’tF¿me
 = 
DOOR_UP_OPENED
;

115 
DOOR_UP_OPENED
:

116 
doÜTrigg”
[
i
].
cu¼’tF¿me
 = 
DOOR_UP_OPENED
;

118 
DOOR_UP_CLOSING_1
:

119 
doÜTrigg”
[
i
].
cu¼’tF¿me
 = 
DOOR_UP_OPENED
;

121 
DOOR_UP_CLOSING_2
:

122 
doÜTrigg”
[
i
].
cu¼’tF¿me
 = 
DOOR_UP_CLOSING_1
;

130 
doÜTrigg”
[
i
].
ÃxtF¿me
 +ğdoÜTrigg”[i].
äameD–ay
 * 
thškIÁ”v®
;

131 ià(
doÜTrigg”
[
i
].
ÃxtF¿me
 > 1.0f)

133 
doÜTrigg”
[
i
].
ÃxtF¿me
 = 0.0f;

134 
doÜTrigg”
[
i
].
cu¼’tF¿me
)

136 
DOOR_ACROSS_OPENED
:

137 
	`gam_¶ayDoÜSound
(
i
);

138 
doÜTrigg”
[
i
].
cu¼’tF¿me
 = 
DOOR_ACROSS_CLOSING_1
;

140 
DOOR_ACROSS_CLOSING_1
:

141 
doÜTrigg”
[
i
].
cu¼’tF¿me
 = 
DOOR_ACROSS_CLOSING_2
;

143 
DOOR_ACROSS_CLOSING_2
:

144 
doÜTrigg”
[
i
].
cu¼’tF¿me
 = 
DOOR_ACROSS_CLOSED
;

147 
DOOR_UP_OPENED
:

148 
	`gam_¶ayDoÜSound
(
i
);

149 
doÜTrigg”
[
i
].
cu¼’tF¿me
 = 
DOOR_UP_CLOSING_1
;

151 
DOOR_UP_CLOSING_1
:

152 
doÜTrigg”
[
i
].
cu¼’tF¿me
 = 
DOOR_UP_CLOSING_2
;

154 
DOOR_UP_CLOSING_2
:

155 
doÜTrigg”
[
i
].
cu¼’tF¿me
 = 
DOOR_UP_CLOSED
;

160 
shLev–
[
cu¼’tLev–
].
tes
[
doÜTrigg”
[
i
].
m­Pos
] = doÜTrigg”[i].
cu¼’tF¿me
;

162 
	}
}

167 
	$gam_doÜDebugTrigg”
()

170 
ıVeù
 
tİLeá
, 
bÙtomRight
;

172 
i
 = 0; i !ğ
numDoÜsOnLev–
; i++)

174 
tİLeá
 = 
	`sys_wÜldToSü“n
(
doÜTrigg”
[
i
].tİLeá, 
TILE_SIZE
);

175 
bÙtomRight
 = 
	`sys_wÜldToSü“n
(
doÜTrigg”
[
i
].
bÙRight
, 
TILE_SIZE
);

177 
	`®_d¿w_»ùªgË
(
tİLeá
.
x
,İLeá.
y
, 
bÙtomRight
.x, bÙtomRight.y, 
	`®_m­_rgb_f
(0.0f, 1.0f, 0.0f), 2);

179 
	}
}

184 
	$gam_doÜTrigg”S‘up
()

188 
i
;

189 
sourûX
 = 0;

190 
sourûY
 = 0;

191 
de¡X
 = 0;

192 
de¡Y
 = 0;

193 
cu¼’tTe
 = 0;

194 
doÜCouÁ”
 = 0;

195 
ıVeù
 
ûÁ”
;

196 
ıFlßt
 
width
, 
height
;

198 
i
 = 0; i !ğ
shLev–
[
cu¼’tLev–
].
Ëv–Dim’siÚs
.
x
 * shLev–[cu¼’tLev–].Ëv–Dim’siÚs.
y
; i++)

200 
cu¼’tTe
 = 
shLev–
[
cu¼’tLev–
].
tes
[((()
sourûY
 * (shLev–[cu¼’tLev–].
Ëv–Dim’siÚs
.
x
)è+ ()
sourûX
)];

201 ià(
cu¼’tTe
 < 0)

202 
	`sys_”rÜF©®
(
__FILE__
, 
__LINE__
, "Tfound iÀsysDoÜdoÜTrigg”S‘u°i b–ow 0.†oİ [ %˜] Ex™šg...", 
i
);

205 (
DOOR_ACROSS
 =ğ
cu¼’tTe
) ||

206 (
DOOR_ACROSS_OPEN_1
 =ğ
cu¼’tTe
) ||

207 (
DOOR_ACROSS_OPEN_2
 =ğ
cu¼’tTe
) ||

208 (
DOOR_ACROSS_OPENED
 =ğ
cu¼’tTe
) ||

209 (
DOOR_ACROSS_CLOSING_1
 =ğ
cu¼’tTe
) ||

210 (
DOOR_ACROSS_CLOSING_2
 =ğ
cu¼’tTe
) ||

211 (
DOOR_ACROSS_CLOSED
 =ğ
cu¼’tTe
) ||

212 (
DOOR_UP
 =ğ
cu¼’tTe
) ||

213 (
DOOR_UP_OPEN_1
 =ğ
cu¼’tTe
) ||

214 (
DOOR_UP_OPEN_2
 =ğ
cu¼’tTe
) ||

215 (
DOOR_UP_OPENED
 =ğ
cu¼’tTe
) ||

216 (
DOOR_UP_CLOSING_1
 =ğ
cu¼’tTe
) ||

217 (
DOOR_UP_CLOSING_2
 =ğ
cu¼’tTe
) ||

218 (
DOOR_UP_CLOSED
 =ğ
cu¼’tTe
)

222 
doÜTrigg”
[
doÜCouÁ”
].
äameD–ay
 = 
doÜF¿meD–ay
;

223 
doÜTrigg”
[
doÜCouÁ”
].
ÃxtF¿me
 = 0.0f;

224 
doÜTrigg”
[
doÜCouÁ”
].
m­Pos
 = 
i
;

225 
doÜTrigg”
[
doÜCouÁ”
].
m­X
 = 
de¡X
;

226 
doÜTrigg”
[
doÜCouÁ”
].
m­Y
 = 
de¡Y
;

228 ià((
DOOR_UP
 =ğ
cu¼’tTe
è|| (
DOOR_UP_OPEN_1
 =ğcu¼’tTeè|| (
DOOR_UP_OPEN_2
 =ğcu¼’tTeè|| (
DOOR_UP_OPENED
 =ğcu¼’tTeè|| (
DOOR_UP_CLOSING_1
 =ğcu¼’tTeè|| (
DOOR_UP_CLOSING_2
 =ğcu¼’tTeè|| (
DOOR_UP_CLOSED
 == currentTile))

230 
doÜTrigg”
[
doÜCouÁ”
].
cu¼’tF¿me
 = 
DOOR_UP_CLOSED
;

232 
doÜTrigg”
[
doÜCouÁ”
].
tİLeá
.
x
 = (
sourûX
 * 
TILE_SIZE
) - TILE_SIZE;

233 
doÜTrigg”
[
doÜCouÁ”
].
tİLeá
.
y
 = (
sourûY
 * 
TILE_SIZE
) - (TILE_SIZE / 2);

235 
doÜTrigg”
[
doÜCouÁ”
].
tİRight
.
x
 = (
sourûX
 * 
TILE_SIZE
) + (TILE_SIZE * 2);

236 
doÜTrigg”
[
doÜCouÁ”
].
tİRight
.
y
 = (
sourûY
 * 
TILE_SIZE
) - (TILE_SIZE / 2);

238 
doÜTrigg”
[
doÜCouÁ”
].
bÙLeá
.
x
 = (
sourûX
 * 
TILE_SIZE
) - TILE_SIZE;

239 
doÜTrigg”
[
doÜCouÁ”
].
bÙLeá
.
y
 = (
sourûY
 * 
TILE_SIZE
) + (TILE_SIZE) + (TILE_SIZE / 2);

241 
doÜTrigg”
[
doÜCouÁ”
].
bÙRight
.
x
 = (
sourûX
 * 
TILE_SIZE
) + (TILE_SIZE * 2);

242 
doÜTrigg”
[
doÜCouÁ”
].
bÙRight
.
y
 = (
sourûY
 * 
TILE_SIZE
) + (TILE_SIZE) + (TILE_SIZE / 2);

244 
ûÁ”
.
x
 = (
sourûX
 * 
TILE_SIZE
) + (TILE_SIZE / 2);

245 
ûÁ”
.
y
 = (
sourûY
 * 
TILE_SIZE
) + (TILE_SIZE / 2);

246 
width
 = 
TILE_SIZE
 / 3;

247 
height
 = 
TILE_SIZE
;

251 
doÜTrigg”
[
doÜCouÁ”
].
cu¼’tF¿me
 = 
DOOR_ACROSS
;

252 
doÜTrigg”
[
doÜCouÁ”
].
tİLeá
.
x
 = (
sourûX
 * 
TILE_SIZE
) - (TILE_SIZE / 2);

253 
doÜTrigg”
[
doÜCouÁ”
].
tİLeá
.
y
 = (
sourûY
 * 
TILE_SIZE
) - (TILE_SIZE);

255 
doÜTrigg”
[
doÜCouÁ”
].
tİRight
.
x
 = (
sourûX
 * 
TILE_SIZE
) + (TILE_SIZE) + (TILE_SIZE / 2);

256 
doÜTrigg”
[
doÜCouÁ”
].
tİRight
.
y
 = (
sourûY
 * 
TILE_SIZE
) - (TILE_SIZE);

258 
doÜTrigg”
[
doÜCouÁ”
].
bÙLeá
.
x
 = (
sourûX
 * 
TILE_SIZE
) - (TILE_SIZE / 2);

259 
doÜTrigg”
[
doÜCouÁ”
].
bÙLeá
.
y
 = (
sourûY
 * 
TILE_SIZE
) + (TILE_SIZE * 2);

261 
doÜTrigg”
[
doÜCouÁ”
].
bÙRight
.
x
 = (
sourûX
 * 
TILE_SIZE
) + (TILE_SIZE) + (TILE_SIZE / 2);

262 
doÜTrigg”
[
doÜCouÁ”
].
bÙRight
.
y
 = (
sourûY
 * 
TILE_SIZE
) + (TILE_SIZE * 2);

264 
ûÁ”
.
x
 = (
sourûX
 * 
TILE_SIZE
) + (TILE_SIZE / 2);

265 
ûÁ”
.
y
 = (
sourûY
 * 
TILE_SIZE
);

266 
width
 = 
TILE_SIZE
;

267 
height
 = 
TILE_SIZE
 / 3;

269 
	`sys_ü—‹DoÜS’sÜ
(
doÜCouÁ”
, 
width
, 
height
, 
ûÁ”
);

270 
doÜCouÁ”
++;

273 
de¡X
++;

274 
sourûX
++;

275 ià(
de¡X
 =ğ(
shLev–
[
cu¼’tLev–
].
Ëv–Dim’siÚs
.
x
))

277 
de¡X
 = 0;

278 
sourûX
 = 0;

279 
de¡Y
++;

280 
sourûY
++;

283 
numDoÜsOnLev–
 = 
doÜCouÁ”
;

284 
	}
}

	@../src/game/gam_droid.cpp

1 
	~"../../hdr/sys_glob®s.h
"

3 
ıVeù
 
	gsü“nPos
;

4 
	gex¶odeF¿meD–ay
;

5 
	gba£DroidAnim©eV®ue
;

6 
	gmaxDi¡ªûFromP©h
;

7 
	gmoveBackToLšeSegm’t
;

8 
	gcŞlisiÚDamageInæiùed
;

9 
	gcŞlisiÚEx¶osiÚDamage
;

11 
	gwayPoštDe¡š©iÚSize
;

12 
	gh—lšgTim”
;

17 
	$drd_upd©eDroidPos™iÚ
(
whichDroid
)

20 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
wÜldPos
 = 
	`ıBodyG‘Pos™iÚ
(shLev–[cu¼’tLev–].droid[whichDroid].
body
);

21 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
wÜldPos
.
x
 -ğ
TILE_SIZE
 / 2;

22 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
wÜldPos
.
y
 -ğ
TILE_SIZE
 / 2;

24 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
wÜldPosMiddË
.
x
 = shLev–[cu¼’tLev–].droid[whichDroid].
wÜldPos
.x + (
SPRITE_SIZE
 / 2);

25 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
wÜldPosMiddË
.
y
 = shLev–[cu¼’tLev–].droid[whichDroid].
wÜldPos
.y + (
SPRITE_SIZE
 / 2);

26 
	}
}

33 
	$drd_damageToDroid
(
whichLev–
, 
whichDroid
, 
damageSourû
, 
sourûDroid
)

36 
damageSourû
)

38 
DAMAGE_BULLET
:

39 ià(-1 =ğ
sourûDroid
)

46 ià(
Œue
 =ğ
d©aBa£EÁry
[
¶ay”DroidTy³DBIndex
].
ÿnShoÙ
)

47 
shLev–
[
whichLev–
].
droid
[
whichDroid
].
cu¼’tH—Éh
 -ğ
d©aBa£EÁry
[
¶ay”DroidTy³DBIndex
].
buÎ‘Damage
;

49 
shLev–
[
whichLev–
].
droid
[
whichDroid
].
cu¼’tH—Éh
 -ğ
d©aBa£EÁry
[0].
buÎ‘Damage
;

51 ià(
shLev–
[
whichLev–
].
droid
[
whichDroid
].
cu¼’tH—Éh
 <= 0)

53 
	`gam_de¡royDroid
(
whichLev–
, 
whichDroid
);

57 
	`sys_¶aySound
(
SND_DAMAGE
, 0.0f, 
ALLEGRO_PLAYMODE_ONCE
);

64 
shLev–
[
whichLev–
].
droid
[
whichDroid
].
cu¼’tH—Éh
 -ğ
d©aBa£EÁry
[shLev–[whichLev–].droid[
sourûDroid
].
droidTy³
].
buÎ‘Damage
;

65 
	`sys_¶aySound
(
SND_DAMAGE
, 0.0f, 
ALLEGRO_PLAYMODE_ONCE
);

67 if(
shLev–
[
whichLev–
].
droid
[
whichDroid
].
cu¼’tH—Éh
 <= 0)

69 
	`gam_de¡royDroid
(
whichLev–
, 
whichDroid
);

75 
DAMAGE_EXPLOSION
:

76 ià(-1 =ğ
sourûDroid
)

80 
	`gam_doDamageToPÏy”
(
DAMAGE_EXPLOSION
, 
whichDroid
);

86 
	`sys_¶aySound
(
SND_DAMAGE
, 0.0f, 
ALLEGRO_PLAYMODE_ONCE
);

87 
shLev–
[
whichLev–
].
droid
[
whichDroid
].
cu¼’tH—Éh
 -ğ
cŞlisiÚEx¶osiÚDamage
;

89 ià(
shLev–
[
whichLev–
].
droid
[
whichDroid
].
cu¼’tH—Éh
 <= 0)

91 
	`gam_de¡royDroid
(
whichLev–
, 
whichDroid
);

96 
DAMAGE_COLLISION
:

97 ià(-1 =ğ
sourûDroid
)

99 
	`gam_doDamageToPÏy”
(
DAMAGE_COLLISION
, 
whichDroid
);

101 
shLev–
[
whichLev–
].
droid
[
whichDroid
].
cu¼’tH—Éh
 -ğ
cŞlisiÚDamageInæiùed
;

102 if(
shLev–
[
whichLev–
].
droid
[
whichDroid
].
cu¼’tH—Éh
 <= 0)

104 
	`gam_de¡royDroid
(
whichLev–
, 
whichDroid
);

109 
	}
}

114 
	$gam_š™DroidV®ues
(
whichLev–
)

117 
waypoštCouÁ
 = 1;

119 
shLev–
[
whichLev–
].
droid
.
	`»£rve
(shLev–[whichLev–].
numDroids
);

121 
i
 = 0; i !ğ
shLev–
[
whichLev–
].
numDroids
; i++)

123 
shLev–
[
whichLev–
].
droid
[
i
].
droidTy³
 = shLev–[whichLev–].
droidTy³s
[i];

124 
shLev–
[
whichLev–
].
droid
[
i
].
cu¼’tH—Éh
 = 
d©aBa£EÁry
[shLev–[whichLev–].droid[i].
droidTy³
].
maxH—Éh
;

125 
shLev–
[
whichLev–
].
droid
[
i
].
isAlive
 = 
Œue
;

126 
shLev–
[
whichLev–
].
droid
[
i
].
wayPoštIndex
 = 
waypoštCouÁ
++;

127 
shLev–
[
whichLev–
].
droid
[
i
].
wÜldPos
.
x
 = shLev–[whichLev–].
wayPošts
[shLev–[whichLev–].droid[i].
wayPoštIndex
].x;

128 
shLev–
[
whichLev–
].
droid
[
i
].
wÜldPos
.
y
 = shLev–[whichLev–].
wayPošts
[shLev–[whichLev–].droid[i].
wayPoštIndex
].y;

130 
shLev–
[
whichLev–
].
droid
[
i
].
sü“nPos
 = 
	`sys_wÜldToSü“n
(shLev–[whichLev–].droid[i].
wÜldPos
, 
DROID_BODY_SIZE
);

131 
shLev–
[
whichLev–
].
droid
[
i
].
wayPoštDœeùiÚ
 = 
WAYPOINT_UP
;

132 
shLev–
[
whichLev–
].
droid
[
i
].
cŞlisiÚCouÁ
 = 0.0f;

133 
shLev–
[
whichLev–
].
droid
[
i
].
ignÜeCŞlisiÚs
 = 
çl£
;

134 
shLev–
[
whichLev–
].
droid
[
i
].
ignÜeCŞlisiÚsCouÁ”
 = 
IGNORE_COLLISION_TIME
;

136 
shLev–
[
whichLev–
].
droid
[
i
].
visibËToPÏy”
 = 
çl£
;

137 
shLev–
[
whichLev–
].
droid
[
i
].
isEx¶odšg
 = 
çl£
;

138 
shLev–
[
whichLev–
].
droid
[
i
].
isStİ³d
 = 
çl£
;

139 
shLev–
[
whichLev–
].
droid
[
i
].
hasCŞlided
 = 
çl£
;

140 
shLev–
[
whichLev–
].
droid
[
i
].
cu¼’tF¿meD–ay
 = 0.0f;

141 
shLev–
[
whichLev–
].
droid
[
i
].
cu¼’tF¿me
 = 5;

142 
shLev–
[
whichLev–
].
droid
[
i
].
w—pÚCªFœe
 = 
Œue
;

143 
shLev–
[
whichLev–
].
droid
[
i
].
w—pÚD–ay
 = 0.0f;

144 
shLev–
[
whichLev–
].
droid
[
i
].
mass
 = 
	`©oi
(
d©aBa£EÁry
[shLev–[whichLev–].droid[i].
droidTy³
].
weight
);

146 
shLev–
[
whichLev–
].
droid
[
i
].
ai_moveMode
 = 
AI_MODE_WAYPOINT
;

147 
shLev–
[
whichLev–
].
droid
[
i
].
ÚH—lšgTe
 = 
çl£
;

148 
shLev–
[
whichLev–
].
droid
[
i
].
foundH—lšgTe
 = 
çl£
;

149 
shLev–
[
whichLev–
].
droid
[
i
].
aSrIn™DÚe
 = 
çl£
;

150 
shLev–
[
whichLev–
].
droid
[
i
].
»tuºToOrigš
 = 
çl£
;

151 
shLev–
[
whichLev–
].
droid
[
i
].
foundOrigšPos™iÚ
 = 
çl£
;

152 
shLev–
[
whichLev–
].
droid
[
i
].
ÜigšPos™iÚ
 = 
ıVeù
 {0,0};

153 
shLev–
[
whichLev–
].
droid
[
i
].
foundOrigšP©h
 = 
çl£
;

156 
shLev–
[
cu¼’tLev–
].
droid
[
i
].
isNÙP©rŞlšg
 = 
çl£
;

157 
shLev–
[
cu¼’tLev–
].
droid
[
i
].
de¡S‘
 = 
çl£
;

158 
shLev–
[
cu¼’tLev–
].
droid
[
i
].
»sumeDe¡Found
 = 
çl£
;

159 
shLev–
[
cu¼’tLev–
].
droid
[
i
].
»sumeTh»adS¹ed
 = 
çl£
;

161 
shLev–
[
whichLev–
].
droid
[
i
].
wÜldPosMiddË
.
x
 = shLev–[whichLev–].droid[i].
wÜldPos
.x + (
SPRITE_SIZE
 / 2);

162 
shLev–
[
whichLev–
].
droid
[
i
].
wÜldPosMiddË
.
y
 = shLev–[whichLev–].droid[i].
wÜldPos
.y + (
SPRITE_SIZE
 / 2);

163 
shLev–
[
whichLev–
].
droid
[
i
].
h—lšgCouÁ
 = 0.0f;

164 
shLev–
[
whichLev–
].
droid
[
i
].
foundWPTe
 = 
çl£
;

166 
shLev–
[
whichLev–
].
droid
[
i
].
numb”P©hNodes
 = 0;

167 
shLev–
[
whichLev–
].
droid
[
i
].
aSrP©hIndex
 = -1;

172 
shLev–
[
whichLev–
].
droid
[
i
].
´eviousWaypošts
 = shLev–[whichLev–].droid[i].
wÜldPos
;

175 
shLev–
[
whichLev–
].
droid
[
i
].
wayPoštIndex
++;

177 if(
shLev–
[
whichLev–
].
droid
[
i
].
wayPoštIndex
 >ğshLev–[whichLev–].
numWaypošts
)

178 
shLev–
[
whichLev–
].
droid
[
i
].
wayPoštIndex
 = 0;

180 
shLev–
[
whichLev–
].
droid
[
i
].
de¡š©iÚCoÜds
.
x
 = shLev–[whichLev–].
wayPošts
[shLev–[whichLev–].droid[i].
wayPoštIndex
].x;

181 
shLev–
[
whichLev–
].
droid
[
i
].
de¡š©iÚCoÜds
.
y
 = shLev–[whichLev–].
wayPošts
[shLev–[whichLev–].droid[i].
wayPoštIndex
].y;

183 
	}
}

188 
	$drd_g‘Ov”WhichTe
(
whichDroid
)

191 
‹mpPosX
, 
‹mpPosY
;

194 
‹mpPosX
 = ()
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
wÜldPosMiddË
.
x
 / 
TILE_SIZE
;

195 
‹mpPosY
 = ()
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
wÜldPosMiddË
.
y
 / 
TILE_SIZE
;

197 if(
‹mpPosX
 < 0)

199 
	`´štf
("E¼Ü: X [ %˜] Y [ %˜]\n", 
‹mpPosX
, 
‹mpPosY
);

200 
	`´štf
("WÜld [ %3.2à: %3.2à]\n", 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
wÜldPos
.
x
, shLev–[cu¼’tLev–].droid[whichDroid].wÜldPos.
y
);

205 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
ov”TeMiddË
 = shLev–[cu¼’tLev–].
tes
[(
‹mpPosY
 * (shLev–[cu¼’tLev–].
Ëv–Dim’siÚs
.
x
è+ 
‹mpPosX
)];

207 
	}
}

212 
	$gam_d¿wAÎDroids
(
whichLev–
)

215 
i
 = 0; i !ğ
shLev–
[
whichLev–
].
numDroids
; i++)

217 
sü“nPos
 = 
	`sys_wÜldToSü“n
(
shLev–
[
whichLev–
].
droid
[
i
].
wÜldPos
, 
DROID_BODY_SIZE
);

219 ià((
Œue
 =ğ
shLev–
[
whichLev–
].
droid
[
i
].
visibËToPÏy”
è&& (Œu=ğshLev–[whichLev–].droid[i].
isAlive
))

221 if(
çl£
 =ğ
shLev–
[
whichLev–
].
droid
[
i
].
isEx¶odšg
)

223 
	`gam_d¿wS´™e
(
shLev–
[
whichLev–
].
droid
[
i
].
cu¼’tF¿me
, 
d©aBa£EÁry
[shLev–[whichLev–].droid[i].
droidTy³
].
imageIndex
, 
sü“nPos
, -1.0f, 
	`®_m­_rgb_f
(0.0f, 0.0f, 0.0f));

225 
ıVeù
 
cu¼’tPos
 = 
	`ıBodyG‘Pos™iÚ
(
shLev–
[
whichLev–
].
droid
[
i
].
body
);

226 
ıVeù
 
sÿËd
 = 
	`ıvmuÉ
(
shLev–
[
whichLev–
].
droid
[
i
].
v–oc™y
, 35);

227 
sÿËd
 = 
	`ıvnÜm®ize
(scaled);

228 
sÿËd
 = 
	`ıvmuÉ
(scaled, 55);

229 
ıVeù
 
dœeùiÚ
 = 
	`ıvadd
(
cu¼’tPos
, 
sÿËd
);

232 
cu¼’tPos
 = 
	`sys_wÜldToSü“n
(currentPos, 35);

233 
dœeùiÚ
 = 
	`sys_wÜldToSü“n
(direction, 35);

235 
	`®_d¿w_lše
(
cu¼’tPos
.
x
, cu¼’tPos.
y
, 
dœeùiÚ
.x, dœeùiÚ.y, 
	`®_m­_rgb_f
(1.0f, 1.0f, 1.0f), 2);

240 
	`gam_d¿wS´™e
(
shLev–
[
whichLev–
].
droid
[
i
].
cu¼’tF¿me
, 
ex¶osiÚ
, 
sü“nPos
, -1.0f, 
	`®_m­_rgb_f
(1.0f, 1.0f, 1.0f));

248 if(
šT¿nsãrMode
 =ğ
Œue
)

249 
	`gam_d¿wS´™e
(
¶ay”Cu¼’tF¿me
, 
¶ay”DroidTy³Image
, 
¶ay”Sü“nPos
, -1.0f, 
	`®_m­_rgba_f
(0.0f, 0.0f, 1.0f, 1.0f));

251 
	`gam_d¿wS´™e
(
¶ay”Cu¼’tF¿me
, 
¶ay”DroidTy³Image
, 
¶ay”Sü“nPos
, -1.0f, 
	`®_m­_rgba_f
(1.0f, 1.0f, 1.0f, 1.0f));

252 
	}
}

260 
	$gam_droidW—pÚCh¬ge
(
whichLev–
, 
whichDroid
)

263 ià(
Œue
 =ğ
shLev–
[
whichLev–
].
droid
[
whichDroid
].
w—pÚCªFœe
)

266 
shLev–
[
whichLev–
].
droid
[
whichDroid
].
w—pÚD–ay
 +ğ
d©aBa£EÁry
[shLev–[whichLev–].droid[whichDroid].
droidTy³
].
»ch¬geTime
 * 
thškIÁ”v®
;

268 ià(
shLev–
[
whichLev–
].
droid
[
whichDroid
].
w—pÚD–ay
 > 1.0f)

270 
shLev–
[
whichLev–
].
droid
[
whichDroid
].
w—pÚD–ay
 = 0.0f;

271 
shLev–
[
whichLev–
].
droid
[
whichDroid
].
w—pÚCªFœe
 = 
Œue
;

273 
	}
}

278 
	$gam_ªim©eDroid
(
whichLev–
, 
whichDroid
)

281 
ªimS³ed
;

283 ià(
çl£
 =ğ
shLev–
[
whichLev–
].
droid
[
whichDroid
].
isEx¶odšg
)

285 
ªimS³ed
 = 
ba£DroidAnim©eV®ue
 * (
shLev–
[
whichLev–
].
droid
[
whichDroid
].
cu¼’tH—Éh
 / 
d©aBa£EÁry
[shLev–[whichLev–].droid[whichDroid].
droidTy³
].
maxH—Éh
);

286 
ªimS³ed
 += 10.0f;

287 ià(
ªimS³ed
 > 
ba£DroidAnim©eV®ue
)

288 
ªimS³ed
 = 
ba£DroidAnim©eV®ue
;

292 
ªimS³ed
 = 
ex¶odeF¿meD–ay
;

295 
shLev–
[
whichLev–
].
droid
[
whichDroid
].
cu¼’tF¿meD–ay
 +ğ
ªimS³ed
 * 
thškIÁ”v®
;

297 ià(
shLev–
[
whichLev–
].
droid
[
whichDroid
].
cu¼’tF¿meD–ay
 > 1.0f)

299 
shLev–
[
whichLev–
].
droid
[
whichDroid
].
cu¼’tF¿meD–ay
 = 0.0f;

300 
shLev–
[
whichLev–
].
droid
[
whichDroid
].
cu¼’tF¿me
++;

303 ià(
çl£
 =ğ
shLev–
[
whichLev–
].
droid
[
whichDroid
].
isEx¶odšg
)

305 if(
shLev–
[
whichLev–
].
droid
[
whichDroid
].
cu¼’tF¿me
 > 
NUM_FRAMES_IN_DROID
)

306 
shLev–
[
whichLev–
].
droid
[
whichDroid
].
cu¼’tF¿me
 = 0;

310 ià(
shLev–
[
whichLev–
].
droid
[
whichDroid
].
cu¼’tF¿me
 > 
NUM_FRAMES_IN_EXPLOSION
)

312 
shLev–
[
whichLev–
].
droid
[
whichDroid
].
cu¼’tF¿me
 = 0;

313 
shLev–
[
whichLev–
].
droid
[
whichDroid
].
isAlive
 = 
çl£
;

316 
	}
}

321 
	$gam_¡İDroidMovem’t
(
whichLev–
, 
whichDroid
)

324 
shLev–
[
whichLev–
].
droid
[
whichDroid
].
v–oc™y
.
x
 = 0.0f;

325 
shLev–
[
whichLev–
].
droid
[
whichDroid
].
v–oc™y
.
y
 = 0.0f;

330 
shLev–
[
whichLev–
].
droid
[
whichDroid
].
cu¼’tS³ed
 = 0.0f;

331 
	}
}

336 
	$gam_de¡royDroid
(
whichLev–
, 
whichDroid
)

339 ià(
shLev–
[
whichLev–
].
droid
[
whichDroid
].
droidTy³
 < 6)

340 
	`sys_¶aySound
(
SND_EXPLODE_1
, 0.0f, 
ALLEGRO_PLAYMODE_ONCE
);

342 
	`sys_¶aySound
(
SND_EXPLODE_2
, 0.0f, 
ALLEGRO_PLAYMODE_ONCE
);

344 
shLev–
[
whichLev–
].
droid
[
whichDroid
].
isEx¶odšg
 = 
Œue
;

345 
shLev–
[
whichLev–
].
droid
[
whichDroid
].
cu¼’tF¿me
 = 0;

346 
shLev–
[
whichLev–
].
droid
[
whichDroid
].
cu¼’tF¿meD–ay
 = 0.0f;

347 
shLev–
[
whichLev–
].
droid
[
whichDroid
].
isStİ³d
 = 
Œue
;

348 
	`gam_addToScÜe
(
d©aBa£EÁry
[
shLev–
[
whichLev–
].
droid
[
whichDroid
].
droidTy³
].
scÜe
);

350 ià(
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
aSrP©hIndex
 > -1)

351 
	`gam_ASrRemoveP©h
(
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
aSrP©hIndex
);

353 
	`sys_»moveDroidCPInfo
(
whichDroid
);

355 
	`·r_š™Em™‹r
(
shLev–
[
whichLev–
].
droid
[
whichDroid
].
wÜldPosMiddË
, 
PARTICLE_TYPE_EXPLOSION
, -1);

357 
shLev–
[
whichLev–
].
numEÃm›sAlive
--;

359 ià(0 =ğ
shLev–
[
whichLev–
].
numEÃm›sAlive
)

361 
	`gam_pow”DownLev–
(
whichLev–
, 
Œue
);

363 
	}
}

369 
	$gam_šüem’tCŞlisiÚCouÁ
(
whichLev–
, 
droid1
, 
droid2
)

372 
loÿlCouÁ”
 = 0.0f;

374 
loÿlCouÁ”
 +ğ1.0à* 
thškIÁ”v®
;

376 ià(
loÿlCouÁ”
 > 10.0f)

378 
loÿlCouÁ”
 = 0.0f;

379 
shLev–
[
whichLev–
].
droid
[
droid1
].
cŞlisiÚCouÁ
++;

380 
shLev–
[
whichLev–
].
droid
[
droid2
].
cŞlisiÚCouÁ
++;

382 ià(
shLev–
[
whichLev–
].
droid
[
droid1
].
cŞlisiÚCouÁ
 > 10.0f)

384 
shLev–
[
whichLev–
].
droid
[
droid1
].
ignÜeCŞlisiÚs
 = 
Œue
;

385 
shLev–
[
whichLev–
].
droid
[
droid1
].
ignÜeCŞlisiÚsCouÁ”
 = 1.0f;

388 ià(
shLev–
[
whichLev–
].
droid
[
droid2
].
cŞlisiÚCouÁ
 > 10.0f)

390 
shLev–
[
whichLev–
].
droid
[
droid2
].
ignÜeCŞlisiÚs
 = 
Œue
;

391 
shLev–
[
whichLev–
].
droid
[
droid2
].
ignÜeCŞlisiÚsCouÁ”
 = 1.0f;

394 
	}
}

399 
	$gam_´oûssIgnÜeCŞlisiÚs
(
whichLev–
, 
whichDroid
)

402 
cŞlideIndex
;

404 ià(
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
cŞlisiÚCouÁ
 < (
	`¿nd
() % 5) + 3)

409 
shLev–
[
whichLev–
].
droid
[
whichDroid
].
ignÜeCŞlisiÚs
 = 
Œue
;

411 
shLev–
[
whichLev–
].
droid
[
whichDroid
].
ignÜeCŞlisiÚsCouÁ”
 -ğ1.0à* 
thškIÁ”v®
;

413 ià(
shLev–
[
whichLev–
].
droid
[
whichDroid
].
ignÜeCŞlisiÚsCouÁ”
 < 0.0f)

415 
shLev–
[
whichLev–
].
droid
[
whichDroid
].
ignÜeCŞlisiÚsCouÁ”
 = 
IGNORE_COLLISION_TIME
;

416 
shLev–
[
whichLev–
].
droid
[
whichDroid
].
ignÜeCŞlisiÚs
 = 
çl£
;

417 
shLev–
[
whichLev–
].
droid
[
whichDroid
].
cŞlisiÚCouÁ
 = 0;

418 
shLev–
[
whichLev–
].
droid
[
whichDroid
].
hasCŞlided
 = 
çl£
;

420 
	}
}

	@../src/game/gam_droidAI.cpp

1 
	~"../../hdr/sys_glob®s.h
"

5 
	gveùÜ
<
	g_aiNode
> 
	gaiT»e
;

6 
	gcu¼’tAINode
 = 0;

7 
boŞ
 
	gbackToAIRoÙ
 = 
çl£
;

12 
	$ai_£tupAIT»e
 ()

15 
_aiNode
 
‹mpNode
;

17 
‹mpNode
.
·»ÁIndex
 = -1;

18 
‹mpNode
.
nodeTy³
 = 
AI_NODE_SEQUENCE
;

19 
‹mpNode
.
nodeName
 = "ROOT_NODE";

20 
‹mpNode
.
numChd»n
 = 0;

21 
‹mpNode
.
chdVis™edCouÁ”
 = 0;

22 
‹mpNode
.
funùiÚResuÉ
 = 
AI_RESULT_INVALID
;

24 
aiT»e
.
	`push_back
 (
‹mpNode
);

29 
	`ai_addNode
 (
AI_NODE_SELECTOR
, "ROOT_NODE", "AI_HEALTHY", 
NULL
);

30 
	`ai_addNode
 (
AI_NODE_EXECUTE
, "AI_HEALTHY", "CHECK_HEALTH", &
ai_isDroidH—Éhy
);

31 
	`ai_addNode
 (
AI_NODE_EXECUTE
, "AI_HEALTHY", "ON_HEALING", &
ai_ÚH—lšgTe
);

32 
	`ai_addNode
 (
AI_NODE_EXECUTE
, "AI_HEALTHY", "REACHED_HEALTH", &
ai_»achedH—lšgTe
);

37 
	`ai_addNode
 (
AI_NODE_SELECTOR
, "ROOT_NODE", "AI_RESUME", 
NULL
);

38 
	`ai_addNode
 (
AI_NODE_EXECUTE
, "AI_RESUME", "IS_NOT_PATROLLING",&
ai_isNÙP©rŞlšg
);

39 
	`ai_addNode
 (
AI_NODE_EXECUTE
, "AI_RESUME", "SET_DEST", &
ai_ÚResumeDe¡
);

40 
	`ai_addNode
 (
AI_NODE_EXECUTE
, "AI_RESUME", "FIND_DEST_PATH", &
ai_»achedResumeDe¡
);

53 
	`ai_addNode
 (
AI_NODE_SEQUENCE
, "ROOT_NODE", "AI_PATROL", 
NULL
);

54 
	`ai_addNode
 (
AI_NODE_SELECTOR
, "AI_PATROL", "AI_MOVE", 
NULL
);

55 
	`ai_addNode
 (
AI_NODE_EXECUTE
, "AI_MOVE", "CAN_MOVE", &
ai_ÿnMove
);

56 
	`ai_addNode
 (
AI_NODE_EXECUTE
, "AI_MOVE", "AI_REVERSE", &
ai_ÿnRev”£DœeùiÚ
);

57 
	`ai_addNode
 (
AI_NODE_EXECUTE
, "AI_PATROL", "MOVE_TO", &
ai_moveDroidToWaypošt
);

58 
	`ai_addNode
 (
AI_NODE_EXECUTE
, "AI_PATROL", "FIND_WP", &
ai_g‘NextWaypošt
);

65 
	}
}

70 
	$ai_fšdNode
 (
¡ršg
 
nodeName
)

73 
šdexCouÁ
 = 0;

75 
veùÜ
<
_aiNode
>::
™”©Ü
 
™
 = 
aiT»e
.
	`begš
 (); iˆ!ğaiT»e.
	`’d
 (); ++it)

77 ià(
™
->
nodeName
 ==‚odeName)

79  
šdexCouÁ
;

82 
šdexCouÁ
++;

86 
	}
}

91 
boŞ
 
	$ai_addNode
 (
nodeTy³
, 
¡ršg
 
·»ÁNode
, sŒšg 
nodeName
, 
Ex‹ºFunc
 
funùiÚPŒ
)

94 
nodeIndex
;

95 
_aiNode
 
‹mpAINode
;

97 
nodeIndex
 = 
	`ai_fšdNode
 (
·»ÁNode
);

99 ià(-1 =ğ
nodeIndex
)

101 
	`cÚ_´št
 (
Œue
,rue, "Error: Couldn't find‚ode inree");

102  
çl£
;

105 
‹mpAINode
.
nodeTy³
 =‚odeType;

106 
‹mpAINode
.
nodeName
 =‚odeName;

107 
‹mpAINode
.
funùiÚName
 = 
funùiÚPŒ
;

108 
‹mpAINode
.
funùiÚResuÉ
 = 
AI_RESULT_INVALID
;

109 
‹mpAINode
.
·»ÁIndex
 = 
nodeIndex
;

110 
‹mpAINode
.
chdVis™edCouÁ”
 = 0;

111 
‹mpAINode
.
numChd»n
 = 0;

113 
aiT»e
.
	`push_back
 (
‹mpAINode
);

115 
aiT»e
[
nodeIndex
].
numChd»n
++;

116 
aiT»e
[
nodeIndex
].
chdIndex
.
	`push_back
 (
	`ai_fšdNode
 (
nodeName
));

118 
	`io_logToFe
 ("Node [ %s ]‡dded. Num Children for [ %s ]‚ow [ %i ]",

119 
nodeName
.
	`c_¡r
 (),

120 
aiT»e
[
nodeIndex
].
nodeName
.
	`c_¡r
 (),

121 
aiT»e
[
nodeIndex
].
numChd»n
);

123 
	`io_logToFe
 ("Chd index s‘Ø[ %˜]", 
	`ai_fšdNode
 (
nodeName
));

125  
Œue
;

126 
	}
}

131 
¡ršg
 
	$ai_g‘ResuÉText
 (
whichCode
)

134 
whichCode
)

136 
AI_RESULT_FAILED
:

140 
AI_RESULT_RUNNING
:

144 
AI_RESULT_SUCCESS
:

148 
AI_RESULT_INVALID
:

154 
	}
}

160 
boŞ
 
	$ai_vis™edAÎChdNodes
 (
whichNode
)

163 ià(-1 =ğ
whichNode
)

164  
çl£
;

166 ià(
aiT»e
[
whichNode
].
chdVis™edCouÁ”
 =ğaiT»e[whichNode].
numChd»n
)

168 
aiT»e
[
whichNode
].
chdVis™edCouÁ”
 = 0;

170 ià(-1 =ğ
aiT»e
[
cu¼’tAINode
].
·»ÁIndex
)

172 
aiT»e
[0].
funùiÚResuÉ
 =‡iT»e[
whichNode
].functionResult;

173 
aiT»e
[0].
funùiÚResuÉ
 = 
AI_RESULT_INVALID
;

177 
aiT»e
[aiT»e[
whichNode
].
·»ÁIndex
].
funùiÚResuÉ
 =‡iTree[whichNode].functionResult;

178 
aiT»e
[
whichNode
].
funùiÚResuÉ
 = 
AI_RESULT_INVALID
;

181  
Œue
;

184  
çl£
;

185 
	}
}

191 
boŞ
 
	$ai_checkRoÙNode
 (
whichNode
)

194 ià(
whichNode
 > 0)

195  
çl£
;

197 ià(
whichNode
 == -1)

198  
Œue
;

200 ià(
aiT»e
[0].
chdVis™edCouÁ”
 =ğaiT»e[0].
numChd»n
)

202 
aiT»e
[0].
chdVis™edCouÁ”
 = 0;

204 
aiT»e
[0].
nodeTy³
)

206 
AI_NODE_SEQUENCE
:

207 ià((
aiT»e
[0].
funùiÚResuÉ
 =ğ
AI_RESULT_FAILED
) ||

208 (
aiT»e
[0].
funùiÚResuÉ
 =ğ
AI_RESULT_RUNNING
))

210 
aiT»e
[0].
funùiÚResuÉ
 = 
AI_RESULT_INVALID
;

211 
backToAIRoÙ
 = 
Œue
;

212  
Œue
;

216  
çl£
;

221 
AI_NODE_SELECTOR
:

222 ià((
aiT»e
[0].
funùiÚResuÉ
 =ğ
AI_RESULT_SUCCESS
) ||

223 (
aiT»e
[0].
funùiÚResuÉ
 =ğ
AI_RESULT_RUNNING
))

225 
aiT»e
[0].
funùiÚResuÉ
 = 
AI_RESULT_INVALID
;

226 
backToAIRoÙ
 = 
Œue
;

227  
Œue
;

231  
çl£
;

237 
	`cÚ_´št
 (
Œue
, 
çl£
, "Error: Invalid‚odeType…assedo‡i_checkRootNode");

242  
çl£
;

243 
	}
}

248 
	$ai_w®kT»e
 (
¡ršg
 
¡¬tNode
, 
whichDroid
)

251 
wheFunùiÚResuÉ
 = 
AI_RESULT_INVALID
;

253 ià(
Œue
 =ğ
backToAIRoÙ
)

256 ià(-1 =ğ
cu¼’tAINode
)

258 
backToAIRoÙ
 = 
Œue
;

262 
cu¼’tAINode
 = 
	`ai_fšdNode
 (
¡¬tNode
);

264 ià(-2 =ğ
cu¼’tAINode
)

270 #ifdeà
AI_DEBUG_TREE


271 
	`cÚ_´št
 (
Œue
,

272 
çl£
,

274 
whichDroid
,

275 
cu¼’tAINode
,

276 
aiT»e
[
cu¼’tAINode
].
nodeName
.
	`c_¡r
 (),

277 
	`ai_g‘ResuÉText
 (
aiT»e
[
cu¼’tAINode
].
funùiÚResuÉ
).
	`c_¡r
 (),

278 
aiT»e
[
cu¼’tAINode
].
chdVis™edCouÁ”
,

279 
aiT»e
[
cu¼’tAINode
].
numChd»n
);

282 ià(
Œue
 =ğ
	`ai_vis™edAÎChdNodes
 (
cu¼’tAINode
))

284 ià(
aiT»e
[
cu¼’tAINode
].
·»ÁIndex
 < 0)

287 
	`ai_w®kT»e
 (
aiT»e
[aiT»e[
cu¼’tAINode
].
·»ÁIndex
].
nodeName
, 
whichDroid
);

292 ià(
Œue
 =ğ
	`ai_checkRoÙNode
 (
cu¼’tAINode
))

295 
aiT»e
[
cu¼’tAINode
].
nodeTy³
)

298 
AI_NODE_ALWAYS_SUCCEED
:

299 ià(
aiT»e
[
cu¼’tAINode
].
·»ÁIndex
 < 0)

301 
aiT»e
[
cu¼’tAINode
].
funùiÚResuÉ
 = 
AI_RESULT_INVALID
;

302 
backToAIRoÙ
 = 
Œue
;

306 
aiT»e
[
cu¼’tAINode
].
funùiÚResuÉ
 = 
AI_RESULT_SUCCESS
;

307 
aiT»e
[aiT»e[
cu¼’tAINode
].
·»ÁIndex
].
funùiÚResuÉ
 = 
AI_RESULT_SUCCESS
;

308 
	`ai_w®kT»e
 (
aiT»e
[aiT»e[
cu¼’tAINode
].
·»ÁIndex
].
nodeName
, 
whichDroid
);

312 
AI_NODE_SEQUENCE
:

314 ià((
aiT»e
[
cu¼’tAINode
].
funùiÚResuÉ
 =ğ
AI_RESULT_FAILED
) ||

315 (
aiT»e
[
cu¼’tAINode
].
funùiÚResuÉ
 =ğ
AI_RESULT_RUNNING
))

317 
aiT»e
[
cu¼’tAINode
].
chdVis™edCouÁ”
 = 0;

319 ià(
aiT»e
[
cu¼’tAINode
].
·»ÁIndex
 < 0)

321 
aiT»e
[
cu¼’tAINode
].
funùiÚResuÉ
 = 
AI_RESULT_INVALID
;

322 
backToAIRoÙ
 = 
Œue
;

326 
aiT»e
[aiT»e[
cu¼’tAINode
].
·»ÁIndex
].
funùiÚResuÉ
 =‡iTree[currentAINode].functionResult;

327 
aiT»e
[
cu¼’tAINode
].
funùiÚResuÉ
 = 
AI_RESULT_INVALID
;

328 
	`ai_w®kT»e
 (
aiT»e
[aiT»e[
cu¼’tAINode
].
·»ÁIndex
].
nodeName
, 
whichDroid
);

334 
AI_NODE_SELECTOR
:

336 ià((
aiT»e
[
cu¼’tAINode
].
funùiÚResuÉ
 =ğ
AI_RESULT_SUCCESS
) ||

337 (
aiT»e
[
cu¼’tAINode
].
funùiÚResuÉ
 =ğ
AI_RESULT_RUNNING
))

339 
aiT»e
[
cu¼’tAINode
].
chdVis™edCouÁ”
 = 0;

341 ià(
aiT»e
[
cu¼’tAINode
].
·»ÁIndex
 < 0)

343 
aiT»e
[
cu¼’tAINode
].
funùiÚResuÉ
 = 
AI_RESULT_INVALID
;

344 
backToAIRoÙ
 = 
Œue
;

348 
aiT»e
[aiT»e[
cu¼’tAINode
].
·»ÁIndex
].
funùiÚResuÉ
 =‡iTree[currentAINode].functionResult;

349 
aiT»e
[
cu¼’tAINode
].
funùiÚResuÉ
 = 
AI_RESULT_INVALID
;

350 
	`ai_w®kT»e
 (
aiT»e
[aiT»e[
cu¼’tAINode
].
·»ÁIndex
].
nodeName
, 
whichDroid
);

357 ià(
aiT»e
[aiT»e[
cu¼’tAINode
].
chdIndex
[aiT»e[cu¼’tAINode].
chdVis™edCouÁ”
]].
nodeTy³
 =ğ
AI_NODE_EXECUTE
)

359 #ifdeà
AI_DEBUG_TREE


360 
	`cÚ_´št
 (

361 
Œue
,

362 
çl£
,

364 
whichDroid
,

365 
aiT»e
[
cu¼’tAINode
].
nodeName
.
	`c_¡r
 (),

366 
aiT»e
[aiT»e[
cu¼’tAINode
].
chdIndex
[aiT»e[cu¼’tAINode].
chdVis™edCouÁ”
]].
nodeName
.
	`c_¡r
 ());

368 
chdIndex
 = 
aiT»e
[
cu¼’tAINode
].
chdVis™edCouÁ”
;

369 
wheFunùiÚResuÉ
 =

370 
aiT»e
[aiT»e[
cu¼’tAINode
].
chdIndex
[chdIndex]].
	`funùiÚName
 (
whichDroid
);

372 ià(
aiT»e
[
cu¼’tAINode
].
nodeTy³
 =ğ
AI_NODE_ALWAYS_SUCCEED
)

373 
aiT»e
[
cu¼’tAINode
].
funùiÚResuÉ
 = 
AI_RESULT_SUCCESS
;

375 
aiT»e
[
cu¼’tAINode
].
funùiÚResuÉ
 = 
wheFunùiÚResuÉ
;

377 
aiT»e
[
cu¼’tAINode
].
chdVis™edCouÁ”
++;

378 
	`ai_w®kT»e
 (
aiT»e
[
cu¼’tAINode
].
nodeName
, 
whichDroid
);

383 
chdIndex
 = 
aiT»e
[
cu¼’tAINode
].
chdVis™edCouÁ”
;

384 
aiT»e
[
cu¼’tAINode
].
chdVis™edCouÁ”
++;

386 
chdPŒ
 = 
aiT»e
[
cu¼’tAINode
].
chdIndex
[childIndex];

387 
	`ai_w®kT»e
 (
aiT»e
[
chdPŒ
].
nodeName
, 
whichDroid
);

392 
	}
}

397 
	$ai_debugT»e
 (
¡ršg
 
¡¬tNode
)

400 ià(
backToAIRoÙ
 =ğ
Œue
)

403 
cu¼’tAINode
 = 
	`ai_fšdNode
 (
¡¬tNode
);

405 ià(-1 =ğ
cu¼’tAINode
)

407 
	`cÚ_´št
 (
Œue
,rue, "Error: Couldn't†ocate start AI‚ode");

411 
	`io_logToFe
 ("Index fÜ [ % ] i [ %˜]", 
¡¬tNode
.
	`c_¡r
 (), 
cu¼’tAINode
);

413 ià((
aiT»e
[
cu¼’tAINode
].
chdVis™edCouÁ”
 =ğaiT»e[cu¼’tAINode].
numChd»n
) &&

414 (
aiT»e
[
cu¼’tAINode
].
numChd»n
 != 0))

416 ià((
aiT»e
[
cu¼’tAINode
].
chdVis™edCouÁ”
 =ğaiT»e[cu¼’tAINode].
numChd»n
) &&

417 (
aiT»e
[
cu¼’tAINode
].
·»ÁIndex
 == -1))

419 
	`io_logToFe
 ("Finished walkingree. Exit");

420 
aiT»e
[
cu¼’tAINode
].
chdVis™edCouÁ”
 = 0;

421 
backToAIRoÙ
 = 
Œue
;

422 
cu¼’tAINode
 = 0;

423 
¡¬tNode
 == "ROOT_NODE";

431 
aiT»e
[
cu¼’tAINode
].
chdVis™edCouÁ”
 = 0;

432 
aiT»e
[aiT»e[
cu¼’tAINode
].
·»ÁIndex
].
chdVis™edCouÁ”
++;

433 
	`ai_debugT»e
 (
aiT»e
[aiT»e[
cu¼’tAINode
].
·»ÁIndex
].
nodeName
);

436 ià(
çl£
 =ğ
backToAIRoÙ
)

438 ià(
aiT»e
[
cu¼’tAINode
].
numChd»n
 == 0)

443 
	`io_logToFe
 ("Parent [ %s ] Child [ %s ]",

444 
aiT»e
[aiT»e[
cu¼’tAINode
].
·»ÁIndex
].
nodeName
.
	`c_¡r
 (),

445 
aiT»e
[
cu¼’tAINode
].
nodeName
.
	`c_¡r
 ());

449 
aiT»e
[aiT»e[
cu¼’tAINode
].
·»ÁIndex
].
chdVis™edCouÁ”
++;

450 
	`ai_debugT»e
 (
aiT»e
[aiT»e[
cu¼’tAINode
].
·»ÁIndex
].
nodeName
);

457 
	`ai_debugT»e
 (

458 
aiT»e
[aiT»e[
cu¼’tAINode
].
chdIndex
[aiT»e[cu¼’tAINode].
chdVis™edCouÁ”
]].
nodeName
);

463 
	}
}

468 
ıVeù
 
	$ai_fšdN—»¡Te
 (
whichDroid
, 
teTy³
)

471 
lowe¡Di¡ªû
, 
di¡ªû
;

472 
lowe¡Index
;

473 
ıVeù
 
‹mpLoÿtiÚ
;

475 
lowe¡Di¡ªû
 = 9999;

477 
teTy³
)

479 
TILE_TYPE_HEALING
:

481 ià(0 =ğ
h—lšg
[0].
numOnLev–
)

483 
‹mpLoÿtiÚ
.
x
 = -1;

484  
‹mpLoÿtiÚ
;

487 ià(1 =ğ
h—lšg
[0].
numOnLev–
)

489 
‹mpLoÿtiÚ
 = 
h—lšg
[0].
wÜldPos™iÚ
;

490  
‹mpLoÿtiÚ
;

495 
lowe¡Di¡ªû
 = 9999;

497 
i
 = 0; i !ğ
h—lšg
[0].
numOnLev–
; i++)

499 
di¡ªû
 =

500 
	`ıvdi¡
 (
h—lšg
[
i
].
wÜldPos™iÚ
, 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
wÜldPos
);

502 ià(
di¡ªû
 < 
lowe¡Di¡ªû
)

504 
lowe¡Di¡ªû
 = 
di¡ªû
;

505 
lowe¡Index
 = 
i
;

509 
‹mpLoÿtiÚ
 = 
h—lšg
[
lowe¡Index
].
wÜldPos™iÚ
;

510  
‹mpLoÿtiÚ
;

513 
TILE_TYPE_NEAREST_WP
:

515 
lowe¡Di¡ªû
 = 9999;

517 
i
 = 0; i !ğ
shLev–
[
cu¼’tLev–
].
numWaypošts
; i++)

519 
‹mpLoÿtiÚ
.
x
 = 
shLev–
[
cu¼’tLev–
].
wayPošts
[
i
].x;

520 
‹mpLoÿtiÚ
.
y
 = 
shLev–
[
cu¼’tLev–
].
wayPošts
[
i
].y;

522 
di¡ªû
 = 
	`ıvdi¡
 (
‹mpLoÿtiÚ
, 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
wÜldPosMiddË
);

524 ià(
di¡ªû
 < 
lowe¡Di¡ªû
)

526 
lowe¡Di¡ªû
 = 
di¡ªû
;

527 
lowe¡Index
 = 
i
;

531 
‹mpLoÿtiÚ
.
x
 = 
shLev–
[
cu¼’tLev–
].
wayPošts
[
lowe¡Index
].x;

532 
‹mpLoÿtiÚ
.
y
 = 
shLev–
[
cu¼’tLev–
].
wayPošts
[
lowe¡Index
].y;

536 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
wayPoštIndex
 = 
lowe¡Index
;

538  
‹mpLoÿtiÚ
;

541 
	}
}

546 
	$ai_fšdBe¡S‹
 (
whichDroid
)

551 ià(
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
cu¼’tH—Éh
 < 30)

553 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
ai_cu¼’tS‹
 = 
AI_STATE_HEALTH
;

554 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
ai_moveMode
 = -1;

560 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
ai_cu¼’tS‹
 = 
AI_STATE_PATROL
;

561 
	}
}

566 
	$drd_ş—rHadCŞlidedFÏg
 ()

569 
i
 = 0; i !ğ
shLev–
[
cu¼’tLev–
].
numDroids
; i++)

571 
shLev–
[
cu¼’tLev–
].
droid
[
i
].
hasCŞlided
 = 
çl£
;

572 ià(
shLev–
[
cu¼’tLev–
].
droid
[
i
].
cŞlisiÚCouÁ
 > 10)

574 
shLev–
[
cu¼’tLev–
].
droid
[
i
].
ignÜeCŞlisiÚs
 = 
Œue
;

575 
shLev–
[
cu¼’tLev–
].
droid
[
i
].
ignÜeCŞlisiÚsCouÁ”
 =

576 
IGNORE_COLLISION_TIME
 * (
	`¿nd
 () % 3);

577 
shLev–
[
cu¼’tLev–
].
droid
[
i
].
cŞlisiÚCouÁ
 = 0;

580 
	}
}

585 
	$drd_´oûssDroidAI
 (
whichLev–
)

588 
i
 = 0; i !ğ
shLev–
[
whichLev–
].
numDroids
; i++)

590 ià((
Œue
 =ğ
shLev–
[
whichLev–
].
droid
[
i
].
isAlive
) &&

591 (
çl£
 =ğ
shLev–
[
whichLev–
].
droid
[
i
].
isEx¶odšg
))

595 
	`ai_fšdBe¡S‹
 (
i
);

597 
backToAIRoÙ
 = 
çl£
;

598 
	`ai_w®kT»e
 ("ROOT_NODE", 
i
);

600 
	`gam_´oûssIgnÜeCŞlisiÚs
 (
whichLev–
, 
i
);

602 
	`gam_droidW—pÚCh¬ge
 (
cu¼’tLev–
, 
i
);

604 
	`drd_g‘Ov”WhichTe
 (
i
);

606 
	`drd_upd©eDroidPos™iÚ
 (
i
);

609 
	`gam_ªim©eDroid
 (
whichLev–
, 
i
);

611 
	}
}

	@../src/game/gam_droidAI_Health.cpp

1 
	~"../../hdr/sys_glob®s.h
"

2 
	~"../../hdr/game/gam_droidAI.h
"

16 
	$ai_isDroidH—Éhy
 (
whichDroid
)

24 ià(
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
cu¼’tH—Éh
 < 30)

26 ià(0 =ğ
h—lšg
[0].
numOnLev–
)

29  
AI_RESULT_SUCCESS
;

31  
AI_RESULT_FAILED
;

35  
AI_RESULT_SUCCESS
;

37 
	}
}

42 
	$ai_ÚH—lšgTe
 (
whichDroid
)

48 ià(
Œue
 =ğ
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
ÚH—lšgTe
)

50 #ifdeà
AI_HEALTH_DEBUG


51 
	`cÚ_´št
 (
Œue
, 
çl£
, "Droid [ %˜] fuÎy h—Ëd", 
whichDroid
);

53 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
cu¼’tH—Éh
 = 
d©aBa£EÁry
[shLev–[cu¼’tLev–].droid[whichDroid].
droidTy³
].
maxH—Éh
;

57 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
isNÙP©rŞlšg
 = 
Œue
;

58 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
ÚResumeDe¡Te
 = 
çl£
;

59 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
de¡S‘
 = 
çl£
;

60 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
aSrIn™DÚe
 = 
çl£
;

61 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
ÚH—lšgTe
 = 
çl£
;

62 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
foundH—lšgTe
 = 
çl£
;

63 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
aSrDe¡š©iÚFound
 = 
çl£
;

64  
AI_RESULT_RUNNING
;

70  
AI_RESULT_FAILED
;

72 
	}
}

77 
	$ai_»achedH—lšgTe
 (
whichDroid
)

80 
ıVeù
 
h—lšgTeLoÿtiÚ
;

81 
ıVeù
 
droidWÜldPosTes
;

83 ià(
çl£
 =ğ
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
foundH—lšgTe
)

85 ià(
çl£
 =ğ
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
aSrIn™DÚe
)

87 
	`cÚ_´št
(
Œue
,rue, "Droid [ %i ] for healing…ath");

88 
debugASrIndex
 = 
whichDroid
;

90 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
aSrIn™DÚe
 = 
Œue
;

91 
h—lšgTeLoÿtiÚ
 = 
	`ai_fšdN—»¡Te
 (
whichDroid
, 
TILE_TYPE_HEALING
);

93 
h—lšgTeLoÿtiÚ
.
x
 = ()h—lšgTeLoÿtiÚ.x / 
TILE_SIZE
;

94 
h—lšgTeLoÿtiÚ
.
y
 = ()h—lšgTeLoÿtiÚ.y / 
TILE_SIZE
;

96 #ifdeà
AI_HEALTH_DEBUG


97 
	`cÚ_´št
 (
Œue
, 
çl£
, "[ %˜] - S¹šg AS¸tØfšd‚—»¡ h—lšge", 
whichDroid
);

99 
droidWÜldPosTes
.
x
 = ()
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
wÜldPosMiddË
.x / 
TILE_SIZE
;

100 
droidWÜldPosTes
.
y
 = ()
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
wÜldPosMiddË
.y / 
TILE_SIZE
;

102 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
aSrP©hIndex
 = 
	`gam_ASrReque¡NewP©h
 (
droidWÜldPosTes
, 
h—lšgTeLoÿtiÚ
, whichDroid);

103 
	`®_¡¬t_th»ad
(
·th
[
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
aSrP©hIndex
].
th»ad
);

110 ià(
Œue
 =ğ
	`gam_ASrIsP©hR—dy
 (
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
aSrP©hIndex
))

112 #ifdeà
AI_HEALTH_DEBUG


113 
	`cÚ_´št
 (
Œue
, 
çl£
, "[ %˜] - HavnÙ foundhAS¸de¡š©iÚ", 
whichDroid
);

115 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
foundH—lšgTe
 = 
Œue
;

116 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
cu¼’tASrIndex
 = 
	`gam_ASrG‘NumWaypošts
(shLev–[cu¼’tLev–].droid[whichDroid].
aSrP©hIndex
);

118 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
ai_moveMode
 = 
AI_MODE_ASTAR
;

119 
	`ai_g‘NextWaypošt
 (
whichDroid
);

121  
AI_RESULT_RUNNING
;

123  
AI_RESULT_FAILED
;

129 ià(
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
ai_moveMode
 =ğ
AI_PATHFIND_END
)

131 #ifdeà
AI_HEALTH_DEBUG


132 
	`cÚ_´št
 (
Œue
,rue, "[ %˜] - Droid ha »ached h—lšge.", 
whichDroid
);

135  
AI_RESULT_SUCCESS
;

139 ià(
AI_RESULT_SUCCESS
 =ğ
	`ai_moveDroidToWaypošt
 (
whichDroid
))

141 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
ai_moveMode
 = 
AI_MODE_ASTAR
;

142 ià(
AI_RESULT_FAILED
 =ğ
	`ai_g‘NextWaypošt
 (
whichDroid
))

144 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
ai_moveMode
 = 
AI_PATHFIND_END
;

146 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
ÚH—lšgTe
 = 
Œue
;

147 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
foundH—lšgTe
 = 
çl£
;

148 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
aSrIn™DÚe
 = 
çl£
;

149 
	`gam_ASrRemoveP©h
 (
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
aSrP©hIndex
);

152  
AI_RESULT_RUNNING
;

155  
AI_RESULT_RUNNING
;

156 
	}
}

	@../src/game/gam_droidAI_Patrol.cpp

1 
	~"../../hdr/sys_glob®s.h
"

2 
	~"../../hdr/game/gam_droidAI.h
"

7 
	$ai_g‘NextWaypošt
(
whichDroid
)

12 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
ai_moveMode
)

14 
AI_MODE_WAYPOINT
:

16 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
wayPoštDœeùiÚ
)

18 
WAYPOINT_UP
:

19 if(
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
wayPoštIndex
 < shLev–[cu¼’tLev–].
numWaypošts
 - 1)

20 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
wayPoštIndex
++;

22 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
wayPoštIndex
 = 0;

26 
WAYPOINT_DOWN
:

27 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
wayPoštIndex
--;

29 if(
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
wayPoštIndex
 < 0)

30 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
wayPoštIndex
 = shLev–[cu¼’tLev–].
numWaypošts
 - 1;

38 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
´eviousWaypošts
 = shLev–[cu¼’tLev–].droid[whichDroid].
de¡š©iÚCoÜds
;

42 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
de¡š©iÚCoÜds
.
x
 = shLev–[cu¼’tLev–].
wayPošts
[shLev–[cu¼’tLev–].droid[whichDroid].
wayPoštIndex
].x;

43 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
de¡š©iÚCoÜds
.
y
 = shLev–[cu¼’tLev–].
wayPošts
[shLev–[cu¼’tLev–].droid[whichDroid].
wayPoštIndex
].y;

47 
AI_MODE_ASTAR
:

48 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
cu¼’tASrIndex
--;

50 ià(-1 =ğ
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
cu¼’tASrIndex
)

52 
	`cÚ_´št
(
Œue
,rue, "Droid has„eached destination");

53 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
ai_moveMode
 = 
AI_PATHFIND_END
;

54  
AI_RESULT_FAILED
;

59 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
de¡š©iÚCoÜds
.
x
 = 
·th
[shLev–[cu¼’tLev–].droid[whichDroid].
aSrP©hIndex
].
wayPošts
[shLev–[cu¼’tLev–].droid[whichDroid].
cu¼’tASrIndex
].x;

60 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
de¡š©iÚCoÜds
.
y
 = 
·th
[shLev–[cu¼’tLev–].droid[whichDroid].
aSrP©hIndex
].
wayPošts
[shLev–[cu¼’tLev–].droid[whichDroid].
cu¼’tASrIndex
].y;

64  
AI_RESULT_SUCCESS
;

65 
	}
}

74 
	$ai_ÿnMove
(
whichDroid
)

81 ià(
Œue
 =ğ
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
ignÜeCŞlisiÚs
)

83  
AI_RESULT_SUCCESS
;

89 ià(
Œue
 =ğ
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
hasCŞlided
)

91  
AI_RESULT_FAILED
;

95  
AI_RESULT_SUCCESS
;

98  
AI_RESULT_SUCCESS
;

99 
	}
}

108 
	$ai_moveDroidToWaypošt
(
whichDroid
)

111 
wayPoštDi¡ªû
;

113 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
cu¼’tS³ed
 = 
d©aBa£EÁry
[shLev–[cu¼’tLev–].droid[whichDroid].
droidTy³
].
maxS³ed
;

124 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
de¡DœeùiÚ
 = 
	`sys_g‘DœeùiÚ
(shLev–[cu¼’tLev–].droid[whichDroid].
de¡š©iÚCoÜds
, shLev–[cu¼’tLev–].droid[whichDroid].
wÜldPosMiddË
);

125 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
de¡DœeùiÚ
 = 
	`ıvmuÉ
(shLev–[cu¼’tLev–].droid[whichDroid].de¡DœeùiÚ, shLev–[cu¼’tLev–].droid[whichDroid].
cu¼’tS³ed
);

126 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
de¡DœeùiÚ
 = 
	`ıvşamp
(shLev–[cu¼’tLev–].droid[whichDroid].de¡DœeùiÚ, 
d©aBa£EÁry
[shLev–[cu¼’tLev–].droid[whichDroid].
droidTy³
].
maxS³ed
);

128 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
v–oc™y
 = 
	`ıvnÜm®ize
(shLev–[cu¼’tLev–].droid[whichDroid].
de¡DœeùiÚ
);

129 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
v–oc™y
 = 
	`ıvmuÉ
(shipLevel[currentLevel].droid[whichDroid].velocity, 25.0f);

134 
	`ıBodyS‘FÜû
(
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
body
, shLev–[cu¼’tLev–].droid[whichDroid].
v–oc™y
);

141 
wayPoštDi¡ªû
 = 
	`ıvdi¡
(
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
de¡š©iÚCoÜds
, shLev–[cu¼’tLev–].droid[whichDroid].
wÜldPosMiddË
);

147 ià((
wayPoštDi¡ªû
 > 
wayPoštDe¡š©iÚSize
) && (wayPointDistance < wayPointDestinationSize + 30))

149 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
v–oc™y
 = 
	`ıvmuÉ
(shipLevel[currentLevel].droid[whichDroid].velocity, 0.9f);

150 
	`ıBodyS‘V–oc™y
(
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
body
, shLev–[cu¼’tLev–].droid[whichDroid].
v–oc™y
);

155 ià(
wayPoštDi¡ªû
 < 
wayPoštDe¡š©iÚSize
)

157 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
v–oc™y
 = 
ıvz”o
;

158 
	`ıBodyS‘V–oc™y
(
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
body
, shLev–[cu¼’tLev–].droid[whichDroid].
v–oc™y
);

159  
AI_RESULT_SUCCESS
;

163  
AI_RESULT_RUNNING
;

165 
	}
}

171 
	$ai_ÿnRev”£DœeùiÚ
(
whichDroid
)

174 ià(
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
droidTy³
 <

175 
shLev–
[
cu¼’tLev–
].
droid
[shLev–[cu¼’tLev–].droid[
whichDroid
].
cŞlidedW™h
].
droidTy³
)

177 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
wayPoštDœeùiÚ
)

179 
WAYPOINT_DOWN
:

180 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
wayPoštDœeùiÚ
 = 
WAYPOINT_UP
;

183 
WAYPOINT_UP
:

184 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
wayPoštDœeùiÚ
 = 
WAYPOINT_DOWN
;

187 
	`ai_g‘NextWaypošt
(
whichDroid
);

189  
AI_RESULT_SUCCESS
;

190 
	}
}

	@../src/game/gam_droidAI_Resume.cpp

1 
	~"../../hdr/sys_glob®s.h
"

8 
	$ai_isNÙP©rŞlšg
(
whichDroid
)

11 ià(
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
isNÙP©rŞlšg
 =ğ
Œue
)

13  
AI_RESULT_FAILED
;

15  
AI_RESULT_SUCCESS
;

16 
	}
}

21 
	$ai_ÚResumeDe¡
(
whichDroid
)

24 ià(
Œue
 =ğ
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
ÚResumeDe¡Te
)

26 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
isNÙP©rŞlšg
 = 
çl£
;

27 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
ÚResumeDe¡Te
 = 
çl£
;

28 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
aSrIn™DÚe
 = 
çl£
;

30 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
de¡S‘
 = 
çl£
;

31 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
aSrIn™DÚe
 = 
çl£
;

32 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
ÚH—lšgTe
 = 
çl£
;

33 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
foundH—lšgTe
 = 
çl£
;

34 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
aSrDe¡š©iÚFound
 = 
çl£
;

36  
AI_RESULT_RUNNING
;

41  
AI_RESULT_FAILED
;

43 
	}
}

48 
	$ai_»achedResumeDe¡
(
whichDroid
)

51 
ıVeù
 
Ã¬e¡WP
;

52 
ıVeù
 
droidWÜldPosTes
;

54 ià(
çl£
 =ğ
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
de¡S‘
)

56 ià(
çl£
 =ğ
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
aSrIn™DÚe
)

58 
Ã¬e¡WP
 = 
	`ai_fšdN—»¡Te
 (
whichDroid
, 
TILE_TYPE_NEAREST_WP
);

60 
Ã¬e¡WP
.
x
 = (ê—»¡WP.x / 
TILE_SIZE
;

61 
Ã¬e¡WP
.
y
 = (ê—»¡WP.y / 
TILE_SIZE
;

63 
droidWÜldPosTes
.
x
 = ()
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
wÜldPosMiddË
.x / 
TILE_SIZE
;

64 
droidWÜldPosTes
.
y
 = ()
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
wÜldPosMiddË
.y / 
TILE_SIZE
;

66 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
aSrP©hIndex
 = 
	`gam_ASrReque¡NewP©h
 (
droidWÜldPosTes
, 
Ã¬e¡WP
, whichDroid);

67 
	`®_¡¬t_th»ad
(
·th
[
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
aSrP©hIndex
].
th»ad
);

69 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
aSrIn™DÚe
 = 
Œue
;

72 ià(
Œue
 =ğ
	`gam_ASrIsP©hR—dy
 (
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
aSrP©hIndex
))

74 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
de¡S‘
 = 
Œue
;

76 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
cu¼’tASrIndex
 = 
	`gam_ASrG‘NumWaypošts
(shLev–[cu¼’tLev–].droid[whichDroid].
aSrP©hIndex
);

77 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
ai_moveMode
 = 
AI_MODE_ASTAR
;

78 
	`ai_g‘NextWaypošt
 (
whichDroid
);

79  
AI_RESULT_RUNNING
;

81  
AI_RESULT_FAILED
;

84 ià(
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
ai_moveMode
 =ğ
AI_PATHFIND_END
)

86 #ifdeà
DEBUG_RESUME


87 
	`cÚ_´št
(
Œue
,rue, "R‘uºedØRESUME†oÿtiÚ [ %˜]", 
whichDroid
);

89  
AI_RESULT_SUCCESS
;

93 ià(
AI_RESULT_SUCCESS
 =ğ
	`ai_moveDroidToWaypošt
 (
whichDroid
))

95 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
ai_moveMode
 = 
AI_MODE_ASTAR
;

96 ià(
AI_RESULT_FAILED
 =ğ
	`ai_g‘NextWaypošt
 (
whichDroid
))

98 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
ai_moveMode
 = 
AI_MODE_WAYPOINT
;

99 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
ÚResumeDe¡Te
 = 
Œue
;

100 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
de¡S‘
 = 
çl£
;

101 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
aSrIn™DÚe
 = 
çl£
;

102 
	`gam_ASrRemoveP©h
 (
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
aSrP©hIndex
);

105  
AI_RESULT_RUNNING
;

108  
AI_RESULT_RUNNING
;

109 
	}
}

	@../src/game/gam_intro.cpp

1 
	~"../../hdr/sys_glob®s.h
"

3 
	gsüŞlText
 [] = (" Paradroid. ! ! Press fireo…lay ! ! ^ Clearhe freighter of„obots by destroyinghem withwin†asers or byransferring controlohem. ! ! Control is by keyboard only,‡s follows: ! ! At‡llimeshe keyboard moveshe„obot‡nd holding fire down will‡llow use of†ifts‡nd consoles. ! ! In‡ddition,…ressing fire with‚o keys…ressed will…reparehe current„obot forransfer. Contact with‡nother„obot withhe fire key down will initiateransfer.! ! ! ^ # ");

4 
	gsüŞlText2
 [] = ("! ! ! A fleet of Robo-Freighters on its wayohe Beta Ceti system„eportedƒntering‡n uncharted field of‡steroids. Each ship carries‡ cargo of battle droidso„einforcehe outworld defences. ! ! Two distress beacons have been„ecovered. Similar messages were stored onƒach. The ships had been bombarded by‡…owerful„adionic beam from one ofhe‡steroids. ! ! All ofhe„obots onhe ships, includinghose in storage, became hyper-active. The crews„eport‡n‡ttack by droids, isolatinghem onhe bridge. They cannot„eachhe shuttle‡nd can hold out for only‡ couple more hours. ! ! Sincehese beacons were†ocatedwo days‡go, we can only fearhe worst. ! ! Some ofhe fleet was†ast seen heading forƒnemy space. Inƒnemy handshe droids can be used‡gainst our forces. ! ! Docking would be impossible, but we can beam‡board‡…rototype Influence Device.! ^ # ");

5 
	gsüŞlText3
 [] = ("! ! ! The 001 Influence device consists of‡ helmet, which, when…laced over‡„obot's control unit can halthe‚ormal‡ctivities ofhat„obot for‡ shortime. The helmet has its own…ower supply‡nd…owershe„obot itself,‡t‡n upgraded capability. The helmet‡lso uses‡nƒnergy cloak for…rotection ofhe host. ! ! The helmet is fitted withwin†asers mounted in‡urrent. These‡re†ow…owered‡nd have‡ slow„ecycle„ate. ! ! Most ofhe device's„esources‡re channeledowards holding control ofhe host„obot,‡s it‡ttemptso„esume 'normal' operation. It isherefore‚ecessaryo changehe host„obot ofteno…reventhe device from burning out. Transfero‡‚ew„obot„equireshe deviceo drain its host ofƒnergy in orderoake it over. Failureo‡chieveransfer„esults inhe device being‡ free‡gent once more. ! ! ! ! ! Press fireo…lay ! ^ # ");

6 
	gsüŞlText4
 [] = ("! ! ! An Influence device canransmit only certain data,‚amely its own†ocation‡ndhe†ocation of other„obots in visual„ange. This data is merged with known ship†ayouts on your C64„emoteerminal. ! ! Additional information‡bouthe ship‡nd„obots may be obtained by‡ccessinghe ship's computer‡t‡ console. A small-scale…lan ofhe whole deck is‡vailable,‡s well‡s‡ sideƒlevation ofhe ship. ! ! Robots‡re„epresented on-screen‡s‡ symbol showing‡hree-digit‚umber. The first digit shown ishe important one,he class ofhe„obot. It denotes strength‡lso. ! ! To find out more‡bout‡ny given„obot, usehe„obotƒnquiry system‡t‡ console. Only data‡bout units of‡†ower classhan your current host is‡vailable, since it ishe host's security clearance which is usedo‡ccesshe console. ! ! ! ! ! Press fireo…lay ! ^ # ");

7 
	gsüŞlText5
 [] = ("! ! ! ! ! ! ! ! Paradroid…rogrammed by Andrew Braybrook ! ! ! Sound‡dvice by Steve Turner. ! ! ! OpenGL…ort by David Berry. ! 2006 ! ! ! Press fireo…lay ! ! ! ! ! ! ^ # ");

9 
	gšŒoS¹X
;

10 
	gšŒoS¹Y
;

11 
	gšŒoWidth
;

12 
	gšŒoHeight
;

13 
	gšŒoSüŞl¥“d
;

14 
	gšŒoBackRed
;

15 
	gšŒoBackG»’
;

16 
	gšŒoBackBlue
;

17 
	gšŒoBackAÍha
;

18 
	gšŒoFÚtRed
;

19 
	gšŒoFÚtG»’
;

20 
	gšŒoFÚtBlue
;

21 
	gšŒoFÚtAÍha
;

22 
	gšŒoSüŞlD–ay
;

27 
boŞ
 
	$gam_šŒoSüŞlG‘MÜeText
()

30 
cu¼’tTextBlock
 = 0;

32 
cu¼’tTextBlock
++;

33 ià(
cu¼’tTextBlock
 == 5)

34 
cu¼’tTextBlock
 = 0;

36 
šŒoSüŞlBox
.
ch¬PŒ
 = 0;

37 
cu¼’tTextBlock
)

40 
šŒoSüŞlBox
.
sourûText
 = 
süŞlText
;

43 
šŒoSüŞlBox
.
sourûText
 = 
süŞlText2
;

46 
šŒoSüŞlBox
.
sourûText
 = 
süŞlText3
;

49 
šŒoSüŞlBox
.
sourûText
 = 
süŞlText4
;

52 
šŒoSüŞlBox
.
sourûText
 = 
süŞlText5
;

55  
Œue
;

56 
	}
}

61 
	$gam_di¥ÏyIÁroText
()

64 
boŞ
 
süŞlBoxS‘up
 = 
çl£
;

66 ià(
çl£
 =ğ
süŞlBoxS‘up
)

68 
süŞlBoxS‘up
 = 
Œue
;

69 
	`sys_execu‹SütFunùiÚ
("as_setIntroValues", "");

70 
	`gui_£tupSüŞlBox
(
SCROLLBOX_INTRO
, &
šŒoSüŞlBox
, "šŒoSüŞl", 
süŞlText
, (
Ex‹ºFunc
)
gam_šŒoSüŞlG‘MÜeText
);

73 
	`gui_d¿wSüŞlBox
(&
šŒoSüŞlBox
);

74 
	}
}

	@../src/game/gam_levels.cpp

1 
	~"../../hdr/sys_glob®s.h
"

8 
	gcu¼’tLev–
 = -1;

9 
_Ëv–SŒuù
 
	gshLev–
[
NUM_OF_LEVELS
];

10 
	gcu¼’tAË¹Lev–
;

11 
_my2DIÁ
 
	gd¿wOff£t
;

18 
_basicH—lšg
 *
	gh—lšg
;

25 
	gdi¥ÏyScÜeSŒšg
[
NUM_SCORE_CHARS
];

26 
	gcu¼’tScÜe
 = 0;

27 
	gdi¥ÏyScÜe
 = 0;

28 
	gscÜeD–ay
;

29 
	gscÜeD–ayV®ue
;

30 
	gy–lowAË¹Lev–
 = 0;

31 
	g»dAË¹Lev–
 = 0;

32 
	gËv–BÚus
;

38 
	$gam_pow”DownLev–
(
whichLev–
, 
boŞ
 
¶aySound
)

41 ià(
Œue
 =ğ
¶aySound
)

43 
	`sys_¶aySound
(
SND_LEVEL_SHUTDOWN
, 1.0f, 
ALLEGRO_PLAYMODE_ONCE
);

44 
	`gam_addToScÜe
(
Ëv–BÚus
);

47 ià(0 =ğ
shLev–
[
whichLev–
].
numEÃm›sAlive
)

49 
	`io_£tTeS‘CŞÜ
("save");

50 
	`io_£tTeS‘CŞÜ
("dark");

53 
	`io_£tTeS‘CŞÜ
("restore");

54 
	}
}

60 
	$gam_checkAË¹Lev–
()

63 
cu¼’tAË¹Lev–
) {

64 
ALERT_GREEN_TILE
:

65 ià(
çl£
 =ğ
	`sys_isSoundPÏyšg
(
SND_GREEN_ALERT
))

66 
	`sys_¶aySound
(
SND_GREEN_ALERT
, 
SND_PAN_CENTER
, 
ALLEGRO_PLAYMODE_LOOP
);

68 ià(
Œue
 =ğ
	`sys_isSoundPÏyšg
(
SND_YELLOW_ALERT
))

69 
	`sys_¡İSound
(
SND_YELLOW_ALERT
);

71 ià(
Œue
 =ğ
	`sys_isSoundPÏyšg
(
SND_RED_ALERT
))

72 
	`sys_¡İSound
(
SND_RED_ALERT
);

76 
ALERT_YELLOW_TILE
:

77 ià(
Œue
 =ğ
	`sys_isSoundPÏyšg
(
SND_GREEN_ALERT
))

78 
	`sys_¡İSound
(
SND_GREEN_ALERT
);

80 ià(
çl£
 =ğ
	`sys_isSoundPÏyšg
(
SND_YELLOW_ALERT
))

81 
	`sys_¶aySound
(
SND_YELLOW_ALERT
, 
SND_PAN_CENTER
, 
ALLEGRO_PLAYMODE_LOOP
);

83 ià(
Œue
 =ğ
	`sys_isSoundPÏyšg
(
SND_RED_ALERT
))

84 
	`sys_¡İSound
(
SND_RED_ALERT
);

88 
ALERT_RED_TILE
:

89 ià(
Œue
 =ğ
	`sys_isSoundPÏyšg
(
SND_GREEN_ALERT
))

90 
	`sys_¡İSound
(
SND_GREEN_ALERT
);

92 ià(
Œue
 =ğ
	`sys_isSoundPÏyšg
(
SND_YELLOW_ALERT
))

93 
	`sys_¡İSound
(
SND_YELLOW_ALERT
);

95 ià(
çl£
 =ğ
	`sys_isSoundPÏyšg
(
SND_RED_ALERT
))

96 
	`sys_¶aySound
(
SND_RED_ALERT
, 
SND_PAN_CENTER
, 
ALLEGRO_PLAYMODE_LOOP
);

100 
	}
}

106 
	$gam_chªgeToLev–FromSüt
(
ÃwLev–
)

109 
	`gam_chªgeToLev–
(
ÃwLev–
, 0);

110 
	}
}

116 
	$gam_chªgeToLev–
(
ÃwLev–
, 
whichLiá
)

122 ià(
cu¼’tLev–
 > -1)

124 ià(
shLev–
[
cu¼’tLev–
].
droid
.
	`size
() > 0)

126 
	`cÚ_´št
(
Œue
,rue, "Droid siz[ %˜]", 
shLev–
[
cu¼’tLev–
].
droid
.
	`size
());

128 
i
 = 0; i !ğ
shLev–
[
cu¼’tLev–
].
numDroids
; i++)

130 ià(
Œue
 =ğ
shLev–
[
cu¼’tLev–
].
droid
[
i
].
isAlive
)

132 ià(
shLev–
[
cu¼’tLev–
].
droid
[
i
].
aSrP©hIndex
 > -1)

134 
	`gam_ASrRemoveP©h
(
shLev–
[
cu¼’tLev–
].
droid
[
i
].
aSrP©hIndex
);

140 
cu¼’tLev–
 = 
ÃwLev–
;

143 
	`lvl_g‘LiáPos™iÚs
(
cu¼’tLev–
);

146 
	`gam_fšdAÎAË¹Tes
(
Œue
);

149 
	`gam_fšdH—lšgTes
(
cu¼’tLev–
);

152 
	`gam_doÜTrigg”S‘up
();

155 
	`sys_¡İPÏy”Movem’t
();

158 
	`io_»£tKeybßrdS‹s
();

160 
	`bul_š™BuÎ‘s
();

162 
	`sys_ü—‹SŞidW®ls
();

165 
	`gam_putPÏy”OnLiáFromTuÂ–
();

169 
	`gam_pow”DownLev–
(
cu¼’tLev–
, 
çl£
);

171 
	`gam_upd©eSüŞlšgV¬s
(
çl£
);

172 
	}
}

178 
boŞ
 
	$gam_lßdLev–
(*
feName
)

181 
checkV”siÚ
;

182 
ALLEGRO_FILE
 *
å
;

187 
å
 = 
	`®_fİ’
(
feName
, "r");

188 ià(
NULL
 =ğ
å
)

190 
	`´štf
("E¼Ü o³nšg ffÜ„—dšg [ % ]\n", 
feName
);

191  
çl£
;

196 
	`®_ä—d
(
å
, &
checkV”siÚ
,  (checkVersion));

197 ià(
checkV”siÚ
 !ğ
MAP_VERSION
)

199 
	`´štf
("MAP_VERSION wrong. Failedo„ead file.\n");

200  
çl£
;

205 
	`®_ä—d
(
å
, (*è&
shLev–
[
cu¼’tLev–
].
numLšeSegm’ts
,  (shipLevel[currentLevel].numLineSegments));

206 
	`®_ä—d
(
å
, (*è&
shLev–
[
cu¼’tLev–
].
numWaypošts
,  (shipLevel[currentLevel].numWaypoints));

207 
	`®_ä—d
(
å
, (*è&
shLev–
[
cu¼’tLev–
].
numDroids
,  (shipLevel[currentLevel].numDroids));

208 
	`®_ä—d
(
å
, (*è&
shLev–
[
cu¼’tLev–
].
numLiás
,  (shipLevel[currentLevel].numLifts));

209 
	`®_ä—d
(
å
, (*è&
shLev–
[
cu¼’tLev–
].
Ëv–Dim’siÚs
,  (shipLevel[currentLevel].levelDimensions));

213 
_lšeSegm’t
 
‹mpSegm’t
;

214 
i
 = 0; i !ğ
shLev–
[
cu¼’tLev–
].
numLšeSegm’ts
; i++)

216 
	`®_ä—d
(
å
, &
‹mpSegm’t
.
¡¬t
,  (tempSegment.start));

217 
	`®_ä—d
(
å
, &
‹mpSegm’t
.
fšish
,  (tempSegment.finish));

219 
‹mpSegm’t
.
¡¬t
.
x
 +ğ(
d¿wOff£t
.x / 2è* 
TILE_SIZE
;

220 
‹mpSegm’t
.
¡¬t
.
y
 +ğ(
d¿wOff£t
.y / 2è* 
TILE_SIZE
;

222 
‹mpSegm’t
.
¡¬t
.
y
 -ğ(
TILE_SIZE
 / 2);

224 
‹mpSegm’t
.
fšish
.
x
 +ğ(
d¿wOff£t
.x / 2è* 
TILE_SIZE
;

225 
‹mpSegm’t
.
fšish
.
y
 +ğ(
d¿wOff£t
.y / 2è* 
TILE_SIZE
;

227 
‹mpSegm’t
.
fšish
.
y
 -ğ(
TILE_SIZE
 / 2);

229 
shLev–
[
cu¼’tLev–
].
lšeSegm’ts
.
	`push_back
(
‹mpSegm’t
);

234 
ıVeù
 
‹mpWaypošt
;

235 
i
 = 0; i !ğ
shLev–
[
cu¼’tLev–
].
numWaypošts
; i++)

237 
	`®_ä—d
(
å
, &
‹mpWaypošt
,  (tempWaypoint));

241 
‹mpWaypošt
.
x
 +ğ(
d¿wOff£t
.x / 2è* 
TILE_SIZE
;

242 
‹mpWaypošt
.
y
 +ğ(
d¿wOff£t
.y / 2è* 
TILE_SIZE
;

244 
‹mpWaypošt
.
y
 -ğ(
TILE_SIZE
 / 2);

246 
shLev–
[
cu¼’tLev–
].
wayPošts
.
	`push_back
(
‹mpWaypošt
);

251 
‹mpDroidTy³
;

252 
i
 = 0; i !ğ
shLev–
[
cu¼’tLev–
].
numDroids
; i++)

254 
	`®_ä—d
(
å
, &
‹mpDroidTy³
,  (tempDroidType));

255 
shLev–
[
cu¼’tLev–
].
droidTy³s
.
	`push_back
(
‹mpDroidTy³
);

260 
‹mpTe
;

261 
i
 = 0; i !ğ
shLev–
[
cu¼’tLev–
].
Ëv–Dim’siÚs
.
x
 * shLev–[cu¼’tLev–].Ëv–Dim’siÚs.
y
; i++)

263 
	`®_ä—d
(
å
, &
‹mpTe
,  (tempTile));

264 
shLev–
[
cu¼’tLev–
].
tes
.
	`push_back
(
‹mpTe
);

266 
	`®_ä—d
(
å
, &
shLev–
[
cu¼’tLev–
].
Ëv–Name
,  (shipLevel[currentLevel].levelName));

270 
	`®_fşo£
(
å
);

272  
Œue
;

273 
	}
}

279 
	$lvl_addPaddšgToLev–
()

282 
veùÜ
<> 
‹mpLev–
;

283 
_my2DIÁ
 
‹mpDim’siÚs
;

284 
couÁY
, 
couÁX
, 
whichTe
;

285 
de¡X
, 
de¡Y
;

287 
couÁY
 = 0;

288 
couÁX
 = 0;

290 
de¡X
 = 
d¿wOff£t
.
x
 / 2;

291 
de¡Y
 = 
d¿wOff£t
.
y
 / 2;

293 
‹mpDim’siÚs
.
x
 = 
shLev–
[
cu¼’tLev–
].
Ëv–Dim’siÚs
.x;

294 
‹mpDim’siÚs
.
y
 = 
shLev–
[
cu¼’tLev–
].
Ëv–Dim’siÚs
.y;

296 
‹mpLev–
.
	`»£rve
((
shLev–
[
cu¼’tLev–
].
Ëv–Dim’siÚs
.
x
 + 
d¿wOff£t
.xè* (shLev–[cu¼’tLev–].Ëv–Dim’siÚs.
y
 + drawOffset.y));

298 
i
 = 0; i !ğ(
shLev–
[
cu¼’tLev–
].
Ëv–Dim’siÚs
.
x
 + 
d¿wOff£t
.xè* (shLev–[cu¼’tLev–].Ëv–Dim’siÚs.
y
 + drawOffset.y); i++)

299 
‹mpLev–
[
i
] = 0;

302 
couÁY
 = 0; couÁY !ğ
shLev–
[
cu¼’tLev–
].
Ëv–Dim’siÚs
.
y
; countY++)

304 
de¡X
 = (
d¿wOff£t
.
x
 / 2);

305 
couÁX
 = 0; couÁX !ğ
shLev–
[
cu¼’tLev–
].
Ëv–Dim’siÚs
.
x
; countX++)

307 
whichTe
 = 
shLev–
[
cu¼’tLev–
].
tes
[(
couÁY
 * shLev–[cu¼’tLev–].
Ëv–Dim’siÚs
.
x
è+ 
couÁX
];

308 
‹mpLev–
[(
de¡Y
 * (
‹mpDim’siÚs
.
x
 + 
d¿wOff£t
.x)è+ 
de¡X
] = 
whichTe
;

309 
de¡X
++;

311 
de¡Y
++;

314 
‹mpDim’siÚs
.
x
 +ğ
d¿wOff£t
.x;

315 
‹mpDim’siÚs
.
y
 +ğ
d¿wOff£t
.y;

317 
shLev–
[
cu¼’tLev–
].
Ëv–Dim’siÚs
.
x
 = 
‹mpDim’siÚs
.x;

318 
shLev–
[
cu¼’tLev–
].
Ëv–Dim’siÚs
.
y
 = 
‹mpDim’siÚs
.y;

320 
shLev–
[
cu¼’tLev–
].
tes
.
	`ş—r
();

322 
shLev–
[
cu¼’tLev–
].
tes
.
	`»£rve
(
‹mpDim’siÚs
.
x
 *empDim’siÚs.
y
);

324 
i
 = 0; i !ğ
‹mpDim’siÚs
.
x
 *empDim’siÚs.
y
; i++)

326 
shLev–
[
cu¼’tLev–
].
tes
[
i
] = 
‹mpLev–
[i];

328 
‹mpLev–
.
	`ş—r
();

329 
	}
}

335 
	$lvl_£tupLiás
()

338 
shLev–
[0].
liás
[0].
tuÂ–
 = 1;

339 
shLev–
[1].
liás
[0].
tuÂ–
 = 4;

340 
shLev–
[2].
liás
[0].
tuÂ–
 = 5;

341 
shLev–
[3].
liás
[0].
tuÂ–
 = 0;

342 
shLev–
[4].
liás
[0].
tuÂ–
 = 0;

343 
shLev–
[5].
liás
[0].
tuÂ–
 = 1;

344 
shLev–
[5].
liás
[1].
tuÂ–
 = 4;

345 
shLev–
[6].
liás
[0].
tuÂ–
 = 1;

346 
shLev–
[6].
liás
[1].
tuÂ–
 = 4;

347 
shLev–
[8].
liás
[0].
tuÂ–
 = 5;

348 
shLev–
[9].
liás
[0].
tuÂ–
 = 5;

349 
shLev–
[9].
liás
[1].
tuÂ–
 = 6;

350 
shLev–
[10].
liás
[0].
tuÂ–
 = 6;

351 
shLev–
[11].
liás
[0].
tuÂ–
 = 6;

352 
shLev–
[12].
liás
[0].
tuÂ–
 = 6;

353 
shLev–
[12].
liás
[1].
tuÂ–
 = 3;

354 
shLev–
[12].
liás
[2].
tuÂ–
 = 4;

355 
shLev–
[13].
liás
[0].
tuÂ–
 = 6;

356 
shLev–
[13].
liás
[1].
tuÂ–
 = 3;

357 
shLev–
[14].
liás
[0].
tuÂ–
 = 6;

358 
shLev–
[14].
liás
[1].
tuÂ–
 = 3;

359 
shLev–
[14].
liás
[2].
tuÂ–
 = 7;

360 
shLev–
[15].
liás
[0].
tuÂ–
 = 0;

361 
shLev–
[15].
liás
[1].
tuÂ–
 = 2;

362 
shLev–
[16].
liás
[0].
tuÂ–
 = 0;

363 
shLev–
[17].
liás
[0].
tuÂ–
 = 2;

364 
shLev–
[17].
liás
[1].
tuÂ–
 = 3;

365 
shLev–
[18].
liás
[0].
tuÂ–
 = 7;

366 
shLev–
[19].
liás
[0].
tuÂ–
 = 0;

367 
shLev–
[20].
liás
[0].
tuÂ–
 = 3;

370 
	}
}

376 
boŞ
 
	$gam_lßdAÎLev–s
()

379 
Ëv–Name
[40];

381 
cu¼’tLev–
 = 0;

383 
d¿wOff£t
.
x
 = (
wšWidth
 / 
TILE_SIZE
);

384 
d¿wOff£t
.
y
 = (
wšHeight
 / 
TILE_SIZE
);

386 
i
 = 0; i < 
NUM_OF_LEVELS
; i++)

388 ià(7 =ğ
i
)

389 
cu¼’tLev–
++;

392 
	`¥rštf
(
Ëv–Name
, "ÃwDeck%i.d©", 
i
);

394 ià(
çl£
 =ğ
	`gam_lßdLev–
(
Ëv–Name
))

395  
çl£
;

397 
	`lvl_addPaddšgToLev–
();

399 
	`cÚ_£tCŞÜ
(0.0f, 1.0f, 1.0f, 1.0f);

400 
	`cÚ_´št
(
Œue
, 
çl£
, "Lßded sh†ev– [ % ]", 
shLev–
[
cu¼’tLev–
].
Ëv–Name
);

402 
lßdšgB¬P”ûÁ
 +ğ1.0à/ 
NUM_OF_LEVELS
;

403 
	`¡¾ıy
(
lßdšgStus
, 
shLev–
[
cu¼’tLev–
].
Ëv–Name
, (shipLevel[currentLevel].levelName));

405 
	`®_»¡
(
´og»ssB¬LßdTimes
);

407 
	`gam_š™DroidV®ues
(
cu¼’tLev–
);

408 
shLev–
[
cu¼’tLev–
].
liás
.
	`»£rve
(shLev–[cu¼’tLev–].
numLiás
);

409 
shLev–
[
cu¼’tLev–
].
numEÃm›sAlive
 = shLev–[cu¼’tLev–].
numDroids
;

410 
cu¼’tLev–
++;

414 
lßdšgB¬P”ûÁ
 = 0.0f;

416 
	`lvl_£tupLiás
();

418 
	`sys_ü—‹SŞidW®ls
();

419 
	`sys_£tupPÏy”Physics
();

421  
Œue
;

422 
	}
}

430 
	$gam_g‘Pix–Off£ts
()

436 ià(
	`fmod
((è
wšHeight
 / (è
TILE_SIZE
, 2.0f) != 0)

439 
pix–Y
 = 16.0f;

440 ià(
wšHeight
 == 600)

441 
pix–Y
 = 4.0f;

444 
pix–Y
 = 16.0f;

446 ià(
	`fmod
((è
wšWidth
 / (è
TILE_SIZE
, 2.0f) != 0)

447 
pix–X
 = 16.0f;

449 
pix–X
 = 0.0f;

450 
	}
}

456 
	$gam_putPÏy”OnLiá
(
whichLiá
)

459 
whichTe
, 
couÁY
, 
couÁX
, 
liáCouÁ”
;

461 
couÁY
 = 0; couÁY !ğ
shLev–
[
cu¼’tLev–
].
Ëv–Dim’siÚs
.
y
; countY++)

463 
couÁX
 = 0; couÁX !ğ
shLev–
[
cu¼’tLev–
].
Ëv–Dim’siÚs
.
x
; countX++)

465 
whichTe
 = 
shLev–
[
cu¼’tLev–
].
tes
[(
couÁY
 * shLev–[cu¼’tLev–].
Ëv–Dim’siÚs
.
x
è+ 
couÁX
];

467 ià(
LIFT_TILE
 =ğ
whichTe
)

469 ià(
liáCouÁ”
 =ğ
whichLiá
)

471 
tePosX
 = 
couÁX
;

472 
tePosY
 = 
couÁY
;

477 
	`gam_g‘Pix–Off£ts
();

479 
pix–X
 = 16;

480 
pix–Y
 = 0;

481 
¶ay”WÜldPos
.
x
 = (
tePosX
 * 
TILE_SIZE
è+ 
pix–X
;

482 
¶ay”WÜldPos
.
y
 = (
tePosY
 * 
TILE_SIZE
è+ 
pix–Y
;

484 
	`sys_£tPÏy”PhysicsPos™iÚ
(
¶ay”WÜldPos
);

490 
liáCouÁ”
++;

496 
	`io_logToFe
("STOP: Couldn'ˆfšd†iá [ %˜] oÀËv– [ %˜]", 
whichLiá
, 
cu¼’tLev–
);

497 
	`gam_putPÏy”OnLiá
(0);

498 
	}
}

506 
	$gam_fšdH—lšgTes
(
whichLev–
)

509 
i
;

510 
h—lCouÁ”
 = 0;

511 
cu¼’tTe
 = 0;

512 
couÁX
 = 0;

513 
couÁY
 = 0;

515 
i
 = 0; i !ğ
shLev–
[
cu¼’tLev–
].
Ëv–Dim’siÚs
.
x
 * shLev–[cu¼’tLev–].Ëv–Dim’siÚs.
y
; i++)

517 
cu¼’tTe
 = 
shLev–
[
whichLev–
].
tes
[
i
];

519 
cu¼’tTe
) {

520 
HEALING_TILE
:

521 
HEALING_TILE
 + 1:

522 
HEALING_TILE
 + 2:

523 
HEALING_TILE
 + 3:

524 
h—lCouÁ”
++;

529 ià(
h—lšg
)

530 
	`®_ä“
(
h—lšg
);

534 ià(0 =ğ
h—lCouÁ”
)

536 
h—lCouÁ”
++;

537 
h—lšg
 = (
_basicH—lšg
 *è
	`®_m®loc
(
h—lCouÁ”
 *  (_basicHealing));

539 ià(
NULL
 =ğ
h—lšg
)

540 
	`sys_”rÜF©®
(
__FILE__
, 
__LINE__
, "F©®ƒ¼Ü: Could‚Ù‡Îoÿ‹ [ %l˜] by‹ fÜ h—lšg‡¼ay.", 
h—lCouÁ”
 *  (
_basicH—lšg
));

542 
h—lšg
[0].
numOnLev–
 = 0;

549 
h—lšg
 = (
_basicH—lšg
 *è
	`m®loc
(
h—lCouÁ”
 *  (_basicHealing));

551 ià(
NULL
 =ğ
h—lšg
)

552 
	`sys_”rÜF©®
(
__FILE__
, 
__LINE__
, "F©®ƒ¼Ü: Could‚Ù‡Îoÿ‹ [ %l˜] by‹ fÜ h—lšg‡¼ay.", 
h—lCouÁ”
 *  (
_basicH—lšg
));

557 
h—lCouÁ”
 = 0;

559 
i
 = 0; i !ğ
shLev–
[
cu¼’tLev–
].
Ëv–Dim’siÚs
.
x
 * shLev–[cu¼’tLev–].Ëv–Dim’siÚs.
y
; i++)

561 
cu¼’tTe
 = 
shLev–
[
whichLev–
].
tes
[
i
];

563 
cu¼’tTe
) {

564 
HEALING_TILE
:

565 
HEALING_TILE
 + 1:

566 
HEALING_TILE
 + 2:

567 
HEALING_TILE
 + 3:

568 
h—lšg
[
h—lCouÁ”
].
pos
 = 
i
;

569 
h—lšg
[
h—lCouÁ”
].
numF¿mes
 = 4;

570 
h—lšg
[
h—lCouÁ”
].
cu¼’tF¿me
 = 
HEALING_TILE
;

571 
h—lšg
[
h—lCouÁ”
].
äameD–ay
 = 0.3f;

572 
h—lšg
[
h—lCouÁ”
].
ÃxtF¿me
 = 0.0f;

573 
h—lšg
[
h—lCouÁ”
].
wÜldPos™iÚ
.
x
 = (
couÁX
 * 
TILE_SIZE
) + (TILE_SIZE / 2);

574 
h—lšg
[
h—lCouÁ”
].
wÜldPos™iÚ
.
y
 = (
couÁY
 * 
TILE_SIZE
) + (TILE_SIZE / 2);

575 
h—lCouÁ”
++;

579 
couÁX
++;

581 ià(
couÁX
 =ğ
shLev–
[
cu¼’tLev–
].
Ëv–Dim’siÚs
.
x
)

583 
couÁX
 = 0;

584 
couÁY
++;

588 
h—lšg
[0].
numOnLev–
 = 
h—lCouÁ”
;

589 
	}
}

595 
	$gam_ªim©eH—lTes
(
whichLev–
)

598 
i
;

600 ià(0 =ğ
h—lšg
[0].
numOnLev–
)

603 
i
 = 0; i !ğ
h—lšg
[0].
numOnLev–
; i++)

605 
h—lšg
[
i
].
ÃxtF¿me
 +ğh—lšg[i].
äameD–ay
;

607 ià(
h—lšg
[
i
].
ÃxtF¿me
 > 1.0f)

609 
h—lšg
[
i
].
ÃxtF¿me
 = 0.0f;

610 
h—lšg
[
i
].
cu¼’tF¿me
++;

612 ià(
h—lšg
[
i
].
cu¼’tF¿me
 > 
HEALING_TILE
 + 3)

613 
h—lšg
[
i
].
cu¼’tF¿me
 = 
HEALING_TILE
;

617 
shLev–
[
whichLev–
].
tes
[
h—lšg
[
i
].
pos
] = (èh—lšg[i].
cu¼’tF¿me
;

620 
	}
}

627 
	$gam_g‘Cu¼’tDeck
()

630 
i
;

631 
tİDeck
 = 
tuÂ–
[
cu¼’tTuÂ–
].
tİ
;

636 
i
 = 0; i != 10; i++)

638 ià(
cu¼’tLev–
 =ğ
tuÂ–
[
cu¼’tTuÂ–
].
decks
[
i
])

643 
tuÂ–
[
cu¼’tTuÂ–
].
cu¼’t_deck
 = 
i
;

647 ià(
tİDeck
 =ğ
tuÂ–
[
cu¼’tTuÂ–
].
decks
[
i
])

651 
	`cÚ_´št
(
Œue
,rue, "Error: Couldn't find‡ matching†evel forunnel. Game in unstable state");

654 
	}
}

660 
	$gam_g‘TuÂ–ToU£
()

663 
shLev–
[
cu¼’tLev–
].
numLiás
) {

665 
cu¼’tTuÂ–
 = 
shLev–
[
cu¼’tLev–
].
liás
[0].
tuÂ–
;

669 ià(((
¶ay”WÜldMiddËPos
.
x
è> 
shLev–
[
cu¼’tLev–
].
liás
[0].
posX
 - 
TILE_SIZE
) &&

670 ((
¶ay”WÜldMiddËPos
.
x
è< 
shLev–
[
cu¼’tLev–
].
liás
[0].
posX
 + 
TILE_SIZE
))

672 
cu¼’tTuÂ–
 = 
shLev–
[
cu¼’tLev–
].
liás
[0].
tuÂ–
;

676 
cu¼’tTuÂ–
 = 
shLev–
[
cu¼’tLev–
].
liás
[1].
tuÂ–
;

682 ià(
cu¼’tLev–
 == 12)

684 ià((
¶ay”WÜldMiddËPos
.
x
è> 
shLev–
[
cu¼’tLev–
].
liás
[0].
posX
 - 
TILE_SIZE
)

686 
cu¼’tTuÂ–
 = 
shLev–
[
cu¼’tLev–
].
liás
[0].
tuÂ–
;

687 
	`gam_g‘Cu¼’tDeck
();

691 ià(((
¶ay”WÜldMiddËPos
.
y
è> 
shLev–
[
cu¼’tLev–
].
liás
[1].
posY
 - 
TILE_SIZE
) &&

692 ((
¶ay”WÜldMiddËPos
.
y
è< 
shLev–
[
cu¼’tLev–
].
liás
[1].
posY
 + 
TILE_SIZE
))

694 
cu¼’tTuÂ–
 = 
shLev–
[
cu¼’tLev–
].
liás
[1].
tuÂ–
;

695 
	`gam_g‘Cu¼’tDeck
();

699 ià((
¶ay”WÜldMiddËPos
.
y
è> 
shLev–
[
cu¼’tLev–
].
liás
[2].
posY
 - 
TILE_SIZE
)

701 
cu¼’tTuÂ–
 = 
shLev–
[
cu¼’tLev–
].
liás
[2].
tuÂ–
;

702 
	`gam_g‘Cu¼’tDeck
();

708 ià(
cu¼’tLev–
 == 14)

710 ià(((
¶ay”WÜldMiddËPos
.
x
è> 
shLev–
[
cu¼’tLev–
].
liás
[2].
posX
 - 
TILE_SIZE
) &&

711 ((
¶ay”WÜldMiddËPos
.
x
è< 
shLev–
[
cu¼’tLev–
].
liás
[2].
posX
 + 
TILE_SIZE
))

713 
cu¼’tTuÂ–
 = 
shLev–
[
cu¼’tLev–
].
liás
[2].
tuÂ–
;

714 
	`gam_g‘Cu¼’tDeck
();

718 ià(((
¶ay”WÜldMiddËPos
.
x
è> 
shLev–
[
cu¼’tLev–
].
liás
[1].
posX
 - 
TILE_SIZE
) &&

719 ((
¶ay”WÜldMiddËPos
.
x
è< 
shLev–
[
cu¼’tLev–
].
liás
[1].
posX
 + 
TILE_SIZE
))

721 
cu¼’tTuÂ–
 = 
shLev–
[
cu¼’tLev–
].
liás
[1].
tuÂ–
;

722 
	`gam_g‘Cu¼’tDeck
();

726 ià(((
¶ay”WÜldMiddËPos
.
x
è> 
shLev–
[
cu¼’tLev–
].
liás
[0].
posX
 - 
TILE_SIZE
) &&

727 ((
¶ay”WÜldMiddËPos
.
x
è< 
shLev–
[
cu¼’tLev–
].
liás
[0].
posX
 + 
TILE_SIZE
))

729 
cu¼’tTuÂ–
 = 
shLev–
[
cu¼’tLev–
].
liás
[0].
tuÂ–
;

730 
	`gam_g‘Cu¼’tDeck
();

739 
	`gam_g‘Cu¼’tDeck
();

740 
	}
}

746 
	$gam_putPÏy”OnLiáFromTuÂ–
()

749 
‹mp_liá
 = 0;

751 
shLev–
[
cu¼’tLev–
].
numLiás
) {

753 
cu¼’tTuÂ–
 = 
shLev–
[
cu¼’tLev–
].
liás
[0].
tuÂ–
;

754 
	`gam_putPÏy”OnLiá
(0);

758 
cu¼’tTuÂ–
 !ğ
shLev–
[
cu¼’tLev–
].
liás
[
‹mp_liá
].
tuÂ–
)

760 
‹mp_liá
++;

763 ià(
cu¼’tLev–
 == 13)

765 ià(
cu¼’tTuÂ–
 == 3)

766 
‹mp_liá
 = 1;

768 
‹mp_liá
 = 0;

771 
cu¼’tTuÂ–
 = 
shLev–
[
cu¼’tLev–
].
liás
[
‹mp_liá
].
tuÂ–
;

773 
	`gam_putPÏy”OnLiá
(
‹mp_liá
);

777 ià(
cu¼’tLev–
 == 14)

779 
cu¼’tTuÂ–
) {

781 
	`gam_putPÏy”OnLiá
(2);

785 
	`gam_putPÏy”OnLiá
(0);

789 
	`gam_putPÏy”OnLiá
(1);

793 
	`gam_putPÏy”OnLiá
(0);

799 ià(
cu¼’tLev–
 == 12)

801 
cu¼’tTuÂ–
) {

803 
	`gam_putPÏy”OnLiá
(1);

807 
	`gam_putPÏy”OnLiá
(2);

811 
	`gam_putPÏy”OnLiá
(0);

815 
	`gam_putPÏy”OnLiá
(0);

820 
	}
}

827 
	$lvl_g‘LiáPos™iÚs
(
whichLev–
)

830 
couÁX
 = 0;

831 
couÁY
 = 0;

832 
i
;

833 
cu¼’tTe
 = 0;

834 
couÁLiá
 = 0;

836 
i
 = 0; i !ğ
shLev–
[
cu¼’tLev–
].
Ëv–Dim’siÚs
.
x
 * shLev–[cu¼’tLev–].Ëv–Dim’siÚs.
y
; i++)

838 
cu¼’tTe
 = 
shLev–
[
whichLev–
].
tes
[((
couÁY
 * (shLev–[
cu¼’tLev–
].
Ëv–Dim’siÚs
.
x
)è+ 
couÁX
)];

840 ià(
LIFT_TILE
 =ğ
cu¼’tTe
)

842 
shLev–
[
whichLev–
].
liás
[
couÁLiá
].
posX
 = 
couÁX
 * 
TILE_SIZE
;

843 
shLev–
[
whichLev–
].
liás
[
couÁLiá
].
posY
 = 
couÁY
 * 
TILE_SIZE
;

844 
couÁLiá
++;

847 
couÁX
++;

849 ià(
couÁX
 =ğ
shLev–
[
cu¼’tLev–
].
Ëv–Dim’siÚs
.
x
)

851 
couÁX
 = 0;

852 
couÁY
++;

855 
	}
}

861 
	$gam_´oûssScÜe
(
š‹½Ş©e
)

864 
scÜeD–ayCouÁ
 = 0.0f;

866 
scÜeD–ayCouÁ
 -ğ
scÜeD–ay
 * 
š‹½Ş©e
;

868 ià(
scÜeD–ayCouÁ
 < 0)

870 
scÜeD–ayCouÁ
 = 
scÜeD–ayV®ue
;

872 ià(
cu¼’tScÜe
 > 0)

874 
cu¼’tScÜe
--;

875 
di¥ÏyScÜe
++;

879 
	`¥rštf
(
di¥ÏyScÜeSŒšg
, "%7i", 
di¥ÏyScÜe
);

881 
cu¼’tAË¹Lev–
 = 
ALERT_GREEN_TILE
;

883 ià((
cu¼’tScÜe
 - 
di¥ÏyScÜe
è> 
y–lowAË¹Lev–
)

884 
cu¼’tAË¹Lev–
 = 
ALERT_YELLOW_TILE
;

886 ià((
cu¼’tScÜe
 - 
di¥ÏyScÜe
è> 
»dAË¹Lev–
)

887 
cu¼’tAË¹Lev–
 = 
ALERT_RED_TILE
;

888 
	}
}

894 
	$gam_addToScÜe
(
scÜeV®ue
)

897 
cu¼’tScÜe
 +ğ
scÜeV®ue
;

898 
	}
}

	@../src/game/gam_particles.cpp

1 
	~"hdr/sys_glob®s.h
"

3 
	gli¡
<
	g_em™‹r
> 
	gem™‹r
;

4 
	g¡d
::
li¡
<
_·¹işe
>::
™”©Ü
 
™r
;

5 
	g¡d
::
li¡
<
_em™‹r
>::
™”©Ü
 
em™‹rIŒ
;

7 
	g·¹işeV–oc™yEx¶osiÚ
 = 15;

8 
	g·¹işeV–oc™yEx¶osiÚAdd
 = 5;

10 
	g·¹işeV–oc™yS·rk
 = 5;

11 
	g·¹işeV–oc™yS·rkAdd
 = 5;

13 
	g·¹işeNumb”Ex¶osiÚ
 = 40;

14 
	g·¹işeNumb”Ex¶osiÚAdd
 = 20;

15 
ALLEGRO_COLOR
 
	g·¹işeEx¶osiÚCŞÜ
 = {255, 0, 0, 255};

17 
	g·¹işeNumb”T¿
 = 30;

18 
	g·¹işeNumb”T¿Add
 = 10;

19 
ALLEGRO_COLOR
 
	g·¹işeT¿CŞÜ
 = {255, 0, 0, 255};

20 
	g·¹işeT¿AÍhaRe£t
 = 200;

21 
	g·¹işeT¿AÍhaRe£tAdd
 = 50;

23 
	g·¹işeNumb”S·rk
 = 3;

24 
	g·¹işeNumb”S·rkAdd
 = 5;

25 
ALLEGRO_COLOR
 
	g·¹işeS·rkCŞÜ
 = {175, 175, 175, 200};

27 
	g·¹işeEx¶osiÚReduû
 = 0.03f;

28 
	g·¹işeS·rkReduû
 = 0.04f;

29 
	g·¹işeT¿Reduû
 = 0.05f;

35 
	$·r_debugP¬tişes
()

38 
	`cÚ_´št
(
Œue
, 
çl£
, "Em™‹¸siz[ %˜]", 
em™‹r
.
	`size
());

39 ià(
em™‹r
.
	`size
() > 0)

41 
em™‹rIŒ
 = 
em™‹r
.
	`begš
();ƒm™‹rIŒ !ğem™‹r.
	`’d
();ƒmitterItr++)

43 
	`cÚ_´št
(
Œue
, 
çl£
, "Num…¬tişe [ %˜]", 
em™‹rIŒ
->
·¹işe
.
	`size
());

44 
	`cÚ_´št
(
Œue
, 
çl£
, "BuÎ‘†šk [ %˜]", 
em™‹rIŒ
->
buÎ‘Lšk
);

45 
	`cÚ_´št
(
Œue
, 
çl£
, "Em™‹¸ty³ [ %˜]", 
em™‹rIŒ
->
ty³
);

48 
	}
}

54 
ıVeù
 
	$·r_g‘CœşeAngË
(
·¹işeTy³
)

57 
ªgË
, 
v–oc™y
;

58 
ıVeù
 
dœeùiÚ
;

59 
a
 = 2.0f * 3.1415f;

61 
ªgË
 = ((è
	`¿nd
(è/ (è(
RAND_MAX
)è* 
a
;

62 
·¹işeTy³
) {

63 
PARTICLE_TYPE_EXPLOSION
:

64 
v–oc™y
 = 
	`¿nd
(è% 
·¹işeV–oc™yEx¶osiÚ
 + 
·¹işeV–oc™yEx¶osiÚAdd
;

67 
PARTICLE_TYPE_SPARK
:

68 
v–oc™y
 = 
	`¿nd
(è% 
·¹işeV–oc™yS·rk
 + 
·¹işeV–oc™yS·rkAdd
;

72 
dœeùiÚ
.
x
 = 
v–oc™y
 * 
	`cos
(
ªgË
);

73 
dœeùiÚ
.
y
 = 
v–oc™y
 * 
	`sš
(
ªgË
);

75  
dœeùiÚ
;

76 
	}
}

82 
	$·r_š™Em™‹r
(
ıVeù
 
wÜldPos
, 
ty³
, 
whichBuÎ‘
)

86 
	#PARTICLE_MASS
 0.05f

	)

87 
	#PARTICLE_FRICTION
 0.2f

	)

88 
	#PARTICLE_ELASTIC
 0.9f

	)

89 
	#PARTICLE_SIZE
 2.0f

	)

91 
_em™‹r
 
‹mpEm™‹r
;

92 
_·¹işe
 
‹mpP¬tişe
;

93 
·¹işeNumb”
;

94 
·¹işeNumb”Add
;

95 
ALLEGRO_COLOR
 
·¹işeCŞÜ
;

96 
ıVeù
 
·¹işePos™iÚ
;

98 
‹mpEm™‹r
.
ty³
 =ype;

100 
ty³
) {

101 
PARTICLE_TYPE_EXPLOSION
:

102 
‹mpEm™‹r
.
buÎ‘Lšk
 = -1;

103 
·¹işeNumb”
 = 
·¹işeNumb”Ex¶osiÚ
;

104 
·¹işeNumb”Add
 = 
·¹işeNumb”Ex¶osiÚAdd
;

105 
·¹işeCŞÜ
 = 
·¹işeEx¶osiÚCŞÜ
;

106 
·¹işePos™iÚ
 = 
wÜldPos
;

109 
PARTICLE_TYPE_TRAIL
:

110 
‹mpEm™‹r
.
buÎ‘Lšk
 = 
whichBuÎ‘
;

111 
·¹işeNumb”
 = 
·¹işeNumb”T¿
;

112 
·¹işeNumb”Add
 = 
·¹işeNumb”T¿Add
;

113 
·¹işeCŞÜ
 = 
·¹işeT¿CŞÜ
;

114 
·¹işeCŞÜ
.
a
 = 
	`¿nd
() % 20;

115 
·¹işePos™iÚ
 = 
buÎ‘
[
whichBuÎ‘
].
wÜldPos
;

118 
PARTICLE_TYPE_SPARK
:

119 
‹mpEm™‹r
.
buÎ‘Lšk
 = -1;

120 
·¹işeNumb”
 = 
·¹işeNumb”S·rk
;

121 
·¹işeNumb”Add
 = 
·¹işeNumb”S·rkAdd
;

122 
·¹işeCŞÜ
 = 
·¹işeS·rkCŞÜ
;

123 
·¹işePos™iÚ
 = 
wÜldPos
;

127 
‹mpEm™‹r
.
numP¬tişesAlive
 = 
	`¿nd
(è% 
·¹işeNumb”
 + 
·¹işeNumb”Add
;

128 
i
 = 0; i !ğ
‹mpEm™‹r
.
numP¬tişesAlive
; i++)

130 
‹mpP¬tişe
.
wÜldPos
 = 
·¹işePos™iÚ
;

131 
‹mpP¬tişe
.
cŞÜ
 = 
	`®_m­_rgba
(
·¹işeCŞÜ
.
r
,…¬tişeCŞÜ.
g
,…¬tişeCŞÜ.
b
,…¬tişeCŞÜ.
a
);

132 
‹mpP¬tişe
.
dœeùiÚ
 = 
	`·r_g‘CœşeAngË
(
PARTICLE_TYPE_EXPLOSION
);

133 
‹mpP¬tişe
.
body
 = 
	`ıS·ûAddBody
(
¥aû
, 
	`ıBodyNew
(
PARTICLE_MASS
, 
	`ıMom’tFÜCœşe
(PARTICLE_MASS, 0.0f, 
PARTICLE_SIZE
, 
ıvz”o
)));

135 
	`ıBodyS‘Mass
(
‹mpP¬tişe
.
body
, 
PARTICLE_MASS
);

136 
	`ıBodyS‘Pos™iÚ
(
‹mpP¬tişe
.
body
, 
wÜldPos
);

138 
‹mpP¬tişe
.
sh­e
 = 
	`ıS·ûAddSh­e
(
¥aû
, 
	`ıCœşeSh­eNew
ÑempP¬tişe.
body
, 
PARTICLE_SIZE
, 
ıvz”o
));

139 
	`ıSh­eS‘CŞlisiÚTy³
(
‹mpP¬tişe
.
sh­e
, 
PHYSIC_TYPE_PARTICLE
);

141 
	`ıSh­eS‘FriùiÚ
(
‹mpP¬tişe
.
sh­e
, 
PARTICLE_FRICTION
);

142 
	`ıSh­eS‘EÏ¡ic™y
(
‹mpP¬tişe
.
sh­e
, 
PARTICLE_ELASTIC
);

144 
‹mpEm™‹r
.
·¹işe
.
	`push_back
(
‹mpP¬tişe
);

146 
em™‹r
.
	`push_back
(
‹mpEm™‹r
);

150 ià(
ty³
 =ğ
PARTICLE_TYPE_TRAIL
)

151  
em™‹r
.
	`size
();

154 
	}
}

160 
	$·r_»moveEm™‹r
(
whichBuÎ‘
)

163 
em™‹rIŒ
 = 
em™‹r
.
	`begš
();ƒm™‹rIŒ !ğem™‹r.
	`’d
();ƒmitterItr++)

165 ià(
whichBuÎ‘
 =ğ
em™‹rIŒ
->
buÎ‘Lšk
);

167 
™r
 = 
em™‹rIŒ
->
·¹işe
.
	`begš
(); iŒ !ğem™‹rIŒ->·¹işe.
	`’d
(); itr++)

169 
	`ıS·ûRemoveSh­e
(
¥aû
, 
™r
->
sh­e
);

170 
	`ıS·ûRemoveBody
(
¥aû
, 
™r
->
body
);

172 
	`ıSh­eF»e
(
™r
->
sh­e
);

173 
	`ıBodyF»e
(
™r
->
body
);

175 
™r
 = 
em™‹rIŒ
->
·¹işe
.
	`”a£
(itr);

177 
em™‹rIŒ
 = 
em™‹r
.
	`”a£
(emitterItr);

180 
	}
}

186 
	$·r_ªim©eP¬tişes
()

189 
·¹işeReduû
 = 0.0f;

191 
em™‹rIŒ
 = 
em™‹r
.
	`begš
();ƒm™‹rIŒ !ğem™‹r.
	`’d
();ƒmitterItr++)

193 
em™‹rIŒ
->
ty³
) {

194 
PARTICLE_TYPE_EXPLOSION
:

195 
·¹işeReduû
 = 
·¹işeEx¶osiÚReduû
;

198 
PARTICLE_TYPE_TRAIL
:

199 
·¹işeReduû
 = 
·¹işeT¿Reduû
;

200 
em™‹rIŒ
->
wÜldPos
 = 
buÎ‘
[em™‹rIŒ->
buÎ‘Lšk
].worldPos;

203 
PARTICLE_TYPE_SPARK
:

204 
·¹işeReduû
 = 
·¹işeS·rkReduû
;

208 
™r
 = 
em™‹rIŒ
->
·¹işe
.
	`begš
(); iŒ !ğem™‹rIŒ->·¹işe.
	`’d
(); itr++)

210 
™r
->
cŞÜ
.
a
 -ğ
·¹işeReduû
;

211 ià(
™r
->
cŞÜ
.
a
 < 0)

213 
em™‹rIŒ
->
ty³
) {

214 
PARTICLE_TYPE_EXPLOSION
:

215 
PARTICLE_TYPE_SPARK
:

216 
	`ıS·ûRemoveSh­e
(
¥aû
, 
™r
->
sh­e
);

217 
	`ıS·ûRemoveBody
(
¥aû
, 
™r
->
body
);

219 
	`ıSh­eF»e
(
™r
->
sh­e
);

220 
	`ıBodyF»e
(
™r
->
body
);

221 
™r
 = 
em™‹rIŒ
->
·¹işe
.
	`”a£
(itr);

224 
PARTICLE_TYPE_TRAIL
:

225 
™r
->
wÜldPos
 = 
em™‹rIŒ
->worldPos;

226 
™r
->
cŞÜ
 = 
	`®_m­_rgba
(255, 0, 0, 
	`¿nd
(è% 
·¹işeT¿AÍhaRe£t
 + 
·¹işeT¿AÍhaRe£tAdd
);

227 
¿ndomX
, 
¿ndomY
;

229 
¿ndomX
 = 
	`¿nd
() % 10;

230 
¿ndomX
 -= 5;

231 
¿ndomY
 = 
	`¿nd
() % 10;

232 
¿ndomY
 -= 5;

233 
™r
->
wÜldPos
.
x
 + 
¿ndomX
;

234 
™r
->
wÜldPos
.
y
 + 
¿ndomY
;

235 
	`ıBodyS‘Pos™iÚ
(
™r
->
body
, iŒ->
wÜldPos
);

241 
em™‹rIŒ
->
ty³
) {

242 
PARTICLE_TYPE_EXPLOSION
:

243 
PARTICLE_TYPE_SPARK
:

244 
	`ıBodyS‘FÜû
(
™r
->
body
, iŒ->
dœeùiÚ
);

249 ià(
em™‹rIŒ
->
·¹işe
.
	`size
() == 0)

251 
em™‹rIŒ
 = 
em™‹r
.
	`”a£
(emitterItr);

256 
	}
}

262 
	$·r_d¿wP¬tişes
()

265 
ıVeù
 
vecPos1
;

267 
İ
, 
¤c
, 
d¡
;

269 
	`®_g‘_bËnd”
(&
İ
, &
¤c
, &
d¡
);

270 
	`®_£t_bËnd”
(
ALLEGRO_ADD
, 
ALLEGRO_ALPHA
, ALLEGRO_ALPHA);

272 
em™‹rIŒ
 = 
em™‹r
.
	`begš
();ƒm™‹rIŒ !ğem™‹r.
	`’d
();ƒmitterItr++)

274 
i
 = 0; i !ğ
em™‹rIŒ
->
·¹işe
.
	`size
(); i++)

276 
™r
 = 
em™‹rIŒ
->
·¹işe
.
	`begš
(); iŒ !ğem™‹rIŒ->·¹işe.
	`’d
(); itr++)

278 
vecPos1
 = 
	`ıBodyG‘Pos™iÚ
(
™r
->
body
);

281 
vecPos1
 = 
	`sys_wÜldToSü“n
(vecPos1, 
PARTICLE_SIZE
);

282 
	`®_d¿w_fËd_cœşe
(
vecPos1
.
x
, vecPos1.
y
, 2, 
™r
->
cŞÜ
);

287 
	`®_£t_bËnd”
(
İ
, 
¤c
, 
d¡
);

288 
	}
}

	@../src/game/gam_pathFind.cpp

1 
	~"hdr/sys_glob®s.h
"

21 
	gveùÜ
<
	g_nodeLi¡
> 
	g·th
;

22 
	gnumASrP©hs
;

23 
ALLEGRO_MUTEX
 *
	gmu‹xWayPoštsR—dy
;

29 
	$gam_ASrFšdDi¡ªû
(
ıVeù
 
äomTe
, cpVeù 
toTe
)

32 
co¡X
, 
co¡Y
;

34 
co¡X
 = (
äomTe
.
x
è- (
toTe
.x);

35 
co¡Y
 = (
äomTe
.
y
è- (
toTe
.y);

37  
	`abs
(10 * (
co¡X
 + 
co¡Y
));

38 
	}
}

44 
	$gam_ASrAddTeToO³nNode
(
whichP©h
, 
ıVeù
 
whichTe
, 
moveCo¡
, 
·»Á
)

47 #ifdeà
DEBUG_ASTAR


48 
	`cÚ_´št
(
Œue
, 
çl£
, "Adding‚ewileo openNode†ist");

51 
_·thNode
 
‹mpNode
;

53 
‹mpNode
.
·»Á
 =…arent;

54 
‹mpNode
.
teLoÿtiÚ
 = 
whichTe
;

56 ià(-1 =ğ
·»Á
)

57 
‹mpNode
.
g_movem’tCo¡
 = 0;

59 
‹mpNode
.
g_movem’tCo¡
 = 
moveCo¡
 + 
·th
[
whichP©h
].
şo£dNodes
[·th[whichP©h].
cu¼’tNodePŒClo£dLi¡
].g_movementCost;

61 
‹mpNode
.
h_e¡MoveCo¡
 = 
	`gam_ASrFšdDi¡ªû
(
whichTe
, 
·th
[
whichP©h
].
de¡Te
);

62 
‹mpNode
.
f_scÜe
 =empNode.
g_movem’tCo¡
 +empNode.
h_e¡MoveCo¡
;

64 
·th
[
whichP©h
].
İ’Nodes
.
	`push_back
(
‹mpNode
);

66 #ifdeà
DEBUG_ASTAR


67 
	`cÚ_´št
(
Œue
, 
çl£
, "P©h [ %˜] Siz[ %˜]…¬’ˆ[ %˜] moveCo¡ [ %˜] di¡ªûCo¡ [ %˜]", 
whichP©h
, 
·th
[whichP©h].
İ’Nodes
.
	`size
(), 
·»Á
, 
‹mpNode
.
g_movem’tCo¡
,empNode.
h_e¡MoveCo¡
);

69 
	}
}

75 
	$gam_ASrMoveNodeToClo£dLi¡
(
whichP©h
, 
whichNodeIndex
)

78 
_·thNode
 
‹mpNode
;

79 
veùÜ
<
_·thNode
>::
™”©Ü
 
™r
;

80 
šdexCouÁ
 = 0;

82 #ifdeà
DEBUG_ASTAR


83 
	`cÚ_´št
(
Œue
, 
çl£
, "Movİ’‚od[ %˜]Øşo£dNodli¡", 
whichNodeIndex
);

86 
‹mpNode
 = 
·th
[
whichP©h
].
İ’Nodes
[
whichNodeIndex
];

87 
·th
[
whichP©h
].
şo£dNodes
.
	`push_back
(
‹mpNode
);

88 
·th
[
whichP©h
].
cu¼’tNodePŒClo£dLi¡
 =…©h[whichP©h].
şo£dNodes
.
	`size
() - 1;

90 
šdexCouÁ
 = 0;

91 
™r
 = 
·th
[
whichP©h
].
İ’Nodes
.
	`begš
(); iŒ !ğ·th[whichP©h].İ’Nodes.
	`’d
(); itr++)

93 ià(
šdexCouÁ
 =ğ
whichNodeIndex
)

95 
·th
[
whichP©h
].
İ’Nodes
.
	`”a£
(
™r
);

98 
šdexCouÁ
++;

100 
	}
}

106 
boŞ
 
	$gam_ASrIsTeSŞid
(
teIndex
)

109 
whichTe
 = 
shLev–
[
cu¼’tLev–
].
tes
[
teIndex
];

111 
whichTe
) {

112 
DOOR_ACROSS
:

113 
DOOR_ACROSS_OPEN_1
:

114 
DOOR_ACROSS_OPEN_2
:

115 
DOOR_ACROSS_CLOSING_1
:

116 
DOOR_ACROSS_CLOSING_2
:

118 
DOOR_UP
:

119 
DOOR_UP_OPEN_1
:

120 
DOOR_UP_OPEN_2
:

121 
DOOR_UP_CLOSING_1
:

122 
DOOR_UP_CLOSING_2
:

124  
çl£
;

127 ià(
whichTe
 < 
NO_PASS_TILE
)

128  
Œue
;

130  
çl£
;

131 
	}
}

137 
boŞ
 
	$gam_ASrIsNodeInClo£dLi¡
(
whichP©h
, 
ıVeù
 
whichNode
)

140 
i
 = 0; i !ğ
·th
[
whichP©h
].
şo£dNodes
.
	`size
(); i++)

142 ià((
whichNode
.
x
 =ğ
·th
[
whichP©h
].
şo£dNodes
[
i
].
teLoÿtiÚ
.x) &&

143 (
whichNode
.
y
 =ğ
·th
[
whichP©h
].
şo£dNodes
[
i
].
teLoÿtiÚ
.y))

144  
Œue
;

146  
çl£
;

147 
	}
}

153 
boŞ
 
	$gam_ASrIsNodeInO³nLi¡
(
whichP©h
, 
ıVeù
 
whichNode
)

156 
i
 = 0; i !ğ
·th
[
whichP©h
].
İ’Nodes
.
	`size
(); i++)

158 ià((
whichNode
.
x
 =ğ
·th
[
whichP©h
].
İ’Nodes
[
i
].
teLoÿtiÚ
.x) &&

159 (
whichNode
.
y
 =ğ
·th
[
whichP©h
].
İ’Nodes
[
i
].
teLoÿtiÚ
.y))

160  
Œue
;

162  
çl£
;

163 
	}
}

169 
boŞ
 
	$gam_ASrG’”©eNewNode
(
whichP©h
, 
whichDœeùiÚ
)

172 
dœeùiÚSŒ
[12];

174 
_·thNode
 
‹mpNode
;

175 
moveTeCo¡
;

177 ià(
Œue
 =ğ
·th
[
whichP©h
].
·thR—dy
)

178  
Œue
;

180 #ifdeà
DEBUG_ASTAR


181 
	`cÚ_´št
(
Œue
, 
çl£
, "---");

182 
	`cÚ_´št
(
Œue
, 
çl£
, "Generate‡‚ew‚ode based onhe‚ode withhe current†owest cost.");

185 
whichDœeùiÚ
) {

186 
NODE_LEFT
:

187 
‹mpNode
.
teLoÿtiÚ
.
x
 = 
·th
[
whichP©h
].
şo£dNodes
[path

188 [
whichP©h
].
cu¼’tNodePŒClo£dLi¡
]

189 .
teLoÿtiÚ
.
x
 -

191 
‹mpNode
.
teLoÿtiÚ
.
y
 = 
·th
[
whichP©h
].
şo£dNodes
[path

192 [
whichP©h
].
cu¼’tNodePŒClo£dLi¡
]

193 .
teLoÿtiÚ
.
y
;

194 
moveTeCo¡
 = 10;

195 
	`¡¾ıy
(
dœeùiÚSŒ
, "LEFT", ("LEFT"));

197 
NODE_UP
:

198 
‹mpNode
.
teLoÿtiÚ
.
x
 = 
·th
[
whichP©h
].
şo£dNodes
[path

199 [
whichP©h
].
cu¼’tNodePŒClo£dLi¡
]

200 .
teLoÿtiÚ
.
x
;

201 
‹mpNode
.
teLoÿtiÚ
.
y
 = 
·th
[
whichP©h
].
şo£dNodes
[path

202 [
whichP©h
].
cu¼’tNodePŒClo£dLi¡
]

203 .
teLoÿtiÚ
.
y
 -

205 
moveTeCo¡
 = 10;

206 
	`¡¾ıy
(
dœeùiÚSŒ
, "UP", ("UP"));

208 
NODE_RIGHT
:

209 
‹mpNode
.
teLoÿtiÚ
.
x
 = 
·th
[
whichP©h
].
şo£dNodes
[path

210 [
whichP©h
].
cu¼’tNodePŒClo£dLi¡
]

211 .
teLoÿtiÚ
.
x
 +

213 
‹mpNode
.
teLoÿtiÚ
.
y
 = 
·th
[
whichP©h
].
şo£dNodes
[path

214 [
whichP©h
].
cu¼’tNodePŒClo£dLi¡
]

215 .
teLoÿtiÚ
.
y
;

216 
moveTeCo¡
 = 10;

217 
	`¡¾ıy
(
dœeùiÚSŒ
, "RIGHT", ("RIGHT"));

219 
NODE_DOWN
:

220 
‹mpNode
.
teLoÿtiÚ
.
x
 = 
·th
[
whichP©h
].
şo£dNodes
[path

221 [
whichP©h
].
cu¼’tNodePŒClo£dLi¡
]

222 .
teLoÿtiÚ
.
x
;

223 
‹mpNode
.
teLoÿtiÚ
.
y
 = 
·th
[
whichP©h
].
şo£dNodes
[path

224 [
whichP©h
].
cu¼’tNodePŒClo£dLi¡
]

225 .
teLoÿtiÚ
.
y
 +

227 
moveTeCo¡
 = 10;

228 
	`¡¾ıy
(
dœeùiÚSŒ
, "DOWN", ("DOWN"));

231 #ifdeà
DEBUG_ASTAR


232 
	`cÚ_´št
(
Œue
, 
çl£
, "P¬’ˆ[ %˜] DœeùiÚ [ % ]", 
·th
[
whichP©h
].
cu¼’tNodePŒClo£dLi¡
, 
dœeùiÚSŒ
);

238 
‹mpNode
.
teLoÿtiÚ
.
x
 = ()empNode.tileLocation.x;

239 
‹mpNode
.
teLoÿtiÚ
.
y
 = ()empNode.tileLocation.y;

241 ià((
‹mpNode
.
teLoÿtiÚ
.
x
 =ğ
·th
[
whichP©h
].
de¡Te
.xè&& (‹mpNode.teLoÿtiÚ.
y
 ==…ath[whichPath].destTile.y))

243 
	`gam_ASrAddTeToO³nNode
(
whichP©h
, 
‹mpNode
.
teLoÿtiÚ
, 
moveTeCo¡
, 
·th
[whichP©h].
cu¼’tNodePŒClo£dLi¡
);

244 
	`gam_ASrMoveNodeToClo£dLi¡
(
whichP©h
, 
·th
[whichP©h].
İ’Nodes
.
	`size
());

245 
·th
[
whichP©h
].
·thR—dy
 = 
Œue
;

246  
Œue
;

248 #ifdeà
DEBUG_ASTAR


249 
	`cÚ_´št
(
Œue
, 
çl£
, "See ifhe‚ode is solid or‚ot");

252 ià(
Œue
 =ğ
	`gam_ASrIsTeSŞid
((
‹mpNode
.
teLoÿtiÚ
.
y
 * (
shLev–
[
cu¼’tLev–
].
Ëv–Dim’siÚs
.
x
) +

253 
‹mpNode
.
teLoÿtiÚ
.
x
)))

255  
çl£
;

260 ià(
Œue
 =ğ
	`gam_ASrIsNodeInClo£dLi¡
(
whichP©h
, 
‹mpNode
.
teLoÿtiÚ
))

262  
çl£
;

266 ià(
çl£
 =ğ
	`gam_ASrIsNodeInO³nLi¡
(
whichP©h
, 
‹mpNode
.
teLoÿtiÚ
))

268 
	`gam_ASrAddTeToO³nNode
(
whichP©h
, 
‹mpNode
.
teLoÿtiÚ
, 
moveTeCo¡
, 
·th
[whichP©h].
cu¼’tNodePŒClo£dLi¡
);

269  
çl£
;

274 ià(
·th
[
whichP©h
].
İ’Nodes
[·th[whichP©h].İ’Nodes.
	`size
()].
g_movem’tCo¡
 <…©h[whichP©h].
şo£dNodes
[·th[whichP©h].
cu¼’tNodePŒClo£dLi¡
].g_movementCost)

276 #ifdeà
DEBUG_ASTAR


277 
	`cÚ_´št
(
Œue
, 
çl£
, "New‚ode is betterhanhe old one");

279 
	`gam_ASrAddTeToO³nNode
(
whichP©h
, 
·th
[whichP©h].
İ’Nodes
[·th[whichP©h].İ’Nodes.
	`size
()].
teLoÿtiÚ
, 
moveTeCo¡
,…©h[whichP©h].
cu¼’tNodePŒClo£dLi¡
);

281  
Œue
;

282 
	}
}

288 
	$gam_ASrDebugWayPošts
(
whichP©h
)

293 
boŞ
 
¬eWayPoštsR—dy
;

295 
	`®_lock_mu‹x
(
mu‹xWayPoštsR—dy
);

296 
¬eWayPoštsR—dy
 = 
·th
[
whichP©h
].
wayPoštsR—dy
;

297 
	`®_uÆock_mu‹x
(
mu‹xWayPoštsR—dy
);

299 ià(
çl£
 =ğ
¬eWayPoštsR—dy
)

302 
ALLEGRO_COLOR
 
lšeCŞÜ
;

303 
lšeThickÃss
;

304 
ıVeù
 
lšeS¹
;

305 
ıVeù
 
lšeFšish
;

307 
lšeCŞÜ
 = 
	`®_m­_rgb
(255, 0, 0);

308 
lšeThickÃss
 = 2;

310 
i
 = 0; i !ğ
·th
[
whichP©h
].
wayPošts
.
	`size
() - 1; i++)

312 
lšeS¹
 = 
·th
[
whichP©h
].
wayPošts
[
i
];

313 
lšeFšish
 = 
·th
[
whichP©h
].
wayPošts
[
i
 + 1];

315 
lšeS¹
 = 
	`sys_wÜldToSü“n
(lineStart, 2);

316 
lšeFšish
 = 
	`sys_wÜldToSü“n
(lineFinish, 2);

318 
	`®_d¿w_lše
(
lšeS¹
.
x
,†šeS¹.
y
, 
lšeFšish
.x,†šeFšish.y, 
lšeCŞÜ
, 
lšeThickÃss
);

320 
	}
}

326 
	$gam_ASrDebugP©hs
()

329 
	`cÚ_´št
(
Œue
,rue, "Numb” oà·th [ %˜]", 
·th
.
	`size
());

331 
i
 = 0; i !ğ
·th
.
	`size
(); i++)

333 
	`cÚ_´št
(
Œue
,rue, "Droid [ %˜] P©h [ %˜] - R—dy [ % ] - SizfoundNode [ %˜] Th»ad [ %˜]", 
·th
[
i
].
whichDroid
, i,…©h[i].
wayPoštsR—dy
 ? "Œue" : "çl£",…©h[i].
foundP©h
.
	`size
(),…©h[i].
th»ad
);

335 
	}
}

341 
	$gam_ASrRemoveP©h
(
whichP©h
)

344 ià(
NULL
 !ğ
·th
[
whichP©h
].
th»ad
)

347 
	`®_£t_th»ad_should_¡İ
(
·th
[
whichP©h
].
th»ad
);

349 
shLev–
[
cu¼’tLev–
].
droid
[
·th
[
whichP©h
].
whichDroid
].
aSrP©hIndex
 = -1;

351 
·th
[
whichP©h
].
·thR—dy
 = 
çl£
;

352 
	`®_lock_mu‹x
(
mu‹xWayPoštsR—dy
);

353 
·th
[
whichP©h
].
wayPoštsR—dy
 = 
çl£
;

354 
	`®_uÆock_mu‹x
(
mu‹xWayPoštsR—dy
);

355 
·th
[
whichP©h
].
cu¼’tNodePŒClo£dLi¡
 = 0;

356 
·th
[
whichP©h
].
whichDroid
 = -1;

357 
·th
[
whichP©h
].
İ’Nodes
.
	`ş—r
();

358 
·th
[
whichP©h
].
şo£dNodes
.
	`ş—r
();

359 
·th
[
whichP©h
].
wayPošts
.
	`ş—r
();

360 
·th
[
whichP©h
].
foundP©h
.
	`ş—r
();

361 
·th
[
whichP©h
].
th»ad
 = 
NULL
;

362 
	}
}

369 
	$gam_ASrG‘NumWaypošts
(
whichP©h
)

372 ià(
whichP©h
 > 
·th
.
	`size
())

375 ià(
whichP©h
 < 0)

378 ià(
çl£
 =ğ
·th
[
whichP©h
].
wayPoštsR—dy
)

381  
·th
[
whichP©h
].
wayPošts
.
	`size
() - 1;

382 
	}
}

388 
boŞ
 
	$gam_ASrIsP©hR—dy
(
whichP©h
)

391 
boŞ
 
¬eWayPoštsR—dy
;

393 ià(
whichP©h
 > 
·th
.
	`size
())

394  
çl£
;

396 ià(
whichP©h
 < 0)

397  
çl£
;

399 
	`®_lock_mu‹x
(
mu‹xWayPoštsR—dy
);

400 
¬eWayPoštsR—dy
 = 
·th
[
whichP©h
].
wayPoštsR—dy
;

401 
	`®_uÆock_mu‹x
(
mu‹xWayPoštsR—dy
);

402  
¬eWayPoštsR—dy
;

403 
	}
}

409 
	$gam_ASrExŒaùP©h
(
whichP©h
)

412 
nodeP¬’t
 = -1;

413 
_·thNode
 
‹mpNode
;

415 
‹mpNode
.
teLoÿtiÚ
 = 
·th
[
whichP©h
].
de¡Te
;

416 
·th
[
whichP©h
].
foundP©h
.
	`push_back
(
‹mpNode
);

418 
‹mpNode
.
teLoÿtiÚ
 = 
·th
[
whichP©h
].
şo£dNodes
[·th[whichP©h].
cu¼’tNodePŒClo£dLi¡
 - 1].tileLocation;

419 
nodeP¬’t
 = 
·th
[
whichP©h
].
şo£dNodes
[·th[whichP©h].
cu¼’tNodePŒClo£dLi¡
 - 1].
·»Á
;

421 -1 !ğ
nodeP¬’t
)

423 
·th
[
whichP©h
].
foundP©h
.
	`push_back
(
‹mpNode
);

425 
‹mpNode
 = 
·th
[
whichP©h
].
şo£dNodes
[
nodeP¬’t
];

426 
nodeP¬’t
 = 
·th
[
whichP©h
].
şo£dNodes
[nodeP¬’t].
·»Á
;

428 ià((
‹mpNode
.
teLoÿtiÚ
.
x
 =ğ
·th
[
whichP©h
].
¡¬tTe
.xè&& (‹mpNode.teLoÿtiÚ.
y
 ==…ath[whichPath].startTile.y))

430 
·th
[
whichP©h
].
foundP©h
.
	`push_back
(
‹mpNode
);

434 
	}
}

440 
	$gam_ASrCÚv”tToCoÜds
(
whichP©h
)

443 
ıVeù
 
‹mpWaypošt
;

445 
i
 = 0; i !ğ
·th
[
whichP©h
].
foundP©h
.
	`size
(); i++)

447 
‹mpWaypošt
.
x
 = 
·th
[
whichP©h
].
foundP©h
[
i
].
teLoÿtiÚ
.x * 
TILE_SIZE
;

448 
‹mpWaypošt
.
y
 = 
·th
[
whichP©h
].
foundP©h
[
i
].
teLoÿtiÚ
.y * 
TILE_SIZE
;

450 
‹mpWaypošt
.
x
 +ğ
TILE_SIZE
 / 2;

452 
·th
[
whichP©h
].
wayPošts
.
	`push_back
(
‹mpWaypošt
);

454 
	}
}

460 
	$gam_ASrFšdLowe¡Co¡Node
(
whichP©h
)

463 
lowe¡Co¡
;

464 
lowe¡NodeIndexA¼ay
;

466 
lowe¡Co¡
 = 50000;

467 
lowe¡NodeIndexA¼ay
 = 0;

469 ià(
Œue
 =ğ
·th
[
whichP©h
].
İ’Nodes
.
	`em±y
())

471 
	`cÚ_´št
(
Œue
,rue, "ERROR: NØİ’‚ode tØ£¬ch iÀgam_ASrFšdLowe¡Co¡Nod-…©h [ %˜]", 
whichP©h
);

472 
	`sys_”rÜF©®
("gam_ASrFšdLowe¡Co¡Node", 
__LINE__
, "No open‚odes");

475 #ifdeà
DEBUG_ASTAR


476 
	`cÚ_´št
(
Œue
, 
çl£
, "Searchhe open‚odes‡nd findhe one withhe†owestotal cost");

479 
i
 = 0; i !ğ
·th
[
whichP©h
].
İ’Nodes
.
	`size
(); i++)

481 ià(
·th
[
whichP©h
].
İ’Nodes
[
i
].
f_scÜe
 < 
lowe¡Co¡
)

483 
lowe¡Co¡
 = 
·th
[
whichP©h
].
İ’Nodes
[
i
].
f_scÜe
;

484 
lowe¡NodeIndexA¼ay
 = 
i
;

487  
lowe¡NodeIndexA¼ay
;

488 
	}
}

494 *
	$gam_ASrS—rchTh»ad
(
ALLEGRO_THREAD
 *
th»ad
, *
¬g
)

497 
cu¼’tNodeIndex
 = 0;

498 
whichP©hArg
;

499 *
‹mpArg
;

501 
‹mpArg
 = (*è
¬g
;

502 
whichP©hArg
 = *
‹mpArg
;

504 #ifdeà
DEBUG_ASTAR


505 
	`cÚ_´št
(
Œue
, 
çl£
, "£¬chTh»ad - whichP©h [ %˜]", 
whichP©hArg
);

508 
çl£
 =ğ
·th
[
whichP©hArg
].
·thR—dy
)

511 
cu¼’tNodeIndex
 = 
	`gam_ASrFšdLowe¡Co¡Node
(
whichP©hArg
);

513 
	`gam_ASrMoveNodeToClo£dLi¡
(
whichP©hArg
, 
cu¼’tNodeIndex
);

516 
	`gam_ASrG’”©eNewNode
(
whichP©hArg
, 
NODE_RIGHT
);

517 
	`gam_ASrG’”©eNewNode
(
whichP©hArg
, 
NODE_LEFT
);

518 
	`gam_ASrG’”©eNewNode
(
whichP©hArg
, 
NODE_UP
);

519 
	`gam_ASrG’”©eNewNode
(
whichP©hArg
, 
NODE_DOWN
);

521 ià(
Œue
 =ğ
	`®_g‘_th»ad_should_¡İ
(
·th
[
whichP©hArg
].
th»ad
))

523 
	`®_de¡roy_th»ad
(
·th
[
whichP©hArg
].
th»ad
);

524 
	`®_lock_mu‹x
(
mu‹xWayPoštsR—dy
);

525 
·th
[
whichP©hArg
].
wayPoštsR—dy
 = 
çl£
;

526 
	`®_uÆock_mu‹x
(
mu‹xWayPoštsR—dy
);

527 #ifdeà
DEBUG_ASTAR


528 
	`cÚ_´št
(
Œue
,rue, "ERROR: Should‚ever„each here. Meanshread is still„unning‡fter destory called");

534 
	`gam_ASrExŒaùP©h
(
whichP©hArg
);

535 
	`gam_ASrCÚv”tToCoÜds
(
whichP©hArg
);

536 
	`®_lock_mu‹x
(
mu‹xWayPoštsR—dy
);

537 
·th
[
whichP©hArg
].
wayPoštsR—dy
 = 
Œue
;

538 
	`®_uÆock_mu‹x
(
mu‹xWayPoštsR—dy
);

539 
	`®_de¡roy_th»ad
(
·th
[
whichP©hArg
].
th»ad
);

540 
·th
[
whichP©hArg
].
th»ad
 = 
NULL
;

541 
	}
}

547 
	$gam_ASrS¹P©hTh»ad
(
whichP©h
)

550 
·thOwÃr
;

552 #ifdeà
DEBUG_ASTAR


553 
	`cÚ_´št
(
Œue
, 
çl£
, "P©h ID [ %˜] Droid [ %˜]", 
whichP©h
, 
·th
[whichP©h].
whichDroid
);

556 
·thOwÃr
 = 
·th
[
whichP©h
].
whichDroid
;

557 
shLev–
[
cu¼’tLev–
].
droid
[
·thOwÃr
].
aSrP©hIndex
 = 
whichP©h
;

559 
	`gam_ASrAddTeToO³nNode
(
whichP©h
, 
·th
[whichP©h].
¡¬tTe
, 0, -1);

561 
·th
[
whichP©h
].
th»ad
 = 
	`®_ü—‹_th»ad
(
gam_ASrS—rchTh»ad
, &
shLev–
[
cu¼’tLev–
].
droid
[
·thOwÃr
].
aSrP©hIndex
);

562 
	}
}

569 
	$gam_ASrReque¡NewP©h
(
ıVeù
 
¡¬t
, cpVeù 
de¡š©iÚ
, 
whichDroid
)

572 
_nodeLi¡
 
‹mpP©h
;

573 
whichP©hIndex
;

574 
boŞ
 
š™DÚe
 = 
çl£
;

576 ià(
çl£
 =ğ
š™DÚe
)

578 
·th
.
	`»£rve
(
numASrP©hs
);

579 
š™DÚe
 = 
Œue
;

580 
i
 = 0; i !ğ
numASrP©hs
; i++)

582 
·th
[
i
].
wayPoštsR—dy
 = 
çl£
;

583 
·th
[
i
].
·thR—dy
 = 
çl£
;

585 
·th
.
	`push_back
(
‹mpP©h
);

587 
š™DÚe
 = 
Œue
;

588 
mu‹xWayPoštsR—dy
 = 
	`®_ü—‹_mu‹x
();

589 ià(
NULL
 =ğ
mu‹xWayPoštsR—dy
)

590 
	`cÚ_´št
(
Œue
, 
çl£
, "ERROR: Failedo create mutex [ %s ]", "mutexWayPointsReady");

593 
‹mpP©h
.
·thR—dy
 = 
çl£
;

594 
‹mpP©h
.
wayPoštsR—dy
 = 
çl£
;

595 
‹mpP©h
.
¡¬tTe
.
x
 = (è
¡¬t
.x;

596 
‹mpP©h
.
¡¬tTe
.
y
 = (è
¡¬t
.y;

597 
‹mpP©h
.
de¡Te
.
x
 = (è
de¡š©iÚ
.x;

598 
‹mpP©h
.
de¡Te
.
y
 = (è
de¡š©iÚ
.y;

599 
‹mpP©h
.
cu¼’tNodePŒClo£dLi¡
 = -1;

600 
‹mpP©h
.
whichDroid
 = whichDroid;

601 
‹mpP©h
.
İ’Nodes
.
	`»£rve
(10);

602 
‹mpP©h
.
şo£dNodes
.
	`»£rve
(10);

603 
‹mpP©h
.
th»ad
 = 
NULL
;

605 #ifdeà
DEBUG_ASTAR


606 
	`cÚ_´št
(
Œue
,rue, "Reque¡šg‚ew…©h s¹ [ %3.2à%3.2à] De¡ [ %3.2à%3.2à]", 
¡¬t
.
x
, s¹.
y
, 
de¡š©iÚ
.x, destination.y);

609 
boŞ
 
¬eWayPoštsR—dy
;

611 
i
 = 0; i !ğ
numASrP©hs
; i++)

613 
	`®_lock_mu‹x
(
mu‹xWayPoštsR—dy
);

614 
¬eWayPoštsR—dy
 = 
·th
[
i
].
wayPoštsR—dy
;

615 
	`®_uÆock_mu‹x
(
mu‹xWayPoštsR—dy
);

617 ià(
çl£
 =ğ
¬eWayPoštsR—dy
)

619 
·th
[
i
] = 
‹mpP©h
;

620 
	`gam_ASrS¹P©hTh»ad
(
i
);

621  
i
;

626 ià(
Œue
 =ğ
·th
.
	`em±y
())

628 
·th
.
	`push_back
(
‹mpP©h
);

629 
whichP©hIndex
 = 
·th
.
	`size
() - 1;

630 
	`gam_ASrS¹P©hTh»ad
(
whichP©hIndex
);

631  
whichP©hIndex
;

634 
i
 = 0; i !ğ
·th
.
	`size
(); i++)

636 ià(
Œue
 =ğ
·th
[
i
].
İ’Nodes
.
	`em±y
())

638 
	`gam_ASrS¹P©hTh»ad
(
i
);

639  
i
;

646 
·th
.
	`push_back
(
‹mpP©h
);

647 
	`gam_ASrS¹P©hTh»ad
(
·th
.
	`size
() - 1);

648 
whichP©hIndex
 = 
·th
.
	`size
() - 1;

649  
whichP©hIndex
;

650 
	}
}

	@../src/game/gam_player.cpp

1 
	~"../../hdr/sys_glob®s.h
"

3 
	g¶ay”AcûË¿tiÚ
;

4 
	g¶ay”MaxS³ed
;

5 
	g¶ay”MaxV–oc™y
;

6 
	g¶ay”Cu¼’tH—Éh
;

7 
ıVeù
 
	g¶ay”Sü“nPos
;

8 
	g¶ay”Cu¼’tF¿me
;

9 
	g¶ay”DroidTy³DBIndex
;

11 
	gg¿v™y
;

13 
ıVeù
 
	g¶ay”V–oc™y
;

14 
ıVeù
 
	g¶ay”WÜldPos
;

15 
ıVeù
 
	g¶ay”WÜldMiddËPos
;

16 
ıVeù
 
	g¶ay”WÜldNextPos
;

18 
boŞ
 
	gteCŞlisiÚOn
 = 
Œue
;

19 
boŞ
 
	gdoCÏmpPÏy”V–oc™y
;

20 
boŞ
 
	gšT¿nsãrMode
 = 
çl£
;

22 
	g¶ay”Ov”Te
;

24 
boŞ
 
	g¶ay”W—pÚR—dyToFœe
;

25 
	g¶ay”W—pÚRech¬geTime
 = 0.0f;

26 
	g¶ay”DroidTy³Image
 = 
¥r™e_001
;

28 
	gh—lšgR©e
;

33 
	$gam_checkT¿nsãrSound
()

36 ià((
Œue
 =ğ
šT¿nsãrMode
è&& (
çl£
 =ğ
	`sys_isSoundPÏyšg
(
SND_TRANSFER_1
)))

37 
	`sys_¶aySound
(
SND_TRANSFER_1
, 
SND_PAN_CENTER
, 
ALLEGRO_PLAYMODE_LOOP
);

39 ià(
çl£
 =ğ
šT¿nsãrMode
)

40 
	`sys_¡İSound
(
SND_TRANSFER_1
);

41 
	}
}

46 
	$gam_w—pÚRech¬gePÏy”
()

49 ià(
çl£
 =ğ
¶ay”W—pÚR—dyToFœe
)

51 ià(
Œue
 =ğ
d©aBa£EÁry
[
¶ay”DroidTy³DBIndex
].
ÿnShoÙ
)

52 
¶ay”W—pÚRech¬geTime
 +ğ
d©aBa£EÁry
[
¶ay”DroidTy³DBIndex
].
»ch¬geTime
 * 
thškIÁ”v®
;

54 
¶ay”W—pÚRech¬geTime
 +ğ
d©aBa£EÁry
[0].
»ch¬geTime
 * 
thškIÁ”v®
;

56 ià(
¶ay”W—pÚRech¬geTime
 > 1.0f)

58 
¶ay”W—pÚRech¬geTime
 = 0.0f;

59 
¶ay”W—pÚR—dyToFœe
 = 
Œue
;

62 
	}
}

67 
	$gam_ªim©ePÏy”S´™e
(
d–ayIÁ”v®
)

70 
couÁD–ay
 = 0.0f;

71 
ªim¥“d
 = 0.0f;

73 
ªim¥“d
 = 10.0f;

75 
couÁD–ay
 +ğ
ªim¥“d
 * 
d–ayIÁ”v®
;

76 ià(
couÁD–ay
 > 1.0f)

78 
couÁD–ay
 = 0.0f;

79 
¶ay”Cu¼’tF¿me
++;

80 ià(
¶ay”Cu¼’tF¿me
 > 
NUM_FRAMES_IN_DROID
)

81 
¶ay”Cu¼’tF¿me
 = 0;

83 
	}
}

89 
	$gam_£tupPÏy”V®ues
(
cİyFrom
)

92 
¶ay”MaxS³ed
 = 
d©aBa£EÁry
[
cİyFrom
].
maxS³ed
;

93 
¶ay”AcûË¿tiÚ
 = 
d©aBa£EÁry
[
cİyFrom
].
acûË¿‹
;

94 
¶ay”Cu¼’tH—Éh
 = 
d©aBa£EÁry
[
cİyFrom
].
maxH—Éh
;

95 
¶ay”Cu¼’tF¿me
 = 0;

96 
¶ay”DroidTy³Image
 = 
cİyFrom
 + 2;

97 
¶ay”DroidTy³DBIndex
 = 
cİyFrom
;

98 
¶ay”W—pÚR—dyToFœe
 = 
Œue
;

99 
¶ay”W—pÚRech¬geTime
 = 0.0f;

100 
	}
}

105 
	$gam_´oûssPÏy”Movem’t
(
thškTime
)

108 ià(
Œue
 =ğ
šputAùiÚ
[
gameLeá
].
cu¼’yDown
)

110 
¶ay”V–oc™y
.
x
 -ğ
¶ay”AcûË¿tiÚ
 * 
thškTime
;

111 ià(
¶ay”V–oc™y
.
x
 < -
¶ay”MaxS³ed
)

112 
¶ay”V–oc™y
.
x
 = -
¶ay”MaxS³ed
;

115 ià(
Œue
 =ğ
šputAùiÚ
[
gameRight
].
cu¼’yDown
)

117 
¶ay”V–oc™y
.
x
 +ğ
¶ay”AcûË¿tiÚ
 * 
thškTime
;

118 ià(
¶ay”V–oc™y
.
x
 > 
¶ay”MaxS³ed
)

119 
¶ay”V–oc™y
.
x
 = 
¶ay”MaxS³ed
;

122 ià(
Œue
 =ğ
šputAùiÚ
[
gameUp
].
cu¼’yDown
)

124 
¶ay”V–oc™y
.
y
 -ğ
¶ay”AcûË¿tiÚ
 * 
thškTime
;

125 ià(
¶ay”V–oc™y
.
y
 < -
¶ay”MaxS³ed
)

126 
¶ay”V–oc™y
.
y
 = -
¶ay”MaxS³ed
;

129 ià(
Œue
 =ğ
šputAùiÚ
[
gameDown
].
cu¼’yDown
)

131 
¶ay”V–oc™y
.
y
 +ğ
¶ay”AcûË¿tiÚ
 * 
thškTime
;

132 ià(
¶ay”V–oc™y
.
y
 > 
¶ay”MaxS³ed
)

133 
¶ay”V–oc™y
.
y
 = 
¶ay”MaxS³ed
;

138 ià(
çl£
 =ğ
šputAùiÚ
[
gameLeá
].
cu¼’yDown
)

140 ià(
¶ay”V–oc™y
.
x
 < 0.0f)

142 
¶ay”V–oc™y
.
x
 +ğ
g¿v™y
 * 
thškTime
;

143 ià(
¶ay”V–oc™y
.
x
 > 0.0f)

144 
¶ay”V–oc™y
.
x
 = 0.0f;

148 ià(
çl£
 =ğ
šputAùiÚ
[
gameRight
].
cu¼’yDown
)

150 ià(
¶ay”V–oc™y
.
x
 > 0.0f)

152 
¶ay”V–oc™y
.
x
 -ğ
g¿v™y
 * 
thškTime
;

153 ià(
¶ay”V–oc™y
.
x
 < 0.0f)

154 
¶ay”V–oc™y
.
x
 = 0.0f;

158 ià(
çl£
 =ğ
šputAùiÚ
[
gameUp
].
cu¼’yDown
)

160 ià(
¶ay”V–oc™y
.
y
 < 0.0f)

162 
¶ay”V–oc™y
.
y
 +ğ
g¿v™y
 * 
thškTime
;

163 ià(
¶ay”V–oc™y
.
y
 > 0.0f)

164 
¶ay”V–oc™y
.
y
 = 0.0f;

168 ià(
çl£
 =ğ
šputAùiÚ
[
gameDown
].
cu¼’yDown
)

170 ià(
¶ay”V–oc™y
.
y
 > 0.0f)

172 
¶ay”V–oc™y
.
y
 -ğ
g¿v™y
 * 
thškTime
;

173 ià(
¶ay”V–oc™y
.
y
 < 0.0f)

174 
¶ay”V–oc™y
.
y
 = 0.0f;

180 ià(
Œue
 =ğ
doCÏmpPÏy”V–oc™y
)

181 
	`ıvşamp
(
¶ay”V–oc™y
, 
¶ay”MaxV–oc™y
);

183 
	`gam_£tHUDS‹
(
HUD_STATE_MOVE
);

185 ià(
Œue
 =ğ
šT¿nsãrMode
)

186 
	`gam_£tHUDS‹
(
HUD_STATE_TRANSFER
);

188 ià(
çl£
 =ğ
¶ay”W—pÚR—dyToFœe
)

189 
	`gam_£tHUDS‹
(
HUD_STATE_CHARGING
);

190 
	}
}

196 
	$gam_checkPÏy”H—lšgTe
(
thškTime
)

199 
h—lšgD–ay
 = 1.5f;

200 
h—lšgD–ayCouÁ
 = 0.0f;

202 ià((
¶ay”Ov”Te
 >ğ
HEALING_TILE
) &&

203 (
¶ay”Ov”Te
 <ğ
HEALING_TILE
 + 3))

205 
	`gam_£tHUDS‹
(
HUD_STATE_HEALING
);

207 ià((
¶ay”V–oc™y
.
x
 =ğ0.0fè&& (¶ay”V–oc™y.
y
 == 0.0f))

209 
h—lšgD–ayCouÁ
 +ğ
h—lšgD–ay
 * 
thškTime
;

210 ià(
h—lšgD–ayCouÁ
 > 1.0f)

212 
h—lšgD–ayCouÁ
 = 0.0f;

213 ià(
¶ay”Cu¼’tH—Éh
 < 
d©aBa£EÁry
[
¶ay”DroidTy³Image
 - 2].
maxH—Éh
)

215 ià(
çl£
 =ğ
	`sys_isSoundPÏyšg
(
SND_ENERGY_HEAL
))

216 
	`sys_¶aySound
(
SND_ENERGY_HEAL
, 0.0f, 
ALLEGRO_PLAYMODE_ONCE
);

218 
cu¼’tScÜe
 -ğ
h—lšgR©e
 * 2;

219 ià(
cu¼’tScÜe
 < 0)

220 
cu¼’tScÜe
 = 0;

221 
¶ay”Cu¼’tH—Éh
 +ğ
h—lšgR©e
;

222 ià(
¶ay”Cu¼’tH—Éh
 > 
d©aBa£EÁry
[
¶ay”DroidTy³Image
 - 2].
maxH—Éh
)

223 
¶ay”Cu¼’tH—Éh
 = 
d©aBa£EÁry
[
¶ay”DroidTy³Image
 - 2].
maxH—Éh
;

228 
	}
}

234 
	$gam_doDamageToPÏy”
(
damageSourû
, 
sourûDroid
)

237 
damageSourû
)

239 
DAMAGE_BULLET
:

240 
¶ay”Cu¼’tH—Éh
 -ğ
d©aBa£EÁry
[
shLev–
[
cu¼’tLev–
].
droid
[
sourûDroid
].
droidTy³
].
buÎ‘Damage
;

243 
DAMAGE_COLLISION
:

244 
¶ay”Cu¼’tH—Éh
 -ğ
cŞlisiÚDamageInæiùed
;

247 
DAMAGE_EXPLOSION
:

248 
¶ay”Cu¼’tH—Éh
 -ğ
cŞlisiÚEx¶osiÚDamage
;

252 
	`sys_¶aySound
(
SND_DAMAGE
, 0.0f, 
ALLEGRO_PLAYMODE_ONCE
);

254 ià(
¶ay”Cu¼’tH—Éh
 < 0)

257 
	`cÚ_´št
(
Œue
,rue, "PLAYER DEAD [ %˜]", 
¶ay”Cu¼’tH—Éh
);

259 
	}
}

	@../src/game/gam_render.cpp

1 
	~"../../hdr/sys_glob®s.h
"

3 
	#TILE_LOOKUP
 1

4 

	)

5 
	ghudStusS‹
;

7 
boŞ
 
	g´oûssFadeV®ue
 = 
Œue
;

8 
	gcu¼’tFadeAùiÚ
;

9 
	gçdeV®ue
 = 1.0f;

10 
	gmodeAá”FadeOff
;

12 
	gtePosX
 = 0;

13 
	gtePosY
 = 0;

14 
	gpix–X
 = 0.0f;

15 
	gpix–Y
 = 0.0f;

17 
	gnumTeAüossInTextu»
, 
	gnumTesDownInTextu»
;

19 
	g´ofeTeC®cSk³d
;

20 
	g´ofeTÙ®TeD¿wn
;

22 
	g´ofeTimeS¹
;

23 
	g´ofeTimeEnd
;

24 
	g´ofeTimeAv”age
 = 0.0f;

25 
	g´ofeTimeCouÁ
 = 0.0f;

26 
	g´ofeTimeTÙ®
 = 0.0f;

28 
	g¡©usTextX
, 
	g¡©usTextY
, 
	gscÜeTextX
;

29 
	gcu¼’tTuÂ–
;

31 
	g¡©usText
[32];

33 
	s_teTexCoÜds


35 
ıVeù
 
	m‹xCoÜd
;

38 
_teTexCoÜds
 *
	gteTexCoÜds
 = 
NULL
;

44 
	$gam_d¿wSrf›ld
()

47 
	`®_d¿w_´im
(
¡¬s
, 
NULL
, NULL, 0, 
numSrs
, 
ALLEGRO_PRIM_POINT_LIST
);

48 
	}
}

54 
boŞ
 
	$gam_£tupFBO
(
æags
)

57 
	`®_£t_Ãw_b™m­_æags
(
æags
);

59 
b™m­FBO
 = 
	`®_ü—‹_b™m­
(
wšWidth
, 
wšHeight
);

60 ià(
NULL
 =ğ
b™m­FBO
)

62 
u£BackšgB™m­
 = 
çl£
;

64  
Œue
;

65 
	}
}

71 
	$gam_ä“TeTexMemÜy
()

74 ià(
NULL
 !ğ
teTexCoÜds
)

75 
	`®_ä“
(
teTexCoÜds
);

76 
	}
}

82 
	$gam_£tHUDS‹
(
ÃwS‹
)

85 
hudStusS‹
 = 
ÃwS‹
;

86 
	}
}

92 
	$gam_d¿wHud
()

95 
	`gam_d¿wImage
(
hud
, 0.5f, 0.5f, 
æagC’‹rX
);

97 
	`sys_£tFÚt
(
FONT_LARGE
);

98 
	`sys_£tFÚtCŞÜ
(1.0f, 0.0f, 0.0f, 1.0f);

100 
hudStusS‹
) {

102 
HUD_STATE_CHARGING
:

103 
	`¡rıy
(
¡©usText
, "Charging");

106 
HUD_STATE_HEALING
:

107 
	`¡rıy
(
¡©usText
, "Healing");

110 
HUD_STATE_TRANSFER
:

111 
	`¡rıy
(
¡©usText
, "Transfer");

114 
HUD_STATE_TERMINAL
:

115 
	`¡rıy
(
¡©usText
, "Terminal");

118 
HUD_STATE_MOVE
:

119 
	`¡rıy
(
¡©usText
, "Move");

122 
HUD_STATE_PAUSED
:

123 
	`¡rıy
(
¡©usText
, "Paused");

126 
HUD_STATE_LIFT
:

127 
	`¡rıy
(
¡©usText
, "Lift");

130 
HUD_STATE_SHIP_VIEW
:

131 
	`¡rıy
(
¡©usText
, "Ship View");

134 
HUD_STATE_DATABASE
:

135 
	`¡rıy
(
¡©usText
, "Database");

138 
HUD_STATE_DECK_VIEW
:

139 
	`¡rıy
(
¡©usText
, "Deck View");

142 
HUD_STATE_CAPTURED
:

143 
	`¡rıy
(
¡©usText
, "Captured");

146 
HUD_STATE_SELECT_TIME
:

147 
	`¥rštf
(
¡©usText
, "S–eù - %i", 
£ËùSideCouÁ”
);

150 
HUD_STATE_TIME_LEFT
:

151 
	`¥rštf
(
¡©usText
, "TimËá - %i", 
£ËùSideCouÁ”
);

155 
	`sys_´štSŒšgExt
(
¡¬tStusX
, 
¡©usTextY
, "%s", 
¡©usText
);

157 
	`sys_´štSŒšgExt
(
¡¬tScÜeX
, 
¡©usTextY
, "%s", 
di¥ÏyScÜeSŒšg
);

158 
	}
}

164 
ıVeù
 
	$gam_g‘TeTexCoÜds
(
whichTe
)

167  
teTexCoÜds
[
whichTe
].
‹xCoÜd
;

168 
	}
}

174 
	$gam_ÿlcTeTexCoÜds
()

177 
tÙ®NumTes
;

180 
numTeAüossInTextu»
 = 
	`®_g‘_b™m­_width
(
image
[
tes
].imageè/ 
TILE_SIZE
;

181 
numTesDownInTextu»
 = 
	`®_g‘_b™m­_height
(
image
[
tes
].imageè/ 
TILE_SIZE
;

183 
tÙ®NumTes
 = 
numTeAüossInTextu»
 * 
numTesDownInTextu»
;

186 
teTexCoÜds
 = (
_teTexCoÜds
 *è
	`®_m®loc
( (_teTexCoÜdsè* 
tÙ®NumTes
);

187 ià(
NULL
 =ğ
teTexCoÜds
)

188 
	`sys_”rÜF©®
(
__FILE__
, 
__LINE__
, "ERROR: Could‚ot get memoryo holdexture coordinates.");

190 
i
 = 0; i !ğ
tÙ®NumTes
; i++)

192 
teTexCoÜds
[
i
].
‹xCoÜd
.
x
 = (è(˜% 
numTeAüossInTextu»
è* 
TILE_SIZE
;

193 
teTexCoÜds
[
i
].
‹xCoÜd
.
y
 = (è(˜/ 
numTesDownInTextu»
è* 
TILE_SIZE
;

194 
	`¡rıy
(
lßdšgStus
, "Texture coordinates");

195 
lßdšgB¬P”ûÁ
 +ğ1.0à/ 
tÙ®NumTes
;

196 
	`®_»¡
(
´og»ssB¬LßdTimes
);

198 
lßdšgB¬P”ûÁ
 = 0.0f;

199 
	}
}

205 
šlše
 
	$gam_d¿wSšgËTe
(
de¡X
, 
de¡Y
, 
whichTe
)

208 
´eviousTe
 = -1;

209 
ıVeù
 
‹xtu»CoÜds
;

211 #ifdeà
TILE_LOOKUP


212 ià(
´eviousTe
 !ğ
whichTe
)

214 
‹xtu»CoÜds
 = 
	`gam_g‘TeTexCoÜds
(
whichTe
);

215 
´eviousTe
 = 
whichTe
;

216 
´ofeTeC®cSk³d
++;

219 ià(
´eviousTe
 !ğ
whichTe
)

221 
‹xtu»CoÜds
.
x
 = (è(
whichTe
 % 
numTeAüossInTextu»
è* 
TILE_SIZE
;

222 
‹xtu»CoÜds
.
y
 = (è(
whichTe
 / 
numTesDownInTextu»
è* 
TILE_SIZE
;

224 
´eviousTe
 = 
whichTe
;

225 
´ofeTeC®cSk³d
++;

229 
	`®_d¿w_b™m­_»giÚ
(
image
[
tes
].image, 
‹xtu»CoÜds
.
x
,extu»CoÜds.
y
, 
TILE_SIZE
, TILE_SIZE, 
de¡X
 + 0.5f, 
de¡Y
 + 0.5f, 0);

230 
´ofeTÙ®TeD¿wn
++;

232 
	}
}

238 
	$gam_d¿wAÎTes
()

241 
aüoss
, 
down
;

242 
couÁX
, 
couÁY
;

243 
whichTePŒ
, 
whichTe
;

245 
aüoss
 = 
wšWidth
 / 
TILE_SIZE
;

246 
down
 = 
wšHeight
 / 
TILE_SIZE
;

248 
´ofeTeC®cSk³d
 = 0;

249 
´ofeTÙ®TeD¿wn
 = 0;

251 
´ofeTimeS¹
 = 
	`®_g‘_time
();

253 ià(
Œue
 =ğ
u£HŞdB™m­
)

254 
	`®_hŞd_b™m­_d¿wšg
(
Œue
);

256 
couÁY
 = 0; couÁY < 
down
 + 1; countY++)

258 
couÁX
 = 0; couÁX < 
aüoss
 + 1; countX++)

260 
whichTePŒ
 = (((
couÁY
 + 
tePosY
è* 
shLev–
[
cu¼’tLev–
].
Ëv–Dim’siÚs
.
x
è+ 
couÁX
 + 
tePosX
);

262 
whichTe
 = 
shLev–
[
cu¼’tLev–
].
tes
[
whichTePŒ
];

264 ià(
whichTe
 != 0)

266 
whichTe
) {

267 
ALERT_GREEN_TILE
:

268 
ALERT_YELLOW_TILE
:

269 
ALERT_RED_TILE
:

270 
cu¼’tAË¹Lev–
) {

271 
ALERT_GREEN_TILE
:

272 
whichTe
 = 
ALERT_GREEN_TILE
;

274 
ALERT_YELLOW_TILE
:

275 
whichTe
 = 
ALERT_YELLOW_TILE
;

277 
ALERT_RED_TILE
:

278 
whichTe
 = 
ALERT_RED_TILE
;

283 
	`gam_d¿wSšgËTe
((
couÁX
 * 
TILE_SIZE
è- 
pix–X
, (
couÁY
 * TILE_SIZEè- 
pix–Y
, 
whichTe
);

288 ià(
Œue
 =ğ
u£HŞdB™m­
)

289 
	`®_hŞd_b™m­_d¿wšg
(
çl£
);

291 
´ofeTimeEnd
 = 
	`®_g‘_time
();

292 
´ofeTimeTÙ®
 +ğ(
´ofeTimeEnd
 - 
´ofeTimeS¹
);

293 
´ofeTimeCouÁ
++;

294 
	}
}

301 
	$‹rm_d¿wIndiÿtÜ
(
sü“nTeSize
)

304 
ıVeù
 
¶ay”TePos
;

306 
¶ay”TePos
.
x
 = (
¶ay”WÜldMiddËPos
.x / (
TILE_SIZE
 / 2)) - 20;

307 
¶ay”TePos
.
y
 = (
¶ay”WÜldMiddËPos
.y / (
TILE_SIZE
 / 2)) - 15;

309 
¶ay”TePos
.
y
 += 7;

310 
¶ay”TePos
.
x
 =…Ïy”TePos.x * 
sü“nTeSize
;

311 
¶ay”TePos
.
y
 =…Ïy”TePos.y * 
sü“nTeSize
;

312 
¶ay”TePos
.
x
 -ğ5 * (
TILE_SIZE
 / 2);

314 
	`®_d¿w_fËd_cœşe
(
¶ay”TePos
.
x
,…Ïy”TePos.
y
, 8.0f, 
	`®_m­_rgba_f
(1.0f, 1.0f, 1.0f, 1.0f));

315 
	}
}

321 
	$‹rm_showCu¼’tLev–
()

324 
couÁX
, 
couÁY
, 
whichTe
;

325 
ıVeù
 
teD¿wOff£t
;

326 
ıVeù
 
wÜldPosD¿w
;

327 
ıVeù
 
d¿wSü“nOff£t
;

328 
ıVeù
 
¤cTextu»
;

329 
ıVeù
 
‹xtu»Size
;

331 
‹xtu»Size
.
x
 = 
	`®_g‘_b™m­_width
(
image
[
tesSm®l
].imageè/ (
TILE_SIZE
 / 2);

332 
‹xtu»Size
.
y
 = 
	`®_g‘_b™m­_height
(
image
[
tesSm®l
].imageè/ (
TILE_SIZE
 / 2);

334 
d¿wSü“nOff£t
.
x
 = (
wšWidth
 - (
shLev–
[
cu¼’tLev–
].
Ëv–Dim’siÚs
.x * (
TILE_SIZE
 / 2))) / 2;

335 
d¿wSü“nOff£t
.
y
 = (
wšHeight
 - (
shLev–
[
cu¼’tLev–
].
Ëv–Dim’siÚs
.y * (
TILE_SIZE
 / 2))) / 2;

337 
couÁY
 = 0; couÁY !ğ
shLev–
[
cu¼’tLev–
].
Ëv–Dim’siÚs
.
y
; countY++)

339 
couÁX
 = 0; couÁX !ğ
shLev–
[
cu¼’tLev–
].
Ëv–Dim’siÚs
.
x
; countX++)

341 
whichTe
 = 
shLev–
[
cu¼’tLev–
].
tes
[(
couÁY
 * shLev–[cu¼’tLev–].
Ëv–Dim’siÚs
.
x
è+ 
couÁX
];

342 ià(0 !ğ
whichTe
)

344 
wÜldPosD¿w
.
x
 = (
couÁX
 * (
TILE_SIZE
 / 2è+ 
d¿wSü“nOff£t
.x);

345 
wÜldPosD¿w
.
y
 = (
couÁY
 * (
TILE_SIZE
 / 2è+ 
d¿wSü“nOff£t
.y);

347 
¤cTextu»
.
x
 = (
whichTe
 % (è
‹xtu»Size
.xè* (
TILE_SIZE
 / 2);

348 
¤cTextu»
.
y
 = (
whichTe
 / (è
‹xtu»Size
.yè* (
TILE_SIZE
 / 2);

350 
	`®_d¿w_b™m­_»giÚ
(
image
[
tesSm®l
].image, 
¤cTextu»
.
x
, srcTextu».
y
, (
TILE_SIZE
 / 2), (TILE_SIZE / 2), 
wÜldPosD¿w
.x, worldPosDraw.y, 0);

355 
	`sys_´štSŒšgExt
(33.0f, 
wšHeight
 - 65, "Deck V›w - %s", 
shLev–
[
cu¼’tLev–
].
Ëv–Name
);

358 
	}
}

364 
	$gam_d¿wImage
(
imageIndex
, 
posX
, 
posY
, 
æags
)

367 
ALLEGRO_COLOR
 
keyCŞÜ
;

368 
d¿wPosX
;

369 
d¿wPosY
;

372 ià((
imageIndex
 < 0è|| (imageIndex > 
numImages
))

375 ià((
æags
 & 
æagC’‹rX
) == flagCenterX)

377 
d¿wPosX
 = (
wšWidth
 - 
	`®_g‘_b™m­_width
(
image
[
imageIndex
].image)) / 2;

378 
posX
 = 
d¿wPosX
;

381 ià((
æags
 & 
æagC’‹rY
) == flagCenterY)

383 
d¿wPosY
 = (
wšHeight
 - 
	`®_g‘_b™m­_height
(
image
[
imageIndex
].image)) / 2;

384 
posY
 = 
d¿wPosY
;

388 ià((
æags
 & 
æagFuÎSü“n
) == flagFullScreen)

390 
	`®_d¿w_sÿËd_b™m­
(
image
[
imageIndex
].image, 0.0f, 0.0f,

391 
	`®_g‘_b™m­_width
(
image
[
imageIndex
].image),

392 
	`®_g‘_b™m­_height
(
image
[
imageIndex
].image),

393 0.0f, 0.0f, 
wšWidth
, 
wšHeight
, 0);

397 ià(
hud
 =ğ
imageIndex
)

398 
	`®_d¿w_fËd_»ùªgË
(0.0f, 0.0f, 
wšWidth
, 
TILE_SIZE
 * 2, 
	`®_m­_rgb_f
(0.0f, 0.0f, 0.0f));

400 
	`®_d¿w_tš‹d_b™m­
(
image
[
imageIndex
].image, 
	`®_m­_rgba_f
(1.0f, 1.0f, 1.0f, 1.0f), 
posX
, 
posY
, 0);

401 
	}
}

409 
	$gam_´oûssFadeV®ue
()

412 
couÁD–ay
 = 0.0f;

414 ià(
çl£
 =ğ
´oûssFadeV®ue
)

417 
cu¼’tFadeAùiÚ
) {

418 
FADE_ON
:

419 
couÁD–ay
 +ğ
TICKS_PER_SECOND
;

420 ià(
couÁD–ay
 > 1.0f)

422 
couÁD–ay
 = 0.0f;

423 
çdeV®ue
 -= 0.1f;

424 ià(
çdeV®ue
 < 0.0f)

426 
´oûssFadeV®ue
 = 
çl£
;

427 
çdeV®ue
 = 1.0f;

432 
FADE_OFF
:

433 
couÁD–ay
 +ğ
TICKS_PER_SECOND
;

434 ià(
couÁD–ay
 > 1.0f)

436 
couÁD–ay
 = 0.0f;

437 
çdeV®ue
 += 0.1f;

438 ià(
çdeV®ue
 > 1.0f)

440 
cu¼’tFadeAùiÚ
 = 
FADE_ON
;

441 
çdeV®ue
 = 1.0f;

442 
cu¼’tMode
 = 
modeAá”FadeOff
;

447 
	}
}

455 
	$gam_d¿wB™m­FromSüt
(
šdex
, 
posX
, 
posY
, 
»d
, 
g»’
, 
blue
, 
®pha
)

458 
ALLEGRO_COLOR
 
¥r™eCŞÜ
;

460 ià((
šdex
 < 0è|| (šdex > 
numImages
))

462 
	`io_logToFe
("E¼Ü: Inv®id index…as£dØ[ % ]", 
__func__
);

466 
¥r™eCŞÜ
 = 
	`®_m­_rgba_f
(
»d
, 
g»’
, 
blue
, 
®pha
);

468 
	`®_d¿w_tš‹d_b™m­
(
image
[
šdex
].image, 
¥r™eCŞÜ
, 
posX
, 
posY
, 0);

469 
	}
}

477 
	$gam_d¿wS´™e
(
cu¼’tF¿me
, 
imageIndex
, 
ıVeù
 
pos™iÚ
, 
ªgË
, 
ALLEGRO_COLOR
 
cŞÜ
)

480 
sourûX
;

481 
äameWidth
, 
äameHeight
;

483 
imageIndex
) {

484 
buÎ‘Ty³1
:

485 
buÎ‘Ty³2
:

486 
buÎ‘Ty³3
:

487 
äameWidth
 = 
	`®_g‘_b™m­_width
(
image
[
imageIndex
].imageè/ 
NUM_FRAMES_IN_BULLET
;

490 
dbImage
:

491 
äameWidth
 = 
	`®_g‘_b™m­_width
(
image
[
imageIndex
].imageè/ 
NUM_DB_FRAMES
;

495 
äameWidth
 = 
SPRITE_SIZE
;

499 
äameHeight
 = 
	`®_g‘_b™m­_height
(
image
[
imageIndex
].image);

501 
sourûX
 = 
cu¼’tF¿me
 * 
äameWidth
;

503 ià((
pos™iÚ
.
x
 =ğ-1è|| (pos™iÚ.
y
 == -1))

507 ià(
ªgË
 == -1.0f)

509 
	`®_d¿w_tš‹d_b™m­_»giÚ
(
image
[
imageIndex
].image, 
cŞÜ
, 
sourûX
, 0.0f, 
äameWidth
, 
äameHeight
, 
pos™iÚ
.
x
,…os™iÚ.
y
, 0);

511 
	`®_d¿w_tš‹d_sÿËd_rÙ©ed_b™m­_»giÚ
(
image
[
imageIndex
].image,

512 
sourûX
, 0.0f, 
äameWidth
, 
äameHeight
,

513 
cŞÜ
,

514 
äameWidth
 / 2, f¿meWidth / 2, 
pos™iÚ
.
x
,…os™iÚ.
y
, 1.0f, 1.0f, 
ªgË
, 0);

515 
	}
}

521 
	$gam_d¿wS´™eFromSüt
(
šdex
, 
posX
, 
posY
, 
»d
, 
g»’
, 
blue
, 
®pha
)

524 
ıVeù
 
d¿wPos™iÚ
;

526 ià((
šdex
 < 0è|| (šdex > 
numImages
))

528 
	`io_logToFe
("E¼Ü: Inv®id index…as£dØ[ % ]", 
__func__
);

532 
d¿wPos™iÚ
.
x
 = 
posX
;

533 
d¿wPos™iÚ
.
y
 = 
posY
;

535 
	`gam_d¿wS´™e
(0, 
šdex
, 
d¿wPos™iÚ
, 0, 
	`®_m­_rgba_f
(
»d
, 
g»’
, 
blue
, 
®pha
));

536 
	}
}

544 
	$d¿w3dReùªgË
(
x1
, 
y1
, 
x2
, 
y2
, 
ALLEGRO_COLOR
 
cŞÜ
)

547 
_myReùªgË
 
sšgËReù
;

549 
sšgËReù
.
x1
 = x1;

550 
sšgËReù
.
y1
 = y1;

551 
sšgËReù
.
x2
 = x2;

552 
sšgËReù
.
y2
 = y2;

554 
	`®_d¿w_fËd_rounded_»ùªgË
(
sšgËReù
.
x1
, sšgËReù.
y1
, sšgËReù.
x2
, sšgËReù.
y2
, 5.0f, 5.0f, 
cŞÜ
);

556 
	`®_d¿w_rounded_»ùªgË
(
sšgËReù
.
x1
, sšgËReù.
y1
, sšgËReù.
x2
, sšgËReù.
y2
, 5.0f, 5.0f, 
	`®_m­_rgb
(255, 255, 255), 2.0f);

557 
	}
}

563 
	$gam_d¿wSideV›w
()

566 
couÁ
;

567 
liás
 = 8;

568 
toLiás
 = 0;

569 
x1
;

570 
y1
;

571 
ALLEGRO_COLOR
 
‹mpAË¹
;

573 
couÁ
 = 0;

574 
x1
 = 
sidev›wLev–s
[
couÁ
].
x2
;

575 
y1
 = 
sidev›wLev–s
[
couÁ
].
y2
;

576 
	`d¿w3dReùªgË
(
x1
, 
y1
, 
sidev›wLev–s
[
couÁ
].x1, sidev›wLev–s[couÁ].y1, 
SHIP_COLOR
);

577 
toLiás
++;

579 
couÁ
 = 1; couÁ !ğ
MAX_LEVELS
 - 
liás
; count++)

581 
x1
 = 
sidev›wLev–s
[
couÁ
].x1;

582 
y1
 = 
sidev›wLev–s
[
couÁ
].y1;

583 
	`d¿w3dReùªgË
(
x1
, 
y1
, 
sidev›wLev–s
[
couÁ
].
x2
, sidev›wLev–s[couÁ].
y2
, 
SHIP_COLOR
);

584 
toLiás
++;

587 ià(
cu¼’tMode
 =ğ
MODE_LIFT_VIEW
)

591 ià(0 =ğ
cu¼’tLev–
)

592 
	`d¿w3dReùªgË
(
sidev›wLev–s
[
cu¼’tLev–
].
x2
, sidev›wLev–s[cu¼’tLev–].
y2
, sidev›wLev–s[cu¼’tLev–].
x1
, sidev›wLev–s[cu¼’tLev–].
y1
, 
ACTIVE_DECK_COLOR
);

594 
	`d¿w3dReùªgË
(
sidev›wLev–s
[
cu¼’tLev–
].
x1
, sidev›wLev–s[cu¼’tLev–].
y1
, sidev›wLev–s[cu¼’tLev–].
x2
, sidev›wLev–s[cu¼’tLev–].
y2
, 
ACTIVE_DECK_COLOR
);

598 
cu¼’tAË¹Lev–
) {

599 
ALERT_GREEN_TILE
:

600 
‹mpAË¹
 = 
	`®_m­_rgb
(0x00, 0xff, 0x00);

602 
ALERT_YELLOW_TILE
:

603 
‹mpAË¹
 = 
	`®_m­_rgb
(0xff, 0xff, 0x00);

605 
ALERT_RED_TILE
:

606 
‹mpAË¹
 = 
	`®_m­_rgb
(0xff, 0x00, 0x00);

610 ià(0 =ğ
cu¼’tLev–
)

611 
	`d¿w3dReùªgË
(
sidev›wLev–s
[
cu¼’tLev–
].
x2
, sidev›wLev–s[cu¼’tLev–].
y2
, sidev›wLev–s[cu¼’tLev–].
x1
, sidev›wLev–s[cu¼’tLev–].
y1
, 
‹mpAË¹
);

613 
	`d¿w3dReùªgË
(
sidev›wLev–s
[
cu¼’tLev–
].
x1
, sidev›wLev–s[cu¼’tLev–].
y1
, sidev›wLev–s[cu¼’tLev–].
x2
, sidev›wLev–s[cu¼’tLev–].
y2
, 
‹mpAË¹
);

617 ià((
cu¼’tTuÂ–
 != 3) && (currentTunnel != 6))

619 
couÁ
 = 13;

620 
	`d¿w3dReùªgË
(
sidev›wLev–s
[
couÁ
].
x1
, sidev›wLev–s[couÁ].
y1
, sidev›wLev–s[couÁ].
x2
, sidev›wLev–s[couÁ].
y2
, 
SHIP_COLOR
);

625 ià(
cu¼’tLev–
 != 13)

627 
couÁ
 = 13;

628 
	`d¿w3dReùªgË
(
sidev›wLev–s
[
couÁ
].
x1
, sidev›wLev–s[couÁ].
y1
, sidev›wLev–s[couÁ].
x2
, sidev›wLev–s[couÁ].
y2
, 
SHIP_COLOR
);

633 
	`d¿w3dReùªgË
(
sidev›wLev–s
[7].
x1
, sidev›wLev–s[7].
y1
, sidev›wLev–s[7].
x2
, sidev›wLev–s[7].
y2
, 
ENGINE_COLOR
);

637 
couÁ
 = 0; couÁ !ğ
liás
; count++)

639 
	`d¿w3dReùªgË
(
sidev›wLev–s
[
couÁ
 + 
toLiás
].
x1
, sidev›wLev–s[couÁ +oLiás].
y1
, sidev›wLev–s[couÁ +oLiás].
x2
, sidev›wLev–s[couÁ +oLiás].
y2
, 
LIFT_COLOR
);

643 
	`d¿w3dReùªgË
(
sidev›wLev–s
[21 + 
cu¼’tTuÂ–
].
x1
, sidev›wLev–s[21 + cu¼’tTuÂ–].
y1
, sidev›wLev–s[21 + cu¼’tTuÂ–].
x2
, sidev›wLev–s[21 + cu¼’tTuÂ–].
y2
, 
ACTIVE_LIFT_COLOR
);

645 ià(
cu¼’tMode
 =ğ
MODE_LIFT_VIEW
)

647 
	`sys_£tFÚt
(
FONT_LARGE
);

648 
	`sys_£tFÚtCŞÜ
(0.8f, 0.8f, 0.8f, 1.0f);

649 
	`d¿w3dReùªgË
(10, 
wšHeight
 - 85, 30, wšHeighˆ- 65, 
ACTIVE_LIFT_COLOR
);

650 
	`sys_´štSŒšg
(33.0f, 
wšHeight
 - 95, "Active†ift");

652 
	`d¿w3dReùªgË
(10, 
wšHeight
 - 55, 30, wšHeighˆ- 35, 
ACTIVE_DECK_COLOR
);

653 
	`sys_´štSŒšg
(33.0f, 
wšHeight
 - 65, "Current deck");

655 
	`d¿w3dReùªgË
(10, 
wšHeight
 - 25, 30, wšHeighˆ- 5, 
LIFT_COLOR
);

656 
	`sys_´štSŒšg
(33.0f, 
wšHeight
 - 35, "Inactive†ift");

660 
	`sys_£tFÚt
(
FONT_LARGE
);

661 
	`sys_£tFÚtCŞÜ
(0.8f, 0.8f, 0.8f, 1.0f);

663 
	`d¿w3dReùªgË
(10, 
wšHeight
 - 55, 30, wšHeighˆ- 35, 
‹mpAË¹
);

664 
	`sys_´štSŒšgExt
(33.0f, 
wšHeight
 - 65, "You‡» h”- %s", 
shLev–
[
cu¼’tLev–
].
Ëv–Name
);

666 
	}
}

	@../src/game/gam_sideView.cpp

1 
	~"../../hdr/sys_glob®s.h
"

3 
_basicTuÂ–
 
	gtuÂ–
[
NUM_OF_TUNNELS
];

5 
_sidev›wBasicLev–
 
	gsidev›wLev–s
[
MAX_LEVELS
];

10 
	$gam_£tupTuÂ–s
()

13 
tuÂ–
[0].
tİ
 = 19;

14 
tuÂ–
[0].
bÙtom
 = 3;

15 
tuÂ–
[0].
decks
[0] = 3;

16 
tuÂ–
[0].
decks
[1] = 4;

17 
tuÂ–
[0].
decks
[2] = 15;

18 
tuÂ–
[0].
decks
[3] = 16;

19 
tuÂ–
[0].
decks
[4] = 19;

20 
tuÂ–
[0].
cu¼’t_deck
 = 0;

21 
tuÂ–
[0].
cu¼’t
 =uÂ–[0].
decks
[tuÂ–[0].
cu¼’t_deck
];

23 
tuÂ–
[1].
tİ
 = 6;

24 
tuÂ–
[1].
bÙtom
 = 0;

25 
tuÂ–
[1].
decks
[0] = 0;

26 
tuÂ–
[1].
decks
[1] = 5;

27 
tuÂ–
[1].
decks
[2] = 6;

28 
tuÂ–
[1].
cu¼’t_deck
 = 0;

29 
tuÂ–
[1].
cu¼’t
 =uÂ–[1].
decks
[tuÂ–[1].
cu¼’t_deck
];

31 
tuÂ–
[2].
tİ
 = 17;

32 
tuÂ–
[2].
bÙtom
 = 15;

33 
tuÂ–
[2].
decks
[0] = 15;

34 
tuÂ–
[2].
decks
[1] = 17;

35 
tuÂ–
[2].
cu¼’t_deck
 = 0;

36 
tuÂ–
[2].
cu¼’t
 =uÂ–[2].
decks
[tuÂ–[2].
cu¼’t_deck
];

38 
tuÂ–
[3].
tİ
 = 20;

39 
tuÂ–
[3].
bÙtom
 = 12;

40 
tuÂ–
[3].
decks
[0] = 12;

41 
tuÂ–
[3].
decks
[1] = 13;

42 
tuÂ–
[3].
decks
[2] = 14;

43 
tuÂ–
[3].
decks
[3] = 17;

44 
tuÂ–
[3].
decks
[4] = 20;

45 
tuÂ–
[3].
cu¼’t_deck
 = 0;

46 
tuÂ–
[3].
cu¼’t
 =uÂ–[3].
decks
[tuÂ–[3].
cu¼’t_deck
];

48 
tuÂ–
[4].
tİ
 = 12;

49 
tuÂ–
[4].
bÙtom
 = 1;

50 
tuÂ–
[4].
decks
[0] = 1;

51 
tuÂ–
[4].
decks
[1] = 5;

52 
tuÂ–
[4].
decks
[2] = 6;

53 
tuÂ–
[4].
decks
[3] = 12;

54 
tuÂ–
[4].
cu¼’t_deck
 = 0;

55 
tuÂ–
[4].
cu¼’t
 =uÂ–[4].
decks
[tuÂ–[4].
cu¼’t_deck
];

57 
tuÂ–
[5].
tİ
 = 9;

58 
tuÂ–
[5].
bÙtom
 = 2;

59 
tuÂ–
[5].
decks
[0] = 2;

60 
tuÂ–
[5].
decks
[1] = 8;

61 
tuÂ–
[5].
decks
[2] = 9;

62 
tuÂ–
[5].
cu¼’t_deck
 = 0;

63 
tuÂ–
[5].
cu¼’t
 =uÂ–[5].
decks
[tuÂ–[5].
cu¼’t_deck
];

65 
tuÂ–
[6].
tİ
 = 14;

66 
tuÂ–
[6].
bÙtom
 = 9;

67 
tuÂ–
[6].
decks
[0] = 9;

68 
tuÂ–
[6].
decks
[1] = 10;

69 
tuÂ–
[6].
decks
[2] = 11;

70 
tuÂ–
[6].
decks
[3] = 12;

71 
tuÂ–
[6].
decks
[4] = 13;

72 
tuÂ–
[6].
decks
[5] = 14;

73 
tuÂ–
[6].
cu¼’t_deck
 = 0;

74 
tuÂ–
[6].
cu¼’t
 =uÂ–[6].
decks
[tuÂ–[6].
cu¼’t_deck
];

76 
tuÂ–
[7].
tİ
 = 18;

77 
tuÂ–
[7].
bÙtom
 = 14;

78 
tuÂ–
[7].
decks
[0] = 14;

79 
tuÂ–
[7].
decks
[1] = 18;

80 
tuÂ–
[7].
cu¼’t_deck
 = 0;

81 
tuÂ–
[7].
cu¼’t
 =uÂ–[7].
decks
[tuÂ–[7].
cu¼’t_deck
];

82 
	}
}

	@../src/game/gam_spotLight.cpp

1 
	~"../../hdr/sys_glob®s.h
"

3 
	gveùÜ
<
	g_¥ÙLight
> 
	g¥ÙLight
;

4 
	#DEGTORAD
 (
ALLEGRO_PI
/180.0)

	)

10 
	$gam_d¿wSpÙLights
()

13 
ıVeù
 
d¿wPos™iÚ
;

14 
ıVeù
 
¤cPos™iÚ
;

16 
ALLEGRO_COLOR
 
¥ÙLightTšt
;

17 
İ
, 
¤c
, 
d¡
;

19 ià(
¥ÙLight
.
	`size
() == 0)

22 
cu¼’tAË¹Lev–
)

24 
ALERT_GREEN_TILE
:

25 
¥ÙLightTšt
 = 
	`®_m­_rgba
(1,129,1,128);

27 
ALERT_YELLOW_TILE
:

28 
¥ÙLightTšt
 = 
	`®_m­_rgba
(255,255,0,128);

30 
ALERT_RED_TILE
:

31 
¥ÙLightTšt
 = 
	`®_m­_rgba
(255,0,0,128);

35 
	`®_g‘_bËnd”
(&
İ
, &
¤c
, &
d¡
);

36 
	`®_£t_bËnd”
(
ALLEGRO_ADD
, 
ALLEGRO_ALPHA
, 
ALLEGRO_INVERSE_ALPHA
);

38 
i
 = 0; i !ğ
¥ÙLight
.
	`size
(); i++)

40 ià(
Œue
 =ğ
	`sys_visibËOnSü“n
(
¥ÙLight
[
i
].
wÜldPos™iÚ
, spÙLight[i].
b™m­Width
))

42 
d¿wPos™iÚ
 = 
	`sys_wÜldToSü“n
(
¥ÙLight
[
i
].
wÜldPos™iÚ
, spÙLight[i].
b™m­Width
);

44 
	`®_d¿w_tš‹d_rÙ©ed_b™m­
(
image
[
¥ÙLightImg
].image, 
¥ÙLightTšt
, 
¥ÙLight
[
i
].
¤cPos™iÚ
.
x
, spÙLight[i].¤cPos™iÚ.
y
, 
d¿wPos™iÚ
.x, d¿wPos™iÚ.y - 10, spÙLight[i].
rÙ©eAngË
 * 
DEGTORAD
, 0);

48 
	`®_£t_bËnd”
(
İ
, 
¤c
, 
d¡
);

49 
	}
}

54 
	$gam_ªim©eSpÙLights
()

57 ià(
¥ÙLight
.
	`size
() == 0)

60 
¥ÙLightS³ed
;

62 
cu¼’tAË¹Lev–
)

64 
ALERT_GREEN_TILE
:

65 
¥ÙLightS³ed
 = 10.0f;

67 
ALERT_YELLOW_TILE
:

68 
¥ÙLightS³ed
 = 30.0f;

70 
ALERT_RED_TILE
:

71 
¥ÙLightS³ed
 = 60.0f;

75 
i
 = 0; i !ğ
¥ÙLight
.
	`size
(); i++)

77 
¥ÙLight
[
i
].
rÙ©eS³edCouÁ
 +ğ
¥ÙLightS³ed
 * 
thškIÁ”v®
;

78 ià(
¥ÙLight
[
i
].
rÙ©eS³edCouÁ
 > 1.0f)

80 
¥ÙLight
[
i
].
rÙ©eAngË
++;

81 ià(
¥ÙLight
[
i
].
rÙ©eAngË
 > 359)

82 
¥ÙLight
[
i
].
rÙ©eAngË
 = 0;

83 
¥ÙLight
[
i
].
rÙ©eS³edCouÁ
 = 0;

86 
	}
}

91 
	$gam_fšdAÎAË¹Tes
(
boŞ
 
ş—rVeùÜ
)

94 
_¥ÙLight
 
‹mpSpÙLight
;

95 
couÁX
, 
couÁY
, 
cu¼’tTe
;

97 ià(
Œue
 =ğ
ş—rVeùÜ
)

99 
¥ÙLight
.
	`ş—r
();

102 
couÁX
 = 0; 
couÁY
 = 0;

104 
i
 = 0; i !ğ
shLev–
[
cu¼’tLev–
].
Ëv–Dim’siÚs
.
x
 * shLev–[cu¼’tLev–].Ëv–Dim’siÚs.
y
; i++)

106 
cu¼’tTe
 = 
shLev–
[
cu¼’tLev–
].
tes
[
i
];

108 ià(
cu¼’tTe
 < 0)

109 
cu¼’tTe
 = 0;

111 
cu¼’tTe
)

113 
ALERT_GREEN_TILE
:

114 
ALERT_YELLOW_TILE
:

115 
ALERT_RED_TILE
:

116 
‹mpSpÙLight
.
wÜldPos™iÚ
.
x
 = (
couÁX
 * 
TILE_SIZE
) + (TILE_SIZE / 2);

117 
‹mpSpÙLight
.
wÜldPos™iÚ
.
y
 = (
couÁY
 * 
TILE_SIZE
) + (TILE_SIZE / 2);

118 
‹mpSpÙLight
.
rÙ©eAngË
 = 
	`¿nd
() % 359;

119 
‹mpSpÙLight
.
rÙ©eS³edCouÁ
 = 0.0f;

120 
‹mpSpÙLight
.
b™m­Width
 = 
	`®_g‘_b™m­_width
(
image
[
¥ÙLightImg
].image);

121 
‹mpSpÙLight
.
b™m­Height
 = 
	`®_g‘_b™m­_height
(
image
[
¥ÙLightImg
].image);

122 
‹mpSpÙLight
.
¤cPos™iÚ
.
x
 =empSpÙLight.
b™m­Width
 - 5;

123 
‹mpSpÙLight
.
¤cPos™iÚ
.
y
 =empSpÙLight.
b™m­Height
 / 2;

125 
¥ÙLight
.
	`push_back
(
‹mpSpÙLight
);

129 
couÁX
++;

131 ià(
couÁX
 =ğ
shLev–
[
cu¼’tLev–
].
Ëv–Dim’siÚs
.
x
)

133 
couÁX
 = 0;

134 
couÁY
++;

137 
	}
}

	@../src/game/gam_terminal.cpp

1 
	~"../../hdr/sys_glob®s.h
"

3 
	gcu¼’tT”mM’u
;

4 
	gcu¼’tT”mMode
;

6 
	g‹rm0PosX
;

7 
	g‹rm0PosY
;

9 
	g‹rm1PosX
;

10 
	g‹rm1PosY
;

12 
	g‹rm2PosX
;

13 
	g‹rm2PosY
;

15 
	g‹rm3PosX
;

16 
	g‹rm3PosY
;

18 
	g‹rm0Index
;

19 
	g‹rm1Index
;

20 
	g‹rm2Index
;

21 
	g‹rm3Index
;

23 
	gdroidTy³DBIndex
;

24 
	gdbTexWidth
;

25 
	gdbTexHeight
;

26 
	gdbCu¼’tF¿me
 = 0;

28 
	gdbImagePos™iÚX
;

29 
	gdbImagePos™iÚY
;

31 
	gdbS¹X
;

32 
	gdbS¹Y
;

33 
	gdbWidth
;

34 
	gdbHeight
;

35 
	gdbSüŞl¥“d
;

36 
	gdbBackRed
;

37 
	gdbBackG»’
;

38 
	gdbBackBlue
;

39 
	gdbBackAÍha
;

40 
	gdbFÚtRed
;

41 
	gdbFÚtG»’
;

42 
	gdbFÚtBlue
;

43 
	gdbFÚtAÍha
;

44 
	gdbSüŞlD–ay
;

47 
_süŞlBox
 
	gd©aba£SüŞlBox
;

48 
	gd©aba£SüŞlText
[
MAX_STRING_SIZE
 * 2];

49 
	g‹xtCouÁ”
 = 0;

58 
boŞ
 
	$gam_lßdDroidMod–
(
whichDroid
)

61 
‹mpFeName
[
MAX_STRING_SIZE
];

63 
	`¡rıy
(
‹mpFeName
, "");

64 
	`¡rıy
(
‹mpFeName
, 
d©aBa£EÁry
[
whichDroid
].
dbImageFeName
);

65 
	`¡rÿt
(
‹mpFeName
, ".jpg");

67 
	`cÚ_´št
(
Œue
, 
çl£
, "Lßd droid mod– - imagÇm: %s", 
‹mpFeName
);

69  
	`io_lßdImage
(
dbImage
, 
‹mpFeName
);

70 
	}
}

75 
	$gam_d¿wDB_Droid
()

78 
boŞ
 
imageLßded
 = 
çl£
;

79 
ıVeù
 
dbImagePos™iÚ
;

81 
dbImagePos™iÚ
.
x
 = 
dbImagePos™iÚX
;

82 
dbImagePos™iÚ
.
y
 = 
dbImagePos™iÚY
;

83 
dbTexWidth
 = 
	`®_g‘_b™m­_width
(
image
[
dbImage
].imageè/ 
NUM_DB_FRAMES
;

84 
dbTexHeight
 = 
	`®_g‘_b™m­_height
(
image
[
dbImage
].image);

88 
	`gam_d¿wS´™e
(
dbCu¼’tF¿me
, 
dbImage
, 
dbImagePos™iÚ
, -1.0f, 
	`®_m­_rgba_f
(1.0f, 1.0f, 1.0f, 1.0f));

89 
	}
}

94 
	$gam_g‘NextDroid
()

102 ià(
droidTy³DBIndex
 < 23)

104 
	`sys_¶aySound
(
SND_KEYPRESS_GOOD
, 
SND_PAN_CENTER
, 
ALLEGRO_PLAYMODE_ONCE
);

105 
droidTy³DBIndex
++;

106 
	`gam_lßdDroidMod–
(
droidTy³DBIndex
);

107 
	`gam_£tupDBText
();

110 
	`sys_¶aySound
(
SND_KEYPRESS_BAD
, 
SND_PAN_CENTER
, 
ALLEGRO_PLAYMODE_ONCE
);

111 
	}
}

116 
	$gam_g‘P»viousDroid
()

119 ià(
droidTy³DBIndex
 > 0)

121 
	`sys_¶aySound
(
SND_KEYPRESS_GOOD
, 
SND_PAN_CENTER
, 
ALLEGRO_PLAYMODE_ONCE
);

122 
droidTy³DBIndex
--;

123 
	`gam_lßdDroidMod–
(
droidTy³DBIndex
);

124 
	`gam_£tupDBText
();

127 
	`sys_¶aySound
(
SND_KEYPRESS_BAD
, 
SND_PAN_CENTER
, 
ALLEGRO_PLAYMODE_ONCE
);

128 
	}
}

133 
	$gam_ªim©eDB_Droid
()

136 
d–ayCouÁ
 = 0.0f;

138 
d–ayCouÁ
 += 0.5f;

139 ià(
d–ayCouÁ
 > 1.0f)

141 
d–ayCouÁ
 = 0.0f;

142 
dbCu¼’tF¿me
++;

143 ià(
dbCu¼’tF¿me
 =ğ
NUM_DB_FRAMES
)

144 
dbCu¼’tF¿me
 = 0;

146 
	}
}

157 
	$gam_mÜeD©aba£Text
()

160 
‹xtCouÁ”
++;

161 ià(
‹xtCouÁ”
 > 11)

162 
‹xtCouÁ”
 = 0;

164 
	`¡rıy
(
d©aba£SüŞlText
, "");

165 
‹xtCouÁ”
)

168 
	`¡rıy
(
d©aba£SüŞlText
, "Description: ");

169 
	`¡rÿt
(
d©aba£SüŞlText
, 
d©aBa£EÁry
[
droidTy³DBIndex
].
desütiÚ
);

172 
	`¡rıy
(
d©aba£SüŞlText
, "ClassName: ");

173 
	`¡rÿt
(
d©aba£SüŞlText
, 
d©aBa£EÁry
[
droidTy³DBIndex
].
şassName
);

176 
	`¡rıy
(
d©aba£SüŞlText
, "Height: ");

177 
	`¡rÿt
(
d©aba£SüŞlText
, 
d©aBa£EÁry
[
droidTy³DBIndex
].
height
);

180 
	`¡rıy
(
d©aba£SüŞlText
, "Weight: ");

181 
	`¡rÿt
(
d©aba£SüŞlText
, 
d©aBa£EÁry
[
droidTy³DBIndex
].
weight
);

184 
	`¡rıy
(
d©aba£SüŞlText
, "Drive: ");

185 
	`¡rÿt
(
d©aba£SüŞlText
, 
d©aBa£EÁry
[
droidTy³DBIndex
].
drive
);

188 
	`¡rıy
(
d©aba£SüŞlText
, "Brain: ");

189 
	`¡rÿt
(
d©aba£SüŞlText
, 
d©aBa£EÁry
[
droidTy³DBIndex
].
b¿š
);

192 
	`¡rıy
(
d©aba£SüŞlText
, "Weapon: ");

193 
	`¡rÿt
(
d©aba£SüŞlText
, 
d©aBa£EÁry
[
droidTy³DBIndex
].
w—pÚ
);

196 
	`¡rıy
(
d©aba£SüŞlText
, "Sensor 1: ");

197 
	`¡rÿt
(
d©aba£SüŞlText
, 
d©aBa£EÁry
[
droidTy³DBIndex
].
£nsÜ1
);

200 
	`¡rıy
(
d©aba£SüŞlText
, "Sensor 2: ");

201 
	`¡rÿt
(
d©aba£SüŞlText
, 
d©aBa£EÁry
[
droidTy³DBIndex
].
£nsÜ2
);

204 
	`¡rıy
(
d©aba£SüŞlText
, "Sensor 3: ");

205 
	`¡rÿt
(
d©aba£SüŞlText
, 
d©aBa£EÁry
[
droidTy³DBIndex
].
£nsÜ3
);

208 
	`¡rıy
(
d©aba£SüŞlText
, "Notes: ");

209 
	`¡rÿt
(
d©aba£SüŞlText
, 
d©aBa£EÁry
[
droidTy³DBIndex
].
nÙes
);

212 
	`¡rıy
(
d©aba£SüŞlText
, " ! ! ! ! ! ! ! ! - Information„epeats - ! ! ! ! ! # ");

213 
	`¡rÿt
(
d©aba£SüŞlText
, 
d©aBa£EÁry
[
droidTy³DBIndex
].
nÙes
);

217 
	`¡rÿt
(
d©aba£SüŞlText
, " # ");

218 
d©aba£SüŞlBox
.
sourûText
 = 
d©aba£SüŞlText
;

219 
d©aba£SüŞlBox
.
ch¬PŒ
 = -1;

220 
	}
}

225 
	$gam_£tupDBText
()

228 
boŞ
 
d©aba£SüŞlS‘up
 = 
çl£
;

229 ià(
çl£
 =ğ
d©aba£SüŞlS‘up
)

231 
d©aba£SüŞlS‘up
 = 
Œue
;

232 
	`¡rıy
(
d©aba£SüŞlText
, "");

233 
	`¡rıy
(
d©aba£SüŞlText
, "Description: ");

234 
	`¡rÿt
(
d©aba£SüŞlText
, 
d©aBa£EÁry
[
droidTy³DBIndex
].
desütiÚ
);

235 
	`¡rÿt
(
d©aba£SüŞlText
, " ! # ");

236 
	`gui_£tupSüŞlBox
(
SCROLLBOX_DB
, &
d©aba£SüŞlBox
, "d©aba£SüŞl", 
d©aba£SüŞlText
, (
Ex‹ºFunc
)
gam_mÜeD©aba£Text
);

238 
‹xtCouÁ”
 = 0;

239 
d©aba£SüŞlBox
.
lšesToPršt
 = 0;

240 
d©aba£SüŞlBox
.
süŞlY
 = d©aba£SüŞlBox.
height
;

241 
d©aba£SüŞlBox
.
ch¬PŒ
 = 0;

243 
i
 = 0; i !ğ
MAX_LINES_IN_SCREEN
; i++)

244 
	`¡rıy
(
d©aba£SüŞlBox
.
lše
[
i
].
‹xt
, "");

246 
	`¡rıy
(
d©aba£SüŞlText
, "");

247 
	`¡rıy
(
d©aba£SüŞlText
, "Description: ");

248 
	`¡rÿt
(
d©aba£SüŞlText
, 
d©aBa£EÁry
[
droidTy³DBIndex
].
desütiÚ
);

249 
	`¡rÿt
(
d©aba£SüŞlText
, " ! # ");

250 
d©aba£SüŞlBox
.
sourûText
 = 
d©aba£SüŞlText
;

251 
	}
}

256 
boŞ
 
	$gui_d¿wT”mš®Sü“n
()

261 
‹rm0Index
 = 
¥r™e_001
;

262 
‹rm1Index
 = 
‹rm1
;

263 
‹rm2Index
 = 
‹rm2
;

264 
‹rm3Index
 = 
‹rm3
;

266 
cu¼’tT”mMode
)

268 
TERM_MODE_MENU
:

269 
	`sys_execu‹SütFunùiÚ
("as_drawTerminalMenu", "");

272 
TERM_MODE_DB
:

277 
TERM_MODE_LEVEL
:

280 
TERM_MODE_SIDE
:

283  
Œue
;

284 
	}
}

	@../src/game/gam_transfer.cpp

1 
	~"../../hdr/sys_glob®s.h
"

2 
	~"../../hdr/game/gam_Œªsãr.h
"

3 
	~"../../hdr/game/gam_ŒªsãrR’d”.h
"

5 
	gdroidTy³ToT¿nsãrIÁo
;

8 
	gsqu¬eWidth
;

9 
	gsqu¬eHeight
;

10 
_ŒªsãrC–ls
 
	gŒªsãrC–ls
[
NUMBER_CELLS
];

14 
	g¶ay”OnSide
 = 
LEFT_SIDE
;

15 
	gdroidOnSide
 = 
RIGHT_SIDE
;

17 
	gnumPÏy”Tok’s
;

18 
	gnumDroidTok’s
;

20 
	g’emyT¿nsãrThškCouÁ
 = 0.0f;

21 
	g’emyT¿nsãrThškD–ay
 = 0.0f;

22 
boŞ
 
	gfoundACœcu™
 = 
çl£
;

23 
	gÃxtCœcu™ToU£
;

25 
	g£ËùSideCouÁ”
 = 
TRANSFER_COUNTER
;

26 
	gd–ayT¿nsãrIÁro
 = 
TRANSFER_DELAY
;

28 
	g¶ay”BlockPos
;

29 
	gdroidBlockPos
;

31 
	gŒªsãrDroidPosX
;

32 
	gŒªsãrDroidPosY
;

33 
	gŒªsãrTextPosX
;

34 
	gŒªsãrTextHeight
;

35 
	gŒªsãrTextPosY
;

36 
	gŒªsãrT™ËPosX
;

37 
	gŒªsãrT™ËPosY
;

39 
boŞ
 
	gcœcu™Found
 = 
çl£
;

40 
	gcœcu™TimeAlive
;

42 
	gdroidT¿nsã»dIÁoIndex
;

44 
	gnumAùiveLeá
 = 0;

45 
	gnumAùiveRight
 = 0;

46 
	gnumAùiveDi¥u‹
 = 0;

51 
	$Œn_g‘RªdCŞÜ
()

54  (
	`¿nd
() % 100) / 100.0f;

55 
	}
}

60 
	$Œn_´oûssCœcu™s
(
š‹½Ş©e
)

63 
numAùiveLeá
 = 0;

64 
numAùiveRight
 = 0;

66 
i
 = 0; i !ğ
NUMBER_CELLS
; i++)

69 ià((
Œue
 =ğ
ŒªsãrC–ls
[
i
].
isR•—‹rLeá
è&& (Œu=ğŒªsãrC–ls[i].
»³©”LeáAùiv©ed
))

71 
	`ho¡_ŒªsS‘C–lCŞÜ
(
i
, 
POWER_YELLOW
, 
COL_YELLOW
);

74 ià((
Œue
 =ğ
ŒªsãrC–ls
[
i
].
isR•—‹rRight
è&& (Œu=ğŒªsãrC–ls[i].
»³©”RightAùiv©ed
))

76 
	`ho¡_ŒªsS‘C–lCŞÜ
(
i
, 
POWER_PURPLE
, 
COL_PURPLE
);

79 ià(
Œue
 =ğ
ŒªsãrC–ls
[
i
].
pow”OnLeá
)

81 
ŒªsãrC–ls
[
i
].
pow”OnS¹Leá
 -ğ1.0à* 
š‹½Ş©e
;

82 ià(
ŒªsãrC–ls
[
i
].
pow”OnS¹Leá
 < 0.0f)

84 
ŒªsãrC–ls
[
i
].
pow”OnLeá
 = 
çl£
;

88 
ŒªsãrC–ls
[
i
].
cœcu™Ty³Leá
)

90 
CIRCUIT_NORMAL
:

91 
CIRCUIT_NORMAL_1
:

92 
CIRCUIT_NORMAL_2
:

93 
	`ho¡_ŒªsS‘C–lCŞÜ
(
i
, 
POWER_YELLOW
, 
COL_YELLOW
);

94 ià(
ŒªsãrC–ls
[
i
].
isRev”£dLeá
)

96 
	`ho¡_ŒªsS‘C–lCŞÜ
(
i
, 
POWER_PURPLE
, 
COL_PURPLE
);

101 
CIRCUIT_THREEQUARTERS
:

102 
CIRCUIT_HALF
:

103 
CIRCUIT_QUARTER
:

106 
CIRCUIT_SPLIT_HALF
:

111 
CIRCUIT_SPLIT_TWO_INTO_ONE
:

113 ià(
ŒªsãrC–ls
[
i
 + 1].
cœcu™Ty³Leá
 =ğ
CIRCUIT_TWO_INTO_ONE
)

115 ià((
ŒªsãrC–ls
[
i
].
pow”OnLeá
 =ğ
Œue
) && (transferCells[i + 2].powerOnLeft ==rue))

117 
	`ho¡_ŒªsS‘C–lCŞÜ
(
i
 + 1, 
POWER_YELLOW
, 
COL_YELLOW
);

132 
CIRCUIT_TWO_INTO_ONE
:

135 
CIRCUIT_ONE_INTO_TWO
:

136 
	`ho¡_ŒªsS‘C–lCŞÜ
(
i
 - 1, 
POWER_YELLOW
, 
COL_YELLOW
);

137 
	`ho¡_ŒªsS‘C–lCŞÜ
(
i
 + 1, 
POWER_YELLOW
, 
COL_YELLOW
);

143 ià(
Œue
 =ğ
ŒªsãrC–ls
[
i
].
pow”OnRight
)

145 
ŒªsãrC–ls
[
i
].
pow”OnS¹Right
 -ğ1.0à* 
š‹½Ş©e
;

146 ià(
ŒªsãrC–ls
[
i
].
pow”OnS¹Right
 < 0.0f)

148 
ŒªsãrC–ls
[
i
].
pow”OnRight
 = 
çl£
;

152 
ŒªsãrC–ls
[
i
].
cœcu™Ty³Right
)

154 
CIRCUIT_NORMAL
:

155 
CIRCUIT_NORMAL_1
:

156 
CIRCUIT_NORMAL_2
:

157 
	`ho¡_ŒªsS‘C–lCŞÜ
(
i
, 
POWER_PURPLE
, 
COL_PURPLE
);

158 ià(
ŒªsãrC–ls
[
i
].
isRev”£dRight
)

160 
	`ho¡_ŒªsS‘C–lCŞÜ
(
i
, 
POWER_YELLOW
, 
COL_YELLOW
);

166 
CIRCUIT_THREEQUARTERS
:

167 
CIRCUIT_HALF
:

168 
CIRCUIT_QUARTER
:

171 
CIRCUIT_SPLIT_HALF
:

176 
CIRCUIT_SPLIT_TWO_INTO_ONE
:

178 ià(
ŒªsãrC–ls
[
i
 + 1].
cœcu™Ty³Right
 =ğ
CIRCUIT_TWO_INTO_ONE
)

180 ià((
ŒªsãrC–ls
[
i
].
pow”OnRight
 =ğ
Œue
) && (transferCells[i + 2].powerOnRight ==rue))

182 
	`ho¡_ŒªsS‘C–lCŞÜ
(
i
 + 1, 
POWER_PURPLE
, 
COL_PURPLE
);

197 
CIRCUIT_TWO_INTO_ONE
:

200 
CIRCUIT_ONE_INTO_TWO
:

201 
	`ho¡_ŒªsS‘C–lCŞÜ
(
i
 - 1, 
POWER_PURPLE
, 
COL_PURPLE
);

202 
	`ho¡_ŒªsS‘C–lCŞÜ
(
i
 + 1, 
POWER_PURPLE
, 
COL_PURPLE
);

211 ià((
Œue
 =ğ
ŒªsãrC–ls
[
i
].
pow”OnLeá
è&& (Œu=ğŒªsãrC–ls[i].
pow”OnRight
))

215 
ŒªsãrC–ls
[
i
].
cœcu™Ty³Leá
)

217 
CIRCUIT_THREEQUARTERS
:

218 
CIRCUIT_HALF
:

219 
CIRCUIT_QUARTER
:

223 
ŒªsãrC–ls
[
i
].
cœcu™Ty³Right
)

225 
CIRCUIT_THREEQUARTERS
:

226 
CIRCUIT_HALF
:

227 
CIRCUIT_QUARTER
:

231 
ŒªsãrC–ls
[
i
].
cœcu™Ty³Right
)

233 
CIRCUIT_NORMAL
:

234 
CIRCUIT_NORMAL_1
:

235 
CIRCUIT_NORMAL_2
:

236 
ŒªsãrC–ls
[
i
].
cœcu™Ty³Leá
)

238 
CIRCUIT_NORMAL
:

239 
CIRCUIT_NORMAL_1
:

240 
CIRCUIT_NORMAL_2
:

241 
	`ho¡_ŒªsS‘C–lCŞÜ
(
i
, 
POWER_DISPUTE
, 
	`Œn_g‘RªdCŞÜ
(),rn_getRandColor(),rn_getRandColor(),rn_getRandColor());

244 
CIRCUIT_SPLIT_TWO_INTO_ONE
:

245 ià(
ŒªsãrC–ls
[
i
 + 1].
cœcu™Ty³Leá
 =ğ
CIRCUIT_TWO_INTO_ONE
)

246 ià((
ŒªsãrC–ls
[
i
].
pow”OnLeá
 =ğ
Œue
) && (transferCells[i + 2].powerOnLeft ==rue))

247 
	`ho¡_ŒªsS‘C–lCŞÜ
(
i
, 
POWER_DISPUTE
, 
	`Œn_g‘RªdCŞÜ
(),rn_getRandColor(),rn_getRandColor(),rn_getRandColor());

255 ià(
ŒªsãrC–ls
[
i
].
cu¼’tCŞÜ
 =ğ
POWER_YELLOW
)

256 
numAùiveLeá
++;

258 ià(
ŒªsãrC–ls
[
i
].
cu¼’tCŞÜ
 =ğ
POWER_PURPLE
)

259 
numAùiveRight
++;

262 ià(
numAùiveLeá
 > 
numAùiveRight
)

263 
cu¼’tWšÃr
 = 
	`®_m­_rgba_f
(
COL_YELLOW
);

265 ià(
numAùiveRight
 > 
numAùiveLeá
)

266 
cu¼’tWšÃr
 = 
	`®_m­_rgba_f
(
COL_PURPLE
);

268 ià(
numAùiveLeá
 =ğ
numAùiveRight
)

269 
cu¼’tWšÃr
 = 
	`®_m­_rgba_f
(
	`Œn_g‘RªdCŞÜ
(),rn_getRandColor(),rn_getRandColor(),rn_getRandColor());

270 
	}
}

275 
	$Œn_cİyDroidA‰ribu‹s
()

278 
	`gam_de¡royDroid
(
cu¼’tLev–
, 
droidT¿nsã»dIÁoIndex
);

279 
	`gam_£tupPÏy”V®ues
(
droidTy³ToT¿nsãrIÁo
);

282 
	}
}

287 
	$Œn_£tupSqu¬es
()

290 ià(
çl£
 =ğ
	`sys_execu‹SütFunùiÚ
("as_setupTransferCellValues", ""))

292 
	`cÚ_´št
(
Œue
,rue, "Error:‡s_setupTransferCellValues: Script failedo init cells.");

295 
	}
}

300 
	$Œn_£tupTok’s
()

303 
numDroidTok’s
 = 
d©aBa£EÁry
[
droidTy³ToT¿nsãrIÁo
].
tok’CouÁ
;

304 
numPÏy”Tok’s
 = 
d©aBa£EÁry
[
¶ay”DroidTy³Image
].
tok’CouÁ
;

305 
¶ay”BlockPos
 = 
TOKEN_POS_HIDE
;

306 
droidBlockPos
 = 
TOKEN_POS_HIDE
;

307 
	}
}

316 
	$Œn_¡¬tT¿nsãrMode
(
ŒªsãrToDroid
)

319 
	`gam_£tHUDS‹
(
HUD_STATE_TRANSFER
);

320 
	`sys_¡İPÏy”Movem’t
();

323 
d–ayT¿nsãrIÁro
 = 
TRANSFER_DELAY
;

326 
šT¿nsãrMode
 = 
çl£
;

329 
droidTy³ToT¿nsãrIÁo
 = 
shLev–
[
cu¼’tLev–
].
droid
[
ŒªsãrToDroid
].
droidTy³
;

330 
droidT¿nsã»dIÁoIndex
 = 
ŒªsãrToDroid
;

332 
	`Œn_£tupSqu¬es
();

333 
	`Œn_£tupTok’s
();

334 
	}
}

339 
	$Œn_´oûssT¿nsãrSü“n
(
š‹½Ş©e
)

342 
cu¼’tMode
)

344 
MODE_TRANSFER_INTRO
:

345 
	`gam_£tHUDS‹
(
HUD_STATE_CAPTURED
);

346 
d–ayT¿nsãrIÁro
 -ğ
TRANSFER_SPEED
 * 
š‹½Ş©e
;

347 ià(
d–ayT¿nsãrIÁro
 < 0.0)

349 
d–ayT¿nsãrIÁro
 = 
TRANSFER_DELAY
;

350 
	`sys_chªgeMode
(
MODE_TRANSFER_INTRO_1
, 
Œue
);

351 
	`sys_¶aySound
(
SND_TRANSFER_STAGE_1
, 
SND_PAN_CENTER
, 
ALLEGRO_PLAYMODE_ONCE
);

352 
	`gam_lßdDroidMod–
(
¶ay”DroidTy³Image
 - 2);

356 
MODE_TRANSFER_INTRO_1
:

357 
	`gam_£tHUDS‹
(
HUD_STATE_CAPTURED
);

358 
d–ayT¿nsãrIÁro
 -ğ
TRANSFER_SPEED
 * 
š‹½Ş©e
;

361 ià((
çl£
 =ğ
	`sys_isSoundPÏyšg
(
SND_TRANSFER_STAGE_1
)è&& (
Œue
 =ğ
soundAvaabË
))

362 
d–ayT¿nsãrIÁro
 = -1;

364 ià(
d–ayT¿nsãrIÁro
 < 0.0)

366 
	`gam_lßdDroidMod–
(
droidTy³ToT¿nsãrIÁo
);

367 
d–ayT¿nsãrIÁro
 = 
TRANSFER_DELAY
;

368 
	`sys_chªgeMode
(
MODE_TRANSFER_INTRO_2
, 
çl£
);

369 
	`sys_¡İSound
(
SND_TRANSFER_STAGE_1
);

370 
	`sys_¶aySound
(
SND_TRANSFER_STAGE_2
, 
SND_PAN_CENTER
, 
ALLEGRO_PLAYMODE_ONCE
);

374 
MODE_TRANSFER_INTRO_2
:

375 
	`gam_£tHUDS‹
(
HUD_STATE_CAPTURED
);

376 
d–ayT¿nsãrIÁro
 -ğ
TRANSFER_SPEED
 * 
š‹½Ş©e
;

379 ià((
çl£
 =ğ
	`sys_isSoundPÏyšg
(
SND_TRANSFER_STAGE_2
)è&& (
Œue
 =ğ
soundAvaabË
))

380 
d–ayT¿nsãrIÁro
 = -1;

382 ià(
d–ayT¿nsãrIÁro
 < 0.0)

384 
	`sys_¡İSound
(
SND_TRANSFER_STAGE_2
);

385 
d–ayT¿nsãrIÁro
 = 
TRANSFER_DELAY
;

386 
	`sys_chªgeMode
(
MODE_TRANSFER_START
, 
çl£
);

390 
MODE_TRANSFER_START
:

391 
	`gam_£tHUDS‹
(
HUD_STATE_CAPTURED
);

392 
	`sys_chªgeMode
(
MODE_TRANSFER_SELECT_SIDE
, 
çl£
);

394 
¶ay”OnSide
 = 
LEFT_SIDE
;

395 
’emyT¿nsãrThškCouÁ
 = 0.0f;

396 
’emyT¿nsãrThškD–ay
 = 0.0f;

397 
foundACœcu™
 = 
çl£
;

398 
d–ayT¿nsãrIÁro
 = 
TRANSFER_DELAY
;

399 
£ËùSideCouÁ”
 = 
TRANSFER_COUNTER
;

400 
	`sys_¶aySound
(
SND_TRANSFER_START
, 
SND_PAN_CENTER
, 
ALLEGRO_PLAYMODE_ONCE
);

403 
MODE_TRANSFER_SELECT_SIDE
:

405 
	`gam_£tHUDS‹
(
HUD_STATE_SELECT_TIME
);

406 
d–ayT¿nsãrIÁro
 -ğ
TRANSFER_SPEED
 * 
š‹½Ş©e
;

407 ià(
d–ayT¿nsãrIÁro
 < 0.0)

409 
£ËùSideCouÁ”
--;

410 
d–ayT¿nsãrIÁro
 = 
TRANSFER_DELAY
;

411 ià(
£ËùSideCouÁ”
 < 0.0)

413 
	`sys_chªgeMode
(
MODE_TRANSFER_SELECT
, 
çl£
);

414 
£ËùSideCouÁ”
 = 
TRANSFER_COUNTER
;

415 
d–ayT¿nsãrIÁro
 = 
TRANSFER_DELAY
;

416 
	`Œn_ÃxtPÏy”Tok’
();

417 
	`Œn_ÃxtDroidTok’
();

422 
MODE_TRANSFER_SELECT
:

424 
	`gam_doT¿nsãrThšk
(
š‹½Ş©e
);

425 
	`Œn_´oûssCœcu™s
(
š‹½Ş©e
);

426 
	`gam_£tHUDS‹
(
HUD_STATE_TIME_LEFT
);

427 
d–ayT¿nsãrIÁro
 -ğ
TRANSFER_SPEED
 * 
š‹½Ş©e
;

428 ià(
d–ayT¿nsãrIÁro
 < 0.0)

430 
£ËùSideCouÁ”
--;

431 
d–ayT¿nsãrIÁro
 = 
TRANSFER_DELAY
;

432 ià(
£ËùSideCouÁ”
 < 0)

434 
cu¼’tMode
 = 
MODE_TRANSFER_COPY
;

435 
£ËùSideCouÁ”
 = 
SELECT_COUNTER
;

436 
d–ayT¿nsãrIÁro
 = 
TRANSFER_DELAY
;

450 
MODE_TRANSFER_COPY
:

451 
	`gam_£tHUDS‹
(
HUD_STATE_CAPTURED
);

452 
d–ayT¿nsãrIÁro
 -ğ
TRANSFER_SPEED
 * 
š‹½Ş©e
;

453 ià(
d–ayT¿nsãrIÁro
 < 0.0)

455 
d–ayT¿nsãrIÁro
 = 
TRANSFER_DELAY
;

456 
	`Œn_cİyDroidA‰ribu‹s
();

457 
cu¼’tMode
 = 
MODE_TRANSFER_FINISH
;

461 
MODE_TRANSFER_FINISH
:

462 
cu¼’tMode
 = 
MODE_SHOWLEVEL
;

468 ià(
Œue
 =ğ
	`sys_isSoundPÏyšg
(
SND_GREEN_ALERT
))

469 
	`sys_¡İSound
(
SND_GREEN_ALERT
);

471 ià(
Œue
 =ğ
	`sys_isSoundPÏyšg
(
SND_YELLOW_ALERT
))

472 
	`sys_¡İSound
(
SND_YELLOW_ALERT
);

474 ià(
Œue
 =ğ
	`sys_isSoundPÏyšg
(
SND_RED_ALERT
))

475 
	`sys_¡İSound
(
SND_RED_ALERT
);

476 
	}
}

481 
	$Œn_showT¿nsãrInfo
(
whichDroid
)

484 
	`sys_´štSŒšgExt
(
ŒªsãrTextPosX
, 
ŒªsãrTextPosY
 + (
ŒªsãrTextHeight
 * 0), "%s", 
d©aBa£EÁry
[
whichDroid
].
desütiÚ
);

485 
	`sys_´štSŒšgExt
(
ŒªsãrTextPosX
, 
ŒªsãrTextPosY
 + (
ŒªsãrTextHeight
 * 1), "Ty³ : %s", 
d©aBa£EÁry
[
whichDroid
].
şassName
);

486 
	`sys_´štSŒšgExt
(
ŒªsãrTextPosX
, 
ŒªsãrTextPosY
 + (
ŒªsãrTextHeight
 * 2), "Driv: %s", 
d©aBa£EÁry
[
whichDroid
].
drive
);

487 
	`sys_´štSŒšgExt
(
ŒªsãrTextPosX
, 
ŒªsãrTextPosY
 + (
ŒªsãrTextHeight
 * 3), "B¿š : %s", 
d©aBa£EÁry
[
whichDroid
].
b¿š
);

488 
	`sys_´štSŒšgExt
(
ŒªsãrTextPosX
, 
ŒªsãrTextPosY
 + (
ŒªsãrTextHeight
 * 4), "W—pÚ : %s", 
d©aBa£EÁry
[
whichDroid
].
w—pÚ
);

489 
	}
}

494 
	$Œn_d¿wT¿nsãrSü“n
()

497 
d–ayT¿nsãrIÁro
 = 
TRANSFER_DELAY
;

498 
ıVeù
 
sü“nPos
;

500 
sü“nPos
.
x
 = 
ŒªsãrDroidPosX
;

501 
sü“nPos
.
y
 = 
ŒªsãrDroidPosY
;

503 
cu¼’tMode
)

505 
MODE_TRANSFER_INTRO
:

506 
	`sys_´štSŒšgExt
(70.0f, 110.0f, "Commencingransfer…rocess...");

509 
MODE_TRANSFER_INTRO_1
:

510 
	`Œª_d¿wT¿nsãrC–ls
(
Œue
);

511 
	`sys_´štSŒšgExt
(70.0f, 110.0f, "This ishe droid you currently control");

513 
	`gam_d¿wS´™e
(0, 
dbImage
, 
sü“nPos
, -1.0f, 
	`®_m­_rgba_f
(1.0f, 1.0f, 1.0f, 1.0f));

515 
	`Œn_showT¿nsãrInfo
(
¶ay”DroidTy³Image
 - 2);

518 
MODE_TRANSFER_INTRO_2
:

519 
	`Œª_d¿wT¿nsãrC–ls
(
Œue
);

520 
	`sys_´štSŒšgExt
(70.0f, 110.0f, "This ishe droid you wanto control");

522 
	`gam_d¿wS´™e
(0, 
dbImage
, 
sü“nPos
, -1.0f, 
	`®_m­_rgba_f
(1.0f, 1.0f, 1.0f, 1.0f));

524 
	`Œn_showT¿nsãrInfo
(
droidTy³ToT¿nsãrIÁo
);

527 
MODE_TRANSFER_START
:

528 
cu¼’tWšÃr
 = 
	`®_m­_rgba_f
(
COL_BLACK
);

531 
MODE_TRANSFER_SELECT_SIDE
:

532 
	`Œª_d¿wT¿nsãrC–ls
(
çl£
);

535 
MODE_TRANSFER_SELECT
:

536 
	`Œª_d¿wT¿nsãrC–ls
(
çl£
);

539 
MODE_TRANSFER_COPY
:

540 
	`sys_´štSŒšgExt
(70.0f, 110.0f, "Taking control of‚ew droid...");

543 
MODE_TRANSFER_FINISH
:

546 
	}
}

558 
boŞ
 
	$Œªs_checkC–lIndex
(
v®ue
)

561 ià((
v®ue
 < 0è|| (v®u> 
NUMBER_CELLS
))

562  
çl£
;

564  
Œue
;

565 
	}
}

570 
	$ho¡_ŒªsS‘EfãùTy³
(
whichC–l
, 
whichSide
, 
whichEfãù
)

573 ià(
çl£
 =ğ
	`Œªs_checkC–lIndex
(
whichC–l
))

576 ià(
LEFT_SIDE
 =ğ
whichSide
)

578 ià(
whichEfãù
 =ğ
CIRCUIT_REVERSED
)

579 
ŒªsãrC–ls
[
whichC–l
].
isRev”£dLeá
 = 
Œue
;

581 ià(
whichEfãù
 =ğ
CIRCUIT_REPEATER
)

582 
ŒªsãrC–ls
[
whichC–l
].
isR•—‹rLeá
 = 
Œue
;

584 ià(
RIGHT_SIDE
 =ğ
whichSide
)

586 ià(
whichEfãù
 =ğ
CIRCUIT_REVERSED
)

587 
ŒªsãrC–ls
[
whichC–l
].
isRev”£dRight
 = 
Œue
;

589 ià(
whichEfãù
 =ğ
CIRCUIT_REPEATER
)

590 
ŒªsãrC–ls
[
whichC–l
].
isR•—‹rRight
 = 
Œue
;

592 
	}
}

597 
	$ho¡_ŒªS‘Cœcu™Ty³
(
whichC–l
, 
whichSide
, 
ty³S‘
)

600 ià(
çl£
 =ğ
	`Œªs_checkC–lIndex
(
whichC–l
))

603 ià(
LEFT_SIDE
 =ğ
whichSide
)

604 
ŒªsãrC–ls
[
whichC–l
].
cœcu™Ty³Leá
 = 
ty³S‘
;

606 ià(
RIGHT_SIDE
 =ğ
whichSide
)

607 
ŒªsãrC–ls
[
whichC–l
].
cœcu™Ty³Right
 = 
ty³S‘
;

608 
	}
}

613 
	$ho¡_ŒªsS‘DeçuÉV®ues
(
whichC–l
)

616 ià(
çl£
 =ğ
	`Œªs_checkC–lIndex
(
whichC–l
))

619 
ŒªsãrC–ls
[
whichC–l
].
pow”OnLeá
 = 
çl£
;

620 
ŒªsãrC–ls
[
whichC–l
].
pow”OnS¹Leá
 = 0.0f;

621 
ŒªsãrC–ls
[
whichC–l
].
cœcu™Ty³Leá
 = -1;

622 
ŒªsãrC–ls
[
whichC–l
].
isR•—‹rLeá
 = 
çl£
;

623 
ŒªsãrC–ls
[
whichC–l
].
isRev”£dLeá
 = 
çl£
;

624 
ŒªsãrC–ls
[
whichC–l
].
»v”£dLeáAùiv©ed
 = 
çl£
;

625 
ŒªsãrC–ls
[
whichC–l
].
»³©”LeáAùiv©ed
 = 
çl£
;

627 
ŒªsãrC–ls
[
whichC–l
].
pow”OnRight
 = 
çl£
;

628 
ŒªsãrC–ls
[
whichC–l
].
pow”OnS¹Right
 = 0.0f;

629 
ŒªsãrC–ls
[
whichC–l
].
cœcu™Ty³Right
 = -1;

630 
ŒªsãrC–ls
[
whichC–l
].
isR•—‹rRight
 = 
çl£
;

631 
ŒªsãrC–ls
[
whichC–l
].
isRev”£dRight
 = 
çl£
;

632 
ŒªsãrC–ls
[
whichC–l
].
»v”£dRightAùiv©ed
 = 
çl£
;

633 
ŒªsãrC–ls
[
whichC–l
].
»³©”RightAùiv©ed
 = 
çl£
;

634 
	}
}

641 
boŞ
 
	$ho¡_cœcu™NÙPow”ed
(
whichC–l
, 
whichSide
)

644 ià(
çl£
 =ğ
	`Œªs_checkC–lIndex
(
whichC–l
))

645  
çl£
;

647 ià(
LEFT_SIDE
 =ğ
whichSide
)

648  
ŒªsãrC–ls
[
whichC–l
].
pow”OnLeá
;

650  
ŒªsãrC–ls
[
whichC–l
].
pow”OnRight
;

651 
	}
}

656 
	$ho¡_g‘C­³dRªdomNum
(
ÿp
)

659  
	`¿nd
(è% 
ÿp
;

660 
	}
}

665 
	$ho¡_ŒªsS‘C–lCŞÜ
(
whichC–l
, 
cŞTy³
, 
»d
, 
g»’
, 
blue
, 
®pha
)

668 ià(
çl£
 =ğ
	`Œªs_checkC–lIndex
(
whichC–l
))

670 
	`cÚ_´št
(
Œue
,rue, "Error: host_transSetCellColor: Invalid cell index.");

674 
ŒªsãrC–ls
[
whichC–l
].
cŞÜ
 = 
	`®_m­_rgba_f
(
»d
, 
g»’
, 
blue
, 
®pha
);

675 
ŒªsãrC–ls
[
whichC–l
].
cu¼’tCŞÜ
 = 
cŞTy³
;

676 
	}
}

681 
	$ho¡_ŒªsS‘C–lPos
(
whichC–l
, 
posX
, 
posY
)

684 ià(
çl£
 =ğ
	`Œªs_checkC–lIndex
(
whichC–l
))

686 
	`cÚ_´št
(
Œue
,rue, "Error: host_transSetCellPos: Invalid cell index.");

690 
ŒªsãrC–ls
[
whichC–l
].
¡¬tX
 = 
posX
;

691 
ŒªsãrC–ls
[
whichC–l
].
¡¬tY
 = 
posY
;

694 
	}
}

699 
boŞ
 
	$Œªs_£tupT¿nsãrGUI
()

704  
Œue
;

705 
	}
}

	@../src/game/gam_transferDroidAI.cpp

1 
	~"../../hdr/sys_glob®s.h
"

2 
	~"../../hdr/game/gam_Œªsãr.h
"

7 
	$gam_doT¿nsãrThšk
(
thškIÁ”v®
)

10 
’emyT¿nsãrThškCouÁ
 = 0.0f;

11 
’emyT¿nsãrThšk
 = 5.0f;

13 
’emyT¿nsãrThškCouÁ
 +ğ
’emyT¿nsãrThšk
 * 
thškIÁ”v®
;

14 ià(
’emyT¿nsãrThškCouÁ
 > 1.0f)

16 
’emyT¿nsãrThškCouÁ
 = 0.0f;

17 
	`sys_execu‹SütFunùiÚ
("as_processTransferAI", "");

19 
	}
}

24 
	$Œn_ÃxtDroidTok’
()

27 
droidBlockPos
 = 0;

28 
numDroidTok’s
--;

29 ià(
numDroidTok’s
 == -1)

30 
droidBlockPos
 = 
TOKEN_POS_HIDE
;

31 
	}
}

	@../src/game/gam_transferPlayerAI.cpp

1 
	~"../../hdr/sys_glob®s.h
"

2 
	~"../../hdr/game/gam_Œªsãr.h
"

7 
	$Œn_ÃxtPÏy”Tok’
()

10 ià(
numPÏy”Tok’s
 == 0)

12 
numPÏy”Tok’s
--;

17 
¶ay”BlockPos
 = 
TOKEN_POS_LAUNCH
;

18 
numPÏy”Tok’s
--;

21 
	}
}

26 
	$Œn_aùiv©eCœcu™
(
whichC–l
, 
whichSide
)

29 ià(
numPÏy”Tok’s
 < 0)

32 
whichSide
)

34 
LEFT_SIDE
:

35 
ŒªsãrC–ls
[
whichC–l
].
pow”OnLeá
 = 
Œue
;

36 
ŒªsãrC–ls
[
whichC–l
].
pow”OnS¹Leá
 = 
cœcu™TimeAlive
;

37 
	`sys_¶aySound
(
SND_KEYPRESS_GOOD
, 
SND_PAN_LEFT
, 
ALLEGRO_PLAYMODE_ONCE
);

39 ià(
Œue
 =ğ
ŒªsãrC–ls
[
whichC–l
].
isR•—‹rLeá
)

40 
ŒªsãrC–ls
[
whichC–l
].
»³©”LeáAùiv©ed
 = 
Œue
;

42 ià(
Œue
 =ğ
ŒªsãrC–ls
[
whichC–l
].
isRev”£dLeá
)

43 
ŒªsãrC–ls
[
whichC–l
].
»v”£dLeáAùiv©ed
 = 
Œue
;

46 
RIGHT_SIDE
:

47 
ŒªsãrC–ls
[
whichC–l
].
pow”OnRight
 = 
Œue
;

48 
ŒªsãrC–ls
[
whichC–l
].
pow”OnS¹Right
 = 
cœcu™TimeAlive
;

49 
	`sys_¶aySound
(
SND_KEYPRESS_GOOD
, 
SND_PAN_RIGHT
, 
ALLEGRO_PLAYMODE_ONCE
);

51 ià(
Œue
 =ğ
ŒªsãrC–ls
[
whichC–l
].
isR•—‹rRight
)

52 
ŒªsãrC–ls
[
whichC–l
].
»³©”RightAùiv©ed
 = 
Œue
;

54 ià(
Œue
 =ğ
ŒªsãrC–ls
[
whichC–l
].
isRev”£dRight
)

55 
ŒªsãrC–ls
[
whichC–l
].
»v”£dRightAùiv©ed
 = 
Œue
;

58 
	}
}

63 
	$Œn_¶aûTok’
(
whichC–l
, 
whichSide
, 
¶ay”OrDroid
)

66 
cu¼’tCœcu™Ty³
;

68 ià(
numPÏy”Tok’s
 < 0)

71 
whichSide
)

73 
LEFT_SIDE
:

74 
cu¼’tCœcu™Ty³
 = 
ŒªsãrC–ls
[
whichC–l
].
cœcu™Ty³Leá
;

77 
RIGHT_SIDE
:

78 
cu¼’tCœcu™Ty³
 = 
ŒªsãrC–ls
[
whichC–l
].
cœcu™Ty³Right
;

82 
debugCu¼’tCœcu™Ty³
 = 
cu¼’tCœcu™Ty³
;

85 ià(
Œue
 =ğ
	`ho¡_cœcu™NÙPow”ed
(
whichC–l
, 
whichSide
))

87 
	`sys_¶aySound
(
SND_KEYPRESS_BAD
, 
SND_PAN_CENTER
, 
ALLEGRO_PLAYMODE_ONCE
);

92 
cu¼’tCœcu™Ty³
)

94 
CIRCUIT_NORMAL
:

95 
CIRCUIT_NORMAL_1
:

96 
CIRCUIT_NORMAL_2
:

97 
CIRCUIT_SPLIT_TWO_INTO_ONE
:

98 
CIRCUIT_ONE_INTO_TWO
:

99 
CIRCUIT_THREEQUARTERS
:

100 
CIRCUIT_HALF
:

101 
CIRCUIT_QUARTER
:

102 
	`Œn_aùiv©eCœcu™
(
whichC–l
, 
whichSide
);

103 ià(
PLAYER_TRANSFER
 =ğ
¶ay”OrDroid
)

104 
	`Œn_ÃxtPÏy”Tok’
();

106 
	`Œn_ÃxtDroidTok’
();

107 
	`sys_¶aySound
(
SND_TRANSFER_SELECT
, 
SND_PAN_CENTER
, 
ALLEGRO_PLAYMODE_ONCE
);

110 
CIRCUIT_TWO_INTO_ONE
:

111 
CIRCUIT_SPLIT_HALF
:

112 
	`sys_¶aySound
(
SND_KEYPRESS_BAD
, 
SND_PAN_CENTER
, 
ALLEGRO_PLAYMODE_ONCE
);

115 
	}
}

123 
	$Œn_moveTok’
(
whichDœeùiÚ
)

126 
whichDœeùiÚ
)

128 
MOVE_DOWN
:

129 
¶ay”BlockPos
++;

130 ià(
¶ay”BlockPos
 > 
NUMBER_CELLS
 - 1)

131 
¶ay”BlockPos
 = 0;

134 
MOVE_UP
:

135 
¶ay”BlockPos
--;

136 ià(
¶ay”BlockPos
 < 0)

137 
¶ay”BlockPos
 = 
NUMBER_CELLS
 - 1;

140 
	`sys_¶aySound
(
SND_KEYPRESS_GOOD
, 
SND_PAN_CENTER
, 
ALLEGRO_PLAYMODE_ONCE
);

141 
	}
}

	@../src/game/gam_transferRender.cpp

1 
	~"../../hdr/sys_glob®s.h
"

2 
	~"../../hdr/game/gam_Œªsãr.h
"

4 
	#BACKGROUND_BORDER
 10

	)

5 
	#BACKGROUND_START_OFFSET
 20

	)

6 
	#SIDEBAR_WIDTH
 10

	)

8 
	#CIRCUIT_HEIGHT
 4

	)

10 
	#BLOCK_HEIGHT
 10

	)

11 
	#BLOCK_WIDTH
 6

	)

12 
	#BLOCK_STEP
 2

	)

14 
	#BLOCK_YELLOW
 0

	)

15 
	#BLOCK_PURPLE
 1

	)

17 
	#BLOCK_LEFT
 0

	)

18 
	#BLOCK_RIGHT
 1

	)

20 
	gbackGroundS¹X
;

21 
	gbackGroundS¹Y
;

22 
	gbackGroundWidth
;

23 
	gbackGroundHeight
;

25 
ALLEGRO_COLOR
 
	gcu¼’tWšÃr
;

30 
	$Œª_d¿wLÚgBlock
(
whichSide
, 
whichC–l
, 
posX
)

33 
¡¬tX
, 
¡¬tY
, 
’dY
;

35 
¡¬tX
 = 
posX
;

36 
¡¬tY
 = 
ŒªsãrC–ls
[
whichC–l
].¡¬tY - (
squ¬eHeight
);

37 
¡¬tY
 +ğ
BLOCK_STEP
;

38 
’dY
 = 
ŒªsãrC–ls
[
whichC–l
].
¡¬tY
 + (
squ¬eHeight
 * 2);

39 
’dY
 -ğ
BLOCK_STEP
;

41 ià(
LEFT_SIDE
 =ğ
whichSide
)

43 
	`®_d¿w_fËd_»ùªgË
(
¡¬tX
, 
¡¬tY
, s¹X + 
SIDEBAR_WIDTH
, 
’dY
, 
	`®_m­_rgba_f
(
COL_YELLOW
));

45 
	`®_d¿w_»ùªgË
(
¡¬tX
, 
¡¬tY
, s¹X + 
SIDEBAR_WIDTH
, 
’dY
, 
	`®_m­_rgba_f
(
COL_BLACK
), 2.0f);

48 ià(
RIGHT_SIDE
 =ğ
whichSide
)

50 
	`®_d¿w_fËd_»ùªgË
(
¡¬tX
, 
¡¬tY
, s¹X - 
SIDEBAR_WIDTH
, 
’dY
, 
	`®_m­_rgba_f
(
COL_PURPLE
));

52 
	`®_d¿w_»ùªgË
(
¡¬tX
, 
¡¬tY
, s¹X - 
SIDEBAR_WIDTH
, 
’dY
, 
	`®_m­_rgba_f
(
COL_BLACK
), 2.0f);

54 
	}
}

58 
	$Œª_d¿wCœcu™Efãù
(
¡¬tX
, 
¡¬tY
, 
Ëngth
, 
height
, 
whichSide
)

61 
	#NUM_PARTICLES_BASE
 50

	)

63 
ALLEGRO_VERTEX
 *
ŒªsãrP¬tişes
 = 
NULL
;

67 
numP¬tişes
;

69 ià(
NULL
 !ğ
ŒªsãrP¬tişes
)

71 
	`ä“
(
ŒªsãrP¬tişes
);

72 
ŒªsãrP¬tişes
 = 
NULL
;

76 ià(
LEFT_SIDE
 =ğ
whichSide
)

78 
¡¬tX
 +ğ
BLOCK_WIDTH
 * 2;

79 
Ëngth
 -ğ
BLOCK_WIDTH
 * 2;

81 
numP¬tişes
 = 
NUM_PARTICLES_BASE
 + (
Ëngth
 / 10);

83 
ŒªsãrP¬tişes
 = (
ALLEGRO_VERTEX
 *è
	`m®loc
 (
numP¬tişes
 * (ALLEGRO_VERTEX));

85 
i
 = 0; i !ğ
numP¬tişes
; i++)

87 
ŒªsãrP¬tişes
[
i
].
x
 = 
	`¿nd
(è% ((
¡¬tX
 + 
Ëngth
) - startX) + startX;

88 
ŒªsãrP¬tişes
[
i
].
y
 = 
	`¿nd
(è% ((
¡¬tY
 + 
height
) - startY) + startY;

89 
ŒªsãrP¬tişes
[
i
].
z
 = 0;

90 
ŒªsãrP¬tişes
[
i
].
cŞÜ
.
r
 = 1.0f;

91 
ŒªsãrP¬tişes
[
i
].
cŞÜ
.
g
 = 0.0f;

92 
ŒªsãrP¬tişes
[
i
].
cŞÜ
.
b
 = 0.0f;

94 
	`®_d¿w_´im
(
ŒªsãrP¬tişes
, 
NULL
, NULL, 0, 
numP¬tişes
, 
ALLEGRO_PRIM_POINT_LIST
);

97 ià(
NULL
 !ğ
ŒªsãrP¬tişes
)

99 
	`ä“
(
ŒªsãrP¬tişes
);

100 
ŒªsãrP¬tişes
 = 
NULL
;

103 ià(
RIGHT_SIDE
 =ğ
whichSide
)

105 
Ëngth
 -ğ
BLOCK_WIDTH
 * 2;

106 
numP¬tişes
 = 
NUM_PARTICLES_BASE
 + (
Ëngth
 / 10);

108 
ŒªsãrP¬tişes
 = (
ALLEGRO_VERTEX
 *è
	`m®loc
 (
numP¬tişes
 * (ALLEGRO_VERTEX));

110 
i
 = 0; i !ğ
numP¬tişes
; i++)

112 
ŒªsãrP¬tişes
[
i
].
x
 = 
	`¿nd
(è% ((
¡¬tX
 + 
Ëngth
) - startX) + startX;

113 
ŒªsãrP¬tişes
[
i
].
y
 = 
	`¿nd
(è% ((
¡¬tY
 + 
height
) - startY) + startY;

114 
ŒªsãrP¬tişes
[
i
].
z
 = 0;

115 
ŒªsãrP¬tişes
[
i
].
cŞÜ
.
r
 = 1.0f;

116 
ŒªsãrP¬tişes
[
i
].
cŞÜ
.
g
 = 1.0f;

117 
ŒªsãrP¬tişes
[
i
].
cŞÜ
.
b
 = 1.0f;

119 
	`®_d¿w_´im
(
ŒªsãrP¬tişes
, 
NULL
, NULL, 0, 
numP¬tişes
, 
ALLEGRO_PRIM_POINT_LIST
);

123 ià(
NULL
 !ğ
ŒªsãrP¬tişes
)

125 
	`ä“
(
ŒªsãrP¬tişes
);

126 
ŒªsãrP¬tişes
 = 
NULL
;

128 
	}
}

133 
	$Œª_d¿wCœcu™NÜm®
(
whichSide
, 
whichC–l
, 
ty³
, 
boŞ
 
d¿wBlock
)

136 
¡¬tX
, 
¡¬tY
, 
Ëngth
;

138 ià(
LEFT_SIDE
 =ğ
whichSide
)

140 
¡¬tX
 = 
BACKGROUND_BORDER
 + (BACKGROUND_BORDER * 2è+ 
SIDEBAR_WIDTH
;

141 
¡¬tY
 = 
ŒªsãrC–ls
[
whichC–l
].¡¬tY + ((
squ¬eHeight
 - 
CIRCUIT_HEIGHT
) / 2);

142 
Ëngth
 = (
ŒªsãrC–ls
[
whichC–l
].
¡¬tX
 - s¹Xè- (
BLOCK_WIDTH
 * 2);

143 
ty³
)

145 
CIRCUIT_ONE_INTO_TWO
:

146 
¡¬tX
 = (
BACKGROUND_BORDER
 + (BACKGROUND_BORDER * 2è+ 
SIDEBAR_WIDTH
è+ 
Ëngth
 * 0.25;

147 
Ëngth
 =†ength * 0.75;

150 
CIRCUIT_NORMAL
:

151 
Ëngth
 =†ength;

154 
CIRCUIT_THREEQUARTERS
:

155 
Ëngth
 =†ength * 0.75;

156 
Ëngth
 -= 6;

159 
CIRCUIT_HALF
:

160 
Ëngth
 =†ength / 2;

163 
CIRCUIT_QUARTER
:

164 
Ëngth
 =†ength * 0.25;

167 
CIRCUIT_ONE_INTO_TWO_SHORT
:

168 
Ëngth
 =†ength * 0.25;

169 
Ëngth
 -= 10;

170 
	`Œª_d¿wLÚgBlock
(
LEFT_SIDE
, 
whichC–l
, 
¡¬tX
 + 
Ëngth
);

176 ià(
ty³
 =ğ
CIRCUIT_ONE_INTO_TWO
)

178 ià(((
ŒªsãrC–ls
[
whichC–l
].
cœcu™Ty³Leá
 =ğ
CIRCUIT_SPLIT_HALF
è&& (
Œue
 =ğŒªsãrC–ls[whichC–È- 1].
pow”OnLeá
è&& (
CIRCUIT_ONE_INTO_TWO
 ==ransferCells[whichCell - 1].circuitTypeLeft))

179 || ((
ŒªsãrC–ls
[
whichC–l
].
cœcu™Ty³Leá
 =ğ
CIRCUIT_SPLIT_HALF
è&& (
Œue
 =ğŒªsãrC–ls[whichC–È+ 1].
pow”OnLeá
è&& (
CIRCUIT_ONE_INTO_TWO
 ==ransferCells[whichCell + 1].circuitTypeLeft)))

181 
	`®_d¿w_fËd_»ùªgË
(
¡¬tX
, 
¡¬tY
, s¹X + 
BLOCK_WIDTH
 * 2, s¹Y + 
CIRCUIT_HEIGHT
, 
	`®_m­_rgba_f
(
COL_BLACK
));

182 
¡¬tX
 +ğ
BLOCK_WIDTH
 * 2;

183 
Ëngth
 -ğ
BLOCK_WIDTH
 * 2;

184 
	`®_d¿w_fËd_»ùªgË
(
¡¬tX
 - (
BLOCK_WIDTH
 * 2), 
¡¬tY
, s¹X + 
Ëngth
, s¹Y + 
CIRCUIT_HEIGHT
, 
	`®_m­_rgba_f
(
COL_YELLOW
));

186 
	`Œª_d¿wCœcu™Efãù
(
¡¬tX
 - (
BLOCK_WIDTH
è* 2, 
¡¬tY
, 
Ëngth
, 
CIRCUIT_HEIGHT
, 
LEFT_SIDE
);

190 
	`®_d¿w_fËd_»ùªgË
(
¡¬tX
, 
¡¬tY
, s¹X + 
Ëngth
, s¹Y + 
CIRCUIT_HEIGHT
, 
	`®_m­_rgba_f
(
COL_BLACK
));

194 ià(
çl£
 =ğ
ŒªsãrC–ls
[
whichC–l
].
pow”OnLeá
)

195 
	`®_d¿w_fËd_»ùªgË
(
¡¬tX
, 
¡¬tY
, s¹X + 
Ëngth
, s¹Y + 
CIRCUIT_HEIGHT
, 
	`®_m­_rgba_f
(
COL_BLACK
));

198 
	`®_d¿w_fËd_»ùªgË
(
¡¬tX
, 
¡¬tY
, s¹X + 
BLOCK_WIDTH
 * 2, s¹Y + 
CIRCUIT_HEIGHT
, 
	`®_m­_rgba_f
(
COL_BLACK
));

199 
¡¬tX
 +ğ
BLOCK_WIDTH
 * 2;

200 
Ëngth
 -ğ
BLOCK_WIDTH
 * 2;

201 
	`®_d¿w_fËd_»ùªgË
(
¡¬tX
, 
¡¬tY
, s¹X + 
Ëngth
, s¹Y + 
CIRCUIT_HEIGHT
, 
	`®_m­_rgba_f
(
COL_YELLOW
));

202 
	`Œª_d¿wCœcu™Block
(
BLOCK_RIGHT
, 
whichC–l
, 
¡¬tX
, 
COL_YELLOW
);

204 
	`Œª_d¿wCœcu™Efãù
(
¡¬tX
, 
¡¬tY
, 
Ëngth
, 
CIRCUIT_HEIGHT
, 
LEFT_SIDE
);

208 ià(
Œue
 =ğ
d¿wBlock
)

210 ià(
ty³
 !ğ
CIRCUIT_NORMAL
)

211 
	`Œª_d¿wCœcu™Block
(
BLOCK_LEFT
, 
whichC–l
, 
¡¬tX
 + 
Ëngth
, 
COL_YELLOW
);

215 ià(
RIGHT_SIDE
 =ğ
whichSide
)

217 
¡¬tX
 = (
backGroundWidth
 - (
BACKGROUND_BORDER
 * 2)è- 
SIDEBAR_WIDTH
;

218 
¡¬tY
 = 
ŒªsãrC–ls
[
whichC–l
].¡¬tY + ((
squ¬eHeight
 - 
CIRCUIT_HEIGHT
) / 2);

219 
Ëngth
 = (
¡¬tX
 - (
ŒªsãrC–ls
[
whichC–l
].¡¬tX + 
squ¬eWidth
)è- 
SIDEBAR_WIDTH
;

220 
ty³
)

223 
CIRCUIT_ONE_INTO_TWO
:

224 
¡¬tX
 = s¹X - (
Ëngth
 * 0.25);

225 
Ëngth
 =†ength * 0.75;

228 
CIRCUIT_NORMAL
:

229 
Ëngth
 =†ength;

232 
CIRCUIT_THREEQUARTERS
:

233 
Ëngth
 =†ength * 0.75;

234 
Ëngth
 -= 6;

237 
CIRCUIT_HALF
:

238 
Ëngth
 =†ength / 2;

241 
CIRCUIT_QUARTER
:

242 
Ëngth
 =†ength * 0.25;

245 
CIRCUIT_ONE_INTO_TWO_SHORT
:

246 
Ëngth
 =†ength * 0.25;

247 
Ëngth
 -= 10;

248 
	`Œª_d¿wLÚgBlock
(
RIGHT_SIDE
, 
whichC–l
, 
¡¬tX
 - 
Ëngth
);

254 ià(
ty³
 =ğ
CIRCUIT_ONE_INTO_TWO
)

256 ià(((
ŒªsãrC–ls
[
whichC–l
].
cœcu™Ty³Right
 =ğ
CIRCUIT_SPLIT_HALF
è&& (
Œue
 =ğŒªsãrC–ls[whichC–È- 1].
pow”OnRight
è&& (
CIRCUIT_ONE_INTO_TWO
 ==ransferCells[whichCell - 1].circuitTypeRight))

257 || ((
ŒªsãrC–ls
[
whichC–l
].
cœcu™Ty³Right
 =ğ
CIRCUIT_SPLIT_HALF
è&& (
Œue
 =ğŒªsãrC–ls[whichC–È+ 1].
pow”OnRight
è&& (
CIRCUIT_ONE_INTO_TWO
 ==ransferCells[whichCell + 1].circuitTypeRight)))

259 
	`®_d¿w_fËd_»ùªgË
(
¡¬tX
, 
¡¬tY
, s¹X - 
Ëngth
, s¹Y + 
CIRCUIT_HEIGHT
, 
	`®_m­_rgba_f
(
COL_BLACK
));

260 
	`®_d¿w_fËd_»ùªgË
(
¡¬tX
, 
¡¬tY
, s¹X - 
Ëngth
, s¹Y + 
CIRCUIT_HEIGHT
, 
	`®_m­_rgba_f
(
COL_PURPLE
));

262 
	`Œª_d¿wCœcu™Efãù
(
¡¬tX
 - 
Ëngth
, 
¡¬tY
,†’gth + (
BLOCK_WIDTH
 * 2), 
CIRCUIT_HEIGHT
, 
RIGHT_SIDE
);

266 
	`®_d¿w_fËd_»ùªgË
(
¡¬tX
, 
¡¬tY
, s¹X - 
Ëngth
, s¹Y + 
CIRCUIT_HEIGHT
, 
	`®_m­_rgba_f
(
COL_BLACK
));

269 ià(
çl£
 =ğ
ŒªsãrC–ls
[
whichC–l
].
pow”OnRight
)

270 
	`®_d¿w_fËd_»ùªgË
(
¡¬tX
, 
¡¬tY
, s¹X - 
Ëngth
, s¹Y + 
CIRCUIT_HEIGHT
, 
	`®_m­_rgba_f
(
COL_BLACK
));

273 
	`®_d¿w_fËd_»ùªgË
(
¡¬tX
, 
¡¬tY
, s¹X - 
Ëngth
, s¹Y + 
CIRCUIT_HEIGHT
, 
	`®_m­_rgba_f
(
COL_BLACK
));

274 
¡¬tX
 -ğ
BLOCK_WIDTH
 * 2;

275 
Ëngth
 -ğ
BLOCK_WIDTH
 * 2;

276 
	`®_d¿w_fËd_»ùªgË
(
¡¬tX
, 
¡¬tY
, s¹X - 
Ëngth
, s¹Y + 
CIRCUIT_HEIGHT
, 
	`®_m­_rgba_f
(
COL_PURPLE
));

277 
	`Œª_d¿wCœcu™Block
(
BLOCK_LEFT
, 
whichC–l
, 
¡¬tX
, 
COL_PURPLE
);

279 
	`Œª_d¿wCœcu™Efãù
(
¡¬tX
 - 
Ëngth
, 
¡¬tY
,†’gth, 
CIRCUIT_HEIGHT
, 
RIGHT_SIDE
);

283 ià(
Œue
 =ğ
d¿wBlock
)

285 ià(
ty³
 !ğ
CIRCUIT_NORMAL
)

286 
	`Œª_d¿wCœcu™Block
(
BLOCK_RIGHT
, 
whichC–l
, 
¡¬tX
 - 
Ëngth
, 
COL_PURPLE
);

289 
	}
}

296 
	$Œª_d¿wCœcu™Block
(
blockDœeùiÚ
, 
whichC–l
, 
posX
, 
»d
, 
g»’
, 
blue
, 
®pha
)

299 
¡¬tX
, 
¡¬tY
;

301 ià(
BLOCK_RIGHT
 =ğ
blockDœeùiÚ
)

303 
¡¬tX
 = 
posX
;

304 ià(-1 =ğ
whichC–l
)

306 
¡¬tY
 = 
ŒªsãrC–ls
[0].¡¬tY + ((
squ¬eHeight
 - 
BLOCK_HEIGHT
) / 2);

307 
¡¬tY
 -ğ
squ¬eHeight
;

308 
¡¬tY
 -ğ
BLOCK_HEIGHT
 / 4;

311 
¡¬tY
 = 
ŒªsãrC–ls
[
whichC–l
].¡¬tY + ((
squ¬eHeight
 - 
BLOCK_HEIGHT
) / 2);

313 
	`®_d¿w_fËd_»ùªgË
(
¡¬tX
, 
¡¬tY
, s¹X + 
BLOCK_WIDTH
, s¹Y + 
BLOCK_HEIGHT
, 
	`®_m­_rgba_f
(
»d
, 
g»’
, 
blue
, 
®pha
));

315 
	`®_d¿w_fËd_»ùªgË
(
¡¬tX
 + 
BLOCK_WIDTH
, 
¡¬tY
 + 
BLOCK_STEP
, s¹X + (BLOCK_WIDTH * 2), s¹Y + (
BLOCK_HEIGHT
 - BLOCK_STEP), 
	`®_m­_rgba_f
(
»d
, 
g»’
, 
blue
, 
®pha
));

317 
	`®_d¿w_»ùªgË
(
¡¬tX
, 
¡¬tY
, s¹X + 
BLOCK_WIDTH
, s¹Y + 
BLOCK_HEIGHT
, 
	`®_m­_rgba_f
(
COL_BLACK
), 2.0f);

319 
	`®_d¿w_»ùªgË
(
¡¬tX
 + 
BLOCK_WIDTH
, 
¡¬tY
 + 
BLOCK_STEP
, s¹X + (BLOCK_WIDTH * 2), s¹Y + (
BLOCK_HEIGHT
 - BLOCK_STEP), 
	`®_m­_rgba_f
(
COL_BLACK
), 2.0f);

323 ià(
BLOCK_LEFT
 =ğ
blockDœeùiÚ
)

325 
¡¬tX
 = 
posX
;

326 ià(-1 =ğ
whichC–l
)

328 
¡¬tY
 = 
ŒªsãrC–ls
[0].¡¬tY + ((
squ¬eHeight
 - 
BLOCK_HEIGHT
) / 2);

329 
¡¬tY
 -ğ
squ¬eHeight
;

330 
¡¬tY
 -ğ
BLOCK_HEIGHT
 / 4;

333 
¡¬tY
 = 
ŒªsãrC–ls
[
whichC–l
].¡¬tY + ((
squ¬eHeight
 - 
BLOCK_HEIGHT
) / 2);

335 
	`®_d¿w_fËd_»ùªgË
(
¡¬tX
, 
¡¬tY
, s¹X - 
BLOCK_WIDTH
, s¹Y + 
BLOCK_HEIGHT
, 
	`®_m­_rgba_f
(
»d
, 
g»’
, 
blue
, 
®pha
));

337 
	`®_d¿w_fËd_»ùªgË
(
¡¬tX
 - 
BLOCK_WIDTH
, 
¡¬tY
 + 
BLOCK_STEP
, s¹X - (BLOCK_WIDTH * 2), s¹Y + (
BLOCK_HEIGHT
 - BLOCK_STEP), 
	`®_m­_rgba_f
(
»d
, 
g»’
, 
blue
, 
®pha
));

339 
	`®_d¿w_»ùªgË
(
¡¬tX
, 
¡¬tY
, s¹X - 
BLOCK_WIDTH
, s¹Y + 
BLOCK_HEIGHT
, 
	`®_m­_rgba_f
(
COL_BLACK
), 2.0f);

341 
	`®_d¿w_»ùªgË
(
¡¬tX
 - 
BLOCK_WIDTH
, 
¡¬tY
 + 
BLOCK_STEP
, s¹X - (BLOCK_WIDTH * 2), s¹Y + (
BLOCK_HEIGHT
 - BLOCK_STEP), 
	`®_m­_rgba_f
(
COL_BLACK
), 2.0f);

343 
	}
}

348 
	$Œª_d¿wCœcu™TwoIÁoOÃ
(
whichSide
, 
whichC–l
)

351 
¡¬tXMiddË
, 
¡¬tYMiddË
, 
Ëngth
;

353 
Ëngth
 = 
ŒªsãrC–ls
[
whichC–l
].
¡¬tX
 - (
BACKGROUND_BORDER
 + (BACKGROUND_BORDER * 2è+ 
SIDEBAR_WIDTH
);

354 
Ëngth
 +ğ(
BLOCK_WIDTH
 * 2);

355 
Ëngth
 =†ength * 0.25;

357 ià(
LEFT_SIDE
 =ğ
whichSide
)

359 
¡¬tXMiddË
 = (
ŒªsãrC–ls
[
whichC–l
].
¡¬tX
 - 
Ëngth
è- (
BLOCK_WIDTH
 * 2);

360 
¡¬tYMiddË
 = 
ŒªsãrC–ls
[
whichC–l
].
¡¬tY
 + ((
squ¬eHeight
 - 
CIRCUIT_HEIGHT
) / 2);

364 ià((
Œue
 =ğ
ŒªsãrC–ls
[
whichC–l
 - 1].
pow”OnLeá
) && (true ==ransferCells[whichCell + 1].powerOnLeft))

366 
	`®_d¿w_fËd_»ùªgË
(
¡¬tXMiddË
, 
¡¬tYMiddË
, 
ŒªsãrC–ls
[
whichC–l
].
¡¬tX
 - (
BLOCK_WIDTH
 * 2), s¹YMiddË + 
CIRCUIT_HEIGHT
, 
	`®_m­_rgba_f
(
COL_YELLOW
));

367 
	`Œª_d¿wCœcu™Efãù
(
¡¬tXMiddË
, 
¡¬tYMiddË
, 
Ëngth
, 
CIRCUIT_HEIGHT
, 
LEFT_SIDE
);

370 
	`®_d¿w_fËd_»ùªgË
(
¡¬tXMiddË
, 
¡¬tYMiddË
, 
ŒªsãrC–ls
[
whichC–l
].
¡¬tX
 - (
BLOCK_WIDTH
 * 2), s¹YMiddË + 
CIRCUIT_HEIGHT
, 
	`®_m­_rgba_f
(
COL_BLACK
));

372 
	`Œª_d¿wLÚgBlock
(
LEFT_SIDE
, 
whichC–l
, 
¡¬tXMiddË
);

375 ià(
RIGHT_SIDE
 =ğ
whichSide
)

377 
¡¬tXMiddË
 = 
ŒªsãrC–ls
[
whichC–l
].
¡¬tX
 + 
squ¬eWidth
 + (
BLOCK_WIDTH
 * 2);

378 
¡¬tYMiddË
 = 
ŒªsãrC–ls
[
whichC–l
].
¡¬tY
 + ((
squ¬eHeight
 - 
CIRCUIT_HEIGHT
) / 2);

382 ià((
Œue
 =ğ
ŒªsãrC–ls
[
whichC–l
 - 1].
pow”OnRight
) && (true ==ransferCells[whichCell + 1].powerOnRight))

384 
	`®_d¿w_fËd_»ùªgË
(
¡¬tXMiddË
, 
¡¬tYMiddË
, s¹XMiddË + 
Ëngth
, s¹YMiddË + 
CIRCUIT_HEIGHT
, 
	`®_m­_rgba_f
(
COL_PURPLE
));

385 
	`Œª_d¿wCœcu™Efãù
(
¡¬tXMiddË
, 
¡¬tYMiddË
, 
Ëngth
, 
CIRCUIT_HEIGHT
, 
RIGHT_SIDE
);

388 
	`®_d¿w_fËd_»ùªgË
(
¡¬tXMiddË
, 
¡¬tYMiddË
, s¹XMiddË + 
Ëngth
, s¹YMiddË + 
CIRCUIT_HEIGHT
, 
	`®_m­_rgba_f
(
COL_BLACK
));

390 
	`Œª_d¿wLÚgBlock
(
RIGHT_SIDE
, 
whichC–l
, 
¡¬tXMiddË
 + 
Ëngth
);

392 
	}
}

397 
	$Œª_d¿wCœcu™OÃIÁoTwo
(
whichSide
, 
whichC–l
)

401 
Ëngth
;

403 
Ëngth
 = 
ŒªsãrC–ls
[
whichC–l
].
¡¬tX
 - (
BACKGROUND_BORDER
 + (BACKGROUND_BORDER * 2è+ 
SIDEBAR_WIDTH
);

404 
Ëngth
 +ğ(
BLOCK_WIDTH
 * 2);

405 
Ëngth
 =†ength * 0.25;

407 ià(
LEFT_SIDE
 =ğ
whichSide
)

409 
	`Œª_d¿wCœcu™NÜm®
(
whichSide
, 
whichC–l
, 
CIRCUIT_ONE_INTO_TWO_SHORT
, 
çl£
);

412 ià(
RIGHT_SIDE
 =ğ
whichSide
)

414 
	`Œª_d¿wCœcu™NÜm®
(
whichSide
, 
whichC–l
, 
CIRCUIT_ONE_INTO_TWO_SHORT
, 
çl£
);

416 
	}
}

422 
	$Œª_d¿wEfãù
(
whichSide
, 
whichC–l
, 
ty³
)

425 
posX
, 
¡¬tX
, 
¡¬tY
;

427 ià(
ty³
 =ğ
CIRCUIT_REPEATER
)

429 ià(
LEFT_SIDE
 =ğ
whichSide
)

431 
¡¬tX
 = 
BACKGROUND_BORDER
 + (BACKGROUND_BORDER * 2è+ 
SIDEBAR_WIDTH
;

432 
posX
 = (
ŒªsãrC–ls
[
whichC–l
].
¡¬tX
 - s¹Xè- (
BLOCK_WIDTH
 * 2);

433 
posX
 =…osX * 0.75;

434 
	`Œª_d¿wCœcu™Block
(
BLOCK_RIGHT
, 
whichC–l
, 
posX
, 
COL_YELLOW
);

435 ià(
Œue
 =ğ
ŒªsãrC–ls
[
whichC–l
].
»³©”LeáAùiv©ed
)

437 
¡¬tY
 = 
ŒªsãrC–ls
[
whichC–l
].¡¬tY + ((
squ¬eHeight
 - 
CIRCUIT_HEIGHT
) / 2);

438 
	`®_d¿w_fËd_»ùªgË
(
posX
 + (
BLOCK_WIDTH
 * 2), 
¡¬tY
, (posX + (
ŒªsãrC–ls
[
whichC–l
].
¡¬tX
 -…osXè- BLOCK_WIDTH * 2), s¹Y + 
CIRCUIT_HEIGHT
, 
	`®_m­_rgba_f
(
COL_YELLOW
));

439 
	`Œª_d¿wCœcu™Efãù
(
posX
, 
¡¬tY
, ((
ŒªsãrC–ls
[
whichC–l
].
¡¬tX
 -…osXè- 
BLOCK_WIDTH
 * 2), 
CIRCUIT_HEIGHT
, 
LEFT_SIDE
);

442 ià(
RIGHT_SIDE
 =ğ
whichSide
)

444 
¡¬tX
 = (
backGroundWidth
 - (
BACKGROUND_BORDER
 * 2)è- 
SIDEBAR_WIDTH
;

445 
posX
 = (
¡¬tX
 - (
ŒªsãrC–ls
[
whichC–l
].¡¬tX + 
squ¬eWidth
)è- 
SIDEBAR_WIDTH
;

446 
posX
 =…osX * 0.75;

447 
	`Œª_d¿wCœcu™Block
(
BLOCK_LEFT
, 
whichC–l
, 
¡¬tX
 - 
posX
, 
COL_PURPLE
);

448 ià(
Œue
 =ğ
ŒªsãrC–ls
[
whichC–l
].
»³©”RightAùiv©ed
)

450 
¡¬tY
 = 
ŒªsãrC–ls
[
whichC–l
].¡¬tY + ((
squ¬eHeight
 - 
CIRCUIT_HEIGHT
) / 2);

451 
	`®_d¿w_fËd_»ùªgË
(
posX
 - (
BLOCK_WIDTH
 * 2), 
¡¬tY
, 
ŒªsãrC–ls
[
whichC–l
].
¡¬tX
 + 
squ¬eWidth
, s¹Y + 
CIRCUIT_HEIGHT
, 
	`®_m­_rgba_f
(
COL_PURPLE
));

452 
	`Œª_d¿wCœcu™Efãù
(
posX
, 
¡¬tY
, 
ŒªsãrC–ls
[
whichC–l
].
¡¬tX
 + 
squ¬eWidth
, 
CIRCUIT_HEIGHT
, 
RIGHT_SIDE
);

457 ià(
ty³
 =ğ
CIRCUIT_REVERSED
)

459 ià(
LEFT_SIDE
 =ğ
whichSide
)

461 
¡¬tX
 = 
BACKGROUND_BORDER
 + (BACKGROUND_BORDER * 2è+ 
SIDEBAR_WIDTH
;

462 
posX
 = (
ŒªsãrC–ls
[
whichC–l
].
¡¬tX
 - s¹Xè- (
BLOCK_WIDTH
 * 2);

463 
posX
 =…osX * 0.75;

464 
	`Œª_d¿wCœcu™Block
(
BLOCK_RIGHT
, 
whichC–l
, 
posX
, 
COL_PURPLE
);

466 ià(
Œue
 =ğ
ŒªsãrC–ls
[
whichC–l
].
»v”£dLeáAùiv©ed
)

468 
¡¬tY
 = 
ŒªsãrC–ls
[
whichC–l
].¡¬tY + ((
squ¬eHeight
 - 
CIRCUIT_HEIGHT
) / 2);

469 
	`®_d¿w_fËd_»ùªgË
(
posX
 + (
BLOCK_WIDTH
 * 2), 
¡¬tY
, (posX + (
ŒªsãrC–ls
[
whichC–l
].
¡¬tX
 -…osXè- BLOCK_WIDTH * 2), s¹Y + 
CIRCUIT_HEIGHT
, 
	`®_m­_rgba_f
(
COL_PURPLE
));

470 
	`Œª_d¿wCœcu™Efãù
(
posX
, 
¡¬tY
, ((
ŒªsãrC–ls
[
whichC–l
].
¡¬tX
 -…osXè- 
BLOCK_WIDTH
 * 2), 
CIRCUIT_HEIGHT
, 
LEFT_SIDE
);

473 ià(
RIGHT_SIDE
 =ğ
whichSide
)

475 
¡¬tX
 = (
backGroundWidth
 - (
BACKGROUND_BORDER
 * 2)è- 
SIDEBAR_WIDTH
;

476 
posX
 = (
¡¬tX
 - (
ŒªsãrC–ls
[
whichC–l
].¡¬tX + 
squ¬eWidth
)è- 
SIDEBAR_WIDTH
;

477 
posX
 =…osX * 0.75;

478 
	`Œª_d¿wCœcu™Block
(
BLOCK_LEFT
, 
whichC–l
, 
¡¬tX
 - 
posX
, 
COL_YELLOW
);

480 ià(
Œue
 =ğ
ŒªsãrC–ls
[
whichC–l
].
»v”£dRightAùiv©ed
)

482 
¡¬tY
 = 
ŒªsãrC–ls
[
whichC–l
].¡¬tY + ((
squ¬eHeight
 - 
CIRCUIT_HEIGHT
) / 2);

483 
	`®_d¿w_fËd_»ùªgË
(
ŒªsãrC–ls
[
whichC–l
].
¡¬tX
 + 
squ¬eWidth
 + (
BLOCK_WIDTH
 * 2), 
¡¬tY
, (¡¬tX - 
posX
è- (BLOCK_WIDTH * 2), s¹Y + 
CIRCUIT_HEIGHT
, 
	`®_m­_rgba_f
(
COL_YELLOW
));

484 
	`Œª_d¿wCœcu™Efãù
(
ŒªsãrC–ls
[
whichC–l
].
¡¬tX
 + 
squ¬eWidth
 + (
BLOCK_WIDTH
 * 2), 
¡¬tY
, (¡¬tX - 
posX
è- (BLOCK_WIDTH * 2), 
CIRCUIT_HEIGHT
, 
RIGHT_SIDE
);

488 
	}
}

493 
	$Œª_d¿wTok’Launch”s
()

496 
ËáS¹X
, 
¡¬tY
, 
rightS¹X
;

498 
Ëngth
;

500 
ËáS¹X
 = 
BACKGROUND_BORDER
 + (BACKGROUND_BORDER * 2è+ 
SIDEBAR_WIDTH
;

501 
¡¬tY
 = 
ŒªsãrC–ls
[0].¡¬tY - (
squ¬eHeight
 - 
CIRCUIT_HEIGHT
);

502 
Ëngth
 = (
ŒªsãrC–ls
[1].
¡¬tX
 - 
ËáS¹X
è- (
BLOCK_WIDTH
 * 2);

504 
Ëngth
 =†ength * 0.10f;

506 
rightS¹X
 = (
backGroundWidth
 - (
BACKGROUND_BORDER
 * 2)è- 
SIDEBAR_WIDTH
;

510 
	`®_d¿w_fËd_»ùªgË
(
ËáS¹X
, 
¡¬tY
,†eáS¹X + 
Ëngth
, s¹Y + 
CIRCUIT_HEIGHT
, 
	`®_m­_rgba_f
(
COL_BLACK
));

511 
	`®_d¿w_fËd_»ùªgË
(
rightS¹X
, 
¡¬tY
,„ightS¹X - 
Ëngth
, s¹Y + 
CIRCUIT_HEIGHT
, 
	`®_m­_rgba_f
(
COL_BLACK
));

513 ià(
LEFT_SIDE
 =ğ
¶ay”OnSide
)

515 ià(
¶ay”BlockPos
 !ğ
TOKEN_POS_HIDE
)

516 ià(
¶ay”BlockPos
 =ğ
TOKEN_POS_LAUNCH
)

517 
	`Œª_d¿wCœcu™Block
(
BLOCK_RIGHT
, 
TOKEN_POS_LAUNCH
, 
ËáS¹X
 + 
Ëngth
, 
COL_YELLOW
);

519 ià(
droidBlockPos
 !ğ
TOKEN_POS_HIDE
)

520 ià(
droidBlockPos
 =ğ
TOKEN_POS_LAUNCH
)

521 
	`Œª_d¿wCœcu™Block
(
BLOCK_LEFT
, 
TOKEN_POS_LAUNCH
, 
rightS¹X
 - (
Ëngth
 - 1), 
COL_PURPLE
);

525 ià(
¶ay”BlockPos
 !ğ
TOKEN_POS_HIDE
)

526 ià(
¶ay”BlockPos
 =ğ
TOKEN_POS_LAUNCH
)

527 
	`Œª_d¿wCœcu™Block
(
BLOCK_LEFT
, 
TOKEN_POS_LAUNCH
, 
rightS¹X
 - (
Ëngth
 - 1), 
COL_PURPLE
);

529 ià(
droidBlockPos
 !ğ
TOKEN_POS_HIDE
)

530 ià(
droidBlockPos
 =ğ
TOKEN_POS_LAUNCH
)

531 
	`Œª_d¿wCœcu™Block
(
BLOCK_RIGHT
, 
TOKEN_POS_LAUNCH
, 
ËáS¹X
 + 
Ëngth
, 
COL_YELLOW
);

534 
	}
}

540 
	$Œª_d¿wTok’s
()

543 
ËáS¹X
, 
ËáS¹Y
;

544 
rightS¹X
, 
rightS¹Y
;

546 
¥aûB‘w“nTok’s
 = 15;

548 
ËáTok’CouÁ
;

549 
rightTok’CouÁ
;

551 
ËáS¹X
 = (
backGroundS¹X
 + (
BACKGROUND_BORDER
 * 2)è- 
¥aûB‘w“nTok’s
;

552 
ËáS¹Y
 = 
ŒªsãrC–ls
[0].
¡¬tY
 - (2 * 
squ¬eHeight
);

554 
rightS¹X
 = 
backGroundWidth
 - (
BACKGROUND_BORDER
 * 2è+ 
¥aûB‘w“nTok’s
;

555 
rightS¹Y
 = 
ŒªsãrC–ls
[0].
¡¬tY
 - (2 * 
squ¬eHeight
);

557 ià(
LEFT_SIDE
 =ğ
¶ay”OnSide
)

560 
ËáTok’CouÁ
 = 
numPÏy”Tok’s
;

561 
rightTok’CouÁ
 = 
numDroidTok’s
;

563 ià(
numDroidTok’s
 > -1)

564 
	`Œª_d¿wCœcu™Block
(
BLOCK_LEFT
, 
droidBlockPos
, (
backGroundWidth
 - (
BACKGROUND_BORDER
 * 2)è- 
SIDEBAR_WIDTH
, 
COL_PURPLE
);

566 ià((
¶ay”BlockPos
 > 
TOKEN_POS_LAUNCH
è&& (
numPÏy”Tok’s
 > -1))

567 
	`Œª_d¿wCœcu™Block
(
BLOCK_RIGHT
, 
¶ay”BlockPos
, 
BACKGROUND_BORDER
 + (BACKGROUND_BORDER * 2è+ 
SIDEBAR_WIDTH
, 
COL_YELLOW
);

572 
ËáTok’CouÁ
 = 
numDroidTok’s
;

573 
rightTok’CouÁ
 = 
numPÏy”Tok’s
;

575 ià(
numDroidTok’s
 > -1)

576 
	`Œª_d¿wCœcu™Block
(
BLOCK_RIGHT
, 
droidBlockPos
, 
BACKGROUND_BORDER
 + (BACKGROUND_BORDER * 2è+ 
SIDEBAR_WIDTH
, 
COL_YELLOW
);

578 ià((
¶ay”BlockPos
 > 
TOKEN_POS_LAUNCH
è&& (
numPÏy”Tok’s
 > -1))

579 
	`Œª_d¿wCœcu™Block
(
BLOCK_LEFT
, 
¶ay”BlockPos
, (
backGroundWidth
 - (
BACKGROUND_BORDER
 * 2)è- 
SIDEBAR_WIDTH
, 
COL_PURPLE
);

582 ià(
ËáTok’CouÁ
 > 0)

584 
i
 = 0; i !ğ
ËáTok’CouÁ
; i++)

586 
	`Œª_d¿wCœcu™Block
(
BLOCK_RIGHT
, 
i
, 
ËáS¹X
, 
COL_YELLOW
);

590 ià(
rightTok’CouÁ
 > 0)

592 
i
 = 0; i !ğ
rightTok’CouÁ
; i++)

594 
	`Œª_d¿wCœcu™Block
(
BLOCK_LEFT
, 
i
, 
rightS¹X
, 
COL_PURPLE
);

597 
	}
}

602 
	$Œª_d¿wT¿nsãrC–ls
(
boŞ
 
ju¡Background
)

605 
i
;

606 
ALLEGRO_COLOR
 
backGroundCŞÜ
;

608 
backGroundS¹X
 = 
BACKGROUND_BORDER
;

609 
backGroundWidth
 = 
wšWidth
 - (
BACKGROUND_BORDER
 * 2);

610 
backGroundS¹Y
 = 
	`®_g‘_b™m­_height
(
image
[
hud
].image) + 30;

611 
backGroundHeight
 = 
wšHeight
 - 
BACKGROUND_START_OFFSET
;

615 
cu¼’tMode
)

617 
MODE_TRANSFER_INTRO
:

618 
MODE_TRANSFER_INTRO_1
:

619 
MODE_TRANSFER_INTRO_2
:

620 
backGroundCŞÜ
 = 
	`®_m­_rgba_f
(
COL_BLACK
);

623 
MODE_TRANSFER_START
:

624 
MODE_TRANSFER_SELECT_SIDE
:

625 
MODE_TRANSFER_SELECT
:

626 
MODE_TRANSFER_COPY
:

627 
MODE_TRANSFER_FINISH
:

628 
backGroundCŞÜ
 = 
	`®_m­_rgba_f
(0.53f, 0.25f, 0.211f, 0.0f);

632 
	`®_d¿w_fËd_»ùªgË
(
backGroundS¹X
, 
backGroundS¹Y
, 
backGroundWidth
, 
backGroundHeight
, 
backGroundCŞÜ
);

634 ià(
Œue
 =ğ
ju¡Background
)

638 
i
 = 0; i !ğ
NUMBER_CELLS
; i++)

640 
	`®_d¿w_fËd_»ùªgË
(
ŒªsãrC–ls
[
i
].
¡¬tX
,¿nsãrC–ls[i].
¡¬tY
,

641 
ŒªsãrC–ls
[
i
].
¡¬tX
 + 
squ¬eWidth
,¿nsãrC–ls[i].
¡¬tY
 + 
squ¬eHeight
,¿nsãrC–ls[i].
cŞÜ
);

646 
i
 = 0; i !ğ
NUMBER_CELLS
; i++)

648 
	`Œª_d¿wCœcu™Block
(
BLOCK_LEFT
, 
i
, 
ŒªsãrC–ls
[i].
¡¬tX
, 
COL_YELLOW
);

649 
	`Œª_d¿wCœcu™Block
(
BLOCK_RIGHT
, 
i
, 
ŒªsãrC–ls
[i].
¡¬tX
 + 
squ¬eWidth
, 
COL_PURPLE
);

655 
i
 = 0; i !ğ
NUMBER_CELLS
; i++)

657 
	`®_d¿w_»ùªgË
(
ŒªsãrC–ls
[
i
].
¡¬tX
,¿nsãrC–ls[i].
¡¬tY
,

658 
ŒªsãrC–ls
[
i
].
¡¬tX
 + 
squ¬eWidth
,¿nsãrC–ls[i].
¡¬tY
 + 
squ¬eHeight
,

659 
	`®_m­_rgba_f
(
COL_BLACK
), 2.0f);

664 
	`®_d¿w_»ùªgË
(
ŒªsãrC–ls
[0].
¡¬tX
,¿nsãrC–ls[0].
¡¬tY
 - (2 * 
squ¬eHeight
),

665 
ŒªsãrC–ls
[0].
¡¬tX
 + 
squ¬eWidth
,¿nsãrC–ls[0].
¡¬tY
,

666 
	`®_m­_rgba_f
(
COL_BLACK
), 2.0f);

672 
	`®_d¿w_fËd_»ùªgË
(
ŒªsãrC–ls
[0].
¡¬tX
,¿nsãrC–ls[0].
¡¬tY
 - (2 * 
squ¬eHeight
),

673 
ŒªsãrC–ls
[0].
¡¬tX
 + 
squ¬eWidth
,¿nsãrC–ls[0].
¡¬tY
,

674 
cu¼’tWšÃr
);

678 
	`®_d¿w_fËd_»ùªgË
(
backGroundS¹X
 + (
BACKGROUND_BORDER
 * 2), 
ŒªsãrC–ls
[0].
¡¬tY
 - (2 * 
squ¬eHeight
),

679 
backGroundS¹X
 + (
BACKGROUND_BORDER
 * 2è+ 
SIDEBAR_WIDTH
, (
ŒªsãrC–ls
[0].
¡¬tY
 + 
squ¬eHeight
 * (
NUMBER_CELLS
 + 2)) - (2 * squareHeight),

680 
	`®_m­_rgba_f
(
COL_YELLOW
));

684 
	`®_d¿w_»ùªgË
(
backGroundS¹X
 + (
BACKGROUND_BORDER
 * 2), 
ŒªsãrC–ls
[0].
¡¬tY
 - (2 * 
squ¬eHeight
),

685 
backGroundS¹X
 + (
BACKGROUND_BORDER
 * 2è+ 
SIDEBAR_WIDTH
, (
ŒªsãrC–ls
[0].
¡¬tY
 + 
squ¬eHeight
 * (
NUMBER_CELLS
 + 2)) - (2 * squareHeight),

686 
	`®_m­_rgba_f
(
COL_BLACK
), 2.0f);

690 
	`®_d¿w_fËd_»ùªgË
(
backGroundWidth
 - (
BACKGROUND_BORDER
 * 2), 
ŒªsãrC–ls
[0].
¡¬tY
 - (2 * 
squ¬eHeight
),

691 
backGroundWidth
 - (
BACKGROUND_BORDER
 * 2è- 
SIDEBAR_WIDTH
, (
ŒªsãrC–ls
[0].
¡¬tY
 + 
squ¬eHeight
 * (
NUMBER_CELLS
 + 2)) - (2 * squareHeight),

692 
	`®_m­_rgba_f
(
COL_PURPLE
));

695 
	`®_d¿w_»ùªgË
(
backGroundWidth
 - (
BACKGROUND_BORDER
 * 2), 
ŒªsãrC–ls
[0].
¡¬tY
 - (2 * 
squ¬eHeight
),

696 
backGroundWidth
 - (
BACKGROUND_BORDER
 * 2è- 
SIDEBAR_WIDTH
, (
ŒªsãrC–ls
[0].
¡¬tY
 + 
squ¬eHeight
 * (
NUMBER_CELLS
 + 2)) - (2 * squareHeight),

697 
	`®_m­_rgba_f
(
COL_BLACK
), 2.0f);

702 
i
 = 0; i !ğ
NUMBER_CELLS
; i++)

704 
ŒªsãrC–ls
[
i
].
cœcu™Ty³Leá
)

706 
CIRCUIT_NORMAL
:

707 
CIRCUIT_NORMAL_1
:

708 
CIRCUIT_NORMAL_2
:

709 
	`Œª_d¿wCœcu™NÜm®
(
LEFT_SIDE
, 
i
, 
CIRCUIT_NORMAL
, 
Œue
);

711 
CIRCUIT_THREEQUARTERS
:

712 
	`Œª_d¿wCœcu™NÜm®
(
LEFT_SIDE
, 
i
, 
CIRCUIT_THREEQUARTERS
, 
Œue
);

714 
CIRCUIT_HALF
:

715 
	`Œª_d¿wCœcu™NÜm®
(
LEFT_SIDE
, 
i
, 
CIRCUIT_HALF
, 
Œue
);

717 
CIRCUIT_QUARTER
:

718 
	`Œª_d¿wCœcu™NÜm®
(
LEFT_SIDE
, 
i
, 
CIRCUIT_QUARTER
, 
Œue
);

720 
CIRCUIT_SPLIT_HALF
:

721 
	`Œª_d¿wCœcu™NÜm®
(
LEFT_SIDE
, 
i
, 
CIRCUIT_ONE_INTO_TWO
, 
çl£
);

723 
CIRCUIT_SPLIT_TWO_INTO_ONE
:

724 
	`Œª_d¿wCœcu™NÜm®
(
LEFT_SIDE
, 
i
, 
CIRCUIT_THREEQUARTERS
, 
çl£
);

726 
CIRCUIT_TWO_INTO_ONE
:

727 
	`Œª_d¿wCœcu™TwoIÁoOÃ
(
LEFT_SIDE
, 
i
);

729 
CIRCUIT_ONE_INTO_TWO
:

730 
	`Œª_d¿wCœcu™OÃIÁoTwo
(
LEFT_SIDE
, 
i
);

734 ià(
Œue
 =ğ
ŒªsãrC–ls
[
i
].
isR•—‹rLeá
)

735 
	`Œª_d¿wEfãù
(
LEFT_SIDE
, 
i
, 
CIRCUIT_REPEATER
);

737 ià(
Œue
 =ğ
ŒªsãrC–ls
[
i
].
isRev”£dLeá
)

738 
	`Œª_d¿wEfãù
(
LEFT_SIDE
, 
i
, 
CIRCUIT_REVERSED
);

740 
ŒªsãrC–ls
[
i
].
cœcu™Ty³Right
)

742 
CIRCUIT_NORMAL
:

743 
CIRCUIT_NORMAL_1
:

744 
CIRCUIT_NORMAL_2
:

745 
	`Œª_d¿wCœcu™NÜm®
(
RIGHT_SIDE
, 
i
, 
CIRCUIT_NORMAL
, 
Œue
);

747 
CIRCUIT_THREEQUARTERS
:

748 
	`Œª_d¿wCœcu™NÜm®
(
RIGHT_SIDE
, 
i
, 
CIRCUIT_THREEQUARTERS
, 
Œue
);

750 
CIRCUIT_HALF
:

751 
	`Œª_d¿wCœcu™NÜm®
(
RIGHT_SIDE
, 
i
, 
CIRCUIT_HALF
, 
Œue
);

753 
CIRCUIT_QUARTER
:

754 
	`Œª_d¿wCœcu™NÜm®
(
RIGHT_SIDE
, 
i
, 
CIRCUIT_QUARTER
, 
Œue
);

756 
CIRCUIT_SPLIT_HALF
:

757 
	`Œª_d¿wCœcu™NÜm®
(
RIGHT_SIDE
, 
i
, 
CIRCUIT_ONE_INTO_TWO
, 
çl£
);

759 
CIRCUIT_SPLIT_TWO_INTO_ONE
:

760 
	`Œª_d¿wCœcu™NÜm®
(
RIGHT_SIDE
, 
i
, 
CIRCUIT_THREEQUARTERS
, 
çl£
);

762 
CIRCUIT_TWO_INTO_ONE
:

763 
	`Œª_d¿wCœcu™TwoIÁoOÃ
(
RIGHT_SIDE
, 
i
);

765 
CIRCUIT_ONE_INTO_TWO
:

766 
	`Œª_d¿wCœcu™OÃIÁoTwo
(
RIGHT_SIDE
, 
i
);

770 ià(
Œue
 =ğ
ŒªsãrC–ls
[
i
].
isR•—‹rRight
)

771 
	`Œª_d¿wEfãù
(
RIGHT_SIDE
, 
i
, 
CIRCUIT_REPEATER
);

773 ià(
Œue
 =ğ
ŒªsãrC–ls
[
i
].
isRev”£dRight
)

774 
	`Œª_d¿wEfãù
(
RIGHT_SIDE
, 
i
, 
CIRCUIT_REVERSED
);

777 
	`Œª_d¿wTok’Launch”s
();

779 
	`Œª_d¿wTok’s
();

781 
ıVeù
 
d¿wPos
;

783 ià(
LEFT_SIDE
 =ğ
¶ay”OnSide
)

785 
d¿wPos
.
x
 = (
ŒªsãrC–ls
[0].
¡¬tX
 - 
backGroundS¹X
 + (
BACKGROUND_BORDER
 * 2è+ 
SIDEBAR_WIDTH
) / 2;

786 
d¿wPos
.
y
 = 
backGroundS¹Y
 + 20;

788 ià(
¥r™e_001
 =ğ
¶ay”DroidTy³Image
)

789 
	`gam_d¿wS´™e
(0, 
¶ay”DroidTy³Image
, 
d¿wPos
, -1, 
	`®_m­_rgba_f
(1.0f, 1.0f, 1.0f, 1.0f));

791 
	`gam_d¿wS´™e
(0, 
¶ay”DroidTy³Image
, 
d¿wPos
, -1, 
	`®_m­_rgba_f
(1.0f, 1.0f, 1.0f, 0.0f));

794 
d¿wPos
.
x
 = ((
backGroundWidth
 - (
BACKGROUND_BORDER
 * 2è- (
ŒªsãrC–ls
[0].
¡¬tX
 + 
squ¬eWidth
)) / 2) +ransferCells[0].startX;

795 
d¿wPos
.
y
 = 
backGroundS¹Y
 + 20;

796 
	`gam_d¿wS´™e
(0, 
droidTy³ToT¿nsãrIÁo
 + 2, 
d¿wPos
, -1, 
	`®_m­_rgba_f
(0.0f, 0.0f, 0.0f,1.0f));

802 
d¿wPos
.
x
 = ((
backGroundWidth
 - (
BACKGROUND_BORDER
 * 2è- (
ŒªsãrC–ls
[0].
¡¬tX
 + 
squ¬eWidth
)) / 2) +ransferCells[0].startX;

803 
d¿wPos
.
y
 = 
backGroundS¹Y
 + 20;

805 ià(
¥r™e_001
 =ğ
¶ay”DroidTy³Image
)

806 
	`gam_d¿wS´™e
(0, 
¶ay”DroidTy³Image
, 
d¿wPos
, -1, 
	`®_m­_rgba_f
(1.0f, 1.0f, 1.0f, 1.0f));

808 
	`gam_d¿wS´™e
(0, 
¶ay”DroidTy³Image
, 
d¿wPos
, -1, 
	`®_m­_rgba_f
(1.0f, 1.0f, 1.0f, 0.0f));

811 
d¿wPos
.
x
 = (
ŒªsãrC–ls
[0].
¡¬tX
 - 
backGroundS¹X
 + (
BACKGROUND_BORDER
 * 2è+ 
SIDEBAR_WIDTH
) / 2;

812 
d¿wPos
.
y
 = 
backGroundS¹Y
 + 20;

813 
	`gam_d¿wS´™e
(0, 
droidTy³ToT¿nsãrIÁo
 + 2, 
d¿wPos
, -1, 
	`®_m­_rgba_f
(0.0f, 0.0f, 0.0f,1.0f));

815 
	}
}

	@../src/game/sys_starfield.cpp

1 
	~"../../hdr/sys_glob®s.h
"

3 
ALLEGRO_VERTEX
 *
	g¡¬s
 = 
NULL
;

4 
	gnumSrs
;

5 
boŞ
 
	gu£Srf›ld
;

7 
	#¿ndomX
 ((
	`¿nd
(è% 
wšWidth
))

	)

8 
	#¿ndomY
 ((
	`¿nd
(è% 
wšHeight
))

	)

9 
	#¿ndomS³ed
 (((
	`¿nd
(è% 5è+ 1è* 10)

	)

14 
	$gam_ä“SrF›ld
()

17 ià(
NULL
 !ğ
¡¬s
)

18 
	`ä“
(
¡¬s
);

19 
	}
}

26 
boŞ
 
	$gam_£tupSrF›ld
()

29 
pickS³ed
;

31 ià(
NULL
 !ğ
¡¬s
)

32 
	`ä“
(
¡¬s
);

36 
¡¬s
 = (
ALLEGRO_VERTEX
 *è
	`m®loc
 (
numSrs
 * (ALLEGRO_VERTEX));

37 ià(
NULL
 =ğ
¡¬s
)

39 
u£Srf›ld
 = 
çl£
;

40 
	`io_logToFe
("Error: Couldn't get memory for starfield. Disabled.");

41  
çl£
;

43 
i
 = 0; i !ğ
numSrs
; i++)

45 
¡¬s
[
i
].
x
 = 
¿ndomX
;

46 
¡¬s
[
i
].
y
 = 
¿ndomY
;

47 
¡¬s
[
i
].
z
 = 0;

49 
pickS³ed
 = 
¿ndomS³ed
;

50 ià(
pickS³ed
 < 60)

52 
¡¬s
[
i
].
cŞÜ
.
r
 = 1.0f; srs[i].cŞÜ.
g
 = 1.0f; srs[i].cŞÜ.
b
 = 1.0f;

53 
¡¬s
[
i
].
u
 = 100.0f;

56 ià(
pickS³ed
 < 50)

58 
¡¬s
[
i
].
cŞÜ
.
r
 = 0.8f; srs[i].cŞÜ.
g
 = 0.8f; srs[i].cŞÜ.
b
 = 0.8f;

59 
¡¬s
[
i
].
u
 = 80.0f;

62 ià(
pickS³ed
 < 40)

64 
¡¬s
[
i
].
cŞÜ
.
r
 = 0.6f; srs[i].cŞÜ.
g
 = 0.6f; srs[i].cŞÜ.
b
 = 0.6f;

65 
¡¬s
[
i
].
u
 = 65.0f;

68 ià(
pickS³ed
 < 30)

70 
¡¬s
[
i
].
cŞÜ
.
r
 = 0.5f; srs[i].cŞÜ.
g
 = 0.5f; srs[i].cŞÜ.
b
 = 0.5f;

71 
¡¬s
[
i
].
u
 = 50.0f;

74 ià(
pickS³ed
 < 20)

76 
¡¬s
[
i
].
cŞÜ
.
r
 = 0.4f; srs[i].cŞÜ.
g
 = 0.4f; srs[i].cŞÜ.
b
 = 0.4f;

77 
¡¬s
[
i
].
u
 = 30.0f;

80 ià(
pickS³ed
 < 10)

82 
¡¬s
[
i
].
cŞÜ
.
r
 = 0.3f; srs[i].cŞÜ.
g
 = 0.3f; srs[i].cŞÜ.
b
 = 0.3f;

83 
¡¬s
[
i
].
u
 = 10.0f;

86  
Œue
;

87 
	}
}

92 
	$gam_ªim©eSrF›ld
(
š‹½Ş©e
)

95 
i
 = 0; i !ğ
numSrs
; i++)

97 
¡¬s
[
i
].
x
 -ğ¡¬s[i].
u
 * 
š‹½Ş©e
;

98 ià(
¡¬s
[
i
].
x
 < 0)

100 
¡¬s
[
i
].
x
 = 
wšWidth
;

101 
¡¬s
[
i
].
y
 = 
¿ndomY
;

104 
	}
}

	@../src/gui/gui_main.cpp

1 
	~"../../hdr/sys_glob®s.h
"

3 
	gcu¼’tGUISü“n
;

4 
	gcu¼’tObjeùS–eùed
;

5 
	gbu‰ÚCurveX
;

6 
	gbu‰ÚCurveY
;

8 
boŞ
 
	gguiR—dy
;

10 
	gveùÜ
<
	g_sü“nObjeù
> 
	gguiSü“ns
;

11 
	gveùÜ
<
	g_guiObjeù
> 
	gguiBu‰Ús
;

12 
	gveùÜ
<
	g_guiCheckBox
> 
	gguiCheckBoxes
;

13 
	gveùÜ
<
	g_guiObjeù
> 
	gguiTextLab–s
;

18 
boŞ
 
	$gui_š™GUI
()

23 ià(
çl£
 =ğ
	`sys_execu‹SütFunùiÚ
("scr_guiSetupGUI", ""))

25 
	`cÚ_´št
(
Œue
,rue, "Error: gui_setupGUI: Failedoƒxecute scripto start GUI");

26 
guiR—dy
 = 
çl£
;

27  
çl£
;

30 
guiSü“ns
[0].
£ËùedObjeù
 = 0;

31 
cu¼’tGUISü“n
 = 0;

32 
guiR—dy
 = 
Œue
;

36  
Œue
;

37 
	}
}

42 
	$gui_hªdËFocusMove
(
moveDœeùiÚ
, 
boŞ
 
keAùiÚ
)

47 ià(
Œue
 =ğ
keAùiÚ
)

49 
cu¼’tObjeùS–eùed
 = 
guiSü“ns
[
cu¼’tGUISü“n
].
objeùIDIndex
[guiSü“ns[cu¼’tGUISü“n].
£ËùedObjeù
];

51 
guiSü“ns
[
cu¼’tGUISü“n
].
objeùTy³
[guiSü“ns[cu¼’tGUISü“n].
£ËùedObjeù
])

53 
GUI_OBJECT_BUTTON
:

54 
	`sys_execu‹SütFunùiÚ
(
guiBu‰Ús
[
cu¼’tObjeùS–eùed
].
aùiÚ
.
	`c_¡r
(), guiBu‰Ús[cu¼’tObjeùS–eùed].
objeùID
.c_str());

55 
guiSü“ns
[
cu¼’tGUISü“n
].
£ËùedObjeù
 = 0;

56 
cu¼’tObjeùS–eùed
 = 0;

59 
GUI_OBJECT_CHECKBOX
:

63 
guiSü“ns
[
cu¼’tGUISü“n
].
£ËùedObjeù
 = 0;

64 
cu¼’tObjeùS–eùed
 = 0;

70 ià(
GUI_OBJECT_TEXT_LABEL
 =ğ
guiSü“ns
[
cu¼’tGUISü“n
].
objeùTy³
[guiSü“ns[cu¼’tGUISü“n].
£ËùedObjeù
])

71 
guiSü“ns
[
cu¼’tGUISü“n
].
£ËùedObjeù
++;

73 
moveDœeùiÚ
)

75 
FOCUS_NEXT
:

76 ià(
guiSü“ns
[
cu¼’tGUISü“n
].
£ËùedObjeù
 !ğguiSü“ns[cu¼’tGUISü“n].
objeùIDIndex
.
	`size
() - 1)

78 
guiSü“ns
[
cu¼’tGUISü“n
].
£ËùedObjeù
++;

83 
cu¼’tObjeùS–eùed
 = 
guiSü“ns
[
cu¼’tGUISü“n
].
£ËùedObjeù
;

87 
FOCUS_PREVIOUS
:

88 ià(
guiSü“ns
[
cu¼’tGUISü“n
].
£ËùedObjeù
 > 0)

90 
guiSü“ns
[
cu¼’tGUISü“n
].
£ËùedObjeù
--;

94 ià(
guiSü“ns
[
cu¼’tGUISü“n
].
£ËùedObjeù
 < 0)

95 
guiSü“ns
[
cu¼’tGUISü“n
].
£ËùedObjeù
 = 0;

97 
cu¼’tObjeùS–eùed
 = 
guiSü“ns
[
cu¼’tGUISü“n
].
£ËùedObjeù
;

101 
	}
}

	@../src/gui/gui_objects.cpp

1 
	~"../../hdr/sys_glob®s.h
"

3 
	#DEBUG_GUI_SETUP
 1

	)

5 
_guiObjeù
 
	gtmp_guiBu‰Ú
;

6 
_guiCheckBox
 
	gtmp_checkBox
;

7 
_guiObjeù
 
	gtmp_‹xtLab–
;

8 
_sü“nObjeù
 
	gtmp_sü“n
;

15 
	$gui_fšdIndex
(
guiObjeùTy³
, 
¡ršg
 
objeùID
)

18 
šdexCouÁ
 = 0;

20 
šdexCouÁ
 = 0;

22 
guiObjeùTy³
)

24 
GUI_OBJECT_SCREEN
:

25 
veùÜ
<
_sü“nObjeù
>::
™”©Ü
 
™
 = 
guiSü“ns
.
	`begš
(); iˆ!ğguiSü“ns.
	`’d
(); ++it)

27 ià(
™
->
sü“nID
 =ğ
objeùID
)

29  
šdexCouÁ
;

31 
šdexCouÁ
++;

36 
GUI_OBJECT_TEXT_LABEL
:

37 
veùÜ
<
_guiObjeù
>::
™”©Ü
 
™
 = 
guiTextLab–s
.
	`begš
(); iˆ!ğguiTextLab–s.
	`’d
(); ++it)

39 ià(
™
->
objeùID
 == objectID)

41  
šdexCouÁ
;

43 
šdexCouÁ
++;

48 
GUI_OBJECT_BUTTON
:

49 
veùÜ
<
_guiObjeù
>::
™”©Ü
 
™
 = 
guiBu‰Ús
.
	`begš
(); iˆ!ğguiBu‰Ús.
	`’d
(); ++it)

51 ià(
™
->
objeùID
 == objectID)

53  
šdexCouÁ
;

55 
šdexCouÁ
++;

60 
GUI_OBJECT_CHECKBOX
:

61 
veùÜ
<
_guiCheckBox
>::
™”©Ü
 
™
 = 
guiCheckBoxes
.
	`begš
(); iˆ!ğguiCheckBoxes.
	`’d
(); ++it)

63 ià(
™
->
©Œibu‹s
.
objeùID
 == objectID)

65  
šdexCouÁ
;

67 
šdexCouÁ
++;

73 
	}
}

79 
	$gui_ho¡C»©eObjeù
(
guiObjeùTy³
, 
¡ršg
 
objeùID
)

82 #ifdeà
DEBUG_GUI_SETUP


83 
	`io_logToFe
("Added‚ew objeù - [ % ]", 
objeùID
.
	`c_¡r
());

86 
guiObjeùTy³
)

88 
GUI_OBJECT_BUTTON
:

89 
tmp_guiBu‰Ú
.
objeùID
 = objectID;

90 
guiBu‰Ús
.
	`push_back
(
tmp_guiBu‰Ú
);

94 
GUI_OBJECT_CHECKBOX
:

95 
tmp_checkBox
.
©Œibu‹s
.
objeùID
 = objectID;

96 
guiCheckBoxes
.
	`push_back
(
tmp_checkBox
);

97 
guiCheckBoxes
.
	`back
().
ticked
 = 
çl£
;

98 
guiCheckBoxes
.
	`back
().
©Œibu‹s
.
£Ëùed
 = 
çl£
;

99 
guiCheckBoxes
.
	`back
().
whichGroup
 = -1;

100 
guiCheckBoxes
.
	`back
().
‹xtG­
 = -1;

101 
guiCheckBoxes
.
	`back
().
checkG­
 = -1;

102 #ifdeà
DEBUG_GUI_SETUP


103 
	`io_logToFe
("GUI_OBJECT_CHECKBOX sizi now - [ %˜]", 
guiCheckBoxes
.
	`size
());

108 
GUI_OBJECT_TEXT_LABEL
:

109 
tmp_‹xtLab–
.
objeùID
 = objectID;

110 
guiTextLab–s
.
	`push_back
(
tmp_‹xtLab–
);

113 
	}
}

118 
	$gui_ho¡S‘ObjeùPos™iÚ
(
guiObjeùTy³
, 
¡ršg
 
objeùID
, 
coÜdTy³
, 
¡¬tX
, 
¡¬tY
, 
width
, 
height
)

121 #ifdeà
DEBUG_GUI_SETUP


122 
	`io_logToFe
("S‘tšg…os™iÚ fÜ - [ % ]", 
objeùID
.
	`c_¡r
());

125 
objeùIndex
 = 0;

128 
objeùIndex
 = 
	`gui_fšdIndex
(
guiObjeùTy³
, 
objeùID
);

129 ià(-1 =ğ
objeùIndex
)

131 
	`io_logToFe
("ERROR: Couldn'ˆfšd GUI objeù index [ % ]", 
objeùID
.
	`c_¡r
());

135 
guiObjeùTy³
)

137 
GUI_OBJECT_TEXT_LABEL
:

138 
guiTextLab–s
[
objeùIndex
].
coÜdTy³
 = coordType;

139 ià(
GUI_COORD_TYPE_PERCENT
 =ğ
guiTextLab–s
[
objeùIndex
].
coÜdTy³
)

141 
guiTextLab–s
[
objeùIndex
].
boundšgBox
.
x
 = 
wšWidth
 * (
¡¬tX
 / 100);

142 
guiTextLab–s
[
objeùIndex
].
boundšgBox
.
y
 = 
wšHeight
 * (
¡¬tY
 / 100);

143 
guiTextLab–s
[
objeùIndex
].
boundšgBox
.
w
 = 
wšWidth
 * (
width
 / 100);

144 
guiTextLab–s
[
objeùIndex
].
boundšgBox
.
h
 = 
wšHeight
 * (
height
 / 100);

148 
guiTextLab–s
[
objeùIndex
].
boundšgBox
.
x
 = 
¡¬tX
;

149 
guiTextLab–s
[
objeùIndex
].
boundšgBox
.
y
 = 
¡¬tY
;

150 
guiTextLab–s
[
objeùIndex
].
boundšgBox
.
w
 = 
width
;

151 
guiTextLab–s
[
objeùIndex
].
boundšgBox
.
h
 = 
height
;

155 
GUI_OBJECT_BUTTON
:

156 
guiBu‰Ús
[
objeùIndex
].
coÜdTy³
 = coordType;

157 ià(
GUI_COORD_TYPE_PERCENT
 =ğ
guiBu‰Ús
[
objeùIndex
].
coÜdTy³
)

159 
guiBu‰Ús
[
objeùIndex
].
boundšgBox
.
x
 = 
wšWidth
 * (
¡¬tX
 / 100);

160 
guiBu‰Ús
[
objeùIndex
].
boundšgBox
.
y
 = 
wšHeight
 * (
¡¬tY
 / 100);

161 
guiBu‰Ús
[
objeùIndex
].
boundšgBox
.
w
 = 
wšWidth
 * (
width
 / 100);

162 
guiBu‰Ús
[
objeùIndex
].
boundšgBox
.
h
 = 
wšHeight
 * (
height
 / 100);

166 
guiBu‰Ús
[
objeùIndex
].
boundšgBox
.
x
 = 
¡¬tX
;

167 
guiBu‰Ús
[
objeùIndex
].
boundšgBox
.
y
 = 
¡¬tY
;

168 
guiBu‰Ús
[
objeùIndex
].
boundšgBox
.
w
 = 
width
;

169 
guiBu‰Ús
[
objeùIndex
].
boundšgBox
.
h
 = 
height
;

174 
GUI_OBJECT_CHECKBOX
:

175 
guiCheckBoxes
[
objeùIndex
].
‹xtG­
 = 
SLIDER_LABEL_GUTTER
;

176 
guiCheckBoxes
[
objeùIndex
].
Ïb–G­
 = 
SLIDER_LABEL_GUTTER
;

177 
guiCheckBoxes
[
objeùIndex
].
©Œibu‹s
.
boundšgBox
.
x
 = 
¡¬tX
;

178 
guiCheckBoxes
[
objeùIndex
].
©Œibu‹s
.
boundšgBox
.
y
 = 
¡¬tY
;

179 
guiCheckBoxes
[
objeùIndex
].
©Œibu‹s
.
boundšgBox
.
w
 = 
width
;

180 
guiCheckBoxes
[
objeùIndex
].
©Œibu‹s
.
boundšgBox
.
h
 = 
height
;

183 
	}
}

191 
	$gui_ho¡S‘ObjeùLab–
(
guiObjeùTy³
, 
¡ršg
 
objeùID
, 
Ïb–Pos
, sŒšg 
ÃwLab–
)

194 #ifdeà
DEBUG_GUI_SETUP


195 
	`io_logToFe
("S‘tšg†ab– fÜ - [ % ]", 
objeùID
.
	`c_¡r
());

198 ià(
objeùID
 == "buttonVideoOptionsApply")

199 
	`io_logToFe
("S¹ed s‘Lab– [ % ]", 
objeùID
.
	`c_¡r
());

201 
objeùIndex
 = 0;

204 
objeùIndex
 = 
	`gui_fšdIndex
(
guiObjeùTy³
, 
objeùID
);

205 ià(-1 =ğ
objeùIndex
)

207 
	`io_logToFe
("ERROR: Couldn'ˆfšd GUI objeù index [ % ]", 
objeùID
.
	`c_¡r
());

211 
	`sys_£tFÚt
(
FONT_GUI
);

213 
guiObjeùTy³
)

215 
GUI_OBJECT_BUTTON
:

216 ià(
	`¡¾’
(
ÃwLab–
.
	`c_¡r
()è> 
GUI_LABEL_SIZE
)

217 
guiBu‰Ús
[
objeùIndex
].
Ïb–
 = "Lengthƒrror";

219 
guiBu‰Ús
[
objeùIndex
].
Ïb–
 = 
ÃwLab–
;

221 
guiBu‰Ús
[
objeùIndex
].
Ïb–Pos
 =†abelPos;

222 
guiBu‰Ús
[
objeùIndex
].
Ïb–S¹Y
 = guiBu‰Ús[objeùIndex].
boundšgBox
.
y
 + (guiBu‰Ús[objeùIndex].boundšgBox.
h
 - 
	`®_g‘_fÚt_lše_height
(
fÚt
[
cu¼’tFÚt
].
‰fFÚt
)) / 4;

224 
Ïb–Pos
)

226 
GUI_LABEL_CENTER
:

227 
guiBu‰Ús
[
objeùIndex
].
Ïb–S¹X
 = guiBu‰Ús[objeùIndex].
boundšgBox
.
x
 + ((guiBu‰Ús[objeùIndex].boundšgBox.
w
 - 
	`®_g‘_‹xt_width
(
fÚt
[
cu¼’tFÚt
].
‰fFÚt
, guiBu‰Ús[objeùIndex].
Ïb–
.
	`c_¡r
())) / 2);

230 
GUI_LABEL_LEFT
:

231 
guiBu‰Ús
[
objeùIndex
].
Ïb–S¹X
 = guiBu‰Ús[objeùIndex].
boundšgBox
.
x
;

234 
GUI_LABEL_RIGHT
:

235 
guiBu‰Ús
[
objeùIndex
].
Ïb–S¹X
 = (guiBu‰Ús[objeùIndex].
boundšgBox
.
x
 + guiBu‰Ús[objeùIndex].boundšgBox.
w
è- 
	`®_g‘_‹xt_width
(
fÚt
[
cu¼’tFÚt
].
‰fFÚt
, guiBu‰Ús[objeùIndex].
Ïb–
.
	`c_¡r
());

240 
GUI_OBJECT_CHECKBOX
:

242 ià(
	`¡¾’
(
ÃwLab–
.
	`c_¡r
()è> 
GUI_LABEL_SIZE
)

243 
guiCheckBoxes
[
objeùIndex
].
©Œibu‹s
.
Ïb–
 = "Lengthƒrror";

245 
guiCheckBoxes
[
objeùIndex
].
©Œibu‹s
.
Ïb–
 = 
ÃwLab–
;

247 
guiCheckBoxes
[
objeùIndex
].
©Œibu‹s
.
Ïb–S¹X
 = guiCheckBoxes[objeùIndex].©Œibu‹s.
boundšgBox
.
x
 + guiCheckBoxes[objeùIndex].©Œibu‹s.boundšgBox.
w
 + guiCheckBoxes[objeùIndex].
Ïb–G­
;

248 
guiCheckBoxes
[
objeùIndex
].
©Œibu‹s
.
Ïb–S¹Y
 = guiCheckBoxes[objeùIndex].©Œibu‹s.
boundšgBox
.
y
;

252 
GUI_OBJECT_TEXT_LABEL
:

254 ià(
	`¡¾’
(
ÃwLab–
.
	`c_¡r
()è> 
GUI_LABEL_SIZE
)

255 
guiTextLab–s
[
objeùIndex
].
Ïb–
 = "Lengthƒrror";

257 
guiTextLab–s
[
objeùIndex
].
Ïb–
 = 
ÃwLab–
;

259 
guiTextLab–s
[
objeùIndex
].
Ïb–S¹X
 = guiTextLab–s[objeùIndex].
boundšgBox
.
x
;

260 
guiTextLab–s
[
objeùIndex
].
Ïb–S¹Y
 = guiTextLab–s[objeùIndex].
boundšgBox
.
y
;

262 
	}
}

268 
	$gui_ho¡S‘ObjeùFunùiÚs
(
guiObjeùTy³
, 
¡ršg
 
objeùID
, sŒšg 
şickFunùiÚ
, sŒšg 
mou£FunùiÚ
)

271 #ifdeà
DEBUG_GUI_SETUP


272 
	`io_logToFe
("S‘tšghfunùiÚ c®ÈfÜ [ % ] - [ % ]", 
objeùID
.
	`c_¡r
(), 
şickFunùiÚ
.c_str());

275 
objeùIndex
 = 0;

278 
objeùIndex
 = 
	`gui_fšdIndex
(
guiObjeùTy³
, 
objeùID
);

279 ià(-1 =ğ
objeùIndex
)

281 
	`io_logToFe
("ERROR: Couldn'ˆfšd GUI objeù index [ % ]", 
objeùID
.
	`c_¡r
());

285 
guiObjeùTy³
)

289 
GUI_OBJECT_BUTTON
:

290 
guiBu‰Ús
[
objeùIndex
].
aùiÚ
 = 
şickFunùiÚ
;

294 
GUI_OBJECT_CHECKBOX
:

295 
guiCheckBoxes
[
objeùIndex
].
©Œibu‹s
.
aùiÚ
 = 
şickFunùiÚ
;

299 
	}
}

304 
	$gui_£tObjeùCŞÜByIndex
(
guiObjeùTy³
, 
objeùIndex
, 
whichCŞÜ
, 
»d
, 
g»’
, 
blue
, 
®pha
)

307 
guiObjeùTy³
)

311 
GUI_OBJECT_BUTTON
:

313 
whichCŞÜ
)

315 
GUI_BUTTON_ACTIVE_COL
:

316 
guiBu‰Ús
[
objeùIndex
].
aùiveCŞ
 = 
	`®_m­_rgba_f
(
»d
, 
g»’
, 
blue
, 
®pha
);

319 
GUI_BUTTON_INACTIVE_COL
:

320 
guiBu‰Ús
[
objeùIndex
].
šAùiveCŞ
 = 
	`®_m­_rgba_f
(
»d
, 
g»’
, 
blue
, 
®pha
);

323 
GUI_BUTTON_ACTIVE_EDGE_COL
:

324 
guiBu‰Ús
[
objeùIndex
].
edgeAùiveCŞ
 = 
	`®_m­_rgba_f
(
»d
, 
g»’
, 
blue
, 
®pha
);

327 
GUI_BUTTON_INACTIVE_EDGE_COL
:

328 
guiBu‰Ús
[
objeùIndex
].
edgeInAùiveCŞ
 = 
	`®_m­_rgba_f
(
»d
, 
g»’
, 
blue
, 
®pha
);

331 
GUI_BUTTON_ACTIVE_LABEL_COL
:

332 
guiBu‰Ús
[
objeùIndex
].
aùiveLab–CŞ
 = 
	`®_m­_rgba_f
(
»d
, 
g»’
, 
blue
, 
®pha
);

335 
GUI_BUTTON_INACTIVE_LABEL_COL
:

336 
guiBu‰Ús
[
objeùIndex
].
šAùiveLab–CŞ
 = 
	`®_m­_rgba_f
(
»d
, 
g»’
, 
blue
, 
®pha
);

342 
GUI_OBJECT_CHECKBOX
:

344 
whichCŞÜ
)

346 
GUI_CHECKBOX_TICKED_COL
:

347 
guiCheckBoxes
[
objeùIndex
].
©Œibu‹s
.
aùiveCŞ
 = 
	`®_m­_rgba_f
(
»d
, 
g»’
, 
blue
, 
®pha
);

348 
guiCheckBoxes
[
objeùIndex
].
©Œibu‹s
.
aùiveLab–CŞ
 = 
	`®_m­_rgba_f
(
»d
, 
g»’
, 
blue
, 
®pha
);

351 
GUI_CHECKBOX_NOT_TICKED_COL
:

352 
guiCheckBoxes
[
objeùIndex
].
©Œibu‹s
.
šAùiveCŞ
 = 
	`®_m­_rgba_f
(
»d
, 
g»’
, 
blue
, 
®pha
);

353 
guiCheckBoxes
[
objeùIndex
].
©Œibu‹s
.
šAùiveLab–CŞ
 = 
	`®_m­_rgba_f
(
»d
, 
g»’
, 
blue
, 
®pha
);

357 
guiCheckBoxes
[
objeùIndex
].
ticked
 = 
çl£
;

362 
GUI_OBJECT_TEXT_LABEL
:

364 
whichCŞÜ
)

366 
GUI_OBJECT_TEXT_LABEL_COLOR
:

367 
guiTextLab–s
[
objeùIndex
].
aùiveCŞ
 = 
	`®_m­_rgba_f
(
»d
, 
g»’
, 
blue
, 
®pha
);

381 
	}
}

387 
	$gui_ho¡S‘ObjeùCŞÜ
(
guiObjeùTy³
, 
¡ršg
 
objeùID
, 
whichCŞÜ
, 
»d
, 
g»’
, 
blue
, 
®pha
)

390 #ifdeà
DEBUG_GUI_SETUP


391 
	`io_logToFe
("S‘tšg cŞÜ fÜ - [ % ]", 
objeùID
.
	`c_¡r
());

394 
objeùIndex
 = 0;

395 
numObjeùs
 = 0;

397 ià(
objeùID
 == "ALL")

399 
guiObjeùTy³
)

401 
GUI_OBJECT_BUTTON
:

402 
numObjeùs
 = 
guiBu‰Ús
.
	`size
();

405 
GUI_OBJECT_CHECKBOX
:

406 
numObjeùs
 = 
guiCheckBoxes
.
	`size
();

409 
GUI_OBJECT_TEXT_LABEL
:

410 
numObjeùs
 = 
guiTextLab–s
.
	`size
();

414 
i
 = 0; i !ğ
numObjeùs
; i++)

415 
	`gui_£tObjeùCŞÜByIndex
(
guiObjeùTy³
, 
i
, 
whichCŞÜ
, 
»d
, 
g»’
, 
blue
, 
®pha
);

421 
objeùIndex
 = 
	`gui_fšdIndex
(
guiObjeùTy³
, 
objeùID
);

422 ià(-1 =ğ
objeùIndex
)

424 
	`io_logToFe
("ERROR: Couldn'ˆfšd GUI objeù index [ % ]", 
objeùID
.
	`c_¡r
());

427 
	`gui_£tObjeùCŞÜByIndex
(
guiObjeùTy³
, 
objeùIndex
, 
whichCŞÜ
, 
»d
, 
g»’
, 
blue
, 
®pha
);

429 
	}
}

434 
	$gui_ho¡S‘CheckboxGroup
(
¡ršg
 
objeùID
, 
whichGroup
)

437 #ifdeà
DEBUG_GUI_SETUP


438 
	`io_logToFe
("S‘tšg checkBox grou°fÜ - [ % ]", 
objeùID
.
	`c_¡r
());

441 
objeùIndex
 = 0;

444 
objeùIndex
 = 
	`gui_fšdIndex
(
GUI_OBJECT_CHECKBOX
, 
objeùID
);

445 ià(-1 =ğ
objeùIndex
)

447 
	`io_logToFe
("ERROR: Couldn'ˆfšd GUI objeù index [ % ]", 
objeùID
.
	`c_¡r
());

451 
guiCheckBoxes
[
objeùIndex
].
whichGroup
 = whichGroup;

452 
	}
}

459 
	$gui_ho¡S‘CheckboxTick
(
¡ršg
 
objeùID
, 
whichGroup
)

462 #ifdeà
DEBUG_GUI_SETUP


463 
	`io_logToFe
("S‘tšg checkBoxick fÜ - [ % ]", 
objeùID
.
	`c_¡r
());

466 
objeùIndex
 = 0;

469 
objeùIndex
 = 
	`gui_fšdIndex
(
GUI_OBJECT_CHECKBOX
, 
objeùID
);

470 ià(-1 =ğ
objeùIndex
)

472 
	`io_logToFe
("ERROR: Couldn'ˆfšd GUI objeù index [ % ]", 
objeùID
.
	`c_¡r
());

476 ià(
Œue
 =ğ
guiCheckBoxes
[
objeùIndex
].
ticked
)

478 
guiCheckBoxes
[
objeùIndex
].
ticked
 = 
çl£
;

482 
i
 = 0; i !ğ
guiCheckBoxes
.
	`size
(); i++)

484 ià(
whichGroup
 =ğ
guiCheckBoxes
[
i
].whichGroup)

485 
guiCheckBoxes
[
i
].
ticked
 = 
çl£
;

489 
guiCheckBoxes
[
objeùIndex
].
ticked
 = 
Œue
;

490 
	}
}

495 
	$gui_ho¡C»©eNewSü“n
(
¡ršg
 
sü“nID
)

498 
tmp_sü“n
.
sü“nID
 = screenID;

499 
tmp_sü“n
.
£ËùedObjeù
 = 0;

501 
guiSü“ns
.
	`push_back
(
tmp_sü“n
);

503 
	`io_logToFe
("Sü“À[ % ] c»©ed.", 
sü“nID
.
	`c_¡r
());

504 
	}
}

509 
	$gui_ho¡AddObjeùToSü“n
(
guiObjeùTy³
, 
¡ršg
 
objeùID
, sŒšg 
whichSü“n
)

512 #ifdeà
DEBUG_GUI_SETUP


513 
	`io_logToFe
("Addšg [ % ]Øsü“À[ % ]", 
objeùID
.
	`c_¡r
(), 
whichSü“n
.c_str());

516 
sü“nIndex
 = 0;

517 
objeùIndex
 = 0;

520 
sü“nIndex
 = 
	`gui_fšdIndex
(
GUI_OBJECT_SCREEN
, 
whichSü“n
);

521 ià(-1 =ğ
sü“nIndex
)

523 
	`io_logToFe
("ERROR: Couldn'ˆfšd GUI sü“Àšdex [ % ]", 
whichSü“n
.
	`c_¡r
());

528 
objeùIndex
 = 
	`gui_fšdIndex
(
guiObjeùTy³
, 
objeùID
);

529 ià(-1 =ğ
objeùIndex
)

531 
	`io_logToFe
("ERROR: Couldn'ˆfšd GUI objeù index [ % ]", 
objeùID
.
	`c_¡r
());

535 
guiObjeùTy³
)

537 
GUI_OBJECT_BUTTON
:

538 
GUI_OBJECT_CHECKBOX
:

539 
GUI_OBJECT_TEXT_LABEL
:

540 
guiSü“ns
[
sü“nIndex
].
objeùIDIndex
.
	`push_back
(
objeùIndex
);

541 
guiSü“ns
[
sü“nIndex
].
objeùTy³
.
	`push_back
(
guiObjeùTy³
);

543 
	`io_logToFe
("Sü“À[ % ] objeùID [ %˜] - Added", 
guiSü“ns
[
sü“nIndex
].
sü“nID
.
	`c_¡r
(), guiSü“ns[sü“nIndex].
objeùIDIndex
.
	`back
());

544 
	`io_logToFe
("-------------");

547 
	}
}

552 
	$gui_debugGUI
()

555 
sü“nCouÁ
;

556 
objeùCouÁ
;

558 
sü“nCouÁ
 = 0;

559 
objeùCouÁ
 = 0;

561 
veùÜ
<
_sü“nObjeù
>::
™”©Ü
 
™
 = 
guiSü“ns
.
	`begš
(); iˆ!ğguiSü“ns.
	`’d
(); ++it)

564 
	`io_logToFe
("Sü“À[ % ] Sü“ncouÁ [ %˜]", 
guiSü“ns
[
sü“nCouÁ
].
sü“nID
.
	`c_¡r
(), screenCount);

566 
objeùCouÁ
 = 0;

567 
veùÜ
<>::
™”©Ü
 
obj_™
 = 
guiSü“ns
[
sü“nCouÁ
].
objeùIDIndex
.
	`begš
(); obj_™ !ğguiSü“ns[sü“nCouÁ].objeùIDIndex.
	`’d
(); ++obj_it)

569 
guiSü“ns
[
sü“nCouÁ
].
objeùTy³
[
objeùCouÁ
])

571 
GUI_OBJECT_BUTTON
:

572 
	`io_logToFe
("-->Bu‰Ú [ % ] objeùIDIndex [ %˜]", 
guiBu‰Ús
[
guiSü“ns
[
sü“nCouÁ
].
objeùIDIndex
[
objeùCouÁ
]].
objeùID
.
	`c_¡r
(), guiScreens[screenCount].objectIDIndex[objectCount]);

575 
GUI_OBJECT_CHECKBOX
:

576 
	`io_logToFe
("-->Checkbox [ % ] objeùIDIndex [ %˜]", 
guiCheckBoxes
[
guiSü“ns
[
sü“nCouÁ
].
objeùIDIndex
[
objeùCouÁ
]].
©Œibu‹s
.
objeùID
.
	`c_¡r
(), guiScreens[screenCount].objectIDIndex[objectCount]);

579 
GUI_OBJECT_TEXT_LABEL
:

580 
	`io_logToFe
("-->TextLab– [ % ] objeùIDIndex [ %˜]", 
guiTextLab–s
[
guiSü“ns
[
sü“nCouÁ
].
objeùIDIndex
[
objeùCouÁ
]].
objeùID
.
	`c_¡r
(), guiScreens[screenCount].objectIDIndex[objectCount]);

583 
objeùCouÁ
++;

585 
sü“nCouÁ
++;

588 
	}
}

	@../src/gui/gui_render.cpp

1 
	~"../../hdr/sys_glob®s.h
"

3 
	g¿¡”PosY
;

8 
	$gui_d¿wObjeù
 (
objeùTy³
, 
whichObjeù
, 
boŞ
 
hasFocus
)

11 
fÚtHeight
;

13 
fÚtHeight
 = 
	`®_g‘_fÚt_lše_height
 (
fÚt
[
cu¼’tFÚt
].
‰fFÚt
);

15 
objeùTy³
)

17 
GUI_OBJECT_BUTTON
:

19 ià(
Œue
 =ğ
hasFocus
)

21 
	`®_d¿w_rounded_»ùªgË
 (
guiBu‰Ús
[
whichObjeù
].
boundšgBox
.
x
, guiBu‰Ús[whichObjeù].boundšgBox.
y
, guiBu‰Ús[whichObjeù].boundšgBox.x + guiBu‰Ús[whichObjeù].boundšgBox.
w
, guiBu‰Ús[whichObjeù].boundšgBox.y + guiBu‰Ús[whichObjeù].boundšgBox.
h
,

22 
bu‰ÚCurveX
, 
bu‰ÚCurveY
, 
	`®_m­_rgba_f
 (
guiBu‰Ús
[
whichObjeù
].
aùiveCŞ
.
r
, guiBu‰Ús[whichObjeù].aùiveCŞ.
g
, guiBu‰Ús[whichObjeù].aùiveCŞ.
b
, guiBu‰Ús[whichObjeù].aùiveCŞ.
a
), 2.0f);

24 
	`sys_£tFÚtCŞÜ
 (
guiBu‰Ús
[
whichObjeù
].
šAùiveLab–CŞ
.
r
, guiBu‰Ús[whichObjeù].šAùiveLab–CŞ.
g
, guiBu‰Ús[whichObjeù].šAùiveLab–CŞ.
b
, guiBu‰Ús[whichObjeù].šAùiveLab–CŞ.
a
);

28 
	`®_d¿w_rounded_»ùªgË
 (
guiBu‰Ús
[
whichObjeù
].
boundšgBox
.
x
, guiBu‰Ús[whichObjeù].boundšgBox.
y
, guiBu‰Ús[whichObjeù].boundšgBox.x + guiBu‰Ús[whichObjeù].boundšgBox.
w
, guiBu‰Ús[whichObjeù].boundšgBox.y + guiBu‰Ús[whichObjeù].boundšgBox.
h
,

29 
bu‰ÚCurveX
, 
bu‰ÚCurveY
, 
	`®_m­_rgba_f
 (
guiBu‰Ús
[
whichObjeù
].
šAùiveCŞ
.
r
, guiBu‰Ús[whichObjeù].šAùiveCŞ.
g
, guiBu‰Ús[whichObjeù].šAùiveCŞ.
b
, guiBu‰Ús[whichObjeù].šAùiveCŞ.
a
), 2.0f);

31 
	`sys_£tFÚtCŞÜ
 (
guiBu‰Ús
[
whichObjeù
].
aùiveLab–CŞ
.
r
, guiBu‰Ús[whichObjeù].aùiveLab–CŞ.
g
, guiBu‰Ús[whichObjeù].aùiveLab–CŞ.
b
, guiBu‰Ús[whichObjeù].aùiveLab–CŞ.
a
);

33 
	`sys_´štSŒšgExt
 (
guiBu‰Ús
[
whichObjeù
].
Ïb–S¹X
, guiBu‰Ús[whichObjeù].
Ïb–S¹Y
, "%s", guiBu‰Ús[whichObjeù].
Ïb–
.
	`c_¡r
());

36 
GUI_OBJECT_CHECKBOX
:

38 ià(
Œue
 =ğ
hasFocus
)

40 ià(
Œue
 =ğ
guiCheckBoxes
[
whichObjeù
].
ticked
)

41 
	`®_d¿w_rounded_»ùªgË
 (
guiCheckBoxes
[
whichObjeù
].
©Œibu‹s
.
boundšgBox
.
x
, guiCheckBoxes[whichObjeù].©Œibu‹s.boundšgBox.
y
, guiCheckBoxes[whichObjeù].©Œibu‹s.boundšgBox.x + guiCheckBoxes[whichObjeù].©Œibu‹s.boundšgBox.
w
, guiCheckBoxes[whichObjeù].©Œibu‹s.boundšgBox.y + guiCheckBoxes[whichObjeù].©Œibu‹s.boundšgBox.
h
,

42 
bu‰ÚCurveX
, 
bu‰ÚCurveY
, 
	`®_m­_rgba_f
 (
guiCheckBoxes
[
whichObjeù
].
©Œibu‹s
.
aùiveCŞ
.
r
, guiCheckBoxes[whichObjeù].©Œibu‹s.aùiveCŞ.
g
, guiCheckBoxes[whichObjeù].©Œibu‹s.aùiveCŞ.
b
, guiCheckBoxes[whichObjeù].©Œibu‹s.aùiveCŞ.
a
), 2.0f);

44 
	`sys_£tFÚtCŞÜ
 (
guiCheckBoxes
[
whichObjeù
].
©Œibu‹s
.
aùiveLab–CŞ
.
r
, guiCheckBoxes[whichObjeù].©Œibu‹s.aùiveLab–CŞ.
g
, guiCheckBoxes[whichObjeù].©Œibu‹s.aùiveLab–CŞ.
b
, guiCheckBoxes[whichObjeù].©Œibu‹s.aùiveLab–CŞ.
a
);

48 ià(
Œue
 =ğ
guiCheckBoxes
[
whichObjeù
].
ticked
)

49 
	`®_d¿w_rounded_»ùªgË
 (
guiCheckBoxes
[
whichObjeù
].
©Œibu‹s
.
boundšgBox
.
x
, guiCheckBoxes[whichObjeù].©Œibu‹s.boundšgBox.
y
, guiCheckBoxes[whichObjeù].©Œibu‹s.boundšgBox.x + guiCheckBoxes[whichObjeù].©Œibu‹s.boundšgBox.
w
, guiCheckBoxes[whichObjeù].©Œibu‹s.boundšgBox.y + guiCheckBoxes[whichObjeù].©Œibu‹s.boundšgBox.
h
,

50 
bu‰ÚCurveX
, 
bu‰ÚCurveY
, 
	`®_m­_rgba_f
 (
guiCheckBoxes
[
whichObjeù
].
©Œibu‹s
.
šAùiveCŞ
.
r
, guiCheckBoxes[whichObjeù].©Œibu‹s.šAùiveCŞ.
g
, guiCheckBoxes[whichObjeù].©Œibu‹s.šAùiveCŞ.
b
, guiCheckBoxes[whichObjeù].©Œibu‹s.šAùiveCŞ.
a
), 2.0f);

52 
	`sys_£tFÚtCŞÜ
 (
guiCheckBoxes
[
whichObjeù
].
©Œibu‹s
.
šAùiveLab–CŞ
.
r
, guiCheckBoxes[whichObjeù].©Œibu‹s.šAùiveLab–CŞ.
g
, guiCheckBoxes[whichObjeù].©Œibu‹s.šAùiveLab–CŞ.
b
, guiCheckBoxes[whichObjeù].©Œibu‹s.šAùiveLab–CŞ.
a
);

54 
	`sys_´štSŒšgExt
 (
guiCheckBoxes
[
whichObjeù
].
©Œibu‹s
.
Ïb–S¹X
 + guiCheckBoxes[whichObjeù].
‹xtG­
, guiCheckBoxes[whichObjeù].©Œibu‹s.
Ïb–S¹Y
 + (guiCheckBoxes[whichObjeù].©Œibu‹s.
boundšgBox
.
h
 - 
fÚtHeight
 / 2), "%s", guiCheckBoxes[whichObjeù].©Œibu‹s.
Ïb–
.
	`c_¡r
());

57 
GUI_OBJECT_TEXT_LABEL
:

58 
	`sys_£tFÚtCŞÜ
 (
guiTextLab–s
[
whichObjeù
].
aùiveCŞ
.
r
, guiTextLab–s[whichObjeù].aùiveCŞ.
g
, guiTextLab–s[whichObjeù].aùiveCŞ.
b
, guiTextLab–s[whichObjeù].aùiveCŞ.
a
);

59 
	`sys_´štSŒšgExt
 (
guiTextLab–s
[
whichObjeù
].
Ïb–S¹X
, guiTextLab–s[whichObjeù].
Ïb–S¹Y
, "%s", guiTextLab–s[whichObjeù].
Ïb–
.
	`c_¡r
());

63 
	}
}

69 
	$gui_d¿wGUI
()

72 
	`sys_£tFÚt
 (
FONT_GUI
);

77 
	`sys_´štSŒšgExt
 (10.0f, 30.0f, "cu¼’tGUISü“À[ % ] S–eùed [ %˜] Index [ %˜]", 
guiSü“ns
[
cu¼’tGUISü“n
].
sü“nID
.
	`c_¡r
(), guiSü“ns[cu¼’tGUISü“n].
£ËùedObjeù
, guiSü“ns[cu¼’tGUISü“n].
objeùIDIndex
.
	`size
());

80 
šdexCouÁ
 = 0;

82 
šdexCouÁ
 = 0;

86 
veùÜ
<>::
™”©Ü
 
™
 = 
guiSü“ns
[
cu¼’tGUISü“n
].
objeùIDIndex
.
	`begš
(); iˆ!ğguiSü“ns[cu¼’tGUISü“n].objeùIDIndex.
	`’d
(); ++it)

88 ià(
guiSü“ns
[
cu¼’tGUISü“n
].
£ËùedObjeù
 =ğ
šdexCouÁ
)

89 
	`gui_d¿wObjeù
(
guiSü“ns
[
cu¼’tGUISü“n
].
objeùTy³
[
šdexCouÁ
], guiSü“ns[cu¼’tGUISü“n].
objeùIDIndex
[šdexCouÁ], 
Œue
);

91 
	`gui_d¿wObjeù
(
guiSü“ns
[
cu¼’tGUISü“n
].
objeùTy³
[
šdexCouÁ
], guiSü“ns[cu¼’tGUISü“n].
objeùIDIndex
[šdexCouÁ], 
çl£
);

92 
šdexCouÁ
++;

94 
	`gui_d¿wRa¡”Lšes
();

95 
	}
}

100 
	$gui_ªim©eRa¡”Lše
()

103 
¿¡”PosY
++;

104 ià(
¿¡”PosY
 > 
wšHeight
)

105 
¿¡”PosY
 = 
	`®_g‘_b™m­_height
 (
image
[
hud
].image);

106 
	}
}

111 
	$gui_d¿wRa¡”Lšes
()

114 
j
 = 
	`®_g‘_b™m­_height
 (
image
[
hud
].image); j < 
wšHeight
; j++)

116 
	`®_d¿w_lše
 (0, 
j
++, 
wšWidth
, j++, 
	`®_m­_rgba_f
 (0.0, 0.0, 0.2, 0.3), 1.0f);

118 ià(
j
 =ğ
¿¡”PosY
)

119 
	`®_d¿w_lše
 (0, 
j
++, 
wšWidth
, j++, 
	`®_m­_rgba_f
 (0.0, 0.0, 0.6, 0.3), 1.0f);

120 ià(
j
 =ğ
¿¡”PosY
 - 1)

121 
	`®_d¿w_lše
 (0, 
j
++, 
wšWidth
, j++, 
	`®_m­_rgba_f
 (0.0, 0.0, 0.5, 0.3), 1.0f);

122 ià(
j
 =ğ
¿¡”PosY
 - 2)

123 
	`®_d¿w_lše
 (0, 
j
++, 
wšWidth
, j++, 
	`®_m­_rgba_f
 (0.0, 0.0, 0.4, 0.3), 1.0f);

125 
	}
}

	@../src/gui/gui_scrollBox.cpp

1 
	~"../../hdr/sys_glob®s.h
"

3 
_süŞlBox
 
	gšŒoSüŞlBox
;

4 
	gv›wSüŞlY
;

5 
	g´eviousSüŞlY
;

10 
boŞ
 
	$gui_d¿wSüŞlBox
(
_süŞlBox
 *
süŞlBox
)

13 
cu¼’tLšeOfText
[128];

14 
LINE_HEIGHT
;

16 
LINE_HEIGHT
 = 
	`®_g‘_fÚt_lše_height
(
fÚt
[
cu¼’tFÚt
].
‰fFÚt
);

18 
	`sys_£tFÚt
(
FONT_GUI
);

19 
	`sys_£tFÚtCŞÜ
(
süŞlBox
->
fÚtCŞ
.
r
, süŞlBox->fÚtCŞ.
g
, süŞlBox->fÚtCŞ.
b
, süŞlBox->fÚtCŞ.
a
);

23 
i
 = 0; i !ğ
süŞlBox
->
lšesToPršt
; i++)

25 ià(
	`¡¾’
(
süŞlBox
->
lše
[
i
].
‹xt
) > 128)

26 
	`¡rıy
(
cu¼’tLšeOfText
, "Stringo†ong.");

28 
	`¡rıy
(
cu¼’tLšeOfText
, 
süŞlBox
->
lše
[
i
].
‹xt
);

30 
	`sys_´štSŒšgExt
(
süŞlBox
->
¡¬tX
, (süŞlBox->
height
 - (
i
 * 
LINE_HEIGHT
)è- 
v›wSüŞlY
, "%s", 
cu¼’tLšeOfText
);

32  
Œue
;

33 
	}
}

42 
	$gui_£tupSüŞlBox
(
whichSüŞlBox
, 
_süŞlBox
 *
süŞlBox
, cÚ¡ *
£ùiÚ
, cÚ¡ *
sourûText
, 
Ex‹ºFunc
 
funcPŒ
)

45 
whichSüŞlBox
)

47 
SCROLLBOX_INTRO
:

49 
süŞlBox
->
¡¬tX
 = 
šŒoS¹X
;

52 
süŞlBox
->
¡¬tY
 = 
	`®_g‘_b™m­_height
(
image
[
hud
].image);

54 
süŞlBox
->
width
 = 
šŒoWidth
;

55 
süŞlBox
->
height
 = 
šŒoHeight
;

56 
süŞlBox
->
süŞlS³ed
 = 
šŒoSüŞl¥“d
;

57 
süŞlBox
->
backGroundCŞ
 = 
	`®_m­_rgba_f
(
šŒoBackRed
, 
šŒoBackG»’
, 
šŒoBackBlue
, 
šŒoBackAÍha
);

58 
süŞlBox
->
fÚtCŞ
 = 
	`®_m­_rgba_f
(
šŒoFÚtRed
, 
šŒoFÚtG»’
, 
šŒoFÚtBlue
, 
šŒoFÚtAÍha
);

60 
süŞlBox
->
süŞlD–ay
 = 
šŒoSüŞlD–ay
;

63 
SCROLLBOX_DB
:

64 
süŞlBox
->
¡¬tX
 = 
dbS¹X
;

65 
süŞlBox
->
¡¬tY
 = 
dbS¹Y
;

67 
süŞlBox
->
width
 = 
dbWidth
;

68 
süŞlBox
->
height
 = 
dbHeight
;

69 
süŞlBox
->
süŞlS³ed
 = 
dbSüŞl¥“d
;

70 
süŞlBox
->
backGroundCŞ
 = 
	`®_m­_rgba_f
(
dbBackRed
, 
dbBackG»’
, 
dbBackBlue
, 
dbBackAÍha
);

71 
süŞlBox
->
fÚtCŞ
 = 
	`®_m­_rgba_f
(
dbFÚtRed
, 
dbFÚtG»’
, 
dbFÚtBlue
, 
dbFÚtAÍha
);

73 
süŞlBox
->
süŞlD–ay
 = 
dbSüŞlD–ay
;

79 
süŞlBox
->
süŞlY
 = süŞlBox->
height
;

80 
süŞlBox
->
süŞlD–ayCouÁ
 = 0.0f;

81 
süŞlBox
->
lšesToPršt
 = 1;

82 
süŞlBox
->
ch¬PŒ
 = 0;

83 
süŞlBox
->
sourûText
 = (*)sourceText;

84 
süŞlBox
->
funcPŒ
 = funcPtr;

86 
i
 = 0; i !ğ
MAX_LINES_IN_SCREEN
; i++)

87 
	`¡rıy
(
süŞlBox
->
lše
[
i
].
‹xt
, "");

89 
	`¡rıy
(
süŞlBox
->
lše
[8].
‹xt
, "Accessing help system...");

90 
	}
}

95 *
	$gui_g‘NextTextLše
(
_süŞlBox
 *
süŞlBox
)

98 
ÃxtWÜd
[32];

100 
ÃxtLše
[256];

102 
´eviousS·û
;

103 
boŞ
 
foundLše
;

104 
i
 = 0;

106 
‹xtL’gth
;

107 
boxWidth
;

111 
i
 = 
MAX_LINES_IN_SCREEN
 - 1; i != 0; i--)

113 
	`¡rıy
 (
süŞlBox
->
lše
[
i
].
‹xt
, scrollBox->line[i - 1].text);

116 
foundLše
 = 
çl£
;

117 
	`¡rıy
(
ÃxtLše
, "");

118 
	`¡rıy
(
ÃxtWÜd
, "");

120 
çl£
 =ğ
foundLše
)

122 
ÃxtWÜd
[
i
] = 
süŞlBox
->
sourûText
[süŞlBox->
ch¬PŒ
];

123 
ÃxtWÜd
[
i
])

127 
‹xtL’gth
 = 
	`®_g‘_‹xt_width
(
fÚt
[
cu¼’tFÚt
].
‰fFÚt
, 
ÃxtLše
è+‡l_g‘_‹xt_width(fÚt[cu¼’tFÚt].‰fFÚt, 
ÃxtWÜd
);

128 
boxWidth
 = 
süŞlBox
->
width
;

129 ià(
‹xtL’gth
 < 
boxWidth
)

131 
´eviousS·û
 = 
süŞlBox
->
ch¬PŒ
;

132 
ÃxtWÜd
[
i
+1] = '\0';

133 
	`¡rÿt
(
ÃxtLše
, 
ÃxtWÜd
);

134 
	`¡rıy
(
ÃxtWÜd
, "");

135 
i
 = -1;

139 
süŞlBox
->
ch¬PŒ
 = 
´eviousS·û
;

140 
foundLše
 = 
Œue
;

147 
ÃxtWÜd
[
i
] = '\0';

148 
	`¡rÿt
(
ÃxtLše
, 
ÃxtWÜd
);

149 
	`¡rıy
(
ÃxtWÜd
, "");

150 
i
 = -1;

151 
foundLše
 = 
Œue
;

152 
süŞlBox
->
ch¬PŒ
++;

156 
ÃxtWÜd
[
i
] = '\0';

157 
	`¡rÿt
(
ÃxtLše
, 
ÃxtWÜd
);

158 
	`¡rıy
(
ÃxtWÜd
, "");

159 
i
 = -1;

160 
foundLše
 = 
Œue
;

161 
süŞlBox
->
ch¬PŒ
++;

165 
ÃxtWÜd
[
i
] = '\0';

166 
	`¡rÿt
(
ÃxtLše
, 
ÃxtWÜd
);

167 
	`¡rıy
(
ÃxtWÜd
, "");

168 
i
 = -1;

169 
foundLše
 = 
Œue
;

170 
süŞlBox
->
ch¬PŒ
++;

173 
süŞlBox
->
	`funcPŒ
();

177 
ÃxtWÜd
[
i
] = '\0';

178 
süŞlBox
->
ch¬PŒ
++;

182 
ÃxtWÜd
[
i
] = '\0';

183 
süŞlBox
->
ch¬PŒ
++;

187 
ÃxtWÜd
[
i
] = '\0';

188 
süŞlBox
->
süŞlD–ay
 = 50.0f;

189 
süŞlBox
->
ch¬PŒ
++;

190 
foundLše
 = 
Œue
;

194 
i
++;

195 
süŞlBox
->
ch¬PŒ
++;

196 ià(
süŞlBox
->
ch¬PŒ
 > ()
	`¡¾’
(süŞlBox->
sourûText
))

198 
	`¡rÿt
(
ÃxtLše
, 
ÃxtWÜd
);

199 
foundLše
 = 
Œue
;

202 
	`¡rıy
(
süŞlBox
->
lše
[0].
‹xt
, 
ÃxtLše
);

204  
ÃxtLše
;

205 
	}
}

210 
	$gui_süŞlOÃLše
(
_süŞlBox
 *
süŞlBox
)

213 
lšeHeight
;

215 
lšeHeight
 = 
	`®_g‘_fÚt_lše_height
(
fÚt
[
cu¼’tFÚt
].
‰fFÚt
);

217 
´eviousSüŞlY
 = 
süŞlBox
->
süŞlY
;

220 
süŞlBox
->
süŞlY
++;

222 ià(
süŞlBox
->
süŞlY
 > 
lšeHeight
)

224 
süŞlBox
->
süŞlY
 = 0;

225 
	`gui_g‘NextTextLše
(
süŞlBox
);

226 
süŞlBox
->
lšesToPršt
++;

227 ià(
süŞlBox
->
lšesToPršt
 > süŞlBox->
height
 / 
lšeHeight
)

228 
süŞlBox
->
lšesToPršt
 = süŞlBox->
height
 / 
lšeHeight
;

230 
	}
}

235 
	$gui_süŞlSüŞlBox
(
_süŞlBox
 *
süŞlBox
)

240 ià(
süŞlBox
->
süŞlD–ay
 > 0)

242 
süŞlBox
->
süŞlD–ayCouÁ
 +ğsüŞlBox->
süŞlS³ed
;

244 ià(
süŞlBox
->
süŞlD–ayCouÁ
 > süŞlBox->
süŞlD–ay
)

246 
süŞlBox
->
süŞlD–ayCouÁ
 = 0.0f;

247 
süŞlBox
->
süŞlD–ay
 = 
šŒoSüŞlD–ay
;

248 
	`gui_süŞlOÃLše
(
süŞlBox
);

253 
	`gui_süŞlOÃLše
(
süŞlBox
);

256 
v›wSüŞlY
 = 
süŞlBox
->
süŞlY
;

257 
	}
}

	@../src/io/io_configFile.cpp

1 
	~"../../hdr/sys_glob®s.h
"

3 
ALLEGRO_CONFIG
 *
	gcÚfigFe
 = 
NULL
;

4 
ALLEGRO_CONFIG
 *
	gd©aba£Fe
 = 
NULL
;

9 
	$io_lßdCÚfigFe
(
¡ršg
 
feName
)

12 
cÚfigFe
 = 
	`®_lßd_cÚfig_fe
(
feName
.
	`c_¡r
());

13 ià(
NULL
 =ğ
cÚfigFe
)

15 
	`´štf
("Error: Could‚ot open config file. Exiting\n");

16 
	`sys_”rÜF©®
("io_lßdCÚfigFe", 
__LINE__
, "Error: Couldn't open config file. Exiting");

21 
	`®_§ve_cÚfig_fe
(
feName
.
	`c_¡r
(), 
cÚfigFe
);

22 
	}
}

27 
	$io_şo£CÚfigFe
()

30 
	`®_de¡roy_cÚfig
(
cÚfigFe
);

31 
cÚfigFe
 = 
NULL
;

32 
	}
}

37 
	$io_§veCÚfigFe
(
¡ršg
 
feName
)

42 ià(
cÚfigFe
 =ğ
NULL
)

44 
	`cÚ_´št
(
Œue
, 
çl£
, "Invalid config file…ointer");

48 ià(
çl£
 =ğ
	`®_§ve_cÚfig_fe
(
feName
.
	`c_¡r
(), 
cÚfigFe
))

50 
	`cÚ_´št
(
Œue
, 
çl£
, "E¼Ü: Could‚Ù savcÚfig v®ue tØf[ % ]", 
feName
.
	`c_¡r
());

51 
	`sys_”rÜF©®
("io_§veCÚfigFe", 
__LINE__
, "Error: Could‚ot save config valueso file\n");

53 
	}
}

58 
	$io_»adCÚfigV®uesIÁ
 (
¡ršg
 
v¬Name
)

61 cÚ¡ *
»tuºV®ue
;

63 
»tuºV®ue
 = 
	`®_g‘_cÚfig_v®ue
(
cÚfigFe
, "O±iÚs", 
v¬Name
.
	`c_¡r
());

64 ià(
NULL
 =ğ
»tuºV®ue
)

66 
	`´štf
("E¼Ü: Could‚Ù g‘ v®uäom cÚfig f[ % ]. Ex™šg\n", 
v¬Name
.
	`c_¡r
());

67 
	`sys_”rÜF©®
(
__FILE__
,
__LINE__
, "Error: Could‚ot get value from config file. Exiting\n");

72  
	`©oi
(
»tuºV®ue
);

73 
	}
}

78 
	$io_»adCÚfigV®uesFlßt
 (
¡ršg
 
v¬Name
)

81 
»tuºV®ue
;

83 
»tuºV®ue
 = 
	`©of
(
	`®_g‘_cÚfig_v®ue
(
cÚfigFe
, "O±iÚs", 
v¬Name
.
	`c_¡r
()));

84 ià(
NULL
 =ğ
»tuºV®ue
)

86 
	`´štf
("Error: Could‚ot get value from config file. Exiting\n");

87 
	`sys_”rÜF©®
(
__FILE__
,
__LINE__
, "Error: Could‚ot get value from config file. Exiting\n");

90 
	`io_§veCÚfigV®ueFlßt
(
v¬Name
, 
»tuºV®ue
);

92  
»tuºV®ue
;

93 
	}
}

98 
	$io_§veCÚfigV®ueSŒšg
(
¡ršg
 
v¬Name
, sŒšg 
v¬V®ue
)

101 ià(
cÚfigFe
 !ğ
NULL
)

102 
	`®_£t_cÚfig_v®ue
(
cÚfigFe
, "O±iÚs", 
v¬Name
.
	`c_¡r
(), 
v¬V®ue
.c_str());

104 
	`io_logToFe
("Error: io_saveConfigValueString: configFile is NULL");

105 
	}
}

110 
	$io_§veCÚfigV®ueFlßt
(
¡ršg
 
v¬Name
, 
v¬V®ue
)

113 
‹mpV®ue
[
MAX_STRING_SIZE
];

115 
	`¥rštf
(
‹mpV®ue
, "%3.2f", 
v¬V®ue
);

117 
	`®_£t_cÚfig_v®ue
(
cÚfigFe
, "O±iÚs", 
v¬Name
.
	`c_¡r
(), 
‹mpV®ue
);

118 
	}
}

123 
	$io_§veCÚfigV®ueIÁ
(
¡ršg
 
v¬Name
, 
v¬V®ue
)

126 
‹mpV®ue
[
MAX_STRING_SIZE
];

128 
	`¥rštf
(
‹mpV®ue
, "%i", 
v¬V®ue
);

130 
	`®_£t_cÚfig_v®ue
(
cÚfigFe
, "O±iÚs", 
v¬Name
.
	`c_¡r
(), 
‹mpV®ue
);

131 
	}
}

136 
	$io_g‘DBV®ueIÁ
(cÚ¡ *
whichKey
)

139 cÚ¡ *
v®ue
;

141 ià(
NULL
 =ğ
d©aba£Fe
)

142 
	`sys_”rÜF©®
(
__FILE__
, 
__LINE__
, "Error: Config file‚o†onger valid");

144 
v®ue
 = 
	`®_g‘_cÚfig_v®ue
(
d©aba£Fe
, "droidInfo", 
whichKey
);

145 ià(
NULL
 =ğ
v®ue
)

146 
	`sys_”rÜF©®
("io_g‘DBV®ueIÁ", 
__LINE__
, "E¼Ü: NØkey v®u[ % ]", 
whichKey
);

148  
	`©oi
(
v®ue
);

149 
	}
}

154 
	$io_g‘DBV®ueFlßt
(cÚ¡ *
whichKey
)

157 cÚ¡ *
v®ue
;

159 ià(
NULL
 =ğ
d©aba£Fe
)

160 
	`sys_”rÜF©®
(
__FILE__
, 
__LINE__
, "Error: Config file‚o†onger valid");

162 
v®ue
 = 
	`®_g‘_cÚfig_v®ue
(
d©aba£Fe
, "droidInfo", 
whichKey
);

163 ià(
NULL
 =ğ
v®ue
)

164 
	`sys_”rÜF©®
(
__FILE__
, 
__LINE__
, "E¼Ü: NØkey v®u[ % ]", 
whichKey
);

166  
	`©of
(
v®ue
);

167 
	}
}

172 cÚ¡ *
	$io_g‘DBV®ueSŒšg
(cÚ¡ *
whichKey
)

175 cÚ¡ *
v®ue
;

177 ià(
NULL
 =ğ
d©aba£Fe
)

178 
	`sys_”rÜF©®
(
__FILE__
, 
__LINE__
, "Error: Config file‚o†onger valid");

180 
v®ue
 = 
	`®_g‘_cÚfig_v®ue
(
d©aba£Fe
, "droidInfo", 
whichKey
);

181 ià(
NULL
 =ğ
v®ue
)

182 
	`sys_”rÜF©®
(
__FILE__
, 
__LINE__
, "E¼Ü: NØkey v®u[ % ]", 
whichKey
);

184  
v®ue
;

185 
	}
}

189 
boŞ
 
	$io_g‘DBDroidInfo
(
dbIndex
, cÚ¡ *
feName
)

192 
imageIndexCouÁ”
 = 
¥r™e_001
;

194 
‹mpV®ue
[
MAX_STRING_SIZE
 * 2];

196 
lßdšgB¬P”ûÁ
 +ğ1.0à/ 
NUM_SPRITE_TYPES
;

197 
	`¡rıy
(
lßdšgStus
, 
feName
);

198 
	`®_»¡
(
´og»ssB¬LßdTimes
);

200 
d©aba£Fe
 = 
	`®_lßd_cÚfig_fe
(
feName
);

201 ià(
NULL
 =ğ
d©aba£Fe
)

202 
	`sys_”rÜF©®
(
__FILE__
, 
__LINE__
, "E¼Ü: could‚Ù o³Àd©aba£ f[ % ]", 
feName
);

205 
d©aBa£EÁry
[
dbIndex
].
maxH—Éh
 = 
	`io_g‘DBV®ueIÁ
("max_health");

206 ià(0 =ğ
dbIndex
)

208 
d©aBa£EÁry
[
dbIndex
].
maxS³ed
 = 
	`io_g‘DBV®ueFlßt
("max_speed");

209 
d©aBa£EÁry
[
dbIndex
].
acûË¿‹
 = 
	`io_g‘DBV®ueFlßt
("accelerate");

217 
d©aBa£EÁry
[
dbIndex
].
maxS³ed
 = d©aBa£EÁry[0].maxS³ed + 
	`io_g‘DBV®ueFlßt
("max_speed");

218 
d©aBa£EÁry
[
dbIndex
].
acûË¿‹
 = d©aBa£EÁry[0].
maxS³ed
 + 
	`io_g‘DBV®ueFlßt
("accelerate");

221 
d©aBa£EÁry
[
dbIndex
].
scÜe
 = 
	`io_g‘DBV®ueIÁ
("score");

222 
d©aBa£EÁry
[
dbIndex
].
bounûDamage
 = 
	`io_g‘DBV®ueIÁ
("bounce_damage");

223 
d©aBa£EÁry
[
dbIndex
].
ÿnShoÙ
 = 
	`io_g‘DBV®ueIÁ
("can_shoot");

224 
d©aBa£EÁry
[
dbIndex
].
buÎ‘Ty³
 = 
	`io_g‘DBV®ueIÁ
("bullet_type");

229 
d©aBa£EÁry
[
dbIndex
].
buÎ‘Ty³
)

232 
d©aBa£EÁry
[
dbIndex
].
buÎ‘Ty³
 = 
BULLET_TYPE_NORMAL
;

236 
d©aBa£EÁry
[
dbIndex
].
buÎ‘Ty³
 = 
BULLET_TYPE_SINGLE
;

240 
d©aBa£EÁry
[
dbIndex
].
buÎ‘Ty³
 = 
BULLET_TYPE_DOUBLE
;

244 
d©aBa£EÁry
[
dbIndex
].
buÎ‘Ty³
 = 
BULLET_TYPE_DISRUPTER
;

248 
d©aBa£EÁry
[
dbIndex
].
chªûToShoÙ
 = 
	`io_g‘DBV®ueIÁ
 ("chance_to_shoot");

249 
d©aBa£EÁry
[
dbIndex
].
buÎ‘Damage
 = 
	`io_g‘DBV®ueIÁ
 ("bullet_damage");

250 
d©aBa£EÁry
[
dbIndex
].
di¤u±”ImmuÃ
 = 
	`io_g‘DBV®ueIÁ
 ("disrupter_immune");

251 
d©aBa£EÁry
[
dbIndex
].
»ch¬geTime
 = 
	`io_g‘DBV®ueFlßt
 ("recharge_time");

252 
d©aBa£EÁry
[
dbIndex
].
tok’CouÁ
 = 
	`io_g‘DBV®ueIÁ
 ("token_count");

253 
	`¡rıy
(
d©aBa£EÁry
[
dbIndex
].
desütiÚ
, 
	`io_g‘DBV®ueSŒšg
 ("description"));

254 
	`¡rıy
(
d©aBa£EÁry
[
dbIndex
].
dbImageFeName
, 
	`io_g‘DBV®ueSŒšg
("dbImageFileName"));

255 
	`¡rıy
(
d©aBa£EÁry
[
dbIndex
].
şassName
, 
	`io_g‘DBV®ueSŒšg
 ("className"));

256 
	`¡rıy
(
d©aBa£EÁry
[
dbIndex
].
height
, 
	`io_g‘DBV®ueSŒšg
 ("height"));

257 
	`¡rıy
(
d©aBa£EÁry
[
dbIndex
].
weight
, 
	`io_g‘DBV®ueSŒšg
 ("weight"));

258 
	`¡rıy
(
d©aBa£EÁry
[
dbIndex
].
drive
, 
	`io_g‘DBV®ueSŒšg
 ("drive"));

259 
	`¡rıy
(
d©aBa£EÁry
[
dbIndex
].
b¿š
, 
	`io_g‘DBV®ueSŒšg
 ("brain"));

260 
	`¡rıy
(
d©aBa£EÁry
[
dbIndex
].
w—pÚ
, 
	`io_g‘DBV®ueSŒšg
 ("armanent"));

261 
	`¡rıy
(
d©aBa£EÁry
[
dbIndex
].
£nsÜ1
, 
	`io_g‘DBV®ueSŒšg
 ("sensor1"));

262 
	`¡rıy
(
d©aBa£EÁry
[
dbIndex
].
£nsÜ2
, 
	`io_g‘DBV®ueSŒšg
 ("sensor2"));

263 
	`¡rıy
(
d©aBa£EÁry
[
dbIndex
].
£nsÜ3
, 
	`io_g‘DBV®ueSŒšg
 ("sensor3"));

264 
	`¡rıy
(
d©aBa£EÁry
[
dbIndex
].
nÙes
, 
	`io_g‘DBV®ueSŒšg
 ("notes"));

267 
d©aBa£EÁry
[
dbIndex
].
imageIndex
 = 
imageIndexCouÁ”
;

268 
imageIndexCouÁ”
++;

275 
	`®_de¡roy_cÚfig
(
d©aba£Fe
);

277  
Œue
;

278 
	}
}

	@../src/io/io_images.cpp

1 
	~"../../hdr/sys_glob®s.h
"

3 
_images
 
	gimage
[] =

5 {
NULL
, "®Ées.bmp", 
çl£
, 0},

6 {
NULL
, "hud.tga", 
çl£
, 
æagKeyCŞÜ
 | 
æagC’‹rX
},

7 {
NULL
, "001.bmp", 
çl£
, 
æagKeyCŞÜ
},

8 {
NULL
, "123.bmp", 
çl£
, 
æagKeyCŞÜ
},

9 {
NULL
, "139.bmp", 
çl£
, 
æagKeyCŞÜ
},

10 {
NULL
, "247.bmp", 
çl£
, 
æagKeyCŞÜ
},

11 {
NULL
, "249.bmp", 
çl£
, 
æagKeyCŞÜ
},

12 {
NULL
, "296.bmp", 
çl£
, 
æagKeyCŞÜ
},

13 {
NULL
, "302.bmp", 
çl£
, 
æagKeyCŞÜ
},

14 {
NULL
, "329.bmp", 
çl£
, 
æagKeyCŞÜ
},

15 {
NULL
, "420.bmp", 
çl£
, 
æagKeyCŞÜ
},

16 {
NULL
, "476.bmp", 
çl£
, 
æagKeyCŞÜ
},

17 {
NULL
, "493.bmp", 
çl£
, 
æagKeyCŞÜ
},

18 {
NULL
, "516.bmp", 
çl£
, 
æagKeyCŞÜ
},

19 {
NULL
, "571.bmp", 
çl£
, 
æagKeyCŞÜ
},

20 {
NULL
, "598.bmp", 
çl£
, 
æagKeyCŞÜ
},

21 {
NULL
, "614.bmp", 
çl£
, 
æagKeyCŞÜ
},

22 {
NULL
, "615.bmp", 
çl£
, 
æagKeyCŞÜ
},

23 {
NULL
, "629.bmp", 
çl£
, 
æagKeyCŞÜ
},

24 {
NULL
, "711.bmp", 
çl£
, 
æagKeyCŞÜ
},

25 {
NULL
, "742.bmp", 
çl£
, 
æagKeyCŞÜ
},

26 {
NULL
, "751.bmp", 
çl£
, 
æagKeyCŞÜ
},

27 {
NULL
, "821.bmp", 
çl£
, 
æagKeyCŞÜ
},

28 {
NULL
, "834.bmp", 
çl£
, 
æagKeyCŞÜ
},

29 {
NULL
, "883.bmp", 
çl£
, 
æagKeyCŞÜ
},

30 {
NULL
, "999.bmp", 
çl£
, 
æagKeyCŞÜ
},

31 {
NULL
, "¥Ïsh.²g", 
çl£
, 
æagFuÎSü“n
},

32 {
NULL
, "buÎ‘_001.bmp", 
çl£
, 
æagKeyCŞÜ
},

33 {
NULL
, "buÎ‘_476.bmp", 
çl£
, 
æagKeyCŞÜ
},

34 {
NULL
, "buÎ‘_821.bmp", 
çl£
, 
æagKeyCŞÜ
},

35 {
NULL
, "ex¶osiÚ.bmp", 
çl£
, 
æagKeyCŞÜ
},

36 {
NULL
, "‹rm1.bmp", 
çl£
, 
æagKeyCŞÜ
},

37 {
NULL
, "‹rm2.bmp", 
çl£
, 
æagKeyCŞÜ
},

38 {
NULL
, "‹rm3.bmp", 
çl£
, 
æagKeyCŞÜ
},

39 {
NULL
, "db_001.jpg", 
çl£
, 
æagKeyCŞÜ
},

40 {
NULL
, "¥Ùlight.²g", 
çl£
, 
æagKeyCŞÜ
},

41 {
NULL
, "®Ées_128.bmp", 
çl£
, 
æagKeyCŞÜ
},

44 
	gcu¼’tTeTy³
 = 
TILESET_CLASSIC
;

45 
	gcu¼’tTeCŞÜ
 = 
TILESET_GREY
;

51 
boŞ
 
	$io_lßdImage
(
šdex
, cÚ¡ *
feName
)

54 
ALLEGRO_COLOR
 
keyCŞÜ
;

56 
image
[
šdex
].imagğ
	`®_lßd_b™m­
 (
feName
);

58 ià(
NULL
 =ğ
image
[
šdex
].image)

60 
	`io_logToFe
("Lßdšg imagçed [ % ]", 
feName
);

61  
çl£
;

64 
	`io_logToFe
("Lßded imag[ % ]", 
feName
);

66 ià((
image
[
šdex
].
imageFÏgs
 & 
æagKeyCŞÜ
) == flagKeyColor)

68 
keyCŞÜ
 = 
	`®_g‘_pix–
(
image
[
šdex
].image, 0, 0);

70 
	`®_cÚv”t_mask_to_®pha
(
image
[
šdex
].image, 
keyCŞÜ
);

72  
Œue
;

73 
	}
}

78 
	$io_lßdNewTeS‘
()

81 
¡ršg
 
teS‘FeName
;

82 
¡ršg
 
teS‘Sm®lFeName
;

84 
teS‘FeName
 = "";

85 
teS‘Sm®lFeName
 = "";

87 
cu¼’tTeTy³
)

89 
TILESET_CLASSIC
:

90 
teS‘FeName
 = "alltiles.bmp";

91 
teS‘Sm®lFeName
 = "alltiles_128.bmp";

92 
	`io_lßdImage
(
tes
, 
teS‘FeName
.
	`c_¡r
());

93 
	`io_lßdImage
(
tesSm®l
, 
teS‘Sm®lFeName
.
	`c_¡r
());

97 
TILESET_FUTURE
:

98 
teS‘FeName
 = "future_";

99 
teS‘Sm®lFeName
 = "future_";

102 
TILESET_RETRO
:

103 
teS‘FeName
 = "retro_";

104 
teS‘Sm®lFeName
 = "retro_";

108 
teS‘FeName
 = "retro_";

109 
teS‘Sm®lFeName
 = "retro_";

113 
cu¼’tTeCŞÜ
)

115 
TILESET_RED
:

116 
teS‘FeName
 += "red.bmp";

117 
teS‘Sm®lFeName
 += "red_128.bmp";

119 
TILESET_GREEN
:

120 
teS‘FeName
 += "green.bmp";

121 
teS‘Sm®lFeName
 += "green_128.bmp";

123 
TILESET_BLUE
:

124 
teS‘FeName
 += "blue.bmp";

125 
teS‘Sm®lFeName
 += "blue_128.bmp";

127 
TILESET_DARK
:

128 
teS‘FeName
 += "dark.bmp";

129 
teS‘Sm®lFeName
 += "dark_128.bmp";

131 
TILESET_GREY
:

132 
teS‘FeName
 += "gray.bmp";

133 
teS‘Sm®lFeName
 += "gray_128.bmp";

135 
TILESET_YELLOW
:

136 
teS‘FeName
 += "yellow.bmp";

137 
teS‘Sm®lFeName
 += "yellow_128.bmp";

139 
TILESET_TURQUOISE
:

140 
teS‘FeName
 += "turquoise.bmp";

141 
teS‘Sm®lFeName
 += "turquoise_128.bmp";

144 
teS‘FeName
 += "blue.bmp";

145 
teS‘Sm®lFeName
 += "blue_128.bmp";

148 
	`io_lßdImage
(
tes
, 
teS‘FeName
.
	`c_¡r
());

149 
	`io_lßdImage
(
tesSm®l
, 
teS‘Sm®lFeName
.
	`c_¡r
());

151 
	`cÚ_´štUpd©e
(
Œue
, "Lßded£ˆ[ % ]", 
teS‘FeName
.
	`c_¡r
());

152 
	`cÚ_´štUpd©e
(
Œue
, "Lßded£ˆ[ % ]", 
teS‘Sm®lFeName
.
	`c_¡r
());

153 
	}
}

159 
	$io_£tTeS‘CŞÜ
(
¡ršg
 
teCŞÜ
)

162 
befÜeD¬kCŞÜ
;

164 ià(
teCŞÜ
 == "save")

166 ià(
cu¼’tTeCŞÜ
 !ğ
TILESET_DARK
)

167 
befÜeD¬kCŞÜ
 = 
cu¼’tTeCŞÜ
;

171 ià(
teCŞÜ
 == "restore")

172 
cu¼’tTeCŞÜ
 = 
befÜeD¬kCŞÜ
;

174 ià(
teCŞÜ
 == "help")

176 
	`cÚ_´št
(
çl£
, 
Œue
, "Tile colors -ileset_ [„ed, green, blue, dark, gray, yellow,urquoise ]");

180 ià(
teCŞÜ
 == "red")

182 
cu¼’tTeCŞÜ
 = 
TILESET_RED
;

185 ià(
teCŞÜ
 == "blue")

187 
cu¼’tTeCŞÜ
 = 
TILESET_BLUE
;

190 ià(
teCŞÜ
 == "green")

192 
cu¼’tTeCŞÜ
 = 
TILESET_GREEN
;

195 ià(
teCŞÜ
 == "dark")

197 
cu¼’tTeCŞÜ
 = 
TILESET_DARK
;

200 ià(
teCŞÜ
 == "gray")

202 
cu¼’tTeCŞÜ
 = 
TILESET_GREY
;

205 ià(
teCŞÜ
 == "yellow")

207 
cu¼’tTeCŞÜ
 = 
TILESET_YELLOW
;

210 ià(
teCŞÜ
 == "turquoise")

212 
cu¼’tTeCŞÜ
 = 
TILESET_TURQUOISE
;

215 
	`io_lßdNewTeS‘
();

216 
	}
}

224 
	$io_£tTeS‘Ty³
(
¡ršg
 
teTy³
)

227 ià(
teTy³
 == "help")

229 
	`cÚ_´št
(
çl£
, 
Œue
, "Tileypes -iletype_ [ classic, future,„etro ]");

233 ià(
teTy³
 == "classic")

235 
cu¼’tTeTy³
 = 
TILESET_CLASSIC
;

238 ià(
teTy³
 == "retro")

240 
cu¼’tTeTy³
 = 
TILESET_RETRO
;

243 ià(
teTy³
 == "future")

245 
cu¼’tTeTy³
 = 
TILESET_FUTURE
;

247 
	`io_lßdNewTeS‘
();

248 
	}
}

253 
boŞ
 
	$io_lßdAÎImages
()

256 
i
 = 0; i !ğ
numImages
; i++)

258 
	`¡rıy
(
lßdšgStus
, 
image
[
i
].
feName
);

259 
lßdšgB¬P”ûÁ
 +ğ1.0à/ 
numImages
;

260 
	`®_»¡
(
´og»ssB¬LßdTimes
);

262 ià(
Œue
 =ğ
	`io_lßdImage
(
i
, 
image
[i].
feName
))

264 
image
[
i
].
lßdedOk
 = 
Œue
;

268 
image
[
i
].
lßdedOk
 = 
çl£
;

269 
	`cÚ_´št
(
Œue
, 
çl£
, "ERROR: FaedØlßd imag[ % ]", 
image
[
i
].
feName
);

270 
	`sys_”rÜF©®
(
__FILE__
, 
__LINE__
, "Error: Failedo†oad image file");

273 
lßdšgB¬P”ûÁ
 = 0.0f;

274 
cu¼’tTeCŞÜ
 = 
TILESET_BLUE
;

275 
cu¼’tTeTy³
 = 
TILESET_RETRO
;

276 
	`sys_ÿlcHudTextPos™iÚ
(
	`®_g‘_b™m­_width
(
image
[
hud
].image), 
	`®_g‘_b™m­_height
(image[hud].image));

277  
Œue
;

278 
	}
}

283 
	$io_cÚv”tImages
()

286 
ALLEGRO_BITMAP
 *
‹mpB™m­
;

288 
i
 = 0; i !ğ
numImages
; i++)

290 
‹mpB™m­
 = 
	`®_şÚe_b™m­
(
image
[
i
].image);

291 
image
[
i
].imagğ
	`®_şÚe_b™m­
(
‹mpB™m­
);

293 
	}
}

306 
	$®e_sü“nshÙ
(cÚ¡ *
de¡š©iÚ_·th
, cÚ¡ *
gam’ame
)

309 
ALLEGRO_PATH
 *
·th
;

310 *
f’ame
, *
f’ame_wp
;

311 
tm
 *
tmp
;

312 
time_t
 
t
;

313 
i
;

314 cÚ¡ *
·th_c¡r
;

316 if(!
de¡š©iÚ_·th
)

317 
·th
 = 
	`®_g‘_¡ªd¬d_·th
(
ALLEGRO_USER_DOCUMENTS_PATH
);

319 
·th
 = 
	`®_ü—‹_·th_fÜ_dœeùÜy
(
de¡š©iÚ_·th
);

321 if(!
·th
)

324 if(!
gam’ame
)

326 ifĞ!(
gam’ame
 = 
	`®_g‘_­p_Çme
()) )

328 
	`®_de¡roy_·th
(
·th
);

333 
t
 = 
	`time
(0);

334 
tmp
 = 
	`loÿÉime
(&
t
);

335 if(!
tmp
)

337 
	`®_de¡roy_·th
(
·th
);

342 iàĞ!(
f’ame_wp
 = 
f’ame
 = (*)
	`m®loc
(
	`¡¾’
(
gam’ame
) + 9 + 2 + 1)) )

344 
	`®_de¡roy_·th
(
·th
);

348 
	`¡rıy
(
f’ame
, 
gam’ame
);

350 ; *
f’ame_wp
 != '.' && *filename_wp != 0; ++filename_wp);

352 *
f’ame_wp
++ = '-';

353 if(
	`¡ráime
(
f’ame_wp
, 9, "%Y%m%d", 
tmp
) != 8)

355 
	`ä“
(
f’ame
);

356 
	`®_de¡roy_·th
(
·th
);

359 
f’ame_wp
 += 8;

361 
i
 = 0; i < 26*26; ++i)

363 if(
i
 > 25)

365 
f’ame_wp
[0] = (
i
 / 26) + 'a';

366 
f’ame_wp
[1] = (
i
 % 26) + 'a';

367 
f’ame_wp
[2] = 0;

371 
f’ame_wp
[0] = (
i
 % 26) + 'a';

372 
f’ame_wp
[1] = 0;

375 
	`®_£t_·th_f’ame
(
·th
, 
f’ame
);

376 
	`®_£t_·th_ex‹nsiÚ
(
·th
, ".png");

377 
·th_c¡r
 = 
	`®_·th_c¡r
(
·th
, 
ALLEGRO_NATIVE_PATH_SEP
);

379 ià(
	`®_f’ame_exi¡s
(
·th_c¡r
))

382 
	`®_§ve_b™m­
(
·th_c¡r
, 
	`®_g‘_rg‘_b™m­
());

383 
	`ä“
(
f’ame
);

384 
	`®_de¡roy_·th
(
·th
);

388 
	`ä“
(
f’ame
);

389 
	`®_de¡roy_·th
(
·th
);

392 
	}
}

	@../src/io/io_keyBind.cpp

2 
	~"../../hdr/sys_glob®s.h
"

4 
ALLEGRO_FILE
 *
	gfePŒ
;

6 
_šputAùiÚ
 
	gšputAùiÚ
[
NUMBER_ACTIONS
];

11 
boŞ
 
	$io_´štKeyBšd
()

14 
couÁ
 = 0;

16 
	`cÚ_´št
(
Œue
, 
çl£
, "C®Ëd from io_´štKeyBšd - [ %˜]", 
couÁ
);

17 
	`cÚ_´št
(
Œue
, 
çl£
, "------------------------------------");

19 
i
 = 0; i !ğ
NUMBER_ACTIONS
; i++)

21 
	`cÚ_£tCŞÜ
(0.0f, 1.0f, 0.0f, 1.0f);

22 
	`cÚ_´št
(
Œue
, 
çl£
, "Keybšd: [ % ] = [ %˜]", 
šputAùiÚ
[
i
].
¡ršgV®ue
, iÅutAùiÚ[i].
keyV®ue
);

25  
Œue
;

26 
	}
}

31 
	$io_»£tKeybßrdS‹s
()

34 
i
 = 0; i !ğ
NUMBER_ACTIONS
; i++)

35 
šputAùiÚ
[
i
].
cu¼’yDown
 = 
çl£
;

36 
	}
}

41 
	$io_m­AùiÚKeys
()

44 
šputAùiÚ
[
gameLeá
].
keyV®ue
 = 
ALLEGRO_KEY_LEFT
;

45 
	`¡rıy
(
šputAùiÚ
[
gameLeá
].
¡ršgV®ue
, "Move Left");

47 
šputAùiÚ
[
gameRight
].
keyV®ue
 = 
ALLEGRO_KEY_RIGHT
;

48 
	`¡rıy
(
šputAùiÚ
[
gameRight
].
¡ršgV®ue
, "MoveRight");

50 
šputAùiÚ
[
gameUp
].
keyV®ue
 = 
ALLEGRO_KEY_UP
;

51 
	`¡rıy
(
šputAùiÚ
[
gameUp
].
¡ršgV®ue
, "Move Up");

53 
šputAùiÚ
[
gameDown
].
keyV®ue
 = 
ALLEGRO_KEY_DOWN
;

54 
	`¡rıy
(
šputAùiÚ
[
gameDown
].
¡ršgV®ue
, "Move Down");

56 
šputAùiÚ
[
gameFœe
].
keyV®ue
 = 
ALLEGRO_KEY_LCTRL
;

57 
	`¡rıy
(
šputAùiÚ
[
gameFœe
].
¡ršgV®ue
, "Action key");

59 
šputAùiÚ
[
gameEsÿ³
].
keyV®ue
 = 
ALLEGRO_KEY_ESCAPE
;

60 
	`¡rıy
(
šputAùiÚ
[
gameEsÿ³
].
¡ršgV®ue
, "Exithe game");

62 
šputAùiÚ
[
aùiÚSü“nShÙ
].
keyV®ue
 = 
ALLEGRO_KEY_F12
;

63 
	`¡rıy
(
šputAùiÚ
[
aùiÚSü“nShÙ
].
¡ršgV®ue
, "Save Screenshot");

65 
šputAùiÚ
[
cÚsŞeAùiÚ
].
keyV®ue
 = 
ALLEGRO_KEY_TILDE
;

66 
	`¡rıy
(
šputAùiÚ
[
cÚsŞeAùiÚ
].
¡ršgV®ue
, "Show console");

68 
šputAùiÚ
[
m’uUp
].
keyV®ue
 = 
ALLEGRO_KEY_UP
;

69 
	`¡rıy
(
šputAùiÚ
[
m’uUp
].
¡ršgV®ue
, "Menu Up");

71 
šputAùiÚ
[
m’uDown
].
keyV®ue
 = 
ALLEGRO_KEY_DOWN
;

72 
	`¡rıy
(
šputAùiÚ
[
m’uDown
].
¡ršgV®ue
, "Menu Down");

74 
šputAùiÚ
[
m’uAùiÚ
].
keyV®ue
 = 
ALLEGRO_KEY_ENTER
;

75 
	`¡rıy
(
šputAùiÚ
[
m’uAùiÚ
].
¡ršgV®ue
, "Menu‡ction key");

77 
šputAùiÚ
[
gamePau£
].
keyV®ue
 = 
ALLEGRO_KEY_P
;

78 
	`¡rıy
(
šputAùiÚ
[
gamePau£
].
¡ršgV®ue
, "Pause Game");

80 
i
;

84 
	`io_»£tKeybßrdS‹s
();

85 
	}
}

90 
boŞ
 
	$io_»adKeyBšdšgs
 (*
feName
)

93 
ušt
 
numR—d
 = 0;

95 
fePŒ
 = 
	`®_fİ’
(
feName
, "r");

96 ià(
NULL
 =ğ
fePŒ
)

97 
	`sys_”rÜF©®
(
__FILE__
, 
__LINE__
, "Keybšd: E¼Ü: Could‚Ù o³Àf[ % ] fÜ„—dšg.", 
feName
);

99 
numR—d
 = 
	`®_ä—d
(
fePŒ
, (*)
šputAùiÚ
, (inputAction));

100 ià(
numR—d
 !ğ(
šputAùiÚ
))

102 
	`cÚ_´št
(
Œue
, 
çl£
, "Keybind: Error: Readƒrror [ %s ]", "UNKNOWN");

103  
çl£
;

106 
	`®_fşo£
(
fePŒ
);

108 
	`cÚ_´št
(
Œue
, 
çl£
, "Keybind: Info: Key states„ead from file.");

110 
	`io_´štKeyBšd
();

112  
Œue
;

113 
	}
}

118 
boŞ
 
	$io_§veKeyBšdšgs
 (*
feName
)

121 
ušt
 
numWr™e
 = 0;

123 
fePŒ
 = 
	`®_fİ’
(
feName
, "w");

124 ià(
NULL
 =ğ
fePŒ
)

126 
	`cÚ_´št
(
Œue
, 
çl£
, "Keybind: Error: Writeƒrror [ %s ]", "UNKNOWN");

127 
	`sys_”rÜF©®
(
__FILE__
, 
__LINE__
, "Keybšd: E¼Ü: Could‚Ù o³Àf[ % ] fÜ wr™šg.", 
feName
);

130 
numWr™e
 = 
	`®_fwr™e
(
fePŒ
, (*)
šputAùiÚ
, (inputAction));

131 ià(
numWr™e
 !ğ(
šputAùiÚ
))

133 
	`cÚ_´št
(
Œue
, 
çl£
, "Keybind: Error: Writeƒrror [ %s ]", "UNKNOWN");

134  
çl£
;

136 
	`®_fşo£
(
fePŒ
);

138 
	`cÚ_´št
(
Œue
, 
çl£
, "Keybind: Info: Key states savedo file.");

139  
Œue
;

140 
	}
}

146 
boŞ
 
	$io_doKeyBšdšgs
(*
feName
)

149 ià(
NULL
 =ğ
	`®_fİ’
(
feName
, "r"))

151 
	`cÚ_´št
(
Œue
, 
çl£
, "Keybind: Error: Keybind file‚ot found. Creating default.");

152 
	`io_m­AùiÚKeys
();

153 ià(
çl£
 =ğ
	`io_§veKeyBšdšgs
(
feName
))

155 
	`cÚ_´št
(
Œue
, 
çl£
, "Keybind: Error: Couldn't create default keybind file.");

156  
çl£
;

158 ià(
çl£
 =ğ
	`io_»adKeyBšdšgs
(
feName
))

160 
	`cÚ_´št
(
Œue
, 
çl£
, "Keybind: Error: Couldn't„ead default keybind file.");

161  
çl£
;

166 ià(
çl£
 =ğ
	`io_»adKeyBšdšgs
(
feName
))

168 
	`cÚ_´št
(
Œue
, 
çl£
, "Keybind: Error: Couldn't„ead keybind file.");

169 
	`io_m­AùiÚKeys
();

170  
çl£
;

173  
Œue
;

174 
	}
}

	@../src/io/io_keyboard.cpp

1 
	~"../../hdr/sys_glob®s.h
"

2 
	~"../../hdr/game/gam_Œªsãr.h
"

4 
ALLEGRO_KEYBOARD_STATE
 
	gkeybßrd
;

9 
	$io_´oûssAùiÚKey
()

12 ià(
Œue
 =ğ
šputAùiÚ
[
gameFœe
].
cu¼’yDown
)

16 ià((
¶ay”Ov”Te
 =ğ
LIFT_TILE
è&& (
¶ay”V–oc™y
.
x
 =ğ0.0fè&& (¶ay”V–oc™y.
y
 == 0.0f))

18 
	`sys_de¡royPhysicObjeùs
();

19 
	`gam_g‘TuÂ–ToU£
();

20 
	`sys_chªgeMode
(
MODE_LIFT_VIEW
, 
Œue
);

21 
šputAùiÚ
[
gameFœe
].
cu¼’yDown
 = 
çl£
;

22 
	`sys_¡İAÎSounds
();

23 
	`sys_·u£SoundSy¡em
(
Œue
);

24 
	`gam_£tHUDS‹
(
HUD_STATE_LIFT
);

29 ià((
¶ay”Ov”Te
 =ğ
TERMINAL_TOP
è|| (¶ay”Ov”T=ğ
TERMINAL_BOTTOM
è|| (¶ay”Ov”T=ğ
TERMINAL_LEFT
è|| (¶ay”Ov”T=ğ
TERMINAL_RIGHT
))

30 ià((
¶ay”V–oc™y
.
x
 =ğ0.0fè&& (¶ay”V–oc™y.
y
 == 0.0f))

32 
cu¼’tGUISü“n
 = 
	`gui_fšdIndex
(
GUI_OBJECT_SCREEN
, "scrTerminal");

33 
	`sys_chªgeMode
(
MODE_GUI
, 
Œue
);

34 
	`sys_¡İAÎSounds
();

35 
	`sys_·u£SoundSy¡em
(
Œue
);

36 
droidTy³DBIndex
 = 
¶ay”DroidTy³DBIndex
;

41 ià((
¶ay”V–oc™y
.
x
 =ğ0.0è&& (¶ay”V–oc™y.
y
 =ğ0.0è&& (
šputAùiÚ
[
gameLeá
].
cu¼’yDown
 =ğ
çl£
) &&

42 (
çl£
 =ğ
šputAùiÚ
[
gameRight
].
cu¼’yDown
è&& (çl£ =ğšputAùiÚ[
gameDown
].currentlyDown) &&

43 (
çl£
 =ğ
šputAùiÚ
[
gameUp
].
cu¼’yDown
))

45 
šT¿nsãrMode
 = 
Œue
;

50 ià(
çl£
 =ğ
šT¿nsãrMode
)

52 ià((
¶ay”V–oc™y
.
x
 !ğ0.0fè|| (¶ay”V–oc™y.
y
 !ğ0.0fè|| (
šputAùiÚ
[
gameLeá
].
cu¼’yDown
 =ğ
Œue
) ||

53 (
šputAùiÚ
[
gameRight
].
cu¼’yDown
 =ğ
Œue
è|| (šputAùiÚ[
gameUp
].currentlyDown ==rue) ||

54 (
šputAùiÚ
[
gameDown
].
cu¼’yDown
 =ğ
Œue
))

56 ià(
Œue
 =ğ
¶ay”W—pÚR—dyToFœe
)

58 
	`bul_ÃwBuÎ‘
(
¶ay”WÜldMiddËPos
, 
	`ıvadd
(
¶ay”WÜldPos
, 
	`ıvmuÉ
(
¶ay”V–oc™y
, 1000)),

59 
d©aBa£EÁry
[
¶ay”DroidTy³Image
 - 2].
buÎ‘Ty³
, -1);

60 
¶ay”W—pÚR—dyToFœe
 = 
çl£
;

67 
šT¿nsãrMode
 = 
çl£
;

69 
	}
}

74 
	$io_»adIÁroIÅut
(
ALLEGRO_EVENT
 
ev’t
)

77 
ev’t
.
ty³
)

79 
ALLEGRO_EVENT_KEY_DOWN
:

80 ià(
ev’t
.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameFœe
].
keyV®ue
)

82 
	`sys_chªgeMode
(
MODE_GUI
, 
Œue
);

83 ià(
	`sys_isSoundPÏyšg
(
SND_SCROLLBEEPS
))

84 
	`sys_¡İSound
(
SND_SCROLLBEEPS
);

88 
	}
}

93 
	$io_»adT¿nsãrKeybßrd
(
ALLEGRO_EVENT
 
ev’t
)

99 ià((
ev’t
.
ty³
 =ğ
ALLEGRO_EVENT_KEY_DOWN
è&& (ev’t.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameEsÿ³
].
keyV®ue
))

101 
	`sys_chªgeMode
(
MODE_SHOWLEVEL
, 
Œue
);

105 
cu¼’tMode
)

107 
MODE_TRANSFER_INTRO
:

108 ià((
ev’t
.
ty³
 =ğ
ALLEGRO_EVENT_KEY_DOWN
è&& (ev’t.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameFœe
].
keyV®ue
))

110 
	`sys_chªgeMode
(
MODE_TRANSFER_INTRO_1
, 
Œue
);

111 
šputAùiÚ
[
gameFœe
].
cu¼’yDown
 = 
çl£
;

112 
	`®_æush_ev’t_queue
(
ev’tQueue
);

117 
MODE_TRANSFER_INTRO_1
:

118 ià((
ev’t
.
ty³
 =ğ
ALLEGRO_EVENT_KEY_DOWN
è&& (ev’t.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameFœe
].
keyV®ue
))

120 
	`sys_chªgeMode
(
MODE_TRANSFER_INTRO_2
, 
Œue
);

121 
šputAùiÚ
[
gameFœe
].
cu¼’yDown
 = 
çl£
;

122 
	`®_æush_ev’t_queue
(
ev’tQueue
);

127 
MODE_TRANSFER_INTRO_2
:

128 ià((
ev’t
.
ty³
 =ğ
ALLEGRO_EVENT_KEY_DOWN
è&& (ev’t.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameFœe
].
keyV®ue
))

130 
	`sys_chªgeMode
(
MODE_TRANSFER_SELECT_SIDE
, 
Œue
);

131 
šputAùiÚ
[
gameFœe
].
cu¼’yDown
 = 
çl£
;

132 
	`®_æush_ev’t_queue
(
ev’tQueue
);

138 
MODE_TRANSFER_SELECT_SIDE
:

139 ià((
ev’t
.
ty³
 =ğ
ALLEGRO_EVENT_KEY_DOWN
è&& (ev’t.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameFœe
].
keyV®ue
))

141 
	`sys_chªgeMode
(
MODE_TRANSFER_SELECT
, 
çl£
);

142 
šputAùiÚ
[
gameFœe
].
cu¼’yDown
 = 
çl£
;

143 
	`®_æush_ev’t_queue
(
ev’tQueue
);

144 
£ËùSideCouÁ”
 = 
TRANSFER_COUNTER
;

145 
d–ayT¿nsãrIÁro
 = 
TRANSFER_DELAY
;

146 
	`Œn_ÃxtPÏy”Tok’
();

147 
	`sys_¶aySound
(
SND_KEYPRESS_GOOD
, 
SND_PAN_CENTER
, 
ALLEGRO_PLAYMODE_ONCE
);

150 ià((
ev’t
.
ty³
 =ğ
ALLEGRO_EVENT_KEY_DOWN
è&& (ev’t.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameRight
].
keyV®ue
))

152 
¶ay”OnSide
 = 
RIGHT_SIDE
;

153 
droidOnSide
 = 
LEFT_SIDE
;

154 
	`sys_¶aySound
(
SND_KEYPRESS_GOOD
, 
SND_PAN_CENTER
, 
ALLEGRO_PLAYMODE_ONCE
);

157 ià((
ev’t
.
ty³
 =ğ
ALLEGRO_EVENT_KEY_DOWN
è&& (ev’t.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameLeá
].
keyV®ue
))

159 
¶ay”OnSide
 = 
LEFT_SIDE
;

160 
droidOnSide
 = 
RIGHT_SIDE
;

161 
	`sys_¶aySound
(
SND_KEYPRESS_GOOD
, 
SND_PAN_CENTER
, 
ALLEGRO_PLAYMODE_ONCE
);

165 
MODE_TRANSFER_SELECT
:

167 ià(
numPÏy”Tok’s
 < 0)

170 ià((
ev’t
.
ty³
 =ğ
ALLEGRO_EVENT_KEY_DOWN
è&& (ev’t.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameFœe
].
keyV®ue
))

172 
	`Œn_¶aûTok’
(
¶ay”BlockPos
, 
¶ay”OnSide
, 
PLAYER_TRANSFER
);

175 ià((
ev’t
.
ty³
 =ğ
ALLEGRO_EVENT_KEY_DOWN
è&& (ev’t.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameDown
].
keyV®ue
))

178 
šputAùiÚ
[
gameDown
].
cu¼’yDown
 = 
Œue
;

179 
	`Œn_moveTok’
(
MOVE_DOWN
);

183 ià((
ev’t
.
ty³
 =ğ
ALLEGRO_EVENT_KEY_DOWN
è&& (ev’t.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameUp
].
keyV®ue
))

185 
šputAùiÚ
[
gameUp
].
cu¼’yDown
 = 
Œue
;

186 
	`Œn_moveTok’
(
MOVE_UP
);

191 
	}
}

196 
	$io_»adGUIIÅut
(
ALLEGRO_EVENT
 
ev’t
)

199 
ev’t
.
ty³
)

201 
ALLEGRO_EVENT_KEY_DOWN
:

202 ià(
ev’t
.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameFœe
].
keyV®ue
)

204 
	`gui_hªdËFocusMove
(-1, 
Œue
);

205 
	`sys_¶aySound
(
SND_KEYPRESS_GOOD
, 
SND_PAN_CENTER
, 
ALLEGRO_PLAYMODE_ONCE
);

208 ià(
ev’t
.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameUp
].
keyV®ue
)

210 
	`gui_hªdËFocusMove
(
FOCUS_PREVIOUS
, 
çl£
);

211 
	`sys_¶aySound
(
SND_KEYPRESS_GOOD
, 
SND_PAN_CENTER
, 
ALLEGRO_PLAYMODE_ONCE
);

214 ià(
ev’t
.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameDown
].
keyV®ue
)

216 
	`gui_hªdËFocusMove
(
FOCUS_NEXT
, 
çl£
);

217 
	`sys_¶aySound
(
SND_KEYPRESS_GOOD
, 
SND_PAN_CENTER
, 
ALLEGRO_PLAYMODE_ONCE
);

220 
	}
}

225 
	$io_»adT”mš®Keybßrd
(
ALLEGRO_EVENT
 
ev’t
)

228 
cu¼’tMode
)

230 
MODE_TERMINAL_DB
:

231 
ev’t
.
ty³
)

233 
ALLEGRO_EVENT_KEY_DOWN
:

234 ià(
ev’t
.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameFœe
].
keyV®ue
)

236 
	`sys_¶aySound
(
SND_KEYPRESS_GOOD
, 
SND_PAN_CENTER
, 
ALLEGRO_PLAYMODE_ONCE
);

237 
cu¼’tGUISü“n
 = 
	`gui_fšdIndex
(
GUI_OBJECT_SCREEN
, "scrTerminal");

238 
	`sys_chªgeMode
(
MODE_GUI
, 
Œue
);

239 
	`sys_·u£SoundSy¡em
(
çl£
);

242 ià(
ev’t
.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameRight
].
keyV®ue
)

244 
	`gam_g‘NextDroid
();

247 ià(
ev’t
.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameLeá
].
keyV®ue
)

249 
	`gam_g‘P»viousDroid
();

256 
MODE_TERMINAL_LEVEL
:

257 ià((
ev’t
.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameFœe
].
keyV®ue
è&& (ev’t.
ty³
 =ğ
ALLEGRO_EVENT_KEY_DOWN
))

259 
	`sys_¶aySound
(
SND_KEYPRESS_GOOD
, 
SND_PAN_CENTER
, 
ALLEGRO_PLAYMODE_ONCE
);

260 
cu¼’tGUISü“n
 = 
	`gui_fšdIndex
(
GUI_OBJECT_SCREEN
, "scrTerminal");

261 
	`sys_chªgeMode
(
MODE_GUI
, 
Œue
);

266 
MODE_TERMINAL_SIDEVIEW
:

267 ià((
ev’t
.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameFœe
].
keyV®ue
è&& (ev’t.
ty³
 =ğ
ALLEGRO_EVENT_KEY_DOWN
))

269 
cu¼’tGUISü“n
 = 
	`gui_fšdIndex
(
GUI_OBJECT_SCREEN
, "scrTerminal");

270 
	`sys_chªgeMode
(
MODE_GUI
, 
Œue
);

271 
	`sys_¶aySound
(
SND_KEYPRESS_GOOD
, 
SND_PAN_CENTER
, 
ALLEGRO_PLAYMODE_ONCE
);

275 
	}
}

280 
	$io_»adLiáKeybßrd
(
ALLEGRO_EVENT
 
ev’t
)

283 
ev’t
.
ty³
)

285 
ALLEGRO_EVENT_KEY_DOWN
:

286 ià(
ev’t
.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameFœe
].
keyV®ue
)

289 
	`sys_chªgeMode
(
MODE_SHOWLEVEL
, 
Œue
);

292 
	`gam_chªgeToLev–
 (
cu¼’tLev–
, 0);

293 
	`gam_putPÏy”OnLiáFromTuÂ–
();

294 
šputAùiÚ
[
gameFœe
].
cu¼’yDown
 = 
çl£
;

295 
	`sys_¶aySound
(
SND_KEYPRESS_GOOD
, 
SND_PAN_CENTER
, 
ALLEGRO_PLAYMODE_ONCE
);

298 ià(
ev’t
.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameUp
].
keyV®ue
)

300 ià(
cu¼’tLev–
 !ğ
tuÂ–
[
cu¼’tTuÂ–
].
tİ
)

302 
tuÂ–
[
cu¼’tTuÂ–
].
cu¼’t_deck
++;

303 
tuÂ–
[
cu¼’tTuÂ–
].
cu¼’t
 =uÂ–[cu¼’tTuÂ–].
decks
[tuÂ–[cu¼’tTuÂ–].
cu¼’t_deck
];

304 
cu¼’tLev–
 = 
tuÂ–
[
cu¼’tTuÂ–
].
cu¼’t
;

305 
	`sys_¶aySound
(
SND_KEYPRESS_GOOD
, 
SND_PAN_CENTER
, 
ALLEGRO_PLAYMODE_ONCE
);

309 
	`sys_¶aySound
(
SND_KEYPRESS_BAD
, 
SND_PAN_CENTER
, 
ALLEGRO_PLAYMODE_ONCE
);

313 ià(
ev’t
.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameDown
].
keyV®ue
)

315 ià(
cu¼’tLev–
 !ğ
tuÂ–
[
cu¼’tTuÂ–
].
bÙtom
)

317 
tuÂ–
[
cu¼’tTuÂ–
].
cu¼’t_deck
--;

318 
tuÂ–
[
cu¼’tTuÂ–
].
cu¼’t
 =uÂ–[cu¼’tTuÂ–].
decks
[tuÂ–[cu¼’tTuÂ–].
cu¼’t_deck
];

319 
cu¼’tLev–
 = 
tuÂ–
[
cu¼’tTuÂ–
].
cu¼’t
;

320 
	`sys_¶aySound
(
SND_KEYPRESS_GOOD
, 
SND_PAN_CENTER
, 
ALLEGRO_PLAYMODE_ONCE
);

324 
	`sys_¶aySound
(
SND_KEYPRESS_BAD
, 
SND_PAN_CENTER
, 
ALLEGRO_PLAYMODE_ONCE
);

328 
	}
}

333 
	$io_g‘KeybßrdS‹
(
ALLEGRO_EVENT
 
ev’t
)

336 
ev’t
.
ty³
)

338 
ALLEGRO_EVENT_KEY_DOWN
:

339 ià(
ev’t
.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameLeá
].
keyV®ue
)

340 
šputAùiÚ
[
gameLeá
].
cu¼’yDown
 = 
Œue
;

342 ià(
ev’t
.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameRight
].
keyV®ue
)

343 
šputAùiÚ
[
gameRight
].
cu¼’yDown
 = 
Œue
;

345 ià(
ev’t
.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameUp
].
keyV®ue
)

346 
šputAùiÚ
[
gameUp
].
cu¼’yDown
 = 
Œue
;

348 ià(
ev’t
.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameDown
].
keyV®ue
)

349 
šputAùiÚ
[
gameDown
].
cu¼’yDown
 = 
Œue
;

351 ià(
ev’t
.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameFœe
].
keyV®ue
)

352 
šputAùiÚ
[
gameFœe
].
cu¼’yDown
 = 
Œue
;

354 ià(
ev’t
.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
cÚsŞeAùiÚ
].
keyV®ue
)

355 
šputAùiÚ
[
cÚsŞeAùiÚ
].
cu¼’yDown
 = 
Œue
;

357 ià(
ev’t
.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
aùiÚSü“nShÙ
].
keyV®ue
)

358 
šputAùiÚ
[
aùiÚSü“nShÙ
].
cu¼’yDown
 = 
Œue
;

360 ià(
ev’t
.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameEsÿ³
].
keyV®ue
)

361 
šputAùiÚ
[
gameEsÿ³
].
cu¼’yDown
 = 
Œue
;

363 ià(
ev’t
.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gamePau£
].
keyV®ue
)

364 
šputAùiÚ
[
gamePau£
].
cu¼’yDown
 = 
Œue
;

368 
ALLEGRO_EVENT_KEY_UP
:

369 ià(
ev’t
.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameLeá
].
keyV®ue
)

370 
šputAùiÚ
[
gameLeá
].
cu¼’yDown
 = 
çl£
;

372 ià(
ev’t
.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameRight
].
keyV®ue
)

373 
šputAùiÚ
[
gameRight
].
cu¼’yDown
 = 
çl£
;

375 ià(
ev’t
.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameUp
].
keyV®ue
)

376 
šputAùiÚ
[
gameUp
].
cu¼’yDown
 = 
çl£
;

378 ià(
ev’t
.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameDown
].
keyV®ue
)

379 
šputAùiÚ
[
gameDown
].
cu¼’yDown
 = 
çl£
;

381 ià(
ev’t
.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameFœe
].
keyV®ue
)

382 
šputAùiÚ
[
gameFœe
].
cu¼’yDown
 = 
çl£
;

384 ià(
ev’t
.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
cÚsŞeAùiÚ
].
keyV®ue
)

385 
šputAùiÚ
[
cÚsŞeAùiÚ
].
cu¼’yDown
 = 
çl£
;

387 ià(
ev’t
.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
aùiÚSü“nShÙ
].
keyV®ue
)

388 
šputAùiÚ
[
aùiÚSü“nShÙ
].
cu¼’yDown
 = 
çl£
;

390 ià(
ev’t
.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gameEsÿ³
].
keyV®ue
)

391 
šputAùiÚ
[
gameEsÿ³
].
cu¼’yDown
 = 
çl£
;

393 ià(
ev’t
.
keybßrd
.
keycode
 =ğ
šputAùiÚ
[
gamePau£
].
keyV®ue
)

394 
šputAùiÚ
[
gamePau£
].
cu¼’yDown
 = 
çl£
;

398 
	}
}

403 *
	$io_g‘AsciiFromKeycode
(
keyCode
)

406 
‹mpCh¬
[1];

408 
	`¥rštf
(
‹mpCh¬
, "%s", 
	`®_keycode_to_Çme
(
keyCode
));

409  
‹mpCh¬
[0];

410 
	}
}

415 
	$io_addCh¬ToLše
(
keyCode
)

418 
keyCode
)

420 
ALLEGRO_KEY_SPACE
:

421 ià(
cÚCu¼’tCh¬CouÁ
 < 
MAX_STRING_SIZE
 - 1)

422 
cÚCu¼’tLše
.
cÚLše
 += " ";

424 
cÚCu¼’tCh¬CouÁ
++;

428 ià(
cÚCu¼’tCh¬CouÁ
 < 
MAX_STRING_SIZE
 - 1)

429 
cÚCu¼’tLše
.
cÚLše
 +ğ
keyCode
;

431 
cÚCu¼’tCh¬CouÁ
++;

434 
	}
}

439 
	$io_»adCÚsŞeKeybßrd
 (
ALLEGRO_EVENT
 
ev’t
)

442 
unich¬
;

444 ià(
ALLEGRO_EVENT_KEY_CHAR
 =ğ
ev’t
.
ty³
)

448 
unich¬
 = 
ev’t
.
keybßrd
.
keycode
;

450 
unich¬
)

452 
ALLEGRO_KEY_BACKSPACE
:

453 
cÚBackS·ûDown
 = 1;

456 
ALLEGRO_KEY_TAB
:

457 
	`cÚ_com¶‘eCommªd
 (
cÚCu¼’tLše
.
cÚLše
);

460 
ALLEGRO_KEY_ENTER
:

461 
	`cÚ_´oûssCommªd
 (
cÚCu¼’tLše
.
cÚLše
);

464 
ALLEGRO_KEY_TILDE
:

465 
šputAùiÚ
[
cÚsŞeAùiÚ
].
cu¼’yDown
 = 
çl£
;

466 
	`sys_chªgeMode
(-1, 
Œue
);

469 
ALLEGRO_KEY_DOWN
:

470 
cÚHi¡ÜyPŒ
++;

471 ià(
cÚHi¡ÜyPŒ
 > 
cÚNumInHi¡Üy
)

472 
cÚHi¡ÜyPŒ
 = 
cÚNumInHi¡Üy
;

473 
	`cÚ_pİHi¡ÜyCommªd
();

476 
ALLEGRO_KEY_UP
:

477 
cÚHi¡ÜyPŒ
--;

478 ià(
cÚHi¡ÜyPŒ
 < 0)

479 
cÚHi¡ÜyPŒ
 = 0;

480 
	`cÚ_pİHi¡ÜyCommªd
();

484 
unich¬
 = 
ev’t
.
keybßrd
.unichar;

485 ià((
unich¬
 >ğ32è&& (unich¬ < 
ALLEGRO_KEY_MAX
))

486 
	`io_addCh¬ToLše
(
unich¬
);

487 
cÚBackS·ûD–ay
 = 0.0f;

493 ià(
çl£
 =ğ
	`®_key_down
(&
keybßrd
, 
ALLEGRO_KEY_BACKSPACE
))

495 
cÚBackS·ûDown
 = 0;

497 
	}
}

502 
	$io_»adKeybßrd
()

505 
ALLEGRO_EVENT
 
ev’t
;

507 ià(
çl£
 =ğ
	`®_g‘_Ãxt_ev’t
(
ev’tQueue
, &
ev’t
))

511 
ev’t
.
ty³
)

513 
ALLEGRO_EVENT_DISPLAY_SWITCH_OUT
:

514 
gamePau£d
 = 
Œue
;

517 
ALLEGRO_EVENT_DISPLAY_CLOSE
:

519 
	`sys_shutDown
();

522 
ALLEGRO_EVENT_DISPLAY_HALT_DRAWING
:

526 
ALLEGRO_EVENT_DISPLAY_RESUME_DRAWING
:

532 
	`®_g‘_keybßrd_¡©e
(&
keybßrd
);

535 
	`io_g‘KeybßrdS‹
(
ev’t
);

537 
cu¼’tMode
)

539 
MODE_PAUSED
:

540 ià(
Œue
 =ğ
šputAùiÚ
[
gamePau£
].
cu¼’yDown
)

542 
šputAùiÚ
[
gamePau£
].
cu¼’yDown
 = 
çl£
;

543 
	`sys_chªgeMode
(
MODE_SHOWLEVEL
, 
çl£
);

544 
gamePau£d
 = 
çl£
;

548 
MODE_CONSOLE
:

549 
	`io_»adCÚsŞeKeybßrd
(
ev’t
);

552 
MODE_SHOWLEVEL
:

555 
	`io_´oûssAùiÚKey
();

558 ià(
Œue
 =ğ
šputAùiÚ
[
cÚsŞeAùiÚ
].
cu¼’yDown
)

560 
šputAùiÚ
[
cÚsŞeAùiÚ
].
cu¼’yDown
 = 
çl£
;

561 
	`®_æush_ev’t_queue
(
ev’tQueue
);

562 
	`sys_chªgeMode
(
MODE_CONSOLE
, 
Œue
);

563 
	`sys_¡İAÎSounds
();

566 ià(
Œue
 =ğ
šputAùiÚ
[
gamePau£
].
cu¼’yDown
)

568 
	`sys_chªgeMode
(
MODE_PAUSED
, 
çl£
);

569 
šputAùiÚ
[
gamePau£
].
cu¼’yDown
 = 
çl£
;

570 
gamePau£d
 = 
Œue
;

571 
	`sys_¡İAÎSounds
();

572 
	`gam_£tHUDS‹
(
HUD_STATE_PAUSED
);

576 
MODE_LIFT_VIEW
:

577 
	`io_»adLiáKeybßrd
(
ev’t
);

580 
MODE_TERMINAL_MENU
:

581 
MODE_TERMINAL_SIDEVIEW
:

582 
MODE_TERMINAL_DB
:

583 
MODE_TERMINAL_LEVEL
:

584 
	`io_»adT”mš®Keybßrd
(
ev’t
);

587 
MODE_GUI
:

588 
	`io_»adGUIIÅut
(
ev’t
);

591 
MODE_INTRO
:

592 
	`io_»adIÁroIÅut
(
ev’t
);

595 
MODE_TRANSFER_INTRO
:

596 
MODE_TRANSFER_INTRO_1
:

597 
MODE_TRANSFER_INTRO_2
:

598 
MODE_TRANSFER_FINISH
:

599 
MODE_TRANSFER_START
:

600 
MODE_TRANSFER_COPY
:

601 
MODE_TRANSFER_DRAW
:

602 
MODE_TRANSFER_SELECT
:

603 
MODE_TRANSFER_SELECT_SIDE
:

604 
	`io_»adT¿nsãrKeybßrd
 (
ev’t
);

609 ià(
Œue
 =ğ
šputAùiÚ
[
gameEsÿ³
].
cu¼’yDown
)

611 
gameIsRuÂšg
 = 
çl£
;

616 ià(
Œue
 =ğ
šputAùiÚ
[
aùiÚSü“nShÙ
].
cu¼’yDown
)

618 
šputAùiÚ
[
aùiÚSü“nShÙ
].
cu¼’yDown
 = 
çl£
;

619 ià(
	`®e_sü“nshÙ
("data//screenshots", "paradroid") != 0)

621 
	`cÚ_´št
(
Œue
,rue, "Error: Could‚ot save screenshot");

631 
	}
}

	@../src/io/io_logFile.cpp

1 
	~"../../hdr/sys_glob®s.h
"

3 
	~<time.h
>

5 
boŞ
 
	gfeLoggšgOn
;

15 
ALLEGRO_FILE
 *
	glogFe
;

20 
boŞ
 
	$io_İ’LogFe
(cÚ¡ *
logFeName
)

23 #ifdeà
APPEND_LOGFILE


24 
logFe
 = 
	`®_fİ’
(
logFeName
, "at");

26 
logFe
 = 
	`®_fİ’
(
logFeName
, "wt");

29 ià(
NULL
 =ğ
logFe
)

30  
çl£
;

32  
Œue
;

33 
	}
}

38 
	$io_¡¬tLogFe
(cÚ¡ *
logFeName
)

41 
feLoggšgOn
 = 
çl£
;

43 ià(!
	`io_İ’LogFe
(
logFeName
))

46 
feLoggšgOn
 = 
çl£
;

50 
feLoggšgOn
 = 
Œue
;

51 
	`io_logToFe
 ("-----------------------------------------------------------------------------");

52 
	`io_logToFe
 ("Logfile: Log file opened:");

53 
	`io_logTimeToFe
();

54 
	`io_logToFe
 ("Logfile: Logfile started...");

56 
	}
}

60 
	$io_logTimeToFe
()

63 
tm±ime
[
MAX_STRING_SIZE
];

64 
tmpd©e
[
MAX_STRING_SIZE
];

66 #ià
	`defšed
 (
WIN32
)

67 
	`_¡¹ime
 (
tm±ime
);

68 
	`_¡rd©e
 (
tmpd©e
);

70 
time_t
 
cu¼’tTime
;

71 
tm
 *
loÿlTime
;

74 
cu¼’tTime
 = 
	`time
 (
NULL
);

77 
loÿlTime
 = 
	`loÿÉime
(&
cu¼’tTime
);

79 
	`¥rštf
(
tm±ime
, "%02i:%02i:%02i", 
loÿlTime
->
tm_hour
,†oÿlTime->
tm_mš
,†oÿlTime->
tm_£c
);

80 
	`¥rštf
(
tmpd©e
, "%02i-%02i-%02i", 
loÿlTime
->
tm_mday
,†oÿlTime->
tm_mÚ
 + 1,†oÿlTime->
tm_y—r
 + 1900);

83 
	`io_logToFe
 ("%s\t%s", 
tmpd©e
, 
tm±ime
);

84 
	}
}

88 
	$io_şo£LogFe
()

91 ià(
feLoggšgOn
 =ğ
Œue
)

93 
	`io_logToFe
 ("Logfile: Log file closed:");

94 
	`io_logTimeToFe
();

95 
	`io_logToFe
 ("-----------------------------------------------------------------------------\n\n");

96 #ià
	`defšed
 (
WIN32
)

97 
	`_şo£
 (
logFe
);

99 
	`®_fşo£
 (
logFe
);

101 
feLoggšgOn
 = 
çl£
;

103 
	}
}

144 
	$io_logToFe
 (cÚ¡ *
fÜm©
, ...)

147 
va_li¡
 
¬gs
;

148 
logText
[
MAX_STRING_SIZE
];

149 
by‹swr™‹n
;

150 
tmpTime
[32];

154 ià(
feLoggšgOn
 =ğ
çl£
)

159 ià(
	`¡¾’
(
fÜm©
è>ğ
MAX_STRING_SIZE
)

162 
	`´štf
("Format greaterhan string size.\n");

168 
	`va_¡¬t
(
¬gs
, 
fÜm©
);

169 
	`v¢´štf
(
logText
, 
MAX_STRING_SIZE
, 
fÜm©
, 
¬gs
);

170 
	`va_’d
(
¬gs
);

174 
	`¡rÿt
 (
logText
, "\n");

175 ià(
EOF
 =ğ
	`®_åuts
(
logFe
, 
logText
))

176 
	`´štf
("Unableo writeo†ogfile.\n");

178 
	`®_fæush
(
logFe
);

179 
	}
}

	@../src/io/io_packFile.cpp

1 
	~"../../hdr/sys_glob®s.h
"

3 
boŞ
 
	gfeSy¡emR—dy
;

8 
boŞ
 
	$io_g‘Archiv”s
()

11 cÚ¡ 
PHYSFS_ArchiveInfo
 **
rc
 = 
	`PHYSFS_suµÜ‹dArchiveTy³s
();

12 cÚ¡ 
PHYSFS_ArchiveInfo
 **
i
;

14 
	`io_logToFe
("Packfile: Supported‡rchiveypes.");

16 ià(*
rc
 =ğ
NULL
)

18 
	`io_logToFe
("Packfile: Error: No‡rchiveypes found.");

19  
çl£
;

23 
i
 = 
rc
; *˜!ğ
NULL
; i++)

25 
	`io_logToFe
("Packfe: [ % ] : [ % ]",(*
i
)->
ex‹nsiÚ
, (*i)->
desütiÚ
);

28  
Œue
;

29 
	}
}

34 
boŞ
 
	$io_¡¬tFeSy¡em
(
boŞ
 
showArchiv”s
)

37 
PHYSFS_V”siÚ
 
comped
;

38 
PHYSFS_V”siÚ
 
lšked
;

40 
	`PHYSFS_VERSION
(&
comped
);

41 
	`PHYSFS_g‘LškedV”siÚ
(&
lšked
);

43 
	`io_logToFe
((*)"Comped‡gaš¡ PhysFS v”siÚ %d.%d.%d.", 
comped
.
majÜ
, comped.
mšÜ
, comped.
·tch
);

44 
	`io_logToFe
((*)"Lšked‡gaš¡ PhysFS v”siÚ %d.%d.%d.", 
lšked
.
majÜ
,†šked.
mšÜ
,†šked.
·tch
);

47 ià(
	`PHYSFS_š™
(
NULL
) == 0)

49 
	`io_logToFe
((*)"E¼Ü: Fesy¡em faedØ¡¬ˆ- [ % ]", 
	`PHYSFS_g‘La¡E¼Ü
());

50 
feSy¡emR—dy
 = 
çl£
;

51  
çl£
;

56 ià(0 =ğ
	`PHYSFS_£tWr™eDœ
 ("data"))

58 
	`io_logToFe
("ERROR: FaedØ£ˆwr™·th [ % ]", 
	`PHYSFS_g‘La¡E¼Ü
());

59 
feSy¡emR—dy
 = 
çl£
;

60  
çl£
;

64 ià(0 =ğ
	`PHYSFS_addToS—rchP©h
 ("data",1))

66 
	`io_logToFe
("ERROR: FaedØ£ˆ£¬ch…©h - d©¨[ % ]", 
	`PHYSFS_g‘La¡E¼Ü
());

67 
feSy¡emR—dy
 = 
çl£
;

68  
çl£
;

72 ià(0 =ğ
	`PHYSFS_addToS—rchP©h
 ("data//screenshots",1))

74 
	`io_logToFe
("ERROR: FaedØ£ˆ£¬ch…©h - sü“nshÙ [ % ]", 
	`PHYSFS_g‘La¡E¼Ü
());

75 
feSy¡emR—dy
 = 
çl£
;

76  
çl£
;

80 ià(0 =ğ
	`PHYSFS_addToS—rchP©h
 ("data//scripts",1))

82 
	`io_logToFe
("ERROR: FaedØ£ˆ£¬ch…©h - süt [ % ]", 
	`PHYSFS_g‘La¡E¼Ü
());

83 
feSy¡emR—dy
 = 
çl£
;

84  
çl£
;

89 ià(0 =ğ
	`PHYSFS_addToS—rchP©h
 ("data//data.zip",1))

91 
	`io_logToFe
("ERROR: FaedØ£ˆ£¬ch…©h - d©a.z - [ % ]", 
	`PHYSFS_g‘La¡E¼Ü
());

92 
feSy¡emR—dy
 = 
çl£
;

93  
çl£
;

97 ià(
Œue
 =ğ
showArchiv”s
)

98 
	`io_g‘Archiv”s
();

100 
feSy¡emR—dy
 = 
Œue
;

102  
Œue
;

103 
	}
}

	@../src/io/io_sideView.cpp

1 
	~"../../hdr/sys_glob®s.h
"

6 
boŞ
 
	$io_lßdSideV›wD©a
(cÚ¡ *
sidev›wFeName
)

9 
numb”Lev–s
;

10 
couÁ
;

11 
buf
[1];

12 
Ëv–CouÁ
[1];

14 
ALLEGRO_FILE
 *
åSideV›w
;

15 
ušt
 
»tuºCode
;

17 
åSideV›w
 = 
	`®_fİ’
(
sidev›wFeName
, "rb");

18 ià(
åSideV›w
 =ğ
NULL
)

19  
çl£
;

21 
»tuºCode
 = 
	`®_ä—d
(
åSideV›w
, &
Ëv–CouÁ
, ());

22 ià(
»tuºCode
 != 1)

24 
	`cÚ_´št
(
Œue
, 
çl£
, "ERROR: Loading sideView: Error: [ %s ]", "UNKNOWN");

25  
çl£
;

28 
numb”Lev–s
 = 
Ëv–CouÁ
[0];

30 ià(
MAX_LEVELS
 !ğ
numb”Lev–s
)

32 
	`io_logToFe
("ERROR: Read wrong data from sideview file.");

33 
	`sys_”rÜF©®
(
__FILE__
, 
__LINE__
, "Data corruption„eading sideview file.");

37 
couÁ
 = 0; couÁ !ğ
numb”Lev–s
; count++)

39 
	`®_ä—d
(
åSideV›w
, (*)&
buf
, (
sidev›wLev–s
[
couÁ
].
x1
));

40 
sidev›wLev–s
[
couÁ
].
x1
 = 
buf
[0];

42 
	`®_ä—d
(
åSideV›w
, (*)&
buf
, (
sidev›wLev–s
[
couÁ
].
y1
));

43 
sidev›wLev–s
[
couÁ
].
y1
 = 
buf
[0] - 100;

45 
	`®_ä—d
(
åSideV›w
, (*)&
buf
, (
sidev›wLev–s
[
couÁ
].
x2
));

46 
sidev›wLev–s
[
couÁ
].
x2
 = 
buf
[0];

48 
	`®_ä—d
(
åSideV›w
, (*)&
buf
, (
sidev›wLev–s
[
couÁ
].
y2
));

49 
sidev›wLev–s
[
couÁ
].
y2
 = 
buf
[0] - 100;

51 
	`®_fşo£
(
åSideV›w
);

53 
	`gam_£tupTuÂ–s
();

55  
Œue
;

56 
	}
}

	@../src/script/as_arrayobject.cpp

1 
	~<Ãw
>

2 
	~<¡dlib.h
>

3 
	~<¡ršg.h
>

4 
	~<as£¹.h
>

5 
	~<¡dio.h
>

7 
	~"sü¼ay.h
"

9 
usšg
 
Çme¥aû
 
	g¡d
;

11 
BEGIN_AS_NAMESPACE


13 
Regi¡”SütA¼ay_N©ive
(
asISütEngše
 *
’gše
);

14 
Regi¡”SütA¼ay_G’”ic
(
asISütEngše
 *
’gše
);

16 
	sSA¼ayBufãr


18 
asDWORD
 
	mmaxEËm’ts
;

19 
asDWORD
 
	mnumEËm’ts
;

20 
asBYTE
 
	md©a
[1];

23 
	sSA¼ayCache


25 
asISütFunùiÚ
 *
	mcmpFunc
;

26 
asISütFunùiÚ
 *
	meqFunc
;

32 cÚ¡ 
asPWORD
 
	gARRAY_CACHE
 = 1000;

34 
	$CËªupObjeùTy³A¼ayCache
(
asIObjeùTy³
 *
ty³
)

36 
SA¼ayCache
 *
ÿche
 = 
»š‹½»t_ÿ¡
<SA¼ayCache*>(
ty³
->
	`G‘U£rD©a
(
ARRAY_CACHE
));

37 ifĞ
ÿche
 )

38 
d–‘e
 
ÿche
;

39 
	}
}

41 
CSütA¼ay
* 
	$SütA¼ayFaùÜy2
(
asIObjeùTy³
 *
Ù
, 
asUINT
 
Ëngth
)

43 
CSütA¼ay
 *
a
 = 
Ãw
 
	`CSütA¼ay
(
Ëngth
, 
Ù
);

47 
asISütCÚ‹xt
 *
ùx
 = 
	`asG‘AùiveCÚ‹xt
();

48 ifĞ
ùx
 && ctx->
	`G‘S‹
(è=ğ
asEXECUTION_EXCEPTION
 )

50 
a
->
	`R–—£
();

54  
a
;

55 
	}
}

57 
CSütA¼ay
* 
	$SütA¼ayFaùÜyDefV®
(
asIObjeùTy³
 *
Ù
, 
asUINT
 
Ëngth
, *
defV®
)

59 
CSütA¼ay
 *
a
 = 
Ãw
 
	`CSütA¼ay
(
Ëngth
, 
defV®
, 
Ù
);

63 
asISütCÚ‹xt
 *
ùx
 = 
	`asG‘AùiveCÚ‹xt
();

64 ifĞ
ùx
 && ctx->
	`G‘S‹
(è=ğ
asEXECUTION_EXCEPTION
 )

66 
a
->
	`R–—£
();

70  
a
;

71 
	}
}

73 
CSütA¼ay
* 
	$SütA¼ayFaùÜy
(
asIObjeùTy³
 *
Ù
)

75  
	`SütA¼ayFaùÜy2
(
Ù
, 0);

76 
	}
}

81 
boŞ
 
	$SütA¼ayTem¶©eC®lback
(
asIObjeùTy³
 *
Ù
)

85 
ty³Id
 = 
Ù
->
	`G‘SubTy³Id
();

86 ifĞ
ty³Id
 =ğ
asTYPEID_VOID
 )

87  
çl£
;

88 ifĞ(
ty³Id
 & 
asTYPEID_MASK_OBJECT
è&& !Ñy³Id & 
asTYPEID_OBJHANDLE
) )

90 
asIObjeùTy³
 *
subty³
 = 
Ù
->
	`G‘Engše
()->
	`G‘ObjeùTy³ById
(
ty³Id
);

91 
asDWORD
 
æags
 = 
subty³
->
	`G‘FÏgs
();

92 ifĞ(
æags
 & 
asOBJ_VALUE
è&& !(æag & 
asOBJ_POD
) )

95  
asUINT
 
n
 = 0;‚ < 
subty³
->
	`G‘BehaviourCouÁ
();‚++ )

97 
asEBehaviours
 
beh
;

98 
asISütFunùiÚ
 *
func
 = 
subty³
->
	`G‘BehaviourByIndex
(
n
, &
beh
);

99 ifĞ
beh
 !ğ
asBEHAVE_CONSTRUCT
 ) ;

101 ifĞ
func
->
	`G‘P¬amCouÁ
() == 0 )

104  
Œue
;

109  
çl£
;

111 ifĞ(
æags
 & 
asOBJ_REF
) )

114  
asUINT
 
n
 = 0;‚ < 
subty³
->
	`G‘FaùÜyCouÁ
();‚++ )

116 
asISütFunùiÚ
 *
func
 = 
subty³
->
	`G‘FaùÜyByIndex
(
n
);

117 ifĞ
func
->
	`G‘P¬amCouÁ
() == 0 )

120  
Œue
;

125  
çl£
;

130  
Œue
;

131 
	}
}

134 
	$Regi¡”SütA¼ay
(
asISütEngše
 *
’gše
, 
boŞ
 
deçuÉA¼ay
)

136 ifĞ
	`¡r¡r
(
	`asG‘Lib¿ryO±iÚs
(), "AS_MAX_PORTABILITY") == 0 )

137 
	`Regi¡”SütA¼ay_N©ive
(
’gše
);

139 
	`Regi¡”SütA¼ay_G’”ic
(
’gše
);

141 ifĞ
deçuÉA¼ay
 )

143 
r
 = 
’gše
->
	`Regi¡”DeçuÉA¼ayTy³
("¬¿y<T>"); 
	`as£¹
(„ >= 0 );

145 
	}
}

147 
	$Regi¡”SütA¼ay_N©ive
(
asISütEngše
 *
’gše
)

149 
r
;

152 
’gše
->
	`S‘ObjeùTy³U£rD©aCËªupC®lback
(
CËªupObjeùTy³A¼ayCache
, 
ARRAY_CACHE
);

155 
r
 = 
’gše
->
	`Regi¡”ObjeùTy³
("¬¿y<şas T>", 0, 
asOBJ_REF
 | 
asOBJ_GC
 | 
asOBJ_TEMPLATE
); 
	`as£¹
(„ >= 0 );

158 
r
 = 
’gše
->
	`Regi¡”ObjeùBehaviour
("¬¿y<T>", 
asBEHAVE_TEMPLATE_CALLBACK
, "boŞ f(št&š)", 
	`asFUNCTION
(
SütA¼ayTem¶©eC®lback
), 
asCALL_CDECL
); 
	`as£¹
(„ >= 0 );

161 
r
 = 
’gše
->
	`Regi¡”ObjeùBehaviour
("¬¿y<T>", 
asBEHAVE_FACTORY
, "¬¿y<T>@ f(št&š)", 
	`asFUNCTIONPR
(
SütA¼ayFaùÜy
, (
asIObjeùTy³
*), 
CSütA¼ay
*), 
asCALL_CDECL
); 
	`as£¹
(„ >= 0 );

162 
r
 = 
’gše
->
	`Regi¡”ObjeùBehaviour
("¬¿y<T>", 
asBEHAVE_FACTORY
, "¬¿y<T>@ f(št&š, ušt)", 
	`asFUNCTIONPR
(
SütA¼ayFaùÜy2
, (
asIObjeùTy³
*, 
asUINT
), 
CSütA¼ay
*), 
asCALL_CDECL
); 
	`as£¹
(„ >= 0 );

163 
r
 = 
’gše
->
	`Regi¡”ObjeùBehaviour
("¬¿y<T>", 
asBEHAVE_FACTORY
, "¬¿y<T>@ f(št&š, ušt, cÚ¡ T &š)", 
	`asFUNCTIONPR
(
SütA¼ayFaùÜyDefV®
, (
asIObjeùTy³
*, 
asUINT
, *), 
CSütA¼ay
*), 
asCALL_CDECL
); 
	`as£¹
(„ >= 0 );

166 
r
 = 
’gše
->
	`Regi¡”ObjeùBehaviour
("¬¿y<T>", 
asBEHAVE_LIST_FACTORY
, "¬¿y<T>@ f(št&š, ušt)", 
	`asFUNCTIONPR
(
SütA¼ayFaùÜy2
, (
asIObjeùTy³
*, 
asUINT
), 
CSütA¼ay
*), 
asCALL_CDECL
); 
	`as£¹
(„ >= 0 );

169 
r
 = 
’gše
->
	`Regi¡”ObjeùBehaviour
("¬¿y<T>", 
asBEHAVE_ADDREF
, "void f()", 
	`asMETHOD
(
CSütA¼ay
,
AddRef
), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

170 
r
 = 
’gše
->
	`Regi¡”ObjeùBehaviour
("¬¿y<T>", 
asBEHAVE_RELEASE
, "void f()", 
	`asMETHOD
(
CSütA¼ay
,
R–—£
), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

173 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "T &İIndex(ušt)", 
	`asMETHODPR
(
CSütA¼ay
, 
At
, (
asUINT
), *), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

174 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "cÚ¡ T &İIndex(uštècÚ¡", 
	`asMETHODPR
(
CSütA¼ay
, 
At
, (
asUINT
ècÚ¡, cÚ¡ *), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

177 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "¬¿y<T> &İAssign(cÚ¡‡¼ay<T>&š)", 
	`asMETHOD
(
CSütA¼ay
, 
İ”©Ü
=), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

180 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "void in£¹At(ušt, cÚ¡ T&š)", 
	`asMETHOD
(
CSütA¼ay
, 
In£¹At
), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

181 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "void„emoveAt(ušt)", 
	`asMETHOD
(
CSütA¼ay
, 
RemoveAt
), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

182 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "void in£¹La¡(cÚ¡ T&š)", 
	`asMETHOD
(
CSütA¼ay
, 
In£¹La¡
), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

183 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "void„emoveLa¡()", 
	`asMETHOD
(
CSütA¼ay
, 
RemoveLa¡
), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

185 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "ušˆËngth(ècÚ¡", 
	`asMETHOD
(
CSütA¼ay
, 
G‘Size
), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

186 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "void„e£rve(ušt)", 
	`asMETHOD
(
CSütA¼ay
, 
Re£rve
), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

187 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "void„esize(ušt)", 
	`asMETHODPR
(
CSütA¼ay
, 
Resize
, (
asUINT
), ), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

188 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "void sÜtAsc()", 
	`asMETHODPR
(
CSütA¼ay
, 
SÜtAsc
, (), ), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

189 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "void sÜtAsc(ušt, ušt)", 
	`asMETHODPR
(
CSütA¼ay
, 
SÜtAsc
, (
asUINT
,‡sUINT), ), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

190 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "void sÜtDesc()", 
	`asMETHODPR
(
CSütA¼ay
, 
SÜtDesc
, (), ), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

191 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "void sÜtDesc(ušt, ušt)", 
	`asMETHODPR
(
CSütA¼ay
, 
SÜtDesc
, (
asUINT
,‡sUINT), ), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

192 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "void„ev”£()", 
	`asMETHOD
(
CSütA¼ay
, 
Rev”£
), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

193 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "šˆfšd(cÚ¡ T&šècÚ¡", 
	`asMETHODPR
(
CSütA¼ay
, 
Fšd
, (*ècÚ¡, ), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

194 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "šˆfšd(ušt, cÚ¡ T&šècÚ¡", 
	`asMETHODPR
(
CSütA¼ay
, 
Fšd
, (
asUINT
, *ècÚ¡, ), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

195 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "boŞ opEqu®s(cÚ¡‡¼ay<T>&šècÚ¡", 
	`asMETHOD
(
CSütA¼ay
, 
İ”©Ü
==), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

196 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "boŞ isEm±y(ècÚ¡", 
	`asMETHOD
(
CSütA¼ay
, 
IsEm±y
), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

199 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "ušˆg‘_Ëngth(ècÚ¡", 
	`asMETHOD
(
CSütA¼ay
, 
G‘Size
), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

200 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "void s‘_Ëngth(ušt)", 
	`asMETHODPR
(
CSütA¼ay
, 
Resize
, (
asUINT
), ), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

203 
r
 = 
’gše
->
	`Regi¡”ObjeùBehaviour
("¬¿y<T>", 
asBEHAVE_GETREFCOUNT
, "šˆf()", 
	`asMETHOD
(
CSütA¼ay
, 
G‘RefCouÁ
), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

204 
r
 = 
’gše
->
	`Regi¡”ObjeùBehaviour
("¬¿y<T>", 
asBEHAVE_SETGCFLAG
, "void f()", 
	`asMETHOD
(
CSütA¼ay
, 
S‘FÏg
), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

205 
r
 = 
’gše
->
	`Regi¡”ObjeùBehaviour
("¬¿y<T>", 
asBEHAVE_GETGCFLAG
, "boŞ f()", 
	`asMETHOD
(
CSütA¼ay
, 
G‘FÏg
), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

206 
r
 = 
’gše
->
	`Regi¡”ObjeùBehaviour
("¬¿y<T>", 
asBEHAVE_ENUMREFS
, "void f(št&š)", 
	`asMETHOD
(
CSütA¼ay
, 
EnumReã»nûs
), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

207 
r
 = 
’gše
->
	`Regi¡”ObjeùBehaviour
("¬¿y<T>", 
asBEHAVE_RELEASEREFS
, "void f(št&š)", 
	`asMETHOD
(
CSütA¼ay
, 
R–—£AÎHªdËs
), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

209 #ià
AS_USE_STLNAMES
 == 1

211 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "ušˆsize(ècÚ¡", 
	`asMETHOD
(
CSütA¼ay
, 
G‘Size
), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

213 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "boŞƒm±y(ècÚ¡", 
	`asMETHOD
(
CSütA¼ay
, 
IsEm±y
), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

215 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "void…ush_back(cÚ¡ T&š)", 
	`asMETHOD
(
CSütA¼ay
, 
In£¹La¡
), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

217 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "void…İ_back()", 
	`asMETHOD
(
CSütA¼ay
, 
RemoveLa¡
), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

219 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "void in£¹(ušt, cÚ¡ T&š)", 
	`asMETHOD
(
CSütA¼ay
, 
In£¹At
), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

221 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "voidƒ¿£(ušt)", 
	`asMETHOD
(
CSütA¼ay
, 
RemoveAt
), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

223 
	}
}

225 
	gCSütA¼ay
 &CSütA¼ay::
İ”©Ü
=(cÚ¡ 
CSütA¼ay
 &
Ùh”
)

228 ifĞ&
Ùh”
 !ğ
this
 &&

229 
Ùh”
.
G‘A¼ayObjeùTy³
() == GetArrayObjectType() )

232 
Resize
(
Ùh”
.
bufãr
->
numEËm’ts
);

235 
CİyBufãr
(
bufãr
, 
Ùh”
.buffer);

238  *
	gthis
;

241 
	gCSütA¼ay
::
	$CSütA¼ay
(
asUINT
 
Ëngth
, 
asIObjeùTy³
 *
Ù
)

243 
»fCouÁ
 = 1;

244 
gcFÏg
 = 
çl£
;

245 
objTy³
 = 
Ù
;

246 
objTy³
->
	`AddRef
();

247 
bufãr
 = 0;

249 
	`P»ÿche
();

252 ifĞ
subTy³Id
 & 
asTYPEID_MASK_OBJECT
 )

254 
–em’tSize
 = (
asPWORD
);

258 
–em’tSize
 = 
objTy³
->
	`G‘Engše
()->
	`G‘SizeOfPrim™iveTy³
(
subTy³Id
);

262 ifĞ!
	`CheckMaxSize
(
Ëngth
) )

268 
	`C»©eBufãr
(&
bufãr
, 
Ëngth
);

271 ifĞ
objTy³
->
	`G‘FÏgs
(è& 
asOBJ_GC
 )

272 
objTy³
->
	`G‘Engše
()->
	`NÙifyG¬bageCŞËùÜOfNewObjeù
(
this
, objType);

273 
	}
}

275 
	gCSütA¼ay
::
	$CSütA¼ay
(
asUINT
 
Ëngth
, *
defV®
, 
asIObjeùTy³
 *
Ù
)

277 
»fCouÁ
 = 1;

278 
gcFÏg
 = 
çl£
;

279 
objTy³
 = 
Ù
;

280 
objTy³
->
	`AddRef
();

281 
bufãr
 = 0;

283 
	`P»ÿche
();

286 ifĞ
subTy³Id
 & 
asTYPEID_MASK_OBJECT
 )

288 
–em’tSize
 = (
asPWORD
);

292 
–em’tSize
 = 
objTy³
->
	`G‘Engše
()->
	`G‘SizeOfPrim™iveTy³
(
subTy³Id
);

296 ifĞ!
	`CheckMaxSize
(
Ëngth
) )

302 
	`C»©eBufãr
(&
bufãr
, 
Ëngth
);

305 ifĞ
objTy³
->
	`G‘FÏgs
(è& 
asOBJ_GC
 )

306 
objTy³
->
	`G‘Engše
()->
	`NÙifyG¬bageCŞËùÜOfNewObjeù
(
this
, objType);

309  
asUINT
 
n
 = 0;‚ < 
	`G‘Size
();‚++ )

310 
	`S‘V®ue
(
n
, 
defV®
);

311 
	}
}

313 
	gCSütA¼ay
::
	$S‘V®ue
(
asUINT
 
šdex
, *
v®ue
)

317 *
±r
 = 
	`At
(
šdex
);

318 ifĞ
±r
 == 0 ) ;

320 ifĞ(
subTy³Id
 & ~
asTYPEID_MASK_SEQNBR
è&& !(subTy³Id & 
asTYPEID_OBJHANDLE
) )

321 
objTy³
->
	`G‘Engše
()->
	`AssignSütObjeù
(
±r
, 
v®ue
, 
subTy³Id
);

322 ifĞ
subTy³Id
 & 
asTYPEID_OBJHANDLE
 )

324 *
tmp
 = *(**)
±r
;

325 *(**)
±r
 = *(**)
v®ue
;

326 
objTy³
->
	`G‘Engše
()->
	`AddRefSütObjeù
(*(**)
v®ue
, objTy³->
	`G‘SubTy³
());

327 ifĞ
tmp
 )

328 
objTy³
->
	`G‘Engše
()->
	`R–—£SütObjeù
(*(**)
v®ue
, objTy³->
	`G‘SubTy³
());

330 ifĞ
subTy³Id
 =ğ
asTYPEID_BOOL
 ||

331 
subTy³Id
 =ğ
asTYPEID_INT8
 ||

332 
subTy³Id
 =ğ
asTYPEID_UINT8
 )

333 *(*)
±r
 = *(*)
v®ue
;

334 ifĞ
subTy³Id
 =ğ
asTYPEID_INT16
 ||

335 
subTy³Id
 =ğ
asTYPEID_UINT16
 )

336 *(*)
±r
 = *(*)
v®ue
;

337 ifĞ
subTy³Id
 =ğ
asTYPEID_INT32
 ||

338 
subTy³Id
 =ğ
asTYPEID_UINT32
 ||

339 
subTy³Id
 =ğ
asTYPEID_FLOAT
 ||

340 
subTy³Id
 > 
asTYPEID_DOUBLE
 )

341 *(*)
±r
 = *(*)
v®ue
;

342 ifĞ
subTy³Id
 =ğ
asTYPEID_INT64
 ||

343 
subTy³Id
 =ğ
asTYPEID_UINT64
 ||

344 
subTy³Id
 =ğ
asTYPEID_DOUBLE
 )

345 *(*)
±r
 = *(*)
v®ue
;

346 
	}
}

348 
	gCSütA¼ay
::~
	$CSütA¼ay
()

350 ifĞ
bufãr
 )

352 
	`D–‘eBufãr
(
bufãr
);

353 
bufãr
 = 0;

355 ifĞ
objTy³
 ) objTy³->
	`R–—£
();

356 
	}
}

358 
asUINT
 
	gCSütA¼ay
::
	$G‘Size
() const

360  
bufãr
->
numEËm’ts
;

361 
	}
}

363 
boŞ
 
	gCSütA¼ay
::
	$IsEm±y
() const

365  
bufãr
->
numEËm’ts
 == 0;

366 
	}
}

368 
	gCSütA¼ay
::
	$Re£rve
(
asUINT
 
maxEËm’ts
)

370 ifĞ
maxEËm’ts
 <ğ
bufãr
->maxElements )

374 
SA¼ayBufãr
 *
ÃwBufãr
;

375 #ià
	`defšed
(
AS_MARMALADE
)

376 
ÃwBufãr
 = (
SA¼ayBufãr
*)
Ãw
 
asBYTE
[(SA¼ayBufãr)-1 + 
–em’tSize
*
maxEËm’ts
];

378 
ÃwBufãr
 = (
SA¼ayBufãr
*)
	`Ãw
 (
nÙhrow
è
asBYTE
[(SA¼ayBufãr)-1 + 
–em’tSize
*
maxEËm’ts
];

380 ifĞ
ÃwBufãr
 )

382 
ÃwBufãr
->
numEËm’ts
 = 
bufãr
->numElements;

383 
ÃwBufãr
->
maxEËm’ts
 = maxElements;

388 
asISütCÚ‹xt
 *
ùx
 = 
	`asG‘AùiveCÚ‹xt
();

389 ifĞ
ùx
 )

390 
ùx
->
	`S‘Exû±iÚ
("Out of memory");

394 
	`memıy
(
ÃwBufãr
->
d©a
, 
bufãr
->d©a, bufãr->
numEËm’ts
*
–em’tSize
);

397 
d–‘e
[] (
asBYTE
*)
bufãr
;

399 
bufãr
 = 
ÃwBufãr
;

400 
	}
}

402 
	gCSütA¼ay
::
	$Resize
(
asUINT
 
numEËm’ts
)

404 ifĞ
numEËm’ts
 & 0x80000000 )

406 
	`CheckMaxSize
(
numEËm’ts
);

410 
	`Resize
(()
numEËm’ts
 - ()
bufãr
->numEËm’ts, (
asUINT
)-1);

411 
	}
}

414 
	gCSütA¼ay
::
	$Resize
(
d–
, 
asUINT
 
©
)

416 ifĞ
d–
 < 0 )

418 ifĞ-
d–
 > ()
bufãr
->
numEËm’ts
 )

419 
d–
 = -()
bufãr
->
numEËm’ts
;

420 ifĞ
©
 > 
bufãr
->
numEËm’ts
 + 
d–
 )

421 
©
 = 
bufãr
->
numEËm’ts
 + 
d–
;

423 ifĞ
d–
 > 0 )

426 ifĞ
d–
 > 0 && !
	`CheckMaxSize
(
bufãr
->
numEËm’ts
 + delta) )

429 ifĞ
©
 > 
bufãr
->
numEËm’ts
 )

430 
©
 = 
bufãr
->
numEËm’ts
;

433 ifĞ
d–
 == 0 ) ;

435 ifĞ
bufãr
->
maxEËm’ts
 < bufãr->
numEËm’ts
 + 
d–
 )

438 
SA¼ayBufãr
 *
ÃwBufãr
;

439 #ià
	`defšed
(
AS_MARMALADE
)

440 
ÃwBufãr
 = (
SA¼ayBufãr
*)
Ãw
 
asBYTE
[(SA¼ayBufãr)-1 + 
–em’tSize
*(
bufãr
->
numEËm’ts
 + 
d–
)];

442 
ÃwBufãr
 = (
SA¼ayBufãr
*)
	`Ãw
 (
nÙhrow
è
asBYTE
[(SA¼ayBufãr)-1 + 
–em’tSize
*(
bufãr
->
numEËm’ts
 + 
d–
)];

444 ifĞ
ÃwBufãr
 )

446 
ÃwBufãr
->
numEËm’ts
 = 
bufãr
->numEËm’t + 
d–
;

447 
ÃwBufãr
->
maxEËm’ts
 =‚ewBufãr->
numEËm’ts
;

452 
asISütCÚ‹xt
 *
ùx
 = 
	`asG‘AùiveCÚ‹xt
();

453 ifĞ
ùx
 )

454 
ùx
->
	`S‘Exû±iÚ
("Out of memory");

458 
	`memıy
(
ÃwBufãr
->
d©a
, 
bufãr
->d©a, 
©
*
–em’tSize
);

459 ifĞ
©
 < 
bufãr
->
numEËm’ts
 )

460 
	`memıy
(
ÃwBufãr
->
d©a
 + (
©
+
d–
)*
–em’tSize
, 
bufãr
->d©¨+‡t*–em’tSize, (bufãr->
numEËm’ts
-at)*elementSize);

462 ifĞ
subTy³Id
 & 
asTYPEID_MASK_OBJECT
 )

463 
	`CÚ¡ruù
(
ÃwBufãr
, 
©
,‡t+
d–
);

466 
d–‘e
[] (
asBYTE
*)
bufãr
;

468 
bufãr
 = 
ÃwBufãr
;

470 ifĞ
d–
 < 0 )

472 
	`De¡ruù
(
bufãr
, 
©
,‡t-
d–
);

473 
	`memmove
(
bufãr
->
d©a
 + 
©
*
–em’tSize
, bufãr->d©¨+ (©-
d–
)*–em’tSize, (bufãr->
numEËm’ts
 - (at-delta))*elementSize);

474 
bufãr
->
numEËm’ts
 +ğ
d–
;

478 
	`memmove
(
bufãr
->
d©a
 + (
©
+
d–
)*
–em’tSize
, bufãr->d©¨+‡t*–em’tSize, (bufãr->
numEËm’ts
 -‡t)*elementSize);

479 
	`CÚ¡ruù
(
bufãr
, 
©
,‡t+
d–
);

480 
bufãr
->
numEËm’ts
 +ğ
d–
;

482 
	}
}

485 
boŞ
 
	gCSütA¼ay
::
	$CheckMaxSize
(
asUINT
 
numEËm’ts
)

490 
asUINT
 
maxSize
 = 0xFFFFFFFFuÈ- (
SA¼ayBufãr
) + 1;

491 ifĞ
subTy³Id
 & 
asTYPEID_MASK_OBJECT
 )

492 
maxSize
 /= (*);

493 ifĞ
–em’tSize
 > 0 )

494 
maxSize
 /ğ
–em’tSize
;

496 ifĞ
numEËm’ts
 > 
maxSize
 )

498 
asISütCÚ‹xt
 *
ùx
 = 
	`asG‘AùiveCÚ‹xt
();

499 ifĞ
ùx
 )

502 
ùx
->
	`S‘Exû±iÚ
("Too†arge‡rray size");

505  
çl£
;

509  
Œue
;

510 
	}
}

512 
asIObjeùTy³
 *
	gCSütA¼ay
::
	$G‘A¼ayObjeùTy³
() const

514  
objTy³
;

515 
	}
}

517 
	gCSütA¼ay
::
	$G‘A¼ayTy³Id
() const

519  
objTy³
->
	`G‘Ty³Id
();

520 
	}
}

522 
	gCSütA¼ay
::
	$G‘EËm’tTy³Id
() const

524  
subTy³Id
;

525 
	}
}

527 
	gCSütA¼ay
::
	$In£¹At
(
asUINT
 
šdex
, *
v®ue
)

529 ifĞ
šdex
 > 
bufãr
->
numEËm’ts
 )

532 
asISütCÚ‹xt
 *
ùx
 = 
	`asG‘AùiveCÚ‹xt
();

533 ifĞ
ùx
 )

534 
ùx
->
	`S‘Exû±iÚ
("Index out of bounds");

539 
	`Resize
(1, 
šdex
);

542 
	`S‘V®ue
(
šdex
, 
v®ue
);

543 
	}
}

545 
	gCSütA¼ay
::
	$In£¹La¡
(*
v®ue
)

547 
	`In£¹At
(
bufãr
->
numEËm’ts
, 
v®ue
);

548 
	}
}

550 
	gCSütA¼ay
::
	$RemoveAt
(
asUINT
 
šdex
)

552 ifĞ
šdex
 >ğ
bufãr
->
numEËm’ts
 )

555 
asISütCÚ‹xt
 *
ùx
 = 
	`asG‘AùiveCÚ‹xt
();

556 ifĞ
ùx
 )

557 
ùx
->
	`S‘Exû±iÚ
("Index out of bounds");

562 
	`Resize
(-1, 
šdex
);

563 
	}
}

565 
	gCSütA¼ay
::
	$RemoveLa¡
()

567 
	`RemoveAt
(
bufãr
->
numEËm’ts
-1);

568 
	}
}

571 cÚ¡ *
	gCSütA¼ay
::
	$At
(
asUINT
 
šdex
) const

573 ifĞ
bufãr
 =ğ0 || 
šdex
 >ğbufãr->
numEËm’ts
 )

576 
asISütCÚ‹xt
 *
ùx
 = 
	`asG‘AùiveCÚ‹xt
();

577 ifĞ
ùx
 )

578 
ùx
->
	`S‘Exû±iÚ
("Index out of bounds");

582 ifĞ(
subTy³Id
 & 
asTYPEID_MASK_OBJECT
è&& !(subTy³Id & 
asTYPEID_OBJHANDLE
) )

583  (*)((
size_t
*)
bufãr
->
d©a
)[
šdex
];

585  
bufãr
->
d©a
 + 
–em’tSize
*
šdex
;

586 
	}
}

587 *
	gCSütA¼ay
::
	$At
(
asUINT
 
šdex
)

589  
cÚ¡_ÿ¡
<*>(cÚ¡_ÿ¡<cÚ¡ 
CSütA¼ay
 *>(
this
)->
	`At
(
šdex
));

590 
	}
}

594 
	gCSütA¼ay
::
	$C»©eBufãr
(
SA¼ayBufãr
 **
buf
, 
asUINT
 
numEËm’ts
)

596 ifĞ
subTy³Id
 & 
asTYPEID_MASK_OBJECT
 )

598 #ià
	`defšed
Ğ
AS_MARMALADE
 )

599 *
buf
 = (
SA¼ayBufãr
*)
Ãw
 
asBYTE
[(SA¼ayBufãr)-1+(*)*
numEËm’ts
];

601 *
buf
 = (
SA¼ayBufãr
*)
	`Ãw
 (
nÙhrow
è
asBYTE
[(SA¼ayBufãr)-1+(*)*
numEËm’ts
];

606 #ià
	`defšed
Ğ
AS_MARMALADE
 )

607 *
buf
 = (
SA¼ayBufãr
*)
Ãw
 
asBYTE
[(SA¼ayBufãr)-1+
–em’tSize
*
numEËm’ts
];

609 *
buf
 = (
SA¼ayBufãr
*)
	`Ãw
 (
nÙhrow
è
asBYTE
[(SA¼ayBufãr)-1+
–em’tSize
*
numEËm’ts
];

613 ifĞ*
buf
 )

615 (*
buf
)->
numEËm’ts
 =‚umElements;

616 (*
buf
)->
maxEËm’ts
 = 
numEËm’ts
;

617 
	`CÚ¡ruù
(*
buf
, 0, 
numEËm’ts
);

622 
asISütCÚ‹xt
 *
ùx
 = 
	`asG‘AùiveCÚ‹xt
();

623 ifĞ
ùx
 )

624 
ùx
->
	`S‘Exû±iÚ
("Out of memory");

626 
	}
}

629 
	gCSütA¼ay
::
	$D–‘eBufãr
(
SA¼ayBufãr
 *
buf
)

631 
	`De¡ruù
(
buf
, 0, buf->
numEËm’ts
);

634 
d–‘e
[] (
asBYTE
*)
buf
;

635 
	}
}

638 
	gCSütA¼ay
::
	$CÚ¡ruù
(
SA¼ayBufãr
 *
buf
, 
asUINT
 
¡¬t
,‡sUINT 
’d
)

640 ifĞ
subTy³Id
 & 
asTYPEID_OBJHANDLE
 )

643 *
d
 = (*)(
buf
->
d©a
 + 
¡¬t
 * (*));

644 
	`mem£t
(
d
, 0, (
’d
-
¡¬t
)*(*));

646 ifĞ
subTy³Id
 & 
asTYPEID_MASK_OBJECT
 )

648 **
max
 = (**)(
buf
->
d©a
 + 
’d
 * (*));

649 **
d
 = (**)(
buf
->
d©a
 + 
¡¬t
 * (*));

651 
asISütEngše
 *
’gše
 = 
objTy³
->
	`G‘Engše
();

653  ; 
d
 < 
max
; d++ )

654 *
d
 = (*)
’gše
->
	`C»©eSütObjeù
(
subTy³Id
);

656 
	}
}

659 
	gCSütA¼ay
::
	$De¡ruù
(
SA¼ayBufãr
 *
buf
, 
asUINT
 
¡¬t
,‡sUINT 
’d
)

661 ifĞ
subTy³Id
 & 
asTYPEID_MASK_OBJECT
 )

663 
asISütEngše
 *
’gše
 = 
objTy³
->
	`G‘Engše
();

665 **
max
 = (**)(
buf
->
d©a
 + 
’d
 * (*));

666 **
d
 = (**)(
buf
->
d©a
 + 
¡¬t
 * (*));

668  ; 
d
 < 
max
; d++ )

670 ifĞ*
d
 )

671 
’gše
->
	`R–—£SütObjeù
(*
d
, 
objTy³
->
	`G‘SubTy³
());

674 
	}
}

678 
boŞ
 
	gCSütA¼ay
::
	$Less
(cÚ¡ *
a
, cÚ¡ *
b
, 
boŞ
 
asc
, 
asISütCÚ‹xt
 *
ùx
)

680 ifĞ!
asc
 )

683 cÚ¡ *
TEMP
 = 
a
;

684 
a
 = 
b
;

685 
b
 = 
TEMP
;

688 ifĞ!(
subTy³Id
 & ~
asTYPEID_MASK_SEQNBR
) )

691  
subTy³Id
 )

693 
	#COMPARE
(
T
è*((T*)
a
è< *((T*)
b
)

	)

694 
asTYPEID_BOOL
:  
	`COMPARE
(
boŞ
);

695 
asTYPEID_INT8
:  
	`COMPARE
(signed );

696 
asTYPEID_UINT8
:  
	`COMPARE
();

697 
asTYPEID_INT16
:  
	`COMPARE
(signed );

698 
asTYPEID_UINT16
:  
	`COMPARE
();

699 
asTYPEID_INT32
:  
	`COMPARE
(signed );

700 
asTYPEID_UINT32
:  
	`COMPARE
();

701 
asTYPEID_FLOAT
:  
	`COMPARE
();

702 
asTYPEID_DOUBLE
:  
	`COMPARE
();

703 :  
	`COMPARE
(signed );

704 #undeà
COMPARE


707 ifĞ
subTy³Id
 & 
asTYPEID_OBJHANDLE
 )

709  *((**)
a
è< *((**)
b
);

713 
r
 = 0;

716 
SA¼ayCache
 *
ÿche
 = 
»š‹½»t_ÿ¡
<SA¼ayCache*>(
objTy³
->
	`G‘U£rD©a
(
ARRAY_CACHE
));

717 ifĞ
ÿche
 && cache->
cmpFunc
 )

720 
r
 = 
ùx
->
	`P»·»
(
ÿche
->
cmpFunc
); 
	`as£¹
(r >= 0);

721 
r
 = 
ùx
->
	`S‘Objeù
((*)
a
); 
	`as£¹
(r >= 0);

722 
r
 = 
ùx
->
	`S‘ArgObjeù
(0, (*)
b
); 
	`as£¹
(r >= 0);

723 
r
 = 
ùx
->
	`Execu‹
();

725 ifĞ
r
 =ğ
asEXECUTION_FINISHED
 )

727  ()
ùx
->
	`G‘R‘uºDWÜd
() < 0;

732  
çl£
;

733 
	}
}

735 
	gCSütA¼ay
::
	$Rev”£
()

737 
asUINT
 
size
 = 
	`G‘Size
();

739 ifĞ
size
 >= 2 )

741 
asBYTE
 
TEMP
[16];

743  
asUINT
 
i
 = 0; i < 
size
 / 2; i++ )

745 
	`Cİy
(
TEMP
, 
	`G‘A¼ayI‹mPoš‹r
(
i
));

746 
	`Cİy
(
	`G‘A¼ayI‹mPoš‹r
(
i
), G‘A¼ayI‹mPoš‹r(
size
 - i - 1));

747 
	`Cİy
(
	`G‘A¼ayI‹mPoš‹r
(
size
 - 
i
 - 1), 
TEMP
);

750 
	}
}

752 
boŞ
 
	gCSütA¼ay
::
İ”©Ü
==(cÚ¡ 
CSütA¼ay
 &
Ùh”
) const

754 ifĞ
objTy³
 !ğ
Ùh”
.objType )

755  
çl£
;

757 ifĞ
G‘Size
(è!ğ
Ùh”
.GetSize() )

758  
çl£
;

760 
asISütCÚ‹xt
 *
	gcmpCÚ‹xt
 = 0;

761 
boŞ
 
	gisNe¡ed
 = 
çl£
;

763 ifĞ(
	gsubTy³Id
 & ~
	gasTYPEID_MASK_SEQNBR
è&& !(subTy³Id & 
	gasTYPEID_OBJHANDLE
) )

766 
	gcmpCÚ‹xt
 = 
asG‘AùiveCÚ‹xt
();

767 ifĞ
	gcmpCÚ‹xt
 )

769 ifĞ
	gcmpCÚ‹xt
->
PushS‹
() >= 0 )

770 
isNe¡ed
 = 
Œue
;

772 
	gcmpCÚ‹xt
 = 0;

774 ifĞ
	gcmpCÚ‹xt
 == 0 )

779 
cmpCÚ‹xt
 = 
objTy³
->
G‘Engše
()->
C»©eCÚ‹xt
();

784 
boŞ
 
	gisEqu®
 = 
Œue
;

785 
SA¼ayCache
 *
	gÿche
 = 
»š‹½»t_ÿ¡
<SA¼ayCache*>(
objTy³
->
G‘U£rD©a
(
ARRAY_CACHE
));

786  
asUINT
 
	gn
 = 0;‚ < 
G‘Size
();‚++ )

787 ifĞ!
Equ®s
(
At
(
n
), 
Ùh”
.AtÒ), 
cmpCÚ‹xt
, 
ÿche
) )

789 
	gisEqu®
 = 
çl£
;

793 ifĞ
	gcmpCÚ‹xt
 )

794 ifĞ
	gisNe¡ed
 )

796 
asECÚ‹xtS‹
 
	g¡©e
 = 
cmpCÚ‹xt
->
G‘S‹
();

797 
	gcmpCÚ‹xt
->
PİS‹
();

798 ifĞ
	g¡©e
 =ğ
asEXECUTION_ABORTED
 )

799 
cmpCÚ‹xt
->
AbÜt
();

802 
	gcmpCÚ‹xt
->
R–—£
();

804  
	gisEqu®
;

808 
boŞ
 
	gCSütA¼ay
::
	$Equ®s
(cÚ¡ *
a
, cÚ¡ *
b
, 
asISütCÚ‹xt
 *
ùx
, 
SA¼ayCache
 *
ÿche
) const

810 ifĞ!(
subTy³Id
 & ~
asTYPEID_MASK_SEQNBR
) )

813  
subTy³Id
 )

815 
	#COMPARE
(
T
è*((T*)
a
è=ğ*((T*)
b
)

	)

816 
asTYPEID_BOOL
:  
	`COMPARE
(
boŞ
);

817 
asTYPEID_INT8
:  
	`COMPARE
(signed );

818 
asTYPEID_UINT8
:  
	`COMPARE
();

819 
asTYPEID_INT16
:  
	`COMPARE
(signed );

820 
asTYPEID_UINT16
:  
	`COMPARE
();

821 
asTYPEID_INT32
:  
	`COMPARE
(signed );

822 
asTYPEID_UINT32
:  
	`COMPARE
();

823 
asTYPEID_FLOAT
:  
	`COMPARE
();

824 
asTYPEID_DOUBLE
:  
	`COMPARE
();

825 :  
	`COMPARE
(signed );

826 #undeà
COMPARE


829 ifĞ
subTy³Id
 & 
asTYPEID_OBJHANDLE
 )

831  *((**)
a
è=ğ*((**)
b
);

835 
r
 = 0;

838 ifĞ
ÿche
 && cache->
eqFunc
 )

841 
r
 = 
ùx
->
	`P»·»
(
ÿche
->
eqFunc
); 
	`as£¹
(r >= 0);

842 
r
 = 
ùx
->
	`S‘Objeù
((*)
a
); 
	`as£¹
(r >= 0);

843 
r
 = 
ùx
->
	`S‘ArgObjeù
(0, (*)
b
); 
	`as£¹
(r >= 0);

844 
r
 = 
ùx
->
	`Execu‹
();

846 ifĞ
r
 =ğ
asEXECUTION_FINISHED
 )

848  
ùx
->
	`G‘R‘uºBy‹
() != 0;

853 ifĞ
ÿche
 && cache->
cmpFunc
 >= 0 )

856 
r
 = 
ùx
->
	`P»·»
(
ÿche
->
cmpFunc
); 
	`as£¹
(r >= 0);

857 
r
 = 
ùx
->
	`S‘Objeù
((*)
a
); 
	`as£¹
(r >= 0);

858 
r
 = 
ùx
->
	`S‘ArgObjeù
(0, (*)
b
); 
	`as£¹
(r >= 0);

859 
r
 = 
ùx
->
	`Execu‹
();

861 ifĞ
r
 =ğ
asEXECUTION_FINISHED
 )

863  ()
ùx
->
	`G‘R‘uºDWÜd
() == 0;

868  
çl£
;

869 
	}
}

871 
	gCSütA¼ay
::
	$Fšd
(*
v®ue
) const

873  
	`Fšd
(0, 
v®ue
);

874 
	}
}

876 
	gCSütA¼ay
::
	$Fšd
(
asUINT
 
šdex
, *
v®ue
) const

880 
SA¼ayCache
 *
ÿche
 = 0;

881 ifĞ(
subTy³Id
 & ~
asTYPEID_MASK_SEQNBR
è&& !(subTy³Id & 
asTYPEID_OBJHANDLE
) )

883 
ÿche
 = 
»š‹½»t_ÿ¡
<
SA¼ayCache
*>(
objTy³
->
	`G‘U£rD©a
(
ARRAY_CACHE
));

884 ifĞ!
ÿche
 || (ÿche->
cmpFunc
 =ğ0 && cache->
eqFunc
 == 0) )

886 
asISütCÚ‹xt
 *
ùx
 = 
	`asG‘AùiveCÚ‹xt
();

887 
asIObjeùTy³
* 
subTy³
 = 
objTy³
->
	`G‘Engše
()->
	`G‘ObjeùTy³ById
(
subTy³Id
);

890 ifĞ
ùx
 )

892 
tmp
[512];

893 #ià
	`defšed
(
_MSC_VER
è&& _MSC_VER >ğ1500 && !defšed(
AS_MARMALADE
)

894 
	`¥rštf_s
(
tmp
, 512, "Ty³ '%s' dÛ nÙ havİEqu® / opCmp", 
subTy³
->
	`G‘Name
());

896 
	`¥rštf
(
tmp
, "Ty³ '%s' dÛ nÙ havİEqu® / opCmp", 
subTy³
->
	`G‘Name
());

898 
ùx
->
	`S‘Exû±iÚ
(
tmp
);

905 
asISütCÚ‹xt
 *
cmpCÚ‹xt
 = 0;

906 
boŞ
 
isNe¡ed
 = 
çl£
;

908 ifĞ(
subTy³Id
 & ~
asTYPEID_MASK_SEQNBR
è&& !(subTy³Id & 
asTYPEID_OBJHANDLE
) )

911 
cmpCÚ‹xt
 = 
	`asG‘AùiveCÚ‹xt
();

912 ifĞ
cmpCÚ‹xt
 )

914 ifĞ
cmpCÚ‹xt
->
	`PushS‹
() >= 0 )

915 
isNe¡ed
 = 
Œue
;

917 
cmpCÚ‹xt
 = 0;

919 ifĞ
cmpCÚ‹xt
 == 0 )

924 
cmpCÚ‹xt
 = 
objTy³
->
	`G‘Engše
()->
	`C»©eCÚ‹xt
();

929 
»t
 = -1;

930 
asUINT
 
size
 = 
	`G‘Size
();

932 ifĞ
šdex
 < 
size
 )

934  
asUINT
 
i
 = 
šdex
; i < 
size
; i++ )

937 ifĞ
	`Equ®s
(
	`At
(
i
), (
v®ue
), 
cmpCÚ‹xt
, 
ÿche
) )

939 
»t
 = ()
i
;

945 ifĞ
cmpCÚ‹xt
 )

946 ifĞ
isNe¡ed
 )

948 
asECÚ‹xtS‹
 
¡©e
 = 
cmpCÚ‹xt
->
	`G‘S‹
();

949 
cmpCÚ‹xt
->
	`PİS‹
();

950 ifĞ
¡©e
 =ğ
asEXECUTION_ABORTED
 )

951 
cmpCÚ‹xt
->
	`AbÜt
();

954 
cmpCÚ‹xt
->
	`R–—£
();

956  
»t
;

957 
	}
}

963 
	gCSütA¼ay
::
	$Cİy
(*
d¡
, *
¤c
)

965 
	`memıy
(
d¡
, 
¤c
, 
–em’tSize
);

966 
	}
}

971 *
	gCSütA¼ay
::
	$G‘A¼ayI‹mPoš‹r
(
šdex
)

973  
bufãr
->
d©a
 + 
šdex
 * 
–em’tSize
;

974 
	}
}

978 *
	gCSütA¼ay
::
	$G‘D©aPoš‹r
(*
bufãr
)

980 ià((
subTy³Id
 & 
asTYPEID_MASK_OBJECT
è&& !(subTy³Id & 
asTYPEID_OBJHANDLE
) )

983  
»š‹½»t_ÿ¡
<*>(*(
size_t
*)
bufãr
);

988  
bufãr
;

990 
	}
}

994 
	gCSütA¼ay
::
	$SÜtAsc
()

996 
	`SÜt
(0, 
	`G‘Size
(), 
Œue
);

997 
	}
}

1000 
	gCSütA¼ay
::
	$SÜtAsc
(
asUINT
 
šdex
,‡sUINT 
couÁ
)

1002 
	`SÜt
(
šdex
, 
couÁ
, 
Œue
);

1003 
	}
}

1006 
	gCSütA¼ay
::
	$SÜtDesc
()

1008 
	`SÜt
(0, 
	`G‘Size
(), 
çl£
);

1009 
	}
}

1012 
	gCSütA¼ay
::
	$SÜtDesc
(
asUINT
 
šdex
,‡sUINT 
couÁ
)

1014 
	`SÜt
(
šdex
, 
couÁ
, 
çl£
);

1015 
	}
}

1019 
	gCSütA¼ay
::
	$SÜt
(
asUINT
 
šdex
,‡sUINT 
couÁ
, 
boŞ
 
asc
)

1022 
SA¼ayCache
 *
ÿche
 = 
»š‹½»t_ÿ¡
<SA¼ayCache*>(
objTy³
->
	`G‘U£rD©a
(
ARRAY_CACHE
));

1023 ifĞ(
subTy³Id
 & ~
asTYPEID_MASK_SEQNBR
è&& !(subTy³Id & 
asTYPEID_OBJHANDLE
) )

1025 ifĞ!
ÿche
 || cache->
cmpFunc
 == 0 )

1027 
asISütCÚ‹xt
 *
ùx
 = 
	`asG‘AùiveCÚ‹xt
();

1028 
asIObjeùTy³
* 
subTy³
 = 
objTy³
->
	`G‘Engše
()->
	`G‘ObjeùTy³ById
(
subTy³Id
);

1031 ifĞ
ùx
 )

1033 
tmp
[512];

1034 #ià
	`defšed
(
_MSC_VER
è&& _MSC_VER >ğ1500 && !defšed(
AS_MARMALADE
)

1035 
	`¥rštf_s
(
tmp
, 512, "Ty³ '%s' dÛ nÙ havİCmp", 
subTy³
->
	`G‘Name
());

1037 
	`¥rštf
(
tmp
, "Ty³ '%s' dÛ nÙ havİCmp", 
subTy³
->
	`G‘Name
());

1039 
ùx
->
	`S‘Exû±iÚ
(
tmp
);

1047 ifĞ
couÁ
 < 2 )

1052 
¡¬t
 = 
šdex
;

1053 
’d
 = 
šdex
 + 
couÁ
;

1056 ifĞ
¡¬t
 >ğ()
bufãr
->
numEËm’ts
 || 
’d
 > ()buffer->numElements )

1058 
asISütCÚ‹xt
 *
ùx
 = 
	`asG‘AùiveCÚ‹xt
();

1061 ifĞ
ùx
 )

1063 
ùx
->
	`S‘Exû±iÚ
("Index out of bounds");

1069 
asBYTE
 
tmp
[16];

1070 
asISütCÚ‹xt
 *
cmpCÚ‹xt
 = 0;

1071 
boŞ
 
isNe¡ed
 = 
çl£
;

1073 ifĞ(
subTy³Id
 & ~
asTYPEID_MASK_SEQNBR
è&& !(subTy³Id & 
asTYPEID_OBJHANDLE
) )

1076 
cmpCÚ‹xt
 = 
	`asG‘AùiveCÚ‹xt
();

1077 ifĞ
cmpCÚ‹xt
 )

1079 ifĞ
cmpCÚ‹xt
->
	`PushS‹
() >= 0 )

1080 
isNe¡ed
 = 
Œue
;

1082 
cmpCÚ‹xt
 = 0;

1084 ifĞ
cmpCÚ‹xt
 == 0 )

1089 
cmpCÚ‹xt
 = 
objTy³
->
	`G‘Engše
()->
	`C»©eCÚ‹xt
();

1094  
i
 = 
¡¬t
 + 1; i < 
’d
; i++ )

1096 
	`Cİy
(
tmp
, 
	`G‘A¼ayI‹mPoš‹r
(
i
));

1098 
j
 = 
i
 - 1;

1100  
j
 >ğ
¡¬t
 && 
	`Less
(
	`G‘D©aPoš‹r
(
tmp
), 
	`At
(j), 
asc
, 
cmpCÚ‹xt
) )

1102 
	`Cİy
(
	`G‘A¼ayI‹mPoš‹r
(
j
 + 1), GetArrayItemPointer(j));

1103 
j
--;

1106 
	`Cİy
(
	`G‘A¼ayI‹mPoš‹r
(
j
 + 1), 
tmp
);

1109 ifĞ
cmpCÚ‹xt
 )

1110 ifĞ
isNe¡ed
 )

1112 
asECÚ‹xtS‹
 
¡©e
 = 
cmpCÚ‹xt
->
	`G‘S‹
();

1113 
cmpCÚ‹xt
->
	`PİS‹
();

1114 ifĞ
¡©e
 =ğ
asEXECUTION_ABORTED
 )

1115 
cmpCÚ‹xt
->
	`AbÜt
();

1118 
cmpCÚ‹xt
->
	`R–—£
();

1119 
	}
}

1122 
	gCSütA¼ay
::
	$CİyBufãr
(
SA¼ayBufãr
 *
d¡
, SA¼ayBufã¸*
¤c
)

1124 
asISütEngše
 *
’gše
 = 
objTy³
->
	`G‘Engše
();

1125 ifĞ
subTy³Id
 & 
asTYPEID_OBJHANDLE
 )

1128 ifĞ
d¡
->
numEËm’ts
 > 0 && 
¤c
->numElements > 0 )

1130 
couÁ
 = 
d¡
->
numEËm’ts
 > 
¤c
->numElements ? src->numElements : dst->numElements;

1132 **
max
 = (**)(
d¡
->
d©a
 + 
couÁ
 * (*));

1133 **
d
 = (**)
d¡
->
d©a
;

1134 **
s
 = (**)
¤c
->
d©a
;

1136  ; 
d
 < 
max
; d++, 
s
++ )

1138 *
tmp
 = *
d
;

1139 *
d
 = *
s
;

1140 ifĞ*
d
 )

1141 
’gše
->
	`AddRefSütObjeù
(*
d
, 
objTy³
->
	`G‘SubTy³
());

1143 ifĞ
tmp
 )

1144 
’gše
->
	`R–—£SütObjeù
(
tmp
, 
objTy³
->
	`G‘SubTy³
());

1150 ifĞ
d¡
->
numEËm’ts
 > 0 && 
¤c
->numElements > 0 )

1152 
couÁ
 = 
d¡
->
numEËm’ts
 > 
¤c
->numElements ? src->numElements : dst->numElements;

1153 ifĞ
subTy³Id
 & 
asTYPEID_MASK_OBJECT
 )

1156 **
max
 = (**)(
d¡
->
d©a
 + 
couÁ
 * (*));

1157 **
d
 = (**)
d¡
->
d©a
;

1158 **
s
 = (**)
¤c
->
d©a
;

1160  ; 
d
 < 
max
; d++, 
s
++ )

1161 
’gše
->
	`AssignSütObjeù
(*
d
, *
s
, 
subTy³Id
);

1166 
	`memıy
(
d¡
->
d©a
, 
¤c
->d©a, 
couÁ
*
–em’tSize
);

1170 
	}
}

1174 
	gCSütA¼ay
::
	$P»ÿche
()

1176 
subTy³Id
 = 
objTy³
->
	`G‘SubTy³Id
();

1180 ifĞ!(
subTy³Id
 & ~
asTYPEID_MASK_SEQNBR
) )

1187 
SA¼ayCache
 *
ÿche
 = 
»š‹½»t_ÿ¡
<SA¼ayCache*>(
objTy³
->
	`G‘U£rD©a
(
ARRAY_CACHE
));

1188 ifĞ
ÿche
 ) ;

1192 
	`asAcquœeExşusiveLock
();

1196 
ÿche
 = 
»š‹½»t_ÿ¡
<
SA¼ayCache
*>(
objTy³
->
	`G‘U£rD©a
(
ARRAY_CACHE
));

1197 ifĞ
ÿche
 )

1199 
	`asR–—£ExşusiveLock
();

1204 
ÿche
 = 
Ãw
 
	`SA¼ayCache
();

1205 
	`mem£t
(
ÿche
, 0, (
SA¼ayCache
));

1207 
asIObjeùTy³
 *
subTy³
 = 
objTy³
->
	`G‘Engše
()->
	`G‘ObjeùTy³ById
(
subTy³Id
);

1208 ifĞ
subTy³
 )

1210  
asUINT
 
i
 = 0; i < 
subTy³
->
	`G‘M‘hodCouÁ
(); i++ )

1212 
asISütFunùiÚ
 *
func
 = 
subTy³
->
	`G‘M‘hodByIndex
(
i
);

1214 ifĞ
func
->
	`G‘P¬amCouÁ
() == 1 )

1216 
asDWORD
 
æags
 = 0;

1217 
»tuºTy³Id
 = 
func
->
	`G‘R‘uºTy³Id
();

1218 
·¿mTy³Id
 = 
func
->
	`G‘P¬amTy³Id
(0, &
æags
);

1221 ifĞ((
æags
 & 
asTM_INREF
è&& 
·¿mTy³Id
 =ğ
subTy³Id
) ||

1222 (
æags
 == 0 &&

1223 (
·¿mTy³Id
 & 
asTYPEID_OBJHANDLE
) &&

1224 (
·¿mTy³Id
 & ~(
asTYPEID_OBJHANDLE
 | 
asTYPEID_HANDLETOCONST
)è=ğ(
subTy³Id
 & ~(asTYPEID_OBJHANDLE |‡sTYPEID_HANDLETOCONST))) )

1226 ifĞ
»tuºTy³Id
 =ğ
asTYPEID_INT32
 && 
	`¡rcmp
(
func
->
	`G‘Name
(), "opCmp") == 0 )

1227 
ÿche
->
cmpFunc
 = 
subTy³
->
	`G‘M‘hodByIndex
(
i
);

1229 ifĞ
»tuºTy³Id
 =ğ
asTYPEID_BOOL
 && 
	`¡rcmp
(
func
->
	`G‘Name
(), "opEquals") == 0 )

1230 
ÿche
->
eqFunc
 = 
subTy³
->
	`G‘M‘hodByIndex
(
i
);

1232 ifĞ
ÿche
->
cmpFunc
 && cache->
eqFunc
 )

1240 
objTy³
->
	`S‘U£rD©a
(
ÿche
, 
ARRAY_CACHE
);

1242 
	`asR–—£ExşusiveLock
();

1243 
	}
}

1246 
	gCSütA¼ay
::
	$EnumReã»nûs
(
asISütEngše
 *
’gše
)

1249 ifĞ
subTy³Id
 & 
asTYPEID_MASK_OBJECT
 )

1251 **
d
 = (**)
bufãr
->
d©a
;

1252  
asUINT
 
n
 = 0;‚ < 
bufãr
->
numEËm’ts
;‚++ )

1254 ifĞ
d
[
n
] )

1255 
’gše
->
	`GCEnumC®lback
(
d
[
n
]);

1258 
	}
}

1261 
	gCSütA¼ay
::
	$R–—£AÎHªdËs
(
asISütEngše
 *
’gše
)

1264 
	`Resize
(0);

1265 
	}
}

1267 
	gCSütA¼ay
::
	$AddRef
() const

1270 
gcFÏg
 = 
çl£
;

1271 
»fCouÁ
++;

1272 
	}
}

1274 
	gCSütA¼ay
::
	$R–—£
() const

1277 
gcFÏg
 = 
çl£
;

1278 ifĞ--
»fCouÁ
 == 0 )

1280 
d–‘e
 
this
;

1282 
	}
}

1285 
	gCSütA¼ay
::
	$G‘RefCouÁ
()

1287  
»fCouÁ
;

1288 
	}
}

1291 
	gCSütA¼ay
::
	$S‘FÏg
()

1293 
gcFÏg
 = 
Œue
;

1294 
	}
}

1297 
boŞ
 
	gCSütA¼ay
::
	$G‘FÏg
()

1299  
gcFÏg
;

1300 
	}
}

1305 
	$SütA¼ayFaùÜy_G’”ic
(
asISütG’”ic
 *
g’
)

1307 
asIObjeùTy³
 *
Ù
 = *×sIObjeùTy³**)
g’
->
	`G‘Add»ssOfArg
(0);

1309 *(
CSütA¼ay
**)
g’
->
	`G‘Add»ssOfR‘uºLoÿtiÚ
(èğ
	`SütA¼ayFaùÜy
(
Ù
);

1310 
	}
}

1312 
	$SütA¼ayFaùÜy2_G’”ic
(
asISütG’”ic
 *
g’
)

1314 
asIObjeùTy³
 *
Ù
 = *×sIObjeùTy³**)
g’
->
	`G‘Add»ssOfArg
(0);

1315 
asUINT
 
Ëngth
 = 
g’
->
	`G‘ArgDWÜd
(1);

1317 *(
CSütA¼ay
**)
g’
->
	`G‘Add»ssOfR‘uºLoÿtiÚ
(èğ
	`SütA¼ayFaùÜy2
(
Ù
, 
Ëngth
);

1318 
	}
}

1320 
	$SütA¼ayFaùÜyDefV®_G’”ic
(
asISütG’”ic
 *
g’
)

1322 
asIObjeùTy³
 *
Ù
 = *×sIObjeùTy³**)
g’
->
	`G‘Add»ssOfArg
(0);

1323 
asUINT
 
Ëngth
 = 
g’
->
	`G‘ArgDWÜd
(1);

1324 *
defV®
 = 
g’
->
	`G‘ArgAdd»ss
(2);

1326 *(
CSütA¼ay
**)
g’
->
	`G‘Add»ssOfR‘uºLoÿtiÚ
(èğ
	`SütA¼ayFaùÜyDefV®
(
Ù
, 
Ëngth
, 
defV®
);

1327 
	}
}

1329 
	$SütA¼ayTem¶©eC®lback_G’”ic
(
asISütG’”ic
 *
g’
)

1331 
asIObjeùTy³
 *
Ù
 = *×sIObjeùTy³**)
g’
->
	`G‘Add»ssOfArg
(0);

1332 *(
boŞ
*)
g’
->
	`G‘Add»ssOfR‘uºLoÿtiÚ
(èğ
	`SütA¼ayTem¶©eC®lback
(
Ù
);

1333 
	}
}

1335 
	$SütA¼ayAssignm’t_G’”ic
(
asISütG’”ic
 *
g’
)

1337 
CSütA¼ay
 *
Ùh”
 = (CSütA¼ay*)
g’
->
	`G‘ArgObjeù
(0);

1338 
CSütA¼ay
 *
£lf
 = (CSütA¼ay*)
g’
->
	`G‘Objeù
();

1340 *
£lf
 = *
Ùh”
;

1342 
g’
->
	`S‘R‘uºObjeù
(
£lf
);

1343 
	}
}

1345 
	$SütA¼ayAt_G’”ic
(
asISütG’”ic
 *
g’
)

1347 
asUINT
 
šdex
 = 
g’
->
	`G‘ArgDWÜd
(0);

1348 
CSütA¼ay
 *
£lf
 = (CSütA¼ay*)
g’
->
	`G‘Objeù
();

1350 
g’
->
	`S‘R‘uºAdd»ss
(
£lf
->
	`At
(
šdex
));

1351 
	}
}

1353 
	$SütA¼ayL’gth_G’”ic
(
asISütG’”ic
 *
g’
)

1355 
CSütA¼ay
 *
£lf
 = (CSütA¼ay*)
g’
->
	`G‘Objeù
();

1357 
g’
->
	`S‘R‘uºDWÜd
(
£lf
->
	`G‘Size
());

1358 
	}
}

1360 
	$SütA¼ayResize_G’”ic
(
asISütG’”ic
 *
g’
)

1362 
asUINT
 
size
 = 
g’
->
	`G‘ArgDWÜd
(0);

1363 
CSütA¼ay
 *
£lf
 = (CSütA¼ay*)
g’
->
	`G‘Objeù
();

1365 
£lf
->
	`Resize
(
size
);

1366 
	}
}

1368 
	$SütA¼ayAddRef_G’”ic
(
asISütG’”ic
 *
g’
)

1370 
CSütA¼ay
 *
£lf
 = (CSütA¼ay*)
g’
->
	`G‘Objeù
();

1371 
£lf
->
	`AddRef
();

1372 
	}
}

1374 
	$SütA¼ayR–—£_G’”ic
(
asISütG’”ic
 *
g’
)

1376 
CSütA¼ay
 *
£lf
 = (CSütA¼ay*)
g’
->
	`G‘Objeù
();

1377 
£lf
->
	`R–—£
();

1378 
	}
}

1380 
	$SütA¼ayG‘RefCouÁ_G’”ic
(
asISütG’”ic
 *
g’
)

1382 
CSütA¼ay
 *
£lf
 = (CSütA¼ay*)
g’
->
	`G‘Objeù
();

1383 *(*)
g’
->
	`G‘Add»ssOfR‘uºLoÿtiÚ
(èğ
£lf
->
	`G‘RefCouÁ
();

1384 
	}
}

1386 
	$SütA¼ayS‘FÏg_G’”ic
(
asISütG’”ic
 *
g’
)

1388 
CSütA¼ay
 *
£lf
 = (CSütA¼ay*)
g’
->
	`G‘Objeù
();

1389 
£lf
->
	`S‘FÏg
();

1390 
	}
}

1392 
	$SütA¼ayG‘FÏg_G’”ic
(
asISütG’”ic
 *
g’
)

1394 
CSütA¼ay
 *
£lf
 = (CSütA¼ay*)
g’
->
	`G‘Objeù
();

1395 *(
boŞ
*)
g’
->
	`G‘Add»ssOfR‘uºLoÿtiÚ
(èğ
£lf
->
	`G‘FÏg
();

1396 
	}
}

1398 
	$SütA¼ayEnumReã»nûs_G’”ic
(
asISütG’”ic
 *
g’
)

1400 
CSütA¼ay
 *
£lf
 = (CSütA¼ay*)
g’
->
	`G‘Objeù
();

1401 
asISütEngše
 *
’gše
 = *×sISütEngše**)
g’
->
	`G‘Add»ssOfArg
(0);

1402 
£lf
->
	`EnumReã»nûs
(
’gše
);

1403 
	}
}

1405 
	$SütA¼ayR–—£AÎHªdËs_G’”ic
(
asISütG’”ic
 *
g’
)

1407 
CSütA¼ay
 *
£lf
 = (CSütA¼ay*)
g’
->
	`G‘Objeù
();

1408 
asISütEngše
 *
’gše
 = *×sISütEngše**)
g’
->
	`G‘Add»ssOfArg
(0);

1409 
£lf
->
	`R–—£AÎHªdËs
(
’gše
);

1410 
	}
}

1412 
	$Regi¡”SütA¼ay_G’”ic
(
asISütEngše
 *
’gše
)

1414 
r
;

1416 
r
 = 
’gše
->
	`Regi¡”ObjeùTy³
("¬¿y<şas T>", 0, 
asOBJ_REF
 | 
asOBJ_GC
 | 
asOBJ_TEMPLATE
); 
	`as£¹
(„ >= 0 );

1418 
r
 = 
’gše
->
	`Regi¡”ObjeùBehaviour
("¬¿y<T>", 
asBEHAVE_FACTORY
, "¬¿y<T>@ f(št&š)", 
	`asFUNCTION
(
SütA¼ayFaùÜy_G’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

1419 
r
 = 
’gše
->
	`Regi¡”ObjeùBehaviour
("¬¿y<T>", 
asBEHAVE_TEMPLATE_CALLBACK
, "boŞ f(št&š)", 
	`asFUNCTION
(
SütA¼ayTem¶©eC®lback_G’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

1420 
r
 = 
’gše
->
	`Regi¡”ObjeùBehaviour
("¬¿y<T>", 
asBEHAVE_FACTORY
, "¬¿y<T>@ f(št&š, ušt)", 
	`asFUNCTION
(
SütA¼ayFaùÜy2_G’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

1421 
r
 = 
’gše
->
	`Regi¡”ObjeùBehaviour
("¬¿y<T>", 
asBEHAVE_FACTORY
, "¬¿y<T>@ f(št&š, ušt, cÚ¡ T &š)", 
	`asFUNCTION
(
SütA¼ayFaùÜyDefV®_G’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

1422 
r
 = 
’gše
->
	`Regi¡”ObjeùBehaviour
("¬¿y<T>", 
asBEHAVE_LIST_FACTORY
, "¬¿y<T>@ f(št&š, ušt)", 
	`asFUNCTION
(
SütA¼ayFaùÜy2_G’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

1423 
r
 = 
’gše
->
	`Regi¡”ObjeùBehaviour
("¬¿y<T>", 
asBEHAVE_ADDREF
, "void f()", 
	`asFUNCTION
(
SütA¼ayAddRef_G’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

1424 
r
 = 
’gše
->
	`Regi¡”ObjeùBehaviour
("¬¿y<T>", 
asBEHAVE_RELEASE
, "void f()", 
	`asFUNCTION
(
SütA¼ayR–—£_G’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

1425 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "T &İIndex(ušt)", 
	`asFUNCTION
(
SütA¼ayAt_G’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

1426 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "cÚ¡ T &İIndex(uštècÚ¡", 
	`asFUNCTION
(
SütA¼ayAt_G’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

1427 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "¬¿y<T> &İAssign(cÚ¡‡¼ay<T>&š)", 
	`asFUNCTION
(
SütA¼ayAssignm’t_G’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

1428 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "ušˆËngth(ècÚ¡", 
	`asFUNCTION
(
SütA¼ayL’gth_G’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

1429 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "void„esize(ušt)", 
	`asFUNCTION
(
SütA¼ayResize_G’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

1430 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "ušˆg‘_Ëngth(ècÚ¡", 
	`asFUNCTION
(
SütA¼ayL’gth_G’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

1431 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¬¿y<T>", "void s‘_Ëngth(ušt)", 
	`asFUNCTION
(
SütA¼ayResize_G’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

1432 
r
 = 
’gše
->
	`Regi¡”ObjeùBehaviour
("¬¿y<T>", 
asBEHAVE_GETREFCOUNT
, "šˆf()", 
	`asFUNCTION
(
SütA¼ayG‘RefCouÁ_G’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

1433 
r
 = 
’gše
->
	`Regi¡”ObjeùBehaviour
("¬¿y<T>", 
asBEHAVE_SETGCFLAG
, "void f()", 
	`asFUNCTION
(
SütA¼ayS‘FÏg_G’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

1434 
r
 = 
’gše
->
	`Regi¡”ObjeùBehaviour
("¬¿y<T>", 
asBEHAVE_GETGCFLAG
, "boŞ f()", 
	`asFUNCTION
(
SütA¼ayG‘FÏg_G’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

1435 
r
 = 
’gše
->
	`Regi¡”ObjeùBehaviour
("¬¿y<T>", 
asBEHAVE_ENUMREFS
, "void f(št&š)", 
	`asFUNCTION
(
SütA¼ayEnumReã»nûs_G’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

1436 
r
 = 
’gše
->
	`Regi¡”ObjeùBehaviour
("¬¿y<T>", 
asBEHAVE_RELEASEREFS
, "void f(št&š)", 
	`asFUNCTION
(
SütA¼ayR–—£AÎHªdËs_G’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

1437 
	}
}

1439 
	gEND_AS_NAMESPACE


	@../src/script/as_atomic.cpp

37 
	~"../../hdr/süt/as_©omic.h
"

39 
BEGIN_AS_NAMESPACE


41 
	gasCAtomic
::
	$asCAtomic
()

43 
v®ue
 = 0;

44 
	}
}

46 
asDWORD
 
	gasCAtomic
::
	$g‘
() const

48  
v®ue
;

49 
	}
}

51 
	gasCAtomic
::
	$£t
(
asDWORD
 
v®
)

53 
v®ue
 = 
v®
;

54 
	}
}

59 #ifdeà
AS_NO_THREADS


61 
asDWORD
 
	gasCAtomic
::
	$©omicInc
()

63  ++
v®ue
;

64 
	}
}

66 
asDWORD
 
	gasCAtomic
::
	$©omicDec
()

68  --
v®ue
;

69 
	}
}

71 #–ià
defšed
(
AS_NO_ATOMIC
)

73 
asDWORD
 
	gasCAtomic
::
	$©omicInc
()

75 
asDWORD
 
v
;

76 
	`ENTERCRITICALSECTION
(
cs
);

77 
v
 = ++
v®ue
;

78 
	`LEAVECRITICALSECTION
(
cs
);

79  
v
;

80 
	}
}

82 
asDWORD
 
	gasCAtomic
::
	$©omicDec
()

84 
asDWORD
 
v
;

85 
	`ENTERCRITICALSECTION
(
cs
);

86 
v
 = --
v®ue
;

87 
	`LEAVECRITICALSECTION
(
cs
);

88  
v
;

89 
	}
}

91 #–ià
defšed
(
AS_XENON
)

93 
	gEND_AS_NAMESPACE


94 
	~<x.h
>

95 
BEGIN_AS_NAMESPACE


97 
asDWORD
 
	gasCAtomic
::
	$©omicInc
()

99  
	`IÁ”lockedInüem’t
((
LONG
*)&
v®ue
);

100 
	}
}

102 
asDWORD
 
	gasCAtomic
::
	$©omicDec
()

104  
	`IÁ”lockedDeüem’t
((
LONG
*)&
v®ue
);

105 
	}
}

107 #–ià
defšed
(
AS_WIN
)

109 
	gEND_AS_NAMESPACE


110 
	#WIN32_MEAN_AND_LEAN


	)

111 
	~<wšdows.h
>

112 
BEGIN_AS_NAMESPACE


114 
asDWORD
 
	gasCAtomic
::
	$©omicInc
()

116  
	`IÁ”lockedInüem’t
((
LONG
*)&
v®ue
);

117 
	}
}

119 
asDWORD
 
	gasCAtomic
::
	$©omicDec
()

121 
	`asASSERT
(
v®ue
 > 0);

122  
	`IÁ”lockedDeüem’t
((
LONG
*)&
v®ue
);

123 
	}
}

125 #–ià
defšed
(
AS_LINUX
è|| defšed(
AS_BSD
è|| defšed(
AS_ILLUMOS
)

138 
asDWORD
 
	gasCAtomic
::
	$©omicInc
()

140  
	`__sync_add_ªd_ãtch
(&
v®ue
, 1);

141 
	}
}

143 
asDWORD
 
	gasCAtomic
::
	$©omicDec
()

145  
	`__sync_sub_ªd_ãtch
(&
v®ue
, 1);

146 
	}
}

148 #–ià
defšed
(
AS_MAC
è|| defšed(
AS_IPHONE
)

150 
	gEND_AS_NAMESPACE


151 
	~<libk”n/OSAtomic.h
>

152 
BEGIN_AS_NAMESPACE


154 
asDWORD
 
	gasCAtomic
::
	$©omicInc
()

156  
	`OSAtomicInüem’t32
((
št32_t
*)&
v®ue
);

157 
	}
}

159 
asDWORD
 
	gasCAtomic
::
	$©omicDec
()

161  
	`OSAtomicDeüem’t32
((
št32_t
*)&
v®ue
);

162 
	}
}

168 
	gERROR_PËa£FixTheCÚfig
[-1];

172 
	gEND_AS_NAMESPACE


	@../src/script/as_builder.cpp

39 
	~"as_cÚfig.h
"

40 
	~"as_bud”.h
"

41 
	~"as_·r£r.h
"

42 
	~"as_comp”.h
"

43 
	~"as_tok’def.h
"

44 
	~"as_¡ršg_ut.h
"

45 
	~"as_ouutbufãr.h
"

46 
	~"as_‹xts.h
"

47 
	~"as_sütobjeù.h
"

49 
BEGIN_AS_NAMESPACE


51 
	gasCBud”
::
	$asCBud”
(
asCSütEngše
 *
’gše
, 
asCModuË
 *
moduË
)

53 
this
->
’gše
 =ƒngine;

54 
this
->
moduË
 = module;

55 
	}
}

57 
	gasCBud”
::~
	$asCBud”
()

59 #iâdeà
AS_NO_COMPILER


60 
asUINT
 
n
;

63  
n
 = 0;‚ < 
funùiÚs
.
	`G‘L’gth
();‚++ )

65 ifĞ
funùiÚs
[
n
] )

67 ifĞ
funùiÚs
[
n
]->
node
 )

69 
funùiÚs
[
n
]->
node
->
	`De¡roy
(
’gše
);

72 ifĞ
funùiÚs
[
n
]->
ex¶ic™SigÇtu»
 )

74 
	`asDELETE
(
funùiÚs
[
n
]->
ex¶ic™SigÇtu»
,
sEx¶ic™SigÇtu»
);

77 
	`asDELETE
(
funùiÚs
[
n
],
sFunùiÚDesütiÚ
);

80 
funùiÚs
[
n
] = 0;

84  
n
 = 0;‚ < 
globV¬ŸbËs
.
	`G‘L’gth
();‚++ )

86 ifĞ
globV¬ŸbËs
[
n
] )

88 ifĞ
globV¬ŸbËs
[
n
]->
ÃxtNode
 )

90 
globV¬ŸbËs
[
n
]->
ÃxtNode
->
	`De¡roy
(
’gše
);

93 
	`asDELETE
(
globV¬ŸbËs
[
n
],
sGlob®V¬ŸbËDesütiÚ
);

94 
globV¬ŸbËs
[
n
] = 0;

99  
n
 = 0;‚ < 
süts
.
	`G‘L’gth
();‚++ )

101 ifĞ
süts
[
n
] )

103 
	`asDELETE
(
süts
[
n
],
asCSütCode
);

106 
süts
[
n
] = 0;

110  
n
 = 0;‚ < 
şassDeş¬©iÚs
.
	`G‘L’gth
();‚++ )

112 ifĞ
şassDeş¬©iÚs
[
n
] )

114 ifĞ
şassDeş¬©iÚs
[
n
]->
node
 )

116 
şassDeş¬©iÚs
[
n
]->
node
->
	`De¡roy
(
’gše
);

119 
	`asDELETE
(
şassDeş¬©iÚs
[
n
],
sCÏssDeş¬©iÚ
);

120 
şassDeş¬©iÚs
[
n
] = 0;

124  
n
 = 0;‚ < 
š‹rçûDeş¬©iÚs
.
	`G‘L’gth
();‚++ )

126 ifĞ
š‹rçûDeş¬©iÚs
[
n
] )

128 ifĞ
š‹rçûDeş¬©iÚs
[
n
]->
node
 )

130 
š‹rçûDeş¬©iÚs
[
n
]->
node
->
	`De¡roy
(
’gše
);

133 
	`asDELETE
(
š‹rçûDeş¬©iÚs
[
n
],
sCÏssDeş¬©iÚ
);

134 
š‹rçûDeş¬©iÚs
[
n
] = 0;

138  
n
 = 0;‚ < 
ÇmedTy³Deş¬©iÚs
.
	`G‘L’gth
();‚++ )

140 ifĞ
ÇmedTy³Deş¬©iÚs
[
n
] )

142 ifĞ
ÇmedTy³Deş¬©iÚs
[
n
]->
node
 )

144 
ÇmedTy³Deş¬©iÚs
[
n
]->
node
->
	`De¡roy
(
’gše
);

147 
	`asDELETE
(
ÇmedTy³Deş¬©iÚs
[
n
],
sCÏssDeş¬©iÚ
);

148 
ÇmedTy³Deş¬©iÚs
[
n
] = 0;

152  
n
 = 0;‚ < 
funcDefs
.
	`G‘L’gth
();‚++ )

154 ifĞ
funcDefs
[
n
] )

156 ifĞ
funcDefs
[
n
]->
node
 )

157 
funcDefs
[
n
]->
node
->
	`De¡roy
(
’gše
);

159 
	`asDELETE
(
funcDefs
[
n
],
sFuncDef
);

160 
funcDefs
[
n
] = 0;

165 
	}
}

167 
	gasCBud”
::
	$Re£t
()

169 
numE¼Üs
 = 0;

170 
numW¬nšgs
 = 0;

171 
´eMes§ge
.
isS‘
 = 
çl£
;

172 
	}
}

174 #iâdeà
AS_NO_COMPILER


175 
	gasCBud”
::
	$AddCode
(cÚ¡ *
Çme
, cÚ¡ *
code
, 
codeL’gth
, 
lšeOff£t
, 
£ùiÚIdx
, 
boŞ
 
makeCİy
)

177 
asCSütCode
 *
süt
 = 
	`asNEW
(asCScriptCode);

178 ifĞ
süt
 == 0 )

179  
asOUT_OF_MEMORY
;

181 
r
 = 
süt
->
	`S‘Code
(
Çme
, 
code
, 
codeL’gth
, 
makeCİy
);

182 
süt
->
lšeOff£t
 =†ineOffset;

183 
süt
->
idx
 = 
£ùiÚIdx
;

184 
süts
.
	`PushLa¡
(
süt
);

186  
r
;

187 
	}
}

189 
	gasCBud”
::
	$Bud
()

191 
	`Re£t
();

193 
	`P¬£Süts
();

195 
	`CompeCÏs£s
();

196 
	`CompeGlob®V¬ŸbËs
();

197 
	`CompeFunùiÚs
();

204 ifĞ
numE¼Üs
 > 0 )

205  
asERROR
;

207  
asSUCCESS
;

208 
	}
}

210 
	gasCBud”
::
	$CompeGlob®V¬
(cÚ¡ *
£ùiÚName
, cÚ¡ *
code
, 
lšeOff£t
)

212 
	`Re£t
();

215 
asCSütCode
 *
süt
 = 
	`asNEW
(asCScriptCode);

216 ifĞ
süt
 == 0 )

217  
asOUT_OF_MEMORY
;

219 
süt
->
	`S‘Code
(
£ùiÚName
, 
code
, 
Œue
);

220 
süt
->
lšeOff£t
 =†ineOffset;

221 
süts
.
	`PushLa¡
(
süt
);

224 
asCP¬£r
 
	`·r£r
(
this
);

225 ifĞ
·r£r
.
	`P¬£Süt
(
süts
[0]) < 0 )

226  
asERROR
;

228 
asCSütNode
 *
node
 = 
·r£r
.
	`G‘SütNode
();

231 ifĞ
node
 == 0 ||

232 
node
->
fœ¡Chd
 == 0 ||

233 
node
->
fœ¡Chd
 !ğnode->
Ï¡Chd
 ||

234 
node
->
fœ¡Chd
->
nodeTy³
 !ğ
¢Glob®V¬
 )

236 
	`Wr™eE¼Ü
(
süt
->
Çme
.
	`Add»ssOf
(), 
TXT_ONLY_ONE_VARIABLE_ALLOWED
, 0, 0);

237  
asERROR
;

240 
node
 =‚ode->
fœ¡Chd
;

241 
node
->
	`DiscÚÃùP¬’t
();

242 
	`Regi¡”Glob®V¬
(
node
, 
süt
, 
moduË
->
deçuÉName¥aû
);

244 
	`CompeGlob®V¬ŸbËs
();

246 ifĞ
numE¼Üs
 > 0 )

249 ifĞ
globV¬ŸbËs
.
	`G‘L’gth
() > 0 )

251 
moduË
->
	`RemoveGlob®V¬
(moduË->
	`G‘Glob®V¬CouÁ
()-1);

254  
asERROR
;

258 
	}
}

261 
	gasCBud”
::
	$V®id©eDeçuÉArgs
(
asCSütCode
 *
süt
, 
asCSütNode
 *
node
, 
asCSütFunùiÚ
 *
func
)

263 
fœ¡ArgW™hDeçuÉV®ue
 = -1;

264  
asUINT
 
n
 = 0;‚ < 
func
->
deçuÉArgs
.
	`G‘L’gth
();‚++ )

266 ifĞ
func
->
deçuÉArgs
[
n
] )

267 
fœ¡ArgW™hDeçuÉV®ue
 = 
n
;

268 ifĞ
fœ¡ArgW™hDeçuÉV®ue
 >= 0 )

270 
r
, 
c
;

271 
süt
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

273 
asCSŒšg
 
¡r
;

274 
¡r
.
	`FÜm©
(
TXT_DEF_ARG_MISSING_IN_FUNC_s
, 
func
->
	`G‘Deş¬©iÚ
());

276 
	`Wr™eE¼Ü
(
süt
->
Çme
.
	`Add»ssOf
(), 
¡r
.Add»ssOf(), 
r
, 
c
);

277  
asINVALID_DECLARATION
;

282 
	}
}

284 #iâdeà
AS_NO_COMPILER


285 
	gasCBud”
::
	$CompeFunùiÚ
(cÚ¡ *
£ùiÚName
, cÚ¡ *
code
, 
lšeOff£t
, 
asDWORD
 
compeFÏgs
, 
asCSütFunùiÚ
 **
outFunc
)

287 
	`asASSERT
(
outFunc
 != 0);

289 
	`Re£t
();

292 
asCSütCode
 *
süt
 = 
	`asNEW
(asCScriptCode);

293 ifĞ
süt
 == 0 )

294  
asOUT_OF_MEMORY
;

296 
süt
->
	`S‘Code
(
£ùiÚName
, 
code
, 
Œue
);

297 
süt
->
lšeOff£t
 =†ineOffset;

298 
süts
.
	`PushLa¡
(
süt
);

301 
asCP¬£r
 
	`·r£r
(
this
);

302 ifĞ
·r£r
.
	`P¬£Süt
(
süts
[0]) < 0 )

303  
asERROR
;

305 
asCSütNode
 *
node
 = 
·r£r
.
	`G‘SütNode
();

308 ifĞ
node
 == 0 ||

309 
node
->
fœ¡Chd
 == 0 ||

310 
node
->
fœ¡Chd
 !ğnode->
Ï¡Chd
 ||

311 
node
->
fœ¡Chd
->
nodeTy³
 !ğ
¢FunùiÚ
 )

313 
	`Wr™eE¼Ü
(
süt
->
Çme
.
	`Add»ssOf
(), 
TXT_ONLY_ONE_FUNCTION_ALLOWED
, 0, 0);

314  
asERROR
;

318 
node
 =‚ode->
fœ¡Chd
;

321 
boŞ
 
isCÚ¡ruùÜ
, 
isDe¡ruùÜ
, 
isPriv©e
, 
isFš®
, 
isOv”ride
, 
isSh¬ed
;

322 
asCSütFunùiÚ
 *
func
 = 
	`asNEW
×sCSütFunùiÚ)(
’gše
,
moduË
,
asFUNC_SCRIPT
);

323 ifĞ
func
 == 0 )

324  
asOUT_OF_MEMORY
;

326 
	`G‘P¬£dFunùiÚD‘as
(
node
, 
süts
[0], 0, 
func
->
Çme
, func->
»tuºTy³
, func->
·¿m‘”Ty³s
, func->
šOutFÏgs
, func->
deçuÉArgs
, func->
isR—dOÆy
, 
isCÚ¡ruùÜ
, 
isDe¡ruùÜ
, 
isPriv©e
, 
isFš®
, 
isOv”ride
, 
isSh¬ed
);

327 
func
->
id
 = 
’gše
->
	`G‘NextSütFunùiÚId
();

328 
func
->
sütSeùiÚIdx
 = 
’gše
->
	`G‘SütSeùiÚNameIndex
(
£ùiÚName
 ? sectionName : "");

329 
func
->
ÇmeS·û
 = 
moduË
->
deçuÉName¥aû
;

332 
r
 = 
	`V®id©eDeçuÉArgs
(
süt
, 
node
, 
func
);

333 ifĞ
r
 < 0 )

335 
func
->
	`R–—£
();

336  
asERROR
;

340 ifĞ
compeFÏgs
 & 
asCOMP_ADD_TO_MODULE
 )

342 
r
 = 
	`CheckNameCÚæiù
(
func
->
Çme
.
	`Add»ssOf
(), 
node
, 
süts
[0], 
moduË
->
deçuÉName¥aû
);

343 ifĞ
r
 < 0 )

345 
func
->
	`R–—£
();

346  
asERROR
;

349 
moduË
->
glob®FunùiÚs
.
	`PushLa¡
(
func
);

350 
func
->
	`AddRef
();

351 
moduË
->
	`AddSütFunùiÚ
(
func
);

354 
’gše
->
	`S‘SütFunùiÚ
(
func
);

357 
node
->
	`DiscÚÃùP¬’t
();

358 
sFunùiÚDesütiÚ
 *
funcDesc
 = 
	`asNEW
(sFunctionDescription);

359 ifĞ
funcDesc
 == 0 )

361 
func
->
	`R–—£
();

362  
asOUT_OF_MEMORY
;

365 
funùiÚs
.
	`PushLa¡
(
funcDesc
);

366 
funcDesc
->
süt
 = 
süts
[0];

367 
funcDesc
->
node
 =‚ode;

368 
funcDesc
->
Çme
 = 
func
->name;

369 
funcDesc
->
funcId
 = 
func
->
id
;

370 
funcDesc
->
ex¶ic™SigÇtu»
 = 0;

372 
asCComp”
 
	`comp”
(
’gše
);

373 ifĞ
comp”
.
	`CompeFunùiÚ
(
this
, 
funùiÚs
[0]->
süt
, 0, funùiÚs[0]->
node
, 
func
) >= 0 )

376 *
outFunc
 = 
func
;

381 ifĞ
compeFÏgs
 & 
asCOMP_ADD_TO_MODULE
 )

383 
moduË
->
glob®FunùiÚs
.
	`RemoveV®ue
(
func
);

384 
moduË
->
sütFunùiÚs
.
	`RemoveV®ue
(
func
);

385 
func
->
	`R–—£
();

386 
func
->
	`R–—£
();

389 
func
->
	`R–—£
();

391  
asERROR
;

394  
asSUCCESS
;

395 
	}
}

397 
	gasCBud”
::
	$P¬£Süts
()

399 
asCA¼ay
<
asCP¬£r
*> 
	`·r£rs
(()
süts
.
	`G‘L’gth
());

402 
asUINT
 
n
 = 0;

403  
n
 = 0;‚ < 
süts
.
	`G‘L’gth
();‚++ )

405 
asCP¬£r
 *
·r£r
 = 
	`asNEW
×sCP¬£r)(
this
);

406 ifĞ
·r£r
 != 0 )

408 
·r£rs
.
	`PushLa¡
(
·r£r
);

411 
·r£r
->
	`P¬£Süt
(
süts
[
n
]);

415 ifĞ
numE¼Üs
 == 0 )

418  
n
 = 0;‚ < 
süts
.
	`G‘L’gth
();‚++ )

420 
asCSütNode
 *
node
 = 
·r£rs
[
n
]->
	`G‘SütNode
();

421 
	`Regi¡”Ty³sFromSüt
(
node
, 
süts
[
n
], 
’gše
->
ÇmeS·ûs
[0]);

425  
n
 = 0;‚ < 
funcDefs
.
	`G‘L’gth
();‚++ )

427 
	`Com¶‘eFuncDef
(
funcDefs
[
n
]);

431  
n
 = 0;‚ < 
š‹rçûDeş¬©iÚs
.
	`G‘L’gth
();‚++ )

433 
sCÏssDeş¬©iÚ
 *
deş
 = 
š‹rçûDeş¬©iÚs
[
n
];

434 
asCSütNode
 *
node
 = 
deş
->node->
fœ¡Chd
->
Ãxt
;

435  
node
 )

437 
asCSütNode
 *
Ãxt
 = 
node
->next;

438 ifĞ
node
->
nodeTy³
 =ğ
¢FunùiÚ
 )

440 
node
->
	`DiscÚÃùP¬’t
();

441 
	`Regi¡”SütFunùiÚ
(
’gše
->
	`G‘NextSütFunùiÚId
(), 
node
, 
deş
->
süt
, deş->
objTy³
, 
Œue
, 
çl£
, 0, deş->
isExi¡šgSh¬ed
);

443 ifĞ
node
->
nodeTy³
 =ğ
¢Vœtu®Prİ”ty
 )

445 
node
->
	`DiscÚÃùP¬’t
();

446 
	`Regi¡”Vœtu®Prİ”ty
(
node
, 
deş
->
süt
, deş->
objTy³
, 
Œue
, 
çl£
, 0, deş->
isExi¡šgSh¬ed
);

449 
node
 = 
Ãxt
;

454  
n
 = 0;‚ < 
şassDeş¬©iÚs
.
	`G‘L’gth
();‚++ )

456 
sCÏssDeş¬©iÚ
 *
deş
 = 
şassDeş¬©iÚs
[
n
];

457 ifĞ
deş
->
isExi¡šgSh¬ed
 ) ;

459 
asCSütNode
 *
node
 = 
deş
->node->
fœ¡Chd
->
Ãxt
;

462  
node
 &&‚ode->
nodeTy³
 =ğ
¢Id’tif›r
 )

463 
node
 =‚ode->
Ãxt
;

465  
node
 )

467 
asCSütNode
 *
Ãxt
 = 
node
->next;

468 ifĞ
node
->
nodeTy³
 =ğ
¢FunùiÚ
 )

470 
node
->
	`DiscÚÃùP¬’t
();

471 
	`Regi¡”SütFunùiÚ
(
’gše
->
	`G‘NextSütFunùiÚId
(), 
node
, 
deş
->
süt
, deş->
objTy³
);

473 ifĞ
node
->
nodeTy³
 =ğ
¢Vœtu®Prİ”ty
 )

475 
node
->
	`DiscÚÃùP¬’t
();

476 
	`Regi¡”Vœtu®Prİ”ty
(
node
, 
deş
->
süt
, deş->
objTy³
, 
çl£
, false);

479 
node
 = 
Ãxt
;

483 ifĞ
deş
->
objTy³
->
beh
.
cÚ¡ruù
 =ğ
’gše
->
sütTy³Behaviours
.beh.construct )

485 ifĞ
deş
->
objTy³
->
beh
.
cÚ¡ruùÜs
.
	`G‘L’gth
(è=ğ1 || 
’gše
->
•
.
®waysIm¶DeçuÉCÚ¡ruù
 )

487 
	`AddDeçuÉCÚ¡ruùÜ
(
deş
->
objTy³
, deş->
süt
);

492 ifĞ
deş
->
objTy³
->
beh
.
cÚ¡ruù
 )

494 
’gše
->
sütFunùiÚs
[
deş
->
objTy³
->
beh
.
cÚ¡ruù
]->
	`R–—£
();

495 
deş
->
objTy³
->
beh
.
cÚ¡ruù
 = 0;

496 
deş
->
objTy³
->
beh
.
cÚ¡ruùÜs
.
	`RemoveIndex
(0);

498 ifĞ
deş
->
objTy³
->
beh
.
çùÜy
 )

500 
’gše
->
sütFunùiÚs
[
deş
->
objTy³
->
beh
.
çùÜy
]->
	`R–—£
();

501 
deş
->
objTy³
->
beh
.
çùÜy
 = 0;

502 
deş
->
objTy³
->
beh
.
çùÜ›s
.
	`RemoveIndex
(0);

504 ifĞ
deş
->
objTy³
->
beh
.
cİy
 )

506 
’gše
->
sütFunùiÚs
[
deş
->
objTy³
->
beh
.
cİy
]->
	`R–—£
();

507 
deş
->
objTy³
->
beh
.
cİy
 = 0;

514  
n
 = 0;‚ < 
süts
.
	`G‘L’gth
();‚++ )

517 
asCSütNode
 *
node
 = 
·r£rs
[
n
]->
	`G‘SütNode
();

518 
	`Regi¡”NÚTy³sFromSüt
(
node
, 
süts
[
n
], 
’gše
->
ÇmeS·ûs
[0]);

522  
n
 = 0;‚ < 
·r£rs
.
	`G‘L’gth
();‚++ )

524 
	`asDELETE
(
·r£rs
[
n
],
asCP¬£r
);

526 
	}
}

528 
	gasCBud”
::
	$Regi¡”Ty³sFromSüt
(
asCSütNode
 *
node
, 
asCSütCode
 *
süt
, 
asSNameS·û
 *
ns
)

530 
	`asASSERT
(
node
->
nodeTy³
 =ğ
¢Süt
);

533 
node
 =‚ode->
fœ¡Chd
;

534  
node
 )

536 
asCSütNode
 *
Ãxt
 = 
node
->next;

537 ifĞ
node
->
nodeTy³
 =ğ
¢Name¥aû
 )

540 
asCSŒšg
 
nsName
;

541 
nsName
.
	`Assign
(&
süt
->
code
[
node
->
fœ¡Chd
->
tok’Pos
],‚ode->fœ¡Chd->
tok’L’gth
);

542 ifĞ
ns
->
Çme
 != "" )

543 
nsName
 = 
ns
->
Çme
 + "::" +‚sName;

545 
asSNameS·û
 *
nsChd
 = 
’gše
->
	`AddNameS·û
(
nsName
.
	`Add»ssOf
());

546 
	`Regi¡”Ty³sFromSüt
(
node
->
Ï¡Chd
, 
süt
, 
nsChd
);

550 ifĞ
node
->
nodeTy³
 =ğ
¢CÏss
 )

552 
node
->
	`DiscÚÃùP¬’t
();

553 
	`Regi¡”CÏss
(
node
, 
süt
, 
ns
);

555 ifĞ
node
->
nodeTy³
 =ğ
¢IÁ”çû
 )

557 
node
->
	`DiscÚÃùP¬’t
();

558 
	`Regi¡”IÁ”çû
(
node
, 
süt
, 
ns
);

560 ifĞ
node
->
nodeTy³
 =ğ
¢Enum
 )

562 
node
->
	`DiscÚÃùP¬’t
();

563 
	`Regi¡”Enum
(
node
, 
süt
, 
ns
);

565 ifĞ
node
->
nodeTy³
 =ğ
¢Ty³def
 )

567 
node
->
	`DiscÚÃùP¬’t
();

568 
	`Regi¡”Ty³def
(
node
, 
süt
, 
ns
);

570 ifĞ
node
->
nodeTy³
 =ğ
¢FuncDef
 )

572 
node
->
	`DiscÚÃùP¬’t
();

573 
	`Regi¡”FuncDef
(
node
, 
süt
, 
ns
);

577 
node
 = 
Ãxt
;

579 
	}
}

581 
	gasCBud”
::
	$Regi¡”NÚTy³sFromSüt
(
asCSütNode
 *
node
, 
asCSütCode
 *
süt
, 
asSNameS·û
 *
ns
)

583 
node
 =‚ode->
fœ¡Chd
;

584  
node
 )

586 
asCSütNode
 *
Ãxt
 = 
node
->next;

587 ifĞ
node
->
nodeTy³
 =ğ
¢Name¥aû
 )

590 
asCSŒšg
 
nsName
;

591 
nsName
.
	`Assign
(&
süt
->
code
[
node
->
fœ¡Chd
->
tok’Pos
],‚ode->fœ¡Chd->
tok’L’gth
);

592 ifĞ
ns
->
Çme
 != "" )

593 
nsName
 = 
ns
->
Çme
 + "::" +‚sName;

596 
asSNameS·û
 *
nsChd
 = 
’gše
->
	`AddNameS·û
(
nsName
.
	`Add»ssOf
());

597 
	`Regi¡”NÚTy³sFromSüt
(
node
->
Ï¡Chd
, 
süt
, 
nsChd
);

601 
node
->
	`DiscÚÃùP¬’t
();

602 ifĞ
node
->
nodeTy³
 =ğ
¢FunùiÚ
 )

603 
	`Regi¡”SütFunùiÚ
(
’gše
->
	`G‘NextSütFunùiÚId
(), 
node
, 
süt
, 0, 
çl£
, 
Œue
, 
ns
);

604 ifĞ
node
->
nodeTy³
 =ğ
¢Glob®V¬
 )

605 
	`Regi¡”Glob®V¬
(
node
, 
süt
, 
ns
);

606 ifĞ
node
->
nodeTy³
 =ğ
¢Vœtu®Prİ”ty
 )

607 
	`Regi¡”Vœtu®Prİ”ty
(
node
, 
süt
, 0, 
çl£
, 
Œue
, 
ns
);

608 ifĞ
node
->
nodeTy³
 =ğ
¢ImpÜt
 )

609 
	`Regi¡”ImpÜ‹dFunùiÚ
(
moduË
->
	`G‘NextImpÜ‹dFunùiÚId
(), 
node
, 
süt
, 
ns
);

613 
r
, 
c
;

614 
süt
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

616 
	`Wr™eW¬nšg
(
süt
->
Çme
.
	`Add»ssOf
(), 
TXT_UNUSED_SCRIPT_NODE
, 
r
, 
c
);

618 
node
->
	`De¡roy
(
’gše
);

622 
node
 = 
Ãxt
;

624 
	}
}

626 
	gasCBud”
::
	$CompeFunùiÚs
()

629  
asUINT
 
n
 = 0;‚ < 
funùiÚs
.
	`G‘L’gth
();‚++ )

631 
sFunùiÚDesütiÚ
 *
cu¼’t
 = 
funùiÚs
[
n
];

632 ifĞ
cu¼’t
 == 0 ) ;

634 
asCComp”
 
	`comp”
(
’gše
);

635 
asCSütFunùiÚ
 *
func
 = 
’gše
->
sütFunùiÚs
[
cu¼’t
->
funcId
];

637 ifĞ
cu¼’t
->
node
 )

639 
r
, 
c
;

640 
cu¼’t
->
süt
->
	`CÚv”tPosToRowCŞ
(cu¼’t->
node
->
tok’Pos
, &
r
, &
c
);

642 
asCSŒšg
 
¡r
 = 
func
->
	`G‘Deş¬©iÚSŒ
();

643 
¡r
.
	`FÜm©
(
TXT_COMPILING_s
, sŒ.
	`Add»ssOf
());

644 
	`Wr™eInfo
(
cu¼’t
->
süt
->
Çme
.
	`Add»ssOf
(), 
¡r
.Add»ssOf(), 
r
, 
c
, 
Œue
);

646 
comp”
.
	`CompeFunùiÚ
(
this
, 
cu¼’t
->
süt
, cu¼’t->
ex¶ic™SigÇtu»
, cu¼’t->
node
, 
func
);

648 
´eMes§ge
.
isS‘
 = 
çl£
;

650 ifĞ
cu¼’t
->
Çme
 =ğcu¼’t->
objTy³
->name )

652 
asCSütNode
 *
node
 = 0;

653  
asUINT
 
n
 = 0;‚ < 
şassDeş¬©iÚs
.
	`G‘L’gth
();‚++ )

655 ifĞ
şassDeş¬©iÚs
[
n
]->
Çme
 =ğ
cu¼’t
->name )

657 
node
 = 
şassDeş¬©iÚs
[
n
]->node;

662 
r
 = 0, 
c
 = 0;

663 ifĞ
node
 )

664 
cu¼’t
->
süt
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

666 
asCSŒšg
 
¡r
 = 
func
->
	`G‘Deş¬©iÚSŒ
();

667 
¡r
.
	`FÜm©
(
TXT_COMPILING_s
, sŒ.
	`Add»ssOf
());

668 
	`Wr™eInfo
(
cu¼’t
->
süt
->
Çme
.
	`Add»ssOf
(), 
¡r
.Add»ssOf(), 
r
, 
c
, 
Œue
);

672 
comp”
.
	`CompeDeçuÉCÚ¡ruùÜ
(
this
, 
cu¼’t
->
süt
, 
node
, 
func
);

674 
´eMes§ge
.
isS‘
 = 
çl£
;

679 
	`asASSERT
Ğ
cu¼’t
->
ex¶ic™SigÇtu»
 );

682 
	}
}

686 
	gasCBud”
::
	$P¬£D©aTy³
(cÚ¡ *
d©©y³
, 
asCD©aTy³
 *
»suÉ
, 
asSNameS·û
 *
im¶ic™Name¥aû
, 
boŞ
 
isR‘uºTy³
)

688 
	`Re£t
();

690 
asCSütCode
 
sourû
;

691 
sourû
.
	`S‘Code
("", 
d©©y³
, 
Œue
);

693 
asCP¬£r
 
	`·r£r
(
this
);

694 
r
 = 
·r£r
.
	`P¬£D©aTy³
(&
sourû
, 
isR‘uºTy³
);

695 ifĞ
r
 < 0 )

696  
asINVALID_TYPE
;

699 
asCSütNode
 *
d©aTy³
 = 
·r£r
.
	`G‘SütNode
()->
fœ¡Chd
;

701 *
»suÉ
 = 
	`C»©eD©aTy³FromNode
(
d©aTy³
, &
sourû
, 
im¶ic™Name¥aû
, 
Œue
);

702 ifĞ
isR‘uºTy³
 )

703 *
»suÉ
 = 
	`ModifyD©aTy³FromNode
(*»suÉ, 
d©aTy³
->
Ãxt
, &
sourû
, 0, 0);

705 ifĞ
numE¼Üs
 > 0 )

706  
asINVALID_TYPE
;

708  
asSUCCESS
;

709 
	}
}

711 
	gasCBud”
::
	$P¬£Tem¶©eDeş
(cÚ¡ *
deş
, 
asCSŒšg
 *
Çme
,‡sCSŒšg *
subty³Name
)

713 
	`Re£t
();

715 
asCSütCode
 
sourû
;

716 
sourû
.
	`S‘Code
("", 
deş
, 
Œue
);

718 
asCP¬£r
 
	`·r£r
(
this
);

719 
r
 = 
·r£r
.
	`P¬£Tem¶©eDeş
(&
sourû
);

720 ifĞ
r
 < 0 )

721  
asINVALID_TYPE
;

724 
asCSütNode
 *
node
 = 
·r£r
.
	`G‘SütNode
()->
fœ¡Chd
;

726 
Çme
->
	`Assign
(&
deş
[
node
->
tok’Pos
],‚ode->
tok’L’gth
);

727 
node
 =‚ode->
Ãxt
;

728 
subty³Name
->
	`Assign
(&
deş
[
node
->
tok’Pos
],‚ode->
tok’L’gth
);

732 ifĞ
numE¼Üs
 > 0 )

733  
asINVALID_DECLARATION
;

735  
asSUCCESS
;

736 
	}
}

738 
	gasCBud”
::
	$V”ifyPrİ”ty
(
asCD©aTy³
 *
dt
, cÚ¡ *
deş
, 
asCSŒšg
 &
Çme
,‡sCD©aTy³ &
ty³
, 
asSNameS·û
 *
ns
)

741 
	`asASSERT
Ğ
dt
 || 
ns
 );

743 
	`Re£t
();

745 ifĞ
dt
 )

748 ifĞ
dt
->
	`G‘ObjeùTy³
() == 0 )

749  
asINVALID_OBJECT
;

753 
asCSütCode
 
sourû
;

754 
sourû
.
	`S‘Code
(
TXT_PROPERTY
, 
deş
, 
Œue
);

756 
asCP¬£r
 
	`·r£r
(
this
);

757 
r
 = 
·r£r
.
	`P¬£Prİ”tyDeş¬©iÚ
(&
sourû
);

758 ifĞ
r
 < 0 )

759  
asINVALID_DECLARATION
;

762 
asCSütNode
 *
d©aTy³
 = 
·r£r
.
	`G‘SütNode
()->
fœ¡Chd
;

764 
asCSütNode
 *
ÇmeNode
 = 
d©aTy³
->
Ãxt
;

768 
ty³
 = 
	`C»©eD©aTy³FromNode
(
d©aTy³
, &
sourû
, 
dt
 ? dt->
	`G‘ObjeùTy³
()->
ÇmeS·û
 : 
ns
);

769 
Çme
.
	`Assign
(&
deş
[
ÇmeNode
->
tok’Pos
],‚ameNode->
tok’L’gth
);

774 ifĞ
ty³
.
	`G‘FuncDef
(è&& !ty³.
	`IsObjeùHªdË
() )

777  
asINVALID_DECLARATION
;

781 ifĞ
dt
 )

783 ifĞ
	`CheckNameCÚæiùMemb”
(
dt
->
	`G‘ObjeùTy³
(), 
Çme
.
	`Add»ssOf
(), 
ÇmeNode
, &
sourû
, 
Œue
) < 0 )

784  
asNAME_TAKEN
;

788 ifĞ
	`CheckNameCÚæiù
(
Çme
.
	`Add»ssOf
(), 
ÇmeNode
, &
sourû
, 
ns
) < 0 )

789  
asNAME_TAKEN
;

792 ifĞ
numE¼Üs
 > 0 )

793  
asINVALID_DECLARATION
;

795  
asSUCCESS
;

796 
	}
}

798 
asCObjeùPrİ”ty
 *
	gasCBud”
::
	$G‘ObjeùPrİ”ty
(
asCD©aTy³
 &
obj
, cÚ¡ *
´İ
)

800 
	`asASSERT
(
obj
.
	`G‘ObjeùTy³
() != 0);

803 
asCA¼ay
<
asCObjeùPrİ”ty
 *> &
´İs
 = 
obj
.
	`G‘ObjeùTy³
()->
´İ”t›s
;

804  
asUINT
 
n
 = 0;‚ < 
´İs
.
	`G‘L’gth
();‚++ )

806 ifĞ
´İs
[
n
]->
Çme
 =ğ
´İ
 )

808 ifĞ
moduË
->
acûssMask
 & 
´İs
[
n
]->accessMask )

809  
´İs
[
n
];

816 
	}
}

818 
asCGlob®Prİ”ty
 *
	gasCBud”
::
	$G‘Glob®Prİ”ty
(cÚ¡ *
´İ
, 
asSNameS·û
 *
ns
, 
boŞ
 *
isComped
, boŞ *
isPu»CÚ¡ªt
, 
asQWORD
 *
cÚ¡ªtV®ue
, boŞ *
isAµPrİ
)

820 
asUINT
 
n
;

822 ifĞ
isComped
 ) *isComped = 
Œue
;

823 ifĞ
isPu»CÚ¡ªt
 ) *isPu»CÚ¡ªˆğ
çl£
;

824 ifĞ
isAµPrİ
 ) *isAµPrİ = 
çl£
;

828 
asCA¼ay
<
asCGlob®Prİ”ty
 *> &
´İs
 = 
’gše
->
»gi¡”edGlob®Prİs
;

829  
n
 = 0;‚ < 
´İs
.
	`G‘L’gth
(); ++n )

830 ifĞ
´İs
[
n
] &&

831 
´İs
[
n
]->
Çme
 =ğ
´İ
 &&

832 
´İs
[
n
]->
ÇmeS·û
 =ğ
ns
 )

834 ifĞ
moduË
 )

837 ifĞ
moduË
->
acûssMask
 & 
´İs
[
n
]->accessMask )

839 ifĞ
isAµPrİ
 ) *isAµPrİ = 
Œue
;

840  
´İs
[
n
];

846 ifĞ
isAµPrİ
 ) *isAµPrİ = 
Œue
;

847  
´İs
[
n
];

851 #iâdeà
AS_NO_COMPILER


854 
asCA¼ay
<
sGlob®V¬ŸbËDesütiÚ
 *> &
gv¬s
 = 
globV¬ŸbËs
;

855  
n
 = 0;‚ < 
gv¬s
.
	`G‘L’gth
(); ++n )

857 ifĞ
gv¬s
[
n
] == 0 ) ;

858 
asCGlob®Prİ”ty
 *
p
 = 
gv¬s
[
n
]->
´İ”ty
;

859 ifĞ
p
 &&

860 
p
->
Çme
 =ğ
´İ
 &&

861 
p
->
ÇmeS·û
 =ğ
ns
 )

863 ifĞ
isComped
 ) *isComped = 
gv¬s
[
n
]->isCompiled;

864 ifĞ
isPu»CÚ¡ªt
 ) *isPu»CÚ¡ªˆğ
gv¬s
[
n
]->isPureConstant;

865 ifĞ
cÚ¡ªtV®ue
 ) *cÚ¡ªtV®uğ
gv¬s
[
n
]->constantValue;

867  
p
;

871 
	`UNUSED_VAR
(
cÚ¡ªtV®ue
);

876 ifĞ
moduË
 )

878 
asCA¼ay
<
asCGlob®Prİ”ty
 *> &
´İs
 = 
moduË
->
sütGlob®s
;

879  
n
 = 0;‚ < 
´İs
.
	`G‘L’gth
(); ++n )

880 ifĞ
´İs
[
n
]->
Çme
 =ğ
´İ
 &&

881 
´İs
[
n
]->
ÇmeS·û
 =ğ
ns
 )

882  
´İs
[
n
];

886 
	}
}

888 
	gasCBud”
::
P¬£FunùiÚDeş¬©iÚ
(
asCObjeùTy³
 *
objTy³
, cÚ¡ *
deş
, 
asCSütFunùiÚ
 *
func
, 
boŞ
 
isSy¡emFunùiÚ
, 
asCA¼ay
<boŞ> *
·¿mAutoHªdËs
, boŞ *
»tuºAutoHªdË
, 
asSNameS·û
 *
ns
)

890 
asASSERT
Ğ
objTy³
 || 
ns
 );

894 
Re£t
();

896 
asCSütCode
 
	gsourû
;

897 
	gsourû
.
S‘Code
(
TXT_SYSTEM_FUNCTION
, 
deş
, 
Œue
);

899 
asCP¬£r
 
·r£r
(
this
);

900 
	gr
 = 
·r£r
.
P¬£FunùiÚDefš™iÚ
(&
sourû
);

901 ifĞ
	gr
 < 0 )

902  
	gasINVALID_DECLARATION
;

904 
asCSütNode
 *
	gnode
 = 
·r£r
.
G‘SütNode
();

907 
asCSütNode
 *
	gn
 = 
node
->
fœ¡Chd
->
Ãxt
->next;

908 
asCSŒšg
 
	gscİe
 = 
G‘ScİeFromNode
(
n
, &
sourû
, &n);

909 
	gfunc
->
	gÇmeS·û
 = 
’gše
->
FšdNameS·û
(
scİe
.
Add»ssOf
());

910 ifĞ
	gfunc
->
	gÇmeS·û
 == 0 )

911  
asINVALID_DECLARATION
;

914 
	gfunc
->
	gÇme
.
Assign
(&
sourû
.
code
[
n
->
tok’Pos
],‚->
tok’L’gth
);

917 
boŞ
 
	gautoHªdË
;

920 
	gfunc
->
	g»tuºTy³
 = 
C»©eD©aTy³FromNode
(
node
->
fœ¡Chd
, &
sourû
, 
objTy³
 ? objTy³->
ÇmeS·û
 : 
ns
, 
Œue
, objType);

921 
	gfunc
->
	g»tuºTy³
 = 
ModifyD©aTy³FromNode
(
func
->
»tuºTy³
, 
node
->
fœ¡Chd
->
Ãxt
, &
sourû
, 0, &
autoHªdË
);

922 ifĞ
	gautoHªdË
 && (!
	gfunc
->
	g»tuºTy³
.
IsObjeùHªdË
(è|| func->»tuºTy³.
IsReã»nû
()) )

923  
	gasINVALID_DECLARATION
;

924 ifĞ
	g»tuºAutoHªdË
 ) *»tuºAutoHªdË = 
autoHªdË
;

927 ifĞ
	gisSy¡emFunùiÚ
 &&

928 (
	gfunc
->
	g»tuºTy³
.
G‘ObjeùTy³
() &&

929 (
	gfunc
->
	g»tuºTy³
.
G‘ObjeùTy³
()->
	gæags
 & 
	gasOBJ_REF
)) &&

930 !(
	gfunc
->
	g»tuºTy³
.
IsReã»nû
() ||

931 
	gfunc
->
	g»tuºTy³
.
IsObjeùHªdË
()) )

932  
	gasINVALID_DECLARATION
;

935 
	g·¿mCouÁ
 = 0;

936 
asCSütNode
 *
	g·¿mLi¡
 = 
n
->
Ãxt
;

937 
	gn
 = 
·¿mLi¡
->
fœ¡Chd
;

938  
	gn
 )

940 
	g·¿mCouÁ
++;

941 
	gn
 = 
n
->
Ãxt
->next;

942 ifĞ
	gn
 &&‚->
	gnodeTy³
 =ğ
¢Id’tif›r
 )

943 
n
 =‚->
Ãxt
;

945 ifĞ
	gn
 &&‚->
	gnodeTy³
 =ğ
¢Ex´essiÚ
 )

946 
n
 =‚->
Ãxt
;

950 
	gfunc
->
	g·¿m‘”Ty³s
.
AÎoÿ‹
(
·¿mCouÁ
, 
çl£
);

951 
	gfunc
->
	gšOutFÏgs
.
AÎoÿ‹
(
·¿mCouÁ
, 
çl£
);

952 
	gfunc
->
	gdeçuÉArgs
.
AÎoÿ‹
(
·¿mCouÁ
, 
çl£
);

953 ifĞ
	g·¿mAutoHªdËs
 )…¬amAutoHªdËs->
AÎoÿ‹
(
·¿mCouÁ
, 
çl£
);

955 
	gn
 = 
·¿mLi¡
->
fœ¡Chd
;

956  
	gn
 )

958 
asETy³Modif›rs
 
	gšOutFÏgs
;

959 
asCD©aTy³
 
	gty³
 = 
C»©eD©aTy³FromNode
(
n
, &
sourû
, 
objTy³
 ? objTy³->
ÇmeS·û
 : 
ns
, 
çl£
, objType);

960 
	gty³
 = 
ModifyD©aTy³FromNode
(
ty³
, 
n
->
Ãxt
, &
sourû
, &
šOutFÏgs
, &
autoHªdË
);

963 ifĞ
	gisSy¡emFunùiÚ
 &&

964 (
	gty³
.
G‘ObjeùTy³
() &&

965 (
	gty³
.
G‘ObjeùTy³
()->
	gæags
 & 
	gasOBJ_REF
)) &&

966 !(
	gty³
.
IsReã»nû
() ||

967 
	gty³
.
IsObjeùHªdË
()) )

968  
	gasINVALID_DECLARATION
;

971 
	gfunc
->
	g·¿m‘”Ty³s
.
PushLa¡
(
ty³
);

972 
	gfunc
->
	gšOutFÏgs
.
PushLa¡
(
šOutFÏgs
);

975 ifĞ
	gty³
.
G‘Tok’Ty³
(è=ğ
‰Void
 )

976  
asINVALID_DECLARATION
;

978 ifĞ
	gautoHªdË
 && (!
	gty³
.
IsObjeùHªdË
(è||y³.
IsReã»nû
()) )

979  
	gasINVALID_DECLARATION
;

981 ifĞ
	g·¿mAutoHªdËs
 )…¬amAutoHªdËs->
PushLa¡
(
autoHªdË
);

984 ifĞ
	gty³
.
G‘Tok’Ty³
(è=ğ
‰Que¡iÚ
 &&

985 !
ty³
.
IsReã»nû
() )

986  
asINVALID_DECLARATION
;

989 
	gn
 = 
n
->
Ãxt
->next;

990 ifĞ
	gn
 &&‚->
	gnodeTy³
 =ğ
¢Id’tif›r
 )

991 
n
 =‚->
Ãxt
;

993 ifĞ
	gn
 &&‚->
	gnodeTy³
 =ğ
¢Ex´essiÚ
 )

996 
asCSŒšg
 *
deçuÉArgSŒ
 = 
asNEW
(asCString);

997 ifĞ
	gdeçuÉArgSŒ
 )

999 *
	gdeçuÉArgSŒ
 = 
G‘CËªEx´essiÚSŒšg
(
n
, &
sourû
);

1000 
	gfunc
->
	gdeçuÉArgs
.
PushLa¡
(
deçuÉArgSŒ
);

1003 
	gn
 = 
n
->
Ãxt
;

1006 
	gfunc
->
	gdeçuÉArgs
.
PushLa¡
(0);

1010 ifĞ
	gnode
->
	gÏ¡Chd
->
	gnodeTy³
 =ğ
¢Undefšed
 && 
node
->
Ï¡Chd
->
tok’Ty³
 =ğ
‰CÚ¡
 )

1012 ifĞ
objTy³
 == 0 )

1013  
asINVALID_DECLARATION
;

1014 
	gfunc
->
	gisR—dOÆy
 = 
Œue
;

1017 
	gfunc
->
	gisR—dOÆy
 = 
çl£
;

1020 
V®id©eDeçuÉArgs
(&
sourû
, 
node
, 
func
);

1022 ifĞ
	gnumE¼Üs
 > 0 || 
	gnumW¬nšgs
 > 0 )

1023  
	gasINVALID_DECLARATION
;

1028 
	gasCBud”
::
	$P¬£V¬ŸbËDeş¬©iÚ
(cÚ¡ *
deş
, 
asSNameS·û
 *
im¶ic™Name¥aû
, 
asCSŒšg
 &
outName
,‡sSNameS·û *&
outName¥aû
, 
asCD©aTy³
 &
outDt
)

1030 
	`Re£t
();

1032 
asCSütCode
 
sourû
;

1033 
sourû
.
	`S‘Code
(
TXT_VARIABLE_DECL
, 
deş
, 
Œue
);

1035 
asCP¬£r
 
	`·r£r
(
this
);

1037 
r
 = 
·r£r
.
	`P¬£Prİ”tyDeş¬©iÚ
(&
sourû
);

1038 ifĞ
r
 < 0 )

1039  
asINVALID_DECLARATION
;

1041 
asCSütNode
 *
node
 = 
·r£r
.
	`G‘SütNode
();

1044 
asCSütNode
 *
n
 = 
node
->
fœ¡Chd
->
Ãxt
;

1045 
asCSŒšg
 
scİe
 = 
	`G‘ScİeFromNode
(
n
, &
sourû
, &n);

1046 ifĞ
scİe
 == "" )

1047 
outName¥aû
 = 
im¶ic™Name¥aû
;

1048 ifĞ
scİe
 == "::" )

1049 
outName¥aû
 = 
’gše
->
ÇmeS·ûs
[0];

1052 
outName¥aû
 = 
’gše
->
	`FšdNameS·û
(
scİe
.
	`Add»ssOf
());

1053 ifĞ
outName¥aû
 == 0 )

1056  
asINVALID_DECLARATION
;

1061 
outName
.
	`Assign
(&
sourû
.
code
[
n
->
tok’Pos
],‚->
tok’L’gth
);

1064 
outDt
 = 
	`C»©eD©aTy³FromNode
(
node
->
fœ¡Chd
, &
sourû
, 
im¶ic™Name¥aû
);

1066 ifĞ
numE¼Üs
 > 0 || 
numW¬nšgs
 > 0 )

1067  
asINVALID_DECLARATION
;

1070 
	}
}

1072 
	gasCBud”
::
	$CheckNameCÚæiùMemb”
(
asCObjeùTy³
 *
t
, cÚ¡ *
Çme
, 
asCSütNode
 *
node
, 
asCSütCode
 *
code
, 
boŞ
 
isPrİ”ty
)

1077 
asCA¼ay
<
asCObjeùPrİ”ty
 *> &
´İs
 = 
t
->
´İ”t›s
;

1078  
asUINT
 
n
 = 0;‚ < 
´İs
.
	`G‘L’gth
();‚++ )

1080 ifĞ
´İs
[
n
]->
Çme
 ==‚ame )

1082 ifĞ
code
 )

1084 
r
, 
c
;

1085 
code
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

1087 
asCSŒšg
 
¡r
;

1088 
¡r
.
	`FÜm©
(
TXT_NAME_CONFLICT_s_OBJ_PROPERTY
, 
Çme
);

1089 
	`Wr™eE¼Ü
(
code
->
Çme
.
	`Add»ssOf
(), 
¡r
.Add»ssOf(), 
r
, 
c
);

1097 ifĞ
isPrİ”ty
 )

1099 
asCA¼ay
<> 
m‘hods
 = 
t
->methods;

1100  
asUINT
 
n
 = 0;‚ < 
m‘hods
.
	`G‘L’gth
();‚++ )

1102 ifĞ
’gše
->
sütFunùiÚs
[
m‘hods
[
n
]]->
Çme
 ==‚ame )

1104 ifĞ
code
 )

1106 
r
, 
c
;

1107 
code
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

1109 
asCSŒšg
 
¡r
;

1110 
¡r
.
	`FÜm©
(
TXT_NAME_CONFLICT_s_METHOD
, 
Çme
);

1111 
	`Wr™eE¼Ü
(
code
->
Çme
.
	`Add»ssOf
(), 
¡r
.Add»ssOf(), 
r
, 
c
);

1120 
	}
}

1122 
	gasCBud”
::
	$CheckNameCÚæiù
(cÚ¡ *
Çme
, 
asCSütNode
 *
node
, 
asCSütCode
 *
code
, 
asSNameS·û
 *
ns
)

1125 ifĞ
’gše
->
	`G‘ObjeùTy³
(
Çme
, 
ns
) != 0 )

1127 ifĞ
code
 )

1129 
r
, 
c
;

1130 
code
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

1131 
asCSŒšg
 
¡r
;

1132 
¡r
.
	`FÜm©
(
TXT_NAME_CONFLICT_s_EXTENDED_TYPE
, 
Çme
);

1133 
	`Wr™eE¼Ü
(
code
->
Çme
.
	`Add»ssOf
(), 
¡r
.Add»ssOf(), 
r
, 
c
);

1141 
asCGlob®Prİ”ty
 *
´İ
 = 
	`G‘Glob®Prİ”ty
(
Çme
, 
ns
, 0, 0, 0, 0);

1142 ifĞ
´İ
 )

1144 ifĞ
code
 )

1146 
r
, 
c
;

1147 
code
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

1148 
asCSŒšg
 
¡r
;

1149 
¡r
.
	`FÜm©
(
TXT_NAME_CONFLICT_s_GLOBAL_PROPERTY
, 
Çme
);

1150 
	`Wr™eE¼Ü
(
code
->
Çme
.
	`Add»ssOf
(), 
¡r
.Add»ssOf(), 
r
, 
c
);

1158 #iâdeà
AS_NO_COMPILER


1160 
asUINT
 
n
;

1161  
n
 = 0;‚ < 
şassDeş¬©iÚs
.
	`G‘L’gth
();‚++ )

1163 ifĞ
şassDeş¬©iÚs
[
n
]->
Çme
 ==‚ame &&

1164 
şassDeş¬©iÚs
[
n
]->
objTy³
->
ÇmeS·û
 =ğ
ns
 )

1166 ifĞ
code
 )

1168 
r
, 
c
;

1169 
code
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

1170 
asCSŒšg
 
¡r
;

1171 
¡r
.
	`FÜm©
(
TXT_NAME_CONFLICT_s_STRUCT
, 
Çme
);

1172 
	`Wr™eE¼Ü
(
code
->
Çme
.
	`Add»ssOf
(), 
¡r
.Add»ssOf(), 
r
, 
c
);

1180  
n
 = 0;‚ < 
ÇmedTy³Deş¬©iÚs
.
	`G‘L’gth
();‚++ )

1182 ifĞ
ÇmedTy³Deş¬©iÚs
[
n
]->
Çme
 ==‚ame &&

1183 
ÇmedTy³Deş¬©iÚs
[
n
]->
objTy³
->
ÇmeS·û
 =ğ
ns
 )

1185 ifĞ
code
 )

1187 
r
, 
c
;

1188 
code
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

1189 
asCSŒšg
 
¡r
;

1190 
¡r
.
	`FÜm©
(
TXT_NAME_CONFLICT_s_IS_NAMED_TYPE
, 
Çme
);

1191 
	`Wr™eE¼Ü
(
code
->
Çme
.
	`Add»ssOf
(), 
¡r
.Add»ssOf(), 
r
, 
c
);

1199  
n
 = 0;‚ < 
funcDefs
.
	`G‘L’gth
();‚++ )

1201 ifĞ
funcDefs
[
n
]->
Çme
 ==‚ame &&

1202 
moduË
->
funcDefs
[funcDefs[
n
]->
idx
]->
ÇmeS·û
 =ğ
ns
 )

1204 ifĞ
code
 )

1206 
r
, 
c
;

1207 
code
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

1208 
asCSŒšg
 
¡r
;

1209 
¡r
.
	`FÜm©
(
TXT_NAME_CONFLICT_s_IS_FUNCDEF
, 
Çme
);

1210 
	`Wr™eE¼Ü
(
code
->
Çme
.
	`Add»ssOf
(), 
¡r
.Add»ssOf(), 
r
, 
c
);

1219 
	}
}

1221 #iâdeà
AS_NO_COMPILER


1222 
	gasCBud”
::
	$Regi¡”FuncDef
(
asCSütNode
 *
node
, 
asCSütCode
 *
fe
, 
asSNameS·û
 *
ns
)

1225 
	`asASSERT
Ğ
node
->
fœ¡Chd
->
nodeTy³
 =ğ
¢D©aTy³
 );

1226 
asCSütNode
 *
n
 = 
node
->
fœ¡Chd
->
Ãxt
->next;

1228 
asCSŒšg
 
Çme
;

1229 
Çme
.
	`Assign
(&
fe
->
code
[
n
->
tok’Pos
],‚->
tok’L’gth
);

1232 
r
 = 
	`CheckNameCÚæiù
(
Çme
.
	`Add»ssOf
(), 
node
, 
fe
, 
ns
);

1233 ifĞ
asSUCCESS
 !ğ
r
 )

1235 
node
->
	`De¡roy
(
’gše
);

1236  
r
;

1245 
sFuncDef
 *
fd
 = 
	`asNEW
(sFuncDef);

1246 ifĞ
fd
 == 0 )

1248 
node
->
	`De¡roy
(
’gše
);

1249  
asOUT_OF_MEMORY
;

1252 
fd
->
Çme
 =‚ame;

1253 
fd
->
node
 =‚ode;

1254 
fd
->
süt
 = 
fe
;

1255 
fd
->
idx
 = 
moduË
->
	`AddFuncDef
(
Çme
.
	`Add»ssOf
(), 
ns
);

1257 
funcDefs
.
	`PushLa¡
(
fd
);

1260 
	}
}

1262 
	gasCBud”
::
	$Com¶‘eFuncDef
(
sFuncDef
 *
funcDef
)

1264 
asCD©aTy³
 
»tuºTy³
;

1265 
asCA¼ay
<
asCD©aTy³
> 
·¿m‘”Ty³s
;

1266 
asCA¼ay
<
asETy³Modif›rs
> 
šOutFÏgs
;

1267 
asCA¼ay
<
asCSŒšg
 *> 
deçuÉArgs
;

1268 
boŞ
 
isCÚ¡M‘hod
;

1269 
boŞ
 
isCÚ¡ruùÜ
;

1270 
boŞ
 
isDe¡ruùÜ
;

1271 
boŞ
 
isPriv©e
;

1272 
boŞ
 
isOv”ride
;

1273 
boŞ
 
isFš®
;

1274 
boŞ
 
isSh¬ed
;

1276 
	`G‘P¬£dFunùiÚD‘as
(
funcDef
->
node
, funcDef->
süt
, 0, funcDef->
Çme
, 
»tuºTy³
, 
·¿m‘”Ty³s
, 
šOutFÏgs
, 
deçuÉArgs
, 
isCÚ¡M‘hod
, 
isCÚ¡ruùÜ
, 
isDe¡ruùÜ
, 
isPriv©e
, 
isOv”ride
, 
isFš®
, 
isSh¬ed
);

1278 
asCSütFunùiÚ
 *
func
 = 
moduË
->
funcDefs
[
funcDef
->
idx
];

1279 ifĞ
func
 )

1281 
func
->
»tuºTy³
 =„eturnType;

1282  
asUINT
 
p
 = 0;… < 
·¿m‘”Ty³s
.
	`G‘L’gth
();…++ )

1284 
func
->
·¿m‘”Ty³s
.
	`PushLa¡
Õ¬am‘”Ty³s[
p
]);

1285 
func
->
šOutFÏgs
.
	`PushLa¡
(šOutFÏgs[
p
]);

1290 
	}
}

1292 
	gasCBud”
::
	$Regi¡”Glob®V¬
(
asCSütNode
 *
node
, 
asCSütCode
 *
fe
, 
asSNameS·û
 *
ns
)

1295 ifĞ
’gše
->
•
.
di§ÎowGlob®V¬s
 )

1297 
r
, 
c
;

1298 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

1299 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
TXT_GLOBAL_VARS_NOT_ALLOWED
, 
r
, 
c
);

1304 
asCD©aTy³
 
ty³
 = 
	`C»©eD©aTy³FromNode
(
node
->
fœ¡Chd
, 
fe
, 
’gše
->
ÇmeS·ûs
[0]);

1306 ifĞ!
ty³
.
	`CªBeIn¡ªcŸ‹d
() )

1308 
asCSŒšg
 
¡r
;

1310 
¡r
.
	`FÜm©
(
TXT_DATA_TYPE_CANT_BE_s
, 
ty³
.FÜm©().
	`Add»ssOf
());

1312 
r
, 
c
;

1313 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

1315 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
¡r
.Add»ssOf(), 
r
, 
c
);

1318 
asCSütNode
 *
n
 = 
node
->
fœ¡Chd
->
Ãxt
;

1320  
n
 )

1323 
asCSŒšg
 
	`Çme
(&
fe
->
code
[
n
->
tok’Pos
],‚->
tok’L’gth
);

1324 
	`CheckNameCÚæiù
(
Çme
.
	`Add»ssOf
(), 
n
, 
fe
, 
ns
);

1327 
sGlob®V¬ŸbËDesütiÚ
 *
gv¬
 = 
	`asNEW
(sGlobalVariableDescription);

1328 ifĞ
gv¬
 == 0 )

1330 
node
->
	`De¡roy
(
’gše
);

1331  
asOUT_OF_MEMORY
;

1334 
globV¬ŸbËs
.
	`PushLa¡
(
gv¬
);

1336 
gv¬
->
süt
 = 
fe
;

1337 
gv¬
->
Çme
 =‚ame;

1338 
gv¬
->
isComped
 = 
çl£
;

1339 
gv¬
->
d©©y³
 = 
ty³
;

1340 
gv¬
->
isEnumV®ue
 = 
çl£
;

1343 
	`asASSERT
(!
gv¬
->
d©©y³
.
	`IsReã»nû
());

1345 
gv¬
->
idNode
 = 
n
;

1346 
gv¬
->
ÃxtNode
 = 0;

1347 ifĞ
n
->
Ãxt
 &&

1348 (
n
->
Ãxt
->
nodeTy³
 =ğ
¢Assignm’t
 ||

1349 
n
->
Ãxt
->
nodeTy³
 =ğ
¢ArgLi¡
 ||

1350 
n
->
Ãxt
->
nodeTy³
 =ğ
¢In™Li¡
 ) )

1352 
gv¬
->
ÃxtNode
 = 
n
->
Ãxt
;

1353 
n
->
Ãxt
->
	`DiscÚÃùP¬’t
();

1356 
gv¬
->
´İ”ty
 = 
moduË
->
	`AÎoÿ‹Glob®Prİ”ty
(
Çme
.
	`Add»ssOf
(), gv¬->
d©©y³
, 
ns
);

1357 
gv¬
->
šdex
 = gv¬->
´İ”ty
->
id
;

1359 
n
 =‚->
Ãxt
;

1362 
node
->
	`De¡roy
(
’gše
);

1365 
	}
}

1367 
	gasCBud”
::
	$Regi¡”CÏss
(
asCSütNode
 *
node
, 
asCSütCode
 *
fe
, 
asSNameS·û
 *
ns
)

1369 
asCSütNode
 *
n
 = 
node
->
fœ¡Chd
;

1370 
boŞ
 
isFš®
 = 
çl£
;

1371 
boŞ
 
isSh¬ed
 = 
çl£
;

1373 ifĞ
n
->
tok’Ty³
 =ğ
‰Id’tif›r
 && 
fe
->
	`Tok’Equ®s
Ò->
tok’Pos
,‚->
tok’L’gth
, 
FINAL_TOKEN
) )

1375 
isFš®
 = 
Œue
;

1376 
n
 =‚->
Ãxt
;

1379 ifĞ
n
->
tok’Ty³
 =ğ
‰Id’tif›r
 && 
fe
->
	`Tok’Equ®s
Ò->
tok’Pos
,‚->
tok’L’gth
, 
SHARED_TOKEN
) )

1381 
isSh¬ed
 = 
Œue
;

1382 
n
 =‚->
Ãxt
;

1385 ifĞ
n
->
tok’Ty³
 =ğ
‰Id’tif›r
 && 
fe
->
	`Tok’Equ®s
Ò->
tok’Pos
,‚->
tok’L’gth
, 
FINAL_TOKEN
) )

1387 
isFš®
 = 
Œue
;

1388 
n
 =‚->
Ãxt
;

1392 
asCSŒšg
 
	`Çme
(&
fe
->
code
[
n
->
tok’Pos
],‚->
tok’L’gth
);

1394 
r
, 
c
;

1395 
fe
->
	`CÚv”tPosToRowCŞ
(
n
->
tok’Pos
, &
r
, &
c
);

1397 
	`CheckNameCÚæiù
(
Çme
.
	`Add»ssOf
(), 
n
, 
fe
, 
ns
);

1399 
sCÏssDeş¬©iÚ
 *
deş
 = 
	`asNEW
(sClassDeclaration);

1400 ifĞ
deş
 == 0 )

1401  
asOUT_OF_MEMORY
;

1403 
şassDeş¬©iÚs
.
	`PushLa¡
(
deş
);

1404 
deş
->
Çme
 =‚ame;

1405 
deş
->
süt
 = 
fe
;

1406 
deş
->
node
 =‚ode;

1411 ifĞ
isSh¬ed
 )

1413  
asUINT
 
n
 = 0;‚ < 
’gše
->
şassTy³s
.
	`G‘L’gth
();‚++ )

1415 
asCObjeùTy³
 *
¡
 = 
’gše
->
şassTy³s
[
n
];

1416 ifĞ
¡
 &&

1417 
¡
->
	`IsSh¬ed
() &&

1418 
¡
->
Çme
 ==‚ame &&

1419 
¡
->
ÇmeS·û
 =ğ
ns
 &&

1420 !
¡
->
	`IsIÁ”çû
() )

1423 
deş
->
isExi¡šgSh¬ed
 = 
Œue
;

1424 
deş
->
objTy³
 = 
¡
;

1425 
moduË
->
şassTy³s
.
	`PushLa¡
(
¡
);

1426 
¡
->
	`AddRef
();

1433 
asCObjeùTy³
 *
¡
 = 
	`asNEW
×sCObjeùTy³)(
’gše
);

1434 ifĞ
¡
 == 0 )

1435  
asOUT_OF_MEMORY
;

1437 
¡
->
æags
 = 
asOBJ_REF
 | 
asOBJ_SCRIPT_OBJECT
;

1439 ifĞ
isSh¬ed
 )

1440 
¡
->
æags
 |ğ
asOBJ_SHARED
;

1442 ifĞ
isFš®
 )

1443 
¡
->
æags
 |ğ
asOBJ_NOINHERIT
;

1445 ifĞ
node
->
tok’Ty³
 =ğ
‰HªdË
 )

1446 
¡
->
æags
 |ğ
asOBJ_IMPLICIT_HANDLE
;

1448 
¡
->
size
 = (
asCSütObjeù
);

1449 
¡
->
Çme
 =‚ame;

1450 
¡
->
ÇmeS·û
 = 
ns
;

1451 
moduË
->
şassTy³s
.
	`PushLa¡
(
¡
);

1452 
’gše
->
şassTy³s
.
	`PushLa¡
(
¡
);

1453 
¡
->
	`AddRef
();

1454 
deş
->
objTy³
 = 
¡
;

1458 
’gše
->
gc
.
	`AddSütObjeùToGC
(
¡
, &’gše->
objeùTy³Behaviours
);

1461 
¡
->
beh
 = 
’gše
->
sütTy³Behaviours
.beh;

1464 
’gše
->
sütFunùiÚs
[
¡
->
beh
.
add»f
]->
	`AddRef
();

1465 
’gše
->
sütFunùiÚs
[
¡
->
beh
.
»Ëa£
]->
	`AddRef
();

1466 
’gše
->
sütFunùiÚs
[
¡
->
beh
.
gcEnumReã»nûs
]->
	`AddRef
();

1467 
’gše
->
sütFunùiÚs
[
¡
->
beh
.
gcG‘FÏg
]->
	`AddRef
();

1468 
’gše
->
sütFunùiÚs
[
¡
->
beh
.
gcG‘RefCouÁ
]->
	`AddRef
();

1469 
’gše
->
sütFunùiÚs
[
¡
->
beh
.
gcR–—£AÎReã»nûs
]->
	`AddRef
();

1470 
’gše
->
sütFunùiÚs
[
¡
->
beh
.
gcS‘FÏg
]->
	`AddRef
();

1471 
’gše
->
sütFunùiÚs
[
¡
->
beh
.
cİy
]->
	`AddRef
();

1472 
’gše
->
sütFunùiÚs
[
¡
->
beh
.
çùÜy
]->
	`AddRef
();

1473 
’gše
->
sütFunùiÚs
[
¡
->
beh
.
cÚ¡ruù
]->
	`AddRef
();

1474  
asUINT
 
i
 = 1; i < 
¡
->
beh
.
İ”©Üs
.
	`G‘L’gth
(); i += 2 )

1475 
’gše
->
sütFunùiÚs
[
¡
->
beh
.
İ”©Üs
[
i
]]->
	`AddRef
();

1478 
	}
}

1480 
	gasCBud”
::
	$Regi¡”IÁ”çû
(
asCSütNode
 *
node
, 
asCSütCode
 *
fe
, 
asSNameS·û
 *
ns
)

1482 
asCSütNode
 *
n
 = 
node
->
fœ¡Chd
;

1483 
asCSŒšg
 
	`Çme
(&
fe
->
code
[
n
->
tok’Pos
],‚->
tok’L’gth
);

1485 
boŞ
 
isSh¬ed
 = 
çl£
;

1486 ifĞ
Çme
 =ğ
SHARED_TOKEN
 )

1488 
isSh¬ed
 = 
Œue
;

1490 
n
 =‚->
Ãxt
;

1491 
Çme
.
	`Assign
(&
fe
->
code
[
n
->
tok’Pos
],‚->
tok’L’gth
);

1494 
r
, 
c
;

1495 
fe
->
	`CÚv”tPosToRowCŞ
(
n
->
tok’Pos
, &
r
, &
c
);

1497 
	`CheckNameCÚæiù
(
Çme
.
	`Add»ssOf
(), 
n
, 
fe
, 
ns
);

1499 
sCÏssDeş¬©iÚ
 *
deş
 = 
	`asNEW
(sClassDeclaration);

1500 ifĞ
deş
 == 0 )

1501  
asOUT_OF_MEMORY
;

1503 
š‹rçûDeş¬©iÚs
.
	`PushLa¡
(
deş
);

1504 
deş
->
Çme
 =‚ame;

1505 
deş
->
süt
 = 
fe
;

1506 
deş
->
node
 =‚ode;

1511 ifĞ
isSh¬ed
 )

1513  
asUINT
 
n
 = 0;‚ < 
’gše
->
şassTy³s
.
	`G‘L’gth
();‚++ )

1515 
asCObjeùTy³
 *
¡
 = 
’gše
->
şassTy³s
[
n
];

1516 ifĞ
¡
 &&

1517 
¡
->
	`IsSh¬ed
() &&

1518 
¡
->
Çme
 ==‚ame &&

1519 
¡
->
ÇmeS·û
 =ğ
ns
 &&

1520 
¡
->
	`IsIÁ”çû
() )

1523 
deş
->
isExi¡šgSh¬ed
 = 
Œue
;

1524 
deş
->
objTy³
 = 
¡
;

1525 
moduË
->
şassTy³s
.
	`PushLa¡
(
¡
);

1526 
¡
->
	`AddRef
();

1533 
asCObjeùTy³
 *
¡
 = 
	`asNEW
×sCObjeùTy³)(
’gše
);

1534 ifĞ
¡
 == 0 )

1535  
asOUT_OF_MEMORY
;

1537 
¡
->
æags
 = 
asOBJ_REF
 | 
asOBJ_SCRIPT_OBJECT
;

1539 ifĞ
isSh¬ed
 )

1540 
¡
->
æags
 |ğ
asOBJ_SHARED
;

1542 
¡
->
size
 = 0;

1543 
¡
->
Çme
 =‚ame;

1544 
¡
->
ÇmeS·û
 = 
ns
;

1545 
moduË
->
şassTy³s
.
	`PushLa¡
(
¡
);

1546 
’gše
->
şassTy³s
.
	`PushLa¡
(
¡
);

1547 
¡
->
	`AddRef
();

1548 
deş
->
objTy³
 = 
¡
;

1551 
¡
->
beh
.
cÚ¡ruù
 = 0;

1552 
¡
->
beh
.
add»f
 = 
’gše
->
sütTy³Behaviours
.beh.addref;

1553 
’gše
->
sütFunùiÚs
[
¡
->
beh
.
add»f
]->
	`AddRef
();

1554 
¡
->
beh
.
»Ëa£
 = 
’gše
->
sütTy³Behaviours
.beh.release;

1555 
’gše
->
sütFunùiÚs
[
¡
->
beh
.
»Ëa£
]->
	`AddRef
();

1556 
¡
->
beh
.
cİy
 = 0;

1559 
	}
}

1561 
	gasCBud”
::
	$CompeGlob®V¬ŸbËs
()

1563 
boŞ
 
compeSucûeded
 = 
Œue
;

1566 
cu¼NumE¼Üs
 = 
numE¼Üs
;

1567 
cu¼NumW¬nšgs
 = 
numW¬nšgs
;

1570 
boŞ
 
msgC®lback
 = 
’gše
->msgCallback;

1571 
asSSy¡emFunùiÚIÁ”çû
 
msgC®lbackFunc
 = 
’gše
->msgCallbackFunc;

1572 *
msgC®lbackObj
 = 
’gše
->msgCallbackObj;

1575 
asCOuutBufãr
 
outBufãr
;

1576 
’gše
->
	`S‘Mes§geC®lback
(
	`asMETHOD
(
asCOuutBufãr
, 
C®lback
), &
outBufãr
, 
asCALL_THISCALL
);

1578 
asCOuutBufãr
 
fš®Ouut
;

1579 
asCSütFunùiÚ
 *
š™Func
 = 0;

1581 
asCA¼ay
<
asCGlob®Prİ”ty
*> 
š™Ord”
;

1589 
boŞ
 
compšgPrim™ives
 = 
Œue
;

1592  
compeSucûeded
 )

1594 
compeSucûeded
 = 
çl£
;

1596 
accumE¼Üs
 = 0;

1597 
accumW¬nšgs
 = 0;

1600 
fš®Ouut
.
	`CË¬
();

1601  
asUINT
 
n
 = 0;‚ < 
globV¬ŸbËs
.
	`G‘L’gth
();‚++ )

1603 
sGlob®V¬ŸbËDesütiÚ
 *
gv¬
 = 
globV¬ŸbËs
[
n
];

1604 ifĞ
gv¬
->
isComped
 )

1607 
asCBy‹Code
 
	`š™
(
’gše
);

1608 
numW¬nšgs
 = 0;

1609 
numE¼Üs
 = 0;

1610 
outBufãr
.
	`CË¬
();

1613 ifĞ
compšgPrim™ives
 && !
gv¬
->
d©©y³
.
	`IsPrim™ive
() )

1616 ifĞ
gv¬
->
ÃxtNode
 )

1618 
r
, 
c
;

1619 
gv¬
->
süt
->
	`CÚv”tPosToRowCŞ
(gv¬->
ÃxtNode
->
tok’Pos
, &
r
, &
c
);

1620 
asCSŒšg
 
¡r
 = 
gv¬
->
d©©y³
.
	`FÜm©
();

1621 
¡r
 +ğ" " + 
gv¬
->
Çme
;

1622 
¡r
.
	`FÜm©
(
TXT_COMPILING_s
, sŒ.
	`Add»ssOf
());

1623 
	`Wr™eInfo
(
gv¬
->
süt
->
Çme
.
	`Add»ssOf
(), 
¡r
.Add»ssOf(), 
r
, 
c
, 
Œue
);

1626 ifĞ
gv¬
->
isEnumV®ue
 )

1628 
r
;

1629 ifĞ
gv¬
->
ÃxtNode
 )

1631 
asCComp”
 
	`comp
(
’gše
);

1632 
asCSütFunùiÚ
 
	`func
(
’gše
, 
moduË
, 
asFUNC_DUMMY
);

1635 
func
.
ÇmeS·û
 = 
gv¬
->
d©©y³
.
	`G‘ObjeùTy³
()->nameSpace;

1638 
asCD©aTy³
 
§veTy³
;

1639 
§veTy³
 = 
gv¬
->
d©©y³
;

1640 
gv¬
->
d©©y³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ
, 
Œue
);

1641 
r
 = 
comp
.
	`CompeGlob®V¬ŸbË
(
this
, 
gv¬
->
süt
, gv¬->
ÃxtNode
, gv¬, &
func
);

1642 
gv¬
->
d©©y³
 = 
§veTy³
;

1646 
r
 = 0;

1649 
’umV®
 = 0;

1650 ifĞ
n
 > 0 )

1652 
sGlob®V¬ŸbËDesütiÚ
 *
gv¬2
 = 
globV¬ŸbËs
[
n
-1];

1653 ifĞ
gv¬2
->
d©©y³
 =ğ
gv¬
->datatype )

1656 
’umV®
 = (*(*)&
gv¬2
->
cÚ¡ªtV®ue
) + 1;

1658 ifĞ!
gv¬2
->
isComped
 )

1661 
row
, 
cŞ
;

1662 
gv¬
->
süt
->
	`CÚv”tPosToRowCŞ
(0, &
row
, &
cŞ
);

1664 
asCSŒšg
 
¡r
 = 
gv¬
->
d©©y³
.
	`FÜm©
();

1665 
¡r
 +ğ" " + 
gv¬
->
Çme
;

1666 
¡r
.
	`FÜm©
(
TXT_COMPILING_s
, sŒ.
	`Add»ssOf
());

1667 
	`Wr™eInfo
(
gv¬
->
süt
->
Çme
.
	`Add»ssOf
(), 
¡r
.Add»ssOf(), 
row
, 
cŞ
, 
Œue
);

1669 
¡r
.
	`FÜm©
(
TXT_UNINITIALIZED_GLOBAL_VAR_s
, 
gv¬2
->
Çme
.
	`Add»ssOf
());

1670 
	`Wr™eE¼Ü
(
gv¬
->
süt
->
Çme
.
	`Add»ssOf
(), 
¡r
.Add»ssOf(), 
row
, 
cŞ
);

1671 
r
 = -1;

1677 *(*)&
gv¬
->
cÚ¡ªtV®ue
 = 
’umV®
;

1680 ifĞ
r
 >= 0 )

1683 
gv¬
->
isComped
 = 
Œue
;

1684 
compeSucûeded
 = 
Œue
;

1690 
š™Func
 = 
	`asNEW
(
asCSütFunùiÚ
)(
’gše
, 
moduË
, 
asFUNC_DUMMY
);

1691 ifĞ
š™Func
 == 0 )

1698 
š™Func
->
ÇmeS·û
 = 
gv¬
->
´İ”ty
->nameSpace;

1700 
asCComp”
 
	`comp
(
’gše
);

1701 
r
 = 
comp
.
	`CompeGlob®V¬ŸbË
(
this
, 
gv¬
->
süt
, gv¬->
ÃxtNode
, gv¬, 
š™Func
);

1702 ifĞ
r
 >= 0 )

1705 
gv¬
->
isComped
 = 
Œue
;

1706 
compeSucûeded
 = 
Œue
;

1711 
	`asDELETE
(
š™Func
, 
asCSütFunùiÚ
);

1712 
š™Func
 = 0;

1716 ifĞ
gv¬
->
isComped
 )

1719 ifĞ
numW¬nšgs
 )

1721 
cu¼NumW¬nšgs
 +ğ
numW¬nšgs
;

1722 ifĞ
msgC®lback
 )

1723 
outBufãr
.
	`S’dToC®lback
(
’gše
, &
msgC®lbackFunc
, 
msgC®lbackObj
);

1727 ifĞ
gv¬
->
´İ”ty
 && !gv¬->
isEnumV®ue
 )

1728 
š™Ord”
.
	`PushLa¡
(
gv¬
->
´İ”ty
);

1731 ifĞ
š™Func
 && in™Func->
by‹Code
.
	`G‘L’gth
() > 2 )

1734 
š™Func
->
id
 = 
’gše
->
	`G‘NextSütFunùiÚId
();

1735 
’gše
->
	`S‘SütFunùiÚ
(
š™Func
);

1738 
š™Func
->
funcTy³
 = 
asFUNC_SCRIPT
;

1739 
š™Func
->
»tuºTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰Void
, 
çl£
);

1740 
š™Func
->
sütSeùiÚIdx
 = 
’gše
->
	`G‘SütSeùiÚNameIndex
(
gv¬
->
süt
->
Çme
.
	`Add»ssOf
());

1743 
’gše
->
gc
.
	`AddSütObjeùToGC
(
š™Func
, &’gše->
funùiÚBehaviours
);

1745 
gv¬
->
´İ”ty
->
	`S‘In™Func
(
š™Func
);

1747 
š™Func
->
	`R–—£
();

1748 
š™Func
 = 0;

1750 ifĞ
š™Func
 )

1753 
	`asDELETE
(
š™Func
, 
asCSütFunùiÚ
);

1754 
š™Func
 = 0;

1758 ifĞ
gv¬
->
isEnumV®ue
 )

1760 
asCObjeùTy³
 *
objeùTy³
 = 
gv¬
->
d©©y³
.
	`G‘ObjeùTy³
();

1761 
	`asASSERT
(
NULL
 !ğ
objeùTy³
);

1763 
asSEnumV®ue
 *
e
 = 
	`asNEW
(asSEnumValue);

1764 ifĞ
e
 == 0 )

1767 
numE¼Üs
++;

1771 
e
->
Çme
 = 
gv¬
->name;

1772 
e
->
v®ue
 = *(*)&
gv¬
->
cÚ¡ªtV®ue
;

1774 
objeùTy³
->
’umV®ues
.
	`PushLa¡
(
e
);

1780 
fš®Ouut
.
	`Aµ’d
(
outBufãr
);

1781 
accumE¼Üs
 +ğ
numE¼Üs
;

1782 
accumW¬nšgs
 +ğ
numW¬nšgs
;

1785 
´eMes§ge
.
isS‘
 = 
çl£
;

1788 ifĞ!
compeSucûeded
 )

1790 ifĞ
compšgPrim™ives
 )

1794 
compšgPrim™ives
 = 
çl£
;

1795 
compeSucûeded
 = 
Œue
;

1801 
cu¼NumW¬nšgs
 +ğ
accumW¬nšgs
;

1802 
cu¼NumE¼Üs
 +ğ
accumE¼Üs
;

1803 ifĞ
msgC®lback
 )

1804 
fš®Ouut
.
	`S’dToC®lback
(
’gše
, &
msgC®lbackFunc
, 
msgC®lbackObj
);

1810 
’gše
->
msgC®lback
 = msgCallback;

1811 
’gše
->
msgC®lbackFunc
 = msgCallbackFunc;

1812 
’gše
->
msgC®lbackObj
 = msgCallbackObj;

1814 
numW¬nšgs
 = 
cu¼NumW¬nšgs
;

1815 
numE¼Üs
 = 
cu¼NumE¼Üs
;

1818 ifĞ
numE¼Üs
 == 0 )

1823 ifĞ
moduË
->
sütGlob®s
.
	`G‘L’gth
(è=ğ
š™Ord”
.GetLength() )

1824 
moduË
->
sütGlob®s
 = 
š™Ord”
;

1828  
asUINT
 
n
 = 0;‚ < 
globV¬ŸbËs
.
	`G‘L’gth
();‚++ )

1830 
sGlob®V¬ŸbËDesütiÚ
 *
gv¬
 = 
globV¬ŸbËs
[
n
];

1831 ifĞ
gv¬
->
isEnumV®ue
 )

1834 ifĞ
gv¬
->
ÃxtNode
 )

1836 
gv¬
->
ÃxtNode
->
	`De¡roy
(
’gše
);

1837 
gv¬
->
ÃxtNode
 = 0;

1839 ifĞ
gv¬
->
´İ”ty
 )

1841 
	`asDELETE
(
gv¬
->
´İ”ty
, 
asCGlob®Prİ”ty
);

1842 
gv¬
->
´İ”ty
 = 0;

1845 
	`asDELETE
(
gv¬
, 
sGlob®V¬ŸbËDesütiÚ
);

1846 
globV¬ŸbËs
[
n
] = 0;

1849 
	}
}

1851 
	gasCBud”
::
	$CompeCÏs£s
()

1853 
asUINT
 
n
;

1854 
asCA¼ay
<
sCÏssDeş¬©iÚ
*> 
	`toV®id©e
(()
şassDeş¬©iÚs
.
	`G‘L’gth
());

1857  
n
 = 0;‚ < 
şassDeş¬©iÚs
.
	`G‘L’gth
();‚++ )

1859 
sCÏssDeş¬©iÚ
 *
deş
 = 
şassDeş¬©iÚs
[
n
];

1860 
asCSütCode
 *
fe
 = 
deş
->
süt
;

1863 
boŞ
 
muÉËInh”™ªû
 = 
çl£
;

1864 
asCSütNode
 *
node
 = 
deş
->node->
fœ¡Chd
;

1866 ifĞ
deş
->
objTy³
->
	`IsSh¬ed
() )

1869 
	`asASSERT
(
node
->
tok’Ty³
 =ğ
‰Id’tif›r
);

1870 
node
 =‚ode->
Ãxt
;

1872 ifĞ
deş
->
objTy³
->
æags
 & 
asOBJ_NOINHERIT
 )

1875 
	`asASSERT
(
node
->
tok’Ty³
 =ğ
‰Id’tif›r
);

1876 
node
 =‚ode->
Ãxt
;

1880 
	`asASSERT
(
node
->
tok’Ty³
 =ğ
‰Id’tif›r
);

1881 
node
 =‚ode->
Ãxt
;

1883  
node
 &&‚ode->
nodeTy³
 =ğ
¢Id’tif›r
 )

1886 
asCSŒšg
 
scİe
 = 
	`G‘ScİeFromNode
(
node
->
fœ¡Chd
, 
fe
);

1887 
asSNameS·û
 *
ns
 = 0;

1888 ifĞ
scİe
 == "" )

1890 
ns
 = 
deş
->
objTy³
->
ÇmeS·û
;

1891 ifĞ
scİe
 == "::" )

1893 
ns
 = 
’gše
->
ÇmeS·ûs
[0];

1896 
ns
 = 
’gše
->
	`FšdNameS·û
(
scİe
.
	`Add»ssOf
());

1897 ifĞ
ns
 == 0 )

1899 
asCSŒšg
 
msg
;

1900 
msg
.
	`FÜm©
(
TXT_NAMESPACE_s_DOESNT_EXIST
, 
scİe
.
	`Add»ssOf
());

1901 
r
,
c
;

1902 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
fœ¡Chd
->
tok’Pos
, &
r
, &
c
);

1903 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
msg
.Add»ssOf(), 
r
, 
c
);

1907 
node
 =‚ode->
Ãxt
;

1912 
asCSŒšg
 
	`Çme
(&
fe
->
code
[
node
->
Ï¡Chd
->
tok’Pos
],‚ode->Ï¡Chd->
tok’L’gth
);

1915 
asCObjeùTy³
 *
objTy³
 = 
	`G‘ObjeùTy³
(
Çme
.
	`Add»ssOf
(), 
ns
);

1917 ifĞ
objTy³
 == 0 )

1919 
r
, 
c
;

1920 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

1921 
asCSŒšg
 
¡r
;

1922 
¡r
.
	`FÜm©
(
TXT_IDENTIFIER_s_NOT_DATA_TYPE
, 
Çme
.
	`Add»ssOf
());

1923 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
¡r
.Add»ssOf(), 
r
, 
c
);

1925 ifĞ!(
objTy³
->
æags
 & 
asOBJ_SCRIPT_OBJECT
) ||

1926 
objTy³
->
æags
 & 
asOBJ_NOINHERIT
 )

1930 
r
, 
c
;

1931 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

1932 
asCSŒšg
 
¡r
;

1933 
¡r
.
	`FÜm©
(
TXT_CANNOT_INHERIT_FROM_s_FINAL
, 
objTy³
->
Çme
.
	`Add»ssOf
());

1934 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
¡r
.Add»ssOf(), 
r
, 
c
);

1936 ifĞ
objTy³
->
size
 != 0 )

1939 ifĞ!
deş
->
isExi¡šgSh¬ed
 && deş->
objTy³
->
d”ivedFrom
 != 0 )

1941 ifĞ!
muÉËInh”™ªû
 )

1943 
r
, 
c
;

1944 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

1945 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
TXT_CANNOT_INHERIT_FROM_MULTIPLE_CLASSES
, 
r
, 
c
);

1946 
muÉËInh”™ªû
 = 
Œue
;

1952 
asCObjeùTy³
 *
ba£
 = 
objTy³
;

1953 
boŞ
 
”rÜ
 = 
çl£
;

1954  
ba£
 != 0 )

1956 ifĞ
ba£
 =ğ
deş
->
objTy³
 )

1958 
r
, 
c
;

1959 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

1960 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
TXT_CANNOT_INHERIT_FROM_SELF
, 
r
, 
c
);

1961 
”rÜ
 = 
Œue
;

1965 
ba£
 = ba£->
d”ivedFrom
;

1968 ifĞ!
”rÜ
 )

1971 ifĞ(
deş
->
objTy³
->
	`IsSh¬ed
()) && !(objType->IsShared()) )

1973 
r
, 
c
;

1974 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

1975 
asCSŒšg
 
msg
;

1976 
msg
.
	`FÜm©
(
TXT_SHARED_CANNOT_INHERIT_FROM_NON_SHARED_s
, 
objTy³
->
Çme
.
	`Add»ssOf
());

1977 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
msg
.Add»ssOf(), 
r
, 
c
);

1978 
”rÜ
 = 
Œue
;

1982 ifĞ!
”rÜ
 )

1984 ifĞ
deş
->
isExi¡šgSh¬ed
 )

1987 ifĞ
deş
->
objTy³
->
d”ivedFrom
 != objType )

1989 
r
, 
c
;

1990 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

1991 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
TXT_SHARED_DOESNT_MATCH_ORIGINAL
, 
r
, 
c
);

1997 
deş
->
objTy³
->
d”ivedFrom
 = objType;

1998 
objTy³
->
	`AddRef
();

2006 ifĞ!
deş
->
isExi¡šgSh¬ed
 && deş->
objTy³
->
	`Im¶em’ts
(objType) )

2008 
r
, 
c
;

2009 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

2010 
asCSŒšg
 
msg
;

2011 
msg
.
	`FÜm©
(
TXT_INTERFACE_s_ALREADY_IMPLEMENTED
, 
objTy³
->
	`G‘Name
());

2012 
	`Wr™eW¬nšg
(
fe
->
Çme
.
	`Add»ssOf
(), 
msg
.Add»ssOf(), 
r
, 
c
);

2017 ifĞ(
deş
->
objTy³
->
	`IsSh¬ed
()) && !(objType->IsShared()) )

2019 
r
, 
c
;

2020 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

2021 
asCSŒšg
 
msg
;

2022 
msg
.
	`FÜm©
(
TXT_SHARED_CANNOT_IMPLEMENT_NON_SHARED_s
, 
objTy³
->
Çme
.
	`Add»ssOf
());

2023 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
msg
.Add»ssOf(), 
r
, 
c
);

2027 ifĞ
deş
->
isExi¡šgSh¬ed
 )

2030 ifĞ!
deş
->
objTy³
->
	`Im¶em’ts
(objType) )

2032 
r
, 
c
;

2033 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

2034 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
TXT_SHARED_DOESNT_MATCH_ORIGINAL
, 
r
, 
c
);

2039 
deş
->
objTy³
->
š‹rçûs
.
	`PushLa¡
(objType);

2045 
node
 =‚ode->
Ãxt
;

2051  
n
 = 0;‚ < 
şassDeş¬©iÚs
.
	`G‘L’gth
();‚++ )

2053 
sCÏssDeş¬©iÚ
 *
deş
 = 
şassDeş¬©iÚs
[
n
];

2054 
asCObjeùTy³
 *
d”ived
 = 
deş
->
objTy³
;

2055 
asCObjeùTy³
 *
ba£
 = 
d”ived
->
d”ivedFrom
;

2057 ifĞ
ba£
 == 0 ) ;

2060  
asUINT
 
m
 = 
n
+1; m < 
şassDeş¬©iÚs
.
	`G‘L’gth
(); m++ )

2062 
sCÏssDeş¬©iÚ
 *
deşBa£
 = 
şassDeş¬©iÚs
[
m
];

2063 ifĞ
ba£
 =ğ
deşBa£
->
objTy³
 )

2065 
şassDeş¬©iÚs
.
	`RemoveIndex
(
n
);

2066 
şassDeş¬©iÚs
.
	`PushLa¡
(
deş
);

2069 
n
--;

2076  
n
 = 0;‚ < 
şassDeş¬©iÚs
.
	`G‘L’gth
();‚++ )

2078 
sCÏssDeş¬©iÚ
 *
deş
 = 
şassDeş¬©iÚs
[
n
];

2079 ifĞ
deş
->
isExi¡šgSh¬ed
 )

2085 
deş
->
v®idS‹
 = 1;

2090 ifĞ
deş
->
objTy³
->
d”ivedFrom
 )

2092 
asCObjeùTy³
 *
ba£Ty³
 = 
deş
->
objTy³
->
d”ivedFrom
;

2095  
n
 = 0;‚ < 
ba£Ty³
->
š‹rçûs
.
	`G‘L’gth
();‚++ )

2097 ifĞ!
deş
->
objTy³
->
	`Im¶em’ts
(
ba£Ty³
->
š‹rçûs
[
n
]) )

2099 
deş
->
objTy³
->
š‹rçûs
.
	`PushLa¡
(
ba£Ty³
->š‹rçûs[
n
]);

2104 
r
, 
c
;

2105 
deş
->
süt
->
	`CÚv”tPosToRowCŞ
(deş->
node
->
tok’Pos
, &
r
, &
c
);

2106 
asCSŒšg
 
msg
;

2107 
msg
.
	`FÜm©
(
TXT_INTERFACE_s_ALREADY_IMPLEMENTED
, 
ba£Ty³
->
š‹rçûs
[
n
]->
	`G‘Name
());

2108 
	`Wr™eW¬nšg
(
deş
->
süt
->
Çme
.
	`Add»ssOf
(), 
msg
.Add»ssOf(), 
r
, 
c
);

2115  
asUINT
 
p
 = 0;… < 
ba£Ty³
->
´İ”t›s
.
	`G‘L’gth
();…++ )

2117 
asCObjeùPrİ”ty
 *
´İ
 = 
	`AddPrİ”tyToCÏss
(
deş
, 
ba£Ty³
->
´İ”t›s
[
p
]->
Çme
, ba£Ty³->´İ”t›s[p]->
ty³
, ba£Ty³->´İ”t›s[p]->
isPriv©e
);

2120 
	`asASSERT
(
´İ
 &&…rİ->
by‹Off£t
 =ğ
ba£Ty³
->
´İ”t›s
[
p
]->by‹Off£t); 
	`UNUSED_VAR
(prop);

2124  
asUINT
 
m
 = 0; m < 
ba£Ty³
->
m‘hods
.
	`G‘L’gth
(); m++ )

2127 
asCSütFunùiÚ
 *
ba£Func
 = 
	`G‘FunùiÚDesütiÚ
(
ba£Ty³
->
m‘hods
[
m
]);

2128 
asCSütFunùiÚ
 *
d”ivedFunc
 = 0;

2129 
boŞ
 
found
 = 
çl£
;

2130  
asUINT
 
d
 = 0; d < 
deş
->
objTy³
->
m‘hods
.
	`G‘L’gth
(); d++ )

2132 
d”ivedFunc
 = 
	`G‘FunùiÚDesütiÚ
(
deş
->
objTy³
->
m‘hods
[
d
]);

2133 ifĞ
d”ivedFunc
->
	`IsSigÇtu»Equ®
(
ba£Func
) )

2135 ifĞ
ba£Func
->
	`IsFš®
() )

2137 
r
, 
c
;

2138 
deş
->
süt
->
	`CÚv”tPosToRowCŞ
(deş->
node
->
tok’Pos
, &
r
, &
c
);

2139 
asCSŒšg
 
msg
;

2140 
msg
.
	`FÜm©
(
TXT_METHOD_CANNOT_OVERRIDE_s
, 
ba£Func
->
	`G‘Deş¬©iÚ
());

2141 
	`Wr™eE¼Ü
(
deş
->
süt
->
Çme
.
	`Add»ssOf
(), 
msg
.Add»ssOf(), 
r
, 
c
);

2145 
deş
->
objTy³
->
m‘hods
.
	`RemoveIndex
(
d
);

2146 
deş
->
objTy³
->
vœtu®FunùiÚTabË
.
	`PushLa¡
(
d”ivedFunc
);

2147 
found
 = 
Œue
;

2152 ifĞ!
found
 )

2155 
deş
->
objTy³
->
vœtu®FunùiÚTabË
.
	`PushLa¡
(
ba£Ty³
->vœtu®FunùiÚTabË[
m
]);

2156 
ba£Ty³
->
vœtu®FunùiÚTabË
[
m
]->
	`AddRef
();

2159 
deş
->
objTy³
->
m‘hods
.
	`PushLa¡
(
ba£Ty³
->m‘hods[
m
]);

2160 
’gše
->
sütFunùiÚs
[
ba£Ty³
->
m‘hods
[
m
]]->
	`AddRef
();

2165  
asUINT
 
m
 = 0; m < 
deş
->
objTy³
->
m‘hods
.
	`G‘L’gth
(); m++ )

2167 
asCSütFunùiÚ
 *
func
 = 
	`G‘FunùiÚDesütiÚ
(
deş
->
objTy³
->
m‘hods
[
m
]);

2168 ifĞ
func
->
funcTy³
 !ğ
asFUNC_VIRTUAL
 )

2171 
deş
->
objTy³
->
m‘hods
.
	`RemoveIndex
(
m
);

2172 
deş
->
objTy³
->
vœtu®FunùiÚTabË
.
	`PushLa¡
(
func
);

2176 
deş
->
objTy³
->
m‘hods
.
	`PushLa¡
(
	`C»©eVœtu®FunùiÚ
(
func
, ()deş->objTy³->
vœtu®FunùiÚTabË
.
	`G‘L’gth
() - 1));

2177 
m
--;

2182 
asCSütNode
 *
node
 = 
deş
->node->
fœ¡Chd
->
Ãxt
;

2183 ifĞ
deş
->
objTy³
->
	`IsSh¬ed
() )

2184 
node
 =‚ode->
Ãxt
;

2185 ifĞ
deş
->
objTy³
->
æags
 & 
asOBJ_NOINHERIT
 )

2186 
node
 =‚ode->
Ãxt
;

2189  
node
 &&‚ode->
nodeTy³
 =ğ
¢Id’tif›r
 )

2190 
node
 =‚ode->
Ãxt
;

2192  
node
 )

2194 ifĞ
node
->
nodeTy³
 =ğ
¢Deş¬©iÚ
 )

2196 
boŞ
 
isPriv©e
 = 
çl£
;

2197 ifĞ
node
->
fœ¡Chd
 &&‚ode->fœ¡Chd->
tok’Ty³
 =ğ
‰Priv©e
 )

2198 
isPriv©e
 = 
Œue
;

2200 
asCSütCode
 *
fe
 = 
deş
->
süt
;

2202 
asCD©aTy³
 
dt
 = 
	`C»©eD©aTy³FromNode
(
isPriv©e
 ? 
node
->
fœ¡Chd
->
Ãxt
 :‚ode->fœ¡Chd, 
fe
, 
’gše
->
ÇmeS·ûs
[0]);

2203 
asCSŒšg
 
	`Çme
(&
fe
->
code
[
node
->
Ï¡Chd
->
tok’Pos
],‚ode->Ï¡Chd->
tok’L’gth
);

2205 ifĞ
deş
->
objTy³
->
	`IsSh¬ed
(è&& 
dt
.
	`G‘ObjeùTy³
() && !dt.GetObjectType()->IsShared() )

2207 
r
, 
c
;

2208 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

2209 
asCSŒšg
 
msg
;

2210 
msg
.
	`FÜm©
(
TXT_SHARED_CANNOT_USE_NON_SHARED_TYPE_s
, 
dt
.
	`G‘ObjeùTy³
()->
Çme
.
	`Add»ssOf
());

2211 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
msg
.Add»ssOf(), 
r
, 
c
);

2214 ifĞ
dt
.
	`IsR—dOÆy
() )

2216 
r
, 
c
;

2217 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

2219 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
TXT_PROPERTY_CANT_BE_CONST
, 
r
, 
c
);

2222 
	`CheckNameCÚæiùMemb”
(
deş
->
objTy³
, 
Çme
.
	`Add»ssOf
(), 
node
->
Ï¡Chd
, 
fe
, 
Œue
);

2224 
	`AddPrİ”tyToCÏss
(
deş
, 
Çme
, 
dt
, 
isPriv©e
, 
fe
, 
node
);

2227 
	`asASSERT
(
çl£
);

2229 
node
 =‚ode->
Ãxt
;

2232 
toV®id©e
.
	`PushLa¡
(
deş
);

2244  
n
 = 0;‚ < 
şassDeş¬©iÚs
.
	`G‘L’gth
();‚++ )

2246 
sCÏssDeş¬©iÚ
 *
deş
 = 
şassDeş¬©iÚs
[
n
];

2247 ifĞ
deş
->
isExi¡šgSh¬ed
 ) ;

2249 
asCA¼ay
<
boŞ
> 
	`ov”rideV®id©iÚs
(
deş
->
objTy³
->
	`G‘M‘hodCouÁ
());

2250  
asUINT
 
k
 = 0; k < 
deş
->
objTy³
->
m‘hods
.
	`G‘L’gth
(); k++ )

2252 
ov”rideV®id©iÚs
.
	`PushLa¡
Ğ!
¡©ic_ÿ¡
<
asCSütFunùiÚ
*>(
deş
->
objTy³
->
	`G‘M‘hodByIndex
(
k
, 
çl£
))->
	`IsOv”ride
() );

2255  
asUINT
 
m
 = 0; m < 
deş
->
objTy³
->
š‹rçûs
.
	`G‘L’gth
(); m++ )

2257 
asCObjeùTy³
 *
objTy³
 = 
deş
->objTy³->
š‹rçûs
[
m
];

2258  
asUINT
 
i
 = 0; i < 
objTy³
->
m‘hods
.
	`G‘L’gth
(); i++ )

2260 
asUINT
 
ov”rideIndex
;

2261 ifĞ!
	`DÛsM‘hodExi¡
(
deş
->
objTy³
, objTy³->
m‘hods
[
i
], &
ov”rideIndex
) )

2263 
r
, 
c
;

2264 
deş
->
süt
->
	`CÚv”tPosToRowCŞ
(deş->
node
->
tok’Pos
, &
r
, &
c
);

2265 
asCSŒšg
 
¡r
;

2266 
¡r
.
	`FÜm©
(
TXT_MISSING_IMPLEMENTATION_OF_s
,

2267 
’gše
->
	`G‘FunùiÚDeş¬©iÚ
(
objTy³
->
m‘hods
[
i
]).
	`Add»ssOf
());

2268 
	`Wr™eE¼Ü
(
deş
->
süt
->
Çme
.
	`Add»ssOf
(), 
¡r
.Add»ssOf(), 
r
, 
c
);

2271 
ov”rideV®id©iÚs
[
ov”rideIndex
] = 
Œue
;

2275 
boŞ
 
hasBa£CÏss
 = 
deş
->
objTy³
->
d”ivedFrom
 != 0;

2277  
asUINT
 
j
 = 0; j < 
ov”rideV®id©iÚs
.
	`G‘L’gth
(); j++ )

2279 ifĞ!
ov”rideV®id©iÚs
[
j
] && (!
hasBa£CÏss
 || !
	`DÛsM‘hodExi¡
(
deş
->
objTy³
->
d”ivedFrom
, deş->objTy³->
m‘hods
[j])) )

2281 
r
, 
c
;

2282 
deş
->
süt
->
	`CÚv”tPosToRowCŞ
(deş->
node
->
tok’Pos
, &
r
, &
c
);

2283 
asCSŒšg
 
msg
;

2284 
msg
.
	`FÜm©
(
TXT_METHOD_s_DOES_NOT_OVERRIDE
, 
deş
->
objTy³
->
	`G‘M‘hodByIndex
(
j
, 
çl£
)->
	`G‘Deş¬©iÚ
());

2285 
	`Wr™eE¼Ü
(
deş
->
süt
->
Çme
.
	`Add»ssOf
(), 
msg
.Add»ssOf(), 
r
, 
c
);

2292  
toV®id©e
.
	`G‘L’gth
() > 0 )

2294 
asUINT
 
numCÏs£s
 = (asUINT)
toV®id©e
.
	`G‘L’gth
();

2296 
asCA¼ay
<
sCÏssDeş¬©iÚ
*> 
	`toV®id©eNext
(()
toV®id©e
.
	`G‘L’gth
());

2297  
toV®id©e
.
	`G‘L’gth
() > 0 )

2299 
sCÏssDeş¬©iÚ
 *
deş
 = 
toV®id©e
[toV®id©e.
	`G‘L’gth
()-1];

2300 
v®idS‹
 = 1;

2301  
asUINT
 
n
 = 0;‚ < 
deş
->
objTy³
->
´İ”t›s
.
	`G‘L’gth
();‚++ )

2304 
asCObjeùPrİ”ty
 *
´İ
 = 
deş
->
objTy³
->
´İ”t›s
[
n
];

2305 
asCD©aTy³
 
dt
 = 
´İ
->
ty³
;

2307 ifĞ
dt
.
	`IsTem¶©e
() )

2309 
asCD©aTy³
 
sub
 = 
dt
;

2310  
sub
.
	`IsTem¶©e
(è&& !sub.
	`IsObjeùHªdË
() )

2311 
sub
 = sub.
	`G‘SubTy³
();

2313 
dt
 = 
sub
;

2316 ifĞ
dt
.
	`IsObjeù
(è&& !dt.
	`IsObjeùHªdË
() )

2319 
sCÏssDeş¬©iÚ
 *
pdeş
 = 0;

2320  
asUINT
 
p
 = 0;… < 
şassDeş¬©iÚs
.
	`G‘L’gth
();…++ )

2322 ifĞ
şassDeş¬©iÚs
[
p
]->
objTy³
 =ğ
dt
.
	`G‘ObjeùTy³
() )

2324 
pdeş
 = 
şassDeş¬©iÚs
[
p
];

2329 ifĞ
pdeş
 )

2331 ifĞ
pdeş
->
objTy³
 =ğ
deş
->objType )

2333 
r
, 
c
;

2334 
deş
->
süt
->
	`CÚv”tPosToRowCŞ
(deş->
node
->
tok’Pos
, &
r
, &
c
);

2335 
	`Wr™eE¼Ü
(
deş
->
süt
->
Çme
.
	`Add»ssOf
(), 
TXT_ILLEGAL_MEMBER_TYPE
, 
r
, 
c
);

2336 
v®idS‹
 = 2;

2339 ifĞ
pdeş
->
v®idS‹
 != 1 )

2341 
v®idS‹
 = 
pdeş
->validState;

2348 ifĞ
v®idS‹
 == 1 )

2350 
deş
->
v®idS‹
 = 1;

2351 
toV®id©e
.
	`PİLa¡
();

2353 ifĞ
v®idS‹
 == 2 )

2355 
deş
->
v®idS‹
 = 2;

2356 
toV®id©e
.
	`PİLa¡
();

2360 
toV®id©eNext
.
	`PushLa¡
(
toV®id©e
.
	`PİLa¡
());

2364 
toV®id©e
 = 
toV®id©eNext
;

2365 
toV®id©eNext
.
	`S‘L’gth
(0);

2367 ifĞ
numCÏs£s
 =ğ
toV®id©e
.
	`G‘L’gth
() )

2369 
r
, 
c
;

2370 
toV®id©e
[0]->
süt
->
	`CÚv”tPosToRowCŞ
ÑoV®id©e[0]->
node
->
tok’Pos
, &
r
, &
c
);

2371 
	`Wr™eE¼Ü
(
toV®id©e
[0]->
süt
->
Çme
.
	`Add»ssOf
(), 
TXT_ILLEGAL_MEMBER_TYPE
, 
r
, 
c
);

2376 ifĞ
numE¼Üs
 > 0 ) ;

2379  
n
 = 0;‚ < 
şassDeş¬©iÚs
.
	`G‘L’gth
();‚++ )

2381 
sCÏssDeş¬©iÚ
 *
deş
 = 
şassDeş¬©iÚs
[
n
];

2382 ifĞ
deş
->
isExi¡šgSh¬ed
 ) ;

2383 
asCObjeùTy³
 *
Ù
 = 
deş
->
objTy³
;

2386  
asUINT
 
p
 = 0;… < 
Ù
->
´İ”t›s
.
	`G‘L’gth
();…++ )

2388 
asCD©aTy³
 
dt
 = 
Ù
->
´İ”t›s
[
p
]->
ty³
;

2389 ifĞ
dt
.
	`IsObjeù
() )

2391 ifĞ
dt
.
	`IsObjeùHªdË
() )

2399 
Ù
->
æags
 |ğ
asOBJ_GC
;

2402 ifĞ
dt
.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_GC
 )

2407 
Ù
->
æags
 |ğ
asOBJ_GC
;

2413 
	}
}

2415 
	gasCBud”
::
	$C»©eVœtu®FunùiÚ
(
asCSütFunùiÚ
 *
func
, 
idx
)

2417 
asCSütFunùiÚ
 *
vf
 = 
	`asNEW
×sCSütFunùiÚ)(
’gše
, 
moduË
, 
asFUNC_VIRTUAL
);

2418 ifĞ
vf
 == 0 )

2419  
asOUT_OF_MEMORY
;

2421 
vf
->
Çme
 = 
func
->name;

2422 
vf
->
»tuºTy³
 = 
func
->returnType;

2423 
vf
->
·¿m‘”Ty³s
 = 
func
->parameterTypes;

2424 
vf
->
šOutFÏgs
 = 
func
->inOutFlags;

2425 
vf
->
id
 = 
’gše
->
	`G‘NextSütFunùiÚId
();

2426 
vf
->
sütSeùiÚIdx
 = 
func
->scriptSectionIdx;

2427 
vf
->
isR—dOÆy
 = 
func
->isReadOnly;

2428 
vf
->
objeùTy³
 = 
func
->objectType;

2429 
vf
->
sigÇtu»Id
 = 
func
->signatureId;

2430 
vf
->
isPriv©e
 = 
func
->isPrivate;

2431 
vf
->
isFš®
 = 
func
->isFinal;

2432 
vf
->
isOv”ride
 = 
func
->isOverride;

2433 
vf
->
vfTabËIdx
 = 
idx
;

2434 
vf
->
deçuÉArgs
 = 
func
->defaultArgs;

2437  
asUINT
 
n
 = 0;‚ < 
vf
->
deçuÉArgs
.
	`G‘L’gth
();‚++ )

2438 ifĞ
vf
->
deçuÉArgs
[
n
] )

2439 
vf
->
deçuÉArgs
[
n
] = 
	`asNEW
(
asCSŒšg
)(*vf->defaultArgs[n]);

2441 
moduË
->
	`AddSütFunùiÚ
(
vf
);

2444 
funùiÚs
.
	`PushLa¡
(0);

2446  
vf
->
id
;

2447 
	}
}

2449 
asCObjeùPrİ”ty
 *
	gasCBud”
::
	$AddPrİ”tyToCÏss
(
sCÏssDeş¬©iÚ
 *
deş
, cÚ¡ 
asCSŒšg
 &
Çme
, cÚ¡ 
asCD©aTy³
 &
dt
, 
boŞ
 
isPriv©e
, 
asCSütCode
 *
fe
, 
asCSütNode
 *
node
)

2451 ifĞ!
dt
.
	`CªBeIn¡ªcŸ‹d
() )

2453 ifĞ
fe
 && 
node
 )

2455 
r
, 
c
;

2456 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

2457 
asCSŒšg
 
¡r
;

2458 
¡r
.
	`FÜm©
(
TXT_DATA_TYPE_CANT_BE_s
, 
dt
.FÜm©().
	`Add»ssOf
());

2459 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
¡r
.Add»ssOf(), 
r
, 
c
);

2464  
deş
->
objTy³
->
	`AddPrİ”tyToCÏss
(
Çme
, 
dt
, 
isPriv©e
);

2465 
	}
}

2467 
boŞ
 
	gasCBud”
::
	$DÛsM‘hodExi¡
(
asCObjeùTy³
 *
objTy³
, 
m‘hodId
, 
asUINT
 *
m‘hodIndex
)

2469 
asCSütFunùiÚ
 *
m‘hod
 = 
	`G‘FunùiÚDesütiÚ
(
m‘hodId
);

2471  
asUINT
 
n
 = 0;‚ < 
objTy³
->
m‘hods
.
	`G‘L’gth
();‚++ )

2473 
asCSütFunùiÚ
 *
m
 = 
	`G‘FunùiÚDesütiÚ
(
objTy³
->
m‘hods
[
n
]);

2475 ifĞ
m
->
Çme
 !ğ
m‘hod
->name ) ;

2476 ifĞ
m
->
»tuºTy³
 !ğ
m‘hod
->returnType ) ;

2477 ifĞ
m
->
isR—dOÆy
 !ğ
m‘hod
->isReadOnly ) ;

2478 ifĞ
m
->
·¿m‘”Ty³s
 !ğ
m‘hod
->parameterTypes ) ;

2479 ifĞ
m
->
šOutFÏgs
 !ğ
m‘hod
->inOutFlags ) ;

2481 ifĞ
m‘hodIndex
 )

2482 *
m‘hodIndex
 = 
n
;

2484  
Œue
;

2487  
çl£
;

2488 
	}
}

2490 
	gasCBud”
::
	$AddDeçuÉCÚ¡ruùÜ
(
asCObjeùTy³
 *
objTy³
, 
asCSütCode
 *
fe
)

2492 
funcId
 = 
’gše
->
	`G‘NextSütFunùiÚId
();

2494 
asCD©aTy³
 
»tuºTy³
 =‡sCD©aTy³::
	`C»©ePrim™ive
(
‰Void
, 
çl£
);

2495 
asCA¼ay
<
asCD©aTy³
> 
·¿m‘”Ty³s
;

2496 
asCA¼ay
<
asETy³Modif›rs
> 
šOutFÏgs
;

2497 
asCA¼ay
<
asCSŒšg
 *> 
deçuÉArgs
;

2500 
moduË
->
	`AddSütFunùiÚ
(
fe
->
idx
, 
funcId
, 
objTy³
->
Çme
.
	`Add»ssOf
(), 
»tuºTy³
, 
·¿m‘”Ty³s
.Add»ssOf(), 
šOutFÏgs
.Add»ssOf(), 
deçuÉArgs
.Add»ssOf(), (
asUINT
í¬am‘”Ty³s.
	`G‘L’gth
(), 
çl£
, objType);

2503 ifĞ
objTy³
->
beh
.
cÚ¡ruù
 )

2504 
’gše
->
sütFunùiÚs
[
objTy³
->
beh
.
cÚ¡ruù
]->
	`R–—£
();

2505 
objTy³
->
beh
.
cÚ¡ruù
 = 
funcId
;

2506 
objTy³
->
beh
.
cÚ¡ruùÜs
[0] = 
funcId
;

2507 
’gše
->
sütFunùiÚs
[
funcId
]->
	`AddRef
();

2511 
sFunùiÚDesütiÚ
 *
func
 = 
	`asNEW
(sFunctionDescription);

2512 ifĞ
func
 == 0 )

2518 
funùiÚs
.
	`PushLa¡
(
func
);

2520 
func
->
süt
 = 
fe
;

2521 
func
->
node
 = 0;

2522 
func
->
Çme
 = 
objTy³
->name;

2523 
func
->
objTy³
 = objType;

2524 
func
->
funcId
 = funcId;

2525 
func
->
ex¶ic™SigÇtu»
 = 0;

2528 
funcId
 = 
’gše
->
	`G‘NextSütFunùiÚId
();

2529 ifĞ
objTy³
->
beh
.
çùÜy
 )

2530 
’gše
->
sütFunùiÚs
[
objTy³
->
beh
.
çùÜy
]->
	`R–—£
();

2531 
objTy³
->
beh
.
çùÜy
 = 
funcId
;

2532 
objTy³
->
beh
.
çùÜ›s
[0] = 
funcId
;

2533 
»tuºTy³
 = 
asCD©aTy³
::
	`C»©eObjeùHªdË
(
objTy³
, 
çl£
);

2534 
moduË
->
	`AddSütFunùiÚ
(
fe
->
idx
, 
funcId
, 
objTy³
->
Çme
.
	`Add»ssOf
(), 
»tuºTy³
, 
·¿m‘”Ty³s
.Add»ssOf(), 
šOutFÏgs
.Add»ssOf(), 
deçuÉArgs
.Add»ssOf(), (
asUINT
í¬am‘”Ty³s.
	`G‘L’gth
(), 
çl£
);

2535 
funùiÚs
.
	`PushLa¡
(0);

2536 
asCComp”
 
	`comp”
(
’gše
);

2537 
comp”
.
	`CompeFaùÜy
(
this
, 
fe
, 
’gše
->
sütFunùiÚs
[
funcId
]);

2538 
’gše
->
sütFunùiÚs
[
funcId
]->
	`AddRef
();

2541 ifĞ
objTy³
->
æags
 & 
asOBJ_SHARED
 )

2542 
’gše
->
sütFunùiÚs
[
funcId
]->
isSh¬ed
 = 
Œue
;

2543 
	}
}

2545 
	gasCBud”
::
	$Regi¡”Enum
(
asCSütNode
 *
node
, 
asCSütCode
 *
fe
, 
asSNameS·û
 *
ns
)

2548 
boŞ
 
isSh¬ed
 = 
çl£
;

2549 
asCObjeùTy³
 *
exi¡šgSh¬edTy³
 = 0;

2550 
asCSütNode
 *
tmp
 = 
node
->
fœ¡Chd
;

2551 ifĞ
tmp
->
nodeTy³
 =ğ
¢Id’tif›r
 && 
fe
->
	`Tok’Equ®s
Ñmp->
tok’Pos
,mp->
tok’L’gth
, 
SHARED_TOKEN
) )

2553 
isSh¬ed
 = 
Œue
;

2554 
tmp
 =mp->
Ãxt
;

2558 
asCSŒšg
 
Çme
;

2559 
	`asASSERT
(
¢D©aTy³
 =ğ
tmp
->
nodeTy³
);

2560 
	`asASSERT
(
¢Id’tif›r
 =ğ
tmp
->
fœ¡Chd
->
nodeTy³
);

2561 
Çme
.
	`Assign
(&
fe
->
code
[
tmp
->
fœ¡Chd
->
tok’Pos
],mp->fœ¡Chd->
tok’L’gth
);

2563 ifĞ
isSh¬ed
 )

2566  
asUINT
 
n
 = 0;‚ < 
’gše
->
şassTy³s
.
	`G‘L’gth
();‚++ )

2568 
asCObjeùTy³
 *
o
 = 
’gše
->
şassTy³s
[
n
];

2569 ifĞ
o
 &&

2570 
o
->
	`IsSh¬ed
() &&

2571 (
o
->
æags
 & 
asOBJ_ENUM
) &&

2572 
o
->
Çme
 ==‚ame &&

2573 
o
->
ÇmeS·û
 =ğ
ns
 )

2575 
exi¡šgSh¬edTy³
 = 
o
;

2582 
r
 = 
	`CheckNameCÚæiù
(
Çme
.
	`Add»ssOf
(), 
tmp
->
fœ¡Chd
, 
fe
, 
ns
);

2583 ifĞ
asSUCCESS
 =ğ
r
 )

2585 
asCObjeùTy³
 *
¡
;

2587 ifĞ
exi¡šgSh¬edTy³
 )

2588 
¡
 = 
exi¡šgSh¬edTy³
;

2591 
¡
 = 
	`asNEW
(
asCObjeùTy³
)(
’gše
);

2592 ifĞ
¡
 == 0 )

2593  
asOUT_OF_MEMORY
;

2595 
¡
->
æags
 = 
asOBJ_ENUM
;

2596 ifĞ
isSh¬ed
 )

2597 
¡
->
æags
 |ğ
asOBJ_SHARED
;

2598 
¡
->
size
 = 4;

2599 
¡
->
Çme
 =‚ame;

2600 
¡
->
ÇmeS·û
 = 
ns
;

2602 
moduË
->
’umTy³s
.
	`PushLa¡
(
¡
);

2603 
¡
->
	`AddRef
();

2607 ifĞ!
exi¡šgSh¬edTy³
 )

2608 
’gše
->
şassTy³s
.
	`PushLa¡
(
¡
);

2611 
sCÏssDeş¬©iÚ
 *
deş
 = 
	`asNEW
(sClassDeclaration);

2612 ifĞ
deş
 == 0 )

2613  
asOUT_OF_MEMORY
;

2615 
deş
->
Çme
 =‚ame;

2616 
deş
->
süt
 = 
fe
;

2617 
deş
->
objTy³
 = 
¡
;

2618 
ÇmedTy³Deş¬©iÚs
.
	`PushLa¡
(
deş
);

2620 
asCD©aTy³
 
ty³
 = 
	`C»©eD©aTy³FromNode
(
tmp
, 
fe
, 
ns
);

2621 
	`asASSERT
(!
ty³
.
	`IsReã»nû
());

2624 
tmp
 =mp->
Ãxt
;

2625  
tmp
 )

2627 
	`asASSERT
(
¢Id’tif›r
 =ğ
tmp
->
nodeTy³
);

2629 
asCSŒšg
 
	`Çme
(&
fe
->
code
[
tmp
->
tok’Pos
],mp->
tok’L’gth
);

2631 ifĞ
exi¡šgSh¬edTy³
 )

2635 
boŞ
 
found
 = 
çl£
;

2636  
size_t
 
n
 = 0;‚ < 
¡
->
’umV®ues
.
	`G‘L’gth
();‚++ )

2637 ifĞ
¡
->
’umV®ues
[
n
]->
Çme
 ==‚ame )

2639 
found
 = 
Œue
;

2643 ifĞ!
found
 )

2645 
r
, 
c
;

2646 
fe
->
	`CÚv”tPosToRowCŞ
(
tmp
->
tok’Pos
, &
r
, &
c
);

2647 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
TXT_SHARED_DOESNT_MATCH_ORIGINAL
, 
r
, 
c
);

2651 
tmp
 =mp->
Ãxt
;

2652 ifĞ
tmp
 &&mp->
nodeTy³
 =ğ
¢Assignm’t
 )

2653 
tmp
 =mp->
Ãxt
;

2659 
r
 = 0;

2660  
size_t
 
n
 = 
globV¬ŸbËs
.
	`G‘L’gth
();‚-- > 0; )

2662 
sGlob®V¬ŸbËDesütiÚ
 *
gv¬
 = 
globV¬ŸbËs
[
n
];

2663 ifĞ
gv¬
->
d©©y³
 !ğ
ty³
 )

2666 ifĞ
gv¬
->
Çme
 ==‚ame &&

2667 
gv¬
->
´İ”ty
->
ÇmeS·û
 =ğ
ns
 )

2669 
r
 = 
asNAME_TAKEN
;

2673 ifĞ
asSUCCESS
 !ğ
r
 )

2675 
r
, 
c
;

2676 
fe
->
	`CÚv”tPosToRowCŞ
(
tmp
->
tok’Pos
, &
r
, &
c
);

2678 
asCSŒšg
 
¡r
;

2679 
¡r
.
	`FÜm©
(
TXT_NAME_CONFLICT_s_ALREADY_USED
, 
Çme
.
	`Add»ssOf
());

2680 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
¡r
.Add»ssOf(), 
r
, 
c
);

2682 
tmp
 =mp->
Ãxt
;

2683 ifĞ
tmp
 &&mp->
nodeTy³
 =ğ
¢Assignm’t
 )

2684 
tmp
 =mp->
Ãxt
;

2689 
asCSütNode
 *
a¢Node
 = 
tmp
->
Ãxt
;

2690 ifĞ
a¢Node
 && 
¢Assignm’t
 =ğa¢Node->
nodeTy³
 )

2691 
a¢Node
->
	`DiscÚÃùP¬’t
();

2693 
a¢Node
 = 0;

2696 
sGlob®V¬ŸbËDesütiÚ
 *
gv¬
 = 
	`asNEW
(sGlobalVariableDescription);

2697 ifĞ
gv¬
 == 0 )

2698  
asOUT_OF_MEMORY
;

2700 
globV¬ŸbËs
.
	`PushLa¡
(
gv¬
);

2702 
gv¬
->
süt
 = 
fe
;

2703 
gv¬
->
idNode
 = 0;

2704 
gv¬
->
ÃxtNode
 = 
a¢Node
;

2705 
gv¬
->
Çme
 =‚ame;

2706 
gv¬
->
d©©y³
 = 
ty³
;

2708 
gv¬
->
šdex
 = 0;

2709 
gv¬
->
isComped
 = 
çl£
;

2710 
gv¬
->
isPu»CÚ¡ªt
 = 
Œue
;

2711 
gv¬
->
isEnumV®ue
 = 
Œue
;

2712 
gv¬
->
cÚ¡ªtV®ue
 = 0xdeadbeef;

2716 
gv¬
->
´İ”ty
 = 
	`asNEW
(
asCGlob®Prİ”ty
);

2717 ifĞ
gv¬
->
´İ”ty
 == 0 )

2718  
asOUT_OF_MEMORY
;

2720 
gv¬
->
´İ”ty
->
Çme
 =‚ame;

2721 
gv¬
->
´İ”ty
->
ÇmeS·û
 = 
ns
;

2722 
gv¬
->
´İ”ty
->
ty³
 = gv¬->
d©©y³
;

2723 
gv¬
->
´İ”ty
->
id
 = 0;

2725 
tmp
 =mp->
Ãxt
;

2730 
node
->
	`De¡roy
(
’gše
);

2732  
r
;

2733 
	}
}

2735 
	gasCBud”
::
	$Regi¡”Ty³def
(
asCSütNode
 *
node
, 
asCSütCode
 *
fe
, 
asSNameS·û
 *
ns
)

2738 
asCSütNode
 *
tmp
 = 
node
->
fœ¡Chd
;

2739 
	`asASSERT
(
NULL
 !ğ
tmp
 && 
¢D©aTy³
 =ğtmp->
nodeTy³
);

2740 
asCD©aTy³
 
d©aTy³
;

2741 
d©aTy³
.
	`C»©ePrim™ive
(
tmp
->
tok’Ty³
, 
çl£
);

2742 
d©aTy³
.
	`S‘Tok’Ty³
(
tmp
->
tok’Ty³
);

2743 
tmp
 =mp->
Ãxt
;

2746 
	`asASSERT
(
NULL
 !ğ
tmp
 && NULL =ğtmp->
Ãxt
);

2747 
asCSŒšg
 
Çme
;

2748 
Çme
.
	`Assign
(&
fe
->
code
[
tmp
->
tok’Pos
],mp->
tok’L’gth
);

2751 
r
 = 
	`CheckNameCÚæiù
(
Çme
.
	`Add»ssOf
(), 
tmp
, 
fe
, 
ns
);

2753 
asCObjeùTy³
 *
¡
 = 0;

2754 ifĞ
asSUCCESS
 =ğ
r
 )

2757 
¡
 = 
	`asNEW
(
asCObjeùTy³
)(
’gše
);

2758 ifĞ
¡
 == 0 )

2759 
r
 = 
asOUT_OF_MEMORY
;

2762 ifĞ
asSUCCESS
 =ğ
r
 )

2764 
¡
->
æags
 = 
asOBJ_TYPEDEF
;

2765 
¡
->
size
 = 
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
();

2766 
¡
->
Çme
 =‚ame;

2767 
¡
->
ÇmeS·û
 = 
ns
;

2768 
¡
->
‹m¶©eSubTy³
 = 
d©aTy³
;

2770 
¡
->
	`AddRef
();

2772 
moduË
->
ty³Defs
.
	`PushLa¡
(
¡
);

2773 
’gše
->
şassTy³s
.
	`PushLa¡
(
¡
);

2776 
sCÏssDeş¬©iÚ
 *
deş
 = 
	`asNEW
(sClassDeclaration);

2777 ifĞ
deş
 == 0 )

2778 
r
 = 
asOUT_OF_MEMORY
;

2781 
deş
->
Çme
 =‚ame;

2782 
deş
->
süt
 = 
fe
;

2783 
deş
->
objTy³
 = 
¡
;

2784 
ÇmedTy³Deş¬©iÚs
.
	`PushLa¡
(
deş
);

2788 
node
->
	`De¡roy
(
’gše
);

2790  
r
;

2791 
	}
}

2793 
	gasCBud”
::
G‘P¬£dFunùiÚD‘as
(
asCSütNode
 *
node
, 
asCSütCode
 *
fe
, 
asCObjeùTy³
 *
objTy³
, 
asCSŒšg
 &
Çme
, 
asCD©aTy³
 &
»tuºTy³
, 
asCA¼ay
<asCD©aTy³> &
·¿m‘”Ty³s
,‡sCA¼ay<
asETy³Modif›rs
> &
šOutFÏgs
,‡sCA¼ay<asCSŒšg *> &
deçuÉArgs
, 
boŞ
 &
isCÚ¡M‘hod
, boŞ &
isCÚ¡ruùÜ
, boŞ &
isDe¡ruùÜ
, boŞ &
isPriv©e
, boŞ &
isOv”ride
, boŞ &
isFš®
, boŞ &
isSh¬ed
)

2795 
	gnode
 = 
node
->
fœ¡Chd
;

2798 
	gisPriv©e
 = 
çl£
;

2799 ifĞ
	gnode
->
	gtok’Ty³
 =ğ
‰Priv©e
 )

2801 
isPriv©e
 = 
Œue
;

2802 
	gnode
 = 
node
->
Ãxt
;

2806 
	gisSh¬ed
 = 
çl£
;

2807 ifĞ
	gnode
->
	gtok’Ty³
 =ğ
‰Id’tif›r
 && 
fe
->
Tok’Equ®s
(
node
->
tok’Pos
,‚ode->
tok’L’gth
, 
SHARED_TOKEN
) )

2809 
	gisSh¬ed
 = 
Œue
;

2810 
	gnode
 = 
node
->
Ãxt
;

2814 
	gisCÚ¡ruùÜ
 = 
çl£
;

2815 
	gisDe¡ruùÜ
 = 
çl£
;

2816 
asCSütNode
 *
	gn
 = 0;

2817 ifĞ
	gnode
->
	gnodeTy³
 =ğ
¢D©aTy³
 )

2818 
n
 = 
node
->
Ãxt
->next;

2822 ifĞ
	gnode
->
	gtok’Ty³
 =ğ
‰B™NÙ
 )

2824 
n
 = 
node
->
Ãxt
;

2825 
	gisDe¡ruùÜ
 = 
Œue
;

2829 
	gn
 = 
node
;

2830 
	gisCÚ¡ruùÜ
 = 
Œue
;

2833 
	gÇme
.
Assign
(&
fe
->
code
[
n
->
tok’Pos
],‚->
tok’L’gth
);

2836 ifĞ!
	gisCÚ¡ruùÜ
 && !
	gisDe¡ruùÜ
 )

2839 
	g»tuºTy³
 = 
C»©eD©aTy³FromNode
(
node
, 
fe
, 
’gše
->
ÇmeS·ûs
[0]);

2840 
	g»tuºTy³
 = 
ModifyD©aTy³FromNode
(
»tuºTy³
, 
node
->
Ãxt
, 
fe
, 0, 0);

2843 
	g»tuºTy³
 = 
asCD©aTy³
::
C»©ePrim™ive
(
‰Void
, 
çl£
);

2845 
	gisCÚ¡M‘hod
 = 
çl£
;

2846 
	gisFš®
 = 
çl£
;

2847 
	gisOv”ride
 = 
çl£
;

2849 ifĞ
	gobjTy³
 && 
	gn
->
	gÃxt
->next )

2851 
asCSütNode
 *
	gdecÜ©Ü
 = 
n
->
Ãxt
->next;

2854 ifĞ
	gdecÜ©Ü
->
	gtok’Ty³
 =ğ
‰CÚ¡
 )

2856 
isCÚ¡M‘hod
 = 
Œue
;

2857 
	gdecÜ©Ü
 = 
decÜ©Ü
->
Ãxt
;

2860  
	gdecÜ©Ü
 )

2862 ifĞ
	gdecÜ©Ü
->
	gtok’Ty³
 =ğ
‰Id’tif›r
 && 
fe
->
Tok’Equ®s
(
decÜ©Ü
->
tok’Pos
, decÜ©Ü->
tok’L’gth
, 
FINAL_TOKEN
) )

2863 
	gisFš®
 = 
Œue
;

2864 ifĞ
	gdecÜ©Ü
->
	gtok’Ty³
 =ğ
‰Id’tif›r
 && 
fe
->
Tok’Equ®s
(
decÜ©Ü
->
tok’Pos
, decÜ©Ü->
tok’L’gth
, 
OVERRIDE_TOKEN
) )

2865 
	gisOv”ride
 = 
Œue
;

2867 
	gdecÜ©Ü
 = 
decÜ©Ü
->
Ãxt
;

2872 
	gcouÁ
 = 0;

2873 
asCSütNode
 *
	gc
 = 
n
->
Ãxt
->
fœ¡Chd
;

2874  
	gc
 )

2876 
	gcouÁ
++;

2877 
	gc
 = 
c
->
Ãxt
->next;

2878 ifĞ
	gc
 && c->
	gnodeTy³
 =ğ
¢Id’tif›r
 )

2879 
c
 = c->
Ãxt
;

2880 ifĞ
	gc
 && c->
	gnodeTy³
 =ğ
¢Ex´essiÚ
 )

2881 
c
 = c->
Ãxt
;

2885 
	g·¿m‘”Ty³s
.
AÎoÿ‹
(
couÁ
, 
çl£
);

2886 
	gšOutFÏgs
.
AÎoÿ‹
(
couÁ
, 
çl£
);

2887 
	gdeçuÉArgs
.
AÎoÿ‹
(
couÁ
, 
çl£
);

2888 
	gn
 = 
n
->
Ãxt
->
fœ¡Chd
;

2889  
	gn
 )

2891 
asETy³Modif›rs
 
	gšOutFÏg
;

2893 
asCD©aTy³
 
	gty³
 = 
C»©eD©aTy³FromNode
(
n
, 
fe
, 
’gše
->
ÇmeS·ûs
[0]);

2894 
	gty³
 = 
ModifyD©aTy³FromNode
(
ty³
, 
n
->
Ãxt
, 
fe
, &
šOutFÏg
, 0);

2897 
	g·¿m‘”Ty³s
.
PushLa¡
(
ty³
);

2898 
	gšOutFÏgs
.
PushLa¡
(
šOutFÏg
);

2901 
	gn
 = 
n
->
Ãxt
->next;

2902 ifĞ
	gn
 &&‚->
	gnodeTy³
 =ğ
¢Id’tif›r
 )

2903 
n
 =‚->
Ãxt
;

2905 ifĞ
	gn
 &&‚->
	gnodeTy³
 =ğ
¢Ex´essiÚ
 )

2908 
asCSŒšg
 *
deçuÉArgSŒ
 = 
asNEW
(asCString);

2909 ifĞ
	gdeçuÉArgSŒ
 )

2910 *
	gdeçuÉArgSŒ
 = 
G‘CËªEx´essiÚSŒšg
(
n
, 
fe
);

2911 
	gdeçuÉArgs
.
PushLa¡
(
deçuÉArgSŒ
);

2913 
	gn
 = 
n
->
Ãxt
;

2916 
	gdeçuÉArgs
.
PushLa¡
(0);

2921 
asCSŒšg
 
	gasCBud”
::
	$G‘CËªEx´essiÚSŒšg
(
asCSütNode
 *
node
, 
asCSütCode
 *
fe
)

2923 
	`asASSERT
(
node
 &&‚ode->
nodeTy³
 =ğ
¢Ex´essiÚ
);

2925 
asCSŒšg
 
¡r
;

2926 
¡r
.
	`Assign
(
fe
->
code
 + 
node
->
tok’Pos
,‚ode->
tok’L’gth
);

2928 
asCSŒšg
 
ş—nSŒ
;

2929  
asUINT
 
n
 = 0;‚ < 
¡r
.
	`G‘L’gth
(); )

2931 
Ën
;

2932 
asETok’CÏss
 
tok
 = 
’gše
->
	`P¬£Tok’
(
¡r
.
	`Add»ssOf
(è+ 
n
, sŒ.
	`G‘L’gth
(è-‚, &
Ën
);

2933 ifĞ
tok
 !ğ
asTC_COMMENT
 &&ok !ğ
asTC_WHITESPACE
 )

2935 ifĞ
ş—nSŒ
.
	`G‘L’gth
() ) cleanStr += " ";

2936 
ş—nSŒ
.
	`CÚÿ‹Ç‹
(
¡r
.
	`Add»ssOf
(è+ 
n
, 
Ën
);

2938 
n
 +ğ
Ën
;

2941  
ş—nSŒ
;

2942 
	}
}

2944 #iâdeà
AS_NO_COMPILER


2945 
	gasCBud”
::
	$Regi¡”SütFunùiÚ
(
funcId
, 
asCSütNode
 *
node
, 
asCSütCode
 *
fe
, 
asCObjeùTy³
 *
objTy³
, 
boŞ
 
isIÁ”çû
, boŞ 
isGlob®FunùiÚ
, 
asSNameS·û
 *
ns
, boŞ 
isExi¡šgSh¬ed
)

2947 
asCSŒšg
 
Çme
;

2948 
asCD©aTy³
 
»tuºTy³
;

2949 
asCA¼ay
<
asCD©aTy³
> 
·¿m‘”Ty³s
;

2950 
asCA¼ay
<
asETy³Modif›rs
> 
šOutFÏgs
;

2951 
asCA¼ay
<
asCSŒšg
 *> 
deçuÉArgs
;

2952 
boŞ
 
isCÚ¡M‘hod
;

2953 
boŞ
 
isOv”ride
;

2954 
boŞ
 
isFš®
;

2955 
boŞ
 
isCÚ¡ruùÜ
;

2956 
boŞ
 
isDe¡ruùÜ
;

2957 
boŞ
 
isPriv©e
;

2958 
boŞ
 
isSh¬ed
;

2960 ifĞ
ns
 == 0 )

2961 
ns
 = 
’gše
->
ÇmeS·ûs
[0];

2963 
	`G‘P¬£dFunùiÚD‘as
(
node
, 
fe
, 
objTy³
, 
Çme
, 
»tuºTy³
, 
·¿m‘”Ty³s
, 
šOutFÏgs
, 
deçuÉArgs
, 
isCÚ¡M‘hod
, 
isCÚ¡ruùÜ
, 
isDe¡ruùÜ
, 
isPriv©e
, 
isOv”ride
, 
isFš®
, 
isSh¬ed
);

2965 ifĞ
isExi¡šgSh¬ed
 )

2967 
	`asASSERT
Ğ
objTy³
 );

2970 
boŞ
 
found
 = 
çl£
;

2971 ifĞ
isCÚ¡ruùÜ
 || 
isDe¡ruùÜ
 )

2974 
found
 = 
Œue
;

2978  
asUINT
 
n
 = 0;‚ < 
objTy³
->
m‘hods
.
	`G‘L’gth
();‚++ )

2980 
asCSütFunùiÚ
 *
func
 = 
’gše
->
sütFunùiÚs
[
objTy³
->
m‘hods
[
n
]];

2981 ifĞ
func
->
Çme
 ==‚ame &&

2982 
func
->
	`IsSigÇtu»Exû±NameEqu®
(
»tuºTy³
, 
·¿m‘”Ty³s
, 
šOutFÏgs
, 
objTy³
, 
isCÚ¡M‘hod
) )

2984 
found
 = 
Œue
;

2990 ifĞ!
found
 )

2992 
r
, 
c
;

2993 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

2994 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
TXT_SHARED_DOESNT_MATCH_ORIGINAL
, 
r
, 
c
);

2997 
node
->
	`De¡roy
(
’gše
);

3002 ifĞ!
isCÚ¡ruùÜ
 && !
isDe¡ruùÜ
 )

3004 ifĞ
objTy³
 )

3006 
	`CheckNameCÚæiùMemb”
(
objTy³
, 
Çme
.
	`Add»ssOf
(), 
node
, 
fe
, 
çl£
);

3008 ifĞ
Çme
 =ğ
objTy³
->name )

3010 
r
, 
c
;

3011 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

3012 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
TXT_METHOD_CANT_HAVE_NAME_OF_CLASS
, 
r
, 
c
);

3017 
	`CheckNameCÚæiù
(
Çme
.
	`Add»ssOf
(), 
node
, 
fe
, 
ns
);

3023 ifĞ
Çme
 !ğ
objTy³
->name )

3025 
r
, 
c
;

3026 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

3027 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
TXT_CONSTRUCTOR_NAME_ERROR
, 
r
, 
c
);

3030 ifĞ
isDe¡ruùÜ
 )

3031 
Çme
 = "~" +‚ame;

3034 
isExi¡šgSh¬ed
 = 
çl£
;

3035 ifĞ!
isIÁ”çû
 )

3037 
sFunùiÚDesütiÚ
 *
func
 = 
	`asNEW
(sFunctionDescription);

3038 ifĞ
func
 == 0 )

3039  
asOUT_OF_MEMORY
;

3041 
funùiÚs
.
	`PushLa¡
(
func
);

3043 
func
->
süt
 = 
fe
;

3044 
func
->
node
 =‚ode;

3045 
func
->
Çme
 =‚ame;

3046 
func
->
objTy³
 = objType;

3047 
func
->
funcId
 = funcId;

3048 
func
->
ex¶ic™SigÇtu»
 = 0;

3049 
func
->
isExi¡šgSh¬ed
 = 
çl£
;

3051 ifĞ
isSh¬ed
 )

3054  
asUINT
 
n
 = 0;‚ < 
’gše
->
sütFunùiÚs
.
	`G‘L’gth
();‚++ )

3056 
asCSütFunùiÚ
 *
f
 = 
’gše
->
sütFunùiÚs
[
n
];

3057 ifĞ
f
 &&

3058 
f
->
isSh¬ed
 &&

3059 
f
->
Çme
 ==‚ame &&

3060 
f
->
ÇmeS·û
 =ğ
ns
 &&

3061 
f
->
	`IsSigÇtu»Exû±NameEqu®
(
»tuºTy³
, 
·¿m‘”Ty³s
, 
šOutFÏgs
, 0, 
çl£
) )

3063 
funcId
 = 
func
->funcId = 
f
->
id
;

3064 
isExi¡šgSh¬ed
 = 
func
->isExi¡šgSh¬ed = 
Œue
;

3072 ifĞ
isDe¡ruùÜ
 && 
·¿m‘”Ty³s
.
	`G‘L’gth
() > 0 )

3074 
r
, 
c
;

3075 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

3077 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
TXT_DESTRUCTOR_MAY_NOT_HAVE_PARM
, 
r
, 
c
);

3081 ifĞ(
objTy³
 && objTy³->
	`IsSh¬ed
()è|| 
isSh¬ed
 )

3083 
asCObjeùTy³
 *
Ù
 = 
»tuºTy³
.
	`G‘ObjeùTy³
();

3084 ifĞ
Ù
 && !Ù->
	`IsSh¬ed
() )

3086 
r
, 
c
;

3087 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

3088 
asCSŒšg
 
msg
;

3089 
msg
.
	`FÜm©
(
TXT_SHARED_CANNOT_USE_NON_SHARED_TYPE_s
, 
Ù
->
Çme
.
	`Add»ssOf
());

3090 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
msg
.Add»ssOf(), 
r
, 
c
);

3093  
asUINT
 
p
 = 0;… < 
·¿m‘”Ty³s
.
	`G‘L’gth
(); ++p )

3095 
asCObjeùTy³
 *
Ù
 = 
·¿m‘”Ty³s
[
p
].
	`G‘ObjeùTy³
();

3096 ifĞ
Ù
 && !Ù->
	`IsSh¬ed
() )

3098 
r
, 
c
;

3099 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

3100 
asCSŒšg
 
msg
;

3101 
msg
.
	`FÜm©
(
TXT_SHARED_CANNOT_USE_NON_SHARED_TYPE_s
, 
Ù
->
Çme
.
	`Add»ssOf
());

3102 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
msg
.Add»ssOf(), 
r
, 
c
);

3108 
asCA¼ay
<> 
funcs
;

3109 
	`G‘FunùiÚDesütiÚs
(
Çme
.
	`Add»ssOf
(), 
funcs
, 
ns
);

3110 ifĞ
funcs
.
	`G‘L’gth
() )

3112  
asUINT
 
n
 = 0;‚ < 
funcs
.
	`G‘L’gth
(); ++n )

3114 
asCSütFunùiÚ
 *
func
 = 
	`G‘FunùiÚDesütiÚ
(
funcs
[
n
]);

3115 ifĞ
func
->
	`IsSigÇtu»Exû±NameAndR‘uºTy³Equ®
(
·¿m‘”Ty³s
, 
šOutFÏgs
, 
objTy³
, 
isCÚ¡M‘hod
) )

3117 
r
, 
c
;

3118 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

3120 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
TXT_FUNCTION_ALREADY_EXIST
, 
r
, 
c
);

3127 ifĞ
isExi¡šgSh¬ed
 )

3129 
asCSütFunùiÚ
 *
f
 = 
’gše
->
sütFunùiÚs
[
funcId
];

3130 
moduË
->
	`AddSütFunùiÚ
(
f
);

3131 
moduË
->
glob®FunùiÚs
.
	`PushLa¡
(
f
);

3132 
f
->
	`AddRef
();

3136 
moduË
->
	`AddSütFunùiÚ
(
fe
->
idx
, 
funcId
, 
Çme
.
	`Add»ssOf
(), 
»tuºTy³
, 
·¿m‘”Ty³s
.Add»ssOf(), 
šOutFÏgs
.Add»ssOf(), 
deçuÉArgs
.Add»ssOf(), (
asUINT
í¬am‘”Ty³s.
	`G‘L’gth
(), 
isIÁ”çû
, 
objTy³
, 
isCÚ¡M‘hod
, 
isGlob®FunùiÚ
, 
isPriv©e
, 
isFš®
, 
isOv”ride
, 
isSh¬ed
, 
ns
);

3140 
	`V®id©eDeçuÉArgs
(
fe
, 
node
, 
’gše
->
sütFunùiÚs
[
funcId
]);

3142 ifĞ
objTy³
 )

3144 
’gše
->
sütFunùiÚs
[
funcId
]->
	`AddRef
();

3145 ifĞ
isCÚ¡ruùÜ
 )

3147 
çùÜyId
 = 
’gše
->
	`G‘NextSütFunùiÚId
();

3148 ifĞ
·¿m‘”Ty³s
.
	`G‘L’gth
() == 0 )

3151 
’gše
->
sütFunùiÚs
[
objTy³
->
beh
.
cÚ¡ruù
]->
	`R–—£
();

3152 
objTy³
->
beh
.
cÚ¡ruù
 = 
funcId
;

3153 
objTy³
->
beh
.
cÚ¡ruùÜs
[0] = 
funcId
;

3156 
’gše
->
sütFunùiÚs
[
objTy³
->
beh
.
çùÜy
]->
	`R–—£
();

3157 
objTy³
->
beh
.
çùÜy
 = 
çùÜyId
;

3158 
objTy³
->
beh
.
çùÜ›s
[0] = 
çùÜyId
;

3162 
objTy³
->
beh
.
cÚ¡ruùÜs
.
	`PushLa¡
(
funcId
);

3165 
objTy³
->
beh
.
çùÜ›s
.
	`PushLa¡
(
çùÜyId
);

3169  
asUINT
 
n
 = 0;‚ < 
deçuÉArgs
.
	`G‘L’gth
();‚++ )

3170 ifĞ
deçuÉArgs
[
n
] )

3171 
deçuÉArgs
[
n
] = 
	`asNEW
(
asCSŒšg
)(*defaultArgs[n]);

3173 
asCD©aTy³
 
dt
 =‡sCD©aTy³::
	`C»©eObjeùHªdË
(
objTy³
, 
çl£
);

3174 
moduË
->
	`AddSütFunùiÚ
(
fe
->
idx
, 
çùÜyId
, 
Çme
.
	`Add»ssOf
(), 
dt
, 
·¿m‘”Ty³s
.Add»ssOf(), 
šOutFÏgs
.Add»ssOf(), 
deçuÉArgs
.Add»ssOf(), (
asUINT
í¬am‘”Ty³s.
	`G‘L’gth
(), 
çl£
);

3177 ifĞ
objTy³
->
æags
 & 
asOBJ_SHARED
 )

3178 
’gše
->
sütFunùiÚs
[
çùÜyId
]->
isSh¬ed
 = 
Œue
;

3181 
funùiÚs
.
	`PushLa¡
(0);

3184 
asCComp”
 
	`comp”
(
’gše
);

3185 
comp”
.
	`CompeFaùÜy
(
this
, 
fe
, 
’gše
->
sütFunùiÚs
[
çùÜyId
]);

3186 
’gše
->
sütFunùiÚs
[
çùÜyId
]->
	`AddRef
();

3188 ifĞ
isDe¡ruùÜ
 )

3189 
objTy³
->
beh
.
de¡ruù
 = 
funcId
;

3191 
objTy³
->
m‘hods
.
	`PushLa¡
(
funcId
);

3195 ifĞ
isIÁ”çû
 && 
node
 )

3197 
node
->
	`De¡roy
(
’gše
);

3201 
	}
}

3203 
	gasCBud”
::
	$Regi¡”SütFunùiÚW™hSigÇtu»
(
funcId
, 
asCSütNode
 *
node
, 
asCSütCode
 *
fe
, 
asCSŒšg
 &
Çme
, 
sEx¶ic™SigÇtu»
 *
sigÇtu»
, 
asCObjeùTy³
 *
objTy³
, 
boŞ
 
isIÁ”çû
, boŞ 
isGlob®FunùiÚ
, boŞ 
isPriv©e
, boŞ 
isCÚ¡
, boŞ 
isFš®
, boŞ 
isOv”ride
, boŞ 
Œ—tAsPrİ”ty
, 
asSNameS·û
 *
ns
)

3205 
boŞ
 
isCÚ¡ruùÜ
 = 
çl£
;

3206 
boŞ
 
isDe¡ruùÜ
 = 
çl£
;

3207 
asCA¼ay
<
asCD©aTy³
> &
·¿m‘”Ty³s
 = 
sigÇtu»
->
¬gTy³s
;

3208 
asCA¼ay
<
asETy³Modif›rs
> &
šOutFÏgs
 = 
sigÇtu»
->
¬gModif›rs
;

3209 
asCA¼ay
<
asCSŒšg
 *> 
deçuÉArgs
 = 
sigÇtu»
->defaultArgs;

3211 ifĞ
ns
 == 0 )

3212 
ns
 = 
’gše
->
ÇmeS·ûs
[0];

3214 ifĞ
objTy³
 && 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰Void
, 
çl£
è=ğ
sigÇtu»
->
»tuºTy³
 )

3216 ifĞ0 =ğ
Çme
.
	`Com·»
Ğ
objTy³
->name ) )

3217 
isCÚ¡ruùÜ
 = 
Œue
;

3218 ifĞ0 =ğ
Çme
.
	`Com·»
Ğ"~" + 
objTy³
->name ) )

3219 
isDe¡ruùÜ
 = 
Œue
;

3223 ifĞ!
isCÚ¡ruùÜ
 && !
isDe¡ruùÜ
 )

3225 ifĞ
objTy³
 )

3226 
	`CheckNameCÚæiùMemb”
(
objTy³
, 
Çme
.
	`Add»ssOf
(), 
node
, 
fe
, 
Œ—tAsPrİ”ty
);

3228 
	`CheckNameCÚæiù
(
Çme
.
	`Add»ssOf
(), 
node
, 
fe
, 
ns
);

3231 ifĞ
isIÁ”çû
 )

3233 
	`asASSERT
(!
isFš®
);

3234 
	`asASSERT
(!
isOv”ride
);

3238 
sFunùiÚDesütiÚ
 *
func
 = 
	`asNEW
(sFunctionDescription);

3239 ifĞ
func
 == 0 )

3240  
asOUT_OF_MEMORY
;

3242 
funùiÚs
.
	`PushLa¡
(
func
);

3244 
func
->
süt
 = 
fe
;

3245 
func
->
node
 =‚ode;

3246 
func
->
Çme
 =‚ame;

3247 
func
->
objTy³
 = objType;

3248 
func
->
funcId
 = funcId;

3249 
func
->
ex¶ic™SigÇtu»
 = 
sigÇtu»
;

3253 ifĞ
isDe¡ruùÜ
 && 
·¿m‘”Ty³s
.
	`G‘L’gth
() > 0 )

3255 
r
, 
c
;

3256 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

3258 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
TXT_DESTRUCTOR_MAY_NOT_HAVE_PARM
, 
r
, 
c
);

3262 ifĞ
objTy³
 && (objTy³->
æags
 & 
asOBJ_SHARED
) )

3264 
asCObjeùTy³
 *
Ù
 = 
sigÇtu»
->
»tuºTy³
.
	`G‘ObjeùTy³
();

3265 ifĞ
Ù
 && (Ù->
æags
 & 
asOBJ_SCRIPT_OBJECT
è&& !(Ù->æag & 
asOBJ_SHARED
) )

3267 
r
, 
c
;

3268 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

3269 
asCSŒšg
 
msg
;

3270 
msg
.
	`FÜm©
(
TXT_SHARED_CANNOT_USE_NON_SHARED_TYPE_s
, 
Ù
->
Çme
.
	`Add»ssOf
());

3271 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
msg
.Add»ssOf(), 
r
, 
c
);

3274  
asUINT
 
p
 = 0;… < 
·¿m‘”Ty³s
.
	`G‘L’gth
(); ++p )

3276 
asCObjeùTy³
 *
Ù
 = 
·¿m‘”Ty³s
[
p
].
	`G‘ObjeùTy³
();

3277 ifĞ
Ù
 && (Ù->
æags
 & 
asOBJ_SCRIPT_OBJECT
è&& !(Ù->æag & 
asOBJ_SHARED
) )

3279 
r
, 
c
;

3280 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

3281 
asCSŒšg
 
msg
;

3282 
msg
.
	`FÜm©
(
TXT_SHARED_CANNOT_USE_NON_SHARED_TYPE_s
, 
Ù
->
Çme
.
	`Add»ssOf
());

3283 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
msg
.Add»ssOf(), 
r
, 
c
);

3290 
asCA¼ay
<> 
funcs
;

3291 
	`G‘FunùiÚDesütiÚs
(
Çme
.
	`Add»ssOf
(), 
funcs
, 
ns
);

3292 ifĞ
funcs
.
	`G‘L’gth
() )

3294  
asUINT
 
n
 = 0;‚ < 
funcs
.
	`G‘L’gth
(); ++n )

3296 
asCSütFunùiÚ
 *
func
 = 
	`G‘FunùiÚDesütiÚ
(
funcs
[
n
]);

3298 ifĞ
·¿m‘”Ty³s
.
	`G‘L’gth
(è=ğ
func
->parameterTypes.GetLength() )

3300 
boŞ
 
m©ch
 = 
Œue
;

3301 ifĞ
func
->
objeùTy³
 !ğ
objTy³
 )

3303 
m©ch
 = 
çl£
;

3307  
asUINT
 
p
 = 0;… < 
·¿m‘”Ty³s
.
	`G‘L’gth
(); ++p )

3309 ifĞ
·¿m‘”Ty³s
[
p
] !ğ
func
->parameterTypes[p] )

3311 
m©ch
 = 
çl£
;

3316 ifĞ
m©ch
 )

3318 
r
, 
c
;

3319 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

3321 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
TXT_FUNCTION_ALREADY_EXIST
, 
r
, 
c
);

3329 
moduË
->
	`AddSütFunùiÚ
(
fe
->
idx
, 
funcId
, 
Çme
.
	`Add»ssOf
(), 
sigÇtu»
->
»tuºTy³
, 
·¿m‘”Ty³s
.Add»ssOf(), 
šOutFÏgs
.Add»ssOf(), 
deçuÉArgs
.Add»ssOf(), (
asUINT
í¬am‘”Ty³s.
	`G‘L’gth
(), 
isIÁ”çû
, 
objTy³
, 
isCÚ¡
, 
isGlob®FunùiÚ
, 
isPriv©e
, 
isFš®
, 
isOv”ride
);

3332 
	`V®id©eDeçuÉArgs
(
fe
, 
node
, 
’gše
->
sütFunùiÚs
[
funcId
]);

3334 ifĞ
objTy³
 )

3336 
’gše
->
sütFunùiÚs
[
funcId
]->
	`AddRef
();

3337 ifĞ
isCÚ¡ruùÜ
 )

3339 
çùÜyId
 = 
’gše
->
	`G‘NextSütFunùiÚId
();

3340 ifĞ
·¿m‘”Ty³s
.
	`G‘L’gth
() == 0 )

3343 
’gše
->
sütFunùiÚs
[
objTy³
->
beh
.
cÚ¡ruù
]->
	`R–—£
();

3344 
objTy³
->
beh
.
cÚ¡ruù
 = 
funcId
;

3345 
objTy³
->
beh
.
cÚ¡ruùÜs
[0] = 
funcId
;

3348 
’gše
->
sütFunùiÚs
[
objTy³
->
beh
.
çùÜy
]->
	`R–—£
();

3349 
objTy³
->
beh
.
çùÜy
 = 
çùÜyId
;

3350 
objTy³
->
beh
.
çùÜ›s
[0] = 
çùÜyId
;

3354 
objTy³
->
beh
.
cÚ¡ruùÜs
.
	`PushLa¡
(
funcId
);

3357 
objTy³
->
beh
.
çùÜ›s
.
	`PushLa¡
(
çùÜyId
);

3361  
asUINT
 
n
 = 0;‚ < 
deçuÉArgs
.
	`G‘L’gth
();‚++ )

3362 ifĞ
deçuÉArgs
[
n
] )

3363 
deçuÉArgs
[
n
] = 
	`asNEW
(
asCSŒšg
)(*defaultArgs[n]);

3365 
asCD©aTy³
 
dt
 =‡sCD©aTy³::
	`C»©eObjeùHªdË
(
objTy³
, 
çl£
);

3366 
moduË
->
	`AddSütFunùiÚ
(
fe
->
idx
, 
çùÜyId
, 
Çme
.
	`Add»ssOf
(), 
dt
, 
·¿m‘”Ty³s
.Add»ssOf(), 
šOutFÏgs
.Add»ssOf(), 
deçuÉArgs
.Add»ssOf(), (
asUINT
í¬am‘”Ty³s.
	`G‘L’gth
(), 
çl£
);

3369 
funùiÚs
.
	`PushLa¡
(0);

3372 
asCComp”
 
	`comp”
(
’gše
);

3373 
comp”
.
	`CompeFaùÜy
(
this
, 
fe
, 
’gše
->
sütFunùiÚs
[
çùÜyId
]);

3374 
’gše
->
sütFunùiÚs
[
çùÜyId
]->
	`AddRef
();

3376 ifĞ
isDe¡ruùÜ
 )

3377 
objTy³
->
beh
.
de¡ruù
 = 
funcId
;

3379 
objTy³
->
m‘hods
.
	`PushLa¡
(
funcId
);

3383 ifĞ
isIÁ”çû
 && 
node
 )

3385 
node
->
	`De¡roy
(
’gše
);

3389 
	}
}

3391 
	gasCBud”
::
	$Regi¡”Vœtu®Prİ”ty
(
asCSütNode
 *
node
, 
asCSütCode
 *
fe
, 
asCObjeùTy³
 *
objTy³
, 
boŞ
 
isIÁ”çû
, boŞ 
isGlob®FunùiÚ
, 
asSNameS·û
 *
ns
, boŞ 
isExi¡šgSh¬ed
)

3393 ifĞ
isExi¡šgSh¬ed
 )

3396 
node
->
	`De¡roy
(
’gše
);

3400 ifĞ
’gše
->
•
.
´İ”tyAcûssÜMode
 != 2 )

3402 
r
, 
c
;

3403 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

3404 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
TXT_PROPERTY_ACCESSOR_DISABLED
, 
r
, 
c
);

3405 
node
->
	`De¡roy
(
’gše
);

3409 ifĞ
ns
 == 0 )

3410 
ns
 = 
’gše
->
ÇmeS·ûs
[0];

3412 
boŞ
 
isPriv©e
 = 
çl£
;

3413 
asCSŒšg
 
emuÏ‹dName
;

3414 
asCD©aTy³
 
emuÏ‹dTy³
;

3416 
asCSütNode
 *
mašNode
 = 
node
;

3417 
node
 =‚ode->
fœ¡Chd
;

3419 ifĞ!
isGlob®FunùiÚ
 && 
node
->
tok’Ty³
 =ğ
‰Priv©e
 )

3421 
isPriv©e
 = 
Œue
;

3422 
node
 =‚ode->
Ãxt
;

3426 
emuÏ‹dTy³
 = 
	`C»©eD©aTy³FromNode
(
node
, 
fe
, 
’gše
->
ÇmeS·ûs
[0]);

3427 
emuÏ‹dTy³
 = 
	`ModifyD©aTy³FromNode
ÓmuÏ‹dTy³, 
node
->
Ãxt
, 
fe
, 0, 0);

3428 
node
 =‚ode->
Ãxt
->next;

3430 
emuÏ‹dName
.
	`Assign
(&
fe
->
code
[
node
->
tok’Pos
],‚ode->
tok’L’gth
);

3431 
node
 =‚ode->
Ãxt
;

3433  
node
 )

3435 
asCSütNode
 *
Ãxt
 = 
node
->next;

3436 
asCSütNode
 *
funcNode
 = 0;

3437 
sEx¶ic™SigÇtu»
 *
sigÇtu»
 = 0;

3438 
boŞ
 
sucûss
 = 
çl£
;

3439 
boŞ
 
isCÚ¡
 = 
çl£
;

3440 
boŞ
 
isFš®
 = 
çl£
;

3441 
boŞ
 
isOv”ride
 = 
çl£
;

3443 
asCSŒšg
 
Çme
;

3448 ifĞ
node
->
fœ¡Chd
->
nodeTy³
 =ğ
¢Id’tif›r
 && 
fe
->
	`Tok’Equ®s
Òode->fœ¡Chd->
tok’Pos
,‚ode->fœ¡Chd->
tok’L’gth
, 
GET_TOKEN
) )

3450 
funcNode
 = 
node
->
fœ¡Chd
->
Ãxt
;

3452 ifĞ
funcNode
 && funcNode->
tok’Ty³
 =ğ
‰CÚ¡
 )

3454 
isCÚ¡
 = 
Œue
;

3455 
funcNode
 = funcNode->
Ãxt
;

3458  
funcNode
 && funcNode->
nodeTy³
 !ğ
¢S‹m’tBlock
 )

3460 ifĞ
funcNode
->
tok’Ty³
 =ğ
‰Id’tif›r
 && 
fe
->
	`Tok’Equ®s
(funcNode->
tok’Pos
, funcNode->
tok’L’gth
, 
FINAL_TOKEN
) )

3461 
isFš®
 = 
Œue
;

3462 ifĞ
funcNode
->
tok’Ty³
 =ğ
‰Id’tif›r
 && 
fe
->
	`Tok’Equ®s
(funcNode->
tok’Pos
, funcNode->
tok’L’gth
, 
OVERRIDE_TOKEN
) )

3463 
isOv”ride
 = 
Œue
;

3465 
funcNode
 = funcNode->
Ãxt
;

3468 ifĞ
funcNode
 )

3469 
funcNode
->
	`DiscÚÃùP¬’t
();

3471 ifĞ
funcNode
 =ğ0 && (
objTy³
 =ğ0 || !objTy³->
	`IsIÁ”çû
()) )

3476 
r
, 
c
;

3477 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

3479 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
TXT_PROPERTY_ACCESSOR_MUST_BE_IMPLEMENTED
, 
r
, 
c
);

3482 
sigÇtu»
 = 
	`asNEW
(
sEx¶ic™SigÇtu»
);

3483 ifĞ
sigÇtu»
 == 0 )

3484  
asOUT_OF_MEMORY
;

3486 
sigÇtu»
->
»tuºTy³
 = 
emuÏ‹dTy³
;

3488 
Çme
 = "g‘_" + 
emuÏ‹dName
;

3489 
sucûss
 = 
Œue
;

3491 ifĞ
node
->
fœ¡Chd
->
nodeTy³
 =ğ
¢Id’tif›r
 && 
fe
->
	`Tok’Equ®s
Òode->fœ¡Chd->
tok’Pos
,‚ode->fœ¡Chd->
tok’L’gth
, 
SET_TOKEN
) )

3493 
funcNode
 = 
node
->
fœ¡Chd
->
Ãxt
;

3495 ifĞ
funcNode
 && funcNode->
tok’Ty³
 =ğ
‰CÚ¡
 )

3497 
isCÚ¡
 = 
Œue
;

3498 
funcNode
 = funcNode->
Ãxt
;

3501  
funcNode
 && funcNode->
nodeTy³
 !ğ
¢S‹m’tBlock
 )

3503 ifĞ
funcNode
->
tok’Ty³
 =ğ
‰Id’tif›r
 && 
fe
->
	`Tok’Equ®s
(funcNode->
tok’Pos
, funcNode->
tok’L’gth
, 
FINAL_TOKEN
) )

3504 
isFš®
 = 
Œue
;

3505 ifĞ
funcNode
->
tok’Ty³
 =ğ
‰Id’tif›r
 && 
fe
->
	`Tok’Equ®s
(funcNode->
tok’Pos
, funcNode->
tok’L’gth
, 
OVERRIDE_TOKEN
) )

3506 
isOv”ride
 = 
Œue
;

3508 
funcNode
 = funcNode->
Ãxt
;

3511 ifĞ
funcNode
 )

3512 
funcNode
->
	`DiscÚÃùP¬’t
();

3514 ifĞ
funcNode
 =ğ0 && (
objTy³
 =ğ0 || !objTy³->
	`IsIÁ”çû
()) )

3516 
r
, 
c
;

3517 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

3519 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
TXT_PROPERTY_ACCESSOR_MUST_BE_IMPLEMENTED
, 
r
, 
c
);

3522 
sigÇtu»
 = 
	`asNEW
(
sEx¶ic™SigÇtu»
)(1);

3523 ifĞ
sigÇtu»
 == 0 )

3524  
asOUT_OF_MEMORY
;

3526 
sigÇtu»
->
»tuºTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰Void
, 
çl£
);

3528 
sigÇtu»
->
¬gModif›rs
.
	`PushLa¡
(
asTM_NONE
);

3529 
sigÇtu»
->
¬gNames
.
	`PushLa¡
("value");

3530 
sigÇtu»
->
¬gTy³s
.
	`PushLa¡
(
emuÏ‹dTy³
);

3531 
sigÇtu»
->
deçuÉArgs
.
	`PushLa¡
(0);

3533 
Çme
 = "£t_" + 
emuÏ‹dName
;

3534 
sucûss
 = 
Œue
;

3538 
r
, 
c
;

3539 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

3541 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
TXT_UNRECOGNIZED_VIRTUAL_PROPERTY_NODE
, 
r
, 
c
);

3544 ifĞ
sucûss
 )

3545 
	`Regi¡”SütFunùiÚW™hSigÇtu»
(
’gše
->
	`G‘NextSütFunùiÚId
(), 
funcNode
, 
fe
, 
Çme
, 
sigÇtu»
, 
objTy³
, 
isIÁ”çû
, 
isGlob®FunùiÚ
, 
isPriv©e
, 
isCÚ¡
, 
isFš®
, 
isOv”ride
, 
Œue
, 
ns
);

3547 
node
 = 
Ãxt
;

3550 
mašNode
->
	`De¡roy
(
’gše
);

3553 
	}
}

3555 
	gasCBud”
::
	$Regi¡”ImpÜ‹dFunùiÚ
(
impÜtID
, 
asCSütNode
 *
node
, 
asCSütCode
 *
fe
, 
asSNameS·û
 *
ns
)

3558 
asCSütNode
 *
f
 = 
node
->
fœ¡Chd
;

3559 
asCSütNode
 *
n
 = 
f
->
fœ¡Chd
->
Ãxt
->next;

3562 
asCSŒšg
 
	`Çme
(&
fe
->
code
[
n
->
tok’Pos
],‚->
tok’L’gth
);

3563 
	`CheckNameCÚæiù
(
Çme
.
	`Add»ssOf
(), 
n
, 
fe
, 
ns
);

3566 
asCD©aTy³
 
»tuºTy³
;

3568 
»tuºTy³
 = 
	`C»©eD©aTy³FromNode
(
f
->
fœ¡Chd
, 
fe
, 
’gše
->
ÇmeS·ûs
[0]);

3569 
»tuºTy³
 = 
	`ModifyD©aTy³FromNode
Ô‘uºTy³, 
f
->
fœ¡Chd
->
Ãxt
, 
fe
, 0, 0);

3572 
couÁ
 = 0;

3573 
asCSütNode
 *
c
 = 
n
->
Ãxt
->
fœ¡Chd
;

3574  
c
 )

3576 
couÁ
++;

3577 
c
 = c->
Ãxt
->next;

3578 ifĞ
c
 && c->
nodeTy³
 =ğ
¢Id’tif›r
 )

3579 
c
 = c->
Ãxt
;

3582 
asCA¼ay
<
asCD©aTy³
> 
	`·¿m‘”Ty³s
(
couÁ
);

3583 
asCA¼ay
<
asETy³Modif›rs
> 
	`šOutFÏgs
(
couÁ
);

3584 
n
 =‚->
Ãxt
->
fœ¡Chd
;

3585  
n
 )

3587 
asETy³Modif›rs
 
šOutFÏg
;

3589 
asCD©aTy³
 
ty³
 = 
	`C»©eD©aTy³FromNode
(
n
, 
fe
, 
’gše
->
ÇmeS·ûs
[0]);

3590 
ty³
 = 
	`ModifyD©aTy³FromNode
Ñy³, 
n
->
Ãxt
, 
fe
, &
šOutFÏg
, 0);

3593 
·¿m‘”Ty³s
.
	`PushLa¡
(
ty³
);

3594 
šOutFÏgs
.
	`PushLa¡
(
šOutFÏg
);

3596 ifĞ
ty³
.
	`G‘Tok’Ty³
(è=ğ
‰Void
 )

3598 
r
, 
c
;

3599 
fe
->
	`CÚv”tPosToRowCŞ
(
n
->
tok’Pos
, &
r
, &
c
);

3600 
asCSŒšg
 
¡r
;

3601 
¡r
.
	`FÜm©
(
TXT_PARAMETER_CANT_BE_s
, 
ty³
.FÜm©().
	`Add»ssOf
());

3602 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
¡r
.Add»ssOf(), 
r
, 
c
);

3607 
n
 =‚->
Ãxt
->next;

3608 ifĞ
n
 &&‚->
nodeTy³
 =ğ
¢Id’tif›r
 )

3609 
n
 =‚->
Ãxt
;

3613 
asCA¼ay
<> 
funcs
;

3614 
	`G‘FunùiÚDesütiÚs
(
Çme
.
	`Add»ssOf
(), 
funcs
, 
ns
);

3615 ifĞ
funcs
.
	`G‘L’gth
() )

3617  
asUINT
 
n
 = 0;‚ < 
funcs
.
	`G‘L’gth
(); ++n )

3619 
asCSütFunùiÚ
 *
func
 = 
	`G‘FunùiÚDesütiÚ
(
funcs
[
n
]);

3621 ifĞ
·¿m‘”Ty³s
.
	`G‘L’gth
(è=ğ
func
->parameterTypes.GetLength() )

3623 
boŞ
 
m©ch
 = 
Œue
;

3624  
asUINT
 
p
 = 0;… < 
·¿m‘”Ty³s
.
	`G‘L’gth
(); ++p )

3626 ifĞ
·¿m‘”Ty³s
[
p
] !ğ
func
->parameterTypes[p] )

3628 
m©ch
 = 
çl£
;

3633 ifĞ
m©ch
 )

3635 
r
, 
c
;

3636 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

3638 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
TXT_FUNCTION_ALREADY_EXIST
, 
r
, 
c
);

3646 
n
 = 
node
->
fœ¡Chd
->
Ãxt
;

3647 
asCSŒšg
 
moduËName
;

3648 
moduËName
.
	`Assign
(&
fe
->
code
[
n
->
tok’Pos
+1],‚->
tok’L’gth
-2);

3650 
node
->
	`De¡roy
(
’gše
);

3654 
moduË
->
	`AddImpÜ‹dFunùiÚ
(
impÜtID
, 
Çme
.
	`Add»ssOf
(), 
»tuºTy³
, 
·¿m‘”Ty³s
.Add»ssOf(), 
šOutFÏgs
.Add»ssOf(), (
asUINT
í¬am‘”Ty³s.
	`G‘L’gth
(), 
moduËName
);

3657 
	}
}

3660 
asCSütFunùiÚ
 *
	gasCBud”
::
	$G‘FunùiÚDesütiÚ
(
id
)

3664 ifĞ(
id
 & 0xFFFF0000) == 0 )

3665  
’gše
->
sütFunùiÚs
[
id
];

3667  
’gše
->
impÜ‹dFunùiÚs
[
id
 & 0xFFFF]->
impÜ‹dFunùiÚSigÇtu»
;

3668 
	}
}

3670 
	gasCBud”
::
G‘FunùiÚDesütiÚs
(cÚ¡ *
Çme
, 
asCA¼ay
<> &
funcs
, 
asSNameS·û
 *
ns
)

3678 
asUINT
 
	gn
;

3679  
	gn
 = 0;‚ < 
	gmoduË
->
	gsütFunùiÚs
.
G‘L’gth
();‚++ )

3681 
asCSütFunùiÚ
 *
	gf
 = 
moduË
->
sütFunùiÚs
[
n
];

3682 ifĞ
	gf
->
	gÇme
 =ğ
Çme
 &&

3683 
f
->
ÇmeS·û
 =ğ
ns
 &&

3684 
f
->
objeùTy³
 == 0 )

3685 
funcs
.
PushLa¡
(
f
->
id
);

3688  
	gn
 = 0;‚ < 
	gmoduË
->
	gbšdInfÜm©iÚs
.
G‘L’gth
();‚++ )

3690 ifĞ
	gmoduË
->
	gbšdInfÜm©iÚs
[
n
]->
	gimpÜ‹dFunùiÚSigÇtu»
->
	gÇme
 =ğ
Çme
 )

3691 
funcs
.
PushLa¡
(
moduË
->
bšdInfÜm©iÚs
[
n
]->
impÜ‹dFunùiÚSigÇtu»
->
id
);

3694  
	gn
 = 0;‚ < 
	g’gše
->
	g»gi¡”edGlob®Funcs
.
G‘L’gth
();‚++ )

3696 
asCSütFunùiÚ
 *
	gf
 = 
’gše
->
»gi¡”edGlob®Funcs
[
n
];

3697 ifĞ
	gf
 &&

3698 
	gf
->
	gfuncTy³
 =ğ
asFUNC_SYSTEM
 &&

3699 
f
->
objeùTy³
 == 0 &&

3700 
f
->
ÇmeS·û
 =ğ
ns
 &&

3701 
f
->
Çme
 ==‚ame )

3704 ifĞ
moduË
->
acûssMask
 & 
f
->accessMask )

3706 
funcs
.
PushLa¡
(
f
->
id
);

3712 
	gasCBud”
::
G‘ObjeùM‘hodDesütiÚs
(cÚ¡ *
Çme
, 
asCObjeùTy³
 *
objeùTy³
, 
asCA¼ay
<> &
m‘hods
, 
boŞ
 
objIsCÚ¡
, cÚ¡ 
asCSŒšg
 &
scİe
)

3714 ifĞ
	gscİe
 != "" )

3717  
objeùTy³
 && objeùTy³->
Çme
 !ğ
scİe
 )

3718 
objeùTy³
 = objeùTy³->
d”ivedFrom
;

3721 ifĞ
	gobjeùTy³
 == 0 )

3726 ifĞ
	gobjIsCÚ¡
 )

3729  
asUINT
 
	gn
 = 0;‚ < 
	gobjeùTy³
->
	gm‘hods
.
G‘L’gth
();‚++ )

3731 ifĞ
	g’gše
->
	gsütFunùiÚs
[
objeùTy³
->
m‘hods
[
n
]]->
	gÇme
 =ğ
Çme
 &&

3732 
’gše
->
sütFunùiÚs
[
objeùTy³
->
m‘hods
[
n
]]->
isR—dOÆy
 )

3735 ifĞ
scİe
 == "" )

3736 
m‘hods
.
PushLa¡
(
’gše
->
sütFunùiÚs
[
objeùTy³
->m‘hods[
n
]]->
id
);

3739 
asCSütFunùiÚ
 *
	gvœtFunc
 = 
’gše
->
sütFunùiÚs
[
objeùTy³
->
m‘hods
[
n
]];

3740 
asCSütFunùiÚ
 *
	g»®Func
 = 
objeùTy³
->
vœtu®FunùiÚTabË
[
vœtFunc
->
vfTabËIdx
];

3741 
	gm‘hods
.
PushLa¡
(
»®Func
->
id
);

3749  
asUINT
 
	gn
 = 0;‚ < 
	gobjeùTy³
->
	gm‘hods
.
G‘L’gth
();‚++ )

3751 ifĞ
	g’gše
->
	gsütFunùiÚs
[
objeùTy³
->
m‘hods
[
n
]]->
	gÇme
 =ğ
Çme
 )

3754 ifĞ
scİe
 == "" )

3755 
m‘hods
.
PushLa¡
(
’gše
->
sütFunùiÚs
[
objeùTy³
->m‘hods[
n
]]->
id
);

3758 
asCSütFunùiÚ
 *
	gvœtFunc
 = 
’gše
->
sütFunùiÚs
[
objeùTy³
->
m‘hods
[
n
]];

3759 
asCSütFunùiÚ
 *
	g»®Func
 = 
objeùTy³
->
vœtu®FunùiÚTabË
[
vœtFunc
->
vfTabËIdx
];

3760 
	gm‘hods
.
PushLa¡
(
»®Func
->
id
);

3767 
	gasCBud”
::
	$Wr™eInfo
(cÚ¡ *
süŠame
, cÚ¡ *
mes§ge
, 
r
, 
c
, 
boŞ
 
´e
)

3770 ifĞ
´e
 )

3772 
´eMes§ge
.
isS‘
 = 
Œue
;

3773 
´eMes§ge
.
c
 = c;

3774 
´eMes§ge
.
r
 =„;

3775 
´eMes§ge
.
mes§ge
 = message;

3779 
´eMes§ge
.
isS‘
 = 
çl£
;

3780 
’gše
->
	`Wr™eMes§ge
(
süŠame
, 
r
, 
c
, 
asMSGTYPE_INFORMATION
, 
mes§ge
);

3782 
	}
}

3784 
	gasCBud”
::
	$Wr™eE¼Ü
(cÚ¡ *
süŠame
, cÚ¡ *
mes§ge
, 
r
, 
c
)

3786 
numE¼Üs
++;

3789 ifĞ
´eMes§ge
.
isS‘
 )

3790 
	`Wr™eInfo
(
süŠame
, 
´eMes§ge
.
mes§ge
.
	`Add»ssOf
(),…»Mes§ge.
r
,…»Mes§ge.
c
, 
çl£
);

3792 
’gše
->
	`Wr™eMes§ge
(
süŠame
, 
r
, 
c
, 
asMSGTYPE_ERROR
, 
mes§ge
);

3793 
	}
}

3795 
	gasCBud”
::
	$Wr™eW¬nšg
(cÚ¡ *
süŠame
, cÚ¡ *
mes§ge
, 
r
, 
c
)

3797 
numW¬nšgs
++;

3800 ifĞ
´eMes§ge
.
isS‘
 )

3801 
	`Wr™eInfo
(
süŠame
, 
´eMes§ge
.
mes§ge
.
	`Add»ssOf
(),…»Mes§ge.
r
,…»Mes§ge.
c
, 
çl£
);

3803 
’gše
->
	`Wr™eMes§ge
(
süŠame
, 
r
, 
c
, 
asMSGTYPE_WARNING
, 
mes§ge
);

3804 
	}
}

3806 
asCSŒšg
 
	gasCBud”
::
	$G‘ScİeFromNode
(
asCSütNode
 *
node
, 
asCSütCode
 *
süt
,‡sCSütNod**
Ãxt
)

3808 
asCSŒšg
 
scİe
;

3809 
asCSütNode
 *
¢
 = 
node
;

3810 ifĞ
¢
->
tok’Ty³
 =ğ
‰Scİe
 )

3812 
scİe
 = "::";

3813 
¢
 = sn->
Ãxt
;

3816  
¢
 && sn->
Ãxt
 && sn->Ãxt->
tok’Ty³
 =ğ
‰Scİe
 )

3818 
asCSŒšg
 
tmp
;

3819 
tmp
.
	`Assign
(&
süt
->
code
[
¢
->
tok’Pos
], sn->
tok’L’gth
);

3820 ifĞ
scİe
 != "" && scope != "::" )

3821 
scİe
 += "::";

3822 
scİe
 +ğ
tmp
;

3823 
¢
 = sn->
Ãxt
->next;

3826 ifĞ
Ãxt
 )

3827 *
Ãxt
 = 
¢
;

3829  
scİe
;

3830 
	}
}

3832 
asCD©aTy³
 
	gasCBud”
::
	$C»©eD©aTy³FromNode
(
asCSütNode
 *
node
, 
asCSütCode
 *
fe
, 
asSNameS·û
 *
im¶ic™Name¥aû
, 
boŞ
 
acû±HªdËFÜScİe
, 
asCObjeùTy³
 *
cu¼’tTy³
)

3834 
	`asASSERT
(
node
->
nodeTy³
 =ğ
¢D©aTy³
);

3836 
asCD©aTy³
 
dt
;

3838 
asCSütNode
 *
n
 = 
node
->
fœ¡Chd
;

3840 
boŞ
 
isCÚ¡
 = 
çl£
;

3841 
boŞ
 
isIm¶ic™HªdË
 = 
çl£
;

3842 ifĞ
n
->
tok’Ty³
 =ğ
‰CÚ¡
 )

3844 
isCÚ¡
 = 
Œue
;

3845 
n
 =‚->
Ãxt
;

3849 
asCSŒšg
 
scİe
 = 
	`G‘ScİeFromNode
(
n
, 
fe
, &n);

3850 
asSNameS·û
 *
ns
 = 
im¶ic™Name¥aû
;

3851 ifĞ
scİe
 == "::" )

3852 
ns
 = 
’gše
->
ÇmeS·ûs
[0];

3853 ifĞ
scİe
 != "" )

3855 
ns
 = 
’gše
->
	`FšdNameS·û
(
scİe
.
	`Add»ssOf
());

3856 ifĞ
ns
 == 0 )

3858 
asCSŒšg
 
msg
;

3859 
msg
.
	`FÜm©
(
TXT_NAMESPACE_s_DOESNT_EXIST
, 
scİe
.
	`Add»ssOf
());

3860 
r
, 
c
;

3861 
fe
->
	`CÚv”tPosToRowCŞ
(
n
->
tok’Pos
, &
r
, &
c
);

3862 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
msg
.Add»ssOf(), 
r
, 
c
);

3864 
dt
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ
, 
çl£
);

3865  
dt
;

3869 ifĞ
n
->
tok’Ty³
 =ğ
‰Id’tif›r
 )

3871 
asCSŒšg
 
¡r
;

3872 
¡r
.
	`Assign
(&
fe
->
code
[
n
->
tok’Pos
],‚->
tok’L’gth
);

3874 
asCObjeùTy³
 *
Ù
 = 0;

3879 ifĞ
cu¼’tTy³
 && (cu¼’tTy³->
æags
 & 
asOBJ_TEMPLATE
è&& 
¡r
 =ğcu¼’tTy³->
‹m¶©eSubTy³
.
	`G‘ObjeùTy³
()->
Çme
 )

3880 
Ù
 = 
cu¼’tTy³
->
‹m¶©eSubTy³
.
	`G‘ObjeùTy³
();

3882 ifĞ
Ù
 == 0 )

3883 
Ù
 = 
	`G‘ObjeùTy³
(
¡r
.
	`Add»ssOf
(), 
ns
);

3884 ifĞ
Ù
 =ğ0 && !
moduË
 && 
cu¼’tTy³
 )

3885 
Ù
 = 
	`G‘ObjeùTy³FromTy³sKnownByObjeù
(
¡r
.
	`Add»ssOf
(), 
cu¼’tTy³
);

3887 ifĞ
Ù
 )

3889 ifĞ
Ù
->
æags
 & 
asOBJ_IMPLICIT_HANDLE
 )

3890 
isIm¶ic™HªdË
 = 
Œue
;

3893 ifĞ!
moduË
 || (moduË->
acûssMask
 & 
Ù
->accessMask) )

3895 if(
asOBJ_TYPEDEF
 =ğ(
Ù
->
æags
 &‡sOBJ_TYPEDEF))

3899 
dt
 = 
Ù
->
‹m¶©eSubTy³
;

3900 
dt
.
	`MakeR—dOÆy
(
isCÚ¡
);

3904 ifĞ
Ù
->
æags
 & 
asOBJ_TEMPLATE
 )

3906 
n
 =‚->
Ãxt
;

3914 
asCD©aTy³
 
subTy³
 = 
	`C»©eD©aTy³FromNode
(
n
, 
fe
, 
’gše
->
ÇmeS·ûs
[0], 
çl£
, 
moduË
 ? 0 : 
Ù
);

3915 ifĞ
subTy³
.
	`G‘ObjeùTy³
(è!ğ
Ù
->
‹m¶©eSubTy³
.GetObjectType() )

3919 
asCObjeùTy³
 *
ÙIn¡ªû
 = 
’gše
->
	`G‘Tem¶©eIn¡ªûTy³
(
Ù
, 
subTy³
);

3921 ifĞ!
ÙIn¡ªû
 )

3923 
asCSŒšg
 
msg
;

3924 
msg
.
	`FÜm©
(
TXT_CANNOT_INSTANCIATE_TEMPLATE_s_WITH_s
, 
Ù
->
Çme
.
	`Add»ssOf
(), 
subTy³
.Format().AddressOf());

3925 
r
, 
c
;

3926 
fe
->
	`CÚv”tPosToRowCŞ
(
n
->
tok’Pos
, &
r
, &
c
);

3927 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
msg
.Add»ssOf(), 
r
, 
c
);

3930 
Ù
 = 
ÙIn¡ªû
;

3935 ifĞ
Ù
 )

3936 
dt
 = 
asCD©aTy³
::
	`C»©eObjeù
(
Ù
, 
isCÚ¡
);

3938 
dt
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ
, 
isCÚ¡
);

3943 
asCSŒšg
 
msg
;

3944 
msg
.
	`FÜm©
(
TXT_TYPE_s_NOT_AVAILABLE_FOR_MODULE
, (cÚ¡ *)
¡r
.
	`Add»ssOf
());

3946 
r
, 
c
;

3947 
fe
->
	`CÚv”tPosToRowCŞ
(
n
->
tok’Pos
, &
r
, &
c
);

3949 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
msg
.Add»ssOf(), 
r
, 
c
);

3951 
dt
.
	`S‘Tok’Ty³
(
‰IÁ
);

3954 ifĞ
Ù
 == 0 )

3957 
asCSütFunùiÚ
 *
funcdef
 = 
	`G‘FuncDef
(
¡r
.
	`Add»ssOf
());

3959 ifĞ
funcdef
 )

3961 
dt
 = 
asCD©aTy³
::
	`C»©eFuncDef
(
funcdef
);

3963 ifĞ
funcdef
 == 0 )

3965 
asCSŒšg
 
msg
;

3966 
msg
.
	`FÜm©
(
TXT_IDENTIFIER_s_NOT_DATA_TYPE
, (cÚ¡ *)
¡r
.
	`Add»ssOf
());

3968 
r
, 
c
;

3969 
fe
->
	`CÚv”tPosToRowCŞ
(
n
->
tok’Pos
, &
r
, &
c
);

3971 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
msg
.Add»ssOf(), 
r
, 
c
);

3973 
dt
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ
, 
isCÚ¡
);

3974  
dt
;

3981 
dt
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
n
->
tok’Ty³
, 
isCÚ¡
);

3985 
n
 =‚->
Ãxt
;

3986  
n
 && (n->
tok’Ty³
 =ğ
‰O³nB¿ck‘
 ||‚->tok’Ty³ =ğ
‰HªdË
) )

3988 ifĞ
n
->
tok’Ty³
 =ğ
‰O³nB¿ck‘
 )

3991 ifĞ!
dt
.
	`CªBeIn¡ªcŸ‹d
() )

3993 
r
, 
c
;

3994 
fe
->
	`CÚv”tPosToRowCŞ
(
n
->
tok’Pos
, &
r
, &
c
);

3996 
asCSŒšg
 
¡r
;

3998 
¡r
.
	`FÜm©
(
TXT_DATA_TYPE_CANT_BE_s
, 
dt
.FÜm©().
	`Add»ssOf
());

4000 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
¡r
.Add»ssOf(), 
r
, 
c
);

4004 ifĞ
dt
.
	`MakeA¼ay
(
’gše
) < 0 )

4006 
r
, 
c
;

4007 
fe
->
	`CÚv”tPosToRowCŞ
(
n
->
tok’Pos
, &
r
, &
c
);

4008 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
TXT_NO_DEFAULT_ARRAY_TYPE
, 
r
, 
c
);

4015 ifĞ
dt
.
	`MakeHªdË
(
Œue
, 
acû±HªdËFÜScİe
) < 0 )

4017 
r
, 
c
;

4018 
fe
->
	`CÚv”tPosToRowCŞ
(
n
->
tok’Pos
, &
r
, &
c
);

4019 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
TXT_OBJECT_HANDLE_NOT_SUPPORTED
, 
r
, 
c
);

4023 
n
 =‚->
Ãxt
;

4026 ifĞ
isIm¶ic™HªdË
 )

4029 ifĞ
dt
.
	`MakeHªdË
(
Œue
, 
acû±HªdËFÜScİe
) < 0 )

4031 
r
, 
c
;

4032 
fe
->
	`CÚv”tPosToRowCŞ
(
n
->
tok’Pos
, &
r
, &
c
);

4033 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
TXT_OBJECT_HANDLE_NOT_SUPPORTED
, 
r
, 
c
);

4037  
dt
;

4038 
	}
}

4040 
asCD©aTy³
 
	gasCBud”
::
	$ModifyD©aTy³FromNode
(cÚ¡ 
asCD©aTy³
 &
ty³
, 
asCSütNode
 *
node
, 
asCSütCode
 *
fe
, 
asETy³Modif›rs
 *
šOutFÏgs
, 
boŞ
 *
autoHªdË
)

4042 
asCD©aTy³
 
dt
 = 
ty³
;

4044 ifĞ
šOutFÏgs
 ) *šOutFÏg ğ
asTM_NONE
;

4047 
asCSütNode
 *
n
 = 
node
->
fœ¡Chd
;

4048 ifĞ
n
 &&‚->
tok’Ty³
 =ğ
‰Amp
 )

4050 
dt
.
	`MakeReã»nû
(
Œue
);

4051 
n
 =‚->
Ãxt
;

4053 ifĞ
n
 )

4055 ifĞ
šOutFÏgs
 )

4057 ifĞ
n
->
tok’Ty³
 =ğ
‰In
 )

4058 *
šOutFÏgs
 = 
asTM_INREF
;

4059 ifĞ
n
->
tok’Ty³
 =ğ
‰Out
 )

4060 *
šOutFÏgs
 = 
asTM_OUTREF
;

4061 ifĞ
n
->
tok’Ty³
 =ğ
‰InOut
 )

4062 *
šOutFÏgs
 = 
asTM_INOUTREF
;

4064 
	`asASSERT
(
çl£
);

4067 
n
 =‚->
Ãxt
;

4071 ifĞ
šOutFÏgs
 )

4072 *
šOutFÏgs
 = 
asTM_INOUTREF
;

4075 ifĞ!
’gše
->
•
.
®lowUn§ãReã»nûs
 &&

4076 
šOutFÏgs
 && *šOutFÏg =ğ
asTM_INOUTREF
 )

4079 ifĞ!
dt
.
	`IsObjeù
(è|| dt.
	`IsObjeùHªdË
(è|| !((dt.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_NOCOUNT
è|| (dt.G‘ObjeùTy³()->
beh
.
add»f
 && dt.G‘ObjeùTy³()->beh.
»Ëa£
)) )

4081 
r
, 
c
;

4082 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
fœ¡Chd
->
tok’Pos
, &
r
, &
c
);

4083 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
TXT_ONLY_OBJECTS_MAY_USE_REF_INOUT
, 
r
, 
c
);

4088 ifĞ
autoHªdË
 ) *autoHªdË = 
çl£
;

4090 ifĞ
n
 &&‚->
tok’Ty³
 =ğ
‰Plus
 )

4093 ifĞ
dt
.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_NOCOUNT
 )

4095 
r
, 
c
;

4096 
fe
->
	`CÚv”tPosToRowCŞ
(
node
->
fœ¡Chd
->
tok’Pos
, &
r
, &
c
);

4097 
	`Wr™eE¼Ü
(
fe
->
Çme
.
	`Add»ssOf
(), 
TXT_AUTOHANDLE_CANNOT_BE_USED_FOR_NOCOUNT
, 
r
, 
c
);

4100 ifĞ
autoHªdË
 ) *autoHªdË = 
Œue
;

4103  
dt
;

4104 
	}
}

4106 
asCObjeùTy³
 *
	gasCBud”
::
	$G‘ObjeùTy³
(cÚ¡ *
ty³
, 
asSNameS·û
 *
ns
)

4108 
asCObjeùTy³
 *
Ù
 = 
’gše
->
	`G‘ObjeùTy³
(
ty³
, 
ns
);

4109 ifĞ!
Ù
 && 
moduË
 )

4110 
Ù
 = 
moduË
->
	`G‘ObjeùTy³
(
ty³
, 
ns
);

4112  
Ù
;

4113 
	}
}

4117 
boŞ
 
	gasCBud”
::
	$DÛsTy³Exi¡
(cÚ¡ *
ty³
)

4119 
asUINT
 
n
;

4124  
n
 = 0;‚ < 
’gše
->
objeùTy³s
.
	`G‘L’gth
();‚++ )

4125 ifĞ
’gše
->
objeùTy³s
[
n
] &&

4126 
’gše
->
objeùTy³s
[
n
]->
Çme
 =ğ
ty³
 )

4127  
Œue
;

4129  
n
 = 0;‚ < 
’gše
->
»gi¡”edFuncDefs
.
	`G‘L’gth
();‚++ )

4130 ifĞ
’gše
->
»gi¡”edFuncDefs
[
n
]->
Çme
 =ğ
ty³
 )

4131  
Œue
;

4134 ifĞ
moduË
 )

4136  
n
 = 0;‚ < 
moduË
->
şassTy³s
.
	`G‘L’gth
();‚++ )

4137 ifĞ
moduË
->
şassTy³s
[
n
]->
Çme
 =ğ
ty³
 )

4138  
Œue
;

4140  
n
 = 0;‚ < 
moduË
->
’umTy³s
.
	`G‘L’gth
();‚++ )

4141 ifĞ
moduË
->
’umTy³s
[
n
]->
Çme
 =ğ
ty³
 )

4142  
Œue
;

4144  
n
 = 0;‚ < 
moduË
->
ty³Defs
.
	`G‘L’gth
();‚++ )

4145 ifĞ
moduË
->
ty³Defs
[
n
]->
Çme
 =ğ
ty³
 )

4146  
Œue
;

4148  
asUINT
 
n
 = 0;‚ < 
moduË
->
funcDefs
.
	`G‘L’gth
();‚++ )

4149 ifĞ
moduË
->
funcDefs
[
n
]->
Çme
 =ğ
ty³
 )

4150  
Œue
;

4153  
çl£
;

4154 
	}
}

4156 
asCObjeùTy³
 *
	gasCBud”
::
	$G‘ObjeùTy³FromTy³sKnownByObjeù
(cÚ¡ *
ty³
, 
asCObjeùTy³
 *
cu¼’tTy³
)

4158 ifĞ
cu¼’tTy³
->
Çme
 =ğ
ty³
 )

4159  
cu¼’tTy³
;

4161 
asUINT
 
n
;

4163  
n
 = 0;‚ < 
cu¼’tTy³
->
´İ”t›s
.
	`G‘L’gth
();‚++ )

4164 ifĞ
cu¼’tTy³
->
´İ”t›s
[
n
]->
ty³
.
	`G‘ObjeùTy³
() &&

4165 
cu¼’tTy³
->
´İ”t›s
[
n
]->
ty³
.
	`G‘ObjeùTy³
()->
Çme
 ==ype )

4166  
cu¼’tTy³
->
´İ”t›s
[
n
]->
ty³
.
	`G‘ObjeùTy³
();

4168  
n
 = 0;‚ < 
cu¼’tTy³
->
m‘hods
.
	`G‘L’gth
();‚++ )

4170 
asCSütFunùiÚ
 *
func
 = 
’gše
->
sütFunùiÚs
[
cu¼’tTy³
->
m‘hods
[
n
]];

4171 ifĞ
func
->
»tuºTy³
.
	`G‘ObjeùTy³
() &&

4172 
func
->
»tuºTy³
.
	`G‘ObjeùTy³
()->
Çme
 =ğ
ty³
 )

4173  
func
->
»tuºTy³
.
	`G‘ObjeùTy³
();

4175  
asUINT
 
f
 = 0; f < 
func
->
·¿m‘”Ty³s
.
	`G‘L’gth
(); f++ )

4176 ifĞ
func
->
·¿m‘”Ty³s
[
f
].
	`G‘ObjeùTy³
() &&

4177 
func
->
·¿m‘”Ty³s
[
f
].
	`G‘ObjeùTy³
()->
Çme
 =ğ
ty³
 )

4178  
func
->
·¿m‘”Ty³s
[
f
].
	`G‘ObjeùTy³
();

4182 
	}
}

4184 
asCSütFunùiÚ
 *
	gasCBud”
::
	$G‘FuncDef
(cÚ¡ *
ty³
)

4186  
asUINT
 
n
 = 0;‚ < 
’gše
->
»gi¡”edFuncDefs
.
	`G‘L’gth
();‚++ )

4188 ifĞ
’gše
->
»gi¡”edFuncDefs
[
n
]->
Çme
 =ğ
ty³
 )

4189  
’gše
->
»gi¡”edFuncDefs
[
n
];

4191 ifĞ
moduË
 )

4193  
asUINT
 
n
 = 0;‚ < 
moduË
->
funcDefs
.
	`G‘L’gth
();‚++ )

4194 ifĞ
moduË
->
funcDefs
[
n
]->
Çme
 =ğ
ty³
 )

4195  
moduË
->
funcDefs
[
n
];

4199 
	}
}

4201 #iâdeà
AS_NO_COMPILER


4203 
	gasCBud”
::
	$G‘EnumV®ueFromObjeùTy³
(
asCObjeùTy³
 *
objTy³
, cÚ¡ *
Çme
, 
asCD©aTy³
 &
outDt
, 
asDWORD
 &
outV®ue
)

4205 ifĞ!
objTy³
 || !(objTy³->
æags
 & 
asOBJ_ENUM
) )

4208  
asUINT
 
n
 = 0;‚ < 
objTy³
->
’umV®ues
.
	`G‘L’gth
(); ++n )

4210 ifĞ
objTy³
->
’umV®ues
[
n
]->
Çme
 ==‚ame )

4212 
outDt
 = 
asCD©aTy³
::
	`C»©eObjeù
(
objTy³
, 
Œue
);

4213 
outV®ue
 = 
objTy³
->
’umV®ues
[
n
]->
v®ue
;

4219 
	}
}

4221 
	gasCBud”
::
	$G‘EnumV®ue
(cÚ¡ *
Çme
, 
asCD©aTy³
 &
outDt
, 
asDWORD
 &
outV®ue
, 
asSNameS·û
 *
ns
)

4223 
boŞ
 
found
 = 
çl£
;

4226 
asUINT
 
t
;

4227  
t
 = 0; < 
’gše
->
objeùTy³s
.
	`G‘L’gth
();++ )

4229 
asCObjeùTy³
 *
Ù
 = 
’gše
->
objeùTy³s
[
t
];

4230 ifĞ
ns
 !ğ
Ù
->
ÇmeS·û
 ) ;

4232 ifĞ
	`G‘EnumV®ueFromObjeùTy³
(
Ù
, 
Çme
, 
outDt
, 
outV®ue
) )

4234 ifĞ!
found
 )

4235 
found
 = 
Œue
;

4244  
t
 = 0; < 
moduË
->
’umTy³s
.
	`G‘L’gth
();++ )

4246 
asCObjeùTy³
 *
Ù
 = 
moduË
->
’umTy³s
[
t
];

4247 ifĞ
ns
 !ğ
Ù
->
ÇmeS·û
 ) ;

4249 ifĞ
	`G‘EnumV®ueFromObjeùTy³
(
Ù
, 
Çme
, 
outDt
, 
outV®ue
) )

4251 ifĞ!
found
 )

4252 
found
 = 
Œue
;

4261 ifĞ
found
 )

4266 
	}
}

4270 
	gEND_AS_NAMESPACE


	@../src/script/as_bytecode.cpp

38 
	~<¡dio.h
>

40 
	~"as_cÚfig.h
"

42 #iâdeà
AS_NO_COMPILER


44 
	~"as_by‹code.h
"

45 
	~"as_debug.h
"

46 
	~"as_¬¿y.h
"

47 
	~"as_¡ršg.h
"

48 
	~"as_sü‹ngše.h
"

50 
BEGIN_AS_NAMESPACE


52 
	gasCBy‹Code
::
	$asCBy‹Code
(
asCSütEngše
 *
’gše
)

54 
fœ¡
 = 0;

55 
Ï¡
 = 0;

56 
Ïrge¡SckU£d
 = -1;

58 
this
->
’gše
 =ƒngine;

59 
	}
}

61 
	gasCBy‹Code
::~
	$asCBy‹Code
()

63 
	`CË¬AÎ
();

64 
	}
}

66 
	gasCBy‹Code
::
	$Fš®ize
()

69 
	`Po¡Proûss
();

72 ifĞ
’gše
->
•
.
İtimizeBy‹Code
 )

73 
	`O±imize
();

76 
	`ResŞveJumpAdd»s£s
();

79 
	`ExŒaùLšeNumb”s
();

80 
	}
}

82 
	gasCBy‹Code
::
	$CË¬AÎ
()

84 
cBy‹In¡ruùiÚ
 *
d–
 = 
fœ¡
;

86  
d–
 )

88 
fœ¡
 = 
d–
->
Ãxt
;

89 
’gše
->
memÜyMgr
.
	`F»eBy‹In¡ruùiÚ
(
d–
);

90 
d–
 = 
fœ¡
;

93 
fœ¡
 = 0;

94 
Ï¡
 = 0;

96 
lšeNumb”s
.
	`S‘L’gth
(0);

98 
Ïrge¡SckU£d
 = -1;

100 
‹mpÜ¬yV¬ŸbËs
.
	`S‘L’gth
(0);

101 
	}
}

103 
	gasCBy‹Code
::
In£¹IfNÙExi¡s
(
asCA¼ay
<> &
v¬s
, 
v¬
)

105 ifĞ!
	gv¬s
.
Exi¡s
(
v¬
) )

106 
	gv¬s
.
PushLa¡
(
v¬
);

109 
	gasCBy‹Code
::
G‘V¬sU£d
(
asCA¼ay
<> &
v¬s
)

111 
cBy‹In¡ruùiÚ
 *
cu¼
 = 
fœ¡
;

112  
	gcu¼
 )

114 ifĞ
	gasBCInfo
[
cu¼
->
İ
].
	gty³
 =ğ
asBCTYPE_wW_rW_rW_ARG
 )

116 
In£¹IfNÙExi¡s
(
v¬s
, 
cu¼
->
wArg
[0]);

117 
In£¹IfNÙExi¡s
(
v¬s
, 
cu¼
->
wArg
[1]);

118 
In£¹IfNÙExi¡s
(
v¬s
, 
cu¼
->
wArg
[2]);

120 ifĞ
	gasBCInfo
[
cu¼
->
İ
].
	gty³
 =ğ
asBCTYPE_rW_ARG
 ||

121 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_ARG
 ||

122 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_W_ARG
 ||

123 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_rW_DW_ARG
 ||

124 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_DW_ARG
 ||

125 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_QW_ARG
 ||

126 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_rW_W_DW_ARG
 )

128 
In£¹IfNÙExi¡s
(
v¬s
, 
cu¼
->
wArg
[0]);

130 ifĞ
	gasBCInfo
[
cu¼
->
İ
].
	gty³
 =ğ
asBCTYPE_wW_rW_ARG
 ||

131 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_rW_rW_ARG
 ||

132 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_rW_DW_ARG
 )

134 
In£¹IfNÙExi¡s
(
v¬s
, 
cu¼
->
wArg
[0]);

135 
In£¹IfNÙExi¡s
(
v¬s
, 
cu¼
->
wArg
[1]);

137 ifĞ
	gcu¼
->
	gİ
 =ğ
asBC_LßdThisR
 )

139 
In£¹IfNÙExi¡s
(
v¬s
, 0);

142 
	gcu¼
 = 
cu¼
->
Ãxt
;

146 
boŞ
 
	gasCBy‹Code
::
	$IsV¬U£d
(
off£t
)

148 
cBy‹In¡ruùiÚ
 *
cu¼
 = 
fœ¡
;

149  
cu¼
 )

152 ifĞ
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_rW_rW_ARG
 )

154 ifĞ
cu¼
->
wArg
[0] =ğ
off£t
 || curr->wArg[1] == offset || curr->wArg[2] == offset )

155  
Œue
;

157 ifĞ
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_rW_ARG
 ||

158 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_ARG
 ||

159 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_W_ARG
 ||

160 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_rW_DW_ARG
 ||

161 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_DW_ARG
 ||

162 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_QW_ARG
 ||

163 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_rW_W_DW_ARG
 )

165 ifĞ
cu¼
->
wArg
[0] =ğ
off£t
 )

166  
Œue
;

168 ifĞ
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_rW_ARG
 ||

169 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_rW_rW_ARG
 ||

170 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_rW_DW_ARG
 )

172 ifĞ
cu¼
->
wArg
[0] =ğ
off£t
 || curr->wArg[1] == offset )

173  
Œue
;

175 ifĞ
cu¼
->
İ
 =ğ
asBC_LßdThisR
 )

177 ifĞ
off£t
 == 0 )

178  
Œue
;

181 
cu¼
 = cu¼->
Ãxt
;

184  
çl£
;

185 
	}
}

187 
	gasCBy‹Code
::
	$ExchªgeV¬
(
ŞdOff£t
, 
ÃwOff£t
)

189 
	`asASSERT
(
ŞdOff£t
 != 0);

191 
cBy‹In¡ruùiÚ
 *
cu¼
 = 
fœ¡
;

192  
cu¼
 )

195 ifĞ
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_rW_rW_ARG
 )

197 ifĞ
cu¼
->
wArg
[0] =ğ
ŞdOff£t
 )

198 
cu¼
->
wArg
[0] = ()
ÃwOff£t
;

199 ifĞ
cu¼
->
wArg
[1] =ğ
ŞdOff£t
 )

200 
cu¼
->
wArg
[1] = ()
ÃwOff£t
;

201 ifĞ
cu¼
->
wArg
[2] =ğ
ŞdOff£t
 )

202 
cu¼
->
wArg
[2] = ()
ÃwOff£t
;

204 ifĞ
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_rW_ARG
 ||

205 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_ARG
 ||

206 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_W_ARG
 ||

207 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_rW_DW_ARG
 ||

208 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_DW_ARG
 ||

209 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_QW_ARG
 )

211 ifĞ
cu¼
->
wArg
[0] =ğ
ŞdOff£t
 )

212 
cu¼
->
wArg
[0] = ()
ÃwOff£t
;

214 ifĞ
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_rW_ARG
 ||

215 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_rW_rW_ARG
 )

217 ifĞ
cu¼
->
wArg
[0] =ğ
ŞdOff£t
 )

218 
cu¼
->
wArg
[0] = ()
ÃwOff£t
;

219 ifĞ
cu¼
->
wArg
[1] =ğ
ŞdOff£t
 )

220 
cu¼
->
wArg
[1] = ()
ÃwOff£t
;

223 
cu¼
 = cu¼->
Ãxt
;

225 
	}
}

227 
	gasCBy‹Code
::
AddP©h
(
asCA¼ay
<
cBy‹In¡ruùiÚ
 *> &
·ths
, cBy‹In¡ruùiÚ *
š¡r
, 
¡ackSize
)

229 ifĞ
	gš¡r
->
	gm¬ked
 )

232 
asASSERT
(
š¡r
->
¡ackSize
 == stackSize);

237 
	gš¡r
->
	gm¬ked
 = 
Œue
;

238 
	gš¡r
->
	g¡ackSize
 = 
¡ackSize
;

239 
	g·ths
.
PushLa¡
(
š¡r
);

243 
boŞ
 
	gasCBy‹Code
::
	$IsCombš©iÚ
(
cBy‹In¡ruùiÚ
 *
cu¼
, 
asEBCIn¡r
 
bc1
,‡sEBCIn¡¸
bc2
)

245 ifĞ
cu¼
->
İ
 =ğ
bc1
 && cu¼->
Ãxt
 && cu¼->Ãxt->İ =ğ
bc2
 )

246  
Œue
;

248  
çl£
;

249 
	}
}

251 
boŞ
 
	gasCBy‹Code
::
	$IsCombš©iÚ
(
cBy‹In¡ruùiÚ
 *
cu¼
, 
asEBCIn¡r
 
bc1
,‡sEBCIn¡¸
bc2
,‡sEBCIn¡¸
bc3
)

253 ifĞ
cu¼
->
İ
 =ğ
bc1
 &&

254 
cu¼
->
Ãxt
 && cu¼->Ãxt->
İ
 =ğ
bc2
 &&

255 
cu¼
->
Ãxt
->Ãxˆ&& cu¼->Ãxt->Ãxt->
İ
 =ğ
bc3
 )

256  
Œue
;

258  
çl£
;

259 
	}
}

261 
cBy‹In¡ruùiÚ
 *
	gasCBy‹Code
::
	$ChªgeFœ¡D–‘eNext
(
cBy‹In¡ruùiÚ
 *
cu¼
, 
asEBCIn¡r
 
bc
)

263 
cu¼
->
İ
 = 
bc
;

265 ifĞ
cu¼
->
Ãxt
 ) 
	`D–‘eIn¡ruùiÚ
(curr->next);

268 ifĞ
cu¼
->
´ev
 )

269  
cu¼
->
´ev
;

271  
cu¼
;

272 
	}
}

274 
cBy‹In¡ruùiÚ
 *
	gasCBy‹Code
::
	$D–‘eFœ¡ChªgeNext
(
cBy‹In¡ruùiÚ
 *
cu¼
, 
asEBCIn¡r
 
bc
)

276 
	`asASSERT
Ğ
cu¼
->
Ãxt
 );

278 
cBy‹In¡ruùiÚ
 *
š¡r
 = 
cu¼
->
Ãxt
;

279 
š¡r
->
İ
 = 
bc
;

281 
	`D–‘eIn¡ruùiÚ
(
cu¼
);

284 ifĞ
š¡r
->
´ev
 )

285  
š¡r
->
´ev
;

287  
š¡r
;

288 
	}
}

290 
	gasCBy‹Code
::
	$In£¹BefÜe
(
cBy‹In¡ruùiÚ
 *
befÜe
, cBy‹In¡ruùiÚ *
š¡r
)

292 
	`asASSERT
(
š¡r
->
Ãxt
 == 0);

293 
	`asASSERT
(
š¡r
->
´ev
 == 0);

295 ifĞ
befÜe
->
´ev
 ) befÜe->´ev->
Ãxt
 = 
š¡r
;

296 
š¡r
->
´ev
 = 
befÜe
->prev;

297 
befÜe
->
´ev
 = 
š¡r
;

298 
š¡r
->
Ãxt
 = 
befÜe
;

300 ifĞ
fœ¡
 =ğ
befÜe
 ) fœ¡ = 
š¡r
;

301 
	}
}

303 
	gasCBy‹Code
::
	$RemoveIn¡ruùiÚ
(
cBy‹In¡ruùiÚ
 *
š¡r
)

305 ifĞ
š¡r
 =ğ
fœ¡
 ) fœ¡ = fœ¡->
Ãxt
;

306 ifĞ
š¡r
 =ğ
Ï¡
 )†a¡ =†a¡->
´ev
;

308 ifĞ
š¡r
->
´ev
 ) in¡r->´ev->
Ãxt
 = instr->next;

309 ifĞ
š¡r
->
Ãxt
 ) in¡r->Ãxt->
´ev
 = instr->prev;

311 
š¡r
->
Ãxt
 = 0;

312 
š¡r
->
´ev
 = 0;

313 
	}
}

315 
boŞ
 
	gasCBy‹Code
::
	$CªBeSw­³d
(
cBy‹In¡ruùiÚ
 *
cu¼
)

317 ifĞ!
cu¼
 || !cu¼->
Ãxt
 || !cu¼->Ãxt->Ãxˆè 
çl£
;

318 ifĞ
cu¼
->
Ãxt
->Ãxt->
İ
 !ğ
asBC_Sw­PŒ
 )  
çl£
;

320 
cBy‹In¡ruùiÚ
 *
Ãxt
 = 
cu¼
->next;

322 ifĞ
cu¼
->
İ
 !ğ
asBC_PshNuÎ
 &&

323 
cu¼
->
İ
 !ğ
asBC_PshVPŒ
 &&

324 
cu¼
->
İ
 !ğ
asBC_PSF
 )

325  
çl£
;

327 ifĞ
Ãxt
->
İ
 !ğ
asBC_PshNuÎ
 &&

328 
Ãxt
->
İ
 !ğ
asBC_PshVPŒ
 &&

329 
Ãxt
->
İ
 !ğ
asBC_PSF
 )

330  
çl£
;

332  
Œue
;

333 
	}
}

335 
cBy‹In¡ruùiÚ
 *
	gasCBy‹Code
::
	$GoBack
(
cBy‹In¡ruùiÚ
 *
cu¼
)

338 ifĞ!
cu¼
 )  0;

339 ifĞ
cu¼
->
´ev
 ) curr = curr->prev;

340 ifĞ
cu¼
->
´ev
 ) curr = curr->prev;

341  
cu¼
;

342 
	}
}

344 
boŞ
 
	gasCBy‹Code
::
	$Po¡pÚeIn™OfTemp
(
cBy‹In¡ruùiÚ
 *
cu¼
, cBy‹In¡ruùiÚ **
Ãxt
)

347 ifĞ(
cu¼
->
İ
 !ğ
asBC_S‘V4
 && cu¼->İ !ğ
asBC_S‘V8
) ||

348 !
	`IsTempÜ¬y
(
cu¼
->
wArg
[0]èè 
çl£
;

352 
cBy‹In¡ruùiÚ
 *
u£
 = 
cu¼
->
Ãxt
;

353  
u£
 )

355 ifĞ
	`IsTempV¬R—dByIn¡r
(
u£
, 
cu¼
->
wArg
[0]) )

358 ifĞ
	`IsTempV¬Ov”wr™‹nByIn¡r
(
u£
, 
cu¼
->
wArg
[0]) )

359  
çl£
;

361 ifĞ
	`IsIn¡rJmpOrLab–
(
u£
) )

362  
çl£
;

364 
u£
 = u£->
Ãxt
;

367 ifĞ
u£
 && u£->
´ev
 !ğ
cu¼
 )

369 *
Ãxt
 = 
cu¼
->next;

372 
	`RemoveIn¡ruùiÚ
(
cu¼
);

373 
	`In£¹BefÜe
(
u£
, 
cu¼
);

376 
cBy‹In¡ruùiÚ
 *
‹mp
;

377 ifĞ
	`RemoveUnu£dV®ue
(
cu¼
, &
‹mp
) )

379 *
Ãxt
 = 
	`GoBack
(*next);

380  
Œue
;

384 
	`RemoveIn¡ruùiÚ
(
cu¼
);

385 
	`In£¹BefÜe
(*
Ãxt
, 
cu¼
);

388  
çl£
;

389 
	}
}

391 
boŞ
 
	gasCBy‹Code
::
	$RemoveUnu£dV®ue
(
cBy‹In¡ruùiÚ
 *
cu¼
, cBy‹In¡ruùiÚ **
Ãxt
)

396 ifĞ(
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_rW_rW_ARG
 ||

397 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_rW_ARG
 ||

398 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_rW_DW_ARG
 ||

399 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_ARG
 ||

400 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_DW_ARG
 ||

401 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_QW_ARG
) &&

402 
	`IsTempÜ¬y
(
cu¼
->
wArg
[0]) &&

403 !
	`IsTempV¬R—d
(
cu¼
, cu¼->
wArg
[0]) &&

404 
cu¼
->
İ
 !ğ
asBC_FREE
 )

406 ifĞ
cu¼
->
İ
 =ğ
asBC_LdGRdR4
 && 
	`IsTempRegU£d
(curr) )

408 
cu¼
->
İ
 = 
asBC_LDG
;

409 *
Ãxt
 = 
	`GoBack
(
cu¼
);

410  
Œue
;

413 *
Ãxt
 = 
	`GoBack
(
	`D–‘eIn¡ruùiÚ
(
cu¼
));

414  
Œue
;

419 ifĞ
cu¼
->
İ
 =ğ
asBC_S‘V4
 &&

420 
cu¼
->
Ãxt
 &&

421 (
cu¼
->
Ãxt
->
İ
 =ğ
asBC_CMPi
 ||

422 
cu¼
->
Ãxt
->
İ
 =ğ
asBC_CMPf
 ||

423 
cu¼
->
Ãxt
->
İ
 =ğ
asBC_CMPu
) &&

424 
cu¼
->
wArg
[0] =ğcu¼->
Ãxt
->wArg[1] &&

425 (
	`IsTempÜ¬y
(
cu¼
->
wArg
[0]) &&

426 !
	`IsTempV¬R—d
(
cu¼
->
Ãxt
, cu¼->
wArg
[0])) )

428 ifĞ
cu¼
->
Ãxt
->
İ
 =ğ
asBC_CMPi
 ) cu¼->Ãxt->İ = 
asBC_CMPIi
;

429 ifĞ
cu¼
->
Ãxt
->
İ
 =ğ
asBC_CMPf
 ) cu¼->Ãxt->İ = 
asBC_CMPIf
;

430 ifĞ
cu¼
->
Ãxt
->
İ
 =ğ
asBC_CMPu
 ) cu¼->Ãxt->İ = 
asBC_CMPIu
;

431 
cu¼
->
Ãxt
->
size
 = 
asBCTy³Size
[
asBCInfo
[
asBC_CMPIi
].
ty³
];

432 
cu¼
->
Ãxt
->
¬g
 = curr->arg;

433 *
Ãxt
 = 
	`GoBack
(
	`D–‘eIn¡ruùiÚ
(
cu¼
));

434  
Œue
;

438 ifĞ
cu¼
->
İ
 =ğ
asBC_S‘V4
 &&

439 
cu¼
->
Ãxt
 &&

440 (
cu¼
->
Ãxt
->
İ
 =ğ
asBC_ADDi
 ||

441 
cu¼
->
Ãxt
->
İ
 =ğ
asBC_SUBi
 ||

442 
cu¼
->
Ãxt
->
İ
 =ğ
asBC_MULi
 ||

443 
cu¼
->
Ãxt
->
İ
 =ğ
asBC_ADDf
 ||

444 
cu¼
->
Ãxt
->
İ
 =ğ
asBC_SUBf
 ||

445 
cu¼
->
Ãxt
->
İ
 =ğ
asBC_MULf
) &&

446 
cu¼
->
wArg
[0] =ğcu¼->
Ãxt
->wArg[2] &&

447 (
cu¼
->
Ãxt
->
wArg
[0] == curr->wArg[0] ||

448 (
	`IsTempÜ¬y
(
cu¼
->
wArg
[0]) &&

449 !
	`IsTempV¬R—d
(
cu¼
->
Ãxt
, cu¼->
wArg
[0]))) )

451 ifĞ
cu¼
->
Ãxt
->
İ
 =ğ
asBC_ADDi
 ) cu¼->Ãxt->İ = 
asBC_ADDIi
;

452 ifĞ
cu¼
->
Ãxt
->
İ
 =ğ
asBC_SUBi
 ) cu¼->Ãxt->İ = 
asBC_SUBIi
;

453 ifĞ
cu¼
->
Ãxt
->
İ
 =ğ
asBC_MULi
 ) cu¼->Ãxt->İ = 
asBC_MULIi
;

454 ifĞ
cu¼
->
Ãxt
->
İ
 =ğ
asBC_ADDf
 ) cu¼->Ãxt->İ = 
asBC_ADDIf
;

455 ifĞ
cu¼
->
Ãxt
->
İ
 =ğ
asBC_SUBf
 ) cu¼->Ãxt->İ = 
asBC_SUBIf
;

456 ifĞ
cu¼
->
Ãxt
->
İ
 =ğ
asBC_MULf
 ) cu¼->Ãxt->İ = 
asBC_MULIf
;

457 
cu¼
->
Ãxt
->
size
 = 
asBCTy³Size
[
asBCInfo
[
asBC_ADDIi
].
ty³
];

458 
cu¼
->
Ãxt
->
¬g
 = curr->arg;

459 *
Ãxt
 = 
	`GoBack
(
	`D–‘eIn¡ruùiÚ
(
cu¼
));

460  
Œue
;

463 ifĞ
cu¼
->
İ
 =ğ
asBC_S‘V4
 &&

464 
cu¼
->
Ãxt
 &&

465 (
cu¼
->
Ãxt
->
İ
 =ğ
asBC_ADDi
 ||

466 
cu¼
->
Ãxt
->
İ
 =ğ
asBC_MULi
 ||

467 
cu¼
->
Ãxt
->
İ
 =ğ
asBC_ADDf
 ||

468 
cu¼
->
Ãxt
->
İ
 =ğ
asBC_MULf
) &&

469 
cu¼
->
wArg
[0] =ğcu¼->
Ãxt
->wArg[1] &&

470 (
cu¼
->
Ãxt
->
wArg
[0] == curr->wArg[0] ||

471 (
	`IsTempÜ¬y
(
cu¼
->
wArg
[0]) &&

472 !
	`IsTempV¬R—d
(
cu¼
->
Ãxt
, cu¼->
wArg
[0]))) )

474 ifĞ
cu¼
->
Ãxt
->
İ
 =ğ
asBC_ADDi
 ) cu¼->Ãxt->İ = 
asBC_ADDIi
;

475 ifĞ
cu¼
->
Ãxt
->
İ
 =ğ
asBC_MULi
 ) cu¼->Ãxt->İ = 
asBC_MULIi
;

476 ifĞ
cu¼
->
Ãxt
->
İ
 =ğ
asBC_ADDf
 ) cu¼->Ãxt->İ = 
asBC_ADDIf
;

477 ifĞ
cu¼
->
Ãxt
->
İ
 =ğ
asBC_MULf
 ) cu¼->Ãxt->İ = 
asBC_MULIf
;

478 
cu¼
->
Ãxt
->
size
 = 
asBCTy³Size
[
asBCInfo
[
asBC_ADDIi
].
ty³
];

479 
cu¼
->
Ãxt
->
¬g
 = curr->arg;

482 
cu¼
->
Ãxt
->
wArg
[1] = curr->next->wArg[2];

484 *
Ãxt
 = 
	`GoBack
(
	`D–‘eIn¡ruùiÚ
(
cu¼
));

485  
Œue
;

489 ifĞ(
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_rW_rW_ARG
 ||

490 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_rW_DW_ARG
) &&

491 
cu¼
->
Ãxt
 && cu¼->Ãxt->
İ
 =ğ
asBC_CpyVtoV4
 &&

492 
cu¼
->
wArg
[0] =ğcu¼->
Ãxt
->wArg[1] &&

493 
	`IsTempÜ¬y
(
cu¼
->
wArg
[0]) &&

494 !
	`IsTempV¬R—d
(
cu¼
->
Ãxt
, cu¼->
wArg
[0]) )

496 
cu¼
->
wArg
[0] = cu¼->
Ãxt
->wArg[0];

497 
	`D–‘eIn¡ruùiÚ
(
cu¼
->
Ãxt
);

498 *
Ãxt
 = 
	`GoBack
(
cu¼
);

499  
Œue
;

503 ifĞ
cu¼
->
İ
 =ğ
asBC_S‘V4
 && cu¼->
Ãxt
 && cu¼->Ãxt->İ =ğ
asBC_CpyVtoV4
 &&

504 
cu¼
->
wArg
[0] =ğcu¼->
Ãxt
->wArg[1] &&

505 
	`IsTempÜ¬y
(
cu¼
->
wArg
[0]) &&

506 !
	`IsTempV¬R—d
(
cu¼
->
Ãxt
, cu¼->
wArg
[0]) )

508 
cu¼
->
wArg
[0] = cu¼->
Ãxt
->wArg[0];

509 
	`D–‘eIn¡ruùiÚ
(
cu¼
->
Ãxt
);

510 *
Ãxt
 = 
	`GoBack
(
cu¼
);

511  
Œue
;

515 ifĞ
cu¼
->
İ
 =ğ
asBC_CpyRtoV4
 && cu¼->
Ãxt
 && cu¼->Ãxt->İ =ğ
asBC_CpyVtoR4
 &&

516 
cu¼
->
wArg
[0] =ğcu¼->
Ãxt
->wArg[0] &&

517 
	`IsTempÜ¬y
(
cu¼
->
wArg
[0]) &&

518 !
	`IsTempV¬R—d
(
cu¼
->
Ãxt
, cu¼->
wArg
[0]) )

521 
	`D–‘eIn¡ruùiÚ
(
cu¼
->
Ãxt
);

522 *
Ãxt
 = 
	`GoBack
(
	`D–‘eIn¡ruùiÚ
(
cu¼
));

523  
Œue
;

527 ifĞ
cu¼
->
İ
 =ğ
asBC_CpyGtoV4
 && cu¼->
Ãxt
 && cu¼->Ãxt->İ =ğ
asBC_PshV4
 &&

528 
cu¼
->
wArg
[0] =ğcu¼->
Ãxt
->wArg[0] &&

529 
	`IsTempÜ¬y
(
cu¼
->
wArg
[0]) &&

530 !
	`IsTempV¬R—d
(
cu¼
->
Ãxt
, cu¼->
wArg
[0]) )

532 
cu¼
->
İ
 = 
asBC_PshG4
;

533 
cu¼
->
size
 = 
asBCTy³Size
[
asBCInfo
[
asBC_PshG4
].
ty³
];

534 
cu¼
->
¡ackInc
 = 
asBCInfo
[
asBC_PshG4
].stackInc;

535 
	`D–‘eIn¡ruùiÚ
(
cu¼
->
Ãxt
);

536 *
Ãxt
 = 
	`GoBack
(
cu¼
);

537  
Œue
;

541 ifĞ
cu¼
->
İ
 =ğ
asBC_S‘V4
 && cu¼->
Ãxt
 && cu¼->Ãxt->İ =ğ
asBC_PshV4
 &&

542 
cu¼
->
wArg
[0] =ğcu¼->
Ãxt
->wArg[0] &&

543 
	`IsTempÜ¬y
(
cu¼
->
wArg
[0]) &&

544 !
	`IsTempV¬R—d
(
cu¼
->
Ãxt
, cu¼->
wArg
[0]) )

546 
cu¼
->
İ
 = 
asBC_PshC4
;

547 
cu¼
->
¡ackInc
 = 
asBCInfo
[
asBC_PshC4
].stackInc;

548 
	`D–‘eIn¡ruùiÚ
(
cu¼
->
Ãxt
);

549 *
Ãxt
 = 
	`GoBack
(
cu¼
);

550  
Œue
;

552 ifĞ
cu¼
->
İ
 =ğ
asBC_S‘V8
 && cu¼->
Ãxt
 && cu¼->Ãxt->İ =ğ
asBC_PshV8
 &&

553 
cu¼
->
wArg
[0] =ğcu¼->
Ãxt
->wArg[0] &&

554 
	`IsTempÜ¬y
(
cu¼
->
wArg
[0]) &&

555 !
	`IsTempV¬R—d
(
cu¼
->
Ãxt
, cu¼->
wArg
[0]) )

557 
cu¼
->
İ
 = 
asBC_PshC8
;

558 
cu¼
->
¡ackInc
 = 
asBCInfo
[
asBC_PshC8
].stackInc;

559 
	`D–‘eIn¡ruùiÚ
(
cu¼
->
Ãxt
);

560 *
Ãxt
 = 
	`GoBack
(
cu¼
);

561  
Œue
;

565 ifĞ
cu¼
->
İ
 =ğ
asBC_S‘V4
 && cu¼->
Ãxt
 && cu¼->Ãxt->İ =ğ
asBC_CpyVtoG4
 &&

566 
cu¼
->
wArg
[0] =ğcu¼->
Ãxt
->wArg[0] &&

567 
	`IsTempÜ¬y
(
cu¼
->
wArg
[0]) &&

568 !
	`IsTempV¬R—d
(
cu¼
->
Ãxt
, cu¼->
wArg
[0]) )

570 
cu¼
->
İ
 = 
asBC_S‘G4
;

571 
cu¼
->
size
 = 
asBCTy³Size
[
asBCInfo
[
asBC_S‘G4
].
ty³
];

572 *(((
asDWORD
*)&
cu¼
->
¬g
)+
AS_PTR_SIZE
èğ*
	`ARG_DW
(curr->arg);

573 *
	`ARG_PTR
(
cu¼
->
¬g
èğ*ARG_PTR(cu¼->
Ãxt
->arg);

574 
	`D–‘eIn¡ruùiÚ
(
cu¼
->
Ãxt
);

575 *
Ãxt
 = 
	`GoBack
(
cu¼
);

576  
Œue
;

579  
çl£
;

580 
	}
}

582 
boŞ
 
	gasCBy‹Code
::
	$IsTempÜ¬y
(
off£t
)

584  
asUINT
 
n
 = 0;‚ < 
‹mpÜ¬yV¬ŸbËs
.
	`G‘L’gth
();‚++ )

585 ifĞ
‹mpÜ¬yV¬ŸbËs
[
n
] =ğ
off£t
 )

586  
Œue
;

588  
çl£
;

589 
	}
}

591 
	gasCBy‹Code
::
	$O±imize
()

607 
cBy‹In¡ruùiÚ
 *
š¡r
 = 
fœ¡
;

608  
š¡r
 )

610 
cBy‹In¡ruùiÚ
 *
cu¼
 = 
š¡r
;

611 
š¡r
 = in¡r->
Ãxt
;

614 ifĞ
	`RemoveUnu£dV®ue
(
cu¼
, &
š¡r
) ) ;

617 ifĞ
	`Po¡pÚeIn™OfTemp
(
cu¼
, &
š¡r
) ) ;

620 ifĞ
	`CªBeSw­³d
(
cu¼
) )

623 
	`D–‘eIn¡ruùiÚ
(
š¡r
->
Ãxt
);

626 
	`RemoveIn¡ruùiÚ
(
š¡r
);

627 
	`In£¹BefÜe
(
cu¼
, 
š¡r
);

629 
š¡r
 = 
	`GoBack
(instr);

632 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_TZ
 , 
asBC_CÌHi
) ||

633 
	`IsCombš©iÚ
(
cu¼
, 
asBC_TNZ
, 
asBC_CÌHi
) ||

634 
	`IsCombš©iÚ
(
cu¼
, 
asBC_TS
 , 
asBC_CÌHi
) ||

635 
	`IsCombš©iÚ
(
cu¼
, 
asBC_TNS
, 
asBC_CÌHi
) ||

636 
	`IsCombš©iÚ
(
cu¼
, 
asBC_TP
 , 
asBC_CÌHi
) ||

637 
	`IsCombš©iÚ
(
cu¼
, 
asBC_TNP
, 
asBC_CÌHi
) )

640 
	`D–‘eIn¡ruùiÚ
(
š¡r
);

641 
š¡r
 = 
	`GoBack
(
cu¼
);

644 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_CÌHi
, 
asBC_JZ
) )

646 
	`D–‘eIn¡ruùiÚ
(
cu¼
);

647 
š¡r
->
İ
 = 
asBC_JLowZ
;

648 
š¡r
 = 
	`GoBack
(instr);

651 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_CÌHi
, 
asBC_JNZ
) )

653 
	`D–‘eIn¡ruùiÚ
(
cu¼
);

654 
š¡r
->
İ
 = 
asBC_JLowNZ
;

655 
š¡r
 = 
	`GoBack
(instr);

658 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_PGA
, 
asBC_RDSPŒ
) )

660 
cu¼
->
İ
 = 
asBC_PshGPŒ
;

661 
	`D–‘eIn¡ruùiÚ
(
š¡r
);

662 
š¡r
 = 
	`GoBack
(
cu¼
);

665 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_RDSPŒ
, 
asBC_PİPŒ
) )

667 
	`D–‘eIn¡ruùiÚ
(
cu¼
);

668 
š¡r
 = 
	`GoBack
(instr);

671 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_VAR
, 
asBC_FREE
) )

676 
	`RemoveIn¡ruùiÚ
(
š¡r
);

677 
	`In£¹BefÜe
(
cu¼
, 
š¡r
);

678 
š¡r
 = 
	`GoBack
(instr);

681 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_VAR
, 
asBC_PSF
) &&

682 
	`IsCombš©iÚ
(
š¡r
, 
asBC_PSF
, 
asBC_GETOBJREF
) &&

683 
š¡r
->
Ãxt
->
wArg
[0] =ğ
AS_PTR_SIZE
 )

685 
cu¼
->
İ
 = 
asBC_PshVPŒ
;

686 
	`D–‘eIn¡ruùiÚ
(
š¡r
->
Ãxt
);

687 
š¡r
 = 
	`GoBack
(
cu¼
);

690 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_ChkRefS
, 
asBC_RDSPŒ
) )

694 
cu¼
->
İ
 = 
asBC_RDSPŒ
;

695 
š¡r
->
İ
 = 
asBC_CHKREF
;

696 
š¡r
 = 
	`GoBack
(
cu¼
);

700 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_CHKREF
, 
asBC_ADDSi
) ||

701 
	`IsCombš©iÚ
(
cu¼
, 
asBC_CHKREF
, 
asBC_RDSPŒ
) )

704 
	`D–‘eIn¡ruùiÚ
(
cu¼
);

705 
š¡r
 = 
	`GoBack
(instr);

708 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_ADDSi
, 
asBC_CHKREF
) )

711 
	`D–‘eIn¡ruùiÚ
(
š¡r
);

712 
š¡r
 = 
	`GoBack
(
cu¼
);

715 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_PshVPŒ
, 
asBC_ADDSi
) &&

716 
	`IsCombš©iÚ
(
š¡r
, 
asBC_ADDSi
, 
asBC_PİRPŒ
) &&

717 
cu¼
->
wArg
[0] == 0 )

719 
	`D–‘eIn¡ruùiÚ
(
cu¼
);

720 
š¡r
 = 
	`GoBack
(
	`ChªgeFœ¡D–‘eNext
(š¡r, 
asBC_LßdThisR
));

724 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_PshVPŒ
, 
asBC_ADDSi
) &&

725 
	`IsCombš©iÚ
(
š¡r
, 
asBC_ADDSi
, 
asBC_PİRPŒ
) &&

726 
cu¼
->
wArg
[0] != 0 )

728 
cu¼
->
İ
 = 
asBC_LßdRObjR
;

729 
cu¼
->
size
 = 
asBCTy³Size
[
asBCInfo
[
asBC_LßdRObjR
].
ty³
];

730 
cu¼
->
¡ackInc
 = 
asBCInfo
[
asBC_LßdRObjR
].stackInc;

731 
cu¼
->
wArg
[1] = 
š¡r
->wArg[0];

732 *(
asDWORD
*)&
cu¼
->
¬g
 = *×sDWORD*)&
š¡r
->arg;

733 
	`D–‘eIn¡ruùiÚ
(
š¡r
->
Ãxt
);

734 
	`D–‘eIn¡ruùiÚ
(
š¡r
);

735 
š¡r
 = 
	`GoBack
(
cu¼
);

738 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_PSF
, 
asBC_REFCPY
) )

740 
š¡r
->
İ
 = 
asBC_RefCpyV
;

741 
š¡r
->
wArg
[0] = 
cu¼
->wArg[0];

742 
š¡r
->
¡ackInc
 = 
asBCInfo
[
asBC_LßdVObjR
].stackInc;

743 
	`D–‘eIn¡ruùiÚ
(
cu¼
);

744 
š¡r
 = 
	`GoBack
(instr);

747 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_PshNuÎ
, 
asBC_RefCpyV
) &&

748 
	`IsCombš©iÚ
(
š¡r
, 
asBC_RefCpyV
, 
asBC_PİPŒ
) )

750 
	`D–‘eIn¡ruùiÚ
(
cu¼
);

751 
š¡r
->
İ
 = 
asBC_FREE
;

752 
	`D–‘eIn¡ruùiÚ
(
š¡r
->
Ãxt
);

753 
š¡r
 = 
	`GoBack
(instr);

756 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_PSF
, 
asBC_ADDSi
) &&

757 
	`IsCombš©iÚ
(
š¡r
, 
asBC_ADDSi
, 
asBC_PİRPŒ
) )

759 
cu¼
->
İ
 = 
asBC_LßdVObjR
;

760 
cu¼
->
size
 = 
asBCTy³Size
[
asBCInfo
[
asBC_LßdVObjR
].
ty³
];

761 
cu¼
->
¡ackInc
 = 
asBCInfo
[
asBC_LßdVObjR
].stackInc;

762 
cu¼
->
wArg
[1] = 
š¡r
->wArg[0];

763 *(
asDWORD
*)&
cu¼
->
¬g
 = *×sDWORD*)&
š¡r
->arg;

764 
	`D–‘eIn¡ruùiÚ
(
š¡r
->
Ãxt
);

765 
	`D–‘eIn¡ruùiÚ
(
š¡r
);

766 
š¡r
 = 
	`GoBack
(
cu¼
);

769 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_LDG
, 
asBC_WRTV4
è&& !
	`IsTempRegU£d
(
š¡r
) )

771 
cu¼
->
İ
 = 
asBC_CpyVtoG4
;

772 
cu¼
->
size
 = 
asBCTy³Size
[
asBCInfo
[
asBC_CpyVtoG4
].
ty³
];

773 
cu¼
->
wArg
[0] = 
š¡r
->wArg[0];

775 
	`D–‘eIn¡ruùiÚ
(
š¡r
);

776 
š¡r
 = 
	`GoBack
(
cu¼
);

779 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_LDG
, 
asBC_RDR4
) )

781 ifĞ!
	`IsTempRegU£d
(
š¡r
) )

782 
cu¼
->
İ
 = 
asBC_CpyGtoV4
;

784 
cu¼
->
İ
 = 
asBC_LdGRdR4
;

785 
cu¼
->
size
 = 
asBCTy³Size
[
asBCInfo
[
asBC_CpyGtoV4
].
ty³
];

786 
cu¼
->
wArg
[0] = 
š¡r
->wArg[0];

788 
	`D–‘eIn¡ruùiÚ
(
š¡r
);

789 
š¡r
 = 
	`GoBack
(
cu¼
);

792 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_LDV
, 
asBC_INCi
è&& !
	`IsTempRegU£d
(
š¡r
) )

794 
cu¼
->
İ
 = 
asBC_IncVi
;

796 
	`D–‘eIn¡ruùiÚ
(
š¡r
);

797 
š¡r
 = 
	`GoBack
(
cu¼
);

800 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_LDV
, 
asBC_DECi
è&& !
	`IsTempRegU£d
(
š¡r
) )

802 
cu¼
->
İ
 = 
asBC_DecVi
;

804 
	`D–‘eIn¡ruùiÚ
(
š¡r
);

805 
š¡r
 = 
	`GoBack
(
cu¼
);

808 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_PİPŒ
, 
asBC_RET
) )

814 
š¡r
 = 
	`GoBack
(
	`D–‘eIn¡ruùiÚ
(
cu¼
));

817 ifĞ
cu¼
->
İ
 =ğ
asBC_J™EÁry
 && !
’gše
->
•
.
šşudeJ™In¡ruùiÚs
 )

819 
š¡r
 = 
	`GoBack
(
	`D–‘eIn¡ruùiÚ
(
cu¼
));

823 ifĞ(
	`IsCombš©iÚ
(
cu¼
, 
asBC_SUSPEND
, 
asBC_J™EÁry
è&& IsCombš©iÚ(
š¡r
,‡sBC_JitEntry,‡sBC_SUSPEND)) ||

824 (
	`IsCombš©iÚ
(
cu¼
, 
asBC_LINE
, 
asBC_J™EÁry
è&& IsCombš©iÚ(
š¡r
,‡sBC_JitEntry,‡sBC_LINE)) )

827 
	`D–‘eIn¡ruùiÚ
(
š¡r
);

828 
š¡r
 = 
	`GoBack
(
	`D–‘eIn¡ruùiÚ
(
cu¼
));

832 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_SUSPEND
,‡sBC_SUSPEND) ||

833 
	`IsCombš©iÚ
(
cu¼
, 
asBC_LINE
,‡sBC_LINE) )

836 
š¡r
 = 
	`GoBack
(
	`D–‘eIn¡ruùiÚ
(
cu¼
));

839 ifĞ(
	`IsCombš©iÚ
(
cu¼
, 
asBC_SUSPEND
, 
asBC_Block
è&& IsCombš©iÚ(
š¡r
,‡sBC_Block,‡sBC_SUSPEND)) ||

840 (
	`IsCombš©iÚ
(
cu¼
, 
asBC_LINE
, 
asBC_Block
è&& IsCombš©iÚ(
š¡r
,‡sBC_Block,‡sBC_LINE)) )

843 
š¡r
 = 
	`GoBack
(
	`D–‘eIn¡ruùiÚ
(
cu¼
));

846 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_VAR
, 
asBC_GETREF
è&& 
š¡r
->
wArg
[0] == 0 )

848 
š¡r
 = 
	`GoBack
(
	`ChªgeFœ¡D–‘eNext
(
cu¼
, 
asBC_PSF
));

852 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_PGA
, 
asBC_CHKREF
) ||

853 
	`IsCombš©iÚ
(
cu¼
, 
asBC_PSF
, 
asBC_CHKREF
) )

856 
	`D–‘eIn¡ruùiÚ
(
š¡r
);

857 
š¡r
 = 
	`GoBack
(
cu¼
);

860 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_PGA
, 
asBC_ChkRefS
) &&

861 
	`IsCombš©iÚ
(
š¡r
, 
asBC_ChkRefS
, 
asBC_CHKREF
) )

864 
	`D–‘eIn¡ruùiÚ
(
š¡r
->
Ãxt
);

865 
š¡r
 = 
	`GoBack
(
cu¼
);

868 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_PSF
, 
asBC_FREE
) )

874 
	`RemoveIn¡ruùiÚ
(
š¡r
);

875 
	`In£¹BefÜe
(
cu¼
, 
š¡r
);

876 
š¡r
 = 
	`GoBack
(instr);

883 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_PshRPŒ
, 
asBC_PİPŒ
) ||

884 
	`IsCombš©iÚ
(
cu¼
, 
asBC_PSF
 , 
asBC_PİPŒ
) ||

885 
	`IsCombš©iÚ
(
cu¼
, 
asBC_VAR
 , 
asBC_PİPŒ
) ||

886 
	`IsCombš©iÚ
(
cu¼
, 
asBC_PshVPŒ
, 
asBC_PİPŒ
) ||

887 
	`IsCombš©iÚ
(
cu¼
, 
asBC_PshNuÎ
, 
asBC_PİPŒ
) )

891 
cBy‹In¡ruùiÚ
 *
š¡r2
 = 
š¡r
->
Ãxt
;

892 
	`D–‘eIn¡ruùiÚ
(
cu¼
);

893 
	`D–‘eIn¡ruùiÚ
(
š¡r
);

894 
š¡r
 = 
	`GoBack
(
š¡r2
);

898 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_TZ
 , 
asBC_JZ
 ) ||

899 
	`IsCombš©iÚ
(
cu¼
, 
asBC_TNZ
, 
asBC_JNZ
) )

900 
š¡r
 = 
	`GoBack
(
	`D–‘eFœ¡ChªgeNext
(
cu¼
, 
asBC_JNZ
));

901 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_TNZ
, 
asBC_JZ
 ) ||

902 
	`IsCombš©iÚ
(
cu¼
, 
asBC_TZ
 , 
asBC_JNZ
) )

903 
š¡r
 = 
	`GoBack
(
	`D–‘eFœ¡ChªgeNext
(
cu¼
, 
asBC_JZ
));

904 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_TS
 , 
asBC_JZ
 ) ||

905 
	`IsCombš©iÚ
(
cu¼
, 
asBC_TNS
, 
asBC_JNZ
) )

906 
š¡r
 = 
	`GoBack
(
	`D–‘eFœ¡ChªgeNext
(
cu¼
, 
asBC_JNS
));

907 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_TNS
, 
asBC_JZ
 ) ||

908 
	`IsCombš©iÚ
(
cu¼
, 
asBC_TS
 , 
asBC_JNZ
) )

909 
š¡r
 = 
	`GoBack
(
	`D–‘eFœ¡ChªgeNext
(
cu¼
, 
asBC_JS
));

910 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_TP
 , 
asBC_JZ
 ) ||

911 
	`IsCombš©iÚ
(
cu¼
, 
asBC_TNP
, 
asBC_JNZ
) )

912 
š¡r
 = 
	`GoBack
(
	`D–‘eFœ¡ChªgeNext
(
cu¼
, 
asBC_JNP
));

913 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_TNP
, 
asBC_JZ
 ) ||

914 
	`IsCombš©iÚ
(
cu¼
, 
asBC_TP
 , 
asBC_JNZ
) )

915 
š¡r
 = 
	`GoBack
(
	`D–‘eFœ¡ChªgeNext
(
cu¼
, 
asBC_JP
));

918 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_JMP
, 
asBC_LABEL
è&& *(*)&cu¼->
¬g
 =ğ
š¡r
->
wArg
[0] )

919 
š¡r
 = 
	`GoBack
(
	`D–‘eIn¡ruùiÚ
(
cu¼
));

921 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_PSF
, 
asBC_RDSPŒ
) )

923 
cu¼
->
İ
 = 
asBC_PshVPŒ
;

924 
	`D–‘eIn¡ruùiÚ
(
š¡r
);

925 
š¡r
 = 
	`GoBack
(
cu¼
);

928 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_PSF
, 
asBC_ChkRefS
) &&

929 
	`IsCombš©iÚ
(
š¡r
, 
asBC_ChkRefS
, 
asBC_RDSPŒ
) )

931 
cu¼
->
İ
 = 
asBC_PshVPŒ
;

932 
š¡r
->
İ
 = 
asBC_CHKREF
;

933 
	`D–‘eIn¡ruùiÚ
(
š¡r
->
Ãxt
);

934 
š¡r
 = 
	`GoBack
(
cu¼
);

937 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_PSF
, 
asBC_ChkRefS
) &&

938 
	`IsCombš©iÚ
(
š¡r
, 
asBC_ChkRefS
, 
asBC_PİPŒ
) )

940 
cu¼
->
İ
 = 
asBC_ChkNuÎV
;

941 
cu¼
->
¡ackInc
 = 0;

943 
	`D–‘eIn¡ruùiÚ
(
š¡r
->
Ãxt
);

945 
	`D–‘eIn¡ruùiÚ
(
š¡r
);

946 
š¡r
 = 
	`GoBack
(
cu¼
);

949 ifĞ
	`IsCombš©iÚ
(
cu¼
, 
asBC_PshVPŒ
, 
asBC_CHKREF
) &&

950 
	`IsCombš©iÚ
(
š¡r
, 
asBC_CHKREF
, 
asBC_PİPŒ
) )

952 
cu¼
->
İ
 = 
asBC_ChkNuÎV
;

953 
cu¼
->
¡ackInc
 = 0;

954 
	`D–‘eIn¡ruùiÚ
(
š¡r
->
Ãxt
);

955 
	`D–‘eIn¡ruùiÚ
(
š¡r
);

956 
š¡r
 = 
	`GoBack
(
cu¼
);

961 
	}
}

963 
boŞ
 
	gasCBy‹Code
::
	$IsTempV¬R—dByIn¡r
(
cBy‹In¡ruùiÚ
 *
cu¼
, 
off£t
)

966 ifĞ
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_rW_rW_ARG
 &&

967 (
cu¼
->
wArg
[1] =ğ
off£t
 || curr->wArg[2] == offset) )

968  
Œue
;

969 ifĞ(
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_rW_ARG
 ||

970 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_rW_DW_ARG
 ||

971 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_rW_QW_ARG
 ||

972 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_rW_W_DW_ARG
 ||

973 
cu¼
->
İ
 =ğ
asBC_FREE
) &&

974 
cu¼
->
wArg
[0] =ğ
off£t
 )

975  
Œue
;

976 ifĞ(
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_rW_ARG
 ||

977 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_rW_DW_ARG
) &&

978 
cu¼
->
wArg
[1] =ğ
off£t
 )

979  
Œue
;

980 ifĞ
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_rW_rW_ARG
 &&

981 ((sigÃd)
cu¼
->
wArg
[0] =ğ
off£t
 || (signed)curr->wArg[1] == offset) )

982  
Œue
;

983 ifĞ
cu¼
->
İ
 =ğ
asBC_LßdThisR
 && 
off£t
 == 0 )

984  
Œue
;

986  
çl£
;

987 
	}
}

989 
boŞ
 
	gasCBy‹Code
::
	$IsIn¡rJmpOrLab–
(
cBy‹In¡ruùiÚ
 *
cu¼
)

991 ifĞ
cu¼
->
İ
 =ğ
asBC_JS
 ||

992 
cu¼
->
İ
 =ğ
asBC_JNS
 ||

993 
cu¼
->
İ
 =ğ
asBC_JP
 ||

994 
cu¼
->
İ
 =ğ
asBC_JNP
 ||

995 
cu¼
->
İ
 =ğ
asBC_JMPP
 ||

996 
cu¼
->
İ
 =ğ
asBC_JMP
 ||

997 
cu¼
->
İ
 =ğ
asBC_JZ
 ||

998 
cu¼
->
İ
 =ğ
asBC_JNZ
 ||

999 
cu¼
->
İ
 =ğ
asBC_JLowZ
 ||

1000 
cu¼
->
İ
 =ğ
asBC_JLowNZ
 ||

1001 
cu¼
->
İ
 =ğ
asBC_LABEL
 )

1002  
Œue
;

1004  
çl£
;

1005 
	}
}

1007 
boŞ
 
	gasCBy‹Code
::
	$IsTempV¬Ov”wr™‹nByIn¡r
(
cBy‹In¡ruùiÚ
 *
cu¼
, 
off£t
)

1010 ifĞ
cu¼
->
İ
 =ğ
asBC_RET
 ||

1011 
cu¼
->
İ
 =ğ
asBC_SUSPEND
 )

1012  
Œue
;

1013 ifĞ(
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_rW_rW_ARG
 ||

1014 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_rW_ARG
 ||

1015 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_rW_DW_ARG
 ||

1016 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_ARG
 ||

1017 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_W_ARG
 ||

1018 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_DW_ARG
 ||

1019 
asBCInfo
[
cu¼
->
İ
].
ty³
 =ğ
asBCTYPE_wW_QW_ARG
) &&

1020 
cu¼
->
wArg
[0] =ğ
off£t
 )

1021  
Œue
;

1023  
çl£
;

1024 
	}
}

1026 
boŞ
 
	gasCBy‹Code
::
	$IsTempV¬R—d
(
cBy‹In¡ruùiÚ
 *
cu¼
, 
off£t
)

1028 
asCA¼ay
<
cBy‹In¡ruùiÚ
 *> 
İ’P©hs
;

1029 
asCA¼ay
<
cBy‹In¡ruùiÚ
 *> 
şo£dP©hs
;

1032 
İ’P©hs
.
	`PushLa¡
(
cu¼
->
Ãxt
);

1034  
İ’P©hs
.
	`G‘L’gth
() )

1036 
cu¼
 = 
İ’P©hs
.
	`PİLa¡
();

1039 
şo£dP©hs
.
	`PushLa¡
(
cu¼
);

1041  
cu¼
 )

1043 ifĞ
	`IsTempV¬R—dByIn¡r
(
cu¼
, 
off£t
èè 
Œue
;

1045 ifĞ
	`IsTempV¬Ov”wr™‹nByIn¡r
(
cu¼
, 
off£t
) ) ;

1048 ifĞ
cu¼
->
İ
 =ğ
asBC_JMP
 )

1050 
Ïb–
 = *((*)
	`ARG_DW
(
cu¼
->
¬g
));

1051 
r
 = 
	`FšdLab–
(
Ïb–
, 
cu¼
, &cu¼, 0); 
	`asASSERT
Ğ¸=ğ0 ); 
	`UNUSED_VAR
(r);

1053 ifĞ!
şo£dP©hs
.
	`Exi¡s
(
cu¼
) &&

1054 !
İ’P©hs
.
	`Exi¡s
(
cu¼
) )

1055 
İ’P©hs
.
	`PushLa¡
(
cu¼
);

1059 ifĞ
cu¼
->
İ
 =ğ
asBC_JZ
 || cu¼->İ =ğ
asBC_JNZ
 ||

1060 
cu¼
->
İ
 =ğ
asBC_JS
 || cu¼->İ =ğ
asBC_JNS
 ||

1061 
cu¼
->
İ
 =ğ
asBC_JP
 || cu¼->İ =ğ
asBC_JNP
 ||

1062 
cu¼
->
İ
 =ğ
asBC_JLowZ
 || cu¼->İ =ğ
asBC_JLowNZ
 )

1064 
cBy‹In¡ruùiÚ
 *
de¡
 = 0;

1065 
Ïb–
 = *((*)
	`ARG_DW
(
cu¼
->
¬g
));

1066 
r
 = 
	`FšdLab–
(
Ïb–
, 
cu¼
, &
de¡
, 0); 
	`asASSERT
Ğ¸=ğ0 ); 
	`UNUSED_VAR
(r);

1068 ifĞ!
şo£dP©hs
.
	`Exi¡s
(
de¡
) &&

1069 !
İ’P©hs
.
	`Exi¡s
(
de¡
) )

1070 
İ’P©hs
.
	`PushLa¡
(
de¡
);

1072 ifĞ
cu¼
->
İ
 =ğ
asBC_JMPP
 )

1077 
cu¼
 = cu¼->
Ãxt
;

1078  
cu¼
->
İ
 =ğ
asBC_JMP
 )

1080 
cBy‹In¡ruùiÚ
 *
de¡
 = 0;

1081 
Ïb–
 = *((*)
	`ARG_DW
(
cu¼
->
¬g
));

1082 
r
 = 
	`FšdLab–
(
Ïb–
, 
cu¼
, &
de¡
, 0); 
	`asASSERT
Ğ¸=ğ0 ); 
	`UNUSED_VAR
(r);

1084 ifĞ!
şo£dP©hs
.
	`Exi¡s
(
de¡
) &&

1085 !
İ’P©hs
.
	`Exi¡s
(
de¡
) )

1086 
İ’P©hs
.
	`PushLa¡
(
de¡
);

1088 
cu¼
 = cu¼->
Ãxt
;

1093 
	`asASSERT
(
cu¼
->
İ
 =ğ
asBC_LABEL
);

1097 
cu¼
 = cu¼->
Ãxt
;

1101  
çl£
;

1102 
	}
}

1104 
boŞ
 
	gasCBy‹Code
::
	$IsTempRegU£d
(
cBy‹In¡ruùiÚ
 *
cu¼
)

1107  
cu¼
->
Ãxt
 )

1109 
cu¼
 = cu¼->
Ãxt
;

1112 ifĞ
cu¼
->
İ
 =ğ
asBC_INCi
 ||

1113 
cu¼
->
İ
 =ğ
asBC_INCi16
 ||

1114 
cu¼
->
İ
 =ğ
asBC_INCi8
 ||

1115 
cu¼
->
İ
 =ğ
asBC_INCf
 ||

1116 
cu¼
->
İ
 =ğ
asBC_INCd
 ||

1117 
cu¼
->
İ
 =ğ
asBC_DECi
 ||

1118 
cu¼
->
İ
 =ğ
asBC_DECi16
 ||

1119 
cu¼
->
İ
 =ğ
asBC_DECi8
 ||

1120 
cu¼
->
İ
 =ğ
asBC_DECf
 ||

1121 
cu¼
->
İ
 =ğ
asBC_DECd
 ||

1122 
cu¼
->
İ
 =ğ
asBC_WRTV1
 ||

1123 
cu¼
->
İ
 =ğ
asBC_WRTV2
 ||

1124 
cu¼
->
İ
 =ğ
asBC_WRTV4
 ||

1125 
cu¼
->
İ
 =ğ
asBC_WRTV8
 ||

1126 
cu¼
->
İ
 =ğ
asBC_RDR1
 ||

1127 
cu¼
->
İ
 =ğ
asBC_RDR2
 ||

1128 
cu¼
->
İ
 =ğ
asBC_RDR4
 ||

1129 
cu¼
->
İ
 =ğ
asBC_RDR8
 ||

1130 
cu¼
->
İ
 =ğ
asBC_PshRPŒ
 ||

1131 
cu¼
->
İ
 =ğ
asBC_CpyRtoV4
 ||

1132 
cu¼
->
İ
 =ğ
asBC_CpyRtoV8
 ||

1133 
cu¼
->
İ
 =ğ
asBC_TZ
 ||

1134 
cu¼
->
İ
 =ğ
asBC_TNZ
 ||

1135 
cu¼
->
İ
 =ğ
asBC_TS
 ||

1136 
cu¼
->
İ
 =ğ
asBC_TNS
 ||

1137 
cu¼
->
İ
 =ğ
asBC_TP
 ||

1138 
cu¼
->
İ
 =ğ
asBC_TNP
 ||

1139 
cu¼
->
İ
 =ğ
asBC_JZ
 ||

1140 
cu¼
->
İ
 =ğ
asBC_JNZ
 ||

1141 
cu¼
->
İ
 =ğ
asBC_JLowZ
 ||

1142 
cu¼
->
İ
 =ğ
asBC_JLowNZ
 ||

1143 
cu¼
->
İ
 =ğ
asBC_JS
 ||

1144 
cu¼
->
İ
 =ğ
asBC_JNS
 ||

1145 
cu¼
->
İ
 =ğ
asBC_JP
 ||

1146 
cu¼
->
İ
 =ğ
asBC_JNP
 )

1147  
Œue
;

1150 ifĞ
cu¼
->
İ
 =ğ
asBC_CALL
 ||

1151 
cu¼
->
İ
 =ğ
asBC_PİRPŒ
 ||

1152 
cu¼
->
İ
 =ğ
asBC_CALLSYS
 ||

1153 
cu¼
->
İ
 =ğ
asBC_CALLBND
 ||

1154 
cu¼
->
İ
 =ğ
asBC_SUSPEND
 ||

1155 
cu¼
->
İ
 =ğ
asBC_ALLOC
 ||

1156 
cu¼
->
İ
 =ğ
asBC_CpyVtoR4
 ||

1157 
cu¼
->
İ
 =ğ
asBC_LdGRdR4
 ||

1158 
cu¼
->
İ
 =ğ
asBC_LDG
 ||

1159 
cu¼
->
İ
 =ğ
asBC_LDV
 ||

1160 
cu¼
->
İ
 =ğ
asBC_TZ
 ||

1161 
cu¼
->
İ
 =ğ
asBC_TNZ
 ||

1162 
cu¼
->
İ
 =ğ
asBC_TS
 ||

1163 
cu¼
->
İ
 =ğ
asBC_TNS
 ||

1164 
cu¼
->
İ
 =ğ
asBC_TP
 ||

1165 
cu¼
->
İ
 =ğ
asBC_TNP
 ||

1166 
cu¼
->
İ
 =ğ
asBC_JS
 ||

1167 
cu¼
->
İ
 =ğ
asBC_JNS
 ||

1168 
cu¼
->
İ
 =ğ
asBC_JP
 ||

1169 
cu¼
->
İ
 =ğ
asBC_JNP
 ||

1170 
cu¼
->
İ
 =ğ
asBC_JMPP
 ||

1171 
cu¼
->
İ
 =ğ
asBC_JMP
 ||

1172 
cu¼
->
İ
 =ğ
asBC_JZ
 ||

1173 
cu¼
->
İ
 =ğ
asBC_JNZ
 ||

1174 
cu¼
->
İ
 =ğ
asBC_JLowZ
 ||

1175 
cu¼
->
İ
 =ğ
asBC_JLowNZ
 ||

1176 
cu¼
->
İ
 =ğ
asBC_CMPi
 ||

1177 
cu¼
->
İ
 =ğ
asBC_CMPu
 ||

1178 
cu¼
->
İ
 =ğ
asBC_CMPf
 ||

1179 
cu¼
->
İ
 =ğ
asBC_CMPd
 ||

1180 
cu¼
->
İ
 =ğ
asBC_CMPIi
 ||

1181 
cu¼
->
İ
 =ğ
asBC_CMPIu
 ||

1182 
cu¼
->
İ
 =ğ
asBC_CMPIf
 ||

1183 
cu¼
->
İ
 =ğ
asBC_LABEL
 ||

1184 
cu¼
->
İ
 =ğ
asBC_LßdThisR
 ||

1185 
cu¼
->
İ
 =ğ
asBC_LßdRObjR
 ||

1186 
cu¼
->
İ
 =ğ
asBC_LßdVObjR
 )

1187  
çl£
;

1190  
çl£
;

1191 
	}
}

1193 
boŞ
 
	gasCBy‹Code
::
	$IsSim¶eEx´essiÚ
()

1197 
cBy‹In¡ruùiÚ
 *
š¡r
 = 
fœ¡
;

1198  
š¡r
 )

1200 ifĞ
š¡r
->
İ
 =ğ
asBC_ALLOC
 ||

1201 
š¡r
->
İ
 =ğ
asBC_CALL
 ||

1202 
š¡r
->
İ
 =ğ
asBC_CALLSYS
 ||

1203 
š¡r
->
İ
 =ğ
asBC_SUSPEND
 ||

1204 
š¡r
->
İ
 =ğ
asBC_LINE
 ||

1205 
š¡r
->
İ
 =ğ
asBC_FREE
 ||

1206 
š¡r
->
İ
 =ğ
asBC_C®lPŒ
 ||

1207 
š¡r
->
İ
 =ğ
asBC_CALLINTF
 ||

1208 
š¡r
->
İ
 =ğ
asBC_CALLBND
 )

1209  
çl£
;

1211 
š¡r
 = in¡r->
Ãxt
;

1214  
Œue
;

1215 
	}
}

1217 
	gasCBy‹Code
::
	$ExŒaùLšeNumb”s
()

1219 
Ï¡LšePos
 = -1;

1220 
pos
 = 0;

1221 
cBy‹In¡ruùiÚ
 *
š¡r
 = 
fœ¡
;

1222  
š¡r
 )

1224 
cBy‹In¡ruùiÚ
 *
cu¼
 = 
š¡r
;

1225 
š¡r
 = in¡r->
Ãxt
;

1227 ifĞ
cu¼
->
İ
 =ğ
asBC_LINE
 )

1229 ifĞ
Ï¡LšePos
 =ğ
pos
 )

1231 
lšeNumb”s
.
	`PİLa¡
();

1232 
lšeNumb”s
.
	`PİLa¡
();

1235 
Ï¡LšePos
 = 
pos
;

1236 
lšeNumb”s
.
	`PushLa¡
(
pos
);

1237 
lšeNumb”s
.
	`PushLa¡
(*(*)
	`ARG_DW
(
cu¼
->
¬g
));

1239 ifĞ!
’gše
->
•
.
budW™houtLšeCues
 )

1242 
cu¼
->
İ
 = 
asBC_SUSPEND
;

1243 
cu¼
->
size
 = 
asBCTy³Size
[
asBCInfo
[
asBC_SUSPEND
].
ty³
];

1244 
pos
 +ğ
cu¼
->
size
;

1249 
	`D–‘eIn¡ruùiÚ
(
cu¼
);

1253 
pos
 +ğ
cu¼
->
size
;

1255 
	}
}

1257 
	gasCBy‹Code
::
	$ExŒaùObjeùV¬ŸbËInfo
(
asCSütFunùiÚ
 *
outFunc
)

1259 
pos
 = 0;

1260 
cBy‹In¡ruùiÚ
 *
š¡r
 = 
fœ¡
;

1261  
š¡r
 )

1263 ifĞ
š¡r
->
İ
 =ğ
asBC_Block
 )

1265 
asSObjeùV¬ŸbËInfo
 
šfo
;

1266 
šfo
.
´og¿mPos
 = 
pos
;

1267 
šfo
.
v¬ŸbËOff£t
 = 0;

1268 
šfo
.
İtiÚ
 = 
š¡r
->
wArg
[0] ? 
asBLOCK_BEGIN
 : 
asBLOCK_END
;

1269 
outFunc
->
objV¬ŸbËInfo
.
	`PushLa¡
(
šfo
);

1271 ifĞ
š¡r
->
İ
 =ğ
asBC_ObjInfo
 )

1273 
asSObjeùV¬ŸbËInfo
 
šfo
;

1274 
šfo
.
´og¿mPos
 = 
pos
;

1275 
šfo
.
v¬ŸbËOff£t
 = ()
š¡r
->
wArg
[0];

1276 
šfo
.
İtiÚ
 = *(*)
	`ARG_DW
(
š¡r
->
¬g
);

1277 
outFunc
->
objV¬ŸbËInfo
.
	`PushLa¡
(
šfo
);

1279 ifĞ
š¡r
->
İ
 =ğ
asBC_V¬Deş
 )

1281 
outFunc
->
v¬ŸbËs
[
š¡r
->
wArg
[0]]->
deş¬edAtProg¿mPos
 = 
pos
;

1284 
pos
 +ğ
š¡r
->
size
;

1286 
š¡r
 = in¡r->
Ãxt
;

1288 
	}
}

1290 
	gasCBy‹Code
::
	$G‘Size
()

1292 
size
 = 0;

1293 
cBy‹In¡ruùiÚ
 *
š¡r
 = 
fœ¡
;

1294  
š¡r
 )

1296 
size
 +ğ
š¡r
->
	`G‘Size
();

1298 
š¡r
 = in¡r->
Ãxt
;

1301  
size
;

1302 
	}
}

1304 
	gasCBy‹Code
::
	$AddCode
(
asCBy‹Code
 *
bc
)

1306 ifĞ
bc
->
fœ¡
 )

1308 ifĞ
fœ¡
 == 0 )

1310 
fœ¡
 = 
bc
->first;

1311 
Ï¡
 = 
bc
->last;

1312 
bc
->
fœ¡
 = 0;

1313 
bc
->
Ï¡
 = 0;

1317 
Ï¡
->
Ãxt
 = 
bc
->
fœ¡
;

1318 
bc
->
fœ¡
->
´ev
 = 
Ï¡
;

1319 
Ï¡
 = 
bc
->last;

1320 
bc
->
fœ¡
 = 0;

1321 
bc
->
Ï¡
 = 0;

1324 
	}
}

1326 
	gasCBy‹Code
::
	$AddIn¡ruùiÚ
()

1328 *
±r
 = 
’gše
->
memÜyMgr
.
	`AÎocBy‹In¡ruùiÚ
();

1329 ifĞ
±r
 == 0 )

1335 
cBy‹In¡ruùiÚ
 *
š¡r
 = 
	`Ãw
(
±r
è
	`cBy‹In¡ruùiÚ
();

1336 ifĞ
fœ¡
 == 0 )

1338 
fœ¡
 = 
Ï¡
 = 
š¡r
;

1342 
Ï¡
->
	`AddAá”
(
š¡r
);

1343 
Ï¡
 = 
š¡r
;

1347 
	}
}

1349 
	gasCBy‹Code
::
	$AddIn¡ruùiÚFœ¡
()

1351 *
±r
 = 
’gše
->
memÜyMgr
.
	`AÎocBy‹In¡ruùiÚ
();

1352 ifĞ
±r
 == 0 )

1358 
cBy‹In¡ruùiÚ
 *
š¡r
 = 
	`Ãw
(
±r
è
	`cBy‹In¡ruùiÚ
();

1359 ifĞ
fœ¡
 == 0 )

1361 
fœ¡
 = 
Ï¡
 = 
š¡r
;

1365 
fœ¡
->
	`AddBefÜe
(
š¡r
);

1366 
fœ¡
 = 
š¡r
;

1370 
	}
}

1372 
	gasCBy‹Code
::
	$C®l
(
asEBCIn¡r
 
š¡r
, 
funcID
, 
pİ
)

1374 ifĞ
	`AddIn¡ruùiÚ
() < 0 )

1377 
	`asASSERT
(
asBCInfo
[
š¡r
].
ty³
 =ğ
asBCTYPE_DW_ARG
);

1379 
Ï¡
->
İ
 = 
š¡r
;

1380 
Ï¡
->
size
 = 
asBCTy³Size
[
asBCInfo
[
š¡r
].
ty³
];

1381 
Ï¡
->
¡ackInc
 = -
pİ
;

1382 *((*)
	`ARG_DW
(
Ï¡
->
¬g
)èğ
funcID
;

1385 
	`In¡rPTR
(
asBC_J™EÁry
, 0);

1386 
	}
}

1388 
	gasCBy‹Code
::
	$C®lPŒ
(
asEBCIn¡r
 
š¡r
, 
funcPŒV¬
, 
pİ
)

1390 ifĞ
	`AddIn¡ruùiÚ
() < 0 )

1393 
	`asASSERT
(
asBCInfo
[
š¡r
].
ty³
 =ğ
asBCTYPE_rW_ARG
);

1395 
Ï¡
->
İ
 = 
š¡r
;

1396 
Ï¡
->
size
 = 
asBCTy³Size
[
asBCInfo
[
š¡r
].
ty³
];

1397 
Ï¡
->
¡ackInc
 = -
pİ
;

1398 
Ï¡
->
wArg
[0] = ()
funcPŒV¬
;

1401 
	`In¡rPTR
(
asBC_J™EÁry
, 0);

1402 
	}
}

1404 
	gasCBy‹Code
::
	$AÎoc
(
asEBCIn¡r
 
š¡r
, *
objID
, 
funcID
, 
pİ
)

1406 ifĞ
	`AddIn¡ruùiÚ
() < 0 )

1409 
Ï¡
->
İ
 = 
š¡r
;

1410 
Ï¡
->
size
 = 
asBCTy³Size
[
asBCInfo
[
š¡r
].
ty³
];

1411 
Ï¡
->
¡ackInc
 = -
pİ
;

1413 
	`asASSERT
(
asBCInfo
[
š¡r
].
ty³
 =ğ
asBCTYPE_PTR_DW_ARG
);

1414 *
	`ARG_PTR
(
Ï¡
->
¬g
èğ(
asPWORD
)
objID
;

1415 *((*)(
	`ARG_DW
(
Ï¡
->
¬g
)+
AS_PTR_SIZE
)èğ
funcID
;

1418 
	`In¡rPTR
(
asBC_J™EÁry
, 0);

1419 
	}
}

1421 
	gasCBy‹Code
::
	$R‘
(
pİ
)

1423 ifĞ
	`AddIn¡ruùiÚ
() < 0 )

1426 
	`asASSERT
(
asBCInfo
[
asBC_RET
].
ty³
 =ğ
asBCTYPE_W_ARG
);

1428 
Ï¡
->
İ
 = 
asBC_RET
;

1429 
Ï¡
->
size
 = 
asBCTy³Size
[
asBCInfo
[
asBC_RET
].
ty³
];

1430 
Ï¡
->
¡ackInc
 = 0;

1431 
Ï¡
->
wArg
[0] = ()
pİ
;

1432 
	}
}

1434 
	gasCBy‹Code
::
	$JmpP
(
v¬
, 
asDWORD
 
max
)

1436 ifĞ
	`AddIn¡ruùiÚ
() < 0 )

1439 
	`asASSERT
(
asBCInfo
[
asBC_JMPP
].
ty³
 =ğ
asBCTYPE_rW_ARG
);

1441 
Ï¡
->
İ
 = 
asBC_JMPP
;

1442 
Ï¡
->
size
 = 
asBCTy³Size
[
asBCInfo
[
asBC_JMPP
].
ty³
];

1443 
Ï¡
->
¡ackInc
 = 
asBCInfo
[
asBC_JMPP
].stackInc;

1444 
Ï¡
->
wArg
[0] = ()
v¬
;

1447 *
	`ARG_DW
(
Ï¡
->
¬g
èğ
max
;

1448 
	}
}

1450 
	gasCBy‹Code
::
	$Lab–
(
Ïb–
)

1452 ifĞ
	`AddIn¡ruùiÚ
() < 0 )

1455 
Ï¡
->
İ
 = 
asBC_LABEL
;

1456 
Ï¡
->
size
 = 0;

1457 
Ï¡
->
¡ackInc
 = 0;

1458 
Ï¡
->
wArg
[0] = 
Ïb–
;

1459 
	}
}

1461 
	gasCBy‹Code
::
	$Lše
(
lše
, 
cŞumn
)

1463 ifĞ
	`AddIn¡ruùiÚ
() < 0 )

1466 
Ï¡
->
İ
 = 
asBC_LINE
;

1469 ifĞ
’gše
->
•
.
budW™houtLšeCues
 )

1470 
Ï¡
->
size
 = 0;

1472 
Ï¡
->
size
 = 
asBCTy³Size
[
asBCInfo
[
asBC_SUSPEND
].
ty³
];

1473 
Ï¡
->
¡ackInc
 = 0;

1474 *((*)
	`ARG_DW
(
Ï¡
->
¬g
)èğ(
lše
 & 0xFFFFF)|((
cŞumn
 & 0xFFF)<<20);

1477 
	`In¡rPTR
(
asBC_J™EÁry
, 0);

1478 
	}
}

1480 
	gasCBy‹Code
::
	$ObjInfo
(
off£t
, 
šfo
)

1482 ifĞ
	`AddIn¡ruùiÚ
() < 0 )

1487 
Ï¡
->
İ
 = 
asBC_ObjInfo
;

1488 
Ï¡
->
size
 = 0;

1489 
Ï¡
->
¡ackInc
 = 0;

1490 
Ï¡
->
wArg
[0] = ()
off£t
;

1491 *((*)
	`ARG_DW
(
Ï¡
->
¬g
)èğ
šfo
;

1492 
	}
}

1494 
	gasCBy‹Code
::
	$Block
(
boŞ
 
¡¬t
)

1496 ifĞ
	`AddIn¡ruùiÚ
() < 0 )

1499 
Ï¡
->
İ
 = 
asBC_Block
;

1500 
Ï¡
->
size
 = 0;

1501 
Ï¡
->
¡ackInc
 = 0;

1502 
Ï¡
->
wArg
[0] = 
¡¬t
 ? 1 : 0;

1503 
	}
}

1505 
	gasCBy‹Code
::
	$V¬Deş
(
v¬DeşIdx
)

1507 ifĞ
	`AddIn¡ruùiÚ
() < 0 )

1510 
Ï¡
->
İ
 = 
asBC_V¬Deş
;

1511 
Ï¡
->
size
 = 0;

1512 
Ï¡
->
¡ackInc
 = 0;

1513 
Ï¡
->
wArg
[0] = (
asWORD
)
v¬DeşIdx
;

1514 
	}
}

1517 
	gasCBy‹Code
::
	$FšdLab–
(
Ïb–
, 
cBy‹In¡ruùiÚ
 *
äom
, cBy‹In¡ruùiÚ **
de¡
, *
pos™iÚD–
)

1520 
Ïb–Pos
 = -
äom
->
	`G‘Size
();

1522 
cBy‹In¡ruùiÚ
 *
Ïb–In¡r
 = 
äom
;

1523  
Ïb–In¡r
 )

1525 
Ïb–Pos
 +ğ
Ïb–In¡r
->
	`G‘Size
();

1526 
Ïb–In¡r
 =†ab–In¡r->
Ãxt
;

1528 ifĞ
Ïb–In¡r
 &&†ab–In¡r->
İ
 =ğ
asBC_LABEL
 )

1530 ifĞ
Ïb–In¡r
->
wArg
[0] =ğ
Ïb–
 )

1535 ifĞ
Ïb–In¡r
 == 0 )

1538 
Ïb–Pos
 = -
äom
->
	`G‘Size
();

1540 
Ïb–In¡r
 = 
äom
;

1541  
Ïb–In¡r
 )

1543 
Ïb–In¡r
 =†ab–In¡r->
´ev
;

1544 ifĞ
Ïb–In¡r
 )

1546 
Ïb–Pos
 -ğ
Ïb–In¡r
->
	`G‘Size
();

1548 ifĞ
Ïb–In¡r
->
İ
 =ğ
asBC_LABEL
 )

1550 ifĞ
Ïb–In¡r
->
wArg
[0] =ğ
Ïb–
 )

1557 ifĞ
Ïb–In¡r
 != 0 )

1559 ifĞ
de¡
 ) *de¡ = 
Ïb–In¡r
;

1560 ifĞ
pos™iÚD–
 ) *pos™iÚD– = 
Ïb–Pos
;

1565 
	}
}

1567 
	gasCBy‹Code
::
	$ResŞveJumpAdd»s£s
()

1569 
cBy‹In¡ruùiÚ
 *
š¡r
 = 
fœ¡
;

1570  
š¡r
 )

1572 ifĞ
š¡r
->
İ
 =ğ
asBC_JMP
 ||

1573 
š¡r
->
İ
 =ğ
asBC_JZ
 || in¡r->İ =ğ
asBC_JNZ
 ||

1574 
š¡r
->
İ
 =ğ
asBC_JLowZ
 || in¡r->İ =ğ
asBC_JLowNZ
 ||

1575 
š¡r
->
İ
 =ğ
asBC_JS
 || in¡r->İ =ğ
asBC_JNS
 ||

1576 
š¡r
->
İ
 =ğ
asBC_JP
 || in¡r->İ =ğ
asBC_JNP
 )

1578 
Ïb–
 = *((*è
	`ARG_DW
(
š¡r
->
¬g
));

1579 
Ïb–PosOff£t
;

1580 
r
 = 
	`FšdLab–
(
Ïb–
, 
š¡r
, 0, &
Ïb–PosOff£t
);

1581 ifĞ
r
 == 0 )

1582 *((*è
	`ARG_DW
(
š¡r
->
¬g
)èğ
Ïb–PosOff£t
;

1587 
š¡r
 = in¡r->
Ãxt
;

1591 
	}
}

1594 
cBy‹In¡ruùiÚ
 *
	gasCBy‹Code
::
	$D–‘eIn¡ruùiÚ
(
cBy‹In¡ruùiÚ
 *
š¡r
)

1596 ifĞ
š¡r
 == 0 )  0;

1598 
cBy‹In¡ruùiÚ
 *
»t
 = 
š¡r
->
´ev
 ? in¡r->´ev : in¡r->
Ãxt
;

1600 
	`RemoveIn¡ruùiÚ
(
š¡r
);

1602 
’gše
->
memÜyMgr
.
	`F»eBy‹In¡ruùiÚ
(
š¡r
);

1604  
»t
;

1605 
	}
}

1607 
	gasCBy‹Code
::
	$Ouut
(
asDWORD
 *
¬¿y
)

1611 
asDWORD
 *
­
 = 
¬¿y
;

1613 
cBy‹In¡ruùiÚ
 *
š¡r
 = 
fœ¡
;

1614  
š¡r
 )

1616 ifĞ
š¡r
->
	`G‘Size
() > 0 )

1618 *(
asBYTE
*)
­
 = 
	`asBYTE
(
š¡r
->
İ
);

1619 *(((
asBYTE
*)
­
)+1) = 0;

1620  
asBCInfo
[
š¡r
->
İ
].
ty³
 )

1622 
asBCTYPE_NO_ARG
:

1623 *(((
asWORD
*)
­
)+1) = 0;

1625 
asBCTYPE_wW_rW_rW_ARG
:

1626 *(((
asWORD
*)
­
)+1èğ
š¡r
->
wArg
[0];

1627 *(((
asWORD
*)
­
)+2èğ
š¡r
->
wArg
[1];

1628 *(((
asWORD
*)
­
)+3èğ
š¡r
->
wArg
[2];

1630 
asBCTYPE_wW_DW_ARG
:

1631 
asBCTYPE_rW_DW_ARG
:

1632 
asBCTYPE_W_DW_ARG
:

1633 *(((
asWORD
*)
­
)+1èğ
š¡r
->
wArg
[0];

1634 *(
­
+1èğ*(
asDWORD
*)&
š¡r
->
¬g
;

1636 
asBCTYPE_wW_rW_DW_ARG
:

1637 
asBCTYPE_rW_W_DW_ARG
:

1638 *(((
asWORD
*)
­
)+1èğ
š¡r
->
wArg
[0];

1639 *(((
asWORD
*)
­
)+2èğ
š¡r
->
wArg
[1];

1640 *(
­
+2èğ*(
asDWORD
*)&
š¡r
->
¬g
;

1642 
asBCTYPE_wW_QW_ARG
:

1643 
asBCTYPE_rW_QW_ARG
:

1644 *(((
asWORD
*)
­
)+1èğ
š¡r
->
wArg
[0];

1645 *(
asQWORD
*)(
­
+1èğ
	`asQWORD
(
š¡r
->
¬g
);

1647 
asBCTYPE_W_ARG
:

1648 
asBCTYPE_rW_ARG
:

1649 
asBCTYPE_wW_ARG
:

1650 *(((
asWORD
*)
­
)+1èğ
š¡r
->
wArg
[0];

1652 
asBCTYPE_wW_rW_ARG
:

1653 
asBCTYPE_rW_rW_ARG
:

1654 
asBCTYPE_wW_W_ARG
:

1655 *(((
asWORD
 *)
­
)+1èğ
š¡r
->
wArg
[0];

1656 *(((
asWORD
 *)
­
)+2èğ
š¡r
->
wArg
[1];

1658 
asBCTYPE_QW_DW_ARG
:

1659 
asBCTYPE_DW_DW_ARG
:

1660 
asBCTYPE_QW_ARG
:

1661 
asBCTYPE_DW_ARG
:

1662 *(((
asWORD
*)
­
)+1) = 0;

1663 
	`memıy
(
­
+1, &
š¡r
->
¬g
, in¡r->
	`G‘Size
()*4-4);

1667 
	`asASSERT
(
çl£
);

1672 
­
 +ğ
š¡r
->
	`G‘Size
();

1673 
š¡r
 = in¡r->
Ãxt
;

1675 
	}
}

1677 
	gasCBy‹Code
::
	$Po¡Proûss
()

1679 ifĞ
fœ¡
 == 0 ) ;

1686 
Ïrge¡SckU£d
 = 0;

1688 
cBy‹In¡ruùiÚ
 *
š¡r
 = 
fœ¡
;

1689  
š¡r
 )

1691 
š¡r
->
m¬ked
 = 
çl£
;

1692 
š¡r
->
¡ackSize
 = -1;

1693 
š¡r
 = in¡r->
Ãxt
;

1697 
asCA¼ay
<
cBy‹In¡ruùiÚ
 *> 
·ths
;

1698 
	`AddP©h
(
·ths
, 
fœ¡
, 0);

1701  
asUINT
 
p
 = 0;… < 
·ths
.
	`G‘L’gth
(); ++p )

1703 
š¡r
 = 
·ths
[
p
];

1704 
¡ackSize
 = 
š¡r
->stackSize;

1706  
š¡r
 )

1708 
š¡r
->
m¬ked
 = 
Œue
;

1709 
š¡r
->
¡ackSize
 = stackSize;

1710 
¡ackSize
 +ğ
š¡r
->
¡ackInc
;

1711 ifĞ
¡ackSize
 > 
Ïrge¡SckU£d
 )

1712 
Ïrge¡SckU£d
 = 
¡ackSize
;

1714 ifĞ
š¡r
->
İ
 =ğ
asBC_JMP
 )

1717 
Ïb–
 = *((*è
	`ARG_DW
(
š¡r
->
¬g
));

1718 
cBy‹In¡ruùiÚ
 *
de¡
 = 0;

1719 
r
 = 
	`FšdLab–
(
Ïb–
, 
š¡r
, &
de¡
, 0); 
	`asASSERT
Ğ¸=ğ0 ); 
	`UNUSED_VAR
(r);

1721 
	`AddP©h
(
·ths
, 
de¡
, 
¡ackSize
);

1724 ifĞ
š¡r
->
İ
 =ğ
asBC_JZ
 || in¡r->İ =ğ
asBC_JNZ
 ||

1725 
š¡r
->
İ
 =ğ
asBC_JLowZ
 || in¡r->İ =ğ
asBC_JLowNZ
 ||

1726 
š¡r
->
İ
 =ğ
asBC_JS
 || in¡r->İ =ğ
asBC_JNS
 ||

1727 
š¡r
->
İ
 =ğ
asBC_JP
 || in¡r->İ =ğ
asBC_JNP
 )

1730 
Ïb–
 = *((*è
	`ARG_DW
(
š¡r
->
¬g
));

1731 
cBy‹In¡ruùiÚ
 *
de¡
 = 0;

1732 
r
 = 
	`FšdLab–
(
Ïb–
, 
š¡r
, &
de¡
, 0); 
	`asASSERT
Ğ¸=ğ0 ); 
	`UNUSED_VAR
(r);

1734 
	`AddP©h
(
·ths
, 
de¡
, 
¡ackSize
);

1737 
	`AddP©h
(
·ths
, 
š¡r
->
Ãxt
, 
¡ackSize
);

1741 ifĞ
š¡r
->
İ
 =ğ
asBC_JMPP
 )

1744 
asDWORD
 
max
 = *
	`ARG_DW
(
š¡r
->
¬g
);

1747 
cBy‹In¡ruùiÚ
 *
de¡
 = 
š¡r
->
Ãxt
;

1748  
asDWORD
 
n
 = 0;‚ <ğ
max
 && 
de¡
 != 0; ++n )

1750 
	`AddP©h
(
·ths
, 
de¡
, 
¡ackSize
);

1751 
de¡
 = de¡->
Ãxt
;

1758 
š¡r
 = in¡r->
Ãxt
;

1759 ifĞ
š¡r
 =ğ0 || in¡r->
m¬ked
 )

1766 
š¡r
 = 
fœ¡
;

1767  
š¡r
 )

1769 ifĞ
š¡r
->
m¬ked
 =ğ
çl£
 )

1774 
cBy‹In¡ruùiÚ
 *
cu¼
 = 
š¡r
;

1775 
š¡r
 = in¡r->
Ãxt
;

1776 
	`D–‘eIn¡ruùiÚ
(
cu¼
);

1779 
š¡r
 = in¡r->
Ãxt
;

1781 
	}
}

1783 #ifdeà
AS_DEBUG


1784 
	gasCBy‹Code
::
	$DebugOuut
(cÚ¡ *
Çme
, 
asCSütEngše
 *
’gše
, 
asCSütFunùiÚ
 *
func
)

1786 
	`_mkdœ
("AS_DEBUG");

1788 
asCSŒšg
 
¡r
 = "AS_DEBUG/";

1789 
¡r
 +ğ
Çme
;

1791 #ià
_MSC_VER
 >= 1500

1792 
FILE
 *
fe
;

1793 
	`fİ’_s
(&
fe
, 
¡r
.
	`Add»ssOf
(), "w");

1795 
FILE
 *
fe
 = 
	`fİ’
(
¡r
.
	`Add»ssOf
(), "w");

1798 #ià!
	`defšed
(
AS_XENON
)

1799 
	`asASSERT
Ğ
fe
 );

1802 ifĞ
fe
 == 0 )

1805 
asUINT
 
n
;

1807 
	`årštf
(
fe
, "%s\n\n", 
func
->
	`G‘Deş¬©iÚ
());

1809 
	`årštf
(
fe
, "Temps: ");

1810  
n
 = 0;‚ < 
‹mpÜ¬yV¬ŸbËs
.
	`G‘L’gth
();‚++ )

1812 
	`årštf
(
fe
, "%d", 
‹mpÜ¬yV¬ŸbËs
[
n
]);

1813 ifĞ
n
 < 
‹mpÜ¬yV¬ŸbËs
.
	`G‘L’gth
()-1 )

1814 
	`årštf
(
fe
, ", ");

1816 
	`årštf
(
fe
, "\n\n");

1818 
	`årštf
(
fe
, "Variables: \n");

1819  
n
 = 0;‚ < 
func
->
v¬ŸbËs
.
	`G‘L’gth
();‚++ )

1821 
	`årštf
(
fe
, " %.3d: % %s\n", 
func
->
v¬ŸbËs
[
n
]->
¡ackOff£t
, func->v¬ŸbËs[n]->
ty³
.
	`FÜm©
().
	`Add»ssOf
(), func->v¬ŸbËs[n]->
Çme
.AddressOf());

1823 
asUINT
 
off£t
 = 0;

1824 ifĞ
func
->
objeùTy³
 )

1826 
	`årštf
(
fe
, " %.3d: % this\n", 0, 
func
->
objeùTy³
->
Çme
.
	`Add»ssOf
());

1827 
off£t
 -ğ
AS_PTR_SIZE
;

1829  
n
 = 0;‚ < 
func
->
·¿m‘”Ty³s
.
	`G‘L’gth
();‚++ )

1831 
boŞ
 
found
 = 
çl£
;

1832  
asUINT
 
v
 = 0; v < 
func
->
v¬ŸbËs
.
	`G‘L’gth
(); v++ )

1834 ifĞ
func
->
v¬ŸbËs
[
v
]->
¡ackOff£t
 =ğ()
off£t
 )

1836 
found
 = 
Œue
;

1840 ifĞ!
found
 )

1841 
	`årštf
(
fe
, " %.3d: % {nÚam·¿m}\n", 
off£t
, 
func
->
·¿m‘”Ty³s
[
n
].
	`FÜm©
().
	`Add»ssOf
());

1843 
off£t
 -ğ
func
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

1845  
n
 = 0;‚ < 
func
->
objV¬ŸbËPos
.
	`G‘L’gth
();‚++ )

1847 
boŞ
 
found
 = 
çl£
;

1848  
asUINT
 
v
 = 0; v < 
func
->
v¬ŸbËs
.
	`G‘L’gth
(); v++ )

1850 ifĞ
func
->
v¬ŸbËs
[
v
]->
¡ackOff£t
 =ğfunc->
objV¬ŸbËPos
[
n
] )

1852 
found
 = 
Œue
;

1856 ifĞ!
found
 )

1857 
	`årštf
(
fe
, " %.3d: % {nÚame}\n", 
func
->
objV¬ŸbËPos
[
n
], func->
objV¬ŸbËTy³s
[n]->
Çme
.
	`Add»ssOf
());

1859 
	`årštf
(
fe
, "\n\n");

1861 
pos
 = 0;

1862 
asUINT
 
lšeIndex
 = 0;

1863 
cBy‹In¡ruùiÚ
 *
š¡r
 = 
fœ¡
;

1864  
š¡r
 )

1866 ifĞ
lšeIndex
 < 
lšeNumb”s
.
	`G‘L’gth
(è&&†šeNumb”s[lšeIndex] =ğ
pos
 )

1868 
asDWORD
 
lše
 = 
lšeNumb”s
[
lšeIndex
+1];

1869 
	`årštf
(
fe
, "- %d,%d -\n", ()(
lše
&0xFFFFF), ()(line>>20));

1870 
lšeIndex
 += 2;

1873 
	`årštf
(
fe
, "%5d ", 
pos
);

1874 
pos
 +ğ
š¡r
->
	`G‘Size
();

1876 
	`årštf
(
fe
, "%3d %ø", 
š¡r
->
¡ackSize
 + 
func
->
v¬ŸbËS·û
, in¡r->
m¬ked
 ? '*' : ' ');

1878  
asBCInfo
[
š¡r
->
İ
].
ty³
 )

1880 
asBCTYPE_W_ARG
:

1881 ifĞ
š¡r
->
İ
 =ğ
asBC_STR
 )

1883 
id
 = 
š¡r
->
wArg
[0];

1884 cÚ¡ 
asCSŒšg
 &
¡r
 = 
’gše
->
	`G‘CÚ¡ªtSŒšg
(
id
);

1885 
	`årštf
(
fe
, " %-8 %d (l:%ld s:\"%.10s\")\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, in¡r->
wArg
[0], ()
¡r
.
	`G‘L’gth
(), sŒ.
	`Add»ssOf
());

1888 
	`årštf
(
fe
, " %-8 %d\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, in¡r->
wArg
[0]);

1891 
asBCTYPE_wW_ARG
:

1892 
asBCTYPE_rW_ARG
:

1893 
	`årštf
(
fe
, " %-8 v%d\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, in¡r->
wArg
[0]);

1896 
asBCTYPE_wW_rW_ARG
:

1897 
asBCTYPE_rW_rW_ARG
:

1898 
	`årštf
(
fe
, " %-8 v%d, v%d\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, in¡r->
wArg
[0], instr->wArg[1]);

1901 
asBCTYPE_wW_W_ARG
:

1902 
	`årštf
(
fe
, " %-8 v%d, %d\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, in¡r->
wArg
[0], instr->wArg[1]);

1905 
asBCTYPE_wW_rW_DW_ARG
:

1906 
asBCTYPE_rW_W_DW_ARG
:

1907  
š¡r
->
İ
 )

1909 
asBC_ADDIf
:

1910 
asBC_SUBIf
:

1911 
asBC_MULIf
:

1912 
	`årštf
(
fe
, " %-8 v%d, v%d, %f\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, in¡r->
wArg
[0], in¡r->wArg[1], *((*è
	`ARG_DW
(š¡r->
¬g
)));

1915 
	`årštf
(
fe
, " %-8 v%d, v%d, %d\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, in¡r->
wArg
[0], in¡r->wArg[1], *((*è
	`ARG_DW
(š¡r->
¬g
)));

1920 
asBCTYPE_DW_ARG
:

1921  
š¡r
->
İ
 )

1923 
asBC_OBJTYPE
:

1924 
	`årštf
(
fe
, " %-8 0x%x\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, (
asUINT
)*
	`ARG_DW
(š¡r->
¬g
));

1927 
asBC_PshC4
:

1928 
asBC_Ca¡
:

1929 
	`årštf
(
fe
, " %-8 0x%x (i:%d, f:%g)\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, (
asUINT
)*
	`ARG_DW
(š¡r->
¬g
), *((*) ARG_DW(instr->arg)), *((*) ARG_DW(instr->arg)));

1932 
asBC_TYPEID
:

1933 
	`årštf
(
fe
, " %-8 0x%x '%s'\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, (
asUINT
)*
	`ARG_DW
(š¡r->
¬g
), 
’gše
->
	`G‘Ty³Deş¬©iÚ
(()*ARG_DW(instr->arg)));

1936 
asBC_CALL
:

1937 
asBC_CALLSYS
:

1938 
asBC_CALLBND
:

1939 
asBC_CALLINTF
:

1941 
funcID
 = *(*)
	`ARG_DW
(
š¡r
->
¬g
);

1942 
asCSŒšg
 
deş
 = 
’gše
->
	`G‘FunùiÚDeş¬©iÚ
(
funcID
);

1944 
	`årštf
(
fe
, " %-8 %d (%s)\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, *((*è
	`ARG_DW
(š¡r->
¬g
)), 
deş
.
	`Add»ssOf
());

1948 
asBC_REFCPY
:

1949 
	`årštf
(
fe
, " %-8 0x%x\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, *((*è
	`ARG_DW
(š¡r->
¬g
)));

1952 
asBC_JMP
:

1953 
asBC_JZ
:

1954 
asBC_JLowZ
:

1955 
asBC_JS
:

1956 
asBC_JP
:

1957 
asBC_JNZ
:

1958 
asBC_JLowNZ
:

1959 
asBC_JNS
:

1960 
asBC_JNP
:

1961 
	`årštf
(
fe
, " %-8 %+d (d:%d)\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, *((*è
	`ARG_DW
(š¡r->
¬g
)), 
pos
+*((*) ARG_DW(instr->arg)));

1965 
	`årštf
(
fe
, " %-8 %d\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, *((*è
	`ARG_DW
(š¡r->
¬g
)));

1970 
asBCTYPE_QW_ARG
:

1971 #ifdeà
__GNUC__


1972 #ifdeà
_LP64


1973 
	`årštf
(
fe
, " %-8 0x%lx (i:%ld, f:%g)\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, *
	`ARG_QW
(š¡r->
¬g
), *((
asINT64
*) ARG_QW(instr->arg)), *((*) ARG_QW(instr->arg)));

1975 
	`årštf
(
fe
, " %-8 0x%Îx (i:%Îd, f:%g)\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, *
	`ARG_QW
(š¡r->
¬g
), *((
asINT64
*) ARG_QW(instr->arg)), *((*) ARG_QW(instr->arg)));

1978 
	`årštf
(
fe
, " %-8 0x%I64x (i:%I64d, f:%g)\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, *
	`ARG_QW
(š¡r->
¬g
), *((
asINT64
*) ARG_QW(instr->arg)), *((*) ARG_QW(instr->arg)));

1982 
asBCTYPE_wW_QW_ARG
:

1983 
asBCTYPE_rW_QW_ARG
:

1984 #ifdeà
__GNUC__


1985 #ifdeà
_LP64


1986 
	`årštf
(
fe
, " %-8 v%d, 0x%lx (i:%ld, f:%g)\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, in¡r->
wArg
[0], *
	`ARG_QW
(š¡r->
¬g
), *((
asINT64
*) ARG_QW(instr->arg)), *((*) ARG_QW(instr->arg)));

1988 
	`årštf
(
fe
, " %-8 v%d, 0x%Îx (i:%Îd, f:%g)\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, in¡r->
wArg
[0], *
	`ARG_QW
(š¡r->
¬g
), *((
asINT64
*) ARG_QW(instr->arg)), *((*) ARG_QW(instr->arg)));

1991 
	`årštf
(
fe
, " %-8 v%d, 0x%I64x (i:%I64d, f:%g)\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, in¡r->
wArg
[0], *
	`ARG_QW
(š¡r->
¬g
), *((
asINT64
*) ARG_QW(instr->arg)), *((*) ARG_QW(instr->arg)));

1995 
asBCTYPE_DW_DW_ARG
:

1996 ifĞ
š¡r
->
İ
 =ğ
asBC_ALLOC
 )

1998 
asCObjeùTy³
 *
Ù
 = *×sCObjeùTy³**)
	`ARG_DW
(
š¡r
->
¬g
);

1999 
	`årštf
(
fe
, " %-8 0x%x, %d (ty³:%s)\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, *(*)
	`ARG_DW
(š¡r->
¬g
), *(*)(ARG_DW(š¡r->¬g)+1), 
Ù
->
	`G‘Name
());

2002 
	`årštf
(
fe
, " %-8 %u, %d\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, *(*)
	`ARG_DW
(š¡r->
¬g
), *(*)(ARG_DW(instr->arg)+1));

2005 
asBCTYPE_QW_DW_ARG
:

2006 ifĞ
š¡r
->
İ
 =ğ
asBC_ALLOC
 )

2008 
asCObjeùTy³
 *
Ù
 = *×sCObjeùTy³**)
	`ARG_QW
(
š¡r
->
¬g
);

2009 #ifdeà
__GNUC__


2010 #ifdeà
AS_64BIT_PTR


2011 
	`årštf
(
fe
, " %-8 0x%lx, %d (ty³:%s)\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, *(
asINT64
*)
	`ARG_QW
(š¡r->
¬g
), *(*)(
	`ARG_DW
(š¡r->¬g)+2), 
Ù
->
	`G‘Name
());

2013 
	`årštf
(
fe
, " %-8 0x%Îx, %d (ty³:%s)\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, *(
asINT64
*)
	`ARG_QW
(š¡r->
¬g
), *(*)(
	`ARG_DW
(š¡r->¬g)+2), 
Ù
->
	`G‘Name
());

2016 
	`årštf
(
fe
, " %-8 0x%I64x, %d (ty³:%s)\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, *(
asINT64
*)
	`ARG_QW
(š¡r->
¬g
), *(*)(
	`ARG_DW
(š¡r->¬g)+2), 
Ù
->
	`G‘Name
());

2020 #ifdeà
__GNUC__


2021 #ifdeà
AS_64BIT_PTR


2022 
	`årštf
(
fe
, " %-8 %lu, %d\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, *(
asINT64
*)
	`ARG_QW
(š¡r->
¬g
), *(*)(
	`ARG_DW
(instr->arg)+2));

2024 
	`årštf
(
fe
, " %-8 %Îu, %d\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, *(
asINT64
*)
	`ARG_QW
(š¡r->
¬g
), *(*)(
	`ARG_DW
(instr->arg)+2));

2027 
	`årštf
(
fe
, " %-8 %I64u, %d\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, *(
asINT64
*)
	`ARG_QW
(š¡r->
¬g
), *(*)(
	`ARG_DW
(instr->arg)+2));

2031 
asBCTYPE_INFO
:

2032 ifĞ
š¡r
->
İ
 =ğ
asBC_LABEL
 )

2033 
	`årštf
(
fe
, "%d:\n", 
š¡r
->
wArg
[0]);

2034 ifĞ
š¡r
->
İ
 =ğ
asBC_LINE
 )

2035 
	`årštf
(
fe
, " %s\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
);

2036 ifĞ
š¡r
->
İ
 =ğ
asBC_Block
 )

2037 
	`årštf
(
fe
, "%c\n", 
š¡r
->
wArg
[0] ? '{' : '}');

2040 
asBCTYPE_rW_DW_ARG
:

2041 
asBCTYPE_wW_DW_ARG
:

2042 
asBCTYPE_W_DW_ARG
:

2043 ifĞ
š¡r
->
İ
 =ğ
asBC_S‘V1
 )

2044 
	`årštf
(
fe
, " %-8 v%d, 0x%x\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, in¡r->
wArg
[0], *(
asBYTE
*)
	`ARG_DW
(š¡r->
¬g
));

2045 ifĞ
š¡r
->
İ
 =ğ
asBC_S‘V2
 )

2046 
	`årštf
(
fe
, " %-8 v%d, 0x%x\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, in¡r->
wArg
[0], *(
asWORD
*)
	`ARG_DW
(š¡r->
¬g
));

2047 ifĞ
š¡r
->
İ
 =ğ
asBC_S‘V4
 )

2048 
	`årštf
(
fe
, " %-8 v%d, 0x%x (i:%d, f:%g)\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, in¡r->
wArg
[0], (
asUINT
)*
	`ARG_DW
(š¡r->
¬g
), *((*) ARG_DW(instr->arg)), *((*) ARG_DW(instr->arg)));

2049 ifĞ
š¡r
->
İ
 =ğ
asBC_CMPIf
 )

2050 
	`årštf
(
fe
, " %-8 v%d, %f\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, in¡r->
wArg
[0], *(*)
	`ARG_DW
(š¡r->
¬g
));

2052 
	`årštf
(
fe
, " %-8 v%d, %d\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, in¡r->
wArg
[0], (
asUINT
)*
	`ARG_DW
(š¡r->
¬g
));

2055 
asBCTYPE_wW_rW_rW_ARG
:

2056 
	`årštf
(
fe
, " %-8 v%d, v%d, v%d\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
, in¡r->
wArg
[0], instr->wArg[1], instr->wArg[2]);

2059 
asBCTYPE_NO_ARG
:

2060 
	`årštf
(
fe
, " %s\n", 
asBCInfo
[
š¡r
->
İ
].
Çme
);

2064 
	`asASSERT
(
çl£
);

2067 
š¡r
 = in¡r->
Ãxt
;

2070 
	`fşo£
(
fe
);

2071 
	}
}

2076 
	gasCBy‹Code
::
	$In£¹Fœ¡In¡rDWORD
(
asEBCIn¡r
 
bc
, 
asDWORD
 
·¿m
)

2078 
	`asASSERT
(
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_DW_ARG
);

2079 
	`asASSERT
(
asBCInfo
[
bc
].
¡ackInc
 != 0xFFFF);

2081 ifĞ
	`AddIn¡ruùiÚFœ¡
() < 0 )

2084 
fœ¡
->
İ
 = 
bc
;

2085 *
	`ARG_DW
(
fœ¡
->
¬g
èğ
·¿m
;

2086 
fœ¡
->
size
 = 
asBCTy³Size
[
asBCInfo
[
bc
].
ty³
];

2087 
fœ¡
->
¡ackInc
 = 
asBCInfo
[
bc
].stackInc;

2089  
fœ¡
->
¡ackInc
;

2090 
	}
}

2092 
	gasCBy‹Code
::
	$In£¹Fœ¡In¡rQWORD
(
asEBCIn¡r
 
bc
, 
asQWORD
 
·¿m
)

2094 
	`asASSERT
(
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_QW_ARG
);

2095 
	`asASSERT
(
asBCInfo
[
bc
].
¡ackInc
 != 0xFFFF);

2097 ifĞ
	`AddIn¡ruùiÚFœ¡
() < 0 )

2100 
fœ¡
->
İ
 = 
bc
;

2101 *
	`ARG_QW
(
fœ¡
->
¬g
èğ
·¿m
;

2102 
fœ¡
->
size
 = 
asBCTy³Size
[
asBCInfo
[
bc
].
ty³
];

2103 
fœ¡
->
¡ackInc
 = 
asBCInfo
[
bc
].stackInc;

2105  
fœ¡
->
¡ackInc
;

2106 
	}
}

2108 
	gasCBy‹Code
::
	$In¡r
(
asEBCIn¡r
 
bc
)

2110 
	`asASSERT
(
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_NO_ARG
);

2111 
	`asASSERT
(
asBCInfo
[
bc
].
¡ackInc
 != 0xFFFF);

2113 ifĞ
	`AddIn¡ruùiÚ
() < 0 )

2116 
Ï¡
->
İ
 = 
bc
;

2117 
Ï¡
->
size
 = 
asBCTy³Size
[
asBCInfo
[
bc
].
ty³
];

2118 
Ï¡
->
¡ackInc
 = 
asBCInfo
[
bc
].stackInc;

2120  
Ï¡
->
¡ackInc
;

2121 
	}
}

2123 
	gasCBy‹Code
::
	$In¡rW_W_W
(
asEBCIn¡r
 
bc
, 
a
, 
b
, 
c
)

2125 
	`asASSERT
(
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_wW_rW_rW_ARG
);

2126 
	`asASSERT
(
asBCInfo
[
bc
].
¡ackInc
 == 0);

2128 ifĞ
	`AddIn¡ruùiÚ
() < 0 )

2131 
Ï¡
->
İ
 = 
bc
;

2132 
Ï¡
->
wArg
[0] = ()
a
;

2133 
Ï¡
->
wArg
[1] = ()
b
;

2134 
Ï¡
->
wArg
[2] = ()
c
;

2135 
Ï¡
->
size
 = 
asBCTy³Size
[
asBCInfo
[
bc
].
ty³
];

2136 
Ï¡
->
¡ackInc
 = 
asBCInfo
[
bc
].stackInc;

2138  
Ï¡
->
¡ackInc
;

2139 
	}
}

2141 
	gasCBy‹Code
::
	$In¡rW_W
(
asEBCIn¡r
 
bc
, 
a
, 
b
)

2143 
	`asASSERT
(
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_wW_rW_ARG
 ||

2144 
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_rW_rW_ARG
);

2145 
	`asASSERT
(
asBCInfo
[
bc
].
¡ackInc
 == 0);

2147 ifĞ
	`AddIn¡ruùiÚ
() < 0 )

2150 
Ï¡
->
İ
 = 
bc
;

2151 
Ï¡
->
wArg
[0] = ()
a
;

2152 
Ï¡
->
wArg
[1] = ()
b
;

2153 
Ï¡
->
size
 = 
asBCTy³Size
[
asBCInfo
[
bc
].
ty³
];

2154 
Ï¡
->
¡ackInc
 = 
asBCInfo
[
bc
].stackInc;

2156  
Ï¡
->
¡ackInc
;

2157 
	}
}

2159 
	gasCBy‹Code
::
	$In¡rW_PTR
(
asEBCIn¡r
 
bc
, 
a
, *
·¿m
)

2161 
	`asASSERT
(
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_wW_PTR_ARG
);

2162 
	`asASSERT
(
asBCInfo
[
bc
].
¡ackInc
 != 0xFFFF);

2164 ifĞ
	`AddIn¡ruùiÚ
() < 0 )

2167 
Ï¡
->
İ
 = 
bc
;

2168 
Ï¡
->
wArg
[0] = 
a
;

2169 *
	`ARG_PTR
(
Ï¡
->
¬g
èğ(
asPWORD
)
·¿m
;

2170 
Ï¡
->
size
 = 
asBCTy³Size
[
asBCInfo
[
bc
].
ty³
];

2171 
Ï¡
->
¡ackInc
 = 
asBCInfo
[
bc
].stackInc;

2173  
Ï¡
->
¡ackInc
;

2174 
	}
}

2176 
	gasCBy‹Code
::
	$In¡rW_DW
(
asEBCIn¡r
 
bc
, 
asWORD
 
a
, 
asDWORD
 
b
)

2178 
	`asASSERT
(
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_wW_DW_ARG
 ||

2179 
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_rW_DW_ARG
 ||

2180 
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_W_DW_ARG
);

2181 
	`asASSERT
(
asBCInfo
[
bc
].
¡ackInc
 == 0);

2183 ifĞ
	`AddIn¡ruùiÚ
() < 0 )

2186 
Ï¡
->
İ
 = 
bc
;

2187 
Ï¡
->
wArg
[0] = 
a
;

2188 *((*è
	`ARG_DW
(
Ï¡
->
¬g
)èğ
b
;

2189 
Ï¡
->
size
 = 
asBCTy³Size
[
asBCInfo
[
bc
].
ty³
];

2190 
Ï¡
->
¡ackInc
 = 
asBCInfo
[
bc
].stackInc;

2192  
Ï¡
->
¡ackInc
;

2193 
	}
}

2195 
	gasCBy‹Code
::
	$In¡rSHORT_B
(
asEBCIn¡r
 
bc
, 
a
, 
asBYTE
 
b
)

2197 
	`asASSERT
(
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_wW_DW_ARG
 ||

2198 
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_rW_DW_ARG
 ||

2199 
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_W_DW_ARG
);

2200 
	`asASSERT
(
asBCInfo
[
bc
].
¡ackInc
 == 0);

2202 ifĞ
	`AddIn¡ruùiÚ
() < 0 )

2205 
Ï¡
->
İ
 = 
bc
;

2206 
Ï¡
->
wArg
[0] = 
a
;

2211 
asBYTE
 *
¬gPŒ
 = (asBYTE*)
	`ARG_DW
(
Ï¡
->
¬g
);

2212 
¬gPŒ
[0] = 
b
;

2213 
¬gPŒ
[1] = 0;

2214 
¬gPŒ
[2] = 0;

2215 
¬gPŒ
[3] = 0;

2217 
Ï¡
->
size
 = 
asBCTy³Size
[
asBCInfo
[
bc
].
ty³
];

2218 
Ï¡
->
¡ackInc
 = 
asBCInfo
[
bc
].stackInc;

2220  
Ï¡
->
¡ackInc
;

2221 
	}
}

2223 
	gasCBy‹Code
::
	$In¡rSHORT_W
(
asEBCIn¡r
 
bc
, 
a
, 
asWORD
 
b
)

2225 
	`asASSERT
(
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_wW_DW_ARG
 ||

2226 
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_rW_DW_ARG
 ||

2227 
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_W_DW_ARG
);

2228 
	`asASSERT
(
asBCInfo
[
bc
].
¡ackInc
 == 0);

2230 ifĞ
	`AddIn¡ruùiÚ
() < 0 )

2233 
Ï¡
->
İ
 = 
bc
;

2234 
Ï¡
->
wArg
[0] = 
a
;

2239 
asWORD
 *
¬gPŒ
 = (asWORD*)
	`ARG_DW
(
Ï¡
->
¬g
);

2240 
¬gPŒ
[0] = 
b
;

2241 
¬gPŒ
[1] = 0;

2243 
Ï¡
->
size
 = 
asBCTy³Size
[
asBCInfo
[
bc
].
ty³
];

2244 
Ï¡
->
¡ackInc
 = 
asBCInfo
[
bc
].stackInc;

2246  
Ï¡
->
¡ackInc
;

2247 
	}
}

2249 
	gasCBy‹Code
::
	$In¡rSHORT_DW
(
asEBCIn¡r
 
bc
, 
a
, 
asDWORD
 
b
)

2251 
	`asASSERT
(
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_wW_DW_ARG
 ||

2252 
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_rW_DW_ARG
 ||

2253 
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_W_DW_ARG
);

2255 ifĞ
	`AddIn¡ruùiÚ
() < 0 )

2258 
Ï¡
->
İ
 = 
bc
;

2259 
Ï¡
->
wArg
[0] = 
a
;

2260 *((*è
	`ARG_DW
(
Ï¡
->
¬g
)èğ
b
;

2261 
Ï¡
->
size
 = 
asBCTy³Size
[
asBCInfo
[
bc
].
ty³
];

2262 
Ï¡
->
¡ackInc
 = 
asBCInfo
[
bc
].stackInc;

2264  
Ï¡
->
¡ackInc
;

2265 
	}
}

2267 
	gasCBy‹Code
::
	$In¡rW_QW
(
asEBCIn¡r
 
bc
, 
asWORD
 
a
, 
asQWORD
 
b
)

2269 
	`asASSERT
(
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_wW_QW_ARG
);

2270 
	`asASSERT
(
asBCInfo
[
bc
].
¡ackInc
 == 0);

2272 ifĞ
	`AddIn¡ruùiÚ
() < 0 )

2275 
Ï¡
->
İ
 = 
bc
;

2276 
Ï¡
->
wArg
[0] = 
a
;

2277 *
	`ARG_QW
(
Ï¡
->
¬g
èğ
b
;

2278 
Ï¡
->
size
 = 
asBCTy³Size
[
asBCInfo
[
bc
].
ty³
];

2279 
Ï¡
->
¡ackInc
 = 
asBCInfo
[
bc
].stackInc;

2281  
Ï¡
->
¡ackInc
;

2282 
	}
}

2284 
	gasCBy‹Code
::
	$In¡rSHORT_QW
(
asEBCIn¡r
 
bc
, 
a
, 
asQWORD
 
b
)

2286 
	`asASSERT
(
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_wW_QW_ARG
);

2287 
	`asASSERT
(
asBCInfo
[
bc
].
¡ackInc
 == 0);

2289 ifĞ
	`AddIn¡ruùiÚ
() < 0 )

2292 
Ï¡
->
İ
 = 
bc
;

2293 
Ï¡
->
wArg
[0] = 
a
;

2294 *
	`ARG_QW
(
Ï¡
->
¬g
èğ
b
;

2295 
Ï¡
->
size
 = 
asBCTy³Size
[
asBCInfo
[
bc
].
ty³
];

2296 
Ï¡
->
¡ackInc
 = 
asBCInfo
[
bc
].stackInc;

2298  
Ï¡
->
¡ackInc
;

2299 
	}
}

2301 
	gasCBy‹Code
::
	$In¡rW_FLOAT
(
asEBCIn¡r
 
bc
, 
asWORD
 
a
, 
b
)

2303 
	`asASSERT
(
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_wW_DW_ARG
);

2304 
	`asASSERT
(
asBCInfo
[
bc
].
¡ackInc
 == 0);

2306 ifĞ
	`AddIn¡ruùiÚ
() < 0 )

2309 
Ï¡
->
İ
 = 
bc
;

2310 
Ï¡
->
wArg
[0] = 
a
;

2311 *((*è
	`ARG_DW
(
Ï¡
->
¬g
)èğ
b
;

2312 
Ï¡
->
size
 = 
asBCTy³Size
[
asBCInfo
[
bc
].
ty³
];

2313 
Ï¡
->
¡ackInc
 = 
asBCInfo
[
bc
].stackInc;

2315  
Ï¡
->
¡ackInc
;

2316 
	}
}

2318 
	gasCBy‹Code
::
	$In¡rSHORT
(
asEBCIn¡r
 
bc
, 
·¿m
)

2320 
	`asASSERT
(
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_rW_ARG
 ||

2321 
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_wW_ARG
 ||

2322 
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_W_ARG
);

2323 
	`asASSERT
(
asBCInfo
[
bc
].
¡ackInc
 != 0xFFFF);

2325 ifĞ
	`AddIn¡ruùiÚ
() < 0 )

2328 
Ï¡
->
İ
 = 
bc
;

2329 
Ï¡
->
wArg
[0] = 
·¿m
;

2330 
Ï¡
->
size
 = 
asBCTy³Size
[
asBCInfo
[
bc
].
ty³
];

2331 
Ï¡
->
¡ackInc
 = 
asBCInfo
[
bc
].stackInc;

2333  
Ï¡
->
¡ackInc
;

2334 
	}
}

2336 
	gasCBy‹Code
::
	$In¡rINT
(
asEBCIn¡r
 
bc
, 
·¿m
)

2338 
	`asASSERT
(
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_DW_ARG
);

2339 
	`asASSERT
(
asBCInfo
[
bc
].
¡ackInc
 != 0xFFFF);

2341 ifĞ
	`AddIn¡ruùiÚ
() < 0 )

2344 
Ï¡
->
İ
 = 
bc
;

2345 *((*è
	`ARG_DW
(
Ï¡
->
¬g
)èğ
·¿m
;

2346 
Ï¡
->
size
 = 
asBCTy³Size
[
asBCInfo
[
bc
].
ty³
];

2347 
Ï¡
->
¡ackInc
 = 
asBCInfo
[
bc
].stackInc;

2349  
Ï¡
->
¡ackInc
;

2350 
	}
}

2352 
	gasCBy‹Code
::
	$In¡rDWORD
(
asEBCIn¡r
 
bc
, 
asDWORD
 
·¿m
)

2354 
	`asASSERT
(
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_DW_ARG
);

2355 
	`asASSERT
(
asBCInfo
[
bc
].
¡ackInc
 != 0xFFFF);

2357 ifĞ
	`AddIn¡ruùiÚ
() < 0 )

2360 
Ï¡
->
İ
 = 
bc
;

2361 *
	`ARG_DW
(
Ï¡
->
¬g
èğ
·¿m
;

2362 
Ï¡
->
size
 = 
asBCTy³Size
[
asBCInfo
[
bc
].
ty³
];

2363 
Ï¡
->
¡ackInc
 = 
asBCInfo
[
bc
].stackInc;

2365  
Ï¡
->
¡ackInc
;

2366 
	}
}

2368 
	gasCBy‹Code
::
	$In¡rPTR
(
asEBCIn¡r
 
bc
, *
·¿m
)

2370 
	`asASSERT
(
asBCInfo
[
bc
].
¡ackInc
 != 0xFFFF);

2372 ifĞ
	`AddIn¡ruùiÚ
() < 0 )

2375 
Ï¡
->
İ
 = 
bc
;

2376 
	`asASSERT
(
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_PTR_ARG
);

2377 *
	`ARG_PTR
(
Ï¡
->
¬g
èğ(
asPWORD
)
·¿m
;

2378 
Ï¡
->
size
 = 
asBCTy³Size
[
asBCInfo
[
bc
].
ty³
];

2379 
Ï¡
->
¡ackInc
 = 
asBCInfo
[
bc
].stackInc;

2381  
Ï¡
->
¡ackInc
;

2382 
	}
}

2384 
	gasCBy‹Code
::
	$In¡rQWORD
(
asEBCIn¡r
 
bc
, 
asQWORD
 
·¿m
)

2386 
	`asASSERT
(
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_QW_ARG
);

2387 
	`asASSERT
(
asBCInfo
[
bc
].
¡ackInc
 != 0xFFFF);

2389 ifĞ
	`AddIn¡ruùiÚ
() < 0 )

2392 
Ï¡
->
İ
 = 
bc
;

2393 *
	`ARG_QW
(
Ï¡
->
¬g
èğ
·¿m
;

2394 
Ï¡
->
size
 = 
asBCTy³Size
[
asBCInfo
[
bc
].
ty³
];

2395 
Ï¡
->
¡ackInc
 = 
asBCInfo
[
bc
].stackInc;

2397  
Ï¡
->
¡ackInc
;

2398 
	}
}

2400 
	gasCBy‹Code
::
	$In¡rWORD
(
asEBCIn¡r
 
bc
, 
asWORD
 
·¿m
)

2402 
	`asASSERT
(
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_W_ARG
 ||

2403 
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_rW_ARG
 ||

2404 
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_wW_ARG
);

2405 
	`asASSERT
(
asBCInfo
[
bc
].
¡ackInc
 != 0xFFFF);

2407 ifĞ
	`AddIn¡ruùiÚ
() < 0 )

2410 
Ï¡
->
İ
 = 
bc
;

2411 
Ï¡
->
wArg
[0] = 
·¿m
;

2412 
Ï¡
->
size
 = 
asBCTy³Size
[
asBCInfo
[
bc
].
ty³
];

2413 
Ï¡
->
¡ackInc
 = 
asBCInfo
[
bc
].stackInc;

2415  
Ï¡
->
¡ackInc
;

2416 
	}
}

2418 
	gasCBy‹Code
::
	$In¡rFLOAT
(
asEBCIn¡r
 
bc
, 
·¿m
)

2420 
	`asASSERT
(
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_DW_ARG
);

2421 
	`asASSERT
(
asBCInfo
[
bc
].
¡ackInc
 != 0xFFFF);

2423 ifĞ
	`AddIn¡ruùiÚ
() < 0 )

2426 
Ï¡
->
İ
 = 
bc
;

2427 *((*è
	`ARG_DW
(
Ï¡
->
¬g
)èğ
·¿m
;

2428 
Ï¡
->
size
 = 
asBCTy³Size
[
asBCInfo
[
bc
].
ty³
];

2429 
Ï¡
->
¡ackInc
 = 
asBCInfo
[
bc
].stackInc;

2431  
Ï¡
->
¡ackInc
;

2432 
	}
}

2434 
	gasCBy‹Code
::
	$In¡rDOUBLE
(
asEBCIn¡r
 
bc
, 
·¿m
)

2436 
	`asASSERT
(
asBCInfo
[
bc
].
ty³
 =ğ
asBCTYPE_QW_ARG
);

2437 
	`asASSERT
(
asBCInfo
[
bc
].
¡ackInc
 != 0xFFFF);

2439 ifĞ
	`AddIn¡ruùiÚ
() < 0 )

2442 
Ï¡
->
İ
 = 
bc
;

2443 *((*è
	`ARG_QW
(
Ï¡
->
¬g
)èğ
·¿m
;

2444 
Ï¡
->
size
 = 
asBCTy³Size
[
asBCInfo
[
bc
].
ty³
];

2445 
Ï¡
->
¡ackInc
 = 
asBCInfo
[
bc
].stackInc;

2447  
Ï¡
->
¡ackInc
;

2448 
	}
}

2450 
	gasCBy‹Code
::
	$G‘La¡In¡r
()

2452 ifĞ
Ï¡
 == 0 )  -1;

2454  
Ï¡
->
İ
;

2455 
	}
}

2457 
	gasCBy‹Code
::
	$RemoveLa¡In¡r
()

2459 ifĞ
Ï¡
 == 0 )  -1;

2461 ifĞ
fœ¡
 =ğ
Ï¡
 )

2463 
’gše
->
memÜyMgr
.
	`F»eBy‹In¡ruùiÚ
(
Ï¡
);

2464 
fœ¡
 = 0;

2465 
Ï¡
 = 0;

2469 
cBy‹In¡ruùiÚ
 *
bc
 = 
Ï¡
;

2470 
Ï¡
 = 
bc
->
´ev
;

2472 
bc
->
	`Remove
();

2473 
’gše
->
memÜyMgr
.
	`F»eBy‹In¡ruùiÚ
(
bc
);

2477 
	}
}

2479 
asDWORD
 
	gasCBy‹Code
::
	$G‘La¡In¡rV®ueDW
()

2481 ifĞ
Ï¡
 == 0 )  0;

2483  *
	`ARG_DW
(
Ï¡
->
¬g
);

2484 
	}
}

2486 
	gasCBy‹Code
::
	$DefšeTempÜ¬yV¬ŸbË
(
v¬Off£t
)

2488 
‹mpÜ¬yV¬ŸbËs
.
	`PushLa¡
(
v¬Off£t
);

2489 
	}
}

2493 
	gcBy‹In¡ruùiÚ
::
	$cBy‹In¡ruùiÚ
()

2495 
Ãxt
 = 0;

2496 
´ev
 = 0;

2498 
İ
 = 
asBC_LABEL
;

2500 
¬g
 = 0;

2501 
wArg
[0] = 0;

2502 
wArg
[1] = 0;

2503 
wArg
[2] = 0;

2504 
size
 = 0;

2505 
¡ackInc
 = 0;

2506 
m¬ked
 = 
çl£
;

2507 
¡ackSize
 = 0;

2508 
	}
}

2510 
	gcBy‹In¡ruùiÚ
::
	$AddAá”
(
cBy‹In¡ruùiÚ
 *
ÃxtCode
)

2512 ifĞ
Ãxt
 )

2513 
Ãxt
->
´ev
 = 
ÃxtCode
;

2515 
ÃxtCode
->
Ãxt
 =‚ext;

2516 
ÃxtCode
->
´ev
 = 
this
;

2517 
Ãxt
 = 
ÃxtCode
;

2518 
	}
}

2520 
	gcBy‹In¡ruùiÚ
::
	$AddBefÜe
(
cBy‹In¡ruùiÚ
 *
´evCode
)

2522 ifĞ
´ev
 )

2523 
´ev
->
Ãxt
 = 
´evCode
;

2525 
´evCode
->
´ev
 =…rev;

2526 
´evCode
->
Ãxt
 = 
this
;

2527 
´ev
 = 
´evCode
;

2528 
	}
}

2530 
	gcBy‹In¡ruùiÚ
::
	$G‘Size
()

2532  
size
;

2533 
	}
}

2535 
	gcBy‹In¡ruùiÚ
::
	$G‘SckInü—£
()

2537  
¡ackInc
;

2538 
	}
}

2540 
	gcBy‹In¡ruùiÚ
::
	$Remove
()

2542 ifĞ
´ev
 )…»v->
Ãxt
 =‚ext;

2543 ifĞ
Ãxt
 )‚ext->
´ev
 =…rev;

2544 
´ev
 = 0;

2545 
Ãxt
 = 0;

2546 
	}
}

2548 
	gEND_AS_NAMESPACE


	@../src/script/as_callfunc.cpp

40 
	~"as_cÚfig.h
"

41 
	~"as_ÿÎfunc.h
"

42 
	~"as_sü‹ngše.h
"

43 
	~"as_‹xts.h
"

45 
BEGIN_AS_NAMESPACE


47 
	$D‘eùC®lšgCÚv’tiÚ
(
boŞ
 
isM‘hod
, cÚ¡ 
asSFuncPŒ
 &
±r
, 
ÿÎCÚv
, 
asSSy¡emFunùiÚIÁ”çû
 *
š‹º®
)

49 
	`mem£t
(
š‹º®
, 0, (
asSSy¡emFunùiÚIÁ”çû
));

51 
š‹º®
->
func
 = 
±r
.±r.
f
.func;

54 ifĞ
š‹º®
->
func
 )

56 ifĞ
±r
.
æag
 =ğ1 && 
ÿÎCÚv
 !ğ
asCALL_GENERIC
 )

57  
asWRONG_CALLING_CONV
;

58 ifĞ
±r
.
æag
 =ğ2 && (
ÿÎCÚv
 =ğ
asCALL_GENERIC
 || c®lCÚv =ğ
asCALL_THISCALL
) )

59  
asWRONG_CALLING_CONV
;

60 ifĞ
±r
.
æag
 =ğ3 && 
ÿÎCÚv
 !ğ
asCALL_THISCALL
 )

61  
asWRONG_CALLING_CONV
;

64 
asDWORD
 
ba£
 = 
ÿÎCÚv
;

65 ifĞ!
isM‘hod
 )

67 ifĞ
ba£
 =ğ
asCALL_CDECL
 )

68 
š‹º®
->
ÿÎCÚv
 = 
ICC_CDECL
;

69 ifĞ
ba£
 =ğ
asCALL_STDCALL
 )

70 
š‹º®
->
ÿÎCÚv
 = 
ICC_STDCALL
;

71 ifĞ
ba£
 =ğ
asCALL_GENERIC
 )

72 
š‹º®
->
ÿÎCÚv
 = 
ICC_GENERIC_FUNC
;

74  
asNOT_SUPPORTED
;

78 #iâdeà
AS_NO_CLASS_METHODS


79 ifĞ
ba£
 =ğ
asCALL_THISCALL
 )

81 
š‹º®
->
ÿÎCÚv
 = 
ICC_THISCALL
;

82 #ifdeà
GNU_STYLE_VIRTUAL_METHOD


83 ifĞ(
	`size_t
(
±r
.±r.
f
.
func
) & 1) )

84 
š‹º®
->
ÿÎCÚv
 = 
ICC_VIRTUAL_THISCALL
;

86 
š‹º®
->
ba£Off£t
 = ( )
	`MULTI_BASE_OFFSET
(
±r
);

87 #ià
	`defšed
(
AS_ARM
è&& defšed(
__GNUC__
)

91 ifĞ(
	`size_t
(
š‹º®
->
ba£Off£t
) & 1) )

92 
š‹º®
->
ÿÎCÚv
 = 
ICC_VIRTUAL_THISCALL
;

95 #ifdeà
HAVE_VIRTUAL_BASE_OFFSET


97 ifĞ
	`VIRTUAL_BASE_OFFSET
(
±r
) != 0 )

98  
asNOT_SUPPORTED
;

103 ifĞ
ba£
 =ğ
asCALL_CDECL_OBJLAST
 )

104 
š‹º®
->
ÿÎCÚv
 = 
ICC_CDECL_OBJLAST
;

105 ifĞ
ba£
 =ğ
asCALL_CDECL_OBJFIRST
 )

106 
š‹º®
->
ÿÎCÚv
 = 
ICC_CDECL_OBJFIRST
;

107 ifĞ
ba£
 =ğ
asCALL_GENERIC
 )

108 
š‹º®
->
ÿÎCÚv
 = 
ICC_GENERIC_METHOD
;

110  
asNOT_SUPPORTED
;

114 
	}
}

117 
	$P»·»Sy¡emFunùiÚG’”ic
(
asCSütFunùiÚ
 *
func
, 
asSSy¡emFunùiÚIÁ”çû
 *
š‹º®
, 
asCSütEngše
 * )

119 
	`asASSERT
(
š‹º®
->
ÿÎCÚv
 =ğ
ICC_GENERIC_METHOD
 || iÁ”Çl->ÿÎCÚv =ğ
ICC_GENERIC_FUNC
);

122 
š‹º®
->
·¿mSize
 = 
func
->
	`G‘S·ûN“dedFÜArgum’ts
();

125 
	}
}

128 
	$P»·»Sy¡emFunùiÚ
(
asCSütFunùiÚ
 *
func
, 
asSSy¡emFunùiÚIÁ”çû
 *
š‹º®
, 
asCSütEngše
 *
’gše
)

130 #ifdeà
AS_MAX_PORTABILITY


133 
	`asASSERT
(
çl£
);

137 ifĞ
func
->
»tuºTy³
.
	`IsReã»nû
(è|| func->»tuºTy³.
	`IsObjeùHªdË
() )

139 
š‹º®
->
ho¡R‘uºInMemÜy
 = 
çl£
;

140 
š‹º®
->
ho¡R‘uºSize
 = (*)/4;

141 
š‹º®
->
ho¡R‘uºFlßt
 = 
çl£
;

144 ifĞ
func
->
»tuºTy³
.
	`IsObjeù
() )

146 
asDWORD
 
objTy³
 = 
func
->
»tuºTy³
.
	`G‘ObjeùTy³
()->
æags
;

149 
	`asASSERT
Ğ
objTy³
 & 
asOBJ_VALUE
 );

151 ifĞ!(
objTy³
 & (
asOBJ_APP_CLASS
 | 
asOBJ_APP_PRIMITIVE
 | 
asOBJ_APP_FLOAT
)) )

154 
’gše
->
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_INFORMATION
, 
func
->
	`G‘Deş¬©iÚSŒ
().
	`Add»ssOf
());

156 
asCSŒšg
 
¡r
;

157 
¡r
.
	`FÜm©
(
TXT_CANNOT_RET_TYPE_s_BY_VAL
, 
func
->
»tuºTy³
.
	`G‘ObjeùTy³
()->
Çme
.
	`Add»ssOf
());

158 
’gše
->
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_ERROR
, 
¡r
.
	`Add»ssOf
());

159 
’gše
->
	`CÚfigE¼Ü
(
asINVALID_CONFIGURATION
, 0, 0, 0);

161 ifĞ
objTy³
 & 
asOBJ_APP_CLASS
 )

163 
š‹º®
->
ho¡R‘uºFlßt
 = 
çl£
;

164 ifĞ
objTy³
 & 
COMPLEX_RETURN_MASK
 )

166 
š‹º®
->
ho¡R‘uºInMemÜy
 = 
Œue
;

167 
š‹º®
->
ho¡R‘uºSize
 = (*)/4;

171 #ifdeà
HAS_128_BIT_PRIMITIVES


172 ifĞ
func
->
»tuºTy³
.
	`G‘SizeInMemÜyDWÜds
() > 4 )

174 ifĞ
func
->
»tuºTy³
.
	`G‘SizeInMemÜyDWÜds
() > 2 )

177 
š‹º®
->
ho¡R‘uºInMemÜy
 = 
Œue
;

178 
š‹º®
->
ho¡R‘uºSize
 = (*)/4;

182 
š‹º®
->
ho¡R‘uºInMemÜy
 = 
çl£
;

183 
š‹º®
->
ho¡R‘uºSize
 = 
func
->
»tuºTy³
.
	`G‘SizeInMemÜyDWÜds
();

184 #ifdeà
SPLIT_OBJS_BY_MEMBER_TYPES


185 ifĞ
func
->
»tuºTy³
.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_APP_CLASS_ALLFLOATS
 )

186 
š‹º®
->
ho¡R‘uºFlßt
 = 
Œue
;

190 #ifdeà
THISCALL_RETURN_SIMPLE_IN_MEMORY


191 if((
š‹º®
->
ÿÎCÚv
 =ğ
ICC_THISCALL
 ||

192 
š‹º®
->
ÿÎCÚv
 =ğ
ICC_VIRTUAL_THISCALL
) &&

193 
func
->
»tuºTy³
.
	`G‘SizeInMemÜyDWÜds
(è>ğ
THISCALL_RETURN_SIMPLE_IN_MEMORY_MIN_SIZE
)

195 
š‹º®
->
ho¡R‘uºInMemÜy
 = 
Œue
;

196 
š‹º®
->
ho¡R‘uºSize
 = (*)/4;

199 #ifdeà
CDECL_RETURN_SIMPLE_IN_MEMORY


200 if((
š‹º®
->
ÿÎCÚv
 =ğ
ICC_CDECL
 ||

201 
š‹º®
->
ÿÎCÚv
 =ğ
ICC_CDECL_OBJLAST
 ||

202 
š‹º®
->
ÿÎCÚv
 =ğ
ICC_CDECL_OBJFIRST
) &&

203 
func
->
»tuºTy³
.
	`G‘SizeInMemÜyDWÜds
(è>ğ
CDECL_RETURN_SIMPLE_IN_MEMORY_MIN_SIZE
)

205 
š‹º®
->
ho¡R‘uºInMemÜy
 = 
Œue
;

206 
š‹º®
->
ho¡R‘uºSize
 = (*)/4;

209 #ifdeà
STDCALL_RETURN_SIMPLE_IN_MEMORY


210 ifĞ
š‹º®
->
ÿÎCÚv
 =ğ
ICC_STDCALL
 &&

211 
func
->
»tuºTy³
.
	`G‘SizeInMemÜyDWÜds
(è>ğ
STDCALL_RETURN_SIMPLE_IN_MEMORY_MIN_SIZE
)

213 
š‹º®
->
ho¡R‘uºInMemÜy
 = 
Œue
;

214 
š‹º®
->
ho¡R‘uºSize
 = (*)/4;

219 #ifdeà
SPLIT_OBJS_BY_MEMBER_TYPES


225 ifĞ!
š‹º®
->
ho¡R‘uºInMemÜy
 &&

226 !(
func
->
»tuºTy³
.
	`G‘ObjeùTy³
()->
æags
 & (
asOBJ_APP_CLASS_ALLINTS
 | 
asOBJ_APP_CLASS_ALLFLOATS
)) )

228 
’gše
->
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_INFORMATION
, 
func
->
	`G‘Deş¬©iÚSŒ
().
	`Add»ssOf
());

230 
asCSŒšg
 
¡r
;

231 
¡r
.
	`FÜm©
(
TXT_DONT_SUPPORT_RET_TYPE_s_BY_VAL
, 
func
->
»tuºTy³
.FÜm©().
	`Add»ssOf
());

232 
’gše
->
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_ERROR
, 
¡r
.
	`Add»ssOf
());

233 
’gše
->
	`CÚfigE¼Ü
(
asINVALID_CONFIGURATION
, 0, 0, 0);

237 ifĞ
objTy³
 & 
asOBJ_APP_PRIMITIVE
 )

239 
š‹º®
->
ho¡R‘uºInMemÜy
 = 
çl£
;

240 
š‹º®
->
ho¡R‘uºSize
 = 
func
->
»tuºTy³
.
	`G‘SizeInMemÜyDWÜds
();

241 
š‹º®
->
ho¡R‘uºFlßt
 = 
çl£
;

243 ifĞ
objTy³
 & 
asOBJ_APP_FLOAT
 )

245 
š‹º®
->
ho¡R‘uºInMemÜy
 = 
çl£
;

246 
š‹º®
->
ho¡R‘uºSize
 = 
func
->
»tuºTy³
.
	`G‘SizeInMemÜyDWÜds
();

247 
š‹º®
->
ho¡R‘uºFlßt
 = 
Œue
;

251 #ifdeà
HAS_128_BIT_PRIMITIVES


252 ifĞ
func
->
»tuºTy³
.
	`G‘SizeInMemÜyDWÜds
() > 4 )

255 
	`asASSERT
(
çl£
);

257 ifĞ
func
->
»tuºTy³
.
	`G‘SizeInMemÜyDWÜds
() == 4 )

259 
š‹º®
->
ho¡R‘uºInMemÜy
 = 
çl£
;

260 
š‹º®
->
ho¡R‘uºSize
 = 4;

261 
š‹º®
->
ho¡R‘uºFlßt
 = 
çl£
;

264 ifĞ
func
->
»tuºTy³
.
	`G‘SizeInMemÜyDWÜds
() > 2 )

267 
	`asASSERT
(
çl£
);

270 ifĞ
func
->
»tuºTy³
.
	`G‘SizeInMemÜyDWÜds
() == 2 )

272 
š‹º®
->
ho¡R‘uºInMemÜy
 = 
çl£
;

273 
š‹º®
->
ho¡R‘uºSize
 = 2;

274 
š‹º®
->
ho¡R‘uºFlßt
 = 
func
->
»tuºTy³
.
	`IsEqu®Exû±CÚ¡
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰DoubË
, 
Œue
));

276 ifĞ
func
->
»tuºTy³
.
	`G‘SizeInMemÜyDWÜds
() == 1 )

278 
š‹º®
->
ho¡R‘uºInMemÜy
 = 
çl£
;

279 
š‹º®
->
ho¡R‘uºSize
 = 1;

280 
š‹º®
->
ho¡R‘uºFlßt
 = 
func
->
»tuºTy³
.
	`IsEqu®Exû±CÚ¡
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰Flßt
, 
Œue
));

284 
š‹º®
->
ho¡R‘uºInMemÜy
 = 
çl£
;

285 
š‹º®
->
ho¡R‘uºSize
 = 0;

286 
š‹º®
->
ho¡R‘uºFlßt
 = 
çl£
;

290 
š‹º®
->
·¿mSize
 = 
func
->
	`G‘S·ûN“dedFÜArgum’ts
();

293 
asUINT
 
n
;

294 
š‹º®
->
kesObjByV®
 = 
çl£
;

295  
n
 = 0;‚ < 
func
->
·¿m‘”Ty³s
.
	`G‘L’gth
();‚++ )

297 ifĞ
func
->
·¿m‘”Ty³s
[
n
].
	`IsObjeù
(è&& !func->·¿m‘”Ty³s[n].
	`IsObjeùHªdË
(è&& !func->·¿m‘”Ty³s[n].
	`IsReã»nû
() )

299 
š‹º®
->
kesObjByV®
 = 
Œue
;

302 ifĞ!(
func
->
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
()->
æags
 & (
asOBJ_APP_CLASS
 | 
asOBJ_APP_PRIMITIVE
 | 
asOBJ_APP_FLOAT
)) )

304 
’gše
->
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_INFORMATION
, 
func
->
	`G‘Deş¬©iÚSŒ
().
	`Add»ssOf
());

306 
asCSŒšg
 
¡r
;

307 
¡r
.
	`FÜm©
(
TXT_CANNOT_PASS_TYPE_s_BY_VAL
, 
func
->
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
()->
Çme
.
	`Add»ssOf
());

308 
’gše
->
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_ERROR
, 
¡r
.
	`Add»ssOf
());

309 
’gše
->
	`CÚfigE¼Ü
(
asINVALID_CONFIGURATION
, 0, 0, 0);

313 #ifdeà
SPLIT_OBJS_BY_MEMBER_TYPES


319 #ifdeà
COMPLEX_OBJS_PASSED_BY_REF


320 !(
func
->
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
()->
æags
 & 
COMPLEX_MASK
) &&

322 #ifdeà
LARGE_OBJS_PASS_BY_REF


323 
func
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeInMemÜyDWÜds
(è< 
AS_LARGE_OBJ_MIN_SIZE
 &&

325 !(
func
->
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
()->
æags
 & (
asOBJ_APP_CLASS_ALLINTS
 | 
asOBJ_APP_CLASS_ALLFLOATS
)) )

327 
’gše
->
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_INFORMATION
, 
func
->
	`G‘Deş¬©iÚSŒ
().
	`Add»ssOf
());

329 
asCSŒšg
 
¡r
;

330 
¡r
.
	`FÜm©
(
TXT_DONT_SUPPORT_TYPE_s_BY_VAL
, 
func
->
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
()->
Çme
.
	`Add»ssOf
());

331 
’gše
->
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_ERROR
, 
¡r
.
	`Add»ssOf
());

332 
’gše
->
	`CÚfigE¼Ü
(
asINVALID_CONFIGURATION
, 0, 0, 0);

340 
š‹º®
->
hasAutoHªdËs
 = 
çl£
;

341  
n
 = 0;‚ < 
š‹º®
->
·¿mAutoHªdËs
.
	`G‘L’gth
();‚++ )

343 ifĞ
š‹º®
->
·¿mAutoHªdËs
[
n
] )

345 
š‹º®
->
hasAutoHªdËs
 = 
Œue
;

351 
	}
}

353 #ifdeà
AS_MAX_PORTABILITY


355 
	$C®lSy¡emFunùiÚ
(
id
, 
asCCÚ‹xt
 *
cÚ‹xt
, *
objeùPoš‹r
)

357 
asCSütEngše
 *
’gše
 = 
cÚ‹xt
->
m_’gše
;

358 
asSSy¡emFunùiÚIÁ”çû
 *
sysFunc
 = 
’gše
->
sütFunùiÚs
[
id
]->
sysFuncIÁf
;

359 
ÿÎCÚv
 = 
sysFunc
->callConv;

360 ifĞ
ÿÎCÚv
 =ğ
ICC_GENERIC_FUNC
 || c®lCÚv =ğ
ICC_GENERIC_METHOD
 )

361  
cÚ‹xt
->
	`C®lG’”ic
(
id
, 
objeùPoš‹r
);

363 
cÚ‹xt
->
	`S‘IÁ”ÇlExû±iÚ
(
TXT_INVALID_CALLING_CONVENTION
);

366 
	}
}

390 
asQWORD
 
C®lSy¡emFunùiÚN©ive
(
asCCÚ‹xt
 *
cÚ‹xt
, 
asCSütFunùiÚ
 *
desü
, *
obj
, 
asDWORD
 *
¬gs
, *
»tPoš‹r
,‡sQWORD &
»tQW2
);

393 
	$C®lSy¡emFunùiÚ
(
id
, 
asCCÚ‹xt
 *
cÚ‹xt
, *
objeùPoš‹r
)

395 
asCSütEngše
 *
’gše
 = 
cÚ‹xt
->
m_’gše
;

396 
asCSütFunùiÚ
 *
desü
 = 
’gše
->
sütFunùiÚs
[
id
];

397 
asSSy¡emFunùiÚIÁ”çû
 *
sysFunc
 = 
desü
->
sysFuncIÁf
;

399 
ÿÎCÚv
 = 
sysFunc
->callConv;

400 ifĞ
ÿÎCÚv
 =ğ
ICC_GENERIC_FUNC
 || c®lCÚv =ğ
ICC_GENERIC_METHOD
 )

401  
cÚ‹xt
->
	`C®lG’”ic
(
id
, 
objeùPoš‹r
);

403 
asQWORD
 
»tQW
 = 0;

404 
asQWORD
 
»tQW2
 = 0;

405 
asDWORD
 *
¬gs
 = 
cÚ‹xt
->
m_»gs
.
¡ackPoš‹r
;

406 *
»tPoš‹r
 = 0;

407 *
obj
 = 0;

408 
pİSize
 = 
sysFunc
->
·¿mSize
;

410 ifĞ
ÿÎCÚv
 >ğ
ICC_THISCALL
 )

412 ifĞ
objeùPoš‹r
 )

414 
obj
 = 
objeùPoš‹r
;

419 
pİSize
 +ğ
AS_PTR_SIZE
;

422 
obj
 = (*)*(
asPWORD
*)(
¬gs
);

423 ifĞ
obj
 == 0 )

425 
cÚ‹xt
->
	`S‘IÁ”ÇlExû±iÚ
(
TXT_NULL_POINTER_ACCESS
);

426 ifĞ
»tPoš‹r
 )

427 
’gše
->
	`C®lF»e
(
»tPoš‹r
);

432 #ià
	`defšed
(
__GNUC__
è&& defšed(
AS_ARM
)

436 
obj
 = (*)(
	`asPWORD
(objè+ (
sysFunc
->
ba£Off£t
>>1));

438 
obj
 = (*)(
	`asPWORD
(objè+ 
sysFunc
->
ba£Off£t
);

442 
¬gs
 +ğ
AS_PTR_SIZE
;

446 ifĞ
desü
->
	`DÛsR‘uºOnSck
() )

449 
»tPoš‹r
 = (*)*(
asPWORD
*)(
¬gs
);

450 
pİSize
 +ğ
AS_PTR_SIZE
;

451 
¬gs
 +ğ
AS_PTR_SIZE
;

455 
cÚ‹xt
->
m_»gs
.
objeùTy³
 = 0;

460 
cÚ‹xt
->
m_»gs
.
objeùTy³
 = 
desü
->
»tuºTy³
.
	`G‘ObjeùTy³
();

463 
cÚ‹xt
->
m_ÿÎšgSy¡emFunùiÚ
 = 
desü
;

464 
»tQW
 = 
	`C®lSy¡emFunùiÚN©ive
(
cÚ‹xt
, 
desü
, 
obj
, 
¬gs
, 
sysFunc
->
ho¡R‘uºInMemÜy
 ? 
»tPoš‹r
 : 0, 
»tQW2
);

465 
cÚ‹xt
->
m_ÿÎšgSy¡emFunùiÚ
 = 0;

467 #ià
	`defšed
(
COMPLEX_OBJS_PASSED_BY_REF
è|| defšed(
AS_LARGE_OBJS_PASSED_BY_REF
)

468 ifĞ
sysFunc
->
kesObjByV®
 )

478 
¥os
 = 0;

479  
asUINT
 
n
 = 0;‚ < 
desü
->
·¿m‘”Ty³s
.
	`G‘L’gth
();‚++ )

481 
boŞ
 
ÃedF»e
 = 
çl£
;

482 
asCD©aTy³
 &
dt
 = 
desü
->
·¿m‘”Ty³s
[
n
];

483 #ifdeà
COMPLEX_OBJS_PASSED_BY_REF


484 ifĞ
dt
.
	`G‘ObjeùTy³
(è&& dt.G‘ObjeùTy³()->
æags
 & 
COMPLEX_MASK
 ) 
ÃedF»e
 = 
Œue
;

486 #ifdeà
AS_LARGE_OBJS_PASSED_BY_REF


487 ifĞ
dt
.
	`G‘SizeInMemÜyDWÜds
(è>ğ
AS_LARGE_OBJ_MIN_SIZE
 ) 
ÃedF»e
 = 
Œue
;

489 ifĞ
ÃedF»e
 &&

490 
dt
.
	`IsObjeù
() &&

491 !
dt
.
	`IsObjeùHªdË
() &&

492 !
dt
.
	`IsReã»nû
() )

494 *
obj
 = (*)*(
asPWORD
*)&
¬gs
[
¥os
];

495 
¥os
 +ğ
AS_PTR_SIZE
;

497 #iâdeà
AS_CALLEE_DESTROY_OBJ_BY_VAL


499 
asSTy³Behaviour
 *
beh
 = &
dt
.
	`G‘ObjeùTy³
()->beh;

500 ifĞ
beh
->
de¡ruù
 )

501 
’gše
->
	`C®lObjeùM‘hod
(
obj
, 
beh
->
de¡ruù
);

504 
’gše
->
	`C®lF»e
(
obj
);

507 
¥os
 +ğ
dt
.
	`G‘SizeOnSckDWÜds
();

513 ifĞ
desü
->
»tuºTy³
.
	`IsObjeù
(è&& !desü->»tuºTy³.
	`IsReã»nû
() )

515 ifĞ
desü
->
»tuºTy³
.
	`IsObjeùHªdË
() )

517 #ià
	`defšed
(
AS_BIG_ENDIAN
è&& 
AS_PTR_SIZE
 == 1

520 
»tQW
 >>= 32;

523 
cÚ‹xt
->
m_»gs
.
objeùRegi¡”
 = (*)(
asPWORD
)
»tQW
;

525 ifĞ
sysFunc
->
»tuºAutoHªdË
 && 
cÚ‹xt
->
m_»gs
.
objeùRegi¡”
 )

527 
	`asASSERT
Ğ!(
desü
->
»tuºTy³
.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_NOCOUNT
) );

528 
’gše
->
	`C®lObjeùM‘hod
(
cÚ‹xt
->
m_»gs
.
objeùRegi¡”
, 
desü
->
»tuºTy³
.
	`G‘ObjeùTy³
()->
beh
.
add»f
);

533 ifĞ!
sysFunc
->
ho¡R‘uºInMemÜy
 )

536 ifĞ
sysFunc
->
ho¡R‘uºSize
 == 1 )

538 #ià
	`defšed
(
AS_BIG_ENDIAN
è&& 
AS_PTR_SIZE
 == 1

541 
»tQW
 >>= 32;

544 *(
asDWORD
*)
»tPoš‹r
 = (asDWORD)
»tQW
;

546 ifĞ
sysFunc
->
ho¡R‘uºSize
 == 2 )

547 *(
asQWORD
*)
»tPoš‹r
 = 
»tQW
;

548 ifĞ
sysFunc
->
ho¡R‘uºSize
 == 3 )

550 *(
asQWORD
*)
»tPoš‹r
 = 
»tQW
;

551 *(((
asDWORD
*)
»tPoš‹r
è+ 2èğ×sDWORD)
»tQW2
;

555 *(
asQWORD
*)
»tPoš‹r
 = 
»tQW
;

556 *(((
asQWORD
*)
»tPoš‹r
è+ 1èğ
»tQW2
;

561 
cÚ‹xt
->
m_»gs
.
objeùRegi¡”
 = 
»tPoš‹r
;

564 ifĞ
desü
->
	`DÛsR‘uºOnSck
() )

566 
cÚ‹xt
->
m_»gs
.
objeùRegi¡”
 = 0;

568 ifĞ
cÚ‹xt
->
m_¡©us
 =ğ
asEXECUTION_EXCEPTION
 )

574 ifĞ
desü
->
»tuºTy³
.
	`G‘ObjeùTy³
()->
beh
.
de¡ruù
 )

575 
’gše
->
	`C®lObjeùM‘hod
(
»tPoš‹r
, 
desü
->
»tuºTy³
.
	`G‘ObjeùTy³
()->
beh
.
de¡ruù
);

583 ifĞ
sysFunc
->
ho¡R‘uºSize
 == 1 )

585 #ià
	`defšed
(
AS_BIG_ENDIAN
)

588 
»tQW
 >>= 32;

592 
numBy‹s
 = 
desü
->
»tuºTy³
.
	`G‘SizeInMemÜyBy‹s
();

593 ifĞ
desü
->
»tuºTy³
.
	`IsReã»nû
(èè
numBy‹s
 = 4;

594  
numBy‹s
 )

599 
asBYTE
 *
v®
 = (asBYTE*)&
cÚ‹xt
->
m_»gs
.
v®ueRegi¡”
;

600 
v®
[0] = (
asBYTE
)
»tQW
;

601 
v®
[1] = 0;

602 
v®
[2] = 0;

603 
v®
[3] = 0;

604 
v®
[4] = 0;

605 
v®
[5] = 0;

606 
v®
[6] = 0;

607 
v®
[7] = 0;

613 
asWORD
 *
v®
 = (asWORD*)&
cÚ‹xt
->
m_»gs
.
v®ueRegi¡”
;

614 
v®
[0] = (
asWORD
)
»tQW
;

615 
v®
[1] = 0;

616 
v®
[2] = 0;

617 
v®
[3] = 0;

623 
asDWORD
 *
v®
 = (asDWORD*)&
cÚ‹xt
->
m_»gs
.
v®ueRegi¡”
;

624 
v®
[0] = (
asDWORD
)
»tQW
;

625 
v®
[1] = 0;

630 *(
asDWORD
*)&
cÚ‹xt
->
m_»gs
.
v®ueRegi¡”
 = (asDWORD)
»tQW
;

634 
cÚ‹xt
->
m_»gs
.
v®ueRegi¡”
 = 
»tQW
;

638 ifĞ
sysFunc
->
hasAutoHªdËs
 )

640 
¬gs
 = 
cÚ‹xt
->
m_»gs
.
¡ackPoš‹r
;

641 ifĞ
ÿÎCÚv
 >ğ
ICC_THISCALL
 && !
objeùPoš‹r
 )

642 
¬gs
 +ğ
AS_PTR_SIZE
;

644 
¥os
 = 0;

645  
asUINT
 
n
 = 0;‚ < 
desü
->
·¿m‘”Ty³s
.
	`G‘L’gth
();‚++ )

647 ifĞ
sysFunc
->
·¿mAutoHªdËs
[
n
] && *(
asPWORD
*)&
¬gs
[
¥os
] != 0 )

650 
’gše
->
	`C®lObjeùM‘hod
((*)*(
asPWORD
*)&
¬gs
[
¥os
], 
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
()->
beh
.
»Ëa£
);

651 *(
asPWORD
*)&
¬gs
[
¥os
] = 0;

654 ifĞ
desü
->
·¿m‘”Ty³s
[
n
].
	`IsObjeù
(è&& !desü->·¿m‘”Ty³s[n].
	`IsObjeùHªdË
(è&& !desü->·¿m‘”Ty³s[n].
	`IsReã»nû
() )

655 
¥os
 +ğ
AS_PTR_SIZE
;

657 
¥os
 +ğ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

661  
pİSize
;

662 
	}
}

666 
	gEND_AS_NAMESPACE


	@../src/script/as_callfunc_arm.cpp

48 
	~"as_cÚfig.h
"

50 #iâdeà
AS_MAX_PORTABILITY


51 #ifdeà
AS_ARM


53 
	~"as_ÿÎfunc.h
"

54 
	~"as_sü‹ngše.h
"

55 
	~"as_‹xts.h
"

56 
	~"as_tok’def.h
"

58 
BEGIN_AS_NAMESPACE


60 "C" 
asQWORD
 
¬mFunc
(cÚ¡ 
asDWORD
 *, , 
asFUNCTION_t
);

61 "C" 
asQWORD
 
¬mFuncR0
(cÚ¡ 
asDWORD
 *, , 
asFUNCTION_t
,‡sDWORD 
r0
);

62 "C" 
asQWORD
 
¬mFuncR0R1
(cÚ¡ 
asDWORD
 *, , 
asFUNCTION_t
,‡sDWORD 
r0
,‡sDWORD 
r1
);

63 "C" 
asQWORD
 
¬mFuncObjLa¡
(cÚ¡ 
asDWORD
 *, , 
asFUNCTION_t
,‡sDWORD 
obj
);

64 "C" 
asQWORD
 
¬mFuncR0ObjLa¡
(cÚ¡ 
asDWORD
 *, , 
asFUNCTION_t
,‡sDWORD 
r0
,‡sDWORD 
obj
);

66 
asQWORD
 
	$C®lSy¡emFunùiÚN©ive
(
asCCÚ‹xt
 *
cÚ‹xt
, 
asCSütFunùiÚ
 *
desü
, *
obj
, 
asDWORD
 *
¬gs
, *
»tPoš‹r
, 
asQWORD
 & )

68 
asCSütEngše
 *
’gše
 = 
cÚ‹xt
->
m_’gše
;

69 
asSSy¡emFunùiÚIÁ”çû
 *
sysFunc
 = 
desü
->
sysFuncIÁf
;

70 
ÿÎCÚv
 = 
sysFunc
->callConv;

72 
asQWORD
 
»tQW
 = 0;

73 
asFUNCTION_t
 
func
 = 
sysFunc
->func;

74 
·¿mSize
 = 
sysFunc
->paramSize;

75 
asFUNCTION_t
 *
váabË
;

77 ifĞ
sysFunc
->
ho¡R‘uºInMemÜy
 )

80 
ÿÎCÚv
++;

83 
asDWORD
 
·¿mBufãr
[64];

84 ifĞ
sysFunc
->
kesObjByV®
 )

86 
·¿mSize
 = 0;

87 
¥os
 = 0;

88 
dpos
 = 1;

89  
asUINT
 
n
 = 0;‚ < 
desü
->
·¿m‘”Ty³s
.
	`G‘L’gth
();‚++ )

91 ifĞ
desü
->
·¿m‘”Ty³s
[
n
].
	`IsObjeù
(è&& !desü->·¿m‘”Ty³s[n].
	`IsObjeùHªdË
(è&& !desü->·¿m‘”Ty³s[n].
	`IsReã»nû
() )

93 #ifdeà
COMPLEX_OBJS_PASSED_BY_REF


94 ifĞ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
()->
æags
 & 
COMPLEX_MASK
 )

96 
·¿mBufãr
[
dpos
++] = 
¬gs
[
¥os
++];

97 
·¿mSize
++;

103 
	`memıy
(&
·¿mBufãr
[
dpos
], *(**)(
¬gs
+
¥os
), 
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeInMemÜyBy‹s
());

106 
’gše
->
	`C®lF»e
(*(**)(
¬gs
+
¥os
));

107 
¥os
++;

108 
dpos
 +ğ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeInMemÜyDWÜds
();

109 
·¿mSize
 +ğ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeInMemÜyDWÜds
();

115 
·¿mBufãr
[
dpos
++] = 
¬gs
[
¥os
++];

116 ifĞ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
() > 1 )

117 
·¿mBufãr
[
dpos
++] = 
¬gs
[
¥os
++];

118 
·¿mSize
 +ğ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

122 
¬gs
 = &
·¿mBufãr
[1];

125  
ÿÎCÚv
 )

127 
ICC_CDECL_RETURNINMEM
:

128 
ICC_STDCALL_RETURNINMEM
:

129 
»tQW
 = 
	`¬mFuncR0
(
¬gs
, 
·¿mSize
<<2, 
func
, (
asDWORD
)
»tPoš‹r
);

131 
ICC_CDECL
:

132 
ICC_STDCALL
:

133 
»tQW
 = 
	`¬mFunc
(
¬gs
, 
·¿mSize
<<2, 
func
);

135 
ICC_THISCALL
:

136 
ICC_CDECL_OBJFIRST
:

137 
»tQW
 = 
	`¬mFuncR0
(
¬gs
, 
·¿mSize
<<2, 
func
, (
asDWORD
)
obj
);

139 
ICC_THISCALL_RETURNINMEM
:

140 #iâdeà
__GNUC__


141 
»tQW
 = 
	`¬mFuncR0R1
(
¬gs
, 
·¿mSize
<<2, 
func
, (
asDWORD
)
obj
, (asDWORD)
»tPoš‹r
);

144 
ICC_CDECL_OBJFIRST_RETURNINMEM
:

145 
»tQW
 = 
	`¬mFuncR0R1
(
¬gs
, 
·¿mSize
<<2, 
func
, (
asDWORD
)
»tPoš‹r
, (asDWORD)
obj
);

147 
ICC_VIRTUAL_THISCALL
:

149 
váabË
 = *(
asFUNCTION_t
**)
obj
;

150 
»tQW
 = 
	`¬mFuncR0
(
¬gs
, 
·¿mSize
<<2, 
váabË
[
	`FuncPŒToUIÁ
(
func
)>>2], (
asDWORD
)
obj
);

152 
ICC_VIRTUAL_THISCALL_RETURNINMEM
:

154 
váabË
 = *(
asFUNCTION_t
**)
obj
;

155 #iâdeà
__GNUC__


156 
»tQW
 = 
	`¬mFuncR0R1
(
¬gs
, (
·¿mSize
+1)<<2, 
váabË
[
	`FuncPŒToUIÁ
(
func
)>>2], (
asDWORD
)
»tPoš‹r
, (asDWORD)
obj
);

158 
»tQW
 = 
	`¬mFuncR0R1
(
¬gs
, (
·¿mSize
+1)<<2, 
váabË
[
	`FuncPŒToUIÁ
(
func
)>>2], (
asDWORD
)
obj
, (asDWORD)
»tPoš‹r
);

161 
ICC_CDECL_OBJLAST
:

162 
»tQW
 = 
	`¬mFuncObjLa¡
(
¬gs
, 
·¿mSize
<<2, 
func
, (
asDWORD
)
obj
);

164 
ICC_CDECL_OBJLAST_RETURNINMEM
:

165 
»tQW
 = 
	`¬mFuncR0ObjLa¡
(
¬gs
, 
·¿mSize
<<2, 
func
, (
asDWORD
)
»tPoš‹r
, (asDWORD)
obj
);

168 
cÚ‹xt
->
	`S‘IÁ”ÇlExû±iÚ
(
TXT_INVALID_CALLING_CONVENTION
);

171  
»tQW
;

172 
	}
}

174 
	gEND_AS_NAMESPACE


	@../src/script/as_callfunc_mips.cpp

42 
	~"as_cÚfig.h
"

44 #iâdeà
MAX_PORTABILITY


45 #ifdeà
AS_MIPS


47 
	~"as_ÿÎfunc.h
"

48 
	~"as_sü‹ngše.h
"

49 
	~"as_‹xts.h
"

50 
	~"as_tok’def.h
"

52 
	~<¡dio.h
>

53 
	~<¡dlib.h
>

54 
	~<»gdef.h
>

56 
	gBEGIN_AS_NAMESPACE


58 
	#AS_MIPS_MAX_ARGS
 32

	)

59 
	#AS_NUM_REG_FLOATS
 8

	)

60 
	#AS_NUM_REG_INTS
 8

	)

69 
asDWORD
 
msArgs
[
AS_MIPS_MAX_ARGS
 + 1 + 1];

76 "C" 
asQWORD
 
msFunc
(
štArgSize
, 
æßtArgSize
, 
¡ackArgSize
, 
asDWORD
 
func
);

80 
šlše
 
	$¥l™Args
(cÚ¡ 
asDWORD
 *
¬gs
, 
¬gNum
, &
numRegIÁArgs
, &
numRegFlßtArgs
, &
numRe¡Args
, 
ho¡FÏgs
)

82 
i
;

84 
¬gB™
 = 1;

85 
i
 = 0; i < 
¬gNum
; i++)

87 ià(
ho¡FÏgs
 & 
¬gB™
)

89 ià(
numRegFlßtArgs
 < 
AS_NUM_REG_FLOATS
)

92 
msArgs
[
AS_NUM_REG_INTS
 + 
numRegFlßtArgs
] = 
¬gs
[
i
];

93 
numRegFlßtArgs
++;

98 
msArgs
[
AS_NUM_REG_INTS
 + 
AS_NUM_REG_FLOATS
 + 
numRe¡Args
] = 
¬gs
[
i
];

99 
numRe¡Args
++;

104 ià(
numRegIÁArgs
 < 
AS_NUM_REG_INTS
)

107 
msArgs
[
numRegIÁArgs
] = 
¬gs
[
i
];

108 
numRegIÁArgs
++;

113 
msArgs
[
AS_NUM_REG_INTS
 + 
AS_NUM_REG_FLOATS
 + 
numRe¡Args
] = 
¬gs
[
i
];

114 
numRe¡Args
++;

117 
¬gB™
 <<= 1;

119 
	}
}

121 
asQWORD
 
	$C®lCDeşFunùiÚ
(cÚ¡ 
asDWORD
 *
¬gs
, 
¬gSize
,‡sDWORD 
func
, 
æags
)

123 
¬gNum
 = 
¬gSize
 >> 2;

125 
štArgs
 = 0;

126 
æßtArgs
 = 0;

127 
»¡Args
 = 0;

130 if(
¬gNum
 > 0)

131 
	`¥l™Args
(
¬gs
, 
¬gNum
, 
štArgs
, 
æßtArgs
, 
»¡Args
, 
æags
);

133  
	`msFunc
(
štArgs
 << 2, 
æßtArgs
 << 2, 
»¡Args
 << 2, 
func
);

134 
	}
}

138 
asQWORD
 
	$C®lThisC®lFunùiÚ
(cÚ¡ *
obj
, cÚ¡ 
asDWORD
 *
¬gs
, 
¬gSize
,‡sDWORD 
func
, 
æags
)

140 
¬gNum
 = 
¬gSize
 >> 2;

142 
štArgs
 = 1;

143 
æßtArgs
 = 0;

144 
»¡Args
 = 0;

146 
msArgs
[0] = (
asDWORD
è
obj
;

149 ià(
¬gNum
 > 0)

150 
	`¥l™Args
(
¬gs
, 
¬gNum
, 
štArgs
, 
æßtArgs
, 
»¡Args
, 
æags
);

152  
	`msFunc
(
štArgs
 << 2, 
æßtArgs
 << 2, 
»¡Args
 << 2, 
func
);

153 
	}
}

157 
asQWORD
 
	$C®lThisC®lFunùiÚ_objLa¡
(cÚ¡ *
obj
, cÚ¡ 
asDWORD
 *
¬gs
, 
¬gSize
,‡sDWORD 
func
, 
æags
)

159 
¬gNum
 = 
¬gSize
 >> 2;

161 
štArgs
 = 0;

162 
æßtArgs
 = 0;

163 
»¡Args
 = 0;

166 if(
¬gNum
 > 0)

167 
	`¥l™Args
(
¬gs
, 
¬gNum
, 
štArgs
, 
æßtArgs
, 
»¡Args
, 
æags
);

169 if(
štArgs
 < 
AS_NUM_REG_INTS
)

171 
msArgs
[
štArgs
] = (
asDWORD
è
obj
;

172 
štArgs
++;

176 
msArgs
[
AS_NUM_REG_INTS
 + 
AS_NUM_REG_FLOATS
 + 
»¡Args
] = (
asDWORD
è
obj
;

177 
»¡Args
++;

180  
	`msFunc
(
štArgs
 << 2, 
æßtArgs
 << 2, 
»¡Args
 << 2, 
func
);

181 
	}
}

183 
asDWORD
 
	$G‘R‘uºedFlßt
()

185 
asDWORD
 
f
;

187 
	`asm
("swc1 $f0, %0\n" : "=m"(
f
));

189  
f
;

190 
	}
}

211 
asQWORD
 
	$G‘R‘uºedDoubË
()

213 
asQWORD
 
d
 = 0;

215 
	`´štf
("Broken!!!");

219  
d
;

220 
	}
}

222 
asQWORD
 
	$C®lSy¡emFunùiÚN©ive
(
asCCÚ‹xt
 *
cÚ‹xt
, 
asCSütFunùiÚ
 *
desü
, *
obj
, 
asDWORD
 *
¬gs
, *
»tPoš‹r
, 
asQWORD
 & )

224 
asCSütEngše
 *
’gše
 = 
cÚ‹xt
->
m_’gše
;

225 
asSSy¡emFunùiÚIÁ”çû
 *
sysFunc
 = 
desü
->
sysFuncIÁf
;

226 
ÿÎCÚv
 = 
sysFunc
->callConv;

228 
asQWORD
 
»tQW
 = 0;

230 *
func
 = (*)
sysFunc
->func;

231 
·¿mSize
 = 
sysFunc
->paramSize;

232 
asDWORD
 *
váabË
;

234 ifĞ
desü
->
»tuºTy³
.
	`IsObjeù
(è&& !desü->»tuºTy³.
	`IsReã»nû
(è&& !desü->»tuºTy³.
	`IsObjeùHªdË
() )

236 
msArgs
[
AS_MIPS_MAX_ARGS
+1] = (
asDWORD
è
»tPoš‹r
;

239 
	`asASSERT
(
desü
->
·¿m‘”Ty³s
.
	`G‘L’gth
(è<ğ
AS_MIPS_MAX_ARGS
);

242 
¬gB™
 = 1;

243 
ho¡FÏgs
 = 0;

244 
štArgs
 = 0;

245  
size_t
 
a
 = 0;‡ < 
desü
->
·¿m‘”Ty³s
.
	`G‘L’gth
();‡++ )

247 ià(
desü
->
·¿m‘”Ty³s
[
a
].
	`IsFlßtTy³
())

248 
ho¡FÏgs
 |ğ
¬gB™
;

250 
štArgs
++;

251 
¬gB™
 <<= 1;

254 
asDWORD
 
·¿mBufãr
[64];

255 ifĞ
sysFunc
->
kesObjByV®
 )

257 
·¿mSize
 = 0;

258 
¥os
 = 0;

259 
dpos
 = 1;

260  
asUINT
 
n
 = 0;‚ < 
desü
->
·¿m‘”Ty³s
.
	`G‘L’gth
();‚++ )

262 ifĞ
desü
->
·¿m‘”Ty³s
[
n
].
	`IsObjeù
(è&& !desü->·¿m‘”Ty³s[n].
	`IsObjeùHªdË
(è&& !desü->·¿m‘”Ty³s[n].
	`IsReã»nû
() )

264 #ifdeà
COMPLEX_OBJS_PASSED_BY_REF


265 ifĞ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
()->
æags
 & 
COMPLEX_MASK
 )

267 
·¿mBufãr
[
dpos
++] = 
¬gs
[
¥os
++];

268 
·¿mSize
++;

274 
	`memıy
(&
·¿mBufãr
[
dpos
], *(**)(
¬gs
+
¥os
), 
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeInMemÜyBy‹s
());

276 
’gše
->
	`C®lF»e
(*(**)(
¬gs
+
¥os
));

277 
¥os
++;

278 
dpos
 +ğ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeInMemÜyDWÜds
();

279 
·¿mSize
 +ğ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeInMemÜyDWÜds
();

285 
·¿mBufãr
[
dpos
++] = 
¬gs
[
¥os
++];

286 ifĞ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
() > 1 )

287 
·¿mBufãr
[
dpos
++] = 
¬gs
[
¥os
++];

288 
·¿mSize
 +ğ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

292 
¬gs
 = &
·¿mBufãr
[1];

295  
ÿÎCÚv
 )

297 
ICC_CDECL
:

298 
ICC_CDECL_RETURNINMEM
:

299 
ICC_STDCALL
:

300 
ICC_STDCALL_RETURNINMEM
:

301 
»tQW
 = 
	`C®lCDeşFunùiÚ
(
¬gs
, 
·¿mSize
<<2, (
asDWORD
)
func
, 
ho¡FÏgs
);

303 
ICC_THISCALL
:

304 
ICC_THISCALL_RETURNINMEM
:

305 
»tQW
 = 
	`C®lThisC®lFunùiÚ
(
obj
, 
¬gs
, 
·¿mSize
<<2, (
asDWORD
)
func
, 
ho¡FÏgs
);

307 
ICC_VIRTUAL_THISCALL
:

308 
ICC_VIRTUAL_THISCALL_RETURNINMEM
:

310 
váabË
 = *(
asDWORD
**)
obj
;

311 
»tQW
 = 
	`C®lThisC®lFunùiÚ
(
obj
, 
¬gs
, 
·¿mSize
<<2, 
váabË
[
	`asDWORD
(
func
)>>2], 
ho¡FÏgs
);

313 
ICC_CDECL_OBJLAST
:

314 
ICC_CDECL_OBJLAST_RETURNINMEM
:

315 
»tQW
 = 
	`C®lThisC®lFunùiÚ_objLa¡
(
obj
, 
¬gs
, 
·¿mSize
<<2, (
asDWORD
)
func
, 
ho¡FÏgs
);

317 
ICC_CDECL_OBJFIRST
:

318 
ICC_CDECL_OBJFIRST_RETURNINMEM
:

319 
»tQW
 = 
	`C®lThisC®lFunùiÚ
(
obj
, 
¬gs
, 
·¿mSize
<<2, (
asDWORD
)
func
, 
ho¡FÏgs
);

322 
cÚ‹xt
->
	`S‘IÁ”ÇlExû±iÚ
(
TXT_INVALID_CALLING_CONVENTION
);

326 ifĞ
sysFunc
->
ho¡R‘uºFlßt
 )

328 ifĞ
sysFunc
->
ho¡R‘uºSize
 == 1 )

329 *(
asDWORD
*)&
»tQW
 = 
	`G‘R‘uºedFlßt
();

331 
»tQW
 = 
	`G‘R‘uºedDoubË
();

334  
»tQW
;

335 
	}
}

338 
asm
(

431 
	gEND_AS_NAMESPACE


	@../src/script/as_callfunc_ppc.cpp

40 
	~<¡dio.h
>

42 
	~"as_cÚfig.h
"

44 #iâdeà
AS_MAX_PORTABILITY


45 #ifdeà
AS_PPC


47 
	~"as_ÿÎfunc.h
"

48 
	~"as_sü‹ngše.h
"

49 
	~"as_‹xts.h
"

50 
	~"as_tok’def.h
"

52 
	~<¡dlib.h
>

54 
	gBEGIN_AS_NAMESPACE


60 
	#AS_PPC_MAX_ARGS
 32

	)

71 
	e¬gTy³s
 { 
	mµcENDARG
, 
	mµcINTARG
, 
	mµcFLOATARG
, 
	mµcDOUBLEARG
 };

72 
asDWORD
 
	gµcArgs
[2*
AS_PPC_MAX_ARGS
 + 1 + 1];

77 
asBYTE
 
µcArgsTy³
[2*
AS_PPC_MAX_ARGS
 + 1 + 1 + 1];

81 
	#PPC_LINKAGE_SIZE
 (24)

82 
	#PPC_NUM_REGSTORE
 (9)

83 
	#PPC_REGSTORE_SIZE
 (4*
PPC_NUM_REGSTORE
)

84 
	#EXTRA_STACK_SIZE
 (
PPC_LINKAGE_SIZE
 + 
PPC_REGSTORE_SIZE
)

85 
	#PPC_STACK_SIZE
(
numP¬ams
è(-ĞĞ(((ÒumP¬ams)<8)?8:ÒumP¬ams))<<2è+ 
EXTRA_STACK_SIZE
 + 15 ) & ~15 ))

86 

	)

90 "C" 
asQWORD
 
µcFunc
(cÚ¡ 
asDWORD
* 
¬gsPŒ
, 
SckArgSize
,‡sDWORD 
func
);

92 
asm
(" .text\n"

328 
asDWORD
 
	$G‘R‘uºedFlßt
()

330 
asDWORD
 
f
;

331 
	`asm
(" stf f1, %0\n" : "=m"(
f
));

332  
f
;

333 
	}
}

335 
asQWORD
 
	$G‘R‘uºedDoubË
()

337 
asQWORD
 
f
;

338 
	`asm
(" stfd f1, %0\n" : "=m"(
f
));

339  
f
;

340 
	}
}

343 
	$¡ackArgs
(cÚ¡ 
asDWORD
 *
¬gs
, cÚ¡ 
asBYTE
 *
¬gsTy³
, & 
numIÁArgs
, & 
numFlßtArgs
, & 
numDoubËArgs
)

345 
i
;

346 
¬gWÜdPos
 = 
numIÁArgs
 + 
numFlßtArgs
 + (
numDoubËArgs
*2);

347 
ty³Off£t
 = 
numIÁArgs
 + 
numFlßtArgs
 + 
numDoubËArgs
;

349 
ty³Index
;

350  
i
 = 0, 
ty³Index
 = 0; ; i++,ypeIndex++ )

353 
µcArgsTy³
[
ty³Off£t
++] = 
¬gsTy³
[
ty³Index
];

354 ifĞ
¬gsTy³
[
ty³Index
] =ğ
µcENDARG
 )

357  
¬gsTy³
[
ty³Index
] )

359 
µcFLOATARG
:

361 
µcArgs
[
¬gWÜdPos
] = 
¬gs
[
i
];

362 
numFlßtArgs
++;

363 
¬gWÜdPos
++;

366 
µcDOUBLEARG
:

368 
	`memıy
Ğ&
µcArgs
[
¬gWÜdPos
], &
¬gs
[
i
], () );

369 
numDoubËArgs
++;

370 
¬gWÜdPos
+=2;

371 
i
++;

374 
µcINTARG
:

376 
µcArgs
[
¬gWÜdPos
] = 
¬gs
[
i
];

377 
numIÁArgs
++;

378 
¬gWÜdPos
++;

384 
µcArgsTy³
[
ty³Off£t
] = 
µcENDARG
;

385 
	}
}

387 
asQWORD
 
	$C®lCDeşFunùiÚ
(cÚ¡ 
asDWORD
* 
pArgs
, cÚ¡ 
asBYTE
 *
pArgsTy³
, 
¬gSize
,‡sDWORD 
func
, *
»tInMemÜy
)

389 
ba£ArgCouÁ
 = 0;

390 ifĞ
»tInMemÜy
 )

393 
µcArgs
[0] = (
asDWORD
)
»tInMemÜy
;

394 
µcArgsTy³
[0] = 
µcINTARG
;

395 
µcArgsTy³
[1] = 
µcENDARG
;

396 
ba£ArgCouÁ
 = 1;

400 
numTÙ®Args
 = 
ba£ArgCouÁ
;

401 ifĞ
¬gSize
 > 0 )

403 
štArgs
 = 
ba£ArgCouÁ
, 
æßtArgs
 = 0, 
doubËArgs
 = 0;

404 
	`¡ackArgs
Ğ
pArgs
, 
pArgsTy³
, 
štArgs
, 
æßtArgs
, 
doubËArgs
 );

405 
numTÙ®Args
 = 
štArgs
 + 
æßtArgs
 + 2*
doubËArgs
;

410 
µcArgsTy³
[
ba£ArgCouÁ
] = 
µcENDARG
;

414  
	`µcFunc
Ğ
µcArgs
, 
	`PPC_STACK_SIZE
(
numTÙ®Args
), 
func
 );

415 
	}
}

419 
asQWORD
 
	$C®lThisC®lFunùiÚ
(cÚ¡ *
obj
, cÚ¡ 
asDWORD
* 
pArgs
, cÚ¡ 
asBYTE
 *
pArgsTy³
, 
¬gSize
,‡sDWORD 
func
, *
»tInMemÜy
 )

421 
ba£ArgCouÁ
 = 0;

422 ifĞ
»tInMemÜy
 )

425 
µcArgs
[0] = (
asDWORD
)
»tInMemÜy
;

426 
µcArgsTy³
[0] = 
µcINTARG
;

427 
µcArgsTy³
[1] = 
µcENDARG
;

428 
ba£ArgCouÁ
 = 1;

432 
µcArgs
[
ba£ArgCouÁ
] = (
asDWORD
)
obj
;

433 
µcArgsTy³
[
ba£ArgCouÁ
++] = 
µcINTARG
;

434 
µcArgsTy³
[
ba£ArgCouÁ
] = 
µcENDARG
;

437 
numTÙ®Args
 = 
ba£ArgCouÁ
;

438 ifĞ
¬gSize
 > 0 )

440 
štArgs
 = 
ba£ArgCouÁ
, 
æßtArgs
 = 0, 
doubËArgs
 = 0;

441 
	`¡ackArgs
Ğ
pArgs
, 
pArgsTy³
, 
štArgs
, 
æßtArgs
, 
doubËArgs
 );

442 
numTÙ®Args
 = 
štArgs
 + 
æßtArgs
 + 2*
doubËArgs
;

446  
	`µcFunc
Ğ
µcArgs
, 
	`PPC_STACK_SIZE
(
numTÙ®Args
), 
func
);

447 
	}
}

452 
asQWORD
 
	$C®lThisC®lFunùiÚ_objLa¡
(cÚ¡ *
obj
, cÚ¡ 
asDWORD
* 
pArgs
, cÚ¡ 
asBYTE
 *
pArgsTy³
, 
¬gSize
,‡sDWORD 
func
, *
»tInMemÜy
)

454 
	`UNUSED_VAR
(
¬gSize
);

455 
ba£ArgCouÁ
 = 0;

456 ifĞ
»tInMemÜy
 )

459 
µcArgs
[0] = (
asDWORD
)
»tInMemÜy
;

460 
µcArgsTy³
[0] = 
µcINTARG
;

461 
µcArgsTy³
[1] = 
µcENDARG
;

462 
ba£ArgCouÁ
 = 1;

466 
štArgs
 = 
ba£ArgCouÁ
, 
æßtArgs
 = 0, 
doubËArgs
 = 0;

467 
	`¡ackArgs
Ğ
pArgs
, 
pArgsTy³
, 
štArgs
, 
æßtArgs
, 
doubËArgs
 );

468 
numTÙ®Args
 = 
štArgs
 + 
æßtArgs
 + 
doubËArgs
;

471 ifĞ
numTÙ®Args
 < 
AS_PPC_MAX_ARGS
 )

474 
¬gPos
 = 
štArgs
 + 
æßtArgs
 + (
doubËArgs
 * 2);

475 
µcArgs
[
¬gPos
] = (
asDWORD
)
obj
;

476 
µcArgsTy³
[
numTÙ®Args
++] = 
µcINTARG
;

477 
µcArgsTy³
[
numTÙ®Args
] = 
µcENDARG
;

481  
	`µcFunc
Ğ
µcArgs
, 
	`PPC_STACK_SIZE
(
numTÙ®Args
), 
func
 );

482 
	}
}

484 
asQWORD
 
	$C®lSy¡emFunùiÚN©ive
(
asCCÚ‹xt
 *
cÚ‹xt
, 
asCSütFunùiÚ
 *
desü
, *
obj
, 
asDWORD
 *
¬gs
, *
»tPoš‹r
, 
asQWORD
 & )

487 
asBYTE
 
¬gsTy³
[2*
AS_PPC_MAX_ARGS
 + 1 + 1 + 1];

488 
	`mem£t
Ğ
¬gsTy³
, 0, (argsType));

490 
asCSütEngše
 *
’gše
 = 
cÚ‹xt
->
m_’gše
;

491 
asSSy¡emFunùiÚIÁ”çû
 *
sysFunc
 = 
desü
->
sysFuncIÁf
;

493 
asQWORD
 
»tQW
 = 0;

494 *
func
 = (*)
sysFunc
->func;

495 
·¿mSize
 = 
sysFunc
->paramSize;

496 
asDWORD
 *
váabË
 = 
NULL
;

497 
a
, 
s
;

500 
¬gDwÜdOff£t
 = 0;

501  
a
 = 0;‡ < ()
desü
->
·¿m‘”Ty³s
.
	`G‘L’gth
();‡++ )

503 
numBy‹s
 = 
desü
->
·¿m‘”Ty³s
[
a
].
	`G‘SizeInMemÜyBy‹s
();

504 ifĞ
numBy‹s
 >ğ4 || 
desü
->
·¿m‘”Ty³s
[
a
].
	`IsReã»nû
(è|| desü->·¿m‘”Ty³s[a].
	`IsObjeùHªdË
() )

506 
¬gDwÜdOff£t
 +ğ
desü
->
·¿m‘”Ty³s
[
a
].
	`G‘SizeOnSckDWÜds
();

511 
	`asASSERT
Ğ
numBy‹s
 == 1 ||‚umBytes == 2 );

512  
numBy‹s
 )

516 vŞ©
asBYTE
 *
bPŒ
 = (asBYTE*)
	`ARG_DW
(
¬gs
[
¬gDwÜdOff£t
]);

517 
asBYTE
 
t
 = 
bPŒ
[0];

518 
bPŒ
[0] = bPtr[3];

519 
bPŒ
[3] = 
t
;

520 
t
 = 
bPŒ
[1];

521 
bPŒ
[1] = bPtr[2];

522 
bPŒ
[2] = 
t
;

527 vŞ©
asWORD
 *
wPŒ
 = (asWORD*)
	`ARG_DW
(
¬gs
[
¬gDwÜdOff£t
]);

528 
asWORD
 
t
 = 
wPŒ
[0];

529 
wPŒ
[0] = wPtr[1];

530 
wPŒ
[1] = 
t
;

534 
¬gDwÜdOff£t
++;

538 ifĞ!
sysFunc
->
kesObjByV®
 )

540  
s
 = 0, 
a
 = 0; s < ()
desü
->
·¿m‘”Ty³s
.
	`G‘L’gth
(); s++,‡++ )

542 ifĞ
desü
->
·¿m‘”Ty³s
[
s
].
	`IsFlßtTy³
(è&& !desü->·¿m‘”Ty³s[s].
	`IsReã»nû
() )

544 
¬gsTy³
[
a
] = 
µcFLOATARG
;

546 ifĞ
desü
->
·¿m‘”Ty³s
[
s
].
	`IsDoubËTy³
(è&& !desü->·¿m‘”Ty³s[s].
	`IsReã»nû
() )

548 
¬gsTy³
[
a
] = 
µcDOUBLEARG
;

552 
¬gsTy³
[
a
] = 
µcINTARG
;

553 ifĞ
desü
->
·¿m‘”Ty³s
[
s
].
	`G‘SizeOnSckDWÜds
() == 2 )

556 
a
++;

557 
¬gsTy³
[
a
] = 
µcINTARG
;

563 
asDWORD
 
·¿mBufãr
[64];

564 ifĞ
sysFunc
->
kesObjByV®
 )

566 
·¿mSize
 = 0;

567 
¥os
 = 0;

568 
dpos
 = 1;

570 
a
 = 0;

571  
asUINT
 
n
 = 0;‚ < 
desü
->
·¿m‘”Ty³s
.
	`G‘L’gth
();‚++ )

573 ifĞ
desü
->
·¿m‘”Ty³s
[
n
].
	`IsObjeù
(è&& !desü->·¿m‘”Ty³s[n].
	`IsObjeùHªdË
(è&& !desü->·¿m‘”Ty³s[n].
	`IsReã»nû
() )

575 #ifdeà
COMPLEX_OBJS_PASSED_BY_REF


576 ifĞ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
()->
æags
 & 
COMPLEX_MASK
 )

578 
¬gsTy³
[
a
++] = 
µcINTARG
;

579 
·¿mBufãr
[
dpos
++] = 
¬gs
[
¥os
++];

580 
·¿mSize
++;

588 
	`memıy
Ğ&
·¿mBufãr
[
dpos
], *(**)(
¬gs
+
¥os
), 
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeInMemÜyBy‹s
() );

591 
’gše
->
	`C®lF»e
(*(**)(
¬gs
+
¥os
) );

592 
¥os
++;

593 
asUINT
 
dwÜds
 = 
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeInMemÜyDWÜds
();

594 
dpos
 +ğ
dwÜds
;

595 
·¿mSize
 +ğ
dwÜds
;

596  
asUINT
 
i
 = 0; i < 
dwÜds
; i++ )

597 
¬gsTy³
[
a
++] = 
µcINTARG
;

603 
·¿mBufãr
[
dpos
++] = 
¬gs
[
¥os
++];

604 ifĞ
desü
->
·¿m‘”Ty³s
[
n
].
	`IsFlßtTy³
(è&& !desü->·¿m‘”Ty³s[n].
	`IsReã»nû
() )

605 
¬gsTy³
[
a
++] = 
µcFLOATARG
;

606 ifĞ
desü
->
·¿m‘”Ty³s
[
n
].
	`IsDoubËTy³
(è&& !desü->·¿m‘”Ty³s[n].
	`IsReã»nû
() )

607 
¬gsTy³
[
a
++] = 
µcDOUBLEARG
;

609 
¬gsTy³
[
a
++] = 
µcINTARG
;

610 ifĞ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
() > 1 )

612 
·¿mBufãr
[
dpos
++] = 
¬gs
[
¥os
++];

613 ifĞ!
desü
->
·¿m‘”Ty³s
[
n
].
	`IsDoubËTy³
() )

614 
¬gsTy³
[
a
++] = 
µcINTARG
;

616 
·¿mSize
 +ğ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

621 
¬gs
 = &
·¿mBufãr
[1];

624 
ÿÎCÚv
 = 
sysFunc
->callConv;

625  
ÿÎCÚv
 )

627 
ICC_CDECL
:

628 
ICC_CDECL_RETURNINMEM
:

629 
ICC_STDCALL
:

630 
ICC_STDCALL_RETURNINMEM
:

631 
»tQW
 = 
	`C®lCDeşFunùiÚ
Ğ
¬gs
, 
¬gsTy³
, 
·¿mSize
, (
asDWORD
)
func
, 
»tPoš‹r
 );

633 
ICC_THISCALL
:

634 
ICC_THISCALL_RETURNINMEM
:

635 
»tQW
 = 
	`C®lThisC®lFunùiÚ
(
obj
, 
¬gs
, 
¬gsTy³
, 
·¿mSize
, (
asDWORD
)
func
, 
»tPoš‹r
 );

637 
ICC_VIRTUAL_THISCALL
:

638 
ICC_VIRTUAL_THISCALL_RETURNINMEM
:

640 
váabË
 = *(
asDWORD
**)
obj
;

641 
»tQW
 = 
	`C®lThisC®lFunùiÚ
Ğ
obj
, 
¬gs
, 
¬gsTy³
, 
·¿mSize
, 
váabË
[
	`asDWORD
(
func
)>>2], 
»tPoš‹r
 );

643 
ICC_CDECL_OBJLAST
:

644 
ICC_CDECL_OBJLAST_RETURNINMEM
:

645 
»tQW
 = 
	`C®lThisC®lFunùiÚ_objLa¡
Ğ
obj
, 
¬gs
, 
¬gsTy³
, 
·¿mSize
, (
asDWORD
)
func
, 
»tPoš‹r
 );

647 
ICC_CDECL_OBJFIRST
:

648 
ICC_CDECL_OBJFIRST_RETURNINMEM
:

649 
»tQW
 = 
	`C®lThisC®lFunùiÚ
Ğ
obj
, 
¬gs
, 
¬gsTy³
, 
·¿mSize
, (
asDWORD
)
func
, 
»tPoš‹r
 );

652 
cÚ‹xt
->
	`S‘IÁ”ÇlExû±iÚ
(
TXT_INVALID_CALLING_CONVENTION
);

656 ifĞ
sysFunc
->
ho¡R‘uºFlßt
 )

658 ifĞ
sysFunc
->
ho¡R‘uºSize
 == 1 )

659 *(
asDWORD
*)&
»tQW
 = 
	`G‘R‘uºedFlßt
();

661 
»tQW
 = 
	`G‘R‘uºedDoubË
();

664  
»tQW
;

665 
	}
}

667 
	gEND_AS_NAMESPACE


	@../src/script/as_callfunc_ppc_64.cpp

40 
	~"as_cÚfig.h
"

42 #iâdeà
AS_MAX_PORTABILITY


43 #ifdeà
AS_PPC_64


45 
	~"as_ÿÎfunc.h
"

46 
	~"as_sü‹ngše.h
"

47 
	~"as_‹xts.h
"

48 
	~"as_tok’def.h
"

50 
	~<¡dio.h
>

51 
	~<¡dlib.h
>

53 #ifdeà
__SNC__


54 
	~"µu_asm_šŒšsics.h
"

58 
	gBEGIN_AS_NAMESPACE


68 
	#AS_PPC_MAX_ARGS
 32

	)

81 
	e¬gTy³s
 { 
µcENDARG
 = 0, 
µcINTARG
 = 1, 
µcFLOATARG
 = 2, 
µcDOUBLEARG
 = 3, 
µcLONGARG
 = 4 };

82 
asBYTE
 
µcArgsTy³
[
AS_PPC_MAX_ARGS
 + 1 + 1 + 1];

83 
asDWORD
 
µcArgs
[2*
AS_PPC_MAX_ARGS
 + 1 + 1];

88 
	#PPC_LINKAGE_SIZE
 (0x30)

89 
	#PPC_NUM_REGSTORE
 (10)

90 
	#PPC_REGSTORE_SIZE
 (8*
PPC_NUM_REGSTORE
)

91 
	#EXTRA_STACK_SIZE
 (
PPC_LINKAGE_SIZE
 + 
PPC_REGSTORE_SIZE
)

92 
	#PPC_STACK_SIZE
(
numP¬ams
èĞ-(ĞĞ((ÒumP¬ams)<8)?8:ÒumP¬ams))<<3è+ 
EXTRA_STACK_SIZE
 + 15 ) & ~15) )

93 

	)

98 "C" 
asQWORD
 
µcFunc64
(cÚ¡ 
asDWORD
* 
¬gsPŒ
, 
SckArgSizeInBy‹s
,‡sDWORD 
func
);

99 
asm
(""

362 
asDWORD
 
	$G‘R‘uºedFlßt
()

364 
asDWORD
 
f
;

365 #ifdeà
__SNC__


366 
	`__¡fs
Ğ
	`__äeg
(1), 0, (*)&
f
);

368 
	`asm
(" stf 1, %0\n" : "=m"(
f
));

370  
f
;

371 
	}
}

373 
asQWORD
 
	$G‘R‘uºedDoubË
()

375 
asQWORD
 
f
;

376 #ifdeà
__SNC__


377 
	`__¡fd
Ğ
	`__äeg
(1), 0, (*)&
f
);

379 
	`asm
(" stfd 1, %0\n" : "=m"(
f
));

381  
f
;

382 
	}
}

385 
	$¡ackArgs
ĞcÚ¡ 
asDWORD
 *
¬gs
, cÚ¡ 
asBYTE
 *
¬gsTy³
, &
numIÁArgs
, &
numFlßtArgs
, &
numDoubËArgs
, &
numLÚgArgs
 )

388 
i
;

389 
¬gWÜdPos
 = 
numIÁArgs
 + 
numFlßtArgs
 + (
numDoubËArgs
*2è+ (
numLÚgArgs
*2);

390 
ty³Off£t
 = 
numIÁArgs
 + 
numFlßtArgs
 + 
numDoubËArgs
 + 
numLÚgArgs
;

392 
ty³Index
;

393  
i
 = 0, 
ty³Index
 = 0; ; i++,ypeIndex++ )

396 
µcArgsTy³
[
ty³Off£t
++] = 
¬gsTy³
[
ty³Index
];

397 ifĞ
¬gsTy³
[
ty³Index
] =ğ
µcENDARG
 )

400  
¬gsTy³
[
ty³Index
] )

402 
µcFLOATARG
:

405 
µcArgs
[
¬gWÜdPos
] = 
¬gs
[
i
];

406 
numFlßtArgs
++;

407 
¬gWÜdPos
++;

411 
µcDOUBLEARG
:

414 
	`memıy
Ğ&
µcArgs
[
¬gWÜdPos
], &
¬gs
[
i
], () );

415 
numDoubËArgs
++;

416 
¬gWÜdPos
+=2;

417 
i
++;

421 
µcINTARG
:

424 
µcArgs
[
¬gWÜdPos
] = 
¬gs
[
i
];

425 
numIÁArgs
++;

426 
¬gWÜdPos
++;

430 
µcLONGARG
:

433 
	`memıy
Ğ&
µcArgs
[
¬gWÜdPos
], &
¬gs
[
i
], 8 );

434 
numLÚgArgs
++;

435 
¬gWÜdPos
 += 2;

436 
i
++;

443 
µcArgsTy³
[
ty³Off£t
] = 
µcENDARG
;

444 
	}
}

446 
asQWORD
 
	$C®lCDeşFunùiÚ
(cÚ¡ 
asDWORD
* 
pArgs
, cÚ¡ 
asBYTE
 *
pArgsTy³
, 
¬gSize
,‡sDWORD 
func
, *
»tInMemÜy
)

448 
ba£ArgCouÁ
 = 0;

449 ifĞ
»tInMemÜy
 )

452 
µcArgs
[0] = (
asDWORD
)
»tInMemÜy
;

453 
µcArgsTy³
[0] = 
µcINTARG
;

454 
µcArgsTy³
[1] = 
µcENDARG
;

455 
ba£ArgCouÁ
 = 1;

459 
numTÙ®Args
 = 
ba£ArgCouÁ
;

460 ifĞ
¬gSize
 > 0 )

462 
štArgs
 = 
ba£ArgCouÁ
, 
æßtArgs
 = 0, 
doubËArgs
 = 0, 
lÚgArgs
 = 0;

463 
	`¡ackArgs
Ğ
pArgs
, 
pArgsTy³
, 
štArgs
, 
æßtArgs
, 
doubËArgs
, 
lÚgArgs
 );

464 
numTÙ®Args
 = 
štArgs
 + 
æßtArgs
 + 
doubËArgs
 + 
lÚgArgs
;

469 
µcArgsTy³
[
ba£ArgCouÁ
] = 
µcENDARG
;

473  
	`µcFunc64
Ğ
µcArgs
, 
	`PPC_STACK_SIZE
(
numTÙ®Args
), 
func
 );

474 
	}
}

478 
asQWORD
 
	$C®lThisC®lFunùiÚ
(cÚ¡ *
obj
, cÚ¡ 
asDWORD
* 
pArgs
, cÚ¡ 
asBYTE
 *
pArgsTy³
, 
¬gSize
,‡sDWORD 
func
, *
»tInMemÜy
 )

480 
ba£ArgCouÁ
 = 0;

481 ifĞ
»tInMemÜy
 )

484 
µcArgs
[0] = (
asDWORD
)
»tInMemÜy
;

485 
µcArgsTy³
[0] = 
µcINTARG
;

486 
µcArgsTy³
[1] = 
µcENDARG
;

487 
ba£ArgCouÁ
 = 1;

491 
µcArgs
[
ba£ArgCouÁ
] = (
asDWORD
)
obj
;

492 
µcArgsTy³
[
ba£ArgCouÁ
++] = 
µcINTARG
;

493 
µcArgsTy³
[
ba£ArgCouÁ
] = 
µcENDARG
;

496 
numTÙ®Args
 = 
ba£ArgCouÁ
;

497 ifĞ
¬gSize
 > 0 )

499 
štArgs
 = 
ba£ArgCouÁ
, 
æßtArgs
 = 0, 
doubËArgs
 = 0, 
lÚgArgs
 = 0;

500 
	`¡ackArgs
Ğ
pArgs
, 
pArgsTy³
, 
štArgs
, 
æßtArgs
, 
doubËArgs
, 
lÚgArgs
 );

501 
numTÙ®Args
 = 
štArgs
 + 
æßtArgs
 + 
doubËArgs
 + 
lÚgArgs
;

505  
	`µcFunc64
Ğ
µcArgs
, 
	`PPC_STACK_SIZE
(
numTÙ®Args
), 
func
);

506 
	}
}

511 
asQWORD
 
	$C®lThisC®lFunùiÚ_objLa¡
(cÚ¡ *
obj
, cÚ¡ 
asDWORD
* 
pArgs
, cÚ¡ 
asBYTE
 *
pArgsTy³
, 
¬gSize
,‡sDWORD 
func
, *
»tInMemÜy
)

513 
	`UNUSED_VAR
(
¬gSize
);

514 
ba£ArgCouÁ
 = 0;

515 ifĞ
»tInMemÜy
 )

518 
µcArgs
[0] = (
asDWORD
)
»tInMemÜy
;

519 
µcArgsTy³
[0] = 
µcINTARG
;

520 
µcArgsTy³
[1] = 
µcENDARG
;

521 
ba£ArgCouÁ
 = 1;

525 
štArgs
 = 
ba£ArgCouÁ
, 
æßtArgs
 = 0, 
doubËArgs
 = 0, 
lÚgArgs
 = 0;

526 
	`¡ackArgs
Ğ
pArgs
, 
pArgsTy³
, 
štArgs
, 
æßtArgs
, 
doubËArgs
, 
lÚgArgs
 );

527 
numTÙ®Args
 = 
štArgs
 + 
æßtArgs
 + 
doubËArgs
;

530 ifĞ
numTÙ®Args
 < 
AS_PPC_MAX_ARGS
 )

533 
¬gPos
 = 
štArgs
 + 
æßtArgs
 + (
doubËArgs
 * 2è+ (
lÚgArgs
 *2);

534 
µcArgs
[
¬gPos
] = (
asDWORD
)
obj
;

535 
µcArgsTy³
[
numTÙ®Args
++] = 
µcINTARG
;

536 
µcArgsTy³
[
numTÙ®Args
] = 
µcENDARG
;

540  
	`µcFunc64
Ğ
µcArgs
, 
	`PPC_STACK_SIZE
(
numTÙ®Args
), 
func
 );

541 
	}
}

544 
šlše
 
boŞ
 
	$IsV¬ŸbËArgum’t
Ğ
asCD©aTy³
 
ty³
 )

546  (
ty³
.
	`G‘Tok’Ty³
(è=ğ
‰Que¡iÚ
è? 
Œue
 : 
çl£
;

547 
	}
}

549 
asQWORD
 
	$C®lSy¡emFunùiÚN©ive
(
asCCÚ‹xt
 *
cÚ‹xt
, 
asCSütFunùiÚ
 *
desü
, *
obj
, 
asDWORD
 *
¬gs
, *
»tPoš‹r
, 
asQWORD
 & )

552 
asBYTE
 
¬gsTy³
[
AS_PPC_MAX_ARGS
 + 1 + 1 + 1];

553 
	`mem£t
Ğ
¬gsTy³
, 0, (argsType));

555 
asCSütEngše
 *
’gše
 = 
cÚ‹xt
->
m_’gše
;

556 
asSSy¡emFunùiÚIÁ”çû
 *
sysFunc
 = 
desü
->
sysFuncIÁf
;

558 
ÿÎCÚv
 = 
sysFunc
->callConv;

560 
asQWORD
 
»tQW
 = 0;

561 *
func
 = (*)
sysFunc
->func;

562 
·¿mSize
 = 
sysFunc
->paramSize;

563 
asDWORD
 *
váabË
 = 
NULL
;

564 
a
;

567 
¬gDwÜdOff£t
 = 0;

568 
tÙ®Argum’tCouÁ
 = 0;

570  
a
 = 0;‡ < ()
desü
->
·¿m‘”Ty³s
.
	`G‘L’gth
(); ++a )

573 
numBy‹s
 = 
desü
->
·¿m‘”Ty³s
[
a
].
	`G‘SizeInMemÜyBy‹s
();

574 ++
tÙ®Argum’tCouÁ
;

579 
boŞ
 
isV¬Arg
 = 
	`IsV¬ŸbËArgum’t
Ğ
desü
->
·¿m‘”Ty³s
[
a
] );

580 ifĞ
isV¬Arg
 )

582 ++
tÙ®Argum’tCouÁ
;

585 ifĞ
numBy‹s
 >ğ4 || 
desü
->
·¿m‘”Ty³s
[
a
].
	`IsReã»nû
(è|| desü->·¿m‘”Ty³s[a].
	`IsObjeùHªdË
() )

588 
¬gDwÜdOff£t
 +ğ
desü
->
·¿m‘”Ty³s
[
a
].
	`G‘SizeOnSckDWÜds
();

593 
	`asASSERT
Ğ
numBy‹s
 == 1 ||‚umBytes == 2 );

594  
numBy‹s
 )

598 vŞ©
asBYTE
 *
bPŒ
 = (asBYTE*)
	`ARG_DW
(
¬gs
[
¬gDwÜdOff£t
]);

599 
asBYTE
 
t
 = 
bPŒ
[0];

600 
bPŒ
[0] = bPtr[3];

601 
bPŒ
[3] = 
t
;

602 
t
 = 
bPŒ
[1];

603 
bPŒ
[1] = bPtr[2];

604 
bPŒ
[2] = 
t
;

609 vŞ©
asWORD
 *
wPŒ
 = (asWORD*)
	`ARG_DW
(
¬gs
[
¬gDwÜdOff£t
]);

610 
asWORD
 
t
 = 
wPŒ
[0];

611 
wPŒ
[0] = wPtr[1];

612 
wPŒ
[1] = 
t
;

616 ++
¬gDwÜdOff£t
;

619 ifĞ
isV¬Arg
 )

622 ++
¬gDwÜdOff£t
;

626 
	`asASSERT
Ğ
tÙ®Argum’tCouÁ
 <ğ
AS_PPC_MAX_ARGS
 );

629 
¬gIndex
 = 0;

630  
a
 = 0;‡ < ()
desü
->
·¿m‘”Ty³s
.
	`G‘L’gth
(); ++a, ++
¬gIndex
 )

633 
¬gsTy³
[
¬gIndex
] = 
µcINTARG
;

634 ifĞ
desü
->
·¿m‘”Ty³s
[
a
].
	`IsFlßtTy³
(è&& !desü->·¿m‘”Ty³s[a].
	`IsReã»nû
() )

636 
¬gsTy³
[
¬gIndex
] = 
µcFLOATARG
;

638 ifĞ
desü
->
·¿m‘”Ty³s
[
a
].
	`IsDoubËTy³
(è&& !desü->·¿m‘”Ty³s[a].
	`IsReã»nû
() )

640 
¬gsTy³
[
¬gIndex
] = 
µcDOUBLEARG
;

642 ifĞ
desü
->
·¿m‘”Ty³s
[
a
].
	`G‘SizeOnSckDWÜds
(è=ğ2 && !desü->·¿m‘”Ty³s[a].
	`IsDoubËTy³
(è&& !desü->·¿m‘”Ty³s[a].
	`IsReã»nû
() )

644 
¬gsTy³
[
¬gIndex
] = 
µcLONGARG
;

648 ifĞ
	`IsV¬ŸbËArgum’t
(
desü
->
·¿m‘”Ty³s
[
a
]) )

651 
¬gsTy³
[++
¬gIndex
] = 
µcINTARG
;

654 
	`asASSERT
Ğ
¬gIndex
 =ğ
tÙ®Argum’tCouÁ
 );

656 
asDWORD
 
·¿mBufãr
[64];

657 ifĞ
sysFunc
->
kesObjByV®
 )

659 
·¿mSize
 = 0;

660 
¥os
 = 0;

661 
dpos
 = 1;

663  
asUINT
 
n
 = 0;‚ < 
desü
->
·¿m‘”Ty³s
.
	`G‘L’gth
();‚++ )

665 ifĞ
desü
->
·¿m‘”Ty³s
[
n
].
	`IsObjeù
(è&& !desü->·¿m‘”Ty³s[n].
	`IsObjeùHªdË
(è&& !desü->·¿m‘”Ty³s[n].
	`IsReã»nû
() )

667 #ifdeà
COMPLEX_OBJS_PASSED_BY_REF


668 ifĞ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
()->
æags
 & 
COMPLEX_MASK
 )

670 
·¿mBufãr
[
dpos
++] = 
¬gs
[
¥os
++];

671 ++
·¿mSize
;

679 
	`memıy
Ğ&
·¿mBufãr
[
dpos
], *(**)(
¬gs
+
¥os
), 
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeInMemÜyBy‹s
() );

682 
’gše
->
	`C®lF»e
Ğ*(**)(
¬gs
+
¥os
) );

683 
¥os
++;

684 
dpos
 +ğ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeInMemÜyDWÜds
();

685 
·¿mSize
 +ğ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeInMemÜyDWÜds
();

691 
·¿mBufãr
[
dpos
++] = 
¬gs
[
¥os
++];

692 ifĞ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
() > 1 )

694 
·¿mBufãr
[
dpos
++] = 
¬gs
[
¥os
++];

696 
·¿mSize
 +ğ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

700 ifĞ
	`IsV¬ŸbËArgum’t
Ğ
desü
->
·¿m‘”Ty³s
[
n
] ) )

703 
·¿mBufãr
[
dpos
++] = 
¬gs
[
¥os
++];

704 ++
·¿mSize
;

709 
¬gs
 = &
·¿mBufãr
[1];

713  
ÿÎCÚv
 )

715 
ICC_CDECL
:

716 
ICC_CDECL_RETURNINMEM
:

717 
ICC_STDCALL
:

718 
ICC_STDCALL_RETURNINMEM
:

719 
»tQW
 = 
	`C®lCDeşFunùiÚ
Ğ
¬gs
, 
¬gsTy³
, 
·¿mSize
, (
asDWORD
)
func
, 
»tPoš‹r
 );

721 
ICC_THISCALL
:

722 
ICC_THISCALL_RETURNINMEM
:

723 
»tQW
 = 
	`C®lThisC®lFunùiÚ
(
obj
, 
¬gs
, 
¬gsTy³
, 
·¿mSize
, (
asDWORD
)
func
, 
»tPoš‹r
 );

725 
ICC_VIRTUAL_THISCALL
:

726 
ICC_VIRTUAL_THISCALL_RETURNINMEM
:

728 
váabË
 = *(
asDWORD
**)
obj
;

729 
»tQW
 = 
	`C®lThisC®lFunùiÚ
Ğ
obj
, 
¬gs
, 
¬gsTy³
, 
·¿mSize
, 
váabË
[
	`asDWORD
(
func
)>>2], 
»tPoš‹r
 );

731 
ICC_CDECL_OBJLAST
:

732 
ICC_CDECL_OBJLAST_RETURNINMEM
:

733 
»tQW
 = 
	`C®lThisC®lFunùiÚ_objLa¡
Ğ
obj
, 
¬gs
, 
¬gsTy³
, 
·¿mSize
, (
asDWORD
)
func
, 
»tPoš‹r
 );

735 
ICC_CDECL_OBJFIRST
:

736 
ICC_CDECL_OBJFIRST_RETURNINMEM
:

737 
»tQW
 = 
	`C®lThisC®lFunùiÚ
Ğ
obj
, 
¬gs
, 
¬gsTy³
, 
·¿mSize
, (
asDWORD
)
func
, 
»tPoš‹r
 );

740 
cÚ‹xt
->
	`S‘IÁ”ÇlExû±iÚ
(
TXT_INVALID_CALLING_CONVENTION
);

743 ifĞ
sysFunc
->
ho¡R‘uºFlßt
 )

746 ifĞ
sysFunc
->
ho¡R‘uºSize
 == 1 )

747 *(
asDWORD
*)&
»tQW
 = 
	`G‘R‘uºedFlßt
();

749 
»tQW
 = 
	`G‘R‘uºedDoubË
();

751 ifĞ
sysFunc
->
ho¡R‘uºSize
 == 1 )

754 
»tQW
 <<= 32;

757  
»tQW
;

758 
	}
}

760 
	gEND_AS_NAMESPACE


	@../src/script/as_callfunc_sh4.cpp

46 
	~"as_cÚfig.h
"

48 #iâdeà
MAX_PORTABILITY


49 #ifdeà
AS_SH4


51 
	~"as_ÿÎfunc.h
"

52 
	~"as_sü‹ngše.h
"

53 
	~"as_‹xts.h
"

54 
	~"as_tok’def.h
"

56 
	~<¡dio.h
>

57 
	~<¡dlib.h
>

59 
	gBEGIN_AS_NAMESPACE


61 
	#AS_SH4_MAX_ARGS
 32

	)

69 
asDWORD
 
sh4Args
[
AS_SH4_MAX_ARGS
 + 1 + 1];

76 "C" 
asQWORD
 
sh4Func
(
štArgSize
, 
æßtArgSize
, 
¡ackArgSize
, 
asDWORD
 
func
);

78 
asm
(""

163 
šlše
 
	$¥l™Args
(cÚ¡ 
asDWORD
 *
¬gs
, 
¬gNum
, &
numRegIÁArgs
, &
numRegFlßtArgs
, &
numRe¡Args
, 
ho¡FÏgs
) {

164 
i
;

166 
¬gB™
 = 1;

167 
i
 = 0; i < 
¬gNum
; i++) {

168 ià(
ho¡FÏgs
 & 
¬gB™
) {

169 ià(
numRegFlßtArgs
 < 12 - 4) {

171 
sh4Args
[4 + 
numRegFlßtArgs
] = 
¬gs
[
i
];

172 
numRegFlßtArgs
++;

175 
sh4Args
[4 + 8 + 
numRe¡Args
] = 
¬gs
[
i
];

176 
numRe¡Args
++;

179 ià(
numRegIÁArgs
 < 8 - 4) {

181 
sh4Args
[
numRegIÁArgs
] = 
¬gs
[
i
];

182 
numRegIÁArgs
++;

185 
sh4Args
[4 + 8 + 
numRe¡Args
] = 
¬gs
[
i
];

186 
numRe¡Args
++;

189 
¬gB™
 <<= 1;

191 
	}
}

192 
asQWORD
 
	$C®lCDeşFunùiÚ
(cÚ¡ 
asDWORD
 *
¬gs
, 
¬gSize
,‡sDWORD 
func
, 
æags
)

194 
¬gNum
 = 
¬gSize
 >> 2;

196 
štArgs
 = 0;

197 
æßtArgs
 = 0;

198 
»¡Args
 = 0;

201 ià(
¬gNum
 > 0)

202 
	`¥l™Args
(
¬gs
, 
¬gNum
, 
štArgs
, 
æßtArgs
, 
»¡Args
, 
æags
);

204  
	`sh4Func
(
štArgs
 << 2, 
æßtArgs
 << 2, 
»¡Args
 << 2, 
func
);

205 
	}
}

209 
asQWORD
 
	$C®lThisC®lFunùiÚ
(cÚ¡ *
obj
, cÚ¡ 
asDWORD
 *
¬gs
, 
¬gSize
,‡sDWORD 
func
, 
æags
)

211 
¬gNum
 = 
¬gSize
 >> 2;

213 
štArgs
 = 1;

214 
æßtArgs
 = 0;

215 
»¡Args
 = 0;

217 
sh4Args
[0] = (
asDWORD
è
obj
;

220 ià(
¬gNum
 >= 1)

221 
	`¥l™Args
(
¬gs
, 
¬gNum
, 
štArgs
, 
æßtArgs
, 
»¡Args
, 
æags
);

223  
	`sh4Func
(
štArgs
 << 2, 
æßtArgs
 << 2, 
»¡Args
 << 2, 
func
);

224 
	}
}

227 
asQWORD
 
	$C®lThisC®lFunùiÚ_objLa¡
(cÚ¡ *
obj
, cÚ¡ 
asDWORD
 *
¬gs
, 
¬gSize
,‡sDWORD 
func
, 
æags
)

229 
¬gNum
 = 
¬gSize
 >> 2;

231 
štArgs
 = 0;

232 
æßtArgs
 = 0;

233 
»¡Args
 = 0;

237 ià(
¬gNum
 >= 1)

238 
	`¥l™Args
(
¬gs
, 
¬gNum
, 
štArgs
, 
æßtArgs
, 
»¡Args
, 
æags
);

240 ià(
štArgs
 < 4) {

241 
sh4Args
[
štArgs
] = (
asDWORD
è
obj
;

242 
štArgs
++;

244 
sh4Args
[4 + 8 + 
»¡Args
] = (
asDWORD
è
obj
;

245 
»¡Args
++;

249  
	`sh4Func
(
štArgs
 << 2, 
æßtArgs
 << 2, 
»¡Args
 << 2, 
func
);

250 
	}
}

252 
asDWORD
 
	$G‘R‘uºedFlßt
()

254 
asDWORD
 
f
;

256 
	`asm
("fmov.s fr0, %0\n" : "=m"(
f
));

258  
f
;

259 
	}
}

263 
asQWORD
 
	$G‘R‘uºedDoubË
()

265 
asQWORD
 
d
;

267 
	`asm
("fmov dr0, %0\n" : "=m"(
d
));

269  
d
;

270 
	}
}

272 
asQWORD
 
	$C®lSy¡emFunùiÚN©ive
(
asCCÚ‹xt
 *
cÚ‹xt
, 
asCSütFunùiÚ
 *
desü
, *
obj
, 
asDWORD
 *
¬gs
, *
»tPoš‹r
, 
asQWORD
 & )

274 
asCSütEngše
 *
’gše
 = 
cÚ‹xt
->
m_’gše
;

275 
asSSy¡emFunùiÚIÁ”çû
 *
sysFunc
 = 
desü
->
sysFuncIÁf
;

276 
ÿÎCÚv
 = 
sysFunc
->callConv;

278 
asQWORD
 
»tQW
 = 0;

280 *
func
 = (*)
sysFunc
->func;

281 
·¿mSize
 = 
sysFunc
->paramSize;

282 
asDWORD
 *
váabË
;

284 ifĞ
desü
->
»tuºTy³
.
	`IsObjeù
(è&& !desü->»tuºTy³.
	`IsReã»nû
(è&& !desü->»tuºTy³.
	`IsObjeùHªdË
() )

286 
sh4Args
[
AS_SH4_MAX_ARGS
+1] = (
asDWORD
è
»tPoš‹r
;

289 
	`asASSERT
(
desü
->
·¿m‘”Ty³s
.
	`G‘L’gth
() <= 32);

292 
¬gB™
 = 1;

293 
ho¡FÏgs
 = 0;

294 
štArgs
 = 0;

295  
asUINT
 
a
 = 0;‡ < 
desü
->
·¿m‘”Ty³s
.
	`G‘L’gth
();‡++ ) {

296 ià(
desü
->
·¿m‘”Ty³s
[
a
].
	`IsFlßtTy³
()) {

297 
ho¡FÏgs
 |ğ
¬gB™
;

298 } 
štArgs
++;

299 
¬gB™
 <<= 1;

302 
asDWORD
 
·¿mBufãr
[64];

303 ifĞ
sysFunc
->
kesObjByV®
 )

305 
·¿mSize
 = 0;

306 
¥os
 = 0;

307 
dpos
 = 1;

308  
asUINT
 
n
 = 0;‚ < 
desü
->
·¿m‘”Ty³s
.
	`G‘L’gth
();‚++ )

310 ifĞ
desü
->
·¿m‘”Ty³s
[
n
].
	`IsObjeù
(è&& !desü->·¿m‘”Ty³s[n].
	`IsObjeùHªdË
(è&& !desü->·¿m‘”Ty³s[n].
	`IsReã»nû
() )

312 #ifdeà
COMPLEX_OBJS_PASSED_BY_REF


313 ifĞ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
()->
æags
 & 
COMPLEX_MASK
 )

315 
·¿mBufãr
[
dpos
++] = 
¬gs
[
¥os
++];

316 
·¿mSize
++;

322 
	`memıy
(&
·¿mBufãr
[
dpos
], *(**)(
¬gs
+
¥os
), 
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeInMemÜyBy‹s
());

324 
’gše
->
	`C®lF»e
(*(**)(
¬gs
+
¥os
));

325 
¥os
++;

326 
dpos
 +ğ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeInMemÜyDWÜds
();

327 
·¿mSize
 +ğ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeInMemÜyDWÜds
();

333 
·¿mBufãr
[
dpos
++] = 
¬gs
[
¥os
++];

334 ifĞ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
() > 1 )

335 
·¿mBufãr
[
dpos
++] = 
¬gs
[
¥os
++];

336 
·¿mSize
 +ğ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

340 
¬gs
 = &
·¿mBufãr
[1];

343  
ÿÎCÚv
 )

345 
ICC_CDECL
:

346 
ICC_CDECL_RETURNINMEM
:

347 
ICC_STDCALL
:

348 
ICC_STDCALL_RETURNINMEM
:

349 
»tQW
 = 
	`C®lCDeşFunùiÚ
(
¬gs
, 
·¿mSize
<<2, (
asDWORD
)
func
, 
ho¡FÏgs
);

351 
ICC_THISCALL
:

352 
ICC_THISCALL_RETURNINMEM
:

353 
»tQW
 = 
	`C®lThisC®lFunùiÚ
(
obj
, 
¬gs
, 
·¿mSize
<<2, (
asDWORD
)
func
, 
ho¡FÏgs
);

355 
ICC_VIRTUAL_THISCALL
:

356 
ICC_VIRTUAL_THISCALL_RETURNINMEM
:

358 
váabË
 = *(
asDWORD
**)
obj
;

359 
»tQW
 = 
	`C®lThisC®lFunùiÚ
(
obj
, 
¬gs
, 
·¿mSize
<<2, 
váabË
[
	`asDWORD
(
func
)>>2], 
ho¡FÏgs
);

361 
ICC_CDECL_OBJLAST
:

362 
ICC_CDECL_OBJLAST_RETURNINMEM
:

363 
»tQW
 = 
	`C®lThisC®lFunùiÚ_objLa¡
(
obj
, 
¬gs
, 
·¿mSize
<<2, (
asDWORD
)
func
, 
ho¡FÏgs
);

365 
ICC_CDECL_OBJFIRST
:

366 
ICC_CDECL_OBJFIRST_RETURNINMEM
:

367 
»tQW
 = 
	`C®lThisC®lFunùiÚ
(
obj
, 
¬gs
, 
·¿mSize
<<2, (
asDWORD
)
func
, 
ho¡FÏgs
);

370 
cÚ‹xt
->
	`S‘IÁ”ÇlExû±iÚ
(
TXT_INVALID_CALLING_CONVENTION
);

374 ifĞ
sysFunc
->
ho¡R‘uºFlßt
 )

376 ifĞ
sysFunc
->
ho¡R‘uºSize
 == 1 )

377 *(
asDWORD
*)&
»tQW
 = 
	`G‘R‘uºedFlßt
();

379 
»tQW
 = 
	`G‘R‘uºedDoubË
();

382  
»tQW
;

383 
	}
}

385 
	gEND_AS_NAMESPACE


	@../src/script/as_callfunc_x64_gcc.cpp

39 
	~"as_cÚfig.h
"

41 #iâdeà
AS_MAX_PORTABILITY


42 #ifdeà
AS_X64_GCC


44 
	~"as_sü‹ngše.h
"

45 
	~"as_‹xts.h
"

47 
BEGIN_AS_NAMESPACE


49 
	e¬gTy³s
 { 
	mx64INTARG
 = 0, 
	mx64FLOATARG
 = 1 };

50 
	$asQWORD
 ( *
	tfunıŒ_t
 )( );

52 
	#X64_MAX_ARGS
 32

	)

53 
	#MAX_CALL_INT_REGISTERS
 6

	)

54 
	#MAX_CALL_SSE_REGISTERS
 8

	)

55 
	#X64_CALLSTACK_SIZE
 ( 
X64_MAX_ARGS
 + 
MAX_CALL_SSE_REGISTERS
 + 3 )

	)

60 
asQWORD
 
	`__©Œibu‹__
((
nošlše
)è
	$X64_C®lFunùiÚ
(cÚ¡ 
asQWORD
 *
¬gs
, 
út
, 
funıŒ_t
 
func
,‡sQWORD &
»tQW2
, 
boŞ
 
»tuºFlßt
)

62 
asQWORD
 
»tQW1
;

66 
__asm__
 
	`__vŞ©e__
 (

140 : : "r" ((
asQWORD
)
út
), "r" (
¬gs
), "r" (
func
), "m" (
»tQW1
), "m" (
»tQW2
), "m" (
»tuºFlßt
)

144  
»tQW1
;

145 
	}
}

148 
šlše
 
boŞ
 
	$IsV¬ŸbËArgum’t
Ğ
asCD©aTy³
 
ty³
 )

150  ( 
ty³
.
	`G‘Tok’Ty³
(è=ğ
‰Que¡iÚ
 ) ? 
Œue
 : 
çl£
;

151 
	}
}

153 
asQWORD
 
	$C®lSy¡emFunùiÚN©ive
(
asCCÚ‹xt
 *
cÚ‹xt
, 
asCSütFunùiÚ
 *
desü
, *
obj
, 
asDWORD
 *
¬gs
, *
»tPoš‹r
, 
asQWORD
 &
»tQW2
)

155 
asCSütEngše
 *
’gše
 = 
cÚ‹xt
->
m_’gše
;

156 
asSSy¡emFunùiÚIÁ”çû
 *
sysFunc
 = 
desü
->
sysFuncIÁf
;

157 
ÿÎCÚv
 = 
sysFunc
->callConv;

158 
asQWORD
 
»tQW
 = 0;

159 
asDWORD
 *
¡ack_poš‹r
 = 
¬gs
;

160 
funıŒ_t
 *
váabË
 = 
NULL
;

161 
tÙ®Argum’tCouÁ
 = 0;

162 
n
 = 0;

163 
·¿m_po¡
 = 0;

164 
¬gIndex
 = 0;

165 
funıŒ_t
 
func
 = (funıŒ_t)
sysFunc
->func;

167 ifĞ
sysFunc
->
ho¡R‘uºInMemÜy
 )

170 
ÿÎCÚv
++;

174 iàĞ
obj
 && ( 
ÿÎCÚv
 =ğ
ICC_VIRTUAL_THISCALL
 || c®lCÚv =ğ
ICC_VIRTUAL_THISCALL_RETURNINMEM
 ) )

176 
váabË
 = *((
funıŒ_t
**)
obj
);

177 
func
 = 
váabË
[
	`FuncPŒToUIÁ
(
	`asFUNCTION_t
(func)) >> 3];

181 
asQWORD
 
·¿mBufãr
[
X64_CALLSTACK_SIZE
] = { 0 };

182 
asBYTE
 
¬gsTy³
[
X64_CALLSTACK_SIZE
] = { 0 };

184  
ÿÎCÚv
 )

186 
ICC_CDECL_RETURNINMEM
:

187 
ICC_STDCALL_RETURNINMEM
:

189 
·¿mBufãr
[0] = (
asPWORD
)
»tPoš‹r
;

190 
¬gsTy³
[0] = 
x64INTARG
;

192 
¬gIndex
 = 1;

196 
ICC_THISCALL
:

197 
ICC_VIRTUAL_THISCALL
:

198 
ICC_CDECL_OBJFIRST
:

200 
·¿mBufãr
[0] = (
asPWORD
)
obj
;

201 
¬gsTy³
[0] = 
x64INTARG
;

203 
¬gIndex
 = 1;

207 
ICC_THISCALL_RETURNINMEM
:

208 
ICC_VIRTUAL_THISCALL_RETURNINMEM
:

209 
ICC_CDECL_OBJFIRST_RETURNINMEM
:

211 
·¿mBufãr
[0] = (
asPWORD
)
»tPoš‹r
;

212 
·¿mBufãr
[1] = (
asPWORD
)
obj
;

213 
¬gsTy³
[0] = 
x64INTARG
;

214 
¬gsTy³
[1] = 
x64INTARG
;

216 
¬gIndex
 = 2;

220 
ICC_CDECL_OBJLAST
:

221 
·¿m_po¡
 = 1;

223 
ICC_CDECL_OBJLAST_RETURNINMEM
:

225 
·¿mBufãr
[0] = (
asPWORD
)
»tPoš‹r
;

226 
¬gsTy³
[0] = 
x64INTARG
;

228 
¬gIndex
 = 1;

229 
·¿m_po¡
 = 1;

235 
¬gum’tCouÁ
 = ( )
desü
->
·¿m‘”Ty³s
.
	`G‘L’gth
();

236  
a
 = 0;‡ < 
¬gum’tCouÁ
; ++a )

238 ifĞ
desü
->
·¿m‘”Ty³s
[
a
].
	`IsFlßtTy³
(è&& !desü->·¿m‘”Ty³s[a].
	`IsReã»nû
() )

240 
¬gsTy³
[
¬gIndex
] = 
x64FLOATARG
;

241 
	`memıy
(
·¿mBufãr
 + 
¬gIndex
, 
¡ack_poš‹r
, ());

242 
¬gIndex
++;

243 
¡ack_poš‹r
++;

245 ifĞ
desü
->
·¿m‘”Ty³s
[
a
].
	`IsDoubËTy³
(è&& !desü->·¿m‘”Ty³s[a].
	`IsReã»nû
() )

247 
¬gsTy³
[
¬gIndex
] = 
x64FLOATARG
;

248 
	`memıy
(
·¿mBufãr
 + 
¬gIndex
, 
¡ack_poš‹r
, ());

249 
¬gIndex
++;

250 
¡ack_poš‹r
 += 2;

252 ifĞ
	`IsV¬ŸbËArgum’t
Ğ
desü
->
·¿m‘”Ty³s
[
a
] ) )

255 
¬gsTy³
[
¬gIndex
] = 
x64INTARG
;

256 
¬gsTy³
[
¬gIndex
+1] = 
x64INTARG
;

257 
	`memıy
(
·¿mBufãr
 + 
¬gIndex
, 
¡ack_poš‹r
, (*));

258 
	`memıy
(
·¿mBufãr
 + 
¬gIndex
 + 1, 
¡ack_poš‹r
 + 2, (
asDWORD
));

259 
¬gIndex
 += 2;

260 
¡ack_poš‹r
 += 3;

262 ifĞ
desü
->
·¿m‘”Ty³s
[
a
].
	`IsPrim™ive
() ||

263 
desü
->
·¿m‘”Ty³s
[
a
].
	`IsReã»nû
() ||

264 
desü
->
·¿m‘”Ty³s
[
a
].
	`IsObjeùHªdË
() )

266 
¬gsTy³
[
¬gIndex
] = 
x64INTARG
;

267 ifĞ
desü
->
·¿m‘”Ty³s
[
a
].
	`G‘SizeOnSckDWÜds
() == 1 )

269 
	`memıy
(
·¿mBufãr
 + 
¬gIndex
, 
¡ack_poš‹r
, (
asDWORD
));

270 
¡ack_poš‹r
++;

274 
	`memıy
(
·¿mBufãr
 + 
¬gIndex
, 
¡ack_poš‹r
, (
asQWORD
));

275 
¡ack_poš‹r
 += 2;

277 
¬gIndex
++;

282 ifĞ(
desü
->
·¿m‘”Ty³s
[
a
].
	`G‘ObjeùTy³
()->
æags
 & 
COMPLEX_MASK
) ||

283 
desü
->
·¿m‘”Ty³s
[
a
].
	`G‘SizeInMemÜyDWÜds
() > 4 )

286 
¬gsTy³
[
¬gIndex
] = 
x64INTARG
;

287 
	`memıy
(
·¿mBufãr
 + 
¬gIndex
, 
¡ack_poš‹r
, (
asQWORD
));

288 
¬gIndex
++;

290 ifĞ
desü
->
·¿m‘”Ty³s
[
a
].
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_APP_CLASS_ALLINTS
 )

293 ifĞ
desü
->
·¿m‘”Ty³s
[
a
].
	`G‘SizeInMemÜyDWÜds
() > 2 )

295 
¬gsTy³
[
¬gIndex
] = 
x64INTARG
;

296 
¬gsTy³
[
¬gIndex
+1] = 
x64INTARG
;

297 
	`memıy
(
·¿mBufãr
 + 
¬gIndex
, *(
asDWORD
**)
¡ack_poš‹r
, 
desü
->
·¿m‘”Ty³s
[
a
].
	`G‘SizeInMemÜyBy‹s
());

298 
¬gIndex
 += 2;

302 
¬gsTy³
[
¬gIndex
] = 
x64INTARG
;

303 
	`memıy
(
·¿mBufãr
 + 
¬gIndex
, *(
asDWORD
**)
¡ack_poš‹r
, 
desü
->
·¿m‘”Ty³s
[
a
].
	`G‘SizeInMemÜyBy‹s
());

304 
¬gIndex
++;

307 
’gše
->
	`C®lF»e
(*(**)
¡ack_poš‹r
);

309 ifĞ
desü
->
·¿m‘”Ty³s
[
a
].
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_APP_CLASS_ALLFLOATS
 )

312 ifĞ
desü
->
·¿m‘”Ty³s
[
a
].
	`G‘SizeInMemÜyDWÜds
() > 2 )

314 
¬gsTy³
[
¬gIndex
] = 
x64FLOATARG
;

315 
¬gsTy³
[
¬gIndex
+1] = 
x64FLOATARG
;

316 
	`memıy
(
·¿mBufãr
 + 
¬gIndex
, *(
asDWORD
**)
¡ack_poš‹r
, 
desü
->
·¿m‘”Ty³s
[
a
].
	`G‘SizeInMemÜyBy‹s
());

317 
¬gIndex
 += 2;

321 
¬gsTy³
[
¬gIndex
] = 
x64FLOATARG
;

322 
	`memıy
(
·¿mBufãr
 + 
¬gIndex
, *(
asDWORD
**)
¡ack_poš‹r
, 
desü
->
·¿m‘”Ty³s
[
a
].
	`G‘SizeInMemÜyBy‹s
());

323 
¬gIndex
++;

326 
’gše
->
	`C®lF»e
(*(**)
¡ack_poš‹r
);

328 
¡ack_poš‹r
 += 2;

333 ifĞ
·¿m_po¡
 )

335 
·¿mBufãr
[
¬gIndex
] = (
asPWORD
)
obj
;

336 
¬gsTy³
[
¬gIndex
] = 
x64INTARG
;

337 
¬gIndex
++;

340 
tÙ®Argum’tCouÁ
 = 
¬gIndex
;

361 
asQWORD
 
‹mpBuff
[
X64_CALLSTACK_SIZE
] = { 0 };

362 
asBYTE
 
¬gsS‘
[
X64_CALLSTACK_SIZE
] = { 0 };

363 
u£d_št_»gs
 = 0;

364 
u£d_s£_»gs
 = 0;

365 
u£d_¡ack_¬gs
 = 0;

366 
idx
 = 0;

367  
n
 = 0; (‚ < 
tÙ®Argum’tCouÁ
 ) && ( 
u£d_št_»gs
 < 
MAX_CALL_INT_REGISTERS
 );‚++ )

369 iàĞ
¬gsTy³
[
n
] =ğ
x64INTARG
 )

371 
¬gsS‘
[
n
] = 1;

372 
‹mpBuff
[
idx
++] = 
·¿mBufãr
[
n
];

373 
u£d_št_»gs
++;

376 
idx
 = 
MAX_CALL_INT_REGISTERS
;

377  
n
 = 0; (‚ < 
tÙ®Argum’tCouÁ
 ) && ( 
u£d_s£_»gs
 < 
MAX_CALL_SSE_REGISTERS
 );‚++ )

379 iàĞ
¬gsTy³
[
n
] =ğ
x64FLOATARG
 )

381 
¬gsS‘
[
n
] = 1;

382 
‹mpBuff
[
idx
++] = 
·¿mBufãr
[
n
];

383 
u£d_s£_»gs
++;

386 
idx
 = 
MAX_CALL_INT_REGISTERS
 + 
MAX_CALL_SSE_REGISTERS
;

387  
n
 = 
tÙ®Argum’tCouÁ
 - 1;‚ >= 0;‚-- )

389 iàĞ!
¬gsS‘
[
n
] )

391 
‹mpBuff
[
idx
++] = 
·¿mBufãr
[
n
];

392 
u£d_¡ack_¬gs
++;

396 
»tQW
 = 
	`X64_C®lFunùiÚ
Ğ
‹mpBuff
, 
u£d_¡ack_¬gs
, 
func
, 
»tQW2
, 
sysFunc
->
ho¡R‘uºFlßt
 );

398  
»tQW
;

399 
	}
}

401 
	gEND_AS_NAMESPACE


	@../src/script/as_callfunc_x64_mingw.cpp

35 
	~<¡dio.h
>

37 
	~"as_cÚfig.h
"

39 #iâdeà
AS_MAX_PORTABILITY


40 #ifdeà
AS_X64_MINGW


42 
	~"as_ÿÎfunc.h
"

43 
	~"as_sü‹ngše.h
"

44 
	~"as_‹xts.h
"

46 
BEGIN_AS_NAMESPACE


48 
asQWORD
 
	$C®lX64
(cÚ¡ 
asQWORD
 *
¬gs
, cÚ¡‡sQWORD *
æßtArgs
, cÚ¡ 
·¿mSize
,‡sQWORD 
func
)

50 
asQWORD
 
»t
 = 0;

52 
__asm__
 
	`__vŞ©e__
 (

125 : "m" (
»t
), "r" (
¬gs
), "r" (
æßtArgs
), "r" (
·¿mSize
), "r" (
func
)

129  
»t
;

130 
	}
}

132 
asDWORD
 
	$G‘R‘uºedFlßt
()

134 
»tv®
 = 0.0f;

135 
asDWORD
 
»t
 = 0;

137 
__asm__
 
	`__vŞ©e__
 (

141 : "m" (
»tv®
)

147 
	`memıy
Ğ&
»t
, &
»tv®
, („et ) );

149  ( 
asDWORD
 )
»t
;

150 
	}
}

152 
asQWORD
 
	$G‘R‘uºedDoubË
()

154 
»tv®
 = 0.0f;

155 
asQWORD
 
»t
 = 0;

157 
__asm__
 
	`__vŞ©e__
 (

161 : "m" (
»tv®
)

167 
	`memıy
Ğ&
»t
, &
»tv®
, („et ) );

169  
»t
;

170 
	}
}

172 
asQWORD
 
	$C®lSy¡emFunùiÚN©ive
(
asCCÚ‹xt
 *
cÚ‹xt
, 
asCSütFunùiÚ
 *
desü
, *
obj
, 
asDWORD
 *
¬gs
, *
»tPoš‹r
, 
asQWORD
 & )

174 
asCSütEngše
 *
’gše
 = 
cÚ‹xt
->
m_’gše
;

175 
asSSy¡emFunùiÚIÁ”çû
 *
sysFunc
 = 
desü
->
sysFuncIÁf
;

177 
asQWORD
 
»tQW
 = 0;

178 *
func
 = (*)
sysFunc
->func;

179 
asUINT
 
·¿mSize
 = 0;

180 **
váabË
;

182 
asQWORD
 
®lArgBufãr
[64];

183 
asQWORD
 
æßtArgBufãr
[4];

185 
ÿÎCÚv
 = 
sysFunc
->callConv;

187 ifĞ
sysFunc
->
ho¡R‘uºInMemÜy
 )

190 
ÿÎCÚv
++;

193 
®lArgBufãr
[
·¿mSize
++] = (
asQWORD
)
»tPoš‹r
;

196 ifĞ
ÿÎCÚv
 =ğ
ICC_THISCALL
 ||

197 
ÿÎCÚv
 =ğ
ICC_THISCALL_RETURNINMEM
 ||

198 
ÿÎCÚv
 =ğ
ICC_VIRTUAL_THISCALL
 ||

199 
ÿÎCÚv
 =ğ
ICC_VIRTUAL_THISCALL_RETURNINMEM
 )

202 
®lArgBufãr
[
·¿mSize
++] = (
asQWORD
)
obj
;

205 ifĞ
ÿÎCÚv
 =ğ
ICC_CDECL_OBJFIRST
 ||

206 
ÿÎCÚv
 =ğ
ICC_CDECL_OBJFIRST_RETURNINMEM
 )

209 
®lArgBufãr
[
·¿mSize
++] = (
asQWORD
)
obj
;

211 ifĞ
ÿÎCÚv
 =ğ
ICC_VIRTUAL_THISCALL
 ||

212 
ÿÎCÚv
 =ğ
ICC_VIRTUAL_THISCALL_RETURNINMEM
 )

215 
váabË
 = *(***)
obj
;

216 
func
 = 
váabË
[
	`asPWORD
(func)>>3];

220 
asUINT
 
dpos
 = 
·¿mSize
;

221 
asUINT
 
¥os
 = 0;

222  
asUINT
 
n
 = 0;‚ < 
desü
->
·¿m‘”Ty³s
.
	`G‘L’gth
();‚++ )

224 ifĞ
desü
->
·¿m‘”Ty³s
[
n
].
	`IsObjeù
(è&& !desü->·¿m‘”Ty³s[n].
	`IsObjeùHªdË
(è&& !desü->·¿m‘”Ty³s[n].
	`IsReã»nû
() )

226 ifĞ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeInMemÜyDWÜds
(è>ğ
AS_LARGE_OBJ_MIN_SIZE
 ||

227 (
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
()->
æags
 & 
COMPLEX_MASK
) )

229 
®lArgBufãr
[
dpos
++] = *(
asQWORD
*)&
¬gs
[
¥os
];

230 
¥os
 +ğ
AS_PTR_SIZE
;

231 
·¿mSize
++;

236 
	`memıy
(&
®lArgBufãr
[
dpos
], *(**)(
¬gs
+
¥os
), 
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeInMemÜyBy‹s
());

239 
’gše
->
	`C®lF»e
(*(**)(
¬gs
+
¥os
));

240 
¥os
 +ğ
AS_PTR_SIZE
;

241 
asUINT
 
dwÜds
 = 
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeInMemÜyDWÜds
();

242 
asUINT
 
qwÜds
 = (
dwÜds
 >> 1) + (dwords & 1);

243 
dpos
 +ğ
qwÜds
;

244 
·¿mSize
 +ğ
qwÜds
;

247 ifĞ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘Tok’Ty³
(è=ğ
‰Que¡iÚ
 )

250 
®lArgBufãr
[
dpos
++] = *(
asQWORD
*)&
¬gs
[
¥os
];

251 
¥os
 += 2;

252 
®lArgBufãr
[
dpos
++] = 
¬gs
[
¥os
++];

253 
·¿mSize
 += 2;

258 
asUINT
 
dwÜds
 = 
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

259 ifĞ
dwÜds
 > 1 )

261 
®lArgBufãr
[
dpos
] = *(
asQWORD
*)&
¬gs
[
¥os
];

265 ifĞ
·¿mSize
 < 4 && 
desü
->
·¿m‘”Ty³s
[
n
].
	`IsDoubËTy³
() )

266 
æßtArgBufãr
[
dpos
] = *(
asQWORD
*)&
¬gs
[
¥os
];

268 
dpos
++;

269 
¥os
 += 2;

273 
®lArgBufãr
[
dpos
] = 
¬gs
[
¥os
];

277 ifĞ
·¿mSize
 < 4 && 
desü
->
·¿m‘”Ty³s
[
n
].
	`IsFlßtTy³
() )

278 
æßtArgBufãr
[
dpos
] = 
¬gs
[
¥os
];

280 
dpos
++;

281 
¥os
++;

284 
·¿mSize
++;

288 ifĞ
ÿÎCÚv
 =ğ
ICC_CDECL_OBJLAST
 ||

289 
ÿÎCÚv
 =ğ
ICC_CDECL_OBJLAST_RETURNINMEM
 )

292 
®lArgBufãr
[
·¿mSize
++] = (
asQWORD
)
obj
;

295 
»tQW
 = 
	`C®lX64
(
®lArgBufãr
, 
æßtArgBufãr
, 
·¿mSize
*8, (
asPWORD
)
func
);

298 ifĞ
sysFunc
->
ho¡R‘uºFlßt
 )

300 ifĞ
sysFunc
->
ho¡R‘uºSize
 == 1 )

301 *(
asDWORD
*)&
»tQW
 = 
	`G‘R‘uºedFlßt
();

303 
»tQW
 = 
	`G‘R‘uºedDoubË
();

306  
»tQW
;

307 
	}
}

309 
	gEND_AS_NAMESPACE


	@../src/script/as_callfunc_x64_msvc.cpp

32 
	~<¡dio.h
>

34 
	~"as_cÚfig.h
"

36 #iâdeà
AS_MAX_PORTABILITY


37 #ifdeà
AS_X64_MSVC


39 
	~"as_ÿÎfunc.h
"

40 
	~"as_sü‹ngše.h
"

41 
	~"as_‹xts.h
"

43 
BEGIN_AS_NAMESPACE


46 "C" 
asQWORD
 
C®lX64
(cÚ¡‡sQWORD *
¬gs
, cÚ¡‡sQWORD *
æßtArgs
, 
·¿mSize
,‡sQWORD 
func
);

47 "C" 
asDWORD
 
G‘R‘uºedFlßt
();

48 "C" 
asQWORD
 
G‘R‘uºedDoubË
();

50 
asQWORD
 
	$C®lSy¡emFunùiÚN©ive
(
asCCÚ‹xt
 *
cÚ‹xt
, 
asCSütFunùiÚ
 *
desü
, *
obj
, 
asDWORD
 *
¬gs
, *
»tPoš‹r
, 
asQWORD
 & )

52 
asCSütEngše
 *
’gše
 = 
cÚ‹xt
->
m_’gše
;

53 
asSSy¡emFunùiÚIÁ”çû
 *
sysFunc
 = 
desü
->
sysFuncIÁf
;

55 
asQWORD
 
»tQW
 = 0;

56 *
func
 = (*)
sysFunc
->func;

57 
asUINT
 
·¿mSize
 = 0;

58 **
váabË
;

60 
asQWORD
 
®lArgBufãr
[64];

61 
asQWORD
 
æßtArgBufãr
[4];

63 
ÿÎCÚv
 = 
sysFunc
->callConv;

64 ifĞ
ÿÎCÚv
 =ğ
ICC_THISCALL
 ||

65 
ÿÎCÚv
 =ğ
ICC_THISCALL_RETURNINMEM
 ||

66 
ÿÎCÚv
 =ğ
ICC_VIRTUAL_THISCALL
 ||

67 
ÿÎCÚv
 =ğ
ICC_VIRTUAL_THISCALL_RETURNINMEM
 )

70 
®lArgBufãr
[
·¿mSize
++] = (
asQWORD
)
obj
;

73 ifĞ
sysFunc
->
ho¡R‘uºInMemÜy
 )

76 
ÿÎCÚv
++;

79 
®lArgBufãr
[
·¿mSize
++] = (
asQWORD
)
»tPoš‹r
;

82 ifĞ
ÿÎCÚv
 =ğ
ICC_CDECL_OBJFIRST
 ||

83 
ÿÎCÚv
 =ğ
ICC_CDECL_OBJFIRST_RETURNINMEM
 )

86 
®lArgBufãr
[
·¿mSize
++] = (
asQWORD
)
obj
;

89 ifĞ
ÿÎCÚv
 =ğ
ICC_VIRTUAL_THISCALL
 ||

90 
ÿÎCÚv
 =ğ
ICC_VIRTUAL_THISCALL_RETURNINMEM
 )

93 
váabË
 = *(***)
obj
;

94 
func
 = 
váabË
[
	`asPWORD
(func)>>2];

98 
asUINT
 
dpos
 = 
·¿mSize
;

99 
asUINT
 
¥os
 = 0;

100  
asUINT
 
n
 = 0;‚ < 
desü
->
·¿m‘”Ty³s
.
	`G‘L’gth
();‚++ )

102 ifĞ
desü
->
·¿m‘”Ty³s
[
n
].
	`IsObjeù
(è&& !desü->·¿m‘”Ty³s[n].
	`IsObjeùHªdË
(è&& !desü->·¿m‘”Ty³s[n].
	`IsReã»nû
() )

104 ifĞ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeInMemÜyDWÜds
(è>ğ
AS_LARGE_OBJ_MIN_SIZE
 ||

105 (
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
()->
æags
 & 
COMPLEX_MASK
) )

107 
®lArgBufãr
[
dpos
++] = *(
asQWORD
*)&
¬gs
[
¥os
];

108 
¥os
 +ğ
AS_PTR_SIZE
;

109 
·¿mSize
++;

114 
	`memıy
(&
®lArgBufãr
[
dpos
], *(**)(
¬gs
+
¥os
), 
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeInMemÜyBy‹s
());

117 
’gše
->
	`C®lF»e
(*(**)(
¬gs
+
¥os
));

118 
¥os
 +ğ
AS_PTR_SIZE
;

119 
asUINT
 
dwÜds
 = 
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeInMemÜyDWÜds
();

120 
asUINT
 
qwÜds
 = (
dwÜds
 >> 1) + (dwords & 1);

121 
dpos
 +ğ
qwÜds
;

122 
·¿mSize
 +ğ
qwÜds
;

125 ifĞ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘Tok’Ty³
(è=ğ
‰Que¡iÚ
 )

128 
®lArgBufãr
[
dpos
++] = *(
asQWORD
*)&
¬gs
[
¥os
];

129 
¥os
 += 2;

130 
®lArgBufãr
[
dpos
++] = 
¬gs
[
¥os
++];

131 
·¿mSize
 += 2;

136 
asUINT
 
dwÜds
 = 
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

137 ifĞ
dwÜds
 > 1 )

139 
®lArgBufãr
[
dpos
] = *(
asQWORD
*)&
¬gs
[
¥os
];

143 ifĞ
·¿mSize
 < 4 && 
desü
->
·¿m‘”Ty³s
[
n
].
	`IsDoubËTy³
() )

144 
æßtArgBufãr
[
dpos
] = *(
asQWORD
*)&
¬gs
[
¥os
];

146 
dpos
++;

147 
¥os
 += 2;

151 
®lArgBufãr
[
dpos
] = 
¬gs
[
¥os
];

155 ifĞ
·¿mSize
 < 4 && 
desü
->
·¿m‘”Ty³s
[
n
].
	`IsFlßtTy³
() )

156 
æßtArgBufãr
[
dpos
] = 
¬gs
[
¥os
];

158 
dpos
++;

159 
¥os
++;

162 
·¿mSize
++;

166 ifĞ
ÿÎCÚv
 =ğ
ICC_CDECL_OBJLAST
 ||

167 
ÿÎCÚv
 =ğ
ICC_CDECL_OBJLAST_RETURNINMEM
 )

170 
®lArgBufãr
[
·¿mSize
++] = (
asQWORD
)
obj
;

173 
»tQW
 = 
	`C®lX64
(
®lArgBufãr
, 
æßtArgBufãr
, 
·¿mSize
*8, (
asPWORD
)
func
);

176 ifĞ
sysFunc
->
ho¡R‘uºFlßt
 )

178 ifĞ
sysFunc
->
ho¡R‘uºSize
 == 1 )

179 *(
asDWORD
*)&
»tQW
 = 
	`G‘R‘uºedFlßt
();

181 
»tQW
 = 
	`G‘R‘uºedDoubË
();

184  
»tQW
;

185 
	}
}

187 
	gEND_AS_NAMESPACE


	@../src/script/as_callfunc_x86.cpp

40 
	~"as_cÚfig.h
"

42 #iâdeà
AS_MAX_PORTABILITY


43 #ifdeà
AS_X86


45 
	~"as_ÿÎfunc.h
"

46 
	~"as_sü‹ngše.h
"

47 
	~"as_‹xts.h
"

48 
	~"as_tok’def.h
"

50 
	gBEGIN_AS_NAMESPACE


67 #iâdeà
CLEAR_FPU_STACK


68 
	#CLEAR_FPU_STACK
 
âš™


	)

72 
	#_S
(
x
è
	`_TOSTRING
(x)

	)

73 
	#_TOSTRING
(
x
è#x

	)

76 
asQWORD
 
C®lCDeşFunùiÚ
(cÚ¡ 
asDWORD
 *
¬gs
, 
·¿mSize
, 
asFUNCTION_t
 
func
);

77 
asQWORD
 
C®lCDeşFunùiÚObjLa¡
(cÚ¡ *
obj
, cÚ¡ 
asDWORD
 *
¬gs
, 
·¿mSize
, 
asFUNCTION_t
 
func
);

78 
asQWORD
 
C®lCDeşFunùiÚObjFœ¡
(cÚ¡ *
obj
, cÚ¡ 
asDWORD
 *
¬gs
, 
·¿mSize
, 
asFUNCTION_t
 
func
);

79 
asQWORD
 
C®lCDeşFunùiÚR‘ByRef
(cÚ¡ 
asDWORD
 *
¬gs
, 
·¿mSize
, 
asFUNCTION_t
 
func
, *
»tPŒ
);

80 
asQWORD
 
C®lCDeşFunùiÚR‘ByRefObjLa¡
(cÚ¡ *
obj
, cÚ¡ 
asDWORD
 *
¬gs
, 
·¿mSize
, 
asFUNCTION_t
 
func
, *
»tPŒ
);

81 
asQWORD
 
C®lCDeşFunùiÚR‘ByRefObjFœ¡
(cÚ¡ *
obj
, cÚ¡ 
asDWORD
 *
¬gs
, 
·¿mSize
, 
asFUNCTION_t
 
func
, *
»tPŒ
);

82 
asQWORD
 
C®lSTDC®lFunùiÚ
(cÚ¡ 
asDWORD
 *
¬gs
, 
·¿mSize
, 
asFUNCTION_t
 
func
);

83 
asQWORD
 
C®lThisC®lFunùiÚ
(cÚ¡ *
obj
, cÚ¡ 
asDWORD
 *
¬gs
, 
·¿mSize
, 
asFUNCTION_t
 
func
);

84 
asQWORD
 
C®lThisC®lFunùiÚR‘ByRef
(cÚ¡ *, cÚ¡ 
asDWORD
 *, , 
asFUNCTION_t
, *
»tPŒ
);

86 
asDWORD
 
G‘R‘uºedFlßt
();

87 
asQWORD
 
G‘R‘uºedDoubË
();

89 
asQWORD
 
	$C®lSy¡emFunùiÚN©ive
(
asCCÚ‹xt
 *
cÚ‹xt
, 
asCSütFunùiÚ
 *
desü
, *
obj
, 
asDWORD
 *
¬gs
, *
»tPoš‹r
, 
asQWORD
 & )

91 
asCSütEngše
 *
’gše
 = 
cÚ‹xt
->
m_’gše
;

92 
asSSy¡emFunùiÚIÁ”çû
 *
sysFunc
 = 
desü
->
sysFuncIÁf
;

94 
asQWORD
 
»tQW
 = 0;

97 
·¿mSize
 = 
sysFunc
->paramSize;

98 
asDWORD
 
·¿mBufãr
[64];

99 ifĞ
sysFunc
->
kesObjByV®
 )

101 
·¿mSize
 = 0;

102 
¥os
 = 0;

103 
dpos
 = 1;

104  
asUINT
 
n
 = 0;‚ < 
desü
->
·¿m‘”Ty³s
.
	`G‘L’gth
();‚++ )

106 ifĞ
desü
->
·¿m‘”Ty³s
[
n
].
	`IsObjeù
(è&& !desü->·¿m‘”Ty³s[n].
	`IsObjeùHªdË
(è&& !desü->·¿m‘”Ty³s[n].
	`IsReã»nû
() )

108 #ifdeà
COMPLEX_OBJS_PASSED_BY_REF


109 ifĞ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
()->
æags
 & 
COMPLEX_MASK
 )

111 
·¿mBufãr
[
dpos
++] = 
¬gs
[
¥os
++];

112 
·¿mSize
++;

118 
	`memıy
(&
·¿mBufãr
[
dpos
], *(**)(
¬gs
+
¥os
), 
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeInMemÜyBy‹s
());

121 
’gše
->
	`C®lF»e
(*(**)(
¬gs
+
¥os
));

122 
¥os
++;

123 
dpos
 +ğ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeInMemÜyDWÜds
();

124 
·¿mSize
 +ğ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeInMemÜyDWÜds
();

130 
·¿mBufãr
[
dpos
++] = 
¬gs
[
¥os
++];

131 ifĞ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
() > 1 )

132 
·¿mBufãr
[
dpos
++] = 
¬gs
[
¥os
++];

133 
·¿mSize
 +ğ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

137 
¬gs
 = &
·¿mBufãr
[1];

141 
asFUNCTION_t
 
func
 = 
sysFunc
->func;

142 
ÿÎCÚv
 = 
sysFunc
->callConv;

143 ifĞ
sysFunc
->
ho¡R‘uºInMemÜy
 )

144 
ÿÎCÚv
++;

146  
ÿÎCÚv
 )

148 
ICC_CDECL
:

149 
»tQW
 = 
	`C®lCDeşFunùiÚ
(
¬gs
, 
·¿mSize
<<2, 
func
);

152 
ICC_CDECL_RETURNINMEM
:

153 
»tQW
 = 
	`C®lCDeşFunùiÚR‘ByRef
(
¬gs
, 
·¿mSize
<<2, 
func
, 
»tPoš‹r
);

156 
ICC_STDCALL
:

157 
»tQW
 = 
	`C®lSTDC®lFunùiÚ
(
¬gs
, 
·¿mSize
<<2, 
func
);

160 
ICC_STDCALL_RETURNINMEM
:

162 
·¿mSize
++;

163 
¬gs
--;

164 *(
asPWORD
*)
¬gs
 = (
size_t
)
»tPoš‹r
;

166 
»tQW
 = 
	`C®lSTDC®lFunùiÚ
(
¬gs
, 
·¿mSize
<<2, 
func
);

169 
ICC_THISCALL
:

170 
»tQW
 = 
	`C®lThisC®lFunùiÚ
(
obj
, 
¬gs
, 
·¿mSize
<<2, 
func
);

173 
ICC_THISCALL_RETURNINMEM
:

174 
»tQW
 = 
	`C®lThisC®lFunùiÚR‘ByRef
(
obj
, 
¬gs
, 
·¿mSize
<<2, 
func
, 
»tPoš‹r
);

177 
ICC_VIRTUAL_THISCALL
:

180 
asFUNCTION_t
 *
váabË
 = *×sFUNCTION_t**)
obj
;

181 
»tQW
 = 
	`C®lThisC®lFunùiÚ
(
obj
, 
¬gs
, 
·¿mSize
<<2, 
váabË
[
	`FuncPŒToUIÁ
(
func
)>>2]);

185 
ICC_VIRTUAL_THISCALL_RETURNINMEM
:

188 
asFUNCTION_t
 *
váabË
 = *×sFUNCTION_t**)
obj
;

189 
»tQW
 = 
	`C®lThisC®lFunùiÚR‘ByRef
(
obj
, 
¬gs
, 
·¿mSize
<<2, 
váabË
[
	`FuncPŒToUIÁ
(
func
)>>2], 
»tPoš‹r
);

193 
ICC_CDECL_OBJLAST
:

194 
»tQW
 = 
	`C®lCDeşFunùiÚObjLa¡
(
obj
, 
¬gs
, 
·¿mSize
<<2, 
func
);

197 
ICC_CDECL_OBJLAST_RETURNINMEM
:

199 
»tQW
 = 
	`C®lCDeşFunùiÚR‘ByRefObjLa¡
(
obj
, 
¬gs
, 
·¿mSize
<<2, 
func
, 
»tPoš‹r
);

202 
ICC_CDECL_OBJFIRST
:

204 
»tQW
 = 
	`C®lCDeşFunùiÚObjFœ¡
(
obj
, 
¬gs
, 
·¿mSize
<<2, 
func
);

207 
ICC_CDECL_OBJFIRST_RETURNINMEM
:

209 
»tQW
 = 
	`C®lCDeşFunùiÚR‘ByRefObjFœ¡
(
obj
, 
¬gs
, 
·¿mSize
<<2, 
func
, 
»tPoš‹r
);

213 
cÚ‹xt
->
	`S‘IÁ”ÇlExû±iÚ
(
TXT_INVALID_CALLING_CONVENTION
);

217 ifĞ
sysFunc
->
ho¡R‘uºFlßt
 )

219 ifĞ
sysFunc
->
ho¡R‘uºSize
 == 1 )

220 *(
asDWORD
*)&
»tQW
 = 
	`G‘R‘uºedFlßt
();

222 
»tQW
 = 
	`G‘R‘uºedDoubË
();

225  
»tQW
;

226 
	}
}

231 #ifdeà
__GNUC__


232 
	#NOINLINE
 
	`__©Œibu‹
 ((
__nošlše__
))

	)

234 
	#NOINLINE


	)

238 
asQWORD
 
NOINLINE
 
	$C®lCDeşFunùiÚ
(cÚ¡ 
asDWORD
 *
¬gs
, 
·¿mSize
, 
asFUNCTION_t
 
func
)

240 vŞ©
asQWORD
 
»tQW
;

242 #ià
defšed
 
ASM_INTEL


246 
__asm


249 
push
 
ecx


252 
CLEAR_FPU_STACK


256 
mov
 
ecx
, 
·¿mSize


257 
mov
 
—x
, 
¬gs


258 
add
 
—x
, 
ecx


259 
cmp
 
ecx
, 0

260 
je
 
’dcİy


261 
cİyloİ
:

262 
sub
 
—x
, 4

263 
push
 
dwÜd
 
±r
 [
—x
]

264 
sub
 
ecx
, 4

265 
jÃ
 
cİyloİ


266 
’dcİy
:

269 
ÿÎ
 [
func
]

272 
add
 
e¥
, 
·¿mSize


275 
Ëa
 
ecx
, 
»tQW


276 
mov
 [
ecx
], 
—x


277 
mov
 4[
ecx
], 
edx


280 
pİ
 
ecx


283 #–ià
defšed
 
ASM_AT_N_T


296 vŞ©
asPWORD
 
a
[] = {
	`asPWORD
(
¬gs
),‡sPWORD(
·¿mSize
),‡sPWORD(
func
)};

298 
asm
 
	`__vŞ©e__
(

299 
	`_S
(
CLEAR_FPU_STACK
) "\n"

340 : "d"(
a
), "m"(
»tQW
)

346  
»tQW
;

347 
	}
}

349 
asQWORD
 
NOINLINE
 
	$C®lCDeşFunùiÚObjLa¡
(cÚ¡ *
obj
, cÚ¡ 
asDWORD
 *
¬gs
, 
·¿mSize
, 
asFUNCTION_t
 
func
)

351 vŞ©
asQWORD
 
»tQW
;

353 #ià
defšed
 
ASM_INTEL


357 
__asm


360 
push
 
ecx


363 
CLEAR_FPU_STACK


366 
push
 
obj


370 
mov
 
ecx
, 
·¿mSize


371 
mov
 
—x
, 
¬gs


372 
add
 
—x
, 
ecx


373 
cmp
 
ecx
, 0

374 
je
 
’dcİy


375 
cİyloİ
:

376 
sub
 
—x
, 4

377 
push
 
dwÜd
 
±r
 [
—x
]

378 
sub
 
ecx
, 4

379 
jÃ
 
cİyloİ


380 
’dcİy
:

383 
ÿÎ
 [
func
]

386 
add
 
e¥
, 
·¿mSize


387 
add
 
e¥
, 4

390 
Ëa
 
ecx
, 
»tQW


391 
mov
 [
ecx
], 
—x


392 
mov
 4[
ecx
], 
edx


395 
pİ
 
ecx


398 #–ià
defšed
 
ASM_AT_N_T


400 vŞ©
asPWORD
 
a
[] = {
	`asPWORD
(
obj
),‡sPWORD(
¬gs
),‡sPWORD(
·¿mSize
),‡sPWORD(
func
)};

402 
asm
 
	`__vŞ©e__
 (

403 
	`_S
(
CLEAR_FPU_STACK
) "\n"

445 : "d"(
a
), "m"(
»tQW
)

451  
»tQW
;

452 
	}
}

454 
asQWORD
 
NOINLINE
 
	$C®lCDeşFunùiÚObjFœ¡
(cÚ¡ *
obj
, cÚ¡ 
asDWORD
 *
¬gs
, 
·¿mSize
, 
asFUNCTION_t
 
func
)

456 vŞ©
asQWORD
 
»tQW
;

458 #ià
defšed
 
ASM_INTEL


462 
__asm


465 
push
 
ecx


468 
CLEAR_FPU_STACK


472 
mov
 
ecx
, 
·¿mSize


473 
mov
 
—x
, 
¬gs


474 
add
 
—x
, 
ecx


475 
cmp
 
ecx
, 0

476 
je
 
’dcİy


477 
cİyloİ
:

478 
sub
 
—x
, 4

479 
push
 
dwÜd
 
±r
 [
—x
]

480 
sub
 
ecx
, 4

481 
jÃ
 
cİyloİ


482 
’dcİy
:

485 
push
 
obj


488 
ÿÎ
 [
func
]

491 
add
 
e¥
, 
·¿mSize


492 
add
 
e¥
, 4

495 
Ëa
 
ecx
, 
»tQW


496 
mov
 [
ecx
], 
—x


497 
mov
 4[
ecx
], 
edx


500 
pİ
 
ecx


503 #–ià
defšed
 
ASM_AT_N_T


505 vŞ©
asPWORD
 
a
[] = {
	`asPWORD
(
obj
),‡sPWORD(
¬gs
),‡sPWORD(
·¿mSize
),‡sPWORD(
func
)};

507 
asm
 
	`__vŞ©e__
 (

508 
	`_S
(
CLEAR_FPU_STACK
) "\n"

550 : "d"(
a
), "m"(
»tQW
)

556  
»tQW
;

557 
	}
}

559 
asQWORD
 
NOINLINE
 
	$C®lCDeşFunùiÚR‘ByRefObjFœ¡
(cÚ¡ *
obj
, cÚ¡ 
asDWORD
 *
¬gs
, 
·¿mSize
, 
asFUNCTION_t
 
func
, *
»tPŒ
)

561 vŞ©
asQWORD
 
»tQW
;

563 #ià
defšed
 
ASM_INTEL


567 
__asm


570 
push
 
ecx


573 
CLEAR_FPU_STACK


577 
mov
 
ecx
, 
·¿mSize


578 
mov
 
—x
, 
¬gs


579 
add
 
—x
, 
ecx


580 
cmp
 
ecx
, 0

581 
je
 
’dcİy


582 
cİyloİ
:

583 
sub
 
—x
, 4

584 
push
 
dwÜd
 
±r
 [
—x
]

585 
sub
 
ecx
, 4

586 
jÃ
 
cİyloİ


587 
’dcİy
:

590 
push
 
obj


593 
push
 
»tPŒ
;

596 
ÿÎ
 [
func
]

599 
add
 
e¥
, 
·¿mSize


601 #iâdeà
CALLEE_POPS_HIDDEN_RETURN_POINTER


603 
add
 
e¥
, 8

605 
add
 
e¥
, 4

609 
Ëa
 
ecx
, 
»tQW


610 
mov
 [
ecx
], 
—x


611 
mov
 4[
ecx
], 
edx


614 
pİ
 
ecx


617 #–ià
defšed
 
ASM_AT_N_T


619 vŞ©
asPWORD
 
a
[] = {
	`asPWORD
(
obj
),‡sPWORD(
¬gs
),‡sPWORD(
·¿mSize
),‡sPWORD(
func
),‡sPWORD(
»tPŒ
)};

621 
asm
 
	`__vŞ©e__
 (

622 
	`_S
(
CLEAR_FPU_STACK
) "\n"

653 #iâdeà
CALLEE_POPS_HIDDEN_RETURN_POINTER


668 : "d"(
a
), "m"(
»tQW
)

673  
»tQW
;

674 
	}
}

676 
asQWORD
 
NOINLINE
 
	$C®lCDeşFunùiÚR‘ByRef
(cÚ¡ 
asDWORD
 *
¬gs
, 
·¿mSize
, 
asFUNCTION_t
 
func
, *
»tPŒ
)

678 vŞ©
asQWORD
 
»tQW
;

680 #ià
defšed
 
ASM_INTEL


684 
__asm


687 
push
 
ecx


690 
CLEAR_FPU_STACK


694 
mov
 
ecx
, 
·¿mSize


695 
mov
 
—x
, 
¬gs


696 
add
 
—x
, 
ecx


697 
cmp
 
ecx
, 0

698 
je
 
’dcİy


699 
cİyloİ
:

700 
sub
 
—x
, 4

701 
push
 
dwÜd
 
±r
 [
—x
]

702 
sub
 
ecx
, 4

703 
jÃ
 
cİyloİ


704 
’dcİy
:

707 
push
 
»tPŒ
;

710 
ÿÎ
 [
func
]

713 
add
 
e¥
, 
·¿mSize


715 #iâdeà
CALLEE_POPS_HIDDEN_RETURN_POINTER


717 
add
 
e¥
, 4

721 
Ëa
 
ecx
, 
»tQW


722 
mov
 [
ecx
], 
—x


723 
mov
 4[
ecx
], 
edx


726 
pİ
 
ecx


731 #–ià
defšed
 
ASM_AT_N_T


733 vŞ©
asPWORD
 
a
[] = {
	`asPWORD
(
¬gs
),‡sPWORD(
·¿mSize
),‡sPWORD(
func
),‡sPWORD(
»tPŒ
)};

735 
asm
 
	`__vŞ©e__
 (

736 
	`_S
(
CLEAR_FPU_STACK
) "\n"

766 #iâdeà
CALLEE_POPS_HIDDEN_RETURN_POINTER


779 : "d"(
a
), "m"(
»tQW
)

785  
»tQW
;

786 
	}
}

788 
asQWORD
 
NOINLINE
 
	$C®lCDeşFunùiÚR‘ByRefObjLa¡
(cÚ¡ *
obj
, cÚ¡ 
asDWORD
 *
¬gs
, 
·¿mSize
, 
asFUNCTION_t
 
func
, *
»tPŒ
)

790 vŞ©
asQWORD
 
»tQW
;

792 #ià
defšed
 
ASM_INTEL


796 
__asm


799 
push
 
ecx


802 
CLEAR_FPU_STACK


804 
push
 
obj


808 
mov
 
ecx
, 
·¿mSize


809 
mov
 
—x
, 
¬gs


810 
add
 
—x
, 
ecx


811 
cmp
 
ecx
, 0

812 
je
 
’dcİy


813 
cİyloİ
:

814 
sub
 
—x
, 4

815 
push
 
dwÜd
 
±r
 [
—x
]

816 
sub
 
ecx
, 4

817 
jÃ
 
cİyloİ


818 
’dcİy
:

821 
push
 
»tPŒ
;

824 
ÿÎ
 [
func
]

827 
add
 
e¥
, 
·¿mSize


828 
add
 
e¥
, 4

830 #iâdeà
CALLEE_POPS_HIDDEN_RETURN_POINTER


832 
add
 
e¥
, 4

836 
Ëa
 
ecx
, 
»tQW


837 
mov
 [
ecx
], 
—x


838 
mov
 4[
ecx
], 
edx


841 
pİ
 
ecx


844 #–ià
defšed
 
ASM_AT_N_T


846 vŞ©
asPWORD
 
a
[] = {
	`asPWORD
(
obj
),‡sPWORD(
¬gs
),‡sPWORD(
·¿mSize
),‡sPWORD(
func
),‡sPWORD(
»tPŒ
)};

848 
asm
 
	`__vŞ©e__
 (

849 
	`_S
(
CLEAR_FPU_STACK
) "\n"

880 #iâdeà
CALLEE_POPS_HIDDEN_RETURN_POINTER


895 : "d"(
a
), "m"(
»tQW
)

901  
»tQW
;

902 
	}
}

904 
asQWORD
 
NOINLINE
 
	$C®lSTDC®lFunùiÚ
(cÚ¡ 
asDWORD
 *
¬gs
, 
·¿mSize
, 
asFUNCTION_t
 
func
)

906 vŞ©
asQWORD
 
»tQW
;

908 #ià
defšed
 
ASM_INTEL


912 
__asm


915 
push
 
ecx


918 
CLEAR_FPU_STACK


922 
mov
 
ecx
, 
·¿mSize


923 
mov
 
—x
, 
¬gs


924 
add
 
—x
, 
ecx


925 
cmp
 
ecx
, 0

926 
je
 
’dcİy


927 
cİyloİ
:

928 
sub
 
—x
, 4

929 
push
 
dwÜd
 
±r
 [
—x
]

930 
sub
 
ecx
, 4

931 
jÃ
 
cİyloİ


932 
’dcİy
:

935 
ÿÎ
 [
func
]

940 
Ëa
 
ecx
, 
»tQW


941 
mov
 [
ecx
], 
—x


942 
mov
 4[
ecx
], 
edx


945 
pİ
 
ecx


948 #–ià
defšed
 
ASM_AT_N_T


950 vŞ©
asPWORD
 
a
[] = {
	`asPWORD
(
¬gs
),‡sPWORD(
·¿mSize
),‡sPWORD(
func
)};

952 
asm
 
	`__vŞ©e__
 (

953 
	`_S
(
CLEAR_FPU_STACK
) "\n"

992 : "d"(
a
), "m"(
»tQW
)

998  
»tQW
;

999 
	}
}

1002 
asQWORD
 
NOINLINE
 
	$C®lThisC®lFunùiÚ
(cÚ¡ *
obj
, cÚ¡ 
asDWORD
 *
¬gs
, 
·¿mSize
, 
asFUNCTION_t
 
func
)

1004 vŞ©
asQWORD
 
»tQW
;

1006 #ià
defšed
 
ASM_INTEL


1010 
__asm


1013 
push
 
ecx


1016 
CLEAR_FPU_STACK


1020 
mov
 
ecx
, 
·¿mSize


1021 
mov
 
—x
, 
¬gs


1022 
add
 
—x
, 
ecx


1023 
cmp
 
ecx
, 0

1024 
je
 
’dcİy


1025 
cİyloİ
:

1026 
sub
 
—x
, 4

1027 
push
 
dwÜd
 
±r
 [
—x
]

1028 
sub
 
ecx
, 4

1029 
jÃ
 
cİyloİ


1030 
’dcİy
:

1032 #ifdeà
THISCALL_PASS_OBJECT_POINTER_ON_THE_STACK


1034 
push
 
obj


1037 
mov
 
ecx
, 
obj


1041 
ÿÎ
 [
func
]

1043 #iâdeà
THISCALL_CALLEE_POPS_ARGUMENTS


1045 
add
 
e¥
, 
·¿mSize


1046 #ifdeà
THISCALL_PASS_OBJECT_POINTER_ON_THE_STACK


1048 
add
 
e¥
, 4

1053 
Ëa
 
ecx
, 
»tQW


1054 
mov
 [
ecx
], 
—x


1055 
mov
 4[
ecx
], 
edx


1058 
pİ
 
ecx


1061 #–ià
defšed
 
ASM_AT_N_T


1063 vŞ©
asPWORD
 
a
[] = {
	`asPWORD
(
obj
),‡sPWORD(
¬gs
),‡sPWORD(
·¿mSize
),‡sPWORD(
func
)};

1065 
asm
 
	`__vŞ©e__
 (

1066 
	`_S
(
CLEAR_FPU_STACK
) "\n"

1109 : "d"(
a
), "m"(
»tQW
)

1115  
»tQW
;

1116 
	}
}

1118 
asQWORD
 
NOINLINE
 
	$C®lThisC®lFunùiÚR‘ByRef
(cÚ¡ *
obj
, cÚ¡ 
asDWORD
 *
¬gs
, 
·¿mSize
, 
asFUNCTION_t
 
func
, *
»tPŒ
)

1120 vŞ©
asQWORD
 
»tQW
;

1122 #ià
defšed
 
ASM_INTEL


1126 
__asm


1129 
push
 
ecx


1132 
CLEAR_FPU_STACK


1136 
mov
 
ecx
, 
·¿mSize


1137 
mov
 
—x
, 
¬gs


1138 
add
 
—x
, 
ecx


1139 
cmp
 
ecx
, 0

1140 
je
 
’dcİy


1141 
cİyloİ
:

1142 
sub
 
—x
, 4

1143 
push
 
dwÜd
 
±r
 [
—x
]

1144 
sub
 
ecx
, 4

1145 
jÃ
 
cİyloİ


1146 
’dcİy
:

1148 #ifdeà
THISCALL_PASS_OBJECT_POINTER_ON_THE_STACK


1150 
push
 
obj


1153 
mov
 
ecx
, 
obj


1157 
push
 
»tPŒ


1160 
ÿÎ
 [
func
]

1162 #iâdeà
THISCALL_CALLEE_POPS_HIDDEN_RETURN_POINTER


1164 
add
 
e¥
, 4

1167 #iâdeà
THISCALL_CALLEE_POPS_ARGUMENTS


1169 
add
 
e¥
, 
·¿mSize


1170 #ifdeà
THISCALL_PASS_OBJECT_POINTER_ON_THE_STACK


1172 
add
 
e¥
, 4

1177 
Ëa
 
ecx
, 
»tQW


1178 
mov
 [
ecx
], 
—x


1179 
mov
 4[
ecx
], 
edx


1182 
pİ
 
ecx


1185 #–ià
defšed
 
ASM_AT_N_T


1187 vŞ©
asPWORD
 
a
[] = {
	`asPWORD
(
obj
),‡sPWORD(
¬gs
),‡sPWORD(
·¿mSize
),‡sPWORD(
func
),‡sPWORD(
»tPŒ
)};

1189 
asm
 
	`__vŞ©e__
 (

1190 
	`_S
(
CLEAR_FPU_STACK
) "\n"

1221 #iâdeà
THISCALL_CALLEE_POPS_HIDDEN_RETURN_POINTER


1237 : "d"(
a
), "m"(
»tQW
)

1243  
»tQW
;

1244 
	}
}

1246 
asDWORD
 
	$G‘R‘uºedFlßt
()

1248 
asDWORD
 
f
;

1250 #ià
defšed
 
ASM_INTEL


1253 
__asm
 
f¡p
 
dwÜd
 
±r
 [
f
]

1255 #–ià
defšed
 
ASM_AT_N_T


1257 
	`asm
("f¡p %0 \n" : "=m" (
f
));

1261  
f
;

1262 
	}
}

1264 
asQWORD
 
	$G‘R‘uºedDoubË
()

1266 
asQWORD
 
d
;

1268 #ià
defšed
 
ASM_INTEL


1271 
__asm
 
f¡p
 
qwÜd
 
±r
 [
d
]

1273 #–ià
defšed
 
ASM_AT_N_T


1275 
	`asm
("f¡¶ %0 \n" : "=m" (
d
));

1279  
d
;

1280 
	}
}

1282 
	gEND_AS_NAMESPACE


	@../src/script/as_callfunc_xenon.cpp

95 
	~"as_cÚfig.h
"

97 #iâdeà
AS_MAX_PORTABILITY


98 #ià
defšed
(
AS_XENON
)

100 
	~"as_ÿÎfunc.h
"

101 
	~"as_sü‹ngše.h
"

102 
	~"as_‹xts.h
"

103 
	~"as_tok’def.h
"

105 
	~<¡dio.h
>

106 
	~<¡dlib.h
>

107 
	~<x.h
>

109 
	gBEGIN_AS_NAMESPACE


111 
	#AS_PPC_MAX_ARGS
 32

	)

112 
	#AS_PPC_THISCALL_REG
 1

	)

113 
	#AS_PPC_RETURNINMEM_REG
 1

	)

114 
	#AS_PPC_ENDOFARGS
 1

	)

118 
	e¬gTy³s


120 
	mµcENDARG
 = 0,

121 
	mµcINTARG
 = 1,

122 
	mµcFLOATARG
 = 2,

123 
	mµcDOUBLEARG
 = 3

130 
asQWORD
 
	$__deş¥ec
Ğ
Çked
 ) 
	$µcFunc
(cÚ¡ 
asDWORD
* 
pArgs
,‡sDWORD 
dwFunc
, cÚ¡ 
asBYTE
* 
pArgTy³s
)

132 
__asm


134 
_µcFunc
:

137 
mær
 
r12


138 
¡w
 
r12
,-8(
r1
)

141 
¡d
 
r31
,-10
	`h
(
r1
)

142 
¡d
 
r27
,-18
	`h
(
r1
)

143 
¡d
 
r26
,-20
	`h
(
r1
)

144 
¡d
 
r25
,-28
	`h
(
r1
)

145 
¡d
 
r24
,-30
	`h
(
r1
)

146 
¡d
 
r23
,-38
	`h
(
r1
)

147 
¡d
 
r22
,-40
	`h
(
r1
)

153 
¡wu
 
r1
,-200
	`h
(r1)

165 
lwz
 
r31
, 0(
r1
)

166 
subi
 
r31
,„31, 1EC
h


168 
mr
 
r26
, 
r3


169 
mr
 
r27
, 
r4


170 
mr
 
r25
, 
r5


173 
sub
 
r23
,„23,„23

175 
sub
 
r22
,„22,„22

178 
subi
 
r25
,„25, 1

183 
µcNextArg
:

185 
addi
 
r25
,„25, 1

187 
lbz
 
r24
, 0(
r25
)

190 
cm¶wi
 
ü6
, 
r24
, 0

191 
beq
 
ü6
, 
µcArgsEnd


192 
cm¶wi
 
ü6
, 
r24
, 1

193 
beq
 
ü6
, 
µcArgIsIÁeg”


194 
cm¶wi
 
ü6
, 
r24
, 2

195 
beq
 
ü6
, 
µcArgIsFlßt


196 
cm¶wi
 
ü6
, 
r24
, 3

197 
beq
 
ü6
, 
µcArgIsDoubË


202 
µcArgIsIÁeg”
:

204 
lwz
 
r12
, 0(
r26
)

207 
cm¶wi
 
ü6
, 
r23
, 0

208 
beq
 
ü6
, 
µcLßdIÁReg0


209 
cm¶wi
 
ü6
, 
r23
, 1

210 
beq
 
ü6
, 
µcLßdIÁReg1


211 
cm¶wi
 
ü6
, 
r23
, 2

212 
beq
 
ü6
, 
µcLßdIÁReg2


213 
cm¶wi
 
ü6
, 
r23
, 3

214 
beq
 
ü6
, 
µcLßdIÁReg3


215 
cm¶wi
 
ü6
, 
r23
, 4

216 
beq
 
ü6
, 
µcLßdIÁReg4


217 
cm¶wi
 
ü6
, 
r23
, 5

218 
beq
 
ü6
, 
µcLßdIÁReg5


219 
cm¶wi
 
ü6
, 
r23
, 6

220 
beq
 
ü6
, 
µcLßdIÁReg6


221 
cm¶wi
 
ü6
, 
r23
, 7

222 
beq
 
ü6
, 
µcLßdIÁReg7


225 
b
 
µcLßdIÁRegUpd


227 
µcLßdIÁReg0
:

228 
mr
 
r3
, 
r12


229 
b
 
µcLßdIÁRegUpd


230 
µcLßdIÁReg1
:

231 
mr
 
r4
, 
r12


232 
b
 
µcLßdIÁRegUpd


233 
µcLßdIÁReg2
:

234 
mr
 
r5
, 
r12


235 
b
 
µcLßdIÁRegUpd


236 
µcLßdIÁReg3
:

237 
mr
 
r6
, 
r12


238 
b
 
µcLßdIÁRegUpd


239 
µcLßdIÁReg4
:

240 
mr
 
r7
, 
r12


241 
b
 
µcLßdIÁRegUpd


242 
µcLßdIÁReg5
:

243 
mr
 
r8
, 
r12


244 
b
 
µcLßdIÁRegUpd


245 
µcLßdIÁReg6
:

246 
mr
 
r9
, 
r12


247 
b
 
µcLßdIÁRegUpd


248 
µcLßdIÁReg7
:

249 
mr
 
r10
, 
r12


250 
b
 
µcLßdIÁRegUpd


252 
µcLßdIÁRegUpd
:

253 
¡w
 
r12
, 0(
r31
)

254 
addi
 
r31
,„31, 8

256 
addi
 
r23
,„23, 1

257 
addi
 
r26
,„26, 4

258 
b
 
µcNextArg


263 
µcArgIsFlßt
:

265 
lfs
 
ä0
, 0(
r26
)

268 
cm¶wi
 
ü6
, 
r22
, 0

269 
beq
 
ü6
, 
µcLßdFlßtReg0


270 
cm¶wi
 
ü6
, 
r22
, 1

271 
beq
 
ü6
, 
µcLßdFlßtReg1


272 
cm¶wi
 
ü6
, 
r22
, 2

273 
beq
 
ü6
, 
µcLßdFlßtReg2


274 
cm¶wi
 
ü6
, 
r22
, 3

275 
beq
 
ü6
, 
µcLßdFlßtReg3


276 
cm¶wi
 
ü6
, 
r22
, 4

277 
beq
 
ü6
, 
µcLßdFlßtReg4


278 
cm¶wi
 
ü6
, 
r22
, 5

279 
beq
 
ü6
, 
µcLßdFlßtReg5


280 
cm¶wi
 
ü6
, 
r22
, 6

281 
beq
 
ü6
, 
µcLßdFlßtReg6


282 
cm¶wi
 
ü6
, 
r22
, 7

283 
beq
 
ü6
, 
µcLßdFlßtReg7


284 
cm¶wi
 
ü6
, 
r22
, 8

285 
beq
 
ü6
, 
µcLßdFlßtReg8


286 
cm¶wi
 
ü6
, 
r22
, 9

287 
beq
 
ü6
, 
µcLßdFlßtReg9


288 
cm¶wi
 
ü6
, 
r22
, 10

289 
beq
 
ü6
, 
µcLßdFlßtReg10


290 
cm¶wi
 
ü6
, 
r22
, 11

291 
beq
 
ü6
, 
µcLßdFlßtReg11


292 
cm¶wi
 
ü6
, 
r22
, 12

293 
beq
 
ü6
, 
µcLßdFlßtReg12


296 
b
 
µcLßdFlßtRegUpd


298 
µcLßdFlßtReg0
:

299 
fmr
 
ä1
, 
ä0


300 
b
 
µcLßdFlßtRegUpd


301 
µcLßdFlßtReg1
:

302 
fmr
 
ä2
, 
ä0


303 
b
 
µcLßdFlßtRegUpd


304 
µcLßdFlßtReg2
:

305 
fmr
 
ä3
, 
ä0


306 
b
 
µcLßdFlßtRegUpd


307 
µcLßdFlßtReg3
:

308 
fmr
 
ä4
, 
ä0


309 
b
 
µcLßdFlßtRegUpd


310 
µcLßdFlßtReg4
:

311 
fmr
 
ä5
, 
ä0


312 
b
 
µcLßdFlßtRegUpd


313 
µcLßdFlßtReg5
:

314 
fmr
 
ä6
, 
ä0


315 
b
 
µcLßdFlßtRegUpd


316 
µcLßdFlßtReg6
:

317 
fmr
 
ä7
, 
ä0


318 
b
 
µcLßdFlßtRegUpd


319 
µcLßdFlßtReg7
:

320 
fmr
 
ä8
, 
ä0


321 
b
 
µcLßdFlßtRegUpd


322 
µcLßdFlßtReg8
:

323 
fmr
 
ä9
, 
ä0


324 
b
 
µcLßdFlßtRegUpd


325 
µcLßdFlßtReg9
:

326 
fmr
 
ä10
, 
ä0


327 
b
 
µcLßdFlßtRegUpd


328 
µcLßdFlßtReg10
:

329 
fmr
 
ä11
, 
ä0


330 
b
 
µcLßdFlßtRegUpd


331 
µcLßdFlßtReg11
:

332 
fmr
 
ä12
, 
ä0


333 
b
 
µcLßdFlßtRegUpd


334 
µcLßdFlßtReg12
:

335 
fmr
 
ä13
, 
ä0


336 
b
 
µcLßdFlßtRegUpd


338 
µcLßdFlßtRegUpd
:

339 
¡fs
 
ä0
, 0(
r31
)

340 
addi
 
r31
,„31, 8

342 
addi
 
r22
,„22, 1

343 
addi
 
r23
,„23, 1

344 
addi
 
r26
,„26, 4

345 
b
 
µcNextArg


350 
µcArgIsDoubË
:

352 
lfd
 
ä0
, 0(
r26
)

355 
cm¶wi
 
ü6
, 
r22
, 0

356 
beq
 
ü6
, 
µcLßdDoubËReg0


357 
cm¶wi
 
ü6
, 
r22
, 1

358 
beq
 
ü6
, 
µcLßdDoubËReg1


359 
cm¶wi
 
ü6
, 
r22
, 2

360 
beq
 
ü6
, 
µcLßdDoubËReg2


361 
cm¶wi
 
ü6
, 
r22
, 3

362 
beq
 
ü6
, 
µcLßdDoubËReg3


363 
cm¶wi
 
ü6
, 
r22
, 4

364 
beq
 
ü6
, 
µcLßdDoubËReg4


365 
cm¶wi
 
ü6
, 
r22
, 5

366 
beq
 
ü6
, 
µcLßdDoubËReg5


367 
cm¶wi
 
ü6
, 
r22
, 6

368 
beq
 
ü6
, 
µcLßdDoubËReg6


369 
cm¶wi
 
ü6
, 
r22
, 7

370 
beq
 
ü6
, 
µcLßdDoubËReg7


371 
cm¶wi
 
ü6
, 
r22
, 8

372 
beq
 
ü6
, 
µcLßdDoubËReg8


373 
cm¶wi
 
ü6
, 
r22
, 9

374 
beq
 
ü6
, 
µcLßdDoubËReg9


375 
cm¶wi
 
ü6
, 
r22
, 10

376 
beq
 
ü6
, 
µcLßdDoubËReg10


377 
cm¶wi
 
ü6
, 
r22
, 11

378 
beq
 
ü6
, 
µcLßdDoubËReg11


379 
cm¶wi
 
ü6
, 
r22
, 12

380 
beq
 
ü6
, 
µcLßdDoubËReg12


383 
b
 
µcLßdDoubËRegUpd


385 
µcLßdDoubËReg0
:

386 
fmr
 
ä1
, 
ä0


387 
b
 
µcLßdDoubËRegUpd


388 
µcLßdDoubËReg1
:

389 
fmr
 
ä2
, 
ä0


390 
b
 
µcLßdDoubËRegUpd


391 
µcLßdDoubËReg2
:

392 
fmr
 
ä3
, 
ä0


393 
b
 
µcLßdDoubËRegUpd


394 
µcLßdDoubËReg3
:

395 
fmr
 
ä4
, 
ä0


396 
b
 
µcLßdDoubËRegUpd


397 
µcLßdDoubËReg4
:

398 
fmr
 
ä5
, 
ä0


399 
b
 
µcLßdDoubËRegUpd


400 
µcLßdDoubËReg5
:

401 
fmr
 
ä6
, 
ä0


402 
b
 
µcLßdDoubËRegUpd


403 
µcLßdDoubËReg6
:

404 
fmr
 
ä7
, 
ä0


405 
b
 
µcLßdDoubËRegUpd


406 
µcLßdDoubËReg7
:

407 
fmr
 
ä8
, 
ä0


408 
b
 
µcLßdDoubËRegUpd


409 
µcLßdDoubËReg8
:

410 
fmr
 
ä9
, 
ä0


411 
b
 
µcLßdDoubËRegUpd


412 
µcLßdDoubËReg9
:

413 
fmr
 
ä10
, 
ä0


414 
b
 
µcLßdDoubËRegUpd


415 
µcLßdDoubËReg10
:

416 
fmr
 
ä11
, 
ä0


417 
b
 
µcLßdDoubËRegUpd


418 
µcLßdDoubËReg11
:

419 
fmr
 
ä12
, 
ä0


420 
b
 
µcLßdDoubËRegUpd


421 
µcLßdDoubËReg12
:

422 
fmr
 
ä13
, 
ä0


423 
b
 
µcLßdDoubËRegUpd


425 
µcLßdDoubËRegUpd
:

426 
¡fd
 
ä0
, 0(
r31
)

427 
addi
 
r31
,„31, 8

429 
addi
 
r22
,„22, 1

430 
addi
 
r23
,„23, 1

431 
addi
 
r26
,„26, 8

432 
b
 
µcNextArg


437 
µcArgsEnd
:

439 
mtùr
 
r27


440 
bù¾


444 
addi
 
r1
,„1, 200
h


447 
ld
 
r22
,-40
	`h
(
r1
)

448 
ld
 
r23
,-38
	`h
(
r1
)

449 
ld
 
r24
,-30
	`h
(
r1
)

450 
ld
 
r25
,-28
	`h
(
r1
)

451 
ld
 
r26
,-20
	`h
(
r1
)

452 
ld
 
r27
,-18
	`h
(
r1
)

453 
ld
 
r31
,-10
	`h
(
r1
)

456 
lwz
 
r12
,-8(
r1
)

457 
mr
 
r12


458 
bÌ


460 
	}
}

462 
asDWORD
 
	$G‘R‘uºedFlßt
()

468 vŞ©
asDWORD
 
f
;

470 
__asm


472 
¡fs
 
ä1
, 
f


475  
f
;

476 
	}
}

478 
asQWORD
 
	$G‘R‘uºedDoubË
()

484 vŞ©
asQWORD
 
f
;

486 
__asm


488 
¡fd
 
ä1
, 
f


491  
f
;

492 
	}
}

495 
šlše
 
boŞ
 
	$IsV¬ŸbËArgum’t
Ğ
asCD©aTy³
 
ty³
 )

497  (
ty³
.
	`G‘Tok’Ty³
(è=ğ
‰Que¡iÚ
è? 
Œue
 : 
çl£
;

498 
	}
}

500 
asQWORD
 
	$C®lSy¡emFunùiÚN©ive
(
asCCÚ‹xt
 *
cÚ‹xt
, 
asCSütFunùiÚ
 *
desü
, *
obj
, 
asDWORD
 *
¬gs
, *
»tPoš‹r
, 
asQWORD
 & )

502 
asCSütEngše
 *
’gše
 = 
cÚ‹xt
->
m_’gše
;

503 
asSSy¡emFunùiÚIÁ”çû
 *
sysFunc
 = 
desü
->
sysFuncIÁf
;

504 
ÿÎCÚv
 = 
sysFunc
->callConv;

505 
asQWORD
 
»tQW
 = 0;

506 *
func
 = (*)
sysFunc
->func;

507 
asDWORD
 *
váabË
;

510 
asBYTE
 
µcArgsTy³
[
AS_PPC_MAX_ARGS
 + 
AS_PPC_RETURNINMEM_REG
 + 
AS_PPC_THISCALL_REG
 + 
AS_PPC_ENDOFARGS
];

511 
asDWORD
 
µcArgs
[
AS_PPC_MAX_ARGS
 + 
AS_PPC_RETURNINMEM_REG
 + 
AS_PPC_THISCALL_REG
];

512 
¬gsCÁ
 = 0;

515 ifĞ
desü
->
»tuºTy³
.
	`IsObjeù
(è&& !desü->»tuºTy³.
	`IsReã»nû
(è&& !desü->»tuºTy³.
	`IsObjeùHªdË
() )

517 
µcArgs
[
¬gsCÁ
] = (
asDWORD
)
»tPoš‹r
;

518 
µcArgsTy³
[
¬gsCÁ
] = 
µcINTARG
;

519 
¬gsCÁ
++;

523 iàĞ
obj
 &&

524 
ÿÎCÚv
 !ğ
ICC_CDECL_OBJLAST
 &&

525 
ÿÎCÚv
 !ğ
ICC_CDECL_OBJLAST_RETURNINMEM
 )

527 
µcArgs
[
¬gsCÁ
] = (
asDWORD
)
obj
;

528 
µcArgsTy³
[
¬gsCÁ
] = 
µcINTARG
;

529 
¬gsCÁ
++;

536 
asDWORD
 
·¿mBufãr
[
AS_PPC_MAX_ARGS
];

537 ifĞ
sysFunc
->
kesObjByV®
 )

539 
·¿mSize
 = 0;

540 
¥os
 = 0;

541 
dpos
 = 1;

543  
asUINT
 
n
 = 0;‚ < 
desü
->
·¿m‘”Ty³s
.
	`G‘L’gth
();‚++ )

546 ifĞ
desü
->
·¿m‘”Ty³s
[
n
].
	`IsObjeù
() &&

547 !
desü
->
·¿m‘”Ty³s
[
n
].
	`IsObjeùHªdË
() &&

548 !
desü
->
·¿m‘”Ty³s
[
n
].
	`IsReã»nû
() )

550 #ifdeà
COMPLEX_OBJS_PASSED_BY_REF


551 ifĞ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
()->
æags
 & 
COMPLEX_MASK
 )

553 
·¿mBufãr
[
dpos
++] = 
¬gs
[
¥os
++];

554 
·¿mSize
++;

560 
	`memıy
Ğ&
·¿mBufãr
[
dpos
], *(**)(
¬gs
 + 
¥os
), 
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeInMemÜyBy‹s
() );

563 
’gše
->
	`C®lF»e
(*(**)(
¬gs
 + 
¥os
));

565 
¥os
++;

566 
dpos
 +ğ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeInMemÜyDWÜds
();

567 
·¿mSize
 +ğ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeInMemÜyDWÜds
();

573 
·¿mBufãr
[
dpos
++] = 
¬gs
[
¥os
++];

574 ifĞ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
() > 1 )

575 
·¿mBufãr
[
dpos
++] = 
¬gs
[
¥os
++];

576 
·¿mSize
 +ğ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

580 ifĞ
	`IsV¬ŸbËArgum’t
Ğ
desü
->
·¿m‘”Ty³s
[
n
] ) )

583 
·¿mBufãr
[
dpos
++] = 
¬gs
[
¥os
++];

584 ++
·¿mSize
;

589 
¬gs
 = &
·¿mBufãr
[1];

591 
	`asASSERT
Ğ
·¿mSize
 <ğ
AS_PPC_MAX_ARGS
 );

595 cÚ¡ 
asUINT
 
·¿mCouÁ
 = (asUINT)
desü
->
·¿m‘”Ty³s
.
	`G‘L’gth
();

597 
asBYTE
 * 
pCurArgTy³
 = (asBYTE*)&
µcArgsTy³
[
¬gsCÁ
];

598 
asBYTE
 * 
pCurFixedArgV®ue
 = (asBYTE*)&
µcArgs
[
¬gsCÁ
];

599 
asBYTE
 * 
pCurSckArgV®ue
 = (asBYTE*)
¬gs
;

601  
asUINT
 
n
 = 0;‚ < 
·¿mCouÁ
;‚++ )

603 
¬gsCÁ
++;

605 ià(
desü
->
·¿m‘”Ty³s
[
n
].
	`IsFlßtTy³
(è&& !desü->·¿m‘”Ty³s[n].
	`IsReã»nû
())

607 *
pCurArgTy³
++ = 
µcFLOATARG
;

609 *((*è
pCurFixedArgV®ue
èğ*((*è
pCurSckArgV®ue
);

611 
pCurFixedArgV®ue
 += 4;

612 
pCurSckArgV®ue
 += 4;

614 ià(
desü
->
·¿m‘”Ty³s
[
n
].
	`IsDoubËTy³
(è&& !desü->·¿m‘”Ty³s[n].
	`IsReã»nû
())

616 *
pCurArgTy³
++ = 
µcDOUBLEARG
;

618 *((*è
pCurFixedArgV®ue
èğ*((*è
pCurSckArgV®ue
);

620 
pCurFixedArgV®ue
 += 8;

621 
pCurSckArgV®ue
 += 8;

632 *
pCurArgTy³
++ = 
µcINTARG
;

634 *((*è
pCurFixedArgV®ue
èğ*((*è
pCurSckArgV®ue
);

636 ifĞ!
desü
->
·¿m‘”Ty³s
[
n
].
	`IsReã»nû
() )

640 
asUINT
 
numBy‹s
 = 
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeInMemÜyBy‹s
();

641 ifĞ
numBy‹s
 == 1 )

643 
pCurFixedArgV®ue
[3] =…CurFixedArgValue[0];

644 
pCurFixedArgV®ue
[0] = 0;

646 ifĞ
numBy‹s
 == 2 )

648 *(
asWORD
*)&
pCurFixedArgV®ue
[2] = *(asWORD*)&pCurFixedArgValue[0];

649 *(
asWORD
*)&
pCurFixedArgV®ue
[0] = 0;

653 
pCurFixedArgV®ue
 += 4;

654 
pCurSckArgV®ue
 += 4;

658 ifĞ
	`IsV¬ŸbËArgum’t
(
desü
->
·¿m‘”Ty³s
[
n
]) )

660 
¬gsCÁ
++;

662 *
pCurArgTy³
++ = 
µcINTARG
;

664 *((*è
pCurFixedArgV®ue
èğ*((*è
pCurSckArgV®ue
);

666 
pCurFixedArgV®ue
 += 4;

667 
pCurSckArgV®ue
 += 4;

673 
µcArgsTy³
[
¬gsCÁ
] = 
µcENDARG
;

675  
ÿÎCÚv
 )

677 
ICC_CDECL
:

678 
ICC_CDECL_RETURNINMEM
:

679 
ICC_STDCALL
:

680 
ICC_STDCALL_RETURNINMEM
:

681 
ICC_THISCALL
:

682 
ICC_THISCALL_RETURNINMEM
:

683 
ICC_CDECL_OBJFIRST
:

684 
ICC_CDECL_OBJFIRST_RETURNINMEM
:

686 
»tQW
 = 
	`µcFunc
Ğ
µcArgs
, (
asDWORD
)
func
, 
µcArgsTy³
 );

689 
ICC_VIRTUAL_THISCALL
:

690 
ICC_VIRTUAL_THISCALL_RETURNINMEM
:

693 
váabË
 = *(
asDWORD
**)
obj
;

694 
»tQW
 = 
	`µcFunc
Ğ
µcArgs
, 
váabË
[
	`asDWORD
(
func
)>>2], 
µcArgsTy³
 );

697 
ICC_CDECL_OBJLAST
:

698 
ICC_CDECL_OBJLAST_RETURNINMEM
:

701 
µcArgsTy³
[
¬gsCÁ
++] = 
µcINTARG
;

702 
µcArgsTy³
[
¬gsCÁ
] = 
µcENDARG
;

703 *((
asPWORD
*)
pCurFixedArgV®ue
èğ×sPWORD)
obj
;

704 
»tQW
 = 
	`µcFunc
Ğ
µcArgs
, (
asDWORD
)
func
, 
µcArgsTy³
 );

708 
cÚ‹xt
->
	`S‘IÁ”ÇlExû±iÚ
Ğ
TXT_INVALID_CALLING_CONVENTION
 );

712 ifĞ
sysFunc
->
ho¡R‘uºFlßt
 )

714 ifĞ
sysFunc
->
ho¡R‘uºSize
 == 1 )

715 *(
asDWORD
*)&
»tQW
 = 
	`G‘R‘uºedFlßt
();

717 
»tQW
 = 
	`G‘R‘uºedDoubË
();

719 ifĞ
sysFunc
->
ho¡R‘uºSize
 == 1 )

722 
»tQW
 <<= 32;

725  
»tQW
;

726 
	}
}

728 
	gEND_AS_NAMESPACE


	@../src/script/as_compiler.cpp

38 
	~<m©h.h
>

40 
	~"as_cÚfig.h
"

42 #iâdeà
AS_NO_COMPILER


44 
	~"as_comp”.h
"

45 
	~"as_tok’def.h
"

46 
	~"as_tok’iz”.h
"

47 
	~"as_¡ršg_ut.h
"

48 
	~"as_‹xts.h
"

49 
	~"as_·r£r.h
"

51 
BEGIN_AS_NAMESPACE


77 
	gasCComp”
::
	$asCComp”
(
asCSütEngše
 *
’gše
è: 
	$by‹Code
(
’gše
)

79 
bud”
 = 0;

80 
süt
 = 0;

82 
v¬ŸbËs
 = 0;

83 
isProûssšgDeã¼edP¬ams
 = 
çl£
;

84 
isCompšgDeçuÉArg
 = 
çl£
;

85 
noCodeOuut
 = 0;

86 
	}
}

88 
	gasCComp”
::~
	$asCComp”
()

90  
v¬ŸbËs
 )

92 
asCV¬ŸbËScİe
 *
v¬
 = 
v¬ŸbËs
;

93 
v¬ŸbËs
 = v¬ŸbËs->
·»Á
;

95 
	`asDELETE
(
v¬
,
asCV¬ŸbËScİe
);

97 
	}
}

99 
	gasCComp”
::
	$Re£t
(
asCBud”
 *
bud”
, 
asCSütCode
 *
süt
, 
asCSütFunùiÚ
 *
outFunc
)

101 
this
->
bud”
 = builder;

102 
this
->
’gše
 = 
bud”
->engine;

103 
this
->
süt
 = script;

104 
this
->
outFunc
 = outFunc;

106 
hasCompeE¼Üs
 = 
çl£
;

108 
m_isCÚ¡ruùÜ
 = 
çl£
;

109 
m_isCÚ¡ruùÜC®Ëd
 = 
çl£
;

111 
ÃxtLab–
 = 0;

112 
b»akLab–s
.
	`S‘L’gth
(0);

113 
cÚtšueLab–s
.
	`S‘L’gth
(0);

115 
by‹Code
.
	`CË¬AÎ
();

116 
	}
}

118 
	gasCComp”
::
	$CompeDeçuÉCÚ¡ruùÜ
(
asCBud”
 *
bud”
, 
asCSütCode
 *
süt
, 
asCSütNode
 *
node
, 
asCSütFunùiÚ
 *
outFunc
)

120 
	`Re£t
(
bud”
, 
süt
, 
outFunc
);

123 
by‹Code
.
	`In¡rPTR
(
asBC_J™EÁry
, 0);

126  
asUINT
 
n
 = 0;‚ < 
outFunc
->
objeùTy³
->
´İ”t›s
.
	`G‘L’gth
();‚++ )

128 
asCD©aTy³
 &
dt
 = 
outFunc
->
objeùTy³
->
´İ”t›s
[
n
]->
ty³
;

129 ifĞ
dt
.
	`IsObjeù
(è&& !dt.
	`IsObjeùHªdË
() &&

130 (((
dt
.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_REF
è&& dt.G‘ObjeùTy³()->
beh
.
çùÜy
 == 0) ||

131 ((
dt
.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_VALUE
è&& !(dt.G‘ObjeùTy³()->æag & 
asOBJ_POD
è&& dt.G‘ObjeùTy³()->
beh
.
cÚ¡ruù
 == 0)) )

133 
asCSŒšg
 
¡r
;

134 ifĞ
dt
.
	`G‘FuncDef
() )

135 
¡r
.
	`FÜm©
(
TXT_NO_DEFAULT_CONSTRUCTOR_FOR_s
, 
dt
.
	`G‘FuncDef
()->
	`G‘Name
());

137 
¡r
.
	`FÜm©
(
TXT_NO_DEFAULT_CONSTRUCTOR_FOR_s
, 
dt
.
	`G‘ObjeùTy³
()->
	`G‘Name
());

138 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

143 ifĞ
outFunc
->
objeùTy³
->
d”ivedFrom
 )

146 
by‹Code
.
	`In¡rSHORT
(
asBC_PSF
, 0);

147 
by‹Code
.
	`In¡r
(
asBC_RDSPŒ
);

148 
by‹Code
.
	`C®l
(
asBC_CALL
, 
outFunc
->
objeùTy³
->
d”ivedFrom
->
beh
.
cÚ¡ruù
, 
AS_PTR_SIZE
);

152 
by‹Code
.
	`R‘
(
AS_PTR_SIZE
);

154 
	`Fš®izeFunùiÚ
();

156 #ifdeà
AS_DEBUG


158 
by‹Code
.
	`DebugOuut
(("__" + 
outFunc
->
objeùTy³
->
Çme
 + "_" + outFunc->Çm+ "__dc.txt").
	`Add»ssOf
(), 
’gše
, outFunc);

162 
	}
}

164 
	gasCComp”
::
	$CompeFaùÜy
(
asCBud”
 *
bud”
, 
asCSütCode
 *
süt
, 
asCSütFunùiÚ
 *
outFunc
)

166 
	`Re£t
(
bud”
, 
süt
, 
outFunc
);

169 
by‹Code
.
	`In¡rPTR
(
asBC_J™EÁry
, 0);

172 
asCD©aTy³
 
dt
 =‡sCD©aTy³::
	`C»©eObjeù
(
outFunc
->
»tuºTy³
.
	`G‘ObjeùTy³
(), 
çl£
);

173 
cÚ¡ruùÜ
 = 0;

174  
n
 = 0;‚ < 
dt
.
	`G‘Behaviour
()->
çùÜ›s
.
	`G‘L’gth
();‚++ )

176 ifĞ
dt
.
	`G‘Behaviour
()->
çùÜ›s
[
n
] =ğ
outFunc
->
id
 )

178 
cÚ¡ruùÜ
 = 
dt
.
	`G‘Behaviour
()->
cÚ¡ruùÜs
[
n
];

184 
v¬Off£t
 = 
	`AÎoÿ‹V¬ŸbË
(
dt
, 
Œue
);

186 
outFunc
->
v¬ŸbËS·û
 = 
AS_PTR_SIZE
;

187 
by‹Code
.
	`In¡rSHORT
(
asBC_PSF
, ()
v¬Off£t
);

191 
off£t
 = ()
outFunc
->
	`G‘S·ûN“dedFÜArgum’ts
();

192  
a
 = (
outFunc
->
·¿m‘”Ty³s
.
	`G‘L’gth
()) - 1;‡ >= 0;‡-- )

194 ifĞ!
outFunc
->
·¿m‘”Ty³s
[
a
].
	`IsPrim™ive
() ||

195 
outFunc
->
·¿m‘”Ty³s
[
a
].
	`IsReã»nû
() )

197 
off£t
 -ğ
AS_PTR_SIZE
;

198 
by‹Code
.
	`In¡rSHORT
(
asBC_PshVPŒ
, (-
off£t
));

202 ifĞ
outFunc
->
·¿m‘”Ty³s
[
a
].
	`G‘SizeOnSckDWÜds
() == 2 )

204 
off£t
 -= 2;

205 
by‹Code
.
	`In¡rSHORT
(
asBC_PshV8
, (-
off£t
));

209 
off£t
 -= 1;

210 
by‹Code
.
	`In¡rSHORT
(
asBC_PshV4
, (-
off£t
));

215 
¬gDwÜds
 = ()
outFunc
->
	`G‘S·ûN“dedFÜArgum’ts
();

216 
by‹Code
.
	`AÎoc
(
asBC_ALLOC
, 
dt
.
	`G‘ObjeùTy³
(), 
cÚ¡ruùÜ
, 
¬gDwÜds
 + 
AS_PTR_SIZE
);

219 
by‹Code
.
	`In¡rSHORT
(
asBC_LOADOBJ
, ()
v¬Off£t
);

221 
by‹Code
.
	`R‘
(
¬gDwÜds
);

223 
	`Fš®izeFunùiÚ
();

226 
outFunc
->
dÚtCËªUpOnExû±iÚ
 = 
Œue
;

237 
	}
}

239 
	gasCComp”
::
	$Fš®izeFunùiÚ
()

241 
asUINT
 
n
;

244  
n
 = 0;‚ < 
v¬ŸbËIsTempÜ¬y
.
	`G‘L’gth
();‚++ )

246 ifĞ
v¬ŸbËIsTempÜ¬y
[
n
] )

247 
by‹Code
.
	`DefšeTempÜ¬yV¬ŸbË
(
	`G‘V¬ŸbËOff£t
(
n
));

251 
by‹Code
.
	`Fš®ize
();

253 
by‹Code
.
	`ExŒaùObjeùV¬ŸbËInfo
(
outFunc
);

257  
n
 = 0;‚ < 
v¬ŸbËAÎoÿtiÚs
.
	`G‘L’gth
();‚++ )

259 ifĞ
v¬ŸbËAÎoÿtiÚs
[
n
].
	`IsObjeù
(è&& !v¬ŸbËAÎoÿtiÚs[n].
	`IsReã»nû
() )

261 ifĞ
v¬ŸbËIsOnH—p
[
n
] )

263 
outFunc
->
objV¬ŸbËTy³s
.
	`PushLa¡
(
v¬ŸbËAÎoÿtiÚs
[
n
].
	`G‘ObjeùTy³
());

264 
outFunc
->
funcV¬ŸbËTy³s
.
	`PushLa¡
(
v¬ŸbËAÎoÿtiÚs
[
n
].
	`G‘FuncDef
());

265 
outFunc
->
objV¬ŸbËPos
.
	`PushLa¡
(
	`G‘V¬ŸbËOff£t
(
n
));

269 
outFunc
->
objV¬ŸbËsOnH—p
 = 
	`asUINT
(outFunc->
objV¬ŸbËPos
.
	`G‘L’gth
());

270  
n
 = 0;‚ < 
v¬ŸbËAÎoÿtiÚs
.
	`G‘L’gth
();‚++ )

272 ifĞ
v¬ŸbËAÎoÿtiÚs
[
n
].
	`IsObjeù
(è&& !v¬ŸbËAÎoÿtiÚs[n].
	`IsReã»nû
() )

274 ifĞ!
v¬ŸbËIsOnH—p
[
n
] )

276 
outFunc
->
objV¬ŸbËTy³s
.
	`PushLa¡
(
v¬ŸbËAÎoÿtiÚs
[
n
].
	`G‘ObjeùTy³
());

277 
outFunc
->
funcV¬ŸbËTy³s
.
	`PushLa¡
(
v¬ŸbËAÎoÿtiÚs
[
n
].
	`G‘FuncDef
());

278 
outFunc
->
objV¬ŸbËPos
.
	`PushLa¡
(
	`G‘V¬ŸbËOff£t
(
n
));

284 
outFunc
->
by‹Code
.
	`S‘L’gth
(by‹Code.
	`G‘Size
());

285 
by‹Code
.
	`Ouut
(
outFunc
->by‹Code.
	`Add»ssOf
());

286 
outFunc
->
	`AddReã»nûs
();

287 
outFunc
->
¡ackN“ded
 = 
by‹Code
.
Ïrge¡SckU£d
 + outFunc->
v¬ŸbËS·û
;

288 
outFunc
->
lšeNumb”s
 = 
by‹Code
.lineNumbers;

289 
	}
}

292 
	gasCComp”
::
	$CompeFunùiÚ
(
asCBud”
 *
bud”
, 
asCSütCode
 *
süt
, 
sEx¶ic™SigÇtu»
 *
sigÇtu»
, 
asCSütNode
 *
func
, 
asCSütFunùiÚ
 *
outFunc
)

299 
	`Re£t
(
bud”
, 
süt
, 
outFunc
);

300 
budE¼Üs
 = 
bud”
->
numE¼Üs
;

302 
¡ackPos
 = 0;

303 ifĞ
outFunc
->
objeùTy³
 )

304 
¡ackPos
 = -
AS_PTR_SIZE
;

307 
ÃxtLab–
++;

312 
	`AddV¬ŸbËScİe
();

314 
asCSütNode
 *
node
;

315 
boŞ
 
isDe¡ruùÜ
 = 
çl£
;

316 
asCD©aTy³
 
»tuºTy³
;

318 ifĞ!
sigÇtu»
 )

320 
node
 = 
func
->
fœ¡Chd
;

321 ifĞ
outFunc
->
objeùTy³
 )

324 ifĞ
node
->
nodeTy³
 =ğ
¢Undefšed
 &&‚ode->
tok’Ty³
 =ğ
‰Priv©e
 )

325 
node
 =‚ode->
Ãxt
;

327 ifĞ
outFunc
->
	`IsSh¬ed
() )

330 
	`asASSERT
Ğ
node
->
nodeTy³
 =ğ
¢Id’tif›r
 );

331 
node
 =‚ode->
Ãxt
;

337 ifĞ
node
->
nodeTy³
 =ğ
¢D©aTy³
 )

340 
»tuºTy³
 = 
bud”
->
	`C»©eD©aTy³FromNode
(
node
, 
süt
, 
’gše
->
ÇmeS·ûs
[0]);

341 
»tuºTy³
 = 
bud”
->
	`ModifyD©aTy³FromNode
Ô‘uºTy³, 
node
->
Ãxt
, 
süt
, 0, 0);

344 ifĞ!
»tuºTy³
.
	`CªBeIn¡ªcŸ‹d
() &&

345 
»tuºTy³
 !ğ
asCD©aTy³
::
	`C»©ePrim™ive
(
‰Void
, 
çl£
) )

347 
asCSŒšg
 
¡r
;

348 
¡r
.
	`FÜm©
(
TXT_DATA_TYPE_CANT_BE_s
, 
»tuºTy³
.FÜm©().
	`Add»ssOf
());

349 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
func
->
fœ¡Chd
);

354 
»tuºTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰Void
, 
çl£
);

355 ifĞ
node
->
tok’Ty³
 =ğ
‰B™NÙ
 )

356 
isDe¡ruùÜ
 = 
Œue
;

358 
m_isCÚ¡ruùÜ
 = 
Œue
;

363 
node
 = 
func
;

364 
»tuºTy³
 = 
sigÇtu»
->returnType;

370 ifĞ!(
isDe¡ruùÜ
 || 
m_isCÚ¡ruùÜ
è&& 
outFunc
->
	`DÛsR‘uºOnSck
() )

371 
¡ackPos
 -ğ
AS_PTR_SIZE
;

373 
asCV¬ŸbËScİe
 
	`vs
(0);

375 ifĞ!
sigÇtu»
 )

380  
node
 &&‚ode->
nodeTy³
 !ğ
¢P¬am‘”Li¡
 )

381 
node
 =‚ode->
Ãxt
;

385 ifĞ
node
 )‚odğnode->
fœ¡Chd
;

386  
node
 )

390 
asCD©aTy³
 
ty³
 = 
bud”
->
	`C»©eD©aTy³FromNode
(
node
, 
süt
, 
’gše
->
ÇmeS·ûs
[0]);

392 
asETy³Modif›rs
 
šoutFÏg
 = 
asTM_NONE
;

393 
ty³
 = 
bud”
->
	`ModifyD©aTy³FromNode
Ñy³, 
node
->
Ãxt
, 
süt
, &
šoutFÏg
, 0);

396 ifĞ(
ty³
.
	`IsReã»nû
(è&& 
šoutFÏg
 !ğ
asTM_INOUTREF
 && !ty³.
	`CªBeIn¡ªcŸ‹d
()) ||

397 (!
ty³
.
	`IsReã»nû
(è&& !ty³.
	`CªBeIn¡ªcŸ‹d
()) )

399 
asCSŒšg
 
·rm
 = 
ty³
.
	`FÜm©
();

400 ifĞ
šoutFÏg
 =ğ
asTM_INREF
 )

401 
·rm
 += "in";

402 ifĞ
šoutFÏg
 =ğ
asTM_OUTREF
 )

403 
·rm
 += "out";

405 
asCSŒšg
 
¡r
;

406 
¡r
.
	`FÜm©
(
TXT_PARAMETER_CANT_BE_s
, 
·rm
.
	`Add»ssOf
());

407 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

411 
node
 =‚ode->
Ãxt
->next;

412 ifĞ
node
 &&‚ode->
nodeTy³
 =ğ
¢Id’tif›r
 )

414 
asCSŒšg
 
	`Çme
(&
süt
->
code
[
node
->
tok’Pos
],‚ode->
tok’L’gth
);

416 ifĞ
vs
.
	`Deş¬eV¬ŸbË
(
Çme
.
	`Add»ssOf
(), 
ty³
, 
¡ackPos
, 
Œue
) < 0 )

419 
	`E¼Ü
(
TXT_PARAMETER_ALREADY_DECLARED
, 
node
);

423 
by‹Code
.
	`V¬Deş
(()
outFunc
->
v¬ŸbËs
.
	`G‘L’gth
());

424 
outFunc
->
	`AddV¬ŸbË
(
Çme
, 
ty³
, 
¡ackPos
);

426 
node
 =‚ode->
Ãxt
;

429 ifĞ
node
 &&‚ode->
nodeTy³
 =ğ
¢Ex´essiÚ
 )

430 
node
 =‚ode->
Ãxt
;

433 
vs
.
	`Deş¬eV¬ŸbË
("", 
ty³
, 
¡ackPos
, 
Œue
);

436 
¡ackPos
 -ğ
ty³
.
	`G‘SizeOnSckDWÜds
();

442 
asCA¼ay
<
asCD©aTy³
> &
¬gs
 = 
sigÇtu»
->
¬gTy³s
;

443 
asCA¼ay
<
asETy³Modif›rs
> &
šoutFÏgs
 = 
sigÇtu»
->
¬gModif›rs
;

444 
asCA¼ay
<
asCSŒšg
> &
¬gNames
 = 
sigÇtu»
->argNames;

445 
	`asASSERT
(
¬gs
.
	`G‘L’gth
(è=ğ
¬gNames
.GetLength());

447  
k
 = 0; k < ()
¬gs
.
	`G‘L’gth
(); k++ )

449 
asCD©aTy³
 
ty³
 = 
¬gs
[
k
];

450 
asETy³Modif›rs
 
šoutFÏg
 = 
šoutFÏgs
[
k
];

452 ifĞ(
ty³
.
	`IsReã»nû
(è&& 
šoutFÏg
 !ğ
asTM_INOUTREF
 && !ty³.
	`CªBeIn¡ªcŸ‹d
()) ||

453 (!
ty³
.
	`IsReã»nû
(è&& !ty³.
	`CªBeIn¡ªcŸ‹d
()) )

455 
asCSŒšg
 
¡r
;

456 
¡r
.
	`FÜm©
(
TXT_PARAMETER_CANT_BE_s
, 
ty³
.FÜm©().
	`Add»ssOf
());

457 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

460 ifĞ0 !ğ
¬gNames
[
k
].
	`Com·»
("") )

462 ifĞ
vs
.
	`Deş¬eV¬ŸbË
(
¬gNames
[
k
].
	`Add»ssOf
(), 
ty³
, 
¡ackPos
, 
Œue
) < 0 )

463 
	`E¼Ü
(
TXT_PARAMETER_ALREADY_DECLARED
, 
node
);

466 
by‹Code
.
	`V¬Deş
(()
outFunc
->
v¬ŸbËs
.
	`G‘L’gth
());

467 
outFunc
->
	`AddV¬ŸbË
(
¬gNames
[
k
], 
ty³
, 
¡ackPos
);

470 
vs
.
	`Deş¬eV¬ŸbË
("", 
ty³
, 
¡ackPos
, 
Œue
);

473 
¡ackPos
 -ğ
ty³
.
	`G‘SizeOnSckDWÜds
();

477 
n
;

478  
n
 = ()
vs
.
v¬ŸbËs
.
	`G‘L’gth
() - 1;‚ >= 0;‚-- )

480 
v¬ŸbËs
->
	`Deş¬eV¬ŸbË
(
vs
.v¬ŸbËs[
n
]->
Çme
.
	`Add»ssOf
(), vs.v¬ŸbËs[n]->
ty³
, vs.v¬ŸbËs[n]->
¡ackOff£t
, vs.v¬ŸbËs[n]->
ÚH—p
);

484 ifĞ(
»tuºTy³
.
	`G‘SizeOnSckDWÜds
(è=ğ0 &&„‘uºTy³ !ğ
asCD©aTy³
::
	`C»©ePrim™ive
(
‰Void
, 
çl£
)) ||

485 (
»tuºTy³
.
	`IsReã»nû
(è&& !»tuºTy³.
	`CªBeIn¡ªcŸ‹d
()) )

487 
asCSŒšg
 
¡r
;

488 
¡r
.
	`FÜm©
(
TXT_RETURN_CANT_BE_s
, 
»tuºTy³
.FÜm©().
	`Add»ssOf
());

489 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
func
);

492 
v¬ŸbËs
->
	`Deş¬eV¬ŸbË
("»tuº", 
»tuºTy³
, 
¡ackPos
, 
Œue
);

499 
asCSütNode
 *
blockBegš
;

501 ifĞ!
sigÇtu»
 )

502 
blockBegš
 = 
func
->
Ï¡Chd
;

504 
blockBegš
 = 
func
;

507 
asCP¬£r
 
	`·r£r
(
bud”
);

508 
r
 = 
·r£r
.
	`P¬£S‹m’tBlock
(
süt
, 
blockBegš
);

509 ifĞ
r
 < 0 )  -1;

510 
asCSütNode
 *
block
 = 
·r£r
.
	`G‘SütNode
();

512 
boŞ
 
hasR‘uº
;

513 
asCBy‹Code
 
	`bc
(
’gše
);

514 
	`LšeIn¡r
(&
bc
, 
blockBegš
->
tok’Pos
);

515 
	`CompeS‹m’tBlock
(
block
, 
çl£
, &
hasR‘uº
, &
bc
);

516 
	`LšeIn¡r
(&
bc
, 
blockBegš
->
tok’Pos
 + blockBegš->
tok’L’gth
);

519 ifĞ
»tuºTy³
 !ğ
asCD©aTy³
::
	`C»©ePrim™ive
(
‰Void
, 
çl£
) )

521 ifĞ
hasR‘uº
 =ğ
çl£
 )

522 
	`E¼Ü
(
TXT_NOT_ALL_PATHS_RETURN
, 
blockBegš
);

529 
by‹Code
.
	`In¡rPTR
(
asBC_J™EÁry
, 0);

532 
v¬Size
 = 
	`G‘V¬ŸbËOff£t
(()
v¬ŸbËAÎoÿtiÚs
.
	`G‘L’gth
()) - 1;

533 
outFunc
->
v¬ŸbËS·û
 = 
v¬Size
;

535 ifĞ
outFunc
->
objeùTy³
 )

538 ifĞ
m_isCÚ¡ruùÜ
 && !
m_isCÚ¡ruùÜC®Ëd
 && 
outFunc
->
objeùTy³
->
d”ivedFrom
 )

540 ifĞ
outFunc
->
objeùTy³
->
d”ivedFrom
->
beh
.
cÚ¡ruù
 )

542 
by‹Code
.
	`In¡rSHORT
(
asBC_PSF
, 0);

543 
by‹Code
.
	`In¡r
(
asBC_RDSPŒ
);

544 
by‹Code
.
	`C®l
(
asBC_CALL
, 
outFunc
->
objeùTy³
->
d”ivedFrom
->
beh
.
cÚ¡ruù
, 
AS_PTR_SIZE
);

548 
	`E¼Ü
(
TEXT_BASE_DOESNT_HAVE_DEF_CONSTR
, 
blockBegš
);

553 ifĞ!
m_isCÚ¡ruùÜ
 && !
outFunc
->
»tuºTy³
.
	`IsReã»nû
() )

560 
by‹Code
.
	`In¡rSHORT
(
asBC_PSF
, 0);

561 
by‹Code
.
	`In¡r
(
asBC_RDSPŒ
);

562 
by‹Code
.
	`C®l
(
asBC_CALLSYS
, 
outFunc
->
objeùTy³
->
beh
.
add»f
, 
AS_PTR_SIZE
);

567 
by‹Code
.
	`AddCode
(&
bc
);

570  
n
 = ()
v¬ŸbËs
->v¬ŸbËs.
	`G‘L’gth
() - 1;‚ >= 0;‚-- )

572 
sV¬ŸbË
 *
v
 = 
v¬ŸbËs
->v¬ŸbËs[
n
];

573 ifĞ
v
->
¡ackOff£t
 > 0 )

576 ifĞ
v
->
Çme
 != "return" && v->name != "return‡ddress" )

577 
	`C®lDe¡ruùÜ
(
v
->
ty³
, v->
¡ackOff£t
, v->
ÚH—p
, &
by‹Code
);

579 
	`D—Îoÿ‹V¬ŸbË
(
v
->
¡ackOff£t
);

585 
by‹Code
.
	`Lab–
(0);

588  
n
 = ()
v¬ŸbËs
->v¬ŸbËs.
	`G‘L’gth
() - 1;‚ >= 0;‚-- )

590 
sV¬ŸbË
 *
v
 = 
v¬ŸbËs
->v¬ŸbËs[
n
];

591 ifĞ
v
->
¡ackOff£t
 <= 0 )

594 ifĞ
v
->
Çme
 != "return" && v->name != "return‡ddress" )

595 
	`C®lDe¡ruùÜ
(
v
->
ty³
, v->
¡ackOff£t
, v->
ÚH—p
, &
by‹Code
);

602 ifĞ
outFunc
->
objeùTy³
 && !
m_isCÚ¡ruùÜ
 && !outFunc->
»tuºTy³
.
	`IsReã»nû
() )

604 
by‹Code
.
	`In¡rW_PTR
(
asBC_FREE
, 0, 
outFunc
->
objeùTy³
);

608 ifĞ
hasCompeE¼Üs
 || 
bud”
->
numE¼Üs
 !ğ
budE¼Üs
 )

612 
	`asASSERT
(
v¬ŸbËAÎoÿtiÚs
.
	`G‘L’gth
(è=ğ
ä“V¬ŸbËs
.GetLength());

615 
	`RemoveV¬ŸbËScİe
();

623 
by‹Code
.
	`R‘
(-
¡ackPos
);

625 
	`Fš®izeFunùiÚ
();

627 #ifdeà
AS_DEBUG


629 ifĞ
outFunc
->
objeùTy³
 )

630 
by‹Code
.
	`DebugOuut
(("__" + 
outFunc
->
objeùTy³
->
Çme
 + "_" + outFunc->Çm+ ".txt").
	`Add»ssOf
(), 
’gše
, outFunc);

632 
by‹Code
.
	`DebugOuut
(("__" + 
outFunc
->
Çme
 + ".txt").
	`Add»ssOf
(), 
’gše
, outFunc);

636 
	}
}

638 
	gasCComp”
::
	$C®lCİyCÚ¡ruùÜ
(
asCD©aTy³
 &
ty³
, 
off£t
, 
boŞ
 
isObjeùOnH—p
, 
asCBy‹Code
 *
bc
, 
asSEx´CÚ‹xt
 *
¬g
, 
asCSütNode
 *
node
, boŞ 
isGlob®V¬
, boŞ 
d”efDe¡
)

640 ifĞ!
ty³
.
	`IsObjeù
() )

644 
	`asASSERT
Ğ!
ty³
.
	`IsObjeùHªdË
() );

646 
asCA¼ay
<
asSEx´CÚ‹xt
*> 
¬gs
;

647 
¬gs
.
	`PushLa¡
(
¬g
);

650 
	`asASSERT
Ğ
¬g
->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
() ==ype.GetObjectType() );

657 ifĞ
ty³
.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_REF
 )

659 
asSEx´CÚ‹xt
 
	`ùx
(
’gše
);

661 
func
 = 0;

662 
asSTy³Behaviour
 *
beh
 = 
ty³
.
	`G‘Behaviour
();

663 ifĞ
beh
 ) 
func
 = beh->
cİyçùÜy
;

665 ifĞ
func
 > 0 )

667 ifĞ!
isGlob®V¬
 )

670 
	`P”fÜmFunùiÚC®l
(
func
, &
ùx
, 
çl£
, &
¬gs
, 
ty³
.
	`G‘ObjeùTy³
(), 
Œue
, 
off£t
);

673 
ùx
.
bc
.
	`In¡r
(
asBC_PİPŒ
);

678 
	`P”fÜmFunùiÚC®l
(
func
, &
ùx
, 
çl£
, &
¬gs
, 
ty³
.
	`G‘ObjeùTy³
());

681 
ùx
.
bc
.
	`In¡r
(
asBC_RDSPŒ
);

682 
ùx
.
bc
.
	`In¡rPTR
(
asBC_PGA
, 
’gše
->
glob®Prİ”t›s
[
off£t
]->
	`G‘Add»ssOfV®ue
());

683 
ùx
.
bc
.
	`In¡rPTR
(
asBC_REFCPY
, 
ty³
.
	`G‘ObjeùTy³
());

684 
ùx
.
bc
.
	`In¡r
(
asBC_PİPŒ
);

685 
	`R–—£TempÜ¬yV¬ŸbË
(
ùx
.
ty³
.
¡ackOff£t
, &ùx.
bc
);

688 
bc
->
	`AddCode
(&
ùx
.bc);

695 
asSTy³Behaviour
 *
beh
 = 
ty³
.
	`G‘Behaviour
();

696 
func
 = 
beh
 ? beh->
cİycÚ¡ruù
 : 0;

697 ifĞ
func
 > 0 )

703 
asCBy‹Code
 
	`tmp
(
’gše
);

704 ifĞ
isGlob®V¬
 )

705 
tmp
.
	`In¡rPTR
(
asBC_PGA
, 
’gše
->
glob®Prİ”t›s
[
off£t
]->
	`G‘Add»ssOfV®ue
());

706 ifĞ
isObjeùOnH—p
 )

707 
tmp
.
	`In¡rSHORT
(
asBC_PSF
, ()
off£t
);

708 
tmp
.
	`AddCode
(
bc
);

709 
bc
->
	`AddCode
(&
tmp
);

713 ifĞ!
isObjeùOnH—p
 )

715 
	`asASSERT
Ğ!
isGlob®V¬
 );

716 
bc
->
	`In¡rSHORT
(
asBC_PSF
, ()
off£t
);

717 ifĞ
d”efDe¡
 )

720 
bc
->
	`In¡r
(
asBC_RDSPŒ
);

724 
asSEx´CÚ‹xt
 
	`ùx
(
’gše
);

725 
	`P”fÜmFunùiÚC®l
(
func
, &
ùx
, 
isObjeùOnH—p
, &
¬gs
, 
ty³
.
	`G‘ObjeùTy³
());

727 
bc
->
	`AddCode
(&
ùx
.bc);

731 ifĞ!
isObjeùOnH—p
 )

732 
bc
->
	`ObjInfo
(
off£t
, 
asOBJ_INIT
);

740 
asCSŒšg
 
¡r
;

741 
¡r
.
	`FÜm©
(
TXT_NO_COPY_CONSTRUCTOR_FOR_s
, 
ty³
.
	`G‘ObjeùTy³
()->
	`G‘Name
());

742 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

745 
	}
}

747 
	gasCComp”
::
	$C®lDeçuÉCÚ¡ruùÜ
(
asCD©aTy³
 &
ty³
, 
off£t
, 
boŞ
 
isObjeùOnH—p
, 
asCBy‹Code
 *
bc
, 
asCSütNode
 *
node
, boŞ 
isGlob®V¬
, boŞ 
deãrDe¡
)

749 ifĞ!
ty³
.
	`IsObjeù
(è||y³.
	`IsObjeùHªdË
() )

752 ifĞ
ty³
.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_REF
 )

754 
asSEx´CÚ‹xt
 
	`ùx
(
’gše
);

755 
ùx
.
ex´Node
 = 
node
;

757 
func
 = 0;

758 
asSTy³Behaviour
 *
beh
 = 
ty³
.
	`G‘Behaviour
();

759 ifĞ
beh
 ) 
func
 = beh->
çùÜy
;

761 ifĞ
func
 > 0 )

763 ifĞ!
isGlob®V¬
 )

766 
	`P”fÜmFunùiÚC®l
(
func
, &
ùx
, 
çl£
, 0, 
ty³
.
	`G‘ObjeùTy³
(), 
Œue
, 
off£t
);

769 
ùx
.
bc
.
	`In¡r
(
asBC_PİPŒ
);

774 
	`P”fÜmFunùiÚC®l
(
func
, &
ùx
, 
çl£
, 0, 
ty³
.
	`G‘ObjeùTy³
());

777 
ùx
.
bc
.
	`In¡r
(
asBC_RDSPŒ
);

778 
ùx
.
bc
.
	`In¡rPTR
(
asBC_PGA
, 
’gše
->
glob®Prİ”t›s
[
off£t
]->
	`G‘Add»ssOfV®ue
());

779 
ùx
.
bc
.
	`In¡rPTR
(
asBC_REFCPY
, 
ty³
.
	`G‘ObjeùTy³
());

780 
ùx
.
bc
.
	`In¡r
(
asBC_PİPŒ
);

781 
	`R–—£TempÜ¬yV¬ŸbË
(
ùx
.
ty³
.
¡ackOff£t
, &ùx.
bc
);

784 
bc
->
	`AddCode
(&
ùx
.bc);

791 
asSTy³Behaviour
 *
beh
 = 
ty³
.
	`G‘Behaviour
();

793 
func
 = 0;

794 ifĞ
beh
 ) 
func
 = beh->
cÚ¡ruù
;

797 ifĞ
func
 !ğ0 || (
ty³
.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_POD
) )

799 ifĞ!
isObjeùOnH—p
 )

801 
	`asASSERT
Ğ!
isGlob®V¬
 );

805 ifĞ
func
 )

808 
bc
->
	`In¡rSHORT
(
asBC_PSF
, ()
off£t
);

809 ifĞ
deãrDe¡
 )

810 
bc
->
	`In¡r
(
asBC_RDSPŒ
);

811 
asSEx´CÚ‹xt
 
	`ùx
(
’gše
);

812 
	`P”fÜmFunùiÚC®l
(
func
, &
ùx
, 
çl£
, 0, 
ty³
.
	`G‘ObjeùTy³
());

813 
bc
->
	`AddCode
(&
ùx
.bc);

817 
bc
->
	`ObjInfo
(
off£t
, 
asOBJ_INIT
);

822 ifĞ
isGlob®V¬
 )

823 
bc
->
	`In¡rPTR
(
asBC_PGA
, 
’gše
->
glob®Prİ”t›s
[
off£t
]->
	`G‘Add»ssOfV®ue
());

825 
bc
->
	`In¡rSHORT
(
asBC_PSF
, ()
off£t
);

827 
bc
->
	`AÎoc
(
asBC_ALLOC
, 
ty³
.
	`G‘ObjeùTy³
(), 
func
, 
AS_PTR_SIZE
);

835 
asCSŒšg
 
¡r
;

837 ifĞ
ty³
.
	`G‘FuncDef
() )

838 
¡r
.
	`FÜm©
(
TXT_NO_DEFAULT_CONSTRUCTOR_FOR_s
, 
ty³
.
	`G‘FuncDef
()->
	`G‘Name
());

840 
¡r
.
	`FÜm©
(
TXT_NO_DEFAULT_CONSTRUCTOR_FOR_s
, 
ty³
.
	`G‘ObjeùTy³
()->
	`G‘Name
());

841 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

844 
	}
}

846 
	gasCComp”
::
	$C®lDe¡ruùÜ
(
asCD©aTy³
 &
ty³
, 
off£t
, 
boŞ
 
isObjeùOnH—p
, 
asCBy‹Code
 *
bc
)

848 ifĞ!
ty³
.
	`IsReã»nû
() )

851 ifĞ
ty³
.
	`IsObjeù
() )

853 ifĞ
isObjeùOnH—p
 || 
ty³
.
	`IsObjeùHªdË
() )

856 
bc
->
	`In¡rW_PTR
(
asBC_FREE
, ()
off£t
, 
ty³
.
	`G‘ObjeùTy³
());

860 
	`asASSERT
Ğ
ty³
.
	`G‘ObjeùTy³
()->
	`G‘FÏgs
(è& 
asOBJ_VALUE
 );

862 ifĞ
ty³
.
	`G‘Behaviour
()->
de¡ruù
 )

865 
bc
->
	`In¡rSHORT
(
asBC_PSF
, ()
off£t
);

866 
asSEx´CÚ‹xt
 
	`ùx
(
’gše
);

867 
	`P”fÜmFunùiÚC®l
(
ty³
.
	`G‘Behaviour
()->
de¡ruù
, &
ùx
);

868 
bc
->
	`AddCode
(&
ùx
.bc);

873 
bc
->
	`ObjInfo
(
off£t
, 
asOBJ_UNINIT
);

877 
	}
}

879 
	gasCComp”
::
	$LšeIn¡r
(
asCBy‹Code
 *
bc
, 
size_t
 
pos
)

881 
r
, 
c
;

882 
süt
->
	`CÚv”tPosToRowCŞ
(
pos
, &
r
, &
c
);

883 
bc
->
	`Lše
(
r
, 
c
);

884 
	}
}

886 
	gasCComp”
::
	$CompeS‹m’tBlock
(
asCSütNode
 *
block
, 
boŞ
 
ownV¬ŸbËScİe
, boŞ *
hasR‘uº
, 
asCBy‹Code
 *
bc
)

888 *
hasR‘uº
 = 
çl£
;

889 
boŞ
 
isFšished
 = 
çl£
;

890 
boŞ
 
hasW¬Ãd
 = 
çl£
;

892 ifĞ
ownV¬ŸbËScİe
 )

894 
bc
->
	`Block
(
Œue
);

895 
	`AddV¬ŸbËScİe
();

898 
asCSütNode
 *
node
 = 
block
->
fœ¡Chd
;

899  
node
 )

901 ifĞ!
hasW¬Ãd
 && (*
hasR‘uº
 || 
isFšished
) )

903 
hasW¬Ãd
 = 
Œue
;

904 
	`W¬nšg
(
TXT_UNREACHABLE_CODE
, 
node
);

907 ifĞ
node
->
nodeTy³
 =ğ
¢B»ak
 ||‚ode->nodeTy³ =ğ
¢CÚtšue
 )

908 
isFšished
 = 
Œue
;

910 
asCBy‹Code
 
	`¡©em’t
(
’gše
);

911 ifĞ
node
->
nodeTy³
 =ğ
¢Deş¬©iÚ
 )

912 
	`CompeDeş¬©iÚ
(
node
, &
¡©em’t
);

914 
	`CompeS‹m’t
(
node
, 
hasR‘uº
, &
¡©em’t
);

916 
	`LšeIn¡r
(
bc
, 
node
->
tok’Pos
);

917 
bc
->
	`AddCode
(&
¡©em’t
);

919 ifĞ!
hasCompeE¼Üs
 )

921 
	`asASSERT
Ğ
‹mpV¬ŸbËs
.
	`G‘L’gth
() == 0 );

922 
	`asASSERT
Ğ
»£rvedV¬ŸbËs
.
	`G‘L’gth
() == 0 );

925 
node
 =‚ode->
Ãxt
;

928 ifĞ
ownV¬ŸbËScİe
 )

931  
n
 = ()
v¬ŸbËs
->v¬ŸbËs.
	`G‘L’gth
() - 1;‚ >= 0;‚-- )

933 
sV¬ŸbË
 *
v
 = 
v¬ŸbËs
->v¬ŸbËs[
n
];

938 ifĞ!
isFšished
 && !*
hasR‘uº
 )

939 
	`C®lDe¡ruùÜ
(
v
->
ty³
, v->
¡ackOff£t
, v->
ÚH—p
, 
bc
);

942 ifĞ
v
->
¡ackOff£t
 > 0 )

943 
	`D—Îoÿ‹V¬ŸbË
(
v
->
¡ackOff£t
);

946 
	`RemoveV¬ŸbËScİe
();

947 
bc
->
	`Block
(
çl£
);

949 
	}
}

952 
	gasCComp”
::
	$CompeGlob®V¬ŸbË
(
asCBud”
 *
bud”
, 
asCSütCode
 *
süt
, 
asCSütNode
 *
node
, 
sGlob®V¬ŸbËDesütiÚ
 *
gv¬
, 
asCSütFunùiÚ
 *
outFunc
)

954 
	`Re£t
(
bud”
, 
süt
, 
outFunc
);

957 
	`AddV¬ŸbËScİe
();

959 
asSEx´CÚ‹xt
 
	`ùx
(
’gše
);

961 
gv¬
->
isPu»CÚ¡ªt
 = 
çl£
;

964 
asCP¬£r
 
	`·r£r
(
bud”
);

965 ifĞ
node
 )

967 
r
 = 
·r£r
.
	`P¬£Glob®V¬In™
(
süt
, 
node
);

968 ifĞ
r
 < 0 )

969  
r
;

971 
node
 = 
·r£r
.
	`G‘SütNode
();

975 ifĞ
node
 &&‚ode->
nodeTy³
 =ğ
¢ArgLi¡
 )

978 ifĞ
gv¬
->
d©©y³
.
	`G‘ObjeùTy³
(è=ğ0 || gv¬->d©©y³.
	`IsObjeùHªdË
() )

980 
	`E¼Ü
(
TXT_MUST_BE_OBJECT
, 
node
);

985 
asCA¼ay
<
asSEx´CÚ‹xt
 *> 
¬gs
;

986 ifĞ
	`CompeArgum’tLi¡
(
node
, 
¬gs
) >= 0 )

989 
asCA¼ay
<> 
funcs
;

990 
asSTy³Behaviour
 *
beh
 = 
gv¬
->
d©©y³
.
	`G‘Behaviour
();

991 ifĞ
beh
 )

993 ifĞ
gv¬
->
d©©y³
.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_REF
 )

994 
funcs
 = 
beh
->
çùÜ›s
;

996 
funcs
 = 
beh
->
cÚ¡ruùÜs
;

999 
asCSŒšg
 
¡r
 = 
gv¬
->
d©©y³
.
	`FÜm©
();

1000 
	`M©chFunùiÚs
(
funcs
, 
¬gs
, 
node
, 
¡r
.
	`Add»ssOf
());

1002 ifĞ
funcs
.
	`G‘L’gth
() == 1 )

1004 
r
 = 
asSUCCESS
;

1007 
asCSütFunùiÚ
 *
func
 = (
funcs
[0] & 0xFFFF0000è=ğ0 ? 
’gše
->
sütFunùiÚs
[funcs[0]] : 0;

1008 ifĞ
func
 && 
¬gs
.
	`G‘L’gth
(è< (
asUINT
)func->
	`G‘P¬amCouÁ
() )

1009 
r
 = 
	`CompeDeçuÉArgs
(
node
, 
¬gs
, 
func
);

1011 ifĞ
r
 =ğ
asSUCCESS
 )

1013 ifĞ
gv¬
->
d©©y³
.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_REF
 )

1015 
	`MakeFunùiÚC®l
(&
ùx
, 
funcs
[0], 0, 
¬gs
, 
node
);

1018 
ùx
.
bc
.
	`In¡r
(
asBC_RDSPŒ
);

1019 
ùx
.
bc
.
	`In¡rPTR
(
asBC_PGA
, 
’gše
->
glob®Prİ”t›s
[
gv¬
->
šdex
]->
	`G‘Add»ssOfV®ue
());

1020 
ùx
.
bc
.
	`In¡rPTR
(
asBC_REFCPY
, 
gv¬
->
d©©y³
.
	`G‘ObjeùTy³
());

1021 
ùx
.
bc
.
	`In¡r
(
asBC_PİPŒ
);

1022 
	`R–—£TempÜ¬yV¬ŸbË
(
ùx
.
ty³
.
¡ackOff£t
, &ùx.
bc
);

1032 
ùx
.
bc
.
	`In¡rPTR
(
asBC_PGA
, 
’gše
->
glob®Prİ”t›s
[
gv¬
->
šdex
]->
	`G‘Add»ssOfV®ue
());

1034 
	`P»·»FunùiÚC®l
(
funcs
[0], &
ùx
.
bc
, 
¬gs
);

1035 
	`MoveArgsToSck
(
funcs
[0], &
ùx
.
bc
, 
¬gs
, 
çl£
);

1037 
	`P”fÜmFunùiÚC®l
(
funcs
[0], &
ùx
, 
Œue
, &
¬gs
, 
gv¬
->
d©©y³
.
	`G‘ObjeùTy³
());

1044  
asUINT
 
n
 = 0;‚ < 
¬gs
.
	`G‘L’gth
();‚++ )

1045 ifĞ
¬gs
[
n
] )

1047 
	`asDELETE
(
¬gs
[
n
],
asSEx´CÚ‹xt
);

1051 ifĞ
node
 &&‚ode->
nodeTy³
 =ğ
¢In™Li¡
 )

1053 
asCTy³Info
 
ti
;

1054 
ti
.
	`S‘
(
gv¬
->
d©©y³
);

1055 
ti
.
isV¬ŸbË
 = 
çl£
;

1056 
ti
.
isTempÜ¬y
 = 
çl£
;

1057 
ti
.
¡ackOff£t
 = ()
gv¬
->
šdex
;

1058 
ti
.
isLV®ue
 = 
Œue
;

1060 
	`CompeIn™Li¡
(&
ti
, 
node
, &
ùx
.
bc
);

1062 
node
 =‚ode->
Ãxt
;

1064 ifĞ
node
 )

1067 
asSEx´CÚ‹xt
 
	`ex´
(
’gše
);

1068 
r
 = 
	`CompeAssignm’t
(
node
, &
ex´
); if(„ < 0 ) „;

1071 ifĞ
gv¬
->
d©©y³
.
	`IsPrim™ive
() )

1073 ifĞ
gv¬
->
d©©y³
.
	`IsR—dOÆy
(è&& 
ex´
.
ty³
.
isCÚ¡ªt
 )

1075 
	`Im¶ic™CÚv”siÚ
(&
ex´
, 
gv¬
->
d©©y³
, 
node
, 
asIC_IMPLICIT_CONV
);

1077 
gv¬
->
isPu»CÚ¡ªt
 = 
Œue
;

1078 
gv¬
->
cÚ¡ªtV®ue
 = 
ex´
.
ty³
.
qwÜdV®ue
;

1081 
asSEx´CÚ‹xt
 
	`lùx
(
’gše
);

1082 
lùx
.
ty³
.
	`S‘
(
gv¬
->
d©©y³
);

1083 
lùx
.
ty³
.
d©aTy³
.
	`MakeReã»nû
(
Œue
);

1084 
lùx
.
ty³
.
d©aTy³
.
	`MakeR—dOÆy
(
çl£
);

1085 
lùx
.
ty³
.
isLV®ue
 = 
Œue
;

1089 ifĞ!
gv¬
->
isEnumV®ue
 )

1090 
lùx
.
bc
.
	`In¡rPTR
(
asBC_LDG
, 
’gše
->
glob®Prİ”t›s
[
gv¬
->
šdex
]->
	`G‘Add»ssOfV®ue
());

1092 
	`DoAssignm’t
(&
ùx
, &
lùx
, &
ex´
, 
node
,‚ode, 
‰Assignm’t
,‚ode);

1100 ifĞ!
gv¬
->
d©©y³
.
	`IsObjeùHªdË
() )

1103 
	`C®lDeçuÉCÚ¡ruùÜ
(
gv¬
->
d©©y³
, gv¬->
šdex
, 
Œue
, &
ùx
.
bc
, gv¬->
idNode
,rue);

1106 
asSEx´CÚ‹xt
 
	`Ëx´
(
’gše
);

1107 
Ëx´
.
ty³
.
	`S‘
(
gv¬
->
d©©y³
);

1108 
Ëx´
.
ty³
.
d©aTy³
.
	`MakeReã»nû
(
Œue
);

1109 
Ëx´
.
ty³
.
d©aTy³
.
	`MakeR—dOÆy
(
çl£
);

1110 
Ëx´
.
ty³
.
¡ackOff£t
 = -1;

1111 
Ëx´
.
ty³
.
isLV®ue
 = 
Œue
;

1113 ifĞ
gv¬
->
d©©y³
.
	`IsObjeùHªdË
() )

1114 
Ëx´
.
ty³
.
isEx¶ic™HªdË
 = 
Œue
;

1116 
Ëx´
.
bc
.
	`In¡rPTR
(
asBC_PGA
, 
’gše
->
glob®Prİ”t›s
[
gv¬
->
šdex
]->
	`G‘Add»ssOfV®ue
());

1123 
boŞ
 
assigÃd
 = 
çl£
;

1125 ifĞ
Ëx´
.
ty³
.
d©aTy³
.
	`IsObjeù
(è&& (!Ëx´.ty³.
isEx¶ic™HªdË
 || (Ëx´.ty³.d©aTy³.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_ASHANDLE
)) )

1127 
assigÃd
 = 
	`CompeOv”lßdedDu®O³¿tÜ
(
node
, &
Ëx´
, &
ex´
, &
ùx
);

1128 ifĞ
assigÃd
 )

1131 
ùx
.
bc
.
	`In¡r
(
asBC_PİPŒ
);

1134 
	`ProûssDeã¼edP¬ams
(&
ùx
);

1138 ifĞ!
assigÃd
 )

1140 
	`P»·»FÜAssignm’t
(&
Ëx´
.
ty³
.
d©aTy³
, &
ex´
, 
node
, 
çl£
);

1145 ifĞ
gv¬
->
d©©y³
.
	`IsR—dOÆy
(è&& 
ex´
.
ty³
.
isCÚ¡ªt
 )

1147 
gv¬
->
isPu»CÚ¡ªt
 = 
Œue
;

1148 
gv¬
->
cÚ¡ªtV®ue
 = 
ex´
.
ty³
.
qwÜdV®ue
;

1152 
	`M”geEx´By‹code
(&
ùx
, &
ex´
);

1155 
ùx
.
bc
.
	`In¡rPTR
(
asBC_PGA
, 
’gše
->
glob®Prİ”t›s
[
gv¬
->
šdex
]->
	`G‘Add»ssOfV®ue
());

1157 
	`P”fÜmAssignm’t
(&
Ëx´
.
ty³
, &
ex´
.ty³, &
ùx
.
bc
, 
node
);

1160 
	`R–—£TempÜ¬yV¬ŸbË
(
ex´
.
ty³
, &
ùx
.
bc
);

1162 
ùx
.
bc
.
	`In¡r
(
asBC_PİPŒ
);

1166 ifĞ
gv¬
->
d©©y³
.
	`IsObjeù
(è&& !gv¬->d©©y³.
	`IsObjeùHªdË
() )

1169 
	`C®lDeçuÉCÚ¡ruùÜ
(
gv¬
->
d©©y³
, gv¬->
šdex
, 
Œue
, &
ùx
.
bc
, gv¬->
idNode
,rue);

1173 
v¬Size
 = 
	`G‘V¬ŸbËOff£t
(()
v¬ŸbËAÎoÿtiÚs
.
	`G‘L’gth
()) - 1;

1176 
size_t
 
pos
 = 0;

1177 ifĞ
gv¬
->
idNode
 )

1178 
pos
 = 
gv¬
->
idNode
->
tok’Pos
;

1179 ifĞ
gv¬
->
ÃxtNode
 )

1180 
pos
 = 
gv¬
->
ÃxtNode
->
tok’Pos
;

1181 
	`LšeIn¡r
(&
by‹Code
, 
pos
);

1184 
outFunc
->
v¬ŸbËS·û
 = 
v¬Size
;

1186 
by‹Code
.
	`AddCode
(&
ùx
.
bc
);

1189  
n
 = ()
v¬ŸbËs
->v¬ŸbËs.
	`G‘L’gth
() - 1;‚ >= 0; --n )

1191 
sV¬ŸbË
 *
v
 = 
v¬ŸbËs
->v¬ŸbËs[
n
];

1194 
	`C®lDe¡ruùÜ
(
v
->
ty³
, v->
¡ackOff£t
, v->
ÚH—p
, &
by‹Code
);

1196 
	`D—Îoÿ‹V¬ŸbË
(
v
->
¡ackOff£t
);

1199 ifĞ
hasCompeE¼Üs
 )  -1;

1202 
	`asASSERT
(
v¬ŸbËAÎoÿtiÚs
.
	`G‘L’gth
(è=ğ
ä“V¬ŸbËs
.GetLength());

1205 
	`RemoveV¬ŸbËScİe
();

1207 
by‹Code
.
	`R‘
(0);

1209 
	`Fš®izeFunùiÚ
();

1211 #ifdeà
AS_DEBUG


1213 
by‹Code
.
	`DebugOuut
(("___š™_" + 
gv¬
->
Çme
 + ".txt").
	`Add»ssOf
(), 
’gše
, 
outFunc
);

1217 
	}
}

1219 
	gasCComp”
::
	$P»·»Argum’t
(
asCD©aTy³
 *
·¿mTy³
, 
asSEx´CÚ‹xt
 *
ùx
, 
asCSütNode
 *
node
, 
boŞ
 
isFunùiÚ
, 
»fTy³
, boŞ 
isMakšgCİy
)

1221 
asCD©aTy³
 
·¿m
 = *
·¿mTy³
;

1222 ifĞ
·¿mTy³
->
	`G‘Tok’Ty³
(è=ğ
‰Que¡iÚ
 )

1225 
·¿m
 = 
ùx
->
ty³
.
d©aTy³
;

1226 
·¿m
.
	`MakeHªdË
(
ùx
->
ty³
.
isEx¶ic™HªdË
);

1227 
·¿m
.
	`MakeReã»nû
(
·¿mTy³
->
	`IsReã»nû
());

1228 
·¿m
.
	`MakeR—dOÆy
(
·¿mTy³
->
	`IsR—dOÆy
());

1231 
·¿m
 = *
·¿mTy³
;

1233 
asCD©aTy³
 
dt
 = 
·¿m
;

1236 ifĞ
isFunùiÚ
 && 
dt
.
	`IsReã»nû
() )

1239 
dt
.
	`MakeReã»nû
(
çl£
);

1240 
dt
.
	`MakeR—dOÆy
(
çl£
);

1242 
off£t
;

1243 ifĞ
»fTy³
 == 1 )

1245 
	`ProûssPrİ”tyG‘AcûssÜ
(
ùx
, 
node
);

1248 ifĞ
·¿mTy³
->
	`G‘Tok’Ty³
(è=ğ
‰Que¡iÚ
 )

1250 
asCBy‹Code
 
	`tmpBC
(
’gše
);

1253 
tmpBC
.
	`In¡rDWORD
(
asBC_TYPEID
, 
’gše
->
	`G‘Ty³IdFromD©aTy³
(
·¿m
));

1256 
tmpBC
.
	`AddCode
(&
ùx
->
bc
);

1257 
ùx
->
bc
.
	`AddCode
(&
tmpBC
);

1262 ifĞ
dt
.
	`IsPrim™ive
(è|| dt.
	`IsNuÎHªdË
() )

1264 
	`IsV¬ŸbËIn™Ÿlized
(&
ùx
->
ty³
, 
node
);

1266 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsReã»nû
(èè
	`CÚv”tToV¬ŸbË
(ctx);

1267 
	`Im¶ic™CÚv”siÚ
(
ùx
, 
dt
, 
node
, 
asIC_IMPLICIT_CONV
, 
Œue
);

1269 ifĞ!(
·¿m
.
	`IsR—dOÆy
(è&& 
ùx
->
ty³
.
isV¬ŸbË
) )

1270 
	`CÚv”tToTempV¬ŸbË
(
ùx
);

1272 
	`PushV¬ŸbËOnSck
(
ùx
, 
Œue
);

1273 
ùx
->
ty³
.
d©aTy³
.
	`MakeR—dOÆy
(
·¿m
.
	`IsR—dOÆy
());

1277 
	`IsV¬ŸbËIn™Ÿlized
(&
ùx
->
ty³
, 
node
);

1279 ifĞ!
isMakšgCİy
 )

1281 
	`Im¶ic™CÚv”siÚ
(
ùx
, 
·¿m
, 
node
, 
asIC_IMPLICIT_CONV
, 
Œue
);

1283 ifĞ!
ùx
->
ty³
.
d©aTy³
.
	`IsEqu®Exû±Ref
(
·¿m
) )

1285 
asCSŒšg
 
¡r
;

1286 
¡r
.
	`FÜm©
(
TXT_CANT_IMPLICITLY_CONVERT_s_TO_s
, 
ùx
->
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
(), 
·¿m
.Format().AddressOf());

1287 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

1289 
ùx
->
ty³
.
	`S‘
(
·¿m
);

1298 ifĞ!
ùx
->
ty³
.
isTempÜ¬y
 && !(
·¿m
.
	`IsR—dOÆy
(è&& ctx->ty³.
isV¬ŸbË
è&& !
isMakšgCİy
 )

1301 
off£t
 = 
	`AÎoÿ‹V¬ŸbËNÙIn
(
dt
, 
Œue
, 
çl£
, 
ùx
);

1306 
asCBy‹Code
 
	`tmpBC
(
’gše
);

1308 
	`C®lDeçuÉCÚ¡ruùÜ
(
dt
, 
off£t
, 
	`IsV¬ŸbËOnH—p
(off£t), &
tmpBC
, 
node
);

1311 
tmpBC
.
	`AddCode
(&
ùx
->
bc
);

1312 
ùx
->
bc
.
	`AddCode
(&
tmpBC
);

1315 
	`P»·»FÜAssignm’t
(&
dt
, 
ùx
, 
node
, 
Œue
);

1317 
dt
.
	`MakeReã»nû
(
	`IsV¬ŸbËOnH—p
(
off£t
));

1318 
asCTy³Info
 
ty³
;

1319 
ty³
.
	`S‘
(
dt
);

1320 
ty³
.
isTempÜ¬y
 = 
Œue
;

1321 
ty³
.
¡ackOff£t
 = ()
off£t
;

1323 ifĞ
dt
.
	`IsObjeùHªdË
() )

1324 
ty³
.
isEx¶ic™HªdË
 = 
Œue
;

1326 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_PSF
, ()
off£t
);

1328 
	`P”fÜmAssignm’t
(&
ty³
, &
ùx
->ty³, &ùx->
bc
, 
node
);

1330 
ùx
->
bc
.
	`In¡r
(
asBC_PİPŒ
);

1332 
	`R–—£TempÜ¬yV¬ŸbË
(
ùx
->
ty³
, &ùx->
bc
);

1334 
ùx
->
ty³
 =ype;

1336 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_PSF
, ()
off£t
);

1337 ifĞ
dt
.
	`IsObjeù
(è&& !dt.
	`IsObjeùHªdË
() )

1338 
ùx
->
bc
.
	`In¡r
(
asBC_RDSPŒ
);

1340 ifĞ
·¿mTy³
->
	`IsR—dOÆy
() )

1341 
ùx
->
ty³
.
d©aTy³
.
	`MakeR—dOÆy
(
Œue
);

1343 ifĞ
isMakšgCİy
 )

1346 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsObjeù
() &&

1347 !
ùx
->
ty³
.
d©aTy³
.
	`IsObjeùHªdË
() &&

1348 
ùx
->
ty³
.
d©aTy³
.
	`IsReã»nû
() )

1349 
	`D”eã»nû
(
ùx
, 
Œue
);

1353 ifĞ
»fTy³
 == 2 )

1356 ifĞ
·¿mTy³
->
	`G‘Tok’Ty³
(è=ğ
‰Que¡iÚ
 )

1358 
asCBy‹Code
 
	`tmpBC
(
’gše
);

1361 
tmpBC
.
	`In¡rDWORD
(
asBC_TYPEID
, 
’gše
->
	`G‘Ty³IdFromD©aTy³
(
·¿m
));

1364 
tmpBC
.
	`AddCode
(&
ùx
->
bc
);

1365 
ùx
->
bc
.
	`AddCode
(&
tmpBC
);

1369 
off£t
 = 
	`AÎoÿ‹V¬ŸbËNÙIn
(
dt
, 
Œue
, 
çl£
, 
ùx
);

1371 ifĞ
dt
.
	`IsPrim™ive
() )

1373 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
dt
, 
off£t
, 
Œue
);

1374 
	`PushV¬ŸbËOnSck
(
ùx
, 
Œue
);

1379 
asCBy‹Code
 
	`tmpBC
(
’gše
);

1380 
	`C®lDeçuÉCÚ¡ruùÜ
(
dt
, 
off£t
, 
	`IsV¬ŸbËOnH—p
(off£t), &
tmpBC
, 
node
);

1383 
tmpBC
.
	`AddCode
(&
ùx
->
bc
);

1384 
ùx
->
bc
.
	`AddCode
(&
tmpBC
);

1386 
dt
.
	`MakeReã»nû
((!dt.
	`IsObjeù
(è|| dt.
	`IsObjeùHªdË
()));

1387 
asCTy³Info
 
ty³
;

1388 
ty³
.
	`S‘
(
dt
);

1389 
ty³
.
isTempÜ¬y
 = 
Œue
;

1390 
ty³
.
¡ackOff£t
 = ()
off£t
;

1392 
ùx
->
ty³
 =ype;

1394 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_PSF
, ()
off£t
);

1395 ifĞ
dt
.
	`IsObjeù
(è&& !dt.
	`IsObjeùHªdË
() )

1396 
ùx
->
bc
.
	`In¡r
(
asBC_RDSPŒ
);

1402 ifĞ
»fTy³
 =ğ
asTM_INOUTREF
 )

1404 
	`ProûssPrİ”tyG‘AcûssÜ
(
ùx
, 
node
);

1407 ifĞ
·¿mTy³
->
	`G‘Tok’Ty³
(è=ğ
‰Que¡iÚ
 )

1409 
asCBy‹Code
 
	`tmpBC
(
’gše
);

1412 
tmpBC
.
	`In¡rDWORD
(
asBC_TYPEID
, 
’gše
->
	`G‘Ty³IdFromD©aTy³
(
·¿m
));

1415 
tmpBC
.
	`AddCode
(&
ùx
->
bc
);

1416 
ùx
->
bc
.
	`AddCode
(&
tmpBC
);

1420 ifĞ!
ùx
->
ty³
.
isV¬ŸbË
 && ctx->ty³.
isCÚ¡ªt
 )

1422 
	`E¼Ü
(
TXT_NOT_VALID_REFERENCE
, 
node
);

1429 ifĞ!
’gše
->
•
.
®lowUn§ãReã»nûs
 &&

1430 !
ùx
->
ty³
.
isV¬ŸbË
 &&

1431 
ùx
->
ty³
.
d©aTy³
.
	`IsObjeù
() &&

1432 !
ùx
->
ty³
.
d©aTy³
.
	`IsObjeùHªdË
() &&

1433 ((
ùx
->
ty³
.
d©aTy³
.
	`G‘Behaviour
()->
add»f
 &&

1434 
ùx
->
ty³
.
d©aTy³
.
	`G‘Behaviour
()->
»Ëa£
) ||

1435 (
ùx
->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_NOCOUNT
)) )

1438 
asSEx´CÚ‹xt
 
	`tmp
(
’gše
);

1439 
asCD©aTy³
 
dt
 = 
ùx
->
ty³
.
d©aTy³
;

1440 
dt
.
	`MakeHªdË
(
Œue
);

1441 
dt
.
	`MakeReã»nû
(
çl£
);

1443 
off£t
 = 
	`AÎoÿ‹V¬ŸbËNÙIn
(
dt
, 
Œue
, 
çl£
, 
ùx
);

1446 ifĞ!
ùx
->
ty³
.
d©aTy³
.
	`IsObjeùHªdË
(è&& ctx->ty³.d©aTy³.
	`IsReã»nû
() )

1447 
ùx
->
bc
.
	`In¡r
(
asBC_RDSPŒ
);

1448 
ùx
->
bc
.
	`In¡rWORD
(
asBC_PSF
, (
asWORD
)
off£t
);

1449 
ùx
->
bc
.
	`In¡rPTR
(
asBC_REFCPY
, ctx->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
());

1450 
ùx
->
bc
.
	`In¡r
(
asBC_PİPŒ
);

1451 
ùx
->
bc
.
	`In¡rWORD
(
asBC_PSF
, (
asWORD
)
off£t
);

1453 
dt
.
	`MakeHªdË
(
çl£
);

1454 
dt
.
	`MakeReã»nû
(
Œue
);

1457 ifĞ
ùx
->
ty³
.
isTempÜ¬y
 )

1459 
	`R–—£TempÜ¬yV¬ŸbË
(
ùx
->
ty³
.
¡ackOff£t
, &ùx->
bc
);

1462 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
dt
, 
off£t
, 
Œue
);

1468 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsObjeù
(è&& ctx->ty³.d©aTy³.
	`IsReã»nû
(è&& !
·¿mTy³
->
	`IsObjeùHªdË
() )

1469 
	`D”eã»nû
(
ùx
, 
Œue
);

1470 ifĞ
ùx
->
ty³
.
isV¬ŸbË
 && !ùx->ty³.
d©aTy³
.
	`IsObjeù
() )

1471 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_PSF
, ctx->
ty³
.
¡ackOff£t
);

1472 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsPrim™ive
() )

1473 
ùx
->
bc
.
	`In¡r
(
asBC_PshRPŒ
);

1474 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsObjeùHªdË
(è&& !ùx->ty³.d©aTy³.
	`IsReã»nû
() )

1476 
asCD©aTy³
 
dt
 = 
ùx
->
ty³
.
d©aTy³
;

1477 
dt
.
	`MakeReã»nû
(
Œue
);

1478 
	`Im¶ic™CÚv”siÚ
(
ùx
, 
dt
, 
node
, 
asIC_IMPLICIT_CONV
, 
Œue
, 
çl£
);

1484 
	`ProûssPrİ”tyG‘AcûssÜ
(
ùx
, 
node
);

1486 ifĞ
dt
.
	`IsPrim™ive
() )

1488 
	`IsV¬ŸbËIn™Ÿlized
(&
ùx
->
ty³
, 
node
);

1490 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsReã»nû
(èè
	`CÚv”tToV¬ŸbË
(ctx);

1493 
	`Im¶ic™CÚv”siÚ
(
ùx
, 
dt
, 
node
, 
asIC_IMPLICIT_CONV
);

1495 ifĞ
ùx
->
ty³
.
isV¬ŸbË
 )

1497 
	`PushV¬ŸbËOnSck
(
ùx
, 
dt
.
	`IsReã»nû
());

1499 ifĞ
ùx
->
ty³
.
isCÚ¡ªt
 )

1501 
	`CÚv”tToV¬ŸbË
(
ùx
);

1502 
	`PushV¬ŸbËOnSck
(
ùx
, 
dt
.
	`IsReã»nû
());

1507 
	`IsV¬ŸbËIn™Ÿlized
(&
ùx
->
ty³
, 
node
);

1510 
	`Im¶ic™CÚv”siÚ
(
ùx
, 
dt
, 
node
, 
asIC_IMPLICIT_CONV
);

1513 ifĞ!
ùx
->
ty³
.
d©aTy³
.
	`IsEqu®Exû±Ref
(
dt
) )

1515 
asCSŒšg
 
¡r
;

1516 
¡r
.
	`FÜm©
(
TXT_CANT_IMPLICITLY_CONVERT_s_TO_s
, 
ùx
->
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
(), 
dt
.Format().AddressOf());

1517 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

1519 
ùx
->
ty³
.
	`S‘
(
dt
);

1522 ifĞ
dt
.
	`IsObjeùHªdË
() )

1523 
ùx
->
ty³
.
isEx¶ic™HªdË
 = 
Œue
;

1525 ifĞ
dt
.
	`IsObjeù
() )

1527 ifĞ!
dt
.
	`IsReã»nû
() )

1534 
	`P»·»TempÜ¬yObjeù
(
node
, 
ùx
, 
Œue
);

1539 
dt
.
	`MakeReã»nû
(
Œue
);

1545 
dt
.
	`MakeReã»nû
(
çl£
);

1552 ifĞ
·¿m
.
	`IsReã»nû
(è||…¬am.
	`IsObjeù
() )

1555 ifĞ
»fTy³
 != 3 )

1557 
	`asASSERT
Ğ
ùx
->
ty³
.
isV¬ŸbË
 || ctx->ty³.
isTempÜ¬y
 || 
isMakšgCİy
 );

1559 ifĞ
ùx
->
ty³
.
isV¬ŸbË
 || ctx->ty³.
isTempÜ¬y
 )

1561 
ùx
->
bc
.
	`In¡r
(
asBC_PİPŒ
);

1562 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_VAR
, ctx->
ty³
.
¡ackOff£t
);

1564 
	`ProûssDeã¼edP¬ams
(
ùx
);

1568 
	}
}

1570 
	gasCComp”
::
P»·»FunùiÚC®l
(
funcId
, 
asCBy‹Code
 *
bc
, 
asCA¼ay
<
asSEx´CÚ‹xt
 *> &
¬gs
)

1573 
asCSütFunùiÚ
 *
	gdesü
 = 
bud”
->
G‘FunùiÚDesütiÚ
(
funcId
);

1577 
boŞ
 
	gmakšgCİy
 = 
çl£
;

1578 ifĞ
	gdesü
->
	g·¿m‘”Ty³s
.
G‘L’gth
() == 1 &&

1579 
desü
->
·¿m‘”Ty³s
[0].
IsEqu®Exû±RefAndCÚ¡
(
¬gs
[0]->
ty³
.
d©aTy³
) &&

1580 ((
desü
->
Çme
 =ğ"İAssign" && desü->
objeùTy³
 && desü->objeùTy³ =ğ
¬gs
[0]->
ty³
.
d©aTy³
.
G‘ObjeùTy³
()) ||

1581 (
¬gs
[0]->
ty³
.
d©aTy³
.
G‘ObjeùTy³
(è&& 
desü
->
Çme
 ==‡rgs[0]->type.dataType.GetObjectType()->name)) )

1582 
makšgCİy
 = 
Œue
;

1585 
asSEx´CÚ‹xt
 
e
(
’gše
);

1586  
	gn
 = ()
¬gs
.
G‘L’gth
()-1;‚ >= 0;‚-- )

1590 
	gl
 = (
»£rvedV¬ŸbËs
.
G‘L’gth
());

1591  
	gm
 = 
n
-1; m >= 0; m-- )

1592 
	g¬gs
[
m
]->
	gbc
.
G‘V¬sU£d
(
»£rvedV¬ŸbËs
);

1594 
P»·»Argum’t2
(&
e
, 
¬gs
[
n
], &
desü
->
·¿m‘”Ty³s
[n], 
Œue
, desü->
šOutFÏgs
[n], 
makšgCİy
);

1595 
	g»£rvedV¬ŸbËs
.
S‘L’gth
(
l
);

1598 
	gbc
->
AddCode
(&
e
.
bc
);

1601 
	gasCComp”
::
MoveArgsToSck
(
funcId
, 
asCBy‹Code
 *
bc
, 
asCA¼ay
<
asSEx´CÚ‹xt
 *> &
¬gs
, 
boŞ
 
addOÃToOff£t
)

1603 
asCSütFunùiÚ
 *
	gdesü
 = 
bud”
->
G‘FunùiÚDesütiÚ
(
funcId
);

1605 
	goff£t
 = 0;

1606 ifĞ
	gaddOÃToOff£t
 )

1607 
	goff£t
 +ğ
AS_PTR_SIZE
;

1610 ifĞ
	gdesü
->
DÛsR‘uºOnSck
() )

1611 
	goff£t
 +ğ
AS_PTR_SIZE
;

1613 #ifdeà
AS_DEBUG


1616 
boŞ
 
	gmakšgCİy
 = 
çl£
;

1617 ifĞ
	gdesü
->
	g·¿m‘”Ty³s
.
G‘L’gth
() == 1 &&

1618 
desü
->
·¿m‘”Ty³s
[0].
IsEqu®Exû±RefAndCÚ¡
(
¬gs
[0]->
ty³
.
d©aTy³
) &&

1619 ((
desü
->
Çme
 =ğ"İAssign" && desü->
objeùTy³
 && desü->objeùTy³ =ğ
¬gs
[0]->
ty³
.
d©aTy³
.
G‘ObjeùTy³
()) ||

1620 (
¬gs
[0]->
ty³
.
d©aTy³
.
G‘ObjeùTy³
(è&& 
desü
->
Çme
 ==‡rgs[0]->type.dataType.GetObjectType()->name)) )

1621 
makšgCİy
 = 
Œue
;

1625  
asUINT
 
	gn
 = 0;‚ < 
	gdesü
->
	g·¿m‘”Ty³s
.
G‘L’gth
();‚++ )

1627 ifĞ
	gdesü
->
	g·¿m‘”Ty³s
[
n
].
IsReã»nû
() )

1629 ifĞ
	gdesü
->
	g·¿m‘”Ty³s
[
n
].
IsObjeù
(è&& !desü->·¿m‘”Ty³s[n].
IsObjeùHªdË
() )

1631 ifĞ
	gdesü
->
	gšOutFÏgs
[
n
] !ğ
asTM_INOUTREF
 )

1633 #ifdeà
AS_DEBUG


1634 
asASSERT
Ğ
¬gs
[
n
]->
ty³
.
isV¬ŸbË
 ||‡rgs[n]->ty³.
isTempÜ¬y
 || 
makšgCİy
 );

1637 ifĞ(
	g¬gs
[
n
]->
	gty³
.
	gisV¬ŸbË
 ||‡rgs[n]->ty³.
	gisTempÜ¬y
) )

1639 ifĞ!
IsV¬ŸbËOnH—p
(
¬gs
[
n
]->
ty³
.
¡ackOff£t
) )

1642 
	gbc
->
In¡rWORD
(
asBC_GETREF
, (
asWORD
)
off£t
);

1644 
	gbc
->
In¡rWORD
(
asBC_GETOBJREF
, (
asWORD
)
off£t
);

1647 ifĞ
	g¬gs
[
n
]->
	gty³
.
	gd©aTy³
.
IsObjeùHªdË
() )

1648 
	gbc
->
In¡rWORD
(
asBC_ChkNuÎS
, (
asWORD
)
off£t
);

1650 ifĞ
	gdesü
->
	gšOutFÏgs
[
n
] !ğ
asTM_INOUTREF
 )

1652 ifĞ
desü
->
·¿m‘”Ty³s
[
n
].
G‘Tok’Ty³
(è=ğ
‰Que¡iÚ
 &&

1653 
¬gs
[
n
]->
ty³
.
d©aTy³
.
IsObjeù
(è&& !¬gs[n]->ty³.d©aTy³.
IsObjeùHªdË
() )

1657 ifĞ!
IsV¬ŸbËOnH—p
(
¬gs
[
n
]->
ty³
.
¡ackOff£t
) )

1660 
bc
->
In¡rWORD
(
asBC_GETREF
, (
asWORD
)
off£t
);

1662 
	gbc
->
In¡rWORD
(
asBC_GETOBJREF
, (
asWORD
)
off£t
);

1666 
	gbc
->
In¡rWORD
(
asBC_GETREF
, (
asWORD
)
off£t
);

1670 ifĞ
	gdesü
->
	g·¿m‘”Ty³s
[
n
].
IsObjeù
() )

1674 
asASSERT
(
IsV¬ŸbËOnH—p
(
¬gs
[
n
]->
ty³
.
¡ackOff£t
));

1676 
	gbc
->
In¡rWORD
(
asBC_GETOBJ
, (
asWORD
)
off£t
);

1679 
D—Îoÿ‹V¬ŸbË
(
¬gs
[
n
]->
ty³
.
¡ackOff£t
);

1680 
	g¬gs
[
n
]->
	gty³
.
	gisTempÜ¬y
 = 
çl£
;

1683 
	goff£t
 +ğ
desü
->
·¿m‘”Ty³s
[
n
].
G‘SizeOnSckDWÜds
();

1687 
	gasCComp”
::
CompeArgum’tLi¡
(
asCSütNode
 *
node
, 
asCA¼ay
<
asSEx´CÚ‹xt
*> &
¬gs
)

1689 
asASSERT
(
node
->
nodeTy³
 =ğ
¢ArgLi¡
);

1692 
asCSütNode
 *
	g¬g
 = 
node
->
fœ¡Chd
;

1693 
	g¬gCouÁ
 = 0;

1694  
	g¬g
 )

1696 
	g¬gCouÁ
++;

1697 
	g¬g
 = 
¬g
->
Ãxt
;

1701 
	g¬gs
.
S‘L’gth
(
¬gCouÁ
);

1702 
	gn
;

1703  
	gn
 = 0;‚ < 
	g¬gCouÁ
;‚++ )

1704 
	g¬gs
[
n
] = 0;

1706 
	gn
 = 
¬gCouÁ
-1;

1709 
boŞ
 
	gªyE¼Üs
 = 
çl£
;

1710 
	g¬g
 = 
node
->
Ï¡Chd
;

1711  
	g¬g
 )

1713 
asSEx´CÚ‹xt
 
ex´
(
’gše
);

1714 
	gr
 = 
CompeAssignm’t
(
¬g
, &
ex´
);

1715 ifĞ
	gr
 < 0 ) 
	gªyE¼Üs
 = 
Œue
;

1717 
	g¬gs
[
n
] = 
asNEW
(
asSEx´CÚ‹xt
)(
’gše
);

1718 ifĞ
	g¬gs
[
n
] == 0 )

1723 
M”geEx´By‹codeAndTy³
(
¬gs
[
n
], &
ex´
);

1725 
	gn
--;

1726 
	g¬g
 = 
¬g
->
´ev
;

1729  
	gªyE¼Üs
 ? -1 : 0;

1732 
	gasCComp”
::
CompeDeçuÉArgs
(
asCSütNode
 *
node
, 
asCA¼ay
<
asSEx´CÚ‹xt
*> &
¬gs
, 
asCSütFunùiÚ
 *
func
)

1734 
boŞ
 
	gªyE¼Üs
 = 
çl£
;

1735 
	gasCA¼ay
<> 
	gv¬sU£d
;

1736 
	gex¶ic™Args
 = ()
¬gs
.
G‘L’gth
();

1738  
	gp
 = 0;… < 
	gex¶ic™Args
;…++ )

1739 
	g¬gs
[
p
]->
	gbc
.
G‘V¬sU£d
(
v¬sU£d
);

1742 
	g¬gs
.
S‘L’gth
(
func
->
·¿m‘”Ty³s
.
G‘L’gth
());

1743  
asUINT
 
	gc
 = 
ex¶ic™Args
; c < 
	g¬gs
.
G‘L’gth
(); c++ )

1744 
	g¬gs
[
c
] = 0;

1745  
	gn
 = ()
func
->
·¿m‘”Ty³s
.
G‘L’gth
(è- 1;‚ >ğ
ex¶ic™Args
;‚-- )

1747 ifĞ
	gfunc
->
	gdeçuÉArgs
[
n
] =ğ0 ) { 
ªyE¼Üs
 = 
Œue
; ; }

1750 
asCP¬£r
 
·r£r
(
bud”
);

1751 
asCSütCode
 
	gcode
;

1752 
	gcode
.
S‘Code
("deçuÉ‡rg", 
func
->
deçuÉArgs
[
n
]->
Add»ssOf
(), 
çl£
);

1753 
	gr
 = 
·r£r
.
P¬£Ex´essiÚ
(&
code
);

1754 ifĞ
	gr
 < 0 ) { 
	gªyE¼Üs
 = 
Œue
; ; }

1756 
asCSütNode
 *
	g¬g
 = 
·r£r
.
G‘SütNode
();

1759 
asCSütCode
 *
	gÜigSüt
 = 
süt
;

1760 
	gsüt
 = &
code
;

1764 
	gisCompšgDeçuÉArg
 = 
Œue
;

1765 
asSEx´CÚ‹xt
 
ex´
(
’gše
);

1766 
	gr
 = 
CompeEx´essiÚ
(
¬g
, &
ex´
);

1767 
	gisCompšgDeçuÉArg
 = 
çl£
;

1769 
	gsüt
 = 
ÜigSüt
;

1771 ifĞ
	gr
 < 0 )

1773 
asCSŒšg
 
	gmsg
;

1774 
	gmsg
.
FÜm©
(
TXT_FAILED_TO_COMPILE_DEF_ARG_d_IN_FUNC_s
, 
n
, 
func
->
G‘Deş¬©iÚ
());

1775 
E¼Ü
(
msg
.
Add»ssOf
(), 
node
);

1776 
	gªyE¼Üs
 = 
Œue
;

1780 
	g¬gs
[
n
] = 
asNEW
(
asSEx´CÚ‹xt
)(
’gše
);

1781 ifĞ
	g¬gs
[
n
] == 0 )

1787 
M”geEx´By‹codeAndTy³
(
¬gs
[
n
], &
ex´
);

1791 ifĞ
	g¬gs
[
n
]->
	gty³
.
	gisV¬ŸbË
 )

1793 
	goff£t
 = 
¬gs
[
n
]->
ty³
.
¡ackOff£t
;

1794 ifĞ
	gv¬sU£d
.
Exi¡s
(
off£t
) )

1797 
R–—£TempÜ¬yV¬ŸbË
(
¬gs
[
n
]->
ty³
, 0);

1799 
asCD©aTy³
 
	gdt
 = 
¬gs
[
n
]->
ty³
.
d©aTy³
;

1800 
	gdt
.
MakeReã»nû
(
çl£
);

1801 
	gÃwOff£t
 = 
AÎoÿ‹V¬ŸbË
(
dt
, 
Œue
, 
IsV¬ŸbËOnH—p
(
off£t
));

1803 
asASSERT
Ğ
IsV¬ŸbËOnH—p
(
off£t
è=ğIsV¬ŸbËOnH—p(
ÃwOff£t
) );

1805 
	g¬gs
[
n
]->
	gbc
.
ExchªgeV¬
(
off£t
, 
ÃwOff£t
);

1806 
	g¬gs
[
n
]->
	gty³
.
	g¡ackOff£t
 = ()
ÃwOff£t
;

1807 
	g¬gs
[
n
]->
	gty³
.
	gisTempÜ¬y
 = 
Œue
;

1808 
	g¬gs
[
n
]->
	gty³
.
	gisV¬ŸbË
 = 
Œue
;

1813  
	gªyE¼Üs
 ? -1 : 0;

1816 
asUINT
 
	gasCComp”
::
M©chFunùiÚs
(
asCA¼ay
<> &
funcs
,‡sCA¼ay<
asSEx´CÚ‹xt
*> &
¬gs
, 
asCSütNode
 *
node
, cÚ¡ *
Çme
, 
asCObjeùTy³
 *
objeùTy³
, 
boŞ
 
isCÚ¡M‘hod
, boŞ 
s’t
, boŞ 
®lowObjeùCÚ¡ruù
, cÚ¡ 
asCSŒšg
 &
scİe
)

1818 
	gasCA¼ay
<> 
	gÜigFuncs
 = 
funcs
;

1820 
asUINT
 
	gco¡
 = 0;

1822 
asUINT
 
	gn
;

1823 ifĞ
	gfuncs
.
G‘L’gth
() > 0 )

1826  
	gn
 = 0;‚ < 
	gfuncs
.
G‘L’gth
(); ++n )

1828 
asCSütFunùiÚ
 *
	gdesc
 = 
bud”
->
G‘FunùiÚDesütiÚ
(
funcs
[
n
]);

1830 ifĞ
	gdesc
->
	g·¿m‘”Ty³s
.
G‘L’gth
(è!ğ
¬gs
.GetLength() )

1832 
boŞ
 
noM©ch
 = 
Œue
;

1833 ifĞ
	g¬gs
.
G‘L’gth
(è< 
	gdesc
->
	g·¿m‘”Ty³s
.GetLength() )

1836 
asUINT
 
	gdeçuÉArgs
 = 0;

1837  
asUINT
 
	gd
 = 0; d < 
	gdesc
->
	gdeçuÉArgs
.
G‘L’gth
(); d++ )

1838 ifĞ
	gdesc
->
	gdeçuÉArgs
[
d
] )

1839 
	gdeçuÉArgs
++;

1841 ifĞ
	g¬gs
.
G‘L’gth
(è>ğ
desc
->
·¿m‘”Ty³s
.G‘L’gth(è- 
deçuÉArgs
 )

1842 
noM©ch
 = 
çl£
;

1845 ifĞ
	gnoM©ch
 )

1848 ifĞ
	gn
 =ğ
funcs
.
G‘L’gth
()-1 )

1849 
funcs
.
PİLa¡
();

1851 
	gfuncs
[
n
] = 
funcs
.
PİLa¡
();

1852 
	gn
--;

1858 
	gasCA¼ay
<> 
	gm©chšgFuncs
 = 
funcs
;

1860  
	gn
 = 0;‚ < 
	g¬gs
.
G‘L’gth
(); ++n )

1862 
	gasCA¼ay
<> 
	g‹mpFuncs
;

1863 
	gco¡
 +ğ
M©chArgum’t
(
funcs
, 
‹mpFuncs
, &
¬gs
[
n
]->
ty³
,‚, 
®lowObjeùCÚ¡ruù
);

1866  
asUINT
 
	gf
 = 0; f < 
	gm©chšgFuncs
.
G‘L’gth
(); f++ )

1868 
asUINT
 
	gc
;

1869  
	gc
 = 0; c < 
	g‹mpFuncs
.
G‘L’gth
(); c++ )

1871 ifĞ
	gm©chšgFuncs
[
f
] =ğ
‹mpFuncs
[
c
] )

1876 ifĞ
	gc
 =ğ
‹mpFuncs
.
G‘L’gth
() )

1879 ifĞ
f
 =ğ
m©chšgFuncs
.
G‘L’gth
()-1 )

1880 
m©chšgFuncs
.
PİLa¡
();

1882 
	gm©chšgFuncs
[
f
] = 
m©chšgFuncs
.
PİLa¡
();

1883 
	gf
--;

1888 
	gfuncs
 = 
m©chšgFuncs
;

1891 ifĞ!
	gisCÚ¡M‘hod
 )

1892 
F‹rCÚ¡
(
funcs
);

1894 ifĞ
	gfuncs
.
G‘L’gth
(è!ğ1 && !
s’t
 )

1897 
asCSŒšg
 
¡r
;

1898 ifĞ
	gscİe
 != "" )

1900 ifĞ
scİe
 == "::" )

1901 
¡r
 = 
scİe
;

1903 
	g¡r
 = 
scİe
 + "::";

1905 
	g¡r
 +ğ
Çme
;

1906 
	g¡r
 += "(";

1907 ifĞ
	g¬gs
.
G‘L’gth
() )

1908 
	g¡r
 +ğ
¬gs
[0]->
ty³
.
d©aTy³
.
FÜm©
();

1909  
	gn
 = 1;‚ < 
	g¬gs
.
G‘L’gth
();‚++ )

1910 
	g¡r
 +ğ", " + 
¬gs
[
n
]->
ty³
.
d©aTy³
.
FÜm©
();

1911 
	g¡r
 += ")";

1913 ifĞ
	gisCÚ¡M‘hod
 )

1914 
	g¡r
 += " const";

1916 ifĞ
	gobjeùTy³
 && 
	gscİe
 == "" )

1917 
¡r
 = 
objeùTy³
->
Çme
 + "::" + str;

1919 ifĞ
	gfuncs
.
G‘L’gth
() == 0 )

1921 
¡r
.
FÜm©
(
TXT_NO_MATCHING_SIGNATURES_TO_s
, sŒ.
Add»ssOf
());

1922 
E¼Ü
(
¡r
.
Add»ssOf
(), 
node
);

1925 ifĞ
	gÜigFuncs
.
G‘L’gth
() > 0 )

1927 
	gr
 = 0, 
	gc
 = 0;

1928 
asASSERT
Ğ
node
 );

1929 ifĞ
	gnode
 ) 
	gsüt
->
CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

1930 
	gbud”
->
Wr™eInfo
(
süt
->
Çme
.
Add»ssOf
(), 
TXT_CANDIDATES_ARE
, 
r
, 
c
, 
çl£
);

1931 
PrštM©chšgFuncs
(
ÜigFuncs
, 
node
);

1936 
	g¡r
.
FÜm©
(
TXT_MULTIPLE_MATCHING_SIGNATURES_TO_s
, 
¡r
.
Add»ssOf
());

1937 
E¼Ü
(
¡r
.
Add»ssOf
(), 
node
);

1939 
PrštM©chšgFuncs
(
funcs
, 
node
);

1943  
	gco¡
;

1946 
	gasCComp”
::
	$CompeDeş¬©iÚ
(
asCSütNode
 *
deş
, 
asCBy‹Code
 *
bc
)

1950 
asCD©aTy³
 
ty³
 = 
bud”
->
	`C»©eD©aTy³FromNode
(
deş
->
fœ¡Chd
, 
süt
, 
’gše
->
ÇmeS·ûs
[0]);

1953 
asCSütNode
 *
node
 = 
deş
->
fœ¡Chd
->
Ãxt
;

1954  
node
 )

1957 ifĞ!
ty³
.
	`CªBeIn¡ªcŸ‹d
() )

1959 
asCSŒšg
 
¡r
;

1961 
¡r
.
	`FÜm©
(
TXT_DATA_TYPE_CANT_BE_s
, 
ty³
.FÜm©().
	`Add»ssOf
());

1962 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

1965 
ty³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ
, 
çl£
);

1969 ifĞ
outFunc
->
	`IsSh¬ed
() )

1971 
asCObjeùTy³
 *
Ù
 = 
ty³
.
	`G‘ObjeùTy³
();

1972 ifĞ
Ù
 && !Ù->
	`IsSh¬ed
() )

1974 
asCSŒšg
 
msg
;

1975 
msg
.
	`FÜm©
(
TXT_SHARED_CANNOT_USE_NON_SHARED_TYPE_s
, 
Ù
->
Çme
.
	`Add»ssOf
());

1976 
	`E¼Ü
(
msg
.
	`Add»ssOf
(), 
deş
);

1981 
asCSŒšg
 
	`Çme
(&
süt
->
code
[
node
->
tok’Pos
],‚ode->
tok’L’gth
);

1984 ifĞ
’gše
->
	`G‘ObjeùTy³
(
Çme
.
	`Add»ssOf
(), 
outFunc
->
ÇmeS·û
) != 0 )

1986 
asCSŒšg
 
¡r
;

1987 
¡r
.
	`FÜm©
(
TXT_ILLEGAL_VARIABLE_NAME_s
, 
Çme
.
	`Add»ssOf
());

1988 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

1991 
off£t
 = 
	`AÎoÿ‹V¬ŸbË
(
ty³
, 
çl£
);

1992 ifĞ
v¬ŸbËs
->
	`Deş¬eV¬ŸbË
(
Çme
.
	`Add»ssOf
(), 
ty³
, 
off£t
, 
	`IsV¬ŸbËOnH—p
(offset)) < 0 )

1996 
asCSŒšg
 
¡r
;

1997 
¡r
.
	`FÜm©
(
TXT_s_ALREADY_DECLARED
, 
Çme
.
	`Add»ssOf
());

1998 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

2006 
bc
->
	`V¬Deş
(()
outFunc
->
v¬ŸbËs
.
	`G‘L’gth
());

2007 
outFunc
->
	`AddV¬ŸbË
(
Çme
, 
ty³
, 
off£t
);

2010 
asCSütNode
 *
v¬Node
 = 
node
;

2012 
node
 =‚ode->
Ãxt
;

2013 ifĞ
node
 &&‚ode->
nodeTy³
 =ğ
¢ArgLi¡
 )

2016 ifĞ
ty³
.
	`G‘ObjeùTy³
(è=ğ0 ||y³.
	`IsObjeùHªdË
() )

2018 
	`E¼Ü
(
TXT_MUST_BE_OBJECT
, 
node
);

2023 
asCA¼ay
<
asSEx´CÚ‹xt
 *> 
¬gs
;

2025 ifĞ
	`CompeArgum’tLi¡
(
node
, 
¬gs
) >= 0 )

2028 
asCA¼ay
<> 
funcs
;

2029 
asSTy³Behaviour
 *
beh
 = 
ty³
.
	`G‘Behaviour
();

2030 ifĞ
beh
 )

2032 ifĞ
ty³
.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_REF
 )

2033 
funcs
 = 
beh
->
çùÜ›s
;

2035 
funcs
 = 
beh
->
cÚ¡ruùÜs
;

2038 
asCSŒšg
 
¡r
 = 
ty³
.
	`FÜm©
();

2039 
	`M©chFunùiÚs
(
funcs
, 
¬gs
, 
node
, 
¡r
.
	`Add»ssOf
());

2041 ifĞ
funcs
.
	`G‘L’gth
() == 1 )

2043 
r
 = 
asSUCCESS
;

2046 
asCSütFunùiÚ
 *
func
 = (
funcs
[0] & 0xFFFF0000è=ğ0 ? 
’gše
->
sütFunùiÚs
[funcs[0]] : 0;

2047 ifĞ
func
 && 
¬gs
.
	`G‘L’gth
(è< (
asUINT
)func->
	`G‘P¬amCouÁ
() )

2048 
r
 = 
	`CompeDeçuÉArgs
(
node
, 
¬gs
, 
func
);

2050 ifĞ
r
 =ğ
asSUCCESS
 )

2052 
sV¬ŸbË
 *
v
 = 
v¬ŸbËs
->
	`G‘V¬ŸbË
(
Çme
.
	`Add»ssOf
());

2053 
asSEx´CÚ‹xt
 
	`ùx
(
’gše
);

2054 ifĞ
v
->
ty³
.
	`G‘ObjeùTy³
(è&& (v->ty³.G‘ObjeùTy³()->
æags
 & 
asOBJ_REF
) )

2056 
	`MakeFunùiÚC®l
(&
ùx
, 
funcs
[0], 0, 
¬gs
, 
node
, 
Œue
, 
v
->
¡ackOff£t
);

2059 
ùx
.
bc
.
	`In¡r
(
asBC_PİPŒ
);

2067 ifĞ
v
->
ÚH—p
 )

2068 
ùx
.
bc
.
	`In¡rSHORT
(
asBC_PSF
, ()
v
->
¡ackOff£t
);

2070 
	`P»·»FunùiÚC®l
(
funcs
[0], &
ùx
.
bc
, 
¬gs
);

2071 
	`MoveArgsToSck
(
funcs
[0], &
ùx
.
bc
, 
¬gs
, 
çl£
);

2075 ifĞ!
v
->
ÚH—p
 )

2076 
ùx
.
bc
.
	`In¡rSHORT
(
asBC_PSF
, ()
v
->
¡ackOff£t
);

2078 
	`P”fÜmFunùiÚC®l
(
funcs
[0], &
ùx
, 
v
->
ÚH—p
, &
¬gs
, 
ty³
.
	`G‘ObjeùTy³
());

2082 
ùx
.
bc
.
	`ObjInfo
(
v
->
¡ackOff£t
, 
asOBJ_INIT
);

2084 
bc
->
	`AddCode
(&
ùx
.bc);

2090  
asUINT
 
n
 = 0;‚ < 
¬gs
.
	`G‘L’gth
();‚++ )

2091 ifĞ
¬gs
[
n
] )

2093 
	`asDELETE
(
¬gs
[
n
],
asSEx´CÚ‹xt
);

2097 
node
 =‚ode->
Ãxt
;

2099 ifĞ
node
 &&‚ode->
nodeTy³
 =ğ
¢In™Li¡
 )

2101 
sV¬ŸbË
 *
v
 = 
v¬ŸbËs
->
	`G‘V¬ŸbË
(
Çme
.
	`Add»ssOf
());

2103 
asCTy³Info
 
ti
;

2104 
ti
.
	`S‘
(
ty³
);

2105 
ti
.
isV¬ŸbË
 = 
Œue
;

2106 
ti
.
isTempÜ¬y
 = 
çl£
;

2107 
ti
.
¡ackOff£t
 = ()
v
->stackOffset;

2108 
ti
.
isLV®ue
 = 
Œue
;

2110 
	`CompeIn™Li¡
(&
ti
, 
node
, 
bc
);

2112 
node
 =‚ode->
Ãxt
;

2114 ifĞ
node
 &&‚ode->
nodeTy³
 =ğ
¢Assignm’t
 )

2116 
asSEx´CÚ‹xt
 
	`ùx
(
’gše
);

2123 
	`C®lDeçuÉCÚ¡ruùÜ
(
ty³
, 
off£t
, 
	`IsV¬ŸbËOnH—p
(off£t), &
ùx
.
bc
, 
v¬Node
);

2126 
asSEx´CÚ‹xt
 
	`ex´
(
’gše
);

2127 
r
 = 
	`CompeAssignm’t
(
node
, &
ex´
);

2128 ifĞ
r
 >= 0 )

2130 ifĞ
ty³
.
	`IsPrim™ive
() )

2132 ifĞ
ty³
.
	`IsR—dOÆy
(è&& 
ex´
.ty³.
isCÚ¡ªt
 )

2134 
	`Im¶ic™CÚv”siÚ
(&
ex´
, 
ty³
, 
node
, 
asIC_IMPLICIT_CONV
);

2136 
sV¬ŸbË
 *
v
 = 
v¬ŸbËs
->
	`G‘V¬ŸbË
(
Çme
.
	`Add»ssOf
());

2137 
v
->
isPu»CÚ¡ªt
 = 
Œue
;

2138 
v
->
cÚ¡ªtV®ue
 = 
ex´
.
ty³
.
qwÜdV®ue
;

2141 
asSEx´CÚ‹xt
 
	`lùx
(
’gše
);

2142 
lùx
.
ty³
.
	`S‘V¬ŸbË
Ñy³, 
off£t
, 
çl£
);

2143 
lùx
.
ty³
.
d©aTy³
.
	`MakeR—dOÆy
(
çl£
);

2144 
lùx
.
ty³
.
isLV®ue
 = 
Œue
;

2146 
	`DoAssignm’t
(&
ùx
, &
lùx
, &
ex´
, 
node
,‚ode, 
‰Assignm’t
,‚ode);

2147 
	`ProûssDeã¼edP¬ams
(&
ùx
);

2153 
sV¬ŸbË
 *
v
 = 
v¬ŸbËs
->
	`G‘V¬ŸbË
(
Çme
.
	`Add»ssOf
());

2155 
asSEx´CÚ‹xt
 
	`Ëx´
(
’gše
);

2156 
Ëx´
.
ty³
.
	`S‘
(type);

2157 
Ëx´
.
ty³
.
d©aTy³
.
	`MakeReã»nû
(
v
->
ÚH—p
);

2159 
Ëx´
.
ty³
.
d©aTy³
.
	`MakeR—dOÆy
(
çl£
);

2161 ifĞ
ty³
.
	`IsObjeùHªdË
() )

2162 
Ëx´
.
ty³
.
isEx¶ic™HªdË
 = 
Œue
;

2164 
Ëx´
.
bc
.
	`In¡rSHORT
(
asBC_PSF
, ()
v
->
¡ackOff£t
);

2165 
Ëx´
.
ty³
.
¡ackOff£t
 = ()
v
->stackOffset;

2166 
Ëx´
.
ty³
.
isV¬ŸbË
 = 
Œue
;

2167 
Ëx´
.
ty³
.
isLV®ue
 = 
Œue
;

2175 
boŞ
 
assigÃd
 = 
çl£
;

2177 ifĞ
Ëx´
.
ty³
.
d©aTy³
.
	`IsObjeù
(è&& (!Ëx´.ty³.
isEx¶ic™HªdË
 || (Ëx´.ty³.d©aTy³.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_ASHANDLE
)) )

2179 
assigÃd
 = 
	`CompeOv”lßdedDu®O³¿tÜ
(
node
, &
Ëx´
, &
ex´
, &
ùx
);

2180 ifĞ
assigÃd
 )

2183 
ùx
.
bc
.
	`In¡r
(
asBC_PİPŒ
);

2186 
	`ProûssDeã¼edP¬ams
(&
ùx
);

2189 
	`R–—£TempÜ¬yV¬ŸbË
(
ùx
.
ty³
, &ùx.
bc
);

2193 ifĞ!
assigÃd
 )

2195 
	`P»·»FÜAssignm’t
(&
Ëx´
.
ty³
.
d©aTy³
, &
ex´
, 
node
, 
çl£
);

2200 ifĞ
v
->
ty³
.
	`IsR—dOÆy
(è&& 
ex´
.ty³.
isCÚ¡ªt
 )

2202 
v
->
isPu»CÚ¡ªt
 = 
Œue
;

2203 
v
->
cÚ¡ªtV®ue
 = 
ex´
.
ty³
.
qwÜdV®ue
;

2207 
	`M”geEx´By‹code
(&
ùx
, &
ex´
);

2210 
ùx
.
bc
.
	`AddCode
(&
Ëx´
.bc);

2211 
Ëx´
.
ty³
.
¡ackOff£t
 = ()
v
->stackOffset;

2213 
	`P”fÜmAssignm’t
(&
Ëx´
.
ty³
, &
ex´
.ty³, &
ùx
.
bc
, 
node
->
´ev
);

2216 
	`R–—£TempÜ¬yV¬ŸbË
(
ex´
.
ty³
, &
ùx
.
bc
);

2218 
ùx
.
bc
.
	`In¡r
(
asBC_PİPŒ
);

2220 
	`ProûssDeã¼edP¬ams
(&
ùx
);

2225 
node
 =‚ode->
Ãxt
;

2227 
bc
->
	`AddCode
(&
ùx
.bc);

2232 
	`C®lDeçuÉCÚ¡ruùÜ
(
ty³
, 
off£t
, 
	`IsV¬ŸbËOnH—p
(off£t), 
bc
, 
v¬Node
);

2235 
	}
}

2237 
	gasCComp”
::
	$CompeIn™Li¡
(
asCTy³Info
 *
v¬
, 
asCSütNode
 *
node
, 
asCBy‹Code
 *
bc
)

2240 ifĞ
v¬
->
d©aTy³
.
	`G‘ObjeùTy³
() == 0 ||

2241 
v¬
->
d©aTy³
.
	`G‘Behaviour
()->
li¡FaùÜy
 == 0 ||

2242 
v¬
->
d©aTy³
.
	`IsObjeùHªdË
() )

2244 
asCSŒšg
 
¡r
;

2245 
¡r
.
	`FÜm©
(
TXT_INIT_LIST_CANNOT_BE_USED_WITH_s
, 
v¬
->
d©aTy³
.FÜm©().
	`Add»ssOf
());

2246 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

2251 
couÁEËm’ts
 = 0;

2252 
asCSütNode
 *
–
 = 
node
->
fœ¡Chd
;

2253  
–
 )

2255 
couÁEËm’ts
++;

2256 
–
 =ƒl->
Ãxt
;

2265 
funcId
 = 
v¬
->
d©aTy³
.
	`G‘Behaviour
()->
li¡FaùÜy
;

2267 
asCA¼ay
<
asSEx´CÚ‹xt
 *> 
¬gs
;

2268 
asSEx´CÚ‹xt
 
	`¬g1
(
’gše
);

2269 
¬g1
.
bc
.
	`In¡rDWORD
(
asBC_PshC4
, 
couÁEËm’ts
);

2270 
¬g1
.
ty³
.
	`S‘
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ
, 
çl£
));

2271 
¬gs
.
	`PushLa¡
(&
¬g1
);

2273 
asSEx´CÚ‹xt
 
	`ùx
(
’gše
);

2275 
	`P»·»FunùiÚC®l
(
funcId
, &
ùx
.
bc
, 
¬gs
);

2276 
	`MoveArgsToSck
(
funcId
, &
ùx
.
bc
, 
¬gs
, 
çl£
);

2278 ifĞ
v¬
->
isV¬ŸbË
 )

2281 
	`P”fÜmFunùiÚC®l
(
funcId
, &
ùx
, 
çl£
, &
¬gs
, 0, 
Œue
, 
v¬
->
¡ackOff£t
);

2282 
ùx
.
bc
.
	`In¡r
(
asBC_PİPŒ
);

2286 
	`P”fÜmFunùiÚC®l
(
funcId
, &
ùx
, 
çl£
, &
¬gs
);

2289 
ùx
.
bc
.
	`In¡r
(
asBC_RDSPŒ
);

2290 
ùx
.
bc
.
	`In¡rPTR
(
asBC_PGA
, 
’gše
->
glob®Prİ”t›s
[
v¬
->
¡ackOff£t
]->
	`G‘Add»ssOfV®ue
());

2291 
ùx
.
bc
.
	`In¡rPTR
(
asBC_REFCPY
, 
v¬
->
d©aTy³
.
	`G‘ObjeùTy³
());

2292 
ùx
.
bc
.
	`In¡r
(
asBC_PİPŒ
);

2293 
	`R–—£TempÜ¬yV¬ŸbË
(
ùx
.
ty³
.
¡ackOff£t
, &ùx.
bc
);

2296 
bc
->
	`AddCode
(&
ùx
.bc);

2305 
asCD©aTy³
 
»tTy³
;

2306 
»tTy³
 = 
v¬
->
d©aTy³
.
	`G‘SubTy³
();

2307 
»tTy³
.
	`MakeReã»nû
(
Œue
);

2308 
»tTy³
.
	`MakeR—dOÆy
(
çl£
);

2309 
funcId
 = 0;

2310  
asUINT
 
n
 = 0;‚ < 
v¬
->
d©aTy³
.
	`G‘ObjeùTy³
()->
m‘hods
.
	`G‘L’gth
();‚++ )

2312 
asCSütFunùiÚ
 *
desc
 = 
bud”
->
	`G‘FunùiÚDesütiÚ
(
v¬
->
d©aTy³
.
	`G‘ObjeùTy³
()->
m‘hods
[
n
]);

2313 ifĞ!
desc
->
isR—dOÆy
 &&

2314 
desc
->
·¿m‘”Ty³s
.
	`G‘L’gth
() == 1 &&

2315 (
desc
->
·¿m‘”Ty³s
[0] =ğ
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ
, 
çl£
) ||

2316 
desc
->
·¿m‘”Ty³s
[0] =ğ
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ
, 
çl£
)) &&

2317 
desc
->
»tuºTy³
 =ğ
»tTy³
 &&

2318 
desc
->
Çme
 == "opIndex" )

2320 
funcId
 = 
v¬
->
d©aTy³
.
	`G‘ObjeùTy³
()->
m‘hods
[
n
];

2325 ifĞ
funcId
 == 0 )

2327 
	`E¼Ü
(
TXT_NO_APPROPRIATE_INDEX_OPERATOR
, 
node
);

2331 
asUINT
 
šdex
 = 0;

2332 
–
 = 
node
->
fœ¡Chd
;

2333  
–
 )

2335 ifĞ
–
->
nodeTy³
 =ğ
¢Assignm’t
 ||ƒl->nodeTy³ =ğ
¢In™Li¡
 )

2337 
asSEx´CÚ‹xt
 
	`lùx
(
’gše
);

2338 
asSEx´CÚ‹xt
 
	`rùx
(
’gše
);

2340 ifĞ
–
->
nodeTy³
 =ğ
¢Assignm’t
 )

2343 
	`CompeAssignm’t
(
–
, &
rùx
);

2345 ifĞ
–
->
nodeTy³
 =ğ
¢In™Li¡
 )

2347 
off£t
 = 
	`AÎoÿ‹V¬ŸbË
(
v¬
->
d©aTy³
.
	`G‘SubTy³
(), 
Œue
);

2349 
rùx
.
ty³
.
	`S‘
(
v¬
->
d©aTy³
.
	`G‘SubTy³
());

2350 
rùx
.
ty³
.
isV¬ŸbË
 = 
Œue
;

2351 
rùx
.
ty³
.
isTempÜ¬y
 = 
Œue
;

2352 
rùx
.
ty³
.
¡ackOff£t
 = ()
off£t
;

2354 
	`CompeIn™Li¡
(&
rùx
.
ty³
, 
–
, &rùx.
bc
);

2357 
rùx
.
bc
.
	`In¡rSHORT
(
asBC_PSF
,„ùx.
ty³
.
¡ackOff£t
);

2360 
rùx
.
ty³
.
d©aTy³
.
	`MakeReã»nû
(
Œue
);

2364 
lùx
.
bc
.
	`In¡rDWORD
(
asBC_PshC4
, 
šdex
);

2365 ifĞ
v¬
->
isV¬ŸbË
 )

2366 
lùx
.
bc
.
	`In¡rSHORT
(
asBC_PSF
, 
v¬
->
¡ackOff£t
);

2368 
lùx
.
bc
.
	`In¡rPTR
(
asBC_PGA
, 
’gše
->
glob®Prİ”t›s
[
v¬
->
¡ackOff£t
]->
	`G‘Add»ssOfV®ue
());

2369 
lùx
.
bc
.
	`In¡r
(
asBC_RDSPŒ
);

2370 
lùx
.
bc
.
	`C®l
(
asBC_CALLSYS
, 
funcId
, 1+
AS_PTR_SIZE
);

2372 ifĞ!
v¬
->
d©aTy³
.
	`G‘SubTy³
().
	`IsPrim™ive
() )

2373 
lùx
.
bc
.
	`In¡r
(
asBC_PshRPŒ
);

2375 
lùx
.
ty³
.
	`S‘
(
v¬
->
d©aTy³
.
	`G‘SubTy³
());

2377 ifĞ!
lùx
.
ty³
.
d©aTy³
.
	`IsObjeù
(è||†ùx.ty³.d©aTy³.
	`IsObjeùHªdË
() )

2378 
lùx
.
ty³
.
d©aTy³
.
	`MakeReã»nû
(
Œue
);

2381 ifĞ
lùx
.
ty³
.
d©aTy³
.
	`IsObjeùHªdË
() )

2382 
lùx
.
ty³
.
isEx¶ic™HªdË
 = 
Œue
;

2384 
lùx
.
ty³
.
isLV®ue
 = 
Œue
;

2386 
asSEx´CÚ‹xt
 
	`ùx
(
’gše
);

2387 
	`DoAssignm’t
(&
ùx
, &
lùx
, &
rùx
, 
–
,ƒl, 
‰Assignm’t
,ƒl);

2389 ifĞ!
lùx
.
ty³
.
d©aTy³
.
	`IsPrim™ive
() )

2390 
ùx
.
bc
.
	`In¡r
(
asBC_PİPŒ
);

2393 
	`R–—£TempÜ¬yV¬ŸbË
(
ùx
.
ty³
, &ùx.
bc
);

2395 
	`ProûssDeã¼edP¬ams
(&
ùx
);

2397 
bc
->
	`AddCode
(&
ùx
.bc);

2400 
–
 =ƒl->
Ãxt
;

2401 
šdex
++;

2403 
	}
}

2405 
	gasCComp”
::
	$CompeS‹m’t
(
asCSütNode
 *
¡©em’t
, 
boŞ
 *
hasR‘uº
, 
asCBy‹Code
 *
bc
)

2407 *
hasR‘uº
 = 
çl£
;

2409 ifĞ
¡©em’t
->
nodeTy³
 =ğ
¢S‹m’tBlock
 )

2410 
	`CompeS‹m’tBlock
(
¡©em’t
, 
Œue
, 
hasR‘uº
, 
bc
);

2411 ifĞ
¡©em’t
->
nodeTy³
 =ğ
¢If
 )

2412 
	`CompeIfS‹m’t
(
¡©em’t
, 
hasR‘uº
, 
bc
);

2413 ifĞ
¡©em’t
->
nodeTy³
 =ğ
¢FÜ
 )

2414 
	`CompeFÜS‹m’t
(
¡©em’t
, 
bc
);

2415 ifĞ
¡©em’t
->
nodeTy³
 =ğ
¢Whe
 )

2416 
	`CompeWheS‹m’t
(
¡©em’t
, 
bc
);

2417 ifĞ
¡©em’t
->
nodeTy³
 =ğ
¢DoWhe
 )

2418 
	`CompeDoWheS‹m’t
(
¡©em’t
, 
bc
);

2419 ifĞ
¡©em’t
->
nodeTy³
 =ğ
¢Ex´essiÚS‹m’t
 )

2420 
	`CompeEx´essiÚS‹m’t
(
¡©em’t
, 
bc
);

2421 ifĞ
¡©em’t
->
nodeTy³
 =ğ
¢B»ak
 )

2422 
	`CompeB»akS‹m’t
(
¡©em’t
, 
bc
);

2423 ifĞ
¡©em’t
->
nodeTy³
 =ğ
¢CÚtšue
 )

2424 
	`CompeCÚtšueS‹m’t
(
¡©em’t
, 
bc
);

2425 ifĞ
¡©em’t
->
nodeTy³
 =ğ
¢Sw™ch
 )

2426 
	`CompeSw™chS‹m’t
(
¡©em’t
, 
hasR‘uº
, 
bc
);

2427 ifĞ
¡©em’t
->
nodeTy³
 =ğ
¢R‘uº
 )

2429 
	`CompeR‘uºS‹m’t
(
¡©em’t
, 
bc
);

2430 *
hasR‘uº
 = 
Œue
;

2432 
	}
}

2434 
	gasCComp”
::
	$CompeSw™chS‹m’t
(
asCSütNode
 *
¢ode
, 
boŞ
 *, 
asCBy‹Code
 *
bc
)

2439 
b»akLab–
 = 
ÃxtLab–
++;

2440 
b»akLab–s
.
	`PushLa¡
(
b»akLab–
);

2444 
	`AddV¬ŸbËScİe
(
Œue
, 
çl£
);

2451 
asSEx´CÚ‹xt
 
	`ex´
(
’gše
);

2452 
	`CompeAssignm’t
(
¢ode
->
fœ¡Chd
, &
ex´
);

2455 ifĞ!
ex´
.
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
(è&& !ex´.ty³.d©aTy³.
	`IsUnsigÃdTy³
(è&& !ex´.ty³.d©aTy³.
	`IsEnumTy³
() )

2457 
	`E¼Ü
(
TXT_SWITCH_MUST_BE_INTEGRAL
, 
¢ode
->
fœ¡Chd
);

2461 
	`ProûssPrİ”tyG‘AcûssÜ
(&
ex´
, 
¢ode
);

2465 
asCD©aTy³
 
to
;

2466 ifĞ
ex´
.
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
(è||ƒx´.ty³.d©aTy³.
	`IsEnumTy³
() )

2467 
to
.
	`S‘Tok’Ty³
(
‰IÁ
);

2468 ifĞ
ex´
.
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
() )

2469 
to
.
	`S‘Tok’Ty³
(
‰UIÁ
);

2472 ifĞ
ex´
.
ty³
.
d©aTy³
.
	`IsReã»nû
() )

2473 
	`CÚv”tToV¬ŸbË
(&
ex´
);

2475 
	`Im¶ic™CÚv”siÚ
(&
ex´
, 
to
, 
¢ode
->
fœ¡Chd
, 
asIC_IMPLICIT_CONV
, 
Œue
);

2477 
	`CÚv”tToV¬ŸbË
(&
ex´
);

2478 
off£t
 = 
ex´
.
ty³
.
¡ackOff£t
;

2480 
	`ProûssDeã¼edP¬ams
(&
ex´
);

2488 
fœ¡Ca£Lab–
 = 
ÃxtLab–
;

2489 
deçuÉLab–
 = 0;

2491 
asCA¼ay
<> 
ÿ£V®ues
;

2492 
asCA¼ay
<> 
ÿ£Lab–s
;

2495 
asCSütNode
 *
úode
 = 
¢ode
->
fœ¡Chd
->
Ãxt
;

2496  
úode
 )

2499 ifĞ
úode
->
fœ¡Chd
 && cnode->fœ¡Chd->
nodeTy³
 =ğ
¢Ex´essiÚ
 )

2502 
asSEx´CÚ‹xt
 
	`c
(
’gše
);

2503 
	`CompeEx´essiÚ
(
úode
->
fœ¡Chd
, &
c
);

2506 ifĞ!
c
.
ty³
.
isCÚ¡ªt
 )

2507 
	`E¼Ü
(
TXT_SWITCH_CASE_MUST_BE_CONSTANT
, 
úode
->
fœ¡Chd
);

2510 ifĞ!
c
.
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
(è&& !c.ty³.d©aTy³.
	`IsUnsigÃdTy³
(è&& !c.ty³.d©aTy³.
	`IsEnumTy³
() )

2511 
	`E¼Ü
(
TXT_SWITCH_MUST_BE_INTEGRAL
, 
úode
->
fœ¡Chd
);

2513 
	`Im¶ic™CÚv”siÚ
(&
c
, 
to
, 
úode
->
fœ¡Chd
, 
asIC_IMPLICIT_CONV
, 
Œue
);

2516 ifĞ
ÿ£V®ues
.
	`IndexOf
(
c
.
ty³
.
štV®ue
) >= 0 )

2518 
	`E¼Ü
(
TXT_DUPLICATE_SWITCH_CASE
, 
úode
->
fœ¡Chd
);

2524 
ÿ£V®ues
.
	`PushLa¡
(
c
.
ty³
.
štV®ue
);

2527 
ÿ£Lab–s
.
	`PushLa¡
(
ÃxtLab–
++);

2532 ifĞ
úode
->
Ãxt
 )

2534 
	`E¼Ü
(
TXT_DEFAULT_MUST_BE_LAST
, 
úode
);

2539 
deçuÉLab–
 = 
ÃxtLab–
++;

2542 
úode
 = cnode->
Ãxt
;

2546 ià(
ÿ£V®ues
.
	`G‘L’gth
() == 0)

2548 
	`E¼Ü
(
TXT_EMPTY_SWITCH
, 
¢ode
);

2552 ifĞ
deçuÉLab–
 == 0 )

2553 
deçuÉLab–
 = 
b»akLab–
;

2562  
asUINT
 
fwd
 = 1; fwd < 
ÿ£V®ues
.
	`G‘L’gth
(); fwd++ )

2564  
bck
 = 
fwd
 - 1; bck >= 0; bck-- )

2566 
bckp
 = 
bck
 + 1;

2567 ifĞ
ÿ£V®ues
[
bck
] > ca£V®ues[
bckp
] )

2570 
sw­
 = 
ÿ£V®ues
[
bckp
];

2571 
ÿ£V®ues
[
bckp
] = ca£V®ues[
bck
];

2572 
ÿ£V®ues
[
bck
] = 
sw­
;

2574 
sw­
 = 
ÿ£Lab–s
[
bckp
];

2575 
ÿ£Lab–s
[
bckp
] = ca£Lab–s[
bck
];

2576 
ÿ£Lab–s
[
bck
] = 
sw­
;

2584 
asCA¼ay
<> 
¿nges
;

2585 
¿nges
.
	`PushLa¡
(0);

2586 
asUINT
 
n
;

2587  
n
 = 1;‚ < 
ÿ£V®ues
.
	`G‘L’gth
(); ++n )

2591 ifĞ
ÿ£V®ues
[
n
] > caseValues[n-1] + 5 )

2592 
¿nges
.
	`PushLa¡
(
n
);

2596 
tmpOff£t
 = 
	`AÎoÿ‹V¬ŸbË
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ
, 
çl£
), 
Œue
);

2597 
ex´
.
bc
.
	`In¡rSHORT_DW
(
asBC_S‘V4
, ()
tmpOff£t
, 
ÿ£V®ues
[ÿ£V®ues.
	`G‘L’gth
()-1]);

2598 
ex´
.
bc
.
	`In¡rW_W
(
asBC_CMPi
, 
off£t
, 
tmpOff£t
);

2599 
ex´
.
bc
.
	`In¡rDWORD
(
asBC_JP
, 
deçuÉLab–
);

2600 
	`R–—£TempÜ¬yV¬ŸbË
(
tmpOff£t
, &
ex´
.
bc
);

2606 
¿nge
;

2607  
¿nge
 = 0;„ªg< ()
¿nges
.
	`G‘L’gth
();„ange++ )

2610 
maxRªge
 = 
ÿ£V®ues
[
¿nges
[
¿nge
]];

2611 
šdex
 = 
¿nges
[
¿nge
];

2612  ; (
šdex
 < ()
ÿ£V®ues
.
	`G‘L’gth
()è&& (ÿ£V®ues[šdex] <ğ
maxRªge
 + 5); index++ )

2613 
maxRªge
 = 
ÿ£V®ues
[
šdex
];

2616 ifĞ
šdex
 - 
¿nges
[
¿nge
] > 2 )

2619 
tmpOff£t
 = 
	`AÎoÿ‹V¬ŸbË
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ
, 
çl£
), 
Œue
);

2620 
ex´
.
bc
.
	`In¡rSHORT_DW
(
asBC_S‘V4
, ()
tmpOff£t
, 
ÿ£V®ues
[
¿nges
[
¿nge
]]);

2621 
ex´
.
bc
.
	`In¡rW_W
(
asBC_CMPi
, 
off£t
, 
tmpOff£t
);

2622 
ex´
.
bc
.
	`In¡rDWORD
(
asBC_JS
, 
deçuÉLab–
);

2623 
	`R–—£TempÜ¬yV¬ŸbË
(
tmpOff£t
, &
ex´
.
bc
);

2625 
ÃxtRªgeLab–
 = 
ÃxtLab–
++;

2627 ifĞ
¿nge
 < ()
¿nges
.
	`G‘L’gth
() - 1 )

2630 
tmpOff£t
 = 
	`AÎoÿ‹V¬ŸbË
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ
, 
çl£
), 
Œue
);

2631 
ex´
.
bc
.
	`In¡rSHORT_DW
(
asBC_S‘V4
, ()
tmpOff£t
, 
maxRªge
);

2632 
ex´
.
bc
.
	`In¡rW_W
(
asBC_CMPi
, 
off£t
, 
tmpOff£t
);

2633 
ex´
.
bc
.
	`In¡rDWORD
(
asBC_JP
, 
ÃxtRªgeLab–
);

2634 
	`R–—£TempÜ¬yV¬ŸbË
(
tmpOff£t
, &
ex´
.
bc
);

2638 
tmpOff£t
 = 
	`AÎoÿ‹V¬ŸbË
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ
, 
çl£
), 
Œue
);

2639 
ex´
.
bc
.
	`In¡rSHORT_DW
(
asBC_S‘V4
, ()
tmpOff£t
, 
ÿ£V®ues
[
¿nges
[
¿nge
]]);

2640 
ex´
.
bc
.
	`In¡rW_W_W
(
asBC_SUBi
, 
tmpOff£t
, 
off£t
,mpOffset);

2641 
	`R–—£TempÜ¬yV¬ŸbË
(
tmpOff£t
, &
ex´
.
bc
);

2642 
ex´
.
bc
.
	`JmpP
(
tmpOff£t
, 
maxRªge
 - 
ÿ£V®ues
[
¿nges
[
¿nge
]]);

2645 
šdex
 = 
¿nges
[
¿nge
];

2646  
n
 = 
ÿ£V®ues
[
šdex
];‚ <ğ
maxRªge
;‚++ )

2648 ifĞ
ÿ£V®ues
[
šdex
] =ğ
n
 )

2649 
ex´
.
bc
.
	`In¡rINT
(
asBC_JMP
, 
ÿ£Lab–s
[
šdex
++]);

2651 
ex´
.
bc
.
	`In¡rINT
(
asBC_JMP
, 
deçuÉLab–
);

2654 
ex´
.
bc
.
	`Lab–
(()
ÃxtRªgeLab–
);

2659 
n
;

2660  
n
 = 
¿nges
[
¿nge
];‚ < 
šdex
; ++n )

2662 
tmpOff£t
 = 
	`AÎoÿ‹V¬ŸbË
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ
, 
çl£
), 
Œue
);

2663 
ex´
.
bc
.
	`In¡rSHORT_DW
(
asBC_S‘V4
, ()
tmpOff£t
, 
ÿ£V®ues
[
n
]);

2664 
ex´
.
bc
.
	`In¡rW_W
(
asBC_CMPi
, 
off£t
, 
tmpOff£t
);

2665 
ex´
.
bc
.
	`In¡rDWORD
(
asBC_JZ
, 
ÿ£Lab–s
[
n
]);

2666 
	`R–—£TempÜ¬yV¬ŸbË
(
tmpOff£t
, &
ex´
.
bc
);

2672 
ex´
.
bc
.
	`In¡rINT
(
asBC_JMP
, 
deçuÉLab–
);

2675 
	`R–—£TempÜ¬yV¬ŸbË
(
ex´
.
ty³
, &ex´.
bc
);

2682 
úode
 = 
¢ode
->
fœ¡Chd
->
Ãxt
;

2683  
úode
 )

2686 ifĞ
úode
->
fœ¡Chd
 && cnode->fœ¡Chd->
nodeTy³
 =ğ
¢Ex´essiÚ
 )

2688 
ex´
.
bc
.
	`Lab–
(()
fœ¡Ca£Lab–
++);

2690 
	`CompeCa£
(
úode
->
fœ¡Chd
->
Ãxt
, &
ex´
.
bc
);

2694 
ex´
.
bc
.
	`Lab–
(()
deçuÉLab–
);

2697 ifĞ
úode
->
Ãxt
 )

2703 
	`CompeCa£
(
úode
->
fœ¡Chd
, &
ex´
.
bc
);

2706 
úode
 = cnode->
Ãxt
;

2711 
bc
->
	`AddCode
(&
ex´
.bc);

2714 
bc
->
	`Lab–
(()
b»akLab–
);

2716 
b»akLab–s
.
	`PİLa¡
();

2717 
	`RemoveV¬ŸbËScİe
();

2718 
	}
}

2720 
	gasCComp”
::
	$CompeCa£
(
asCSütNode
 *
node
, 
asCBy‹Code
 *
bc
)

2722 
boŞ
 
isFšished
 = 
çl£
;

2723 
boŞ
 
hasR‘uº
 = 
çl£
;

2724  
node
 )

2726 ifĞ
hasR‘uº
 || 
isFšished
 )

2728 
	`W¬nšg
(
TXT_UNREACHABLE_CODE
, 
node
);

2732 ifĞ
node
->
nodeTy³
 =ğ
¢B»ak
 ||‚ode->nodeTy³ =ğ
¢CÚtšue
 )

2733 
isFšished
 = 
Œue
;

2735 
asCBy‹Code
 
	`¡©em’t
(
’gše
);

2736 ifĞ
node
->
nodeTy³
 =ğ
¢Deş¬©iÚ
 )

2738 
	`E¼Ü
(
TXT_DECL_IN_SWITCH
, 
node
);

2741 
	`CompeDeş¬©iÚ
(
node
, &
¡©em’t
);

2744 
	`CompeS‹m’t
(
node
, &
hasR‘uº
, &
¡©em’t
);

2746 
	`LšeIn¡r
(
bc
, 
node
->
tok’Pos
);

2747 
bc
->
	`AddCode
(&
¡©em’t
);

2749 ifĞ!
hasCompeE¼Üs
 )

2750 
	`asASSERT
Ğ
‹mpV¬ŸbËs
.
	`G‘L’gth
() == 0 );

2752 
node
 =‚ode->
Ãxt
;

2754 
	}
}

2756 
	gasCComp”
::
	$CompeIfS‹m’t
(
asCSütNode
 *
šode
, 
boŞ
 *
hasR‘uº
, 
asCBy‹Code
 *
bc
)

2760 
aá”Lab–
 = 
ÃxtLab–
++;

2763 
asSEx´CÚ‹xt
 
	`ex´
(
’gše
);

2764 
	`CompeAssignm’t
(
šode
->
fœ¡Chd
, &
ex´
);

2765 ifĞ!
ex´
.
ty³
.
d©aTy³
.
	`IsEqu®Exû±RefAndCÚ¡
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
Œue
)) )

2767 
	`E¼Ü
(
TXT_EXPR_MUST_BE_BOOL
, 
šode
->
fœ¡Chd
);

2768 
ex´
.
ty³
.
	`S‘CÚ¡ªtDW
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
Œue
), 1);

2771 ifĞ
ex´
.
ty³
.
d©aTy³
.
	`IsReã»nû
(èè
	`CÚv”tToV¬ŸbË
(&expr);

2772 
	`ProûssDeã¼edP¬ams
(&
ex´
);

2774 ifĞ!
ex´
.
ty³
.
isCÚ¡ªt
 )

2776 
	`ProûssPrİ”tyG‘AcûssÜ
(&
ex´
, 
šode
);

2778 
	`CÚv”tToV¬ŸbË
(&
ex´
);

2781 
bc
->
	`AddCode
(&
ex´
.bc);

2784 
bc
->
	`In¡rSHORT
(
asBC_CpyVtoR4
, 
ex´
.
ty³
.
¡ackOff£t
);

2785 
bc
->
	`In¡r
(
asBC_CÌHi
);

2786 
bc
->
	`In¡rDWORD
(
asBC_JZ
, 
aá”Lab–
);

2787 
	`R–—£TempÜ¬yV¬ŸbË
(
ex´
.
ty³
, 
bc
);

2789 ifĞ
ex´
.
ty³
.
dwÜdV®ue
 == 0 )

2792 
bc
->
	`In¡rINT
(
asBC_JMP
, 
aá”Lab–
);

2798 
boŞ
 
ÜigIsCÚ¡ruùÜC®Ëd
 = 
m_isCÚ¡ruùÜC®Ëd
;

2800 
boŞ
 
hasR‘uº1
;

2801 
asCBy‹Code
 
	`ifBC
(
’gše
);

2802 
	`CompeS‹m’t
(
šode
->
fœ¡Chd
->
Ãxt
, &
hasR‘uº1
, &
ifBC
);

2805 
	`LšeIn¡r
(
bc
, 
šode
->
fœ¡Chd
->
Ãxt
->
tok’Pos
);

2806 
bc
->
	`AddCode
(&
ifBC
);

2808 ifĞ
šode
->
fœ¡Chd
->
Ãxt
->
nodeTy³
 =ğ
¢Ex´essiÚS‹m’t
 && inode->firstChild->next->firstChild == 0 )

2811 
	`E¼Ü
(
TXT_IF_WITH_EMPTY_STATEMENT
, 
šode
->
fœ¡Chd
->
Ãxt
);

2816 
boŞ
 
cÚ¡ruùÜC®l1
 = 
çl£
;

2817 
boŞ
 
cÚ¡ruùÜC®l2
 = 
çl£
;

2818 ifĞ!
ÜigIsCÚ¡ruùÜC®Ëd
 && 
m_isCÚ¡ruùÜC®Ëd
 )

2819 
cÚ¡ruùÜC®l1
 = 
Œue
;

2822 ifĞ
šode
->
fœ¡Chd
->
Ãxt
 !ğšode->
Ï¡Chd
 )

2825 
m_isCÚ¡ruùÜC®Ëd
 = 
ÜigIsCÚ¡ruùÜC®Ëd
;

2827 
aá”El£
 = 0;

2828 ifĞ!
hasR‘uº1
 )

2830 
aá”El£
 = 
ÃxtLab–
++;

2833 
bc
->
	`In¡rINT
(
asBC_JMP
, 
aá”El£
);

2837 
bc
->
	`Lab–
(()
aá”Lab–
);

2839 
boŞ
 
hasR‘uº2
;

2840 
asCBy‹Code
 
	`–£BC
(
’gše
);

2841 
	`CompeS‹m’t
(
šode
->
Ï¡Chd
, &
hasR‘uº2
, &
–£BC
);

2844 
	`LšeIn¡r
(
bc
, 
šode
->
Ï¡Chd
->
tok’Pos
);

2845 
bc
->
	`AddCode
(&
–£BC
);

2847 ifĞ
šode
->
Ï¡Chd
->
nodeTy³
 =ğ
¢Ex´essiÚS‹m’t
 && inode->Ï¡Chd->
fœ¡Chd
 == 0 )

2850 
	`E¼Ü
(
TXT_ELSE_WITH_EMPTY_STATEMENT
, 
šode
->
Ï¡Chd
);

2853 ifĞ!
hasR‘uº1
 )

2856 
bc
->
	`Lab–
(()
aá”El£
);

2860 *
hasR‘uº
 = 
hasR‘uº1
 && 
hasR‘uº2
;

2862 ifĞ!
ÜigIsCÚ¡ruùÜC®Ëd
 && 
m_isCÚ¡ruùÜC®Ëd
 )

2863 
cÚ¡ruùÜC®l2
 = 
Œue
;

2868 
bc
->
	`Lab–
(()
aá”Lab–
);

2869 *
hasR‘uº
 = 
çl£
;

2873 ifĞ(
cÚ¡ruùÜC®l1
 && !
cÚ¡ruùÜC®l2
) ||

2874 (
cÚ¡ruùÜC®l2
 && !
cÚ¡ruùÜC®l1
) )

2876 
	`E¼Ü
(
TXT_BOTH_CONDITIONS_MUST_CALL_CONSTRUCTOR
, 
šode
);

2879 
m_isCÚ¡ruùÜC®Ëd
 = 
ÜigIsCÚ¡ruùÜC®Ëd
 || 
cÚ¡ruùÜC®l1
 || 
cÚ¡ruùÜC®l2
;

2880 
	}
}

2882 
	gasCComp”
::
	$CompeFÜS‹m’t
(
asCSütNode
 *
âode
, 
asCBy‹Code
 *
bc
)

2885 
	`AddV¬ŸbËScİe
(
Œue
,rue);

2888 
cÚd™iÚLab–
 = 
ÃxtLab–
++;

2889 
aá”Lab–
 = 
ÃxtLab–
++;

2890 
cÚtšueLab–
 = 
ÃxtLab–
++;

2891 
šsideLab–
 = 
ÃxtLab–
++;

2893 
cÚtšueLab–s
.
	`PushLa¡
(
cÚtšueLab–
);

2894 
b»akLab–s
.
	`PushLa¡
(
aá”Lab–
);

2898 
asCBy‹Code
 
	`š™BC
(
’gše
);

2899 ifĞ
âode
->
fœ¡Chd
->
nodeTy³
 =ğ
¢Deş¬©iÚ
 )

2900 
	`CompeDeş¬©iÚ
(
âode
->
fœ¡Chd
, &
š™BC
);

2902 
	`CompeEx´essiÚS‹m’t
(
âode
->
fœ¡Chd
, &
š™BC
);

2906 
asSEx´CÚ‹xt
 
	`ex´
(
’gše
);

2907 
asCSütNode
 *
£cÚd
 = 
âode
->
fœ¡Chd
->
Ãxt
;

2908 ifĞ
£cÚd
->
fœ¡Chd
 )

2910 
r
 = 
	`CompeAssignm’t
(
£cÚd
->
fœ¡Chd
, &
ex´
);

2911 ifĞ
r
 >= 0 )

2913 ifĞ!
ex´
.
ty³
.
d©aTy³
.
	`IsEqu®Exû±RefAndCÚ¡
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
Œue
)) )

2914 
	`E¼Ü
(
TXT_EXPR_MUST_BE_BOOL
, 
£cÚd
);

2917 ifĞ
ex´
.
ty³
.
d©aTy³
.
	`IsReã»nû
(èè
	`CÚv”tToV¬ŸbË
(&expr);

2918 
	`ProûssDeã¼edP¬ams
(&
ex´
);

2920 
	`ProûssPrİ”tyG‘AcûssÜ
(&
ex´
, 
£cÚd
);

2923 
	`CÚv”tToV¬ŸbË
(&
ex´
);

2924 
ex´
.
bc
.
	`In¡rSHORT
(
asBC_CpyVtoR4
,ƒx´.
ty³
.
¡ackOff£t
);

2925 
ex´
.
bc
.
	`In¡r
(
asBC_CÌHi
);

2926 
ex´
.
bc
.
	`In¡rDWORD
(
asBC_JNZ
, 
šsideLab–
);

2927 
	`R–—£TempÜ¬yV¬ŸbË
(
ex´
.
ty³
, &ex´.
bc
);

2934 
asCBy‹Code
 
	`ÃxtBC
(
’gše
);

2935 
asCSütNode
 *
thœd
 = 
£cÚd
->
Ãxt
;

2936 ifĞ
thœd
->
nodeTy³
 =ğ
¢Ex´essiÚS‹m’t
 )

2937 
	`CompeEx´essiÚS‹m’t
(
thœd
, &
ÃxtBC
);

2941 
boŞ
 
hasR‘uº
;

2942 
asCBy‹Code
 
	`fÜBC
(
’gše
);

2943 
	`CompeS‹m’t
(
âode
->
Ï¡Chd
, &
hasR‘uº
, &
fÜBC
);

2947 
bc
->
	`AddCode
(&
š™BC
);

2948 
bc
->
	`In¡rDWORD
(
asBC_JMP
, 
cÚd™iÚLab–
);

2950 
bc
->
	`Lab–
(()
šsideLab–
);

2954 
bc
->
	`In¡r
(
asBC_SUSPEND
);

2955 
bc
->
	`In¡rPTR
(
asBC_J™EÁry
, 0);

2957 
	`LšeIn¡r
(
bc
, 
âode
->
Ï¡Chd
->
tok’Pos
);

2958 
bc
->
	`AddCode
(&
fÜBC
);

2960 
bc
->
	`Lab–
(()
cÚtšueLab–
);

2961 
bc
->
	`AddCode
(&
ÃxtBC
);

2963 
bc
->
	`Lab–
(()
cÚd™iÚLab–
);

2964 ifĞ
ex´
.
bc
.
	`G‘La¡In¡r
() == -1 )

2966 
bc
->
	`In¡rDWORD
(
asBC_JMP
, 
šsideLab–
);

2968 
bc
->
	`AddCode
(&
ex´
.bc);

2970 
bc
->
	`Lab–
(()
aá”Lab–
);

2972 
cÚtšueLab–s
.
	`PİLa¡
();

2973 
b»akLab–s
.
	`PİLa¡
();

2976  
n
 = ()
v¬ŸbËs
->v¬ŸbËs.
	`G‘L’gth
() - 1;‚ >= 0;‚-- )

2978 
sV¬ŸbË
 *
v
 = 
v¬ŸbËs
->v¬ŸbËs[
n
];

2981 
	`C®lDe¡ruùÜ
(
v
->
ty³
, v->
¡ackOff£t
, v->
ÚH—p
, 
bc
);

2984 ifĞ
v
->
¡ackOff£t
 > 0 )

2985 
	`D—Îoÿ‹V¬ŸbË
(
v
->
¡ackOff£t
);

2988 
	`RemoveV¬ŸbËScİe
();

2989 
	}
}

2991 
	gasCComp”
::
	$CompeWheS‹m’t
(
asCSütNode
 *
wnode
, 
asCBy‹Code
 *
bc
)

2994 
	`AddV¬ŸbËScİe
(
Œue
,rue);

2997 
befÜeLab–
 = 
ÃxtLab–
++;

2998 
aá”Lab–
 = 
ÃxtLab–
++;

3000 
cÚtšueLab–s
.
	`PushLa¡
(
befÜeLab–
);

3001 
b»akLab–s
.
	`PushLa¡
(
aá”Lab–
);

3004 
bc
->
	`Lab–
(()
befÜeLab–
);

3007 
asSEx´CÚ‹xt
 
	`ex´
(
’gše
);

3008 
	`CompeAssignm’t
(
wnode
->
fœ¡Chd
, &
ex´
);

3009 ifĞ!
ex´
.
ty³
.
d©aTy³
.
	`IsEqu®Exû±RefAndCÚ¡
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
Œue
)) )

3010 
	`E¼Ü
(
TXT_EXPR_MUST_BE_BOOL
, 
wnode
->
fœ¡Chd
);

3013 ifĞ
ex´
.
ty³
.
d©aTy³
.
	`IsReã»nû
(èè
	`CÚv”tToV¬ŸbË
(&expr);

3014 
	`ProûssDeã¼edP¬ams
(&
ex´
);

3016 
	`ProûssPrİ”tyG‘AcûssÜ
(&
ex´
, 
wnode
);

3019 
	`CÚv”tToV¬ŸbË
(&
ex´
);

3020 
bc
->
	`AddCode
(&
ex´
.bc);

3023 
bc
->
	`In¡rSHORT
(
asBC_CpyVtoR4
, 
ex´
.
ty³
.
¡ackOff£t
);

3024 
bc
->
	`In¡r
(
asBC_CÌHi
);

3025 
bc
->
	`In¡rDWORD
(
asBC_JZ
, 
aá”Lab–
);

3026 
	`R–—£TempÜ¬yV¬ŸbË
(
ex´
.
ty³
, 
bc
);

3031 
bc
->
	`In¡r
(
asBC_SUSPEND
);

3032 
bc
->
	`In¡rPTR
(
asBC_J™EÁry
, 0);

3035 
boŞ
 
hasR‘uº
;

3036 
asCBy‹Code
 
	`wheBC
(
’gše
);

3037 
	`CompeS‹m’t
(
wnode
->
Ï¡Chd
, &
hasR‘uº
, &
wheBC
);

3040 
	`LšeIn¡r
(
bc
, 
wnode
->
Ï¡Chd
->
tok’Pos
);

3041 
bc
->
	`AddCode
(&
wheBC
);

3044 
bc
->
	`In¡rINT
(
asBC_JMP
, 
befÜeLab–
);

3047 
bc
->
	`Lab–
(()
aá”Lab–
);

3049 
cÚtšueLab–s
.
	`PİLa¡
();

3050 
b»akLab–s
.
	`PİLa¡
();

3052 
	`RemoveV¬ŸbËScİe
();

3053 
	}
}

3055 
	gasCComp”
::
	$CompeDoWheS‹m’t
(
asCSütNode
 *
wnode
, 
asCBy‹Code
 *
bc
)

3058 
	`AddV¬ŸbËScİe
(
Œue
,rue);

3061 
befÜeLab–
 = 
ÃxtLab–
++;

3062 
befÜeTe¡
 = 
ÃxtLab–
++;

3063 
aá”Lab–
 = 
ÃxtLab–
++;

3065 
cÚtšueLab–s
.
	`PushLa¡
(
befÜeTe¡
);

3066 
b»akLab–s
.
	`PushLa¡
(
aá”Lab–
);

3069 
bc
->
	`Lab–
(()
befÜeLab–
);

3072 
boŞ
 
hasR‘uº
;

3073 
asCBy‹Code
 
	`wheBC
(
’gše
);

3074 
	`CompeS‹m’t
(
wnode
->
fœ¡Chd
, &
hasR‘uº
, &
wheBC
);

3077 
	`LšeIn¡r
(
bc
, 
wnode
->
fœ¡Chd
->
tok’Pos
);

3078 
bc
->
	`AddCode
(&
wheBC
);

3081 
bc
->
	`Lab–
(()
befÜeTe¡
);

3085 
bc
->
	`In¡r
(
asBC_SUSPEND
);

3086 
bc
->
	`In¡rPTR
(
asBC_J™EÁry
, 0);

3089 
	`LšeIn¡r
(
bc
, 
wnode
->
Ï¡Chd
->
tok’Pos
);

3092 
asSEx´CÚ‹xt
 
	`ex´
(
’gše
);

3093 
	`CompeAssignm’t
(
wnode
->
Ï¡Chd
, &
ex´
);

3094 ifĞ!
ex´
.
ty³
.
d©aTy³
.
	`IsEqu®Exû±RefAndCÚ¡
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
Œue
)) )

3095 
	`E¼Ü
(
TXT_EXPR_MUST_BE_BOOL
, 
wnode
->
fœ¡Chd
);

3098 ifĞ
ex´
.
ty³
.
d©aTy³
.
	`IsReã»nû
(èè
	`CÚv”tToV¬ŸbË
(&expr);

3099 
	`ProûssDeã¼edP¬ams
(&
ex´
);

3101 
	`ProûssPrİ”tyG‘AcûssÜ
(&
ex´
, 
wnode
);

3104 
	`CÚv”tToV¬ŸbË
(&
ex´
);

3105 
bc
->
	`AddCode
(&
ex´
.bc);

3108 
bc
->
	`In¡rSHORT
(
asBC_CpyVtoR4
, 
ex´
.
ty³
.
¡ackOff£t
);

3109 
bc
->
	`In¡r
(
asBC_CÌHi
);

3110 
bc
->
	`In¡rDWORD
(
asBC_JNZ
, 
befÜeLab–
);

3111 
	`R–—£TempÜ¬yV¬ŸbË
(
ex´
.
ty³
, 
bc
);

3115 
bc
->
	`Lab–
(()
aá”Lab–
);

3117 
cÚtšueLab–s
.
	`PİLa¡
();

3118 
b»akLab–s
.
	`PİLa¡
();

3120 
	`RemoveV¬ŸbËScİe
();

3121 
	}
}

3123 
	gasCComp”
::
	$CompeB»akS‹m’t
(
asCSütNode
 *
node
, 
asCBy‹Code
 *
bc
)

3125 ifĞ
b»akLab–s
.
	`G‘L’gth
() == 0 )

3127 
	`E¼Ü
(
TXT_INVALID_BREAK
, 
node
);

3133 
bc
->
	`Block
(
Œue
);

3134 
asCV¬ŸbËScİe
 *
vs
 = 
v¬ŸbËs
;

3135  !
vs
->
isB»akScİe
 )

3137  
n
 = ()
vs
->
v¬ŸbËs
.
	`G‘L’gth
() - 1;‚ >= 0;‚-- )

3138 
	`C®lDe¡ruùÜ
(
vs
->
v¬ŸbËs
[
n
]->
ty³
, vs->v¬ŸbËs[n]->
¡ackOff£t
, vs->v¬ŸbËs[n]->
ÚH—p
, 
bc
);

3140 
vs
 = vs->
·»Á
;

3142 
bc
->
	`Block
(
çl£
);

3144 
bc
->
	`In¡rINT
(
asBC_JMP
, 
b»akLab–s
[b»akLab–s.
	`G‘L’gth
()-1]);

3145 
	}
}

3147 
	gasCComp”
::
	$CompeCÚtšueS‹m’t
(
asCSütNode
 *
node
, 
asCBy‹Code
 *
bc
)

3149 ifĞ
cÚtšueLab–s
.
	`G‘L’gth
() == 0 )

3151 
	`E¼Ü
(
TXT_INVALID_CONTINUE
, 
node
);

3157 
bc
->
	`Block
(
Œue
);

3158 
asCV¬ŸbËScİe
 *
vs
 = 
v¬ŸbËs
;

3159  !
vs
->
isCÚtšueScİe
 )

3161  
n
 = ()
vs
->
v¬ŸbËs
.
	`G‘L’gth
() - 1;‚ >= 0;‚-- )

3162 
	`C®lDe¡ruùÜ
(
vs
->
v¬ŸbËs
[
n
]->
ty³
, vs->v¬ŸbËs[n]->
¡ackOff£t
, vs->v¬ŸbËs[n]->
ÚH—p
, 
bc
);

3164 
vs
 = vs->
·»Á
;

3166 
bc
->
	`Block
(
çl£
);

3168 
bc
->
	`In¡rINT
(
asBC_JMP
, 
cÚtšueLab–s
[cÚtšueLab–s.
	`G‘L’gth
()-1]);

3169 
	}
}

3171 
	gasCComp”
::
	$CompeEx´essiÚS‹m’t
(
asCSütNode
 *
’ode
, 
asCBy‹Code
 *
bc
)

3173 ifĞ
’ode
->
fœ¡Chd
 )

3176 
asSEx´CÚ‹xt
 
	`ex´
(
’gše
);

3177 
	`CompeAssignm’t
(
’ode
->
fœ¡Chd
, &
ex´
);

3182 ifĞ!
hasCompeE¼Üs
 )

3183 
	`ProûssPrİ”tyG‘AcûssÜ
(&
ex´
, 
’ode
);

3186 ifĞ!
ex´
.
ty³
.
d©aTy³
.
	`IsPrim™ive
() )

3187 
ex´
.
bc
.
	`In¡r
(
asBC_PİPŒ
);

3190 
	`R–—£TempÜ¬yV¬ŸbË
(
ex´
.
ty³
, &ex´.
bc
);

3192 
	`ProûssDeã¼edP¬ams
(&
ex´
);

3194 
bc
->
	`AddCode
(&
ex´
.bc);

3196 
	}
}

3198 
	gasCComp”
::
	$P»·»TempÜ¬yObjeù
(
asCSütNode
 *
node
, 
asSEx´CÚ‹xt
 *
ùx
, 
boŞ
 
fÜûOnH—p
)

3203 ifĞ
ùx
->
ty³
.
isTempÜ¬y
 && ctx->ty³.
isV¬ŸbË
 &&

3204 !(
fÜûOnH—p
 && !
	`IsV¬ŸbËOnH—p
(
ùx
->
ty³
.
¡ackOff£t
)) )

3208 ifĞ!
ùx
->
ty³
.
d©aTy³
.
	`IsReã»nû
() )

3210 
ùx
->
bc
.
	`In¡r
(
asBC_PİPŒ
);

3211 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_PSF
, ctx->
ty³
.
¡ackOff£t
);

3212 
ùx
->
ty³
.
d©aTy³
.
	`MakeReã»nû
(
Œue
);

3219 
asCD©aTy³
 
dt
 = 
ùx
->
ty³
.
d©aTy³
;

3220 
dt
.
	`MakeReã»nû
(
çl£
);

3221 
dt
.
	`MakeR—dOÆy
(
çl£
);

3223 
off£t
 = 
	`AÎoÿ‹V¬ŸbË
(
dt
, 
Œue
, 
fÜûOnH—p
);

3226 
dt
.
	`MakeReã»nû
(
	`IsV¬ŸbËOnH—p
(
off£t
));

3228 
asCTy³Info
 
lv®ue
;

3229 
lv®ue
.
	`S‘
(
dt
);

3230 
lv®ue
.
isTempÜ¬y
 = 
Œue
;

3231 
lv®ue
.
¡ackOff£t
 = ()
off£t
;

3232 
lv®ue
.
isV¬ŸbË
 = 
Œue
;

3233 
lv®ue
.
isEx¶ic™HªdË
 = 
ùx
->
ty³
.isExplicitHandle;

3235 ifĞ!
dt
.
	`IsObjeùHªdË
() &&

3236 
dt
.
	`G‘ObjeùTy³
(è&& (dt.
	`G‘Behaviour
()->
cİycÚ¡ruù
 || dt.G‘Behaviour()->
cİyçùÜy
) )

3238 
	`P»·»FÜAssignm’t
(&
lv®ue
.
d©aTy³
, 
ùx
, 
node
, 
Œue
);

3241 
	`C®lCİyCÚ¡ruùÜ
(
dt
, 
off£t
, 
	`IsV¬ŸbËOnH—p
(off£t), &
ùx
->
bc
, ctx, 
node
);

3246 
r
 = 
	`C®lDeçuÉCÚ¡ruùÜ
(
dt
, 
off£t
, 
	`IsV¬ŸbËOnH—p
(off£t), &
ùx
->
bc
, 
node
);

3247 ifĞ
r
 < 0 )

3249 
	`E¼Ü
(
TXT_FAILED_TO_CREATE_TEMP_OBJ
, 
node
);

3254 
	`P»·»FÜAssignm’t
(&
lv®ue
.
d©aTy³
, 
ùx
, 
node
, 
Œue
);

3256 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_PSF
, ()
off£t
);

3257 
r
 = 
	`P”fÜmAssignm’t
(&
lv®ue
, &
ùx
->
ty³
, &ùx->
bc
, 
node
);

3258 ifĞ
r
 < 0 )

3260 
	`E¼Ü
(
TXT_FAILED_TO_CREATE_TEMP_OBJ
, 
node
);

3264 
ùx
->
bc
.
	`In¡r
(
asBC_PİPŒ
);

3270 ifĞ
ùx
->
ty³
.
isTempÜ¬y
 )

3271 
	`R–—£TempÜ¬yV¬ŸbË
(
ùx
->
ty³
, &ùx->
bc
);

3274 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_PSF
, ()
off£t
);

3275 
lv®ue
.
d©aTy³
.
	`MakeReã»nû
(
	`IsV¬ŸbËOnH—p
(
off£t
));

3277 
ùx
->
ty³
 = 
lv®ue
;

3278 
	}
}

3280 
	gasCComp”
::
	$CompeR‘uºS‹m’t
(
asCSütNode
 *
ºode
, 
asCBy‹Code
 *
bc
)

3283 
sV¬ŸbË
 *
v
 = 
v¬ŸbËs
->
	`G‘V¬ŸbË
("return");

3286 ifĞ
v
->
ty³
.
	`G‘SizeOnSckDWÜds
(è> 0 && !
ºode
->
fœ¡Chd
 )

3288 
	`E¼Ü
(
TXT_MUST_RETURN_VALUE
, 
ºode
);

3291 ifĞ
v
->
ty³
.
	`G‘SizeOnSckDWÜds
(è=ğ0 && 
ºode
->
fœ¡Chd
 )

3293 
	`E¼Ü
(
TXT_CANT_RETURN_VALUE
, 
ºode
);

3298 ifĞ
ºode
->
fœ¡Chd
 )

3301 
asSEx´CÚ‹xt
 
	`ex´
(
’gše
);

3302 
r
 = 
	`CompeAssignm’t
(
ºode
->
fœ¡Chd
, &
ex´
);

3303 ifĞ
r
 < 0 ) ;

3305 ifĞ
v
->
ty³
.
	`IsReã»nû
() )

3318 ifĞ!(
ex´
.
ty³
.
d©aTy³
.
	`IsReã»nû
() ||

3319 (
ex´
.
ty³
.
d©aTy³
.
	`IsObjeù
(è&& !ex´.ty³.d©aTy³.
	`IsObjeùHªdË
())) )

3322 
	`ProûssDeã¼edP¬ams
(&
ex´
);

3323 
	`E¼Ü
(
TXT_NOT_VALID_REFERENCE
, 
ºode
);

3332 ifĞ(
ex´
.
ty³
.
isV¬ŸbË
 && !Óx´.ty³.
¡ackOff£t
 =ğ0 && 
outFunc
->
objeùTy³
)è||ƒx´.ty³.
isTempÜ¬y
 )

3335 
	`ProûssDeã¼edP¬ams
(&
ex´
);

3336 
	`E¼Ü
(
TXT_CANNOT_RETURN_REF_TO_LOCAL
, 
ºode
);

3342 ifĞ!(
v
->
ty³
 =ğ
ex´
.ty³.
d©aTy³
 ||

3343 (
ex´
.
ty³
.
d©aTy³
.
	`IsObjeù
(è&& !ex´.ty³.d©aTy³.
	`IsObjeùHªdË
(è&& 
v
->ty³.
	`IsEqu®Exû±Ref
(expr.type.dataType))) )

3346 
	`ProûssDeã¼edP¬ams
(&
ex´
);

3347 
asCSŒšg
 
¡r
;

3348 
¡r
.
	`FÜm©
(
TXT_CANT_IMPLICITLY_CONVERT_s_TO_s
, 
ex´
.
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
(), 
v
->type.Format().AddressOf());

3349 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
ºode
);

3355 ifĞ
ex´
.
deã¼edP¬ams
.
	`G‘L’gth
() )

3358 
	`ProûssDeã¼edP¬ams
(&
ex´
);

3359 
	`E¼Ü
(
TXT_REF_CANT_BE_RETURNED_DEFERRED_PARAM
, 
ºode
);

3365 
asCA¼ay
<> 
u£dV¬s
;

3366 
ex´
.
bc
.
	`G‘V¬sU£d
(
u£dV¬s
);

3367  
asUINT
 
n
 = 0;‚ < 
u£dV¬s
.
	`G‘L’gth
();‚++ )

3369 
v¬
 = 
	`G‘V¬ŸbËSlÙ
(
u£dV¬s
[
n
]);

3370 ifĞ
v¬
 != -1 )

3372 
asCD©aTy³
 
dt
 = 
v¬ŸbËAÎoÿtiÚs
[
v¬
];

3373 ifĞ
dt
.
	`IsObjeù
() )

3375 
	`ProûssDeã¼edP¬ams
(&
ex´
);

3376 
	`E¼Ü
(
TXT_REF_CANT_BE_RETURNED_LOCAL_VARS
, 
ºode
);

3389 
	`De¡royV¬ŸbËs
(
bc
);

3395 ifĞ!
ex´
.
ty³
.
d©aTy³
.
	`IsPrim™ive
() )

3397 ifĞ!
ex´
.
ty³
.
d©aTy³
.
	`IsObjeùHªdË
() &&

3398 
ex´
.
ty³
.
d©aTy³
.
	`IsReã»nû
() )

3399 
ex´
.
bc
.
	`In¡r
(
asBC_RDSPŒ
);

3401 
ex´
.
bc
.
	`In¡r
(
asBC_PİRPŒ
);

3408 
	`ProûssPrİ”tyG‘AcûssÜ
(&
ex´
, 
ºode
);

3411 
	`IsV¬ŸbËIn™Ÿlized
(&
ex´
.
ty³
, 
ºode
->
fœ¡Chd
);

3413 ifĞ
v
->
ty³
.
	`IsPrim™ive
() )

3415 ifĞ
ex´
.
ty³
.
d©aTy³
.
	`IsReã»nû
(èè
	`CÚv”tToV¬ŸbË
(&expr);

3418 
	`Im¶ic™CÚv”siÚ
(&
ex´
, 
v
->
ty³
, 
ºode
->
fœ¡Chd
, 
asIC_IMPLICIT_CONV
);

3421 ifĞ
ex´
.
ty³
.
d©aTy³
 !ğ
v
->type )

3423 
asCSŒšg
 
¡r
;

3424 
¡r
.
	`FÜm©
(
TXT_NO_CONVERSION_s_TO_s
, 
ex´
.
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
(), 
v
->type.Format().AddressOf());

3425 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
ºode
);

3430 
	`CÚv”tToV¬ŸbË
(&
ex´
);

3433 
	`De¡royV¬ŸbËs
(&
ex´
.
bc
);

3434 
	`ProûssDeã¼edP¬ams
(&
ex´
);

3436 
	`R–—£TempÜ¬yV¬ŸbË
(
ex´
.
ty³
, &ex´.
bc
);

3439 ifĞ
v
->
ty³
.
	`G‘SizeOnSckDWÜds
() == 1 )

3440 
ex´
.
bc
.
	`In¡rSHORT
(
asBC_CpyVtoR4
,ƒx´.
ty³
.
¡ackOff£t
);

3442 
ex´
.
bc
.
	`In¡rSHORT
(
asBC_CpyVtoR8
,ƒx´.
ty³
.
¡ackOff£t
);

3445 ifĞ
v
->
ty³
.
	`IsObjeù
() )

3449 ifĞ
outFunc
->
	`DÛsR‘uºOnSck
() )

3454 ifĞ!
v
->
ty³
.
	`IsEqu®Exû±RefAndCÚ¡
(
ex´
.ty³.
d©aTy³
) )

3456 
	`Im¶ic™CÚv”siÚ
(&
ex´
, 
v
->
ty³
, 
ºode
->
fœ¡Chd
, 
asIC_IMPLICIT_CONV
);

3457 ifĞ!
v
->
ty³
.
	`IsEqu®Exû±RefAndCÚ¡
(
ex´
.ty³.
d©aTy³
) )

3459 
asCSŒšg
 
¡r
;

3460 
¡r
.
	`FÜm©
(
TXT_CANT_IMPLICITLY_CONVERT_s_TO_s
, 
ex´
.
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
(), 
v
->type.Format().AddressOf());

3461 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
ºode
->
fœ¡Chd
);

3466 
off£t
 = 
outFunc
->
objeùTy³
 ? -
AS_PTR_SIZE
 : 0;

3467 ifĞ
v
->
ty³
.
	`G‘ObjeùTy³
()->
beh
.
cİycÚ¡ruù
 )

3469 
	`P»·»FÜAssignm’t
(&
v
->
ty³
, &
ex´
, 
ºode
->
fœ¡Chd
, 
çl£
);

3470 
	`C®lCİyCÚ¡ruùÜ
(
v
->
ty³
, 
off£t
, 
çl£
, &
ex´
.
bc
, &ex´, 
ºode
->
fœ¡Chd
, f®£, 
Œue
);

3475 
	`C®lDeçuÉCÚ¡ruùÜ
(
v
->
ty³
, 
off£t
, 
çl£
, &
ex´
.
bc
, 
ºode
->
fœ¡Chd
, f®£, 
Œue
);

3476 
	`P»·»FÜAssignm’t
(&
v
->
ty³
, &
ex´
, 
ºode
->
fœ¡Chd
, 
çl£
);

3477 
ex´
.
bc
.
	`In¡rSHORT
(
asBC_PSF
, ()
off£t
);

3478 
ex´
.
bc
.
	`In¡r
(
asBC_RDSPŒ
);

3480 
asSEx´CÚ‹xt
 
	`Ëx´
(
’gše
);

3481 
Ëx´
.
ty³
.
	`S‘
(
v
->type);

3482 
Ëx´
.
ty³
.
isLV®ue
 = 
Œue
;

3483 
	`P”fÜmAssignm’t
(&
Ëx´
.
ty³
, &
ex´
.ty³, &ex´.
bc
, 
ºode
->
fœ¡Chd
);

3484 
ex´
.
bc
.
	`In¡r
(
asBC_PİPŒ
);

3487 
	`R–—£TempÜ¬yV¬ŸbË
(
ex´
.
ty³
, &ex´.
bc
);

3491 
	`De¡royV¬ŸbËs
(&
ex´
.
bc
);

3492 
	`ProûssDeã¼edP¬ams
(&
ex´
);

3496 
	`asASSERT
Ğ
v
->
ty³
.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_REF
 );

3500 
	`P»·»Argum’t
(&
v
->
ty³
, &
ex´
, 
ºode
->
fœ¡Chd
, 
çl£
, 0);

3503 
ex´
.
bc
.
	`In¡r
(
asBC_PİPŒ
);

3506 
	`De¡royV¬ŸbËs
(&
ex´
.
bc
);

3507 
	`ProûssDeã¼edP¬ams
(&
ex´
);

3511 
ex´
.
bc
.
	`In¡rSHORT
(
asBC_LOADOBJ
,ƒx´.
ty³
.
¡ackOff£t
);

3516 
	`R–—£TempÜ¬yV¬ŸbË
(
ex´
.
ty³
, 0);

3521 
bc
->
	`AddCode
(&
ex´
.bc);

3527 
	`De¡royV¬ŸbËs
(
bc
);

3531 
bc
->
	`In¡rINT
(
asBC_JMP
, 0);

3532 
	}
}

3534 
	gasCComp”
::
	$De¡royV¬ŸbËs
(
asCBy‹Code
 *
bc
)

3538 
bc
->
	`Block
(
Œue
);

3539 
asCV¬ŸbËScİe
 *
vs
 = 
v¬ŸbËs
;

3540  
vs
 )

3542  
n
 = ()
vs
->
v¬ŸbËs
.
	`G‘L’gth
() - 1;‚ >= 0;‚-- )

3543 ifĞ
vs
->
v¬ŸbËs
[
n
]->
¡ackOff£t
 > 0 )

3544 
	`C®lDe¡ruùÜ
(
vs
->
v¬ŸbËs
[
n
]->
ty³
, vs->v¬ŸbËs[n]->
¡ackOff£t
, vs->v¬ŸbËs[n]->
ÚH—p
, 
bc
);

3546 
vs
 = vs->
·»Á
;

3548 
bc
->
	`Block
(
çl£
);

3549 
	}
}

3551 
	gasCComp”
::
	$AddV¬ŸbËScİe
(
boŞ
 
isB»akScİe
, boŞ 
isCÚtšueScİe
)

3553 
v¬ŸbËs
 = 
	`asNEW
(
asCV¬ŸbËScİe
)(variables);

3554 ifĞ
v¬ŸbËs
 == 0 )

3559 
v¬ŸbËs
->
isB»akScİe
 = isBreakScope;

3560 
v¬ŸbËs
->
isCÚtšueScİe
 = isContinueScope;

3561 
	}
}

3563 
	gasCComp”
::
	$RemoveV¬ŸbËScİe
()

3565 ifĞ
v¬ŸbËs
 )

3567 
asCV¬ŸbËScİe
 *
v¬
 = 
v¬ŸbËs
;

3568 
v¬ŸbËs
 = v¬ŸbËs->
·»Á
;

3569 
	`asDELETE
(
v¬
,
asCV¬ŸbËScİe
);

3571 
	}
}

3573 
	gasCComp”
::
	$E¼Ü
(cÚ¡ *
msg
, 
asCSütNode
 *
node
)

3575 
asCSŒšg
 
¡r
;

3577 
r
 = 0, 
c
 = 0;

3578 
	`asASSERT
Ğ
node
 );

3579 ifĞ
node
 ) 
süt
->
	`CÚv”tPosToRowCŞ
Òode->
tok’Pos
, &
r
, &
c
);

3581 
bud”
->
	`Wr™eE¼Ü
(
süt
->
Çme
.
	`Add»ssOf
(), 
msg
, 
r
, 
c
);

3583 
hasCompeE¼Üs
 = 
Œue
;

3584 
	}
}

3586 
	gasCComp”
::
	$W¬nšg
(cÚ¡ *
msg
, 
asCSütNode
 *
node
)

3588 
asCSŒšg
 
¡r
;

3590 
r
 = 0, 
c
 = 0;

3591 
	`asASSERT
Ğ
node
 );

3592 ifĞ
node
 ) 
süt
->
	`CÚv”tPosToRowCŞ
Òode->
tok’Pos
, &
r
, &
c
);

3594 
bud”
->
	`Wr™eW¬nšg
(
süt
->
Çme
.
	`Add»ssOf
(), 
msg
, 
r
, 
c
);

3595 
	}
}

3597 
	gasCComp”
::
	$InfÜm©iÚ
(cÚ¡ *
msg
, 
asCSütNode
 *
node
)

3599 
asCSŒšg
 
¡r
;

3601 
r
 = 0, 
c
 = 0;

3602 
	`asASSERT
Ğ
node
 );

3603 ifĞ
node
 ) 
süt
->
	`CÚv”tPosToRowCŞ
Òode->
tok’Pos
, &
r
, &
c
);

3605 
bud”
->
	`Wr™eInfo
(
süt
->
Çme
.
	`Add»ssOf
(), 
msg
, 
r
, 
c
, 
çl£
);

3606 
	}
}

3608 
	gasCComp”
::
PrštM©chšgFuncs
(
asCA¼ay
<> &
funcs
, 
asCSütNode
 *
node
)

3610 
	gr
 = 0, 
	gc
 = 0;

3611 
asASSERT
Ğ
node
 );

3612 ifĞ
	gnode
 ) 
	gsüt
->
CÚv”tPosToRowCŞ
(
node
->
tok’Pos
, &
r
, &
c
);

3614  
	gn
 = 0;‚ < 
	gfuncs
.
G‘L’gth
();‚++ )

3616 
asISütFunùiÚ
 *
	gfunc
 = 
bud”
->
G‘FunùiÚDesütiÚ
(
funcs
[
n
]);

3618 
	gbud”
->
Wr™eInfo
(
süt
->
Çme
.
Add»ssOf
(), 
func
->
G‘Deş¬©iÚ
(
Œue
), 
r
, 
c
, 
çl£
);

3622 
	gasCComp”
::
	$AÎoÿ‹V¬ŸbËNÙIn
(cÚ¡ 
asCD©aTy³
 &
ty³
, 
boŞ
 
isTempÜ¬y
, boŞ 
fÜûOnH—p
, 
asSEx´CÚ‹xt
 *
ùx
)

3624 
l
 = (
»£rvedV¬ŸbËs
.
	`G‘L’gth
());

3625 
ùx
->
bc
.
	`G‘V¬sU£d
(
»£rvedV¬ŸbËs
);

3626 
v¬
 = 
	`AÎoÿ‹V¬ŸbË
(
ty³
, 
isTempÜ¬y
, 
fÜûOnH—p
);

3627 
»£rvedV¬ŸbËs
.
	`S‘L’gth
(
l
);

3628  
v¬
;

3629 
	}
}

3631 
	gasCComp”
::
	$AÎoÿ‹V¬ŸbË
(cÚ¡ 
asCD©aTy³
 &
ty³
, 
boŞ
 
isTempÜ¬y
, boŞ 
fÜûOnH—p
)

3633 
asCD©aTy³
 
	`t
(
ty³
);

3635 ifĞ
t
.
	`IsPrim™ive
(è&&.
	`G‘SizeOnSckDWÜds
() == 1 )

3636 
t
.
	`S‘Tok’Ty³
(
‰IÁ
);

3638 ifĞ
t
.
	`IsPrim™ive
(è&&.
	`G‘SizeOnSckDWÜds
() == 2 )

3639 
t
.
	`S‘Tok’Ty³
(
‰DoubË
);

3642 
	`asASSERT
Ğ
t
.
	`IsObjeùHªdË
(è||.
	`G‘Tok’Ty³
(è!ğ
‰UÄecognizedTok’
 );

3644 
boŞ
 
isOnH—p
 = 
Œue
;

3645 ifĞ
t
.
	`IsPrim™ive
() ||

3646 (
t
.
	`G‘ObjeùTy³
(è&& (t.G‘ObjeùTy³()->
	`G‘FÏgs
(è& 
asOBJ_VALUE
è&& !
fÜûOnH—p
) )

3649 
isOnH—p
 = 
çl£
;

3653  
asUINT
 
n
 = 0;‚ < 
ä“V¬ŸbËs
.
	`G‘L’gth
();‚++ )

3655 
¦Ù
 = 
ä“V¬ŸbËs
[
n
];

3657 ifĞ
v¬ŸbËAÎoÿtiÚs
[
¦Ù
].
	`IsEqu®Exû±CÚ¡
(
t
) &&

3658 
v¬ŸbËIsTempÜ¬y
[
¦Ù
] =ğ
isTempÜ¬y
 &&

3659 
v¬ŸbËIsOnH—p
[
¦Ù
] =ğ
isOnH—p
 )

3662 
off£t
 = 
	`G‘V¬ŸbËOff£t
(
¦Ù
);

3665 
boŞ
 
isU£d
 = 
çl£
;

3666 ifĞ
»£rvedV¬ŸbËs
.
	`G‘L’gth
() )

3667 
isU£d
 = 
»£rvedV¬ŸbËs
.
	`Exi¡s
(
off£t
);

3669 ifĞ!
isU£d
 )

3671 ifĞ
n
 !ğ
ä“V¬ŸbËs
.
	`G‘L’gth
() - 1 )

3672 
ä“V¬ŸbËs
[
n
] = f»eV¬ŸbËs.
	`PİLa¡
();

3674 
ä“V¬ŸbËs
.
	`PİLa¡
();

3676 ifĞ
isTempÜ¬y
 )

3677 
‹mpV¬ŸbËs
.
	`PushLa¡
(
off£t
);

3679  
off£t
;

3684 
v¬ŸbËAÎoÿtiÚs
.
	`PushLa¡
(
t
);

3685 
v¬ŸbËIsTempÜ¬y
.
	`PushLa¡
(
isTempÜ¬y
);

3686 
v¬ŸbËIsOnH—p
.
	`PushLa¡
(
isOnH—p
);

3688 
off£t
 = 
	`G‘V¬ŸbËOff£t
(()
v¬ŸbËAÎoÿtiÚs
.
	`G‘L’gth
()-1);

3690 ifĞ
isTempÜ¬y
 )

3691 
‹mpV¬ŸbËs
.
	`PushLa¡
(
off£t
);

3693  
off£t
;

3694 
	}
}

3696 
	gasCComp”
::
	$G‘V¬ŸbËOff£t
(
v¬Index
)

3699 
v¬Off£t
 = 1;

3700  
n
 = 0;‚ < 
v¬Index
;‚++ )

3702 ifĞ!
v¬ŸbËIsOnH—p
[
n
] && 
v¬ŸbËAÎoÿtiÚs
[n].
	`IsObjeù
() )

3703 
v¬Off£t
 +ğ
v¬ŸbËAÎoÿtiÚs
[
n
].
	`G‘SizeInMemÜyDWÜds
();

3705 
v¬Off£t
 +ğ
v¬ŸbËAÎoÿtiÚs
[
n
].
	`G‘SizeOnSckDWÜds
();

3708 ifĞ
v¬Index
 < ()
v¬ŸbËAÎoÿtiÚs
.
	`G‘L’gth
() )

3710 
size
;

3711 ifĞ!
v¬ŸbËIsOnH—p
[
v¬Index
] && 
v¬ŸbËAÎoÿtiÚs
[v¬Index].
	`IsObjeù
() )

3712 
size
 = 
v¬ŸbËAÎoÿtiÚs
[
v¬Index
].
	`G‘SizeInMemÜyDWÜds
();

3714 
size
 = 
v¬ŸbËAÎoÿtiÚs
[
v¬Index
].
	`G‘SizeOnSckDWÜds
();

3715 ifĞ
size
 > 1 )

3716 
v¬Off£t
 +ğ
size
-1;

3719  
v¬Off£t
;

3720 
	}
}

3723 
	gasCComp”
::
	$G‘V¬ŸbËSlÙ
(
off£t
)

3725 
v¬Off£t
 = 1;

3726  
asUINT
 
n
 = 0;‚ < 
v¬ŸbËAÎoÿtiÚs
.
	`G‘L’gth
();‚++ )

3728 ifĞ!
v¬ŸbËIsOnH—p
[
n
] && 
v¬ŸbËAÎoÿtiÚs
[n].
	`IsObjeù
() )

3729 
v¬Off£t
 +ğ-1 + 
v¬ŸbËAÎoÿtiÚs
[
n
].
	`G‘SizeInMemÜyDWÜds
();

3731 
v¬Off£t
 +ğ-1 + 
v¬ŸbËAÎoÿtiÚs
[
n
].
	`G‘SizeOnSckDWÜds
();

3733 ifĞ
v¬Off£t
 =ğ
off£t
 )

3734  
n
;

3736 
v¬Off£t
++;

3740 
	}
}

3742 
boŞ
 
	gasCComp”
::
	$IsV¬ŸbËOnH—p
(
off£t
)

3744 
v¬SlÙ
 = 
	`G‘V¬ŸbËSlÙ
(
off£t
);

3745 ifĞ
v¬SlÙ
 < 0 )

3748  
Œue
;

3751  
v¬ŸbËIsOnH—p
[
v¬SlÙ
];

3752 
	}
}

3754 
	gasCComp”
::
	$D—Îoÿ‹V¬ŸbË
(
off£t
)

3757 
n
;

3758  
n
 = 0;‚ < ()
‹mpV¬ŸbËs
.
	`G‘L’gth
();‚++ )

3760 ifĞ
off£t
 =ğ
‹mpV¬ŸbËs
[
n
] )

3762 ifĞ
n
 =ğ()
‹mpV¬ŸbËs
.
	`G‘L’gth
()-1 )

3763 
‹mpV¬ŸbËs
.
	`PİLa¡
();

3765 
‹mpV¬ŸbËs
[
n
] =empV¬ŸbËs.
	`PİLa¡
();

3770 
n
 = 
	`G‘V¬ŸbËSlÙ
(
off£t
);

3771 ifĞ
n
 != -1 )

3773 
ä“V¬ŸbËs
.
	`PushLa¡
(
n
);

3781 
	`asASSERT
(
off£t
 == 0x7FFF);

3782 
	}
}

3784 
	gasCComp”
::
	$R–—£TempÜ¬yV¬ŸbË
(
asCTy³Info
 &
t
, 
asCBy‹Code
 *
bc
)

3786 ifĞ
t
.
isTempÜ¬y
 )

3788 
	`R–—£TempÜ¬yV¬ŸbË
(
t
.
¡ackOff£t
, 
bc
);

3789 
t
.
isTempÜ¬y
 = 
çl£
;

3791 
	}
}

3793 
	gasCComp”
::
	$R–—£TempÜ¬yV¬ŸbË
(
off£t
, 
asCBy‹Code
 *
bc
)

3795 ifĞ
bc
 )

3798 
n
 = 
	`G‘V¬ŸbËSlÙ
(
off£t
);

3799 
	`asASSERT
Ğ
n
 >= 0 );

3800 ifĞ
n
 >= 0 )

3802 
asCD©aTy³
 
dt
 = 
v¬ŸbËAÎoÿtiÚs
[
n
];

3803 
boŞ
 
isOnH—p
 = 
v¬ŸbËIsOnH—p
[
n
];

3806 
	`C®lDe¡ruùÜ
(
dt
, 
off£t
, 
isOnH—p
, 
bc
);

3810 
	`D—Îoÿ‹V¬ŸbË
(
off£t
);

3811 
	}
}

3813 
	gasCComp”
::
	$D”eã»nû
(
asSEx´CÚ‹xt
 *
ùx
, 
boŞ
 
g’”©eCode
)

3815 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsReã»nû
() )

3817 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsObjeù
() )

3819 
ùx
->
ty³
.
d©aTy³
.
	`MakeReã»nû
(
çl£
);

3820 ifĞ
g’”©eCode
 )

3821 
ùx
->
bc
.
	`In¡r
(
asBC_RDSPŒ
);

3826 
	`asASSERT
(
çl£
);

3829 
	}
}

3831 
boŞ
 
	gasCComp”
::
	$IsV¬ŸbËIn™Ÿlized
(
asCTy³Info
 *
ty³
, 
asCSütNode
 *
node
)

3834 ifĞ
ty³
->
isTempÜ¬y
 )  
Œue
;

3837 ifĞ!
ty³
->
isV¬ŸbË
 )  
Œue
;

3840 
sV¬ŸbË
 *
v
 = 
v¬ŸbËs
->
	`G‘V¬ŸbËByOff£t
(
ty³
->
¡ackOff£t
);

3843 ifĞ
v
 =ğ0 )  
Œue
;

3845 ifĞ
v
->
isIn™Ÿlized
 )  
Œue
;

3848 ifĞ
v
->
ty³
.
	`IsObjeù
(èè 
Œue
;

3851 
v
->
isIn™Ÿlized
 = 
Œue
;

3854 
asCSŒšg
 
¡r
;

3855 
¡r
.
	`FÜm©
(
TXT_s_NOT_INITIALIZED
, (cÚ¡ *)
v
->
Çme
.
	`Add»ssOf
());

3856 
	`W¬nšg
(
¡r
.
	`Add»ssOf
(), 
node
);

3858  
çl£
;

3859 
	}
}

3861 
	gasCComp”
::
	$P»·»O³¿nd
(
asSEx´CÚ‹xt
 *
ùx
, 
asCSütNode
 *
node
)

3864 
	`IsV¬ŸbËIn™Ÿlized
(&
ùx
->
ty³
, 
node
);

3866 
asCD©aTy³
 
to
 = 
ùx
->
ty³
.
d©aTy³
;

3867 
to
.
	`MakeReã»nû
(
çl£
);

3869 
	`Im¶ic™CÚv”siÚ
(
ùx
, 
to
, 
node
, 
asIC_IMPLICIT_CONV
);

3871 
	`ProûssDeã¼edP¬ams
(
ùx
);

3872 
	}
}

3874 
	gasCComp”
::
	$P»·»FÜAssignm’t
(
asCD©aTy³
 *
lv®ue
, 
asSEx´CÚ‹xt
 *
rùx
, 
asCSütNode
 *
node
, 
boŞ
 
toTempÜ¬y
,‡sSEx´CÚ‹xˆ*
lv®ueEx´
)

3876 
	`ProûssPrİ”tyG‘AcûssÜ
(
rùx
, 
node
);

3879 
	`IsV¬ŸbËIn™Ÿlized
(&
rùx
->
ty³
, 
node
);

3881 ifĞ
lv®ue
->
	`IsPrim™ive
() )

3883 ifĞ
rùx
->
ty³
.
d©aTy³
.
	`IsPrim™ive
() )

3885 ifĞ
rùx
->
ty³
.
d©aTy³
.
	`IsReã»nû
() )

3888 
	`CÚv”tToV¬ŸbËNÙIn
(
rùx
, 
lv®ueEx´
);

3893 
l
 = (
»£rvedV¬ŸbËs
.
	`G‘L’gth
());

3894 ifĞ
lv®ueEx´
 )†v®ueEx´->
bc
.
	`G‘V¬sU£d
(
»£rvedV¬ŸbËs
);

3895 
	`Im¶ic™CÚv”siÚ
(
rùx
, *
lv®ue
, 
node
, 
asIC_IMPLICIT_CONV
);

3896 
»£rvedV¬ŸbËs
.
	`S‘L’gth
(
l
);

3899 ifĞ!
lv®ue
->
	`IsEqu®Exû±RefAndCÚ¡
(
rùx
->
ty³
.
d©aTy³
) )

3901 
asCSŒšg
 
¡r
;

3902 
¡r
.
	`FÜm©
(
TXT_CANT_IMPLICITLY_CONVERT_s_TO_s
, 
rùx
->
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
(), 
lv®ue
->Format().AddressOf());

3903 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

3905 
rùx
->
ty³
.
	`S‘Dummy
();

3909 ifĞ!
rùx
->
ty³
.
isV¬ŸbË
 )

3910 
	`CÚv”tToV¬ŸbËNÙIn
(
rùx
, 
lv®ueEx´
);

3914 
asCD©aTy³
 
to
 = *
lv®ue
;

3915 
to
.
	`MakeReã»nû
(
çl£
);

3919 ifĞ!
lv®ue
->
	`IsObjeùHªdË
() &&

3920 (
lv®ue
->
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_SCRIPT_OBJECT
) )

3921 
to
.
	`MakeHªdË
(
Œue
);

3924 
	`Im¶ic™CÚv”siÚ
(
rùx
, 
to
, 
node
, 
asIC_IMPLICIT_CONV
, 
Œue
, !
toTempÜ¬y
);

3926 ifĞ!
lv®ue
->
	`IsObjeùHªdË
() &&

3927 (
lv®ue
->
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_SCRIPT_OBJECT
) )

3930 
to
.
	`MakeHªdË
(
çl£
);

3931 
	`Im¶ic™CÚv”siÚ
(
rùx
, 
to
, 
node
, 
asIC_IMPLICIT_CONV
, 
Œue
, !
toTempÜ¬y
);

3935 ifĞ!
lv®ue
->
	`IsEqu®Exû±RefAndCÚ¡
(
rùx
->
ty³
.
d©aTy³
) )

3937 
asCSŒšg
 
¡r
;

3938 
¡r
.
	`FÜm©
(
TXT_CANT_IMPLICITLY_CONVERT_s_TO_s
, 
rùx
->
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
(), 
lv®ue
->Format().AddressOf());

3939 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

3944 ifĞ
lv®ue
->
	`IsObjeù
() )

3945 
	`asASSERT
(!
rùx
->
ty³
.
d©aTy³
.
	`IsReã»nû
());

3948 
	}
}

3950 
boŞ
 
	gasCComp”
::
	$IsLV®ue
(
asCTy³Info
 &
ty³
)

3952 ifĞ!
ty³
.
isLV®ue
 )  
çl£
;

3953 ifĞ
ty³
.
d©aTy³
.
	`IsR—dOÆy
(èè 
çl£
;

3954 ifĞ!
ty³
.
d©aTy³
.
	`IsObjeù
(è&& !ty³.
isV¬ŸbË
 && !ty³.d©aTy³.
	`IsReã»nû
(èè 
çl£
;

3955  
Œue
;

3956 
	}
}

3958 
	gasCComp”
::
	$P”fÜmAssignm’t
(
asCTy³Info
 *
lv®ue
,‡sCTy³InfØ*
rv®ue
, 
asCBy‹Code
 *
bc
, 
asCSütNode
 *
node
)

3960 ifĞ
lv®ue
->
d©aTy³
.
	`IsR—dOÆy
() )

3962 
	`E¼Ü
(
TXT_REF_IS_READ_ONLY
, 
node
);

3966 ifĞ
lv®ue
->
d©aTy³
.
	`IsPrim™ive
() )

3968 ifĞ
lv®ue
->
isV¬ŸbË
 )

3971 ifĞ
lv®ue
->
d©aTy³
.
	`G‘SizeInMemÜyDWÜds
() == 1 )

3972 
bc
->
	`In¡rW_W
(
asBC_CpyVtoV4
, 
lv®ue
->
¡ackOff£t
, 
rv®ue
->stackOffset);

3974 
bc
->
	`In¡rW_W
(
asBC_CpyVtoV8
, 
lv®ue
->
¡ackOff£t
, 
rv®ue
->stackOffset);

3977 
sV¬ŸbË
 *
v
 = 
v¬ŸbËs
->
	`G‘V¬ŸbËByOff£t
(
lv®ue
->
¡ackOff£t
);

3978 ifĞ
v
 ) v->
isIn™Ÿlized
 = 
Œue
;

3980 ifĞ
lv®ue
->
d©aTy³
.
	`IsReã»nû
() )

3983 
s
 = 
lv®ue
->
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
();

3984 ifĞ
s
 == 1 )

3985 
bc
->
	`In¡rSHORT
(
asBC_WRTV1
, 
rv®ue
->
¡ackOff£t
);

3986 ifĞ
s
 == 2 )

3987 
bc
->
	`In¡rSHORT
(
asBC_WRTV2
, 
rv®ue
->
¡ackOff£t
);

3988 ifĞ
s
 == 4 )

3989 
bc
->
	`In¡rSHORT
(
asBC_WRTV4
, 
rv®ue
->
¡ackOff£t
);

3990 ifĞ
s
 == 8 )

3991 
bc
->
	`In¡rSHORT
(
asBC_WRTV8
, 
rv®ue
->
¡ackOff£t
);

3995 
	`E¼Ü
(
TXT_NOT_VALID_LVALUE
, 
node
);

3999 ifĞ!
lv®ue
->
isEx¶ic™HªdË
 )

4001 
asSEx´CÚ‹xt
 
	`ùx
(
’gše
);

4002 
ùx
.
ty³
 = *
lv®ue
;

4003 
	`D”eã»nû
(&
ùx
, 
Œue
);

4004 *
lv®ue
 = 
ùx
.
ty³
;

4005 
bc
->
	`AddCode
(&
ùx
.bc);

4009 
asSTy³Behaviour
 *
beh
 = 
lv®ue
->
d©aTy³
.
	`G‘Behaviour
();

4010 ifĞ
beh
->
cİy
 )

4013 
bc
->
	`C®l
(
asBC_CALLSYS
, (
asDWORD
)
beh
->
cİy
, 2*
AS_PTR_SIZE
);

4014 
bc
->
	`In¡r
(
asBC_PshRPŒ
);

4019 ifĞ
lv®ue
->
d©aTy³
.
	`G‘SizeInMemÜyDWÜds
() == 0 ||

4020 !(
lv®ue
->
d©aTy³
.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_POD
) )

4022 
asCSŒšg
 
msg
;

4023 
msg
.
	`FÜm©
(
TXT_NO_DEFAULT_COPY_OP_FOR_s
, 
lv®ue
->
d©aTy³
.
	`G‘ObjeùTy³
()->
Çme
.
	`Add»ssOf
());

4024 
	`E¼Ü
(
msg
.
	`Add»ssOf
(), 
node
);

4030 
bc
->
	`In¡rSHORT_DW
(
asBC_COPY
, ()
lv®ue
->
d©aTy³
.
	`G‘SizeInMemÜyDWÜds
(), 
’gše
->
	`G‘Ty³IdFromD©aTy³
(lvalue->dataType));

4036 ifĞ!
lv®ue
->
d©aTy³
.
	`IsReã»nû
() )

4038 
	`E¼Ü
(
TXT_NOT_VALID_REFERENCE
, 
node
);

4042 
bc
->
	`In¡rPTR
(
asBC_REFCPY
, 
lv®ue
->
d©aTy³
.
	`G‘ObjeùTy³
());

4045 ifĞ
v¬ŸbËs
 )

4047 
sV¬ŸbË
 *
v
 = 
v¬ŸbËs
->
	`G‘V¬ŸbËByOff£t
(
lv®ue
->
¡ackOff£t
);

4048 ifĞ
v
 ) v->
isIn™Ÿlized
 = 
Œue
;

4053 
	}
}

4055 
boŞ
 
	gasCComp”
::
	$CompeRefCa¡
(
asSEx´CÚ‹xt
 *
ùx
, cÚ¡ 
asCD©aTy³
 &
to
, 
boŞ
 
isEx¶ic™
, 
asCSütNode
 *
node
, boŞ 
g’”©eCode
)

4057 
boŞ
 
cÚv”siÚDÚe
 = 
çl£
;

4059 
asCA¼ay
<> 
İs
;

4060 
asUINT
 
n
;

4062 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_SCRIPT_OBJECT
 )

4065 ifĞ!
ùx
->
ty³
.
d©aTy³
.
	`IsReã»nû
() )

4067 
asCD©aTy³
 
to
 = 
ùx
->
ty³
.
d©aTy³
;

4068 
to
.
	`MakeReã»nû
(
Œue
);

4069 
	`Im¶ic™CÚv”siÚ
(
ùx
, 
to
, 0, 
isEx¶ic™
 ? 
asIC_EXPLICIT_REF_CAST
 : 
asIC_IMPLICIT_CONV
, 
g’”©eCode
);

4072 ifĞ
isEx¶ic™
 )

4077 
cÚv”siÚDÚe
 = 
Œue
;

4078 ifĞ
g’”©eCode
 )

4080 
ùx
->
bc
.
	`In¡rDWORD
(
asBC_Ca¡
, 
’gše
->
	`G‘Ty³IdFromD©aTy³
(
to
));

4083 
»tuºOff£t
 = 
	`AÎoÿ‹V¬ŸbË
(
to
, 
Œue
);

4086 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_STOREOBJ
, ()
»tuºOff£t
);

4088 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_PSF
, ()
»tuºOff£t
);

4090 
	`R–—£TempÜ¬yV¬ŸbË
(
ùx
->
ty³
, &ùx->
bc
);

4092 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
to
, 
»tuºOff£t
, 
Œue
);

4093 
ùx
->
ty³
.
d©aTy³
.
	`MakeReã»nû
(
Œue
);

4097 
ùx
->
ty³
.
d©aTy³
 = 
to
;

4098 
ùx
->
ty³
.
d©aTy³
.
	`MakeReã»nû
(
Œue
);

4103 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
()->
	`D”ivesFrom
(
to
.GetObjectType()) )

4105 
cÚv”siÚDÚe
 = 
Œue
;

4106 
ùx
->
ty³
.
d©aTy³
.
	`S‘ObjeùTy³
(
to
.
	`G‘ObjeùTy³
());

4113 
asSTy³Behaviour
 *
beh
 = &
ùx
->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
()->beh;

4114  
n
 = 0;‚ < 
beh
->
İ”©Üs
.
	`G‘L’gth
();‚+= 2 )

4116 ifĞ(
isEx¶ic™
 && 
asBEHAVE_REF_CAST
 =ğ
beh
->
İ”©Üs
[
n
]) ||

4117 
asBEHAVE_IMPLICIT_REF_CAST
 =ğ
beh
->
İ”©Üs
[
n
] )

4119 
funcId
 = 
beh
->
İ”©Üs
[
n
+1];

4122 
asCSütFunùiÚ
 *
func
 = 
’gše
->
sütFunùiÚs
[
funcId
];

4123 ifĞ
func
->
»tuºTy³
.
	`G‘ObjeùTy³
(è!ğ
to
.GetObjectType() )

4126 
İs
.
	`PushLa¡
(
funcId
);

4131 
	`asASSERT
Ğ
İs
.
	`G‘L’gth
() <= 1 );

4134 ifĞ
İs
.
	`G‘L’gth
() == 1 )

4136 ifĞ
g’”©eCode
 )

4151 ifĞ
ùx
->
ty³
.
isV¬ŸbË
 )

4152 
ùx
->
bc
.
	`In¡r
(
asBC_PİPŒ
);

4155 
	`D”eã»nû
(
ùx
, 
Œue
);

4156 
	`CÚv”tToV¬ŸbË
(
ùx
);

4160 
off£t
 = 
	`AÎoÿ‹V¬ŸbË
(
asCD©aTy³
::
	`C»©eNuÎHªdË
(), 
Œue
);

4162 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_CÌVPŒ
, (
asWORD
)
off£t
);

4163 
ùx
->
bc
.
	`In¡rW_W
(
asBC_CmpPŒ
, ctx->
ty³
.
¡ackOff£t
, 
off£t
);

4164 
	`D—Îoÿ‹V¬ŸbË
(
off£t
);

4166 
aá”Lab–
 = 
ÃxtLab–
++;

4167 
ùx
->
bc
.
	`In¡rDWORD
(
asBC_JZ
, 
aá”Lab–
);

4170 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_PSF
, ctx->
ty³
.
¡ackOff£t
);

4171 
ùx
->
bc
.
	`In¡r
(
asBC_RDSPŒ
);

4172 
ùx
->
ty³
.
d©aTy³
.
	`MakeReã»nû
(
çl£
);

4174 
asCTy³Info
 
objTy³
 = 
ùx
->
ty³
;

4175 
asCA¼ay
<
asSEx´CÚ‹xt
 *> 
¬gs
;

4176 
	`MakeFunùiÚC®l
(
ùx
, 
İs
[0], 
objTy³
.
d©aTy³
.
	`G‘ObjeùTy³
(), 
¬gs
, 
node
);

4178 
ùx
->
bc
.
	`In¡r
(
asBC_PİPŒ
);

4180 
’dLab–
 = 
ÃxtLab–
++;

4182 
ùx
->
bc
.
	`In¡rINT
(
asBC_JMP
, 
’dLab–
);

4183 
ùx
->
bc
.
	`Lab–
(()
aá”Lab–
);

4186 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_CÌVPŒ
, ctx->
ty³
.
¡ackOff£t
);

4187 
ùx
->
bc
.
	`Lab–
(()
’dLab–
);

4190 
	`R–—£TempÜ¬yV¬ŸbË
(
objTy³
, &
ùx
->
bc
);

4193 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_PSF
, ctx->
ty³
.
¡ackOff£t
);

4197 
asCSütFunùiÚ
 *
func
 = 
’gše
->
sütFunùiÚs
[
İs
[0]];

4198 
ùx
->
ty³
.
	`S‘
(
func
->
»tuºTy³
);

4201 ifĞ
İs
.
	`G‘L’gth
() == 0 )

4204  
n
 = 0;‚ < 
beh
->
İ”©Üs
.
	`G‘L’gth
();‚+= 2 )

4206 ifĞ(
isEx¶ic™
 && 
asBEHAVE_REF_CAST
 =ğ
beh
->
İ”©Üs
[
n
]) ||

4207 
asBEHAVE_IMPLICIT_REF_CAST
 =ğ
beh
->
İ”©Üs
[
n
] )

4209 
funcId
 = 
beh
->
İ”©Üs
[
n
+1];

4212 
asCSütFunùiÚ
 *
func
 = 
’gše
->
sütFunùiÚs
[
funcId
];

4213 ifĞ
func
->
·¿m‘”Ty³s
.
	`G‘L’gth
() != 1 ||

4214 
func
->
·¿m‘”Ty³s
[0].
	`G‘Tok’Ty³
(è!ğ
‰Que¡iÚ
 ||

4215 
func
->
šOutFÏgs
[0] !ğ
asTM_OUTREF
 )

4218 
İs
.
	`PushLa¡
(
funcId
);

4223 
	`asASSERT
Ğ
İs
.
	`G‘L’gth
() <= 1 );

4225 ifĞ
İs
.
	`G‘L’gth
() == 1 )

4227 ifĞ
g’”©eCode
 )

4229 
	`asASSERT
(
to
.
	`IsObjeùHªdË
());

4232 
¡ackOff£t
 = 
	`AÎoÿ‹V¬ŸbËNÙIn
(
to
, 
Œue
, 
çl£
, 
ùx
);

4235 
asCD©aTy³
 
	`toRef
(
to
);

4236 
toRef
.
	`MakeReã»nû
(
Œue
);

4237 
asCA¼ay
<
asSEx´CÚ‹xt
 *> 
¬gs
;

4238 
asSEx´CÚ‹xt
 
	`¬g
(
’gše
);

4239 
¬g
.
bc
.
	`In¡rSHORT
(
asBC_PSF
, ()
¡ackOff£t
);

4241 
¬g
.
ty³
.
	`S‘V¬ŸbË
(
toRef
, 
¡ackOff£t
, 
çl£
);

4242 
¬g
.
ty³
.
isLV®ue
 = 
Œue
;

4243 
¬g
.
ty³
.
isEx¶ic™HªdË
 = 
Œue
;

4244 
¬gs
.
	`PushLa¡
(&
¬g
);

4246 
asCTy³Info
 
´ev
 = 
ùx
->
ty³
;

4249 
	`MakeFunùiÚC®l
(
ùx
, 
İs
[0], ctx->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
(), 
¬gs
, 
node
);

4252 
	`R–—£TempÜ¬yV¬ŸbË
(
´ev
, &
ùx
->
bc
);

4256 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
toRef
, 
¡ackOff£t
, 
Œue
);

4257 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_PSF
, ()
¡ackOff£t
);

4262 
ùx
->
ty³
.
	`S‘
(
to
);

4268  
cÚv”siÚDÚe
;

4269 
	}
}

4271 
asUINT
 
	gasCComp”
::
	$Im¶ic™CÚvPrim™iveToPrim™ive
(
asSEx´CÚ‹xt
 *
ùx
, cÚ¡ 
asCD©aTy³
 &
toOrig
, 
asCSütNode
 *
node
, 
EIm¶ic™CÚv
 
cÚvTy³
, 
boŞ
 
g’”©eCode
)

4273 
asCD©aTy³
 
to
 = 
toOrig
;

4274 
to
.
	`MakeReã»nû
(
çl£
);

4275 
	`asASSERT
Ğ!
ùx
->
ty³
.
d©aTy³
.
	`IsReã»nû
() );

4278 ifĞ
to
.
	`IsEqu®Exû±CÚ¡
(
ùx
->
ty³
.
d©aTy³
) )

4281 
ùx
->
ty³
.
d©aTy³
.
	`MakeR—dOÆy
(
to
.
	`IsR—dOÆy
());

4282  
asCC_NO_CONV
;

4286 
asUINT
 
co¡
 = 
asCC_NO_CONV
;

4287 ifĞ(
to
.
	`IsIÁeg”Ty³
(è||o.
	`IsUnsigÃdTy³
()è&& (
ùx
->
ty³
.
d©aTy³
.
	`IsFlßtTy³
(è|| ctx->ty³.d©aTy³.
	`IsDoubËTy³
()) )

4288 
co¡
 = 
asCC_INT_FLOAT_CONV
;

4289 ifĞ(
to
.
	`IsFlßtTy³
(è||o.
	`IsDoubËTy³
()è&& (
ùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
(è|| ctx->ty³.d©aTy³.
	`IsUnsigÃdTy³
(è|| ctx->ty³.d©aTy³.
	`IsEnumTy³
()) )

4290 
co¡
 = 
asCC_INT_FLOAT_CONV
;

4291 ifĞ
to
.
	`IsUnsigÃdTy³
(è&& 
ùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
() )

4292 
co¡
 = 
asCC_SIGNED_CONV
;

4293 ifĞ
to
.
	`IsIÁeg”Ty³
(è&& (
ùx
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
(è|| ctx->ty³.d©aTy³.
	`IsEnumTy³
()) )

4294 
co¡
 = 
asCC_SIGNED_CONV
;

4295 ifĞ
to
.
	`G‘SizeInMemÜyBy‹s
(è|| 
ùx
->
ty³
.
d©aTy³
.GetSizeInMemoryBytes() )

4296 
co¡
 = 
asCC_PRIMITIVE_SIZE_CONV
;

4299 ifĞ
ùx
->
ty³
.
isCÚ¡ªt
 )

4301 
	`Im¶ic™CÚv”siÚCÚ¡ªt
(
ùx
, 
to
, 
node
, 
cÚvTy³
);

4302 
ùx
->
ty³
.
d©aTy³
.
	`MakeR—dOÆy
(
to
.
	`IsR—dOÆy
());

4303  
co¡
;

4307 ifĞ
g’”©eCode
 )

4312 
s
 = 
ùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
();

4313 ifĞ
s
 < 4 )

4315 
	`CÚv”tToTempV¬ŸbË
(
ùx
);

4316 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
() )

4318 ifĞ
s
 == 1 )

4319 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_sbTOi
, ctx->
ty³
.
¡ackOff£t
);

4320 ifĞ
s
 == 2 )

4321 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_swTOi
, ctx->
ty³
.
¡ackOff£t
);

4322 
ùx
->
ty³
.
d©aTy³
.
	`S‘Tok’Ty³
(
‰IÁ
);

4324 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
() )

4326 ifĞ
s
 == 1 )

4327 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_ubTOi
, ctx->
ty³
.
¡ackOff£t
);

4328 ifĞ
s
 == 2 )

4329 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_uwTOi
, ctx->
ty³
.
¡ackOff£t
);

4330 
ùx
->
ty³
.
d©aTy³
.
	`S‘Tok’Ty³
(
‰UIÁ
);

4334 ifĞ(
to
.
	`IsIÁeg”Ty³
(è&&o.
	`G‘SizeInMemÜyDWÜds
() == 1) ||

4335 (
to
.
	`IsEnumTy³
(è&& 
cÚvTy³
 =ğ
asIC_EXPLICIT_VAL_CAST
) )

4337 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
() ||

4338 
ùx
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
() ||

4339 
ùx
->
ty³
.
d©aTy³
.
	`IsEnumTy³
() )

4341 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyDWÜds
() == 1 )

4343 
ùx
->
ty³
.
d©aTy³
.
	`S‘Tok’Ty³
(
to
.
	`G‘Tok’Ty³
());

4344 
ùx
->
ty³
.
d©aTy³
.
	`S‘ObjeùTy³
(
to
.
	`G‘ObjeùTy³
());

4348 
	`CÚv”tToTempV¬ŸbË
(
ùx
);

4349 
	`R–—£TempÜ¬yV¬ŸbË
(
ùx
->
ty³
, &ùx->
bc
);

4350 
off£t
 = 
	`AÎoÿ‹V¬ŸbË
(
to
, 
Œue
);

4351 
ùx
->
bc
.
	`In¡rW_W
(
asBC_i64TOi
, 
off£t
, ctx->
ty³
.
¡ackOff£t
);

4352 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
to
, 
off£t
, 
Œue
);

4355 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsFlßtTy³
() )

4357 
	`CÚv”tToTempV¬ŸbË
(
ùx
);

4358 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_fTOi
, ctx->
ty³
.
¡ackOff£t
);

4359 
ùx
->
ty³
.
d©aTy³
.
	`S‘Tok’Ty³
(
to
.
	`G‘Tok’Ty³
());

4360 
ùx
->
ty³
.
d©aTy³
.
	`S‘ObjeùTy³
(
to
.
	`G‘ObjeùTy³
());

4362 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsDoubËTy³
() )

4364 
	`CÚv”tToTempV¬ŸbË
(
ùx
);

4365 
	`R–—£TempÜ¬yV¬ŸbË
(
ùx
->
ty³
, &ùx->
bc
);

4366 
off£t
 = 
	`AÎoÿ‹V¬ŸbË
(
to
, 
Œue
);

4367 
ùx
->
bc
.
	`In¡rW_W
(
asBC_dTOi
, 
off£t
, ctx->
ty³
.
¡ackOff£t
);

4368 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
to
, 
off£t
, 
Œue
);

4372 
s
 = 
to
.
	`G‘SizeInMemÜyBy‹s
();

4373 ifĞ
s
 < 4 )

4375 
	`CÚv”tToTempV¬ŸbË
(
ùx
);

4376 ifĞ
s
 == 1 )

4377 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_iTOb
, ctx->
ty³
.
¡ackOff£t
);

4378 ifĞ
s
 == 2 )

4379 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_iTOw
, ctx->
ty³
.
¡ackOff£t
);

4382 ifĞ
to
.
	`IsIÁeg”Ty³
(è&&o.
	`G‘SizeInMemÜyDWÜds
() == 2 )

4384 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
() ||

4385 
ùx
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
() ||

4386 
ùx
->
ty³
.
d©aTy³
.
	`IsEnumTy³
() )

4388 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyDWÜds
() == 2 )

4390 
ùx
->
ty³
.
d©aTy³
.
	`S‘Tok’Ty³
(
to
.
	`G‘Tok’Ty³
());

4391 
ùx
->
ty³
.
d©aTy³
.
	`S‘ObjeùTy³
(
to
.
	`G‘ObjeùTy³
());

4395 
	`CÚv”tToTempV¬ŸbË
(
ùx
);

4396 
	`R–—£TempÜ¬yV¬ŸbË
(
ùx
->
ty³
, &ùx->
bc
);

4397 
off£t
 = 
	`AÎoÿ‹V¬ŸbË
(
to
, 
Œue
);

4398 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
() )

4399 
ùx
->
bc
.
	`In¡rW_W
(
asBC_uTOi64
, 
off£t
, ctx->
ty³
.
¡ackOff£t
);

4401 
ùx
->
bc
.
	`In¡rW_W
(
asBC_iTOi64
, 
off£t
, ctx->
ty³
.
¡ackOff£t
);

4402 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
to
, 
off£t
, 
Œue
);

4405 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsFlßtTy³
() )

4407 
	`CÚv”tToTempV¬ŸbË
(
ùx
);

4408 
	`R–—£TempÜ¬yV¬ŸbË
(
ùx
->
ty³
, &ùx->
bc
);

4409 
off£t
 = 
	`AÎoÿ‹V¬ŸbË
(
to
, 
Œue
);

4410 
ùx
->
bc
.
	`In¡rW_W
(
asBC_fTOi64
, 
off£t
, ctx->
ty³
.
¡ackOff£t
);

4411 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
to
, 
off£t
, 
Œue
);

4413 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsDoubËTy³
() )

4415 
	`CÚv”tToTempV¬ŸbË
(
ùx
);

4416 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_dTOi64
, ctx->
ty³
.
¡ackOff£t
);

4417 
ùx
->
ty³
.
d©aTy³
.
	`S‘Tok’Ty³
(
to
.
	`G‘Tok’Ty³
());

4418 
ùx
->
ty³
.
d©aTy³
.
	`S‘ObjeùTy³
(
to
.
	`G‘ObjeùTy³
());

4421 ifĞ
to
.
	`IsUnsigÃdTy³
(è&&o.
	`G‘SizeInMemÜyDWÜds
() == 1 )

4423 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
() ||

4424 
ùx
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
() ||

4425 
ùx
->
ty³
.
d©aTy³
.
	`IsEnumTy³
() )

4427 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyDWÜds
() == 1 )

4429 
ùx
->
ty³
.
d©aTy³
.
	`S‘Tok’Ty³
(
to
.
	`G‘Tok’Ty³
());

4430 
ùx
->
ty³
.
d©aTy³
.
	`S‘ObjeùTy³
(
to
.
	`G‘ObjeùTy³
());

4434 
	`CÚv”tToTempV¬ŸbË
(
ùx
);

4435 
	`R–—£TempÜ¬yV¬ŸbË
(
ùx
->
ty³
, &ùx->
bc
);

4436 
off£t
 = 
	`AÎoÿ‹V¬ŸbË
(
to
, 
Œue
);

4437 
ùx
->
bc
.
	`In¡rW_W
(
asBC_i64TOi
, 
off£t
, ctx->
ty³
.
¡ackOff£t
);

4438 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
to
, 
off£t
, 
Œue
);

4441 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsFlßtTy³
() )

4443 
	`CÚv”tToTempV¬ŸbË
(
ùx
);

4444 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_fTOu
, ctx->
ty³
.
¡ackOff£t
);

4445 
ùx
->
ty³
.
d©aTy³
.
	`S‘Tok’Ty³
(
to
.
	`G‘Tok’Ty³
());

4446 
ùx
->
ty³
.
d©aTy³
.
	`S‘ObjeùTy³
(
to
.
	`G‘ObjeùTy³
());

4448 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsDoubËTy³
() )

4450 
	`CÚv”tToTempV¬ŸbË
(
ùx
);

4451 
	`R–—£TempÜ¬yV¬ŸbË
(
ùx
->
ty³
, &ùx->
bc
);

4452 
off£t
 = 
	`AÎoÿ‹V¬ŸbË
(
to
, 
Œue
);

4453 
ùx
->
bc
.
	`In¡rW_W
(
asBC_dTOu
, 
off£t
, ctx->
ty³
.
¡ackOff£t
);

4454 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
to
, 
off£t
, 
Œue
);

4458 
s
 = 
to
.
	`G‘SizeInMemÜyBy‹s
();

4459 ifĞ
s
 < 4 )

4461 
	`CÚv”tToTempV¬ŸbË
(
ùx
);

4462 ifĞ
s
 == 1 )

4463 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_iTOb
, ctx->
ty³
.
¡ackOff£t
);

4464 ifĞ
s
 == 2 )

4465 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_iTOw
, ctx->
ty³
.
¡ackOff£t
);

4468 ifĞ
to
.
	`IsUnsigÃdTy³
(è&&o.
	`G‘SizeInMemÜyDWÜds
() == 2 )

4470 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
() ||

4471 
ùx
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
() ||

4472 
ùx
->
ty³
.
d©aTy³
.
	`IsEnumTy³
() )

4474 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyDWÜds
() == 2 )

4476 
ùx
->
ty³
.
d©aTy³
.
	`S‘Tok’Ty³
(
to
.
	`G‘Tok’Ty³
());

4477 
ùx
->
ty³
.
d©aTy³
.
	`S‘ObjeùTy³
(
to
.
	`G‘ObjeùTy³
());

4481 
	`CÚv”tToTempV¬ŸbË
(
ùx
);

4482 
	`R–—£TempÜ¬yV¬ŸbË
(
ùx
->
ty³
, &ùx->
bc
);

4483 
off£t
 = 
	`AÎoÿ‹V¬ŸbË
(
to
, 
Œue
);

4484 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
() )

4485 
ùx
->
bc
.
	`In¡rW_W
(
asBC_uTOi64
, 
off£t
, ctx->
ty³
.
¡ackOff£t
);

4487 
ùx
->
bc
.
	`In¡rW_W
(
asBC_iTOi64
, 
off£t
, ctx->
ty³
.
¡ackOff£t
);

4488 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
to
, 
off£t
, 
Œue
);

4491 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsFlßtTy³
() )

4493 
	`CÚv”tToTempV¬ŸbË
(
ùx
);

4494 
	`R–—£TempÜ¬yV¬ŸbË
(
ùx
->
ty³
, &ùx->
bc
);

4495 
off£t
 = 
	`AÎoÿ‹V¬ŸbË
(
to
, 
Œue
);

4496 
ùx
->
bc
.
	`In¡rW_W
(
asBC_fTOu64
, 
off£t
, ctx->
ty³
.
¡ackOff£t
);

4497 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
to
, 
off£t
, 
Œue
);

4499 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsDoubËTy³
() )

4501 
	`CÚv”tToTempV¬ŸbË
(
ùx
);

4502 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_dTOu64
, ctx->
ty³
.
¡ackOff£t
);

4503 
ùx
->
ty³
.
d©aTy³
.
	`S‘Tok’Ty³
(
to
.
	`G‘Tok’Ty³
());

4504 
ùx
->
ty³
.
d©aTy³
.
	`S‘ObjeùTy³
(
to
.
	`G‘ObjeùTy³
());

4507 ifĞ
to
.
	`IsFlßtTy³
() )

4509 ifĞ(
ùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
(è|| ctx->ty³.d©aTy³.
	`IsEnumTy³
()è&& ctx->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 1 )

4511 
	`CÚv”tToTempV¬ŸbË
(
ùx
);

4512 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_iTOf
, ctx->
ty³
.
¡ackOff£t
);

4513 
ùx
->
ty³
.
d©aTy³
.
	`S‘Tok’Ty³
(
to
.
	`G‘Tok’Ty³
());

4514 
ùx
->
ty³
.
d©aTy³
.
	`S‘ObjeùTy³
(
to
.
	`G‘ObjeùTy³
());

4516 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
(è&& ctx->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 2 )

4518 
	`CÚv”tToTempV¬ŸbË
(
ùx
);

4519 
	`R–—£TempÜ¬yV¬ŸbË
(
ùx
->
ty³
, &ùx->
bc
);

4520 
off£t
 = 
	`AÎoÿ‹V¬ŸbË
(
to
, 
Œue
);

4521 
ùx
->
bc
.
	`In¡rW_W
(
asBC_i64TOf
, 
off£t
, ctx->
ty³
.
¡ackOff£t
);

4522 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
to
, 
off£t
, 
Œue
);

4524 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
(è&& ctx->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 1 )

4526 
	`CÚv”tToTempV¬ŸbË
(
ùx
);

4527 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_uTOf
, ctx->
ty³
.
¡ackOff£t
);

4528 
ùx
->
ty³
.
d©aTy³
.
	`S‘Tok’Ty³
(
to
.
	`G‘Tok’Ty³
());

4529 
ùx
->
ty³
.
d©aTy³
.
	`S‘ObjeùTy³
(
to
.
	`G‘ObjeùTy³
());

4531 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
(è&& ctx->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 2 )

4533 
	`CÚv”tToTempV¬ŸbË
(
ùx
);

4534 
	`R–—£TempÜ¬yV¬ŸbË
(
ùx
->
ty³
, &ùx->
bc
);

4535 
off£t
 = 
	`AÎoÿ‹V¬ŸbË
(
to
, 
Œue
);

4536 
ùx
->
bc
.
	`In¡rW_W
(
asBC_u64TOf
, 
off£t
, ctx->
ty³
.
¡ackOff£t
);

4537 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
to
, 
off£t
, 
Œue
);

4539 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsDoubËTy³
() )

4541 
	`CÚv”tToTempV¬ŸbË
(
ùx
);

4542 
	`R–—£TempÜ¬yV¬ŸbË
(
ùx
->
ty³
, &ùx->
bc
);

4543 
off£t
 = 
	`AÎoÿ‹V¬ŸbË
(
to
, 
Œue
);

4544 
ùx
->
bc
.
	`In¡rW_W
(
asBC_dTOf
, 
off£t
, ctx->
ty³
.
¡ackOff£t
);

4545 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
to
, 
off£t
, 
Œue
);

4548 ifĞ
to
.
	`IsDoubËTy³
() )

4550 ifĞ(
ùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
(è|| ctx->ty³.d©aTy³.
	`IsEnumTy³
()è&& ctx->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 1 )

4552 
	`CÚv”tToTempV¬ŸbË
(
ùx
);

4553 
	`R–—£TempÜ¬yV¬ŸbË
(
ùx
->
ty³
, &ùx->
bc
);

4554 
off£t
 = 
	`AÎoÿ‹V¬ŸbË
(
to
, 
Œue
);

4555 
ùx
->
bc
.
	`In¡rW_W
(
asBC_iTOd
, 
off£t
, ctx->
ty³
.
¡ackOff£t
);

4556 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
to
, 
off£t
, 
Œue
);

4558 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
(è&& ctx->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 2 )

4560 
	`CÚv”tToTempV¬ŸbË
(
ùx
);

4561 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_i64TOd
, ctx->
ty³
.
¡ackOff£t
);

4562 
ùx
->
ty³
.
d©aTy³
.
	`S‘Tok’Ty³
(
to
.
	`G‘Tok’Ty³
());

4563 
ùx
->
ty³
.
d©aTy³
.
	`S‘ObjeùTy³
(
to
.
	`G‘ObjeùTy³
());

4565 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
(è&& ctx->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 1 )

4567 
	`CÚv”tToTempV¬ŸbË
(
ùx
);

4568 
	`R–—£TempÜ¬yV¬ŸbË
(
ùx
->
ty³
, &ùx->
bc
);

4569 
off£t
 = 
	`AÎoÿ‹V¬ŸbË
(
to
, 
Œue
);

4570 
ùx
->
bc
.
	`In¡rW_W
(
asBC_uTOd
, 
off£t
, ctx->
ty³
.
¡ackOff£t
);

4571 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
to
, 
off£t
, 
Œue
);

4573 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
(è&& ctx->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 2 )

4575 
	`CÚv”tToTempV¬ŸbË
(
ùx
);

4576 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_u64TOd
, ctx->
ty³
.
¡ackOff£t
);

4577 
ùx
->
ty³
.
d©aTy³
.
	`S‘Tok’Ty³
(
to
.
	`G‘Tok’Ty³
());

4578 
ùx
->
ty³
.
d©aTy³
.
	`S‘ObjeùTy³
(
to
.
	`G‘ObjeùTy³
());

4580 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsFlßtTy³
() )

4582 
	`CÚv”tToTempV¬ŸbË
(
ùx
);

4583 
	`R–—£TempÜ¬yV¬ŸbË
(
ùx
->
ty³
, &ùx->
bc
);

4584 
off£t
 = 
	`AÎoÿ‹V¬ŸbË
(
to
, 
Œue
);

4585 
ùx
->
bc
.
	`In¡rW_W
(
asBC_fTOd
, 
off£t
, ctx->
ty³
.
¡ackOff£t
);

4586 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
to
, 
off£t
, 
Œue
);

4592 ifĞ(
to
.
	`IsIÁeg”Ty³
(è||o.
	`IsUnsigÃdTy³
() ||

4593 
to
.
	`IsFlßtTy³
(è||o.
	`IsDoubËTy³
() ||

4594 (
to
.
	`IsEnumTy³
(è&& 
cÚvTy³
 =ğ
asIC_EXPLICIT_VAL_CAST
)) &&

4595 (
ùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
(è|| ctx->ty³.d©aTy³.
	`IsUnsigÃdTy³
() ||

4596 
ùx
->
ty³
.
d©aTy³
.
	`IsFlßtTy³
(è|| ctx->ty³.d©aTy³.
	`IsDoubËTy³
() ||

4597 
ùx
->
ty³
.
d©aTy³
.
	`IsEnumTy³
()) )

4599 
ùx
->
ty³
.
d©aTy³
.
	`S‘Tok’Ty³
(
to
.
	`G‘Tok’Ty³
());

4600 
ùx
->
ty³
.
d©aTy³
.
	`S‘ObjeùTy³
(
to
.
	`G‘ObjeùTy³
());

4605 
ùx
->
ty³
.
d©aTy³
.
	`MakeR—dOÆy
(
to
.
	`IsR—dOÆy
());

4606  
co¡
;

4607 
	}
}

4609 
asUINT
 
	gasCComp”
::
	$Im¶ic™CÚv”siÚ
(
asSEx´CÚ‹xt
 *
ùx
, cÚ¡ 
asCD©aTy³
 &
to
, 
asCSütNode
 *
node
, 
EIm¶ic™CÚv
 
cÚvTy³
, 
boŞ
 
g’”©eCode
, boŞ 
®lowObjeùCÚ¡ruù
)

4611 
	`asASSERT
Ğ
ùx
->
ty³
.
d©aTy³
.
	`G‘Tok’Ty³
(è!ğ
‰UÄecognizedTok’
 ||

4612 
ùx
->
ty³
.
d©aTy³
.
	`IsNuÎHªdË
() );

4615 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`G‘Tok’Ty³
(è=ğ
‰Void
 )

4616  
asCC_NO_CONV
;

4619 ifĞ
to
.
	`G‘Tok’Ty³
(è=ğ
‰Que¡iÚ
 )

4622 
	`asASSERT
Ğ!
g’”©eCode
 );

4624 
ùx
->
ty³
.
d©aTy³
 = 
to
;

4626  
asCC_VARIABLE_CONV
;

4629 ifĞ
to
.
	`IsPrim™ive
() )

4631 ifĞ!
ùx
->
ty³
.
d©aTy³
.
	`IsPrim™ive
() )

4632  
	`Im¶ic™CÚvObjeùToPrim™ive
(
ùx
, 
to
, 
node
, 
cÚvTy³
, 
g’”©eCode
);

4634  
	`Im¶ic™CÚvPrim™iveToPrim™ive
(
ùx
, 
to
, 
node
, 
cÚvTy³
, 
g’”©eCode
);

4638 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsPrim™ive
() )

4639  
	`Im¶ic™CÚvPrim™iveToObjeù
(
ùx
, 
to
, 
node
, 
cÚvTy³
, 
g’”©eCode
, 
®lowObjeùCÚ¡ruù
);

4640 ifĞ
ùx
->
ty³
.
	`IsNuÎCÚ¡ªt
(è|| ctx->ty³.
d©aTy³
.
	`G‘ObjeùTy³
() )

4641  
	`Im¶ic™CÚvObjeùToObjeù
(
ùx
, 
to
, 
node
, 
cÚvTy³
, 
g’”©eCode
, 
®lowObjeùCÚ¡ruù
);

4644  
asCC_NO_CONV
;

4645 
	}
}

4647 
asUINT
 
	gasCComp”
::
	$Im¶ic™CÚvObjeùToPrim™ive
(
asSEx´CÚ‹xt
 *
ùx
, cÚ¡ 
asCD©aTy³
 &
to
, 
asCSütNode
 *
node
, 
EIm¶ic™CÚv
 
cÚvTy³
, 
boŞ
 
g’”©eCode
)

4649 ifĞ
ùx
->
ty³
.
isEx¶ic™HªdË
 )

4652 ifĞ
cÚvTy³
 !ğ
asIC_IMPLICIT_CONV
 && 
node
 )

4654 
asCSŒšg
 
¡r
;

4655 
¡r
.
	`FÜm©
(
TXT_CANT_IMPLICITLY_CONVERT_s_TO_s
, 
ùx
->
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
(), 
to
.Format().AddressOf());

4656 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

4658  
asCC_NO_CONV
;

4665 
asCA¼ay
<> 
funcs
;

4666 
asSTy³Behaviour
 *
beh
 = 
ùx
->
ty³
.
d©aTy³
.
	`G‘Behaviour
();

4667 ifĞ
beh
 )

4669 ifĞ
cÚvTy³
 =ğ
asIC_EXPLICIT_VAL_CAST
 )

4671  
n
 = 0;‚ < 
beh
->
İ”©Üs
.
	`G‘L’gth
();‚ += 2 )

4674 ifĞ(
beh
->
İ”©Üs
[
n
] =ğ
asBEHAVE_VALUE_CAST
 ||

4675 
beh
->
İ”©Üs
[
n
] =ğ
asBEHAVE_IMPLICIT_VALUE_CAST
) &&

4676 
bud”
->
	`G‘FunùiÚDesütiÚ
(
beh
->
İ”©Üs
[
n
+1])->
»tuºTy³
.
	`IsPrim™ive
() )

4677 
funcs
.
	`PushLa¡
(
beh
->
İ”©Üs
[
n
+1]);

4682  
n
 = 0;‚ < 
beh
->
İ”©Üs
.
	`G‘L’gth
();‚ += 2 )

4685 ifĞ
beh
->
İ”©Üs
[
n
] =ğ
asBEHAVE_IMPLICIT_VALUE_CAST
 &&

4686 
bud”
->
	`G‘FunùiÚDesütiÚ
(
beh
->
İ”©Üs
[
n
+1])->
»tuºTy³
.
	`IsPrim™ive
() )

4687 
funcs
.
	`PushLa¡
(
beh
->
İ”©Üs
[
n
+1]);

4694 
eTok’Ty³
 
m©chMtx
[10][10] =

4696 {
‰DoubË
, 
‰Flßt
, 
‰IÁ64
, 
‰UIÁ64
, 
‰IÁ
, 
‰UIÁ
, 
‰IÁ16
, 
‰UIÁ16
, 
‰IÁ8
, 
‰UIÁ8
},

4697 {
‰Flßt
, 
‰DoubË
, 
‰IÁ64
, 
‰UIÁ64
, 
‰IÁ
, 
‰UIÁ
, 
‰IÁ16
, 
‰UIÁ16
, 
‰IÁ8
, 
‰UIÁ8
},

4698 {
‰IÁ64
, 
‰UIÁ64
, 
‰IÁ
, 
‰UIÁ
, 
‰IÁ16
, 
‰UIÁ16
, 
‰IÁ8
, 
‰UIÁ8
, 
‰DoubË
, 
‰Flßt
},

4699 {
‰UIÁ64
, 
‰IÁ64
, 
‰UIÁ
, 
‰IÁ
, 
‰UIÁ16
, 
‰IÁ16
, 
‰UIÁ8
, 
‰IÁ8
, 
‰DoubË
, 
‰Flßt
},

4700 {
‰IÁ
, 
‰UIÁ
, 
‰IÁ64
, 
‰UIÁ64
, 
‰IÁ16
, 
‰UIÁ16
, 
‰IÁ8
, 
‰UIÁ8
, 
‰DoubË
, 
‰Flßt
},

4701 {
‰UIÁ
, 
‰IÁ
, 
‰UIÁ64
, 
‰IÁ64
, 
‰UIÁ16
, 
‰IÁ16
, 
‰UIÁ8
, 
‰IÁ8
, 
‰DoubË
, 
‰Flßt
},

4702 {
‰IÁ16
, 
‰UIÁ16
, 
‰IÁ
, 
‰UIÁ
, 
‰IÁ64
, 
‰UIÁ64
, 
‰IÁ8
, 
‰UIÁ8
, 
‰DoubË
, 
‰Flßt
},

4703 {
‰UIÁ16
, 
‰IÁ16
, 
‰UIÁ
, 
‰IÁ
, 
‰UIÁ64
, 
‰IÁ64
, 
‰UIÁ8
, 
‰IÁ8
, 
‰DoubË
, 
‰Flßt
},

4704 {
‰IÁ8
, 
‰UIÁ8
, 
‰IÁ16
, 
‰UIÁ16
, 
‰IÁ
, 
‰UIÁ
, 
‰IÁ64
, 
‰UIÁ64
, 
‰DoubË
, 
‰Flßt
},

4705 {
‰UIÁ8
, 
‰IÁ8
, 
‰UIÁ16
, 
‰IÁ16
, 
‰UIÁ
, 
‰IÁ
, 
‰UIÁ64
, 
‰IÁ64
, 
‰DoubË
, 
‰Flßt
},

4709 
eTok’Ty³
 *
row
 = 0;

4710  
ty³
 = 0;ype < 10;ype++ )

4712 ifĞ
to
.
	`G‘Tok’Ty³
(è=ğ
m©chMtx
[
ty³
][0] )

4714 
row
 = &
m©chMtx
[
ty³
][0];

4720 
funcId
 = 0;

4721 ifĞ
row
 )

4723 
asCD©aTy³
 
	`rg‘
(
to
);

4726  
©‹m±
 = 0;‡‰em± < 10 && 
funcId
 == 0;‡ttempt++ )

4728 
rg‘
.
	`S‘Tok’Ty³
(
row
[
©‹m±
]);

4729  
n
 = 0;‚ < 
funcs
.
	`G‘L’gth
();‚++ )

4731 
asCSütFunùiÚ
 *
desü
 = 
bud”
->
	`G‘FunùiÚDesütiÚ
(
funcs
[
n
]);

4732 ifĞ
desü
->
»tuºTy³
.
	`IsEqu®Exû±CÚ¡
(
rg‘
) )

4734 
funcId
 = 
funcs
[
n
];

4742 ifĞ
funcId
 != 0 )

4744 
asCSütFunùiÚ
 *
desü
 = 
bud”
->
	`G‘FunùiÚDesütiÚ
(
funcId
);

4745 ifĞ
g’”©eCode
 )

4747 
asCTy³Info
 
objTy³
 = 
ùx
->
ty³
;

4749 
	`D”eã»nû
(
ùx
, 
Œue
);

4751 
	`P”fÜmFunùiÚC®l
(
funcId
, 
ùx
);

4753 
	`R–—£TempÜ¬yV¬ŸbË
(
objTy³
, &
ùx
->
bc
);

4756 
ùx
->
ty³
.
	`S‘
(
desü
->
»tuºTy³
);

4759  
asCC_OBJ_TO_PRIMITIVE_CONV
 + 
	`Im¶ic™CÚv”siÚ
(
ùx
, 
to
, 
node
, 
cÚvTy³
, 
g’”©eCode
, 
çl£
);

4763 ifĞ
cÚvTy³
 !ğ
asIC_IMPLICIT_CONV
 && 
node
 )

4765 
asCSŒšg
 
¡r
;

4766 
¡r
.
	`FÜm©
(
TXT_CANT_IMPLICITLY_CONVERT_s_TO_s
, 
ùx
->
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
(), 
to
.Format().AddressOf());

4767 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

4771  
asCC_NO_CONV
;

4772 
	}
}

4775 
asUINT
 
	gasCComp”
::
	$Im¶ic™CÚvObjeùRef
(
asSEx´CÚ‹xt
 *
ùx
, cÚ¡ 
asCD©aTy³
 &
to
, 
asCSütNode
 *
node
, 
EIm¶ic™CÚv
 
cÚvTy³
, 
boŞ
 
g’”©eCode
)

4778 ifĞ
ùx
->
ty³
.
	`IsNuÎCÚ¡ªt
() )

4780 ifĞ
to
.
	`IsObjeùHªdË
() )

4782 
ùx
->
ty³
.
d©aTy³
 = 
to
;

4783  
asCC_REF_CONV
;

4785  
asCC_NO_CONV
;

4788 
	`asASSERT
(
ùx
->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
());

4791 ifĞ
to
.
	`G‘ObjeùTy³
(è!ğ
ùx
->
ty³
.
d©aTy³
.GetObjectType() )

4794 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
()->
	`Im¶em’ts
(
to
.GetObjectType()) )

4796 
ùx
->
ty³
.
d©aTy³
.
	`S‘ObjeùTy³
(
to
.
	`G‘ObjeùTy³
());

4797  
asCC_REF_CONV
;

4800 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
()->
	`D”ivesFrom
(
to
.GetObjectType()) )

4802 
ùx
->
ty³
.
d©aTy³
.
	`S‘ObjeùTy³
(
to
.
	`G‘ObjeùTy³
());

4803  
asCC_REF_CONV
;

4806 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
(è!ğ
to
.GetObjectType() )

4809 
boŞ
 
isCÚ¡
 = 
çl£
;

4810 ifĞ(
ùx
->
ty³
.
d©aTy³
.
	`IsObjeùHªdË
(è&& ctx->ty³.d©aTy³.
	`IsHªdËToCÚ¡
()) ||

4811 (!
ùx
->
ty³
.
d©aTy³
.
	`IsObjeùHªdË
(è&& ctx->ty³.d©aTy³.
	`IsR—dOÆy
()) )

4812 
isCÚ¡
 = 
Œue
;

4815 
	`CompeRefCa¡
(
ùx
, 
to
, 
cÚvTy³
 =ğ
asIC_EXPLICIT_REF_CAST
, 
node
, 
g’”©eCode
);

4817 
ùx
->
ty³
.
d©aTy³
.
	`MakeHªdËToCÚ¡
(
isCÚ¡
);

4820 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
(è=ğ
to
.GetObjectType() )

4821  
asCC_REF_CONV
;

4826 ifĞ
to
.
	`G‘FuncDef
(è&& 
ùx
->
ty³
.
d©aTy³
.GetFuncDef() &&

4827 
to
.
	`G‘FuncDef
(è!ğ
ùx
->
ty³
.
d©aTy³
.GetFuncDef() )

4829 
asCSütFunùiÚ
 *
toFunc
 = 
to
.
	`G‘FuncDef
();

4830 
asCSütFunùiÚ
 *
äomFunc
 = 
ùx
->
ty³
.
d©aTy³
.
	`G‘FuncDef
();

4831 ifĞ
toFunc
->
	`IsSigÇtu»Exû±NameEqu®
(
äomFunc
) )

4833 
ùx
->
ty³
.
d©aTy³
.
	`S‘FuncDef
(
toFunc
);

4834  
asCC_REF_CONV
;

4838  
asCC_NO_CONV
;

4839 
	}
}

4841 
asUINT
 
	gasCComp”
::
	$Im¶ic™CÚvObjeùV®ue
(
asSEx´CÚ‹xt
 *
ùx
, cÚ¡ 
asCD©aTy³
 &
to
, 
asCSütNode
 * , 
EIm¶ic™CÚv
 
cÚvTy³
, 
boŞ
 
g’”©eCode
)

4843 
asUINT
 
co¡
 = 
asCC_NO_CONV
;

4847 ifĞ
to
.
	`G‘ObjeùTy³
(è!ğ
ùx
->
ty³
.
d©aTy³
.GetObjectType() )

4851 
asCA¼ay
<> 
funcs
;

4852 
asSTy³Behaviour
 *
beh
 = 
ùx
->
ty³
.
d©aTy³
.
	`G‘Behaviour
();

4853 ifĞ
beh
 )

4855 ifĞ
cÚvTy³
 =ğ
asIC_EXPLICIT_VAL_CAST
 )

4857  
n
 = 0;‚ < 
beh
->
İ”©Üs
.
	`G‘L’gth
();‚ += 2 )

4860 ifĞ(
beh
->
İ”©Üs
[
n
] =ğ
asBEHAVE_VALUE_CAST
 ||

4861 
beh
->
İ”©Üs
[
n
] =ğ
asBEHAVE_IMPLICIT_VALUE_CAST
) &&

4862 
bud”
->
	`G‘FunùiÚDesütiÚ
(
beh
->
İ”©Üs
[
n
+1])->
»tuºTy³
.
	`G‘ObjeùTy³
(è=ğ
to
.GetObjectType() )

4863 
funcs
.
	`PushLa¡
(
beh
->
İ”©Üs
[
n
+1]);

4868  
n
 = 0;‚ < 
beh
->
İ”©Üs
.
	`G‘L’gth
();‚ += 2 )

4871 ifĞ
beh
->
İ”©Üs
[
n
] =ğ
asBEHAVE_IMPLICIT_VALUE_CAST
 &&

4872 
bud”
->
	`G‘FunùiÚDesütiÚ
(
beh
->
İ”©Üs
[
n
+1])->
»tuºTy³
.
	`G‘ObjeùTy³
(è=ğ
to
.GetObjectType() )

4873 
funcs
.
	`PushLa¡
(
beh
->
İ”©Üs
[
n
+1]);

4879 
	`asASSERT
Ğ
funcs
.
	`G‘L’gth
() <= 1 );

4881 ifĞ
funcs
.
	`G‘L’gth
() == 1 )

4883 
asCSütFunùiÚ
 *
f
 = 
bud”
->
	`G‘FunùiÚDesütiÚ
(
funcs
[0]);

4884 ifĞ
g’”©eCode
 )

4886 
asCTy³Info
 
objTy³
 = 
ùx
->
ty³
;

4887 
	`D”eã»nû
(
ùx
, 
Œue
);

4889 
boŞ
 
u£V¬ŸbË
 = 
çl£
;

4890 
¡ackOff£t
 = 0;

4892 ifĞ
f
->
	`DÛsR‘uºOnSck
() )

4894 
u£V¬ŸbË
 = 
Œue
;

4895 
¡ackOff£t
 = 
	`AÎoÿ‹V¬ŸbË
(
f
->
»tuºTy³
, 
Œue
);

4898 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_PSF
, (
¡ackOff£t
));

4902 
ùx
->
bc
.
	`In¡r
(
asBC_Sw­PŒ
);

4905 
	`P”fÜmFunùiÚC®l
(
funcs
[0], 
ùx
, 
çl£
, 0, 0, 
u£V¬ŸbË
, 
¡ackOff£t
);

4906 
	`R–—£TempÜ¬yV¬ŸbË
(
objTy³
, &
ùx
->
bc
);

4909 
ùx
->
ty³
.
	`S‘
(
f
->
»tuºTy³
);

4911 
co¡
 = 
asCC_TO_OBJECT_CONV
;

4915  
co¡
;

4916 
	}
}

4918 
asUINT
 
	gasCComp”
::
	$Im¶ic™CÚvObjeùToObjeù
(
asSEx´CÚ‹xt
 *
ùx
, cÚ¡ 
asCD©aTy³
 &
to
, 
asCSütNode
 *
node
, 
EIm¶ic™CÚv
 
cÚvTy³
, 
boŞ
 
g’”©eCode
, boŞ 
®lowObjeùCÚ¡ruù
)

4921 
asUINT
 
co¡
 = 
	`Im¶ic™CÚvObjeùRef
(
ùx
, 
to
, 
node
, 
cÚvTy³
, 
g’”©eCode
);

4925 ifĞ
to
.
	`G‘ObjeùTy³
(è&& (to.G‘ObjeùTy³()->
æags
 & 
asOBJ_ASHANDLE
è&&o.G‘ObjeùTy³(è!ğ
ùx
->
ty³
.
d©aTy³
.G‘ObjeùTy³(è&& 
®lowObjeùCÚ¡ruù
 )

4927 
asCA¼ay
<> 
funcs
;

4928 
funcs
 = 
to
.
	`G‘ObjeùTy³
()->
beh
.
cÚ¡ruùÜs
;

4930 
asCA¼ay
<
asSEx´CÚ‹xt
 *> 
¬gs
;

4931 
¬gs
.
	`PushLa¡
(
ùx
);

4933 
co¡
 = 
asCC_TO_OBJECT_CONV
 + 
	`M©chFunùiÚs
(
funcs
, 
¬gs
, 
node
, 0, 0, 
çl£
, 
Œue
, false);

4936 ifĞ
funcs
.
	`G‘L’gth
() == 1 )

4938 ifĞ
g’”©eCode
 )

4943 
asCTy³Info
 
‹mpObj
;

4944 
‹mpObj
.
d©aTy³
 = 
to
;

4945 
‹mpObj
.
d©aTy³
.
	`MakeReã»nû
(
çl£
);

4946 
‹mpObj
.
¡ackOff£t
 = ()
	`AÎoÿ‹V¬ŸbË
ÑempObj.
d©aTy³
, 
Œue
);

4947 
‹mpObj
.
d©aTy³
.
	`MakeReã»nû
(
Œue
);

4948 
‹mpObj
.
isTempÜ¬y
 = 
Œue
;

4949 
‹mpObj
.
isV¬ŸbË
 = 
Œue
;

4951 
boŞ
 
ÚH—p
 = 
	`IsV¬ŸbËOnH—p
(
‹mpObj
.
¡ackOff£t
);

4954 
asSEx´CÚ‹xt
 
	`e
(
’gše
);

4955 ifĞ
ÚH—p
 )

4956 
e
.
bc
.
	`In¡rSHORT
(
asBC_VAR
, 
‹mpObj
.
¡ackOff£t
);

4958 
	`P»·»FunùiÚC®l
(
funcs
[0], &
e
.
bc
, 
¬gs
);

4959 
	`MoveArgsToSck
(
funcs
[0], &
e
.
bc
, 
¬gs
, 
çl£
);

4962 ifĞ
ÚH—p
 )

4964 
off£t
 = 0;

4965 
asCSütFunùiÚ
 *
desü
 = 
bud”
->
	`G‘FunùiÚDesütiÚ
(
funcs
[0]);

4966 
off£t
 = 
desü
->
·¿m‘”Ty³s
[0].
	`G‘SizeOnSckDWÜds
();

4968 
e
.
bc
.
	`In¡rWORD
(
asBC_GETREF
, (
asWORD
)
off£t
);

4971 
e
.
bc
.
	`In¡rSHORT
(
asBC_PSF
, 
‹mpObj
.
¡ackOff£t
);

4973 
	`P”fÜmFunùiÚC®l
(
funcs
[0], &
e
, 
ÚH—p
, &
¬gs
, 
‹mpObj
.
d©aTy³
.
	`G‘ObjeùTy³
());

4976 
e
.
bc
.
	`ObjInfo
(
‹mpObj
.
¡ackOff£t
, 
asOBJ_INIT
);

4981 
e
.
ty³
 = 
‹mpObj
;

4982 ifĞ!
ÚH—p
 )

4983 
e
.
ty³
.
d©aTy³
.
	`MakeReã»nû
(
çl£
);

4986 
e
.
bc
.
	`In¡rSHORT
(
asBC_PSF
, 
‹mpObj
.
¡ackOff£t
);

4988 
	`M”geEx´By‹codeAndTy³
(
ùx
, &
e
);

4992 
ùx
->
ty³
.
	`S‘
(
asCD©aTy³
::
	`C»©eObjeù
(
to
.
	`G‘ObjeùTy³
(), 
çl£
));

4999 ifĞ
to
.
	`G‘ObjeùTy³
(è!ğ
ùx
->
ty³
.
d©aTy³
.G‘ObjeùTy³(è&& 
®lowObjeùCÚ¡ruù
 )

5002 
co¡
 = 
	`Im¶ic™CÚvObjeùV®ue
(
ùx
, 
to
, 
node
, 
cÚvTy³
, 
g’”©eCode
);

5007 ifĞ
to
.
	`G‘ObjeùTy³
(è!ğ
ùx
->
ty³
.
d©aTy³
.GetObjectType() )

5008  
asCC_NO_CONV
;

5011 ifĞ
to
.
	`IsObjeùHªdË
() )

5026 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsR—dOÆy
(è&& !
to
.IsReadOnly() )

5028 ifĞ
cÚvTy³
 !ğ
asIC_IMPLICIT_CONV
 )

5030 
	`asASSERT
(
node
);

5031 
asCSŒšg
 
¡r
;

5032 
¡r
.
	`FÜm©
(
TXT_CANT_IMPLICITLY_CONVERT_s_TO_s
, 
ùx
->
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
(), 
to
.Format().AddressOf());

5033 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

5037 ifĞ!
ùx
->
ty³
.
d©aTy³
.
	`IsObjeùHªdË
() )

5041 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`SuµÜtHªdËs
() )

5043 
asCD©aTy³
 
dt
 = 
ùx
->
ty³
.
d©aTy³
;

5044 
dt
.
	`MakeHªdË
(
Œue
);

5045 
dt
.
	`MakeReã»nû
(
çl£
);

5047 ifĞ
g’”©eCode
 )

5051 
off£t
 = 
	`AÎoÿ‹V¬ŸbË
(
dt
, 
Œue
);

5053 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsReã»nû
() )

5054 
ùx
->
bc
.
	`In¡r
(
asBC_RDSPŒ
);

5055 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_PSF
, ()
off£t
);

5056 
ùx
->
bc
.
	`In¡rPTR
(
asBC_REFCPY
, 
dt
.
	`G‘ObjeùTy³
());

5057 
ùx
->
bc
.
	`In¡r
(
asBC_PİPŒ
);

5058 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_PSF
, ()
off£t
);

5060 
	`R–—£TempÜ¬yV¬ŸbË
(
ùx
->
ty³
, &ùx->
bc
);

5062 ifĞ
to
.
	`IsReã»nû
() )

5063 
dt
.
	`MakeReã»nû
(
Œue
);

5065 
ùx
->
bc
.
	`In¡r
(
asBC_RDSPŒ
);

5067 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
dt
, 
off£t
, 
Œue
);

5070 
ùx
->
ty³
.
d©aTy³
 = 
dt
;

5073 
ùx
->
ty³
.
isLV®ue
 = 
çl£
;

5076 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsObjeùHªdË
() )

5077 
ùx
->
ty³
.
d©aTy³
.
	`MakeR—dOÆy
(
to
.
	`IsR—dOÆy
());

5079 ifĞ
to
.
	`IsHªdËToCÚ¡
(è&& 
ùx
->
ty³
.
d©aTy³
.
	`IsObjeùHªdË
() )

5080 
ùx
->
ty³
.
d©aTy³
.
	`MakeHªdËToCÚ¡
(
Œue
);

5086 ifĞ
to
.
	`IsHªdËToCÚ¡
() )

5087 
ùx
->
ty³
.
d©aTy³
.
	`MakeHªdËToCÚ¡
(
Œue
);

5091 
ùx
->
ty³
.
d©aTy³
.
	`MakeR—dOÆy
(
to
.
	`IsR—dOÆy
());

5094 ifĞ
to
.
	`IsReã»nû
(è&& !
ùx
->
ty³
.
d©aTy³
.IsReference() )

5096 ifĞ
g’”©eCode
 )

5098 
	`asASSERT
Ğ
ùx
->
ty³
.
d©aTy³
.
	`IsObjeùHªdË
() );

5101 
boŞ
 
isEx¶ic™HªdË
 = 
ùx
->
ty³
.isExplicitHandle;

5102 
ùx
->
ty³
.
isEx¶ic™HªdË
 = ctx->ty³.
d©aTy³
.
	`IsObjeùHªdË
();

5106 
boŞ
 
ty³IsR—dOÆy
 = 
ùx
->
ty³
.
d©aTy³
.
	`IsR—dOÆy
();

5107 
ùx
->
ty³
.
d©aTy³
.
	`MakeR—dOÆy
(
çl£
);

5111 
	`P»·»TempÜ¬yObjeù
(
node
, 
ùx
);

5113 
ùx
->
ty³
.
d©aTy³
.
	`MakeR—dOÆy
(
ty³IsR—dOÆy
);

5114 
ùx
->
ty³
.
isEx¶ic™HªdË
 = isExplicitHandle;

5119 
ùx
->
ty³
.
d©aTy³
.
	`MakeReã»nû
(
Œue
);

5122 
ùx
->
ty³
.
d©aTy³
.
	`MakeR—dOÆy
(
to
.
	`IsR—dOÆy
());

5124 ifĞ!
to
.
	`IsReã»nû
(è&& 
ùx
->
ty³
.
d©aTy³
.IsReference() )

5126 
	`D”eã»nû
(
ùx
, 
g’”©eCode
);

5131 ifĞ!
to
.
	`IsReã»nû
() )

5138 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsObjeùHªdË
(è&& !ùx->ty³.
isEx¶ic™HªdË
 )

5140 ifĞ
g’”©eCode
 )

5141 
ùx
->
bc
.
	`In¡r
(
asBC_CHKREF
);

5143 
ùx
->
ty³
.
d©aTy³
.
	`MakeHªdË
(
çl£
);

5147 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsR—dOÆy
(è&& !
to
.IsReadOnly() &&

5148 
®lowObjeùCÚ¡ruù
 )

5151 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`CªBeCİ›d
() )

5153 ifĞ
g’”©eCode
 )

5156 
	`P»·»TempÜ¬yObjeù
(
node
, 
ùx
);

5161 
ùx
->
ty³
.
d©aTy³
.
	`MakeR—dOÆy
(
çl£
);

5164 
co¡
 +ğ
asCC_TO_OBJECT_CONV
;

5168 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsReã»nû
() )

5174 ifĞ
	`IsV¬ŸbËOnH—p
(
ùx
->
ty³
.
¡ackOff£t
) )

5175 
	`D”eã»nû
(
ùx
, 
g’”©eCode
);

5177 
ùx
->
ty³
.
d©aTy³
.
	`MakeReã»nû
(
çl£
);

5181 ifĞ!
ùx
->
ty³
.
d©aTy³
.
	`IsR—dOÆy
(è&& 
to
.IsReadOnly() )

5183 
ùx
->
ty³
.
d©aTy³
.
	`MakeR—dOÆy
(
Œue
);

5192 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsReã»nû
() )

5194 ifĞ
ùx
->
ty³
.
isEx¶ic™HªdË
 && ctx->ty³.
d©aTy³
.
	`G‘ObjeùTy³
(è&& (ùx->ty³.d©aTy³.G‘ObjeùTy³()->
æags
 & 
asOBJ_ASHANDLE
) )

5197 
ùx
->
ty³
.
isEx¶ic™HªdË
 = 
çl£
;

5198 
ùx
->
ty³
.
d©aTy³
.
	`MakeHªdË
(
çl£
);

5203 ifĞ!
to
.
	`IsObjeùHªdË
(è&& 
ùx
->
ty³
.
d©aTy³
.IsObjeùHªdË(è&& !ùx->ty³.
isEx¶ic™HªdË
 )

5205 
ùx
->
ty³
.
d©aTy³
.
	`MakeHªdË
(
çl£
);

5206 ifĞ
g’”©eCode
 )

5207 
ùx
->
bc
.
	`In¡r
(
asBC_ChkRefS
);

5211 ifĞ
to
.
	`IsR—dOÆy
() )

5212 
ùx
->
ty³
.
d©aTy³
.
	`MakeR—dOÆy
(
Œue
);

5213 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsR—dOÆy
() )

5217 
ùx
->
ty³
.
d©aTy³
.
	`MakeR—dOÆy
(
çl£
);

5219 ifĞ
g’”©eCode
 )

5223 
	`P»·»TempÜ¬yObjeù
(
node
, 
ùx
);

5227 
co¡
 +ğ
asCC_TO_OBJECT_CONV
;

5235 ifĞ(
ùx
->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
()->
	`G‘FÏgs
(è& 
asOBJ_VALUE
) &&

5236 (
ùx
->
ty³
.
isV¬ŸbË
 || ctx->ty³.
isTempÜ¬y
) &&

5237 !
	`IsV¬ŸbËOnH—p
(
ùx
->
ty³
.
¡ackOff£t
) )

5242 ifĞ
g’”©eCode
 )

5249 
boŞ
 
ty³IsR—dOÆy
 = 
ùx
->
ty³
.
d©aTy³
.
	`IsR—dOÆy
();

5250 
ùx
->
ty³
.
d©aTy³
.
	`MakeR—dOÆy
(
çl£
);

5254 
	`P»·»TempÜ¬yObjeù
(
node
, 
ùx
);

5256 
ùx
->
ty³
.
d©aTy³
.
	`MakeR—dOÆy
(
ty³IsR—dOÆy
);

5259 
co¡
 +ğ
asCC_TO_OBJECT_CONV
;

5263 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsObjeùHªdË
() )

5265 ifĞ
g’”©eCode
 )

5266 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_ChkNuÎV
, ctx->
ty³
.
¡ackOff£t
);

5267 
ùx
->
ty³
.
d©aTy³
.
	`MakeHªdË
(
çl£
);

5268 
ùx
->
ty³
.
d©aTy³
.
	`MakeReã»nû
(
Œue
);

5277 
ùx
->
ty³
.
d©aTy³
.
	`MakeReã»nû
(
	`IsV¬ŸbËOnH—p
(ùx->ty³.
¡ackOff£t
));

5282 
ùx
->
ty³
.
d©aTy³
.
	`MakeR—dOÆy
(
to
.
	`IsR—dOÆy
());

5287  
co¡
;

5288 
	}
}

5290 
asUINT
 
	gasCComp”
::
	$Im¶ic™CÚvPrim™iveToObjeù
(
asSEx´CÚ‹xt
 * , cÚ¡ 
asCD©aTy³
 & , 
asCSütNode
 * , 
EIm¶ic™CÚv
 , 
boŞ
 , bool )

5294  
asCC_NO_CONV
;

5295 
	}
}

5297 
	gasCComp”
::
	$Im¶ic™CÚv”siÚCÚ¡ªt
(
asSEx´CÚ‹xt
 *
äom
, cÚ¡ 
asCD©aTy³
 &
to
, 
asCSütNode
 *
node
, 
EIm¶ic™CÚv
 
cÚvTy³
)

5299 
	`asASSERT
(
äom
->
ty³
.
isCÚ¡ªt
);

5306 ifĞ
to
.
	`IsEqu®Exû±RefAndCÚ¡
(
äom
->
ty³
.
d©aTy³
) ) ;

5309 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsReã»nû
() ) ;

5311 ifĞ(
to
.
	`IsIÁeg”Ty³
(è&&o.
	`G‘SizeInMemÜyDWÜds
() == 1) ||

5312 (
to
.
	`IsEnumTy³
(è&& 
cÚvTy³
 =ğ
asIC_EXPLICIT_VAL_CAST
) )

5314 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsFlßtTy³
() ||

5315 
äom
->
ty³
.
d©aTy³
.
	`IsDoubËTy³
() ||

5316 
äom
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
() ||

5317 
äom
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
() ||

5318 
äom
->
ty³
.
d©aTy³
.
	`IsEnumTy³
() )

5322 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsFlßtTy³
() )

5324 
fc
 = 
äom
->
ty³
.
æßtV®ue
;

5325 
ic
 = (
fc
);

5327 ifĞ(
ic
è!ğ
fc
 )

5329 ifĞ
cÚvTy³
 !ğ
asIC_EXPLICIT_VAL_CAST
 && 
node
 ) 
	`W¬nšg
(
TXT_NOT_EXACT
,‚ode);

5332 
äom
->
ty³
.
štV®ue
 = 
ic
;

5335 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsDoubËTy³
() )

5337 
fc
 = 
äom
->
ty³
.
doubËV®ue
;

5338 
ic
 = (
fc
);

5340 ifĞ(
ic
è!ğ
fc
 )

5342 ifĞ
cÚvTy³
 !ğ
asIC_EXPLICIT_VAL_CAST
 && 
node
 ) 
	`W¬nšg
(
TXT_NOT_EXACT
,‚ode);

5345 
äom
->
ty³
.
štV®ue
 = 
ic
;

5347 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
(è&& from->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 1 )

5350 ifĞ
äom
->
ty³
.
štV®ue
 < 0 )

5352 ifĞ
cÚvTy³
 !ğ
asIC_EXPLICIT_VAL_CAST
 && 
node
 ) 
	`W¬nšg
(
TXT_CHANGE_SIGN
,‚ode);

5356 ifĞ
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 1 )

5357 
äom
->
ty³
.
štV®ue
 = from->ty³.
by‹V®ue
;

5358 ifĞ
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 2 )

5359 
äom
->
ty³
.
štV®ue
 = from->ty³.
wÜdV®ue
;

5361 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
(è&& from->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 2 )

5364 
äom
->
ty³
.
štV®ue
 = (äom->ty³.
qwÜdV®ue
);

5366 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
() &&

5367 
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() < 4 )

5370 ifĞ
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 1 )

5371 
äom
->
ty³
.
štV®ue
 = (sigÃd )äom->ty³.
by‹V®ue
;

5372 ifĞ
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 2 )

5373 
äom
->
ty³
.
štV®ue
 = ()äom->ty³.
wÜdV®ue
;

5375 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsEnumTy³
() )

5381 ifĞ
to
.
	`IsEnumTy³
() )

5382 
äom
->
ty³
.
d©aTy³
 = 
to
;

5384 
äom
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ
, 
Œue
);

5388 ifĞ
to
.
	`IsIÁeg”Ty³
() &&

5389 
äom
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
() &&

5390 
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
(è> 
to
.GetSizeInMemoryBytes() )

5393 ifĞ
to
.
	`G‘SizeInMemÜyBy‹s
() == 1 )

5395 ifĞ(
äom
->
ty³
.
štV®ue
) != from->type.intValue )

5396 ifĞ
cÚvTy³
 !ğ
asIC_EXPLICIT_VAL_CAST
 && 
node
 ) 
	`W¬nšg
(
TXT_VALUE_TOO_LARGE_FOR_TYPE
,‚ode);

5398 
äom
->
ty³
.
by‹V®ue
 = (äom->ty³.
štV®ue
);

5400 ifĞ
to
.
	`G‘SizeInMemÜyBy‹s
() == 2 )

5402 ifĞ(
äom
->
ty³
.
štV®ue
) != from->type.intValue )

5403 ifĞ
cÚvTy³
 !ğ
asIC_EXPLICIT_VAL_CAST
 && 
node
 ) 
	`W¬nšg
(
TXT_VALUE_TOO_LARGE_FOR_TYPE
,‚ode);

5405 
äom
->
ty³
.
wÜdV®ue
 = (äom->ty³.
štV®ue
);

5408 
äom
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
to
.
	`G‘Tok’Ty³
(), 
Œue
);

5411 ifĞ
to
.
	`IsIÁeg”Ty³
(è&&o.
	`G‘SizeInMemÜyDWÜds
() == 2 )

5414 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsFlßtTy³
() )

5416 
fc
 = 
äom
->
ty³
.
æßtV®ue
;

5417 
asINT64
 
ic
 = 
	`asINT64
(
fc
);

5419 ifĞ(
ic
è!ğ
fc
 )

5421 ifĞ
cÚvTy³
 !ğ
asIC_EXPLICIT_VAL_CAST
 && 
node
 ) 
	`W¬nšg
(
TXT_NOT_EXACT
,‚ode);

5424 
äom
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ64
, 
Œue
);

5425 
äom
->
ty³
.
qwÜdV®ue
 = 
ic
;

5428 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsDoubËTy³
() )

5430 
fc
 = 
äom
->
ty³
.
doubËV®ue
;

5431 
asINT64
 
ic
 = 
	`asINT64
(
fc
);

5433 ifĞ(
ic
è!ğ
fc
 )

5435 ifĞ
cÚvTy³
 !ğ
asIC_EXPLICIT_VAL_CAST
 && 
node
 ) 
	`W¬nšg
(
TXT_NOT_EXACT
,‚ode);

5438 
äom
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ64
, 
Œue
);

5439 
äom
->
ty³
.
qwÜdV®ue
 = 
ic
;

5441 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
() )

5444 ifĞ
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 1 )

5445 
äom
->
ty³
.
qwÜdV®ue
 = from->ty³.
by‹V®ue
;

5446 ifĞ
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 2 )

5447 
äom
->
ty³
.
qwÜdV®ue
 = from->ty³.
wÜdV®ue
;

5448 ifĞ
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 4 )

5449 
äom
->
ty³
.
qwÜdV®ue
 = from->ty³.
dwÜdV®ue
;

5450 ifĞ
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 8 )

5452 ifĞ
	`asINT64
(
äom
->
ty³
.
qwÜdV®ue
) < 0 )

5454 ifĞ
cÚvTy³
 !ğ
asIC_EXPLICIT_VAL_CAST
 && 
node
 ) 
	`W¬nšg
(
TXT_CHANGE_SIGN
,‚ode);

5458 
äom
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ64
, 
Œue
);

5460 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsEnumTy³
() )

5462 
äom
->
ty³
.
qwÜdV®ue
 = from->ty³.
štV®ue
;

5463 
äom
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ64
, 
Œue
);

5465 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
() )

5468 ifĞ
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 1 )

5469 
äom
->
ty³
.
qwÜdV®ue
 = (sigÃd )äom->ty³.
by‹V®ue
;

5470 ifĞ
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 2 )

5471 
äom
->
ty³
.
qwÜdV®ue
 = ()äom->ty³.
wÜdV®ue
;

5472 ifĞ
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 4 )

5473 
äom
->
ty³
.
qwÜdV®ue
 = from->ty³.
štV®ue
;

5475 
äom
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ64
, 
Œue
);

5478 ifĞ
to
.
	`IsUnsigÃdTy³
(è&&o.
	`G‘SizeInMemÜyDWÜds
() == 1 )

5480 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsFlßtTy³
() )

5482 
fc
 = 
äom
->
ty³
.
æßtV®ue
;

5485 
asUINT
 
uic
 = 
	`asUINT
((
fc
));

5487 ifĞ(
uic
è!ğ
fc
 )

5489 ifĞ
cÚvTy³
 !ğ
asIC_EXPLICIT_VAL_CAST
 && 
node
 ) 
	`W¬nšg
(
TXT_NOT_EXACT
,‚ode);

5492 
äom
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ
, 
Œue
);

5493 
äom
->
ty³
.
štV®ue
 = 
uic
;

5496 
	`Im¶ic™CÚv”siÚCÚ¡ªt
(
äom
, 
to
, 
node
, 
cÚvTy³
);

5498 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsDoubËTy³
() )

5500 
fc
 = 
äom
->
ty³
.
doubËV®ue
;

5503 
asUINT
 
uic
 = 
	`asUINT
((
fc
));

5505 ifĞ(
uic
è!ğ
fc
 )

5507 ifĞ
cÚvTy³
 !ğ
asIC_EXPLICIT_VAL_CAST
 && 
node
 ) 
	`W¬nšg
(
TXT_NOT_EXACT
,‚ode);

5510 
äom
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ
, 
Œue
);

5511 
äom
->
ty³
.
štV®ue
 = 
uic
;

5514 
	`Im¶ic™CÚv”siÚCÚ¡ªt
(
äom
, 
to
, 
node
, 
cÚvTy³
);

5516 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsEnumTy³
() )

5518 
äom
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ
, 
Œue
);

5521 
	`Im¶ic™CÚv”siÚCÚ¡ªt
(
äom
, 
to
, 
node
, 
cÚvTy³
);

5523 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
() )

5526 ifĞ
äom
->
ty³
.
štV®ue
 < 0 )

5528 ifĞ
cÚvTy³
 !ğ
asIC_EXPLICIT_VAL_CAST
 && 
node
 ) 
	`W¬nšg
(
TXT_CHANGE_SIGN
,‚ode);

5532 ifĞ
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 1 )

5533 
äom
->
ty³
.
štV®ue
 = (sigÃd )äom->ty³.
by‹V®ue
;

5534 ifĞ
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 2 )

5535 
äom
->
ty³
.
štV®ue
 = ()äom->ty³.
wÜdV®ue
;

5537 
äom
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ
, 
Œue
);

5540 
	`Im¶ic™CÚv”siÚCÚ¡ªt
(
äom
, 
to
, 
node
, 
cÚvTy³
);

5542 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
() &&

5543 
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() < 4 )

5546 ifĞ
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 1 )

5547 
äom
->
ty³
.
dwÜdV®ue
 = from->ty³.
by‹V®ue
;

5548 ifĞ
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 2 )

5549 
äom
->
ty³
.
dwÜdV®ue
 = from->ty³.
wÜdV®ue
;

5551 
äom
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ
, 
Œue
);

5554 
	`Im¶ic™CÚv”siÚCÚ¡ªt
(
äom
, 
to
, 
node
, 
cÚvTy³
);

5556 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
() &&

5557 
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
(è> 
to
.GetSizeInMemoryBytes() )

5560 ifĞ
to
.
	`G‘SizeInMemÜyBy‹s
() == 1 )

5562 ifĞ
	`asBYTE
(
äom
->
ty³
.
dwÜdV®ue
) != from->type.dwordValue )

5563 ifĞ
cÚvTy³
 !ğ
asIC_EXPLICIT_VAL_CAST
 && 
node
 ) 
	`W¬nšg
(
TXT_VALUE_TOO_LARGE_FOR_TYPE
,‚ode);

5565 
äom
->
ty³
.
by‹V®ue
 = 
	`asBYTE
(äom->ty³.
dwÜdV®ue
);

5567 ifĞ
to
.
	`G‘SizeInMemÜyBy‹s
() == 2 )

5569 ifĞ
	`asWORD
(
äom
->
ty³
.
dwÜdV®ue
) != from->type.dwordValue )

5570 ifĞ
cÚvTy³
 !ğ
asIC_EXPLICIT_VAL_CAST
 && 
node
 ) 
	`W¬nšg
(
TXT_VALUE_TOO_LARGE_FOR_TYPE
,‚ode);

5572 
äom
->
ty³
.
wÜdV®ue
 = 
	`asWORD
(äom->ty³.
dwÜdV®ue
);

5575 
äom
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
to
.
	`G‘Tok’Ty³
(), 
Œue
);

5578 ifĞ
to
.
	`IsUnsigÃdTy³
(è&&o.
	`G‘SizeInMemÜyDWÜds
() == 2 )

5580 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsFlßtTy³
() )

5582 
fc
 = 
äom
->
ty³
.
æßtV®ue
;

5584 
asQWORD
 
uic
 = 
	`asQWORD
(
	`asINT64
(
fc
));

5586 #ià!
	`defšed
(
_MSC_VER
) || _MSC_VER > 1200

5588 ifĞ(
uic
è!ğ
fc
 )

5590 ifĞ
cÚvTy³
 !ğ
asIC_EXPLICIT_VAL_CAST
 && 
node
 ) 
	`W¬nšg
(
TXT_NOT_EXACT
,‚ode);

5594 
äom
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ64
, 
Œue
);

5595 
äom
->
ty³
.
qwÜdV®ue
 = 
uic
;

5597 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsDoubËTy³
() )

5599 
fc
 = 
äom
->
ty³
.
doubËV®ue
;

5601 
asQWORD
 
uic
 = 
	`asQWORD
(
	`asINT64
(
fc
));

5603 #ià!
	`defšed
(
_MSC_VER
) || _MSC_VER > 1200

5605 ifĞ(
uic
è!ğ
fc
 )

5607 ifĞ
cÚvTy³
 !ğ
asIC_EXPLICIT_VAL_CAST
 && 
node
 ) 
	`W¬nšg
(
TXT_NOT_EXACT
,‚ode);

5611 
äom
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ64
, 
Œue
);

5612 
äom
->
ty³
.
qwÜdV®ue
 = 
uic
;

5614 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsEnumTy³
() )

5616 
äom
->
ty³
.
qwÜdV®ue
 = (
asINT64
)äom->ty³.
štV®ue
;

5617 
äom
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ64
, 
Œue
);

5619 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
(è&& from->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 1 )

5622 ifĞ
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 1 )

5623 
äom
->
ty³
.
qwÜdV®ue
 = (
asINT64
)(sigÃd )äom->ty³.
by‹V®ue
;

5624 ifĞ
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 2 )

5625 
äom
->
ty³
.
qwÜdV®ue
 = (
asINT64
)()äom->ty³.
wÜdV®ue
;

5626 ifĞ
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 4 )

5627 
äom
->
ty³
.
qwÜdV®ue
 = (
asINT64
)äom->ty³.
štV®ue
;

5630 ifĞ
	`asINT64
(
äom
->
ty³
.
qwÜdV®ue
) < 0 )

5632 ifĞ
cÚvTy³
 !ğ
asIC_EXPLICIT_VAL_CAST
 && 
node
 ) 
	`W¬nšg
(
TXT_CHANGE_SIGN
,‚ode);

5635 
äom
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ64
, 
Œue
);

5637 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
(è&& from->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 2 )

5640 ifĞ
	`asINT64
(
äom
->
ty³
.
qwÜdV®ue
) < 0 )

5642 ifĞ
cÚvTy³
 !ğ
asIC_EXPLICIT_VAL_CAST
 && 
node
 ) 
	`W¬nšg
(
TXT_CHANGE_SIGN
,‚ode);

5645 
äom
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ64
, 
Œue
);

5647 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
() )

5650 ifĞ
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 1 )

5651 
äom
->
ty³
.
qwÜdV®ue
 = from->ty³.
by‹V®ue
;

5652 ifĞ
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 2 )

5653 
äom
->
ty³
.
qwÜdV®ue
 = from->ty³.
wÜdV®ue
;

5654 ifĞ
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 4 )

5655 
äom
->
ty³
.
qwÜdV®ue
 = from->ty³.
dwÜdV®ue
;

5657 
äom
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ64
, 
Œue
);

5660 ifĞ
to
.
	`IsFlßtTy³
() )

5662 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsDoubËTy³
() )

5664 
ic
 = 
äom
->
ty³
.
doubËV®ue
;

5665 
fc
 = (
ic
);

5675 
äom
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
to
.
	`G‘Tok’Ty³
(), 
Œue
);

5676 
äom
->
ty³
.
æßtV®ue
 = 
fc
;

5678 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsEnumTy³
() )

5680 
fc
 = (
äom
->
ty³
.
štV®ue
);

5682 ifĞ(
fc
è!ğ
äom
->
ty³
.
štV®ue
 )

5684 ifĞ
cÚvTy³
 !ğ
asIC_EXPLICIT_VAL_CAST
 && 
node
 ) 
	`W¬nšg
(
TXT_NOT_EXACT
,‚ode);

5687 
äom
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
to
.
	`G‘Tok’Ty³
(), 
Œue
);

5688 
äom
->
ty³
.
æßtV®ue
 = 
fc
;

5690 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
(è&& from->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 1 )

5693 
ic
;

5694 ifĞ
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 1 )

5695 
ic
 = (sigÃd )
äom
->
ty³
.
by‹V®ue
;

5696 ifĞ
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 2 )

5697 
ic
 = ()
äom
->
ty³
.
wÜdV®ue
;

5699 
ic
 = 
äom
->
ty³
.
štV®ue
;

5700 
fc
 = (
ic
);

5702 ifĞ(
fc
è!ğ
ic
 )

5704 ifĞ
cÚvTy³
 !ğ
asIC_EXPLICIT_VAL_CAST
 && 
node
 ) 
	`W¬nšg
(
TXT_NOT_EXACT
,‚ode);

5707 
äom
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
to
.
	`G‘Tok’Ty³
(), 
Œue
);

5708 
äom
->
ty³
.
æßtV®ue
 = 
fc
;

5710 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
(è&& from->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 2 )

5712 
fc
 = (
	`asINT64
(
äom
->
ty³
.
qwÜdV®ue
));

5713 ifĞ
	`asINT64
(
fc
è!ğasINT64(
äom
->
ty³
.
qwÜdV®ue
) )

5715 ifĞ
cÚvTy³
 !ğ
asIC_EXPLICIT_VAL_CAST
 && 
node
 ) 
	`W¬nšg
(
TXT_NOT_EXACT
,‚ode);

5718 
äom
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
to
.
	`G‘Tok’Ty³
(), 
Œue
);

5719 
äom
->
ty³
.
æßtV®ue
 = 
fc
;

5721 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
(è&& from->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 1 )

5724 
uic
;

5725 ifĞ
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 1 )

5726 
uic
 = 
äom
->
ty³
.
by‹V®ue
;

5727 ifĞ
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 2 )

5728 
uic
 = 
äom
->
ty³
.
wÜdV®ue
;

5730 
uic
 = 
äom
->
ty³
.
dwÜdV®ue
;

5731 
fc
 = (
uic
);

5733 ifĞ()(
fc
è!ğ
uic
 )

5735 ifĞ
cÚvTy³
 !ğ
asIC_EXPLICIT_VAL_CAST
 && 
node
 ) 
	`W¬nšg
(
TXT_NOT_EXACT
,‚ode);

5738 
äom
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
to
.
	`G‘Tok’Ty³
(), 
Œue
);

5739 
äom
->
ty³
.
æßtV®ue
 = 
fc
;

5741 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
(è&& from->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 2 )

5743 
fc
 = ((
asINT64
)
äom
->
ty³
.
qwÜdV®ue
);

5745 ifĞ
	`asQWORD
(
fc
è!ğ
äom
->
ty³
.
qwÜdV®ue
 )

5747 ifĞ
cÚvTy³
 !ğ
asIC_EXPLICIT_VAL_CAST
 && 
node
 ) 
	`W¬nšg
(
TXT_NOT_EXACT
,‚ode);

5750 
äom
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
to
.
	`G‘Tok’Ty³
(), 
Œue
);

5751 
äom
->
ty³
.
æßtV®ue
 = 
fc
;

5754 ifĞ
to
.
	`IsDoubËTy³
() )

5756 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsFlßtTy³
() )

5758 
ic
 = 
äom
->
ty³
.
æßtV®ue
;

5759 
fc
 = (
ic
);

5769 
äom
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
to
.
	`G‘Tok’Ty³
(), 
Œue
);

5770 
äom
->
ty³
.
doubËV®ue
 = 
fc
;

5772 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsEnumTy³
() )

5774 
fc
 = (
äom
->
ty³
.
štV®ue
);

5776 ifĞ(
fc
è!ğ
äom
->
ty³
.
štV®ue
 )

5778 ifĞ
cÚvTy³
 !ğ
asIC_EXPLICIT_VAL_CAST
 && 
node
 ) 
	`W¬nšg
(
TXT_NOT_EXACT
,‚ode);

5781 
äom
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
to
.
	`G‘Tok’Ty³
(), 
Œue
);

5782 
äom
->
ty³
.
doubËV®ue
 = 
fc
;

5784 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
(è&& from->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 1 )

5787 
ic
;

5788 ifĞ
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 1 )

5789 
ic
 = (sigÃd )
äom
->
ty³
.
by‹V®ue
;

5790 ifĞ
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 2 )

5791 
ic
 = ()
äom
->
ty³
.
wÜdV®ue
;

5793 
ic
 = 
äom
->
ty³
.
štV®ue
;

5794 
fc
 = (
ic
);

5796 ifĞ(
fc
è!ğ
ic
 )

5798 ifĞ
cÚvTy³
 !ğ
asIC_EXPLICIT_VAL_CAST
 && 
node
 ) 
	`W¬nšg
(
TXT_NOT_EXACT
,‚ode);

5801 
äom
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
to
.
	`G‘Tok’Ty³
(), 
Œue
);

5802 
äom
->
ty³
.
doubËV®ue
 = 
fc
;

5804 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
(è&& from->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 2 )

5806 
fc
 = (
	`asINT64
(
äom
->
ty³
.
qwÜdV®ue
));

5808 ifĞ
	`asINT64
(
fc
è!ğasINT64(
äom
->
ty³
.
qwÜdV®ue
) )

5810 ifĞ
cÚvTy³
 !ğ
asIC_EXPLICIT_VAL_CAST
 && 
node
 ) 
	`W¬nšg
(
TXT_NOT_EXACT
,‚ode);

5813 
äom
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
to
.
	`G‘Tok’Ty³
(), 
Œue
);

5814 
äom
->
ty³
.
doubËV®ue
 = 
fc
;

5816 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
(è&& from->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 1 )

5819 
uic
;

5820 ifĞ
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 1 )

5821 
uic
 = 
äom
->
ty³
.
by‹V®ue
;

5822 ifĞ
äom
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 2 )

5823 
uic
 = 
äom
->
ty³
.
wÜdV®ue
;

5825 
uic
 = 
äom
->
ty³
.
dwÜdV®ue
;

5826 
fc
 = (
uic
);

5828 ifĞ()(
fc
è!ğ
uic
 )

5830 ifĞ
cÚvTy³
 !ğ
asIC_EXPLICIT_VAL_CAST
 && 
node
 ) 
	`W¬nšg
(
TXT_NOT_EXACT
,‚ode);

5833 
äom
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
to
.
	`G‘Tok’Ty³
(), 
Œue
);

5834 
äom
->
ty³
.
doubËV®ue
 = 
fc
;

5836 ifĞ
äom
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
(è&& from->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 2 )

5838 
fc
 = ((
asINT64
)
äom
->
ty³
.
qwÜdV®ue
);

5840 ifĞ
	`asQWORD
(
fc
è!ğ
äom
->
ty³
.
qwÜdV®ue
 )

5842 ifĞ
cÚvTy³
 !ğ
asIC_EXPLICIT_VAL_CAST
 && 
node
 ) 
	`W¬nšg
(
TXT_NOT_EXACT
,‚ode);

5845 
äom
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
to
.
	`G‘Tok’Ty³
(), 
Œue
);

5846 
äom
->
ty³
.
doubËV®ue
 = 
fc
;

5849 
	}
}

5851 
	gasCComp”
::
	$DoAssignm’t
(
asSEx´CÚ‹xt
 *
ùx
,‡sSEx´CÚ‹xˆ*
lùx
,‡sSEx´CÚ‹xˆ*
rùx
, 
asCSütNode
 *
Ëx´
,‡sCSütNod*
»x´
, 
İ
,‡sCSütNod*
İNode
)

5854 ià(
lùx
->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
(è&& (lùx->ty³.d©aTy³.G‘ObjeùTy³()->
æags
 & 
asOBJ_IMPLICIT_HANDLE
) )

5856 
lùx
->
ty³
.
d©aTy³
.
	`MakeHªdË
(
Œue
);

5857 
lùx
->
ty³
.
isEx¶ic™HªdË
 = 
Œue
;

5864 ifĞ(
lùx
->
´İ”ty_g‘
 ||†ùx->
´İ”ty_£t
) &&

5865 !(
lùx
->
ty³
.
d©aTy³
.
	`IsObjeùHªdË
(è&& !lùx->ty³.
isEx¶ic™HªdË
) )

5867 ifĞ
İ
 !ğ
‰Assignm’t
 )

5874 
	`ProûssPrİ”tyS‘AcûssÜ
(
lùx
, 
rùx
, 
İNode
);

5877 
	`E¼Ü
(
TXT_COMPOUND_ASGN_WITH_PROP
, 
İNode
);

5883 ifĞ
lùx
->
´İ”ty_£t
 &&†ùx->
ty³
.
isEx¶ic™HªdË
 )

5886 
asCA¼ay
<
asCD©aTy³
>& 
·¿m‘”Ty³s
 =

5887 
bud”
->
	`G‘FunùiÚDesütiÚ
(
lùx
->
´İ”ty_£t
)->
·¿m‘”Ty³s
;

5888 ifĞ!
·¿m‘”Ty³s
[·¿m‘”Ty³s.
	`G‘L’gth
(è- 1].
	`IsObjeùHªdË
() )

5891 
	`ProûssPrİ”tyS‘AcûssÜ
(
lùx
, 
rùx
, 
İNode
);

5893 
	`E¼Ü
(
TXT_HANDLE_ASSIGN_ON_NON_HANDLE_PROP
, 
İNode
);

5898 
	`M”geEx´By‹codeAndTy³
(
ùx
, 
lùx
);

5900  
	`ProûssPrİ”tyS‘AcûssÜ
(
ùx
, 
rùx
, 
İNode
);

5902 ifĞ
lùx
->
´İ”ty_g‘
 &&†ùx->
ty³
.
d©aTy³
.
	`IsObjeùHªdË
(è&& !lùx->ty³.
isEx¶ic™HªdË
 )

5905 
	`ProûssPrİ”tyG‘AcûssÜ
(
lùx
, 
İNode
);

5908 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsPrim™ive
() )

5910 ifĞ!
lùx
->
ty³
.
isLV®ue
 )

5912 
	`E¼Ü
(
TXT_NOT_LVALUE
, 
Ëx´
);

5916 ifĞ
İ
 !ğ
‰Assignm’t
 )

5919 
asCTy³Info
 
lv®ue
 = 
lùx
->
ty³
;

5921 ifĞ
lùx
->
ty³
.
isTempÜ¬y
 && !lùx->ty³.
isV¬ŸbË
 )

5926 
lùx
->
ty³
.
isTempÜ¬y
 = 
çl£
;

5929 
asSEx´CÚ‹xt
 
	`o
(
’gše
);

5930 
	`CompeO³¿tÜ
(
İNode
, 
lùx
, 
rùx
, &
o
);

5931 
	`M”geEx´By‹code
(
rùx
, &
o
);

5932 
rùx
->
ty³
 = 
o
.type;

5935 
	`P»·»FÜAssignm’t
(&
lv®ue
.
d©aTy³
, 
rùx
, 
»x´
, 
çl£
);

5937 
	`M”geEx´By‹code
(
ùx
, 
rùx
);

5938 
lùx
->
ty³
 = 
lv®ue
;

5945 
	`P»·»FÜAssignm’t
(&
lùx
->
ty³
.
d©aTy³
, 
rùx
, 
»x´
, 
çl£
,†ctx);

5947 
	`M”geEx´By‹code
(
ùx
, 
rùx
);

5948 
	`M”geEx´By‹code
(
ùx
, 
lùx
);

5951 
	`R–—£TempÜ¬yV¬ŸbË
(
rùx
->
ty³
, &
ùx
->
bc
);

5953 
	`P”fÜmAssignm’t
(&
lùx
->
ty³
, &
rùx
->ty³, &
ùx
->
bc
, 
İNode
);

5955 
ùx
->
ty³
 = 
lùx
->type;

5957 ifĞ
lùx
->
ty³
.
isEx¶ic™HªdË
 )

5959 ifĞ!
lùx
->
ty³
.
isLV®ue
 )

5961 
	`E¼Ü
(
TXT_NOT_LVALUE
, 
Ëx´
);

5966 ifĞ
İ
 !ğ
‰Assignm’t
 )

5968 
asCSŒšg
 
¡r
;

5969 
¡r
.
	`FÜm©
(
TXT_ILLEGAL_OPERATION_ON_s
, 
lùx
->
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
());

5970 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
Ëx´
);

5974 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_ASHANDLE
 )

5979 ifĞ
	`CompeOv”lßdedDu®O³¿tÜ
(
İNode
, 
lùx
, 
rùx
, 
ùx
) )

5986 
	`E¼Ü
(
TXT_NO_APPROPRIATE_OPASSIGN
, 
İNode
);

5991 
asCD©aTy³
 
dt
 = 
lùx
->
ty³
.
d©aTy³
;

5992 
dt
.
	`MakeReã»nû
(
çl£
);

5994 
	`P»·»Argum’t
(&
dt
, 
rùx
, 
»x´
, 
Œue
, 1);

5995 ifĞ!
dt
.
	`IsEqu®Exû±RefAndCÚ¡
(
rùx
->
ty³
.
d©aTy³
) )

5997 
asCSŒšg
 
¡r
;

5998 
¡r
.
	`FÜm©
(
TXT_CANT_IMPLICITLY_CONVERT_s_TO_s
, 
rùx
->
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
(), 
lùx
->type.dataType.Format().AddressOf());

5999 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
»x´
);

6003 
	`M”geEx´By‹code
(
ùx
, 
rùx
);

6004 
	`M”geEx´By‹code
(
ùx
, 
lùx
);

6006 
ùx
->
bc
.
	`In¡rWORD
(
asBC_GETOBJREF
, 
AS_PTR_SIZE
);

6008 
	`P”fÜmAssignm’t
(&
lùx
->
ty³
, &
rùx
->ty³, &
ùx
->
bc
, 
İNode
);

6010 
	`R–—£TempÜ¬yV¬ŸbË
(
rùx
->
ty³
, &
ùx
->
bc
);

6012 
ùx
->
ty³
 = 
lùx
->type;

6019 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_ASHANDLE
 )

6021 
asCSŒšg
 
¡r
;

6022 
¡r
.
	`FÜm©
(
TXT_ILLEGAL_OPERATION_ON_s
, 
lùx
->
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
());

6023 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
Ëx´
);

6030 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsObjeùHªdË
(è&& !lùx->ty³.
isEx¶ic™HªdË
 )

6033 
asCD©aTy³
 
to
;

6034 
to
 = 
lùx
->
ty³
.
d©aTy³
;

6035 
to
.
	`MakeHªdË
(
çl£
);

6036 
	`Im¶ic™CÚv”siÚ
(
lùx
, 
to
, 
Ëx´
, 
asIC_IMPLICIT_CONV
);

6037 
lùx
->
ty³
.
isLV®ue
 = 
Œue
;

6041 ifĞ
	`CompeOv”lßdedDu®O³¿tÜ
(
İNode
, 
lùx
, 
rùx
, 
ùx
) )

6051 ifĞ
İ
 !ğ
‰Assignm’t
 )

6053 
asCSŒšg
 
¡r
;

6054 
¡r
.
	`FÜm©
(
TXT_ILLEGAL_OPERATION_ON_s
, 
lùx
->
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
());

6055 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
Ëx´
);

6069 
boŞ
 
sim¶eEx´
 = (
lùx
->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
()->
	`G‘FÏgs
(è& 
asOBJ_VALUE
è&&†ùx->
bc
.
	`IsSim¶eEx´essiÚ
();

6072 ifĞ!
lùx
->
ty³
.
d©aTy³
.
	`IsEqu®Exû±RefAndCÚ¡
(
rùx
->type.dataType) )

6073 
sim¶eEx´
 = 
çl£
;

6074 ifĞ!
sim¶eEx´
 )

6076 
asCD©aTy³
 
dt
 = 
lùx
->
ty³
.
d©aTy³
;

6077 
dt
.
	`MakeReã»nû
(
Œue
);

6078 
dt
.
	`MakeR—dOÆy
(
Œue
);

6079 
	`P»·»Argum’t
(&
dt
, 
rùx
, 
»x´
, 
Œue
, 1);

6080 ifĞ!
dt
.
	`IsEqu®Exû±RefAndCÚ¡
(
rùx
->
ty³
.
d©aTy³
) )

6082 
asCSŒšg
 
¡r
;

6083 
¡r
.
	`FÜm©
(
TXT_CANT_IMPLICITLY_CONVERT_s_TO_s
, 
rùx
->
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
(), 
lùx
->type.dataType.Format().AddressOf());

6084 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
»x´
);

6091 
	`ProûssPrİ”tyG‘AcûssÜ
(
rùx
, 
»x´
);

6093 ifĞ
rùx
->
ty³
.
d©aTy³
.
	`IsReã»nû
(è&& (!Ôùx->ty³.
isV¬ŸbË
 ||„ùx->ty³.
isTempÜ¬y
è|| 
	`IsV¬ŸbËOnH—p
Ôùx->ty³.
¡ackOff£t
)) )

6094 
rùx
->
bc
.
	`In¡r
(
asBC_RDSPŒ
);

6097 
	`M”geEx´By‹code
(
ùx
, 
rùx
);

6098 
	`M”geEx´By‹code
(
ùx
, 
lùx
);

6100 ifĞ!
sim¶eEx´
 )

6102 ifĞ(
rùx
->
ty³
.
isV¬ŸbË
 ||„ùx->ty³.
isTempÜ¬y
è&& !
	`IsV¬ŸbËOnH—p
Ôùx->ty³.
¡ackOff£t
) )

6106 
ùx
->
bc
.
	`In¡rWORD
(
asBC_GETREF
, 
AS_PTR_SIZE
);

6108 
ùx
->
bc
.
	`In¡rWORD
(
asBC_GETOBJREF
, 
AS_PTR_SIZE
);

6111 
	`P”fÜmAssignm’t
(&
lùx
->
ty³
, &
rùx
->ty³, &
ùx
->
bc
, 
İNode
);

6113 
	`R–—£TempÜ¬yV¬ŸbË
(
rùx
->
ty³
, &
ùx
->
bc
);

6115 
ùx
->
ty³
 = 
lùx
->type;

6119 
	}
}

6121 
	gasCComp”
::
	$CompeAssignm’t
(
asCSütNode
 *
ex´
, 
asSEx´CÚ‹xt
 *
ùx
)

6123 
asCSütNode
 *
Ëx´
 = 
ex´
->
fœ¡Chd
;

6124 ifĞ
Ëx´
->
Ãxt
 )

6127 
asSEx´CÚ‹xt
 
	`lùx
(
’gše
), 
	`rùx
(engine);

6128 
¼
 = 
	`CompeAssignm’t
(
Ëx´
->
Ãxt
->Ãxt, &
rùx
);

6129 
Ì
 = 
	`CompeCÚd™iÚ
(
Ëx´
, &
lùx
);

6131 ifĞ
Ì
 >ğ0 && 
¼
 >= 0 )

6132  
	`DoAssignm’t
(
ùx
, &
lùx
, &
rùx
, 
Ëx´
,†ex´->
Ãxt
->Ãxt,†ex´->Ãxt->
tok’Ty³
,†expr->next);

6135 
ùx
->
ty³
.
	`S‘Dummy
();

6139  
	`CompeCÚd™iÚ
(
Ëx´
, 
ùx
);

6140 
	}
}

6142 
	gasCComp”
::
	$CompeCÚd™iÚ
(
asCSütNode
 *
ex´
, 
asSEx´CÚ‹xt
 *
ùx
)

6144 
asCTy³Info
 
ùy³
;

6147 
asCSütNode
 *
ûx´
 = 
ex´
->
fœ¡Chd
;

6148 ifĞ
ûx´
->
Ãxt
 )

6152 
asSEx´CÚ‹xt
 
	`e
(
’gše
);

6153 
r
 = 
	`CompeEx´essiÚ
(
ûx´
, &
e
);

6154 ifĞ
r
 < 0 )

6155 
e
.
ty³
.
	`S‘CÚ¡ªtB
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
Œue
),rue);

6156 ifĞ
r
 >ğ0 && !
e
.
ty³
.
d©aTy³
.
	`IsEqu®Exû±RefAndCÚ¡
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
Œue
)) )

6158 
	`E¼Ü
(
TXT_EXPR_MUST_BE_BOOL
, 
ûx´
);

6159 
e
.
ty³
.
	`S‘CÚ¡ªtB
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
Œue
),rue);

6161 
ùy³
 = 
e
.
ty³
;

6163 
	`ProûssPrİ”tyG‘AcûssÜ
(&
e
, 
ûx´
);

6165 ifĞ
e
.
ty³
.
d©aTy³
.
	`IsReã»nû
(èè
	`CÚv”tToV¬ŸbË
(&e);

6166 
	`ProûssDeã¼edP¬ams
(&
e
);

6170 
asSEx´CÚ‹xt
 
	`Ë
(
’gše
);

6171 
Ì
 = 
	`CompeAssignm’t
(
ûx´
->
Ãxt
, &
Ë
);

6175 
asSEx´CÚ‹xt
 
	`»
(
’gše
);

6176 
¼
 = 
	`CompeAssignm’t
(
ûx´
->
Ãxt
->Ãxt, &
»
);

6178 ifĞ
Ì
 >ğ0 && 
¼
 >= 0 )

6180 
	`ProûssPrİ”tyG‘AcûssÜ
(&
Ë
, 
ûx´
->
Ãxt
);

6181 
	`ProûssPrİ”tyG‘AcûssÜ
(&
»
, 
ûx´
->
Ãxt
->next);

6183 
boŞ
 
isEx¶ic™HªdË
 = 
Ë
.
ty³
.isEx¶ic™HªdË || 
»
.type.isExplicitHandle;

6186 ifĞ
Ë
.
ty³
.
isCÚ¡ªt
 &&†e.ty³.
štV®ue
 =ğ0 &&†e.ty³.
d©aTy³
.
	`IsUnsigÃdTy³
() )

6188 
asCD©aTy³
 
to
 = 
»
.
ty³
.
d©aTy³
;

6189 
to
.
	`MakeReã»nû
(
çl£
);

6190 
to
.
	`MakeR—dOÆy
(
Œue
);

6191 
	`Im¶ic™CÚv”siÚCÚ¡ªt
(&
Ë
, 
to
, 
ûx´
->
Ãxt
, 
asIC_IMPLICIT_CONV
);

6193 ifĞ
Ë
.
ty³
.
	`IsNuÎCÚ¡ªt
() )

6195 
asCD©aTy³
 
to
 = 
»
.
ty³
.
d©aTy³
;

6196 
to
.
	`MakeHªdË
(
Œue
);

6197 
	`Im¶ic™CÚv”siÚ
(&
Ë
, 
to
, 
ûx´
->
Ãxt
, 
asIC_IMPLICIT_CONV
);

6202 
aá”Lab–
 = 
ÃxtLab–
++;

6203 
–£Lab–
 = 
ÃxtLab–
++;

6206 ifĞ
Ë
.
ty³
.
d©aTy³
.
	`IsEqu®Exû±CÚ¡
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰Void
, 
çl£
)) )

6209 
	`M”geEx´By‹code
(
ùx
, &
e
);

6212 
ùx
->
ty³
 = 
e
.type;

6213 
	`CÚv”tToV¬ŸbË
(
ùx
);

6214 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_CpyVtoR4
, ctx->
ty³
.
¡ackOff£t
);

6215 
ùx
->
bc
.
	`In¡r
(
asBC_CÌHi
);

6216 
ùx
->
bc
.
	`In¡rDWORD
(
asBC_JZ
, 
–£Lab–
);

6217 
	`R–—£TempÜ¬yV¬ŸbË
(
ùx
->
ty³
, &ùx->
bc
);

6220 
	`M”geEx´By‹code
(
ùx
, &
Ë
);

6221 
ùx
->
bc
.
	`In¡rINT
(
asBC_JMP
, 
aá”Lab–
);

6224 
ùx
->
bc
.
	`Lab–
(()
–£Lab–
);

6225 
	`M”geEx´By‹code
(
ùx
, &
»
);

6226 
ùx
->
bc
.
	`Lab–
(()
aá”Lab–
);

6229 ifĞ
Ë
.
ty³
.
d©aTy³
 !ğ
»
.type.dataType )

6230 
	`E¼Ü
(
TXT_BOTH_MUST_BE_SAME
, 
ex´
);

6233 
ùx
->
ty³
 = 
Ë
.type;

6238 
asCTy³Info
 
‹mp
;

6239 
‹mp
 = 
Ë
.
ty³
;

6240 
‹mp
.
d©aTy³
.
	`MakeReã»nû
(
çl£
);

6241 
‹mp
.
d©aTy³
.
	`MakeR—dOÆy
(
çl£
);

6243 
off£t
 = 
	`AÎoÿ‹V¬ŸbËNÙIn
(
‹mp
.
d©aTy³
, 
Œue
, 
çl£
, &
e
);

6244 
‹mp
.
	`S‘V¬ŸbË
Ñemp.
d©aTy³
, 
off£t
, 
Œue
);

6248 
	`C®lDeçuÉCÚ¡ruùÜ
(
‹mp
.
d©aTy³
, 
off£t
, 
	`IsV¬ŸbËOnH—p
(off£t), &
ùx
->
bc
, 
ex´
);

6251 
	`M”geEx´By‹code
(
ùx
, &
e
);

6254 
ùx
->
ty³
 = 
e
.type;

6255 
	`CÚv”tToV¬ŸbË
(
ùx
);

6256 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_CpyVtoR4
, ctx->
ty³
.
¡ackOff£t
);

6257 
ùx
->
bc
.
	`In¡r
(
asBC_CÌHi
);

6258 
ùx
->
bc
.
	`In¡rDWORD
(
asBC_JZ
, 
–£Lab–
);

6259 
	`R–—£TempÜ¬yV¬ŸbË
(
ùx
->
ty³
, &ùx->
bc
);

6262 
asCTy³Info
 
¹emp
;

6263 
¹emp
 = 
‹mp
;

6264 ifĞ
¹emp
.
d©aTy³
.
	`IsObjeùHªdË
() )

6265 
¹emp
.
isEx¶ic™HªdË
 = 
Œue
;

6267 
	`P»·»FÜAssignm’t
(&
¹emp
.
d©aTy³
, &
Ë
, 
ûx´
->
Ãxt
, 
Œue
);

6268 
	`M”geEx´By‹code
(
ùx
, &
Ë
);

6270 ifĞ!
¹emp
.
d©aTy³
.
	`IsPrim™ive
() )

6272 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_PSF
, ()
off£t
);

6273 
¹emp
.
d©aTy³
.
	`MakeReã»nû
(
	`IsV¬ŸbËOnH—p
(
off£t
));

6275 
	`P”fÜmAssignm’t
(&
¹emp
, &
Ë
.
ty³
, &
ùx
->
bc
, 
ûx´
->
Ãxt
);

6276 ifĞ!
¹emp
.
d©aTy³
.
	`IsPrim™ive
() )

6277 
ùx
->
bc
.
	`In¡r
(
asBC_PİPŒ
);

6280 
	`R–—£TempÜ¬yV¬ŸbË
(
Ë
.
ty³
, &
ùx
->
bc
);

6282 
ùx
->
bc
.
	`In¡rINT
(
asBC_JMP
, 
aá”Lab–
);

6285 
ùx
->
bc
.
	`Lab–
(()
–£Lab–
);

6288 
	`P»·»FÜAssignm’t
(&
¹emp
.
d©aTy³
, &
»
, 
ûx´
->
Ãxt
, 
Œue
);

6289 
	`M”geEx´By‹code
(
ùx
, &
»
);

6291 ifĞ!
¹emp
.
d©aTy³
.
	`IsPrim™ive
() )

6293 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_PSF
, ()
off£t
);

6294 
¹emp
.
d©aTy³
.
	`MakeReã»nû
(
	`IsV¬ŸbËOnH—p
(
off£t
));

6296 
	`P”fÜmAssignm’t
(&
¹emp
, &
»
.
ty³
, &
ùx
->
bc
, 
ûx´
->
Ãxt
);

6297 ifĞ!
¹emp
.
d©aTy³
.
	`IsPrim™ive
() )

6298 
ùx
->
bc
.
	`In¡r
(
asBC_PİPŒ
);

6301 
	`R–—£TempÜ¬yV¬ŸbË
(
»
.
ty³
, &
ùx
->
bc
);

6303 
ùx
->
bc
.
	`Lab–
(()
aá”Lab–
);

6306 ifĞ!
Ë
.
ty³
.
d©aTy³
.
	`IsEqu®Exû±CÚ¡
(
»
.type.dataType) )

6307 
	`E¼Ü
(
TXT_BOTH_MUST_BE_SAME
, 
ex´
);

6310 
ùx
->
ty³
 = 
¹emp
;

6311 
ùx
->
ty³
.
isEx¶ic™HªdË
 = isExplicitHandle;

6313 ifĞ!
ùx
->
ty³
.
d©aTy³
.
	`IsPrim™ive
() )

6315 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_PSF
, ()
off£t
);

6316 
ùx
->
ty³
.
d©aTy³
.
	`MakeReã»nû
(
	`IsV¬ŸbËOnH—p
(
off£t
));

6320 
ùx
->
ty³
.
isCÚ¡ªt
 = 
çl£
;

6325 
ùx
->
ty³
.
	`S‘Dummy
();

6330  
	`CompeEx´essiÚ
(
ûx´
, 
ùx
);

6333 
	}
}

6335 
	gasCComp”
::
	$CompeEx´essiÚ
(
asCSütNode
 *
ex´
, 
asSEx´CÚ‹xt
 *
ùx
)

6337 
	`asASSERT
(
ex´
->
nodeTy³
 =ğ
¢Ex´essiÚ
);

6346 
couÁ
 = 0;

6347 
asCSütNode
 *
node
 = 
ex´
->
fœ¡Chd
;

6348  
node
 )

6350 
couÁ
++;

6351 
node
 =‚ode->
Ãxt
;

6354 
asCA¼ay
<
asCSütNode
 *> 
	`¡ack
(
couÁ
);

6355 
asCA¼ay
<
asCSütNode
 *> 
	`¡ack2
(
couÁ
);

6357 
node
 = 
ex´
->
fœ¡Chd
;

6358  
node
 )

6360 
´eûd’û
 = 
	`G‘P»ûd’û
(
node
);

6362  
¡ack
.
	`G‘L’gth
() > 0 &&

6363 
´eûd’û
 <ğ
	`G‘P»ûd’û
(
¡ack
[¡ack.
	`G‘L’gth
()-1]) )

6364 
¡ack2
.
	`PushLa¡
(
¡ack
.
	`PİLa¡
());

6366 
¡ack
.
	`PushLa¡
(
node
);

6368 
node
 =‚ode->
Ãxt
;

6371  
¡ack
.
	`G‘L’gth
() > 0 )

6372 
¡ack2
.
	`PushLa¡
(
¡ack
.
	`PİLa¡
());

6375  
	`CompePo¡FixEx´essiÚ
(&
¡ack2
, 
ùx
);

6376 
	}
}

6378 
	gasCComp”
::
CompePo¡FixEx´essiÚ
(
asCA¼ay
<
asCSütNode
 *> *
po¡fix
, 
asSEx´CÚ‹xt
 *
ùx
)

6381 
asASSERT
(
ùx
->
bc
.
G‘La¡In¡r
() == -1);

6385 
	gùx
->
	gty³
.
S‘Dummy
();

6388 
	gasCA¼ay
<
	gasSEx´CÚ‹xt
*> 
	gä“
;

6389 
	gasCA¼ay
<
	gasSEx´CÚ‹xt
*> 
	gex´
;

6390 
	g»t
 = 0;

6391  
asUINT
 
	gn
 = 0; 
	g»t
 =ğ0 && 
n
 < 
po¡fix
->
G‘L’gth
();‚++ )

6393 
asCSütNode
 *
	gnode
 = (*
po¡fix
)[
n
];

6394 ifĞ
	gnode
->
	gnodeTy³
 =ğ
¢Ex´T”m
 )

6396 
asSEx´CÚ‹xt
 *
e
 = 
ä“
.
G‘L’gth
(è? f»e.
PİLa¡
(è: 
asNEW
×sSEx´CÚ‹xt)(
’gše
);

6397 
	gex´
.
PushLa¡
(
e
);

6398 
	ge
->
	gex´Node
 = 
node
;

6399 
	g»t
 = 
CompeEx´essiÚT”m
(
node
, 
e
);

6403 
asSEx´CÚ‹xt
 *
	gr
 = 
ex´
.
PİLa¡
();

6404 
asSEx´CÚ‹xt
 *
	gl
 = 
ex´
.
PİLa¡
();

6407 
asSEx´CÚ‹xt
 *
	ge
 = 
ä“
.
G‘L’gth
(è? f»e.
PİLa¡
(è: 
asNEW
×sSEx´CÚ‹xt)(
’gše
);

6408 
	g»t
 = 
CompeO³¿tÜ
(
node
, 
l
, 
r
, 
e
);

6410 
	gex´
.
PushLa¡
(
e
);

6413 
	gl
->
CË¬
();

6414 
	gä“
.
PushLa¡
(
l
);

6415 
	gr
->
CË¬
();

6416 
	gä“
.
PushLa¡
(
r
);

6420 ifĞ
	g»t
 == 0 )

6422 
asASSERT
(
ex´
.
G‘L’gth
() == 1);

6425 
M”geEx´By‹codeAndTy³
(
ùx
, 
ex´
[0]);

6429  
asUINT
 
	ge
 = 0;ƒ < 
	gex´
.
G‘L’gth
();ƒ++ )

6430 
asDELETE
(
ex´
[
e
], 
asSEx´CÚ‹xt
);

6431  
asUINT
 
	gf
 = 0; f < 
	gä“
.
G‘L’gth
(); f++ )

6432 
asDELETE
(
ä“
[
f
], 
asSEx´CÚ‹xt
);

6434  
	g»t
;

6437 
	gasCComp”
::
	$CompeEx´essiÚT”m
(
asCSütNode
 *
node
, 
asSEx´CÚ‹xt
 *
ùx
)

6440 
	`asASSERT
(
ùx
->
bc
.
	`G‘La¡In¡r
() == -1);

6443 
ùx
->
ty³
.
	`S‘Dummy
();

6446 
asCSütNode
 *
vnode
 = 
node
->
fœ¡Chd
;

6447  
vnode
->
nodeTy³
 !ğ
¢Ex´V®ue
 )

6448 
vnode
 = vnode->
Ãxt
;

6450 
asSEx´CÚ‹xt
 
	`v
(
’gše
);

6451 
r
 = 
	`CompeEx´essiÚV®ue
(
vnode
, &
v
); if(„ < 0 ) „;

6454 
asCSütNode
 *
²ode
 = 
vnode
->
Ãxt
;

6455  
²ode
 )

6457 
r
 = 
	`CompeEx´essiÚPo¡Op
(
²ode
, &
v
); if(„ < 0 ) „;

6458 
²ode
 =…node->
Ãxt
;

6462 
²ode
 = 
vnode
->
´ev
;

6463  
²ode
 )

6465 
r
 = 
	`CompeEx´essiÚP»Op
(
²ode
, &
v
); if(„ < 0 ) „;

6466 
²ode
 =…node->
´ev
;

6470 
	`M”geEx´By‹codeAndTy³
(
ùx
, &
v
);

6473 
	}
}

6475 
	gasCComp”
::
	$CompeV¬ŸbËAcûss
(cÚ¡ 
asCSŒšg
 &
Çme
, cÚ¡‡sCSŒšg &
scİe
, 
asSEx´CÚ‹xt
 *
ùx
, 
asCSütNode
 *
”rNode
, 
boŞ
 
isO±iÚ®
, boŞ 
noFunùiÚ
, 
asCObjeùTy³
 *
objTy³
)

6477 
boŞ
 
found
 = 
çl£
;

6481 
sV¬ŸbË
 *
v
 = 0;

6482 ifĞ!
isCompšgDeçuÉArg
 && 
scİe
 =ğ"" && !
objTy³
 )

6483 
v
 = 
v¬ŸbËs
->
	`G‘V¬ŸbË
(
Çme
.
	`Add»ssOf
());

6484 ifĞ
v
 )

6486 
found
 = 
Œue
;

6488 ifĞ
v
->
isPu»CÚ¡ªt
 )

6489 
ùx
->
ty³
.
	`S‘CÚ¡ªtQW
(
v
->ty³, v->
cÚ¡ªtV®ue
);

6490 ifĞ
v
->
ty³
.
	`IsPrim™ive
() )

6492 ifĞ
v
->
ty³
.
	`IsReã»nû
() )

6495 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_PshVPŒ
, ()
v
->
¡ackOff£t
);

6496 
ùx
->
bc
.
	`In¡r
(
asBC_PİRPŒ
);

6497 
ùx
->
ty³
.
	`S‘
(
v
->type);

6500 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
v
->ty³, v->
¡ackOff£t
, 
çl£
);

6502 
ùx
->
ty³
.
isLV®ue
 = 
Œue
;

6506 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_PSF
, ()
v
->
¡ackOff£t
);

6507 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
v
->ty³, v->
¡ackOff£t
, 
çl£
);

6511 ifĞ
v
->
ÚH—p
 || v->
ty³
.
	`IsObjeùHªdË
(èè
ùx
->ty³.
d©aTy³
.
	`MakeReã»nû
(
Œue
);

6514 ifĞ
v
->
ty³
.
	`IsReã»nû
(è&& (!v->ty³.
	`IsObjeù
(è|| v->ty³.
	`IsObjeùHªdË
()) )

6515 
ùx
->
bc
.
	`In¡r
(
asBC_RDSPŒ
);

6517 
ùx
->
ty³
.
isLV®ue
 = 
Œue
;

6523 ifĞ!
isCompšgDeçuÉArg
 && !
found
 && ((
objTy³
è|| (
outFunc
 && outFunc->
objeùTy³
 && 
scİe
 == "")) )

6525 ifĞ
Çme
 =ğ
THIS_TOKEN
 && !
objTy³
 )

6527 
asCD©aTy³
 
dt
 =‡sCD©aTy³::
	`C»©eObjeù
(
outFunc
->
objeùTy³
, outFunc->
isR—dOÆy
);

6530 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_PSF
, 0);

6531 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
dt
, 0, 
çl£
);

6532 
ùx
->
ty³
.
d©aTy³
.
	`MakeReã»nû
(
Œue
);

6533 
ùx
->
ty³
.
isLV®ue
 = 
Œue
;

6535 
found
 = 
Œue
;

6538 ifĞ!
found
 )

6541 
asSEx´CÚ‹xt
 
	`acûss
(
’gše
);

6542 ifĞ
objTy³
 )

6543 
acûss
.
ty³
.
	`S‘
(
asCD©aTy³
::
	`C»©eObjeù
(
objTy³
, 
çl£
));

6545 
acûss
.
ty³
.
	`S‘
(
asCD©aTy³
::
	`C»©eObjeù
(
outFunc
->
objeùTy³
, outFunc->
isR—dOÆy
));

6546 
acûss
.
ty³
.
d©aTy³
.
	`MakeReã»nû
(
Œue
);

6547 
r
 = 0;

6548 ifĞ
”rNode
->
Ãxt
 &&ƒ¼Node->Ãxt->
tok’Ty³
 =ğ
‰O³nB¿ck‘
 )

6551 
asSEx´CÚ‹xt
 
	`dummyArg
(
’gše
);

6552 
r
 = 
	`FšdPrİ”tyAcûssÜ
(
Çme
, &
acûss
, &
dummyArg
, 
”rNode
, 
Œue
);

6554 ifĞ
r
 == 0 )

6557 
r
 = 
	`FšdPrİ”tyAcûssÜ
(
Çme
, &
acûss
, 
”rNode
, 
Œue
);

6559 ifĞ
r
 < 0 )  -1;

6560 ifĞ
acûss
.
´İ”ty_g‘
 ||‡cûss.
´İ”ty_£t
 )

6562 ifĞ!
objTy³
 )

6566 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_PSF
, 0);

6568 
	`M”geEx´By‹codeAndTy³
(
ùx
, &
acûss
);

6570 
found
 = 
Œue
;

6574 ifĞ!
found
 )

6576 
asCD©aTy³
 
dt
;

6577 ifĞ
objTy³
 )

6578 
dt
 = 
asCD©aTy³
::
	`C»©eObjeù
(
objTy³
, 
çl£
);

6580 
dt
 = 
asCD©aTy³
::
	`C»©eObjeù
(
outFunc
->
objeùTy³
, 
çl£
);

6581 
asCObjeùPrİ”ty
 *
´İ
 = 
bud”
->
	`G‘ObjeùPrİ”ty
(
dt
, 
Çme
.
	`Add»ssOf
());

6582 ifĞ
´İ
 )

6584 ifĞ!
objTy³
 )

6588 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_PSF
, 0);

6589 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
dt
, 0, 
çl£
);

6590 
ùx
->
ty³
.
d©aTy³
.
	`MakeReã»nû
(
Œue
);

6591 
	`D”eã»nû
(
ùx
, 
Œue
);

6596 
ùx
->
bc
.
	`In¡rSHORT_DW
(
asBC_ADDSi
, ()
´İ
->
by‹Off£t
, 
’gše
->
	`G‘Ty³IdFromD©aTy³
(
dt
));

6598 ifĞ
´İ
->
ty³
.
	`IsReã»nû
() )

6599 
ùx
->
bc
.
	`In¡r
(
asBC_RDSPŒ
);

6602 ifĞ
´İ
->
ty³
.
	`IsPrim™ive
() )

6605 
ùx
->
bc
.
	`In¡r
(
asBC_PİRPŒ
);

6609 
ùx
->
ty³
.
d©aTy³
 = 
´İ
->type;

6610 
ùx
->
ty³
.
d©aTy³
.
	`MakeReã»nû
(
Œue
);

6611 
ùx
->
ty³
.
isV¬ŸbË
 = 
çl£
;

6612 
ùx
->
ty³
.
isLV®ue
 = 
Œue
;

6614 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsObjeù
(è&& !ùx->ty³.d©aTy³.
	`IsObjeùHªdË
() )

6617 
ùx
->
ty³
.
d©aTy³
.
	`MakeReã»nû
(
çl£
);

6621 
ùx
->
ty³
.
d©aTy³
.
	`MakeR—dOÆy
(
outFunc
->
isR—dOÆy
);

6623 
found
 = 
Œue
;

6629 ifĞ!
found
 && !
objTy³
 )

6633 
asSEx´CÚ‹xt
 
	`acûss
(
’gše
);

6634 
r
 = 0;

6635 ifĞ
”rNode
->
Ãxt
 &&ƒ¼Node->Ãxt->
tok’Ty³
 =ğ
‰O³nB¿ck‘
 )

6638 
asSEx´CÚ‹xt
 
	`dummyArg
(
’gše
);

6639 
r
 = 
	`FšdPrİ”tyAcûssÜ
(
Çme
, &
acûss
, &
dummyArg
, 
”rNode
);

6641 ifĞ
r
 == 0 )

6644 
r
 = 
	`FšdPrİ”tyAcûssÜ
(
Çme
, &
acûss
, 
”rNode
);

6646 ifĞ
r
 < 0 )  -1;

6647 ifĞ
acûss
.
´İ”ty_g‘
 ||‡cûss.
´İ”ty_£t
 )

6650 
	`M”geEx´By‹codeAndTy³
(
ùx
, &
acûss
);

6652 
found
 = 
Œue
;

6656 ifĞ!
found
 )

6658 
boŞ
 
isComped
 = 
Œue
;

6659 
boŞ
 
isPu»CÚ¡ªt
 = 
çl£
;

6660 
boŞ
 
isAµPrİ
 = 
çl£
;

6661 
asQWORD
 
cÚ¡ªtV®ue
 = 0;

6662 
asCGlob®Prİ”ty
 *
´İ
 = 0;

6663 
asSNameS·û
 *
ns
 = 
	`D‘”mšeNameS·û
(
scİe
);

6664 ifĞ
ns
 )

6665 
´İ
 = 
bud”
->
	`G‘Glob®Prİ”ty
(
Çme
.
	`Add»ssOf
(), 
ns
, &
isComped
, &
isPu»CÚ¡ªt
, &
cÚ¡ªtV®ue
, &
isAµPrİ
);

6666 ifĞ
´İ
 )

6668 
found
 = 
Œue
;

6671 ifĞ
isComped
 )

6673 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
(è&& (ùx->ty³.d©aTy³.G‘ObjeùTy³()->
æags
 & 
asOBJ_IMPLICIT_HANDLE
) )

6675 
ùx
->
ty³
.
d©aTy³
.
	`MakeHªdË
(
Œue
);

6676 
ùx
->
ty³
.
isEx¶ic™HªdË
 = 
Œue
;

6683 ifĞ
isPu»CÚ¡ªt
 )

6684 
ùx
->
ty³
.
	`S‘CÚ¡ªtQW
(
´İ
->ty³, 
cÚ¡ªtV®ue
);

6689 ifĞ
outFunc
->
	`IsSh¬ed
() )

6691 ifĞ!
isAµPrİ
 )

6693 
asCSŒšg
 
¡r
;

6694 
¡r
.
	`FÜm©
(
TXT_SHARED_CANNOT_ACCESS_NON_SHARED_VAR_s
, 
´İ
->
Çme
.
	`Add»ssOf
());

6695 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
”rNode
);

6701 
ùx
->
ty³
.
	`S‘
(
´İ
->type);

6702 
ùx
->
ty³
.
d©aTy³
.
	`MakeReã»nû
(
Œue
);

6703 
ùx
->
ty³
.
isLV®ue
 = 
Œue
;

6705 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsPrim™ive
() )

6708 
ùx
->
bc
.
	`In¡rPTR
(
asBC_LDG
, 
´İ
->
	`G‘Add»ssOfV®ue
());

6713 
ùx
->
bc
.
	`In¡rPTR
(
asBC_PGA
, 
´İ
->
	`G‘Add»ssOfV®ue
());

6717 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_VALUE
 ||

6718 !
ùx
->
ty³
.
d©aTy³
.
	`IsObjeùHªdË
() )

6721 
ùx
->
bc
.
	`In¡r
(
asBC_ChkRefS
);

6728 
asCSŒšg
 
¡r
;

6729 
¡r
.
	`FÜm©
(
TXT_UNINITIALIZED_GLOBAL_VAR_s
, 
´İ
->
Çme
.
	`Add»ssOf
());

6730 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
”rNode
);

6738 ifĞ!
noFunùiÚ
 && !
found
 && !
objTy³
 )

6740 
asCA¼ay
<> 
funcs
;

6742 
asSNameS·û
 *
ns
 = 
	`D‘”mšeNameS·û
(
scİe
);

6743 ifĞ
ns
 )

6744 
bud”
->
	`G‘FunùiÚDesütiÚs
(
Çme
.
	`Add»ssOf
(), 
funcs
, 
ns
);

6746 ifĞ
funcs
.
	`G‘L’gth
() > 1 )

6754 
asCSŒšg
 
¡r
;

6755 
¡r
.
	`FÜm©
(
TXT_MULTIPLE_MATCHING_SIGNATURES_TO_s
, 
Çme
.
	`Add»ssOf
());

6756 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
”rNode
);

6759 ifĞ
funcs
.
	`G‘L’gth
() == 1 )

6761 
found
 = 
Œue
;

6764 ifĞ!
bud”
->
	`G‘FunùiÚDesütiÚ
(
funcs
[0])->
	`IsSh¬ed
() &&

6765 
outFunc
->
	`IsSh¬ed
() )

6767 
asCSŒšg
 
msg
;

6768 
msg
.
	`FÜm©
(
TXT_SHARED_CANNOT_CALL_NON_SHARED_FUNC_s
, 
bud”
->
	`G‘FunùiÚDesütiÚ
(
funcs
[0])->
	`G‘Deş¬©iÚ
());

6769 
	`E¼Ü
(
msg
.
	`Add»ssOf
(), 
”rNode
);

6774 
ùx
->
bc
.
	`In¡rPTR
(
asBC_FuncPŒ
, 
bud”
->
	`G‘FunùiÚDesütiÚ
(
funcs
[0]));

6775 
ùx
->
ty³
.
	`S‘
(
asCD©aTy³
::
	`C»©eFuncDef
(
bud”
->
	`G‘FunùiÚDesütiÚ
(
funcs
[0])));

6780 ifĞ!
found
 && !
objTy³
 )

6783 
asCObjeùTy³
 *
scİeTy³
 = 0;

6784 ifĞ
scİe
 != "" && scope != "::" )

6787 
asCSŒšg
 
’umTy³
 = 
scİe
;

6788 
asCSŒšg
 
nsScİe
;

6789 
p
 = 
scİe
.
	`FšdLa¡
("::");

6790 ifĞ
p
 != -1 )

6792 
’umTy³
 = 
scİe
.
	`SubSŒšg
(
p
+2);

6793 
nsScİe
 = 
scİe
.
	`SubSŒšg
(0, 
p
);

6796 
asSNameS·û
 *
ns
 = 
’gše
->
	`FšdNameS·û
(
nsScİe
.
	`Add»ssOf
());

6797 ifĞ
ns
 )

6798 
scİeTy³
 = 
bud”
->
	`G‘ObjeùTy³
(
’umTy³
.
	`Add»ssOf
(), 
ns
);

6801 
asDWORD
 
v®ue
 = 0;

6802 
asCD©aTy³
 
dt
;

6803 ifĞ
scİeTy³
 && 
bud”
->
	`G‘EnumV®ueFromObjeùTy³
(scİeTy³, 
Çme
.
	`Add»ssOf
(), 
dt
, 
v®ue
) )

6806 
found
 = 
Œue
;

6808 ifĞ!
’gše
->
•
.
»quœeEnumScİe
 )

6811 
asSNameS·û
 *
ns
 = 
	`D‘”mšeNameS·û
(
scİe
);

6812 
e
 = 0;

6813 ifĞ
ns
 )

6814 
e
 = 
bud”
->
	`G‘EnumV®ue
(
Çme
.
	`Add»ssOf
(), 
dt
, 
v®ue
, 
ns
);

6815 ifĞ
e
 )

6817 
found
 = 
Œue
;

6818 ifĞ
e
 == 2 )

6820 
	`E¼Ü
(
TXT_FOUND_MULTIPLE_ENUM_VALUES
, 
”rNode
);

6825 ifĞ
found
 )

6831 
ùx
->
ty³
.
	`S‘CÚ¡ªtDW
(
dt
, 
v®ue
);

6836 ifĞ!
found
 )

6839 
ùx
->
ty³
.
	`S‘Dummy
();

6841 ifĞ!
isO±iÚ®
 )

6844 
asCSŒšg
 
’ame
;

6845 ifĞ
scİe
 != "" && scope != "::" )

6846 
’ame
 = 
scİe
 + "::";

6848 
’ame
 = 
scİe
;

6849 
’ame
 +ğ
Çme
;

6851 
asCSŒšg
 
¡r
;

6852 
¡r
.
	`FÜm©
(
TXT_s_NOT_DECLARED
, 
’ame
.
	`Add»ssOf
());

6853 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
”rNode
);

6856 
v¬ŸbËs
->
	`Deş¬eV¬ŸbË
(
Çme
.
	`Add»ssOf
(), 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ
, 
çl£
), 0x7FFF, 
Œue
);

6859 
sV¬ŸbË
 *
v
 = 
v¬ŸbËs
->
	`G‘V¬ŸbË
(
Çme
.
	`Add»ssOf
());

6860 
	`asASSERT
(
v
);

6861 ifĞ
v
 ) v->
isIn™Ÿlized
 = 
Œue
;

6869 
	}
}

6871 
	gasCComp”
::
	$CompeEx´essiÚV®ue
(
asCSütNode
 *
node
, 
asSEx´CÚ‹xt
 *
ùx
)

6874 
	`asASSERT
(
ùx
->
bc
.
	`G‘La¡In¡r
() == -1);

6876 
asCSütNode
 *
vnode
 = 
node
->
fœ¡Chd
;

6877 
ùx
->
ex´Node
 = 
vnode
;

6878 ifĞ
vnode
->
nodeTy³
 =ğ
¢V¬ŸbËAcûss
 )

6881 
asCSŒšg
 
scİe
 = 
bud”
->
	`G‘ScİeFromNode
(
vnode
->
fœ¡Chd
, 
süt
, &vnode);

6884 
	`asASSERT
(
vnode
->
nodeTy³
 =ğ
¢Id’tif›r
 );

6885 
asCSŒšg
 
	`Çme
(&
süt
->
code
[
vnode
->
tok’Pos
], vnode->
tok’L’gth
);

6887  
	`CompeV¬ŸbËAcûss
(
Çme
, 
scİe
, 
ùx
, 
node
);

6889 ifĞ
vnode
->
nodeTy³
 =ğ
¢CÚ¡ªt
 )

6891 ifĞ
vnode
->
tok’Ty³
 =ğ
‰IÁCÚ¡ªt
 )

6893 
asCSŒšg
 
	`v®ue
(&
süt
->
code
[
vnode
->
tok’Pos
], vnode->
tok’L’gth
);

6895 
asQWORD
 
v®
 = 
	`asSŒšgSÿnUIÁ64
(
v®ue
.
	`Add»ssOf
(), 10, 0);

6898 ifĞ
v®
>>32 )

6899 
ùx
->
ty³
.
	`S‘CÚ¡ªtQW
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ64
, 
Œue
), 
v®
);

6901 
ùx
->
ty³
.
	`S‘CÚ¡ªtDW
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ
, 
Œue
), 
	`asDWORD
(
v®
));

6903 ifĞ
vnode
->
tok’Ty³
 =ğ
‰B™sCÚ¡ªt
 )

6905 
asCSŒšg
 
	`v®ue
(&
süt
->
code
[
vnode
->
tok’Pos
+2], vnode->
tok’L’gth
-2);

6908 
asQWORD
 
v®
 = 
	`asSŒšgSÿnUIÁ64
(
v®ue
.
	`Add»ssOf
(), 16, 0);

6911 ifĞ
v®
>>32 )

6912 
ùx
->
ty³
.
	`S‘CÚ¡ªtQW
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ64
, 
Œue
), 
v®
);

6914 
ùx
->
ty³
.
	`S‘CÚ¡ªtDW
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ
, 
Œue
), 
	`asDWORD
(
v®
));

6916 ifĞ
vnode
->
tok’Ty³
 =ğ
‰FlßtCÚ¡ªt
 )

6918 
asCSŒšg
 
	`v®ue
(&
süt
->
code
[
vnode
->
tok’Pos
], vnode->
tok’L’gth
);

6922 
size_t
 
numSÿÂed
;

6923 
v
 = (
	`asSŒšgSÿnDoubË
(
v®ue
.
	`Add»ssOf
(), &
numSÿÂed
));

6924 
ùx
->
ty³
.
	`S‘CÚ¡ªtF
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰Flßt
, 
Œue
), 
v
);

6925 #iâdeà
AS_USE_DOUBLE_AS_FLOAT


6927 
	`asASSERT
(
numSÿÂed
 =ğ
vnode
->
tok’L’gth
 - 1);

6930 ifĞ
vnode
->
tok’Ty³
 =ğ
‰DoubËCÚ¡ªt
 )

6932 
asCSŒšg
 
	`v®ue
(&
süt
->
code
[
vnode
->
tok’Pos
], vnode->
tok’L’gth
);

6936 
size_t
 
numSÿÂed
;

6937 
v
 = 
	`asSŒšgSÿnDoubË
(
v®ue
.
	`Add»ssOf
(), &
numSÿÂed
);

6938 
ùx
->
ty³
.
	`S‘CÚ¡ªtD
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰DoubË
, 
Œue
), 
v
);

6939 
	`asASSERT
(
numSÿÂed
 =ğ
vnode
->
tok’L’gth
);

6941 ifĞ
vnode
->
tok’Ty³
 =ğ
‰True
 ||

6942 
vnode
->
tok’Ty³
 =ğ
‰F®£
 )

6944 #ià
AS_SIZEOF_BOOL
 == 1

6945 
ùx
->
ty³
.
	`S‘CÚ¡ªtB
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
Œue
), 
vnode
->
tok’Ty³
 =ğ
‰True
 ? 
VALUE_OF_BOOLEAN_TRUE
 : 0);

6947 
ùx
->
ty³
.
	`S‘CÚ¡ªtDW
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
Œue
), 
vnode
->
tok’Ty³
 =ğ
‰True
 ? 
VALUE_OF_BOOLEAN_TRUE
 : 0);

6950 ifĞ
vnode
->
tok’Ty³
 =ğ
‰SŒšgCÚ¡ªt
 ||

6951 
vnode
->
tok’Ty³
 =ğ
‰MuÉšeSŒšgCÚ¡ªt
 ||

6952 
vnode
->
tok’Ty³
 =ğ
‰H”edocSŒšgCÚ¡ªt
 )

6954 
asCSŒšg
 
¡r
;

6955 
asCSütNode
 *
¢ode
 = 
vnode
->
fœ¡Chd
;

6956 ifĞ
süt
->
code
[
¢ode
->
tok’Pos
] =ğ'\'' && 
’gše
->
•
.
u£Ch¬aù”L™”®s
 )

6959 
¡r
.
	`Assign
(&
süt
->
code
[
¢ode
->
tok’Pos
+1], snode->
tok’L’gth
-2);

6961 
asDWORD
 
v®
 = 0;

6962 ifĞ
¡r
.
	`G‘L’gth
(è&& ()¡r[0] > 127 && 
’gše
->
•
.
sÿÂ”
 == 1 )

6965 
v®
 = 
	`asSŒšgDecodeUTF8
(
¡r
.
	`Add»ssOf
(), 0);

6966 ifĞ
v®
 =ğ(
asDWORD
)-1 )

6967 
	`E¼Ü
(
TXT_INVALID_CHAR_LITERAL
, 
vnode
);

6971 
v®
 = 
	`ProûssSŒšgCÚ¡ªt
(
¡r
, 
¢ode
);

6972 ifĞ
v®
 =ğ(
asDWORD
)-1 )

6973 
	`E¼Ü
(
TXT_INVALID_CHAR_LITERAL
, 
vnode
);

6976 
ùx
->
ty³
.
	`S‘CÚ¡ªtDW
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ
, 
Œue
), 
v®
);

6981  
¢ode
 )

6983 
asCSŒšg
 
ÿt
;

6984 ifĞ
¢ode
->
tok’Ty³
 =ğ
‰SŒšgCÚ¡ªt
 )

6986 
ÿt
.
	`Assign
(&
süt
->
code
[
¢ode
->
tok’Pos
+1], snode->
tok’L’gth
-2);

6987 
	`ProûssSŒšgCÚ¡ªt
(
ÿt
, 
¢ode
);

6989 ifĞ
¢ode
->
tok’Ty³
 =ğ
‰MuÉšeSŒšgCÚ¡ªt
 )

6991 ifĞ!
’gše
->
•
.
®lowMuÉšeSŒšgs
 )

6992 
	`E¼Ü
(
TXT_MULTILINE_STRINGS_NOT_ALLOWED
, 
¢ode
);

6994 
ÿt
.
	`Assign
(&
süt
->
code
[
¢ode
->
tok’Pos
+1], snode->
tok’L’gth
-2);

6995 
	`ProûssSŒšgCÚ¡ªt
(
ÿt
, 
¢ode
);

6997 ifĞ
¢ode
->
tok’Ty³
 =ğ
‰H”edocSŒšgCÚ¡ªt
 )

6999 
ÿt
.
	`Assign
(&
süt
->
code
[
¢ode
->
tok’Pos
+3], snode->
tok’L’gth
-6);

7000 
	`ProûssH”edocSŒšgCÚ¡ªt
(
ÿt
, 
¢ode
);

7003 
¡r
 +ğ
ÿt
;

7005 
¢ode
 = snode->
Ãxt
;

7009 
asCSütFunùiÚ
 *
desü
 = 
’gše
->
¡ršgFaùÜy
;

7010 ifĞ
desü
 == 0 )

7013 
	`E¼Ü
(
TXT_STRINGS_NOT_RECOGNIZED
, 
vnode
);

7016 
ùx
->
ty³
.
	`S‘Dummy
();

7022 
id
 = 
’gše
->
	`AddCÚ¡ªtSŒšg
(
¡r
.
	`Add»ssOf
(), sŒ.
	`G‘L’gth
());

7023 
ùx
->
bc
.
	`In¡rWORD
(
asBC_STR
, (
asWORD
)
id
);

7025 
boŞ
 
u£V¬ŸbË
 = 
çl£
;

7026 
¡ackOff£t
 = 0;

7028 ifĞ
desü
->
	`DÛsR‘uºOnSck
() )

7030 
u£V¬ŸbË
 = 
Œue
;

7031 
¡ackOff£t
 = 
	`AÎoÿ‹V¬ŸbË
(
desü
->
»tuºTy³
, 
Œue
);

7032 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_PSF
, (
¡ackOff£t
));

7035 
	`P”fÜmFunùiÚC®l
(
desü
->
id
, 
ùx
, 
çl£
, 0, 0, 
u£V¬ŸbË
, 
¡ackOff£t
);

7039 ifĞ
vnode
->
tok’Ty³
 =ğ
‰NuÎ
 )

7041 
ùx
->
bc
.
	`In¡r
(
asBC_PshNuÎ
);

7042 
ùx
->
ty³
.
	`S‘NuÎCÚ¡ªt
();

7045 
	`asASSERT
(
çl£
);

7047 ifĞ
vnode
->
nodeTy³
 =ğ
¢FunùiÚC®l
 )

7050 
asCSŒšg
 
scİe
 = 
bud”
->
	`G‘ScİeFromNode
(
vnode
->
fœ¡Chd
, 
süt
);

7052  
	`CompeFunùiÚC®l
(
vnode
, 
ùx
, 0, 
çl£
, 
scİe
);

7054 ifĞ
vnode
->
nodeTy³
 =ğ
¢CÚ¡ruùC®l
 )

7056 
	`CompeCÚ¡ruùC®l
(
vnode
, 
ùx
);

7058 ifĞ
vnode
->
nodeTy³
 =ğ
¢Assignm’t
 )

7060 
asSEx´CÚ‹xt
 
	`e
(
’gše
);

7061 
r
 = 
	`CompeAssignm’t
(
vnode
, &
e
);

7062 ifĞ
r
 < 0 )

7064 
ùx
->
ty³
.
	`S‘Dummy
();

7065  
r
;

7067 
	`M”geEx´By‹codeAndTy³
(
ùx
, &
e
);

7069 ifĞ
vnode
->
nodeTy³
 =ğ
¢Ca¡
 )

7072 
	`CompeCÚv”siÚ
(
vnode
, 
ùx
);

7075 
	`asASSERT
(
çl£
);

7078 
	}
}

7080 
asUINT
 
	gasCComp”
::
	$ProûssSŒšgCÚ¡ªt
(
asCSŒšg
 &
c¡r
, 
asCSütNode
 *
node
, 
boŞ
 
´oûssEsÿ³Sequ’ûs
)

7082 
ch¬L™”®
 = -1;

7085 
asCA¼ay
<> 
	`¡r
(()
c¡r
.
	`G‘L’gth
());

7087  
asUINT
 
n
 = 0;‚ < 
c¡r
.
	`G‘L’gth
();‚++ )

7089 #ifdeà
AS_DOUBLEBYTE_CHARSET


7091 ifĞ(
c¡r
[
n
] & 0x80è&& 
’gše
->
•
.
sÿÂ”
 =ğ0 &&ƒngše->•.
¡ršgEncodšg
 != 1 )

7095 
¡r
.
	`PushLa¡
(
c¡r
[
n
]);

7096 
n
++;

7097 
¡r
.
	`PushLa¡
(
c¡r
[
n
]);

7102 
asUINT
 
v®
;

7104 ifĞ
´oûssEsÿ³Sequ’ûs
 && 
c¡r
[
n
] == '\\' )

7106 ++
n
;

7107 ifĞ
n
 =ğ
c¡r
.
	`G‘L’gth
() )

7109 ifĞ
ch¬L™”®
 == -1 ) charLiteral = 0;

7110  
ch¬L™”®
;

7117 ifĞ
c¡r
[
n
] == 'x' || cstr[n] == 'X' )

7119 ++
n
;

7120 ifĞ
n
 =ğ
c¡r
.
	`G‘L’gth
() ) ;

7122 
v®
 = 0;

7123 
c
 = 
’gše
->
•
.
¡ršgEncodšg
 == 1 ? 4 : 2;

7124  ; 
c
 > 0 && 
n
 < 
c¡r
.
	`G‘L’gth
(); c--,‚++ )

7126 ifĞ
c¡r
[
n
] >= '0' && cstr[n] <= '9' )

7127 
v®
 = v®*16 + 
c¡r
[
n
] - '0';

7128 ifĞ
c¡r
[
n
] >= 'a' && cstr[n] <= 'f' )

7129 
v®
 = v®*16 + 
c¡r
[
n
] - 'a' + 10;

7130 ifĞ
c¡r
[
n
] >= 'A' && cstr[n] <= 'F' )

7131 
v®
 = v®*16 + 
c¡r
[
n
] - 'A' + 10;

7137 
n
--;

7140 ifĞ
’gše
->
•
.
¡ršgEncodšg
 == 0 )

7142 
¡r
.
	`PushLa¡
((
asBYTE
)
v®
);

7146 #iâdeà
AS_BIG_ENDIAN


7147 
¡r
.
	`PushLa¡
((
asBYTE
)
v®
);

7148 
¡r
.
	`PushLa¡
((
asBYTE
)(
v®
>>8));

7150 
¡r
.
	`PushLa¡
((
asBYTE
)(
v®
>>8));

7151 
¡r
.
	`PushLa¡
((
asBYTE
)
v®
);

7154 ifĞ
ch¬L™”®
 =ğ-1 ) ch¬L™”® = 
v®
;

7157 ifĞ
c¡r
[
n
] == 'u' || cstr[n] == 'U' )

7161 
boŞ
 
ex³ù2
 = 
c¡r
[
n
] == 'u';

7162 
c
 = 
ex³ù2
 ? 4 : 8;

7164 
v®
 = 0;

7166  ; 
c
 > 0; c-- )

7168 ++
n
;

7169 ifĞ
n
 =ğ
c¡r
.
	`G‘L’gth
() ) ;

7171 ifĞ
c¡r
[
n
] >= '0' && cstr[n] <= '9' )

7172 
v®
 = v®*16 + 
c¡r
[
n
] - '0';

7173 ifĞ
c¡r
[
n
] >= 'a' && cstr[n] <= 'f' )

7174 
v®
 = v®*16 + 
c¡r
[
n
] - 'a' + 10;

7175 ifĞ
c¡r
[
n
] >= 'A' && cstr[n] <= 'F' )

7176 
v®
 = v®*16 + 
c¡r
[
n
] - 'A' + 10;

7181 ifĞ
c
 != 0 )

7185 
asCSŒšg
 
msg
;

7186 
msg
.
	`FÜm©
(
TXT_INVALID_UNICODE_FORMAT_EXPECTED_d
, 
ex³ù2
 ? 4 : 8);

7187 
	`W¬nšg
(
msg
.
	`Add»ssOf
(), 
node
);

7193 ifĞ
c¡r
[
n
] == '"' )

7194 
v®
 = '"';

7195 ifĞ
c¡r
[
n
] == '\'' )

7196 
v®
 = '\'';

7197 ifĞ
c¡r
[
n
] == 'n' )

7198 
v®
 = '\n';

7199 ifĞ
c¡r
[
n
] == 'r' )

7200 
v®
 = '\r';

7201 ifĞ
c¡r
[
n
] == 't' )

7202 
v®
 = '\t';

7203 ifĞ
c¡r
[
n
] == '0' )

7204 
v®
 = '\0';

7205 ifĞ
c¡r
[
n
] == '\\' )

7206 
v®
 = '\\';

7210 
	`W¬nšg
(
TXT_INVALID_ESCAPE_SEQUENCE
, 
node
);

7217 ifĞ
’gše
->
•
.
sÿÂ”
 =ğ1 && (
c¡r
[
n
] & 0x80) )

7219 
Ën
;

7220 
v®
 = 
	`asSŒšgDecodeUTF8
(&
c¡r
[
n
], &
Ën
);

7221 ifĞ
v®
 == 0xFFFFFFFF )

7225 
	`W¬nšg
(
TXT_INVALID_UNICODE_SEQUENCE_IN_SRC
, 
node
);

7226 
v®
 = ()
c¡r
[
n
];

7229 
n
 +ğ
Ën
-1;

7232 
v®
 = ()
c¡r
[
n
];

7236 
’codedV®ue
[5];

7237 
Ën
;

7238 ifĞ
’gše
->
•
.
sÿÂ”
 =ğ1 &&ƒngše->•.
¡ršgEncodšg
 == 0 )

7241 
Ën
 = 
	`asSŒšgEncodeUTF8
(
v®
, 
’codedV®ue
);

7243 ifĞ
’gše
->
•
.
¡ršgEncodšg
 == 1 )

7246 
Ën
 = 
	`asSŒšgEncodeUTF16
(
v®
, 
’codedV®ue
);

7251 
’codedV®ue
[0] = (
asBYTE
)
v®
;

7252 
Ën
 = 1;

7255 ifĞ
Ën
 < 0 )

7259 
	`W¬nšg
(
TXT_INVALID_UNICODE_VALUE
, 
node
);

7264 
¡r
.
	`CÚÿ‹Ç‹
(
’codedV®ue
, 
Ën
);

7265 ifĞ
ch¬L™”®
 =ğ-1 ) ch¬L™”® = 
v®
;

7269 
c¡r
.
	`Assign
(
¡r
.
	`Add»ssOf
(), sŒ.
	`G‘L’gth
());

7270  
ch¬L™”®
;

7271 
	}
}

7273 
	gasCComp”
::
	$ProûssH”edocSŒšgCÚ¡ªt
(
asCSŒšg
 &
¡r
, 
asCSütNode
 *
node
)

7276 
¡¬t
;

7277  
¡¬t
 = 0; s¹ < ()
¡r
.
	`G‘L’gth
(); start++ )

7279 ifĞ
¡r
[
¡¬t
] == '\n' )

7282 
¡¬t
++;

7286 ifĞ
¡r
[
¡¬t
] != ' ' &&

7287 
¡r
[
¡¬t
] != '\t' &&

7288 
¡r
[
¡¬t
] != '\r' )

7291 
¡¬t
 = 0;

7297 
’d
;

7298  
’d
 = ()
¡r
.
	`G‘L’gth
() - 1;ƒnd >= 0;ƒnd-- )

7300 ifĞ
¡r
[
’d
] == '\n' )

7303 ifĞ
¡r
[
’d
] != ' ' &&

7304 
¡r
[
’d
] != '\t' &&

7305 
¡r
[
’d
] != '\r' )

7308 
’d
 = ()
¡r
.
	`G‘L’gth
();

7313 ifĞ
’d
 < 0 )ƒnd = 0;

7315 
asCSŒšg
 
tmp
;

7316 ifĞ
’d
 > 
¡¬t
 )

7317 
tmp
.
	`Assign
(&
¡r
[
¡¬t
], 
’d
-start);

7319 
	`ProûssSŒšgCÚ¡ªt
(
tmp
, 
node
, 
çl£
);

7321 
¡r
 = 
tmp
;

7322 
	}
}

7324 
	gasCComp”
::
	$CompeCÚv”siÚ
(
asCSütNode
 *
node
, 
asSEx´CÚ‹xt
 *
ùx
)

7326 
asSEx´CÚ‹xt
 
	`ex´
(
’gše
);

7327 
asCD©aTy³
 
to
;

7328 
boŞ
 
ªyE¼Üs
 = 
çl£
;

7329 
EIm¶ic™CÚv
 
cÚvTy³
;

7330 ifĞ
node
->
nodeTy³
 =ğ
¢CÚ¡ruùC®l
 )

7332 
cÚvTy³
 = 
asIC_EXPLICIT_VAL_CAST
;

7335 ifĞ
node
->
Ï¡Chd
->
fœ¡Chd
 == 0 ||

7336 
node
->
Ï¡Chd
->
fœ¡Chd
 !=‚ode->lastChild->lastChild )

7338 
	`E¼Ü
(
TXT_ONLY_ONE_ARGUMENT_IN_CAST
, 
node
->
Ï¡Chd
);

7339 
ex´
.
ty³
.
	`S‘Dummy
();

7340 
ªyE¼Üs
 = 
Œue
;

7345 
r
 = 
	`CompeAssignm’t
(
node
->
Ï¡Chd
->
fœ¡Chd
, &
ex´
);

7346 ifĞ
r
 < 0 )

7347 
ªyE¼Üs
 = 
Œue
;

7352 
to
 = 
bud”
->
	`C»©eD©aTy³FromNode
(
node
->
fœ¡Chd
, 
süt
, 
’gše
->
ÇmeS·ûs
[0]);

7353 
to
.
	`MakeR—dOÆy
(
Œue
);

7354 
	`asASSERT
(
to
.
	`IsPrim™ive
());

7358 
cÚvTy³
 = 
asIC_EXPLICIT_REF_CAST
;

7361 
r
 = 
	`CompeAssignm’t
(
node
->
Ï¡Chd
, &
ex´
);

7362 ifĞ
r
 < 0 )

7363 
ªyE¼Üs
 = 
Œue
;

7367 
to
 = 
bud”
->
	`C»©eD©aTy³FromNode
(
node
->
fœ¡Chd
, 
süt
, 
’gše
->
ÇmeS·ûs
[0]);

7368 
to
 = 
bud”
->
	`ModifyD©aTy³FromNode
Ño, 
node
->
fœ¡Chd
->
Ãxt
, 
süt
, 0, 0);

7371 ifĞ
to
.
	`SuµÜtHªdËs
() )

7373 
to
.
	`MakeHªdË
(
Œue
);

7375 ifĞ!
to
.
	`IsObjeùHªdË
() )

7378 
	`E¼Ü
(
TXT_ILLEGAL_TARGET_TYPE_FOR_REF_CAST
, 
node
->
fœ¡Chd
);

7379 
ªyE¼Üs
 = 
Œue
;

7384 ifĞ
outFunc
->
	`IsSh¬ed
() &&

7385 
to
.
	`G‘ObjeùTy³
(è&& !to.G‘ObjeùTy³()->
	`IsSh¬ed
() )

7387 
asCSŒšg
 
msg
;

7388 
msg
.
	`FÜm©
(
TXT_SHARED_CANNOT_USE_NON_SHARED_TYPE_s
, 
to
.
	`G‘ObjeùTy³
()->
Çme
.
	`Add»ssOf
());

7389 
	`E¼Ü
(
msg
.
	`Add»ssOf
(), 
node
);

7390 
ªyE¼Üs
 = 
Œue
;

7393 ifĞ
ªyE¼Üs
 )

7396 
ùx
->
ty³
.
	`S‘CÚ¡ªtDW
(
to
, 0);

7400 
	`ProûssPrİ”tyG‘AcûssÜ
(&
ex´
, 
node
);

7403 ifĞ
ex´
.
ty³
.
d©aTy³
.
	`IsReã»nû
() )

7405 ifĞ
ex´
.
ty³
.
d©aTy³
.
	`IsObjeù
() )

7406 
	`D”eã»nû
(&
ex´
, 
Œue
);

7408 
	`CÚv”tToV¬ŸbË
(&
ex´
);

7411 
	`Im¶ic™CÚv”siÚ
(&
ex´
, 
to
, 
node
, 
cÚvTy³
);

7413 
	`IsV¬ŸbËIn™Ÿlized
(&
ex´
.
ty³
, 
node
);

7416 ifĞ
to
 =ğ
ex´
.
ty³
.
d©aTy³
 )

7419 
	`M”geEx´By‹code
(
ùx
, &
ex´
);

7420 
ùx
->
ty³
 = 
ex´
.type;

7424 ifĞ
to
.
	`IsEqu®Exû±CÚ¡
(
ex´
.
ty³
.
d©aTy³
è&&o.
	`IsPrim™ive
() )

7426 
	`M”geEx´By‹code
(
ùx
, &
ex´
);

7427 
ùx
->
ty³
 = 
ex´
.type;

7428 
ùx
->
ty³
.
d©aTy³
.
	`MakeR—dOÆy
(
Œue
);

7435 
boŞ
 
cÚv”siÚOK
 = 
çl£
;

7436 ifĞ!
ex´
.
ty³
.
isCÚ¡ªt
 )

7438 ifĞ!
ex´
.
ty³
.
d©aTy³
.
	`IsObjeù
() )

7439 
	`CÚv”tToTempV¬ŸbË
(&
ex´
);

7441 ifĞ
to
.
	`IsObjeùHªdË
() &&

7442 
ex´
.
ty³
.
d©aTy³
.
	`IsObjeùHªdË
() &&

7443 !(!
to
.
	`IsHªdËToCÚ¡
(è&& 
ex´
.
ty³
.
d©aTy³
.IsHandleToConst()) )

7445 
cÚv”siÚOK
 = 
	`CompeRefCa¡
(&
ex´
, 
to
, 
Œue
, 
node
);

7447 
	`M”geEx´By‹code
(
ùx
, &
ex´
);

7448 
ùx
->
ty³
 = 
ex´
.type;

7452 ifĞ
cÚv”siÚOK
 )

7456 
ùx
->
ty³
.
	`S‘Dummy
();

7458 
asCSŒšg
 
¡rTo
, 
¡rFrom
;

7460 
¡rTo
 = 
to
.
	`FÜm©
();

7461 
¡rFrom
 = 
ex´
.
ty³
.
d©aTy³
.
	`FÜm©
();

7463 
asCSŒšg
 
msg
;

7464 
msg
.
	`FÜm©
(
TXT_NO_CONVERSION_s_TO_s
, 
¡rFrom
.
	`Add»ssOf
(), 
¡rTo
.AddressOf());

7466 
	`E¼Ü
(
msg
.
	`Add»ssOf
(), 
node
);

7467 
	}
}

7469 
	gasCComp”
::
Aá”FunùiÚC®l
(
funcID
, 
asCA¼ay
<
asSEx´CÚ‹xt
*> &
¬gs
,‡sSEx´CÚ‹xˆ*
ùx
, 
boŞ
 
deãrAÎ
)

7471 
asCSütFunùiÚ
 *
	gdesü
 = 
bud”
->
G‘FunùiÚDesütiÚ
(
funcID
);

7477 
	gn
 = ()
desü
->
·¿m‘”Ty³s
.
G‘L’gth
() - 1;

7478  ; 
	gn
 >= 0;‚-- )

7480 ifĞ(
	gdesü
->
	g·¿m‘”Ty³s
[
n
].
IsReã»nû
(è&& (desü->
	gšOutFÏgs
[n] & 
	gasTM_OUTREF
)) ||

7481 (
	gdesü
->
	g·¿m‘”Ty³s
[
n
].
IsObjeù
(è&& 
	gdeãrAÎ
) )

7483 
asASSERT
Ğ!(
desü
->
·¿m‘”Ty³s
[
n
].
IsReã»nû
(è&& (desü->
šOutFÏgs
[n] =ğ
asTM_OUTREF
)è|| 
¬gs
[n]->
ÜigEx´
 );

7486 ifĞ
	g’gše
->
	g•
.
	g®lowUn§ãReã»nûs
 ||

7487 
	gdesü
->
	gšOutFÏgs
[
n
] !ğ
asTM_INOUTREF
 || 
¬gs
[n]->
ty³
.
isTempÜ¬y
 )

7490 
asSDeã¼edP¬am
 
outP¬am
;

7491 
	goutP¬am
.
	g¬gNode
 = 
¬gs
[
n
]->
ex´Node
;

7492 
	goutP¬am
.
	g¬gTy³
 = 
¬gs
[
n
]->
ty³
;

7493 
	goutP¬am
.
	g¬gInOutFÏgs
 = 
desü
->
šOutFÏgs
[
n
];

7494 
	goutP¬am
.
	gÜigEx´
 = 
¬gs
[
n
]->
ÜigEx´
;

7496 
	gùx
->
	gdeã¼edP¬ams
.
PushLa¡
(
outP¬am
);

7502 
R–—£TempÜ¬yV¬ŸbË
(
¬gs
[
n
]->
ty³
, &
ùx
->
bc
);

7506  
asUINT
 
	gm
 = 0; m < 
	g¬gs
[
n
]->
	gdeã¼edP¬ams
.
G‘L’gth
(); m++ )

7508 
	gùx
->
	gdeã¼edP¬ams
.
PushLa¡
(
¬gs
[
n
]->
deã¼edP¬ams
[
m
]);

7509 
	g¬gs
[
n
]->
	gdeã¼edP¬ams
[
m
].
	gÜigEx´
 = 0;

7511 
	g¬gs
[
n
]->
	gdeã¼edP¬ams
.
S‘L’gth
(0);

7515 
	gasCComp”
::
	$ProûssDeã¼edP¬ams
(
asSEx´CÚ‹xt
 *
ùx
)

7517 ifĞ
isProûssšgDeã¼edP¬ams
 ) ;

7519 
isProûssšgDeã¼edP¬ams
 = 
Œue
;

7521  
asUINT
 
n
 = 0;‚ < 
ùx
->
deã¼edP¬ams
.
	`G‘L’gth
();‚++ )

7523 
asSDeã¼edP¬am
 
outP¬am
 = 
ùx
->
deã¼edP¬ams
[
n
];

7524 ifĞ
outP¬am
.
¬gInOutFÏgs
 < 
asTM_OUTREF
 )

7527 
	`R–—£TempÜ¬yV¬ŸbË
(
outP¬am
.
¬gTy³
, &
ùx
->
bc
);

7529 ifĞ
outP¬am
.
¬gInOutFÏgs
 =ğ
asTM_OUTREF
 )

7531 
asSEx´CÚ‹xt
 *
ex´
 = 
outP¬am
.
ÜigEx´
;

7532 
outP¬am
.
ÜigEx´
 = 0;

7534 ifĞ
outP¬am
.
¬gTy³
.
d©aTy³
.
	`IsObjeùHªdË
() )

7537 ifĞ
ex´
->
ty³
.
d©aTy³
.
	`IsObjeùHªdË
() )

7538 
ex´
->
ty³
.
isEx¶ic™HªdË
 = 
Œue
;

7542 ifĞ
	`IsLV®ue
(
ex´
->
ty³
è||ƒx´->
´İ”ty_g‘
 ||ƒx´->
´İ”ty_£t
 )

7544 
asSEx´CÚ‹xt
 
	`rùx
(
’gše
);

7545 
rùx
.
ty³
 = 
outP¬am
.
¬gTy³
;

7546 ifĞ
rùx
.
ty³
.
d©aTy³
.
	`IsPrim™ive
() )

7547 
rùx
.
ty³
.
d©aTy³
.
	`MakeReã»nû
(
çl£
);

7550 
rùx
.
bc
.
	`In¡rSHORT
(
asBC_PSF
, 
outP¬am
.
¬gTy³
.
¡ackOff£t
);

7551 
rùx
.
ty³
.
d©aTy³
.
	`MakeReã»nû
(
	`IsV¬ŸbËOnH—p
(
outP¬am
.
¬gTy³
.
¡ackOff£t
));

7552 ifĞ
ex´
->
ty³
.
isEx¶ic™HªdË
 )

7553 
rùx
.
ty³
.
isEx¶ic™HªdË
 = 
Œue
;

7556 
asSEx´CÚ‹xt
 
	`o
(
’gše
);

7557 
	`DoAssignm’t
(&
o
, 
ex´
, &
rùx
, 
outP¬am
.
¬gNode
, outP¬am.¬gNode, 
‰Assignm’t
, outParam.argNode);

7559 ifĞ!
o
.
ty³
.
d©aTy³
.
	`IsPrim™ive
(èèo.
bc
.
	`In¡r
(
asBC_PİPŒ
);

7561 
	`M”geEx´By‹code
(
ùx
, &
o
);

7566 
	`M”geEx´By‹code
(
ùx
, 
ex´
);

7567 ifĞ!
ex´
->
ty³
.
isCÚ¡ªt
 ||ƒx´->ty³.
	`IsNuÎCÚ¡ªt
() )

7568 
ùx
->
bc
.
	`In¡r
(
asBC_PİPŒ
);

7571 ifĞ!
ex´
->
ty³
.
	`IsNuÎCÚ¡ªt
(è&& !Óx´->ty³.
isCÚ¡ªt
 &&ƒx´->ty³.
qwÜdV®ue
 == 0) )

7572 
	`W¬nšg
(
TXT_ARG_NOT_LVALUE
, 
outP¬am
.
¬gNode
);

7574 
	`R–—£TempÜ¬yV¬ŸbË
(
outP¬am
.
¬gTy³
, &
ùx
->
bc
);

7577 
	`R–—£TempÜ¬yV¬ŸbË
(
ex´
->
ty³
, &
ùx
->
bc
);

7580 
	`asDELETE
(
ex´
,
asSEx´CÚ‹xt
);

7584 ifĞ
outP¬am
.
¬gTy³
.
isTempÜ¬y
 )

7585 
	`R–—£TempÜ¬yV¬ŸbË
(
outP¬am
.
¬gTy³
, &
ùx
->
bc
);

7586 ifĞ!
outP¬am
.
¬gTy³
.
isV¬ŸbË
 )

7588 ifĞ
outP¬am
.
¬gTy³
.
d©aTy³
.
	`IsObjeù
() &&

7589 ((
outP¬am
.
¬gTy³
.
d©aTy³
.
	`G‘Behaviour
()->
add»f
 &&

7590 
outP¬am
.
¬gTy³
.
d©aTy³
.
	`G‘Behaviour
()->
»Ëa£
) ||

7591 (
outP¬am
.
¬gTy³
.
d©aTy³
.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_NOCOUNT
)) )

7594 
	`R–—£TempÜ¬yV¬ŸbË
(
outP¬am
.
¬gTy³
, &
ùx
->
bc
);

7600 
ùx
->
deã¼edP¬ams
.
	`S‘L’gth
(0);

7601 
isProûssšgDeã¼edP¬ams
 = 
çl£
;

7602 
	}
}

7605 
	gasCComp”
::
	$CompeCÚ¡ruùC®l
(
asCSütNode
 *
node
, 
asSEx´CÚ‹xt
 *
ùx
)

7608 
asCSŒšg
 
Çme
;

7609 
asCTy³Info
 
‹mpObj
;

7610 
boŞ
 
ÚH—p
 = 
Œue
;

7611 
asCA¼ay
<> 
funcs
;

7614 
asCD©aTy³
 
dt
;

7616 
dt
 = 
bud”
->
	`C»©eD©aTy³FromNode
(
node
->
fœ¡Chd
, 
süt
, 
’gše
->
ÇmeS·ûs
[0]);

7617 ifĞ
dt
.
	`IsPrim™ive
() )

7620 
	`CompeCÚv”siÚ
(
node
, 
ùx
);

7625 ifĞ
outFunc
->
	`IsSh¬ed
() &&

7626 
dt
.
	`G‘ObjeùTy³
(è&& !dt.G‘ObjeùTy³()->
	`IsSh¬ed
() )

7628 
asCSŒšg
 
msg
;

7629 
msg
.
	`FÜm©
(
TXT_SHARED_CANNOT_USE_NON_SHARED_TYPE_s
, 
dt
.
	`G‘ObjeùTy³
()->
Çme
.
	`Add»ssOf
());

7630 
	`E¼Ü
(
msg
.
	`Add»ssOf
(), 
node
);

7634 
asCA¼ay
<
asSEx´CÚ‹xt
 *> 
¬gs
;

7635 
asCA¼ay
<
asCTy³Info
> 
‹mpÜ¬yV¬ŸbËs
;

7636 ifĞ
	`CompeArgum’tLi¡
(
node
->
Ï¡Chd
, 
¬gs
) >= 0 )

7639 ifĞ
¬gs
.
	`G‘L’gth
(è=ğ1 &&‡rgs[0]->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
() )

7641 
asSEx´CÚ‹xt
 
	`cÚv
(
’gše
);

7642 
cÚv
.
ty³
 = 
¬gs
[0]->type;

7643 
	`Im¶ic™CÚv”siÚ
(&
cÚv
, 
dt
, 
node
->
Ï¡Chd
, 
asIC_EXPLICIT_VAL_CAST
, 
çl£
);

7645 ifĞ
cÚv
.
ty³
.
d©aTy³
.
	`IsEqu®Exû±Ref
(
dt
) )

7647 
	`Im¶ic™CÚv”siÚ
(
¬gs
[0], 
dt
, 
node
->
Ï¡Chd
, 
asIC_EXPLICIT_VAL_CAST
);

7649 
ùx
->
bc
.
	`AddCode
(&
¬gs
[0]->bc);

7650 
ùx
->
ty³
 = 
¬gs
[0]->type;

7652 
	`asDELETE
(
¬gs
[0],
asSEx´CÚ‹xt
);

7659 
Çme
 = 
dt
.
	`FÜm©
();

7661 
asSTy³Behaviour
 *
beh
 = 
dt
.
	`G‘Behaviour
();

7663 ifĞ!(
dt
.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_REF
) )

7665 
funcs
 = 
beh
->
cÚ¡ruùÜs
;

7668 
‹mpObj
.
d©aTy³
 = 
dt
;

7669 
‹mpObj
.
¡ackOff£t
 = ()
	`AÎoÿ‹V¬ŸbË
(
dt
, 
Œue
);

7670 
‹mpObj
.
d©aTy³
.
	`MakeReã»nû
(
Œue
);

7671 
‹mpObj
.
isTempÜ¬y
 = 
Œue
;

7672 
‹mpObj
.
isV¬ŸbË
 = 
Œue
;

7674 
ÚH—p
 = 
	`IsV¬ŸbËOnH—p
(
‹mpObj
.
¡ackOff£t
);

7677 ifĞ
ÚH—p
 )

7678 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_VAR
, 
‹mpObj
.
¡ackOff£t
);

7682 
funcs
 = 
beh
->
çùÜ›s
;

7686 ifĞ
¬gs
.
	`G‘L’gth
(è=ğ1 &&‡rgs[0]->
ty³
.
d©aTy³
 =ğ
asCD©aTy³
::
	`C»©ePrim™ive
(
‰Void
, 
çl£
) )

7689 
	`M”geEx´By‹code
(
ùx
, 
¬gs
[0]);

7690 
	`asDELETE
(
¬gs
[0],
asSEx´CÚ‹xt
);

7691 
¬gs
.
	`S‘L’gth
(0);

7696 ifĞ
¬gs
.
	`G‘L’gth
() == 0 )

7698 
asSTy³Behaviour
 *
beh
 = 
‹mpObj
.
d©aTy³
.
	`G‘Behaviour
();

7699 ifĞ
beh
 && beh->
cÚ¡ruù
 =ğ0 && !(
dt
.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_REF
) )

7702 
ùx
->
ty³
 = 
‹mpObj
;

7704 ifĞ
ÚH—p
 )

7706 
	`asASSERT
(
ùx
->
bc
.
	`G‘La¡In¡r
(è=ğ
asBC_VAR
);

7707 
ùx
->
bc
.
	`RemoveLa¡In¡r
();

7710 
	`C®lDeçuÉCÚ¡ruùÜ
(
‹mpObj
.
d©aTy³
,empObj.
¡ackOff£t
, 
	`IsV¬ŸbËOnH—p
ÑempObj.¡ackOff£t), &
ùx
->
bc
, 
node
);

7713 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_PSF
, 
‹mpObj
.
¡ackOff£t
);

7718 
	`M©chFunùiÚs
(
funcs
, 
¬gs
, 
node
, 
Çme
.
	`Add»ssOf
(), 
NULL
, 
çl£
);

7720 ifĞ
funcs
.
	`G‘L’gth
() != 1 )

7725 
ùx
->
ty³
.
	`S‘Dummy
();

7729 
r
 = 
asSUCCESS
;

7732 
asCSütFunùiÚ
 *
func
 = (
funcs
[0] & 0xFFFF0000è=ğ0 ? 
’gše
->
sütFunùiÚs
[funcs[0]] : 0;

7733 ifĞ
func
 && 
¬gs
.
	`G‘L’gth
(è< (
asUINT
)func->
	`G‘P¬amCouÁ
() )

7734 
r
 = 
	`CompeDeçuÉArgs
(
node
, 
¬gs
, 
func
);

7736 ifĞ
r
 =ğ
asSUCCESS
 )

7738 
asCBy‹Code
 
	`objBC
(
’gše
);

7740 
	`P»·»FunùiÚC®l
(
funcs
[0], &
ùx
->
bc
, 
¬gs
);

7742 
	`MoveArgsToSck
(
funcs
[0], &
ùx
->
bc
, 
¬gs
, 
çl£
);

7744 ifĞ!(
dt
.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_REF
) )

7747 ifĞ
ÚH—p
 )

7749 
off£t
 = 0;

7750 
asCSütFunùiÚ
 *
desü
 = 
bud”
->
	`G‘FunùiÚDesütiÚ
(
funcs
[0]);

7751  
asUINT
 
n
 = 0;‚ < 
¬gs
.
	`G‘L’gth
();‚++ )

7752 
off£t
 +ğ
desü
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

7754 
ùx
->
bc
.
	`In¡rWORD
(
asBC_GETREF
, (
asWORD
)
off£t
);

7757 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_PSF
, 
‹mpObj
.
¡ackOff£t
);

7759 
	`P”fÜmFunùiÚC®l
(
funcs
[0], 
ùx
, 
ÚH—p
, &
¬gs
, 
‹mpObj
.
d©aTy³
.
	`G‘ObjeùTy³
());

7762 
ùx
->
bc
.
	`ObjInfo
(
‹mpObj
.
¡ackOff£t
, 
asOBJ_INIT
);

7767 
ùx
->
ty³
 = 
‹mpObj
;

7768 ifĞ!
ÚH—p
 )

7769 
ùx
->
ty³
.
d©aTy³
.
	`MakeReã»nû
(
çl£
);

7772 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_PSF
, 
‹mpObj
.
¡ackOff£t
);

7777 
	`P”fÜmFunùiÚC®l
(
funcs
[0], 
ùx
, 
çl£
, &
¬gs
);

7785 
ùx
->
ty³
.
	`S‘Dummy
();

7789  
asUINT
 
n
 = 0;‚ < 
¬gs
.
	`G‘L’gth
();‚++ )

7790 ifĞ
¬gs
[
n
] )

7792 
	`asDELETE
(
¬gs
[
n
],
asSEx´CÚ‹xt
);

7794 
	}
}

7797 
	gasCComp”
::
	$CompeFunùiÚC®l
(
asCSütNode
 *
node
, 
asSEx´CÚ‹xt
 *
ùx
, 
asCObjeùTy³
 *
objeùTy³
, 
boŞ
 
objIsCÚ¡
, cÚ¡ 
asCSŒšg
 &
scİe
)

7799 
asCSŒšg
 
Çme
;

7800 
asCTy³Info
 
‹mpObj
;

7801 
asCA¼ay
<> 
funcs
;

7802 
r
 = -1;

7804 
asCSütNode
 *
nm
 = 
node
->
Ï¡Chd
->
´ev
;

7805 
Çme
.
	`Assign
(&
süt
->
code
[
nm
->
tok’Pos
],‚m->
tok’L’gth
);

7810 ifĞ
objeùTy³
 =ğ0 && 
outFunc
 && outFunc->objeùTy³ && 
scİe
 != "::" )

7814 ifĞ
m_isCÚ¡ruùÜ
 && 
Çme
 =ğ
SUPER_TOKEN
 && 
scİe
 == "" )

7817 
objeùTy³
 = 
outFunc
->objectType;

7826 
asCA¼ay
<> 
funcs
;

7827 
bud”
->
	`G‘ObjeùM‘hodDesütiÚs
(
Çme
.
	`Add»ssOf
(), 
outFunc
->
objeùTy³
, 
funcs
, 
çl£
);

7829 ifĞ
funcs
.
	`G‘L’gth
() )

7832 
objeùTy³
 = 
outFunc
->objectType;

7837 ifĞ
objeùTy³
 )

7839 
asCD©aTy³
 
dt
 =‡sCD©aTy³::
	`C»©eObjeù
(
objeùTy³
, 
çl£
);

7842 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_PSF
, 0);

7843 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
dt
, 0, 
çl£
);

7844 
ùx
->
ty³
.
d©aTy³
.
	`MakeReã»nû
(
Œue
);

7846 
	`D”eã»nû
(
ùx
, 
Œue
);

7852 
asSEx´CÚ‹xt
 
	`funcPŒ
(
’gše
);

7853 ifĞ
objeùTy³
 == 0 )

7854 
r
 = 
	`CompeV¬ŸbËAcûss
(
Çme
, 
scİe
, &
funcPŒ
, 
node
, 
Œue
,rue);

7855 ifĞ
r
 < 0 )

7857 ifĞ
objeùTy³
 )

7862 ifĞ
scİe
 =ğ"" && 
m_isCÚ¡ruùÜ
 && 
Çme
 =ğ
SUPER_TOKEN
 )

7865 ifĞ
objeùTy³
->
d”ivedFrom
 )

7866 
funcs
 = 
objeùTy³
->
d”ivedFrom
->
beh
.
cÚ¡ruùÜs
;

7869 ifĞ
cÚtšueLab–s
.
	`G‘L’gth
() > 0 )

7872 
	`E¼Ü
(
TXT_CANNOT_CALL_CONSTRUCTOR_IN_LOOPS
, 
node
);

7874 ifĞ
b»akLab–s
.
	`G‘L’gth
() > 0 )

7878 
	`E¼Ü
(
TXT_CANNOT_CALL_CONSTRUCTOR_IN_SWITCH
, 
node
);

7880 ifĞ
m_isCÚ¡ruùÜC®Ëd
 )

7882 
	`E¼Ü
(
TXT_CANNOT_CALL_CONSTRUCTOR_TWICE
, 
node
);

7884 
m_isCÚ¡ruùÜC®Ëd
 = 
Œue
;

7889 
bud”
->
	`G‘ObjeùM‘hodDesütiÚs
(
Çme
.
	`Add»ssOf
(), 
objeùTy³
, 
funcs
, 
objIsCÚ¡
, 
scİe
);

7893 ifĞ
funcs
.
	`G‘L’gth
() == 0 )

7894 
	`CompeV¬ŸbËAcûss
(
Çme
, 
scİe
, &
funcPŒ
, 
node
, 
Œue
,rue, 
objeùTy³
);

7899 
asSNameS·û
 *
ns
 = 
	`D‘”mšeNameS·û
(
scİe
);

7900 ifĞ
ns
 )

7901 
bud”
->
	`G‘FunùiÚDesütiÚs
(
Çme
.
	`Add»ssOf
(), 
funcs
, 
ns
);

7904 
asCSŒšg
 
msg
;

7905 
msg
.
	`FÜm©
(
TXT_NAMESPACE_s_DOESNT_EXIST
, 
scİe
.
	`Add»ssOf
());

7906 
	`E¼Ü
(
msg
.
	`Add»ssOf
(), 
node
);

7913 ifĞ!
funcPŒ
.
ty³
.
d©aTy³
.
	`G‘FuncDef
() )

7916 
asCSŒšg
 
msg
;

7917 
msg
.
	`FÜm©
(
TXT_NOT_A_FUNC_s_IS_VAR
, 
Çme
.
	`Add»ssOf
());

7918 
	`E¼Ü
(
msg
.
	`Add»ssOf
(), 
node
);

7922 ifĞ
funcs
.
	`G‘L’gth
(è=ğ0 && 
funcPŒ
.
ty³
.
d©aTy³
.
	`G‘FuncDef
() )

7924 
funcs
.
	`PushLa¡
(
funcPŒ
.
ty³
.
d©aTy³
.
	`G‘FuncDef
()->
id
);

7928 
asCA¼ay
<
asSEx´CÚ‹xt
 *> 
¬gs
;

7929 
asCA¼ay
<
asCTy³Info
> 
‹mpÜ¬yV¬ŸbËs
;

7931 ifĞ
	`CompeArgum’tLi¡
(
node
->
Ï¡Chd
, 
¬gs
) >= 0 )

7934 ifĞ
¬gs
.
	`G‘L’gth
(è=ğ1 &&‡rgs[0]->
ty³
.
d©aTy³
 =ğ
asCD©aTy³
::
	`C»©ePrim™ive
(
‰Void
, 
çl£
) )

7937 
	`M”geEx´By‹code
(
ùx
, 
¬gs
[0]);

7938 
	`asDELETE
(
¬gs
[0],
asSEx´CÚ‹xt
);

7939 
¬gs
.
	`S‘L’gth
(0);

7942 
	`M©chFunùiÚs
(
funcs
, 
¬gs
, 
node
, 
Çme
.
	`Add»ssOf
(), 
objeùTy³
, 
objIsCÚ¡
, 
çl£
, 
Œue
, 
scİe
);

7944 ifĞ
funcs
.
	`G‘L’gth
() != 1 )

7949 
ùx
->
ty³
.
	`S‘Dummy
();

7953 
r
 = 
asSUCCESS
;

7956 
asCSütFunùiÚ
 *
func
 = (
funcs
[0] & 0xFFFF0000è=ğ0 ? 
’gše
->
sütFunùiÚs
[funcs[0]] : 0;

7957 ifĞ
func
 && 
¬gs
.
	`G‘L’gth
(è< (
asUINT
)func->
	`G‘P¬amCouÁ
() )

7958 
r
 = 
	`CompeDeçuÉArgs
(
node
, 
¬gs
, 
func
);

7965 ifĞ
r
 =ğ
asSUCCESS
 )

7967 ifĞ(
funcs
[0] & 0xFFFF0000è=ğ0 && 
’gše
->
sütFunùiÚs
[funcs[0]]->
funcTy³
 =ğ
asFUNC_FUNCDEF
 )

7969 ifĞ
objeùTy³
 )

7971 
	`D”eã»nû
(
ùx
, 
Œue
);

7974 
objeùTy³
 = 0;

7977 
	`D”eã»nû
(&
funcPŒ
, 
Œue
);

7978 
	`CÚv”tToV¬ŸbË
(&
funcPŒ
);

7979 
ùx
->
bc
.
	`AddCode
(&
funcPŒ
.bc);

7980 ifĞ!
funcPŒ
.
ty³
.
isTempÜ¬y
 )

7981 
ùx
->
bc
.
	`In¡r
(
asBC_PİPŒ
);

7984 
	`MakeFunùiÚC®l
(
ùx
, 
funcs
[0], 
objeùTy³
, 
¬gs
, 
node
, 
çl£
, 0, 
funcPŒ
.
ty³
.
¡ackOff£t
);

7988 ifĞ(
funcs
[0] & 0xFFFF0000è=ğ0 && 
’gše
->
sütFunùiÚs
[funcs[0]]->
funcTy³
 =ğ
asFUNC_FUNCDEF
 )

7990 
	`R–—£TempÜ¬yV¬ŸbË
(
funcPŒ
.
ty³
, &
ùx
->
bc
);

7998 
ùx
->
ty³
.
	`S‘Dummy
();

8002  
asUINT
 
n
 = 0;‚ < 
¬gs
.
	`G‘L’gth
();‚++ )

8003 ifĞ
¬gs
[
n
] )

8005 
	`asDELETE
(
¬gs
[
n
],
asSEx´CÚ‹xt
);

8009 
	}
}

8011 
asSNameS·û
 *
	gasCComp”
::
	$D‘”mšeNameS·û
(cÚ¡ 
asCSŒšg
 &
scİe
)

8013 
asSNameS·û
 *
ns
;

8015 ifĞ
scİe
 == "" )

8017 ifĞ
outFunc
->
ÇmeS·û
->
Çme
 != "" )

8018 
ns
 = 
outFunc
->
ÇmeS·û
;

8019 ifĞ
outFunc
->
objeùTy³
 && outFunc->objeùTy³->
ÇmeS·û
->
Çme
 != "" )

8020 
ns
 = 
outFunc
->
objeùTy³
->
ÇmeS·û
;

8022 
ns
 = 
’gše
->
ÇmeS·ûs
[0];

8024 ifĞ
scİe
 == "::" )

8025 
ns
 = 
’gše
->
ÇmeS·ûs
[0];

8027 
ns
 = 
’gše
->
	`FšdNameS·û
(
scİe
.
	`Add»ssOf
());

8029  
ns
;

8030 
	}
}

8032 
	gasCComp”
::
	$CompeEx´essiÚP»Op
(
asCSütNode
 *
node
, 
asSEx´CÚ‹xt
 *
ùx
)

8034 
İ
 = 
node
->
tok’Ty³
;

8036 
	`IsV¬ŸbËIn™Ÿlized
(&
ùx
->
ty³
, 
node
);

8038 ifĞ
İ
 =ğ
‰HªdË
 )

8041 ifĞ
ùx
->
ty³
.
isEx¶ic™HªdË
 ||

8042 !
ùx
->
ty³
.
d©aTy³
.
	`IsObjeù
() ||

8043 !(((
ùx
->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
()->
beh
.
add»f
 && ctx->ty³.d©aTy³.G‘ObjeùTy³()->beh.
»Ëa£
è|| (ùx->ty³.d©aTy³.G‘ObjeùTy³()->
æags
 & 
asOBJ_NOCOUNT
)) ||

8044 (
ùx
->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_ASHANDLE
)) )

8046 
	`E¼Ü
(
TXT_OBJECT_HANDLE_NOT_SUPPORTED
, 
node
);

8052 ifĞ!
ùx
->
ty³
.
d©aTy³
.
	`IsReã»nû
() &&

8053 !(
ùx
->
ty³
.
d©aTy³
.
	`IsObjeù
(è&& !ùx->ty³.
isV¬ŸbË
) &&

8054 !(
ùx
->
ty³
.
isV¬ŸbË
 && !
	`IsV¬ŸbËOnH—p
(ùx->ty³.
¡ackOff£t
)) )

8056 
	`E¼Ü
(
TXT_NOT_VALID_REFERENCE
, 
node
);

8061 ifĞ!
ùx
->
ty³
.
d©aTy³
.
	`IsObjeùHªdË
(è&& !(ùx->ty³.d©aTy³.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_ASHANDLE
) )

8063 
asCD©aTy³
 
to
 = 
ùx
->
ty³
.
d©aTy³
;

8064 
to
.
	`MakeHªdË
(
Œue
);

8065 
to
.
	`MakeReã»nû
(
Œue
);

8066 
to
.
	`MakeHªdËToCÚ¡
(
ùx
->
ty³
.
d©aTy³
.
	`IsR—dOÆy
());

8067 
	`Im¶ic™CÚv”siÚ
(
ùx
, 
to
, 
node
, 
asIC_IMPLICIT_CONV
, 
Œue
, 
çl£
);

8069 
	`asASSERT
Ğ
ùx
->
ty³
.
d©aTy³
.
	`IsObjeùHªdË
() );

8071 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_ASHANDLE
 )

8074 
ùx
->
ty³
.
d©aTy³
.
	`MakeHªdË
(
Œue
);

8078 
ùx
->
ty³
.
isEx¶ic™HªdË
 = 
Œue
;

8080 ifĞ(
İ
 =ğ
‰Mšus
 || o°=ğ
‰Plus
 || o°=ğ
‰B™NÙ
 || o°=ğ
‰Inc
 || o°=ğ
‰Dec
è&& 
ùx
->
ty³
.
d©aTy³
.
	`IsObjeù
() )

8084 cÚ¡ *
İName
 = 0;

8085  
İ
 )

8087 
‰Mšus
: 
İName
 = "opNeg"; ;

8088 
‰B™NÙ
: 
İName
 = "opCom"; ;

8089 
‰Inc
: 
İName
 = "opPreInc"; ;

8090 
‰Dec
: 
İName
 = "opPreDec"; ;

8093 ifĞ
İName
 )

8096 
	`ProûssPrİ”tyG‘AcûssÜ
(
ùx
, 
node
);

8099 
boŞ
 
isCÚ¡
 = 
çl£
;

8100 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsObjeùHªdË
() )

8101 
isCÚ¡
 = 
ùx
->
ty³
.
d©aTy³
.
	`IsHªdËToCÚ¡
();

8103 
isCÚ¡
 = 
ùx
->
ty³
.
d©aTy³
.
	`IsR—dOÆy
();

8108 
asCA¼ay
<> 
funcs
;

8109 
asCObjeùTy³
 *
Ù
 = 
ùx
->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
();

8110  
asUINT
 
n
 = 0;‚ < 
Ù
->
m‘hods
.
	`G‘L’gth
();‚++ )

8112 
asCSütFunùiÚ
 *
func
 = 
’gše
->
sütFunùiÚs
[
Ù
->
m‘hods
[
n
]];

8113 ifĞ
func
->
Çme
 =ğ
İName
 &&

8114 
func
->
·¿m‘”Ty³s
.
	`G‘L’gth
() == 0 &&

8115 (!
isCÚ¡
 || 
func
->
isR—dOÆy
) )

8117 
funcs
.
	`PushLa¡
(
func
->
id
);

8122 ifĞ
funcs
.
	`G‘L’gth
() == 1 )

8124 
asCTy³Info
 
objTy³
 = 
ùx
->
ty³
;

8125 
asCA¼ay
<
asSEx´CÚ‹xt
 *> 
¬gs
;

8126 
	`MakeFunùiÚC®l
(
ùx
, 
funcs
[0], 
objTy³
.
d©aTy³
.
	`G‘ObjeùTy³
(), 
¬gs
, 
node
);

8127 
	`R–—£TempÜ¬yV¬ŸbË
(
objTy³
, &
ùx
->
bc
);

8130 ifĞ
funcs
.
	`G‘L’gth
() == 0 )

8132 
asCSŒšg
 
¡r
;

8133 
¡r
 = 
	`asCSŒšg
(
İName
) + "()";

8134 ifĞ
isCÚ¡
 )

8135 
¡r
 += " const";

8136 
¡r
.
	`FÜm©
(
TXT_FUNCTION_s_NOT_FOUND
, sŒ.
	`Add»ssOf
());

8137 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

8138 
ùx
->
ty³
.
	`S‘Dummy
();

8141 ifĞ
funcs
.
	`G‘L’gth
() > 1 )

8143 
	`E¼Ü
(
TXT_MORE_THAN_ONE_MATCHING_OP
, 
node
);

8144 
	`PrštM©chšgFuncs
(
funcs
, 
node
);

8146 
ùx
->
ty³
.
	`S‘Dummy
();

8150 ifĞ
İ
 =ğ
‰Plus
 )

8152 
	`E¼Ü
(
TXT_ILLEGAL_OPERATION
, 
node
);

8153 
ùx
->
ty³
.
	`S‘Dummy
();

8157 ifĞ
İ
 =ğ
‰Plus
 || o°=ğ
‰Mšus
 )

8159 
	`ProûssPrİ”tyG‘AcûssÜ
(
ùx
, 
node
);

8161 
asCD©aTy³
 
to
 = 
ùx
->
ty³
.
d©aTy³
;

8165 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
(è|| ctx->ty³.d©aTy³.
	`IsEnumTy³
() )

8167 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 1 )

8168 
to
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ8
, 
çl£
);

8169 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 2 )

8170 
to
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ16
, 
çl£
);

8171 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 4 )

8172 
to
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ
, 
çl£
);

8173 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 8 )

8174 
to
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ64
, 
çl£
);

8177 
	`E¼Ü
(
TXT_INVALID_TYPE
, 
node
);

8182 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsReã»nû
(èè
	`CÚv”tToV¬ŸbË
(ctx);

8183 
	`Im¶ic™CÚv”siÚ
(
ùx
, 
to
, 
node
, 
asIC_IMPLICIT_CONV
);

8185 ifĞ!
ùx
->
ty³
.
isCÚ¡ªt
 )

8187 
	`CÚv”tToTempV¬ŸbË
(
ùx
);

8188 
	`asASSERT
(!
ùx
->
ty³
.
isLV®ue
);

8190 ifĞ
İ
 =ğ
‰Mšus
 )

8192 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
(è&& ctx->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 1 )

8193 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_NEGi
, ctx->
ty³
.
¡ackOff£t
);

8194 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
(è&& ctx->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 2 )

8195 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_NEGi64
, ctx->
ty³
.
¡ackOff£t
);

8196 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsFlßtTy³
() )

8197 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_NEGf
, ctx->
ty³
.
¡ackOff£t
);

8198 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsDoubËTy³
() )

8199 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_NEGd
, ctx->
ty³
.
¡ackOff£t
);

8202 
	`E¼Ü
(
TXT_ILLEGAL_OPERATION
, 
node
);

8211 ifĞ
İ
 =ğ
‰Mšus
 )

8213 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
(è&& ctx->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 1 )

8214 
ùx
->
ty³
.
štV®ue
 = -ctx->type.intValue;

8215 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
(è&& ctx->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 2 )

8216 
ùx
->
ty³
.
qwÜdV®ue
 = -(
asINT64
)ctx->type.qwordValue;

8217 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsFlßtTy³
() )

8218 
ùx
->
ty³
.
æßtV®ue
 = -ctx->type.floatValue;

8219 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsDoubËTy³
() )

8220 
ùx
->
ty³
.
doubËV®ue
 = -ctx->type.doubleValue;

8223 
	`E¼Ü
(
TXT_ILLEGAL_OPERATION
, 
node
);

8231 ifĞ
İ
 =ğ
‰Plus
 )

8233 ifĞ!
ùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
() &&

8234 !
ùx
->
ty³
.
d©aTy³
.
	`IsFlßtTy³
() &&

8235 !
ùx
->
ty³
.
d©aTy³
.
	`IsDoubËTy³
() )

8237 
	`E¼Ü
(
TXT_ILLEGAL_OPERATION
, 
node
);

8242 ifĞ
İ
 =ğ
‰NÙ
 )

8244 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsEqu®Exû±RefAndCÚ¡
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
Œue
)) )

8246 ifĞ
ùx
->
ty³
.
isCÚ¡ªt
 )

8248 
ùx
->
ty³
.
dwÜdV®ue
 = (ùx->ty³.dwÜdV®u=ğ0 ? 
VALUE_OF_BOOLEAN_TRUE
 : 0);

8252 
	`ProûssPrİ”tyG‘AcûssÜ
(
ùx
, 
node
);

8254 
	`CÚv”tToTempV¬ŸbË
(
ùx
);

8255 
	`asASSERT
(!
ùx
->
ty³
.
isLV®ue
);

8257 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_NOT
, ctx->
ty³
.
¡ackOff£t
);

8261 
	`E¼Ü
(
TXT_ILLEGAL_OPERATION
, 
node
);

8265 ifĞ
İ
 =ğ
‰B™NÙ
 )

8267 
	`ProûssPrİ”tyG‘AcûssÜ
(
ùx
, 
node
);

8269 
asCD©aTy³
 
to
 = 
ùx
->
ty³
.
d©aTy³
;

8271 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
(è|| ctx->ty³.d©aTy³.
	`IsEnumTy³
() )

8273 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 1 )

8274 
to
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ8
, 
çl£
);

8275 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 2 )

8276 
to
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ16
, 
çl£
);

8277 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 4 )

8278 
to
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ
, 
çl£
);

8279 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 8 )

8280 
to
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ64
, 
çl£
);

8283 
	`E¼Ü
(
TXT_INVALID_TYPE
, 
node
);

8288 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsReã»nû
(èè
	`CÚv”tToV¬ŸbË
(ctx);

8289 
	`Im¶ic™CÚv”siÚ
(
ùx
, 
to
, 
node
, 
asIC_IMPLICIT_CONV
);

8291 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
() )

8293 ifĞ
ùx
->
ty³
.
isCÚ¡ªt
 )

8295 
ùx
->
ty³
.
qwÜdV®ue
 = ~ctx->type.qwordValue;

8299 
	`CÚv”tToTempV¬ŸbË
(
ùx
);

8300 
	`asASSERT
(!
ùx
->
ty³
.
isLV®ue
);

8302 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyDWÜds
() == 1 )

8303 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_BNOT
, ctx->
ty³
.
¡ackOff£t
);

8305 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_BNOT64
, ctx->
ty³
.
¡ackOff£t
);

8309 
	`E¼Ü
(
TXT_ILLEGAL_OPERATION
, 
node
);

8313 ifĞ
İ
 =ğ
‰Inc
 || o°=ğ
‰Dec
 )

8319 ifĞ
ùx
->
ty³
.
isTempÜ¬y
 )

8321 
	`E¼Ü
(
TXT_REF_IS_TEMP
, 
node
);

8324 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsR—dOÆy
() )

8326 
	`E¼Ü
(
TXT_REF_IS_READ_ONLY
, 
node
);

8329 ifĞ
ùx
->
´İ”ty_g‘
 || ctx->
´İ”ty_£t
 )

8331 
	`E¼Ü
(
TXT_INVALID_REF_PROP_ACCESS
, 
node
);

8334 ifĞ!
ùx
->
ty³
.
isLV®ue
 )

8336 
	`E¼Ü
(
TXT_NOT_LVALUE
, 
node
);

8340 ifĞ
ùx
->
ty³
.
isV¬ŸbË
 && !ùx->ty³.
d©aTy³
.
	`IsReã»nû
() )

8341 
	`CÚv”tToReã»nû
(
ùx
);

8342 ifĞ!
ùx
->
ty³
.
d©aTy³
.
	`IsReã»nû
() )

8344 
	`E¼Ü
(
TXT_NOT_VALID_REFERENCE
, 
node
);

8348 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsEqu®Exû±Ref
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ64
, 
çl£
)) ||

8349 
ùx
->
ty³
.
d©aTy³
.
	`IsEqu®Exû±Ref
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ64
, 
çl£
)) )

8351 ifĞ
İ
 =ğ
‰Inc
 )

8352 
ùx
->
bc
.
	`In¡r
(
asBC_INCi64
);

8354 
ùx
->
bc
.
	`In¡r
(
asBC_DECi64
);

8356 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsEqu®Exû±Ref
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ
, 
çl£
)) ||

8357 
ùx
->
ty³
.
d©aTy³
.
	`IsEqu®Exû±Ref
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ
, 
çl£
)) )

8359 ifĞ
İ
 =ğ
‰Inc
 )

8360 
ùx
->
bc
.
	`In¡r
(
asBC_INCi
);

8362 
ùx
->
bc
.
	`In¡r
(
asBC_DECi
);

8364 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsEqu®Exû±Ref
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ16
, 
çl£
)) ||

8365 
ùx
->
ty³
.
d©aTy³
.
	`IsEqu®Exû±Ref
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ16
, 
çl£
)) )

8367 ifĞ
İ
 =ğ
‰Inc
 )

8368 
ùx
->
bc
.
	`In¡r
(
asBC_INCi16
);

8370 
ùx
->
bc
.
	`In¡r
(
asBC_DECi16
);

8372 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsEqu®Exû±Ref
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ8
, 
çl£
)) ||

8373 
ùx
->
ty³
.
d©aTy³
.
	`IsEqu®Exû±Ref
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ8
, 
çl£
)) )

8375 ifĞ
İ
 =ğ
‰Inc
 )

8376 
ùx
->
bc
.
	`In¡r
(
asBC_INCi8
);

8378 
ùx
->
bc
.
	`In¡r
(
asBC_DECi8
);

8380 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsEqu®Exû±Ref
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰Flßt
, 
çl£
)) )

8382 ifĞ
İ
 =ğ
‰Inc
 )

8383 
ùx
->
bc
.
	`In¡r
(
asBC_INCf
);

8385 
ùx
->
bc
.
	`In¡r
(
asBC_DECf
);

8387 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsEqu®Exû±Ref
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰DoubË
, 
çl£
)) )

8389 ifĞ
İ
 =ğ
‰Inc
 )

8390 
ùx
->
bc
.
	`In¡r
(
asBC_INCd
);

8392 
ùx
->
bc
.
	`In¡r
(
asBC_DECd
);

8396 
	`E¼Ü
(
TXT_ILLEGAL_OPERATION
, 
node
);

8403 
	`asASSERT
(
çl£
);

8408 
	}
}

8410 
	gasCComp”
::
	$CÚv”tToReã»nû
(
asSEx´CÚ‹xt
 *
ùx
)

8412 ifĞ
ùx
->
ty³
.
isV¬ŸbË
 && !ùx->ty³.
d©aTy³
.
	`IsReã»nû
() )

8414 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_LDV
, ctx->
ty³
.
¡ackOff£t
);

8415 
ùx
->
ty³
.
d©aTy³
.
	`MakeReã»nû
(
Œue
);

8416 
ùx
->
ty³
.
	`S‘V¬ŸbË
(ùx->ty³.
d©aTy³
, ctx->ty³.
¡ackOff£t
, ctx->ty³.
isTempÜ¬y
);

8418 
	}
}

8420 
	gasCComp”
::
	$FšdPrİ”tyAcûssÜ
(cÚ¡ 
asCSŒšg
 &
Çme
, 
asSEx´CÚ‹xt
 *
ùx
, 
asCSütNode
 *
node
, 
boŞ
 
isThisAcûss
)

8422  
	`FšdPrİ”tyAcûssÜ
(
Çme
, 
ùx
, 0, 
node
, 
isThisAcûss
);

8423 
	}
}

8425 
	gasCComp”
::
	$FšdPrİ”tyAcûssÜ
(cÚ¡ 
asCSŒšg
 &
Çme
, 
asSEx´CÚ‹xt
 *
ùx
,‡sSEx´CÚ‹xˆ*
¬g
, 
asCSütNode
 *
node
, 
boŞ
 
isThisAcûss
)

8427 ifĞ
’gše
->
•
.
´İ”tyAcûssÜMode
 == 0 )

8433 
g‘Id
 = 0, 
£tId
 = 0;

8434 
asCSŒšg
 
g‘Name
 = "g‘_" + 
Çme
;

8435 
asCSŒšg
 
£tName
 = "£t_" + 
Çme
;

8436 
asCA¼ay
<> 
muÉËG‘Funcs
, 
muÉËS‘Funcs
;

8438 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsObjeù
() )

8441 
asCObjeùTy³
 *
Ù
 = 
ùx
->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
();

8442  
asUINT
 
n
 = 0;‚ < 
Ù
->
m‘hods
.
	`G‘L’gth
();‚++ )

8444 
asCSütFunùiÚ
 *
f
 = 
’gše
->
sütFunùiÚs
[
Ù
->
m‘hods
[
n
]];

8446 ifĞ
f
->
Çme
 =ğ
g‘Name
 && ()f->
·¿m‘”Ty³s
.
	`G‘L’gth
(è=ğ(
¬g
?1:0) )

8448 ifĞ
g‘Id
 == 0 )

8449 
g‘Id
 = 
Ù
->
m‘hods
[
n
];

8452 ifĞ
muÉËG‘Funcs
.
	`G‘L’gth
() == 0 )

8453 
muÉËG‘Funcs
.
	`PushLa¡
(
g‘Id
);

8455 
muÉËG‘Funcs
.
	`PushLa¡
(
Ù
->
m‘hods
[
n
]);

8459 ifĞ
f
->
Çme
 =ğ
£tName
 && ()f->
·¿m‘”Ty³s
.
	`G‘L’gth
(è=ğ(
¬g
?2:1) )

8461 ifĞ
£tId
 == 0 )

8462 
£tId
 = 
Ù
->
m‘hods
[
n
];

8465 ifĞ
muÉËS‘Funcs
.
	`G‘L’gth
() == 0 )

8466 
muÉËS‘Funcs
.
	`PushLa¡
(
£tId
);

8468 
muÉËS‘Funcs
.
	`PushLa¡
(
Ù
->
m‘hods
[
n
]);

8476 
asCA¼ay
<> 
funcs
;

8477 
asUINT
 
n
;

8479 
bud”
->
	`G‘FunùiÚDesütiÚs
(
g‘Name
.
	`Add»ssOf
(), 
funcs
, 
’gše
->
ÇmeS·ûs
[0]);

8480  
n
 = 0;‚ < 
funcs
.
	`G‘L’gth
();‚++ )

8482 
asCSütFunùiÚ
 *
f
 = 
bud”
->
	`G‘FunùiÚDesütiÚ
(
funcs
[
n
]);

8484 ifĞ()
f
->
·¿m‘”Ty³s
.
	`G‘L’gth
(è=ğ(
¬g
?1:0) )

8486 ifĞ
g‘Id
 == 0 )

8487 
g‘Id
 = 
funcs
[
n
];

8490 ifĞ
muÉËG‘Funcs
.
	`G‘L’gth
() == 0 )

8491 
muÉËG‘Funcs
.
	`PushLa¡
(
g‘Id
);

8493 
muÉËG‘Funcs
.
	`PushLa¡
(
funcs
[
n
]);

8498 
funcs
.
	`S‘L’gth
(0);

8500 
bud”
->
	`G‘FunùiÚDesütiÚs
(
£tName
.
	`Add»ssOf
(), 
funcs
, 
’gše
->
ÇmeS·ûs
[0]);

8501  
n
 = 0;‚ < 
funcs
.
	`G‘L’gth
();‚++ )

8503 
asCSütFunùiÚ
 *
f
 = 
bud”
->
	`G‘FunùiÚDesütiÚ
(
funcs
[
n
]);

8505 ifĞ()
f
->
·¿m‘”Ty³s
.
	`G‘L’gth
(è=ğ(
¬g
?2:1) )

8507 ifĞ
£tId
 == 0 )

8508 
£tId
 = 
funcs
[
n
];

8511 ifĞ
muÉËS‘Funcs
.
	`G‘L’gth
() == 0 )

8512 
muÉËS‘Funcs
.
	`PushLa¡
(
g‘Id
);

8514 
muÉËS‘Funcs
.
	`PushLa¡
(
funcs
[
n
]);

8520 
boŞ
 
isCÚ¡
 = 
çl£
;

8521 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsObjeùHªdË
() )

8522 
isCÚ¡
 = 
ùx
->
ty³
.
d©aTy³
.
	`IsHªdËToCÚ¡
();

8524 
isCÚ¡
 = 
ùx
->
ty³
.
d©aTy³
.
	`IsR—dOÆy
();

8527 ifĞ
muÉËG‘Funcs
.
	`G‘L’gth
() > 0 )

8530 
	`F‹rCÚ¡
(
muÉËG‘Funcs
, !
isCÚ¡
);

8532 ifĞ
muÉËG‘Funcs
.
	`G‘L’gth
() > 1 )

8534 
asCSŒšg
 
¡r
;

8535 
¡r
.
	`FÜm©
(
TXT_MULTIPLE_PROP_GET_ACCESSOR_FOR_s
, 
Çme
.
	`Add»ssOf
());

8536 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

8538 
	`PrštM©chšgFuncs
(
muÉËG‘Funcs
, 
node
);

8545 
g‘Id
 = 
muÉËG‘Funcs
[0];

8549 ifĞ
muÉËS‘Funcs
.
	`G‘L’gth
() > 0 )

8552 
	`F‹rCÚ¡
(
muÉËS‘Funcs
, !
isCÚ¡
);

8554 ifĞ
muÉËS‘Funcs
.
	`G‘L’gth
() > 1 )

8556 
asCSŒšg
 
¡r
;

8557 
¡r
.
	`FÜm©
(
TXT_MULTIPLE_PROP_SET_ACCESSOR_FOR_s
, 
Çme
.
	`Add»ssOf
());

8558 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

8560 
	`PrštM©chšgFuncs
(
muÉËS‘Funcs
, 
node
);

8567 
£tId
 = 
muÉËS‘Funcs
[0];

8572 ifĞ
g‘Id
 && 
£tId
 )

8574 
asCSütFunùiÚ
 *
g‘Func
 = 
bud”
->
	`G‘FunùiÚDesütiÚ
(
g‘Id
);

8575 
asCSütFunùiÚ
 *
£tFunc
 = 
bud”
->
	`G‘FunùiÚDesütiÚ
(
£tId
);

8578 
idx
 = (
¬g
?1:0);

8579 ifĞ!
g‘Func
->
»tuºTy³
.
	`IsEqu®Exû±RefAndCÚ¡
(
£tFunc
->
·¿m‘”Ty³s
[
idx
]) &&

8580 !((
g‘Func
->
»tuºTy³
.
	`IsObjeùHªdË
(è&& !
£tFunc
->
·¿m‘”Ty³s
[
idx
].IsObjectHandle()) &&

8581 (
g‘Func
->
»tuºTy³
.
	`G‘ObjeùTy³
(è=ğ
£tFunc
->
·¿m‘”Ty³s
[
idx
].GetObjectType())) )

8583 
asCSŒšg
 
¡r
;

8584 
¡r
.
	`FÜm©
(
TXT_GET_SET_ACCESSOR_TYPE_MISMATCH_FOR_s
, 
Çme
.
	`Add»ssOf
());

8585 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

8587 
asCA¼ay
<> 
funcs
;

8588 
funcs
.
	`PushLa¡
(
g‘Id
);

8589 
funcs
.
	`PushLa¡
(
£tId
);

8591 
	`PrštM©chšgFuncs
(
funcs
, 
node
);

8598 
»®G‘Id
 = 
g‘Id
;

8599 
»®S‘Id
 = 
£tId
;

8600 ifĞ
outFunc
->
objeùTy³
 && 
isThisAcûss
 )

8603 
asCSütFunùiÚ
 *
g‘Func
 = 
g‘Id
 ? 
bud”
->
	`G‘FunùiÚDesütiÚ
(getId) : 0;

8604 ifĞ
g‘Func
 &&

8605 
g‘Func
->
funcTy³
 =ğ
asFUNC_VIRTUAL
 &&

8606 
outFunc
->
objeùTy³
->
	`D”ivesFrom
(
g‘Func
->objectType) )

8607 
»®G‘Id
 = 
outFunc
->
objeùTy³
->
vœtu®FunùiÚTabË
[
g‘Func
->
vfTabËIdx
]->
id
;

8608 
asCSütFunùiÚ
 *
£tFunc
 = 
£tId
 ? 
bud”
->
	`G‘FunùiÚDesütiÚ
(setId) : 0;

8609 ifĞ
£tFunc
 &&

8610 
£tFunc
->
funcTy³
 =ğ
asFUNC_VIRTUAL
 &&

8611 
outFunc
->
objeùTy³
->
	`D”ivesFrom
(
£tFunc
->objectType) )

8612 
»®S‘Id
 = 
outFunc
->
objeùTy³
->
vœtu®FunùiÚTabË
[
£tFunc
->
vfTabËIdx
]->
id
;

8617 ifĞ(
isThisAcûss
 || 
outFunc
->
objeùTy³
 == 0) &&

8618 ((
»®G‘Id
 &&„—lG‘Id =ğ
outFunc
->
id
) ||

8619 (
»®S‘Id
 &&„—lS‘Id =ğ
outFunc
->
id
)) )

8621 
g‘Id
 = 0;

8622 
£tId
 = 0;

8626 ifĞ
’gše
->
•
.
´İ”tyAcûssÜMode
 == 1 )

8628 ifĞ
g‘Id
 && 
bud”
->
	`G‘FunùiÚDesütiÚ
(g‘Id)->
funcTy³
 !ğ
asFUNC_SYSTEM
 )

8629 
g‘Id
 = 0;

8630 ifĞ
£tId
 && 
bud”
->
	`G‘FunùiÚDesütiÚ
(£tId)->
funcTy³
 !ğ
asFUNC_SYSTEM
 )

8631 
£tId
 = 0;

8634 ifĞ
g‘Id
 || 
£tId
 )

8639 
ùx
->
´İ”ty_g‘
 = 
g‘Id
;

8640 
ùx
->
´İ”ty_£t
 = 
£tId
;

8642 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsObjeù
() )

8645 ifĞ(!
ùx
->
ty³
.
d©aTy³
.
	`IsObjeùHªdË
(è&& ctx->ty³.d©aTy³.
	`IsR—dOÆy
()) ||

8646 (
ùx
->
ty³
.
d©aTy³
.
	`IsObjeùHªdË
(è&& ctx->ty³.d©aTy³.
	`IsHªdËToCÚ¡
()) )

8647 
ùx
->
´İ”ty_cÚ¡
 = 
Œue
;

8649 
ùx
->
´İ”ty_cÚ¡
 = 
çl£
;

8652 
ùx
->
´İ”ty_hªdË
 = ctx->
ty³
.
d©aTy³
.
	`IsObjeùHªdË
();

8653 
ùx
->
´İ”ty_»f
 = ctx->
ty³
.
d©aTy³
.
	`IsReã»nû
();

8658 
asCD©aTy³
 
dt
;

8659 ifĞ
£tId
 )

8660 
dt
 = 
bud”
->
	`G‘FunùiÚDesütiÚ
(
£tId
)->
·¿m‘”Ty³s
[(
¬g
?1:0)];

8662 
dt
 = 
bud”
->
	`G‘FunùiÚDesütiÚ
(
g‘Id
)->
»tuºTy³
;

8666 
off£t
 = 
ùx
->
ty³
.
¡ackOff£t
;

8667 
boŞ
 
isTemp
 = 
ùx
->
ty³
.
isTempÜ¬y
;

8668 
ùx
->
ty³
.
	`S‘
(
dt
);

8669 
ùx
->
ty³
.
¡ackOff£t
 = ()
off£t
;

8670 
ùx
->
ty³
.
isTempÜ¬y
 = 
isTemp
;

8671 
ùx
->
ex´Node
 = 
node
;

8674 ifĞ
¬g
 )

8676 
ùx
->
´İ”ty_¬g
 = 
	`asNEW
(
asSEx´CÚ‹xt
)(
’gše
);

8677 ifĞ
ùx
->
´İ”ty_¬g
 == 0 )

8683 
	`M”geEx´By‹codeAndTy³
(
ùx
->
´İ”ty_¬g
, 
¬g
);

8691 
	}
}

8693 
	gasCComp”
::
	$ProûssPrİ”tyS‘AcûssÜ
(
asSEx´CÚ‹xt
 *
ùx
,‡sSEx´CÚ‹xˆ*
¬g
, 
asCSütNode
 *
node
)

8697 ifĞ!
ùx
->
´İ”ty_£t
 )

8699 
	`E¼Ü
(
TXT_PROPERTY_HAS_NO_SET_ACCESSOR
, 
node
);

8703 
asCTy³Info
 
objTy³
 = 
ùx
->
ty³
;

8704 
asCSütFunùiÚ
 *
func
 = 
bud”
->
	`G‘FunùiÚDesütiÚ
(
ùx
->
´İ”ty_£t
);

8707 
asCA¼ay
<> 
funcs
;

8708 
funcs
.
	`PushLa¡
(
ùx
->
´İ”ty_£t
);

8709 
asCA¼ay
<
asSEx´CÚ‹xt
 *> 
¬gs
;

8710 ifĞ
ùx
->
´İ”ty_¬g
 )

8711 
¬gs
.
	`PushLa¡
(
ùx
->
´İ”ty_¬g
);

8712 
¬gs
.
	`PushLa¡
(
¬g
);

8713 
	`M©chFunùiÚs
(
funcs
, 
¬gs
, 
node
, 
func
->
	`G‘Name
(), func->
objeùTy³
, 
ùx
->
´İ”ty_cÚ¡
);

8714 ifĞ
funcs
.
	`G‘L’gth
() == 0 )

8717 ifĞ
ùx
->
´İ”ty_¬g
 )

8719 
	`asDELETE
(
ùx
->
´İ”ty_¬g
, 
asSEx´CÚ‹xt
);

8720 
ùx
->
´İ”ty_¬g
 = 0;

8725 ifĞ
func
->
objeùTy³
 )

8728 
ùx
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©eObjeù
(
func
->
objeùTy³
, ctx->
´İ”ty_cÚ¡
);

8729 ifĞ
ùx
->
´İ”ty_hªdË
 ) ctx->
ty³
.
d©aTy³
.
	`MakeHªdË
(
Œue
);

8730 ifĞ
ùx
->
´İ”ty_»f
 ) ctx->
ty³
.
d©aTy³
.
	`MakeReã»nû
(
Œue
);

8733 ifĞ
ùx
->
´İ”ty_cÚ¡
 && !
func
->
isR—dOÆy
 )

8735 
	`E¼Ü
(
TXT_NON_CONST_METHOD_ON_CONST_OBJ
, 
node
);

8736 
asCA¼ay
<> 
funcs
;

8737 
funcs
.
	`PushLa¡
(
ùx
->
´İ”ty_£t
);

8738 
	`PrštM©chšgFuncs
(
funcs
, 
node
);

8743 
	`MakeFunùiÚC®l
(
ùx
, ctx->
´İ”ty_£t
, 
func
->
objeùTy³
, 
¬gs
, 
node
);

8745 ifĞ
func
->
objeùTy³
 )

8748 ifĞ!
objTy³
.
isTempÜ¬y
 ||

8749 !
ùx
->
ty³
.
d©aTy³
.
	`IsReã»nû
() ||

8750 
ùx
->
ty³
.
isV¬ŸbË
 )

8754 
	`R–—£TempÜ¬yV¬ŸbË
(
objTy³
, &
ùx
->
bc
);

8758 
ùx
->
´İ”ty_g‘
 = 0;

8759 
ùx
->
´İ”ty_£t
 = 0;

8760 ifĞ
ùx
->
´İ”ty_¬g
 )

8762 
	`asDELETE
(
ùx
->
´İ”ty_¬g
, 
asSEx´CÚ‹xt
);

8763 
ùx
->
´İ”ty_¬g
 = 0;

8767 
	}
}

8769 
	gasCComp”
::
	$ProûssPrİ”tyG‘AcûssÜ
(
asSEx´CÚ‹xt
 *
ùx
, 
asCSütNode
 *
node
)

8772 ifĞ!
ùx
->
´İ”ty_g‘
 && !ùx->
´İ”ty_£t
 )

8775 ifĞ!
ùx
->
´İ”ty_g‘
 )

8778 
	`E¼Ü
(
TXT_PROPERTY_HAS_NO_GET_ACCESSOR
, 
node
);

8779 
ùx
->
ty³
.
	`S‘Dummy
();

8783 
asCTy³Info
 
objTy³
 = 
ùx
->
ty³
;

8784 
asCSütFunùiÚ
 *
func
 = 
bud”
->
	`G‘FunùiÚDesütiÚ
(
ùx
->
´İ”ty_g‘
);

8787 
asCA¼ay
<> 
funcs
;

8788 
funcs
.
	`PushLa¡
(
ùx
->
´İ”ty_g‘
);

8789 
asCA¼ay
<
asSEx´CÚ‹xt
 *> 
¬gs
;

8790 ifĞ
ùx
->
´İ”ty_¬g
 )

8791 
¬gs
.
	`PushLa¡
(
ùx
->
´İ”ty_¬g
);

8792 
	`M©chFunùiÚs
(
funcs
, 
¬gs
, 
node
, 
func
->
	`G‘Name
(), func->
objeùTy³
, 
ùx
->
´İ”ty_cÚ¡
);

8793 ifĞ
funcs
.
	`G‘L’gth
() == 0 )

8796 ifĞ
ùx
->
´İ”ty_¬g
 )

8798 
	`asDELETE
(
ùx
->
´İ”ty_¬g
, 
asSEx´CÚ‹xt
);

8799 
ùx
->
´İ”ty_¬g
 = 0;

8801 
ùx
->
ty³
.
	`S‘Dummy
();

8805 ifĞ
func
->
objeùTy³
 )

8808 
ùx
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©eObjeù
(
func
->
objeùTy³
, ctx->
´İ”ty_cÚ¡
);

8809 ifĞ
ùx
->
´İ”ty_hªdË
 ) ctx->
ty³
.
d©aTy³
.
	`MakeHªdË
(
Œue
);

8810 ifĞ
ùx
->
´İ”ty_»f
 ) ctx->
ty³
.
d©aTy³
.
	`MakeReã»nû
(
Œue
);

8813 ifĞ
ùx
->
´İ”ty_cÚ¡
 && !
func
->
isR—dOÆy
 )

8815 
	`E¼Ü
(
TXT_NON_CONST_METHOD_ON_CONST_OBJ
, 
node
);

8816 
asCA¼ay
<> 
funcs
;

8817 
funcs
.
	`PushLa¡
(
ùx
->
´İ”ty_g‘
);

8818 
	`PrštM©chšgFuncs
(
funcs
, 
node
);

8823 
	`MakeFunùiÚC®l
(
ùx
, ctx->
´İ”ty_g‘
, 
func
->
objeùTy³
, 
¬gs
, 
node
);

8825 ifĞ
func
->
objeùTy³
 )

8828 ifĞ!
objTy³
.
isTempÜ¬y
 ||

8829 !
ùx
->
ty³
.
d©aTy³
.
	`IsReã»nû
() ||

8830 
ùx
->
ty³
.
isV¬ŸbË
 )

8834 
	`R–—£TempÜ¬yV¬ŸbË
(
objTy³
, &
ùx
->
bc
);

8838 
ùx
->
´İ”ty_g‘
 = 0;

8839 
ùx
->
´İ”ty_£t
 = 0;

8840 ifĞ
ùx
->
´İ”ty_¬g
 )

8842 
	`asDELETE
(
ùx
->
´İ”ty_¬g
, 
asSEx´CÚ‹xt
);

8843 
ùx
->
´İ”ty_¬g
 = 0;

8845 
	}
}

8847 
	gasCComp”
::
	$CompeEx´essiÚPo¡Op
(
asCSütNode
 *
node
, 
asSEx´CÚ‹xt
 *
ùx
)

8849 
İ
 = 
node
->
tok’Ty³
;

8852 
	`IsV¬ŸbËIn™Ÿlized
(&
ùx
->
ty³
, 
node
);

8854 ifĞ(
İ
 =ğ
‰Inc
 || o°=ğ
‰Dec
è&& 
ùx
->
ty³
.
d©aTy³
.
	`IsObjeù
() )

8856 cÚ¡ *
İName
 = 0;

8857  
İ
 )

8859 
‰Inc
: 
İName
 = "opPostInc"; ;

8860 
‰Dec
: 
İName
 = "opPostDec"; ;

8863 ifĞ
İName
 )

8866 
	`ProûssPrİ”tyG‘AcûssÜ
(
ùx
, 
node
);

8869 
boŞ
 
isCÚ¡
 = 
çl£
;

8870 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsObjeùHªdË
() )

8871 
isCÚ¡
 = 
ùx
->
ty³
.
d©aTy³
.
	`IsHªdËToCÚ¡
();

8873 
isCÚ¡
 = 
ùx
->
ty³
.
d©aTy³
.
	`IsR—dOÆy
();

8878 
asCA¼ay
<> 
funcs
;

8879 
asCObjeùTy³
 *
Ù
 = 
ùx
->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
();

8880  
asUINT
 
n
 = 0;‚ < 
Ù
->
m‘hods
.
	`G‘L’gth
();‚++ )

8882 
asCSütFunùiÚ
 *
func
 = 
’gše
->
sütFunùiÚs
[
Ù
->
m‘hods
[
n
]];

8883 ifĞ
func
->
Çme
 =ğ
İName
 &&

8884 
func
->
·¿m‘”Ty³s
.
	`G‘L’gth
() == 0 &&

8885 (!
isCÚ¡
 || 
func
->
isR—dOÆy
) )

8887 
funcs
.
	`PushLa¡
(
func
->
id
);

8892 ifĞ
funcs
.
	`G‘L’gth
() == 1 )

8894 
asCTy³Info
 
objTy³
 = 
ùx
->
ty³
;

8895 
asCA¼ay
<
asSEx´CÚ‹xt
 *> 
¬gs
;

8896 
	`MakeFunùiÚC®l
(
ùx
, 
funcs
[0], 
objTy³
.
d©aTy³
.
	`G‘ObjeùTy³
(), 
¬gs
, 
node
);

8897 
	`R–—£TempÜ¬yV¬ŸbË
(
objTy³
, &
ùx
->
bc
);

8900 ifĞ
funcs
.
	`G‘L’gth
() == 0 )

8902 
asCSŒšg
 
¡r
;

8903 
¡r
 = 
	`asCSŒšg
(
İName
) + "()";

8904 ifĞ
isCÚ¡
 )

8905 
¡r
 += " const";

8906 
¡r
.
	`FÜm©
(
TXT_FUNCTION_s_NOT_FOUND
, sŒ.
	`Add»ssOf
());

8907 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

8908 
ùx
->
ty³
.
	`S‘Dummy
();

8911 ifĞ
funcs
.
	`G‘L’gth
() > 1 )

8913 
	`E¼Ü
(
TXT_MORE_THAN_ONE_MATCHING_OP
, 
node
);

8914 
	`PrštM©chšgFuncs
(
funcs
, 
node
);

8916 
ùx
->
ty³
.
	`S‘Dummy
();

8921 ifĞ
İ
 =ğ
‰Inc
 || o°=ğ
‰Dec
 )

8924 ifĞ
ùx
->
ty³
.
isTempÜ¬y
 )

8926 
	`E¼Ü
(
TXT_REF_IS_TEMP
, 
node
);

8929 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsR—dOÆy
() )

8931 
	`E¼Ü
(
TXT_REF_IS_READ_ONLY
, 
node
);

8934 ifĞ
ùx
->
´İ”ty_g‘
 || ctx->
´İ”ty_£t
 )

8936 
	`E¼Ü
(
TXT_INVALID_REF_PROP_ACCESS
, 
node
);

8939 ifĞ!
ùx
->
ty³
.
isLV®ue
 )

8941 
	`E¼Ü
(
TXT_NOT_LVALUE
, 
node
);

8945 ifĞ
ùx
->
ty³
.
isV¬ŸbË
 && !ùx->ty³.
d©aTy³
.
	`IsReã»nû
() )

8946 
	`CÚv”tToReã»nû
(
ùx
);

8947 ifĞ!
ùx
->
ty³
.
d©aTy³
.
	`IsReã»nû
() )

8949 
	`E¼Ü
(
TXT_NOT_VALID_REFERENCE
, 
node
);

8954 
	`CÚv”tToTempV¬ŸbË
(
ùx
);

8955 
	`asASSERT
(!
ùx
->
ty³
.
isLV®ue
);

8958 
asEBCIn¡r
 
iInc
 = 
asBC_INCi
, 
iDec
 = 
asBC_DECi
;

8959 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsDoubËTy³
() )

8961 
iInc
 = 
asBC_INCd
;

8962 
iDec
 = 
asBC_DECd
;

8964 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsFlßtTy³
() )

8966 
iInc
 = 
asBC_INCf
;

8967 
iDec
 = 
asBC_DECf
;

8969 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
(è|| ctx->ty³.d©aTy³.
	`IsUnsigÃdTy³
() )

8971 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsEqu®Exû±Ref
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ16
, 
çl£
)) ||

8972 
ùx
->
ty³
.
d©aTy³
.
	`IsEqu®Exû±Ref
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ16
, 
çl£
)) )

8974 
iInc
 = 
asBC_INCi16
;

8975 
iDec
 = 
asBC_DECi16
;

8977 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsEqu®Exû±Ref
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ8
, 
çl£
)) ||

8978 
ùx
->
ty³
.
d©aTy³
.
	`IsEqu®Exû±Ref
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ8
, 
çl£
)) )

8980 
iInc
 = 
asBC_INCi8
;

8981 
iDec
 = 
asBC_DECi8
;

8983 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsEqu®Exû±Ref
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ64
, 
çl£
)) ||

8984 
ùx
->
ty³
.
d©aTy³
.
	`IsEqu®Exû±Ref
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ64
, 
çl£
)) )

8986 
iInc
 = 
asBC_INCi64
;

8987 
iDec
 = 
asBC_DECi64
;

8992 
	`E¼Ü
(
TXT_ILLEGAL_OPERATION
, 
node
);

8996 ifĞ
İ
 =ğ
‰Inc
 ) 
ùx
->
bc
.
	`In¡r
(
iInc
); ùx->bc.In¡r(
iDec
);

8998 ifĞ
İ
 =ğ
‰DÙ
 )

9000 ifĞ
node
->
fœ¡Chd
->
nodeTy³
 =ğ
¢Id’tif›r
 )

9002 
	`ProûssPrİ”tyG‘AcûssÜ
(
ùx
, 
node
);

9005 
asCSŒšg
 
	`Çme
(&
süt
->
code
[
node
->
fœ¡Chd
->
tok’Pos
],‚ode->fœ¡Chd->
tok’L’gth
);

9010 
r
 = 0;

9011 ifĞ
node
->
Ãxt
 &&‚ode->Ãxt->
tok’Ty³
 =ğ
‰O³nB¿ck‘
 )

9014 
asSEx´CÚ‹xt
 
	`dummyArg
(
’gše
);

9015 
r
 = 
	`FšdPrİ”tyAcûssÜ
(
Çme
, 
ùx
, &
dummyArg
, 
node
);

9017 ifĞ
r
 == 0 )

9018 
r
 = 
	`FšdPrİ”tyAcûssÜ
(
Çme
, 
ùx
, 
node
);

9019 ifĞ
r
 != 0 )

9020  
r
;

9022 ifĞ!
ùx
->
ty³
.
d©aTy³
.
	`IsPrim™ive
() )

9023 
	`D”eã»nû
(
ùx
, 
Œue
);

9025 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsObjeùHªdË
() )

9028 
asCD©aTy³
 
dt
 = 
ùx
->
ty³
.
d©aTy³
;

9029 
dt
.
	`MakeHªdË
(
çl£
);

9031 
	`Im¶ic™CÚv”siÚ
(
ùx
, 
dt
, 
node
, 
asIC_IMPLICIT_CONV
);

9034 
ùx
->
ty³
.
isLV®ue
 = 
Œue
;

9038 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsObjeù
() )

9040 
boŞ
 
isCÚ¡
 = 
ùx
->
ty³
.
d©aTy³
.
	`IsR—dOÆy
();

9042 
asCObjeùPrİ”ty
 *
´İ
 = 
bud”
->
	`G‘ObjeùPrİ”ty
(
ùx
->
ty³
.
d©aTy³
, 
Çme
.
	`Add»ssOf
());

9043 ifĞ
´İ
 )

9046 ifĞ
´İ
->
isPriv©e
 && (!
outFunc
 || outFunc->
objeùTy³
 !ğ
ùx
->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
()) )

9048 
asCSŒšg
 
msg
;

9049 
msg
.
	`FÜm©
(
TXT_PRIVATE_PROP_ACCESS_s
, 
Çme
.
	`Add»ssOf
());

9050 
	`E¼Ü
(
msg
.
	`Add»ssOf
(), 
node
);

9054 
ùx
->
bc
.
	`In¡rSHORT_DW
(
asBC_ADDSi
, ()
´İ
->
by‹Off£t
, 
’gše
->
	`G‘Ty³IdFromD©aTy³
(
asCD©aTy³
::
	`C»©eObjeù
(ùx->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
(), 
çl£
)));

9056 ifĞ
´İ
->
ty³
.
	`IsReã»nû
() )

9057 
ùx
->
bc
.
	`In¡r
(
asBC_RDSPŒ
);

9060 ifĞ
´İ
->
ty³
.
	`IsPrim™ive
() )

9062 
ùx
->
bc
.
	`In¡r
(
asBC_PİRPŒ
);

9066 ifĞ
ùx
->
ty³
.
isTempÜ¬y
 )

9069 
asSDeã¼edP¬am
 
deã¼ed
;

9070 
deã¼ed
.
ÜigEx´
 = 0;

9071 
deã¼ed
.
¬gInOutFÏgs
 = 
asTM_INREF
;

9072 
deã¼ed
.
¬gNode
 = 0;

9073 
deã¼ed
.
¬gTy³
.
	`S‘V¬ŸbË
(
ùx
->
ty³
.
d©aTy³
, ctx->ty³.
¡ackOff£t
, 
Œue
);

9075 
ùx
->
deã¼edP¬ams
.
	`PushLa¡
(
deã¼ed
);

9079 
ùx
->
ty³
.
d©aTy³
 = 
´İ
->type;

9080 
ùx
->
ty³
.
d©aTy³
.
	`MakeReã»nû
(
Œue
);

9081 
ùx
->
ty³
.
isV¬ŸbË
 = 
çl£
;

9082 
ùx
->
ty³
.
isTempÜ¬y
 = 
çl£
;

9084 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsObjeù
(è&& !ùx->ty³.d©aTy³.
	`IsObjeùHªdË
() )

9087 
ùx
->
ty³
.
d©aTy³
.
	`MakeReã»nû
(
çl£
);

9090 
ùx
->
ty³
.
d©aTy³
.
	`MakeR—dOÆy
(
isCÚ¡
 ? 
Œue
 : 
´İ
->ty³.
	`IsR—dOÆy
());

9094 
asCSŒšg
 
¡r
;

9095 
¡r
.
	`FÜm©
(
TXT_s_NOT_MEMBER_OF_s
, 
Çme
.
	`Add»ssOf
(), 
ùx
->
ty³
.
d©aTy³
.Format().AddressOf());

9096 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

9102 
asCSŒšg
 
¡r
;

9103 
¡r
.
	`FÜm©
(
TXT_s_NOT_MEMBER_OF_s
, 
Çme
.
	`Add»ssOf
(), 
ùx
->
ty³
.
d©aTy³
.Format().AddressOf());

9104 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

9111 ifĞ!
ùx
->
ty³
.
d©aTy³
.
	`IsObjeù
() )

9113 
asCSŒšg
 
¡r
;

9114 
¡r
.
	`FÜm©
(
TXT_ILLEGAL_OPERATION_ON_s
, 
ùx
->
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
());

9115 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

9120 
	`ProûssPrİ”tyG‘AcûssÜ
(
ùx
, 
node
);

9122 
boŞ
 
isCÚ¡
 = 
çl£
;

9123 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsObjeùHªdË
() )

9124 
isCÚ¡
 = 
ùx
->
ty³
.
d©aTy³
.
	`IsHªdËToCÚ¡
();

9126 
isCÚ¡
 = 
ùx
->
ty³
.
d©aTy³
.
	`IsR—dOÆy
();

9128 
asCObjeùTy³
 *
ŒueObj
 = 
ùx
->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
();

9130 
asCTy³Info
 
objTy³
 = 
ùx
->
ty³
;

9133 
r
 = 
	`CompeFunùiÚC®l
(
node
->
fœ¡Chd
, 
ùx
, 
ŒueObj
, 
isCÚ¡
);

9134 ifĞ
r
 < 0 ) „;

9138 ifĞ!
objTy³
.
isTempÜ¬y
 ||

9139 !(
ùx
->
ty³
.
d©aTy³
.
	`IsReã»nû
(è|| (ùx->ty³.d©aTy³.
	`IsObjeù
(è&& !ùx->ty³.d©aTy³.
	`IsObjeùHªdË
())) ||

9140 
ùx
->
ty³
.
isV¬ŸbË
 )

9144 
	`R–—£TempÜ¬yV¬ŸbË
(
objTy³
, &
ùx
->
bc
);

9148 ifĞ
İ
 =ğ
‰O³nB¿ck‘
 )

9154 
asCSŒšg
 
´İ”tyName
;

9155 ifĞ((
ùx
->
´İ”ty_g‘
 && 
bud”
->
	`G‘FunùiÚDesütiÚ
(ùx->´İ”ty_g‘)->
	`G‘P¬amCouÁ
() == 1) ||

9156 (
ùx
->
´İ”ty_£t
 && 
bud”
->
	`G‘FunùiÚDesütiÚ
(ùx->´İ”ty_£t)->
	`G‘P¬amCouÁ
() == 2)) &&

9157 (
ùx
->
´İ”ty_¬g
 && ctx->´İ”ty_¬g->
ty³
.
d©aTy³
.
	`G‘Tok’Ty³
(è=ğ
‰UÄecognizedTok’
) )

9160 
asCSütFunùiÚ
 *
func
 = 0;

9161 ifĞ
ùx
->
´İ”ty_g‘
 )

9162 
func
 = 
bud”
->
	`G‘FunùiÚDesütiÚ
(
ùx
->
´İ”ty_g‘
);

9164 
func
 = 
bud”
->
	`G‘FunùiÚDesütiÚ
(
ùx
->
´İ”ty_£t
);

9165 
´İ”tyName
 = 
func
->
	`G‘Name
();

9166 
´İ”tyName
 =…rİ”tyName.
	`SubSŒšg
(4);

9169 ifĞ
func
->
objeùTy³
 )

9171 
ùx
->
ty³
.
d©aTy³
 = 
asCD©aTy³
::
	`C»©eObjeù
(
func
->
objeùTy³
, ctx->
´İ”ty_cÚ¡
);

9172 ifĞ
ùx
->
´İ”ty_hªdË
 ) ctx->
ty³
.
d©aTy³
.
	`MakeHªdË
(
Œue
);

9173 ifĞ
ùx
->
´İ”ty_»f
 ) ctx->
ty³
.
d©aTy³
.
	`MakeReã»nû
(
Œue
);

9177 
ùx
->
ty³
.
	`S‘Dummy
();

9180 
ùx
->
´İ”ty_g‘
 = ctx->
´İ”ty_£t
 = 0;

9181 ifĞ
ùx
->
´İ”ty_¬g
 )

9183 
	`asDELETE
(
ùx
->
´İ”ty_¬g
, 
asSEx´CÚ‹xt
);

9184 
ùx
->
´İ”ty_¬g
 = 0;

9189 ifĞ!
ùx
->
ty³
.
d©aTy³
.
	`IsObjeù
() )

9191 
asCSŒšg
 
¡r
;

9192 
¡r
.
	`FÜm©
(
TXT_OBJECT_DOESNT_SUPPORT_INDEX_OP
, 
ùx
->
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
());

9193 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

9197 
	`ProûssPrİ”tyG‘AcûssÜ
(
ùx
, 
node
);

9200 
	`D”eã»nû
(
ùx
, 
Œue
);

9203 
asSEx´CÚ‹xt
 
	`ex´
(
’gše
);

9204 
	`CompeAssignm’t
(
node
->
fœ¡Chd
, &
ex´
);

9207 
asSEx´CÚ‹xt
 
	`lùx
(
’gše
);

9208 
	`M”geEx´By‹codeAndTy³
(&
lùx
, 
ùx
);

9209 
r
 = 0;

9210 ifĞ
´İ”tyName
 == "" )

9211 
r
 = 
	`CompeOv”lßdedDu®O³¿tÜ2
(
node
, "İIndex", &
lùx
, &
ex´
, 
ùx
);

9212 ifĞ
r
 == 0 )

9215 
r
 = 
	`FšdPrİ”tyAcûssÜ
(
´İ”tyName
 =ğ"" ? "İIndex" :…rİ”tyName.
	`Add»ssOf
(), &
lùx
, &
ex´
, 
node
);

9216 ifĞ
r
 == 0 )

9218 
asCSŒšg
 
¡r
;

9219 
¡r
.
	`FÜm©
(
TXT_OBJECT_DOESNT_SUPPORT_INDEX_OP
, 
ùx
->
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
());

9220 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

9223 ifĞ
r
 < 0 )

9226 
	`M”geEx´By‹codeAndTy³
(
ùx
, &
lùx
);

9229 ifĞ
İ
 =ğ
‰O³nP¬ªthesis
 )

9234 ifĞ!
ùx
->
ty³
.
d©aTy³
.
	`G‘FuncDef
() )

9236 
	`E¼Ü
(
TXT_EXPR_DOESNT_EVAL_TO_FUNC
, 
node
);

9241 
asCA¼ay
<
asSEx´CÚ‹xt
 *> 
¬gs
;

9242 ifĞ
	`CompeArgum’tLi¡
(
node
->
Ï¡Chd
, 
¬gs
) >= 0 )

9245 
asCA¼ay
<> 
funcs
;

9246 
funcs
.
	`PushLa¡
(
ùx
->
ty³
.
d©aTy³
.
	`G‘FuncDef
()->
id
);

9247 
	`M©chFunùiÚs
(
funcs
, 
¬gs
, 
node
, 
ùx
->
ty³
.
d©aTy³
.
	`G‘FuncDef
()->
Çme
.
	`Add»ssOf
());

9249 ifĞ
funcs
.
	`G‘L’gth
() != 1 )

9254 
ùx
->
ty³
.
	`S‘Dummy
();

9258 
r
 = 
asSUCCESS
;

9261 
asCSütFunùiÚ
 *
func
 = (
funcs
[0] & 0xFFFF0000è=ğ0 ? 
’gše
->
sütFunùiÚs
[funcs[0]] : 0;

9262 ifĞ
func
 && 
¬gs
.
	`G‘L’gth
(è< (
asUINT
)func->
	`G‘P¬amCouÁ
() )

9263 
r
 = 
	`CompeDeçuÉArgs
(
node
, 
¬gs
, 
func
);

9270 ifĞ
r
 =ğ
asSUCCESS
 )

9272 
	`D”eã»nû
(
ùx
, 
Œue
);

9273 ifĞ!
ùx
->
ty³
.
isV¬ŸbË
 )

9274 
	`CÚv”tToV¬ŸbË
(
ùx
);

9278 
ùx
->
bc
.
	`In¡r
(
asBC_PİPŒ
);

9280 
asCTy³Info
 
t
 = 
ùx
->
ty³
;

9282 
	`MakeFunùiÚC®l
(
ùx
, 
funcs
[0], 0, 
¬gs
, 
node
, 
çl£
, 0, ctx->
ty³
.
¡ackOff£t
);

9284 
	`R–—£TempÜ¬yV¬ŸbË
(
t
, &
ùx
->
bc
);

9289 
ùx
->
ty³
.
	`S‘Dummy
();

9292  
asUINT
 
n
 = 0;‚ < 
¬gs
.
	`G‘L’gth
();‚++ )

9293 ifĞ
¬gs
[
n
] )

9295 
	`asDELETE
(
¬gs
[
n
],
asSEx´CÚ‹xt
);

9300 
	}
}

9302 
	gasCComp”
::
	$G‘P»ûd’û
(
asCSütNode
 *
İ
)

9317 ifĞ
İ
->
nodeTy³
 =ğ
¢Ex´T”m
 )

9321 
tok’Ty³
 = 
İ
->tokenType;

9322 ifĞ
tok’Ty³
 =ğ
‰Sr
 ||ok’Ty³ =ğ
‰SÏsh
 ||ok’Ty³ =ğ
‰P”ûÁ
 )

9325 ifĞ
tok’Ty³
 =ğ
‰Plus
 ||ok’Ty³ =ğ
‰Mšus
 )

9328 ifĞ
tok’Ty³
 =ğ
‰B™ShiáLeá
 ||

9329 
tok’Ty³
 =ğ
‰B™ShiáRight
 ||

9330 
tok’Ty³
 =ğ
‰B™ShiáRightAr™h
 )

9333 ifĞ
tok’Ty³
 =ğ
‰Amp
 )

9336 ifĞ
tok’Ty³
 =ğ
‰B™XÜ
 )

9339 ifĞ
tok’Ty³
 =ğ
‰B™Or
 )

9342 ifĞ
tok’Ty³
 =ğ
‰LessThªOrEqu®
 ||

9343 
tok’Ty³
 =ğ
‰LessThª
 ||

9344 
tok’Ty³
 =ğ
‰G»©”ThªOrEqu®
 ||

9345 
tok’Ty³
 =ğ
‰G»©”Thª
 )

9348 ifĞ
tok’Ty³
 =ğ
‰Equ®
 ||ok’Ty³ =ğ
‰NÙEqu®
 ||ok’Ty³ =ğ
‰XÜ
 ||ok’Ty³ =ğ
‰Is
 ||ok’Ty³ =ğ
‰NÙIs
 )

9351 ifĞ
tok’Ty³
 =ğ
‰And
 )

9354 ifĞ
tok’Ty³
 =ğ
‰Or
 )

9358 
	`asASSERT
(
çl£
);

9361 
	}
}

9363 
asUINT
 
	gasCComp”
::
M©chArgum’t
(
asCA¼ay
<> &
funcs
,‡sCA¼ay<> &
m©ches
, cÚ¡ 
asCTy³Info
 *
¬gTy³
, 
·¿mNum
, 
boŞ
 
®lowObjeùCÚ¡ruù
)

9365 
asUINT
 
	gbe¡Co¡
 =‡sUINT(-1);

9366 
	gm©ches
.
S‘L’gth
(0);

9368  
asUINT
 
	gn
 = 0;‚ < 
	gfuncs
.
G‘L’gth
();‚++ )

9370 
asCSütFunùiÚ
 *
	gdesc
 = 
bud”
->
G‘FunùiÚDesütiÚ
(
funcs
[
n
]);

9373 ifĞ()
	gdesc
->
	g·¿m‘”Ty³s
.
G‘L’gth
(è<ğ
·¿mNum
 )

9377 
asSEx´CÚ‹xt
 
ti
(
’gše
);

9378 
	gti
.
	gty³
 = *
¬gTy³
;

9379 ifĞ
	g¬gTy³
->
	gd©aTy³
.
IsPrim™ive
(èè
	gti
.
	gty³
.d©aTy³.
MakeReã»nû
(
çl£
);

9380 
asUINT
 
	gco¡
 = 
Im¶ic™CÚv”siÚ
(&
ti
, 
desc
->
·¿m‘”Ty³s
[
·¿mNum
], 0, 
asIC_IMPLICIT_CONV
, 
çl£
, 
®lowObjeùCÚ¡ruù
);

9384 ifĞ
	gdesc
->
	g·¿m‘”Ty³s
[
·¿mNum
].
IsReã»nû
() &&

9385 
	gdesc
->
	gšOutFÏgs
[
·¿mNum
] =ğ
asTM_INOUTREF
 &&

9386 
desc
->
·¿m‘”Ty³s
[
·¿mNum
].
G‘Tok’Ty³
(è!ğ
‰Que¡iÚ
 )

9393 ifĞ
desc
->
·¿m‘”Ty³s
[
·¿mNum
].
IsPrim™ive
() &&

9394 
desc
->
·¿m‘”Ty³s
[
·¿mNum
].
G‘Tok’Ty³
(è!ğ
¬gTy³
->
d©aTy³
.GetTokenType() )

9396 
asASSERT
Ğ
’gše
->
•
.
®lowUn§ãReã»nûs
 );

9401 ifĞ
	gdesc
->
	g·¿m‘”Ty³s
[
·¿mNum
].
IsEnumTy³
() &&

9402 
	gdesc
->
	g·¿m‘”Ty³s
[
·¿mNum
].
G‘ObjeùTy³
(è!ğ
¬gTy³
->
d©aTy³
.GetObjectType() )

9404 
asASSERT
Ğ
’gše
->
•
.
®lowUn§ãReã»nûs
 );

9409 ifĞ
	gdesc
->
	g·¿m‘”Ty³s
[
·¿mNum
].
IsObjeùHªdË
() &&

9410 !
	g¬gTy³
->
	gd©aTy³
.
IsObjeùHªdË
() )

9412 
asASSERT
Ğ
’gše
->
•
.
®lowUn§ãReã»nûs
 );

9417 ifĞ(
	gdesc
->
	g·¿m‘”Ty³s
[
·¿mNum
].
G‘ObjeùTy³
(è&& (desc->·¿m‘”Ty³s[·¿mNum].G‘ObjeùTy³()->
G‘FÏgs
(è& 
	gasOBJ_VALUE
)) &&

9418 (
	gdesc
->
	g·¿m‘”Ty³s
[
·¿mNum
].
G‘ObjeùTy³
(è!ğ
¬gTy³
->
d©aTy³
.GetObjectType()) )

9420 
asASSERT
Ğ
’gše
->
•
.
®lowUn§ãReã»nûs
 );

9426 ifĞ
	gdesc
->
	g·¿m‘”Ty³s
[
·¿mNum
].
IsEqu®Exû±Ref
(
ti
.
ty³
.
d©aTy³
) )

9428 ifĞ
	gco¡
 < 
	gbe¡Co¡
 )

9430 
	gm©ches
.
S‘L’gth
(0);

9431 
	gbe¡Co¡
 = 
co¡
;

9434 ifĞ
	gco¡
 =ğ
be¡Co¡
 )

9435 
m©ches
.
PushLa¡
(
funcs
[
n
]);

9439  
	gbe¡Co¡
;

9442 
	gasCComp”
::
	$P»·»Argum’t2
(
asSEx´CÚ‹xt
 *
ùx
,‡sSEx´CÚ‹xˆ*
¬g
, 
asCD©aTy³
 *
·¿mTy³
, 
boŞ
 
isFunùiÚ
, 
»fTy³
, boŞ 
isMakšgCİy
)

9445 ifĞ
·¿mTy³
->
	`IsReã»nû
(è&& !(
»fTy³
 & 
asTM_INREF
) )

9448 
asSEx´CÚ‹xt
 *
Üig
 = 
	`asNEW
×sSEx´CÚ‹xt)(
’gše
);

9449 ifĞ
Üig
 == 0 )

9454 
	`M”geEx´By‹codeAndTy³
(
Üig
, 
¬g
);

9455 
¬g
->
ÜigEx´
 = 
Üig
;

9458 
	`P»·»Argum’t
(
·¿mTy³
, 
¬g
,‡rg->
ex´Node
, 
isFunùiÚ
, 
»fTy³
, 
isMakšgCİy
);

9461 
ùx
->
bc
.
	`AddCode
(&
¬g
->bc);

9462 
	}
}

9464 
boŞ
 
	gasCComp”
::
	$CompeOv”lßdedDu®O³¿tÜ
(
asCSütNode
 *
node
, 
asSEx´CÚ‹xt
 *
lùx
,‡sSEx´CÚ‹xˆ*
rùx
,‡sSEx´CÚ‹xˆ*
ùx
)

9466 
ùx
->
ex´Node
 = 
node
;

9469 
tok’
 = 
node
->
tok’Ty³
;

9470 ifĞ
tok’
 =ğ
‰UÄecognizedTok’
 )

9475 
tok’
 = 
‰Assignm’t
;

9479 ifĞ
tok’
 =ğ
‰And
 ||

9480 
tok’
 =ğ
‰Or
 ||

9481 
tok’
 =ğ
‰XÜ
 )

9482  
çl£
;

9485 ifĞ
tok’
 =ğ
‰Equ®
 ||

9486 
tok’
 =ğ
‰NÙEqu®
 )

9490 
r
 = 
	`CompeOv”lßdedDu®O³¿tÜ2
(
node
, "İEqu®s", 
lùx
, 
rùx
, 
ùx
, 
Œue
, 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
çl£
));

9491 ifĞ
r
 == 0 )

9494 
r
 = 
	`CompeOv”lßdedDu®O³¿tÜ2
(
node
, "İEqu®s", 
rùx
, 
lùx
, 
ùx
, 
Œue
, 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
çl£
));

9497 ifĞ
r
 == 1 )

9499 ifĞ
tok’
 =ğ
‰NÙEqu®
 )

9500 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_NOT
, ctx->
ty³
.
¡ackOff£t
);

9503  
Œue
;

9505 ifĞ
r
 < 0 )

9508 
ùx
->
ty³
.
	`S‘CÚ¡ªtDW
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
Œue
),rue);

9509  
Œue
;

9513 ifĞ
tok’
 =ğ
‰Equ®
 ||

9514 
tok’
 =ğ
‰NÙEqu®
 ||

9515 
tok’
 =ğ
‰LessThª
 ||

9516 
tok’
 =ğ
‰LessThªOrEqu®
 ||

9517 
tok’
 =ğ
‰G»©”Thª
 ||

9518 
tok’
 =ğ
‰G»©”ThªOrEqu®
 )

9520 
boŞ
 
sw­³dOrd”
 = 
çl£
;

9524 
r
 = 
	`CompeOv”lßdedDu®O³¿tÜ2
(
node
, "İCmp", 
lùx
, 
rùx
, 
ùx
, 
Œue
, 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ
, 
çl£
));

9525 ifĞ
r
 == 0 )

9528 
sw­³dOrd”
 = 
Œue
;

9529 
r
 = 
	`CompeOv”lßdedDu®O³¿tÜ2
(
node
, "İCmp", 
rùx
, 
lùx
, 
ùx
, 
Œue
, 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ
, 
çl£
));

9532 ifĞ
r
 == 1 )

9534 
	`R–—£TempÜ¬yV¬ŸbË
(
ùx
->
ty³
, &ùx->
bc
);

9536 
a
 = 
	`AÎoÿ‹V¬ŸbË
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
çl£
), 
Œue
);

9538 
ùx
->
bc
.
	`In¡rW_DW
(
asBC_CMPIi
, ctx->
ty³
.
¡ackOff£t
, 0);

9540 ifĞ
tok’
 =ğ
‰Equ®
 )

9541 
ùx
->
bc
.
	`In¡r
(
asBC_TZ
);

9542 ifĞ
tok’
 =ğ
‰NÙEqu®
 )

9543 
ùx
->
bc
.
	`In¡r
(
asBC_TNZ
);

9544 ifĞ(
tok’
 =ğ
‰LessThª
 && !
sw­³dOrd”
) ||

9545 (
tok’
 =ğ
‰G»©”Thª
 && 
sw­³dOrd”
) )

9546 
ùx
->
bc
.
	`In¡r
(
asBC_TS
);

9547 ifĞ(
tok’
 =ğ
‰LessThªOrEqu®
 && !
sw­³dOrd”
) ||

9548 (
tok’
 =ğ
‰G»©”ThªOrEqu®
 && 
sw­³dOrd”
) )

9549 
ùx
->
bc
.
	`In¡r
(
asBC_TNP
);

9550 ifĞ(
tok’
 =ğ
‰G»©”Thª
 && !
sw­³dOrd”
) ||

9551 (
tok’
 =ğ
‰LessThª
 && 
sw­³dOrd”
) )

9552 
ùx
->
bc
.
	`In¡r
(
asBC_TP
);

9553 ifĞ(
tok’
 =ğ
‰G»©”ThªOrEqu®
 && !
sw­³dOrd”
) ||

9554 (
tok’
 =ğ
‰LessThªOrEqu®
 && 
sw­³dOrd”
) )

9555 
ùx
->
bc
.
	`In¡r
(
asBC_TNS
);

9557 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_CpyRtoV4
, ()
a
);

9559 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
çl£
), 
a
, 
Œue
);

9562  
Œue
;

9564 ifĞ
r
 < 0 )

9567 
ùx
->
ty³
.
	`S‘CÚ¡ªtDW
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
Œue
),rue);

9568  
Œue
;

9573 cÚ¡ *
İ
 = 0, *
İ_r
 = 0;

9574  
tok’
 )

9576 
‰Plus
: 
İ
 = "İAdd"; 
İ_r
 = "opAdd_r"; ;

9577 
‰Mšus
: 
İ
 = "İSub"; 
İ_r
 = "opSub_r"; ;

9578 
‰Sr
: 
İ
 = "İMul"; 
İ_r
 = "opMul_r"; ;

9579 
‰SÏsh
: 
İ
 = "İDiv"; 
İ_r
 = "opDiv_r"; ;

9580 
‰P”ûÁ
: 
İ
 = "İMod"; 
İ_r
 = "opMod_r"; ;

9581 
‰B™Or
: 
İ
 = "İOr"; 
İ_r
 = "opOr_r"; ;

9582 
‰Amp
: 
İ
 = "İAnd"; 
İ_r
 = "opAnd_r"; ;

9583 
‰B™XÜ
: 
İ
 = "İXÜ"; 
İ_r
 = "opXor_r"; ;

9584 
‰B™ShiáLeá
: 
İ
 = "İShl"; 
İ_r
 = "opShl_r"; ;

9585 
‰B™ShiáRight
: 
İ
 = "İShr"; 
İ_r
 = "opShr_r"; ;

9586 
‰B™ShiáRightAr™h
: 
İ
 = "İUShr"; 
İ_r
 = "opUShr_r"; ;

9591 ifĞ
İ
 && 
İ_r
 )

9595 
r
 = 
	`CompeOv”lßdedDu®O³¿tÜ2
(
node
, 
İ
, 
lùx
, 
rùx
, 
ùx
);

9596 ifĞ
r
 == 0 )

9599 
r
 = 
	`CompeOv”lßdedDu®O³¿tÜ2
(
node
, 
İ_r
, 
rùx
, 
lùx
, 
ùx
);

9602 ifĞ
r
 == 1 )

9605  
Œue
;

9607 ifĞ
r
 < 0 )

9610 
ùx
->
ty³
.
	`S‘Dummy
();

9611  
Œue
;

9616 
İ
 = 0;

9617  
tok’
 )

9619 
‰Assignm’t
: 
İ
 = "opAssign"; ;

9620 
‰AddAssign
: 
İ
 = "opAddAssign"; ;

9621 
‰SubAssign
: 
İ
 = "opSubAssign"; ;

9622 
‰MulAssign
: 
İ
 = "opMulAssign"; ;

9623 
‰DivAssign
: 
İ
 = "opDivAssign"; ;

9624 
‰ModAssign
: 
İ
 = "opModAssign"; ;

9625 
‰OrAssign
: 
İ
 = "opOrAssign"; ;

9626 
‰AndAssign
: 
İ
 = "opAndAssign"; ;

9627 
‰XÜAssign
: 
İ
 = "opXorAssign"; ;

9628 
‰ShiáLeáAssign
: 
İ
 = "opShlAssign"; ;

9629 
‰ShiáRightLAssign
: 
İ
 = "opShrAssign"; ;

9630 
‰ShiáRightAAssign
: 
İ
 = "opUShrAssign"; ;

9633 ifĞ
İ
 )

9638 
r
 = 
	`CompeOv”lßdedDu®O³¿tÜ2
(
node
, 
İ
, 
lùx
, 
rùx
, 
ùx
);

9639 ifĞ
r
 == 1 )

9642  
Œue
;

9644 ifĞ
r
 < 0 )

9647 
ùx
->
ty³
.
	`S‘Dummy
();

9648  
Œue
;

9653  
çl£
;

9654 
	}
}

9659 
	gasCComp”
::
	$CompeOv”lßdedDu®O³¿tÜ2
(
asCSütNode
 *
node
, cÚ¡ *
m‘hodName
, 
asSEx´CÚ‹xt
 *
lùx
,‡sSEx´CÚ‹xˆ*
rùx
,‡sSEx´CÚ‹xˆ*
ùx
, 
boŞ
 
¥ecificR‘uº
, cÚ¡ 
asCD©aTy³
 &
»tuºTy³
)

9662 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsObjeù
() &&

9663 (!
lùx
->
ty³
.
isEx¶ic™HªdË
 ||

9664 
lùx
->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_ASHANDLE
) )

9667 
boŞ
 
isCÚ¡
 = 
çl£
;

9668 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsObjeùHªdË
() )

9669 
isCÚ¡
 = 
lùx
->
ty³
.
d©aTy³
.
	`IsHªdËToCÚ¡
();

9671 
isCÚ¡
 = 
lùx
->
ty³
.
d©aTy³
.
	`IsR—dOÆy
();

9673 
asCA¼ay
<> 
funcs
;

9674 
asCObjeùTy³
 *
Ù
 = 
lùx
->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
();

9675  
asUINT
 
n
 = 0;‚ < 
Ù
->
m‘hods
.
	`G‘L’gth
();‚++ )

9677 
asCSütFunùiÚ
 *
func
 = 
’gše
->
sütFunùiÚs
[
Ù
->
m‘hods
[
n
]];

9678 ifĞ
func
->
Çme
 =ğ
m‘hodName
 &&

9679 (!
¥ecificR‘uº
 || 
func
->
»tuºTy³
 ==„eturnType) &&

9680 
func
->
·¿m‘”Ty³s
.
	`G‘L’gth
() == 1 &&

9681 (!
isCÚ¡
 || 
func
->
isR—dOÆy
) )

9684 ifĞ
bud”
->
moduË
->
acûssMask
 & 
func
->accessMask )

9686 
funcs
.
	`PushLa¡
(
func
->
id
);

9692 
asCA¼ay
<> 
İs
;

9693 
	`M©chArgum’t
(
funcs
, 
İs
, &
rùx
->
ty³
, 0);

9696 ifĞ!
isCÚ¡
 )

9697 
	`F‹rCÚ¡
(
İs
);

9700 ifĞ
İs
.
	`G‘L’gth
() == 1 )

9703 
	`ProûssPrİ”tyG‘AcûssÜ
(
lùx
, 
node
);

9706 
asCTy³Info
 
objTy³
 = 
lùx
->
ty³
;

9707 
asCA¼ay
<
asSEx´CÚ‹xt
 *> 
¬gs
;

9708 
¬gs
.
	`PushLa¡
(
rùx
);

9709 
	`M”geEx´By‹code
(
ùx
, 
lùx
);

9710 
ùx
->
ty³
 = 
lùx
->type;

9711 
	`MakeFunùiÚC®l
(
ùx
, 
İs
[0], 
objTy³
.
d©aTy³
.
	`G‘ObjeùTy³
(), 
¬gs
, 
node
);

9715 ifĞ!
objTy³
.
isTempÜ¬y
 ||

9716 !(
ùx
->
ty³
.
d©aTy³
.
	`IsReã»nû
(è|| (ùx->ty³.d©aTy³.
	`IsObjeù
(è&& !ùx->ty³.d©aTy³.
	`IsObjeùHªdË
())) ||

9717 
ùx
->
ty³
.
isV¬ŸbË
 )

9721 
	`R–—£TempÜ¬yV¬ŸbË
(
objTy³
, &
ùx
->
bc
);

9727 ifĞ
İs
.
	`G‘L’gth
() > 1 )

9729 
	`E¼Ü
(
TXT_MORE_THAN_ONE_MATCHING_OP
, 
node
);

9730 
	`PrštM©chšgFuncs
(
İs
, 
node
);

9732 
ùx
->
ty³
.
	`S‘Dummy
();

9741 
	}
}

9743 
	gasCComp”
::
MakeFunùiÚC®l
(
asSEx´CÚ‹xt
 *
ùx
, 
funcId
, 
asCObjeùTy³
 *
objeùTy³
, 
asCA¼ay
<asSEx´CÚ‹xt*> &
¬gs
, 
asCSütNode
 * , 
boŞ
 
u£V¬ŸbË
, 
¡ackOff£t
, 
funcPŒV¬
)

9745 ifĞ
	gobjeùTy³
 )

9747 
D”eã»nû
(
ùx
, 
Œue
);

9766 
asCBy‹Code
 
objBC
(
’gše
);

9767 
	gobjBC
.
AddCode
(&
ùx
->
bc
);

9769 
P»·»FunùiÚC®l
(
funcId
, &
ùx
->
bc
, 
¬gs
);

9773 
asUINT
 
	gn
;

9774  
	gn
 = 0;‚ < 
	g¬gs
.
G‘L’gth
();‚++ )

9776 ifĞ
	g¬gs
[
n
]->
	gty³
.
	gisTempÜ¬y
 && 
	gobjBC
.
IsV¬U£d
(
¬gs
[n]->
ty³
.
¡ackOff£t
) )

9779 
R–—£TempÜ¬yV¬ŸbË
(
¬gs
[
n
]->
ty³
, 0);

9781 
asCD©aTy³
 
	gdt
 = 
¬gs
[
n
]->
ty³
.
d©aTy³
;

9782 
	gdt
.
MakeReã»nû
(
çl£
);

9784 
	gl
 = (
»£rvedV¬ŸbËs
.
G‘L’gth
());

9785 
	gobjBC
.
G‘V¬sU£d
(
»£rvedV¬ŸbËs
);

9786 
	gùx
->
	gbc
.
G‘V¬sU£d
(
»£rvedV¬ŸbËs
);

9787 
	gÃwOff£t
 = 
AÎoÿ‹V¬ŸbË
(
dt
, 
Œue
, 
IsV¬ŸbËOnH—p
(
¬gs
[
n
]->
ty³
.
¡ackOff£t
));

9788 
	g»£rvedV¬ŸbËs
.
S‘L’gth
(
l
);

9790 
asASSERT
Ğ
IsV¬ŸbËOnH—p
(
¬gs
[
n
]->
ty³
.
¡ackOff£t
è=ğIsV¬ŸbËOnH—p(
ÃwOff£t
) );

9792 
	gùx
->
	gbc
.
ExchªgeV¬
(
¬gs
[
n
]->
ty³
.
¡ackOff£t
, 
ÃwOff£t
);

9793 
	g¬gs
[
n
]->
	gty³
.
	g¡ackOff£t
 = ()
ÃwOff£t
;

9794 
	g¬gs
[
n
]->
	gty³
.
	gisTempÜ¬y
 = 
Œue
;

9795 
	g¬gs
[
n
]->
	gty³
.
	gisV¬ŸbË
 = 
Œue
;

9801 
asCSütFunùiÚ
 *
	gfunc
 = 
bud”
->
G‘FunùiÚDesütiÚ
(
funcId
);

9802 ifĞ
	gfunc
->
DÛsR‘uºOnSck
() )

9804 
asASSERT
(!
u£V¬ŸbË
);

9806 
	gu£V¬ŸbË
 = 
Œue
;

9807 
	g¡ackOff£t
 = 
AÎoÿ‹V¬ŸbË
(
func
->
»tuºTy³
, 
Œue
);

9808 
	gùx
->
	gbc
.
In¡rSHORT
(
asBC_PSF
, (
¡ackOff£t
));

9811 
	gùx
->
	gbc
.
AddCode
(&
objBC
);

9813 
MoveArgsToSck
(
funcId
, &
ùx
->
bc
, 
¬gs
, 
objeùTy³
 ? 
Œue
 : 
çl£
);

9815 
P”fÜmFunùiÚC®l
(
funcId
, 
ùx
, 
çl£
, &
¬gs
, 0, 
u£V¬ŸbË
, 
¡ackOff£t
, 
funcPŒV¬
);

9818 
	gasCComp”
::
	$CompeO³¿tÜ
(
asCSütNode
 *
node
, 
asSEx´CÚ‹xt
 *
lùx
,‡sSEx´CÚ‹xˆ*
rùx
,‡sSEx´CÚ‹xˆ*
ùx
)

9820 
	`IsV¬ŸbËIn™Ÿlized
(&
lùx
->
ty³
, 
node
);

9821 
	`IsV¬ŸbËIn™Ÿlized
(&
rùx
->
ty³
, 
node
);

9823 ifĞ
lùx
->
ty³
.
isEx¶ic™HªdË
 || 
rùx
->type.isExplicitHandle ||

9824 
node
->
tok’Ty³
 =ğ
‰Is
 ||‚ode->tok’Ty³ =ğ
‰NÙIs
 )

9826 
	`CompeO³¿tÜOnHªdËs
(
node
, 
lùx
, 
rùx
, 
ùx
);

9832 ifĞ
	`CompeOv”lßdedDu®O³¿tÜ
(
node
, 
lùx
, 
rùx
, 
ùx
) )

9836 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsObjeù
(è&& 
rùx
->type.dataType.IsObject() )

9838 
asCSŒšg
 
¡r
;

9839 
¡r
.
	`FÜm©
(
TXT_NO_MATCHING_OP_FOUND_FOR_TYPES_s_AND_s
, 
lùx
->
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
(), 
rùx
->type.dataType.Format().AddressOf());

9840 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

9841 
ùx
->
ty³
.
	`S‘Dummy
();

9846 
	`ProûssPrİ”tyG‘AcûssÜ
(
lùx
, 
node
);

9847 
	`ProûssPrİ”tyG‘AcûssÜ
(
rùx
, 
node
);

9850 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsReã»nû
(èè
	`CÚv”tToV¬ŸbËNÙIn
Öùx, 
rùx
);

9851 ifĞ
rùx
->
ty³
.
d©aTy³
.
	`IsReã»nû
(èè
	`CÚv”tToV¬ŸbËNÙIn
Ôùx, 
lùx
);

9854 ifĞ
lùx
->
ty³
.
isTempÜ¬y
 && 
rùx
->
bc
.
	`IsV¬U£d
Öùx->ty³.
¡ackOff£t
) )

9856 
off£t
 = 
	`AÎoÿ‹V¬ŸbËNÙIn
(
lùx
->
ty³
.
d©aTy³
, 
Œue
, 
çl£
, 
rùx
);

9857 
rùx
->
bc
.
	`ExchªgeV¬
(
lùx
->
ty³
.
¡ackOff£t
, 
off£t
);

9858 
	`R–—£TempÜ¬yV¬ŸbË
(
off£t
, 0);

9863 
İ
 = 
node
->
tok’Ty³
;

9864 ifĞ
İ
 =ğ
‰Plus
 || o°=ğ
‰AddAssign
 ||

9865 
İ
 =ğ
‰Mšus
 || o°=ğ
‰SubAssign
 ||

9866 
İ
 =ğ
‰Sr
 || o°=ğ
‰MulAssign
 ||

9867 
İ
 =ğ
‰SÏsh
 || o°=ğ
‰DivAssign
 ||

9868 
İ
 =ğ
‰P”ûÁ
 || o°=ğ
‰ModAssign
 )

9870 
	`CompeM©hO³¿tÜ
(
node
, 
lùx
, 
rùx
, 
ùx
);

9876 ifĞ
İ
 =ğ
‰Amp
 || o°=ğ
‰AndAssign
 ||

9877 
İ
 =ğ
‰B™Or
 || o°=ğ
‰OrAssign
 ||

9878 
İ
 =ğ
‰B™XÜ
 || o°=ğ
‰XÜAssign
 ||

9879 
İ
 =ğ
‰B™ShiáLeá
 || o°=ğ
‰ShiáLeáAssign
 ||

9880 
İ
 =ğ
‰B™ShiáRight
 || o°=ğ
‰ShiáRightLAssign
 ||

9881 
İ
 =ğ
‰B™ShiáRightAr™h
 || o°=ğ
‰ShiáRightAAssign
 )

9883 
	`CompeB™wi£O³¿tÜ
(
node
, 
lùx
, 
rùx
, 
ùx
);

9889 ifĞ
İ
 =ğ
‰Equ®
 || o°=ğ
‰NÙEqu®
 ||

9890 
İ
 =ğ
‰LessThª
 || o°=ğ
‰LessThªOrEqu®
 ||

9891 
İ
 =ğ
‰G»©”Thª
 || o°=ğ
‰G»©”ThªOrEqu®
 )

9893 
	`CompeCom·risÚO³¿tÜ
(
node
, 
lùx
, 
rùx
, 
ùx
);

9899 ifĞ
İ
 =ğ
‰And
 || o°=ğ
‰Or
 || o°=ğ
‰XÜ
 )

9901 
	`CompeBoŞ—nO³¿tÜ
(
node
, 
lùx
, 
rùx
, 
ùx
);

9906 
	`asASSERT
(
çl£
);

9908 
	}
}

9910 
	gasCComp”
::
	$CÚv”tToTempV¬ŸbËNÙIn
(
asSEx´CÚ‹xt
 *
ùx
,‡sSEx´CÚ‹xˆ*
exşude
)

9912 
l
 = (
»£rvedV¬ŸbËs
.
	`G‘L’gth
());

9913 ifĞ
exşude
 )ƒxşude->
bc
.
	`G‘V¬sU£d
(
»£rvedV¬ŸbËs
);

9914 
	`CÚv”tToTempV¬ŸbË
(
ùx
);

9915 
»£rvedV¬ŸbËs
.
	`S‘L’gth
(
l
);

9916 
	}
}

9918 
	gasCComp”
::
	$CÚv”tToTempV¬ŸbË
(
asSEx´CÚ‹xt
 *
ùx
)

9921 
	`asASSERT
Ğ
ùx
->
ty³
.
d©aTy³
.
	`IsPrim™ive
(è|| ctx->ty³.d©aTy³.
	`IsNuÎHªdË
() );

9923 
	`CÚv”tToV¬ŸbË
(
ùx
);

9924 ifĞ!
ùx
->
ty³
.
isTempÜ¬y
 )

9926 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`IsPrim™ive
() )

9929 
off£t
 = 
	`AÎoÿ‹V¬ŸbË
(
ùx
->
ty³
.
d©aTy³
, 
Œue
);

9930 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyDWÜds
() == 1 )

9931 
ùx
->
bc
.
	`In¡rW_W
(
asBC_CpyVtoV4
, 
off£t
, ctx->
ty³
.
¡ackOff£t
);

9933 
ùx
->
bc
.
	`In¡rW_W
(
asBC_CpyVtoV8
, 
off£t
, ctx->
ty³
.
¡ackOff£t
);

9934 
ùx
->
ty³
.
	`S‘V¬ŸbË
(ùx->ty³.
d©aTy³
, 
off£t
, 
Œue
);

9939 
	`asASSERT
(
çl£
);

9942 
	}
}

9944 
	gasCComp”
::
	$CÚv”tToV¬ŸbË
(
asSEx´CÚ‹xt
 *
ùx
)

9947 
	`asASSERT
(
ùx
->
´İ”ty_g‘
 =ğ0 && ctx->
´İ”ty_£t
 == 0);

9949 
off£t
;

9950 ifĞ!
ùx
->
ty³
.
isV¬ŸbË
 &&

9951 (
ùx
->
ty³
.
d©aTy³
.
	`IsObjeùHªdË
() ||

9952 (
ùx
->
ty³
.
d©aTy³
.
	`IsObjeù
(è&& ctx->ty³.d©aTy³.
	`SuµÜtHªdËs
())) )

9954 
off£t
 = 
	`AÎoÿ‹V¬ŸbË
(
ùx
->
ty³
.
d©aTy³
, 
Œue
);

9955 ifĞ
ùx
->
ty³
.
	`IsNuÎCÚ¡ªt
() )

9957 ifĞ
ùx
->
bc
.
	`G‘La¡In¡r
(è=ğ
asBC_PshNuÎ
 )

9958 
ùx
->
bc
.
	`In¡r
(
asBC_PİPŒ
);

9959 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_CÌVPŒ
, ()
off£t
);

9964 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_PSF
, ()
off£t
);

9965 
ùx
->
bc
.
	`In¡rPTR
(
asBC_REFCPY
, ctx->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
());

9966 
ùx
->
bc
.
	`In¡r
(
asBC_PİPŒ
);

9969 
	`R–—£TempÜ¬yV¬ŸbË
(
ùx
->
ty³
, &ùx->
bc
);

9970 
ùx
->
ty³
.
	`S‘V¬ŸbË
(ùx->ty³.
d©aTy³
, 
off£t
, 
Œue
);

9971 
ùx
->
ty³
.
d©aTy³
.
	`MakeHªdË
(
Œue
);

9973 ifĞ(!
ùx
->
ty³
.
isV¬ŸbË
 || ctx->ty³.
d©aTy³
.
	`IsReã»nû
()) &&

9974 
ùx
->
ty³
.
d©aTy³
.
	`IsPrim™ive
() )

9976 ifĞ
ùx
->
ty³
.
isCÚ¡ªt
 )

9978 
off£t
 = 
	`AÎoÿ‹V¬ŸbË
(
ùx
->
ty³
.
d©aTy³
, 
Œue
);

9979 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 1 )

9980 
ùx
->
bc
.
	`In¡rSHORT_B
(
asBC_S‘V1
, ()
off£t
, ctx->
ty³
.
by‹V®ue
);

9981 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 2 )

9982 
ùx
->
bc
.
	`In¡rSHORT_W
(
asBC_S‘V2
, ()
off£t
, ctx->
ty³
.
wÜdV®ue
);

9983 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 4 )

9984 
ùx
->
bc
.
	`In¡rSHORT_DW
(
asBC_S‘V4
, ()
off£t
, ctx->
ty³
.
dwÜdV®ue
);

9986 
ùx
->
bc
.
	`In¡rSHORT_QW
(
asBC_S‘V8
, ()
off£t
, ctx->
ty³
.
qwÜdV®ue
);

9988 
ùx
->
ty³
.
	`S‘V¬ŸbË
(ùx->ty³.
d©aTy³
, 
off£t
, 
Œue
);

9993 
	`asASSERT
(
ùx
->
ty³
.
d©aTy³
.
	`IsPrim™ive
());

9994 
	`asASSERT
(
ùx
->
ty³
.
d©aTy³
.
	`IsReã»nû
());

9996 
ùx
->
ty³
.
d©aTy³
.
	`MakeReã»nû
(
çl£
);

9997 
off£t
 = 
	`AÎoÿ‹V¬ŸbË
(
ùx
->
ty³
.
d©aTy³
, 
Œue
);

10000 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 1 )

10001 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_RDR1
, ()
off£t
);

10002 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() == 2 )

10003 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_RDR2
, ()
off£t
);

10004 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyDWÜds
() == 1 )

10005 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_RDR4
, ()
off£t
);

10007 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_RDR8
, ()
off£t
);

10010 
	`R–—£TempÜ¬yV¬ŸbË
(
ùx
->
ty³
, &ùx->
bc
);

10011 
ùx
->
ty³
.
	`S‘V¬ŸbË
(ùx->ty³.
d©aTy³
, 
off£t
, 
Œue
);

10013 
	}
}

10015 
	gasCComp”
::
	$CÚv”tToV¬ŸbËNÙIn
(
asSEx´CÚ‹xt
 *
ùx
,‡sSEx´CÚ‹xˆ*
exşude
)

10017 
l
 = (
»£rvedV¬ŸbËs
.
	`G‘L’gth
());

10018 ifĞ
exşude
 )ƒxşude->
bc
.
	`G‘V¬sU£d
(
»£rvedV¬ŸbËs
);

10019 
	`CÚv”tToV¬ŸbË
(
ùx
);

10020 
»£rvedV¬ŸbËs
.
	`S‘L’gth
(
l
);

10021 
	}
}

10024 
	gasCComp”
::
	$CompeM©hO³¿tÜ
(
asCSütNode
 *
node
, 
asSEx´CÚ‹xt
 *
lùx
,‡sSEx´CÚ‹xˆ*
rùx
,‡sSEx´CÚ‹xˆ*
ùx
)

10029 
asCD©aTy³
 
to
;

10030 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsDoubËTy³
(è|| 
rùx
->type.dataType.IsDoubleType() )

10031 
to
.
	`S‘Tok’Ty³
(
‰DoubË
);

10032 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsFlßtTy³
(è|| 
rùx
->type.dataType.IsFloatType() )

10033 
to
.
	`S‘Tok’Ty³
(
‰Flßt
);

10034 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyDWÜds
(è=ğ2 || 
rùx
->type.dataType.GetSizeInMemoryDWords() == 2 )

10036 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
(è|| 
rùx
->type.dataType.IsIntegerType() )

10037 
to
.
	`S‘Tok’Ty³
(
‰IÁ64
);

10038 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
(è|| 
rùx
->type.dataType.IsUnsignedType() )

10039 
to
.
	`S‘Tok’Ty³
(
‰UIÁ64
);

10043 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
(è|| 
rùx
->type.dataType.IsIntegerType() ||

10044 
lùx
->
ty³
.
d©aTy³
.
	`IsEnumTy³
(è|| 
rùx
->type.dataType.IsEnumType() )

10045 
to
.
	`S‘Tok’Ty³
(
‰IÁ
);

10046 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
(è|| 
rùx
->type.dataType.IsUnsignedType() )

10047 
to
.
	`S‘Tok’Ty³
(
‰UIÁ
);

10051 ifĞ(
lùx
->
ty³
.
isCÚ¡ªt
 &&†ùx->ty³.
d©aTy³
.
	`IsDoubËTy³
(è&& !
rùx
->ty³.isCÚ¡ªˆ&&„ùx->ty³.d©aTy³.
	`IsFlßtTy³
()) ||

10052 (
rùx
->
ty³
.
isCÚ¡ªt
 &&„ùx->ty³.
d©aTy³
.
	`IsDoubËTy³
(è&& !
lùx
->ty³.isCÚ¡ªˆ&&†ùx->ty³.d©aTy³.
	`IsFlßtTy³
()) )

10053 
to
.
	`S‘Tok’Ty³
(
‰Flßt
);

10056 
l
 = (
»£rvedV¬ŸbËs
.
	`G‘L’gth
());

10057 
rùx
->
bc
.
	`G‘V¬sU£d
(
»£rvedV¬ŸbËs
);

10058 
lùx
->
bc
.
	`G‘V¬sU£d
(
»£rvedV¬ŸbËs
);

10060 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsReã»nû
() )

10061 
	`CÚv”tToV¬ŸbË
(
lùx
);

10062 ifĞ
rùx
->
ty³
.
d©aTy³
.
	`IsReã»nû
() )

10063 
	`CÚv”tToV¬ŸbË
(
rùx
);

10065 
	`Im¶ic™CÚv”siÚ
(
lùx
, 
to
, 
node
, 
asIC_IMPLICIT_CONV
, 
Œue
);

10066 
	`Im¶ic™CÚv”siÚ
(
rùx
, 
to
, 
node
, 
asIC_IMPLICIT_CONV
, 
Œue
);

10067 
»£rvedV¬ŸbËs
.
	`S‘L’gth
(
l
);

10070 ifĞ!
lùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
() &&

10071 !
lùx
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
() &&

10072 !
lùx
->
ty³
.
d©aTy³
.
	`IsFlßtTy³
() &&

10073 !
lùx
->
ty³
.
d©aTy³
.
	`IsDoubËTy³
() )

10075 
asCSŒšg
 
¡r
;

10076 
¡r
.
	`FÜm©
(
TXT_NO_CONVERSION_s_TO_MATH_TYPE
, 
lùx
->
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
());

10077 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

10079 
ùx
->
ty³
.
	`S‘Dummy
();

10083 ifĞ!
rùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
() &&

10084 !
rùx
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
() &&

10085 !
rùx
->
ty³
.
d©aTy³
.
	`IsFlßtTy³
() &&

10086 !
rùx
->
ty³
.
d©aTy³
.
	`IsDoubËTy³
() )

10088 
asCSŒšg
 
¡r
;

10089 
¡r
.
	`FÜm©
(
TXT_NO_CONVERSION_s_TO_MATH_TYPE
, 
rùx
->
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
());

10090 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

10092 
ùx
->
ty³
.
	`S‘Dummy
();

10096 
boŞ
 
isCÚ¡ªt
 = 
lùx
->
ty³
.isCÚ¡ªˆ&& 
rùx
->type.isConstant;

10099 
İ
 = 
node
->
tok’Ty³
;

10100 ifĞ
rùx
->
ty³
.
isCÚ¡ªt
 &&„ùx->ty³.
qwÜdV®ue
 == 0 &&

10101 (
İ
 =ğ
‰SÏsh
 || o°=ğ
‰DivAssign
 ||

10102 
İ
 =ğ
‰P”ûÁ
 || o°=ğ
‰ModAssign
) )

10104 
	`E¼Ü
(
TXT_DIVIDE_BY_ZERO
, 
node
);

10107 ifĞ!
isCÚ¡ªt
 )

10109 
	`CÚv”tToV¬ŸbËNÙIn
(
lùx
, 
rùx
);

10110 
	`CÚv”tToV¬ŸbËNÙIn
(
rùx
, 
lùx
);

10111 
	`R–—£TempÜ¬yV¬ŸbË
(
lùx
->
ty³
, &lùx->
bc
);

10112 
	`R–—£TempÜ¬yV¬ŸbË
(
rùx
->
ty³
, &rùx->
bc
);

10114 ifĞ
İ
 =ğ
‰AddAssign
 || o°=ğ
‰SubAssign
 ||

10115 
İ
 =ğ
‰MulAssign
 || o°=ğ
‰DivAssign
 ||

10116 
İ
 =ğ
‰ModAssign
 )

10119 
	`M”geEx´By‹code
(
ùx
, 
rùx
);

10120 
	`M”geEx´By‹code
(
ùx
, 
lùx
);

10124 
	`M”geEx´By‹code
(
ùx
, 
lùx
);

10125 
	`M”geEx´By‹code
(
ùx
, 
rùx
);

10127 
	`ProûssDeã¼edP¬ams
(
ùx
);

10129 
asEBCIn¡r
 
š¡ruùiÚ
 = 
asBC_ADDi
;

10130 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
() ||

10131 
lùx
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
() )

10133 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyDWÜds
() == 1 )

10135 ifĞ
İ
 =ğ
‰Plus
 || o°=ğ
‰AddAssign
 )

10136 
š¡ruùiÚ
 = 
asBC_ADDi
;

10137 ifĞ
İ
 =ğ
‰Mšus
 || o°=ğ
‰SubAssign
 )

10138 
š¡ruùiÚ
 = 
asBC_SUBi
;

10139 ifĞ
İ
 =ğ
‰Sr
 || o°=ğ
‰MulAssign
 )

10140 
š¡ruùiÚ
 = 
asBC_MULi
;

10141 ifĞ
İ
 =ğ
‰SÏsh
 || o°=ğ
‰DivAssign
 )

10143 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
() )

10144 
š¡ruùiÚ
 = 
asBC_DIVi
;

10146 
š¡ruùiÚ
 = 
asBC_DIVu
;

10148 ifĞ
İ
 =ğ
‰P”ûÁ
 || o°=ğ
‰ModAssign
 )

10150 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
() )

10151 
š¡ruùiÚ
 = 
asBC_MODi
;

10153 
š¡ruùiÚ
 = 
asBC_MODu
;

10158 ifĞ
İ
 =ğ
‰Plus
 || o°=ğ
‰AddAssign
 )

10159 
š¡ruùiÚ
 = 
asBC_ADDi64
;

10160 ifĞ
İ
 =ğ
‰Mšus
 || o°=ğ
‰SubAssign
 )

10161 
š¡ruùiÚ
 = 
asBC_SUBi64
;

10162 ifĞ
İ
 =ğ
‰Sr
 || o°=ğ
‰MulAssign
 )

10163 
š¡ruùiÚ
 = 
asBC_MULi64
;

10164 ifĞ
İ
 =ğ
‰SÏsh
 || o°=ğ
‰DivAssign
 )

10166 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
() )

10167 
š¡ruùiÚ
 = 
asBC_DIVi64
;

10169 
š¡ruùiÚ
 = 
asBC_DIVu64
;

10171 ifĞ
İ
 =ğ
‰P”ûÁ
 || o°=ğ
‰ModAssign
 )

10173 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
() )

10174 
š¡ruùiÚ
 = 
asBC_MODi64
;

10176 
š¡ruùiÚ
 = 
asBC_MODu64
;

10180 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsFlßtTy³
() )

10182 ifĞ
İ
 =ğ
‰Plus
 || o°=ğ
‰AddAssign
 )

10183 
š¡ruùiÚ
 = 
asBC_ADDf
;

10184 ifĞ
İ
 =ğ
‰Mšus
 || o°=ğ
‰SubAssign
 )

10185 
š¡ruùiÚ
 = 
asBC_SUBf
;

10186 ifĞ
İ
 =ğ
‰Sr
 || o°=ğ
‰MulAssign
 )

10187 
š¡ruùiÚ
 = 
asBC_MULf
;

10188 ifĞ
İ
 =ğ
‰SÏsh
 || o°=ğ
‰DivAssign
 )

10189 
š¡ruùiÚ
 = 
asBC_DIVf
;

10190 ifĞ
İ
 =ğ
‰P”ûÁ
 || o°=ğ
‰ModAssign
 )

10191 
š¡ruùiÚ
 = 
asBC_MODf
;

10193 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsDoubËTy³
() )

10195 ifĞ
İ
 =ğ
‰Plus
 || o°=ğ
‰AddAssign
 )

10196 
š¡ruùiÚ
 = 
asBC_ADDd
;

10197 ifĞ
İ
 =ğ
‰Mšus
 || o°=ğ
‰SubAssign
 )

10198 
š¡ruùiÚ
 = 
asBC_SUBd
;

10199 ifĞ
İ
 =ğ
‰Sr
 || o°=ğ
‰MulAssign
 )

10200 
š¡ruùiÚ
 = 
asBC_MULd
;

10201 ifĞ
İ
 =ğ
‰SÏsh
 || o°=ğ
‰DivAssign
 )

10202 
š¡ruùiÚ
 = 
asBC_DIVd
;

10203 ifĞ
İ
 =ğ
‰P”ûÁ
 || o°=ğ
‰ModAssign
 )

10204 
š¡ruùiÚ
 = 
asBC_MODd
;

10209 
	`asASSERT
(
çl£
);

10213 
a
 = 
	`AÎoÿ‹V¬ŸbË
(
lùx
->
ty³
.
d©aTy³
, 
Œue
);

10214 
b
 = 
lùx
->
ty³
.
¡ackOff£t
;

10215 
c
 = 
rùx
->
ty³
.
¡ackOff£t
;

10217 
ùx
->
bc
.
	`In¡rW_W_W
(
š¡ruùiÚ
, 
a
, 
b
, 
c
);

10219 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
lùx
->ty³.
d©aTy³
, 
a
, 
Œue
);

10224 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
() ||

10225 
lùx
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
() )

10227 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyDWÜds
() == 1 )

10229 
v
 = 0;

10230 ifĞ
İ
 =ğ
‰Plus
 )

10231 
v
 = 
lùx
->
ty³
.
štV®ue
 + 
rùx
->type.intValue;

10232 ifĞ
İ
 =ğ
‰Mšus
 )

10233 
v
 = 
lùx
->
ty³
.
štV®ue
 - 
rùx
->type.intValue;

10234 ifĞ
İ
 =ğ
‰Sr
 )

10235 
v
 = 
lùx
->
ty³
.
štV®ue
 * 
rùx
->type.intValue;

10236 ifĞ
İ
 =ğ
‰SÏsh
 )

10238 ifĞ
rùx
->
ty³
.
štV®ue
 == 0 )

10239 
v
 = 0;

10241 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
() )

10242 
v
 = 
lùx
->
ty³
.
štV®ue
 / 
rùx
->type.intValue;

10244 
v
 = 
lùx
->
ty³
.
dwÜdV®ue
 / 
rùx
->type.dwordValue;

10246 ifĞ
İ
 =ğ
‰P”ûÁ
 )

10248 ifĞ
rùx
->
ty³
.
štV®ue
 == 0 )

10249 
v
 = 0;

10251 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
() )

10252 
v
 = 
lùx
->
ty³
.
štV®ue
 % 
rùx
->type.intValue;

10254 
v
 = 
lùx
->
ty³
.
dwÜdV®ue
 % 
rùx
->type.dwordValue;

10257 
ùx
->
ty³
.
	`S‘CÚ¡ªtDW
(
lùx
->ty³.
d©aTy³
, 
v
);

10260 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`G‘Tok’Ty³
(è=ğ
‰UIÁ
 && 
İ
 =ğ
‰Mšus
 &&†ùx->ty³.
štV®ue
 < 
rùx
->type.intValue )

10261 
ùx
->
ty³
.
d©aTy³
.
	`S‘Tok’Ty³
(
‰IÁ
);

10265 
asQWORD
 
v
 = 0;

10266 ifĞ
İ
 =ğ
‰Plus
 )

10267 
v
 = 
lùx
->
ty³
.
qwÜdV®ue
 + 
rùx
->type.qwordValue;

10268 ifĞ
İ
 =ğ
‰Mšus
 )

10269 
v
 = 
lùx
->
ty³
.
qwÜdV®ue
 - 
rùx
->type.qwordValue;

10270 ifĞ
İ
 =ğ
‰Sr
 )

10271 
v
 = 
lùx
->
ty³
.
qwÜdV®ue
 * 
rùx
->type.qwordValue;

10272 ifĞ
İ
 =ğ
‰SÏsh
 )

10274 ifĞ
rùx
->
ty³
.
qwÜdV®ue
 == 0 )

10275 
v
 = 0;

10277 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
() )

10278 
v
 = 
	`asINT64
(
lùx
->
ty³
.
qwÜdV®ue
è/‡sINT64(
rùx
->type.qwordValue);

10280 
v
 = 
lùx
->
ty³
.
qwÜdV®ue
 / 
rùx
->type.qwordValue;

10282 ifĞ
İ
 =ğ
‰P”ûÁ
 )

10284 ifĞ
rùx
->
ty³
.
qwÜdV®ue
 == 0 )

10285 
v
 = 0;

10287 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
() )

10288 
v
 = 
	`asINT64
(
lùx
->
ty³
.
qwÜdV®ue
è%‡sINT64(
rùx
->type.qwordValue);

10290 
v
 = 
lùx
->
ty³
.
qwÜdV®ue
 % 
rùx
->type.qwordValue;

10293 
ùx
->
ty³
.
	`S‘CÚ¡ªtQW
(
lùx
->ty³.
d©aTy³
, 
v
);

10296 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`G‘Tok’Ty³
(è=ğ
‰UIÁ64
 && 
İ
 =ğ
‰Mšus
 &&†ùx->ty³.
qwÜdV®ue
 < 
rùx
->type.qwordValue )

10297 
ùx
->
ty³
.
d©aTy³
.
	`S‘Tok’Ty³
(
‰IÁ64
);

10300 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsFlßtTy³
() )

10302 
v
 = 0.0f;

10303 ifĞ
İ
 =ğ
‰Plus
 )

10304 
v
 = 
lùx
->
ty³
.
æßtV®ue
 + 
rùx
->type.floatValue;

10305 ifĞ
İ
 =ğ
‰Mšus
 )

10306 
v
 = 
lùx
->
ty³
.
æßtV®ue
 - 
rùx
->type.floatValue;

10307 ifĞ
İ
 =ğ
‰Sr
 )

10308 
v
 = 
lùx
->
ty³
.
æßtV®ue
 * 
rùx
->type.floatValue;

10309 ifĞ
İ
 =ğ
‰SÏsh
 )

10311 ifĞ
rùx
->
ty³
.
æßtV®ue
 == 0 )

10312 
v
 = 0;

10314 
v
 = 
lùx
->
ty³
.
æßtV®ue
 / 
rùx
->type.floatValue;

10316 ifĞ
İ
 =ğ
‰P”ûÁ
 )

10318 ifĞ
rùx
->
ty³
.
æßtV®ue
 == 0 )

10319 
v
 = 0;

10321 
v
 = 
	`fmodf
(
lùx
->
ty³
.
æßtV®ue
, 
rùx
->type.floatValue);

10324 
ùx
->
ty³
.
	`S‘CÚ¡ªtF
(
lùx
->ty³.
d©aTy³
, 
v
);

10326 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsDoubËTy³
() )

10328 
v
 = 0.0;

10329 ifĞ
İ
 =ğ
‰Plus
 )

10330 
v
 = 
lùx
->
ty³
.
doubËV®ue
 + 
rùx
->type.doubleValue;

10331 ifĞ
İ
 =ğ
‰Mšus
 )

10332 
v
 = 
lùx
->
ty³
.
doubËV®ue
 - 
rùx
->type.doubleValue;

10333 ifĞ
İ
 =ğ
‰Sr
 )

10334 
v
 = 
lùx
->
ty³
.
doubËV®ue
 * 
rùx
->type.doubleValue;

10335 ifĞ
İ
 =ğ
‰SÏsh
 )

10337 ifĞ
rùx
->
ty³
.
doubËV®ue
 == 0 )

10338 
v
 = 0;

10340 
v
 = 
lùx
->
ty³
.
doubËV®ue
 / 
rùx
->type.doubleValue;

10342 ifĞ
İ
 =ğ
‰P”ûÁ
 )

10344 ifĞ
rùx
->
ty³
.
doubËV®ue
 == 0 )

10345 
v
 = 0;

10347 
v
 = 
	`fmod
(
lùx
->
ty³
.
doubËV®ue
, 
rùx
->type.doubleValue);

10350 
ùx
->
ty³
.
	`S‘CÚ¡ªtD
(
lùx
->ty³.
d©aTy³
, 
v
);

10355 
	`asASSERT
(
çl£
);

10358 
	}
}

10360 
	gasCComp”
::
	$CompeB™wi£O³¿tÜ
(
asCSütNode
 *
node
, 
asSEx´CÚ‹xt
 *
lùx
,‡sSEx´CÚ‹xˆ*
rùx
,‡sSEx´CÚ‹xˆ*
ùx
)

10364 
İ
 = 
node
->
tok’Ty³
;

10365 ifĞ
İ
 =ğ
‰Amp
 || o°=ğ
‰AndAssign
 ||

10366 
İ
 =ğ
‰B™Or
 || o°=ğ
‰OrAssign
 ||

10367 
İ
 =ğ
‰B™XÜ
 || o°=ğ
‰XÜAssign
 )

10370 
asCD©aTy³
 
to
;

10371 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyDWÜds
() == 2 ||

10372 
rùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyDWÜds
() == 2 )

10373 
to
.
	`S‘Tok’Ty³
(
‰UIÁ64
);

10375 
to
.
	`S‘Tok’Ty³
(
‰UIÁ
);

10378 
l
 = (
»£rvedV¬ŸbËs
.
	`G‘L’gth
());

10379 
rùx
->
bc
.
	`G‘V¬sU£d
(
»£rvedV¬ŸbËs
);

10380 
	`Im¶ic™CÚv”siÚ
(
lùx
, 
to
, 
node
, 
asIC_IMPLICIT_CONV
, 
Œue
);

10381 
»£rvedV¬ŸbËs
.
	`S‘L’gth
(
l
);

10384 ifĞ!
lùx
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
() )

10386 
asCSŒšg
 
¡r
;

10387 
¡r
.
	`FÜm©
(
TXT_NO_CONVERSION_s_TO_s
, 
lùx
->
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
(), 
to
.Format().AddressOf());

10388 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

10392 
l
 = (
»£rvedV¬ŸbËs
.
	`G‘L’gth
());

10393 
lùx
->
bc
.
	`G‘V¬sU£d
(
»£rvedV¬ŸbËs
);

10394 
	`Im¶ic™CÚv”siÚ
(
rùx
, 
lùx
->
ty³
.
d©aTy³
, 
node
, 
asIC_IMPLICIT_CONV
, 
Œue
);

10395 
»£rvedV¬ŸbËs
.
	`S‘L’gth
(
l
);

10396 ifĞ!
rùx
->
ty³
.
d©aTy³
.
	`IsEqu®Exû±Ref
(
lùx
->type.dataType) )

10398 
asCSŒšg
 
¡r
;

10399 
¡r
.
	`FÜm©
(
TXT_NO_CONVERSION_s_TO_s
, 
rùx
->
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
(), 
lùx
->type.dataType.Format().AddressOf());

10400 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

10403 
boŞ
 
isCÚ¡ªt
 = 
lùx
->
ty³
.isCÚ¡ªˆ&& 
rùx
->type.isConstant;

10405 ifĞ!
isCÚ¡ªt
 )

10407 
	`CÚv”tToV¬ŸbËNÙIn
(
lùx
, 
rùx
);

10408 
	`CÚv”tToV¬ŸbËNÙIn
(
rùx
, 
lùx
);

10409 
	`R–—£TempÜ¬yV¬ŸbË
(
lùx
->
ty³
, &lùx->
bc
);

10410 
	`R–—£TempÜ¬yV¬ŸbË
(
rùx
->
ty³
, &rùx->
bc
);

10412 ifĞ
İ
 =ğ
‰AndAssign
 || o°=ğ
‰OrAssign
 || o°=ğ
‰XÜAssign
 )

10415 
	`M”geEx´By‹code
(
ùx
, 
rùx
);

10416 
	`M”geEx´By‹code
(
ùx
, 
lùx
);

10420 
	`M”geEx´By‹code
(
ùx
, 
lùx
);

10421 
	`M”geEx´By‹code
(
ùx
, 
rùx
);

10423 
	`ProûssDeã¼edP¬ams
(
ùx
);

10425 
asEBCIn¡r
 
š¡ruùiÚ
 = 
asBC_BAND
;

10426 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyDWÜds
() == 1 )

10428 ifĞ
İ
 =ğ
‰Amp
 || o°=ğ
‰AndAssign
 )

10429 
š¡ruùiÚ
 = 
asBC_BAND
;

10430 ifĞ
İ
 =ğ
‰B™Or
 || o°=ğ
‰OrAssign
 )

10431 
š¡ruùiÚ
 = 
asBC_BOR
;

10432 ifĞ
İ
 =ğ
‰B™XÜ
 || o°=ğ
‰XÜAssign
 )

10433 
š¡ruùiÚ
 = 
asBC_BXOR
;

10437 ifĞ
İ
 =ğ
‰Amp
 || o°=ğ
‰AndAssign
 )

10438 
š¡ruùiÚ
 = 
asBC_BAND64
;

10439 ifĞ
İ
 =ğ
‰B™Or
 || o°=ğ
‰OrAssign
 )

10440 
š¡ruùiÚ
 = 
asBC_BOR64
;

10441 ifĞ
İ
 =ğ
‰B™XÜ
 || o°=ğ
‰XÜAssign
 )

10442 
š¡ruùiÚ
 = 
asBC_BXOR64
;

10446 
a
 = 
	`AÎoÿ‹V¬ŸbË
(
lùx
->
ty³
.
d©aTy³
, 
Œue
);

10447 
b
 = 
lùx
->
ty³
.
¡ackOff£t
;

10448 
c
 = 
rùx
->
ty³
.
¡ackOff£t
;

10450 
ùx
->
bc
.
	`In¡rW_W_W
(
š¡ruùiÚ
, 
a
, 
b
, 
c
);

10452 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
lùx
->ty³.
d©aTy³
, 
a
, 
Œue
);

10456 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyDWÜds
() == 2 )

10458 
asQWORD
 
v
 = 0;

10459 ifĞ
İ
 =ğ
‰Amp
 )

10460 
v
 = 
lùx
->
ty³
.
qwÜdV®ue
 & 
rùx
->type.qwordValue;

10461 ifĞ
İ
 =ğ
‰B™Or
 )

10462 
v
 = 
lùx
->
ty³
.
qwÜdV®ue
 | 
rùx
->type.qwordValue;

10463 ifĞ
İ
 =ğ
‰B™XÜ
 )

10464 
v
 = 
lùx
->
ty³
.
qwÜdV®ue
 ^ 
rùx
->type.qwordValue;

10467 
ùx
->
ty³
.
	`S‘CÚ¡ªtQW
(
lùx
->ty³.
d©aTy³
, 
v
);

10471 
asDWORD
 
v
 = 0;

10472 ifĞ
İ
 =ğ
‰Amp
 )

10473 
v
 = 
lùx
->
ty³
.
dwÜdV®ue
 & 
rùx
->type.dwordValue;

10474 ifĞ
İ
 =ğ
‰B™Or
 )

10475 
v
 = 
lùx
->
ty³
.
dwÜdV®ue
 | 
rùx
->type.dwordValue;

10476 ifĞ
İ
 =ğ
‰B™XÜ
 )

10477 
v
 = 
lùx
->
ty³
.
dwÜdV®ue
 ^ 
rùx
->type.dwordValue;

10480 
ùx
->
ty³
.
	`S‘CÚ¡ªtDW
(
lùx
->ty³.
d©aTy³
, 
v
);

10484 ifĞ
İ
 =ğ
‰B™ShiáLeá
 || o°=ğ
‰ShiáLeáAssign
 ||

10485 
İ
 =ğ
‰B™ShiáRight
 || o°=ğ
‰ShiáRightLAssign
 ||

10486 
İ
 =ğ
‰B™ShiáRightAr™h
 || o°=ğ
‰ShiáRightAAssign
 )

10489 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsObjeù
() )

10491 
asCSŒšg
 
¡r
;

10492 
¡r
.
	`FÜm©
(
TXT_ILLEGAL_OPERATION_ON_s
, 
lùx
->
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
());

10493 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

10496 
ùx
->
ty³
.
	`S‘CÚ¡ªtDW
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ
, 
Œue
), 0);

10501 
asCD©aTy³
 
to
 = 
lùx
->
ty³
.
d©aTy³
;

10502 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
() &&

10503 
lùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
() < 4 )

10505 
to
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ
, 
çl£
);

10507 ifĞ!
lùx
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
() )

10509 
asCD©aTy³
 
to
;

10510 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyDWÜds
() == 2 )

10511 
to
.
	`S‘Tok’Ty³
(
‰IÁ64
);

10513 
to
.
	`S‘Tok’Ty³
(
‰IÁ
);

10517 
l
 = (
»£rvedV¬ŸbËs
.
	`G‘L’gth
());

10518 
rùx
->
bc
.
	`G‘V¬sU£d
(
»£rvedV¬ŸbËs
);

10519 
	`Im¶ic™CÚv”siÚ
(
lùx
, 
to
, 
node
, 
asIC_IMPLICIT_CONV
, 
Œue
);

10520 
»£rvedV¬ŸbËs
.
	`S‘L’gth
(
l
);

10523 ifĞ
lùx
->
ty³
.
d©aTy³
 !ğ
to
 )

10525 
asCSŒšg
 
¡r
;

10526 
¡r
.
	`FÜm©
(
TXT_NO_CONVERSION_s_TO_s
, 
lùx
->
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
(), 
to
.Format().AddressOf());

10527 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

10531 
l
 = (
»£rvedV¬ŸbËs
.
	`G‘L’gth
());

10532 
lùx
->
bc
.
	`G‘V¬sU£d
(
»£rvedV¬ŸbËs
);

10533 
	`Im¶ic™CÚv”siÚ
(
rùx
, 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ
, 
Œue
), 
node
, 
asIC_IMPLICIT_CONV
,rue);

10534 
»£rvedV¬ŸbËs
.
	`S‘L’gth
(
l
);

10535 ifĞ!
rùx
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
() )

10537 
asCSŒšg
 
¡r
;

10538 
¡r
.
	`FÜm©
(
TXT_NO_CONVERSION_s_TO_s
, 
rùx
->
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
(), "uint");

10539 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

10542 
boŞ
 
isCÚ¡ªt
 = 
lùx
->
ty³
.isCÚ¡ªˆ&& 
rùx
->type.isConstant;

10544 ifĞ!
isCÚ¡ªt
 )

10546 
	`CÚv”tToV¬ŸbËNÙIn
(
lùx
, 
rùx
);

10547 
	`CÚv”tToV¬ŸbËNÙIn
(
rùx
, 
lùx
);

10548 
	`R–—£TempÜ¬yV¬ŸbË
(
lùx
->
ty³
, &lùx->
bc
);

10549 
	`R–—£TempÜ¬yV¬ŸbË
(
rùx
->
ty³
, &rùx->
bc
);

10551 ifĞ
İ
 =ğ
‰ShiáLeáAssign
 || o°=ğ
‰ShiáRightLAssign
 || o°=ğ
‰ShiáRightAAssign
 )

10554 
	`M”geEx´By‹code
(
ùx
, 
rùx
);

10555 
	`M”geEx´By‹code
(
ùx
, 
lùx
);

10559 
	`M”geEx´By‹code
(
ùx
, 
lùx
);

10560 
	`M”geEx´By‹code
(
ùx
, 
rùx
);

10562 
	`ProûssDeã¼edP¬ams
(
ùx
);

10564 
asEBCIn¡r
 
š¡ruùiÚ
 = 
asBC_BSLL
;

10565 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyDWÜds
() == 1 )

10567 ifĞ
İ
 =ğ
‰B™ShiáLeá
 || o°=ğ
‰ShiáLeáAssign
 )

10568 
š¡ruùiÚ
 = 
asBC_BSLL
;

10569 ifĞ
İ
 =ğ
‰B™ShiáRight
 || o°=ğ
‰ShiáRightLAssign
 )

10570 
š¡ruùiÚ
 = 
asBC_BSRL
;

10571 ifĞ
İ
 =ğ
‰B™ShiáRightAr™h
 || o°=ğ
‰ShiáRightAAssign
 )

10572 
š¡ruùiÚ
 = 
asBC_BSRA
;

10576 ifĞ
İ
 =ğ
‰B™ShiáLeá
 || o°=ğ
‰ShiáLeáAssign
 )

10577 
š¡ruùiÚ
 = 
asBC_BSLL64
;

10578 ifĞ
İ
 =ğ
‰B™ShiáRight
 || o°=ğ
‰ShiáRightLAssign
 )

10579 
š¡ruùiÚ
 = 
asBC_BSRL64
;

10580 ifĞ
İ
 =ğ
‰B™ShiáRightAr™h
 || o°=ğ
‰ShiáRightAAssign
 )

10581 
š¡ruùiÚ
 = 
asBC_BSRA64
;

10585 
a
 = 
	`AÎoÿ‹V¬ŸbË
(
lùx
->
ty³
.
d©aTy³
, 
Œue
);

10586 
b
 = 
lùx
->
ty³
.
¡ackOff£t
;

10587 
c
 = 
rùx
->
ty³
.
¡ackOff£t
;

10589 
ùx
->
bc
.
	`In¡rW_W_W
(
š¡ruùiÚ
, 
a
, 
b
, 
c
);

10591 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
lùx
->ty³.
d©aTy³
, 
a
, 
Œue
);

10595 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyDWÜds
() == 1 )

10597 
asDWORD
 
v
 = 0;

10598 ifĞ
İ
 =ğ
‰B™ShiáLeá
 )

10599 
v
 = 
lùx
->
ty³
.
dwÜdV®ue
 << 
rùx
->type.dwordValue;

10600 ifĞ
İ
 =ğ
‰B™ShiáRight
 )

10601 
v
 = 
lùx
->
ty³
.
dwÜdV®ue
 >> 
rùx
->type.dwordValue;

10602 ifĞ
İ
 =ğ
‰B™ShiáRightAr™h
 )

10603 
v
 = 
lùx
->
ty³
.
štV®ue
 >> 
rùx
->ty³.
dwÜdV®ue
;

10605 
ùx
->
ty³
.
	`S‘CÚ¡ªtDW
(
lùx
->ty³.
d©aTy³
, 
v
);

10609 
asQWORD
 
v
 = 0;

10610 ifĞ
İ
 =ğ
‰B™ShiáLeá
 )

10611 
v
 = 
lùx
->
ty³
.
qwÜdV®ue
 << 
rùx
->ty³.
dwÜdV®ue
;

10612 ifĞ
İ
 =ğ
‰B™ShiáRight
 )

10613 
v
 = 
lùx
->
ty³
.
qwÜdV®ue
 >> 
rùx
->ty³.
dwÜdV®ue
;

10614 ifĞ
İ
 =ğ
‰B™ShiáRightAr™h
 )

10615 
v
 = 
	`asINT64
(
lùx
->
ty³
.
qwÜdV®ue
è>> 
rùx
->ty³.
dwÜdV®ue
;

10617 
ùx
->
ty³
.
	`S‘CÚ¡ªtQW
(
lùx
->ty³.
d©aTy³
, 
v
);

10621 
	}
}

10623 
	gasCComp”
::
	$CompeCom·risÚO³¿tÜ
(
asCSütNode
 *
node
, 
asSEx´CÚ‹xt
 *
lùx
,‡sSEx´CÚ‹xˆ*
rùx
,‡sSEx´CÚ‹xˆ*
ùx
)

10628 
asCD©aTy³
 
to
;

10629 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsDoubËTy³
(è|| 
rùx
->type.dataType.IsDoubleType() )

10630 
to
.
	`S‘Tok’Ty³
(
‰DoubË
);

10631 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsFlßtTy³
(è|| 
rùx
->type.dataType.IsFloatType() )

10632 
to
.
	`S‘Tok’Ty³
(
‰Flßt
);

10633 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyDWÜds
(è=ğ2 || 
rùx
->type.dataType.GetSizeInMemoryDWords() == 2 )

10635 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
(è|| 
rùx
->type.dataType.IsIntegerType() )

10636 
to
.
	`S‘Tok’Ty³
(
‰IÁ64
);

10637 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
(è|| 
rùx
->type.dataType.IsUnsignedType() )

10638 
to
.
	`S‘Tok’Ty³
(
‰UIÁ64
);

10642 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
(è|| 
rùx
->type.dataType.IsIntegerType() ||

10643 
lùx
->
ty³
.
d©aTy³
.
	`IsEnumTy³
(è|| 
rùx
->type.dataType.IsEnumType() )

10644 
to
.
	`S‘Tok’Ty³
(
‰IÁ
);

10645 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
(è|| 
rùx
->type.dataType.IsUnsignedType() )

10646 
to
.
	`S‘Tok’Ty³
(
‰UIÁ
);

10647 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsBoŞ—nTy³
(è|| 
rùx
->type.dataType.IsBooleanType() )

10648 
to
.
	`S‘Tok’Ty³
(
‰BoŞ
);

10652 ifĞ(
lùx
->
ty³
.
isCÚ¡ªt
 &&†ùx->ty³.
d©aTy³
.
	`IsDoubËTy³
(è&& !
rùx
->ty³.isCÚ¡ªˆ&&„ùx->ty³.d©aTy³.
	`IsFlßtTy³
()) ||

10653 (
rùx
->
ty³
.
isCÚ¡ªt
 &&„ùx->ty³.
d©aTy³
.
	`IsDoubËTy³
(è&& !
lùx
->ty³.isCÚ¡ªˆ&&†ùx->ty³.d©aTy³.
	`IsFlßtTy³
()) )

10654 
to
.
	`S‘Tok’Ty³
(
‰Flßt
);

10657 
boŞ
 
signMism©ch
 = 
çl£
;

10658 ifĞ!
lùx
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
(è|| !
rùx
->type.dataType.IsUnsignedType() )

10660 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`G‘Tok’Ty³
(è=ğ
‰UIÁ64
 )

10662 ifĞ!
lùx
->
ty³
.
isCÚ¡ªt
 )

10663 
signMism©ch
 = 
Œue
;

10664 ifĞ
lùx
->
ty³
.
qwÜdV®ue
 & (
	`asQWORD
(1)<<63) )

10665 
signMism©ch
 = 
Œue
;

10667 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`G‘Tok’Ty³
(è=ğ
‰UIÁ
 )

10669 ifĞ!
lùx
->
ty³
.
isCÚ¡ªt
 )

10670 
signMism©ch
 = 
Œue
;

10671 ifĞ
lùx
->
ty³
.
dwÜdV®ue
 & (
	`asDWORD
(1)<<31) )

10672 
signMism©ch
 = 
Œue
;

10674 ifĞ
rùx
->
ty³
.
d©aTy³
.
	`G‘Tok’Ty³
(è=ğ
‰UIÁ64
 )

10676 ifĞ!
rùx
->
ty³
.
isCÚ¡ªt
 )

10677 
signMism©ch
 = 
Œue
;

10678 ifĞ
rùx
->
ty³
.
qwÜdV®ue
 & (
	`asQWORD
(1)<<63) )

10679 
signMism©ch
 = 
Œue
;

10681 ifĞ
rùx
->
ty³
.
d©aTy³
.
	`G‘Tok’Ty³
(è=ğ
‰UIÁ
 )

10683 ifĞ!
rùx
->
ty³
.
isCÚ¡ªt
 )

10684 
signMism©ch
 = 
Œue
;

10685 ifĞ
rùx
->
ty³
.
dwÜdV®ue
 & (
	`asDWORD
(1)<<31) )

10686 
signMism©ch
 = 
Œue
;

10691 ifĞ
signMism©ch
 )

10692 
	`W¬nšg
(
TXT_SIGNED_UNSIGNED_MISMATCH
, 
node
);

10695 
l
 = (
»£rvedV¬ŸbËs
.
	`G‘L’gth
());

10696 
rùx
->
bc
.
	`G‘V¬sU£d
(
»£rvedV¬ŸbËs
);

10698 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsReã»nû
() )

10699 
	`CÚv”tToV¬ŸbË
(
lùx
);

10700 ifĞ
rùx
->
ty³
.
d©aTy³
.
	`IsReã»nû
() )

10701 
	`CÚv”tToV¬ŸbË
(
rùx
);

10703 
	`Im¶ic™CÚv”siÚ
(
lùx
, 
to
, 
node
, 
asIC_IMPLICIT_CONV
);

10704 
	`Im¶ic™CÚv”siÚ
(
rùx
, 
to
, 
node
, 
asIC_IMPLICIT_CONV
);

10705 
»£rvedV¬ŸbËs
.
	`S‘L’gth
(
l
);

10708 
boŞ
 
ok
 = 
Œue
;

10709 ifĞ!
lùx
->
ty³
.
d©aTy³
.
	`IsEqu®Exû±CÚ¡
(
to
) )

10711 
asCSŒšg
 
¡r
;

10712 
¡r
.
	`FÜm©
(
TXT_NO_CONVERSION_s_TO_s
, 
lùx
->
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
(), 
to
.Format().AddressOf());

10713 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

10714 
ok
 = 
çl£
;

10717 ifĞ!
rùx
->
ty³
.
d©aTy³
.
	`IsEqu®Exû±CÚ¡
(
to
) )

10719 
asCSŒšg
 
¡r
;

10720 
¡r
.
	`FÜm©
(
TXT_NO_CONVERSION_s_TO_s
, 
rùx
->
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
(), 
to
.Format().AddressOf());

10721 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

10722 
ok
 = 
çl£
;

10725 ifĞ!
ok
 )

10729 
ùx
->
ty³
.
	`S‘CÚ¡ªtDW
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
Œue
),rue);

10733 
boŞ
 
isCÚ¡ªt
 = 
lùx
->
ty³
.isCÚ¡ªˆ&& 
rùx
->type.isConstant;

10734 
İ
 = 
node
->
tok’Ty³
;

10736 ifĞ!
isCÚ¡ªt
 )

10738 ifĞ
to
.
	`IsBoŞ—nTy³
() )

10740 
İ
 = 
node
->
tok’Ty³
;

10741 ifĞ
İ
 =ğ
‰Equ®
 || o°=ğ
‰NÙEqu®
 )

10744 
	`CÚv”tToTempV¬ŸbËNÙIn
(
lùx
, 
rùx
);

10745 
	`CÚv”tToTempV¬ŸbËNÙIn
(
rùx
, 
lùx
);

10746 
	`R–—£TempÜ¬yV¬ŸbË
(
lùx
->
ty³
, &lùx->
bc
);

10747 
	`R–—£TempÜ¬yV¬ŸbË
(
rùx
->
ty³
, &rùx->
bc
);

10750 
lùx
->
bc
.
	`In¡rWORD
(
asBC_NOT
,†ùx->
ty³
.
¡ackOff£t
);

10751 
rùx
->
bc
.
	`In¡rWORD
(
asBC_NOT
,„ùx->
ty³
.
¡ackOff£t
);

10753 
	`M”geEx´By‹code
(
ùx
, 
lùx
);

10754 
	`M”geEx´By‹code
(
ùx
, 
rùx
);

10755 
	`ProûssDeã¼edP¬ams
(
ùx
);

10757 
a
 = 
	`AÎoÿ‹V¬ŸbË
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
Œue
),rue);

10758 
b
 = 
lùx
->
ty³
.
¡ackOff£t
;

10759 
c
 = 
rùx
->
ty³
.
¡ackOff£t
;

10761 ifĞ
İ
 =ğ
‰Equ®
 )

10763 
ùx
->
bc
.
	`In¡rW_W
(
asBC_CMPi
,
b
,
c
);

10764 
ùx
->
bc
.
	`In¡r
(
asBC_TZ
);

10765 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_CpyRtoV4
, ()
a
);

10767 ifĞ
İ
 =ğ
‰NÙEqu®
 )

10769 
ùx
->
bc
.
	`In¡rW_W
(
asBC_CMPi
,
b
,
c
);

10770 
ùx
->
bc
.
	`In¡r
(
asBC_TNZ
);

10771 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_CpyRtoV4
, ()
a
);

10774 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
Œue
), 
a
,rue);

10779 
	`E¼Ü
(
TXT_ILLEGAL_OPERATION
, 
node
);

10780 
ùx
->
ty³
.
	`S‘CÚ¡ªtDW
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
Œue
), 0);

10785 
	`CÚv”tToV¬ŸbËNÙIn
(
lùx
, 
rùx
);

10786 
	`CÚv”tToV¬ŸbËNÙIn
(
rùx
, 
lùx
);

10787 
	`R–—£TempÜ¬yV¬ŸbË
(
lùx
->
ty³
, &lùx->
bc
);

10788 
	`R–—£TempÜ¬yV¬ŸbË
(
rùx
->
ty³
, &rùx->
bc
);

10790 
	`M”geEx´By‹code
(
ùx
, 
lùx
);

10791 
	`M”geEx´By‹code
(
ùx
, 
rùx
);

10792 
	`ProûssDeã¼edP¬ams
(
ùx
);

10794 
asEBCIn¡r
 
iCmp
 = 
asBC_CMPi
, 
iT
 = 
asBC_TZ
;

10796 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
(è&&†ùx->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 1 )

10797 
iCmp
 = 
asBC_CMPi
;

10798 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
(è&&†ùx->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 1 )

10799 
iCmp
 = 
asBC_CMPu
;

10800 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
(è&&†ùx->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 2 )

10801 
iCmp
 = 
asBC_CMPi64
;

10802 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
(è&&†ùx->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 2 )

10803 
iCmp
 = 
asBC_CMPu64
;

10804 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsFlßtTy³
() )

10805 
iCmp
 = 
asBC_CMPf
;

10806 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsDoubËTy³
() )

10807 
iCmp
 = 
asBC_CMPd
;

10809 
	`asASSERT
(
çl£
);

10811 ifĞ
İ
 =ğ
‰Equ®
 )

10812 
iT
 = 
asBC_TZ
;

10813 ifĞ
İ
 =ğ
‰NÙEqu®
 )

10814 
iT
 = 
asBC_TNZ
;

10815 ifĞ
İ
 =ğ
‰LessThª
 )

10816 
iT
 = 
asBC_TS
;

10817 ifĞ
İ
 =ğ
‰LessThªOrEqu®
 )

10818 
iT
 = 
asBC_TNP
;

10819 ifĞ
İ
 =ğ
‰G»©”Thª
 )

10820 
iT
 = 
asBC_TP
;

10821 ifĞ
İ
 =ğ
‰G»©”ThªOrEqu®
 )

10822 
iT
 = 
asBC_TNS
;

10824 
a
 = 
	`AÎoÿ‹V¬ŸbË
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
Œue
),rue);

10825 
b
 = 
lùx
->
ty³
.
¡ackOff£t
;

10826 
c
 = 
rùx
->
ty³
.
¡ackOff£t
;

10828 
ùx
->
bc
.
	`In¡rW_W
(
iCmp
, 
b
, 
c
);

10829 
ùx
->
bc
.
	`In¡r
(
iT
);

10830 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_CpyRtoV4
, ()
a
);

10832 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
Œue
), 
a
,rue);

10837 ifĞ
to
.
	`IsBoŞ—nTy³
() )

10839 
İ
 = 
node
->
tok’Ty³
;

10840 ifĞ
İ
 =ğ
‰Equ®
 || o°=ğ
‰NÙEqu®
 )

10843 ifĞ
lùx
->
ty³
.
dwÜdV®ue
 !ğ0 )†ùx->ty³.dwÜdV®uğ
VALUE_OF_BOOLEAN_TRUE
;

10844 ifĞ
rùx
->
ty³
.
dwÜdV®ue
 !ğ0 )„ùx->ty³.dwÜdV®uğ
VALUE_OF_BOOLEAN_TRUE
;

10846 
asDWORD
 
v
 = 0;

10847 ifĞ
İ
 =ğ
‰Equ®
 )

10849 
v
 = 
lùx
->
ty³
.
štV®ue
 - 
rùx
->type.intValue;

10850 ifĞ
v
 =ğ0 ) v = 
VALUE_OF_BOOLEAN_TRUE
; v = 0;

10852 ifĞ
İ
 =ğ
‰NÙEqu®
 )

10854 
v
 = 
lùx
->
ty³
.
štV®ue
 - 
rùx
->type.intValue;

10855 ifĞ
v
 !ğ0 ) v = 
VALUE_OF_BOOLEAN_TRUE
; v = 0;

10858 
ùx
->
ty³
.
	`S‘CÚ¡ªtDW
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
Œue
), 
v
);

10863 
	`E¼Ü
(
TXT_ILLEGAL_OPERATION
, 
node
);

10868 
i
 = 0;

10869 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
(è&&†ùx->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 1 )

10871 
v
 = 
lùx
->
ty³
.
štV®ue
 - 
rùx
->type.intValue;

10872 ifĞ
v
 < 0 ) 
i
 = -1;

10873 ifĞ
v
 > 0 ) 
i
 = 1;

10875 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
(è&&†ùx->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 1 )

10877 
asDWORD
 
v1
 = 
lùx
->
ty³
.
dwÜdV®ue
;

10878 
asDWORD
 
v2
 = 
rùx
->
ty³
.
dwÜdV®ue
;

10879 ifĞ
v1
 < 
v2
 ) 
i
 = -1;

10880 ifĞ
v1
 > 
v2
 ) 
i
 = 1;

10882 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsIÁeg”Ty³
(è&&†ùx->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 2 )

10884 
asINT64
 
v
 = 
	`asINT64
(
lùx
->
ty³
.
qwÜdV®ue
è-‡sINT64(
rùx
->type.qwordValue);

10885 ifĞ
v
 < 0 ) 
i
 = -1;

10886 ifĞ
v
 > 0 ) 
i
 = 1;

10888 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsUnsigÃdTy³
(è&&†ùx->ty³.d©aTy³.
	`G‘SizeInMemÜyDWÜds
() == 2 )

10890 
asQWORD
 
v1
 = 
lùx
->
ty³
.
qwÜdV®ue
;

10891 
asQWORD
 
v2
 = 
rùx
->
ty³
.
qwÜdV®ue
;

10892 ifĞ
v1
 < 
v2
 ) 
i
 = -1;

10893 ifĞ
v1
 > 
v2
 ) 
i
 = 1;

10895 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsFlßtTy³
() )

10897 
v
 = 
lùx
->
ty³
.
æßtV®ue
 - 
rùx
->type.floatValue;

10898 ifĞ
v
 < 0 ) 
i
 = -1;

10899 ifĞ
v
 > 0 ) 
i
 = 1;

10901 ifĞ
lùx
->
ty³
.
d©aTy³
.
	`IsDoubËTy³
() )

10903 
v
 = 
lùx
->
ty³
.
doubËV®ue
 - 
rùx
->type.doubleValue;

10904 ifĞ
v
 < 0 ) 
i
 = -1;

10905 ifĞ
v
 > 0 ) 
i
 = 1;

10909 ifĞ
İ
 =ğ
‰Equ®
 )

10910 
i
 = (˜=ğ0 ? 
VALUE_OF_BOOLEAN_TRUE
 : 0);

10911 ifĞ
İ
 =ğ
‰NÙEqu®
 )

10912 
i
 = (˜!ğ0 ? 
VALUE_OF_BOOLEAN_TRUE
 : 0);

10913 ifĞ
İ
 =ğ
‰LessThª
 )

10914 
i
 = (˜< 0 ? 
VALUE_OF_BOOLEAN_TRUE
 : 0);

10915 ifĞ
İ
 =ğ
‰LessThªOrEqu®
 )

10916 
i
 = (˜<ğ0 ? 
VALUE_OF_BOOLEAN_TRUE
 : 0);

10917 ifĞ
İ
 =ğ
‰G»©”Thª
 )

10918 
i
 = (˜> 0 ? 
VALUE_OF_BOOLEAN_TRUE
 : 0);

10919 ifĞ
İ
 =ğ
‰G»©”ThªOrEqu®
 )

10920 
i
 = (˜>ğ0 ? 
VALUE_OF_BOOLEAN_TRUE
 : 0);

10922 
ùx
->
ty³
.
	`S‘CÚ¡ªtDW
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
Œue
), 
i
);

10925 
	}
}

10927 
	gasCComp”
::
	$PushV¬ŸbËOnSck
(
asSEx´CÚ‹xt
 *
ùx
, 
boŞ
 
asReã»nû
)

10930 ifĞ
asReã»nû
 )

10932 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_PSF
, ctx->
ty³
.
¡ackOff£t
);

10933 
ùx
->
ty³
.
d©aTy³
.
	`MakeReã»nû
(
Œue
);

10937 ifĞ
ùx
->
ty³
.
d©aTy³
.
	`G‘SizeInMemÜyDWÜds
() == 1 )

10938 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_PshV4
, ctx->
ty³
.
¡ackOff£t
);

10940 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_PshV8
, ctx->
ty³
.
¡ackOff£t
);

10942 
	}
}

10944 
	gasCComp”
::
	$CompeBoŞ—nO³¿tÜ
(
asCSütNode
 *
node
, 
asSEx´CÚ‹xt
 *
lùx
,‡sSEx´CÚ‹xˆ*
rùx
,‡sSEx´CÚ‹xˆ*
ùx
)

10947 
asCD©aTy³
 
to
;

10948 
to
.
	`S‘Tok’Ty³
(
‰BoŞ
);

10951 
l
 = (
»£rvedV¬ŸbËs
.
	`G‘L’gth
());

10952 
rùx
->
bc
.
	`G‘V¬sU£d
(
»£rvedV¬ŸbËs
);

10953 
lùx
->
bc
.
	`G‘V¬sU£d
(
»£rvedV¬ŸbËs
);

10954 
	`Im¶ic™CÚv”siÚ
(
lùx
, 
to
, 
node
, 
asIC_IMPLICIT_CONV
);

10955 
	`Im¶ic™CÚv”siÚ
(
rùx
, 
to
, 
node
, 
asIC_IMPLICIT_CONV
);

10956 
»£rvedV¬ŸbËs
.
	`S‘L’gth
(
l
);

10959 ifĞ!
lùx
->
ty³
.
d©aTy³
.
	`IsBoŞ—nTy³
() )

10961 
asCSŒšg
 
¡r
;

10962 
¡r
.
	`FÜm©
(
TXT_NO_CONVERSION_s_TO_s
, 
lùx
->
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
(), "bool");

10963 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

10965 
lùx
->
ty³
.
	`S‘CÚ¡ªtB
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
Œue
),rue);

10968 ifĞ!
rùx
->
ty³
.
d©aTy³
.
	`IsBoŞ—nTy³
() )

10970 
asCSŒšg
 
¡r
;

10971 
¡r
.
	`FÜm©
(
TXT_NO_CONVERSION_s_TO_s
, 
rùx
->
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
(), "bool");

10972 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

10974 
rùx
->
ty³
.
	`S‘CÚ¡ªtB
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
Œue
),rue);

10977 
boŞ
 
isCÚ¡ªt
 = 
lùx
->
ty³
.isCÚ¡ªˆ&& 
rùx
->type.isConstant;

10979 
ùx
->
ty³
.
	`S‘
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
Œue
));

10982 
İ
 = 
node
->
tok’Ty³
;

10983 ifĞ
İ
 =ğ
‰XÜ
 )

10985 ifĞ!
isCÚ¡ªt
 )

10988 
	`CÚv”tToTempV¬ŸbËNÙIn
(
lùx
, 
rùx
);

10989 
	`CÚv”tToTempV¬ŸbËNÙIn
(
rùx
, 
lùx
);

10990 
	`R–—£TempÜ¬yV¬ŸbË
(
lùx
->
ty³
, &lùx->
bc
);

10991 
	`R–—£TempÜ¬yV¬ŸbË
(
rùx
->
ty³
, &rùx->
bc
);

10994 
lùx
->
bc
.
	`In¡rWORD
(
asBC_NOT
,†ùx->
ty³
.
¡ackOff£t
);

10995 
rùx
->
bc
.
	`In¡rWORD
(
asBC_NOT
,„ùx->
ty³
.
¡ackOff£t
);

10997 
	`M”geEx´By‹code
(
ùx
, 
lùx
);

10998 
	`M”geEx´By‹code
(
ùx
, 
rùx
);

10999 
	`ProûssDeã¼edP¬ams
(
ùx
);

11001 
a
 = 
	`AÎoÿ‹V¬ŸbË
(
ùx
->
ty³
.
d©aTy³
, 
Œue
);

11002 
b
 = 
lùx
->
ty³
.
¡ackOff£t
;

11003 
c
 = 
rùx
->
ty³
.
¡ackOff£t
;

11005 
ùx
->
bc
.
	`In¡rW_W_W
(
asBC_BXOR
,
a
,
b
,
c
);

11007 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
Œue
), 
a
,rue);

11012 #ià
AS_SIZEOF_BOOL
 == 1

11013 ifĞ
lùx
->
ty³
.
by‹V®ue
 !ğ0 )†ùx->ty³.by‹V®uğ
VALUE_OF_BOOLEAN_TRUE
;

11014 ifĞ
rùx
->
ty³
.
by‹V®ue
 !ğ0 )„ùx->ty³.by‹V®uğ
VALUE_OF_BOOLEAN_TRUE
;

11016 
asBYTE
 
v
 = 0;

11017 
v
 = 
lùx
->
ty³
.
by‹V®ue
 - 
rùx
->type.byteValue;

11018 ifĞ
v
 !ğ0 ) v = 
VALUE_OF_BOOLEAN_TRUE
; v = 0;

11020 
ùx
->
ty³
.
isCÚ¡ªt
 = 
Œue
;

11021 
ùx
->
ty³
.
by‹V®ue
 = 
v
;

11023 ifĞ
lùx
->
ty³
.
dwÜdV®ue
 !ğ0 )†ùx->ty³.dwÜdV®uğ
VALUE_OF_BOOLEAN_TRUE
;

11024 ifĞ
rùx
->
ty³
.
dwÜdV®ue
 !ğ0 )„ùx->ty³.dwÜdV®uğ
VALUE_OF_BOOLEAN_TRUE
;

11026 
asDWORD
 
v
 = 0;

11027 
v
 = 
lùx
->
ty³
.
štV®ue
 - 
rùx
->type.intValue;

11028 ifĞ
v
 !ğ0 ) v = 
VALUE_OF_BOOLEAN_TRUE
; v = 0;

11030 
ùx
->
ty³
.
isCÚ¡ªt
 = 
Œue
;

11031 
ùx
->
ty³
.
dwÜdV®ue
 = 
v
;

11035 ifĞ
İ
 =ğ
‰And
 ||

11036 
İ
 =ğ
‰Or
 )

11038 ifĞ!
isCÚ¡ªt
 )

11042 
	`CÚv”tToV¬ŸbË
(
lùx
);

11043 
	`R–—£TempÜ¬yV¬ŸbË
(
lùx
->
ty³
, &lùx->
bc
);

11044 
	`M”geEx´By‹code
(
ùx
, 
lùx
);

11046 
off£t
 = 
	`AÎoÿ‹V¬ŸbË
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
çl£
), 
Œue
);

11048 
Ïb–1
 = 
ÃxtLab–
++;

11049 
Ïb–2
 = 
ÃxtLab–
++;

11050 ifĞ
İ
 =ğ
‰And
 )

11052 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_CpyVtoR4
, 
lùx
->
ty³
.
¡ackOff£t
);

11053 
ùx
->
bc
.
	`In¡r
(
asBC_CÌHi
);

11054 
ùx
->
bc
.
	`In¡rDWORD
(
asBC_JNZ
, 
Ïb–1
);

11055 
ùx
->
bc
.
	`In¡rW_DW
(
asBC_S‘V4
, (
asWORD
)
off£t
, 0);

11056 
ùx
->
bc
.
	`In¡rINT
(
asBC_JMP
, 
Ïb–2
);

11058 ifĞ
İ
 =ğ
‰Or
 )

11060 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_CpyVtoR4
, 
lùx
->
ty³
.
¡ackOff£t
);

11061 
ùx
->
bc
.
	`In¡r
(
asBC_CÌHi
);

11062 
ùx
->
bc
.
	`In¡rDWORD
(
asBC_JZ
, 
Ïb–1
);

11063 #ià
AS_SIZEOF_BOOL
 == 1

11064 
ùx
->
bc
.
	`In¡rSHORT_B
(
asBC_S‘V1
, ()
off£t
, 
VALUE_OF_BOOLEAN_TRUE
);

11066 
ùx
->
bc
.
	`In¡rSHORT_DW
(
asBC_S‘V4
, ()
off£t
, 
VALUE_OF_BOOLEAN_TRUE
);

11068 
ùx
->
bc
.
	`In¡rINT
(
asBC_JMP
, 
Ïb–2
);

11071 
ùx
->
bc
.
	`Lab–
(()
Ïb–1
);

11072 
	`CÚv”tToV¬ŸbË
(
rùx
);

11073 
	`R–—£TempÜ¬yV¬ŸbË
(
rùx
->
ty³
, &rùx->
bc
);

11074 
rùx
->
bc
.
	`In¡rW_W
(
asBC_CpyVtoV4
, 
off£t
,„ùx->
ty³
.
¡ackOff£t
);

11075 
	`M”geEx´By‹code
(
ùx
, 
rùx
);

11076 
ùx
->
bc
.
	`Lab–
(()
Ïb–2
);

11078 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
çl£
), 
off£t
, 
Œue
);

11082 #ià
AS_SIZEOF_BOOL
 == 1

11083 
asBYTE
 
v
 = 0;

11084 ifĞ
İ
 =ğ
‰And
 )

11085 
v
 = 
lùx
->
ty³
.
by‹V®ue
 && 
rùx
->type.byteValue;

11086 ifĞ
İ
 =ğ
‰Or
 )

11087 
v
 = 
lùx
->
ty³
.
by‹V®ue
 || 
rùx
->type.byteValue;

11090 
ùx
->
ty³
.
isCÚ¡ªt
 = 
Œue
;

11091 
ùx
->
ty³
.
by‹V®ue
 = 
v
;

11093 
asDWORD
 
v
 = 0;

11094 ifĞ
İ
 =ğ
‰And
 )

11095 
v
 = 
lùx
->
ty³
.
dwÜdV®ue
 && 
rùx
->type.dwordValue;

11096 ifĞ
İ
 =ğ
‰Or
 )

11097 
v
 = 
lùx
->
ty³
.
dwÜdV®ue
 || 
rùx
->type.dwordValue;

11100 
ùx
->
ty³
.
isCÚ¡ªt
 = 
Œue
;

11101 
ùx
->
ty³
.
dwÜdV®ue
 = 
v
;

11105 
	}
}

11107 
	gasCComp”
::
	$CompeO³¿tÜOnHªdËs
(
asCSütNode
 *
node
, 
asSEx´CÚ‹xt
 *
lùx
,‡sSEx´CÚ‹xˆ*
rùx
,‡sSEx´CÚ‹xˆ*
ùx
)

11110 
	`ProûssPrİ”tyG‘AcûssÜ
(
lùx
, 
node
);

11111 
	`ProûssPrİ”tyG‘AcûssÜ
(
rùx
, 
node
);

11114 ifĞ
lùx
->
ty³
.
isTempÜ¬y
 && 
rùx
->
bc
.
	`IsV¬U£d
Öùx->ty³.
¡ackOff£t
) )

11116 
asCA¼ay
<> 
v¬s
;

11117 
rùx
->
bc
.
	`G‘V¬sU£d
(
v¬s
);

11118 
off£t
 = 
	`AÎoÿ‹V¬ŸbË
(
lùx
->
ty³
.
d©aTy³
, 
Œue
);

11119 
rùx
->
bc
.
	`ExchªgeV¬
(
lùx
->
ty³
.
¡ackOff£t
, 
off£t
);

11120 
	`R–—£TempÜ¬yV¬ŸbË
(
off£t
, 0);

11124 ifĞ(
node
->
tok’Ty³
 =ğ
‰Equ®
 ||‚ode->tok’Ty³ =ğ
‰NÙEqu®
) &&

11125 ((!
lùx
->
ty³
.
isEx¶ic™HªdË
 && !Öùx->ty³.
d©aTy³
.
	`G‘ObjeùTy³
(è&& (lùx->ty³.d©aTy³.G‘ObjeùTy³()->
æags
 & 
asOBJ_IMPLICIT_HANDLE
))) ||

11126 (!
rùx
->
ty³
.
isEx¶ic™HªdË
 && !Ôùx->ty³.
d©aTy³
.
	`G‘ObjeùTy³
(è&& (rùx->ty³.d©aTy³.G‘ObjeùTy³()->
æags
 & 
asOBJ_IMPLICIT_HANDLE
)))) )

11128 
	`W¬nšg
(
TXT_HANDLE_COMPARISON
, 
node
);

11132 ifĞ((
lùx
->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
(è&& (lùx->ty³.d©aTy³.G‘ObjeùTy³()->
æags
 & 
asOBJ_ASHANDLE
)) ||

11133 (
rùx
->
ty³
.
d©aTy³
.
	`G‘ObjeùTy³
(è&& (rùx->ty³.d©aTy³.G‘ObjeùTy³()->
æags
 & 
asOBJ_ASHANDLE
))) &&

11134 (
node
->
tok’Ty³
 =ğ
‰Equ®
 ||‚ode->tok’Ty³ =ğ
‰Is
 ||

11135 
node
->
tok’Ty³
 =ğ
‰NÙEqu®
 ||‚ode->tok’Ty³ =ğ
‰NÙIs
) )

11139 
r
 = 
	`CompeOv”lßdedDu®O³¿tÜ2
(
node
, "İEqu®s", 
lùx
, 
rùx
, 
ùx
, 
Œue
, 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
çl£
));

11140 ifĞ
r
 == 0 )

11143 
r
 = 
	`CompeOv”lßdedDu®O³¿tÜ2
(
node
, "İEqu®s", 
rùx
, 
lùx
, 
ùx
, 
Œue
, 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
çl£
));

11146 ifĞ
r
 == 1 )

11148 ifĞ
node
->
tok’Ty³
 =ğ
‰NÙEqu®
 ||‚ode->tok’Ty³ =ğ
‰NÙIs
 )

11149 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_NOT
, ctx->
ty³
.
¡ackOff£t
);

11154 ifĞ
r
 == 0 )

11157 
	`E¼Ü
(
TXT_NO_APPROPRIATE_OPEQUALS
, 
node
);

11161 
ùx
->
ty³
.
	`S‘CÚ¡ªtDW
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
Œue
),rue);

11167 
asCD©aTy³
 
to
;

11168 ifĞ
lùx
->
ty³
.
	`IsNuÎCÚ¡ªt
() )

11169 
to
 = 
rùx
->
ty³
.
d©aTy³
;

11170 ifĞ
rùx
->
ty³
.
	`IsNuÎCÚ¡ªt
() )

11171 
to
 = 
lùx
->
ty³
.
d©aTy³
;

11175 
to
 = 
lùx
->
ty³
.
d©aTy³
;

11179 ifĞ
lùx
->
ty³
.
	`IsNuÎCÚ¡ªt
() )

11180 
lùx
->
bc
.
	`In¡r
(
asBC_PİPŒ
);

11181 ifĞ
rùx
->
ty³
.
	`IsNuÎCÚ¡ªt
() )

11182 
rùx
->
bc
.
	`In¡r
(
asBC_PİPŒ
);

11185 
to
.
	`MakeHªdË
(
Œue
);

11186 
to
.
	`MakeReã»nû
(
çl£
);

11188 ifĞ!
to
.
	`IsObjeùHªdË
() )

11191 
	`E¼Ü
(
TXT_OPERANDS_MUST_BE_HANDLES
, 
node
);

11192 
ùx
->
ty³
.
	`S‘CÚ¡ªtDW
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
Œue
),rue);

11197 
	`Im¶ic™CÚv”siÚ
(
lùx
, 
to
, 
node
, 
asIC_IMPLICIT_CONV
);

11198 
	`Im¶ic™CÚv”siÚ
(
rùx
, 
to
, 
node
, 
asIC_IMPLICIT_CONV
);

11203 ifĞ!
lùx
->
ty³
.
d©aTy³
.
	`IsEqu®Exû±CÚ¡
(
to
) )

11205 
asCSŒšg
 
¡r
;

11206 
¡r
.
	`FÜm©
(
TXT_NO_CONVERSION_s_TO_s
, 
lùx
->
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
(), 
to
.Format().AddressOf());

11207 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

11210 ifĞ!
rùx
->
ty³
.
d©aTy³
.
	`IsEqu®Exû±CÚ¡
(
to
) )

11212 
asCSŒšg
 
¡r
;

11213 
¡r
.
	`FÜm©
(
TXT_NO_CONVERSION_s_TO_s
, 
rùx
->
ty³
.
d©aTy³
.FÜm©().
	`Add»ssOf
(), 
to
.Format().AddressOf());

11214 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), 
node
);

11218 ifĞ!
lùx
->
ty³
.
d©aTy³
.
	`IsObjeùHªdË
() )

11220 
	`E¼Ü
(
TXT_OPERANDS_MUST_BE_HANDLES
, 
node
);

11223 
ùx
->
ty³
.
	`S‘
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
Œue
));

11225 
İ
 = 
node
->
tok’Ty³
;

11226 ifĞ
İ
 =ğ
‰Equ®
 || o°=ğ
‰NÙEqu®
 || o°=ğ
‰Is
 || o°=ğ
‰NÙIs
 )

11229 ifĞ
lùx
->
ty³
.
isV¬ŸbË
 )

11230 
lùx
->
bc
.
	`In¡r
(
asBC_PİPŒ
);

11231 ifĞ
rùx
->
ty³
.
isV¬ŸbË
 )

11232 
rùx
->
bc
.
	`In¡r
(
asBC_PİPŒ
);

11235 
	`CÚv”tToV¬ŸbËNÙIn
(
lùx
, 
rùx
);

11236 
	`CÚv”tToV¬ŸbË
(
rùx
);

11238 
	`M”geEx´By‹code
(
ùx
, 
lùx
);

11239 
	`M”geEx´By‹code
(
ùx
, 
rùx
);

11241 
a
 = 
	`AÎoÿ‹V¬ŸbË
(
ùx
->
ty³
.
d©aTy³
, 
Œue
);

11242 
b
 = 
lùx
->
ty³
.
¡ackOff£t
;

11243 
c
 = 
rùx
->
ty³
.
¡ackOff£t
;

11245 
ùx
->
bc
.
	`In¡rW_W
(
asBC_CmpPŒ
, 
b
, 
c
);

11247 ifĞ
İ
 =ğ
‰Equ®
 || o°=ğ
‰Is
 )

11248 
ùx
->
bc
.
	`In¡r
(
asBC_TZ
);

11249 ifĞ
İ
 =ğ
‰NÙEqu®
 || o°=ğ
‰NÙIs
 )

11250 
ùx
->
bc
.
	`In¡r
(
asBC_TNZ
);

11252 
ùx
->
bc
.
	`In¡rSHORT
(
asBC_CpyRtoV4
, ()
a
);

11254 
ùx
->
ty³
.
	`S‘V¬ŸbË
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
Œue
), 
a
,rue);

11256 
	`R–—£TempÜ¬yV¬ŸbË
(
lùx
->
ty³
, &
ùx
->
bc
);

11257 
	`R–—£TempÜ¬yV¬ŸbË
(
rùx
->
ty³
, &
ùx
->
bc
);

11258 
	`ProûssDeã¼edP¬ams
(
ùx
);

11263 
	`E¼Ü
(
TXT_ILLEGAL_OPERATION
, 
node
);

11265 
	}
}

11268 
	gasCComp”
::
P”fÜmFunùiÚC®l
(
funcId
, 
asSEx´CÚ‹xt
 *
ùx
, 
boŞ
 
isCÚ¡ruùÜ
, 
asCA¼ay
<asSEx´CÚ‹xt*> *
¬gs
, 
asCObjeùTy³
 *
objTy³
, boŞ 
u£V¬ŸbË
, 
v¬Off£t
, 
funcPŒV¬
)

11270 
asCSütFunùiÚ
 *
	gdesü
 = 
bud”
->
G‘FunùiÚDesütiÚ
(
funcId
);

11273 ifĞ
	goutFunc
->
IsSh¬ed
(è&& !
	gdesü
->IsShared() )

11275 
asCSŒšg
 
	gmsg
;

11276 
	gmsg
.
FÜm©
(
TXT_SHARED_CANNOT_CALL_NON_SHARED_FUNC_s
, 
desü
->
G‘Deş¬©iÚSŒ
().
Add»ssOf
());

11277 
E¼Ü
(
msg
.
Add»ssOf
(), 
ùx
->
ex´Node
);

11281 ifĞ
	gdesü
->
	gisPriv©e
 && desü->
G‘ObjeùTy³
(è!ğ
outFunc
->GetObjectType() )

11283 
asCSŒšg
 
msg
;

11284 
	gmsg
.
FÜm©
(
TXT_PRIVATE_METHOD_CALL_s
, 
desü
->
G‘Deş¬©iÚSŒ
().
Add»ssOf
());

11285 
E¼Ü
(
msg
.
Add»ssOf
(), 
ùx
->
ex´Node
);

11288 
	g¬gSize
 = 
desü
->
G‘S·ûN“dedFÜArgum’ts
();

11290 ifĞ
	gdesü
->
	gobjeùTy³
 && desü->
	g»tuºTy³
.
IsReã»nû
() &&

11291 !
	gùx
->
	gty³
.
	gisV¬ŸbË
 && (ùx->ty³.
	gd©aTy³
.
IsObjeùHªdË
(è|| ctx->ty³.d©aTy³.
SuµÜtHªdËs
()) &&

11292 !(
	gùx
->
	gty³
.
	gd©aTy³
.
G‘ObjeùTy³
()->
G‘FÏgs
(è& 
	gasOBJ_SCOPED
) &&

11293 !(
	gùx
->
	gty³
.
	gd©aTy³
.
G‘ObjeùTy³
()->
G‘FÏgs
(è& 
	gasOBJ_ASHANDLE
) )

11298 
	g‹mpRef
 = 
AÎoÿ‹V¬ŸbË
(
ùx
->
ty³
.
d©aTy³
, 
Œue
);

11299 
	gùx
->
	gbc
.
In¡rSHORT
(
asBC_PSF
, ()
‹mpRef
);

11300 
	gùx
->
	gbc
.
In¡rPTR
(
asBC_REFCPY
, 
ùx
->
ty³
.
d©aTy³
.
G‘ObjeùTy³
());

11303 
asSDeã¼edP¬am
 
	gdeã¼ed
;

11304 
	gdeã¼ed
.
	gÜigEx´
 = 0;

11305 
	gdeã¼ed
.
	g¬gInOutFÏgs
 = 
asTM_INREF
;

11306 
	gdeã¼ed
.
	g¬gNode
 = 0;

11307 
	gdeã¼ed
.
	g¬gTy³
.
S‘V¬ŸbË
(
ùx
->
ty³
.
d©aTy³
, 
‹mpRef
, 
Œue
);

11309 
	gùx
->
	gdeã¼edP¬ams
.
PushLa¡
(
deã¼ed
);

11312 
	gùx
->
	gty³
.
S‘Dummy
();

11315 ifĞ
	gisCÚ¡ruùÜ
 )

11320 
asASSERT
(
u£V¬ŸbË
 =ğ
çl£
);

11322 
	gùx
->
	gbc
.
AÎoc
(
asBC_ALLOC
, 
objTy³
, 
desü
->
id
, 
¬gSize
+
AS_PTR_SIZE
);

11325 
	gùx
->
	gty³
.
S‘
(
asCD©aTy³
::
C»©ePrim™ive
(
‰Void
, 
çl£
));

11326 
	gùx
->
	gty³
.
	gisLV®ue
 = 
çl£
;

11329 ifĞ
	g¬gs
 )

11330 
Aá”FunùiÚC®l
(
funcId
, *
¬gs
, 
ùx
, 
çl£
);

11332 
ProûssDeã¼edP¬ams
(
ùx
);

11338 ifĞ
	gdesü
->
	gobjeùTy³
 )

11339 
	g¬gSize
 +ğ
AS_PTR_SIZE
;

11343 ifĞ
	gdesü
->
DÛsR‘uºOnSck
() )

11345 
	g¬gSize
 +ğ
AS_PTR_SIZE
;

11355 ifĞ
	gdesü
->
	gfuncTy³
 =ğ
asFUNC_IMPORTED
 )

11356 
ùx
->
bc
.
C®l
(
asBC_CALLBND
 , 
desü
->
id
, 
¬gSize
);

11358 ifĞ
	gdesü
->
	gfuncTy³
 =ğ
asFUNC_INTERFACE
 || 
desü
->
funcTy³
 =ğ
asFUNC_VIRTUAL
 )

11359 
ùx
->
bc
.
C®l
(
asBC_CALLINTF
, 
desü
->
id
, 
¬gSize
);

11360 ifĞ
	gdesü
->
	gfuncTy³
 =ğ
asFUNC_SCRIPT
 )

11361 
ùx
->
bc
.
C®l
(
asBC_CALL
 , 
desü
->
id
, 
¬gSize
);

11362 ifĞ
	gdesü
->
	gfuncTy³
 =ğ
asFUNC_SYSTEM
 )

11363 
ùx
->
bc
.
C®l
(
asBC_CALLSYS
 , 
desü
->
id
, 
¬gSize
);

11364 ifĞ
	gdesü
->
	gfuncTy³
 =ğ
asFUNC_FUNCDEF
 )

11365 
ùx
->
bc
.
C®lPŒ
(
asBC_C®lPŒ
, 
funcPŒV¬
, 
¬gSize
);

11368 ifĞ
	gdesü
->
	g»tuºTy³
.
IsObjeù
(è&& !desü->»tuºTy³.
IsReã»nû
() )

11370 
	g»tuºOff£t
 = 0;

11372 ifĞ
	gdesü
->
DÛsR‘uºOnSck
() )

11374 
asASSERT
Ğ
u£V¬ŸbË
 );

11377 
	g»tuºOff£t
 = 
v¬Off£t
;

11378 
	gùx
->
	gty³
.
S‘V¬ŸbË
(
desü
->
»tuºTy³
, 
»tuºOff£t
, 
Œue
);

11381 
	gùx
->
	gbc
.
ObjInfo
(
v¬Off£t
, 
asOBJ_INIT
);

11385 ifĞ
	gu£V¬ŸbË
 )

11388 
	g»tuºOff£t
 = 
v¬Off£t
;

11389 
	gùx
->
	gty³
.
S‘V¬ŸbË
(
desü
->
»tuºTy³
, 
»tuºOff£t
, 
çl£
);

11396 
	g»tuºOff£t
 = 
AÎoÿ‹V¬ŸbË
(
desü
->
»tuºTy³
, 
Œue
,rue);

11397 
	gùx
->
	gty³
.
S‘V¬ŸbË
(
desü
->
»tuºTy³
, 
»tuºOff£t
, 
Œue
);

11401 
	gùx
->
	gbc
.
In¡rSHORT
(
asBC_STOREOBJ
, ()
»tuºOff£t
);

11404 
	gùx
->
	gty³
.
	gd©aTy³
.
MakeReã»nû
(
IsV¬ŸbËOnH—p
(
»tuºOff£t
));

11405 
	gùx
->
	gty³
.
	gisLV®ue
 = 
çl£
;

11408 ifĞ
	g¬gs
 )

11409 
Aá”FunùiÚC®l
(
funcId
, *
¬gs
, 
ùx
, 
çl£
);

11411 
ProûssDeã¼edP¬ams
(
ùx
);

11413 
	gùx
->
	gbc
.
In¡rSHORT
(
asBC_PSF
, ()
»tuºOff£t
);

11415 ifĞ
	gdesü
->
	g»tuºTy³
.
IsReã»nû
() )

11417 
asASSERT
(
u£V¬ŸbË
 =ğ
çl£
);

11421 ifĞ
	g¬gs
 )

11422 
Aá”FunùiÚC®l
(
funcId
, *
¬gs
, 
ùx
, 
Œue
);

11430 ifĞ
	gùx
->
	gty³
.
	gisTempÜ¬y
 )

11432 
asSDeã¼edP¬am
 
	gdeãr
;

11433 
	gdeãr
.
	g¬gNode
 = 0;

11434 
	gdeãr
.
	g¬gTy³
 = 
ùx
->
ty³
;

11435 
	gdeãr
.
	g¬gInOutFÏgs
 = 
asTM_INOUTREF
;

11436 
	gdeãr
.
	gÜigEx´
 = 0;

11437 
	gùx
->
	gdeã¼edP¬ams
.
PushLa¡
(
deãr
);

11440 
	gùx
->
	gty³
.
S‘
(
desü
->
»tuºTy³
);

11441 ifĞ!
	gdesü
->
	g»tuºTy³
.
IsPrim™ive
() )

11443 
	gùx
->
	gbc
.
In¡r
(
asBC_PshRPŒ
);

11444 ifĞ
	gdesü
->
	g»tuºTy³
.
IsObjeù
() &&

11445 !
	gdesü
->
	g»tuºTy³
.
IsObjeùHªdË
() )

11449 
	gùx
->
	gty³
.
	gd©aTy³
.
MakeReã»nû
(
çl£
);

11454 
	gùx
->
	gty³
.
	gisLV®ue
 = 
Œue
;

11458 
asASSERT
(
u£V¬ŸbË
 =ğ
çl£
);

11460 ifĞ
	gdesü
->
	g»tuºTy³
.
G‘SizeInMemÜyBy‹s
() )

11464 
	gl
 = (
»£rvedV¬ŸbËs
.
G‘L’gth
());

11465  
asUINT
 
	gn
 = 0; 
	g¬gs
 &&‚ <‡rgs->
G‘L’gth
();‚++ )

11467 
asSEx´CÚ‹xt
 *
	gex´
 = (*
¬gs
)[
n
]->
ÜigEx´
;

11468 ifĞ
	gex´
 )

11469 
	gex´
->
	gbc
.
G‘V¬sU£d
(
»£rvedV¬ŸbËs
);

11471 
	goff£t
 = 
AÎoÿ‹V¬ŸbË
(
desü
->
»tuºTy³
, 
Œue
);

11472 
	g»£rvedV¬ŸbËs
.
S‘L’gth
(
l
);

11474 
	gùx
->
	gty³
.
S‘V¬ŸbË
(
desü
->
»tuºTy³
, 
off£t
, 
Œue
);

11477 ifĞ
	gdesü
->
	g»tuºTy³
.
G‘SizeOnSckDWÜds
() == 1 )

11478 
ùx
->
bc
.
In¡rSHORT
(
asBC_CpyRtoV4
, ()
off£t
);

11479 ifĞ
	gdesü
->
	g»tuºTy³
.
G‘SizeOnSckDWÜds
() == 2 )

11480 
ùx
->
bc
.
In¡rSHORT
(
asBC_CpyRtoV8
, ()
off£t
);

11483 
	gùx
->
	gty³
.
S‘
(
desü
->
»tuºTy³
);

11485 
	gùx
->
	gty³
.
	gisLV®ue
 = 
çl£
;

11488 ifĞ
	g¬gs
 )

11489 
Aá”FunùiÚC®l
(
funcId
, *
¬gs
, 
ùx
, 
çl£
);

11491 
ProûssDeã¼edP¬ams
(
ùx
);

11496 
	gasCComp”
::
	$M”geEx´By‹code
(
asSEx´CÚ‹xt
 *
befÜe
,‡sSEx´CÚ‹xˆ*
aá”
)

11498 
befÜe
->
bc
.
	`AddCode
(&
aá”
->bc);

11500  
asUINT
 
n
 = 0;‚ < 
aá”
->
deã¼edP¬ams
.
	`G‘L’gth
();‚++ )

11502 
befÜe
->
deã¼edP¬ams
.
	`PushLa¡
(
aá”
->deã¼edP¬ams[
n
]);

11503 
aá”
->
deã¼edP¬ams
[
n
].
ÜigEx´
 = 0;

11506 
aá”
->
deã¼edP¬ams
.
	`S‘L’gth
(0);

11507 
	}
}

11510 
	gasCComp”
::
	$M”geEx´By‹codeAndTy³
(
asSEx´CÚ‹xt
 *
befÜe
,‡sSEx´CÚ‹xˆ*
aá”
)

11512 
	`M”geEx´By‹code
(
befÜe
, 
aá”
);

11514 
befÜe
->
ty³
 = 
aá”
->type;

11515 
befÜe
->
´İ”ty_g‘
 = 
aá”
->property_get;

11516 
befÜe
->
´İ”ty_£t
 = 
aá”
->property_set;

11517 
befÜe
->
´İ”ty_cÚ¡
 = 
aá”
->property_const;

11518 
befÜe
->
´İ”ty_hªdË
 = 
aá”
->property_handle;

11519 
befÜe
->
´İ”ty_»f
 = 
aá”
->property_ref;

11520 
befÜe
->
´İ”ty_¬g
 = 
aá”
->property_arg;

11521 
befÜe
->
ex´Node
 = 
aá”
->exprNode;

11523 
aá”
->
´İ”ty_¬g
 = 0;

11526 
	}
}

11528 
	gasCComp”
::
F‹rCÚ¡
(
asCA¼ay
<> &
funcs
, 
boŞ
 
»moveCÚ¡
)

11530 ifĞ
	gfuncs
.
G‘L’gth
() == 0 ) ;

11533 
asCSütFunùiÚ
 *
	gdesc
 = 
bud”
->
G‘FunùiÚDesütiÚ
(
funcs
[0]);

11534 ifĞ
	gdesc
->
	gobjeùTy³
 == 0 ) ;

11537 
asUINT
 
	gn
;

11538 
boŞ
 
	gfoundNÚCÚ¡
 = 
çl£
;

11539  
	gn
 = 0;‚ < 
	gfuncs
.
G‘L’gth
();‚++ )

11541 
	gdesc
 = 
bud”
->
G‘FunùiÚDesütiÚ
(
funcs
[
n
]);

11542 ifĞ
	gdesc
->
	gisR—dOÆy
 !ğ
»moveCÚ¡
 )

11544 
foundNÚCÚ¡
 = 
Œue
;

11549 ifĞ
	gfoundNÚCÚ¡
 )

11552  
	gn
 = 0;‚ < 
	gfuncs
.
G‘L’gth
();‚++ )

11554 
	gdesc
 = 
bud”
->
G‘FunùiÚDesütiÚ
(
funcs
[
n
]);

11555 ifĞ
	gdesc
->
	gisR—dOÆy
 =ğ
»moveCÚ¡
 )

11557 ifĞ
n
 =ğ
funcs
.
G‘L’gth
() - 1 )

11558 
funcs
.
PİLa¡
();

11560 
	gfuncs
[
n
] = 
funcs
.
PİLa¡
();

11562 
	gn
--;

11568 
	gEND_AS_NAMESPACE


	@../src/script/as_configgroup.cpp

40 
	~"as_cÚfig.h
"

41 
	~"as_cÚfiggroup.h
"

42 
	~"as_sü‹ngše.h
"

44 
BEGIN_AS_NAMESPACE


46 
	gasCCÚfigGroup
::
	$asCCÚfigGroup
()

48 
»fCouÁ
 = 0;

49 
	}
}

51 
	gasCCÚfigGroup
::~
	$asCCÚfigGroup
()

53 
	}
}

55 
asCCÚfigGroup
::
	$AddRef
()

57 
»fCouÁ
++;

58  
»fCouÁ
;

59 
	}
}

61 
	gasCCÚfigGroup
::
	$R–—£
()

64 
»fCouÁ
--;

65  
»fCouÁ
;

66 
	}
}

68 
asCObjeùTy³
 *
	gasCCÚfigGroup
::
	$FšdTy³
(cÚ¡ *
obj
)

70  
asUINT
 
n
 = 0;‚ < 
objTy³s
.
	`G‘L’gth
();‚++ )

71 ifĞ
objTy³s
[
n
]->
Çme
 =ğ
obj
 )

72  
objTy³s
[
n
];

75 
	}
}

77 
	gasCCÚfigGroup
::
	$RefCÚfigGroup
(
asCCÚfigGroup
 *
group
)

79 ifĞ
group
 =ğ
this
 || group == 0 ) ;

82  
asUINT
 
n
 = 0;‚ < 
»ã»nûdCÚfigGroups
.
	`G‘L’gth
();‚++ )

83 ifĞ
»ã»nûdCÚfigGroups
[
n
] =ğ
group
 )

86 
»ã»nûdCÚfigGroups
.
	`PushLa¡
(
group
);

87 
group
->
	`AddRef
();

88 
	}
}

90 
boŞ
 
	gasCCÚfigGroup
::
	$HasLiveObjeùs
()

92  
asUINT
 
n
 = 0;‚ < 
objTy³s
.
	`G‘L’gth
();‚++ )

93 ifĞ
objTy³s
[
n
]->
	`G‘RefCouÁ
() != 0 )

94  
Œue
;

96  
çl£
;

97 
	}
}

99 
	gasCCÚfigGroup
::
	$RemoveCÚfigu¿tiÚ
(
asCSütEngše
 *
’gše
, 
boŞ
 
nÙU£d
)

101 
	`asASSERT
Ğ
»fCouÁ
 == 0 );

103 
asUINT
 
n
;

106  
n
 = 0;‚ < 
glob®Prİs
.
	`G‘L’gth
();‚++ )

108 
šdex
 = 
’gše
->
»gi¡”edGlob®Prİs
.
	`IndexOf
(
glob®Prİs
[
n
]);

109 ifĞ
šdex
 >= 0 )

111 
glob®Prİs
[
n
]->
	`R–—£
();

114 
’gše
->
»gi¡”edGlob®Prİs
[
šdex
] = 0;

117 
glob®Prİs
.
	`S‘L’gth
(0);

120  
n
 = 0;‚ < 
sütFunùiÚs
.
	`G‘L’gth
();‚++ )

122 
sütFunùiÚs
[
n
]->
	`R–—£
();

123 
’gše
->
»gi¡”edGlob®Funcs
.
	`RemoveV®ue
(
sütFunùiÚs
[
n
]);

124 ifĞ
’gše
->
¡ršgFaùÜy
 =ğ
sütFunùiÚs
[
n
] )

125 
’gše
->
¡ršgFaùÜy
 = 0;

127 
sütFunùiÚs
.
	`S‘L’gth
(0);

130  
n
 = 0;‚ < 
objTy³s
.
	`G‘L’gth
();‚++ )

132 
asCObjeùTy³
 *
obj
 = 
objTy³s
[
n
];

134 
obj
->
	`R–—£AÎFunùiÚs
();

138  
n
 = 0;‚ < 
funcDefs
.
	`G‘L’gth
();‚++ )

140 
’gše
->
»gi¡”edFuncDefs
.
	`RemoveV®ue
(
funcDefs
[
n
]);

141 
funcDefs
[
n
]->
	`R–—£
();

143 
funcDefs
.
	`S‘L’gth
(0);

146 ifĞ!
nÙU£d
 )

148  
n
 = 0;‚ < 
objTy³s
.
	`G‘L’gth
();‚++ )

150 
asCObjeùTy³
 *
t
 = 
objTy³s
[
n
];

151 
idx
 = 
’gše
->
objeùTy³s
.
	`IndexOf
(
t
);

152 ifĞ
idx
 >= 0 )

154 #ifdeà
AS_DEBUG


155 
	`V®id©eNoU§ge
(
’gše
, 
t
);

158 
’gše
->
objeùTy³s
.
	`RemoveIndex
(
idx
);

160 ifĞ
t
->
æags
 & 
asOBJ_TYPEDEF
 )

161 
’gše
->
»gi¡”edTy³Defs
.
	`RemoveV®ue
(
t
);

162 ifĞ
t
->
æags
 & 
asOBJ_ENUM
 )

163 
’gše
->
»gi¡”edEnums
.
	`RemoveV®ue
(
t
);

165 
’gše
->
»gi¡”edObjTy³s
.
	`RemoveV®ue
(
t
);

167 
	`asDELETE
(
t
, 
asCObjeùTy³
);

170 
objTy³s
.
	`S‘L’gth
(0);

174  
n
 = 0;‚ < 
»ã»nûdCÚfigGroups
.
	`G‘L’gth
();‚++ )

175 
»ã»nûdCÚfigGroups
[
n
]->
»fCouÁ
--;

176 
»ã»nûdCÚfigGroups
.
	`S‘L’gth
(0);

177 
	}
}

179 #ifdeà
AS_DEBUG


180 
	gasCCÚfigGroup
::
	$V®id©eNoU§ge
(
asCSütEngše
 *
’gše
, 
asCObjeùTy³
 *
ty³
)

182  
asUINT
 
n
 = 0;‚ < 
’gše
->
sütFunùiÚs
.
	`G‘L’gth
();‚++ )

184 
asCSütFunùiÚ
 *
func
 = 
’gše
->
sütFunùiÚs
[
n
];

185 ifĞ
func
 == 0 ) ;

188 ifĞ
func
->
Çme
 =ğ"_beh_2_" || func->Çm=ğ"_beh_3_" || func->
objeùTy³
 =ğ
ty³
 )

191 
	`asASSERT
Ğ
func
->
»tuºTy³
.
	`G‘ObjeùTy³
(è!ğ
ty³
 );

193  
asUINT
 
p
 = 0;… < 
func
->
·¿m‘”Ty³s
.
	`G‘L’gth
();…++ )

195 
	`asASSERT
(
func
->
·¿m‘”Ty³s
[
p
].
	`G‘ObjeùTy³
(è!ğ
ty³
);

206 
	}
}

209 
	gEND_AS_NAMESPACE


	@../src/script/as_context.cpp

38 
	~<m©h.h
>

40 
	~"as_cÚfig.h
"

41 
	~"as_cÚ‹xt.h
"

42 
	~"as_sü‹ngše.h
"

43 
	~"as_tok’def.h
"

44 
	~"as_‹xts.h
"

45 
	~"as_ÿÎfunc.h
"

46 
	~"as_g’”ic.h
"

47 
	~"as_debug.h
"

48 
	~"as_by‹code.h
"

49 
	~"as_sütobjeù.h
"

51 #ifdeà
_MSC_VER


52 #´agm¨
w¬nšg
(
di§bË
:4702)

55 
BEGIN_AS_NAMESPACE


59 cÚ¡ 
	gRESERVE_STACK
 = 2*
AS_PTR_SIZE
;

62 cÚ¡ 
	gCALLSTACK_FRAME_SIZE
 = 5;

65 #ià
defšed
(
AS_DEBUG
)

67 şas 
	casCDebugSts


69 
	mpublic
:

70 
	$asCDebugSts
()

72 
	`mem£t
(
š¡rCouÁ
, 0, (instrCount));

73 
	`mem£t
(
š¡rCouÁ2
, 0, (instrCount2));

74 
Ï¡BC
 = 255;

77 ~
	$asCDebugSts
()

82 
	`_mkdœ
("AS_DEBUG");

83 #ià
_MSC_VER
 >= 1500

84 
FILE
 *
f
;

85 
	`fİ’_s
(&
f
, "AS_DEBUG/stats.txt", "wt");

87 
FILE
 *
f
 = 
	`fİ’
("AS_DEBUG/stats.txt", "wt");

89 ifĞ
f
 )

92 
	`årštf
(
f
, "\nTotal count\n");

93 
n
;

94  
n
 = 0;‚ < 
asBC_MAXBYTECODE
;‚++ )

96 ifĞ
asBCInfo
[
n
].
Çme
 && 
š¡rCouÁ
[n] > 0 )

97 
	`årštf
(
f
, "%-10.10 : %.0f\n", 
asBCInfo
[
n
].
Çme
, 
š¡rCouÁ
[n]);

100 
	`årštf
(
f
, "\nNeverƒxecuted\n");

101  
n
 = 0;‚ < 
asBC_MAXBYTECODE
;‚++ )

103 ifĞ
asBCInfo
[
n
].
Çme
 && 
š¡rCouÁ
[n] == 0 )

104 
	`årštf
(
f
, "%-10.10s\n", 
asBCInfo
[
n
].
Çme
);

107 
	`årštf
(
f
, "\nSequences\n");

108  
n
 = 0;‚ < 256;‚++ )

110 ifĞ
asBCInfo
[
n
].
Çme
 )

112  
m
 = 0; m < 256; m++ )

114 ifĞ
š¡rCouÁ2
[
n
][
m
] )

115 
	`årštf
(
f
, "%-10.10s, %-10.10 : %.0f\n", 
asBCInfo
[
n
].
Çme
,‡sBCInfo[
m
].Çme, 
š¡rCouÁ2
[n][m]);

119 
	`fşo£
(
f
);

121 
	}
}

123 
	$In¡r
(
asBYTE
 
bc
)

125 ++
š¡rCouÁ
[
bc
];

126 ++
š¡rCouÁ2
[
Ï¡BC
][
bc
];

127 
Ï¡BC
 = 
bc
;

128 
	}
}

131 
	gš¡rCouÁ
[256];

132 
	gš¡rCouÁ2
[256][256];

133 
	gÏ¡BC
;

134 } 
	g¡©s
;

138 
AS_API
 
asISütCÚ‹xt
 *
	$asG‘AùiveCÚ‹xt
()

140 
asCTh»adLoÿlD©a
 *
d
 = 
asCTh»adMªag”
::
	`G‘LoÿlD©a
();

141 ifĞ
d
->
aùiveCÚ‹xts
.
	`G‘L’gth
() == 0 )

143  
d
->
aùiveCÚ‹xts
[d->aùiveCÚ‹xts.
	`G‘L’gth
()-1];

144 
	}
}

146 
	$asPushAùiveCÚ‹xt
(
asISütCÚ‹xt
 *
ùx
)

148 
asCTh»adLoÿlD©a
 *
d
 = 
asCTh»adMªag”
::
	`G‘LoÿlD©a
();

149 
d
->
aùiveCÚ‹xts
.
	`PushLa¡
(
ùx
);

150 
	}
}

152 
	$asPİAùiveCÚ‹xt
(
asISütCÚ‹xt
 *
ùx
)

154 
asCTh»adLoÿlD©a
 *
d
 = 
asCTh»adMªag”
::
	`G‘LoÿlD©a
();

156 
	`asASSERT
(
d
->
aùiveCÚ‹xts
.
	`G‘L’gth
() > 0);

157 
	`asASSERT
(
d
->
aùiveCÚ‹xts
[d->aùiveCÚ‹xts.
	`G‘L’gth
()-1] =ğ
ùx
);

158 
	`UNUSED_VAR
(
ùx
);

160 
d
->
aùiveCÚ‹xts
.
	`PİLa¡
();

161 
	}
}

163 
	gasCCÚ‹xt
::
	$asCCÚ‹xt
(
asCSütEngše
 *
’gše
, 
boŞ
 
hŞdRef
)

165 
m_»fCouÁ
.
	`£t
(1);

167 
m_hŞdEngšeRef
 = 
hŞdRef
;

168 ifĞ
hŞdRef
 )

169 
’gše
->
	`AddRef
();

171 
m_’gše
 = 
’gše
;

172 
m_¡©us
 = 
asEXECUTION_UNINITIALIZED
;

173 
m_¡ackBlockSize
 = 0;

174 
m_Üigš®SckPoš‹r
 = 0;

175 
m_šExû±iÚHªdËr
 = 
çl£
;

176 
m_isSckMemÜyNÙAÎoÿ‹d
 = 
çl£
;

177 
m_cu¼’tFunùiÚ
 = 0;

178 
m_ÿÎšgSy¡emFunùiÚ
 = 0;

179 
m_»gs
.
objeùRegi¡”
 = 0;

180 
m_š™ŸlFunùiÚ
 = 0;

181 
m_lšeC®lback
 = 
çl£
;

182 
m_exû±iÚC®lback
 = 
çl£
;

183 
m_»gs
.
doProûssSu¥’d
 = 
çl£
;

184 
m_doSu¥’d
 = 
çl£
;

185 
m_u£rD©a
 = 0;

186 
m_»gs
.
ùx
 = 
this
;

187 
	}
}

189 
	gasCCÚ‹xt
::~
	$asCCÚ‹xt
()

191 
	`D‘achEngše
();

192 
	}
}

195 
boŞ
 
	gasCCÚ‹xt
::
	$IsNe¡ed
(
asUINT
 *
Ã¡CouÁ
) const

197 ifĞ
Ã¡CouÁ
 )

198 *
Ã¡CouÁ
 = 0;

200 
asUINT
 
c
 = 
	`G‘C®l¡ackSize
();

201 ifĞ
c
 == 0 )

202  
çl£
;

205  
asUINT
 
n
 = 1;‚ <ğ
c
;‚++ )

207 cÚ¡ 
asPWORD
 *
s
 = 
m_ÿÎSck
.
	`Add»ssOf
(è+ (
c
 - 
n
)*
CALLSTACK_FRAME_SIZE
;

208 ifĞ
s
 && s[0] == 0 )

210 ifĞ
Ã¡CouÁ
 )

211 (*
Ã¡CouÁ
)++;

213  
Œue
;

217  
çl£
;

218 
	}
}

221 
	gasCCÚ‹xt
::
	$AddRef
() const

223  
m_»fCouÁ
.
	`©omicInc
();

224 
	}
}

227 
	gasCCÚ‹xt
::
	$R–—£
() const

229 
r
 = 
m_»fCouÁ
.
	`©omicDec
();

231 ifĞ
r
 == 0 )

233 
	`asDELETE
(
cÚ¡_ÿ¡
<
asCCÚ‹xt
*>(
this
),asCContext);

237  
r
;

238 
	}
}

241 
	gasCCÚ‹xt
::
	$D‘achEngše
()

243 ifĞ
m_’gše
 == 0 ) ;

249 
	`AbÜt
();

252 
	`UÅ»·»
();

254  
	`IsNe¡ed
() );

257  
asUINT
 
n
 = 0;‚ < 
m_¡ackBlocks
.
	`G‘L’gth
();‚++ )

259 ifĞ
m_¡ackBlocks
[
n
] )

261 
	`asDELETEARRAY
(
m_¡ackBlocks
[
n
]);

264 
m_¡ackBlocks
.
	`S‘L’gth
(0);

265 
m_¡ackBlockSize
 = 0;

268 ifĞ
m_u£rD©a
 && 
m_’gše
->
ş—nCÚ‹xtFunc
 )

269 
m_’gše
->
	`ş—nCÚ‹xtFunc
(
this
);

272 ifĞ
m_hŞdEngšeRef
 )

273 
m_’gše
->
	`R–—£
();

274 
m_’gše
 = 0;

275 
	}
}

278 
asISütEngše
 *
	gasCCÚ‹xt
::
	$G‘Engše
() const

280  
m_’gše
;

281 
	}
}

284 *
	gasCCÚ‹xt
::
	$S‘U£rD©a
(*
d©a
)

286 *
ŞdD©a
 = 
m_u£rD©a
;

287 
m_u£rD©a
 = 
d©a
;

288  
ŞdD©a
;

289 
	}
}

292 *
	gasCCÚ‹xt
::
	$G‘U£rD©a
() const

294  
m_u£rD©a
;

295 
	}
}

297 #ifdeà
AS_DEPRECATED


300 
	gasCCÚ‹xt
::
	$P»·»
(
funcId
)

302 ifĞ
funcId
 == -1 )

304 ifĞ
m_š™ŸlFunùiÚ
 == 0 )

305  
asNO_FUNCTION
;

307 
funcId
 = 
m_š™ŸlFunùiÚ
->
	`G‘Id
();

309  
	`P»·»
(
’gše
->
	`G‘FunùiÚById
(
funcId
));

310 
	}
}

314 
asISütFunùiÚ
 *
	gasCCÚ‹xt
::
	$G‘Sy¡emFunùiÚ
()

316  
m_ÿÎšgSy¡emFunùiÚ
;

317 
	}
}

320 
	gasCCÚ‹xt
::
	$P»·»
(
asISütFunùiÚ
 *
func
)

322 ifĞ
func
 == 0 )

324 
asCSŒšg
 
¡r
;

325 
¡r
.
	`FÜm©
(
TXT_FAILED_IN_FUNC_s_WITH_s
, "Prepare", "null");

326 
m_’gše
->
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_ERROR
, 
¡r
.
	`Add»ssOf
());

327  
asNO_FUNCTION
;

330 ifĞ
m_¡©us
 =ğ
asEXECUTION_ACTIVE
 || m_¡©u =ğ
asEXECUTION_SUSPENDED
 )

332 
asCSŒšg
 
¡r
;

333 
¡r
.
	`FÜm©
(
TXT_FAILED_IN_FUNC_s
, "Prepare");

334 
m_’gše
->
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_ERROR
, 
¡r
.
	`Add»ssOf
());

335  
asCONTEXT_ACTIVE
;

339 ifĞ
m_¡©us
 !ğ
asEXECUTION_FINISHED
 && m_¡©u !ğ
asEXECUTION_UNINITIALIZED
 )

340 
	`CËªSck
();

343 
	`CËªR‘uºObjeù
();

345 ifĞ
m_š™ŸlFunùiÚ
 && m_š™ŸlFunùiÚ =ğ
func
 )

348 
m_cu¼’tFunùiÚ
 = 
m_š™ŸlFunùiÚ
;

351 
m_»gs
.
¡ackPoš‹r
 = 
m_Üigš®SckPoš‹r
;

355 
	`asASSERT
Ğ
	`IsNe¡ed
(è|| 
m_¡ackIndex
 > 0 || (
m_»gs
.
¡ackPoš‹r
 =ğ
m_¡ackBlocks
[0] + 
m_¡ackBlockSize
) );

359 
	`asASSERT
Ğ
m_’gše
 );

361 ifĞ
m_š™ŸlFunùiÚ
 )

363 
m_š™ŸlFunùiÚ
->
	`R–—£
();

366 
m_»gs
.
¡ackPoš‹r
 = 
m_Üigš®SckPoš‹r
;

370 
	`asASSERT
Ğ
	`IsNe¡ed
(è|| 
m_¡ackIndex
 > 0 || (
m_»gs
.
¡ackPoš‹r
 =ğ
m_¡ackBlocks
[0] + 
m_¡ackBlockSize
) );

374 
m_š™ŸlFunùiÚ
 = 
»š‹½»t_ÿ¡
<
asCSütFunùiÚ
 *>(
func
);

375 
m_š™ŸlFunùiÚ
->
	`AddRef
();

376 
m_cu¼’tFunùiÚ
 = 
m_š™ŸlFunùiÚ
;

379 
m_¬gum’tsSize
 = 
m_cu¼’tFunùiÚ
->
	`G‘S·ûN“dedFÜArgum’ts
(è+ (m_cu¼’tFunùiÚ->
objeùTy³
 ? 
AS_PTR_SIZE
 : 0);

382 ifĞ
m_cu¼’tFunùiÚ
->
	`DÛsR‘uºOnSck
() )

384 
m_»tuºV®ueSize
 = 
m_cu¼’tFunùiÚ
->
»tuºTy³
.
	`G‘SizeInMemÜyDWÜds
();

385 
m_¬gum’tsSize
 +ğ
AS_PTR_SIZE
;

388 
m_»tuºV®ueSize
 = 0;

391 
¡ackSize
 = 
m_¬gum’tsSize
 + 
m_»tuºV®ueSize
 + 
m_cu¼’tFunùiÚ
->
¡ackN“ded
;

394 ifĞ!
	`Re£rveSckS·û
(
¡ackSize
) )

395  
asOUT_OF_MEMORY
;

400 ifĞ
m_¡©us
 !ğ
asEXECUTION_FINISHED
 )

402 
m_exû±iÚLše
 = -1;

403 
m_exû±iÚFunùiÚ
 = 0;

404 
m_doAbÜt
 = 
çl£
;

405 
m_doSu¥’d
 = 
çl£
;

406 
m_»gs
.
doProûssSu¥’d
 = 
m_lšeC®lback
;

407 
m_ex‹º®Su¥’dReque¡
 = 
çl£
;

409 
m_¡©us
 = 
asEXECUTION_PREPARED
;

410 
m_»gs
.
´og¿mPoš‹r
 = 0;

413 
m_»gs
.
¡ackF¿mePoš‹r
 = m_»gs.
¡ackPoš‹r
 - 
m_¬gum’tsSize
 - 
m_»tuºV®ueSize
;

414 
m_Üigš®SckPoš‹r
 = 
m_»gs
.
¡ackPoš‹r
;

415 
m_»gs
.
¡ackPoš‹r
 = m_»gs.
¡ackF¿mePoš‹r
;

418 
	`mem£t
(
m_»gs
.
¡ackPoš‹r
, 0, 4*
m_¬gum’tsSize
);

420 ifĞ
m_»tuºV®ueSize
 )

423 
asDWORD
 *
±r
 = 
m_»gs
.
¡ackF¿mePoš‹r
;

424 ifĞ
m_cu¼’tFunùiÚ
->
objeùTy³
 )

425 
±r
 +ğ
AS_PTR_SIZE
;

427 *(**)
±r
 = (*)(
m_»gs
.
¡ackF¿mePoš‹r
 + 
m_¬gum’tsSize
);

430  
asSUCCESS
;

431 
	}
}

434 
	gasCCÚ‹xt
::
	$UÅ»·»
()

436 ifĞ
m_¡©us
 =ğ
asEXECUTION_ACTIVE
 || m_¡©u =ğ
asEXECUTION_SUSPENDED
 )

437  
asCONTEXT_ACTIVE
;

440 ifĞ
m_¡©us
 !ğ
asEXECUTION_UNINITIALIZED
 &&

441 
m_¡©us
 !ğ
asEXECUTION_FINISHED
 )

442 
	`CËªSck
();

445 
	`CËªR‘uºObjeù
();

448 ifĞ
m_š™ŸlFunùiÚ
 )

450 
m_š™ŸlFunùiÚ
->
	`R–—£
();

453 
m_»gs
.
¡ackPoš‹r
 = 
m_Üigš®SckPoš‹r
;

457 
	`asASSERT
Ğ
	`IsNe¡ed
(è|| 
m_¡ackIndex
 > 0 || (
m_»gs
.
¡ackPoš‹r
 =ğ
m_¡ackBlocks
[0] + 
m_¡ackBlockSize
) );

461 
m_š™ŸlFunùiÚ
 = 0;

462 
m_cu¼’tFunùiÚ
 = 0;

463 
m_exû±iÚFunùiÚ
 = 0;

464 
m_»gs
.
´og¿mPoš‹r
 = 0;

467 
m_¡©us
 = 
asEXECUTION_UNINITIALIZED
;

469 
m_»gs
.
¡ackF¿mePoš‹r
 = 0;

472 
	}
}

474 
asBYTE
 
	gasCCÚ‹xt
::
	$G‘R‘uºBy‹
()

476 ifĞ
m_¡©us
 !ğ
asEXECUTION_FINISHED
 )  0;

478 
asCD©aTy³
 *
dt
 = &
m_š™ŸlFunùiÚ
->
»tuºTy³
;

480 ifĞ
dt
->
	`IsObjeù
(è|| dt->
	`IsReã»nû
() )  0;

482  *(
asBYTE
*)&
m_»gs
.
v®ueRegi¡”
;

483 
	}
}

485 
asWORD
 
	gasCCÚ‹xt
::
	$G‘R‘uºWÜd
()

487 ifĞ
m_¡©us
 !ğ
asEXECUTION_FINISHED
 )  0;

489 
asCD©aTy³
 *
dt
 = &
m_š™ŸlFunùiÚ
->
»tuºTy³
;

491 ifĞ
dt
->
	`IsObjeù
(è|| dt->
	`IsReã»nû
() )  0;

493  *(
asWORD
*)&
m_»gs
.
v®ueRegi¡”
;

494 
	}
}

496 
asDWORD
 
	gasCCÚ‹xt
::
	$G‘R‘uºDWÜd
()

498 ifĞ
m_¡©us
 !ğ
asEXECUTION_FINISHED
 )  0;

500 
asCD©aTy³
 *
dt
 = &
m_š™ŸlFunùiÚ
->
»tuºTy³
;

502 ifĞ
dt
->
	`IsObjeù
(è|| dt->
	`IsReã»nû
() )  0;

504  *(
asDWORD
*)&
m_»gs
.
v®ueRegi¡”
;

505 
	}
}

507 
asQWORD
 
	gasCCÚ‹xt
::
	$G‘R‘uºQWÜd
()

509 ifĞ
m_¡©us
 !ğ
asEXECUTION_FINISHED
 )  0;

511 
asCD©aTy³
 *
dt
 = &
m_š™ŸlFunùiÚ
->
»tuºTy³
;

513 ifĞ
dt
->
	`IsObjeù
(è|| dt->
	`IsReã»nû
() )  0;

515  
m_»gs
.
v®ueRegi¡”
;

516 
	}
}

518 
	gasCCÚ‹xt
::
	$G‘R‘uºFlßt
()

520 ifĞ
m_¡©us
 !ğ
asEXECUTION_FINISHED
 )  0;

522 
asCD©aTy³
 *
dt
 = &
m_š™ŸlFunùiÚ
->
»tuºTy³
;

524 ifĞ
dt
->
	`IsObjeù
(è|| dt->
	`IsReã»nû
() )  0;

526  *(*)&
m_»gs
.
v®ueRegi¡”
;

527 
	}
}

529 
	gasCCÚ‹xt
::
	$G‘R‘uºDoubË
()

531 ifĞ
m_¡©us
 !ğ
asEXECUTION_FINISHED
 )  0;

533 
asCD©aTy³
 *
dt
 = &
m_š™ŸlFunùiÚ
->
»tuºTy³
;

535 ifĞ
dt
->
	`IsObjeù
(è|| dt->
	`IsReã»nû
() )  0;

537  *(*)&
m_»gs
.
v®ueRegi¡”
;

538 
	}
}

540 *
	gasCCÚ‹xt
::
	$G‘R‘uºAdd»ss
()

542 ifĞ
m_¡©us
 !ğ
asEXECUTION_FINISHED
 )  0;

544 
asCD©aTy³
 *
dt
 = &
m_š™ŸlFunùiÚ
->
»tuºTy³
;

546 ifĞ
dt
->
	`IsReã»nû
() )

547  *(**)&
m_»gs
.
v®ueRegi¡”
;

548 ifĞ
dt
->
	`IsObjeù
() )

550 ifĞ
m_š™ŸlFunùiÚ
->
	`DÛsR‘uºOnSck
() )

553 
off£t
 = 0;

554 ifĞ
m_š™ŸlFunùiÚ
->
objeùTy³
 )

555 
off£t
 +ğ
AS_PTR_SIZE
;

557  *(**)(&
m_»gs
.
¡ackF¿mePoš‹r
[
off£t
]);

560  
m_»gs
.
objeùRegi¡”
;

564 
	}
}

566 *
	gasCCÚ‹xt
::
	$G‘R‘uºObjeù
()

568 ifĞ
m_¡©us
 !ğ
asEXECUTION_FINISHED
 )  0;

570 
asCD©aTy³
 *
dt
 = &
m_š™ŸlFunùiÚ
->
»tuºTy³
;

572 ifĞ!
dt
->
	`IsObjeù
() )  0;

574 ifĞ
dt
->
	`IsReã»nû
() )

575  *(**)(
asPWORD
)
m_»gs
.
v®ueRegi¡”
;

578 ifĞ
m_š™ŸlFunùiÚ
->
	`DÛsR‘uºOnSck
() )

581 
off£t
 = 0;

582 ifĞ
m_š™ŸlFunùiÚ
->
objeùTy³
 )

583 
off£t
 +ğ
AS_PTR_SIZE
;

585  *(**)(&
m_»gs
.
¡ackF¿mePoš‹r
[
off£t
]);

588  
m_»gs
.
objeùRegi¡”
;

590 
	}
}

592 *
	gasCCÚ‹xt
::
	$G‘Add»ssOfR‘uºV®ue
()

594 ifĞ
m_¡©us
 !ğ
asEXECUTION_FINISHED
 )  0;

596 
asCD©aTy³
 *
dt
 = &
m_š™ŸlFunùiÚ
->
»tuºTy³
;

599 ifĞ!
dt
->
	`IsReã»nû
(è&& dt->
	`IsObjeù
() )

602 ifĞ!
dt
->
	`IsObjeùHªdË
() )

604 ifĞ
m_š™ŸlFunùiÚ
->
	`DÛsR‘uºOnSck
() )

607 
off£t
 = 0;

608 ifĞ
m_š™ŸlFunùiÚ
->
objeùTy³
 )

609 
off£t
 +ğ
AS_PTR_SIZE
;

611  *(**)(&
m_»gs
.
¡ackF¿mePoš‹r
[
off£t
]);

614  *(**)&
m_»gs
.
objeùRegi¡”
;

616  &
m_»gs
.
objeùRegi¡”
;

620  &
m_»gs
.
v®ueRegi¡”
;

621 
	}
}

623 
	gasCCÚ‹xt
::
	$S‘Objeù
(*
obj
)

625 ifĞ
m_¡©us
 !ğ
asEXECUTION_PREPARED
 )

626  
asCONTEXT_NOT_PREPARED
;

628 ifĞ!
m_š™ŸlFunùiÚ
->
objeùTy³
 )

630 
m_¡©us
 = 
asEXECUTION_ERROR
;

631  
asERROR
;

634 *(
asPWORD
*)&
m_»gs
.
¡ackF¿mePoš‹r
[0] = (asPWORD)
obj
;

637 
	}
}

639 
	gasCCÚ‹xt
::
	$S‘ArgBy‹
(
asUINT
 
¬g
, 
asBYTE
 
v®ue
)

641 ifĞ
m_¡©us
 !ğ
asEXECUTION_PREPARED
 )

642  
asCONTEXT_NOT_PREPARED
;

644 ifĞ
¬g
 >ğ()
m_š™ŸlFunùiÚ
->
·¿m‘”Ty³s
.
	`G‘L’gth
() )

646 
m_¡©us
 = 
asEXECUTION_ERROR
;

647  
asINVALID_ARG
;

651 
asCD©aTy³
 *
dt
 = &
m_š™ŸlFunùiÚ
->
·¿m‘”Ty³s
[
¬g
];

652 ifĞ
dt
->
	`IsObjeù
(è|| dt->
	`IsReã»nû
() )

654 
m_¡©us
 = 
asEXECUTION_ERROR
;

655  
asINVALID_TYPE
;

658 ifĞ
dt
->
	`G‘SizeInMemÜyBy‹s
() != 1 )

660 
m_¡©us
 = 
asEXECUTION_ERROR
;

661  
asINVALID_TYPE
;

665 
off£t
 = 0;

666 ifĞ
m_š™ŸlFunùiÚ
->
objeùTy³
 )

667 
off£t
 +ğ
AS_PTR_SIZE
;

670 ifĞ
m_»tuºV®ueSize
 )

671 
off£t
 +ğ
AS_PTR_SIZE
;

673  
asUINT
 
n
 = 0;‚ < 
¬g
;‚++ )

674 
off£t
 +ğ
m_š™ŸlFunùiÚ
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

677 *(
asBYTE
*)&
m_»gs
.
¡ackF¿mePoš‹r
[
off£t
] = 
v®ue
;

680 
	}
}

682 
	gasCCÚ‹xt
::
	$S‘ArgWÜd
(
asUINT
 
¬g
, 
asWORD
 
v®ue
)

684 ifĞ
m_¡©us
 !ğ
asEXECUTION_PREPARED
 )

685  
asCONTEXT_NOT_PREPARED
;

687 ifĞ
¬g
 >ğ
m_š™ŸlFunùiÚ
->
·¿m‘”Ty³s
.
	`G‘L’gth
() )

689 
m_¡©us
 = 
asEXECUTION_ERROR
;

690  
asINVALID_ARG
;

694 
asCD©aTy³
 *
dt
 = &
m_š™ŸlFunùiÚ
->
·¿m‘”Ty³s
[
¬g
];

695 ifĞ
dt
->
	`IsObjeù
(è|| dt->
	`IsReã»nû
() )

697 
m_¡©us
 = 
asEXECUTION_ERROR
;

698  
asINVALID_TYPE
;

701 ifĞ
dt
->
	`G‘SizeInMemÜyBy‹s
() != 2 )

703 
m_¡©us
 = 
asEXECUTION_ERROR
;

704  
asINVALID_TYPE
;

708 
off£t
 = 0;

709 ifĞ
m_š™ŸlFunùiÚ
->
objeùTy³
 )

710 
off£t
 +ğ
AS_PTR_SIZE
;

713 ifĞ
m_»tuºV®ueSize
 )

714 
off£t
 +ğ
AS_PTR_SIZE
;

716  
asUINT
 
n
 = 0;‚ < 
¬g
;‚++ )

717 
off£t
 +ğ
m_š™ŸlFunùiÚ
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

720 *(
asWORD
*)&
m_»gs
.
¡ackF¿mePoš‹r
[
off£t
] = 
v®ue
;

723 
	}
}

725 
	gasCCÚ‹xt
::
	$S‘ArgDWÜd
(
asUINT
 
¬g
, 
asDWORD
 
v®ue
)

727 ifĞ
m_¡©us
 !ğ
asEXECUTION_PREPARED
 )

728  
asCONTEXT_NOT_PREPARED
;

730 ifĞ
¬g
 >ğ()
m_š™ŸlFunùiÚ
->
·¿m‘”Ty³s
.
	`G‘L’gth
() )

732 
m_¡©us
 = 
asEXECUTION_ERROR
;

733  
asINVALID_ARG
;

737 
asCD©aTy³
 *
dt
 = &
m_š™ŸlFunùiÚ
->
·¿m‘”Ty³s
[
¬g
];

738 ifĞ
dt
->
	`IsObjeù
(è|| dt->
	`IsReã»nû
() )

740 
m_¡©us
 = 
asEXECUTION_ERROR
;

741  
asINVALID_TYPE
;

744 ifĞ
dt
->
	`G‘SizeInMemÜyBy‹s
() != 4 )

746 
m_¡©us
 = 
asEXECUTION_ERROR
;

747  
asINVALID_TYPE
;

751 
off£t
 = 0;

752 ifĞ
m_š™ŸlFunùiÚ
->
objeùTy³
 )

753 
off£t
 +ğ
AS_PTR_SIZE
;

756 ifĞ
m_»tuºV®ueSize
 )

757 
off£t
 +ğ
AS_PTR_SIZE
;

759  
asUINT
 
n
 = 0;‚ < 
¬g
;‚++ )

760 
off£t
 +ğ
m_š™ŸlFunùiÚ
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

763 *(
asDWORD
*)&
m_»gs
.
¡ackF¿mePoš‹r
[
off£t
] = 
v®ue
;

766 
	}
}

768 
	gasCCÚ‹xt
::
	$S‘ArgQWÜd
(
asUINT
 
¬g
, 
asQWORD
 
v®ue
)

770 ifĞ
m_¡©us
 !ğ
asEXECUTION_PREPARED
 )

771  
asCONTEXT_NOT_PREPARED
;

773 ifĞ
¬g
 >ğ()
m_š™ŸlFunùiÚ
->
·¿m‘”Ty³s
.
	`G‘L’gth
() )

775 
m_¡©us
 = 
asEXECUTION_ERROR
;

776  
asINVALID_ARG
;

780 
asCD©aTy³
 *
dt
 = &
m_š™ŸlFunùiÚ
->
·¿m‘”Ty³s
[
¬g
];

781 ifĞ
dt
->
	`IsObjeù
(è|| dt->
	`IsReã»nû
() )

783 
m_¡©us
 = 
asEXECUTION_ERROR
;

784  
asINVALID_TYPE
;

787 ifĞ
dt
->
	`G‘SizeOnSckDWÜds
() != 2 )

789 
m_¡©us
 = 
asEXECUTION_ERROR
;

790  
asINVALID_TYPE
;

794 
off£t
 = 0;

795 ifĞ
m_š™ŸlFunùiÚ
->
objeùTy³
 )

796 
off£t
 +ğ
AS_PTR_SIZE
;

799 ifĞ
m_»tuºV®ueSize
 )

800 
off£t
 +ğ
AS_PTR_SIZE
;

802  
asUINT
 
n
 = 0;‚ < 
¬g
;‚++ )

803 
off£t
 +ğ
m_š™ŸlFunùiÚ
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

806 *(
asQWORD
*)(&
m_»gs
.
¡ackF¿mePoš‹r
[
off£t
]èğ
v®ue
;

809 
	}
}

811 
	gasCCÚ‹xt
::
	$S‘ArgFlßt
(
asUINT
 
¬g
, 
v®ue
)

813 ifĞ
m_¡©us
 !ğ
asEXECUTION_PREPARED
 )

814  
asCONTEXT_NOT_PREPARED
;

816 ifĞ
¬g
 >ğ()
m_š™ŸlFunùiÚ
->
·¿m‘”Ty³s
.
	`G‘L’gth
() )

818 
m_¡©us
 = 
asEXECUTION_ERROR
;

819  
asINVALID_ARG
;

823 
asCD©aTy³
 *
dt
 = &
m_š™ŸlFunùiÚ
->
·¿m‘”Ty³s
[
¬g
];

824 ifĞ
dt
->
	`IsObjeù
(è|| dt->
	`IsReã»nû
() )

826 
m_¡©us
 = 
asEXECUTION_ERROR
;

827  
asINVALID_TYPE
;

830 ifĞ
dt
->
	`G‘SizeOnSckDWÜds
() != 1 )

832 
m_¡©us
 = 
asEXECUTION_ERROR
;

833  
asINVALID_TYPE
;

837 
off£t
 = 0;

838 ifĞ
m_š™ŸlFunùiÚ
->
objeùTy³
 )

839 
off£t
 +ğ
AS_PTR_SIZE
;

842 ifĞ
m_»tuºV®ueSize
 )

843 
off£t
 +ğ
AS_PTR_SIZE
;

845  
asUINT
 
n
 = 0;‚ < 
¬g
;‚++ )

846 
off£t
 +ğ
m_š™ŸlFunùiÚ
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

849 *(*)(&
m_»gs
.
¡ackF¿mePoš‹r
[
off£t
]èğ
v®ue
;

852 
	}
}

854 
	gasCCÚ‹xt
::
	$S‘ArgDoubË
(
asUINT
 
¬g
, 
v®ue
)

856 ifĞ
m_¡©us
 !ğ
asEXECUTION_PREPARED
 )

857  
asCONTEXT_NOT_PREPARED
;

859 ifĞ
¬g
 >ğ()
m_š™ŸlFunùiÚ
->
·¿m‘”Ty³s
.
	`G‘L’gth
() )

861 
m_¡©us
 = 
asEXECUTION_ERROR
;

862  
asINVALID_ARG
;

866 
asCD©aTy³
 *
dt
 = &
m_š™ŸlFunùiÚ
->
·¿m‘”Ty³s
[
¬g
];

867 ifĞ
dt
->
	`IsObjeù
(è|| dt->
	`IsReã»nû
() )

869 
m_¡©us
 = 
asEXECUTION_ERROR
;

870  
asINVALID_TYPE
;

873 ifĞ
dt
->
	`G‘SizeOnSckDWÜds
() != 2 )

875 
m_¡©us
 = 
asEXECUTION_ERROR
;

876  
asINVALID_TYPE
;

880 
off£t
 = 0;

881 ifĞ
m_š™ŸlFunùiÚ
->
objeùTy³
 )

882 
off£t
 +ğ
AS_PTR_SIZE
;

885 ifĞ
m_»tuºV®ueSize
 )

886 
off£t
 +ğ
AS_PTR_SIZE
;

888  
asUINT
 
n
 = 0;‚ < 
¬g
;‚++ )

889 
off£t
 +ğ
m_š™ŸlFunùiÚ
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

892 *(*)(&
m_»gs
.
¡ackF¿mePoš‹r
[
off£t
]èğ
v®ue
;

895 
	}
}

897 
	gasCCÚ‹xt
::
	$S‘ArgAdd»ss
(
asUINT
 
¬g
, *
v®ue
)

899 ifĞ
m_¡©us
 !ğ
asEXECUTION_PREPARED
 )

900  
asCONTEXT_NOT_PREPARED
;

902 ifĞ
¬g
 >ğ()
m_š™ŸlFunùiÚ
->
·¿m‘”Ty³s
.
	`G‘L’gth
() )

904 
m_¡©us
 = 
asEXECUTION_ERROR
;

905  
asINVALID_ARG
;

909 
asCD©aTy³
 *
dt
 = &
m_š™ŸlFunùiÚ
->
·¿m‘”Ty³s
[
¬g
];

910 ifĞ!
dt
->
	`IsReã»nû
(è&& !dt->
	`IsObjeùHªdË
() )

912 
m_¡©us
 = 
asEXECUTION_ERROR
;

913  
asINVALID_TYPE
;

917 
off£t
 = 0;

918 ifĞ
m_š™ŸlFunùiÚ
->
objeùTy³
 )

919 
off£t
 +ğ
AS_PTR_SIZE
;

922 ifĞ
m_»tuºV®ueSize
 )

923 
off£t
 +ğ
AS_PTR_SIZE
;

925  
asUINT
 
n
 = 0;‚ < 
¬g
;‚++ )

926 
off£t
 +ğ
m_š™ŸlFunùiÚ
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

929 *(
asPWORD
*)(&
m_»gs
.
¡ackF¿mePoš‹r
[
off£t
]èğ×sPWORD)
v®ue
;

932 
	}
}

934 
	gasCCÚ‹xt
::
	$S‘ArgObjeù
(
asUINT
 
¬g
, *
obj
)

936 ifĞ
m_¡©us
 !ğ
asEXECUTION_PREPARED
 )

937  
asCONTEXT_NOT_PREPARED
;

939 ifĞ
¬g
 >ğ()
m_š™ŸlFunùiÚ
->
·¿m‘”Ty³s
.
	`G‘L’gth
() )

941 
m_¡©us
 = 
asEXECUTION_ERROR
;

942  
asINVALID_ARG
;

946 
asCD©aTy³
 *
dt
 = &
m_š™ŸlFunùiÚ
->
·¿m‘”Ty³s
[
¬g
];

947 ifĞ!
dt
->
	`IsObjeù
() )

949 
m_¡©us
 = 
asEXECUTION_ERROR
;

950  
asINVALID_TYPE
;

954 ifĞ!
dt
->
	`IsReã»nû
() )

956 ifĞ
dt
->
	`IsObjeùHªdË
() )

959 
asSTy³Behaviour
 *
beh
 = &
dt
->
	`G‘ObjeùTy³
()->beh;

960 ifĞ
obj
 && 
beh
->
add»f
 )

961 
m_’gše
->
	`C®lObjeùM‘hod
(
obj
, 
beh
->
add»f
);

965 
obj
 = 
m_’gše
->
	`C»©eSütObjeùCİy
(obj, m_’gše->
	`G‘Ty³IdFromD©aTy³
(*
dt
));

970 
off£t
 = 0;

971 ifĞ
m_š™ŸlFunùiÚ
->
objeùTy³
 )

972 
off£t
 +ğ
AS_PTR_SIZE
;

975 ifĞ
m_»tuºV®ueSize
 )

976 
off£t
 +ğ
AS_PTR_SIZE
;

978  
asUINT
 
n
 = 0;‚ < 
¬g
;‚++ )

979 
off£t
 +ğ
m_š™ŸlFunùiÚ
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

982 *(
asPWORD
*)(&
m_»gs
.
¡ackF¿mePoš‹r
[
off£t
]èğ×sPWORD)
obj
;

985 
	}
}

991 *
	gasCCÚ‹xt
::
	$G‘Add»ssOfArg
(
asUINT
 
¬g
)

993 ifĞ
m_¡©us
 !ğ
asEXECUTION_PREPARED
 )

996 ifĞ
¬g
 >ğ()
m_š™ŸlFunùiÚ
->
·¿m‘”Ty³s
.
	`G‘L’gth
() )

1000 
off£t
 = 0;

1001 ifĞ
m_š™ŸlFunùiÚ
->
objeùTy³
 )

1002 
off£t
 +ğ
AS_PTR_SIZE
;

1005 ifĞ
m_»tuºV®ueSize
 )

1006 
off£t
 +ğ
AS_PTR_SIZE
;

1008  
asUINT
 
n
 = 0;‚ < 
¬g
;‚++ )

1009 
off£t
 +ğ
m_š™ŸlFunùiÚ
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

1015  &
m_»gs
.
¡ackF¿mePoš‹r
[
off£t
];

1016 
	}
}

1019 
	gasCCÚ‹xt
::
	$AbÜt
()

1021 ifĞ
m_’gše
 =ğ0 )  
asERROR
;

1025 ifĞ
m_¡©us
 =ğ
asEXECUTION_SUSPENDED
 )

1026 
m_¡©us
 = 
asEXECUTION_ABORTED
;

1028 
m_doSu¥’d
 = 
Œue
;

1029 
m_»gs
.
doProûssSu¥’d
 = 
Œue
;

1030 
m_ex‹º®Su¥’dReque¡
 = 
Œue
;

1031 
m_doAbÜt
 = 
Œue
;

1034 
	}
}

1037 
	gasCCÚ‹xt
::
	$Su¥’d
()

1043 ifĞ
m_’gše
 =ğ0 )  
asERROR
;

1045 
m_doSu¥’d
 = 
Œue
;

1046 
m_ex‹º®Su¥’dReque¡
 = 
Œue
;

1047 
m_»gs
.
doProûssSu¥’d
 = 
Œue
;

1050 
	}
}

1053 
	gasCCÚ‹xt
::
	$Execu‹
()

1055 
	`asASSERT
Ğ
m_’gše
 != 0 );

1057 ifĞ
m_¡©us
 !ğ
asEXECUTION_SUSPENDED
 && m_¡©u !ğ
asEXECUTION_PREPARED
 )

1059 
asCSŒšg
 
¡r
;

1060 
¡r
.
	`FÜm©
(
TXT_FAILED_IN_FUNC_s
, "Execute");

1061 
m_’gše
->
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_ERROR
, 
¡r
.
	`Add»ssOf
());

1062  
asERROR
;

1065 
m_¡©us
 = 
asEXECUTION_ACTIVE
;

1067 
	`asPushAùiveCÚ‹xt
((
asISütCÚ‹xt
 *)
this
);

1069 ifĞ
m_»gs
.
´og¿mPoš‹r
 == 0 )

1071 ifĞ
m_cu¼’tFunùiÚ
->
funcTy³
 =ğ
asFUNC_VIRTUAL
 ||

1072 
m_cu¼’tFunùiÚ
->
funcTy³
 =ğ
asFUNC_INTERFACE
 )

1077 
asCSütObjeù
 *
obj
 = *×sCSütObjeù**)(
asPWORD
*)
m_»gs
.
¡ackF¿mePoš‹r
;

1078 ifĞ
obj
 == 0 )

1080 
	`S‘IÁ”ÇlExû±iÚ
(
TXT_NULL_POINTER_ACCESS
);

1084 
asCObjeùTy³
 *
objTy³
 = 
obj
->objType;

1085 
asCSütFunùiÚ
 *
»®Func
 = 0;

1087 ifĞ
m_cu¼’tFunùiÚ
->
funcTy³
 =ğ
asFUNC_VIRTUAL
 )

1089 ifĞ
objTy³
->
vœtu®FunùiÚTabË
.
	`G‘L’gth
(è> (
asUINT
)
m_cu¼’tFunùiÚ
->
vfTabËIdx
 )

1091 
»®Func
 = 
objTy³
->
vœtu®FunùiÚTabË
[
m_cu¼’tFunùiÚ
->
vfTabËIdx
];

1097  
asUINT
 
n
 = 0;‚ < 
objTy³
->
m‘hods
.
	`G‘L’gth
();‚++ )

1099 
asCSütFunùiÚ
 *
f2
 = 
m_’gše
->
sütFunùiÚs
[
objTy³
->
m‘hods
[
n
]];

1100 ifĞ
f2
->
sigÇtu»Id
 =ğ
m_cu¼’tFunùiÚ
->signatureId )

1102 ifĞ
f2
->
funcTy³
 =ğ
asFUNC_VIRTUAL
 )

1103 
»®Func
 = 
objTy³
->
vœtu®FunùiÚTabË
[
f2
->
vfTabËIdx
];

1105 
»®Func
 = 
f2
;

1111 ifĞ
»®Func
 )

1113 ifĞ
»®Func
->
sigÇtu»Id
 !ğ
m_cu¼’tFunùiÚ
->signatureId )

1114 
	`S‘IÁ”ÇlExû±iÚ
(
TXT_NULL_POINTER_ACCESS
);

1116 
m_cu¼’tFunùiÚ
 = 
»®Func
;

1121 ifĞ
m_cu¼’tFunùiÚ
->
funcTy³
 =ğ
asFUNC_SCRIPT
 )

1123 
m_»gs
.
´og¿mPoš‹r
 = 
m_cu¼’tFunùiÚ
->
by‹Code
.
	`Add»ssOf
();

1126 
	`P»·»SütFunùiÚ
();

1128 ifĞ
m_cu¼’tFunùiÚ
->
funcTy³
 =ğ
asFUNC_SYSTEM
 )

1133 
	`C®lSy¡emFunùiÚ
(
m_cu¼’tFunùiÚ
->
id
, 
this
, 0);

1136 ifĞ
m_¡©us
 =ğ
asEXECUTION_ACTIVE
 )

1138 
m_¡©us
 = 
asEXECUTION_FINISHED
;

1144 
	`asASSERT
(
çl£
);

1148 
asUINT
 
gcP»Objeùs
 = 0;

1149 ifĞ
m_’gše
->
•
.
autoG¬bageCŞËù
 )

1150 
m_’gše
->
gc
.
	`G‘Sti¡ics
(&
gcP»Objeùs
, 0, 0, 0, 0);

1152  
m_¡©us
 =ğ
asEXECUTION_ACTIVE
 )

1153 
	`Execu‹Next
();

1155 ifĞ
m_’gše
->
•
.
autoG¬bageCŞËù
 )

1157 
asUINT
 
gcPosObjeùs
 = 0;

1158 
m_’gše
->
gc
.
	`G‘Sti¡ics
(&
gcPosObjeùs
, 0, 0, 0, 0);

1159 ifĞ
gcPosObjeùs
 > 
gcP»Objeùs
 )

1162  
gcPosObjeùs
-- > 
gcP»Objeùs
 )

1163 
m_’gše
->
	`G¬bageCŞËù
(
asGC_ONE_STEP
 | 
asGC_DESTROY_GARBAGE
 | 
asGC_DETECT_GARBAGE
);

1165 ifĞ
gcPosObjeùs
 > 0 )

1168 
m_’gše
->
	`G¬bageCŞËù
(
asGC_ONE_STEP
 | 
asGC_DESTROY_GARBAGE
 | 
asGC_DETECT_GARBAGE
);

1172 
m_doSu¥’d
 = 
çl£
;

1173 
m_»gs
.
doProûssSu¥’d
 = 
m_lšeC®lback
;

1175 
	`asPİAùiveCÚ‹xt
((
asISütCÚ‹xt
 *)
this
);

1177 ifĞ
m_¡©us
 =ğ
asEXECUTION_FINISHED
 )

1179 
m_»gs
.
objeùTy³
 = 
m_š™ŸlFunùiÚ
->
»tuºTy³
.
	`G‘ObjeùTy³
();

1180  
asEXECUTION_FINISHED
;

1183 ifĞ
m_doAbÜt
 )

1185 
m_doAbÜt
 = 
çl£
;

1187 
m_¡©us
 = 
asEXECUTION_ABORTED
;

1188  
asEXECUTION_ABORTED
;

1191 ifĞ
m_¡©us
 =ğ
asEXECUTION_SUSPENDED
 )

1192  
asEXECUTION_SUSPENDED
;

1194 ifĞ
m_¡©us
 =ğ
asEXECUTION_EXCEPTION
 )

1195  
asEXECUTION_EXCEPTION
;

1197  
asERROR
;

1198 
	}
}

1200 
	gasCCÚ‹xt
::
	$PushS‹
()

1205 ifĞ
m_¡©us
 !ğ
asEXECUTION_ACTIVE
 )

1208  
asERROR
;

1212 
	`PushC®lS‹
();

1216 ifĞ
m_ÿÎSck
.
	`G‘L’gth
(è=ğm_ÿÎSck.
	`G‘C­ac™y
() )

1219 
m_ÿÎSck
.
	`AÎoÿ‹NoCÚ¡ruù
(m_ÿÎSck.
	`G‘L’gth
(è+ 10*
CALLSTACK_FRAME_SIZE
, 
Œue
);

1221 
m_ÿÎSck
.
	`S‘L’gthNoCÚ¡ruù
(m_ÿÎSck.
	`G‘L’gth
(è+ 
CALLSTACK_FRAME_SIZE
);

1224 
asPWORD
 *
tmp
 = 
m_ÿÎSck
.
	`Add»ssOf
(è+ m_ÿÎSck.
	`G‘L’gth
(è- 
CALLSTACK_FRAME_SIZE
;

1225 
tmp
[0] = 0;

1226 
tmp
[1] = (
asPWORD
)
m_ÿÎšgSy¡emFunùiÚ
;

1227 
tmp
[2] = (
asPWORD
)
m_š™ŸlFunùiÚ
;

1228 
tmp
[3] = (
asPWORD
)
m_Üigš®SckPoš‹r
;

1229 
tmp
[4] = (
asPWORD
)
m_¬gum’tsSize
;

1232 
m_»gs
.
¡ackPoš‹r
 -= 2;

1235 
m_š™ŸlFunùiÚ
 = 0;

1238 
m_ÿÎšgSy¡emFunùiÚ
 = 0;

1240 
	`asASSERT
(
m_»gs
.
objeùRegi¡”
 == 0);

1244 
m_¡©us
 = 
asEXECUTION_UNINITIALIZED
;

1246  
asSUCCESS
;

1247 
	}
}

1249 
	gasCCÚ‹xt
::
	$PİS‹
()

1251 ifĞ!
	`IsNe¡ed
() )

1252  
asERROR
;

1255 
	`UÅ»·»
();

1258 
	`asASSERT
Ğ
m_ÿÎSck
[m_ÿÎSck.
	`G‘L’gth
(è- 
CALLSTACK_FRAME_SIZE
] == 0 );

1261 
asPWORD
 *
tmp
 = &
m_ÿÎSck
[m_ÿÎSck.
	`G‘L’gth
(è- 
CALLSTACK_FRAME_SIZE
];

1262 
m_ÿÎšgSy¡emFunùiÚ
 = 
»š‹½»t_ÿ¡
<
asCSütFunùiÚ
*>(
tmp
[1]);

1263 
m_ÿÎSck
.
	`S‘L’gth
(m_ÿÎSck.
	`G‘L’gth
(è- 
CALLSTACK_FRAME_SIZE
);

1266 
m_š™ŸlFunùiÚ
 = 
»š‹½»t_ÿ¡
<
asCSütFunùiÚ
*>(
tmp
[2]);

1267 
m_Üigš®SckPoš‹r
 = (
asDWORD
*)
tmp
[3];

1268 
m_¬gum’tsSize
 = ()
tmp
[4];

1271 ifĞ
m_š™ŸlFunùiÚ
->
	`DÛsR‘uºOnSck
() )

1272 
m_»tuºV®ueSize
 = 
m_š™ŸlFunùiÚ
->
»tuºTy³
.
	`G‘SizeInMemÜyDWÜds
();

1274 
m_»tuºV®ueSize
 = 0;

1277 
	`PİC®lS‹
();

1279 
m_¡©us
 = 
asEXECUTION_ACTIVE
;

1281  
asSUCCESS
;

1282 
	}
}

1284 
	gasCCÚ‹xt
::
	$PushC®lS‹
()

1286 ifĞ
m_ÿÎSck
.
	`G‘L’gth
(è=ğm_ÿÎSck.
	`G‘C­ac™y
() )

1289 
m_ÿÎSck
.
	`AÎoÿ‹NoCÚ¡ruù
(m_ÿÎSck.
	`G‘L’gth
(è+ 10*
CALLSTACK_FRAME_SIZE
, 
Œue
);

1291 
m_ÿÎSck
.
	`S‘L’gthNoCÚ¡ruù
(m_ÿÎSck.
	`G‘L’gth
(è+ 
CALLSTACK_FRAME_SIZE
);

1300 
asPWORD
 
s
[5];

1301 
s
[0] = (
asPWORD
)
m_»gs
.
¡ackF¿mePoš‹r
;

1302 
s
[1] = (
asPWORD
)
m_cu¼’tFunùiÚ
;

1303 
s
[2] = (
asPWORD
)
m_»gs
.
´og¿mPoš‹r
;

1304 
s
[3] = (
asPWORD
)
m_»gs
.
¡ackPoš‹r
;

1305 
s
[4] = 
m_¡ackIndex
;

1307 
asPWORD
 *
tmp
 = 
m_ÿÎSck
.
	`Add»ssOf
(è+ m_ÿÎSck.
	`G‘L’gth
(è- 
CALLSTACK_FRAME_SIZE
;

1308 
tmp
[0] = 
s
[0];

1309 
tmp
[1] = 
s
[1];

1310 
tmp
[2] = 
s
[2];

1311 
tmp
[3] = 
s
[3];

1312 
tmp
[4] = 
s
[4];

1313 
	}
}

1315 
	gasCCÚ‹xt
::
	$PİC®lS‹
()

1318 
asPWORD
 *
tmp
 = 
m_ÿÎSck
.
	`Add»ssOf
(è+ m_ÿÎSck.
	`G‘L’gth
(è- 
CALLSTACK_FRAME_SIZE
;

1319 
asPWORD
 
s
[5];

1320 
s
[0] = 
tmp
[0];

1321 
s
[1] = 
tmp
[1];

1322 
s
[2] = 
tmp
[2];

1323 
s
[3] = 
tmp
[3];

1324 
s
[4] = 
tmp
[4];

1326 
m_»gs
.
¡ackF¿mePoš‹r
 = (
asDWORD
*)
s
[0];

1327 
m_cu¼’tFunùiÚ
 = (
asCSütFunùiÚ
*)
s
[1];

1328 
m_»gs
.
´og¿mPoš‹r
 = (
asDWORD
*)
s
[2];

1329 
m_»gs
.
¡ackPoš‹r
 = (
asDWORD
*)
s
[3];

1330 
m_¡ackIndex
 = ()
s
[4];

1332 
m_ÿÎSck
.
	`S‘L’gth
(m_ÿÎSck.
	`G‘L’gth
(è- 
CALLSTACK_FRAME_SIZE
);

1333 
	}
}

1336 
asUINT
 
	gasCCÚ‹xt
::
	$G‘C®l¡ackSize
() const

1338 ifĞ
m_cu¼’tFunùiÚ
 == 0 )  0;

1341  
	`asUINT
(1 + 
m_ÿÎSck
.
	`G‘L’gth
(è/ 
CALLSTACK_FRAME_SIZE
);

1342 
	}
}

1345 
asISütFunùiÚ
 *
	gasCCÚ‹xt
::
	$G‘FunùiÚ
(
asUINT
 
¡ackLev–
)

1347 ifĞ
¡ackLev–
 >ğ
	`G‘C®l¡ackSize
() )  0;

1349 ifĞ
¡ackLev–
 =ğ0 )  
m_cu¼’tFunùiÚ
;

1351 
asPWORD
 *
s
 = 
m_ÿÎSck
.
	`Add»ssOf
(è+ (
	`G‘C®l¡ackSize
(è- 
¡ackLev–
 - 1)*
CALLSTACK_FRAME_SIZE
;

1352 
asCSütFunùiÚ
 *
func
 = (asCSütFunùiÚ*)
s
[1];

1354  
func
;

1355 
	}
}

1358 
	gasCCÚ‹xt
::
	$G‘LšeNumb”
(
asUINT
 
¡ackLev–
, *
cŞumn
, cÚ¡ **
£ùiÚName
)

1360 ifĞ
¡ackLev–
 >ğ
	`G‘C®l¡ackSize
(èè 
asINVALID_ARG
;

1362 
asCSütFunùiÚ
 *
func
;

1363 
asDWORD
 *
by‹Pos
;

1364 ifĞ
¡ackLev–
 == 0 )

1366 
func
 = 
m_cu¼’tFunùiÚ
;

1367 
by‹Pos
 = 
m_»gs
.
´og¿mPoš‹r
;

1371 
asPWORD
 *
s
 = 
m_ÿÎSck
.
	`Add»ssOf
(è+ (
	`G‘C®l¡ackSize
()-
¡ackLev–
-1)*
CALLSTACK_FRAME_SIZE
;

1372 
func
 = (
asCSütFunùiÚ
*)
s
[1];

1373 
by‹Pos
 = (
asDWORD
*)
s
[2];

1377 
by‹Pos
 -= 1;

1380 
asDWORD
 
lše
 = 
func
->
	`G‘LšeNumb”
((
by‹Pos
 - func->
by‹Code
.
	`Add»ssOf
()));

1381 ifĞ
cŞumn
 ) *cŞumÀğ(
lše
 >> 20);

1383 ifĞ
£ùiÚName
 ) *£ùiÚNamğ
func
->
	`G‘SütSeùiÚName
();

1385  (
lše
 & 0xFFFFF);

1386 
	}
}

1389 
boŞ
 
	gasCCÚ‹xt
::
	$Re£rveSckS·û
(
asUINT
 
size
)

1392 ifĞ
m_¡ackBlocks
.
	`G‘L’gth
() == 0 )

1394 
m_¡ackBlockSize
 = 
m_’gše
->
š™ŸlCÚ‹xtSckSize
;

1395 
	`asASSERT
Ğ
m_¡ackBlockSize
 > 0 );

1397 
asDWORD
 *
¡ack
 = 
	`asNEWARRAY
×sDWORD,
m_¡ackBlockSize
);

1398 ifĞ
¡ack
 == 0 )

1401  
çl£
;

1404 
m_¡ackBlocks
.
	`PushLa¡
(
¡ack
);

1405 
m_¡ackIndex
 = 0;

1406 
m_»gs
.
¡ackPoš‹r
 = 
m_¡ackBlocks
[0] + 
m_¡ackBlockSize
;

1411  
m_»gs
.
¡ackPoš‹r
 - (
size
 + 
RESERVE_STACK
è< 
m_¡ackBlocks
[
m_¡ackIndex
] )

1414 ifĞ
m_’gše
->
•
.
maximumCÚ‹xtSckSize
 )

1417 ifĞ
m_¡ackBlockSize
 * ((1 << (
m_¡ackIndex
+1)è- 1è> 
m_’gše
->
•
.
maximumCÚ‹xtSckSize
 )

1419 
m_isSckMemÜyNÙAÎoÿ‹d
 = 
Œue
;

1422 
m_»gs
.
¡ackF¿mePoš‹r
 = m_»gs.
¡ackPoš‹r
;

1424 
	`S‘IÁ”ÇlExû±iÚ
(
TXT_STACK_OVERFLOW
);

1425  
çl£
;

1429 
m_¡ackIndex
++;

1430 ifĞ
m_¡ackBlocks
.
	`G‘L’gth
(è=ğ
m_¡ackIndex
 )

1433 
asDWORD
 *
¡ack
 = 
	`asNEWARRAY
×sDWORD,(
m_¡ackBlockSize
 << 
m_¡ackIndex
));

1434 ifĞ
¡ack
 == 0 )

1437 
m_isSckMemÜyNÙAÎoÿ‹d
 = 
Œue
;

1440 
m_»gs
.
¡ackF¿mePoš‹r
 = m_»gs.
¡ackPoš‹r
;

1442 
	`S‘IÁ”ÇlExû±iÚ
(
TXT_STACK_OVERFLOW
);

1443  
çl£
;

1445 
m_¡ackBlocks
.
	`PushLa¡
(
¡ack
);

1450 
m_»gs
.
¡ackPoš‹r
 = 
m_¡ackBlocks
[
m_¡ackIndex
] +

1451 (
m_¡ackBlockSize
<<
m_¡ackIndex
) -

1452 
m_cu¼’tFunùiÚ
->
	`G‘S·ûN“dedFÜArgum’ts
() -

1453 (
m_cu¼’tFunùiÚ
->
objeùTy³
 ? 
AS_PTR_SIZE
 : 0) -

1454 (
m_cu¼’tFunùiÚ
->
	`DÛsR‘uºOnSck
(è? 
AS_PTR_SIZE
 : 0);

1457  
Œue
;

1458 
	}
}

1461 
	gasCCÚ‹xt
::
	$C®lSütFunùiÚ
(
asCSütFunùiÚ
 *
func
)

1464 
	`PushC®lS‹
();

1468 
m_cu¼’tFunùiÚ
 = 
func
;

1469 
m_»gs
.
´og¿mPoš‹r
 = 
m_cu¼’tFunùiÚ
->
by‹Code
.
	`Add»ssOf
();

1472 
asDWORD
 *
ŞdSckPoš‹r
 = 
m_»gs
.
¡ackPoš‹r
;

1473 ifĞ!
	`Re£rveSckS·û
(
func
->
¡ackN“ded
) )

1478 ifĞ
m_»gs
.
¡ackPoš‹r
 !ğ
ŞdSckPoš‹r
 )

1480 
numDwÜds
 = 
func
->
	`G‘S·ûN“dedFÜArgum’ts
(è+ (func->
objeùTy³
 ? 
AS_PTR_SIZE
 : 0è+ (func->
	`DÛsR‘uºOnSck
() ? AS_PTR_SIZE : 0);

1481 
	`memıy
(
m_»gs
.
¡ackPoš‹r
, 
ŞdSckPoš‹r
, (
asDWORD
)*
numDwÜds
);

1484 
	`P»·»SütFunùiÚ
();

1485 
	}
}

1487 
	gasCCÚ‹xt
::
	$P»·»SütFunùiÚ
()

1490 
m_»gs
.
¡ackF¿mePoš‹r
 = m_»gs.
¡ackPoš‹r
;

1494 
asUINT
 
n
 = 
m_cu¼’tFunùiÚ
->
objV¬ŸbËsOnH—p
;

1495  
n
-- > 0 )

1497 
pos
 = 
m_cu¼’tFunùiÚ
->
objV¬ŸbËPos
[
n
];

1498 *(
asPWORD
*)&
m_»gs
.
¡ackF¿mePoš‹r
[-
pos
] = 0;

1502 
m_»gs
.
¡ackPoš‹r
 -ğ
m_cu¼’tFunùiÚ
->
v¬ŸbËS·û
;

1506 ifĞ
m_»gs
.
doProûssSu¥’d
 )

1508 ifĞ
m_lšeC®lback
 )

1509 
	`C®lLšeC®lback
();

1510 ifĞ
m_doSu¥’d
 )

1511 
m_¡©us
 = 
asEXECUTION_SUSPENDED
;

1513 
	}
}

1515 
	gasCCÚ‹xt
::
	$C®lIÁ”çûM‘hod
(
asCSütFunùiÚ
 *
func
)

1518 
asCSütObjeù
 *
obj
 = *×sCSütObjeù**)(
asPWORD
*)
m_»gs
.
¡ackPoš‹r
;

1519 ifĞ
obj
 == 0 )

1521 
	`S‘IÁ”ÇlExû±iÚ
(
TXT_NULL_POINTER_ACCESS
);

1525 
asCObjeùTy³
 *
objTy³
 = 
obj
->objType;

1537 
asCSütFunùiÚ
 *
»®Func
 = 0;

1538 ifĞ
func
->
funcTy³
 =ğ
asFUNC_INTERFACE
 )

1540  
asUINT
 
n
 = 0;‚ < 
objTy³
->
m‘hods
.
	`G‘L’gth
();‚++ )

1542 
asCSütFunùiÚ
 *
f2
 = 
m_’gše
->
sütFunùiÚs
[
objTy³
->
m‘hods
[
n
]];

1543 ifĞ
f2
->
sigÇtu»Id
 =ğ
func
->signatureId )

1545 ifĞ
f2
->
funcTy³
 =ğ
asFUNC_VIRTUAL
 )

1546 
»®Func
 = 
objTy³
->
vœtu®FunùiÚTabË
[
f2
->
vfTabËIdx
];

1548 
»®Func
 = 
f2
;

1553 ifĞ
»®Func
 == 0 )

1555 
	`S‘IÁ”ÇlExû±iÚ
(
TXT_NULL_POINTER_ACCESS
);

1561 
»®Func
 = 
objTy³
->
vœtu®FunùiÚTabË
[
func
->
vfTabËIdx
];

1565 
	`C®lSütFunùiÚ
(
»®Func
);

1566 
	}
}

1568 
	gasCCÚ‹xt
::
	$Execu‹Next
()

1570 
asDWORD
 *
l_bc
 = 
m_»gs
.
´og¿mPoš‹r
;

1571 
asDWORD
 *
l_¥
 = 
m_»gs
.
¡ackPoš‹r
;

1572 
asDWORD
 *
l_å
 = 
m_»gs
.
¡ackF¿mePoš‹r
;

1577 #ifdeà
AS_DEBUG


1579 
¡©s
.
	`In¡r
(*(
asBYTE
*)
l_bc
);

1582 
asDWORD
 *
Şd
 = 
l_bc
;

1591  *(
asBYTE
*)
l_bc
 )

1596 
asBC_PİPŒ
:

1598 
l_¥
 +ğ
AS_PTR_SIZE
;

1599 
l_bc
++;

1602 
asBC_PshGPŒ
:

1604 
l_¥
 -ğ
AS_PTR_SIZE
;

1605 *(
asPWORD
*)
l_¥
 = *×sPWORD*)
	`asBC_PTRARG
(
l_bc
);

1606 
l_bc
 +ğ1 + 
AS_PTR_SIZE
;

1610 
asBC_PshC4
:

1611 --
l_¥
;

1612 *
l_¥
 = 
	`asBC_DWORDARG
(
l_bc
);

1613 
l_bc
 += 2;

1617 
asBC_PshV4
:

1618 --
l_¥
;

1619 *
l_¥
 = *(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
));

1620 
l_bc
++;

1624 
asBC_PSF
:

1625 
l_¥
 -ğ
AS_PTR_SIZE
;

1626 *(
asPWORD
*)
l_¥
 = 
	`asPWORD
(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
));

1627 
l_bc
++;

1631 
asBC_Sw­PŒ
:

1633 
asPWORD
 
p
 = (asPWORD)*
l_¥
;

1634 *(
asPWORD
*)
l_¥
 = *×sPWORD*)Ö_¥+
AS_PTR_SIZE
);

1635 *(
asPWORD
*)(
l_¥
+
AS_PTR_SIZE
èğ
p
;

1636 
l_bc
++;

1641 
asBC_NOT
:

1642 #ià
AS_SIZEOF_BOOL
 == 1

1649 vŞ©
asBYTE
 *
±r
 = (asBYTE*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
));

1650 
asBYTE
 
v®
 = (
±r
[0] =ğ0è? 
VALUE_OF_BOOLEAN_TRUE
 : 0;

1651 
±r
[0] = 
v®
;

1652 
±r
[1] = 0;

1653 
±r
[2] = 0;

1654 
±r
[3] = 0;

1657 *(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ(*Ö_å -‡sBC_SWORDARG0Ö_bc)è=ğ0 ? 
VALUE_OF_BOOLEAN_TRUE
 : 0);

1659 
l_bc
++;

1663 
asBC_PshG4
:

1664 --
l_¥
;

1665 *
l_¥
 = *(
asDWORD
*)
	`asBC_PTRARG
(
l_bc
);

1666 
l_bc
 +ğ1 + 
AS_PTR_SIZE
;

1671 
asBC_LdGRdR4
:

1672 *(**)&
m_»gs
.
v®ueRegi¡”
 = (*)
	`asBC_PTRARG
(
l_bc
);

1673 *(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ**(
asDWORD
**)&
m_»gs
.
v®ueRegi¡”
;

1674 
l_bc
 +ğ1+
AS_PTR_SIZE
;

1681 
asBC_CALL
:

1683 
i
 = 
	`asBC_INTARG
(
l_bc
);

1684 
l_bc
 += 2;

1686 
	`asASSERT
Ğ
i
 >= 0 );

1687 
	`asASSERT
Ğ(
i
 & 
FUNC_IMPORTED
) == 0 );

1690 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

1691 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

1692 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

1694 
	`C®lSütFunùiÚ
(
m_’gše
->
sütFunùiÚs
[
i
]);

1697 
l_bc
 = 
m_»gs
.
´og¿mPoš‹r
;

1698 
l_¥
 = 
m_»gs
.
¡ackPoš‹r
;

1699 
l_å
 = 
m_»gs
.
¡ackF¿mePoš‹r
;

1702 ifĞ
m_¡©us
 !ğ
asEXECUTION_ACTIVE
 )

1708 
asBC_RET
:

1711 ifĞ
m_ÿÎSck
.
	`G‘L’gth
() == 0 ||

1712 
m_ÿÎSck
[m_ÿÎSck.
	`G‘L’gth
(è- 
CALLSTACK_FRAME_SIZE
] == 0 )

1714 
m_¡©us
 = 
asEXECUTION_FINISHED
;

1718 
asWORD
 
w
 = 
	`asBC_WORDARG0
(
l_bc
);

1721 
	`PİC®lS‹
();

1724 
l_bc
 = 
m_»gs
.
´og¿mPoš‹r
;

1725 
l_¥
 = 
m_»gs
.
¡ackPoš‹r
;

1726 
l_å
 = 
m_»gs
.
¡ackF¿mePoš‹r
;

1729 
l_¥
 +ğ
w
;

1734 
asBC_JMP
:

1735 
l_bc
 +ğ2 + 
	`asBC_INTARG
(l_bc);

1742 
asBC_JZ
:

1743 ifĞ*(*)&
m_»gs
.
v®ueRegi¡”
 == 0 )

1744 
l_bc
 +ğ
	`asBC_INTARG
(l_bc) + 2;

1746 
l_bc
 += 2;

1750 
asBC_JNZ
:

1751 ifĞ*(*)&
m_»gs
.
v®ueRegi¡”
 != 0 )

1752 
l_bc
 +ğ
	`asBC_INTARG
(l_bc) + 2;

1754 
l_bc
 += 2;

1758 
asBC_JS
:

1759 ifĞ*(*)&
m_»gs
.
v®ueRegi¡”
 < 0 )

1760 
l_bc
 +ğ
	`asBC_INTARG
(l_bc) + 2;

1762 
l_bc
 += 2;

1766 
asBC_JNS
:

1767 ifĞ*(*)&
m_»gs
.
v®ueRegi¡”
 >= 0 )

1768 
l_bc
 +ğ
	`asBC_INTARG
(l_bc) + 2;

1770 
l_bc
 += 2;

1774 
asBC_JP
:

1775 ifĞ*(*)&
m_»gs
.
v®ueRegi¡”
 > 0 )

1776 
l_bc
 +ğ
	`asBC_INTARG
(l_bc) + 2;

1778 
l_bc
 += 2;

1782 
asBC_JNP
:

1783 ifĞ*(*)&
m_»gs
.
v®ueRegi¡”
 <= 0 )

1784 
l_bc
 +ğ
	`asBC_INTARG
(l_bc) + 2;

1786 
l_bc
 += 2;

1792 
asBC_TZ
:

1793 #ià
AS_SIZEOF_BOOL
 == 1

1800 vŞ©*
»gPŒ
 = (*)&
m_»gs
.
v®ueRegi¡”
;

1801 vŞ©
asBYTE
 *
»gB±r
 = (asBYTE*)&
m_»gs
.
v®ueRegi¡”
;

1802 
asBYTE
 
v®
 = (
»gPŒ
[0] =ğ0è? 
VALUE_OF_BOOLEAN_TRUE
 : 0;

1803 
»gB±r
[0] = 
v®
;

1804 
»gB±r
[1] = 0;

1805 
»gB±r
[2] = 0;

1806 
»gB±r
[3] = 0;

1807 
»gB±r
[4] = 0;

1808 
»gB±r
[5] = 0;

1809 
»gB±r
[6] = 0;

1810 
»gB±r
[7] = 0;

1813 *(*)&
m_»gs
.
v®ueRegi¡”
 = (*(*)&m_»gs.v®ueRegi¡” =ğ0 ? 
VALUE_OF_BOOLEAN_TRUE
 : 0);

1815 
l_bc
++;

1819 
asBC_TNZ
:

1820 #ià
AS_SIZEOF_BOOL
 == 1

1827 vŞ©*
»gPŒ
 = (*)&
m_»gs
.
v®ueRegi¡”
;

1828 vŞ©
asBYTE
 *
»gB±r
 = (asBYTE*)&
m_»gs
.
v®ueRegi¡”
;

1829 
asBYTE
 
v®
 = (
»gPŒ
[0] =ğ0è? 0 : 
VALUE_OF_BOOLEAN_TRUE
;

1830 
»gB±r
[0] = 
v®
;

1831 
»gB±r
[1] = 0;

1832 
»gB±r
[2] = 0;

1833 
»gB±r
[3] = 0;

1834 
»gB±r
[4] = 0;

1835 
»gB±r
[5] = 0;

1836 
»gB±r
[6] = 0;

1837 
»gB±r
[7] = 0;

1840 *(*)&
m_»gs
.
v®ueRegi¡”
 = (*(*)&m_»gs.v®ueRegi¡” =ğ0 ? 0 : 
VALUE_OF_BOOLEAN_TRUE
);

1842 
l_bc
++;

1846 
asBC_TS
:

1847 #ià
AS_SIZEOF_BOOL
 == 1

1854 vŞ©*
»gPŒ
 = (*)&
m_»gs
.
v®ueRegi¡”
;

1855 vŞ©
asBYTE
 *
»gB±r
 = (asBYTE*)&
m_»gs
.
v®ueRegi¡”
;

1856 
asBYTE
 
v®
 = (
»gPŒ
[0] < 0è? 
VALUE_OF_BOOLEAN_TRUE
 : 0;

1857 
»gB±r
[0] = 
v®
;

1858 
»gB±r
[1] = 0;

1859 
»gB±r
[2] = 0;

1860 
»gB±r
[3] = 0;

1861 
»gB±r
[4] = 0;

1862 
»gB±r
[5] = 0;

1863 
»gB±r
[6] = 0;

1864 
»gB±r
[7] = 0;

1867 *(*)&
m_»gs
.
v®ueRegi¡”
 = (*(*)&m_»gs.v®ueRegi¡” < 0 ? 
VALUE_OF_BOOLEAN_TRUE
 : 0);

1869 
l_bc
++;

1873 
asBC_TNS
:

1874 #ià
AS_SIZEOF_BOOL
 == 1

1881 vŞ©*
»gPŒ
 = (*)&
m_»gs
.
v®ueRegi¡”
;

1882 vŞ©
asBYTE
 *
»gB±r
 = (asBYTE*)&
m_»gs
.
v®ueRegi¡”
;

1883 
asBYTE
 
v®
 = (
»gPŒ
[0] >ğ0è? 
VALUE_OF_BOOLEAN_TRUE
 : 0;

1884 
»gB±r
[0] = 
v®
;

1885 
»gB±r
[1] = 0;

1886 
»gB±r
[2] = 0;

1887 
»gB±r
[3] = 0;

1888 
»gB±r
[4] = 0;

1889 
»gB±r
[5] = 0;

1890 
»gB±r
[6] = 0;

1891 
»gB±r
[7] = 0;

1894 *(*)&
m_»gs
.
v®ueRegi¡”
 = (*(*)&m_»gs.v®ueRegi¡” < 0 ? 0 : 
VALUE_OF_BOOLEAN_TRUE
);

1896 
l_bc
++;

1900 
asBC_TP
:

1901 #ià
AS_SIZEOF_BOOL
 == 1

1908 vŞ©*
»gPŒ
 = (*)&
m_»gs
.
v®ueRegi¡”
;

1909 vŞ©
asBYTE
 *
»gB±r
 = (asBYTE*)&
m_»gs
.
v®ueRegi¡”
;

1910 
asBYTE
 
v®
 = (
»gPŒ
[0] > 0è? 
VALUE_OF_BOOLEAN_TRUE
 : 0;

1911 
»gB±r
[0] = 
v®
;

1912 
»gB±r
[1] = 0;

1913 
»gB±r
[2] = 0;

1914 
»gB±r
[3] = 0;

1915 
»gB±r
[4] = 0;

1916 
»gB±r
[5] = 0;

1917 
»gB±r
[6] = 0;

1918 
»gB±r
[7] = 0;

1921 *(*)&
m_»gs
.
v®ueRegi¡”
 = (*(*)&m_»gs.v®ueRegi¡” > 0 ? 
VALUE_OF_BOOLEAN_TRUE
 : 0);

1923 
l_bc
++;

1927 
asBC_TNP
:

1928 #ià
AS_SIZEOF_BOOL
 == 1

1935 vŞ©*
»gPŒ
 = (*)&
m_»gs
.
v®ueRegi¡”
;

1936 vŞ©
asBYTE
 *
»gB±r
 = (asBYTE*)&
m_»gs
.
v®ueRegi¡”
;

1937 
asBYTE
 
v®
 = (
»gPŒ
[0] <ğ0è? 
VALUE_OF_BOOLEAN_TRUE
 : 0;

1938 
»gB±r
[0] = 
v®
;

1939 
»gB±r
[1] = 0;

1940 
»gB±r
[2] = 0;

1941 
»gB±r
[3] = 0;

1942 
»gB±r
[4] = 0;

1943 
»gB±r
[5] = 0;

1944 
»gB±r
[6] = 0;

1945 
»gB±r
[7] = 0;

1948 *(*)&
m_»gs
.
v®ueRegi¡”
 = (*(*)&m_»gs.v®ueRegi¡” > 0 ? 0 : 
VALUE_OF_BOOLEAN_TRUE
);

1950 
l_bc
++;

1957 
asBC_NEGi
:

1958 *(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ
	`asDWORD
(-(*(l_fp -‡sBC_SWORDARG0(l_bc))));

1959 
l_bc
++;

1963 
asBC_NEGf
:

1964 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)) = -*(*)(l_fp -‡sBC_SWORDARG0(l_bc));

1965 
l_bc
++;

1969 
asBC_NEGd
:

1970 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)) = -*(*)(l_fp -‡sBC_SWORDARG0(l_bc));

1971 
l_bc
++;

1978 
asBC_INCi16
:

1979 (**(**)&
m_»gs
.
v®ueRegi¡”
)++;

1980 
l_bc
++;

1984 
asBC_INCi8
:

1985 (**(**)&
m_»gs
.
v®ueRegi¡”
)++;

1986 
l_bc
++;

1990 
asBC_DECi16
:

1991 (**(**)&
m_»gs
.
v®ueRegi¡”
)--;

1992 
l_bc
++;

1996 
asBC_DECi8
:

1997 (**(**)&
m_»gs
.
v®ueRegi¡”
)--;

1998 
l_bc
++;

2002 
asBC_INCi
:

2003 ++(**(**)&
m_»gs
.
v®ueRegi¡”
);

2004 
l_bc
++;

2008 
asBC_DECi
:

2009 --(**(**)&
m_»gs
.
v®ueRegi¡”
);

2010 
l_bc
++;

2014 
asBC_INCf
:

2015 ++(**(**)&
m_»gs
.
v®ueRegi¡”
);

2016 
l_bc
++;

2020 
asBC_DECf
:

2021 --(**(**)&
m_»gs
.
v®ueRegi¡”
);

2022 
l_bc
++;

2026 
asBC_INCd
:

2027 ++(**(**)&
m_»gs
.
v®ueRegi¡”
);

2028 
l_bc
++;

2032 
asBC_DECd
:

2033 --(**(**)&
m_»gs
.
v®ueRegi¡”
);

2034 
l_bc
++;

2038 
asBC_IncVi
:

2039 (*(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)))++;

2040 
l_bc
++;

2044 
asBC_DecVi
:

2045 (*(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)))--;

2046 
l_bc
++;

2053 
asBC_BNOT
:

2054 *(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)) = ~*(l_fp -‡sBC_SWORDARG0(l_bc));

2055 
l_bc
++;

2059 
asBC_BAND
:

2060 *(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è& *Ö_å - 
	`asBC_SWORDARG2
(l_bc));

2061 
l_bc
 += 2;

2065 
asBC_BOR
:

2066 *(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è| *Ö_å - 
	`asBC_SWORDARG2
(l_bc));

2067 
l_bc
 += 2;

2071 
asBC_BXOR
:

2072 *(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è^ *Ö_å - 
	`asBC_SWORDARG2
(l_bc));

2073 
l_bc
 += 2;

2077 
asBC_BSLL
:

2078 *(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è<< *Ö_å - 
	`asBC_SWORDARG2
(l_bc));

2079 
l_bc
 += 2;

2083 
asBC_BSRL
:

2084 *(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è>> *Ö_å - 
	`asBC_SWORDARG2
(l_bc));

2085 
l_bc
 += 2;

2089 
asBC_BSRA
:

2090 *(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ(*Ö_å - 
	`asBC_SWORDARG1
Ö_bc))è>> *Ö_å - 
	`asBC_SWORDARG2
(l_bc));

2091 
l_bc
 += 2;

2094 
asBC_COPY
:

2096 *
d
 = (*)*(
asPWORD
*)
l_¥
;†_¥ +ğ
AS_PTR_SIZE
;

2097 *
s
 = (*)*(
asPWORD
*)
l_¥
;

2098 ifĞ
s
 =ğ0 || 
d
 == 0 )

2101 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

2102 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

2103 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

2106 
	`S‘IÁ”ÇlExû±iÚ
(
TXT_NULL_POINTER_ACCESS
);

2109 
	`memıy
(
d
, 
s
, 
	`asBC_WORDARG0
(
l_bc
)*4);

2112 *(
asPWORD
**)
l_¥
 = (asPWORD*)
d
;

2114 
l_bc
 += 2;

2117 
asBC_PshC8
:

2118 
l_¥
 -= 2;

2119 *(
asQWORD
*)
l_¥
 = 
	`asBC_QWORDARG
(
l_bc
);

2120 
l_bc
 += 3;

2123 
asBC_PshVPŒ
:

2124 
l_¥
 -ğ
AS_PTR_SIZE
;

2125 *(
asPWORD
*)
l_¥
 = *×sPWORD*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
));

2126 
l_bc
++;

2129 
asBC_RDSPŒ
:

2132 
asPWORD
 
a
 = *×sPWORD*)
l_¥
;

2133 ifĞ
a
 == 0 )

2135 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

2136 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

2137 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

2139 
	`S‘IÁ”ÇlExû±iÚ
(
TXT_NULL_POINTER_ACCESS
);

2143 *(
asPWORD
*)
l_¥
 = *×sPWORD*)
a
;

2145 
l_bc
++;

2150 
asBC_CMPd
:

2152 
dbl
 = *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)è- *(*)Ö_å - 
	`asBC_SWORDARG1
(l_bc));

2153 ifĞ
dbl
 =ğ0 ) *(*)&
m_»gs
.
v®ueRegi¡”
 = 0;

2154 ifĞ
dbl
 < 0 ) *(*)&
m_»gs
.
v®ueRegi¡”
 = -1;

2155 *(*)&
m_»gs
.
v®ueRegi¡”
 = 1;

2156 
l_bc
 += 2;

2160 
asBC_CMPu
:

2162 
asDWORD
 
d
 = *×sDWORD*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
));

2163 
asDWORD
 
d2
 = *×sDWORD*)(
l_å
 - 
	`asBC_SWORDARG1
(
l_bc
));

2164 ifĞ
d
 =ğ
d2
 ) *(*)&
m_»gs
.
v®ueRegi¡”
 = 0;

2165 ifĞ
d
 < 
d2
 ) *(*)&
m_»gs
.
v®ueRegi¡”
 = -1;

2166 *(*)&
m_»gs
.
v®ueRegi¡”
 = 1;

2167 
l_bc
 += 2;

2171 
asBC_CMPf
:

2173 
f
 = *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)è- *(*)Ö_å - 
	`asBC_SWORDARG1
(l_bc));

2174 ifĞ
f
 =ğ0 ) *(*)&
m_»gs
.
v®ueRegi¡”
 = 0;

2175 ifĞ
f
 < 0 ) *(*)&
m_»gs
.
v®ueRegi¡”
 = -1;

2176 *(*)&
m_»gs
.
v®ueRegi¡”
 = 1;

2177 
l_bc
 += 2;

2181 
asBC_CMPi
:

2183 
i
 = *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)è- *(*)Ö_å - 
	`asBC_SWORDARG1
(l_bc));

2184 ifĞ
i
 =ğ0 ) *(*)&
m_»gs
.
v®ueRegi¡”
 = 0;

2185 ifĞ
i
 < 0 ) *(*)&
m_»gs
.
v®ueRegi¡”
 = -1;

2186 *(*)&
m_»gs
.
v®ueRegi¡”
 = 1;

2187 
l_bc
 += 2;

2193 
asBC_CMPIi
:

2195 
i
 = *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)è- 
	`asBC_INTARG
(l_bc);

2196 ifĞ
i
 =ğ0 ) *(*)&
m_»gs
.
v®ueRegi¡”
 = 0;

2197 ifĞ
i
 < 0 ) *(*)&
m_»gs
.
v®ueRegi¡”
 = -1;

2198 *(*)&
m_»gs
.
v®ueRegi¡”
 = 1;

2199 
l_bc
 += 2;

2203 
asBC_CMPIf
:

2205 
f
 = *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)è- 
	`asBC_FLOATARG
(l_bc);

2206 ifĞ
f
 =ğ0 ) *(*)&
m_»gs
.
v®ueRegi¡”
 = 0;

2207 ifĞ
f
 < 0 ) *(*)&
m_»gs
.
v®ueRegi¡”
 = -1;

2208 *(*)&
m_»gs
.
v®ueRegi¡”
 = 1;

2209 
l_bc
 += 2;

2213 
asBC_CMPIu
:

2215 
asDWORD
 
d1
 = *×sDWORD*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
));

2216 
asDWORD
 
d2
 = 
	`asBC_DWORDARG
(
l_bc
);

2217 ifĞ
d1
 =ğ
d2
 ) *(*)&
m_»gs
.
v®ueRegi¡”
 = 0;

2218 ifĞ
d1
 < 
d2
 ) *(*)&
m_»gs
.
v®ueRegi¡”
 = -1;

2219 *(*)&
m_»gs
.
v®ueRegi¡”
 = 1;

2220 
l_bc
 += 2;

2224 
asBC_JMPP
:

2225 
l_bc
 +ğ1 + (*(*)(
l_å
 - 
	`asBC_SWORDARG0
(l_bc)))*2;

2228 
asBC_PİRPŒ
:

2229 *(
asPWORD
*)&
m_»gs
.
v®ueRegi¡”
 = *×sPWORD*)
l_¥
;

2230 
l_¥
 +ğ
AS_PTR_SIZE
;

2231 
l_bc
++;

2234 
asBC_PshRPŒ
:

2235 
l_¥
 -ğ
AS_PTR_SIZE
;

2236 *(
asPWORD
*)
l_¥
 = *×sPWORD*)&
m_»gs
.
v®ueRegi¡”
;

2237 
l_bc
++;

2240 
asBC_STR
:

2243 
asWORD
 
w
 = 
	`asBC_WORDARG0
(
l_bc
);

2245 cÚ¡ 
asCSŒšg
 &
b
 = 
m_’gše
->
	`G‘CÚ¡ªtSŒšg
(
w
);

2246 
l_¥
 -ğ
AS_PTR_SIZE
;

2247 *(
asPWORD
*)
l_¥
 = (asPWORD)
b
.
	`Add»ssOf
();

2249 --
l_¥
;

2250 *
l_¥
 = (
asDWORD
)
b
.
	`G‘L’gth
();

2251 
l_bc
++;

2255 
asBC_CALLSYS
:

2258 
i
 = 
	`asBC_INTARG
(
l_bc
);

2262 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

2263 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

2264 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

2266 
l_¥
 +ğ
	`C®lSy¡emFunùiÚ
(
i
, 
this
, 0);

2269 
l_bc
 += 2;

2271 ifĞ
m_»gs
.
doProûssSu¥’d
 )

2274 ifĞ
m_doSu¥’d
 )

2276 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

2277 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

2278 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

2280 
m_¡©us
 = 
asEXECUTION_SUSPENDED
;

2284 ifĞ
m_¡©us
 !ğ
asEXECUTION_ACTIVE
 )

2286 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

2287 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

2288 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

2296 
asBC_CALLBND
:

2299 
i
 = 
	`asBC_INTARG
(
l_bc
);

2300 
l_bc
 += 2;

2302 
	`asASSERT
Ğ
i
 >= 0 );

2303 
	`asASSERT
Ğ
i
 & 
FUNC_IMPORTED
 );

2306 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

2307 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

2308 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

2310 
funcId
 = 
m_’gše
->
impÜ‹dFunùiÚs
[
i
&0xFFFF]->
boundFunùiÚId
;

2311 ifĞ
funcId
 == -1 )

2313 
	`S‘IÁ”ÇlExû±iÚ
(
TXT_UNBOUND_FUNCTION
);

2318 
asCSütFunùiÚ
 *
func
 = 
m_’gše
->
	`G‘SütFunùiÚ
(
funcId
);

2320 
	`C®lSütFunùiÚ
(
func
);

2324 
l_bc
 = 
m_»gs
.
´og¿mPoš‹r
;

2325 
l_¥
 = 
m_»gs
.
¡ackPoš‹r
;

2326 
l_å
 = 
m_»gs
.
¡ackF¿mePoš‹r
;

2329 ifĞ
m_¡©us
 !ğ
asEXECUTION_ACTIVE
 )

2334 
asBC_SUSPEND
:

2335 ifĞ
m_»gs
.
doProûssSu¥’d
 )

2337 ifĞ
m_lšeC®lback
 )

2339 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

2340 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

2341 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

2343 
	`C®lLšeC®lback
();

2345 ifĞ
m_doSu¥’d
 )

2347 
l_bc
++;

2350 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

2351 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

2352 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

2354 
m_¡©us
 = 
asEXECUTION_SUSPENDED
;

2359 
l_bc
++;

2362 
asBC_ALLOC
:

2364 
asCObjeùTy³
 *
objTy³
 = (asCObjeùTy³*)
	`asBC_PTRARG
(
l_bc
);

2365 
func
 = 
	`asBC_INTARG
(
l_bc
+
AS_PTR_SIZE
);

2367 ifĞ
objTy³
->
æags
 & 
asOBJ_SCRIPT_OBJECT
 )

2371 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

2372 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

2373 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

2376 
asDWORD
 *
mem
 = (asDWORD*)
m_’gše
->
	`C®lAÎoc
(
objTy³
);

2379 
	`SütObjeù_CÚ¡ruù
(
objTy³
, (
asCSütObjeù
*)
mem
);

2382 
asCSütFunùiÚ
 *
f
 = 
m_’gše
->
sütFunùiÚs
[
func
];

2384 
asDWORD
 **
a
 = (asDWORD**)*(
asPWORD
*)(
m_»gs
.
¡ackPoš‹r
 + 
f
->
	`G‘S·ûN“dedFÜArgum’ts
());

2385 ifĞ
a
 ) *¨ğ
mem
;

2388 
m_»gs
.
¡ackPoš‹r
 -ğ
AS_PTR_SIZE
;

2389 *(
asPWORD
*)
m_»gs
.
¡ackPoš‹r
 = (asPWORD)
mem
;

2391 
m_»gs
.
´og¿mPoš‹r
 +ğ2+
AS_PTR_SIZE
;

2393 
	`C®lSütFunùiÚ
(
f
);

2396 
l_bc
 = 
m_»gs
.
´og¿mPoš‹r
;

2397 
l_¥
 = 
m_»gs
.
¡ackPoš‹r
;

2398 
l_å
 = 
m_»gs
.
¡ackF¿mePoš‹r
;

2401 ifĞ
m_¡©us
 !ğ
asEXECUTION_ACTIVE
 )

2407 
asDWORD
 *
mem
 = (asDWORD*)
m_’gše
->
	`C®lAÎoc
(
objTy³
);

2409 ifĞ
func
 )

2413 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

2414 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

2415 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

2417 
l_¥
 +ğ
	`C®lSy¡emFunùiÚ
(
func
, 
this
, 
mem
);

2421 
asDWORD
 **
a
 = (asDWORD**)*(
asPWORD
*)
l_¥
;

2422 
l_¥
 +ğ
AS_PTR_SIZE
;

2423 ifĞ
a
 ) *¨ğ
mem
;

2425 
l_bc
 +ğ2+
AS_PTR_SIZE
;

2427 ifĞ
m_»gs
.
doProûssSu¥’d
 )

2430 ifĞ
m_doSu¥’d
 )

2432 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

2433 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

2434 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

2436 
m_¡©us
 = 
asEXECUTION_SUSPENDED
;

2440 ifĞ
m_¡©us
 !ğ
asEXECUTION_ACTIVE
 )

2442 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

2443 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

2444 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

2446 
m_’gše
->
	`C®lF»e
(
mem
);

2447 *
a
 = 0;

2456 
asBC_FREE
:

2459 
asPWORD
 *
a
 = (asPWORD*)
	`asPWORD
(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
));

2460 ifĞ*
a
 )

2462 
asCObjeùTy³
 *
objTy³
 = (asCObjeùTy³*)
	`asBC_PTRARG
(
l_bc
);

2463 
asSTy³Behaviour
 *
beh
 = &
objTy³
->beh;

2467 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

2468 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

2469 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

2471 ifĞ
objTy³
->
æags
 & 
asOBJ_REF
 )

2473 
	`asASSERT
Ğ(
objTy³
->
æags
 & 
asOBJ_NOCOUNT
è|| 
beh
->
»Ëa£
 );

2474 ifĞ
beh
->
»Ëa£
 )

2475 
m_’gše
->
	`C®lObjeùM‘hod
((*)(
asPWORD
)*
a
, 
beh
->
»Ëa£
);

2479 ifĞ
beh
->
de¡ruù
 )

2480 
m_’gše
->
	`C®lObjeùM‘hod
((*)(
asPWORD
)*
a
, 
beh
->
de¡ruù
);

2482 
m_’gše
->
	`C®lF»e
((*)(
asPWORD
)*
a
);

2486 *
a
 = 0;

2489 
l_bc
 +ğ1+
AS_PTR_SIZE
;

2492 
asBC_LOADOBJ
:

2495 **
a
 = (**)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
));

2496 
m_»gs
.
objeùTy³
 = 0;

2497 
m_»gs
.
objeùRegi¡”
 = *
a
;

2498 *
a
 = 0;

2500 
l_bc
++;

2503 
asBC_STOREOBJ
:

2505 *(
asPWORD
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ
	`asPWORD
(
m_»gs
.
objeùRegi¡”
);

2506 
m_»gs
.
objeùRegi¡”
 = 0;

2507 
l_bc
++;

2510 
asBC_GETOBJ
:

2513 
asPWORD
 *
a
 = (asPWORD*)(
l_¥
 + 
	`asBC_WORDARG0
(
l_bc
));

2514 
asDWORD
 
off£t
 = *×sDWORD*)
a
;

2516 
asPWORD
 *
v
 = (asPWORD*)(
l_å
 - 
off£t
);

2517 *
a
 = *
v
;

2519 *
v
 = 0;

2521 
l_bc
++;

2524 
asBC_REFCPY
:

2526 
asCObjeùTy³
 *
objTy³
 = (asCObjeùTy³*)
	`asBC_PTRARG
(
l_bc
);

2527 
asSTy³Behaviour
 *
beh
 = &
objTy³
->beh;

2530 **
d
 = (**)*(
asPWORD
*)
l_¥
;

2531 
l_¥
 +ğ
AS_PTR_SIZE
;

2534 *
s
 = (*)*(
asPWORD
*)
l_¥
;

2538 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

2539 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

2540 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

2542 ifĞ!(
objTy³
->
æags
 & 
asOBJ_NOCOUNT
) )

2545 ifĞ*
d
 != 0 )

2546 
m_’gše
->
	`C®lObjeùM‘hod
(*
d
, 
beh
->
»Ëa£
);

2548 ifĞ
s
 != 0 )

2549 
m_’gše
->
	`C®lObjeùM‘hod
(
s
, 
beh
->
add»f
);

2553 *
d
 = 
s
;

2555 
l_bc
 +ğ1+
AS_PTR_SIZE
;

2558 
asBC_CHKREF
:

2562 
asPWORD
 
a
 = *×sPWORD*)
l_¥
;

2563 ifĞ
a
 == 0 )

2565 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

2566 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

2567 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

2569 
	`S‘IÁ”ÇlExû±iÚ
(
TXT_NULL_POINTER_ACCESS
);

2573 
l_bc
++;

2576 
asBC_GETOBJREF
:

2579 
asPWORD
 *
a
 = (asPWORD*)(
l_¥
 + 
	`asBC_WORDARG0
(
l_bc
));

2582 *(
asPWORD
**)
a
 = *×sPWORD**)(
l_å
 - *a);

2584 
l_bc
++;

2587 
asBC_GETREF
:

2590 
asPWORD
 *
a
 = (asPWORD*)(
l_¥
 + 
	`asBC_WORDARG0
(
l_bc
));

2593 *(
asPWORD
**)
a
 = (asPWORD*)(
l_å
 - ()*a);

2595 
l_bc
++;

2598 
asBC_PshNuÎ
:

2600 
l_¥
 -ğ
AS_PTR_SIZE
;

2601 *(
asPWORD
*)
l_¥
 = 0;

2602 
l_bc
++;

2605 
asBC_CÌVPŒ
:

2610 *(
asPWORD
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)) = 0;

2611 
l_bc
++;

2614 
asBC_OBJTYPE
:

2616 
l_¥
 -ğ
AS_PTR_SIZE
;

2617 *(
asPWORD
*)
l_¥
 = 
	`asBC_PTRARG
(
l_bc
);

2618 
l_bc
 +ğ1+
AS_PTR_SIZE
;

2621 
asBC_TYPEID
:

2623 --
l_¥
;

2624 *
l_¥
 = 
	`asBC_DWORDARG
(
l_bc
);

2625 
l_bc
 += 2;

2628 
asBC_S‘V4
:

2629 *(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ
	`asBC_DWORDARG
(l_bc);

2630 
l_bc
 += 2;

2633 
asBC_S‘V8
:

2634 *(
asQWORD
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ
	`asBC_QWORDARG
(l_bc);

2635 
l_bc
 += 3;

2638 
asBC_ADDSi
:

2641 
asPWORD
 
a
 = *×sPWORD*)
l_¥
;

2642 ifĞ
a
 == 0 )

2644 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

2645 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

2646 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

2648 
	`S‘IÁ”ÇlExû±iÚ
(
TXT_NULL_POINTER_ACCESS
);

2652 *(
asPWORD
*)
l_¥
 = 
a
 + 
	`asBC_SWORDARG0
(
l_bc
);

2654 
l_bc
 += 2;

2657 
asBC_CpyVtoV4
:

2658 *(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*Ö_å - 
	`asBC_SWORDARG1
(l_bc));

2659 
l_bc
 += 2;

2662 
asBC_CpyVtoV8
:

2663 *(
asQWORD
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*×sQWORD*)Ö_å - 
	`asBC_SWORDARG1
(l_bc));

2664 
l_bc
 += 2;

2667 
asBC_CpyVtoR4
:

2668 *(
asDWORD
*)&
m_»gs
.
v®ueRegi¡”
 = *×sDWORD*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
));

2669 
l_bc
++;

2672 
asBC_CpyVtoR8
:

2673 *(
asQWORD
*)&
m_»gs
.
v®ueRegi¡”
 = *×sQWORD*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
));

2674 
l_bc
++;

2677 
asBC_CpyVtoG4
:

2678 *(
asDWORD
*)
	`asBC_PTRARG
(
l_bc
èğ*×sDWORD*)(
l_å
 - 
	`asBC_SWORDARG0
(l_bc));

2679 
l_bc
 +ğ1 + 
AS_PTR_SIZE
;

2682 
asBC_CpyRtoV4
:

2683 *(
asDWORD
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*×sDWORD*)&
m_»gs
.
v®ueRegi¡”
;

2684 
l_bc
++;

2687 
asBC_CpyRtoV8
:

2688 *(
asQWORD
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ
m_»gs
.
v®ueRegi¡”
;

2689 
l_bc
++;

2692 
asBC_CpyGtoV4
:

2693 *(
asDWORD
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*×sDWORD*)
	`asBC_PTRARG
(l_bc);

2694 
l_bc
 +ğ1 + 
AS_PTR_SIZE
;

2697 
asBC_WRTV1
:

2699 **(
asBYTE
**)&
m_»gs
.
v®ueRegi¡”
 = *×sBYTE*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
));

2700 
l_bc
++;

2703 
asBC_WRTV2
:

2705 **(
asWORD
**)&
m_»gs
.
v®ueRegi¡”
 = *×sWORD*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
));

2706 
l_bc
++;

2709 
asBC_WRTV4
:

2710 **(
asDWORD
**)&
m_»gs
.
v®ueRegi¡”
 = *(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
));

2711 
l_bc
++;

2714 
asBC_WRTV8
:

2715 **(
asQWORD
**)&
m_»gs
.
v®ueRegi¡”
 = *×sQWORD*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
));

2716 
l_bc
++;

2719 
asBC_RDR1
:

2722 
asBYTE
 *
bPŒ
 = (asBYTE*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
));

2723 
bPŒ
[0] = **(
asBYTE
**)&
m_»gs
.
v®ueRegi¡”
;

2724 
bPŒ
[1] = 0;

2725 
bPŒ
[2] = 0;

2726 
bPŒ
[3] = 0;

2728 
l_bc
++;

2731 
asBC_RDR2
:

2734 
asWORD
 *
wPŒ
 = (asWORD*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
));

2735 
wPŒ
[0] = **(
asWORD
**)&
m_»gs
.
v®ueRegi¡”
;

2736 
wPŒ
[1] = 0;

2738 
l_bc
++;

2741 
asBC_RDR4
:

2742 *(
asDWORD
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ**×sDWORD**)&
m_»gs
.
v®ueRegi¡”
;

2743 
l_bc
++;

2746 
asBC_RDR8
:

2747 *(
asQWORD
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ**×sQWORD**)&
m_»gs
.
v®ueRegi¡”
;

2748 
l_bc
++;

2751 
asBC_LDG
:

2752 *(
asPWORD
*)&
m_»gs
.
v®ueRegi¡”
 = 
	`asBC_PTRARG
(
l_bc
);

2753 
l_bc
 +ğ1+
AS_PTR_SIZE
;

2756 
asBC_LDV
:

2757 *(
asDWORD
**)&
m_»gs
.
v®ueRegi¡”
 = (
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
));

2758 
l_bc
++;

2761 
asBC_PGA
:

2762 
l_¥
 -ğ
AS_PTR_SIZE
;

2763 *(
asPWORD
*)
l_¥
 = 
	`asBC_PTRARG
(
l_bc
);

2764 
l_bc
 +ğ1+
AS_PTR_SIZE
;

2767 
asBC_CmpPŒ
:

2771 
asPWORD
 
p1
 = *×sPWORD*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
));

2772 
asPWORD
 
p2
 = *×sPWORD*)(
l_å
 - 
	`asBC_SWORDARG1
(
l_bc
));

2773 ifĞ
p1
 =ğ
p2
 ) *(*)&
m_»gs
.
v®ueRegi¡”
 = 0;

2774 ifĞ
p1
 < 
p2
 ) *(*)&
m_»gs
.
v®ueRegi¡”
 = -1;

2775 *(*)&
m_»gs
.
v®ueRegi¡”
 = 1;

2776 
l_bc
 += 2;

2780 
asBC_VAR
:

2781 
l_¥
 -ğ
AS_PTR_SIZE
;

2782 *(
asPWORD
*)
l_¥
 = (asPWORD)
	`asBC_SWORDARG0
(
l_bc
);

2783 
l_bc
++;

2788 
asBC_iTOf
:

2789 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)) = (*(*)(l_fp -‡sBC_SWORDARG0(l_bc)));

2790 
l_bc
++;

2793 
asBC_fTOi
:

2794 *(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)) = (*(*)(l_fp -‡sBC_SWORDARG0(l_bc)));

2795 
l_bc
++;

2798 
asBC_uTOf
:

2799 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)) = (*(l_fp -‡sBC_SWORDARG0(l_bc)));

2800 
l_bc
++;

2803 
asBC_fTOu
:

2805 *(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ
	`asUINT
((*(*)(l_fp -‡sBC_SWORDARG0(l_bc))));

2806 
l_bc
++;

2809 
asBC_sbTOi
:

2811 *(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)) = *(signed *)(l_fp -‡sBC_SWORDARG0(l_bc));

2812 
l_bc
++;

2815 
asBC_swTOi
:

2817 *(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)) = *(*)(l_fp -‡sBC_SWORDARG0(l_bc));

2818 
l_bc
++;

2821 
asBC_ubTOi
:

2823 *(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*(
asBYTE
*)(l_fp -‡sBC_SWORDARG0(l_bc));

2824 
l_bc
++;

2827 
asBC_uwTOi
:

2829 *(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*(
asWORD
*)(l_fp -‡sBC_SWORDARG0(l_bc));

2830 
l_bc
++;

2833 
asBC_dTOi
:

2834 *(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ(*(*)Ö_å - 
	`asBC_SWORDARG1
(l_bc)));

2835 
l_bc
 += 2;

2838 
asBC_dTOu
:

2840 *(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ
	`asUINT
((*(*)Ö_å - 
	`asBC_SWORDARG1
(l_bc))));

2841 
l_bc
 += 2;

2844 
asBC_dTOf
:

2845 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ(*(*)Ö_å - 
	`asBC_SWORDARG1
(l_bc)));

2846 
l_bc
 += 2;

2849 
asBC_iTOd
:

2850 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ(*(*)Ö_å - 
	`asBC_SWORDARG1
(l_bc)));

2851 
l_bc
 += 2;

2854 
asBC_uTOd
:

2855 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ(*(
asUINT
*)Ö_å - 
	`asBC_SWORDARG1
(l_bc)));

2856 
l_bc
 += 2;

2859 
asBC_fTOd
:

2860 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ(*(*)Ö_å - 
	`asBC_SWORDARG1
(l_bc)));

2861 
l_bc
 += 2;

2866 
asBC_ADDi
:

2867 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*(*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è+ *(*)Ö_å - 
	`asBC_SWORDARG2
(l_bc));

2868 
l_bc
 += 2;

2871 
asBC_SUBi
:

2872 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*(*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è- *(*)Ö_å - 
	`asBC_SWORDARG2
(l_bc));

2873 
l_bc
 += 2;

2876 
asBC_MULi
:

2877 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*(*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è* *(*)Ö_å - 
	`asBC_SWORDARG2
(l_bc));

2878 
l_bc
 += 2;

2881 
asBC_DIVi
:

2883 
divid”
 = *(*)(
l_å
 - 
	`asBC_SWORDARG2
(
l_bc
));

2884 ifĞ
divid”
 == 0 )

2887 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

2888 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

2889 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

2892 
	`S‘IÁ”ÇlExû±iÚ
(
TXT_DIVIDE_BY_ZERO
);

2895 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*(*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è/ 
divid”
;

2897 
l_bc
 += 2;

2900 
asBC_MODi
:

2902 
divid”
 = *(*)(
l_å
 - 
	`asBC_SWORDARG2
(
l_bc
));

2903 ifĞ
divid”
 == 0 )

2906 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

2907 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

2908 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

2911 
	`S‘IÁ”ÇlExû±iÚ
(
TXT_DIVIDE_BY_ZERO
);

2914 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*(*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è% 
divid”
;

2916 
l_bc
 += 2;

2919 
asBC_ADDf
:

2920 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*(*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è+ *(*)Ö_å - 
	`asBC_SWORDARG2
(l_bc));

2921 
l_bc
 += 2;

2924 
asBC_SUBf
:

2925 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*(*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è- *(*)Ö_å - 
	`asBC_SWORDARG2
(l_bc));

2926 
l_bc
 += 2;

2929 
asBC_MULf
:

2930 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*(*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è* *(*)Ö_å - 
	`asBC_SWORDARG2
(l_bc));

2931 
l_bc
 += 2;

2934 
asBC_DIVf
:

2936 
divid”
 = *(*)(
l_å
 - 
	`asBC_SWORDARG2
(
l_bc
));

2937 ifĞ
divid”
 == 0 )

2940 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

2941 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

2942 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

2945 
	`S‘IÁ”ÇlExû±iÚ
(
TXT_DIVIDE_BY_ZERO
);

2948 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*(*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è/ 
divid”
;

2950 
l_bc
 += 2;

2953 
asBC_MODf
:

2955 
divid”
 = *(*)(
l_å
 - 
	`asBC_SWORDARG2
(
l_bc
));

2956 ifĞ
divid”
 == 0 )

2959 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

2960 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

2961 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

2964 
	`S‘IÁ”ÇlExû±iÚ
(
TXT_DIVIDE_BY_ZERO
);

2967 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ
	`fmodf
(*(*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)), 
divid”
);

2969 
l_bc
 += 2;

2972 
asBC_ADDd
:

2973 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*(*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è+ *(*)Ö_å - 
	`asBC_SWORDARG2
(l_bc));

2974 
l_bc
 += 2;

2977 
asBC_SUBd
:

2978 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*(*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è- *(*)Ö_å - 
	`asBC_SWORDARG2
(l_bc));

2979 
l_bc
 += 2;

2982 
asBC_MULd
:

2983 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*(*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è* *(*)Ö_å - 
	`asBC_SWORDARG2
(l_bc));

2984 
l_bc
 += 2;

2987 
asBC_DIVd
:

2989 
divid”
 = *(*)(
l_å
 - 
	`asBC_SWORDARG2
(
l_bc
));

2990 ifĞ
divid”
 == 0 )

2993 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

2994 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

2995 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

2998 
	`S‘IÁ”ÇlExû±iÚ
(
TXT_DIVIDE_BY_ZERO
);

3002 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*(*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è/ 
divid”
;

3003 
l_bc
 += 2;

3007 
asBC_MODd
:

3009 
divid”
 = *(*)(
l_å
 - 
	`asBC_SWORDARG2
(
l_bc
));

3010 ifĞ
divid”
 == 0 )

3013 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

3014 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

3015 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

3018 
	`S‘IÁ”ÇlExû±iÚ
(
TXT_DIVIDE_BY_ZERO
);

3022 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ
	`fmod
(*(*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)), 
divid”
);

3023 
l_bc
 += 2;

3029 
asBC_ADDIi
:

3030 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*(*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è+ 
	`asBC_INTARG
(l_bc+1);

3031 
l_bc
 += 3;

3034 
asBC_SUBIi
:

3035 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*(*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è- 
	`asBC_INTARG
(l_bc+1);

3036 
l_bc
 += 3;

3039 
asBC_MULIi
:

3040 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*(*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è* 
	`asBC_INTARG
(l_bc+1);

3041 
l_bc
 += 3;

3044 
asBC_ADDIf
:

3045 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*(*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è+ 
	`asBC_FLOATARG
(l_bc+1);

3046 
l_bc
 += 3;

3049 
asBC_SUBIf
:

3050 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*(*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è- 
	`asBC_FLOATARG
(l_bc+1);

3051 
l_bc
 += 3;

3054 
asBC_MULIf
:

3055 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*(*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è* 
	`asBC_FLOATARG
(l_bc+1);

3056 
l_bc
 += 3;

3060 
asBC_S‘G4
:

3061 *(
asDWORD
*)
	`asBC_PTRARG
(
l_bc
èğ
	`asBC_DWORDARG
Ö_bc+
AS_PTR_SIZE
);

3062 
l_bc
 +ğ2 + 
AS_PTR_SIZE
;

3065 
asBC_ChkRefS
:

3069 
asPWORD
 *
a
 = (asPWORD*)*×sPWORD*)
l_¥
;

3070 ifĞ*
a
 == 0 )

3072 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

3073 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

3074 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

3076 
	`S‘IÁ”ÇlExû±iÚ
(
TXT_NULL_POINTER_ACCESS
);

3080 
l_bc
++;

3083 
asBC_ChkNuÎV
:

3086 
asDWORD
 *
a
 = *×sDWORD**)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
));

3087 ifĞ
a
 == 0 )

3089 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

3090 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

3091 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

3093 
	`S‘IÁ”ÇlExû±iÚ
(
TXT_NULL_POINTER_ACCESS
);

3097 
l_bc
++;

3100 
asBC_CALLINTF
:

3102 
i
 = 
	`asBC_INTARG
(
l_bc
);

3103 
l_bc
 += 2;

3105 
	`asASSERT
Ğ
i
 >= 0 );

3106 
	`asASSERT
Ğ(
i
 & 
FUNC_IMPORTED
) == 0 );

3109 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

3110 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

3111 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

3113 
	`C®lIÁ”çûM‘hod
(
m_’gše
->
	`G‘SütFunùiÚ
(
i
));

3116 
l_bc
 = 
m_»gs
.
´og¿mPoš‹r
;

3117 
l_¥
 = 
m_»gs
.
¡ackPoš‹r
;

3118 
l_å
 = 
m_»gs
.
¡ackF¿mePoš‹r
;

3121 ifĞ
m_¡©us
 !ğ
asEXECUTION_ACTIVE
 )

3126 
asBC_iTOb
:

3132 vŞ©
asDWORD
 
v®
 = *(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
));

3133 vŞ©
asBYTE
 *
bPŒ
 = (asBYTE*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
));

3134 
bPŒ
[0] = (
asBYTE
)
v®
;

3135 
bPŒ
[1] = 0;

3136 
bPŒ
[2] = 0;

3137 
bPŒ
[3] = 0;

3139 
l_bc
++;

3142 
asBC_iTOw
:

3148 vŞ©
asDWORD
 
v®
 = *(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
));

3149 vŞ©
asWORD
 *
wPŒ
 = (asWORD*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
));

3150 
wPŒ
[0] = (
asWORD
)
v®
;

3151 
wPŒ
[1] = 0;

3153 
l_bc
++;

3156 
asBC_S‘V1
:

3163 *(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ
	`asBC_DWORDARG
(l_bc);

3164 
l_bc
 += 2;

3167 
asBC_S‘V2
:

3174 *(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ
	`asBC_DWORDARG
(l_bc);

3175 
l_bc
 += 2;

3178 
asBC_Ca¡
:

3181 
asDWORD
 **
a
 = (asDWORD**)*(
asPWORD
*)
l_¥
;

3182 ifĞ
a
 && *a )

3184 
asDWORD
 
ty³Id
 = 
	`asBC_DWORDARG
(
l_bc
);

3186 
asCSütObjeù
 *
obj
 = (asCSütObjeù *)* 
a
;

3187 
asCObjeùTy³
 *
objTy³
 = 
obj
->objType;

3188 
asCObjeùTy³
 *
to
 = 
m_’gše
->
	`G‘ObjeùTy³FromTy³Id
(
ty³Id
);

3191 
	`asASSERT
Ğ
objTy³
->
æags
 & 
asOBJ_SCRIPT_OBJECT
 );

3192 
	`asASSERT
Ğ
to
->
æags
 & 
asOBJ_SCRIPT_OBJECT
 );

3194 ifĞ
objTy³
->
	`Im¶em’ts
(
to
è|| objTy³->
	`D”ivesFrom
(to) )

3196 
m_»gs
.
objeùTy³
 = 0;

3197 
m_»gs
.
objeùRegi¡”
 = 
obj
;

3198 
obj
->
	`AddRef
();

3204 
	`asASSERT
Ğ
m_»gs
.
objeùRegi¡”
 == 0 );

3207 
l_¥
 +ğ
AS_PTR_SIZE
;

3209 
l_bc
 += 2;

3212 
asBC_i64TOi
:

3213 *(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ(*(
asINT64
*)Ö_å - 
	`asBC_SWORDARG1
(l_bc)));

3214 
l_bc
 += 2;

3217 
asBC_uTOi64
:

3218 *(
asINT64
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ
	`asINT64
(*(
asUINT
*)Ö_å - 
	`asBC_SWORDARG1
(l_bc)));

3219 
l_bc
 += 2;

3222 
asBC_iTOi64
:

3223 *(
asINT64
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ
	`asINT64
(*(*)Ö_å - 
	`asBC_SWORDARG1
(l_bc)));

3224 
l_bc
 += 2;

3227 
asBC_fTOi64
:

3228 *(
asINT64
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ
	`asINT64
(*(*)Ö_å - 
	`asBC_SWORDARG1
(l_bc)));

3229 
l_bc
 += 2;

3232 
asBC_dTOi64
:

3233 *(
asINT64
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ
	`asINT64
(*(*)(l_fp -‡sBC_SWORDARG0(l_bc)));

3234 
l_bc
++;

3237 
asBC_fTOu64
:

3238 *(
asQWORD
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ
	`asQWORD
(
	`asINT64
(*(*)Ö_å - 
	`asBC_SWORDARG1
(l_bc))));

3239 
l_bc
 += 2;

3242 
asBC_dTOu64
:

3243 *(
asQWORD
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ
	`asQWORD
(
	`asINT64
(*(*)(l_fp -‡sBC_SWORDARG0(l_bc))));

3244 
l_bc
++;

3247 
asBC_i64TOf
:

3248 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ(*(
asINT64
*)Ö_å - 
	`asBC_SWORDARG1
(l_bc)));

3249 
l_bc
 += 2;

3252 
asBC_u64TOf
:

3253 #ià
_MSC_VER
 <= 1200

3256 
asINT64
 
v
 = *×sINT64*)(
l_å
 - 
	`asBC_SWORDARG1
(
l_bc
));

3257 ifĞ
v
 < 0 )

3258 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ18446744073709551615.0f+(
v
);

3260 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ(
v
);

3263 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ(*(
asQWORD
*)Ö_å - 
	`asBC_SWORDARG1
(l_bc)));

3265 
l_bc
 += 2;

3268 
asBC_i64TOd
:

3269 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ(*(
asINT64
*)(l_fp -‡sBC_SWORDARG0(l_bc)));

3270 
l_bc
++;

3273 
asBC_u64TOd
:

3274 #ià
_MSC_VER
 <= 1200

3277 
asINT64
 
v
 = *×sINT64*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
));

3278 ifĞ
v
 < 0 )

3279 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ18446744073709551615.0+(
v
);

3281 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ(
v
);

3284 *(*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ(*(
asQWORD
*)(l_fp -‡sBC_SWORDARG0(l_bc)));

3286 
l_bc
++;

3289 
asBC_NEGi64
:

3290 *(
asINT64
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)) = -*(asINT64*)(l_fp -‡sBC_SWORDARG0(l_bc));

3291 
l_bc
++;

3294 
asBC_INCi64
:

3295 ++(**(
asQWORD
**)&
m_»gs
.
v®ueRegi¡”
);

3296 
l_bc
++;

3299 
asBC_DECi64
:

3300 --(**(
asQWORD
**)&
m_»gs
.
v®ueRegi¡”
);

3301 
l_bc
++;

3304 
asBC_BNOT64
:

3305 *(
asQWORD
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)) = ~*(asQWORD*)(l_fp -‡sBC_SWORDARG0(l_bc));

3306 
l_bc
++;

3309 
asBC_ADDi64
:

3310 *(
asQWORD
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*×sQWORD*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è+ *×sQWORD*)Ö_å - 
	`asBC_SWORDARG2
(l_bc));

3311 
l_bc
 += 2;

3314 
asBC_SUBi64
:

3315 *(
asQWORD
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*×sQWORD*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è- *×sQWORD*)Ö_å - 
	`asBC_SWORDARG2
(l_bc));

3316 
l_bc
 += 2;

3319 
asBC_MULi64
:

3320 *(
asQWORD
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*×sQWORD*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è* *×sQWORD*)Ö_å - 
	`asBC_SWORDARG2
(l_bc));

3321 
l_bc
 += 2;

3324 
asBC_DIVi64
:

3326 
asINT64
 
divid”
 = *×sINT64*)(
l_å
 - 
	`asBC_SWORDARG2
(
l_bc
));

3327 ifĞ
divid”
 == 0 )

3330 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

3331 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

3332 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

3335 
	`S‘IÁ”ÇlExû±iÚ
(
TXT_DIVIDE_BY_ZERO
);

3338 *(
asINT64
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*×sINT64*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è/ 
divid”
;

3340 
l_bc
 += 2;

3343 
asBC_MODi64
:

3345 
asINT64
 
divid”
 = *×sINT64*)(
l_å
 - 
	`asBC_SWORDARG2
(
l_bc
));

3346 ifĞ
divid”
 == 0 )

3349 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

3350 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

3351 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

3354 
	`S‘IÁ”ÇlExû±iÚ
(
TXT_DIVIDE_BY_ZERO
);

3357 *(
asINT64
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*×sINT64*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è% 
divid”
;

3359 
l_bc
 += 2;

3362 
asBC_BAND64
:

3363 *(
asQWORD
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*×sQWORD*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è& *×sQWORD*)Ö_å - 
	`asBC_SWORDARG2
(l_bc));

3364 
l_bc
 += 2;

3367 
asBC_BOR64
:

3368 *(
asQWORD
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*×sQWORD*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è| *×sQWORD*)Ö_å - 
	`asBC_SWORDARG2
(l_bc));

3369 
l_bc
 += 2;

3372 
asBC_BXOR64
:

3373 *(
asQWORD
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*×sQWORD*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è^ *×sQWORD*)Ö_å - 
	`asBC_SWORDARG2
(l_bc));

3374 
l_bc
 += 2;

3377 
asBC_BSLL64
:

3378 *(
asQWORD
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*×sQWORD*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è<< *Ö_å - 
	`asBC_SWORDARG2
(l_bc));

3379 
l_bc
 += 2;

3382 
asBC_BSRL64
:

3383 *(
asQWORD
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*×sQWORD*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è>> *Ö_å - 
	`asBC_SWORDARG2
(l_bc));

3384 
l_bc
 += 2;

3387 
asBC_BSRA64
:

3388 *(
asINT64
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*×sINT64*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è>> *Ö_å - 
	`asBC_SWORDARG2
(l_bc));

3389 
l_bc
 += 2;

3392 
asBC_CMPi64
:

3394 
asINT64
 
i
 = *×sINT64*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)è- *×sINT64*)Ö_å - 
	`asBC_SWORDARG1
(l_bc));

3395 ifĞ
i
 =ğ0 ) *(*)&
m_»gs
.
v®ueRegi¡”
 = 0;

3396 ifĞ
i
 < 0 ) *(*)&
m_»gs
.
v®ueRegi¡”
 = -1;

3397 *(*)&
m_»gs
.
v®ueRegi¡”
 = 1;

3398 
l_bc
 += 2;

3402 
asBC_CMPu64
:

3404 
asQWORD
 
d
 = *×sQWORD*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
));

3405 
asQWORD
 
d2
 = *×sQWORD*)(
l_å
 - 
	`asBC_SWORDARG1
(
l_bc
));

3406 ifĞ
d
 =ğ
d2
 ) *(*)&
m_»gs
.
v®ueRegi¡”
 = 0;

3407 ifĞ
d
 < 
d2
 ) *(*)&
m_»gs
.
v®ueRegi¡”
 = -1;

3408 *(*)&
m_»gs
.
v®ueRegi¡”
 = 1;

3409 
l_bc
 += 2;

3413 
asBC_ChkNuÎS
:

3417 
asPWORD
 
a
 = *×sPWORD*)(
l_¥
 + 
	`asBC_WORDARG0
(
l_bc
));

3418 ifĞ
a
 == 0 )

3420 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

3421 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

3422 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

3424 
	`S‘IÁ”ÇlExû±iÚ
(
TXT_NULL_POINTER_ACCESS
);

3428 
l_bc
++;

3431 
asBC_CÌHi
:

3432 #ià
AS_SIZEOF_BOOL
 == 1

3439 vŞ©
asBYTE
 *
±r
 = (asBYTE*)&
m_»gs
.
v®ueRegi¡”
;

3440 
±r
[1] = 0;

3441 
±r
[2] = 0;

3442 
±r
[3] = 0;

3447 
l_bc
++;

3450 
asBC_J™EÁry
:

3452 ifĞ
m_cu¼’tFunùiÚ
->
j™FunùiÚ
 )

3454 
asPWORD
 
j™Arg
 = 
	`asBC_PTRARG
(
l_bc
);

3456 ifĞ
j™Arg
 )

3459 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

3460 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

3461 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

3463 (
m_cu¼’tFunùiÚ
->
j™FunùiÚ
)(&
m_»gs
, 
j™Arg
);

3465 
l_bc
 = 
m_»gs
.
´og¿mPoš‹r
;

3466 
l_¥
 = 
m_»gs
.
¡ackPoš‹r
;

3467 
l_å
 = 
m_»gs
.
¡ackF¿mePoš‹r
;

3470 ifĞ
m_¡©us
 !ğ
asEXECUTION_ACTIVE
 )

3478 
l_bc
 +ğ1+
AS_PTR_SIZE
;

3482 
asBC_C®lPŒ
:

3485 
asCSütFunùiÚ
 *
func
 = *×sCSütFunùiÚ**)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
));

3488 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

3489 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

3490 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

3492 ifĞ
func
 == 0 )

3495 
	`S‘IÁ”ÇlExû±iÚ
(
TXT_UNBOUND_FUNCTION
);

3500 ifĞ
func
->
funcTy³
 =ğ
asFUNC_SCRIPT
 )

3502 
m_»gs
.
´og¿mPoš‹r
++;

3503 
	`C®lSütFunùiÚ
(
func
);

3507 
	`asASSERT
Ğ
func
->
funcTy³
 =ğ
asFUNC_SYSTEM
 );

3509 
m_»gs
.
¡ackPoš‹r
 +ğ
	`C®lSy¡emFunùiÚ
(
func
->
id
, 
this
, 0);

3513 
m_»gs
.
´og¿mPoš‹r
++;

3518 
l_bc
 = 
m_»gs
.
´og¿mPoš‹r
;

3519 
l_¥
 = 
m_»gs
.
¡ackPoš‹r
;

3520 
l_å
 = 
m_»gs
.
¡ackF¿mePoš‹r
;

3523 ifĞ
m_¡©us
 !ğ
asEXECUTION_ACTIVE
 )

3528 
asBC_FuncPŒ
:

3530 
l_¥
 -ğ
AS_PTR_SIZE
;

3531 *(
asPWORD
*)
l_¥
 = 
	`asBC_PTRARG
(
l_bc
);

3532 
l_bc
 +ğ1+
AS_PTR_SIZE
;

3535 
asBC_LßdThisR
:

3538 
asPWORD
 
tmp
 = *×sPWORD*)
l_å
;

3541 ifĞ
tmp
 == 0 )

3544 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

3545 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

3546 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

3549 
	`S‘IÁ”ÇlExû±iÚ
(
TXT_NULL_POINTER_ACCESS
);

3554 
tmp
 =m°+ 
	`asBC_SWORDARG0
(
l_bc
);

3557 *(
asPWORD
*)&
m_»gs
.
v®ueRegi¡”
 = 
tmp
;

3558 
l_bc
 += 2;

3563 
asBC_PshV8
:

3564 
l_¥
 -= 2;

3565 *(
asQWORD
*)
l_¥
 = *×sQWORD*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
));

3566 
l_bc
++;

3569 
asBC_DIVu
:

3571 
asUINT
 
divid”
 = *×sUINT*)(
l_å
 - 
	`asBC_SWORDARG2
(
l_bc
));

3572 ifĞ
divid”
 == 0 )

3575 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

3576 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

3577 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

3580 
	`S‘IÁ”ÇlExû±iÚ
(
TXT_DIVIDE_BY_ZERO
);

3583 *(
asUINT
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*×sUINT*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è/ 
divid”
;

3585 
l_bc
 += 2;

3588 
asBC_MODu
:

3590 
asUINT
 
divid”
 = *×sUINT*)(
l_å
 - 
	`asBC_SWORDARG2
(
l_bc
));

3591 ifĞ
divid”
 == 0 )

3594 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

3595 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

3596 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

3599 
	`S‘IÁ”ÇlExû±iÚ
(
TXT_DIVIDE_BY_ZERO
);

3602 *(
asUINT
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*×sUINT*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è% 
divid”
;

3604 
l_bc
 += 2;

3607 
asBC_DIVu64
:

3609 
asQWORD
 
divid”
 = *×sQWORD*)(
l_å
 - 
	`asBC_SWORDARG2
(
l_bc
));

3610 ifĞ
divid”
 == 0 )

3613 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

3614 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

3615 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

3618 
	`S‘IÁ”ÇlExû±iÚ
(
TXT_DIVIDE_BY_ZERO
);

3621 *(
asQWORD
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*×sQWORD*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è/ 
divid”
;

3623 
l_bc
 += 2;

3626 
asBC_MODu64
:

3628 
asQWORD
 
divid”
 = *×sQWORD*)(
l_å
 - 
	`asBC_SWORDARG2
(
l_bc
));

3629 ifĞ
divid”
 == 0 )

3632 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

3633 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

3634 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

3637 
	`S‘IÁ”ÇlExû±iÚ
(
TXT_DIVIDE_BY_ZERO
);

3640 *(
asQWORD
*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
)èğ*×sQWORD*)Ö_å - 
	`asBC_SWORDARG1
Ö_bc)è% 
divid”
;

3642 
l_bc
 += 2;

3645 
asBC_LßdRObjR
:

3648 
asPWORD
 
tmp
 = *×sPWORD*)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
));

3651 ifĞ
tmp
 == 0 )

3654 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

3655 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

3656 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

3659 
	`S‘IÁ”ÇlExû±iÚ
(
TXT_NULL_POINTER_ACCESS
);

3664 
tmp
 =m°+ 
	`asBC_SWORDARG1
(
l_bc
);

3667 *(
asPWORD
*)&
m_»gs
.
v®ueRegi¡”
 = 
tmp
;

3668 
l_bc
 += 3;

3672 
asBC_LßdVObjR
:

3675 
asPWORD
 
tmp
 = (asPWORD)(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
));

3678 
tmp
 =m°+ 
	`asBC_SWORDARG1
(
l_bc
);

3681 *(
asPWORD
*)&
m_»gs
.
v®ueRegi¡”
 = 
tmp
;

3682 
l_bc
 += 3;

3686 
asBC_RefCpyV
:

3689 
asCObjeùTy³
 *
objTy³
 = (asCObjeùTy³*)
	`asBC_PTRARG
(
l_bc
);

3690 
asSTy³Behaviour
 *
beh
 = &
objTy³
->beh;

3693 **
d
 = (**)
	`asPWORD
(
l_å
 - 
	`asBC_SWORDARG0
(
l_bc
));

3696 *
s
 = (*)*(
asPWORD
*)
l_¥
;

3700 
m_»gs
.
´og¿mPoš‹r
 = 
l_bc
;

3701 
m_»gs
.
¡ackPoš‹r
 = 
l_¥
;

3702 
m_»gs
.
¡ackF¿mePoš‹r
 = 
l_å
;

3704 ifĞ!(
objTy³
->
æags
 & 
asOBJ_NOCOUNT
) )

3707 ifĞ*
d
 != 0 )

3708 
m_’gše
->
	`C®lObjeùM‘hod
(*
d
, 
beh
->
»Ëa£
);

3710 ifĞ
s
 != 0 )

3711 
m_’gše
->
	`C®lObjeùM‘hod
(
s
, 
beh
->
add»f
);

3715 *
d
 = 
s
;

3717 
l_bc
 +ğ1+
AS_PTR_SIZE
;

3720 
asBC_JLowZ
:

3721 ifĞ*(
asBYTE
*)&
m_»gs
.
v®ueRegi¡”
 == 0 )

3722 
l_bc
 +ğ
	`asBC_INTARG
(l_bc) + 2;

3724 
l_bc
 += 2;

3727 
asBC_JLowNZ
:

3728 ifĞ*(
asBYTE
*)&
m_»gs
.
v®ueRegi¡”
 != 0 )

3729 
l_bc
 +ğ
	`asBC_INTARG
(l_bc) + 2;

3731 
l_bc
 += 2;

3736 189: 
l_bc
 = (
asDWORD
*)189; ;

3737 190: 
l_bc
 = (
asDWORD
*)190; ;

3738 191: 
l_bc
 = (
asDWORD
*)191; ;

3739 192: 
l_bc
 = (
asDWORD
*)192; ;

3740 193: 
l_bc
 = (
asDWORD
*)193; ;

3741 194: 
l_bc
 = (
asDWORD
*)194; ;

3742 195: 
l_bc
 = (
asDWORD
*)195; ;

3743 196: 
l_bc
 = (
asDWORD
*)196; ;

3744 197: 
l_bc
 = (
asDWORD
*)197; ;

3745 198: 
l_bc
 = (
asDWORD
*)198; ;

3746 199: 
l_bc
 = (
asDWORD
*)199; ;

3747 200: 
l_bc
 = (
asDWORD
*)200; ;

3748 201: 
l_bc
 = (
asDWORD
*)201; ;

3749 202: 
l_bc
 = (
asDWORD
*)202; ;

3750 203: 
l_bc
 = (
asDWORD
*)203; ;

3751 204: 
l_bc
 = (
asDWORD
*)204; ;

3752 205: 
l_bc
 = (
asDWORD
*)205; ;

3753 206: 
l_bc
 = (
asDWORD
*)206; ;

3754 207: 
l_bc
 = (
asDWORD
*)207; ;

3755 208: 
l_bc
 = (
asDWORD
*)208; ;

3756 209: 
l_bc
 = (
asDWORD
*)209; ;

3757 210: 
l_bc
 = (
asDWORD
*)210; ;

3758 211: 
l_bc
 = (
asDWORD
*)211; ;

3759 212: 
l_bc
 = (
asDWORD
*)212; ;

3760 213: 
l_bc
 = (
asDWORD
*)213; ;

3761 214: 
l_bc
 = (
asDWORD
*)214; ;

3762 215: 
l_bc
 = (
asDWORD
*)215; ;

3763 216: 
l_bc
 = (
asDWORD
*)216; ;

3764 217: 
l_bc
 = (
asDWORD
*)217; ;

3765 218: 
l_bc
 = (
asDWORD
*)218; ;

3766 219: 
l_bc
 = (
asDWORD
*)219; ;

3767 220: 
l_bc
 = (
asDWORD
*)220; ;

3768 221: 
l_bc
 = (
asDWORD
*)221; ;

3769 222: 
l_bc
 = (
asDWORD
*)222; ;

3770 223: 
l_bc
 = (
asDWORD
*)223; ;

3771 224: 
l_bc
 = (
asDWORD
*)224; ;

3772 225: 
l_bc
 = (
asDWORD
*)225; ;

3773 226: 
l_bc
 = (
asDWORD
*)226; ;

3774 227: 
l_bc
 = (
asDWORD
*)227; ;

3775 228: 
l_bc
 = (
asDWORD
*)228; ;

3776 229: 
l_bc
 = (
asDWORD
*)229; ;

3777 230: 
l_bc
 = (
asDWORD
*)230; ;

3778 231: 
l_bc
 = (
asDWORD
*)231; ;

3779 232: 
l_bc
 = (
asDWORD
*)232; ;

3780 233: 
l_bc
 = (
asDWORD
*)233; ;

3781 234: 
l_bc
 = (
asDWORD
*)234; ;

3782 235: 
l_bc
 = (
asDWORD
*)235; ;

3783 236: 
l_bc
 = (
asDWORD
*)236; ;

3784 237: 
l_bc
 = (
asDWORD
*)237; ;

3785 238: 
l_bc
 = (
asDWORD
*)238; ;

3786 239: 
l_bc
 = (
asDWORD
*)239; ;

3787 240: 
l_bc
 = (
asDWORD
*)240; ;

3788 241: 
l_bc
 = (
asDWORD
*)241; ;

3789 242: 
l_bc
 = (
asDWORD
*)242; ;

3790 243: 
l_bc
 = (
asDWORD
*)243; ;

3791 244: 
l_bc
 = (
asDWORD
*)244; ;

3792 245: 
l_bc
 = (
asDWORD
*)245; ;

3793 246: 
l_bc
 = (
asDWORD
*)246; ;

3794 247: 
l_bc
 = (
asDWORD
*)247; ;

3795 248: 
l_bc
 = (
asDWORD
*)248; ;

3796 249: 
l_bc
 = (
asDWORD
*)249; ;

3797 250: 
l_bc
 = (
asDWORD
*)250; ;

3798 251: 
l_bc
 = (
asDWORD
*)251; ;

3799 252: 
l_bc
 = (
asDWORD
*)252; ;

3800 253: 
l_bc
 = (
asDWORD
*)253; ;

3801 254: 
l_bc
 = (
asDWORD
*)254; ;

3802 255: 
l_bc
 = (
asDWORD
*)255; ;

3804 #ifdeà
AS_DEBUG


3806 
	`asASSERT
(
çl£
);

3807 
	`S‘IÁ”ÇlExû±iÚ
(
TXT_UNRECOGNIZED_BYTE_CODE
);

3809 #ià
	`defšed
(
_MSC_VER
è&& !defšed(
AS_DEBUG
)

3815 
	`__assume
(0);

3819 #ifdeà
AS_DEBUG


3820 
asDWORD
 
š¡r
 = *(
asBYTE
*)
Şd
;

3821 ifĞ
š¡r
 !ğ
asBC_JMP
 && in¡¸!ğ
asBC_JMPP
 && (š¡¸< 
asBC_JZ
 || in¡¸> 
asBC_JNP
è&& in¡¸!ğ
asBC_JLowZ
 && in¡¸!ğ
asBC_JLowNZ
 &&

3822 
š¡r
 !ğ
asBC_CALL
 && in¡¸!ğ
asBC_CALLBND
 && in¡¸!ğ
asBC_CALLINTF
 && in¡¸!ğ
asBC_RET
 && in¡¸!ğ
asBC_ALLOC
 && in¡¸!ğ
asBC_C®lPŒ
 &&

3823 
š¡r
 !ğ
asBC_J™EÁry
 )

3825 
	`asASSERT
Ğ(
l_bc
 - 
Şd
è=ğ
asBCTy³Size
[
asBCInfo
[
š¡r
].
ty³
] );

3829 
	}
}

3831 
	gasCCÚ‹xt
::
	$S‘Exû±iÚ
(cÚ¡ *
desü
)

3834 ifĞ
m_ÿÎšgSy¡emFunùiÚ
 =ğ0 )  
asERROR
;

3836 
	`S‘IÁ”ÇlExû±iÚ
(
desü
);

3839 
	}
}

3841 
	gasCCÚ‹xt
::
	$S‘IÁ”ÇlExû±iÚ
(cÚ¡ *
desü
)

3843 ifĞ
m_šExû±iÚHªdËr
 )

3845 
	`asASSERT
(
çl£
);

3849 
m_¡©us
 = 
asEXECUTION_EXCEPTION
;

3850 
m_»gs
.
doProûssSu¥’d
 = 
Œue
;

3852 
m_exû±iÚSŒšg
 = 
desü
;

3853 
m_exû±iÚFunùiÚ
 = 
m_cu¼’tFunùiÚ
->
id
;

3854 
m_exû±iÚLše
 = 
m_cu¼’tFunùiÚ
->
	`G‘LšeNumb”
((
m_»gs
.
´og¿mPoš‹r
 - m_cu¼’tFunùiÚ->
by‹Code
.
	`Add»ssOf
()));

3855 
m_exû±iÚCŞumn
 = 
m_exû±iÚLše
 >> 20;

3856 
m_exû±iÚLše
 &= 0xFFFFF;

3858 ifĞ
m_exû±iÚC®lback
 )

3859 
	`C®lExû±iÚC®lback
();

3860 
	}
}

3862 
	gasCCÚ‹xt
::
	$CËªR‘uºObjeù
()

3864 ifĞ
m_š™ŸlFunùiÚ
 && m_š™ŸlFunùiÚ->
	`DÛsR‘uºOnSck
(è&& 
m_¡©us
 =ğ
asEXECUTION_FINISHED
 )

3867 ifĞ
m_š™ŸlFunùiÚ
->
»tuºTy³
.
	`G‘ObjeùTy³
()->
beh
.
de¡ruù
 )

3868 
m_’gše
->
	`C®lObjeùM‘hod
(
	`G‘R‘uºObjeù
(), 
m_š™ŸlFunùiÚ
->
»tuºTy³
.
	`G‘ObjeùTy³
()->
beh
.
de¡ruù
);

3873 ifĞ
m_»gs
.
objeùRegi¡”
 == 0 ) ;

3875 
	`asASSERT
Ğ
m_»gs
.
objeùTy³
 != 0 );

3877 ifĞ
m_»gs
.
objeùTy³
 )

3880 
asSTy³Behaviour
 *
beh
 = &((
asCObjeùTy³
*)
m_»gs
.
objeùTy³
)->beh;

3881 ifĞ
m_»gs
.
objeùTy³
->
	`G‘FÏgs
(è& 
asOBJ_REF
 )

3883 
	`asASSERT
Ğ
beh
->
»Ëa£
 || (
m_»gs
.
objeùTy³
->
	`G‘FÏgs
(è& 
asOBJ_NOCOUNT
) );

3885 ifĞ
beh
->
»Ëa£
 )

3886 
m_’gše
->
	`C®lObjeùM‘hod
(
m_»gs
.
objeùRegi¡”
, 
beh
->
»Ëa£
);

3888 
m_»gs
.
objeùRegi¡”
 = 0;

3892 ifĞ
beh
->
de¡ruù
 )

3893 
m_’gše
->
	`C®lObjeùM‘hod
(
m_»gs
.
objeùRegi¡”
, 
beh
->
de¡ruù
);

3896 
m_’gše
->
	`C®lF»e
(
m_»gs
.
objeùRegi¡”
);

3897 
m_»gs
.
objeùRegi¡”
 = 0;

3900 
	}
}

3902 
	gasCCÚ‹xt
::
	$CËªSck
()

3904 
m_šExû±iÚHªdËr
 = 
Œue
;

3907 
	`CËªSckF¿me
();

3912 
m_¡©us
 = 
asEXECUTION_EXCEPTION
;

3914  
m_ÿÎSck
.
	`G‘L’gth
() > 0 )

3917 
asPWORD
 *
s
 = 
m_ÿÎSck
.
	`Add»ssOf
(è+ m_ÿÎSck.
	`G‘L’gth
(è- 
CALLSTACK_FRAME_SIZE
;

3918 ifĞ
s
[0] == 0 )

3921 
	`PİC®lS‹
();

3923 
	`CËªSckF¿me
();

3926 
m_šExû±iÚHªdËr
 = 
çl£
;

3927 
	}
}

3930 
boŞ
 
	gasCCÚ‹xt
::
	$IsV¬InScİe
(
asUINT
 
v¬Index
,‡sUINT 
¡ackLev–
)

3933 ifĞ
m_»gs
.
´og¿mPoš‹r
 =ğ0 )  
çl£
;

3935 ifĞ
¡ackLev–
 >ğ
	`G‘C®l¡ackSize
(èè 
çl£
;

3937 
asCSütFunùiÚ
 *
func
;

3938 
asUINT
 
pos
;

3940 ifĞ
¡ackLev–
 == 0 )

3942 
func
 = 
m_cu¼’tFunùiÚ
;

3943 
pos
 = 
	`asUINT
(
m_»gs
.
´og¿mPoš‹r
 - 
func
->
by‹Code
.
	`Add»ssOf
());

3947 
asPWORD
 *
s
 = 
m_ÿÎSck
.
	`Add»ssOf
(è+ (
	`G‘C®l¡ackSize
()-
¡ackLev–
-1)*
CALLSTACK_FRAME_SIZE
;

3948 
func
 = (
asCSütFunùiÚ
*)
s
[1];

3949 
pos
 = 
	`asUINT
((
asDWORD
*)
s
[2] - 
func
->
by‹Code
.
	`Add»ssOf
());

3953 ifĞ
func
->
v¬ŸbËs
.
	`G‘L’gth
(è<ğ
v¬Index
 )  
çl£
;

3954 ifĞ
func
->
v¬ŸbËs
[
v¬Index
]->
deş¬edAtProg¿mPos
 > 
pos
 )  
çl£
;

3956 
asUINT
 
deş¬edAt
 = 
func
->
v¬ŸbËs
[
v¬Index
]->
deş¬edAtProg¿mPos
;

3961  
n
 = 0;‚ < ()
func
->
objV¬ŸbËInfo
.
	`G‘L’gth
();‚++ )

3963 ifĞ
func
->
objV¬ŸbËInfo
[
n
].
´og¿mPos
 >ğ
deş¬edAt
 )

3967 
Ëv–
 = 0;

3968  ; 
n
 < ()
func
->
objV¬ŸbËInfo
.
	`G‘L’gth
();‚++ )

3970 ifĞ
func
->
objV¬ŸbËInfo
[
n
].
´og¿mPos
 > 
pos
 )

3973 ifĞ
func
->
objV¬ŸbËInfo
[
n
].
İtiÚ
 =ğ
asBLOCK_BEGIN
 ) 
Ëv–
++;

3974 ifĞ
func
->
objV¬ŸbËInfo
[
n
].
İtiÚ
 =ğ
asBLOCK_END
 && --
Ëv–
 < 0 )

3975  
çl£
;

3983  
Œue
;

3984 
	}
}

3987 
	gasCCÚ‹xt
::
D‘”mšeLiveObjeùs
(
asCA¼ay
<> &
liveObjeùs
, 
asUINT
 
¡ackLev–
)

3989 
asASSERT
Ğ
¡ackLev–
 < 
G‘C®l¡ackSize
() );

3991 
asCSütFunùiÚ
 *
	gfunc
;

3992 
asUINT
 
	gpos
;

3994 ifĞ
	g¡ackLev–
 == 0 )

3996 
func
 = 
m_cu¼’tFunùiÚ
;

3997 
	gpos
 = 
asUINT
(
m_»gs
.
´og¿mPoš‹r
 - 
func
->
by‹Code
.
Add»ssOf
());

3999 ifĞ
	gm_¡©us
 =ğ
asEXECUTION_EXCEPTION
 )

4004 
pos
--;

4009 
asPWORD
 *
	gs
 = 
m_ÿÎSck
.
Add»ssOf
(è+ (
G‘C®l¡ackSize
()-
¡ackLev–
-1)*
CALLSTACK_FRAME_SIZE
;

4010 
	gfunc
 = (
asCSütFunùiÚ
*)
s
[1];

4011 
	gpos
 = 
asUINT
((
asDWORD
*)
s
[2] - 
func
->
by‹Code
.
Add»ssOf
());

4016 
	gpos
--;

4020 
	gliveObjeùs
.
S‘L’gth
(
func
->
objV¬ŸbËPos
.
G‘L’gth
());

4021 
mem£t
(
liveObjeùs
.
Add»ssOf
(), 0, ()*liveObjeùs.
G‘L’gth
());

4022  
	gn
 = 0;‚ < ()
	gfunc
->
	gobjV¬ŸbËInfo
.
G‘L’gth
();‚++ )

4028 ifĞ
	gfunc
->
	gobjV¬ŸbËInfo
[
n
].
	g´og¿mPos
 > 
	gpos
 )

4031  --
	gn
;‚ >= 0;‚-- )

4033  
	gfunc
->
	gobjV¬ŸbËInfo
[
n
].
	gİtiÚ
 )

4035 
	gasOBJ_UNINIT
:

4039 
asUINT
 
v¬
 = 0;

4040  
asUINT
 
	gv
 = 0; v < 
	gfunc
->
	gobjV¬ŸbËPos
.
G‘L’gth
(); v++ )

4041 ifĞ
	gfunc
->
	gobjV¬ŸbËPos
[
v
] =ğ
func
->
objV¬ŸbËInfo
[
n
].
v¬ŸbËOff£t
 )

4043 
v¬
 = 
v
;

4046 
	gliveObjeùs
[
v¬
] -= 1;

4049 
	gasOBJ_INIT
:

4052 
asUINT
 
v¬
 = 0;

4053  
asUINT
 
	gv
 = 0; v < 
	gfunc
->
	gobjV¬ŸbËPos
.
G‘L’gth
(); v++ )

4054 ifĞ
	gfunc
->
	gobjV¬ŸbËPos
[
v
] =ğ
func
->
objV¬ŸbËInfo
[
n
].
v¬ŸbËOff£t
 )

4056 
v¬
 = 
v
;

4059 
	gliveObjeùs
[
v¬
] += 1;

4062 
	gasBLOCK_BEGIN
:

4066 
	gasBLOCK_END
:

4070 
Ã¡ed
 = 1;

4071  
	gÃ¡ed
 > 0 )

4073 
	gİtiÚ
 = 
func
->
objV¬ŸbËInfo
[--
n
].
İtiÚ
;

4074 ifĞ
	gİtiÚ
 == 3 )

4075 
Ã¡ed
++;

4076 ifĞ
	gİtiÚ
 == 2 )

4077 
Ã¡ed
--;

4090 
	gasCCÚ‹xt
::
	$CËªSckF¿me
()

4095 ifĞ!
m_isSckMemÜyNÙAÎoÿ‹d
 && 
m_»gs
.
´og¿mPoš‹r
 )

4098 
m_»gs
.
¡ackPoš‹r
 +ğ
m_cu¼’tFunùiÚ
->
v¬ŸbËS·û
;

4101 
asCA¼ay
<> 
liveObjeùs
;

4102 
	`D‘”mšeLiveObjeùs
(
liveObjeùs
, 0);

4104  
asUINT
 
n
 = 0;‚ < 
m_cu¼’tFunùiÚ
->
objV¬ŸbËPos
.
	`G‘L’gth
();‚++ )

4106 
pos
 = 
m_cu¼’tFunùiÚ
->
objV¬ŸbËPos
[
n
];

4107 ifĞ
n
 < 
m_cu¼’tFunùiÚ
->
objV¬ŸbËsOnH—p
 )

4110 ifĞ*(
asPWORD
*)&
m_»gs
.
¡ackF¿mePoš‹r
[-
pos
] )

4113 
asSTy³Behaviour
 *
beh
 = &
m_cu¼’tFunùiÚ
->
objV¬ŸbËTy³s
[
n
]->beh;

4114 ifĞ
m_cu¼’tFunùiÚ
->
objV¬ŸbËTy³s
[
n
]->
æags
 & 
asOBJ_REF
 )

4116 
	`asASSERT
Ğ(
m_cu¼’tFunùiÚ
->
objV¬ŸbËTy³s
[
n
]->
æags
 & 
asOBJ_NOCOUNT
è|| 
beh
->
»Ëa£
 );

4117 ifĞ
beh
->
»Ëa£
 )

4118 
m_’gše
->
	`C®lObjeùM‘hod
((*)*(
asPWORD
*)&
m_»gs
.
¡ackF¿mePoš‹r
[-
pos
], 
beh
->
»Ëa£
);

4119 *(
asPWORD
*)&
m_»gs
.
¡ackF¿mePoš‹r
[-
pos
] = 0;

4123 ifĞ
beh
->
de¡ruù
 )

4124 
m_’gše
->
	`C®lObjeùM‘hod
((*)*(
asPWORD
*)&
m_»gs
.
¡ackF¿mePoš‹r
[-
pos
], 
beh
->
de¡ruù
);

4127 
m_’gše
->
	`C®lF»e
((*)*(
asPWORD
*)&
m_»gs
.
¡ackF¿mePoš‹r
[-
pos
]);

4128 *(
asPWORD
*)&
m_»gs
.
¡ackF¿mePoš‹r
[-
pos
] = 0;

4134 
	`asASSERT
Ğ
m_cu¼’tFunùiÚ
->
objV¬ŸbËTy³s
[
n
]->
	`G‘FÏgs
(è& 
asOBJ_VALUE
 );

4137 ifĞ
liveObjeùs
[
n
] > 0 )

4139 
asSTy³Behaviour
 *
beh
 = &
m_cu¼’tFunùiÚ
->
objV¬ŸbËTy³s
[
n
]->beh;

4140 ifĞ
beh
->
de¡ruù
 )

4141 
m_’gše
->
	`C®lObjeùM‘hod
((*)(
asPWORD
*)&
m_»gs
.
¡ackF¿mePoš‹r
[-
pos
], 
beh
->
de¡ruù
);

4149 ifĞ
m_cu¼’tFunùiÚ
->
objeùTy³
 && 
m_»gs
.
´og¿mPoš‹r
 !ğm_cu¼’tFunùiÚ->
by‹Code
.
	`Add»ssOf
() )

4152 ifĞ!
m_cu¼’tFunùiÚ
->
»tuºTy³
.
	`IsReã»nû
(è&& m_cu¼’tFunùiÚ->
Çme
 !ğm_cu¼’tFunùiÚ->
objeùTy³
->name )

4154 
asSTy³Behaviour
 *
beh
 = &
m_cu¼’tFunùiÚ
->
objeùTy³
->beh;

4155 ifĞ
beh
->
»Ëa£
 && *(
asPWORD
*)&
m_»gs
.
¡ackF¿mePoš‹r
[0] != 0 )

4157 
m_’gše
->
	`C®lObjeùM‘hod
((*)*(
asPWORD
*)&
m_»gs
.
¡ackF¿mePoš‹r
[0], 
beh
->
»Ëa£
);

4158 *(
asPWORD
*)&
m_»gs
.
¡ackF¿mePoš‹r
[0] = 0;

4164 
m_isSckMemÜyNÙAÎoÿ‹d
 = 
çl£
;

4167 ifĞ
m_cu¼’tFunùiÚ
->
dÚtCËªUpOnExû±iÚ
 )

4171 
off£t
 = 0;

4172 ifĞ
m_cu¼’tFunùiÚ
->
objeùTy³
 )

4174 
off£t
 +ğ
AS_PTR_SIZE
;

4176  
asUINT
 
n
 = 0;‚ < 
m_cu¼’tFunùiÚ
->
·¿m‘”Ty³s
.
	`G‘L’gth
();‚++ )

4178 ifĞ
m_cu¼’tFunùiÚ
->
·¿m‘”Ty³s
[
n
].
	`IsObjeù
(è&& !m_cu¼’tFunùiÚ->·¿m‘”Ty³s[n].
	`IsReã»nû
() )

4180 ifĞ*(
asPWORD
*)&
m_»gs
.
¡ackF¿mePoš‹r
[
off£t
] )

4183 
asSTy³Behaviour
 *
beh
 = 
m_cu¼’tFunùiÚ
->
·¿m‘”Ty³s
[
n
].
	`G‘Behaviour
();

4184 ifĞ
m_cu¼’tFunùiÚ
->
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_REF
 )

4186 
	`asASSERT
Ğ(
m_cu¼’tFunùiÚ
->
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_NOCOUNT
è|| 
beh
->
»Ëa£
 );

4188 ifĞ
beh
->
»Ëa£
 )

4189 
m_’gše
->
	`C®lObjeùM‘hod
((*)*(
asPWORD
*)&
m_»gs
.
¡ackF¿mePoš‹r
[
off£t
], 
beh
->
»Ëa£
);

4190 *(
asPWORD
*)&
m_»gs
.
¡ackF¿mePoš‹r
[
off£t
] = 0;

4194 ifĞ
beh
->
de¡ruù
 )

4195 
m_’gše
->
	`C®lObjeùM‘hod
((*)*(
asPWORD
*)&
m_»gs
.
¡ackF¿mePoš‹r
[
off£t
], 
beh
->
de¡ruù
);

4198 
m_’gše
->
	`C®lF»e
((*)*(
asPWORD
*)&
m_»gs
.
¡ackF¿mePoš‹r
[
off£t
]);

4199 *(
asPWORD
*)&
m_»gs
.
¡ackF¿mePoš‹r
[
off£t
] = 0;

4204 
off£t
 +ğ
m_cu¼’tFunùiÚ
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

4206 
	}
}

4209 
	gasCCÚ‹xt
::
	$G‘Exû±iÚLšeNumb”
(*
cŞumn
, cÚ¡ **
£ùiÚName
)

4211 ifĞ
	`G‘S‹
(è!ğ
asEXECUTION_EXCEPTION
 )  
asERROR
;

4213 ifĞ
cŞumn
 ) *cŞumÀğ
m_exû±iÚCŞumn
;

4215 ifĞ
£ùiÚName
 ) *£ùiÚNamğ
m_’gše
->
sütFunùiÚs
[
m_exû±iÚFunùiÚ
]->
	`G‘SütSeùiÚName
();

4217  
m_exû±iÚLše
;

4218 
	}
}

4221 
asISütFunùiÚ
 *
	gasCCÚ‹xt
::
	$G‘Exû±iÚFunùiÚ
()

4223 ifĞ
	`G‘S‹
(è!ğ
asEXECUTION_EXCEPTION
 )  0;

4225  
m_’gše
->
sütFunùiÚs
[
m_exû±iÚFunùiÚ
];

4226 
	}
}

4229 cÚ¡ *
	gasCCÚ‹xt
::
	$G‘Exû±iÚSŒšg
()

4231 ifĞ
	`G‘S‹
(è!ğ
asEXECUTION_EXCEPTION
 )  0;

4233  
m_exû±iÚSŒšg
.
	`Add»ssOf
();

4234 
	}
}

4237 
asECÚ‹xtS‹
 
	gasCCÚ‹xt
::
	$G‘S‹
() const

4239  
m_¡©us
;

4240 
	}
}

4243 
	gasCCÚ‹xt
::
	$S‘LšeC®lback
(
asSFuncPŒ
 
ÿÎback
, *
obj
, 
ÿÎCÚv
)

4245 
m_lšeC®lback
 = 
Œue
;

4246 
m_»gs
.
doProûssSu¥’d
 = 
Œue
;

4247 
m_lšeC®lbackObj
 = 
obj
;

4248 
boŞ
 
isObj
 = 
çl£
;

4249 ifĞ()
ÿÎCÚv
 =ğ
asCALL_GENERIC
 )

4251 
m_lšeC®lback
 = 
çl£
;

4252 
m_»gs
.
doProûssSu¥’d
 = 
m_doSu¥’d
;

4253  
asNOT_SUPPORTED
;

4255 ifĞ()
ÿÎCÚv
 >ğ
asCALL_THISCALL
 )

4257 
isObj
 = 
Œue
;

4258 ifĞ
obj
 == 0 )

4260 
m_lšeC®lback
 = 
çl£
;

4261 
m_»gs
.
doProûssSu¥’d
 = 
m_doSu¥’d
;

4262  
asINVALID_ARG
;

4266 
r
 = 
	`D‘eùC®lšgCÚv’tiÚ
(
isObj
, 
ÿÎback
, 
ÿÎCÚv
, &
m_lšeC®lbackFunc
);

4267 ifĞ
r
 < 0 ) 
m_lšeC®lback
 = 
çl£
;

4269 
m_»gs
.
doProûssSu¥’d
 = 
m_doSu¥’d
 || 
m_lšeC®lback
;

4271  
r
;

4272 
	}
}

4274 
	gasCCÚ‹xt
::
	$C®lLšeC®lback
()

4276 ifĞ
m_lšeC®lbackFunc
.
ÿÎCÚv
 < 
ICC_THISCALL
 )

4277 
m_’gše
->
	`C®lGlob®FunùiÚ
(
this
, 
m_lšeC®lbackObj
, &
m_lšeC®lbackFunc
, 0);

4279 
m_’gše
->
	`C®lObjeùM‘hod
(
m_lšeC®lbackObj
, 
this
, &
m_lšeC®lbackFunc
, 0);

4280 
	}
}

4283 
	gasCCÚ‹xt
::
	$S‘Exû±iÚC®lback
(
asSFuncPŒ
 
ÿÎback
, *
obj
, 
ÿÎCÚv
)

4285 
m_exû±iÚC®lback
 = 
Œue
;

4286 
m_exû±iÚC®lbackObj
 = 
obj
;

4287 
boŞ
 
isObj
 = 
çl£
;

4288 ifĞ()
ÿÎCÚv
 =ğ
asCALL_GENERIC
 )

4289  
asNOT_SUPPORTED
;

4290 ifĞ()
ÿÎCÚv
 >ğ
asCALL_THISCALL
 )

4292 
isObj
 = 
Œue
;

4293 ifĞ
obj
 == 0 )

4295 
m_exû±iÚC®lback
 = 
çl£
;

4296  
asINVALID_ARG
;

4299 
r
 = 
	`D‘eùC®lšgCÚv’tiÚ
(
isObj
, 
ÿÎback
, 
ÿÎCÚv
, &
m_exû±iÚC®lbackFunc
);

4300 ifĞ
r
 < 0 ) 
m_exû±iÚC®lback
 = 
çl£
;

4301  
r
;

4302 
	}
}

4304 
	gasCCÚ‹xt
::
	$C®lExû±iÚC®lback
()

4306 ifĞ
m_exû±iÚC®lbackFunc
.
ÿÎCÚv
 < 
ICC_THISCALL
 )

4307 
m_’gše
->
	`C®lGlob®FunùiÚ
(
this
, 
m_exû±iÚC®lbackObj
, &
m_exû±iÚC®lbackFunc
, 0);

4309 
m_’gše
->
	`C®lObjeùM‘hod
(
m_exû±iÚC®lbackObj
, 
this
, &
m_exû±iÚC®lbackFunc
, 0);

4310 
	}
}

4313 
	gasCCÚ‹xt
::
	$CË¬LšeC®lback
()

4315 
m_lšeC®lback
 = 
çl£
;

4316 
m_»gs
.
doProûssSu¥’d
 = 
m_doSu¥’d
;

4317 
	}
}

4320 
	gasCCÚ‹xt
::
	$CË¬Exû±iÚC®lback
()

4322 
m_exû±iÚC®lback
 = 
çl£
;

4323 
	}
}

4325 
	gasCCÚ‹xt
::
	$C®lG’”ic
(
id
, *
objeùPoš‹r
)

4327 
asCSütFunùiÚ
 *
sysFunùiÚ
 = 
m_’gše
->
sütFunùiÚs
[
id
];

4328 
asSSy¡emFunùiÚIÁ”çû
 *
sysFunc
 = 
sysFunùiÚ
->
sysFuncIÁf
;

4329 (*
func
)(
asISütG’”ic
*èğ((*)×sISütG’”ic*))
sysFunc
->func;

4330 
pİSize
 = 
sysFunc
->
·¿mSize
;

4331 
asDWORD
 *
¬gs
 = 
m_»gs
.
¡ackPoš‹r
;

4334 *
cu¼’tObjeù
 = 0;

4335 ifĞ
sysFunc
->
ÿÎCÚv
 =ğ
ICC_GENERIC_METHOD
 )

4337 ifĞ
objeùPoš‹r
 )

4339 
cu¼’tObjeù
 = 
objeùPoš‹r
;

4347 
pİSize
 +ğ
AS_PTR_SIZE
;

4350 
cu¼’tObjeù
 = (*)*(
asPWORD
*)(
¬gs
);

4351 ifĞ
cu¼’tObjeù
 == 0 )

4353 
	`S‘IÁ”ÇlExû±iÚ
(
TXT_NULL_POINTER_ACCESS
);

4358 
cu¼’tObjeù
 = (*)(
	`asPWORD
(cu¼’tObjeùè+ 
sysFunc
->
ba£Off£t
);

4361 
¬gs
 +ğ
AS_PTR_SIZE
;

4365 ifĞ
sysFunùiÚ
->
	`DÛsR‘uºOnSck
() )

4368 
¬gs
 +ğ
AS_PTR_SIZE
;

4369 
pİSize
 +ğ
AS_PTR_SIZE
;

4372 
asCG’”ic
 
	`g’
(
m_’gše
, 
sysFunùiÚ
, 
cu¼’tObjeù
, 
¬gs
);

4374 
m_ÿÎšgSy¡emFunùiÚ
 = 
sysFunùiÚ
;

4375 
	`func
(&
g’
);

4376 
m_ÿÎšgSy¡emFunùiÚ
 = 0;

4378 
m_»gs
.
v®ueRegi¡”
 = 
g’
.
»tuºV®
;

4379 
m_»gs
.
objeùRegi¡”
 = 
g’
.objectRegister;

4380 
m_»gs
.
objeùTy³
 = 
sysFunùiÚ
->
»tuºTy³
.
	`G‘ObjeùTy³
();

4383 
off£t
 = 0;

4384  
asUINT
 
n
 = 0;‚ < 
sysFunùiÚ
->
·¿m‘”Ty³s
.
	`G‘L’gth
();‚++ )

4386 ifĞ
sysFunùiÚ
->
·¿m‘”Ty³s
[
n
].
	`IsObjeù
(è&& !sysFunùiÚ->·¿m‘”Ty³s[n].
	`IsReã»nû
() )

4388 *
obj
 = *(**)&
¬gs
[
off£t
];

4389 ifĞ
obj
 )

4392 
asSTy³Behaviour
 *
beh
 = &
sysFunùiÚ
->
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
()->beh;

4393 ifĞ
sysFunùiÚ
->
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_REF
 )

4395 
	`asASSERT
Ğ(
sysFunùiÚ
->
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_NOCOUNT
è|| 
beh
->
»Ëa£
 );

4396 ifĞ
beh
->
»Ëa£
 )

4397 
m_’gše
->
	`C®lObjeùM‘hod
(
obj
, 
beh
->
»Ëa£
);

4402 ifĞ
beh
->
de¡ruù
 )

4403 
m_’gše
->
	`C®lObjeùM‘hod
(
obj
, 
beh
->
de¡ruù
);

4405 
m_’gše
->
	`C®lF»e
(
obj
);

4409 
off£t
 +ğ
sysFunùiÚ
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

4413  
pİSize
;

4414 
	}
}

4417 
	gasCCÚ‹xt
::
	$G‘V¬CouÁ
(
asUINT
 
¡ackLev–
)

4419 
asISütFunùiÚ
 *
func
 = 
	`G‘FunùiÚ
(
¡ackLev–
);

4420 ifĞ
func
 =ğ0 )  
asINVALID_ARG
;

4422  
func
->
	`G‘V¬CouÁ
();

4423 
	}
}

4426 cÚ¡ *
	gasCCÚ‹xt
::
	$G‘V¬Name
(
asUINT
 
v¬Index
,‡sUINT 
¡ackLev–
)

4428 
asISütFunùiÚ
 *
func
 = 
	`G‘FunùiÚ
(
¡ackLev–
);

4429 ifĞ
func
 == 0 )  0;

4431 cÚ¡ *
Çme
 = 0;

4432 
r
 = 
func
->
	`G‘V¬
(
v¬Index
, &
Çme
);

4433  
r
 >ğ0 ? 
Çme
 : 0;

4434 
	}
}

4437 cÚ¡ *
	gasCCÚ‹xt
::
	$G‘V¬Deş¬©iÚ
(
asUINT
 
v¬Index
,‡sUINT 
¡ackLev–
)

4439 
asISütFunùiÚ
 *
func
 = 
	`G‘FunùiÚ
(
¡ackLev–
);

4440 ifĞ
func
 == 0 )  0;

4442  
func
->
	`G‘V¬Deş
(
v¬Index
);

4443 
	}
}

4446 
	gasCCÚ‹xt
::
	$G‘V¬Ty³Id
(
asUINT
 
v¬Index
,‡sUINT 
¡ackLev–
)

4448 
asISütFunùiÚ
 *
func
 = 
	`G‘FunùiÚ
(
¡ackLev–
);

4449 ifĞ
func
 =ğ0 )  
asINVALID_ARG
;

4451 
ty³Id
;

4452 
r
 = 
func
->
	`G‘V¬
(
v¬Index
, 0, &
ty³Id
);

4453  
r
 < 0 ?„ : 
ty³Id
;

4454 
	}
}

4457 *
	gasCCÚ‹xt
::
	$G‘Add»ssOfV¬
(
asUINT
 
v¬Index
,‡sUINT 
¡ackLev–
)

4460 ifĞ
m_»gs
.
´og¿mPoš‹r
 == 0 )  0;

4462 ifĞ
¡ackLev–
 >ğ
	`G‘C®l¡ackSize
() )  0;

4464 
asCSütFunùiÚ
 *
func
;

4465 
asDWORD
 *
sf
;

4466 ifĞ
¡ackLev–
 == 0 )

4468 
func
 = 
m_cu¼’tFunùiÚ
;

4469 
sf
 = 
m_»gs
.
¡ackF¿mePoš‹r
;

4473 
asPWORD
 *
s
 = 
m_ÿÎSck
.
	`Add»ssOf
(è+ (
	`G‘C®l¡ackSize
()-
¡ackLev–
-1)*
CALLSTACK_FRAME_SIZE
;

4474 
func
 = (
asCSütFunùiÚ
*)
s
[1];

4475 
sf
 = (
asDWORD
*)
s
[0];

4478 ifĞ
func
 == 0 )

4481 ifĞ
v¬Index
 >ğ
func
->
v¬ŸbËs
.
	`G‘L’gth
() )

4486 
pos
 = 
func
->
v¬ŸbËs
[
v¬Index
]->
¡ackOff£t
;

4487 ifĞ(
func
->
v¬ŸbËs
[
v¬Index
]->
ty³
.
	`IsObjeù
(è&& !func->v¬ŸbËs[v¬Index]->ty³.
	`IsObjeùHªdË
()è|| (
pos
 <= 0) )

4490 
boŞ
 
ÚH—p
 = 
çl£
;

4491 ifĞ
func
->
v¬ŸbËs
[
v¬Index
]->
ty³
.
	`IsObjeù
() &&

4492 !
func
->
v¬ŸbËs
[
v¬Index
]->
ty³
.
	`IsObjeùHªdË
() )

4494 
ÚH—p
 = 
Œue
;

4495 ifĞ
func
->
v¬ŸbËs
[
v¬Index
]->
ty³
.
	`G‘ObjeùTy³
()->
	`G‘FÏgs
(è& 
asOBJ_VALUE
 )

4497  
asUINT
 
n
 = 0;‚ < 
func
->
objV¬ŸbËPos
.
	`G‘L’gth
();‚++ )

4499 ifĞ
func
->
objV¬ŸbËPos
[
n
] =ğ
pos
 )

4501 
ÚH—p
 = 
n
 < 
func
->
objV¬ŸbËsOnH—p
;

4503 ifĞ!
ÚH—p
 )

4506 
asCA¼ay
<> 
liveObjeùs
;

4507 
	`D‘”mšeLiveObjeùs
(
liveObjeùs
, 
¡ackLev–
);

4509 ifĞ
liveObjeùs
[
n
] <= 0 )

4520 ifĞ!
ÚH—p
 && 
pos
 <= 0 )

4523 
¡ackPos
 = 0;

4524 ifĞ
func
->
objeùTy³
 )

4525 
¡ackPos
 -ğ
AS_PTR_SIZE
;

4527 ifĞ
func
->
	`DÛsR‘uºOnSck
() )

4528 
¡ackPos
 -ğ
AS_PTR_SIZE
;

4530  
asUINT
 
n
 = 0;‚ < 
func
->
·¿m‘”Ty³s
.
	`G‘L’gth
();‚++ )

4532 ifĞ
¡ackPos
 =ğ
pos
 )

4535 ifĞ
func
->
šOutFÏgs
[
n
] !ğ
asTM_NONE
 )

4536 
ÚH—p
 = 
Œue
;

4540 
¡ackPos
 -ğ
func
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

4544 ifĞ
ÚH—p
 )

4545  *(**)(
sf
 - 
func
->
v¬ŸbËs
[
v¬Index
]->
¡ackOff£t
);

4548  
sf
 - 
func
->
v¬ŸbËs
[
v¬Index
]->
¡ackOff£t
;

4549 
	}
}

4554 
	gasCCÚ‹xt
::
	$G‘ThisTy³Id
(
asUINT
 
¡ackLev–
)

4556 
asISütFunùiÚ
 *
func
 = 
	`G‘FunùiÚ
(
¡ackLev–
);

4557 ifĞ
func
 =ğ0 )  
asINVALID_ARG
;

4559 ifĞ
func
->
	`G‘ObjeùTy³
() == 0 )

4563 
asCD©aTy³
 
dt
 =‡sCD©aTy³::
	`C»©eObjeù
((
asCObjeùTy³
*)
func
->
	`G‘ObjeùTy³
(), 
çl£
);

4566  
m_’gše
->
	`G‘Ty³IdFromD©aTy³
(
dt
);

4567 
	}
}

4572 *
	gasCCÚ‹xt
::
	$G‘ThisPoš‹r
(
asUINT
 
¡ackLev–
)

4574 ifĞ
¡ackLev–
 >ğ
	`G‘C®l¡ackSize
() )

4577 
asCSütFunùiÚ
 *
func
;

4578 
asDWORD
 *
sf
;

4579 ifĞ
¡ackLev–
 == 0 )

4581 
func
 = 
m_cu¼’tFunùiÚ
;

4582 
sf
 = 
m_»gs
.
¡ackF¿mePoš‹r
;

4586 
asPWORD
 *
s
 = 
m_ÿÎSck
.
	`Add»ssOf
(è+ (
	`G‘C®l¡ackSize
()-
¡ackLev–
-1)*
CALLSTACK_FRAME_SIZE
;

4587 
func
 = (
asCSütFunùiÚ
*)
s
[1];

4588 
sf
 = (
asDWORD
*)
s
[0];

4591 ifĞ
func
 == 0 )

4594 ifĞ
func
->
objeùTy³
 == 0 )

4597 *
thisPoš‹r
 = (*)*(
asPWORD
*)(
sf
);

4598 ifĞ
thisPoš‹r
 == 0 )

4605  
thisPoš‹r
;

4606 
	}
}

4608 
	gEND_AS_NAMESPACE


	@../src/script/as_datatype.cpp

38 
	~"as_cÚfig.h
"

39 
	~"as_d©©y³.h
"

40 
	~"as_tok’def.h
"

41 
	~"as_objeùty³.h
"

42 
	~"as_sü‹ngše.h
"

43 
	~"as_tok’iz”.h
"

45 
BEGIN_AS_NAMESPACE


47 
	gasCD©aTy³
::
	$asCD©aTy³
()

49 
tok’Ty³
 = 
‰UÄecognizedTok’
;

50 
objeùTy³
 = 0;

51 
isReã»nû
 = 
çl£
;

52 
isR—dOÆy
 = 
çl£
;

53 
isObjeùHªdË
 = 
çl£
;

54 
isCÚ¡HªdË
 = 
çl£
;

55 
funcDef
 = 0;

56 
	}
}

58 
	gasCD©aTy³
::
	$asCD©aTy³
(cÚ¡ 
asCD©aTy³
 &
dt
)

60 
tok’Ty³
 = 
dt
.tokenType;

61 
objeùTy³
 = 
dt
.objectType;

62 
isReã»nû
 = 
dt
.isReference;

63 
isR—dOÆy
 = 
dt
.isReadOnly;

64 
isObjeùHªdË
 = 
dt
.isObjectHandle;

65 
isCÚ¡HªdË
 = 
dt
.isConstHandle;

66 
funcDef
 = 
dt
.funcDef;

67 
	}
}

69 
	gasCD©aTy³
::~
	$asCD©aTy³
()

71 
	}
}

73 
boŞ
 
asCD©aTy³
::
	$IsV®id
() const

75 ifĞ
tok’Ty³
 =ğ
‰UÄecognizedTok’
 &&

76 !
isObjeùHªdË
 )

77  
çl£
;

79  
Œue
;

80 
	}
}

82 
asCD©aTy³
 
	gasCD©aTy³
::
	$C»©eObjeù
(
asCObjeùTy³
 *
Ù
, 
boŞ
 
isCÚ¡
)

84 
asCD©aTy³
 
dt
;

86 
dt
.
tok’Ty³
 = 
‰Id’tif›r
;

87 
dt
.
objeùTy³
 = 
Ù
;

88 
dt
.
isR—dOÆy
 = 
isCÚ¡
;

90  
dt
;

91 
	}
}

93 
asCD©aTy³
 
	gasCD©aTy³
::
	$C»©eObjeùHªdË
(
asCObjeùTy³
 *
Ù
, 
boŞ
 
isCÚ¡
)

95 
asCD©aTy³
 
dt
;

97 
dt
.
tok’Ty³
 = 
‰Id’tif›r
;

98 
dt
.
objeùTy³
 = 
Ù
;

99 
dt
.
isObjeùHªdË
 = 
Œue
;

100 
dt
.
isCÚ¡HªdË
 = 
isCÚ¡
;

102  
dt
;

103 
	}
}

105 
asCD©aTy³
 
	gasCD©aTy³
::
	$C»©eFuncDef
(
asCSütFunùiÚ
 *
func
)

107 
asCD©aTy³
 
dt
;

108 
dt
.
tok’Ty³
 = 
‰Id’tif›r
;

109 
dt
.
funcDef
 = 
func
;

110 
dt
.
objeùTy³
 = &
func
->
’gše
->
funùiÚBehaviours
;

112  
dt
;

113 
	}
}

115 
asCD©aTy³
 
	gasCD©aTy³
::
	$C»©ePrim™ive
(
eTok’Ty³
 
‰
, 
boŞ
 
isCÚ¡
)

117 
asCD©aTy³
 
dt
;

119 
dt
.
tok’Ty³
 = 
‰
;

120 
dt
.
isR—dOÆy
 = 
isCÚ¡
;

122  
dt
;

123 
	}
}

125 
asCD©aTy³
 
	gasCD©aTy³
::
	$C»©eNuÎHªdË
()

127 
asCD©aTy³
 
dt
;

129 
dt
.
tok’Ty³
 = 
‰UÄecognizedTok’
;

130 
dt
.
isR—dOÆy
 = 
Œue
;

131 
dt
.
isObjeùHªdË
 = 
Œue
;

132 
dt
.
isCÚ¡HªdË
 = 
Œue
;

134  
dt
;

135 
	}
}

137 
boŞ
 
	gasCD©aTy³
::
	$IsNuÎHªdË
() const

139 ifĞ
tok’Ty³
 =ğ
‰UÄecognizedTok’
 &&

140 
objeùTy³
 == 0 &&

141 
isObjeùHªdË
 )

142  
Œue
;

144  
çl£
;

145 
	}
}

147 
asCSŒšg
 
	gasCD©aTy³
::
	$FÜm©
(
boŞ
 
šşudeName¥aû
) const

149 ifĞ
	`IsNuÎHªdË
() )

152 
asCSŒšg
 
¡r
;

154 ifĞ
isR—dOÆy
 )

155 
¡r
 = "const ";

157 ifĞ
šşudeName¥aû
 )

159 ifĞ
objeùTy³
 )

160 
¡r
 +ğ
objeùTy³
->
ÇmeS·û
->
Çme
 + "::";

161 ifĞ
funcDef
 )

162 
¡r
 +ğ
funcDef
->
ÇmeS·û
->
Çme
 + "::";

165 ifĞ
tok’Ty³
 !ğ
‰Id’tif›r
 )

167 
¡r
 +ğ
asCTok’iz”
::
	`G‘Defš™iÚ
(
tok’Ty³
);

169 ifĞ
	`IsA¼ayTy³
(è&& 
objeùTy³
 && !objeùTy³->
’gše
->
•
.
ex·ndDeçuÉA¼ayToTem¶©e
 )

171 
¡r
 +ğ
objeùTy³
->
‹m¶©eSubTy³
.
	`FÜm©
(
šşudeName¥aû
);

172 
¡r
 += "[]";

174 ifĞ
funcDef
 )

176 
¡r
 +ğ
funcDef
->
Çme
;

178 ifĞ
objeùTy³
 )

180 
¡r
 +ğ
objeùTy³
->
Çme
;

181 ifĞ
objeùTy³
->
æags
 & 
asOBJ_TEMPLATE
 )

183 
¡r
 += "<";

184 
¡r
 +ğ
objeùTy³
->
‹m¶©eSubTy³
.
	`FÜm©
(
šşudeName¥aû
);

185 
¡r
 += ">";

190 
¡r
 = "<unknown>";

193 ifĞ
isObjeùHªdË
 )

195 
¡r
 += "@";

196 ifĞ
isCÚ¡HªdË
 )

197 
¡r
 += "const";

200 ifĞ
isReã»nû
 )

201 
¡r
 += "&";

203  
¡r
;

204 
	}
}

206 
	gasCD©aTy³
 &asCD©aTy³::
İ”©Ü
 =(cÚ¡ 
asCD©aTy³
 &
dt
)

208 
tok’Ty³
 = 
dt
.tokenType;

209 
	gisReã»nû
 = 
dt
.
isReã»nû
;

210 
	gobjeùTy³
 = 
dt
.
objeùTy³
;

211 
	gisR—dOÆy
 = 
dt
.
isR—dOÆy
;

212 
	gisObjeùHªdË
 = 
dt
.
isObjeùHªdË
;

213 
	gisCÚ¡HªdË
 = 
dt
.
isCÚ¡HªdË
;

214 
	gfuncDef
 = 
dt
.
funcDef
;

216  (
	gasCD©aTy³
 &)*
	gthis
;

219 
	gasCD©aTy³
::
	$MakeHªdË
(
boŞ
 
b
, boŞ 
acû±HªdËFÜScİe
)

221 ifĞ!
b
 )

223 
isObjeùHªdË
 = 
b
;

224 
isCÚ¡HªdË
 = 
çl£
;

226 ifĞ
b
 && !
isObjeùHªdË
 )

233 ifĞ!
funcDef
 &&

234 (!
objeùTy³
 ||

235 !((
objeùTy³
->
æags
 & 
asOBJ_REF
è|| (objeùTy³->æag & 
asOBJ_TEMPLATE_SUBTYPE
è|| (objeùTy³->æag & 
asOBJ_ASHANDLE
)) ||

236 (
objeùTy³
->
æags
 & 
asOBJ_NOHANDLE
) ||

237 ((
objeùTy³
->
æags
 & 
asOBJ_SCOPED
è&& !
acû±HªdËFÜScİe
)) )

240 
isObjeùHªdË
 = 
b
;

241 
isCÚ¡HªdË
 = 
çl£
;

244 ifĞ(
objeùTy³
->
æags
 & 
asOBJ_ASHANDLE
) )

245 
isObjeùHªdË
 = 
çl£
;

249 
	}
}

251 
	gasCD©aTy³
::
	$MakeA¼ay
(
asCSütEngše
 *
’gše
)

253 ifĞ
’gše
->
deçuÉA¼ayObjeùTy³
 == 0 )

254  
asINVALID_TYPE
;

256 
boŞ
 
tmpIsR—dOÆy
 = 
isR—dOÆy
;

257 
isR—dOÆy
 = 
çl£
;

258 
asCObjeùTy³
 *
©
 = 
’gše
->
	`G‘Tem¶©eIn¡ªûTy³
Óngše->
deçuÉA¼ayObjeùTy³
, *
this
);

259 
isR—dOÆy
 = 
tmpIsR—dOÆy
;

261 
isObjeùHªdË
 = 
çl£
;

262 
isCÚ¡HªdË
 = 
çl£
;

264 
objeùTy³
 = 
©
;

265 
tok’Ty³
 = 
‰Id’tif›r
;

268 
	}
}

270 
	gasCD©aTy³
::
	$MakeReã»nû
(
boŞ
 
b
)

272 
isReã»nû
 = 
b
;

275 
	}
}

277 
	gasCD©aTy³
::
	$MakeR—dOÆy
(
boŞ
 
b
)

279 ifĞ
isObjeùHªdË
 )

281 
isCÚ¡HªdË
 = 
b
;

285 
isR—dOÆy
 = 
b
;

287 
	}
}

289 
	gasCD©aTy³
::
	$MakeHªdËToCÚ¡
(
boŞ
 
b
)

291 ifĞ!
isObjeùHªdË
 )  -1;

293 
isR—dOÆy
 = 
b
;

295 
	}
}

297 
boŞ
 
	gasCD©aTy³
::
	$SuµÜtHªdËs
() const

299 ifĞ
objeùTy³
 &&

300 (
objeùTy³
->
æags
 & 
asOBJ_REF
) &&

301 !(
objeùTy³
->
æags
 & 
asOBJ_NOHANDLE
) &&

302 !
isObjeùHªdË
 )

303  
Œue
;

305  
çl£
;

306 
	}
}

308 
boŞ
 
	gasCD©aTy³
::
	$CªBeIn¡ªcŸ‹d
() const

310 ifĞ
	`G‘SizeOnSckDWÜds
() == 0 ||

311 (
	`IsObjeù
() &&

312 (
objeùTy³
->
æags
 & 
asOBJ_REF
) &&

313 ((
objeùTy³
->
æags
 & 
asOBJ_NOHANDLE
) ||

314 (!
	`IsObjeùHªdË
() &&

315 
objeùTy³
->
beh
.
çùÜ›s
.
	`G‘L’gth
() == 0))) )

316  
çl£
;

318  
Œue
;

319 
	}
}

321 
boŞ
 
	gasCD©aTy³
::
	$CªBeCİ›d
() const

324 ifĞ
	`IsPrim™ive
(èè 
Œue
;

327 ifĞ
objeùTy³
->
æags
 & 
asOBJ_POD
 )  
Œue
;

330 ifĞ!
	`CªBeIn¡ªcŸ‹d
(èè 
çl£
;

333 ifĞ
objeùTy³
->
beh
.
cÚ¡ruù
 == 0 &&

334 
objeùTy³
->
beh
.
çùÜy
 =ğ0 )  
çl£
;

337 ifĞ
objeùTy³
->
beh
.
cİy
 =ğ0 )  
çl£
;

339  
Œue
;

340 
	}
}

342 
boŞ
 
	gasCD©aTy³
::
	$IsR—dOÆy
() const

344 ifĞ
isObjeùHªdË
 )

345  
isCÚ¡HªdË
;

347  
isR—dOÆy
;

348 
	}
}

350 
boŞ
 
	gasCD©aTy³
::
	$IsHªdËToCÚ¡
() const

352 ifĞ!
isObjeùHªdË
 )  
çl£
;

353  
isR—dOÆy
;

354 
	}
}

357 
boŞ
 
	gasCD©aTy³
::
	$IsA¼ayTy³
() const

360 ifĞ
objeùTy³
 && objeùTy³->
’gše
->
deçuÉA¼ayObjeùTy³
 )

361  
objeùTy³
->
Çme
 =ğobjeùTy³->
’gše
->
deçuÉA¼ayObjeùTy³
->name;

363  
çl£
;

364 
	}
}

366 
boŞ
 
	gasCD©aTy³
::
	$IsTem¶©e
() const

368 ifĞ
objeùTy³
 && (objeùTy³->
æags
 & 
asOBJ_TEMPLATE
) )

369  
Œue
;

371  
çl£
;

372 
	}
}

374 
boŞ
 
	gasCD©aTy³
::
	$IsSütObjeù
() const

376 ifĞ
objeùTy³
 && (objeùTy³->
æags
 & 
asOBJ_SCRIPT_OBJECT
) )

377  
Œue
;

379  
çl£
;

380 
	}
}

382 
asCD©aTy³
 
	gasCD©aTy³
::
	$G‘SubTy³
() const

384 
	`asASSERT
(
objeùTy³
);

385  
objeùTy³
->
‹m¶©eSubTy³
;

386 
	}
}

389 
boŞ
 
	gasCD©aTy³
::
İ”©Ü
 !=(cÚ¡ 
asCD©aTy³
 &
dt
) const

391  !(*
this
 =ğ
dt
);

394 
boŞ
 
	gasCD©aTy³
::
İ”©Ü
 ==(cÚ¡ 
asCD©aTy³
 &
dt
) const

396 ifĞ!
IsEqu®Exû±RefAndCÚ¡
(
dt
èè 
çl£
;

397 ifĞ
	gisReã»nû
 !ğ
dt
.
isReã»nû
 )  
çl£
;

398 ifĞ
	gisR—dOÆy
 !ğ
dt
.
isR—dOÆy
 )  
çl£
;

399 ifĞ
	gisCÚ¡HªdË
 !ğ
dt
.
isCÚ¡HªdË
 )  
çl£
;

401  
	gŒue
;

404 
boŞ
 
	gasCD©aTy³
::
	$IsEqu®Exû±Ref
(cÚ¡ 
asCD©aTy³
 &
dt
) const

406 ifĞ!
	`IsEqu®Exû±RefAndCÚ¡
(
dt
èè 
çl£
;

407 ifĞ
isR—dOÆy
 !ğ
dt
.isR—dOÆy )  
çl£
;

408 ifĞ
isCÚ¡HªdË
 !ğ
dt
.isCÚ¡HªdË )  
çl£
;

410  
Œue
;

411 
	}
}

413 
boŞ
 
	gasCD©aTy³
::
	$IsEqu®Exû±RefAndCÚ¡
(cÚ¡ 
asCD©aTy³
 &
dt
) const

416 ifĞ
tok’Ty³
 !ğ
dt
.tok’Ty³ )  
çl£
;

417 ifĞ
objeùTy³
 !ğ
dt
.objeùTy³ )  
çl£
;

418 ifĞ
isObjeùHªdË
 !ğ
dt
.isObjeùHªdË )  
çl£
;

419 ifĞ
isObjeùHªdË
 )

420 ifĞ
isR—dOÆy
 !ğ
dt
.isR—dOÆy )  
çl£
;

421 ifĞ
funcDef
 !ğ
dt
.funcDeàè 
çl£
;

423  
Œue
;

424 
	}
}

426 
boŞ
 
	gasCD©aTy³
::
	$IsEqu®Exû±CÚ¡
(cÚ¡ 
asCD©aTy³
 &
dt
) const

428 ifĞ!
	`IsEqu®Exû±RefAndCÚ¡
(
dt
èè 
çl£
;

429 ifĞ
isReã»nû
 !ğ
dt
.isReã»nû )  
çl£
;

431  
Œue
;

432 
	}
}

434 
boŞ
 
	gasCD©aTy³
::
	$IsEqu®Exû±IÁ”çûTy³
(cÚ¡ 
asCD©aTy³
 &
dt
) const

436 ifĞ
tok’Ty³
 !ğ
dt
.tok’Ty³ )  
çl£
;

437 ifĞ
isReã»nû
 !ğ
dt
.isReã»nû )  
çl£
;

438 ifĞ
isObjeùHªdË
 !ğ
dt
.isObjeùHªdË )  
çl£
;

439 ifĞ
isR—dOÆy
 !ğ
dt
.isR—dOÆy )  
çl£
;

440 ifĞ
isCÚ¡HªdË
 !ğ
dt
.isCÚ¡HªdË )  
çl£
;

442 ifĞ
objeùTy³
 !ğ
dt
.objectType )

444 ifĞ!
objeùTy³
 || !
dt
.objeùTy³ )  
çl£
;

447 ifĞ!
objeùTy³
->
	`IsIÁ”çû
(è&& !((objeùTy³->
æags
 & 
asOBJ_TEMPLATE
è&& objeùTy³->
‹m¶©eSubTy³
.
	`G‘ObjeùTy³
(è&& objeùTy³->‹m¶©eSubTy³.G‘ObjeùTy³()->IsIÁ”çû()èè 
çl£
;

448 ifĞ!
dt
.
objeùTy³
->
	`IsIÁ”çû
(è&& !((dt.objeùTy³->
æags
 & 
asOBJ_TEMPLATE
è&& dt.objeùTy³->
‹m¶©eSubTy³
.
	`G‘ObjeùTy³
(è&& dt.objeùTy³->‹m¶©eSubTy³.G‘ObjeùTy³()->IsIÁ”çû()èè 
çl£
;

451 ifĞ
objeùTy³
->
	`IsIÁ”çû
(è!ğ
dt
.objeùTy³->IsIÁ”çû(èè 
çl£
;

454 ifĞ
funcDef
 !ğ
dt
.funcDeàè 
çl£
;

456  
Œue
;

457 
	}
}

459 
boŞ
 
	gasCD©aTy³
::
	$IsPrim™ive
() const

462 ifĞ
	`IsEnumTy³
() )

463  
Œue
;

466 ifĞ
objeùTy³
 || 
funcDef
 )

467  
çl£
;

470 ifĞ
tok’Ty³
 =ğ
‰UÄecognizedTok’
 )

471  
çl£
;

473  
Œue
;

474 
	}
}

476 
boŞ
 
	gasCD©aTy³
::
	$IsSamePrim™iveBa£Ty³
(cÚ¡ 
asCD©aTy³
 &
dt
) const

478 ifĞ!
	`IsPrim™ive
(è|| !
dt
.IsPrim™ive(èè 
çl£
;

480 ifĞ
	`IsIÁeg”Ty³
(è&& 
dt
.IsIÁeg”Ty³(èè 
Œue
;

481 ifĞ
	`IsUnsigÃdTy³
(è&& 
dt
.IsUnsigÃdTy³(èè 
Œue
;

482 ifĞ
	`IsFlßtTy³
(è&& 
dt
.IsFlßtTy³(èè 
Œue
;

483 ifĞ
	`IsDoubËTy³
(è&& 
dt
.IsDoubËTy³(èè 
Œue
;

484 ifĞ
	`IsBoŞ—nTy³
(è&& 
dt
.IsBoŞ—nTy³(èè 
Œue
;

485 ifĞ
	`IsFlßtTy³
(è&& 
dt
.
	`IsDoubËTy³
(èè 
Œue
;

486 ifĞ
	`IsDoubËTy³
(è&& 
dt
.
	`IsFlßtTy³
(èè 
Œue
;

488  
çl£
;

489 
	}
}

491 
boŞ
 
	gasCD©aTy³
::
	$IsIÁeg”Ty³
() const

493 ifĞ
tok’Ty³
 =ğ
‰IÁ
 ||

494 
tok’Ty³
 =ğ
‰IÁ8
 ||

495 
tok’Ty³
 =ğ
‰IÁ16
 ||

496 
tok’Ty³
 =ğ
‰IÁ64
 )

497  
Œue
;

499  
çl£
;

500 
	}
}

502 
boŞ
 
	gasCD©aTy³
::
	$IsUnsigÃdTy³
() const

504 ifĞ
tok’Ty³
 =ğ
‰UIÁ
 ||

505 
tok’Ty³
 =ğ
‰UIÁ8
 ||

506 
tok’Ty³
 =ğ
‰UIÁ16
 ||

507 
tok’Ty³
 =ğ
‰UIÁ64
 )

508  
Œue
;

510  
çl£
;

511 
	}
}

513 
boŞ
 
	gasCD©aTy³
::
	$IsFlßtTy³
() const

515 ifĞ
tok’Ty³
 =ğ
‰Flßt
 )

516  
Œue
;

518  
çl£
;

519 
	}
}

521 
boŞ
 
	gasCD©aTy³
::
	$IsDoubËTy³
() const

523 ifĞ
tok’Ty³
 =ğ
‰DoubË
 )

524  
Œue
;

526  
çl£
;

527 
	}
}

529 
boŞ
 
	gasCD©aTy³
::
	$IsBoŞ—nTy³
() const

531 ifĞ
tok’Ty³
 =ğ
‰BoŞ
 )

532  
Œue
;

534  
çl£
;

535 
	}
}

537 
boŞ
 
	gasCD©aTy³
::
	$IsObjeù
() const

540 ifĞ
	`IsEnumTy³
() )

541  
çl£
;

543 ifĞ
objeùTy³
 )  
Œue
;

545  
çl£
;

546 
	}
}

548 
	gasCD©aTy³
::
	$G‘SizeInMemÜyBy‹s
() const

550 ifĞ
objeùTy³
 != 0 )

551  
objeùTy³
->
size
;

553 ifĞ
tok’Ty³
 =ğ
‰Void
 )

556 ifĞ
tok’Ty³
 =ğ
‰IÁ8
 ||

557 
tok’Ty³
 =ğ
‰UIÁ8
 )

560 ifĞ
tok’Ty³
 =ğ
‰IÁ16
 ||

561 
tok’Ty³
 =ğ
‰UIÁ16
 )

564 ifĞ
tok’Ty³
 =ğ
‰DoubË
 ||

565 
tok’Ty³
 =ğ
‰IÁ64
 ||

566 
tok’Ty³
 =ğ
‰UIÁ64
 )

569 ifĞ
tok’Ty³
 =ğ
‰BoŞ
 )

570  
AS_SIZEOF_BOOL
;

573 ifĞ
tok’Ty³
 =ğ
‰UÄecognizedTok’
 )

574  4*
AS_PTR_SIZE
;

577 
	}
}

579 
	gasCD©aTy³
::
	$G‘SizeInMemÜyDWÜds
() const

581 
s
 = 
	`G‘SizeInMemÜyBy‹s
();

582 ifĞ
s
 == 0 )  0;

583 ifĞ
s
 <= 4 )  1;

585  
s
/4;

586 
	}
}

588 
	gasCD©aTy³
::
	$G‘SizeOnSckDWÜds
() const

591 
size
 = 
tok’Ty³
 =ğ
‰Que¡iÚ
 ? 1 : 0;

593 ifĞ
isReã»nû
 )  
AS_PTR_SIZE
 + 
size
;

594 ifĞ
objeùTy³
 && !
	`IsEnumTy³
(èè 
AS_PTR_SIZE
 + 
size
;

596  
	`G‘SizeInMemÜyDWÜds
(è+ 
size
;

597 
	}
}

599 
asSTy³Behaviour
 *
	gasCD©aTy³
::
	$G‘Behaviour
() const

601  
objeùTy³
 ? &objeùTy³->
beh
 : 0;

602 
	}
}

604 
boŞ
 
	gasCD©aTy³
::
	$IsEnumTy³
() const

606 ifĞ
objeùTy³
 && (objeùTy³->
æags
 & 
asOBJ_ENUM
) )

607  
Œue
;

609  
çl£
;

610 
	}
}

612 
	gEND_AS_NAMESPACE


	@../src/script/as_gc.cpp

39 
	~<¡dlib.h
>

41 
	~"as_gc.h
"

42 
	~"as_sü‹ngše.h
"

43 
	~"as_sütobjeù.h
"

44 
	~"as_‹xts.h
"

46 
BEGIN_AS_NAMESPACE


48 
	gasCG¬bageCŞËùÜ
::
	$asCG¬bageCŞËùÜ
()

50 
’gše
 = 0;

51 
d‘eùS‹
 = 
ş—rCouÁ”s_š™
;

52 
de¡royNewS‹
 = 
de¡royG¬bage_š™
;

53 
de¡royOldS‹
 = 
de¡royG¬bage_š™
;

54 
numDe¡royed
 = 0;

55 
numNewDe¡royed
 = 0;

56 
numD‘eùed
 = 0;

57 
isProûssšg
 = 
çl£
;

58 
	}
}

60 
	gasCG¬bageCŞËùÜ
::
	$AddSütObjeùToGC
(*
obj
, 
asCObjeùTy³
 *
objTy³
)

62 ifĞ
obj
 =ğ0 || 
objTy³
 == 0 )

64 
’gše
->
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_ERROR
, 
TXT_GC_RECEIVED_NULL_PTR
);

68 
’gše
->
	`C®lObjeùM‘hod
(
obj
, 
objTy³
->
beh
.
add»f
);

69 
asSObjTy³Paœ
 
Ù
 = {
obj
, 
objTy³
, 0};

75 ifĞ
’gše
->
•
.
autoG¬bageCŞËù
 && 
gcNewObjeùs
.
	`G‘L’gth
() )

79 ifĞ
	`TRYENTERCRITICALSECTION
(
gcCŞËùšg
) )

85 ifĞ
gcOldObjeùs
.
	`G‘L’gth
() )

87 
	`Id’tifyG¬bageW™hCyşicRefs
();

88 
	`De¡royOldG¬bage
();

92 
™”
 = ()
gcNewObjeùs
.
	`G‘L’gth
();

93 ifĞ
™”
 > 10 ) iter = 10;

94  
™”
-- > 0 )

95 
	`De¡royNewG¬bage
();

97 
	`LEAVECRITICALSECTION
(
gcCŞËùšg
);

103 
	`ENTERCRITICALSECTION
(
gcCr™iÿl
);

104 
gcNewObjeùs
.
	`PushLa¡
(
Ù
);

105 
	`LEAVECRITICALSECTION
(
gcCr™iÿl
);

106 
	}
}

108 
	gasCG¬bageCŞËùÜ
::
	$G¬bageCŞËù
(
asDWORD
 
æags
)

111 ifĞ
	`TRYENTERCRITICALSECTION
(
gcCŞËùšg
) )

114 ifĞ
isProûssšg
 )  1;

116 
isProûssšg
 = 
Œue
;

118 
boŞ
 
doD‘eù
 = (
æags
 & 
asGC_DETECT_GARBAGE
è|| !(æag & 
asGC_DESTROY_GARBAGE
);

119 
boŞ
 
doDe¡roy
 = (
æags
 & 
asGC_DESTROY_GARBAGE
è|| !(æag & 
asGC_DETECT_GARBAGE
);

121 ifĞ
æags
 & 
asGC_FULL_CYCLE
 )

124 ifĞ
doD‘eù
 )

127  
asUINT
 
n
 = (asUINT)
gcNewObjeùs
.
	`G‘L’gth
();‚-- > 0; )

128 
	`MoveObjeùToOldLi¡
(
n
);

129 
d‘eùS‹
 = 
ş—rCouÁ”s_š™
;

131 ifĞ
doDe¡roy
 )

133 
de¡royNewS‹
 = 
de¡royG¬bage_š™
;

134 
de¡royOldS‹
 = 
de¡royG¬bage_š™
;

137 
couÁ
 = ()(
gcNewObjeùs
.
	`G‘L’gth
(è+ 
gcOldObjeùs
.GetLength());

141 ifĞ
doD‘eù
 )

142  
	`Id’tifyG¬bageW™hCyşicRefs
() == 1 ) {}

145 ifĞ
doDe¡roy
 )

147  
	`De¡royNewG¬bage
() == 1 ) {}

148  
	`De¡royOldG¬bage
() == 1 ) {}

152 ifĞ
couÁ
 !ğ()(
gcNewObjeùs
.
	`G‘L’gth
(è+ 
gcOldObjeùs
.GetLength()) )

153 
couÁ
 = ()(
gcNewObjeùs
.
	`G‘L’gth
(è+ 
gcOldObjeùs
.GetLength());

159 
’gše
->
	`CË¬Unu£dTy³s
();

161 
isProûssšg
 = 
çl£
;

162 
	`LEAVECRITICALSECTION
(
gcCŞËùšg
);

168 ifĞ
doDe¡roy
 )

170 
	`De¡royNewG¬bage
();

171 
	`De¡royOldG¬bage
();

175 ifĞ
doD‘eù
 )

176 
	`Id’tifyG¬bageW™hCyşicRefs
();

179 
isProûssšg
 = 
çl£
;

180 
	`LEAVECRITICALSECTION
(
gcCŞËùšg
);

185 
	}
}

187 
	gasCG¬bageCŞËùÜ
::
	$G‘Sti¡ics
(
asUINT
 *
cu¼’tSize
,‡sUINT *
tÙ®De¡royed
,‡sUINT *
tÙ®D‘eùed
,‡sUINT *
ÃwObjeùs
,‡sUINT *
tÙ®NewDe¡royed
) const

192 ifĞ
cu¼’tSize
 )

193 *
cu¼’tSize
 = (
asUINT
)(
gcNewObjeùs
.
	`G‘L’gth
(è+ 
gcOldObjeùs
.GetLength());

195 ifĞ
tÙ®De¡royed
 )

196 *
tÙ®De¡royed
 = 
numDe¡royed
;

198 ifĞ
tÙ®D‘eùed
 )

199 *
tÙ®D‘eùed
 = 
numD‘eùed
;

201 ifĞ
ÃwObjeùs
 )

202 *
ÃwObjeùs
 = (
asUINT
)
gcNewObjeùs
.
	`G‘L’gth
();

204 ifĞ
tÙ®NewDe¡royed
 )

205 *
tÙ®NewDe¡royed
 = 
numNewDe¡royed
;

206 
	}
}

208 
	gasCG¬bageCŞËùÜ
::
asSObjTy³Paœ
 
asCG¬bageCŞËùÜ
::
	$G‘NewObjeùAtIdx
(
idx
)

212 
	`ENTERCRITICALSECTION
(
gcCr™iÿl
);

213 
asSObjTy³Paœ
 
gcObj
 = 
gcNewObjeùs
[
idx
];

214 
	`LEAVECRITICALSECTION
(
gcCr™iÿl
);

216  
gcObj
;

217 
	}
}

219 
	gasCG¬bageCŞËùÜ
::
asSObjTy³Paœ
 
asCG¬bageCŞËùÜ
::
	$G‘OldObjeùAtIdx
(
idx
)

223 
	`ENTERCRITICALSECTION
(
gcCr™iÿl
);

224 
asSObjTy³Paœ
 
gcObj
 = 
gcOldObjeùs
[
idx
];

225 
	`LEAVECRITICALSECTION
(
gcCr™iÿl
);

227  
gcObj
;

228 
	}
}

230 
	gasCG¬bageCŞËùÜ
::
	$RemoveNewObjeùAtIdx
(
idx
)

234 
	`ENTERCRITICALSECTION
(
gcCr™iÿl
);

235 ifĞ
idx
 =ğ()
gcNewObjeùs
.
	`G‘L’gth
() - 1)

236 
gcNewObjeùs
.
	`PİLa¡
();

238 
gcNewObjeùs
[
idx
] = gcNewObjeùs.
	`PİLa¡
();

239 
	`LEAVECRITICALSECTION
(
gcCr™iÿl
);

240 
	}
}

242 
	gasCG¬bageCŞËùÜ
::
	$RemoveOldObjeùAtIdx
(
idx
)

246 
	`ENTERCRITICALSECTION
(
gcCr™iÿl
);

247 ifĞ
idx
 =ğ()
gcOldObjeùs
.
	`G‘L’gth
() - 1)

248 
gcOldObjeùs
.
	`PİLa¡
();

250 
gcOldObjeùs
[
idx
] = gcOldObjeùs.
	`PİLa¡
();

251 
	`LEAVECRITICALSECTION
(
gcCr™iÿl
);

252 
	}
}

254 
	gasCG¬bageCŞËùÜ
::
	$MoveObjeùToOldLi¡
(
idx
)

258 
	`ENTERCRITICALSECTION
(
gcCr™iÿl
);

259 
gcOldObjeùs
.
	`PushLa¡
(
gcNewObjeùs
[
idx
]);

260 ifĞ
idx
 =ğ()
gcNewObjeùs
.
	`G‘L’gth
() - 1)

261 
gcNewObjeùs
.
	`PİLa¡
();

263 
gcNewObjeùs
[
idx
] = gcNewObjeùs.
	`PİLa¡
();

264 
	`LEAVECRITICALSECTION
(
gcCr™iÿl
);

265 
	}
}

267 
	gasCG¬bageCŞËùÜ
::
	$Inü—£CouÁ”FÜNewObjeù
(
idx
)

271 
	`ENTERCRITICALSECTION
(
gcCr™iÿl
);

272 
gcNewObjeùs
[
idx
].
couÁ
++;

273 
	`LEAVECRITICALSECTION
(
gcCr™iÿl
);

274 
	}
}

276 
	gasCG¬bageCŞËùÜ
::
	$De¡royNewG¬bage
()

280  
de¡royNewS‹
 )

282 
de¡royG¬bage_š™
:

285 ifĞ
gcNewObjeùs
.
	`G‘L’gth
() == 0 )

288 
de¡royNewIdx
 = (
asUINT
)-1;

289 
de¡royNewS‹
 = 
de¡royG¬bage_loİ
;

293 
de¡royG¬bage_loİ
:

294 
de¡royG¬bage_haveMÜe
:

303 ifĞ++
de¡royNewIdx
 < 
gcNewObjeùs
.
	`G‘L’gth
() )

305 
asSObjTy³Paœ
 
gcObj
 = 
	`G‘NewObjeùAtIdx
(
de¡royNewIdx
);

306 ifĞ
’gše
->
	`C®lObjeùM‘hodR‘IÁ
(
gcObj
.
obj
, gcObj.
ty³
->
beh
.
gcG‘RefCouÁ
) == 1 )

312 
boŞ
 
addRef
 = 
çl£
;

313 ifĞ
gcObj
.
ty³
->
æags
 & 
asOBJ_SCRIPT_OBJECT
 )

316 
»fCouÁ
 = ((
asCSütObjeù
*)
gcObj
.
obj
)->
	`R–—£
();

317 ifĞ
»fCouÁ
 > 0 ) 
addRef
 = 
Œue
;

320 
’gše
->
	`C®lObjeùM‘hod
(
gcObj
.
obj
, gcObj.
ty³
->
beh
.
»Ëa£
);

323 ifĞ!
addRef
 )

325 
numDe¡royed
++;

326 
numNewDe¡royed
++;

327 
	`RemoveNewObjeùAtIdx
(
de¡royNewIdx
);

328 
de¡royNewIdx
--;

334 
’gše
->
	`C®lObjeùM‘hod
(
gcObj
.
obj
, gcObj.
ty³
->
beh
.
add»f
);

337 
de¡royNewS‹
 = 
de¡royG¬bage_haveMÜe
;

339 ifĞ
gcObj
.
couÁ
 == 3 )

343 
	`MoveObjeùToOldLi¡
(
de¡royNewIdx
);

344 
de¡royNewIdx
--;

349 
	`Inü—£CouÁ”FÜNewObjeù
(
de¡royNewIdx
);

357 ifĞ
de¡royNewS‹
 =ğ
de¡royG¬bage_haveMÜe
 )

360 
de¡royNewS‹
 = 
de¡royG¬bage_š™
;

365 
de¡royNewS‹
 = 
de¡royG¬bage_š™
;

378 
UNREACHABLE_RETURN
;

379 
	}
}

381 
	gasCG¬bageCŞËùÜ
::
	$R•ÜtAndR–—£Unde¡royedObjeùs
()

383 
™ems
 = 0;

384  
asUINT
 
n
 = 0;‚ < 
gcOldObjeùs
.
	`G‘L’gth
();‚++ )

386 
asSObjTy³Paœ
 
gcObj
 = 
	`G‘OldObjeùAtIdx
(
n
);

389 
asCSŒšg
 
msg
;

390 
msg
.
	`FÜm©
(
TXT_GC_CANNOT_FREE_OBJ_OF_TYPE_s
, 
gcObj
.
ty³
->
Çme
.
	`Add»ssOf
());

391 
’gše
->
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_ERROR
, 
msg
.
	`Add»ssOf
());

394 ifĞ
gcObj
.
ty³
->
beh
.
»Ëa£
 && 
’gše
->
sütFunùiÚs
[gcObj.type->beh.release] )

395 
’gše
->
	`C®lObjeùM‘hod
(
gcObj
.
obj
, gcObj.
ty³
->
beh
.
»Ëa£
);

397 
™ems
++;

399  
™ems
;

400 
	}
}

402 
	gasCG¬bageCŞËùÜ
::
	$De¡royOldG¬bage
()

406  
de¡royOldS‹
 )

408 
de¡royG¬bage_š™
:

411 ifĞ
gcOldObjeùs
.
	`G‘L’gth
() == 0 )

414 
de¡royOldIdx
 = (
asUINT
)-1;

415 
de¡royOldS‹
 = 
de¡royG¬bage_loİ
;

419 
de¡royG¬bage_loİ
:

420 
de¡royG¬bage_haveMÜe
:

429 ifĞ++
de¡royOldIdx
 < 
gcOldObjeùs
.
	`G‘L’gth
() )

431 
asSObjTy³Paœ
 
gcObj
 = 
	`G‘OldObjeùAtIdx
(
de¡royOldIdx
);

433 ifĞ
gcObj
.
ty³
->
beh
.
gcG‘RefCouÁ
 == 0 )

440 
asCSŒšg
 
msg
;

441 
msg
.
	`FÜm©
(
TXT_GC_CANNOT_FREE_OBJ_OF_TYPE_s
, 
gcObj
.
ty³
->
Çme
.
	`Add»ssOf
());

442 
’gše
->
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_ERROR
, 
msg
.
	`Add»ssOf
());

445 
numDe¡royed
++;

446 
	`RemoveOldObjeùAtIdx
(
de¡royOldIdx
);

447 
de¡royOldIdx
--;

449 ifĞ
’gše
->
	`C®lObjeùM‘hodR‘IÁ
(
gcObj
.
obj
, gcObj.
ty³
->
beh
.
gcG‘RefCouÁ
) == 1 )

455 
boŞ
 
addRef
 = 
çl£
;

456 ifĞ
gcObj
.
ty³
->
æags
 & 
asOBJ_SCRIPT_OBJECT
 )

459 
»fCouÁ
 = ((
asCSütObjeù
*)
gcObj
.
obj
)->
	`R–—£
();

460 ifĞ
»fCouÁ
 > 0 ) 
addRef
 = 
Œue
;

463 
’gše
->
	`C®lObjeùM‘hod
(
gcObj
.
obj
, gcObj.
ty³
->
beh
.
»Ëa£
);

466 ifĞ!
addRef
 )

468 
numDe¡royed
++;

469 
	`RemoveOldObjeùAtIdx
(
de¡royOldIdx
);

470 
de¡royOldIdx
--;

476 
’gše
->
	`C®lObjeùM‘hod
(
gcObj
.
obj
, gcObj.
ty³
->
beh
.
add»f
);

479 
de¡royOldS‹
 = 
de¡royG¬bage_haveMÜe
;

487 ifĞ
de¡royOldS‹
 =ğ
de¡royG¬bage_haveMÜe
 )

490 
de¡royOldS‹
 = 
de¡royG¬bage_š™
;

495 
de¡royOldS‹
 = 
de¡royG¬bage_š™
;

508 
UNREACHABLE_RETURN
;

509 
	}
}

511 
	gasCG¬bageCŞËùÜ
::
	$Id’tifyG¬bageW™hCyşicRefs
()

515  
d‘eùS‹
 )

517 
ş—rCouÁ”s_š™
:

518 
d‘eùS‹
 = 
ş—rCouÁ”s_loİ
;

521 
ş—rCouÁ”s_loİ
:

524 
asSM­Node
<*, 
asSIÁTy³Paœ
> *
cursÜ
 = 0;

525 
gcM­
.
	`MoveFœ¡
(&
cursÜ
);

526 ifĞ
cursÜ
 )

528 *
obj
 = 
gcM­
.
	`G‘Key
(
cursÜ
);

529 
asSIÁTy³Paœ
 
™
 = 
gcM­
.
	`G‘V®ue
(
cursÜ
);

531 
’gše
->
	`C®lObjeùM‘hod
(
obj
, 
™
.
ty³
->
beh
.
»Ëa£
);

533 
gcM­
.
	`E¿£
(
cursÜ
);

538 
d‘eùS‹
 = 
budM­_š™
;

542 
budM­_š™
:

543 
d‘eùIdx
 = 0;

544 
d‘eùS‹
 = 
budM­_loİ
;

547 
budM­_loİ
:

560 ifĞ
d‘eùIdx
 < 
gcOldObjeùs
.
	`G‘L’gth
() )

563 
asSObjTy³Paœ
 
gcObj
 = 
	`G‘OldObjeùAtIdx
(
d‘eùIdx
);

565 
»fCouÁ
 = 0;

566 ifĞ
gcObj
.
ty³
->
beh
.
gcG‘RefCouÁ
 )

567 
»fCouÁ
 = 
’gše
->
	`C®lObjeùM‘hodR‘IÁ
(
gcObj
.
obj
, gcObj.
ty³
->
beh
.
gcG‘RefCouÁ
);

569 ifĞ
»fCouÁ
 > 1 )

571 
asSIÁTy³Paœ
 
™
 = {
»fCouÁ
-1, 
gcObj
.
ty³
};

572 
gcM­
.
	`In£¹
(
gcObj
.
obj
, 
™
);

575 
’gše
->
	`C®lObjeùM‘hod
(
gcObj
.
obj
, gcObj.
ty³
->
beh
.
add»f
);

579 
’gše
->
	`C®lObjeùM‘hod
(
gcObj
.
obj
, gcObj.
ty³
->
beh
.
gcS‘FÏg
);

582 
d‘eùIdx
++;

588 
d‘eùS‹
 = 
couÁReã»nûs_š™
;

592 
couÁReã»nûs_š™
:

594 
gcM­
.
	`MoveFœ¡
(&
gcM­CursÜ
);

595 
d‘eùS‹
 = 
couÁReã»nûs_loİ
;

599 
couÁReã»nûs_loİ
:

612 ifĞ
gcM­CursÜ
 )

614 *
obj
 = 
gcM­
.
	`G‘Key
(
gcM­CursÜ
);

615 
asCObjeùTy³
 *
ty³
 = 
gcM­
.
	`G‘V®ue
(
gcM­CursÜ
).type;

616 
gcM­
.
	`MoveNext
(&
gcM­CursÜ
, gcMapCursor);

618 ifĞ
’gše
->
	`C®lObjeùM‘hodR‘BoŞ
(
obj
, 
ty³
->
beh
.
gcG‘FÏg
) )

620 
’gše
->
	`C®lObjeùM‘hod
(
obj
,ƒngše, 
ty³
->
beh
.
gcEnumReã»nûs
);

627 
d‘eùS‹
 = 
d‘eùG¬bage_š™
;

631 
d‘eùG¬bage_š™
:

633 
gcM­
.
	`MoveFœ¡
(&
gcM­CursÜ
);

634 
liveObjeùs
.
	`S‘L’gth
(0);

635 
d‘eùS‹
 = 
d‘eùG¬bage_loİ1
;

639 
d‘eùG¬bage_loİ1
:

649 ifĞ
gcM­CursÜ
 )

651 
asSM­Node
<*, 
asSIÁTy³Paœ
> *
cursÜ
 = 
gcM­CursÜ
;

652 
gcM­
.
	`MoveNext
(&
gcM­CursÜ
, gcMapCursor);

654 *
obj
 = 
gcM­
.
	`G‘Key
(
cursÜ
);

655 
asSIÁTy³Paœ
 
™
 = 
gcM­
.
	`G‘V®ue
(
cursÜ
);

657 
boŞ
 
gcFÏg
 = 
’gše
->
	`C®lObjeùM‘hodR‘BoŞ
(
obj
, 
™
.
ty³
->
beh
.
gcG‘FÏg
);

658 ifĞ!
gcFÏg
 || 
™
.
i
 > 0 )

660 
liveObjeùs
.
	`PushLa¡
(
obj
);

667 
d‘eùS‹
 = 
d‘eùG¬bage_loİ2
;

671 
d‘eùG¬bage_loİ2
:

677 ifĞ
liveObjeùs
.
	`G‘L’gth
() )

679 *
gcObj
 = 
liveObjeùs
.
	`PİLa¡
();

680 
asCObjeùTy³
 *
ty³
 = 0;

683 
asSM­Node
<*, 
asSIÁTy³Paœ
> *
cursÜ
 = 0;

684 ifĞ
gcM­
.
	`MoveTo
(&
cursÜ
, 
gcObj
) )

686 
ty³
 = 
gcM­
.
	`G‘V®ue
(
cursÜ
).type;

687 
gcM­
.
	`E¿£
(
cursÜ
);

690 
’gše
->
	`C®lObjeùM‘hod
(
gcObj
, 
ty³
->
beh
.
»Ëa£
);

693 
’gše
->
	`C®lObjeùM‘hod
(
gcObj
,ƒngše, 
ty³
->
beh
.
gcEnumReã»nûs
);

700 
d‘eùS‹
 = 
v”ifyUnm¬ked_š™
;

704 
v”ifyUnm¬ked_š™
:

705 
gcM­
.
	`MoveFœ¡
(&
gcM­CursÜ
);

706 
d‘eùS‹
 = 
v”ifyUnm¬ked_loİ
;

709 
v”ifyUnm¬ked_loİ
:

714 ifĞ
gcM­CursÜ
 )

716 *
gcObj
 = 
gcM­
.
	`G‘Key
(
gcM­CursÜ
);

717 
asCObjeùTy³
 *
ty³
 = 
gcM­
.
	`G‘V®ue
(
gcM­CursÜ
).type;

719 
boŞ
 
gcFÏg
 = 
’gše
->
	`C®lObjeùM‘hodR‘BoŞ
(
gcObj
, 
ty³
->
beh
.
gcG‘FÏg
);

720 ifĞ!
gcFÏg
 )

723 
d‘eùS‹
 = 
d‘eùG¬bage_š™
;

726 
gcM­
.
	`MoveNext
(&
gcM­CursÜ
, gcMapCursor);

735 
d‘eùS‹
 = 
b»akCœşes_š™
;

740 
b»akCœşes_š™
:

742 
gcM­
.
	`MoveFœ¡
(&
gcM­CursÜ
);

743 
d‘eùS‹
 = 
b»akCœşes_loİ
;

747 
b»akCœşes_loİ
:

748 
b»akCœşes_haveG¬bage
:

754 ifĞ
gcM­CursÜ
 )

756 
numD‘eùed
++;

757 *
gcObj
 = 
gcM­
.
	`G‘Key
(
gcM­CursÜ
);

758 
asCObjeùTy³
 *
ty³
 = 
gcM­
.
	`G‘V®ue
(
gcM­CursÜ
).type;

759 
’gše
->
	`C®lObjeùM‘hod
(
gcObj
,ƒngše, 
ty³
->
beh
.
gcR–—£AÎReã»nûs
);

761 
gcM­
.
	`MoveNext
(&
gcM­CursÜ
, gcMapCursor);

763 
d‘eùS‹
 = 
b»akCœşes_haveG¬bage
;

771 ifĞ
d‘eùS‹
 !ğ
b»akCœşes_haveG¬bage
 )

774 
d‘eùS‹
 = 
ş—rCouÁ”s_š™
;

780 
d‘eùS‹
 = 
ş—rCouÁ”s_š™
;

789 
UNREACHABLE_RETURN
;

790 
	}
}

792 
	gasCG¬bageCŞËùÜ
::
	$GCEnumC®lback
(*
»ã»nû
)

794 ifĞ
d‘eùS‹
 =ğ
couÁReã»nûs_loİ
 )

797 
asSM­Node
<*, 
asSIÁTy³Paœ
> *
cursÜ
 = 0;

798 ifĞ
gcM­
.
	`MoveTo
(&
cursÜ
, 
»ã»nû
) )

801 
gcM­
.
	`G‘V®ue
(
cursÜ
).
i
--;

804 ifĞ
d‘eùS‹
 =ğ
d‘eùG¬bage_loİ2
 )

807 
asSM­Node
<*, 
asSIÁTy³Paœ
> *
cursÜ
 = 0;

808 ifĞ
gcM­
.
	`MoveTo
(&
cursÜ
, 
»ã»nû
) )

811 
liveObjeùs
.
	`PushLa¡
(
»ã»nû
);

814 
	}
}

816 
	gEND_AS_NAMESPACE


	@../src/script/as_generic.cpp

38 
	~"as_g’”ic.h
"

39 
	~"as_sütfunùiÚ.h
"

40 
	~"as_objeùty³.h
"

41 
	~"as_sü‹ngše.h
"

43 
BEGIN_AS_NAMESPACE


49 
	gasCG’”ic
::
	$asCG’”ic
(
asCSütEngše
 *
’gše
, 
asCSütFunùiÚ
 *
sysFunùiÚ
, *
cu¼’tObjeù
, 
asDWORD
 *
¡ackPoš‹r
)

51 
this
->
’gše
 =ƒngine;

52 
this
->
sysFunùiÚ
 = sysFunction;

53 
this
->
cu¼’tObjeù
 = currentObject;

54 
this
->
¡ackPoš‹r
 = stackPointer;

56 
objeùRegi¡”
 = 0;

57 
»tuºV®
 = 0;

58 
	}
}

61 
	gasCG’”ic
::~
	$asCG’”ic
()

63 
	}
}

66 
asISütEngše
 *
asCG’”ic
::
	$G‘Engše
() const

68  (
asISütEngše
*)
’gše
;

69 
	}
}

71 #ifdeà
AS_DEPRECATED


74 
	gasCG’”ic
::
	$G‘FunùiÚId
() const

76  
sysFunùiÚ
->
id
;

77 
	}
}

81 
asISütFunùiÚ
 *
	gasCG’”ic
::
	$G‘FunùiÚ
() const

83  
sysFunùiÚ
;

84 
	}
}

86 #ifdeà
AS_DEPRECATED


89 *
	gasCG’”ic
::
	$G‘FunùiÚU£rD©a
() const

91  
sysFunùiÚ
->
u£rD©a
;

92 
	}
}

96 *
	gasCG’”ic
::
	$G‘Objeù
()

98  
cu¼’tObjeù
;

99 
	}
}

102 
	gasCG’”ic
::
	$G‘ObjeùTy³Id
() const

104 
asCD©aTy³
 
dt
 =‡sCD©aTy³::
	`C»©eObjeù
(
sysFunùiÚ
->
objeùTy³
, 
çl£
);

105  
’gše
->
	`G‘Ty³IdFromD©aTy³
(
dt
);

106 
	}
}

109 
	gasCG’”ic
::
	$G‘ArgCouÁ
() const

111  ()
sysFunùiÚ
->
·¿m‘”Ty³s
.
	`G‘L’gth
();

112 
	}
}

115 
asBYTE
 
	gasCG’”ic
::
	$G‘ArgBy‹
(
asUINT
 
¬g
)

117 ifĞ
¬g
 >ğ()
sysFunùiÚ
->
·¿m‘”Ty³s
.
	`G‘L’gth
() )

121 
asCD©aTy³
 *
dt
 = &
sysFunùiÚ
->
·¿m‘”Ty³s
[
¬g
];

122 ifĞ
dt
->
	`IsObjeù
(è|| dt->
	`IsReã»nû
() )

125 ifĞ
dt
->
	`G‘SizeInMemÜyBy‹s
() != 1 )

129 
off£t
 = 0;

130  
asUINT
 
n
 = 0;‚ < 
¬g
;‚++ )

131 
off£t
 +ğ
sysFunùiÚ
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

134  *(
asBYTE
*)&
¡ackPoš‹r
[
off£t
];

135 
	}
}

138 
asWORD
 
	gasCG’”ic
::
	$G‘ArgWÜd
(
asUINT
 
¬g
)

140 ifĞ
¬g
 >ğ()
sysFunùiÚ
->
·¿m‘”Ty³s
.
	`G‘L’gth
() )

144 
asCD©aTy³
 *
dt
 = &
sysFunùiÚ
->
·¿m‘”Ty³s
[
¬g
];

145 ifĞ
dt
->
	`IsObjeù
(è|| dt->
	`IsReã»nû
() )

148 ifĞ
dt
->
	`G‘SizeInMemÜyBy‹s
() != 2 )

152 
off£t
 = 0;

153  
asUINT
 
n
 = 0;‚ < 
¬g
;‚++ )

154 
off£t
 +ğ
sysFunùiÚ
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

157  *(
asWORD
*)&
¡ackPoš‹r
[
off£t
];

158 
	}
}

161 
asDWORD
 
	gasCG’”ic
::
	$G‘ArgDWÜd
(
asUINT
 
¬g
)

163 ifĞ
¬g
 >ğ()
sysFunùiÚ
->
·¿m‘”Ty³s
.
	`G‘L’gth
() )

167 
asCD©aTy³
 *
dt
 = &
sysFunùiÚ
->
·¿m‘”Ty³s
[
¬g
];

168 ifĞ
dt
->
	`IsObjeù
(è|| dt->
	`IsReã»nû
() )

171 ifĞ
dt
->
	`G‘SizeInMemÜyBy‹s
() != 4 )

175 
off£t
 = 0;

176  
asUINT
 
n
 = 0;‚ < 
¬g
;‚++ )

177 
off£t
 +ğ
sysFunùiÚ
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

180  *(
asDWORD
*)&
¡ackPoš‹r
[
off£t
];

181 
	}
}

184 
asQWORD
 
	gasCG’”ic
::
	$G‘ArgQWÜd
(
asUINT
 
¬g
)

186 ifĞ
¬g
 >ğ()
sysFunùiÚ
->
·¿m‘”Ty³s
.
	`G‘L’gth
() )

190 
asCD©aTy³
 *
dt
 = &
sysFunùiÚ
->
·¿m‘”Ty³s
[
¬g
];

191 ifĞ
dt
->
	`IsObjeù
(è|| dt->
	`IsReã»nû
() )

194 ifĞ
dt
->
	`G‘SizeInMemÜyBy‹s
() != 8 )

198 
off£t
 = 0;

199  
asUINT
 
n
 = 0;‚ < 
¬g
;‚++ )

200 
off£t
 +ğ
sysFunùiÚ
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

203  *(
asQWORD
*)(&
¡ackPoš‹r
[
off£t
]);

204 
	}
}

207 
	gasCG’”ic
::
	$G‘ArgFlßt
(
asUINT
 
¬g
)

209 ifĞ
¬g
 >ğ()
sysFunùiÚ
->
·¿m‘”Ty³s
.
	`G‘L’gth
() )

213 
asCD©aTy³
 *
dt
 = &
sysFunùiÚ
->
·¿m‘”Ty³s
[
¬g
];

214 ifĞ
dt
->
	`IsObjeù
(è|| dt->
	`IsReã»nû
() )

217 ifĞ
dt
->
	`G‘SizeInMemÜyBy‹s
() != 4 )

221 
off£t
 = 0;

222  
asUINT
 
n
 = 0;‚ < 
¬g
;‚++ )

223 
off£t
 +ğ
sysFunùiÚ
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

226  *(*)(&
¡ackPoš‹r
[
off£t
]);

227 
	}
}

230 
	gasCG’”ic
::
	$G‘ArgDoubË
(
asUINT
 
¬g
)

232 ifĞ
¬g
 >ğ()
sysFunùiÚ
->
·¿m‘”Ty³s
.
	`G‘L’gth
() )

236 
asCD©aTy³
 *
dt
 = &
sysFunùiÚ
->
·¿m‘”Ty³s
[
¬g
];

237 ifĞ
dt
->
	`IsObjeù
(è|| dt->
	`IsReã»nû
() )

240 ifĞ
dt
->
	`G‘SizeInMemÜyBy‹s
() != 8 )

244 
off£t
 = 0;

245  
asUINT
 
n
 = 0;‚ < 
¬g
;‚++ )

246 
off£t
 +ğ
sysFunùiÚ
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

249  *(*)(&
¡ackPoš‹r
[
off£t
]);

250 
	}
}

253 *
	gasCG’”ic
::
	$G‘ArgAdd»ss
(
asUINT
 
¬g
)

255 ifĞ
¬g
 >ğ()
sysFunùiÚ
->
·¿m‘”Ty³s
.
	`G‘L’gth
() )

259 
asCD©aTy³
 *
dt
 = &
sysFunùiÚ
->
·¿m‘”Ty³s
[
¬g
];

260 ifĞ!
dt
->
	`IsReã»nû
(è&& !dt->
	`IsObjeùHªdË
() )

264 
off£t
 = 0;

265  
asUINT
 
n
 = 0;‚ < 
¬g
;‚++ )

266 
off£t
 +ğ
sysFunùiÚ
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

269  (*)*(
asPWORD
*)(&
¡ackPoš‹r
[
off£t
]);

270 
	}
}

273 *
	gasCG’”ic
::
	$G‘ArgObjeù
(
asUINT
 
¬g
)

275 ifĞ
¬g
 >ğ()
sysFunùiÚ
->
·¿m‘”Ty³s
.
	`G‘L’gth
() )

279 
asCD©aTy³
 *
dt
 = &
sysFunùiÚ
->
·¿m‘”Ty³s
[
¬g
];

280 ifĞ!
dt
->
	`IsObjeù
() )

284 
off£t
 = 0;

285  
asUINT
 
n
 = 0;‚ < 
¬g
;‚++ )

286 
off£t
 +ğ
sysFunùiÚ
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

289  *(**)(&
¡ackPoš‹r
[
off£t
]);

290 
	}
}

293 *
	gasCG’”ic
::
	$G‘Add»ssOfArg
(
asUINT
 
¬g
)

295 ifĞ
¬g
 >ğ()
sysFunùiÚ
->
·¿m‘”Ty³s
.
	`G‘L’gth
() )

299 
off£t
 = 0;

300  
asUINT
 
n
 = 0;‚ < 
¬g
;‚++ )

301 
off£t
 +ğ
sysFunùiÚ
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

304 ifĞ!
sysFunùiÚ
->
·¿m‘”Ty³s
[
¬g
].
	`IsReã»nû
() &&

305 
sysFunùiÚ
->
·¿m‘”Ty³s
[
¬g
].
	`IsObjeù
() &&

306 !
sysFunùiÚ
->
·¿m‘”Ty³s
[
¬g
].
	`IsObjeùHªdË
() )

307  *(**)&
¡ackPoš‹r
[
off£t
];

310  &
¡ackPoš‹r
[
off£t
];

311 
	}
}

314 
	gasCG’”ic
::
	$G‘ArgTy³Id
(
asUINT
 
¬g
) const

316 ifĞ
¬g
 >ğ()
sysFunùiÚ
->
·¿m‘”Ty³s
.
	`G‘L’gth
() )

319 
asCD©aTy³
 *
dt
 = &
sysFunùiÚ
->
·¿m‘”Ty³s
[
¬g
];

320 ifĞ
dt
->
	`G‘Tok’Ty³
(è!ğ
‰Que¡iÚ
 )

321  
’gše
->
	`G‘Ty³IdFromD©aTy³
(*
dt
);

324 
off£t
 = 0;

325  
asUINT
 
n
 = 0;‚ < 
¬g
;‚++ )

326 
off£t
 +ğ
sysFunùiÚ
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

329 
off£t
 +ğ
AS_PTR_SIZE
;

332  
¡ackPoš‹r
[
off£t
];

334 
	}
}

337 
	gasCG’”ic
::
	$S‘R‘uºBy‹
(
asBYTE
 
v®
)

340 ifĞ
sysFunùiÚ
->
»tuºTy³
.
	`IsObjeù
(è|| sysFunùiÚ->»tuºTy³.
	`IsReã»nû
() )

341  
asINVALID_TYPE
;

343 ifĞ
sysFunùiÚ
->
»tuºTy³
.
	`G‘SizeInMemÜyBy‹s
() != 1 )

344  
asINVALID_TYPE
;

347 *(
asBYTE
*)&
»tuºV®
 = 
v®
;

350 
	}
}

353 
	gasCG’”ic
::
	$S‘R‘uºWÜd
(
asWORD
 
v®
)

356 ifĞ
sysFunùiÚ
->
»tuºTy³
.
	`IsObjeù
(è|| sysFunùiÚ->»tuºTy³.
	`IsReã»nû
() )

357  
asINVALID_TYPE
;

359 ifĞ
sysFunùiÚ
->
»tuºTy³
.
	`G‘SizeInMemÜyBy‹s
() != 2 )

360  
asINVALID_TYPE
;

363 *(
asWORD
*)&
»tuºV®
 = 
v®
;

366 
	}
}

369 
	gasCG’”ic
::
	$S‘R‘uºDWÜd
(
asDWORD
 
v®
)

372 ifĞ
sysFunùiÚ
->
»tuºTy³
.
	`IsObjeù
(è|| sysFunùiÚ->»tuºTy³.
	`IsReã»nû
() )

373  
asINVALID_TYPE
;

375 ifĞ
sysFunùiÚ
->
»tuºTy³
.
	`G‘SizeInMemÜyBy‹s
() != 4 )

376  
asINVALID_TYPE
;

379 *(
asDWORD
*)&
»tuºV®
 = 
v®
;

382 
	}
}

385 
	gasCG’”ic
::
	$S‘R‘uºQWÜd
(
asQWORD
 
v®
)

388 ifĞ
sysFunùiÚ
->
»tuºTy³
.
	`IsObjeù
(è|| sysFunùiÚ->»tuºTy³.
	`IsReã»nû
() )

389  
asINVALID_TYPE
;

391 ifĞ
sysFunùiÚ
->
»tuºTy³
.
	`G‘SizeOnSckDWÜds
() != 2 )

392  
asINVALID_TYPE
;

395 
»tuºV®
 = 
v®
;

398 
	}
}

401 
	gasCG’”ic
::
	$S‘R‘uºFlßt
(
v®
)

404 ifĞ
sysFunùiÚ
->
»tuºTy³
.
	`IsObjeù
(è|| sysFunùiÚ->»tuºTy³.
	`IsReã»nû
() )

405  
asINVALID_TYPE
;

407 ifĞ
sysFunùiÚ
->
»tuºTy³
.
	`G‘SizeOnSckDWÜds
() != 1 )

408  
asINVALID_TYPE
;

411 *(*)&
»tuºV®
 = 
v®
;

414 
	}
}

417 
	gasCG’”ic
::
	$S‘R‘uºDoubË
(
v®
)

420 ifĞ
sysFunùiÚ
->
»tuºTy³
.
	`IsObjeù
(è|| sysFunùiÚ->»tuºTy³.
	`IsReã»nû
() )

421  
asINVALID_TYPE
;

423 ifĞ
sysFunùiÚ
->
»tuºTy³
.
	`G‘SizeOnSckDWÜds
() != 2 )

424  
asINVALID_TYPE
;

427 *(*)&
»tuºV®
 = 
v®
;

430 
	}
}

433 
	gasCG’”ic
::
	$S‘R‘uºAdd»ss
(*
v®
)

436 ifĞ
sysFunùiÚ
->
»tuºTy³
.
	`IsReã»nû
() )

439 *(**)&
»tuºV®
 = 
v®
;

442 ifĞ
sysFunùiÚ
->
»tuºTy³
.
	`IsObjeùHªdË
() )

445 
objeùRegi¡”
 = 
v®
;

449  
asINVALID_TYPE
;

450 
	}
}

453 
	gasCG’”ic
::
	$S‘R‘uºObjeù
(*
obj
)

455 
asCD©aTy³
 *
dt
 = &
sysFunùiÚ
->
»tuºTy³
;

456 ifĞ!
dt
->
	`IsObjeù
() )

457  
asINVALID_TYPE
;

459 ifĞ
dt
->
	`IsReã»nû
() )

461 *(**)&
»tuºV®
 = 
obj
;

465 ifĞ
dt
->
	`IsObjeùHªdË
() )

468 
asSTy³Behaviour
 *
beh
 = &
dt
->
	`G‘ObjeùTy³
()->beh;

469 ifĞ
obj
 && 
beh
->
add»f
 )

470 
’gše
->
	`C®lObjeùM‘hod
(
obj
, 
beh
->
add»f
);

477 *
mem
 = (*)*(
asPWORD
*)&
¡ackPoš‹r
[-
AS_PTR_SIZE
];

478 
’gše
->
	`CÚ¡ruùSütObjeùCİy
(
mem
, 
obj
, 
dt
->
	`G‘ObjeùTy³
());

482 
objeùRegi¡”
 = 
obj
;

485 
	}
}

488 *
	gasCG’”ic
::
	$G‘R‘uºPoš‹r
()

490 
asCD©aTy³
 &
dt
 = 
sysFunùiÚ
->
»tuºTy³
;

492 ifĞ
dt
.
	`IsObjeù
(è&& !dt.
	`IsReã»nû
() )

496 
	`asASSERT
Ğ!
sysFunùiÚ
->
	`DÛsR‘uºOnSck
() );

498  &
objeùRegi¡”
;

501  &
»tuºV®
;

502 
	}
}

505 *
	gasCG’”ic
::
	$G‘Add»ssOfR‘uºLoÿtiÚ
()

507 
asCD©aTy³
 &
dt
 = 
sysFunùiÚ
->
»tuºTy³
;

509 ifĞ
dt
.
	`IsObjeù
(è&& !dt.
	`IsReã»nû
() )

511 ifĞ
sysFunùiÚ
->
	`DÛsR‘uºOnSck
() )

515  (*)*(
asPWORD
*)&
¡ackPoš‹r
[-
AS_PTR_SIZE
];

519  &
objeùRegi¡”
;

523  &
»tuºV®
;

524 
	}
}

527 
	gasCG’”ic
::
	$G‘R‘uºTy³Id
() const

529  
sysFunùiÚ
->
	`G‘R‘uºTy³Id
();

530 
	}
}

532 
	gEND_AS_NAMESPACE


	@../src/script/as_globalproperty.cpp

34 
	~"as_cÚfig.h
"

35 
	~"as_´İ”ty.h
"

36 
	~"as_sü‹ngše.h
"

38 
BEGIN_AS_NAMESPACE


40 
	gasCGlob®Prİ”ty
::
	$asCGlob®Prİ”ty
()

42 
memÜy
 = &
¡Üage
;

43 
memÜyAÎoÿ‹d
 = 
çl£
;

44 
»®Add»ss
 = 0;

45 
š™Func
 = 0;

46 
acûssMask
 = 0xFFFFFFFF;

48 
»fCouÁ
.
	`£t
(1);

49 
	}
}

51 
	gasCGlob®Prİ”ty
::~
	$asCGlob®Prİ”ty
()

53 ifĞ
memÜyAÎoÿ‹d
 ) { 
	`asDELETEARRAY
(
memÜy
); }

54 ifĞ
š™Func
 )

55 
š™Func
->
	`R–—£
();

56 
	}
}

58 
	gasCGlob®Prİ”ty
::
	$AddRef
()

60 
gcFÏg
 = 
çl£
;

61 
»fCouÁ
.
	`©omicInc
();

62 
	}
}

64 
	gasCGlob®Prİ”ty
::
	$R–—£
()

66 
gcFÏg
 = 
çl£
;

70 ifĞ
»fCouÁ
.
	`©omicDec
(è=ğ2 && 
š™Func
 )

77 
š™Func
->
	`R–—£
();

78 
š™Func
 = 0;

80 
	}
}

82 *
	gasCGlob®Prİ”ty
::
	$G‘Add»ssOfV®ue
()

84  
memÜy
;

85 
	}
}

91 
	gasCGlob®Prİ”ty
::
	$AÎoÿ‹MemÜy
()

93 ifĞ
ty³
.
	`G‘SizeOnSckDWÜds
() > 2 )

95 
memÜy
 = 
	`asNEWARRAY
(
asDWORD
, 
ty³
.
	`G‘SizeOnSckDWÜds
());

96 
memÜyAÎoÿ‹d
 = 
Œue
;

98 
	}
}

100 
	gasCGlob®Prİ”ty
::
	$S‘Regi¡”edAdd»ss
(*
p
)

102 
»®Add»ss
 = 
p
;

103 ifĞ
ty³
.
	`IsObjeù
(è&& !ty³.
	`IsReã»nû
(è&& !ty³.
	`IsObjeùHªdË
() )

106 
memÜy
 = &
»®Add»ss
;

109 
memÜy
 = 
p
;

110 
	}
}

112 *
	gasCGlob®Prİ”ty
::
	$G‘Regi¡”edAdd»ss
() const

114  
»®Add»ss
;

115 
	}
}

117 
	gasCGlob®Prİ”ty
::
	$G‘RefCouÁ
()

119  
»fCouÁ
.
	`g‘
();

120 
	}
}

122 
	gasCGlob®Prİ”ty
::
	$S‘GCFÏg
()

124 
gcFÏg
 = 
Œue
;

125 
	}
}

127 
boŞ
 
	gasCGlob®Prİ”ty
::
	$G‘GCFÏg
()

129  
gcFÏg
;

130 
	}
}

132 
	gasCGlob®Prİ”ty
::
	$EnumReã»nûs
(
asISütEngše
 *
’gše
)

134 
’gše
->
	`GCEnumC®lback
(
š™Func
);

135 
	}
}

137 
	gasCGlob®Prİ”ty
::
	$R–—£AÎHªdËs
(
asISütEngše
 *)

139 ifĞ
š™Func
 )

141 
š™Func
->
	`R–—£
();

142 
š™Func
 = 0;

144 
	}
}

146 
	gasCGlob®Prİ”ty
::
	$S‘In™Func
(
asCSütFunùiÚ
 *
š™Func
)

149 
	`asASSERT
Ğ
this
->
š™Func
 == 0 );

151 
this
->
š™Func
 = initFunc;

152 
this
->
š™Func
->
	`AddRef
();

157 
š™Func
->
’gše
->
gc
.
	`AddSütObjeùToGC
(
this
, &š™Func->’gše->
glob®Prİ”tyBehaviours
);

158 
	}
}

160 
asCSütFunùiÚ
 *
	gasCGlob®Prİ”ty
::
	$G‘In™Func
()

162  
š™Func
;

163 
	}
}

166 #ifdeà
AS_MAX_PORTABILITY


168 
	$Glob®Prİ”ty_AddRef_G’”ic
(
asISütG’”ic
 *
g’
)

170 
asCGlob®Prİ”ty
 *
£lf
 = (asCGlob®Prİ”ty*)
g’
->
	`G‘Objeù
();

171 
£lf
->
	`AddRef
();

172 
	}
}

174 
	$Glob®Prİ”ty_R–—£_G’”ic
(
asISütG’”ic
 *
g’
)

176 
asCGlob®Prİ”ty
 *
£lf
 = (asCGlob®Prİ”ty*)
g’
->
	`G‘Objeù
();

177 
£lf
->
	`R–—£
();

178 
	}
}

180 
	$Glob®Prİ”ty_G‘RefCouÁ_G’”ic
(
asISütG’”ic
 *
g’
)

182 
asCGlob®Prİ”ty
 *
£lf
 = (asCGlob®Prİ”ty*)
g’
->
	`G‘Objeù
();

183 *(*)
g’
->
	`G‘Add»ssOfR‘uºLoÿtiÚ
(èğ
£lf
->
	`G‘RefCouÁ
();

184 
	}
}

186 
	$Glob®Prİ”ty_S‘GCFÏg_G’”ic
(
asISütG’”ic
 *
g’
)

188 
asCGlob®Prİ”ty
 *
£lf
 = (asCGlob®Prİ”ty*)
g’
->
	`G‘Objeù
();

189 
£lf
->
	`S‘GCFÏg
();

190 
	}
}

192 
	$Glob®Prİ”ty_G‘GCFÏg_G’”ic
(
asISütG’”ic
 *
g’
)

194 
asCGlob®Prİ”ty
 *
£lf
 = (asCGlob®Prİ”ty*)
g’
->
	`G‘Objeù
();

195 *(
boŞ
*)
g’
->
	`G‘Add»ssOfR‘uºLoÿtiÚ
(èğ
£lf
->
	`G‘GCFÏg
();

196 
	}
}

198 
	$Glob®Prİ”ty_EnumReã»nûs_G’”ic
(
asISütG’”ic
 *
g’
)

200 
asCGlob®Prİ”ty
 *
£lf
 = (asCGlob®Prİ”ty*)
g’
->
	`G‘Objeù
();

201 
asISütEngše
 *
’gše
 = *×sISütEngše**)
g’
->
	`G‘Add»ssOfArg
(0);

202 
£lf
->
	`EnumReã»nûs
(
’gše
);

203 
	}
}

205 
	$Glob®Prİ”ty_R–—£AÎHªdËs_G’”ic
(
asISütG’”ic
 *
g’
)

207 
asCGlob®Prİ”ty
 *
£lf
 = (asCGlob®Prİ”ty*)
g’
->
	`G‘Objeù
();

208 
asISütEngše
 *
’gše
 = *×sISütEngše**)
g’
->
	`G‘Add»ssOfArg
(0);

209 
£lf
->
	`R–—£AÎHªdËs
(
’gše
);

210 
	}
}

215 
	gasCGlob®Prİ”ty
::
	$Regi¡”GCBehaviours
(
asCSütEngše
 *
’gše
)

218 
r
 = 0;

219 
	`UNUSED_VAR
(
r
);

220 
’gše
->
glob®Prİ”tyBehaviours
.engine =ƒngine;

221 
’gše
->
glob®Prİ”tyBehaviours
.
æags
 = 
asOBJ_REF
 | 
asOBJ_GC
;

222 
’gše
->
glob®Prİ”tyBehaviours
.
Çme
 = "_builtin_globalprop_";

223 #iâdeà
AS_MAX_PORTABILITY


224 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
glob®Prİ”tyBehaviours
, 
asBEHAVE_ADDREF
, "void f()", 
	`asMETHOD
(
asCGlob®Prİ”ty
,
AddRef
), 
asCALL_THISCALL
); 
	`asASSERT
(„ >= 0 );

225 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
glob®Prİ”tyBehaviours
, 
asBEHAVE_RELEASE
, "void f()", 
	`asMETHOD
(
asCGlob®Prİ”ty
,
R–—£
), 
asCALL_THISCALL
); 
	`asASSERT
(„ >= 0 );

226 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
glob®Prİ”tyBehaviours
, 
asBEHAVE_GETREFCOUNT
, "šˆf()", 
	`asMETHOD
(
asCGlob®Prİ”ty
,
G‘RefCouÁ
), 
asCALL_THISCALL
); 
	`asASSERT
(„ >= 0 );

227 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
glob®Prİ”tyBehaviours
, 
asBEHAVE_SETGCFLAG
, "void f()", 
	`asMETHOD
(
asCGlob®Prİ”ty
,
S‘GCFÏg
), 
asCALL_THISCALL
); 
	`asASSERT
(„ >= 0 );

228 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
glob®Prİ”tyBehaviours
, 
asBEHAVE_GETGCFLAG
, "boŞ f()", 
	`asMETHOD
(
asCGlob®Prİ”ty
,
G‘GCFÏg
), 
asCALL_THISCALL
); 
	`asASSERT
(„ >= 0 );

229 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
glob®Prİ”tyBehaviours
, 
asBEHAVE_ENUMREFS
, "void f(št&š)", 
	`asMETHOD
(
asCGlob®Prİ”ty
,
EnumReã»nûs
), 
asCALL_THISCALL
); 
	`asASSERT
(„ >= 0 );

230 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
glob®Prİ”tyBehaviours
, 
asBEHAVE_RELEASEREFS
, "void f(št&š)", 
	`asMETHOD
(
asCGlob®Prİ”ty
,
R–—£AÎHªdËs
), 
asCALL_THISCALL
); 
	`asASSERT
(„ >= 0 );

232 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
glob®Prİ”tyBehaviours
, 
asBEHAVE_ADDREF
, "void f()", 
	`asFUNCTION
(
Glob®Prİ”ty_AddRef_G’”ic
), 
asCALL_GENERIC
); 
	`asASSERT
(„ >= 0 );

233 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
glob®Prİ”tyBehaviours
, 
asBEHAVE_RELEASE
, "void f()", 
	`asFUNCTION
(
Glob®Prİ”ty_R–—£_G’”ic
), 
asCALL_GENERIC
); 
	`asASSERT
(„ >= 0 );

234 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
glob®Prİ”tyBehaviours
, 
asBEHAVE_GETREFCOUNT
, "šˆf()", 
	`asFUNCTION
(
Glob®Prİ”ty_G‘RefCouÁ_G’”ic
), 
asCALL_GENERIC
); 
	`asASSERT
(„ >= 0 );

235 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
glob®Prİ”tyBehaviours
, 
asBEHAVE_SETGCFLAG
, "void f()", 
	`asFUNCTION
(
Glob®Prİ”ty_S‘GCFÏg_G’”ic
), 
asCALL_GENERIC
); 
	`asASSERT
(„ >= 0 );

236 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
glob®Prİ”tyBehaviours
, 
asBEHAVE_GETGCFLAG
, "boŞ f()", 
	`asFUNCTION
(
Glob®Prİ”ty_G‘GCFÏg_G’”ic
), 
asCALL_GENERIC
); 
	`asASSERT
(„ >= 0 );

237 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
glob®Prİ”tyBehaviours
, 
asBEHAVE_ENUMREFS
, "void f(št&š)", 
	`asFUNCTION
(
Glob®Prİ”ty_EnumReã»nûs_G’”ic
), 
asCALL_GENERIC
); 
	`asASSERT
(„ >= 0 );

238 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
glob®Prİ”tyBehaviours
, 
asBEHAVE_RELEASEREFS
, "void f(št&š)", 
	`asFUNCTION
(
Glob®Prİ”ty_R–—£AÎHªdËs_G’”ic
), 
asCALL_GENERIC
); 
	`asASSERT
(„ >= 0 );

240 
	}
}

242 
	gEND_AS_NAMESPACE


	@../src/script/as_memory.cpp

39 
	~<¡dlib.h
>

41 
	~"as_cÚfig.h
"

42 
	~"as_memÜy.h
"

43 
	~"as_süŠode.h
"

44 
	~"as_by‹code.h
"

46 
	gBEGIN_AS_NAMESPACE


54 #ifdeà
_MSC_VER


56 #´agm¨
w¬nšg
(
di§bË
: 4073)

57 #´agm¨
š™_£g
(
lib
)

58 
asALLOCFUNC_t
 
	gu£rAÎoc
 = 
m®loc
;

59 
asFREEFUNC_t
 
	gu£rF»e
 = 
ä“
;

62 
asALLOCFUNC_t
 
	gu£rAÎoc
 = 
m®loc
;

63 
asFREEFUNC_t
 
	gu£rF»e
 = 
ä“
;

69 
asS‘Glob®MemÜyFunùiÚs
(
asALLOCFUNC_t
 
®locFunc
, 
asFREEFUNC_t
 
ä“Func
)

71 
u£rAÎoc
 = 
®locFunc
;

72 
u£rF»e
 = 
ä“Func
;

77 
asRe£tGlob®MemÜyFunùiÚs
()

79 
asTh»adCËªup
();

81 
u£rAÎoc
 = 
m®loc
;

82 
u£rF»e
 = 
ä“
;

89 
asCMemÜyMgr
::
	$asCMemÜyMgr
()

91 
	}
}

93 
asCMemÜyMgr
::~
	$asCMemÜyMgr
()

95 
	`F»eUnu£dMemÜy
();

96 
	}
}

98 
asCMemÜyMgr
::
	$F»eUnu£dMemÜy
()

103 
	`ENTERCRITICALSECTION
(
cs
);

105 
n
;

106  
n
 = 0;‚ < (sigÃd)
sütNodePoŞ
.
	`G‘L’gth
();‚++ )

107 
	`u£rF»e
(
sütNodePoŞ
[
n
]);

108 
sütNodePoŞ
.
	`AÎoÿ‹
(0, 
çl£
);

110 
	`LEAVECRITICALSECTION
(
cs
);

115  
n
 = 0;‚ < (sigÃd)
by‹In¡ruùiÚPoŞ
.
	`G‘L’gth
();‚++ )

116 
	`u£rF»e
(
by‹In¡ruùiÚPoŞ
[
n
]);

117 
by‹In¡ruùiÚPoŞ
.
	`AÎoÿ‹
(0, 
çl£
);

118 
	}
}

120 *
asCMemÜyMgr
::
	$AÎocSütNode
()

122 
	`ENTERCRITICALSECTION
(
cs
);

124 ifĞ
sütNodePoŞ
.
	`G‘L’gth
() )

126 *
tR‘
 = 
sütNodePoŞ
.
	`PİLa¡
();

127 
	`LEAVECRITICALSECTION
(
cs
);

128  
tR‘
;

131 
	`LEAVECRITICALSECTION
(
cs
);

133 #ià
	`defšed
(
AS_DEBUG
)

134  ((
asALLOCFUNCDEBUG_t
)(
u£rAÎoc
))((
asCSütNode
), 
__FILE__
, 
__LINE__
);

136  
	`u£rAÎoc
((
asCSütNode
));

138 
	}
}

140 
asCMemÜyMgr
::
	$F»eSütNode
(*
±r
)

142 
	`ENTERCRITICALSECTION
(
cs
);

145 ifĞ
sütNodePoŞ
.
	`G‘L’gth
() == 0 )

146 
sütNodePoŞ
.
	`AÎoÿ‹
(100, 0);

148 
sütNodePoŞ
.
	`PushLa¡
(
±r
);

150 
	`LEAVECRITICALSECTION
(
cs
);

151 
	}
}

153 #iâdeà
AS_NO_COMPILER


155 *
asCMemÜyMgr
::
	$AÎocBy‹In¡ruùiÚ
()

157 ifĞ
by‹In¡ruùiÚPoŞ
.
	`G‘L’gth
() )

158  
by‹In¡ruùiÚPoŞ
.
	`PİLa¡
();

160 #ià
	`defšed
(
AS_DEBUG
)

161  ((
asALLOCFUNCDEBUG_t
)(
u£rAÎoc
))((
cBy‹In¡ruùiÚ
), 
__FILE__
, 
__LINE__
);

163  
	`u£rAÎoc
((
cBy‹In¡ruùiÚ
));

165 
	}
}

167 
asCMemÜyMgr
::
	$F»eBy‹In¡ruùiÚ
(*
±r
)

170 ifĞ
by‹In¡ruùiÚPoŞ
.
	`G‘L’gth
() == 0 )

171 
by‹In¡ruùiÚPoŞ
.
	`AÎoÿ‹
(100, 0);

173 
by‹In¡ruùiÚPoŞ
.
	`PushLa¡
(
±r
);

174 
	}
}

178 
END_AS_NAMESPACE


	@../src/script/as_module.cpp

39 
	~"as_cÚfig.h
"

40 
	~"as_moduË.h
"

41 
	~"as_bud”.h
"

42 
	~"as_cÚ‹xt.h
"

43 
	~"as_‹xts.h
"

45 
BEGIN_AS_NAMESPACE


48 
	gasCModuË
::
	$asCModuË
(cÚ¡ *
Çme
, 
asCSütEngše
 *
’gše
)

50 
this
->
Çme
 =‚ame;

51 
this
->
’gše
 =ƒngine;

53 
u£rD©a
 = 0;

54 
bud”
 = 0;

55 
isGlob®V¬In™Ÿlized
 = 
çl£
;

57 
acûssMask
 = 1;

59 
deçuÉName¥aû
 = 
’gše
->
ÇmeS·ûs
[0];

60 
	}
}

63 
	gasCModuË
::~
	$asCModuË
()

65 
	`IÁ”ÇlRe£t
();

67 ifĞ
bud”
 )

69 
	`asDELETE
(
bud”
,
asCBud”
);

70 
bud”
 = 0;

73 ifĞ
’gše
 )

76 ifĞ
u£rD©a
 && 
’gše
->
ş—nModuËFunc
 )

77 
’gše
->
	`ş—nModuËFunc
(
this
);

80 ifĞ
’gše
->
Ï¡ModuË
 =ğ
this
 )

81 
’gše
->
Ï¡ModuË
 = 0;

83 
’gše
->
sütModuËs
.
	`RemoveV®ue
(
this
);

85 
	}
}

88 *
	gasCModuË
::
	$S‘U£rD©a
(*
d©a
)

90 *
ŞdD©a
 = 
u£rD©a
;

91 
u£rD©a
 = 
d©a
;

92  
ŞdD©a
;

93 
	}
}

96 *
	gasCModuË
::
	$G‘U£rD©a
() const

98  
u£rD©a
;

99 
	}
}

102 
asISütEngše
 *
	gasCModuË
::
	$G‘Engše
() const

104  
’gše
;

105 
	}
}

108 
	gasCModuË
::
	$S‘Name
(cÚ¡ *
Çme
)

110 
this
->
Çme
 =‚ame;

111 
	}
}

114 cÚ¡ *
	gasCModuË
::
	$G‘Name
() const

116  
Çme
.
	`Add»ssOf
();

117 
	}
}

120 
	gasCModuË
::
	$S‘DeçuÉName¥aû
(cÚ¡ *
ÇmeS·û
)

123 ifĞ
ÇmeS·û
 == 0 )

124  
asINVALID_ARG
;

126 
asCSŒšg
 
ns
 = 
ÇmeS·û
;

127 ifĞ
ns
 != "" )

130 
size_t
 
pos
 = 0;

131 
boŞ
 
ex³ùId’tif›r
 = 
Œue
;

132 
size_t
 
Ën
;

133 
eTok’Ty³
 
t
 = 
‰Id’tif›r
;

135  ; 
pos
 < 
ns
.
	`G‘L’gth
();…o +ğ
Ën
 )

137 
t
 = 
’gše
->
tok
.
	`G‘Tok’
(
ns
.
	`Add»ssOf
(è+ 
pos
,‚s.
	`G‘L’gth
(è-…os, &
Ën
);

138 ifĞ(
ex³ùId’tif›r
 && 
t
 !ğ
‰Id’tif›r
è|| (!ex³ùId’tif›¸&& !ğ
‰Scİe
) )

139  
asINVALID_DECLARATION
;

141 
ex³ùId’tif›r
 = !expectIdentifier;

145 ifĞ
t
 =ğ
‰Scİe
 )

146 
ns
.
	`S‘L’gth
Òs.
	`G‘L’gth
()-2);

149 
deçuÉName¥aû
 = 
’gše
->
	`AddNameS·û
(
ns
.
	`Add»ssOf
());

152 
	}
}

155 
	gasCModuË
::
	$AddSütSeùiÚ
(cÚ¡ *
Çme
, cÚ¡ *
code
, 
size_t
 
codeL’gth
, 
lšeOff£t
)

157 #ifdeà
AS_NO_COMPILER


158 
	`UNUSED_VAR
(
Çme
);

159 
	`UNUSED_VAR
(
code
);

160 
	`UNUSED_VAR
(
codeL’gth
);

161 
	`UNUSED_VAR
(
lšeOff£t
);

162  
asNOT_SUPPORTED
;

164 ifĞ!
bud”
 )

166 
bud”
 = 
	`asNEW
(
asCBud”
)(
’gše
, 
this
);

167 ifĞ
bud”
 == 0 )

168  
asOUT_OF_MEMORY
;

171  
bud”
->
	`AddCode
(
Çme
, 
code
, ()
codeL’gth
, 
lšeOff£t
, ()
’gše
->
	`G‘SütSeùiÚNameIndex
Òam?‚am: ""),ƒngše->
•
.
cİySütSeùiÚs
);

173 
	}
}

176 
	gasCModuË
::
	$JITCompe
()

178 
i
 = 0; i < 
sütFunùiÚs
.
	`G‘L’gth
(); i++)

180 
sütFunùiÚs
[
i
]->
	`JITCompe
();

182 
	}
}

185 
	gasCModuË
::
	$Bud
()

187 #ifdeà
AS_NO_COMPILER


188  
asNOT_SUPPORTED
;

192 
r
 = 
’gše
->
	`Reque¡Bud
();

193 ifĞ
r
 < 0 )

194  
r
;

196 
’gše
->
	`P»·»Engše
();

197 ifĞ
’gše
->
cÚfigFaed
 )

199 
’gše
->
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_ERROR
, 
TXT_INVALID_CONFIGURATION
);

200 
’gše
->
	`BudCom¶‘ed
();

201  
asINVALID_CONFIGURATION
;

204 
	`IÁ”ÇlRe£t
();

206 ifĞ!
bud”
 )

208 
’gše
->
	`BudCom¶‘ed
();

209  
asSUCCESS
;

213 
r
 = 
bud”
->
	`Bud
();

214 
	`asDELETE
(
bud”
,
asCBud”
);

215 
bud”
 = 0;

217 ifĞ
r
 < 0 )

220 
	`IÁ”ÇlRe£t
();

222 
’gše
->
	`BudCom¶‘ed
();

223  
r
;

226 
	`JITCompe
();

228 
’gše
->
	`P»·»Engše
();

229 
’gše
->
	`BudCom¶‘ed
();

232 ifĞ
r
 >ğ0 && 
’gše
->
•
.
š™Glob®V¬sAá”Bud
 )

233 
r
 = 
	`Re£tGlob®V¬s
(0);

235  
r
;

237 
	}
}

240 
	gasCModuË
::
	$Re£tGlob®V¬s
(
asISütCÚ‹xt
 *
ùx
)

242 ifĞ
isGlob®V¬In™Ÿlized
 )

243 
	`C®lEx™
();

245  
	`C®lIn™
(
ùx
);

246 
	}
}

248 #ifdeà
AS_DEPRECATED


251 
	gasCModuË
::
	$G‘FunùiÚIdByIndex
(
asUINT
 
šdex
) const

253 ifĞ
šdex
 >ğ
glob®FunùiÚs
.
	`G‘L’gth
() )

254  
asNO_FUNCTION
;

256  
glob®FunùiÚs
[
šdex
]->
id
;

257 
	}
}

261 
asISütFunùiÚ
 *
	gasCModuË
::
	$G‘FunùiÚByIndex
(
asUINT
 
šdex
) const

263 ifĞ
šdex
 >ğ
glob®FunùiÚs
.
	`G‘L’gth
() )

266  
glob®FunùiÚs
[
šdex
];

267 
	}
}

270 
	gasCModuË
::
	$C®lIn™
(
asISütCÚ‹xt
 *
myCtx
)

272 ifĞ
isGlob®V¬In™Ÿlized
 )

273  
asERROR
;

276 
asUINT
 
n
;

277  
n
 = 0;‚ < 
sütGlob®s
.
	`G‘L’gth
();‚++ )

279 ifĞ
sütGlob®s
[
n
] )

281 
	`mem£t
(
sütGlob®s
[
n
]->
	`G‘Add»ssOfV®ue
(), 0, (
asDWORD
)*sütGlob®s[n]->
ty³
.
	`G‘SizeOnSckDWÜds
());

286 
asISütCÚ‹xt
 *
ùx
 = 
myCtx
;

287 
r
 = 
asEXECUTION_FINISHED
;

288  
n
 = 0;‚ < 
sütGlob®s
.
	`G‘L’gth
(è&& 
r
 =ğ
asEXECUTION_FINISHED
;‚++ )

290 ifĞ
sütGlob®s
[
n
]->
	`G‘In™Func
() )

292 ifĞ
ùx
 == 0 )

294 
r
 = 
’gše
->
	`C»©eCÚ‹xt
(&
ùx
, 
Œue
);

295 ifĞ
r
 < 0 )

299 
r
 = 
ùx
->
	`P»·»
(
sütGlob®s
[
n
]->
	`G‘In™Func
());

300 ifĞ
r
 >= 0 )

302 
r
 = 
ùx
->
	`Execu‹
();

303 ifĞ
r
 !ğ
asEXECUTION_FINISHED
 )

305 
asCSŒšg
 
msg
;

306 
msg
.
	`FÜm©
(
TXT_FAILED_TO_INITIALIZE_s
, 
sütGlob®s
[
n
]->
Çme
.
	`Add»ssOf
());

307 
asCSütFunùiÚ
 *
func
 = 
sütGlob®s
[
n
]->
	`G‘In™Func
();

309 
’gše
->
	`Wr™eMes§ge
(
func
->
sütSeùiÚIdx
 >ğ0 ?ƒngše->
sütSeùiÚNames
[func->sütSeùiÚIdx]->
	`Add»ssOf
() : "",

310 
func
->
	`G‘LšeNumb”
(0) & 0xFFFFF,

311 
func
->
	`G‘LšeNumb”
(0) >> 20,

312 
asMSGTYPE_ERROR
,

313 
msg
.
	`Add»ssOf
());

315 ifĞ
r
 =ğ
asEXECUTION_EXCEPTION
 )

317 cÚ¡ 
asISütFunùiÚ
 *
funùiÚ
 = 
ùx
->
	`G‘Exû±iÚFunùiÚ
();

319 
msg
.
	`FÜm©
(
TXT_EXCEPTION_s_IN_s
, 
ùx
->
	`G‘Exû±iÚSŒšg
(), 
funùiÚ
->
	`G‘Deş¬©iÚ
());

321 
’gše
->
	`Wr™eMes§ge
(
funùiÚ
->
	`G‘SütSeùiÚName
(),

322 
ùx
->
	`G‘Exû±iÚLšeNumb”
(),

324 
asMSGTYPE_INFORMATION
,

325 
msg
.
	`Add»ssOf
());

332 ifĞ
ùx
 && !
myCtx
 )

334 
ùx
->
	`R–—£
();

335 
ùx
 = 0;

342 
isGlob®V¬In™Ÿlized
 = 
Œue
;

344 ifĞ
r
 !ğ
asEXECUTION_FINISHED
 )

345  
asINIT_GLOBAL_VARS_FAILED
;

347  
asSUCCESS
;

348 
	}
}

351 
	gasCModuË
::
	$C®lEx™
()

353 ifĞ!
isGlob®V¬In™Ÿlized
 ) ;

355  
size_t
 
n
 = 0;‚ < 
sütGlob®s
.
	`G‘L’gth
();‚++ )

357 ifĞ
sütGlob®s
[
n
]->
ty³
.
	`IsObjeù
() )

359 **
obj
 = (**)
sütGlob®s
[
n
]->
	`G‘Add»ssOfV®ue
();

360 ifĞ*
obj
 )

362 
asCObjeùTy³
 *
Ù
 = 
sütGlob®s
[
n
]->
ty³
.
	`G‘ObjeùTy³
();

364 ifĞ
Ù
->
æags
 & 
asOBJ_REF
 )

366 
	`asASSERT
Ğ(
Ù
->
æags
 & 
asOBJ_NOCOUNT
è|| ot->
beh
.
»Ëa£
 );

367 ifĞ
Ù
->
beh
.
»Ëa£
 )

368 
’gše
->
	`C®lObjeùM‘hod
(*
obj
, 
Ù
->
beh
.
»Ëa£
);

372 ifĞ
Ù
->
beh
.
de¡ruù
 )

373 
’gše
->
	`C®lObjeùM‘hod
(*
obj
, 
Ù
->
beh
.
de¡ruù
);

375 
’gše
->
	`C®lF»e
(*
obj
);

379 *
obj
 = 0;

384 
isGlob®V¬In™Ÿlized
 = 
çl£
;

385 
	}
}

388 
	gasCModuË
::
	$IÁ”ÇlRe£t
()

390 
	`C®lEx™
();

392 
size_t
 
n
;

395  
n
 = 0;‚ < 
glob®FunùiÚs
.
	`G‘L’gth
();‚++ )

397 ifĞ
glob®FunùiÚs
[
n
] )

398 
glob®FunùiÚs
[
n
]->
	`R–—£
();

400 
glob®FunùiÚs
.
	`S‘L’gth
(0);

403  
n
 = 0;‚ < 
sütFunùiÚs
.
	`G‘L’gth
();‚++ )

405 ifĞ
sütFunùiÚs
[
n
] )

408 
sütFunùiÚs
[
n
]->
moduË
 = 0;

409 
sütFunùiÚs
[
n
]->
	`R–—£
();

412 
sütFunùiÚs
.
	`S‘L’gth
(0);

415  
n
 = 0;‚ < 
sütGlob®s
.
	`G‘L’gth
();‚++ )

416 
sütGlob®s
[
n
]->
	`R–—£
();

417 
sütGlob®s
.
	`S‘L’gth
(0);

419 
	`UnbšdAÎImpÜ‹dFunùiÚs
();

422  
n
 = 0;‚ < 
bšdInfÜm©iÚs
.
	`G‘L’gth
();‚++ )

424 ifĞ
bšdInfÜm©iÚs
[
n
] )

426 
asUINT
 
id
 = 
bšdInfÜm©iÚs
[
n
]->
impÜ‹dFunùiÚSigÇtu»
->id & 0xFFFF;

427 
’gše
->
impÜ‹dFunùiÚs
[
id
] = 0;

428 
’gše
->
ä“ImpÜ‹dFunùiÚIdxs
.
	`PushLa¡
(
id
);

430 
	`asDELETE
(
bšdInfÜm©iÚs
[
n
]->
impÜ‹dFunùiÚSigÇtu»
, 
asCSütFunùiÚ
);

431 
	`asDELETE
(
bšdInfÜm©iÚs
[
n
], 
sBšdInfo
);

434 
bšdInfÜm©iÚs
.
	`S‘L’gth
(0);

437  
n
 = 0;‚ < 
şassTy³s
.
	`G‘L’gth
();‚++ )

438 
şassTy³s
[
n
]->
	`R–—£
();

439 
şassTy³s
.
	`S‘L’gth
(0);

440  
n
 = 0;‚ < 
’umTy³s
.
	`G‘L’gth
();‚++ )

441 
’umTy³s
[
n
]->
	`R–—£
();

442 
’umTy³s
.
	`S‘L’gth
(0);

443  
n
 = 0;‚ < 
ty³Defs
.
	`G‘L’gth
();‚++ )

444 
ty³Defs
[
n
]->
	`R–—£
();

445 
ty³Defs
.
	`S‘L’gth
(0);

448  
n
 = 0;‚ < 
funcDefs
.
	`G‘L’gth
();‚++ )

451 
’gše
->
funcDefs
.
	`RemoveV®ue
(funcDefs[
n
]);

452 
funcDefs
[
n
]->
	`R–—£
();

454 
funcDefs
.
	`S‘L’gth
(0);

455 
	}
}

457 #ifdeà
AS_DEPRECATED


460 
	gasCModuË
::
	$G‘FunùiÚIdByName
(cÚ¡ *
Çme
) const

464 
id
 = -1;

465  
size_t
 
n
 = 0;‚ < 
glob®FunùiÚs
.
	`G‘L’gth
();‚++ )

467 ifĞ
glob®FunùiÚs
[
n
]->
Çme
 ==‚ame &&

468 
glob®FunùiÚs
[
n
]->
ÇmeS·û
 =ğ
deçuÉName¥aû
 )

470 ifĞ
id
 == -1 )

471 
id
 = 
glob®FunùiÚs
[
n
]->id;

473  
asMULTIPLE_FUNCTIONS
;

477 ifĞ
id
 =ğ-1 )  
asNO_FUNCTION
;

479  
id
;

480 
	}
}

484 
asISütFunùiÚ
 *
	gasCModuË
::
	$G‘FunùiÚByName
(cÚ¡ *
Çme
) const

486 
asISütFunùiÚ
 *
func
 = 0;

487  
size_t
 
n
 = 0;‚ < 
glob®FunùiÚs
.
	`G‘L’gth
();‚++ )

489 ifĞ
glob®FunùiÚs
[
n
]->
Çme
 ==‚ame &&

490 
glob®FunùiÚs
[
n
]->
ÇmeS·û
 =ğ
deçuÉName¥aû
 )

492 ifĞ
func
 == 0 )

493 
func
 = 
glob®FunùiÚs
[
n
];

502  
func
;

503 
	}
}

506 
asUINT
 
	gasCModuË
::
	$G‘ImpÜ‹dFunùiÚCouÁ
() const

508  (
asUINT
)
bšdInfÜm©iÚs
.
	`G‘L’gth
();

509 
	}
}

512 
	gasCModuË
::
	$G‘ImpÜ‹dFunùiÚIndexByDeş
(cÚ¡ *
deş
) const

514 
asCBud”
 
	`bld
(
’gše
, 
cÚ¡_ÿ¡
<
asCModuË
*>(
this
));

516 
asCSütFunùiÚ
 
	`func
(
’gše
, 
cÚ¡_ÿ¡
<
asCModuË
*>(
this
), 
asFUNC_DUMMY
);

517 
bld
.
	`P¬£FunùiÚDeş¬©iÚ
(0, 
deş
, &
func
, 
çl£
, 0, 0, 
deçuÉName¥aû
);

521 
id
 = -1;

522  
asUINT
 
n
 = 0;‚ < 
bšdInfÜm©iÚs
.
	`G‘L’gth
(); ++n )

524 ifĞ
func
.
Çme
 =ğ
bšdInfÜm©iÚs
[
n
]->
impÜ‹dFunùiÚSigÇtu»
->name &&

525 
func
.
»tuºTy³
 =ğ
bšdInfÜm©iÚs
[
n
]->
impÜ‹dFunùiÚSigÇtu»
->returnType &&

526 
func
.
·¿m‘”Ty³s
.
	`G‘L’gth
(è=ğ
bšdInfÜm©iÚs
[
n
]->
impÜ‹dFunùiÚSigÇtu»
->parameterTypes.GetLength() )

528 
boŞ
 
m©ch
 = 
Œue
;

529  
asUINT
 
p
 = 0;… < 
func
.
·¿m‘”Ty³s
.
	`G‘L’gth
(); ++p )

531 ifĞ
func
.
·¿m‘”Ty³s
[
p
] !ğ
bšdInfÜm©iÚs
[
n
]->
impÜ‹dFunùiÚSigÇtu»
->parameterTypes[p] )

533 
m©ch
 = 
çl£
;

538 ifĞ
m©ch
 )

540 ifĞ
id
 == -1 )

541 
id
 = 
n
;

543  
asMULTIPLE_FUNCTIONS
;

548 ifĞ
id
 =ğ-1 )  
asNO_FUNCTION
;

550  
id
;

551 
	}
}

554 
asUINT
 
	gasCModuË
::
	$G‘FunùiÚCouÁ
() const

556  (
asUINT
)
glob®FunùiÚs
.
	`G‘L’gth
();

557 
	}
}

559 #ifdeà
AS_DEPRECATED


562 
	gasCModuË
::
	$G‘FunùiÚIdByDeş
(cÚ¡ *
deş
) const

564 
asCBud”
 
	`bld
(
’gše
, 
cÚ¡_ÿ¡
<
asCModuË
*>(
this
));

566 
asCSütFunùiÚ
 
	`func
(
’gše
, 
cÚ¡_ÿ¡
<
asCModuË
*>(
this
), 
asFUNC_DUMMY
);

567 
r
 = 
bld
.
	`P¬£FunùiÚDeş¬©iÚ
(0, 
deş
, &
func
, 
çl£
, 0, 0, 
deçuÉName¥aû
);

568 ifĞ
r
 < 0 )

569  
asINVALID_DECLARATION
;

572 
asCSŒšg
 
ns
 = 
func
.
ÇmeS·û
 =ğ"" ? 
deçuÉName¥aû
 : func.nameSpace;

576 
id
 = -1;

577  
size_t
 
n
 = 0;‚ < 
glob®FunùiÚs
.
	`G‘L’gth
(); ++n )

579 ifĞ
glob®FunùiÚs
[
n
]->
objeùTy³
 == 0 &&

580 
func
.
Çme
 =ğ
glob®FunùiÚs
[
n
]->name &&

581 
func
.
»tuºTy³
 =ğ
glob®FunùiÚs
[
n
]->returnType &&

582 
func
.
·¿m‘”Ty³s
.
	`G‘L’gth
(è=ğ
glob®FunùiÚs
[
n
]->parameterTypes.GetLength() &&

583 
ns
 =ğ
glob®FunùiÚs
[
n
]->
ÇmeS·û
 )

585 
boŞ
 
m©ch
 = 
Œue
;

586  
size_t
 
p
 = 0;… < 
func
.
·¿m‘”Ty³s
.
	`G‘L’gth
(); ++p )

588 ifĞ
func
.
·¿m‘”Ty³s
[
p
] !ğ
glob®FunùiÚs
[
n
]->parameterTypes[p] )

590 
m©ch
 = 
çl£
;

595 ifĞ
m©ch
 )

597 ifĞ
id
 == -1 )

598 
id
 = 
glob®FunùiÚs
[
n
]->id;

600  
asMULTIPLE_FUNCTIONS
;

605 ifĞ
id
 =ğ-1 )  
asNO_FUNCTION
;

607  
id
;

608 
	}
}

612 
asISütFunùiÚ
 *
	gasCModuË
::
	$G‘FunùiÚByDeş
(cÚ¡ *
deş
) const

614 
asCBud”
 
	`bld
(
’gše
, 
cÚ¡_ÿ¡
<
asCModuË
*>(
this
));

616 
asCSütFunùiÚ
 
	`func
(
’gše
, 
cÚ¡_ÿ¡
<
asCModuË
*>(
this
), 
asFUNC_DUMMY
);

617 
r
 = 
bld
.
	`P¬£FunùiÚDeş¬©iÚ
(0, 
deş
, &
func
, 
çl£
, 0, 0, 
deçuÉName¥aû
);

618 ifĞ
r
 < 0 )

626 
asSNameS·û
 *
ns
 = 
func
.
ÇmeS·û
 =ğ
’gše
->
ÇmeS·ûs
[0] ? 
deçuÉName¥aû
 : func.nameSpace;

630 
asISütFunùiÚ
 *
f
 = 0;

631  
size_t
 
n
 = 0;‚ < 
glob®FunùiÚs
.
	`G‘L’gth
(); ++n )

633 ifĞ
glob®FunùiÚs
[
n
]->
objeùTy³
 == 0 &&

634 
func
.
Çme
 =ğ
glob®FunùiÚs
[
n
]->name &&

635 
func
.
»tuºTy³
 =ğ
glob®FunùiÚs
[
n
]->returnType &&

636 
func
.
·¿m‘”Ty³s
.
	`G‘L’gth
(è=ğ
glob®FunùiÚs
[
n
]->parameterTypes.GetLength() &&

637 
ns
 =ğ
glob®FunùiÚs
[
n
]->
ÇmeS·û
 )

639 
boŞ
 
m©ch
 = 
Œue
;

640  
size_t
 
p
 = 0;… < 
func
.
·¿m‘”Ty³s
.
	`G‘L’gth
(); ++p )

642 ifĞ
func
.
·¿m‘”Ty³s
[
p
] !ğ
glob®FunùiÚs
[
n
]->parameterTypes[p] )

644 
m©ch
 = 
çl£
;

649 ifĞ
m©ch
 )

651 ifĞ
f
 == 0 )

652 
f
 = 
glob®FunùiÚs
[
n
];

660  
f
;

661 
	}
}

664 
asUINT
 
	gasCModuË
::
	$G‘Glob®V¬CouÁ
() const

666  (
asUINT
)
sütGlob®s
.
	`G‘L’gth
();

667 
	}
}

670 
	gasCModuË
::
	$G‘Glob®V¬IndexByName
(cÚ¡ *
Çme
) const

673 
id
 = -1;

674  
size_t
 
n
 = 0;‚ < 
sütGlob®s
.
	`G‘L’gth
();‚++ )

676 ifĞ
sütGlob®s
[
n
]->
Çme
 ==‚ame &&

677 
sütGlob®s
[
n
]->
ÇmeS·û
 =ğ
deçuÉName¥aû
 )

679 
id
 = ()
n
;

684 ifĞ
id
 =ğ-1 )  
asNO_GLOBAL_VAR
;

686  
id
;

687 
	}
}

690 
	gasCModuË
::
	$RemoveGlob®V¬
(
asUINT
 
šdex
)

692 ifĞ
šdex
 >ğ
sütGlob®s
.
	`G‘L’gth
() )

693  
asINVALID_ARG
;

695 
sütGlob®s
[
šdex
]->
	`R–—£
();

696 
sütGlob®s
.
	`RemoveIndex
(
šdex
);

699 
	}
}

702 
	gasCModuË
::
	$G‘Glob®V¬IndexByDeş
(cÚ¡ *
deş
) const

704 
asCBud”
 
	`bld
(
’gše
, 
cÚ¡_ÿ¡
<
asCModuË
*>(
this
));

706 
asCSŒšg
 
Çme
;

707 
asSNameS·û
 *
ÇmeS·û
;

708 
asCD©aTy³
 
dt
;

709 
bld
.
	`P¬£V¬ŸbËDeş¬©iÚ
(
deş
, 
deçuÉName¥aû
, 
Çme
, 
ÇmeS·û
, 
dt
);

713 
id
 = -1;

714  
size_t
 
n
 = 0;‚ < 
sütGlob®s
.
	`G‘L’gth
(); ++n )

716 ifĞ
Çme
 =ğ
sütGlob®s
[
n
]->name &&

717 
ÇmeS·û
 =ğ
sütGlob®s
[
n
]->nameSpace &&

718 
dt
 =ğ
sütGlob®s
[
n
]->
ty³
 )

720 
id
 = ()
n
;

725 ifĞ
id
 =ğ-1 )  
asNO_GLOBAL_VAR
;

727  
id
;

728 
	}
}

731 *
	gasCModuË
::
	$G‘Add»ssOfGlob®V¬
(
asUINT
 
šdex
)

733 ifĞ
šdex
 >ğ
sütGlob®s
.
	`G‘L’gth
() )

737 ifĞ
sütGlob®s
[
šdex
]->
ty³
.
	`IsObjeù
() &&

738 !
sütGlob®s
[
šdex
]->
ty³
.
	`IsObjeùHªdË
() )

739  *(**)(
sütGlob®s
[
šdex
]->
	`G‘Add»ssOfV®ue
());

741  (*)(
sütGlob®s
[
šdex
]->
	`G‘Add»ssOfV®ue
());

742 
	}
}

745 cÚ¡ *
	gasCModuË
::
	$G‘Glob®V¬Deş¬©iÚ
(
asUINT
 
šdex
, 
boŞ
 
šşudeName¥aû
) const

747 ifĞ
šdex
 >ğ
sütGlob®s
.
	`G‘L’gth
() )

750 
asCGlob®Prİ”ty
 *
´İ
 = 
sütGlob®s
[
šdex
];

752 
asCSŒšg
 *
‹mpSŒšg
 = &
asCTh»adMªag”
::
	`G‘LoÿlD©a
()->
¡ršg
;

753 *
‹mpSŒšg
 = 
´İ
->
ty³
.
	`FÜm©
();

754 *
‹mpSŒšg
 += " ";

755 ifĞ
šşudeName¥aû
 )

756 *
‹mpSŒšg
 +ğ
´İ
->
ÇmeS·û
->
Çme
 + "::";

757 *
‹mpSŒšg
 +ğ
´İ
->
Çme
;

759  
‹mpSŒšg
->
	`Add»ssOf
();

760 
	}
}

763 
	gasCModuË
::
	$G‘Glob®V¬
(
asUINT
 
šdex
, cÚ¡ **
Çme
, cÚ¡ **
ÇmeS·û
, *
ty³Id
, 
boŞ
 *
isCÚ¡
) const

765 ifĞ
šdex
 >ğ
sütGlob®s
.
	`G‘L’gth
() )

766  
asINVALID_ARG
;

768 
asCGlob®Prİ”ty
 *
´İ
 = 
sütGlob®s
[
šdex
];

770 ifĞ
Çme
 )

771 *
Çme
 = 
´İ
->Çme.
	`Add»ssOf
();

772 ifĞ
ÇmeS·û
 )

773 *
ÇmeS·û
 = 
´İ
->ÇmeS·û->
Çme
.
	`Add»ssOf
();

774 ifĞ
ty³Id
 )

775 *
ty³Id
 = 
’gše
->
	`G‘Ty³IdFromD©aTy³
(
´İ
->
ty³
);

776 ifĞ
isCÚ¡
 )

777 *
isCÚ¡
 = 
´İ
->
ty³
.
	`IsR—dOÆy
();

779  
asSUCCESS
;

780 
	}
}

783 
asUINT
 
	gasCModuË
::
	$G‘ObjeùTy³CouÁ
() const

785  (
asUINT
)
şassTy³s
.
	`G‘L’gth
();

786 
	}
}

789 
asIObjeùTy³
 *
	gasCModuË
::
	$G‘ObjeùTy³ByIndex
(
asUINT
 
šdex
) const

791 ifĞ
šdex
 >ğ
şassTy³s
.
	`G‘L’gth
() )

794  
şassTy³s
[
šdex
];

795 
	}
}

798 
asIObjeùTy³
 *
	gasCModuË
::
	$G‘ObjeùTy³ByName
(cÚ¡ *
Çme
) const

800  
asUINT
 
n
 = 0;‚ < 
şassTy³s
.
	`G‘L’gth
();‚++ )

802 ifĞ
şassTy³s
[
n
] &&

803 
şassTy³s
[
n
]->
Çme
 ==‚ame &&

804 
şassTy³s
[
n
]->
ÇmeS·û
 =ğ
deçuÉName¥aû
 )

805  
şassTy³s
[
n
];

809 
	}
}

812 
	gasCModuË
::
	$G‘Ty³IdByDeş
(cÚ¡ *
deş
) const

814 
asCD©aTy³
 
dt
;

815 
asCBud”
 
	`bld
(
’gše
, 
cÚ¡_ÿ¡
<
asCModuË
*>(
this
));

816 
r
 = 
bld
.
	`P¬£D©aTy³
(
deş
, &
dt
, 
deçuÉName¥aû
);

817 ifĞ
r
 < 0 )

818  
asINVALID_TYPE
;

820  
’gše
->
	`G‘Ty³IdFromD©aTy³
(
dt
);

821 
	}
}

824 
asUINT
 
	gasCModuË
::
	$G‘EnumCouÁ
() const

826  (
asUINT
)
’umTy³s
.
	`G‘L’gth
();

827 
	}
}

830 cÚ¡ *
	gasCModuË
::
	$G‘EnumByIndex
(
asUINT
 
šdex
, *
’umTy³Id
, cÚ¡ **
ÇmeS·û
) const

832 ifĞ
šdex
 >ğ
’umTy³s
.
	`G‘L’gth
() )

835 ifĞ
’umTy³Id
 )

836 *
’umTy³Id
 = 
	`G‘Ty³IdByDeş
(
’umTy³s
[
šdex
]->
Çme
.
	`Add»ssOf
());

838 ifĞ
ÇmeS·û
 )

839 *
ÇmeS·û
 = 
’umTy³s
[
šdex
]->
Çme
.
	`Add»ssOf
();

841  
’umTy³s
[
šdex
]->
Çme
.
	`Add»ssOf
();

842 
	}
}

845 
	gasCModuË
::
	$G‘EnumV®ueCouÁ
(
’umTy³Id
) const

847 
asCD©aTy³
 
dt
 = 
’gše
->
	`G‘D©aTy³FromTy³Id
(
’umTy³Id
);

848 
asCObjeùTy³
 *
t
 = 
dt
.
	`G‘ObjeùTy³
();

849 ifĞ
t
 =ğ0 || !Ñ->
	`G‘FÏgs
(è& 
asOBJ_ENUM
) )

850  
asINVALID_TYPE
;

852  ()
t
->
’umV®ues
.
	`G‘L’gth
();

853 
	}
}

856 cÚ¡ *
	gasCModuË
::
	$G‘EnumV®ueByIndex
(
’umTy³Id
, 
asUINT
 
šdex
, *
outV®ue
) const

858 
asCD©aTy³
 
dt
 = 
’gše
->
	`G‘D©aTy³FromTy³Id
(
’umTy³Id
);

859 
asCObjeùTy³
 *
t
 = 
dt
.
	`G‘ObjeùTy³
();

860 ifĞ
t
 =ğ0 || !Ñ->
	`G‘FÏgs
(è& 
asOBJ_ENUM
) )

863 ifĞ
šdex
 >ğ
t
->
’umV®ues
.
	`G‘L’gth
() )

866 ifĞ
outV®ue
 )

867 *
outV®ue
 = 
t
->
’umV®ues
[
šdex
]->
v®ue
;

869  
t
->
’umV®ues
[
šdex
]->
Çme
.
	`Add»ssOf
();

870 
	}
}

873 
asUINT
 
	gasCModuË
::
	$G‘Ty³defCouÁ
() const

875  (
asUINT
)
ty³Defs
.
	`G‘L’gth
();

876 
	}
}

879 cÚ¡ *
	gasCModuË
::
	$G‘Ty³defByIndex
(
asUINT
 
šdex
, *
ty³Id
, cÚ¡ **
ÇmeS·û
) const

881 ifĞ
šdex
 >ğ
ty³Defs
.
	`G‘L’gth
() )

884 ifĞ
ty³Id
 )

885 *
ty³Id
 = 
	`G‘Ty³IdByDeş
(
ty³Defs
[
šdex
]->
Çme
.
	`Add»ssOf
());

887 ifĞ
ÇmeS·û
 )

888 *
ÇmeS·û
 = 
ty³Defs
[
šdex
]->ÇmeS·û->
Çme
.
	`Add»ssOf
();

890  
ty³Defs
[
šdex
]->
Çme
.
	`Add»ssOf
();

891 
	}
}

895 
	gasCModuË
::
	$G‘NextImpÜ‹dFunùiÚId
()

898 ifĞ
’gše
->
ä“ImpÜ‹dFunùiÚIdxs
.
	`G‘L’gth
() )

899  
FUNC_IMPORTED
 | (
asUINT
)
’gše
->
ä“ImpÜ‹dFunùiÚIdxs
[’gše->ä“ImpÜ‹dFunùiÚIdxs.
	`G‘L’gth
()-1];

901  
FUNC_IMPORTED
 | (
asUINT
)
’gše
->
impÜ‹dFunùiÚs
.
	`G‘L’gth
();

902 
	}
}

905 
	gasCModuË
::
	$AddSütFunùiÚ
(
£ùiÚIdx
, 
id
, cÚ¡ *
Çme
, cÚ¡ 
asCD©aTy³
 &
»tuºTy³
,‡sCD©aTy³ *
·¿ms
, 
asETy³Modif›rs
 *
šOutFÏgs
, 
asCSŒšg
 **
deçuÉArgs
, 
·¿mCouÁ
, 
boŞ
 
isIÁ”çû
, 
asCObjeùTy³
 *
objTy³
, boŞ 
isCÚ¡M‘hod
, boŞ 
isGlob®FunùiÚ
, boŞ 
isPriv©e
, boŞ 
isFš®
, boŞ 
isOv”ride
, boŞ 
isSh¬ed
, 
asSNameS·û
 *
ns
)

907 
	`asASSERT
(
id
 >= 0);

910 
asCSütFunùiÚ
 *
func
 = 
	`asNEW
×sCSütFunùiÚ)(
’gše
, 
this
, 
isIÁ”çû
 ? 
asFUNC_INTERFACE
 : 
asFUNC_SCRIPT
);

911 ifĞ
func
 == 0 )

912  
asOUT_OF_MEMORY
;

914 ifĞ
ns
 == 0 )

915 
ns
 = 
’gše
->
ÇmeS·ûs
[0];

917 
func
->
Çme
 =‚ame;

918 
func
->
ÇmeS·û
 = 
ns
;

919 
func
->
id
 = id;

920 
func
->
»tuºTy³
 =„eturnType;

921 
func
->
sütSeùiÚIdx
 = 
£ùiÚIdx
;

922  
n
 = 0;‚ < 
·¿mCouÁ
;‚++ )

924 
func
->
·¿m‘”Ty³s
.
	`PushLa¡
(
·¿ms
[
n
]);

925 
func
->
šOutFÏgs
.
	`PushLa¡
(šOutFÏgs[
n
]);

926 
func
->
deçuÉArgs
.
	`PushLa¡
(deçuÉArgs[
n
]);

928 
func
->
objeùTy³
 = 
objTy³
;

929 
func
->
isR—dOÆy
 = 
isCÚ¡M‘hod
;

930 
func
->
isPriv©e
 = isPrivate;

931 
func
->
isFš®
 = isFinal;

932 
func
->
isOv”ride
 = isOverride;

934 ifĞ
objTy³
 && objTy³->
	`IsSh¬ed
() )

935 
isSh¬ed
 = 
Œue
;

936 
func
->
isSh¬ed
 = isShared;

939 
	`asASSERT
Ğ!(!
objTy³
 && 
isFš®
) );

940 
	`asASSERT
Ğ!(!
objTy³
 && 
isOv”ride
) );

943 
sütFunùiÚs
.
	`PushLa¡
(
func
);

944 
’gše
->
	`S‘SütFunùiÚ
(
func
);

947 ifĞ
objTy³
 )

948 
func
->
	`Compu‹SigÇtu»Id
();

951 ifĞ
isGlob®FunùiÚ
 )

953 
glob®FunùiÚs
.
	`PushLa¡
(
func
);

954 
func
->
	`AddRef
();

958 
	}
}

961 
	gasCModuË
::
	$AddSütFunùiÚ
(
asCSütFunùiÚ
 *
func
)

963 
sütFunùiÚs
.
	`PushLa¡
(
func
);

964 
func
->
	`AddRef
();

965 
’gše
->
	`S‘SütFunùiÚ
(
func
);

968 
	}
}

971 
	gasCModuË
::
	$AddImpÜ‹dFunùiÚ
(
id
, cÚ¡ *
Çme
, cÚ¡ 
asCD©aTy³
 &
»tuºTy³
,‡sCD©aTy³ *
·¿ms
, 
asETy³Modif›rs
 *
šOutFÏgs
, 
·¿mCouÁ
, cÚ¡ 
asCSŒšg
 &
moduËName
)

973 
	`asASSERT
(
id
 >= 0);

976 
asCSütFunùiÚ
 *
func
 = 
	`asNEW
×sCSütFunùiÚ)(
’gše
, 
this
, 
asFUNC_IMPORTED
);

977 ifĞ
func
 == 0 )

978  
asOUT_OF_MEMORY
;

980 
func
->
Çme
 =‚ame;

981 
func
->
id
 = id;

982 
func
->
»tuºTy³
 =„eturnType;

983  
n
 = 0;‚ < 
·¿mCouÁ
;‚++ )

985 
func
->
·¿m‘”Ty³s
.
	`PushLa¡
(
·¿ms
[
n
]);

986 
func
->
šOutFÏgs
.
	`PushLa¡
(šOutFÏgs[
n
]);

988 
func
->
objeùTy³
 = 0;

990 
sBšdInfo
 *
šfo
 = 
	`asNEW
(sBindInfo);

991 ifĞ
šfo
 == 0 )

992  
asOUT_OF_MEMORY
;

994 
šfo
->
impÜ‹dFunùiÚSigÇtu»
 = 
func
;

995 
šfo
->
boundFunùiÚId
 = -1;

996 
šfo
->
impÜtFromModuË
 = 
moduËName
;

997 
bšdInfÜm©iÚs
.
	`PushLa¡
(
šfo
);

1000 ifĞ
’gše
->
ä“ImpÜ‹dFunùiÚIdxs
.
	`G‘L’gth
() )

1001 
’gše
->
impÜ‹dFunùiÚs
[’gše->
ä“ImpÜ‹dFunùiÚIdxs
.
	`PİLa¡
()] = 
šfo
;

1003 
’gše
->
impÜ‹dFunùiÚs
.
	`PushLa¡
(
šfo
);

1006 
	}
}

1009 
asCSütFunùiÚ
 *
	gasCModuË
::
	$G‘ImpÜ‹dFunùiÚ
(
šdex
) const

1011  
bšdInfÜm©iÚs
[
šdex
]->
impÜ‹dFunùiÚSigÇtu»
;

1012 
	}
}

1015 
	gasCModuË
::
	$BšdImpÜ‹dFunùiÚ
(
asUINT
 
šdex
, 
asISütFunùiÚ
 *
func
)

1018 
r
 = 
	`UnbšdImpÜ‹dFunùiÚ
(
šdex
);

1019 ifĞ
r
 < 0 ) „;

1022 
asCSütFunùiÚ
 *
d¡
 = 
	`G‘ImpÜ‹dFunùiÚ
(
šdex
);

1023 ifĞ
d¡
 =ğ0 )  
asNO_FUNCTION
;

1025 ifĞ
func
 == 0 )

1026  
asINVALID_ARG
;

1028 
asCSütFunùiÚ
 *
¤c
 = 
’gše
->
	`G‘SütFunùiÚ
(
func
->
	`G‘Id
());

1029 ifĞ
¤c
 == 0 )

1030  
asNO_FUNCTION
;

1033 ifĞ
d¡
->
»tuºTy³
 !ğ
¤c
->returnType )

1034  
asINVALID_INTERFACE
;

1036 ifĞ
d¡
->
·¿m‘”Ty³s
.
	`G‘L’gth
(è!ğ
¤c
->parameterTypes.GetLength() )

1037  
asINVALID_INTERFACE
;

1039  
size_t
 
n
 = 0;‚ < 
d¡
->
·¿m‘”Ty³s
.
	`G‘L’gth
(); ++n )

1041 ifĞ
d¡
->
·¿m‘”Ty³s
[
n
] !ğ
¤c
->parameterTypes[n] )

1042  
asINVALID_INTERFACE
;

1045 
bšdInfÜm©iÚs
[
šdex
]->
boundFunùiÚId
 = 
¤c
->
	`G‘Id
();

1046 
¤c
->
	`AddRef
();

1048  
asSUCCESS
;

1049 
	}
}

1052 
	gasCModuË
::
	$UnbšdImpÜ‹dFunùiÚ
(
asUINT
 
šdex
)

1054 ifĞ
šdex
 >ğ
bšdInfÜm©iÚs
.
	`G‘L’gth
() )

1055  
asINVALID_ARG
;

1058 ifĞ
bšdInfÜm©iÚs
[
šdex
] )

1060 
ŞdFuncID
 = 
bšdInfÜm©iÚs
[
šdex
]->
boundFunùiÚId
;

1061 ifĞ
ŞdFuncID
 != -1 )

1063 
bšdInfÜm©iÚs
[
šdex
]->
boundFunùiÚId
 = -1;

1064 
’gše
->
sütFunùiÚs
[
ŞdFuncID
]->
	`R–—£
();

1068  
asSUCCESS
;

1069 
	}
}

1072 cÚ¡ *
	gasCModuË
::
	$G‘ImpÜ‹dFunùiÚDeş¬©iÚ
(
asUINT
 
šdex
) const

1074 
asCSütFunùiÚ
 *
func
 = 
	`G‘ImpÜ‹dFunùiÚ
(
šdex
);

1075 ifĞ
func
 == 0 )  0;

1077 
asCSŒšg
 *
‹mpSŒšg
 = &
asCTh»adMªag”
::
	`G‘LoÿlD©a
()->
¡ršg
;

1078 *
‹mpSŒšg
 = 
func
->
	`G‘Deş¬©iÚSŒ
();

1080  
‹mpSŒšg
->
	`Add»ssOf
();

1081 
	}
}

1084 cÚ¡ *
	gasCModuË
::
	$G‘ImpÜ‹dFunùiÚSourûModuË
(
asUINT
 
šdex
) const

1086 ifĞ
šdex
 >ğ
bšdInfÜm©iÚs
.
	`G‘L’gth
() )

1089  
bšdInfÜm©iÚs
[
šdex
]->
impÜtFromModuË
.
	`Add»ssOf
();

1090 
	}
}

1093 
	gasCModuË
::
	$BšdAÎImpÜ‹dFunùiÚs
()

1095 
boŞ
 
nÙAÎFunùiÚsW”eBound
 = 
çl£
;

1098 
c
 = 
	`G‘ImpÜ‹dFunùiÚCouÁ
();

1099  
n
 = 0;‚ < 
c
; ++n )

1101 
asCSütFunùiÚ
 *
impÜtFunc
 = 
	`G‘ImpÜ‹dFunùiÚ
(
n
);

1102 ifĞ
impÜtFunc
 =ğ0 )  
asERROR
;

1104 
asCSŒšg
 
¡r
 = 
impÜtFunc
->
	`G‘Deş¬©iÚSŒ
();

1107 cÚ¡ *
moduËName
 = 
	`G‘ImpÜ‹dFunùiÚSourûModuË
(
n
);

1108 ifĞ
moduËName
 =ğ0 )  
asERROR
;

1110 
asCModuË
 *
¤cMod
 = 
’gše
->
	`G‘ModuË
(
moduËName
, 
çl£
);

1111 
asISütFunùiÚ
 *
func
 = 0;

1112 ifĞ
¤cMod
 )

1113 
func
 = 
¤cMod
->
	`G‘FunùiÚByDeş
(
¡r
.
	`Add»ssOf
());

1115 ifĞ
func
 == 0 )

1116 
nÙAÎFunùiÚsW”eBound
 = 
Œue
;

1119 ifĞ
	`BšdImpÜ‹dFunùiÚ
(
n
, 
func
) < 0 )

1120 
nÙAÎFunùiÚsW”eBound
 = 
Œue
;

1124 ifĞ
nÙAÎFunùiÚsW”eBound
 )

1125  
asCANT_BIND_ALL_FUNCTIONS
;

1127  
asSUCCESS
;

1128 
	}
}

1131 
	gasCModuË
::
	$UnbšdAÎImpÜ‹dFunùiÚs
()

1133 
asUINT
 
c
 = 
	`G‘ImpÜ‹dFunùiÚCouÁ
();

1134  
asUINT
 
n
 = 0;‚ < 
c
; ++n )

1135 
	`UnbšdImpÜ‹dFunùiÚ
(
n
);

1137  
asSUCCESS
;

1138 
	}
}

1141 
asCObjeùTy³
 *
	gasCModuË
::
	$G‘ObjeùTy³
(cÚ¡ *
ty³
, 
asSNameS·û
 *
ns
)

1143 
size_t
 
n
;

1146  
n
 = 0;‚ < 
şassTy³s
.
	`G‘L’gth
();‚++ )

1147 ifĞ
şassTy³s
[
n
]->
Çme
 =ğ
ty³
 &&

1148 
şassTy³s
[
n
]->
ÇmeS·û
 =ğ
ns
 )

1149  
şassTy³s
[
n
];

1151  
n
 = 0;‚ < 
’umTy³s
.
	`G‘L’gth
();‚++ )

1152 ifĞ
’umTy³s
[
n
]->
Çme
 =ğ
ty³
 &&

1153 
’umTy³s
[
n
]->
ÇmeS·û
 =ğ
ns
 )

1154  
’umTy³s
[
n
];

1156  
n
 = 0;‚ < 
ty³Defs
.
	`G‘L’gth
();‚++ )

1157 ifĞ
ty³Defs
[
n
]->
Çme
 =ğ
ty³
 &&

1158 
ty³Defs
[
n
]->
ÇmeS·û
 =ğ
ns
 )

1159  
ty³Defs
[
n
];

1162 
	}
}

1165 
asCGlob®Prİ”ty
 *
	gasCModuË
::
	$AÎoÿ‹Glob®Prİ”ty
(cÚ¡ *
Çme
, cÚ¡ 
asCD©aTy³
 &
dt
, 
asSNameS·û
 *
ns
)

1167 
asCGlob®Prİ”ty
 *
´İ
 = 
’gše
->
	`AÎoÿ‹Glob®Prİ”ty
();

1168 
´İ
->
Çme
 =‚ame;

1169 
´İ
->
ÇmeS·û
 = 
ns
;

1172 
´İ
->
ty³
 = 
dt
;

1173 
´İ
->
	`AÎoÿ‹MemÜy
();

1176 
sütGlob®s
.
	`PushLa¡
(
´İ
);

1178  
´İ
;

1179 
	}
}

1182 
	gasCModuË
::
	$SaveBy‹Code
(
asIBš¬ySŒ—m
 *
out
) const

1184 #ifdeà
AS_NO_COMPILER


1185 
	`UNUSED_VAR
(
out
);

1186  
asNOT_SUPPORTED
;

1188 ifĞ
out
 =ğ0 )  
asINVALID_ARG
;

1190 
asCWr™”
 
	`wr™e
(
cÚ¡_ÿ¡
<
asCModuË
*>(
this
), 
out
, 
’gše
);

1191  
wr™e
.
	`Wr™e
();

1193 
	}
}

1196 
	gasCModuË
::
	$LßdBy‹Code
(
asIBš¬ySŒ—m
 *
š
)

1198 ifĞ
š
 =ğ0 )  
asINVALID_ARG
;

1202 
r
 = 
’gše
->
	`Reque¡Bud
();

1203 ifĞ
r
 < 0 )

1204  
r
;

1206 
asCR—d”
 
	`»ad
(
this
, 
š
, 
’gše
);

1207 
r
 = 
»ad
.
	`R—d
();

1209 
	`JITCompe
();

1211 
’gše
->
	`BudCom¶‘ed
();

1213  
r
;

1214 
	}
}

1217 
	gasCModuË
::
	$CompeGlob®V¬
(cÚ¡ *
£ùiÚName
, cÚ¡ *
code
, 
lšeOff£t
)

1219 #ifdeà
AS_NO_COMPILER


1220 
	`UNUSED_VAR
(
£ùiÚName
);

1221 
	`UNUSED_VAR
(
code
);

1222 
	`UNUSED_VAR
(
lšeOff£t
);

1223  
asNOT_SUPPORTED
;

1226 ifĞ
code
 == 0 )

1227  
asINVALID_ARG
;

1231 
r
 = 
’gše
->
	`Reque¡Bud
();

1232 ifĞ
r
 < 0 )

1233  
r
;

1236 
’gše
->
	`P»·»Engše
();

1237 ifĞ
’gše
->
cÚfigFaed
 )

1239 
’gše
->
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_ERROR
, 
TXT_INVALID_CONFIGURATION
);

1240 
’gše
->
	`BudCom¶‘ed
();

1241  
asINVALID_CONFIGURATION
;

1245 
asCBud”
 
	`bud”
(
’gše
, 
this
);

1246 
asCSŒšg
 
¡r
 = 
code
;

1247 
r
 = 
bud”
.
	`CompeGlob®V¬
(
£ùiÚName
, 
¡r
.
	`Add»ssOf
(), 
lšeOff£t
);

1249 
’gše
->
	`BudCom¶‘ed
();

1252 ifĞ
r
 >ğ0 && 
’gše
->
•
.
š™Glob®V¬sAá”Bud
 )

1255 
asCGlob®Prİ”ty
 *
´İ
 = 
sütGlob®s
[sütGlob®s.
	`G‘L’gth
()-1];

1256 
	`mem£t
(
´İ
->
	`G‘Add»ssOfV®ue
(), 0, (
asDWORD
)*´İ->
ty³
.
	`G‘SizeOnSckDWÜds
());

1258 ifĞ
´İ
->
	`G‘In™Func
() )

1261 
asISütCÚ‹xt
 *
ùx
 = 0;

1262 
r
 = 
’gše
->
	`C»©eCÚ‹xt
(&
ùx
, 
Œue
);

1263 ifĞ
r
 < 0 )

1264  
r
;

1266 
r
 = 
ùx
->
	`P»·»
(
´İ
->
	`G‘In™Func
());

1267 ifĞ
r
 >= 0 )

1268 
r
 = 
ùx
->
	`Execu‹
();

1270 
ùx
->
	`R–—£
();

1274  
r
;

1276 
	}
}

1279 
	gasCModuË
::
	$CompeFunùiÚ
(cÚ¡ *
£ùiÚName
, cÚ¡ *
code
, 
lšeOff£t
, 
asDWORD
 
compeFÏgs
, 
asISütFunùiÚ
 **
outFunc
)

1283 ifĞ
outFunc
 )

1284 *
outFunc
 = 0;

1286 #ifdeà
AS_NO_COMPILER


1287 
	`UNUSED_VAR
(
£ùiÚName
);

1288 
	`UNUSED_VAR
(
code
);

1289 
	`UNUSED_VAR
(
lšeOff£t
);

1290 
	`UNUSED_VAR
(
compeFÏgs
);

1291  
asNOT_SUPPORTED
;

1294 ifĞ
code
 == 0 ||

1295 (
compeFÏgs
 !ğ0 && compeFÏg !ğ
asCOMP_ADD_TO_MODULE
) )

1296  
asINVALID_ARG
;

1300 
r
 = 
’gše
->
	`Reque¡Bud
();

1301 ifĞ
r
 < 0 )

1302  
r
;

1305 
’gše
->
	`P»·»Engše
();

1306 ifĞ
’gše
->
cÚfigFaed
 )

1308 
’gše
->
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_ERROR
, 
TXT_INVALID_CONFIGURATION
);

1309 
’gše
->
	`BudCom¶‘ed
();

1310  
asINVALID_CONFIGURATION
;

1314 
asCBud”
 
	`bud”
(
’gše
, 
this
);

1315 
asCSŒšg
 
¡r
 = 
code
;

1316 
asCSütFunùiÚ
 *
func
 = 0;

1317 
r
 = 
bud”
.
	`CompeFunùiÚ
(
£ùiÚName
, 
¡r
.
	`Add»ssOf
(), 
lšeOff£t
, 
compeFÏgs
, &
func
);

1319 
’gše
->
	`BudCom¶‘ed
();

1321 ifĞ
r
 >ğ0 && 
outFunc
 && 
func
 )

1324 *
outFunc
 = 
func
;

1325 
func
->
	`AddRef
();

1329 ifĞ
func
 )

1330 
func
->
	`R–—£
();

1332  
r
;

1334 
	}
}

1336 #ifdeà
AS_DEPRECATED


1339 
	gasCModuË
::
	$RemoveFunùiÚ
(
funcId
)

1341 ifĞ
funcId
 >ğ0 && funcId < ()
’gše
->
sütFunùiÚs
.
	`G‘L’gth
() )

1342  
	`RemoveFunùiÚ
(
’gše
->
sütFunùiÚs
[
funcId
]);

1344  
asNO_FUNCTION
;

1345 
	}
}

1349 
	gasCModuË
::
	$RemoveFunùiÚ
(
asISütFunùiÚ
 *
func
)

1352 
asCSütFunùiÚ
 *
f
 = 
¡©ic_ÿ¡
<asCSütFunùiÚ*>(
func
);

1353 
idx
 = 
glob®FunùiÚs
.
	`IndexOf
(
f
);

1354 ifĞ
idx
 >= 0 )

1356 
glob®FunùiÚs
.
	`RemoveIndex
(
idx
);

1357 
f
->
	`R–—£
();

1358 
sütFunùiÚs
.
	`RemoveV®ue
(
f
);

1359 
f
->
	`R–—£
();

1363  
asNO_FUNCTION
;

1364 
	}
}

1367 
	gasCModuË
::
	$AddFuncDef
(cÚ¡ *
Çme
, 
asSNameS·û
 *
ns
)

1369 
asCSütFunùiÚ
 *
func
 = 
	`asNEW
×sCSütFunùiÚ)(
’gše
, 0, 
asFUNC_FUNCDEF
);

1370 ifĞ
func
 == 0 )

1371  
asOUT_OF_MEMORY
;

1373 
func
->
Çme
 =‚ame;

1374 
func
->
ÇmeS·û
 = 
ns
;

1376 
funcDefs
.
	`PushLa¡
(
func
);

1378 
’gše
->
funcDefs
.
	`PushLa¡
(
func
);

1379 
func
->
id
 = 
’gše
->
	`G‘NextSütFunùiÚId
();

1380 
’gše
->
	`S‘SütFunùiÚ
(
func
);

1382  ()
funcDefs
.
	`G‘L’gth
()-1;

1383 
	}
}

1386 
asDWORD
 
	gasCModuË
::
	$S‘AcûssMask
(
asDWORD
 
mask
)

1388 
asDWORD
 
Şd
 = 
acûssMask
;

1389 
acûssMask
 = 
mask
;

1390  
Şd
;

1391 
	}
}

1393 
	gEND_AS_NAMESPACE


	@../src/script/as_objecttype.cpp

39 
	~<¡dio.h
>

41 
	~"as_cÚfig.h
"

42 
	~"as_objeùty³.h
"

43 
	~"as_cÚfiggroup.h
"

44 
	~"as_sü‹ngše.h
"

46 
	gBEGIN_AS_NAMESPACE


48 #ifdeà
AS_MAX_PORTABILITY


50 
	$ObjeùTy³_AddRef_G’”ic
(
asISütG’”ic
 *
g’
)

52 
asCObjeùTy³
 *
£lf
 = (asCObjeùTy³*)
g’
->
	`G‘Objeù
();

53 
£lf
->
	`AddRef
();

54 
	}
}

56 
	$ObjeùTy³_R–—£_G’”ic
(
asISütG’”ic
 *
g’
)

58 
asCObjeùTy³
 *
£lf
 = (asCObjeùTy³*)
g’
->
	`G‘Objeù
();

59 
£lf
->
	`R–—£
();

60 
	}
}

62 
	$ObjeùTy³_G‘RefCouÁ_G’”ic
(
asISütG’”ic
 *
g’
)

64 
asCObjeùTy³
 *
£lf
 = (asCObjeùTy³*)
g’
->
	`G‘Objeù
();

65 *(*)
g’
->
	`G‘Add»ssOfR‘uºLoÿtiÚ
(èğ
£lf
->
	`G‘RefCouÁ
();

66 
	}
}

68 
	$ObjeùTy³_S‘GCFÏg_G’”ic
(
asISütG’”ic
 *
g’
)

70 
asCObjeùTy³
 *
£lf
 = (asCObjeùTy³*)
g’
->
	`G‘Objeù
();

71 
£lf
->
	`S‘GCFÏg
();

72 
	}
}

74 
	$ObjeùTy³_G‘GCFÏg_G’”ic
(
asISütG’”ic
 *
g’
)

76 
asCObjeùTy³
 *
£lf
 = (asCObjeùTy³*)
g’
->
	`G‘Objeù
();

77 *(
boŞ
*)
g’
->
	`G‘Add»ssOfR‘uºLoÿtiÚ
(èğ
£lf
->
	`G‘GCFÏg
();

78 
	}
}

80 
	$ObjeùTy³_EnumReã»nûs_G’”ic
(
asISütG’”ic
 *
g’
)

82 
asCObjeùTy³
 *
£lf
 = (asCObjeùTy³*)
g’
->
	`G‘Objeù
();

83 
asISütEngše
 *
’gše
 = *×sISütEngše**)
g’
->
	`G‘Add»ssOfArg
(0);

84 
£lf
->
	`EnumReã»nûs
(
’gše
);

85 
	}
}

87 
	$ObjeùTy³_R–—£AÎHªdËs_G’”ic
(
asISütG’”ic
 *
g’
)

89 
asCObjeùTy³
 *
£lf
 = (asCObjeùTy³*)
g’
->
	`G‘Objeù
();

90 
asISütEngše
 *
’gše
 = *×sISütEngše**)
g’
->
	`G‘Add»ssOfArg
(0);

91 
£lf
->
	`R–—£AÎHªdËs
(
’gše
);

92 
	}
}

97 
	$Regi¡”ObjeùTy³GCBehaviours
(
asCSütEngše
 *
’gše
)

100 
r
 = 0;

101 
	`UNUSED_VAR
(
r
);

102 
’gše
->
objeùTy³Behaviours
.engine =ƒngine;

103 
’gše
->
objeùTy³Behaviours
.
æags
 = 
asOBJ_REF
 | 
asOBJ_GC
;

104 
’gše
->
objeùTy³Behaviours
.
Çme
 = "_builtin_objecttype_";

105 #iâdeà
AS_MAX_PORTABILITY


106 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
objeùTy³Behaviours
, 
asBEHAVE_ADDREF
, "void f()", 
	`asMETHOD
(
asCObjeùTy³
,
AddRef
), 
asCALL_THISCALL
); 
	`asASSERT
(„ >= 0 );

107 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
objeùTy³Behaviours
, 
asBEHAVE_RELEASE
, "void f()", 
	`asMETHOD
(
asCObjeùTy³
,
R–—£
), 
asCALL_THISCALL
); 
	`asASSERT
(„ >= 0 );

108 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
objeùTy³Behaviours
, 
asBEHAVE_GETREFCOUNT
, "šˆf()", 
	`asMETHOD
(
asCObjeùTy³
,
G‘RefCouÁ
), 
asCALL_THISCALL
); 
	`asASSERT
(„ >= 0 );

109 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
objeùTy³Behaviours
, 
asBEHAVE_SETGCFLAG
, "void f()", 
	`asMETHOD
(
asCObjeùTy³
,
S‘GCFÏg
), 
asCALL_THISCALL
); 
	`asASSERT
(„ >= 0 );

110 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
objeùTy³Behaviours
, 
asBEHAVE_GETGCFLAG
, "boŞ f()", 
	`asMETHOD
(
asCObjeùTy³
,
G‘GCFÏg
), 
asCALL_THISCALL
); 
	`asASSERT
(„ >= 0 );

111 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
objeùTy³Behaviours
, 
asBEHAVE_ENUMREFS
, "void f(št&š)", 
	`asMETHOD
(
asCObjeùTy³
,
EnumReã»nûs
), 
asCALL_THISCALL
); 
	`asASSERT
(„ >= 0 );

112 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
objeùTy³Behaviours
, 
asBEHAVE_RELEASEREFS
, "void f(št&š)", 
	`asMETHOD
(
asCObjeùTy³
,
R–—£AÎHªdËs
), 
asCALL_THISCALL
); 
	`asASSERT
(„ >= 0 );

114 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
objeùTy³Behaviours
, 
asBEHAVE_ADDREF
, "void f()", 
	`asFUNCTION
(
ObjeùTy³_AddRef_G’”ic
), 
asCALL_GENERIC
); 
	`asASSERT
(„ >= 0 );

115 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
objeùTy³Behaviours
, 
asBEHAVE_RELEASE
, "void f()", 
	`asFUNCTION
(
ObjeùTy³_R–—£_G’”ic
), 
asCALL_GENERIC
); 
	`asASSERT
(„ >= 0 );

116 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
objeùTy³Behaviours
, 
asBEHAVE_GETREFCOUNT
, "šˆf()", 
	`asFUNCTION
(
ObjeùTy³_G‘RefCouÁ_G’”ic
), 
asCALL_GENERIC
); 
	`asASSERT
(„ >= 0 );

117 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
objeùTy³Behaviours
, 
asBEHAVE_SETGCFLAG
, "void f()", 
	`asFUNCTION
(
ObjeùTy³_S‘GCFÏg_G’”ic
), 
asCALL_GENERIC
); 
	`asASSERT
(„ >= 0 );

118 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
objeùTy³Behaviours
, 
asBEHAVE_GETGCFLAG
, "boŞ f()", 
	`asFUNCTION
(
ObjeùTy³_G‘GCFÏg_G’”ic
), 
asCALL_GENERIC
); 
	`asASSERT
(„ >= 0 );

119 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
objeùTy³Behaviours
, 
asBEHAVE_ENUMREFS
, "void f(št&š)", 
	`asFUNCTION
(
ObjeùTy³_EnumReã»nûs_G’”ic
), 
asCALL_GENERIC
); 
	`asASSERT
(„ >= 0 );

120 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
objeùTy³Behaviours
, 
asBEHAVE_RELEASEREFS
, "void f(št&š)", 
	`asFUNCTION
(
ObjeùTy³_R–—£AÎHªdËs_G’”ic
), 
asCALL_GENERIC
); 
	`asASSERT
(„ >= 0 );

122 
	}
}

124 
	gasCObjeùTy³
::
	$asCObjeùTy³
()

126 
this
->
’gše
 = 0;

127 
»fCouÁ
.
	`£t
(0);

128 
d”ivedFrom
 = 0;

130 
acû±V®ueSubTy³
 = 
Œue
;

131 
acû±RefSubTy³
 = 
Œue
;

133 
acûssMask
 = 0xFFFFFFFF;

134 
ÇmeS·û
 = 0;

135 
	}
}

137 
	gasCObjeùTy³
::
	$asCObjeùTy³
(
asCSütEngše
 *
’gše
)

139 
this
->
’gše
 =ƒngine;

140 
»fCouÁ
.
	`£t
(0);

141 
d”ivedFrom
 = 0;

143 
acû±V®ueSubTy³
 = 
Œue
;

144 
acû±RefSubTy³
 = 
Œue
;

146 
acûssMask
 = 0xFFFFFFFF;

147 
ÇmeS·û
 = 
’gše
->
ÇmeS·ûs
[0];

148 
	}
}

150 
	gasCObjeùTy³
::
	$AddRef
() const

152 
gcFÏg
 = 
çl£
;

153  
»fCouÁ
.
	`©omicInc
();

154 
	}
}

156 
	gasCObjeùTy³
::
	$R–—£
() const

158 
gcFÏg
 = 
çl£
;

159  
»fCouÁ
.
	`©omicDec
();

160 
	}
}

162 *
	gasCObjeùTy³
::
	$S‘U£rD©a
(*
d©a
, 
asPWORD
 
ty³
)

166 
	`ACQUIREEXCLUSIVE
(
’gše
->
’gšeRWLock
);

171  
asUINT
 
n
 = 0;‚ < 
u£rD©a
.
	`G‘L’gth
();‚ += 2 )

173 ifĞ
u£rD©a
[
n
] =ğ
ty³
 )

175 *
ŞdD©a
 = 
»š‹½»t_ÿ¡
<*>(
u£rD©a
[
n
+1]);

176 
u£rD©a
[
n
+1] = 
»š‹½»t_ÿ¡
<
asPWORD
>(
d©a
);

178 
	`RELEASEEXCLUSIVE
(
’gše
->
’gšeRWLock
);

180  
ŞdD©a
;

184 
u£rD©a
.
	`PushLa¡
(
ty³
);

185 
u£rD©a
.
	`PushLa¡
(
»š‹½»t_ÿ¡
<
asPWORD
>(
d©a
));

187 
	`RELEASEEXCLUSIVE
(
’gše
->
’gšeRWLock
);

190 
	}
}

192 *
	gasCObjeùTy³
::
	$G‘U£rD©a
(
asPWORD
 
ty³
) const

196 
	`ACQUIRESHARED
(
’gše
->
’gšeRWLock
);

198  
asUINT
 
n
 = 0;‚ < 
u£rD©a
.
	`G‘L’gth
();‚ += 2 )

200 ifĞ
u£rD©a
[
n
] =ğ
ty³
 )

202 
	`RELEASESHARED
(
’gše
->
’gšeRWLock
);

203  
»š‹½»t_ÿ¡
<*>(
u£rD©a
[
n
+1]);

207 
	`RELEASESHARED
(
’gše
->
’gšeRWLock
);

210 
	}
}

212 
	gasCObjeùTy³
::
	$G‘RefCouÁ
()

214  
»fCouÁ
.
	`g‘
();

215 
	}
}

217 
boŞ
 
	gasCObjeùTy³
::
	$G‘GCFÏg
()

219  
gcFÏg
;

220 
	}
}

222 
	gasCObjeùTy³
::
	$S‘GCFÏg
()

224 
gcFÏg
 = 
Œue
;

225 
	}
}

227 
	gasCObjeùTy³
::~
	$asCObjeùTy³
()

230 ifĞ
‹m¶©eSubTy³
.
	`G‘ObjeùTy³
() )

231 
‹m¶©eSubTy³
.
	`G‘ObjeùTy³
()->
	`R–—£
();

233 ifĞ
d”ivedFrom
 )

234 
d”ivedFrom
->
	`R–—£
();

236 
asUINT
 
n
;

237  
n
 = 0;‚ < 
´İ”t›s
.
	`G‘L’gth
();‚++ )

238 ifĞ
´İ”t›s
[
n
] )

240 ifĞ
æags
 & 
asOBJ_SCRIPT_OBJECT
 )

243 
asCCÚfigGroup
 *
group
 = 
’gše
->
	`FšdCÚfigGroupFÜObjeùTy³
(
´İ”t›s
[
n
]->
ty³
.
	`G‘ObjeùTy³
());

244 ifĞ
group
 !ğ0 ) group->
	`R–—£
();

247 
	`asDELETE
(
´İ”t›s
[
n
],
asCObjeùPrİ”ty
);

250 
´İ”t›s
.
	`S‘L’gth
(0);

252 
	`R–—£AÎFunùiÚs
();

254  
n
 = 0;‚ < 
’umV®ues
.
	`G‘L’gth
();‚++ )

256 ifĞ
’umV®ues
[
n
] )

257 
	`asDELETE
(
’umV®ues
[
n
],
asSEnumV®ue
);

260 
’umV®ues
.
	`S‘L’gth
(0);

263  
n
 = 0;‚ < 
u£rD©a
.
	`G‘L’gth
();‚ += 2 )

265 ifĞ
u£rD©a
[
n
+1] )

267  
asUINT
 
c
 = 0; c < 
’gše
->
ş—nObjeùTy³Funcs
.
	`G‘L’gth
(); c++ )

268 ifĞ
’gše
->
ş—nObjeùTy³Funcs
[
c
].
ty³
 =ğ
u£rD©a
[
n
] )

269 
’gše
->
ş—nObjeùTy³Funcs
[
c
].
	`ş—nFunc
(
this
);

272 
	}
}

275 
boŞ
 
	gasCObjeùTy³
::
	$Im¶em’ts
(cÚ¡ 
asIObjeùTy³
 *
objTy³
) const

277 ifĞ
this
 =ğ
objTy³
 )

278  
Œue
;

280  
asUINT
 
n
 = 0;‚ < 
š‹rçûs
.
	`G‘L’gth
();‚++ )

281 ifĞ
š‹rçûs
[
n
] =ğ
objTy³
 )  
Œue
;

283  
çl£
;

284 
	}
}

287 
boŞ
 
	gasCObjeùTy³
::
	$D”ivesFrom
(cÚ¡ 
asIObjeùTy³
 *
objTy³
) const

289 ifĞ
this
 =ğ
objTy³
 )

290  
Œue
;

292 
asCObjeùTy³
 *
ba£
 = 
d”ivedFrom
;

293  
ba£
 )

295 ifĞ
ba£
 =ğ
objTy³
 )

296  
Œue
;

298 
ba£
 = ba£->
d”ivedFrom
;

301  
çl£
;

302 
	}
}

304 
boŞ
 
	gasCObjeùTy³
::
	$IsSh¬ed
() const

307 ifĞ
æags
 & (
asOBJ_SCRIPT_OBJECT
|
asOBJ_ENUM
èè fÏg & 
asOBJ_SHARED
 ? 
Œue
 : 
çl£
;

310  
Œue
;

311 
	}
}

314 cÚ¡ *
	gasCObjeùTy³
::
	$G‘Name
() const

316  
Çme
.
	`Add»ssOf
();

317 
	}
}

320 cÚ¡ *
	gasCObjeùTy³
::
	$G‘Name¥aû
() const

322  
ÇmeS·û
->
Çme
.
	`Add»ssOf
();

323 
	}
}

326 
asDWORD
 
	gasCObjeùTy³
::
	$G‘FÏgs
() const

328  
æags
;

329 
	}
}

332 
asUINT
 
	gasCObjeùTy³
::
	$G‘Size
() const

334  
size
;

335 
	}
}

338 
	gasCObjeùTy³
::
	$G‘Ty³Id
() const

343 
asCObjeùTy³
 *
Ù
 = 
cÚ¡_ÿ¡
<asCObjeùTy³*>(
this
);

345  
’gše
->
	`G‘Ty³IdFromD©aTy³
(
asCD©aTy³
::
	`C»©eObjeù
(
Ù
, 
çl£
));

346 
	}
}

349 
	gasCObjeùTy³
::
	$G‘SubTy³Id
() const

353 ifĞ
æags
 & 
asOBJ_TEMPLATE
 )

355  
’gše
->
	`G‘Ty³IdFromD©aTy³
(
‹m¶©eSubTy³
);

359  
asERROR
;

360 
	}
}

363 
asIObjeùTy³
 *
	gasCObjeùTy³
::
	$G‘SubTy³
() const

366 ifĞ
æags
 & 
asOBJ_TEMPLATE
 )

368  
‹m¶©eSubTy³
.
	`G‘ObjeùTy³
();

372 
	}
}

374 
asUINT
 
	gasCObjeùTy³
::
	$G‘IÁ”çûCouÁ
() const

376  (
asUINT
)
š‹rçûs
.
	`G‘L’gth
();

377 
	}
}

379 
asIObjeùTy³
 *
	gasCObjeùTy³
::
	$G‘IÁ”çû
(
asUINT
 
šdex
) const

381  
š‹rçûs
[
šdex
];

382 
	}
}

385 
boŞ
 
	gasCObjeùTy³
::
	$IsIÁ”çû
() const

387 ifĞ(
æags
 & 
asOBJ_SCRIPT_OBJECT
è&& 
size
 == 0 )

388  
Œue
;

390  
çl£
;

391 
	}
}

393 
asISütEngše
 *
	gasCObjeùTy³
::
	$G‘Engše
() const

395  
’gše
;

396 
	}
}

399 
asUINT
 
	gasCObjeùTy³
::
	$G‘FaùÜyCouÁ
() const

401  (
asUINT
)
beh
.
çùÜ›s
.
	`G‘L’gth
();

402 
	}
}

404 #ifdeà
AS_DEPRECATED


407 
	gasCObjeùTy³
::
	$G‘FaùÜyIdByIndex
(
asUINT
 
šdex
) const

409 ifĞ
šdex
 >ğ
beh
.
çùÜ›s
.
	`G‘L’gth
() )

410  
asINVALID_ARG
;

412  
beh
.
çùÜ›s
[
šdex
];

413 
	}
}

417 
asISütFunùiÚ
 *
	gasCObjeùTy³
::
	$G‘FaùÜyByIndex
(
asUINT
 
šdex
) const

419 ifĞ
šdex
 >ğ
beh
.
çùÜ›s
.
	`G‘L’gth
() )

422  
’gše
->
	`G‘FunùiÚById
(
beh
.
çùÜ›s
[
šdex
]);

423 
	}
}

425 #ifdeà
AS_DEPRECATED


428 
	gasCObjeùTy³
::
	$G‘FaùÜyIdByDeş
(cÚ¡ *
deş
) const

430 ifĞ
beh
.
çùÜ›s
.
	`G‘L’gth
() == 0 )

431  
asNO_FUNCTION
;

434  
’gše
->
	`G‘FaùÜyIdByDeş
(
this
, 
deş
);

435 
	}
}

439 
asISütFunùiÚ
 *
	gasCObjeùTy³
::
	$G‘FaùÜyByDeş
(cÚ¡ *
deş
) const

441 ifĞ
beh
.
çùÜ›s
.
	`G‘L’gth
() == 0 )

445  
’gše
->
	`G‘FunùiÚById
Óngše->
	`G‘FaùÜyIdByDeş
(
this
, 
deş
));

446 
	}
}

449 
asUINT
 
	gasCObjeùTy³
::
	$G‘M‘hodCouÁ
() const

451  (
asUINT
)
m‘hods
.
	`G‘L’gth
();

452 
	}
}

454 #ifdeà
AS_DEPRECATED


457 
	gasCObjeùTy³
::
	$G‘M‘hodIdByIndex
(
asUINT
 
šdex
, 
boŞ
 
g‘Vœtu®
) const

459 ifĞ
šdex
 >ğ
m‘hods
.
	`G‘L’gth
() )

460  
asINVALID_ARG
;

462 ifĞ!
g‘Vœtu®
 )

464 
asCSütFunùiÚ
 *
func
 = 
’gše
->
sütFunùiÚs
[
m‘hods
[
šdex
]];

465 ifĞ
func
 && func->
funcTy³
 =ğ
asFUNC_VIRTUAL
 )

466  
vœtu®FunùiÚTabË
[
func
->
vfTabËIdx
]->
id
;

469  
m‘hods
[
šdex
];

470 
	}
}

474 
asISütFunùiÚ
 *
	gasCObjeùTy³
::
	$G‘M‘hodByIndex
(
asUINT
 
šdex
, 
boŞ
 
g‘Vœtu®
) const

476 ifĞ
šdex
 >ğ
m‘hods
.
	`G‘L’gth
() )

479 
asCSütFunùiÚ
 *
func
 = 
’gše
->
sütFunùiÚs
[
m‘hods
[
šdex
]];

480 ifĞ!
g‘Vœtu®
 )

482 ifĞ
func
 && func->
funcTy³
 =ğ
asFUNC_VIRTUAL
 )

483  
vœtu®FunùiÚTabË
[
func
->
vfTabËIdx
];

486  
func
;

487 
	}
}

489 #ifdeà
AS_DEPRECATED


492 
	gasCObjeùTy³
::
	$G‘M‘hodIdByName
(cÚ¡ *
Çme
, 
boŞ
 
g‘Vœtu®
) const

494 
id
 = -1;

495  
size_t
 
n
 = 0;‚ < 
m‘hods
.
	`G‘L’gth
();‚++ )

497 ifĞ
’gše
->
sütFunùiÚs
[
m‘hods
[
n
]]->
Çme
 ==‚ame )

499 ifĞ
id
 == -1 )

500 
id
 = 
m‘hods
[
n
];

502  
asMULTIPLE_FUNCTIONS
;

506 ifĞ
id
 =ğ-1 )  
asNO_FUNCTION
;

508 ifĞ!
g‘Vœtu®
 )

510 
asCSütFunùiÚ
 *
func
 = 
’gše
->
sütFunùiÚs
[
id
];

511 ifĞ
func
 && func->
funcTy³
 =ğ
asFUNC_VIRTUAL
 )

512  
vœtu®FunùiÚTabË
[
func
->
vfTabËIdx
]->
id
;

515  
id
;

516 
	}
}

520 
asISütFunùiÚ
 *
	gasCObjeùTy³
::
	$G‘M‘hodByName
(cÚ¡ *
Çme
, 
boŞ
 
g‘Vœtu®
) const

522 
id
 = -1;

523  
size_t
 
n
 = 0;‚ < 
m‘hods
.
	`G‘L’gth
();‚++ )

525 ifĞ
’gše
->
sütFunùiÚs
[
m‘hods
[
n
]]->
Çme
 ==‚ame )

527 ifĞ
id
 == -1 )

528 
id
 = 
m‘hods
[
n
];

534 ifĞ
id
 == -1 )  0;

536 
asCSütFunùiÚ
 *
func
 = 
’gše
->
sütFunùiÚs
[
id
];

537 ifĞ!
g‘Vœtu®
 )

539 ifĞ
func
 && func->
funcTy³
 =ğ
asFUNC_VIRTUAL
 )

540  
vœtu®FunùiÚTabË
[
func
->
vfTabËIdx
];

543  
func
;

544 
	}
}

546 #ifdeà
AS_DEPRECATED


549 
	gasCObjeùTy³
::
	$G‘M‘hodIdByDeş
(cÚ¡ *
deş
, 
boŞ
 
g‘Vœtu®
) const

551 ifĞ
m‘hods
.
	`G‘L’gth
() == 0 )

552  
asNO_FUNCTION
;

560 
asCModuË
 *
mod
 = 
’gše
->
sütFunùiÚs
[
m‘hods
[0]]->
moduË
;

561 
id
 = 
’gše
->
	`G‘M‘hodIdByDeş
(
this
, 
deş
, 
mod
);

562 ifĞ!
g‘Vœtu®
 && 
id
 >= 0 )

564 
asCSütFunùiÚ
 *
func
 = 
’gše
->
sütFunùiÚs
[
id
];

565 ifĞ
func
 && func->
funcTy³
 =ğ
asFUNC_VIRTUAL
 )

566  
vœtu®FunùiÚTabË
[
func
->
vfTabËIdx
]->
id
;

569  
id
;

570 
	}
}

574 
asISütFunùiÚ
 *
	gasCObjeùTy³
::
	$G‘M‘hodByDeş
(cÚ¡ *
deş
, 
boŞ
 
g‘Vœtu®
) const

576 ifĞ
m‘hods
.
	`G‘L’gth
() == 0 )

585 
asCModuË
 *
mod
 = 
’gše
->
sütFunùiÚs
[
m‘hods
[0]]->
moduË
;

586 
id
 = 
’gše
->
	`G‘M‘hodIdByDeş
(
this
, 
deş
, 
mod
);

587 ifĞ
id
 <= 0 )

590 ifĞ!
g‘Vœtu®
 )

592 
asCSütFunùiÚ
 *
func
 = 
’gše
->
sütFunùiÚs
[
id
];

593 ifĞ
func
 && func->
funcTy³
 =ğ
asFUNC_VIRTUAL
 )

594  
vœtu®FunùiÚTabË
[
func
->
vfTabËIdx
];

597  
’gše
->
sütFunùiÚs
[
id
];

598 
	}
}

601 
asUINT
 
	gasCObjeùTy³
::
	$G‘Prİ”tyCouÁ
() const

603  (
asUINT
)
´İ”t›s
.
	`G‘L’gth
();

604 
	}
}

607 
	gasCObjeùTy³
::
	$G‘Prİ”ty
(
asUINT
 
šdex
, cÚ¡ **
Çme
, *
ty³Id
, 
boŞ
 *
isPriv©e
, *
off£t
, boŞ *
isReã»nû
, 
asDWORD
 *
acûssMask
) const

609 ifĞ
šdex
 >ğ
´İ”t›s
.
	`G‘L’gth
() )

610  
asINVALID_ARG
;

612 ifĞ
Çme
 )

613 *
Çme
 = 
´İ”t›s
[
šdex
]->Çme.
	`Add»ssOf
();

614 ifĞ
ty³Id
 )

615 *
ty³Id
 = 
’gše
->
	`G‘Ty³IdFromD©aTy³
(
´İ”t›s
[
šdex
]->
ty³
);

616 ifĞ
isPriv©e
 )

617 *
isPriv©e
 = 
´İ”t›s
[
šdex
]->isPrivate;

618 ifĞ
off£t
 )

619 *
off£t
 = 
´İ”t›s
[
šdex
]->
by‹Off£t
;

620 ifĞ
isReã»nû
 )

621 *
isReã»nû
 = 
´İ”t›s
[
šdex
]->
ty³
.
	`IsReã»nû
();

622 ifĞ
acûssMask
 )

623 *
acûssMask
 = 
´İ”t›s
[
šdex
]->accessMask;

626 
	}
}

629 cÚ¡ *
	gasCObjeùTy³
::
	$G‘Prİ”tyDeş¬©iÚ
(
asUINT
 
šdex
) const

631 ifĞ
šdex
 >ğ
´İ”t›s
.
	`G‘L’gth
() )

634 
asCSŒšg
 *
‹mpSŒšg
 = &
asCTh»adMªag”
::
	`G‘LoÿlD©a
()->
¡ršg
;

635 ifĞ
´İ”t›s
[
šdex
]->
isPriv©e
 )

636 *
‹mpSŒšg
 = "private ";

638 *
‹mpSŒšg
 = "";

639 *
‹mpSŒšg
 +ğ
´İ”t›s
[
šdex
]->
ty³
.
	`FÜm©
();

640 *
‹mpSŒšg
 += " ";

641 *
‹mpSŒšg
 +ğ
´İ”t›s
[
šdex
]->
Çme
;

643  
‹mpSŒšg
->
	`Add»ssOf
();

644 
	}
}

646 
asIObjeùTy³
 *
	gasCObjeùTy³
::
	$G‘Ba£Ty³
() const

648  
d”ivedFrom
;

649 
	}
}

651 
asUINT
 
	gasCObjeùTy³
::
	$G‘BehaviourCouÁ
() const

654 
asUINT
 
couÁ
 = 0;

656 ifĞ
beh
.
de¡ruù
 ) 
couÁ
++;

657 ifĞ
beh
.
add»f
 ) 
couÁ
++;

658 ifĞ
beh
.
»Ëa£
 ) 
couÁ
++;

659 ifĞ
beh
.
gcG‘RefCouÁ
 ) 
couÁ
++;

660 ifĞ
beh
.
gcS‘FÏg
 ) 
couÁ
++;

661 ifĞ
beh
.
gcG‘FÏg
 ) 
couÁ
++;

662 ifĞ
beh
.
gcEnumReã»nûs
 ) 
couÁ
++;

663 ifĞ
beh
.
gcR–—£AÎReã»nûs
 ) 
couÁ
++;

664 ifĞ
beh
.
‹m¶©eC®lback
 ) 
couÁ
++;

665 ifĞ
beh
.
li¡FaùÜy
 ) 
couÁ
++;

669 
couÁ
 +ğ(
asUINT
)
beh
.
cÚ¡ruùÜs
.
	`G‘L’gth
();

670 
couÁ
 +ğ(
asUINT
)
beh
.
İ”©Üs
.
	`G‘L’gth
() / 2;

672  
couÁ
;

673 
	}
}

675 
asISütFunùiÚ
 *
	gasCObjeùTy³
::
	$G‘BehaviourByIndex
(
asUINT
 
šdex
, 
asEBehaviours
 *
outBehaviour
) const

678 
asUINT
 
couÁ
 = 0;

680 ifĞ
beh
.
de¡ruù
 && 
couÁ
++ =ğ
šdex
 )

682 ifĞ
outBehaviour
 ) *outBehaviou¸ğ
asBEHAVE_DESTRUCT
;

683  
’gše
->
sütFunùiÚs
[
beh
.
de¡ruù
];

686 ifĞ
beh
.
add»f
 && 
couÁ
++ =ğ
šdex
 )

688 ifĞ
outBehaviour
 ) *outBehaviou¸ğ
asBEHAVE_ADDREF
;

689  
’gše
->
sütFunùiÚs
[
beh
.
add»f
];

692 ifĞ
beh
.
»Ëa£
 && 
couÁ
++ =ğ
šdex
 )

694 ifĞ
outBehaviour
 ) *outBehaviou¸ğ
asBEHAVE_RELEASE
;

695  
’gše
->
sütFunùiÚs
[
beh
.
»Ëa£
];

698 ifĞ
beh
.
gcG‘RefCouÁ
 && 
couÁ
++ =ğ
šdex
 )

700 ifĞ
outBehaviour
 ) *outBehaviou¸ğ
asBEHAVE_GETREFCOUNT
;

701  
’gše
->
sütFunùiÚs
[
beh
.
gcG‘RefCouÁ
];

704 ifĞ
beh
.
gcS‘FÏg
 && 
couÁ
++ =ğ
šdex
 )

706 ifĞ
outBehaviour
 ) *outBehaviou¸ğ
asBEHAVE_SETGCFLAG
;

707  
’gše
->
sütFunùiÚs
[
beh
.
gcS‘FÏg
];

710 ifĞ
beh
.
gcG‘FÏg
 && 
couÁ
++ =ğ
šdex
 )

712 ifĞ
outBehaviour
 ) *outBehaviou¸ğ
asBEHAVE_GETGCFLAG
;

713  
’gše
->
sütFunùiÚs
[
beh
.
gcG‘FÏg
];

716 ifĞ
beh
.
gcEnumReã»nûs
 && 
couÁ
++ =ğ
šdex
 )

718 ifĞ
outBehaviour
 ) *outBehaviou¸ğ
asBEHAVE_ENUMREFS
;

719  
’gše
->
sütFunùiÚs
[
beh
.
gcEnumReã»nûs
];

722 ifĞ
beh
.
gcR–—£AÎReã»nûs
 && 
couÁ
++ =ğ
šdex
 )

724 ifĞ
outBehaviour
 ) *outBehaviou¸ğ
asBEHAVE_RELEASEREFS
;

725  
’gše
->
sütFunùiÚs
[
beh
.
gcR–—£AÎReã»nûs
];

728 ifĞ
beh
.
‹m¶©eC®lback
 && 
couÁ
++ =ğ
šdex
 )

730 ifĞ
outBehaviour
 ) *outBehaviou¸ğ
asBEHAVE_TEMPLATE_CALLBACK
;

731  
’gše
->
sütFunùiÚs
[
beh
.
‹m¶©eC®lback
];

734 ifĞ
beh
.
li¡FaùÜy
 && 
couÁ
++ =ğ
šdex
 )

736 ifĞ
outBehaviour
 ) *outBehaviou¸ğ
asBEHAVE_LIST_FACTORY
;

737  
’gše
->
sütFunùiÚs
[
beh
.
li¡FaùÜy
];

742 ifĞ
šdex
 - 
couÁ
 < 
beh
.
cÚ¡ruùÜs
.
	`G‘L’gth
() )

744 ifĞ
outBehaviour
 ) *outBehaviou¸ğ
asBEHAVE_CONSTRUCT
;

745  
’gše
->
sütFunùiÚs
[
beh
.
cÚ¡ruùÜs
[
šdex
 - 
couÁ
]];

748 
couÁ
 +ğ(
asUINT
)
beh
.
cÚ¡ruùÜs
.
	`G‘L’gth
();

750 ifĞ
šdex
 - 
couÁ
 < 
beh
.
İ”©Üs
.
	`G‘L’gth
() / 2 )

752 
šdex
 = 2*(šdex - 
couÁ
);

754 ifĞ
outBehaviour
 ) *outBehaviou¸ğ
¡©ic_ÿ¡
<
asEBehaviours
>(
beh
.
İ”©Üs
[
šdex
]);

755  
’gše
->
sütFunùiÚs
[
beh
.
İ”©Üs
[
šdex
 + 1]];

759 
	}
}

762 cÚ¡ *
	gasCObjeùTy³
::
	$G‘CÚfigGroup
() const

764 
asCCÚfigGroup
 *
group
 = 
’gše
->
	`FšdCÚfigGroupFÜObjeùTy³
(
this
);

765 ifĞ
group
 == 0 )

768  
group
->
groupName
.
	`Add»ssOf
();

769 
	}
}

772 
asDWORD
 
	gasCObjeùTy³
::
	$G‘AcûssMask
() const

774  
acûssMask
;

775 
	}
}

778 
asCObjeùPrİ”ty
 *
	gasCObjeùTy³
::
	$AddPrİ”tyToCÏss
(cÚ¡ 
asCSŒšg
 &
Çme
, cÚ¡ 
asCD©aTy³
 &
dt
, 
boŞ
 
isPriv©e
)

780 
	`asASSERT
Ğ
dt
.
	`CªBeIn¡ªcŸ‹d
() );

781 
	`asASSERT
Ğ!
	`IsIÁ”çû
() );

784 
asCObjeùPrİ”ty
 *
´İ
 = 
	`asNEW
(asCObjectProperty);

785 ifĞ
´İ
 == 0 )

791 
´İ
->
Çme
 =‚ame;

792 
´İ
->
ty³
 = 
dt
;

793 
´İ
->
isPriv©e
 = isPrivate;

795 
´İSize
;

796 ifĞ
dt
.
	`IsObjeù
() )

798 
´İSize
 = 
dt
.
	`G‘SizeOnSckDWÜds
()*4;

799 ifĞ!
dt
.
	`IsObjeùHªdË
() )

800 
´İ
->
ty³
.
	`MakeReã»nû
(
Œue
);

803 
´İSize
 = 
dt
.
	`G‘SizeInMemÜyBy‹s
();

806 ifĞ
´İSize
 =ğ2 && (
size
 & 1) ) size += 1;

807 ifĞ
´İSize
 > 2 && (
size
 & 3) ) size += 4 - (size & 3);

809 
´İ
->
by‹Off£t
 = 
size
;

810 
size
 +ğ
´İSize
;

812 
´İ”t›s
.
	`PushLa¡
(
´İ
);

815 
asCCÚfigGroup
 *
group
 = 
’gše
->
	`FšdCÚfigGroupFÜObjeùTy³
(
´İ
->
ty³
.
	`G‘ObjeùTy³
());

816 ifĞ
group
 !ğ0 ) group->
	`AddRef
();

818  
´İ
;

819 
	}
}

822 
	gasCObjeùTy³
::
	$R–—£AÎHªdËs
(
asISütEngše
 *)

824 
	`R–—£AÎFunùiÚs
();

825 
	}
}

828 
	gasCObjeùTy³
::
	$R–—£AÎFunùiÚs
()

830 
beh
.
çùÜy
 = 0;

831 
beh
.
cİyçùÜy
 = 0;

832  
asUINT
 
a
 = 0;‡ < 
beh
.
çùÜ›s
.
	`G‘L’gth
();‡++ )

834 ifĞ
’gše
->
sütFunùiÚs
[
beh
.
çùÜ›s
[
a
]] )

835 
’gše
->
sütFunùiÚs
[
beh
.
çùÜ›s
[
a
]]->
	`R–—£
();

837 
beh
.
çùÜ›s
.
	`S‘L’gth
(0);

839 
beh
.
cÚ¡ruù
 = 0;

840 
beh
.
cİycÚ¡ruù
 = 0;

841  
asUINT
 
b
 = 0; b < 
beh
.
cÚ¡ruùÜs
.
	`G‘L’gth
(); b++ )

843 ifĞ
’gše
->
sütFunùiÚs
[
beh
.
cÚ¡ruùÜs
[
b
]] )

844 
’gše
->
sütFunùiÚs
[
beh
.
cÚ¡ruùÜs
[
b
]]->
	`R–—£
();

846 
beh
.
cÚ¡ruùÜs
.
	`S‘L’gth
(0);

848 ifĞ
beh
.
‹m¶©eC®lback
 )

849 
’gše
->
sütFunùiÚs
[
beh
.
‹m¶©eC®lback
]->
	`R–—£
();

850 
beh
.
‹m¶©eC®lback
 = 0;

852 ifĞ
beh
.
li¡FaùÜy
 )

853 
’gše
->
sütFunùiÚs
[
beh
.
li¡FaùÜy
]->
	`R–—£
();

854 
beh
.
li¡FaùÜy
 = 0;

856 ifĞ
beh
.
de¡ruù
 )

857 
’gše
->
sütFunùiÚs
[
beh
.
de¡ruù
]->
	`R–—£
();

858 
beh
.
de¡ruù
 = 0;

860 ifĞ
beh
.
cİy
 )

861 
’gše
->
sütFunùiÚs
[
beh
.
cİy
]->
	`R–—£
();

862 
beh
.
cİy
 = 0;

864  
asUINT
 
e
 = 1;ƒ < 
beh
.
İ”©Üs
.
	`G‘L’gth
();ƒ += 2 )

866 ifĞ
’gše
->
sütFunùiÚs
[
beh
.
İ”©Üs
[
e
]] )

867 
’gše
->
sütFunùiÚs
[
beh
.
İ”©Üs
[
e
]]->
	`R–—£
();

869 
beh
.
İ”©Üs
.
	`S‘L’gth
(0);

871  
asUINT
 
c
 = 0; c < 
m‘hods
.
	`G‘L’gth
(); c++ )

873 ifĞ
’gše
->
sütFunùiÚs
[
m‘hods
[
c
]] )

874 
’gše
->
sütFunùiÚs
[
m‘hods
[
c
]]->
	`R–—£
();

876 
m‘hods
.
	`S‘L’gth
(0);

878  
asUINT
 
d
 = 0; d < 
vœtu®FunùiÚTabË
.
	`G‘L’gth
(); d++ )

880 ifĞ
vœtu®FunùiÚTabË
[
d
] )

881 
vœtu®FunùiÚTabË
[
d
]->
	`R–—£
();

883 
vœtu®FunùiÚTabË
.
	`S‘L’gth
(0);

886 ifĞ
beh
.
add»f
 )

887 
’gše
->
sütFunùiÚs
[
beh
.
add»f
]->
	`R–—£
();

888 
beh
.
add»f
 = 0;

890 ifĞ
beh
.
»Ëa£
 )

891 
’gše
->
sütFunùiÚs
[
beh
.
»Ëa£
]->
	`R–—£
();

892 
beh
.
»Ëa£
 = 0;

894 ifĞ
beh
.
gcEnumReã»nûs
 )

895 
’gše
->
sütFunùiÚs
[
beh
.
gcEnumReã»nûs
]->
	`R–—£
();

896 
beh
.
gcEnumReã»nûs
 = 0;

898 ifĞ
beh
.
gcG‘FÏg
 )

899 
’gše
->
sütFunùiÚs
[
beh
.
gcG‘FÏg
]->
	`R–—£
();

900 
beh
.
gcG‘FÏg
 = 0;

902 ifĞ
beh
.
gcG‘RefCouÁ
 )

903 
’gše
->
sütFunùiÚs
[
beh
.
gcG‘RefCouÁ
]->
	`R–—£
();

904 
beh
.
gcG‘RefCouÁ
 = 0;

906 ifĞ
beh
.
gcR–—£AÎReã»nûs
 )

907 
’gše
->
sütFunùiÚs
[
beh
.
gcR–—£AÎReã»nûs
]->
	`R–—£
();

908 
beh
.
gcR–—£AÎReã»nûs
 = 0;

910 ifĞ
beh
.
gcS‘FÏg
 )

911 
’gše
->
sütFunùiÚs
[
beh
.
gcS‘FÏg
]->
	`R–—£
();

912 
beh
.
gcS‘FÏg
 = 0;

913 
	}
}

916 
	gasCObjeùTy³
::
	$EnumReã»nûs
(
asISütEngše
 *)

918  
asUINT
 
a
 = 0;‡ < 
beh
.
çùÜ›s
.
	`G‘L’gth
();‡++ )

919 ifĞ
’gše
->
sütFunùiÚs
[
beh
.
çùÜ›s
[
a
]] )

920 
’gše
->
	`GCEnumC®lback
Óngše->
sütFunùiÚs
[
beh
.
çùÜ›s
[
a
]]);

922  
asUINT
 
b
 = 0; b < 
beh
.
cÚ¡ruùÜs
.
	`G‘L’gth
(); b++ )

923 ifĞ
’gše
->
sütFunùiÚs
[
beh
.
cÚ¡ruùÜs
[
b
]] )

924 
’gše
->
	`GCEnumC®lback
Óngše->
sütFunùiÚs
[
beh
.
cÚ¡ruùÜs
[
b
]]);

926 ifĞ
beh
.
‹m¶©eC®lback
 )

927 
’gše
->
	`GCEnumC®lback
Óngše->
sütFunùiÚs
[
beh
.
‹m¶©eC®lback
]);

929 ifĞ
beh
.
li¡FaùÜy
 )

930 
’gše
->
	`GCEnumC®lback
Óngše->
sütFunùiÚs
[
beh
.
li¡FaùÜy
]);

932 ifĞ
beh
.
de¡ruù
 )

933 
’gše
->
	`GCEnumC®lback
Óngše->
sütFunùiÚs
[
beh
.
de¡ruù
]);

935 ifĞ
beh
.
add»f
 )

936 
’gše
->
	`GCEnumC®lback
Óngše->
sütFunùiÚs
[
beh
.
add»f
]);

938 ifĞ
beh
.
»Ëa£
 )

939 
’gše
->
	`GCEnumC®lback
Óngše->
sütFunùiÚs
[
beh
.
»Ëa£
]);

941 ifĞ
beh
.
cİy
 )

942 
’gše
->
	`GCEnumC®lback
Óngše->
sütFunùiÚs
[
beh
.
cİy
]);

944 ifĞ
beh
.
gcEnumReã»nûs
 )

945 
’gše
->
	`GCEnumC®lback
Óngše->
sütFunùiÚs
[
beh
.
gcEnumReã»nûs
]);

947 ifĞ
beh
.
gcG‘FÏg
 )

948 
’gše
->
	`GCEnumC®lback
Óngše->
sütFunùiÚs
[
beh
.
gcG‘FÏg
]);

950 ifĞ
beh
.
gcG‘RefCouÁ
 )

951 
’gše
->
	`GCEnumC®lback
Óngše->
sütFunùiÚs
[
beh
.
gcG‘RefCouÁ
]);

953 ifĞ
beh
.
gcR–—£AÎReã»nûs
 )

954 
’gše
->
	`GCEnumC®lback
Óngše->
sütFunùiÚs
[
beh
.
gcR–—£AÎReã»nûs
]);

956 ifĞ
beh
.
gcS‘FÏg
 )

957 
’gše
->
	`GCEnumC®lback
Óngše->
sütFunùiÚs
[
beh
.
gcS‘FÏg
]);

959  
asUINT
 
e
 = 1;ƒ < 
beh
.
İ”©Üs
.
	`G‘L’gth
();ƒ += 2 )

960 ifĞ
’gše
->
sütFunùiÚs
[
beh
.
İ”©Üs
[
e
]] )

961 
’gše
->
	`GCEnumC®lback
Óngše->
sütFunùiÚs
[
beh
.
İ”©Üs
[
e
]]);

963  
asUINT
 
c
 = 0; c < 
m‘hods
.
	`G‘L’gth
(); c++ )

964 ifĞ
’gše
->
sütFunùiÚs
[
m‘hods
[
c
]] )

965 
’gše
->
	`GCEnumC®lback
Óngše->
sütFunùiÚs
[
m‘hods
[
c
]]);

967  
asUINT
 
d
 = 0; d < 
vœtu®FunùiÚTabË
.
	`G‘L’gth
(); d++ )

968 ifĞ
vœtu®FunùiÚTabË
[
d
] )

969 
’gše
->
	`GCEnumC®lback
(
vœtu®FunùiÚTabË
[
d
]);

970 
	}
}

972 
	gEND_AS_NAMESPACE


	@../src/script/as_outputbuffer.cpp

39 
	~"as_cÚfig.h
"

41 #iâdeà
AS_NO_COMPILER


43 
	~"as_ouutbufãr.h
"

44 
	~"as_sü‹ngše.h
"

46 
BEGIN_AS_NAMESPACE


48 
	gasCOuutBufãr
::~
	$asCOuutBufãr
()

50 
	`CË¬
();

51 
	}
}

53 
	gasCOuutBufãr
::
	$CË¬
()

55  
asUINT
 
n
 = 0;‚ < 
mes§ges
.
	`G‘L’gth
();‚++ )

57 ifĞ
mes§ges
[
n
] )

59 
	`asDELETE
(
mes§ges
[
n
],
mes§ge_t
);

62 
mes§ges
.
	`S‘L’gth
(0);

63 
	}
}

65 
	gasCOuutBufãr
::
	$C®lback
(
asSMes§geInfo
 *
msg
)

67 
mes§ge_t
 *
msgInfo
 = 
	`asNEW
(message_t);

68 ifĞ
msgInfo
 == 0 )

71 
msgInfo
->
£ùiÚ
 = 
msg
->section;

72 
msgInfo
->
row
 = 
msg
->row;

73 
msgInfo
->
cŞ
 = 
msg
->col;

74 
msgInfo
->
ty³
 = 
msg
->type;

75 
msgInfo
->
msg
 = msg->
mes§ge
;

77 
mes§ges
.
	`PushLa¡
(
msgInfo
);

78 
	}
}

80 
	gasCOuutBufãr
::
	$Aµ’d
(
asCOuutBufãr
 &
š
)

82  
asUINT
 
n
 = 0;‚ < 
š
.
mes§ges
.
	`G‘L’gth
();‚++ )

83 
mes§ges
.
	`PushLa¡
(
š
.mes§ges[
n
]);

84 
š
.
mes§ges
.
	`S‘L’gth
(0);

85 
	}
}

87 
	gasCOuutBufãr
::
	$S’dToC®lback
(
asCSütEngše
 *
’gše
, 
asSSy¡emFunùiÚIÁ”çû
 *
func
, *
obj
)

89  
asUINT
 
n
 = 0;‚ < 
mes§ges
.
	`G‘L’gth
();‚++ )

91 
asSMes§geInfo
 
msg
;

92 
msg
.
£ùiÚ
 = 
mes§ges
[
n
]->£ùiÚ.
	`Add»ssOf
();

93 
msg
.
row
 = 
mes§ges
[
n
]->row;

94 
msg
.
cŞ
 = 
mes§ges
[
n
]->col;

95 
msg
.
ty³
 = 
mes§ges
[
n
]->type;

96 
msg
.
mes§ge
 = 
mes§ges
[
n
]->msg.
	`Add»ssOf
();

98 ifĞ
func
->
ÿÎCÚv
 < 
ICC_THISCALL
 )

99 
’gše
->
	`C®lGlob®FunùiÚ
(&
msg
, 
obj
, 
func
, 0);

101 
’gše
->
	`C®lObjeùM‘hod
(
obj
, &
msg
, 
func
, 0);

103 
	`CË¬
();

104 
	}
}

106 
	gEND_AS_NAMESPACE


	@../src/script/as_parser.cpp

40 
	~"as_cÚfig.h
"

41 
	~"as_·r£r.h
"

42 
	~"as_tok’def.h
"

43 
	~"as_‹xts.h
"

45 #ifdeà
_MSC_VER


46 #´agm¨
w¬nšg
(
di§bË
:4702)

49 
BEGIN_AS_NAMESPACE


51 
	gasCP¬£r
::
	$asCP¬£r
(
asCBud”
 *
bud”
)

53 
this
->
bud”
 = builder;

54 
this
->
’gše
 = 
bud”
->engine;

56 
süt
 = 0;

57 
sütNode
 = 0;

58 
checkV®idTy³s
 = 
çl£
;

59 
isP¬sšgAµIÁ”çû
 = 
çl£
;

60 
	}
}

62 
	gasCP¬£r
::~
	$asCP¬£r
()

64 
	`Re£t
();

65 
	}
}

67 
	gasCP¬£r
::
	$Re£t
()

69 
”rÜWheP¬sšg
 = 
çl£
;

70 
isSyÁaxE¼Ü
 = 
çl£
;

71 
checkV®idTy³s
 = 
çl£
;

72 
isP¬sšgAµIÁ”çû
 = 
çl£
;

74 
sourûPos
 = 0;

76 ifĞ
sütNode
 )

78 
sütNode
->
	`De¡roy
(
’gše
);

81 
sütNode
 = 0;

83 
süt
 = 0;

84 
	}
}

86 
asCSütNode
 *
	gasCP¬£r
::
	$G‘SütNode
()

88  
sütNode
;

89 
	}
}

91 
	gasCP¬£r
::
	$P¬£FunùiÚDefš™iÚ
(
asCSütCode
 *
süt
)

93 
	`Re£t
();

96 
isP¬sšgAµIÁ”çû
 = 
Œue
;

98 
this
->
süt
 = script;

100 
sütNode
 = 
	`P¬£FunùiÚDefš™iÚ
();

103 ifĞ!
isSyÁaxE¼Ü
 )

105 
sTok’
 
t
;

106 
	`G‘Tok’
(&
t
);

107 ifĞ
t
.
ty³
 !ğ
‰End
 )

109 
	`E¼Ü
(
	`Ex³ùedTok’
(
asCTok’iz”
::
	`G‘Defš™iÚ
(
‰End
)).
	`Add»ssOf
(), &
t
);

114 ifĞ
”rÜWheP¬sšg
 )

118 
	}
}

120 
asCSütNode
 *
	gasCP¬£r
::
	$C»©eNode
(
eSütNode
 
ty³
)

122 *
±r
 = 
’gše
->
memÜyMgr
.
	`AÎocSütNode
();

123 ifĞ
±r
 == 0 )

126 
”rÜWheP¬sšg
 = 
Œue
;

130  
	`Ãw
(
±r
è
	`asCSütNode
(
ty³
);

131 
	}
}

133 
	gasCP¬£r
::
	$P¬£D©aTy³
(
asCSütCode
 *
süt
, 
boŞ
 
isR‘uºTy³
)

135 
	`Re£t
();

137 
this
->
süt
 = script;

139 
sütNode
 = 
	`C»©eNode
(
¢D©aTy³
);

140 ifĞ
sütNode
 == 0 )  -1;

142 
sütNode
->
	`AddChdLa¡
(
	`P¬£Ty³
(
Œue
));

143 ifĞ
isSyÁaxE¼Ü
 )  -1;

145 ifĞ
isR‘uºTy³
 )

147 
sütNode
->
	`AddChdLa¡
(
	`P¬£Ty³Mod
(
çl£
));

148 ifĞ
isSyÁaxE¼Ü
 )  -1;

152 
sTok’
 
t
;

153 
	`G‘Tok’
(&
t
);

154 ifĞ
t
.
ty³
 !ğ
‰End
 )

156 
	`E¼Ü
(
	`Ex³ùedTok’
(
asCTok’iz”
::
	`G‘Defš™iÚ
(
‰End
)).
	`Add»ssOf
(), &
t
);

160 ifĞ
”rÜWheP¬sšg
 )

164 
	}
}

168 
	gasCP¬£r
::
	$P¬£Tem¶©eDeş
(
asCSütCode
 *
süt
)

170 
	`Re£t
();

172 
this
->
süt
 = script;

173 
sütNode
 = 
	`C»©eNode
(
¢Undefšed
);

174 ifĞ
sütNode
 == 0 )  -1;

176 
sütNode
->
	`AddChdLa¡
(
	`P¬£Id’tif›r
());

177 ifĞ
isSyÁaxE¼Ü
 )  -1;

179 
sTok’
 
t
;

180 
	`G‘Tok’
(&
t
);

181 ifĞ
t
.
ty³
 !ğ
‰LessThª
 )

183 
	`E¼Ü
(
	`Ex³ùedTok’
(
asCTok’iz”
::
	`G‘Defš™iÚ
(
‰LessThª
)).
	`Add»ssOf
(), &
t
);

188 
	`G‘Tok’
(&
t
);

189 ifĞ
t
.
ty³
 !ğ
‰CÏss
 )

190 
	`RewšdTo
(&
t
);

192 
sütNode
->
	`AddChdLa¡
(
	`P¬£Id’tif›r
());

193 ifĞ
isSyÁaxE¼Ü
 )  -1;

195 
	`G‘Tok’
(&
t
);

196 ifĞ
t
.
ty³
 !ğ
‰G»©”Thª
 )

198 
	`E¼Ü
(
	`Ex³ùedTok’
(
asCTok’iz”
::
	`G‘Defš™iÚ
(
‰G»©”Thª
)).
	`Add»ssOf
(), &
t
);

202 
	`G‘Tok’
(&
t
);

203 ifĞ
t
.
ty³
 !ğ
‰End
 )

205 
	`E¼Ü
(
	`Ex³ùedTok’
(
asCTok’iz”
::
	`G‘Defš™iÚ
(
‰End
)).
	`Add»ssOf
(), &
t
);

209 ifĞ
”rÜWheP¬sšg
 )

213 
	}
}

215 
	gasCP¬£r
::
	$P¬£Prİ”tyDeş¬©iÚ
(
asCSütCode
 *
süt
)

217 
	`Re£t
();

219 
this
->
süt
 = script;

221 
sütNode
 = 
	`C»©eNode
(
¢Deş¬©iÚ
);

222 ifĞ
sütNode
 == 0 )  -1;

224 
sütNode
->
	`AddChdLa¡
(
	`P¬£Ty³
(
Œue
));

225 ifĞ
isSyÁaxE¼Ü
 )  -1;

229 
	`P¬£O±iÚ®Scİe
(
sütNode
);

231 
sütNode
->
	`AddChdLa¡
(
	`P¬£Id’tif›r
());

232 ifĞ
isSyÁaxE¼Ü
 )  -1;

235 
sTok’
 
t
;

236 
	`G‘Tok’
(&
t
);

237 ifĞ
t
.
ty³
 !ğ
‰End
 )

239 
	`E¼Ü
(
	`Ex³ùedTok’
(
asCTok’iz”
::
	`G‘Defš™iÚ
(
‰End
)).
	`Add»ssOf
(), &
t
);

244 
	}
}

246 
	gasCP¬£r
::
	$P¬£O±iÚ®Scİe
(
asCSütNode
 *
node
)

248 
sTok’
 
t1
, 
t2
;

249 
	`G‘Tok’
(&
t1
);

250 
	`G‘Tok’
(&
t2
);

251 ifĞ
t1
.
ty³
 =ğ
‰Scİe
 )

253 
	`RewšdTo
(&
t1
);

254 
node
->
	`AddChdLa¡
(
	`P¬£Tok’
(
‰Scİe
));

255 
	`G‘Tok’
(&
t1
);

256 
	`G‘Tok’
(&
t2
);

258  
t1
.
ty³
 =ğ
‰Id’tif›r
 && 
t2
.ty³ =ğ
‰Scİe
 )

260 
	`RewšdTo
(&
t1
);

261 
node
->
	`AddChdLa¡
(
	`P¬£Id’tif›r
());

262 
node
->
	`AddChdLa¡
(
	`P¬£Tok’
(
‰Scİe
));

263 
	`G‘Tok’
(&
t1
);

264 
	`G‘Tok’
(&
t2
);

266 
	`RewšdTo
(&
t1
);

267 
	}
}

269 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£FunùiÚDefš™iÚ
()

271 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢FunùiÚ
);

272 ifĞ
node
 == 0 )  0;

274 
node
->
	`AddChdLa¡
(
	`P¬£Ty³
(
Œue
));

275 ifĞ
isSyÁaxE¼Ü
 )  
node
;

277 
node
->
	`AddChdLa¡
(
	`P¬£Ty³Mod
(
çl£
));

278 ifĞ
isSyÁaxE¼Ü
 )  
node
;

280 
	`P¬£O±iÚ®Scİe
(
node
);

282 
node
->
	`AddChdLa¡
(
	`P¬£Id’tif›r
());

283 ifĞ
isSyÁaxE¼Ü
 )  
node
;

285 
node
->
	`AddChdLa¡
(
	`P¬£P¬am‘”Li¡
());

286 ifĞ
isSyÁaxE¼Ü
 )  
node
;

289 
sTok’
 
t1
;

290 
	`G‘Tok’
(&
t1
);

291 
	`RewšdTo
(&
t1
);

292 ifĞ
t1
.
ty³
 =ğ
‰CÚ¡
 )

293 
node
->
	`AddChdLa¡
(
	`P¬£Tok’
(
‰CÚ¡
));

295  
node
;

296 
	}
}

298 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£Ty³Mod
(
boŞ
 
isP¬am
)

300 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢D©aTy³
);

301 ifĞ
node
 == 0 )  0;

303 
sTok’
 
t
;

306 
	`G‘Tok’
(&
t
);

307 
	`RewšdTo
(&
t
);

308 ifĞ
t
.
ty³
 =ğ
‰Amp
 )

310 
node
->
	`AddChdLa¡
(
	`P¬£Tok’
(
‰Amp
));

311 ifĞ
isSyÁaxE¼Ü
 )  
node
;

313 ifĞ
isP¬am
 )

315 
	`G‘Tok’
(&
t
);

316 
	`RewšdTo
(&
t
);

318 ifĞ
t
.
ty³
 =ğ
‰In
 ||.ty³ =ğ
‰Out
 ||.ty³ =ğ
‰InOut
 )

320 
tok’s
[3] = {
‰In
, 
‰Out
, 
‰InOut
};

321 
node
->
	`AddChdLa¡
(
	`P¬£OÃOf
(
tok’s
, 3));

327 
	`G‘Tok’
(&
t
);

328 
	`RewšdTo
(&
t
);

329 ifĞ
t
.
ty³
 =ğ
‰Plus
 )

331 
node
->
	`AddChdLa¡
(
	`P¬£Tok’
(
‰Plus
));

332 ifĞ
isSyÁaxE¼Ü
 )  
node
;

335  
node
;

336 
	}
}

338 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£Ty³
(
boŞ
 
®lowCÚ¡
, boŞ 
®lowV¬ŸbËTy³
)

340 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢D©aTy³
);

341 ifĞ
node
 == 0 )  0;

343 
sTok’
 
t
;

345 ifĞ
®lowCÚ¡
 )

347 
	`G‘Tok’
(&
t
);

348 
	`RewšdTo
(&
t
);

349 ifĞ
t
.
ty³
 =ğ
‰CÚ¡
 )

351 
node
->
	`AddChdLa¡
(
	`P¬£Tok’
(
‰CÚ¡
));

352 ifĞ
isSyÁaxE¼Ü
 )  
node
;

357 
	`P¬£O±iÚ®Scİe
(
node
);

360 
node
->
	`AddChdLa¡
(
	`P¬£D©aTy³
(
®lowV¬ŸbËTy³
));

363 
asCSütNode
 *
ty³
 = 
node
->
Ï¡Chd
;

364 
asCSŒšg
 
ty³Name
;

365 
ty³Name
.
	`Assign
(&
süt
->
code
[
ty³
->
tok’Pos
],y³->
tok’L’gth
);

366 ifĞ
’gše
->
	`IsTem¶©eTy³
(
ty³Name
.
	`Add»ssOf
()) )

368 
	`G‘Tok’
(&
t
);

369 ifĞ
t
.
ty³
 !ğ
‰LessThª
 )

371 
	`E¼Ü
(
	`Ex³ùedTok’
(
asCTok’iz”
::
	`G‘Defš™iÚ
(
‰LessThª
)).
	`Add»ssOf
(), &
t
);

372  
node
;

375 
node
->
	`AddChdLa¡
(
	`P¬£Ty³
(
Œue
, 
çl£
));

376 ifĞ
isSyÁaxE¼Ü
 )  
node
;

380 
	`G‘Tok’
(&
t
);

381 ifĞ
süt
->
code
[
t
.
pos
] != '>' )

383 
	`E¼Ü
(
	`Ex³ùedTok’
(
asCTok’iz”
::
	`G‘Defš™iÚ
(
‰G»©”Thª
)).
	`Add»ssOf
(), &
t
);

384  
node
;

389 
sTok’
 
t2
 = 
t
;

390 
t2
.
pos
 = 
t
.pos + 1;

391 
	`RewšdTo
(&
t2
);

396 
	`G‘Tok’
(&
t
);

397 
	`RewšdTo
(&
t
);

398  
t
.
ty³
 =ğ
‰O³nB¿ck‘
 ||.ty³ =ğ
‰HªdË
)

400 ifĞ
t
.
ty³
 =ğ
‰O³nB¿ck‘
 )

402 
node
->
	`AddChdLa¡
(
	`P¬£Tok’
(
‰O³nB¿ck‘
));

403 ifĞ
isSyÁaxE¼Ü
 )  
node
;

405 
	`G‘Tok’
(&
t
);

406 ifĞ
t
.
ty³
 !ğ
‰Clo£B¿ck‘
 )

408 
	`E¼Ü
(
	`Ex³ùedTok’
("]").
	`Add»ssOf
(), &
t
);

409  
node
;

414 
node
->
	`AddChdLa¡
(
	`P¬£Tok’
(
‰HªdË
));

415 ifĞ
isSyÁaxE¼Ü
 )  
node
;

418 
	`G‘Tok’
(&
t
);

419 
	`RewšdTo
(&
t
);

422  
node
;

423 
	}
}

425 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£Tok’
(
tok’
)

427 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢Undefšed
);

428 ifĞ
node
 == 0 )  0;

430 
sTok’
 
t1
;

432 
	`G‘Tok’
(&
t1
);

433 ifĞ
t1
.
ty³
 !ğ
tok’
 )

435 
	`E¼Ü
(
	`Ex³ùedTok’
(
asCTok’iz”
::
	`G‘Defš™iÚ
(
tok’
)).
	`Add»ssOf
(), &
t1
);

436  
node
;

439 
node
->
	`S‘Tok’
(&
t1
);

440 
node
->
	`Upd©eSourûPos
(
t1
.
pos
,1.
Ëngth
);

442  
node
;

443 
	}
}

445 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£OÃOf
(*
tok’s
, 
couÁ
)

447 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢Undefšed
);

448 ifĞ
node
 == 0 )  0;

450 
sTok’
 
t1
;

452 
	`G‘Tok’
(&
t1
);

453 
n
;

454  
n
 = 0;‚ < 
couÁ
;‚++ )

456 ifĞ
tok’s
[
n
] =ğ
t1
.
ty³
 )

459 ifĞ
n
 =ğ
couÁ
 )

461 
	`E¼Ü
(
	`Ex³ùedOÃOf
(
tok’s
, 
couÁ
).
	`Add»ssOf
(), &
t1
);

462  
node
;

465 
node
->
	`S‘Tok’
(&
t1
);

466 
node
->
	`Upd©eSourûPos
(
t1
.
pos
,1.
Ëngth
);

468  
node
;

469 
	}
}

472 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£D©aTy³
(
boŞ
 
®lowV¬ŸbËTy³
)

474 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢D©aTy³
);

475 ifĞ
node
 == 0 )  0;

477 
sTok’
 
t1
;

479 
	`G‘Tok’
(&
t1
);

480 ifĞ!
	`IsD©aTy³
(
t1
è&& !(
®lowV¬ŸbËTy³
 &&1.
ty³
 =ğ
‰Que¡iÚ
) )

482 ifĞ
t1
.
ty³
 =ğ
‰Id’tif›r
 )

484 
asCSŒšg
 
”rMsg
, 
Id’tif›r
;

485 
Id’tif›r
.
	`Assign
(&
süt
->
code
[
t1
.
pos
],1.
Ëngth
);

486 
”rMsg
.
	`FÜm©
(
TXT_IDENTIFIER_s_NOT_DATA_TYPE
, 
Id’tif›r
.
	`Add»ssOf
());

487 
	`E¼Ü
(
”rMsg
.
	`Add»ssOf
(), &
t1
);

490 
	`E¼Ü
(
TXT_EXPECTED_DATA_TYPE
, &
t1
);

491  
node
;

494 
node
->
	`S‘Tok’
(&
t1
);

495 
node
->
	`Upd©eSourûPos
(
t1
.
pos
,1.
Ëngth
);

497  
node
;

498 
	}
}

500 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£R—lTy³
()

502 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢D©aTy³
);

503 ifĞ
node
 == 0 )  0;

505 
sTok’
 
t1
;

507 
	`G‘Tok’
(&
t1
);

508 ifĞ!
	`IsR—lTy³
(
t1
.
ty³
) )

510 
	`E¼Ü
(
TXT_EXPECTED_DATA_TYPE
, &
t1
);

511  
node
;

514 
node
->
	`S‘Tok’
(&
t1
);

515 
node
->
	`Upd©eSourûPos
(
t1
.
pos
,1.
Ëngth
);

517  
node
;

518 
	}
}

520 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£Id’tif›r
()

522 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢Id’tif›r
);

523 ifĞ
node
 == 0 )  0;

525 
sTok’
 
t1
;

527 
	`G‘Tok’
(&
t1
);

528 ifĞ
t1
.
ty³
 !ğ
‰Id’tif›r
 )

530 
	`E¼Ü
(
TXT_EXPECTED_IDENTIFIER
, &
t1
);

531  
node
;

534 
node
->
	`S‘Tok’
(&
t1
);

535 
node
->
	`Upd©eSourûPos
(
t1
.
pos
,1.
Ëngth
);

537  
node
;

538 
	}
}

540 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£P¬am‘”Li¡
()

542 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢P¬am‘”Li¡
);

543 ifĞ
node
 == 0 )  0;

545 
sTok’
 
t1
;

546 
	`G‘Tok’
(&
t1
);

547 ifĞ
t1
.
ty³
 !ğ
‰O³nP¬ªthesis
 )

549 
	`E¼Ü
(
	`Ex³ùedTok’
("(").
	`Add»ssOf
(), &
t1
);

550  
node
;

553 
node
->
	`Upd©eSourûPos
(
t1
.
pos
,1.
Ëngth
);

555 
	`G‘Tok’
(&
t1
);

556 ifĞ
t1
.
ty³
 =ğ
‰Clo£P¬ªthesis
 )

558 
node
->
	`Upd©eSourûPos
(
t1
.
pos
,1.
Ëngth
);

561  
node
;

566 ifĞ
t1
.
ty³
 =ğ
‰Void
 )

568 
sTok’
 
t2
;

569 
	`G‘Tok’
(&
t2
);

570 ifĞ
t2
.
ty³
 =ğ
‰Clo£P¬ªthesis
 )

572 
node
->
	`Upd©eSourûPos
(
t2
.
pos
,2.
Ëngth
);

573  
node
;

577 
	`RewšdTo
(&
t1
);

582 
node
->
	`AddChdLa¡
(
	`P¬£Ty³
(
Œue
, 
isP¬sšgAµIÁ”çû
));

583 ifĞ
isSyÁaxE¼Ü
 )  
node
;

585 
node
->
	`AddChdLa¡
(
	`P¬£Ty³Mod
(
Œue
));

586 ifĞ
isSyÁaxE¼Ü
 )  
node
;

589 
	`G‘Tok’
(&
t1
);

590 ifĞ
t1
.
ty³
 =ğ
‰Id’tif›r
 )

592 
	`RewšdTo
(&
t1
);

594 
node
->
	`AddChdLa¡
(
	`P¬£Id’tif›r
());

595 ifĞ
isSyÁaxE¼Ü
 )  
node
;

597 
	`G‘Tok’
(&
t1
);

600 ifĞ
t1
.
ty³
 =ğ
‰Assignm’t
 )

604 
node
->
	`AddChdLa¡
(
	`Su³rficŸÎyP¬£Ex´essiÚ
());

605 ifĞ
isSyÁaxE¼Ü
 )  
node
;

607 
	`G‘Tok’
(&
t1
);

612 ifĞ
t1
.
ty³
 =ğ
‰Clo£P¬ªthesis
 )

614 
node
->
	`Upd©eSourûPos
(
t1
.
pos
,1.
Ëngth
);

616  
node
;

618 ifĞ
t1
.
ty³
 =ğ
‰Li¡S•¬©Ü
 )

622 
	`E¼Ü
(
	`Ex³ùedTok’s
(")", ",").
	`Add»ssOf
(), &
t1
);

623  
node
;

627 
UNREACHABLE_RETURN
;

628 
	}
}

630 
asCSütNode
 *
	gasCP¬£r
::
	$Su³rficŸÎyP¬£Ex´essiÚ
()

632 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢Ex´essiÚ
);

633 ifĞ
node
 == 0 )  0;

638 
asCSŒšg
 
¡ack
;

639 
sTok’
 
t
;

642 
	`G‘Tok’
(&
t
);

644 ifĞ
t
.
ty³
 =ğ
‰O³nP¬ªthesis
 )

645 
¡ack
 += "(";

646 ifĞ
t
.
ty³
 =ğ
‰Clo£P¬ªthesis
 )

648 ifĞ
¡ack
 == "" )

651 
	`RewšdTo
(&
t
);

654 ifĞ
¡ack
[¡ack.
	`G‘L’gth
()-1] == '(' )

657 
¡ack
.
	`S‘L’gth
(¡ack.
	`G‘L’gth
()-1);

662 
	`RewšdTo
(&
t
);

663 
asCSŒšg
 
¡r
;

664 
¡r
.
	`FÜm©
(
TXT_UNEXPECTED_TOKEN_s
, ")");

665 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), &
t
);

666  
node
;

669 ifĞ
t
.
ty³
 =ğ
‰Li¡S•¬©Ü
 )

671 ifĞ
¡ack
 == "" )

674 
	`RewšdTo
(&
t
);

678 ifĞ
t
.
ty³
 =ğ
‰S¹S‹m’tBlock
 )

679 
¡ack
 += "{";

680 ifĞ
t
.
ty³
 =ğ
‰EndS‹m’tBlock
 )

682 ifĞ
¡ack
 =ğ"" || sck[¡ack.
	`G‘L’gth
()-1] != '{' )

685 
	`RewšdTo
(&
t
);

686 
asCSŒšg
 
¡r
;

687 
¡r
.
	`FÜm©
(
TXT_UNEXPECTED_TOKEN_s
, "}");

688 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), &
t
);

689  
node
;

694 
¡ack
.
	`S‘L’gth
(¡ack.
	`G‘L’gth
()-1);

697 ifĞ
t
.
ty³
 =ğ
‰EndS‹m’t
 )

700 
	`RewšdTo
(&
t
);

701 
asCSŒšg
 
¡r
;

702 
¡r
.
	`FÜm©
(
TXT_UNEXPECTED_TOKEN_s
, ";");

703 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), &
t
);

704  
node
;

706 ifĞ
t
.
ty³
 =ğ
‰End
 )

709 
	`RewšdTo
(&
t
);

710 
	`E¼Ü
(
TXT_UNEXPECTED_END_OF_FILE
, &
t
);

711  
node
;

715 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

718  
node
;

719 
	}
}

721 
	gasCP¬£r
::
	$G‘Tok’
(
sTok’
 *
tok’
)

723 
size_t
 
sourûL’gth
 = 
süt
->
codeL’gth
;

727 ifĞ
sourûPos
 >ğ
sourûL’gth
 )

729 
tok’
->
ty³
 = 
‰End
;

730 
tok’
->
Ëngth
 = 0;

733 
tok’
->
ty³
 = 
’gše
->
tok
.
	`G‘Tok’
(&
süt
->
code
[
sourûPos
], 
sourûL’gth
 - sourûPos, &tok’->
Ëngth
);

735 
tok’
->
pos
 = 
sourûPos
;

738 
sourûPos
 +ğ
tok’
->
Ëngth
;

741  
tok’
->
ty³
 =ğ
‰Wh™eS·û
 ||

742 
tok’
->
ty³
 =ğ
‰OÃlšeComm’t
 ||

743 
tok’
->
ty³
 =ğ
‰MuÉšeComm’t
 );

744 
	}
}

746 
	gasCP¬£r
::
	$RewšdTo
(cÚ¡ 
sTok’
 *
tok’
)

748 
sourûPos
 = 
tok’
->
pos
;

749 
	}
}

751 
	gasCP¬£r
::
	$E¼Ü
(cÚ¡ *
‹xt
, 
sTok’
 *
tok’
)

753 
	`RewšdTo
(
tok’
);

755 
isSyÁaxE¼Ü
 = 
Œue
;

756 
”rÜWheP¬sšg
 = 
Œue
;

758 
row
, 
cŞ
;

759 
süt
->
	`CÚv”tPosToRowCŞ
(
tok’
->
pos
, &
row
, &
cŞ
);

761 ifĞ
bud”
 )

762 
bud”
->
	`Wr™eE¼Ü
(
süt
->
Çme
.
	`Add»ssOf
(), 
‹xt
, 
row
, 
cŞ
);

763 
	}
}

765 
boŞ
 
	gasCP¬£r
::
	$IsR—lTy³
(
tok’Ty³
)

767 ifĞ
tok’Ty³
 =ğ
‰Void
 ||

768 
tok’Ty³
 =ğ
‰IÁ
 ||

769 
tok’Ty³
 =ğ
‰IÁ8
 ||

770 
tok’Ty³
 =ğ
‰IÁ16
 ||

771 
tok’Ty³
 =ğ
‰IÁ64
 ||

772 
tok’Ty³
 =ğ
‰UIÁ
 ||

773 
tok’Ty³
 =ğ
‰UIÁ8
 ||

774 
tok’Ty³
 =ğ
‰UIÁ16
 ||

775 
tok’Ty³
 =ğ
‰UIÁ64
 ||

776 
tok’Ty³
 =ğ
‰Flßt
 ||

777 
tok’Ty³
 =ğ
‰BoŞ
 ||

778 
tok’Ty³
 =ğ
‰DoubË
 )

779  
Œue
;

781  
çl£
;

782 
	}
}

784 
boŞ
 
	gasCP¬£r
::
	$IsD©aTy³
(cÚ¡ 
sTok’
 &
tok’
)

786 ifĞ
tok’
.
ty³
 =ğ
‰Id’tif›r
 )

788 ifĞ
checkV®idTy³s
 )

791 
asCSŒšg
 
¡r
;

792 
¡r
.
	`Assign
(&
süt
->
code
[
tok’
.
pos
],ok’.
Ëngth
);

793 ifĞ!
bud”
->
	`DÛsTy³Exi¡
(
¡r
.
	`Add»ssOf
()) )

794  
çl£
;

796  
Œue
;

799 ifĞ
	`IsR—lTy³
(
tok’
.
ty³
) )

800  
Œue
;

802  
çl£
;

803 
	}
}

805 
asCSŒšg
 
	gasCP¬£r
::
	$Ex³ùedTok’
(cÚ¡ *
tok’
)

807 
asCSŒšg
 
¡r
;

809 
¡r
.
	`FÜm©
(
TXT_EXPECTED_s
, 
tok’
);

811  
¡r
;

812 
	}
}

814 
asCSŒšg
 
	gasCP¬£r
::
	$Ex³ùedTok’s
(cÚ¡ *
t1
, cÚ¡ *
t2
)

816 
asCSŒšg
 
¡r
;

818 
¡r
.
	`FÜm©
(
TXT_EXPECTED_s_OR_s
, 
t1
, 
t2
);

820  
¡r
;

821 
	}
}

823 
asCSŒšg
 
	gasCP¬£r
::
	$Ex³ùedOÃOf
(*
tok’s
, 
couÁ
)

825 
asCSŒšg
 
¡r
;

827 
¡r
 = 
TXT_EXPECTED_ONE_OF
;

828  
n
 = 0;‚ < 
couÁ
;‚++ )

830 
¡r
 +ğ
asCTok’iz”
::
	`G‘Defš™iÚ
(
tok’s
[
n
]);

831 ifĞ
n
 < 
couÁ
-1 )

832 
¡r
 += ", ";

835  
¡r
;

836 
	}
}

838 
asCSŒšg
 
	gasCP¬£r
::
	$Ex³ùedOÃOf
(cÚ¡ **
tok’s
, 
couÁ
)

840 
asCSŒšg
 
¡r
;

842 
¡r
 = 
TXT_EXPECTED_ONE_OF
;

843  
n
 = 0;‚ < 
couÁ
;‚++ )

845 
¡r
 +ğ
tok’s
[
n
];

846 ifĞ
n
 < 
couÁ
-1 )

847 
¡r
 += ", ";

850  
¡r
;

851 
	}
}

853 #iâdeà
AS_NO_COMPILER


854 
boŞ
 
	gasCP¬£r
::
	$Id’tif›rIs
(cÚ¡ 
sTok’
 &
t
, cÚ¡ *
¡r
)

856 ifĞ
t
.
ty³
 !ğ
‰Id’tif›r
 )

857  
çl£
;

859  
süt
->
	`Tok’Equ®s
(
t
.
pos
,.
Ëngth
, 
¡r
);

860 
	}
}

862 
boŞ
 
	gasCP¬£r
::
	$CheckTem¶©eTy³
(
sTok’
 &
t
)

865 
asCSŒšg
 
ty³Name
;

866 
ty³Name
.
	`Assign
(&
süt
->
code
[
t
.
pos
],.
Ëngth
);

867 ifĞ
’gše
->
	`IsTem¶©eTy³
(
ty³Name
.
	`Add»ssOf
()) )

870 
	`G‘Tok’
(&
t
);

871 ifĞ
t
.
ty³
 !ğ
‰LessThª
 )

872  
çl£
;

875 
	`G‘Tok’
(&
t
);

876 ifĞ
t
.
ty³
 =ğ
‰CÚ¡
 )

877 
	`G‘Tok’
(&
t
);

880 ifĞ
t
.
ty³
 =ğ
‰Scİe
 )

881 
	`G‘Tok’
(&
t
);

884 
sTok’
 
t2
;

885 
	`G‘Tok’
(&
t2
);

886  
t
.
ty³
 =ğ
‰Id’tif›r
 && 
t2
.ty³ =ğ
‰Scİe
 )

888 
	`G‘Tok’
(&
t
);

889 
	`G‘Tok’
(&
t2
);

891 
	`RewšdTo
(&
t2
);

894 ifĞ!
	`IsD©aTy³
(
t
) )

895  
çl£
;

897 ifĞ!
	`CheckTem¶©eTy³
(
t
) )

898  
çl£
;

900 
	`G‘Tok’
(&
t
);

903  
t
.
ty³
 =ğ
‰HªdË
 ||.ty³ =ğ
‰O³nB¿ck‘
 )

905 ifĞ
t
.
ty³
 =ğ
‰O³nB¿ck‘
 )

907 
	`G‘Tok’
(&
t
);

908 ifĞ
t
.
ty³
 !ğ
‰Clo£B¿ck‘
 )

909  
çl£
;

912 
	`G‘Tok’
(&
t
);

917 ifĞ
süt
->
code
[
t
.
pos
] != '>' )

918  
çl£
;

919 ifĞ
t
.
Ëngth
 != 1 )

922 
sTok’
 
t2
 = 
t
;

923 
t2
.
pos
 = 
t
.pos + 1;

924 
	`RewšdTo
(&
t2
);

928  
Œue
;

929 
	}
}

931 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£Ca¡
()

933 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢Ca¡
);

934 ifĞ
node
 == 0 )  0;

936 
sTok’
 
t1
;

937 
	`G‘Tok’
(&
t1
);

938 ifĞ
t1
.
ty³
 !ğ
‰Ca¡
 )

940 
	`E¼Ü
(
	`Ex³ùedTok’
("ÿ¡").
	`Add»ssOf
(), &
t1
);

941  
node
;

944 
node
->
	`Upd©eSourûPos
(
t1
.
pos
,1.
Ëngth
);

946 
	`G‘Tok’
(&
t1
);

947 ifĞ
t1
.
ty³
 !ğ
‰LessThª
 )

949 
	`E¼Ü
(
	`Ex³ùedTok’
("<").
	`Add»ssOf
(), &
t1
);

950  
node
;

954 
node
->
	`AddChdLa¡
(
	`P¬£Ty³
(
Œue
));

955 ifĞ
isSyÁaxE¼Ü
 )  
node
;

957 
node
->
	`AddChdLa¡
(
	`P¬£Ty³Mod
(
çl£
));

958 ifĞ
isSyÁaxE¼Ü
 )  
node
;

960 
	`G‘Tok’
(&
t1
);

961 ifĞ
t1
.
ty³
 !ğ
‰G»©”Thª
 )

963 
	`E¼Ü
(
	`Ex³ùedTok’
(">").
	`Add»ssOf
(), &
t1
);

964  
node
;

967 
	`G‘Tok’
(&
t1
);

968 ifĞ
t1
.
ty³
 !ğ
‰O³nP¬ªthesis
 )

970 
	`E¼Ü
(
	`Ex³ùedTok’
("(").
	`Add»ssOf
(), &
t1
);

971  
node
;

974 
node
->
	`AddChdLa¡
(
	`P¬£Assignm’t
());

975 ifĞ
isSyÁaxE¼Ü
 )  
node
;

977 
	`G‘Tok’
(&
t1
);

978 ifĞ
t1
.
ty³
 !ğ
‰Clo£P¬ªthesis
 )

980 
	`E¼Ü
(
	`Ex³ùedTok’
(")").
	`Add»ssOf
(), &
t1
);

981  
node
;

984 
node
->
	`Upd©eSourûPos
(
t1
.
pos
,1.
Ëngth
);

986  
node
;

987 
	}
}

989 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£Ex´V®ue
()

991 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢Ex´V®ue
);

992 ifĞ
node
 == 0 )  0;

994 
sTok’
 
t1
, 
t2
;

995 
	`G‘Tok’
(&
t1
);

996 
	`G‘Tok’
(&
t2
);

997 
	`RewšdTo
(&
t1
);

1000 ifĞ
	`IsD©aTy³
(
t1
è&& (
t2
.
ty³
 =ğ
‰O³nP¬ªthesis
 ||

1001 
t2
.
ty³
 =ğ
‰LessThª
 ||

1002 
t2
.
ty³
 =ğ
‰O³nB¿ck‘
) )

1003 
node
->
	`AddChdLa¡
(
	`P¬£CÚ¡ruùC®l
());

1004 ifĞ
t1
.
ty³
 =ğ
‰Id’tif›r
 ||1.ty³ =ğ
‰Scİe
 )

1006 ifĞ
	`IsFunùiÚC®l
() )

1007 
node
->
	`AddChdLa¡
(
	`P¬£FunùiÚC®l
());

1009 
node
->
	`AddChdLa¡
(
	`P¬£V¬ŸbËAcûss
());

1011 ifĞ
t1
.
ty³
 =ğ
‰Ca¡
 )

1012 
node
->
	`AddChdLa¡
(
	`P¬£Ca¡
());

1013 ifĞ
	`IsCÚ¡ªt
(
t1
.
ty³
) )

1014 
node
->
	`AddChdLa¡
(
	`P¬£CÚ¡ªt
());

1015 ifĞ
t1
.
ty³
 =ğ
‰O³nP¬ªthesis
 )

1017 
	`G‘Tok’
(&
t1
);

1018 
node
->
	`Upd©eSourûPos
(
t1
.
pos
,1.
Ëngth
);

1020 
node
->
	`AddChdLa¡
(
	`P¬£Assignm’t
());

1021 ifĞ
isSyÁaxE¼Ü
 )  
node
;

1023 
	`G‘Tok’
(&
t1
);

1024 ifĞ
t1
.
ty³
 !ğ
‰Clo£P¬ªthesis
 )

1025 
	`E¼Ü
(
	`Ex³ùedTok’
(")").
	`Add»ssOf
(), &
t1
);

1027 
node
->
	`Upd©eSourûPos
(
t1
.
pos
,1.
Ëngth
);

1030 
	`E¼Ü
(
TXT_EXPECTED_EXPRESSION_VALUE
, &
t1
);

1032  
node
;

1033 
	}
}

1035 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£CÚ¡ªt
()

1037 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢CÚ¡ªt
);

1038 ifĞ
node
 == 0 )  0;

1040 
sTok’
 
t
;

1041 
	`G‘Tok’
(&
t
);

1042 ifĞ!
	`IsCÚ¡ªt
(
t
.
ty³
) )

1044 
	`E¼Ü
(
TXT_EXPECTED_CONSTANT
, &
t
);

1045  
node
;

1048 
node
->
	`S‘Tok’
(&
t
);

1049 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

1052 ifĞ
t
.
ty³
 =ğ
‰SŒšgCÚ¡ªt
 ||.ty³ =ğ
‰MuÉšeSŒšgCÚ¡ªt
 ||.ty³ =ğ
‰H”edocSŒšgCÚ¡ªt
 )

1053 
	`RewšdTo
(&
t
);

1055  
t
.
ty³
 =ğ
‰SŒšgCÚ¡ªt
 ||.ty³ =ğ
‰MuÉšeSŒšgCÚ¡ªt
 ||.ty³ =ğ
‰H”edocSŒšgCÚ¡ªt
 )

1057 
node
->
	`AddChdLa¡
(
	`P¬£SŒšgCÚ¡ªt
());

1059 
	`G‘Tok’
(&
t
);

1060 
	`RewšdTo
(&
t
);

1063  
node
;

1064 
	}
}

1066 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£SŒšgCÚ¡ªt
()

1068 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢CÚ¡ªt
);

1069 ifĞ
node
 == 0 )  0;

1071 
sTok’
 
t
;

1072 
	`G‘Tok’
(&
t
);

1073 ifĞ
t
.
ty³
 !ğ
‰SŒšgCÚ¡ªt
 &&.ty³ !ğ
‰MuÉšeSŒšgCÚ¡ªt
 &&.ty³ !ğ
‰H”edocSŒšgCÚ¡ªt
 )

1075 
	`E¼Ü
(
TXT_EXPECTED_STRING
, &
t
);

1076  
node
;

1079 
node
->
	`S‘Tok’
(&
t
);

1080 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

1082  
node
;

1083 
	}
}

1085 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£FunùiÚC®l
()

1087 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢FunùiÚC®l
);

1088 ifĞ
node
 == 0 )  0;

1091 
	`P¬£O±iÚ®Scİe
(
node
);

1094 
node
->
	`AddChdLa¡
(
	`P¬£Id’tif›r
());

1095 ifĞ
isSyÁaxE¼Ü
 )  
node
;

1097 
node
->
	`AddChdLa¡
(
	`P¬£ArgLi¡
());

1099  
node
;

1100 
	}
}

1102 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£V¬ŸbËAcûss
()

1104 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢V¬ŸbËAcûss
);

1105 ifĞ
node
 == 0 )  0;

1108 
	`P¬£O±iÚ®Scİe
(
node
);

1111 
node
->
	`AddChdLa¡
(
	`P¬£Id’tif›r
());

1113  
node
;

1114 
	}
}

1116 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£CÚ¡ruùC®l
()

1118 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢CÚ¡ruùC®l
);

1119 ifĞ
node
 == 0 )  0;

1121 
node
->
	`AddChdLa¡
(
	`P¬£Ty³
(
çl£
));

1122 ifĞ
isSyÁaxE¼Ü
 )  
node
;

1124 
node
->
	`AddChdLa¡
(
	`P¬£ArgLi¡
());

1126  
node
;

1127 
	}
}

1129 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£ArgLi¡
()

1131 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢ArgLi¡
);

1132 ifĞ
node
 == 0 )  0;

1134 
sTok’
 
t1
;

1135 
	`G‘Tok’
(&
t1
);

1136 ifĞ
t1
.
ty³
 !ğ
‰O³nP¬ªthesis
 )

1138 
	`E¼Ü
(
	`Ex³ùedTok’
("(").
	`Add»ssOf
(), &
t1
);

1139  
node
;

1142 
node
->
	`Upd©eSourûPos
(
t1
.
pos
,1.
Ëngth
);

1144 
	`G‘Tok’
(&
t1
);

1145 ifĞ
t1
.
ty³
 =ğ
‰Clo£P¬ªthesis
 )

1147 
node
->
	`Upd©eSourûPos
(
t1
.
pos
,1.
Ëngth
);

1150  
node
;

1154 
	`RewšdTo
(&
t1
);

1158 
node
->
	`AddChdLa¡
(
	`P¬£Assignm’t
());

1159 ifĞ
isSyÁaxE¼Ü
 )  
node
;

1162 
	`G‘Tok’
(&
t1
);

1163 ifĞ
t1
.
ty³
 =ğ
‰Clo£P¬ªthesis
 )

1165 
node
->
	`Upd©eSourûPos
(
t1
.
pos
,1.
Ëngth
);

1167  
node
;

1169 ifĞ
t1
.
ty³
 =ğ
‰Li¡S•¬©Ü
 )

1173 
	`E¼Ü
(
	`Ex³ùedTok’s
(")", ",").
	`Add»ssOf
(), &
t1
);

1174  
node
;

1178 
	}
}

1180 
boŞ
 
	gasCP¬£r
::
	$IsFunùiÚC®l
()

1182 
sTok’
 
s
;

1183 
sTok’
 
t1
, 
t2
;

1185 
	`G‘Tok’
(&
s
);

1186 
t1
 = 
s
;

1189 ifĞ
t1
.
ty³
 =ğ
‰Scİe
 )

1190 
	`G‘Tok’
(&
t1
);

1191 
	`G‘Tok’
(&
t2
);

1193  
t1
.
ty³
 =ğ
‰Id’tif›r
 && 
t2
.ty³ =ğ
‰Scİe
 )

1195 
	`G‘Tok’
(&
t1
);

1196 
	`G‘Tok’
(&
t2
);

1200 ifĞ
t1
.
ty³
 !ğ
‰Id’tif›r
 || 
	`IsD©aTy³
(t1) )

1202 
	`RewšdTo
(&
s
);

1203  
çl£
;

1206 ifĞ
t2
.
ty³
 =ğ
‰O³nP¬ªthesis
 )

1208 
	`RewšdTo
(&
s
);

1209  
Œue
;

1212 
	`RewšdTo
(&
s
);

1213  
çl£
;

1214 
	}
}

1216 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£Assignm’t
()

1218 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢Assignm’t
);

1219 ifĞ
node
 == 0 )  0;

1221 
node
->
	`AddChdLa¡
(
	`P¬£CÚd™iÚ
());

1222 ifĞ
isSyÁaxE¼Ü
 )  
node
;

1224 
sTok’
 
t
;

1225 
	`G‘Tok’
(&
t
);

1226 
	`RewšdTo
(&
t
);

1228 ifĞ
	`IsAssignO³¿tÜ
(
t
.
ty³
) )

1230 
node
->
	`AddChdLa¡
(
	`P¬£AssignO³¿tÜ
());

1231 ifĞ
isSyÁaxE¼Ü
 )  
node
;

1233 
node
->
	`AddChdLa¡
(
	`P¬£Assignm’t
());

1234 ifĞ
isSyÁaxE¼Ü
 )  
node
;

1237  
node
;

1238 
	}
}

1240 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£CÚd™iÚ
()

1242 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢CÚd™iÚ
);

1243 ifĞ
node
 == 0 )  0;

1245 
node
->
	`AddChdLa¡
(
	`P¬£Ex´essiÚ
());

1246 ifĞ
isSyÁaxE¼Ü
 )  
node
;

1248 
sTok’
 
t
;

1249 
	`G‘Tok’
(&
t
);

1250 ifĞ
t
.
ty³
 =ğ
‰Que¡iÚ
 )

1252 
node
->
	`AddChdLa¡
(
	`P¬£Assignm’t
());

1253 ifĞ
isSyÁaxE¼Ü
 )  
node
;

1255 
	`G‘Tok’
(&
t
);

1256 ifĞ
t
.
ty³
 !ğ
‰CŞÚ
 )

1258 
	`E¼Ü
(
	`Ex³ùedTok’
(":").
	`Add»ssOf
(), &
t
);

1259  
node
;

1262 
node
->
	`AddChdLa¡
(
	`P¬£Assignm’t
());

1263 ifĞ
isSyÁaxE¼Ü
 )  
node
;

1266 
	`RewšdTo
(&
t
);

1268  
node
;

1269 
	}
}

1271 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£Ex´essiÚ
()

1273 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢Ex´essiÚ
);

1274 ifĞ
node
 == 0 )  0;

1276 
node
->
	`AddChdLa¡
(
	`P¬£Ex´T”m
());

1277 ifĞ
isSyÁaxE¼Ü
 )  
node
;

1281 
sTok’
 
t
;

1282 
	`G‘Tok’
(&
t
);

1283 
	`RewšdTo
(&
t
);

1285 ifĞ!
	`IsO³¿tÜ
(
t
.
ty³
) )

1286  
node
;

1288 
node
->
	`AddChdLa¡
(
	`P¬£Ex´O³¿tÜ
());

1289 ifĞ
isSyÁaxE¼Ü
 )  
node
;

1291 
node
->
	`AddChdLa¡
(
	`P¬£Ex´T”m
());

1292 ifĞ
isSyÁaxE¼Ü
 )  
node
;

1294 
UNREACHABLE_RETURN
;

1295 
	}
}

1297 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£Ex´T”m
()

1299 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢Ex´T”m
);

1300 ifĞ
node
 == 0 )  0;

1304 
sTok’
 
t
;

1305 
	`G‘Tok’
(&
t
);

1306 
	`RewšdTo
(&
t
);

1307 ifĞ!
	`IsP»O³¿tÜ
(
t
.
ty³
) )

1310 
node
->
	`AddChdLa¡
(
	`P¬£Ex´P»Op
());

1311 ifĞ
isSyÁaxE¼Ü
 )  
node
;

1314 
node
->
	`AddChdLa¡
(
	`P¬£Ex´V®ue
());

1315 ifĞ
isSyÁaxE¼Ü
 )  
node
;

1320 
sTok’
 
t
;

1321 
	`G‘Tok’
(&
t
);

1322 
	`RewšdTo
(&
t
);

1323 ifĞ!
	`IsPo¡O³¿tÜ
(
t
.
ty³
) )

1324  
node
;

1326 
node
->
	`AddChdLa¡
(
	`P¬£Ex´Po¡Op
());

1327 ifĞ
isSyÁaxE¼Ü
 )  
node
;

1329 
UNREACHABLE_RETURN
;

1330 
	}
}

1332 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£Ex´P»Op
()

1334 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢Ex´P»Op
);

1335 ifĞ
node
 == 0 )  0;

1337 
sTok’
 
t
;

1338 
	`G‘Tok’
(&
t
);

1339 ifĞ!
	`IsP»O³¿tÜ
(
t
.
ty³
) )

1341 
	`E¼Ü
(
TXT_EXPECTED_PRE_OPERATOR
, &
t
);

1342  
node
;

1345 
node
->
	`S‘Tok’
(&
t
);

1346 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

1348  
node
;

1349 
	}
}

1351 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£Ex´Po¡Op
()

1353 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢Ex´Po¡Op
);

1354 ifĞ
node
 == 0 )  0;

1356 
sTok’
 
t
;

1357 
	`G‘Tok’
(&
t
);

1358 ifĞ!
	`IsPo¡O³¿tÜ
(
t
.
ty³
) )

1360 
	`E¼Ü
(
TXT_EXPECTED_POST_OPERATOR
, &
t
);

1361  
node
;

1364 
node
->
	`S‘Tok’
(&
t
);

1365 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

1367 ifĞ
t
.
ty³
 =ğ
‰DÙ
 )

1369 
sTok’
 
t1
, 
t2
;

1370 
	`G‘Tok’
(&
t1
);

1371 
	`G‘Tok’
(&
t2
);

1372 
	`RewšdTo
(&
t1
);

1373 ifĞ
t2
.
ty³
 =ğ
‰O³nP¬ªthesis
 )

1374 
node
->
	`AddChdLa¡
(
	`P¬£FunùiÚC®l
());

1376 
node
->
	`AddChdLa¡
(
	`P¬£Id’tif›r
());

1378 ifĞ
t
.
ty³
 =ğ
‰O³nB¿ck‘
 )

1380 
node
->
	`AddChdLa¡
(
	`P¬£Assignm’t
());

1382 
	`G‘Tok’
(&
t
);

1383 ifĞ
t
.
ty³
 !ğ
‰Clo£B¿ck‘
 )

1385 
	`E¼Ü
(
	`Ex³ùedTok’
("]").
	`Add»ssOf
(), &
t
);

1386  
node
;

1389 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

1391 ifĞ
t
.
ty³
 =ğ
‰O³nP¬ªthesis
 )

1393 
	`RewšdTo
(&
t
);

1394 
node
->
	`AddChdLa¡
(
	`P¬£ArgLi¡
());

1397  
node
;

1398 
	}
}

1400 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£Ex´O³¿tÜ
()

1402 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢Ex´O³¿tÜ
);

1403 ifĞ
node
 == 0 )  0;

1405 
sTok’
 
t
;

1406 
	`G‘Tok’
(&
t
);

1407 ifĞ!
	`IsO³¿tÜ
(
t
.
ty³
) )

1409 
	`E¼Ü
(
TXT_EXPECTED_OPERATOR
, &
t
);

1410  
node
;

1413 
node
->
	`S‘Tok’
(&
t
);

1414 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

1416  
node
;

1417 
	}
}

1419 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£AssignO³¿tÜ
()

1421 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢Ex´O³¿tÜ
);

1422 ifĞ
node
 == 0 )  0;

1424 
sTok’
 
t
;

1425 
	`G‘Tok’
(&
t
);

1426 ifĞ!
	`IsAssignO³¿tÜ
(
t
.
ty³
) )

1428 
	`E¼Ü
(
TXT_EXPECTED_OPERATOR
, &
t
);

1429  
node
;

1432 
node
->
	`S‘Tok’
(&
t
);

1433 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

1435  
node
;

1436 
	}
}

1438 
boŞ
 
	gasCP¬£r
::
	$IsO³¿tÜ
(
tok’Ty³
)

1440 ifĞ
tok’Ty³
 =ğ
‰Plus
 ||

1441 
tok’Ty³
 =ğ
‰Mšus
 ||

1442 
tok’Ty³
 =ğ
‰Sr
 ||

1443 
tok’Ty³
 =ğ
‰SÏsh
 ||

1444 
tok’Ty³
 =ğ
‰P”ûÁ
 ||

1445 
tok’Ty³
 =ğ
‰And
 ||

1446 
tok’Ty³
 =ğ
‰Or
 ||

1447 
tok’Ty³
 =ğ
‰XÜ
 ||

1448 
tok’Ty³
 =ğ
‰Equ®
 ||

1449 
tok’Ty³
 =ğ
‰NÙEqu®
 ||

1450 
tok’Ty³
 =ğ
‰LessThª
 ||

1451 
tok’Ty³
 =ğ
‰LessThªOrEqu®
 ||

1452 
tok’Ty³
 =ğ
‰G»©”Thª
 ||

1453 
tok’Ty³
 =ğ
‰G»©”ThªOrEqu®
 ||

1454 
tok’Ty³
 =ğ
‰Amp
 ||

1455 
tok’Ty³
 =ğ
‰B™Or
 ||

1456 
tok’Ty³
 =ğ
‰B™XÜ
 ||

1457 
tok’Ty³
 =ğ
‰B™ShiáLeá
 ||

1458 
tok’Ty³
 =ğ
‰B™ShiáRight
 ||

1459 
tok’Ty³
 =ğ
‰B™ShiáRightAr™h
 ||

1460 
tok’Ty³
 =ğ
‰Is
 ||

1461 
tok’Ty³
 =ğ
‰NÙIs
 )

1462  
Œue
;

1464  
çl£
;

1465 
	}
}

1467 
boŞ
 
	gasCP¬£r
::
	$IsAssignO³¿tÜ
(
tok’Ty³
)

1469 ifĞ
tok’Ty³
 =ğ
‰Assignm’t
 ||

1470 
tok’Ty³
 =ğ
‰AddAssign
 ||

1471 
tok’Ty³
 =ğ
‰SubAssign
 ||

1472 
tok’Ty³
 =ğ
‰MulAssign
 ||

1473 
tok’Ty³
 =ğ
‰DivAssign
 ||

1474 
tok’Ty³
 =ğ
‰ModAssign
 ||

1475 
tok’Ty³
 =ğ
‰AndAssign
 ||

1476 
tok’Ty³
 =ğ
‰OrAssign
 ||

1477 
tok’Ty³
 =ğ
‰XÜAssign
 ||

1478 
tok’Ty³
 =ğ
‰ShiáLeáAssign
 ||

1479 
tok’Ty³
 =ğ
‰ShiáRightLAssign
 ||

1480 
tok’Ty³
 =ğ
‰ShiáRightAAssign
 )

1481  
Œue
;

1483  
çl£
;

1484 
	}
}

1486 
boŞ
 
	gasCP¬£r
::
	$IsP»O³¿tÜ
(
tok’Ty³
)

1488 ifĞ
tok’Ty³
 =ğ
‰Mšus
 ||

1489 
tok’Ty³
 =ğ
‰Plus
 ||

1490 
tok’Ty³
 =ğ
‰NÙ
 ||

1491 
tok’Ty³
 =ğ
‰Inc
 ||

1492 
tok’Ty³
 =ğ
‰Dec
 ||

1493 
tok’Ty³
 =ğ
‰B™NÙ
 ||

1494 
tok’Ty³
 =ğ
‰HªdË
 )

1495  
Œue
;

1496  
çl£
;

1497 
	}
}

1499 
boŞ
 
	gasCP¬£r
::
	$IsPo¡O³¿tÜ
(
tok’Ty³
)

1501 ifĞ
tok’Ty³
 =ğ
‰Inc
 ||

1502 
tok’Ty³
 =ğ
‰Dec
 ||

1503 
tok’Ty³
 =ğ
‰DÙ
 ||

1504 
tok’Ty³
 =ğ
‰O³nB¿ck‘
 ||

1505 
tok’Ty³
 =ğ
‰O³nP¬ªthesis
 )

1506  
Œue
;

1507  
çl£
;

1508 
	}
}

1510 
boŞ
 
	gasCP¬£r
::
	$IsCÚ¡ªt
(
tok’Ty³
)

1512 ifĞ
tok’Ty³
 =ğ
‰IÁCÚ¡ªt
 ||

1513 
tok’Ty³
 =ğ
‰FlßtCÚ¡ªt
 ||

1514 
tok’Ty³
 =ğ
‰DoubËCÚ¡ªt
 ||

1515 
tok’Ty³
 =ğ
‰SŒšgCÚ¡ªt
 ||

1516 
tok’Ty³
 =ğ
‰MuÉšeSŒšgCÚ¡ªt
 ||

1517 
tok’Ty³
 =ğ
‰H”edocSŒšgCÚ¡ªt
 ||

1518 
tok’Ty³
 =ğ
‰True
 ||

1519 
tok’Ty³
 =ğ
‰F®£
 ||

1520 
tok’Ty³
 =ğ
‰B™sCÚ¡ªt
 ||

1521 
tok’Ty³
 =ğ
‰NuÎ
 )

1522  
Œue
;

1524  
çl£
;

1525 
	}
}

1527 
	gasCP¬£r
::
	$P¬£Süt
(
asCSütCode
 *
süt
)

1529 
	`Re£t
();

1531 
this
->
süt
 = script;

1533 
sütNode
 = 
	`P¬£Süt
(
çl£
);

1535 ifĞ
”rÜWheP¬sšg
 )

1539 
	}
}

1541 
	gasCP¬£r
::
	$P¬£Ex´essiÚ
(
asCSütCode
 *
süt
)

1543 
	`Re£t
();

1545 
this
->
süt
 = script;

1547 
sütNode
 = 
	`P¬£Ex´essiÚ
();

1548 ifĞ
”rÜWheP¬sšg
 )

1552 
	}
}

1554 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£ImpÜt
()

1556 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢ImpÜt
);

1557 ifĞ
node
 == 0 )  0;

1559 
sTok’
 
t
;

1560 
	`G‘Tok’
(&
t
);

1561 ifĞ
t
.
ty³
 !ğ
‰ImpÜt
 )

1563 
	`E¼Ü
(
	`Ex³ùedTok’
(
asCTok’iz”
::
	`G‘Defš™iÚ
(
‰ImpÜt
)).
	`Add»ssOf
(), &
t
);

1564  
node
;

1567 
node
->
	`S‘Tok’
(&
t
);

1568 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

1570 
node
->
	`AddChdLa¡
(
	`P¬£FunùiÚDefš™iÚ
());

1571 ifĞ
isSyÁaxE¼Ü
 )  
node
;

1573 
	`G‘Tok’
(&
t
);

1574 ifĞ
t
.
ty³
 !ğ
‰Id’tif›r
 )

1576 
	`E¼Ü
(
	`Ex³ùedTok’
(
FROM_TOKEN
).
	`Add»ssOf
(), &
t
);

1577  
node
;

1580 
asCSŒšg
 
¡r
;

1581 
¡r
.
	`Assign
(&
süt
->
code
[
t
.
pos
],.
Ëngth
);

1582 ifĞ
¡r
 !ğ
FROM_TOKEN
 )

1584 
	`E¼Ü
(
	`Ex³ùedTok’
(
FROM_TOKEN
).
	`Add»ssOf
(), &
t
);

1585  
node
;

1588 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

1590 
	`G‘Tok’
(&
t
);

1591 ifĞ
t
.
ty³
 !ğ
‰SŒšgCÚ¡ªt
 )

1593 
	`E¼Ü
(
TXT_EXPECTED_STRING
, &
t
);

1594  
node
;

1597 
asCSütNode
 *
mod
 = 
	`C»©eNode
(
¢CÚ¡ªt
);

1598 ifĞ
mod
 == 0 )  0;

1600 
node
->
	`AddChdLa¡
(
mod
);

1602 
mod
->
	`S‘Tok’
(&
t
);

1603 
mod
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

1605 
	`G‘Tok’
(&
t
);

1606 ifĞ
t
.
ty³
 !ğ
‰EndS‹m’t
 )

1608 
	`E¼Ü
(
	`Ex³ùedTok’
(
asCTok’iz”
::
	`G‘Defš™iÚ
(
‰EndS‹m’t
)).
	`Add»ssOf
(), &
t
);

1609  
node
;

1612 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

1614  
node
;

1615 
	}
}

1617 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£Süt
(
boŞ
 
šBlock
)

1619 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢Süt
);

1620 ifĞ
node
 == 0 )  0;

1623 
sTok’
 
t1
, 
t2
;

1627  !
isSyÁaxE¼Ü
 )

1629 
	`G‘Tok’
(&
t1
);

1630 
	`G‘Tok’
(&
t2
);

1631 
	`RewšdTo
(&
t1
);

1633 ifĞ
t1
.
ty³
 =ğ
‰ImpÜt
 )

1634 
node
->
	`AddChdLa¡
(
	`P¬£ImpÜt
());

1635 ifĞ
t1
.
ty³
 =ğ
‰Enum
 || (
	`Id’tif›rIs
Ñ1, 
SHARED_TOKEN
è&& 
t2
.type ==tEnum) )

1636 
node
->
	`AddChdLa¡
(
	`P¬£Enum”©iÚ
());

1637 ifĞ
t1
.
ty³
 =ğ
‰Ty³def
 )

1638 
node
->
	`AddChdLa¡
(
	`P¬£Ty³def
());

1639 ifĞ
t1
.
ty³
 =ğ
‰CÏss
 ||

1640 ((
	`Id’tif›rIs
(
t1
, 
SHARED_TOKEN
è|| Id’tif›rIsÑ1, 
FINAL_TOKEN
)è&& 
t2
.
ty³
 =ğ
‰CÏss
) ||

1641 (
	`Id’tif›rIs
(
t1
, 
SHARED_TOKEN
è&& Id’tif›rIs(
t2
, 
FINAL_TOKEN
)) )

1642 
node
->
	`AddChdLa¡
(
	`P¬£CÏss
());

1643 ifĞ
t1
.
ty³
 =ğ
‰IÁ”çû
 || (t1.ty³ =ğ
‰Id’tif›r
 && 
t2
.type ==tInterface) )

1644 
node
->
	`AddChdLa¡
(
	`P¬£IÁ”çû
());

1645 ifĞ
t1
.
ty³
 =ğ
‰FuncDef
 )

1646 
node
->
	`AddChdLa¡
(
	`P¬£FuncDef
());

1647 ifĞ
t1
.
ty³
 =ğ
‰CÚ¡
 || 
	`IsD©aTy³
(t1) )

1649 ifĞ
	`IsVœtu®Prİ”tyDeş
() )

1650 
node
->
	`AddChdLa¡
(
	`P¬£Vœtu®Prİ”tyDeş
(
çl£
, false));

1651 ifĞ
	`IsV¬Deş
() )

1652 
node
->
	`AddChdLa¡
(
	`P¬£Glob®V¬
());

1654 
node
->
	`AddChdLa¡
(
	`P¬£FunùiÚ
());

1656 ifĞ
t1
.
ty³
 =ğ
‰EndS‹m’t
 )

1659 
	`G‘Tok’
(&
t1
);

1661 ifĞ
t1
.
ty³
 =ğ
‰Name¥aû
 )

1662 
node
->
	`AddChdLa¡
(
	`P¬£Name¥aû
());

1663 ifĞ
t1
.
ty³
 =ğ
‰End
 )

1665 ifĞ
šBlock
 )

1666 
	`E¼Ü
(
	`Ex³ùedTok’
(
asCTok’iz”
::
	`G‘Defš™iÚ
(
‰EndS‹m’tBlock
)).
	`Add»ssOf
(), &
t1
);

1668  
node
;

1670 ifĞ
šBlock
 && 
t1
.
ty³
 =ğ
‰EndS‹m’tBlock
 )

1671  
node
;

1674 
asCSŒšg
 
¡r
;

1675 cÚ¡ *
t
 = 
asCTok’iz”
::
	`G‘Defš™iÚ
(
t1
.
ty³
);

1676 ifĞ
t
 == 0 ) = "<unknownoken>";

1678 
¡r
.
	`FÜm©
(
TXT_UNEXPECTED_TOKEN_s
, 
t
);

1680 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), &
t1
);

1684 ifĞ
isSyÁaxE¼Ü
 )

1687 
	`G‘Tok’
(&
t1
);

1688  
t1
.
ty³
 !ğ
‰EndS‹m’t
 &&1.ty³ !ğ
‰End
 &&

1689 
t1
.
ty³
 !ğ
‰S¹S‹m’tBlock
 )

1690 
	`G‘Tok’
(&
t1
);

1692 ifĞ
t1
.
ty³
 =ğ
‰S¹S‹m’tBlock
 )

1695 
Ëv–
 = 1;

1696  
Ëv–
 > 0 )

1698 
	`G‘Tok’
(&
t1
);

1699 ifĞ
t1
.
ty³
 =ğ
‰S¹S‹m’tBlock
 ) 
Ëv–
++;

1700 ifĞ
t1
.
ty³
 =ğ
‰EndS‹m’tBlock
 ) 
Ëv–
--;

1701 ifĞ
t1
.
ty³
 =ğ
‰End
 ) ;

1705 
isSyÁaxE¼Ü
 = 
çl£
;

1708 
UNREACHABLE_RETURN
;

1709 
	}
}

1711 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£Name¥aû
()

1713 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢Name¥aû
);

1714 ifĞ
node
 == 0 )  0;

1716 
sTok’
 
t1
;

1718 
	`G‘Tok’
(&
t1
);

1719 ifĞ
t1
.
ty³
 =ğ
‰Name¥aû
 )

1720 
node
->
	`Upd©eSourûPos
(
t1
.
pos
,1.
Ëngth
);

1722 
	`E¼Ü
(
	`Ex³ùedTok’
(
asCTok’iz”
::
	`G‘Defš™iÚ
(
‰Name¥aû
)).
	`Add»ssOf
(), &
t1
);

1725 
node
->
	`AddChdLa¡
(
	`P¬£Id’tif›r
());

1726 ifĞ
isSyÁaxE¼Ü
 )  
node
;

1728 
	`G‘Tok’
(&
t1
);

1729 ifĞ
t1
.
ty³
 =ğ
‰S¹S‹m’tBlock
 )

1730 
node
->
	`Upd©eSourûPos
(
t1
.
pos
,1.
Ëngth
);

1732 
	`E¼Ü
(
	`Ex³ùedTok’
(
asCTok’iz”
::
	`G‘Defš™iÚ
(
‰S¹S‹m’tBlock
)).
	`Add»ssOf
(), &
t1
);

1734 
node
->
	`AddChdLa¡
(
	`P¬£Süt
(
Œue
));

1736 ifĞ!
isSyÁaxE¼Ü
 )

1738 
	`G‘Tok’
(&
t1
);

1739 ifĞ
t1
.
ty³
 =ğ
‰EndS‹m’tBlock
 )

1740 
node
->
	`Upd©eSourûPos
(
t1
.
pos
,1.
Ëngth
);

1742 
	`E¼Ü
(
	`Ex³ùedTok’
(
asCTok’iz”
::
	`G‘Defš™iÚ
(
‰EndS‹m’tBlock
)).
	`Add»ssOf
(), &
t1
);

1745  
node
;

1746 
	}
}

1748 
	gasCP¬£r
::
	$P¬£S‹m’tBlock
(
asCSütCode
 *
süt
, 
asCSütNode
 *
block
)

1750 
	`Re£t
();

1753 
checkV®idTy³s
 = 
Œue
;

1755 
this
->
süt
 = script;

1756 
sourûPos
 = 
block
->
tok’Pos
;

1758 
sütNode
 = 
	`P¬£S‹m’tBlock
();

1760 ifĞ
isSyÁaxE¼Ü
 || 
”rÜWheP¬sšg
 )

1764 
	}
}

1766 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£Enum”©iÚ
()

1768 
asCSütNode
 *
id’t
;

1769 
asCSütNode
 *
d©aTy³
;

1771 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢Enum
);

1772 ifĞ
node
 == 0 )  0;

1774 
sTok’
 
tok’
;

1777 
	`G‘Tok’
(&
tok’
);

1778 ifĞ
	`Id’tif›rIs
(
tok’
, 
SHARED_TOKEN
) )

1780 
	`RewšdTo
(&
tok’
);

1781 
node
->
	`AddChdLa¡
(
	`P¬£Id’tif›r
());

1782 ifĞ
isSyÁaxE¼Ü
 )  
node
;

1784 
	`G‘Tok’
(&
tok’
);

1788 ifĞ
tok’
.
ty³
 !ğ
‰Enum
 )

1790 
	`E¼Ü
(
	`Ex³ùedTok’
(
asCTok’iz”
::
	`G‘Defš™iÚ
(
‰Enum
)).
	`Add»ssOf
(), &
tok’
);

1791  
node
;

1794 
node
->
	`S‘Tok’
(&
tok’
);

1795 
node
->
	`Upd©eSourûPos
(
tok’
.
pos
,ok’.
Ëngth
);

1798 
	`G‘Tok’
(&
tok’
);

1799 if(
‰Id’tif›r
 !ğ
tok’
.
ty³
)

1801 
	`E¼Ü
(
TXT_EXPECTED_IDENTIFIER
, &
tok’
);

1802  
node
;

1805 
d©aTy³
 = 
	`C»©eNode
(
¢D©aTy³
);

1806 ifĞ
d©aTy³
 == 0 )  0;

1808 
node
->
	`AddChdLa¡
(
d©aTy³
);

1810 
id’t
 = 
	`C»©eNode
(
¢Id’tif›r
);

1811 ifĞ
id’t
 == 0 )  0;

1813 
id’t
->
	`S‘Tok’
(&
tok’
);

1814 
id’t
->
	`Upd©eSourûPos
(
tok’
.
pos
,ok’.
Ëngth
);

1815 
d©aTy³
->
	`AddChdLa¡
(
id’t
);

1818 
	`G‘Tok’
(&
tok’
);

1819 ifĞ
tok’
.
ty³
 !ğ
‰S¹S‹m’tBlock
 )

1821 
	`RewšdTo
(&
tok’
);

1822 
	`E¼Ü
(
	`Ex³ùedTok’
(
asCTok’iz”
::
	`G‘Defš™iÚ
(
tok’
.
ty³
)).
	`Add»ssOf
(), &token);

1823  
node
;

1826 
‰End
 !ğ
tok’
.
ty³
)

1828 
	`G‘Tok’
(&
tok’
);

1830 ifĞ
‰EndS‹m’tBlock
 =ğ
tok’
.
ty³
 )

1832 
	`RewšdTo
(&
tok’
);

1836 if(
‰Id’tif›r
 !ğ
tok’
.
ty³
)

1838 
	`E¼Ü
(
TXT_EXPECTED_IDENTIFIER
, &
tok’
);

1839  
node
;

1843 
id’t
 = 
	`C»©eNode
(
¢Id’tif›r
);

1844 ifĞ
id’t
 == 0 )  0;

1846 
id’t
->
	`S‘Tok’
(&
tok’
);

1847 
id’t
->
	`Upd©eSourûPos
(
tok’
.
pos
,ok’.
Ëngth
);

1848 
node
->
	`AddChdLa¡
(
id’t
);

1850 
	`G‘Tok’
(&
tok’
);

1852 ifĞ
tok’
.
ty³
 =ğ
‰Assignm’t
 )

1854 
asCSütNode
 *
tmp
;

1856 
	`RewšdTo
(&
tok’
);

1858 
tmp
 = 
	`Su³rficŸÎyP¬£Glob®V¬In™
();

1860 
node
->
	`AddChdLa¡
(
tmp
);

1861 ifĞ
isSyÁaxE¼Ü
 )  
node
;

1862 
	`G‘Tok’
(&
tok’
);

1865 if(
‰Li¡S•¬©Ü
 !ğ
tok’
.
ty³
)

1867 
	`RewšdTo
(&
tok’
);

1873 
	`G‘Tok’
(&
tok’
);

1874 ifĞ
tok’
.
ty³
 !ğ
‰EndS‹m’tBlock
 )

1876 
	`RewšdTo
(&
tok’
);

1877 
	`E¼Ü
(
	`Ex³ùedTok’
(
asCTok’iz”
::
	`G‘Defš™iÚ
(
tok’
.
ty³
)).
	`Add»ssOf
(), &token);

1878  
node
;

1882  
node
;

1883 
	}
}

1885 
boŞ
 
	gasCP¬£r
::
	$IsV¬Deş
()

1888 
sTok’
 
t
;

1889 
	`G‘Tok’
(&
t
);

1890 
	`RewšdTo
(&
t
);

1893 
sTok’
 
t1
;

1894 
	`G‘Tok’
(&
t1
);

1895 ifĞ
t1
.
ty³
 !ğ
‰Priv©e
 )

1896 
	`RewšdTo
(&
t1
);

1899 
	`G‘Tok’
(&
t1
);

1900 ifĞ
t1
.
ty³
 =ğ
‰CÚ¡
 )

1901 
	`G‘Tok’
(&
t1
);

1904 ifĞ
t1
.
ty³
 =ğ
‰Scİe
 )

1905 
	`G‘Tok’
(&
t1
);

1908 
sTok’
 
t2
;

1909 
	`G‘Tok’
(&
t2
);

1910  
t1
.
ty³
 =ğ
‰Id’tif›r
 && 
t2
.ty³ =ğ
‰Scİe
 )

1912 
	`G‘Tok’
(&
t1
);

1913 
	`G‘Tok’
(&
t2
);

1915 
	`RewšdTo
(&
t2
);

1921 ifĞ!
	`IsR—lTy³
(
t1
.
ty³
è&&1.ty³ !ğ
‰Id’tif›r
 )

1923 
	`RewšdTo
(&
t
);

1924  
çl£
;

1927 ifĞ!
	`CheckTem¶©eTy³
(
t1
) )

1929 
	`RewšdTo
(&
t
);

1930  
çl£
;

1934 
	`G‘Tok’
(&
t2
);

1935  
t2
.
ty³
 =ğ
‰HªdË
 ||2.ty³ =ğ
‰O³nB¿ck‘
 )

1937 ifĞ
t2
.
ty³
 =ğ
‰O³nB¿ck‘
 )

1939 
	`G‘Tok’
(&
t2
);

1940 ifĞ
t2
.
ty³
 !ğ
‰Clo£B¿ck‘
 )

1942 
	`RewšdTo
(&
t
);

1943  
çl£
;

1947 
	`G‘Tok’
(&
t2
);

1950 ifĞ
t2
.
ty³
 !ğ
‰Id’tif›r
 )

1952 
	`RewšdTo
(&
t
);

1953  
çl£
;

1956 
	`G‘Tok’
(&
t2
);

1957 ifĞ
t2
.
ty³
 =ğ
‰EndS‹m’t
 ||2.ty³ =ğ
‰Assignm’t
 ||2.ty³ =ğ
‰Li¡S•¬©Ü
 )

1959 
	`RewšdTo
(&
t
);

1960  
Œue
;

1962 ifĞ
t2
.
ty³
 =ğ
‰O³nP¬ªthesis
 )

1966  
t2
.
ty³
 !ğ
‰Clo£P¬ªthesis
 &&2.ty³ !ğ
‰End
 )

1967 
	`G‘Tok’
(&
t2
);

1969 ifĞ
t2
.
ty³
 =ğ
‰End
 )

1970  
çl£
;

1973 
	`G‘Tok’
(&
t1
);

1974 
	`RewšdTo
(&
t
);

1975 ifĞ
t1
.
ty³
 =ğ
‰S¹S‹m’tBlock
 ||1.ty³ =ğ
‰End
 )

1976  
çl£
;

1979 
	`RewšdTo
(&
t
);

1981  
Œue
;

1984 
	`RewšdTo
(&
t
);

1985  
çl£
;

1986 
	}
}

1988 
boŞ
 
	gasCP¬£r
::
	$IsVœtu®Prİ”tyDeş
()

1991 
sTok’
 
t
;

1992 
	`G‘Tok’
(&
t
);

1993 
	`RewšdTo
(&
t
);

1996 
sTok’
 
t1
;

1997 
	`G‘Tok’
(&
t1
);

1998 ifĞ
t1
.
ty³
 !ğ
‰Priv©e
 )

1999 
	`RewšdTo
(&
t1
);

2002 
	`G‘Tok’
(&
t1
);

2003 ifĞ
t1
.
ty³
 =ğ
‰CÚ¡
 )

2004 
	`G‘Tok’
(&
t1
);

2010 ifĞ!
	`IsR—lTy³
(
t1
.
ty³
è&&1.ty³ !ğ
‰Id’tif›r
 )

2012 
	`RewšdTo
(&
t
);

2013  
çl£
;

2016 ifĞ!
	`CheckTem¶©eTy³
(
t1
) )

2018 
	`RewšdTo
(&
t
);

2019  
çl£
;

2023 
sTok’
 
t2
;

2024 
	`G‘Tok’
(&
t2
);

2025  
t2
.
ty³
 =ğ
‰HªdË
 ||2.ty³ =ğ
‰O³nB¿ck‘
 )

2027 ifĞ
t2
.
ty³
 =ğ
‰O³nB¿ck‘
 )

2029 
	`G‘Tok’
(&
t2
);

2030 ifĞ
t2
.
ty³
 !ğ
‰Clo£B¿ck‘
 )

2032 
	`RewšdTo
(&
t
);

2033  
çl£
;

2037 
	`G‘Tok’
(&
t2
);

2040 ifĞ
t2
.
ty³
 !ğ
‰Id’tif›r
 )

2042 
	`RewšdTo
(&
t
);

2043  
çl£
;

2046 
	`G‘Tok’
(&
t2
);

2047 ifĞ
t2
.
ty³
 =ğ
‰S¹S‹m’tBlock
 )

2049 
	`RewšdTo
(&
t
);

2050  
Œue
;

2053 
	`RewšdTo
(&
t
);

2054  
çl£
;

2055 
	}
}

2057 
boŞ
 
	gasCP¬£r
::
	$IsFuncDeş
(
boŞ
 
isM‘hod
)

2060 
sTok’
 
t
;

2061 
	`G‘Tok’
(&
t
);

2062 
	`RewšdTo
(&
t
);

2064 ifĞ
isM‘hod
 )

2067 
sTok’
 
t1
, 
t2
;

2068 
	`G‘Tok’
(&
t1
);

2069 ifĞ
t1
.
ty³
 !ğ
‰Priv©e
 )

2070 
	`RewšdTo
(&
t1
);

2074 
	`G‘Tok’
(&
t1
);

2075 
	`G‘Tok’
(&
t2
);

2076 
	`RewšdTo
(&
t1
);

2077 ifĞ(
t1
.
ty³
 =ğ
‰Id’tif›r
 && 
t2
.ty³ =ğ
‰O³nP¬ªthesis
è||1.ty³ =ğ
‰B™NÙ
 )

2079 
	`RewšdTo
(&
t
);

2080  
Œue
;

2085 
sTok’
 
t1
;

2086 
	`G‘Tok’
(&
t1
);

2087 ifĞ
t1
.
ty³
 =ğ
‰CÚ¡
 )

2088 
	`G‘Tok’
(&
t1
);

2090 ifĞ!
	`IsD©aTy³
(
t1
) )

2092 
	`RewšdTo
(&
t
);

2093  
çl£
;

2096 ifĞ!
	`CheckTem¶©eTy³
(
t1
) )

2098 
	`RewšdTo
(&
t
);

2099  
çl£
;

2103 
sTok’
 
t2
;

2104 
	`G‘Tok’
(&
t2
);

2105  
t2
.
ty³
 =ğ
‰HªdË
 ||2.ty³ =ğ
‰O³nB¿ck‘
 )

2107 ifĞ
t2
.
ty³
 =ğ
‰O³nB¿ck‘
 )

2109 
	`G‘Tok’
(&
t2
);

2110 ifĞ
t2
.
ty³
 !ğ
‰Clo£B¿ck‘
 )

2112 
	`RewšdTo
(&
t
);

2113  
çl£
;

2117 
	`G‘Tok’
(&
t2
);

2121 ifĞ
t2
.
ty³
 =ğ
‰Amp
 )

2123 
	`RewšdTo
(&
t
);

2124  
Œue
;

2127 ifĞ
t2
.
ty³
 !ğ
‰Id’tif›r
 )

2129 
	`RewšdTo
(&
t
);

2130  
çl£
;

2133 
	`G‘Tok’
(&
t2
);

2134 ifĞ
t2
.
ty³
 =ğ
‰O³nP¬ªthesis
 )

2138  
t2
.
ty³
 !ğ
‰Clo£P¬ªthesis
 &&2.ty³ !ğ
‰End
 )

2139 
	`G‘Tok’
(&
t2
);

2141 ifĞ
t2
.
ty³
 =ğ
‰End
 )

2142  
çl£
;

2145 ifĞ
isM‘hod
 )

2148 
	`G‘Tok’
(&
t1
);

2149 ifĞ
t1
.
ty³
 !ğ
‰CÚ¡
 )

2150 
	`RewšdTo
(&
t1
);

2155 
	`G‘Tok’
(&
t2
);

2156 ifĞ!
	`Id’tif›rIs
(
t2
, 
FINAL_TOKEN
è&& !Id’tif›rIsÑ2, 
OVERRIDE_TOKEN
) )

2158 
	`RewšdTo
(&
t2
);

2164 
	`G‘Tok’
(&
t1
);

2165 
	`RewšdTo
(&
t
);

2166 ifĞ
t1
.
ty³
 =ğ
‰S¹S‹m’tBlock
 )

2167  
Œue
;

2170 
	`RewšdTo
(&
t
);

2171  
çl£
;

2174 
	`RewšdTo
(&
t
);

2175  
çl£
;

2176 
	}
}

2178 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£FuncDef
()

2180 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢FuncDef
);

2181 ifĞ
node
 == 0 )  0;

2183 
sTok’
 
t1
;

2184 
	`G‘Tok’
(&
t1
);

2185 ifĞ
t1
.
ty³
 !ğ
‰FuncDef
 )

2187 
	`E¼Ü
(
asCTok’iz”
::
	`G‘Defš™iÚ
(
‰FuncDef
), &
t1
);

2188  
node
;

2191 
node
->
	`S‘Tok’
(&
t1
);

2193 
node
->
	`AddChdLa¡
(
	`P¬£Ty³
(
Œue
));

2194 ifĞ
isSyÁaxE¼Ü
 )  
node
;

2196 
node
->
	`AddChdLa¡
(
	`P¬£Ty³Mod
(
çl£
));

2197 ifĞ
isSyÁaxE¼Ü
 )  
node
;

2199 
node
->
	`AddChdLa¡
(
	`P¬£Id’tif›r
());

2200 ifĞ
isSyÁaxE¼Ü
 )  
node
;

2202 
node
->
	`AddChdLa¡
(
	`P¬£P¬am‘”Li¡
());

2203 ifĞ
isSyÁaxE¼Ü
 )  
node
;

2205 
	`G‘Tok’
(&
t1
);

2206 ifĞ
t1
.
ty³
 !ğ
‰EndS‹m’t
 )

2208 
	`E¼Ü
(
	`Ex³ùedTok’
(
asCTok’iz”
::
	`G‘Defš™iÚ
(
‰EndS‹m’t
)).
	`Add»ssOf
(), &
t1
);

2209  
node
;

2212 
node
->
	`Upd©eSourûPos
(
t1
.
pos
,1.
Ëngth
);

2214  
node
;

2215 
	}
}

2217 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£FunùiÚ
(
boŞ
 
isM‘hod
)

2219 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢FunùiÚ
);

2220 ifĞ
node
 == 0 )  0;

2222 
sTok’
 
t1
,
t2
;

2223 
	`G‘Tok’
(&
t1
);

2224 
	`G‘Tok’
(&
t2
);

2225 
	`RewšdTo
(&
t1
);

2228 ifĞ
isM‘hod
 && 
t1
.
ty³
 =ğ
‰Priv©e
 )

2230 
node
->
	`AddChdLa¡
(
	`P¬£Tok’
(
‰Priv©e
));

2231 ifĞ
isSyÁaxE¼Ü
 )  
node
;

2235 ifĞ!
isM‘hod
 && 
	`Id’tif›rIs
(
t1
, 
SHARED_TOKEN
) )

2237 
node
->
	`AddChdLa¡
(
	`P¬£Id’tif›r
());

2238 ifĞ
isSyÁaxE¼Ü
 )  
node
;

2242 ifĞ!
isM‘hod
 || (
t1
.
ty³
 !ğ
‰B™NÙ
 && 
t2
.ty³ !ğ
‰O³nP¬ªthesis
) )

2244 
node
->
	`AddChdLa¡
(
	`P¬£Ty³
(
Œue
));

2245 ifĞ
isSyÁaxE¼Ü
 )  
node
;

2247 
node
->
	`AddChdLa¡
(
	`P¬£Ty³Mod
(
çl£
));

2248 ifĞ
isSyÁaxE¼Ü
 )  
node
;

2252 ifĞ
isM‘hod
 && 
t1
.
ty³
 =ğ
‰B™NÙ
 )

2254 
node
->
	`AddChdLa¡
(
	`P¬£Tok’
(
‰B™NÙ
));

2255 ifĞ
isSyÁaxE¼Ü
 )  
node
;

2258 
node
->
	`AddChdLa¡
(
	`P¬£Id’tif›r
());

2259 ifĞ
isSyÁaxE¼Ü
 )  
node
;

2261 
node
->
	`AddChdLa¡
(
	`P¬£P¬am‘”Li¡
());

2262 ifĞ
isSyÁaxE¼Ü
 )  
node
;

2264 ifĞ
isM‘hod
 )

2266 
	`G‘Tok’
(&
t1
);

2267 
	`RewšdTo
(&
t1
);

2270 ifĞ
t1
.
ty³
 =ğ
‰CÚ¡
 )

2271 
node
->
	`AddChdLa¡
(
	`P¬£Tok’
(
‰CÚ¡
));

2273 
	`P¬£M‘hodOv”rideBehaviÜs
(
node
);

2274 ifĞ
isSyÁaxE¼Ü
 )  
node
;

2279 
node
->
	`AddChdLa¡
(
	`Su³rficŸÎyP¬£S‹m’tBlock
());

2281  
node
;

2282 
	}
}

2284 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£IÁ”çûM‘hod
()

2286 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢FunùiÚ
);

2287 ifĞ
node
 == 0 )  0;

2289 
node
->
	`AddChdLa¡
(
	`P¬£Ty³
(
Œue
));

2290 ifĞ
isSyÁaxE¼Ü
 )  
node
;

2292 
node
->
	`AddChdLa¡
(
	`P¬£Ty³Mod
(
çl£
));

2293 ifĞ
isSyÁaxE¼Ü
 )  
node
;

2295 
node
->
	`AddChdLa¡
(
	`P¬£Id’tif›r
());

2296 ifĞ
isSyÁaxE¼Ü
 )  
node
;

2298 
node
->
	`AddChdLa¡
(
	`P¬£P¬am‘”Li¡
());

2299 ifĞ
isSyÁaxE¼Ü
 )  
node
;

2302 
sTok’
 
t1
;

2303 
	`G‘Tok’
(&
t1
);

2304 
	`RewšdTo
(&
t1
);

2305 ifĞ
t1
.
ty³
 =ğ
‰CÚ¡
 )

2306 
node
->
	`AddChdLa¡
(
	`P¬£Tok’
(
‰CÚ¡
));

2308 
	`G‘Tok’
(&
t1
);

2309 ifĞ
t1
.
ty³
 !ğ
‰EndS‹m’t
 )

2311 
	`E¼Ü
(
	`Ex³ùedTok’
(";").
	`Add»ssOf
(), &
t1
);

2312  
node
;

2315 
node
->
	`Upd©eSourûPos
(
t1
.
pos
,1.
Ëngth
);

2317  
node
;

2318 
	}
}

2320 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£Vœtu®Prİ”tyDeş
(
boŞ
 
isM‘hod
, boŞ 
isIÁ”çû
)

2322 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢Vœtu®Prİ”ty
);

2323 ifĞ
node
 == 0 )  0;

2325 
sTok’
 
t1
,
t2
;

2326 
	`G‘Tok’
(&
t1
);

2327 
	`G‘Tok’
(&
t2
);

2328 
	`RewšdTo
(&
t1
);

2331 ifĞ
isM‘hod
 && 
t1
.
ty³
 =ğ
‰Priv©e
 )

2333 
node
->
	`AddChdLa¡
(
	`P¬£Tok’
(
‰Priv©e
));

2334 ifĞ
isSyÁaxE¼Ü
 )  
node
;

2337 
node
->
	`AddChdLa¡
(
	`P¬£Ty³
(
Œue
));

2338 ifĞ
isSyÁaxE¼Ü
 )  
node
;

2340 
node
->
	`AddChdLa¡
(
	`P¬£Ty³Mod
(
çl£
));

2341 ifĞ
isSyÁaxE¼Ü
 )  
node
;

2343 
node
->
	`AddChdLa¡
(
	`P¬£Id’tif›r
());

2344 ifĞ
isSyÁaxE¼Ü
 )  
node
;

2346 
	`G‘Tok’
(&
t1
);

2347 ifĞ
t1
.
ty³
 !ğ
‰S¹S‹m’tBlock
 )

2349 
	`E¼Ü
(
	`Ex³ùedTok’
("{").
	`Add»ssOf
(), &
t1
);

2350  
node
;

2355 
	`G‘Tok’
(&
t1
);

2356 
asCSütNode
 *
acûssÜNode
 = 0;

2358 ifĞ
	`Id’tif›rIs
(
t1
, 
GET_TOKEN
è|| Id’tif›rIsÑ1, 
SET_TOKEN
) )

2360 
acûssÜNode
 = 
	`C»©eNode
(
¢Vœtu®Prİ”ty
);

2361 ifĞ
acûssÜNode
 == 0 )  0;

2363 
node
->
	`AddChdLa¡
(
acûssÜNode
);

2365 
	`RewšdTo
(&
t1
);

2366 
acûssÜNode
->
	`AddChdLa¡
(
	`P¬£Id’tif›r
());

2368 ifĞ
isM‘hod
 )

2370 
	`G‘Tok’
(&
t1
);

2371 
	`RewšdTo
(&
t1
);

2372 ifĞ
t1
.
ty³
 =ğ
‰CÚ¡
 )

2373 
acûssÜNode
->
	`AddChdLa¡
(
	`P¬£Tok’
(
‰CÚ¡
));

2375 ifĞ!
isIÁ”çû
 )

2377 
	`P¬£M‘hodOv”rideBehaviÜs
(
acûssÜNode
);

2378 ifĞ
isSyÁaxE¼Ü
 )  
node
;

2382 ifĞ!
isIÁ”çû
 )

2384 
	`G‘Tok’
(&
t1
);

2385 ifĞ
t1
.
ty³
 =ğ
‰S¹S‹m’tBlock
 )

2387 
	`RewšdTo
(&
t1
);

2388 
acûssÜNode
->
	`AddChdLa¡
(
	`Su³rficŸÎyP¬£S‹m’tBlock
());

2389 ifĞ
isSyÁaxE¼Ü
 )  
node
;

2391 ifĞ
t1
.
ty³
 !ğ
‰EndS‹m’t
 )

2393 
	`E¼Ü
(
	`Ex³ùedTok’s
(";", "{").
	`Add»ssOf
(), &
t1
);

2394  
node
;

2399 
	`G‘Tok’
(&
t1
);

2400 ifĞ
t1
.
ty³
 !ğ
‰EndS‹m’t
 )

2402 
	`E¼Ü
(
	`Ex³ùedTok’
(";").
	`Add»ssOf
(), &
t1
);

2403  
node
;

2407 ifĞ
t1
.
ty³
 =ğ
‰EndS‹m’tBlock
 )

2413 cÚ¡ *
tok’s
[] = { 
GET_TOKEN
, 
SET_TOKEN
, 
asCTok’iz”
::
	`G‘Defš™iÚ
(
‰EndS‹m’tBlock
) };

2414 
	`E¼Ü
(
	`Ex³ùedOÃOf
(
tok’s
, 3).
	`Add»ssOf
(), &
t1
);

2415  
node
;

2419  
node
;

2420 
	}
}

2422 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£IÁ”çû
()

2424 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢IÁ”çû
);

2425 ifĞ
node
 == 0 )  0;

2427 
sTok’
 
t
;

2428 
	`G‘Tok’
(&
t
);

2431 ifĞ
t
.
ty³
 =ğ
‰Id’tif›r
 )

2433 
asCSŒšg
 
¡r
;

2434 
¡r
.
	`Assign
(&
süt
->
code
[
t
.
pos
],.
Ëngth
);

2435 ifĞ
¡r
 !ğ
SHARED_TOKEN
 )

2437 
	`E¼Ü
(
	`Ex³ùedTok’
(
SHARED_TOKEN
).
	`Add»ssOf
(), &
t
);

2438  
node
;

2441 
	`RewšdTo
(&
t
);

2442 
node
->
	`AddChdLa¡
(
	`P¬£Id’tif›r
());

2443 
	`G‘Tok’
(&
t
);

2446 ifĞ
t
.
ty³
 !ğ
‰IÁ”çû
 )

2448 
	`E¼Ü
(
	`Ex³ùedTok’
("š‹rçû").
	`Add»ssOf
(), &
t
);

2449  
node
;

2452 
node
->
	`S‘Tok’
(&
t
);

2454 
node
->
	`AddChdLa¡
(
	`P¬£Id’tif›r
());

2456 
	`G‘Tok’
(&
t
);

2457 ifĞ
t
.
ty³
 !ğ
‰S¹S‹m’tBlock
 )

2459 
	`E¼Ü
(
	`Ex³ùedTok’
("{").
	`Add»ssOf
(), &
t
);

2460  
node
;

2464 
	`G‘Tok’
(&
t
);

2465 
	`RewšdTo
(&
t
);

2466  
t
.
ty³
 !ğ
‰EndS‹m’tBlock
 &&.ty³ !ğ
‰End
 )

2468 ifĞ
	`IsVœtu®Prİ”tyDeş
() )

2470 
node
->
	`AddChdLa¡
(
	`P¬£Vœtu®Prİ”tyDeş
(
Œue
,rue));

2475 
node
->
	`AddChdLa¡
(
	`P¬£IÁ”çûM‘hod
());

2478 ifĞ
isSyÁaxE¼Ü
 )  
node
;

2480 
	`G‘Tok’
(&
t
);

2481 
	`RewšdTo
(&
t
);

2484 
	`G‘Tok’
(&
t
);

2485 ifĞ
t
.
ty³
 !ğ
‰EndS‹m’tBlock
 )

2487 
	`E¼Ü
(
	`Ex³ùedTok’
("}").
	`Add»ssOf
(), &
t
);

2488  
node
;

2491 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

2493  
node
;

2494 
	}
}

2496 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£CÏss
()

2498 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢CÏss
);

2499 ifĞ
node
 == 0 )  0;

2501 
sTok’
 
t
;

2502 
	`G‘Tok’
(&
t
);

2505 ifĞ
	`Id’tif›rIs
(
t
, 
SHARED_TOKEN
) )

2507 
	`RewšdTo
(&
t
);

2508 
node
->
	`AddChdLa¡
(
	`P¬£Id’tif›r
());

2509 
	`G‘Tok’
(&
t
);

2512 ifĞ
	`Id’tif›rIs
(
t
, 
FINAL_TOKEN
) )

2514 
	`RewšdTo
(&
t
);

2515 
node
->
	`AddChdLa¡
(
	`P¬£Id’tif›r
());

2516 
	`G‘Tok’
(&
t
);

2519 ifĞ
t
.
ty³
 !ğ
‰CÏss
 )

2521 
	`E¼Ü
(
	`Ex³ùedTok’
("şass").
	`Add»ssOf
(), &
t
);

2522  
node
;

2525 
node
->
	`S‘Tok’
(&
t
);

2527 ifĞ
’gše
->
•
.
®lowIm¶ic™HªdËTy³s
 )

2530 
	`G‘Tok’
(&
t
);

2532 iàĞ
t
.
ty³
 =ğ
‰HªdË
 )

2533 
node
->
	`S‘Tok’
(&
t
);

2535 
	`RewšdTo
(&
t
);

2538 
node
->
	`AddChdLa¡
(
	`P¬£Id’tif›r
());

2540 
	`G‘Tok’
(&
t
);

2543 ifĞ
t
.
ty³
 =ğ
‰CŞÚ
 )

2545 
asCSütNode
 *
šh”™
 = 
	`C»©eNode
(
¢Id’tif›r
);

2546 
node
->
	`AddChdLa¡
(
šh”™
);

2548 
	`P¬£O±iÚ®Scİe
(
šh”™
);

2549 
šh”™
->
	`AddChdLa¡
(
	`P¬£Id’tif›r
());

2550 
	`G‘Tok’
(&
t
);

2551  
t
.
ty³
 =ğ
‰Li¡S•¬©Ü
 )

2553 
šh”™
 = 
	`C»©eNode
(
¢Id’tif›r
);

2554 
node
->
	`AddChdLa¡
(
šh”™
);

2556 
	`P¬£O±iÚ®Scİe
(
šh”™
);

2557 
šh”™
->
	`AddChdLa¡
(
	`P¬£Id’tif›r
());

2558 
	`G‘Tok’
(&
t
);

2562 ifĞ
t
.
ty³
 !ğ
‰S¹S‹m’tBlock
 )

2564 
	`E¼Ü
(
	`Ex³ùedTok’
("{").
	`Add»ssOf
(), &
t
);

2565  
node
;

2569 
	`G‘Tok’
(&
t
);

2570 
	`RewšdTo
(&
t
);

2571  
t
.
ty³
 !ğ
‰EndS‹m’tBlock
 &&.ty³ !ğ
‰End
 )

2574 ifĞ
	`IsFuncDeş
(
Œue
) )

2577 
node
->
	`AddChdLa¡
(
	`P¬£FunùiÚ
(
Œue
));

2579 ifĞ
	`IsVœtu®Prİ”tyDeş
() )

2581 
node
->
	`AddChdLa¡
(
	`P¬£Vœtu®Prİ”tyDeş
(
Œue
, 
çl£
));

2583 ifĞ
	`IsV¬Deş
() )

2586 
asCSütNode
 *
´İ
 = 
	`C»©eNode
(
¢Deş¬©iÚ
);

2587 ifĞ
´İ
 == 0 )  0;

2589 
node
->
	`AddChdLa¡
(
´İ
);

2592 ifĞ
t
.
ty³
 =ğ
‰Priv©e
 )

2593 
´İ
->
	`AddChdLa¡
(
	`P¬£Tok’
(
‰Priv©e
));

2595 
´İ
->
	`AddChdLa¡
(
	`P¬£Ty³
(
Œue
));

2596 ifĞ
isSyÁaxE¼Ü
 )  
node
;

2598 
´İ
->
	`AddChdLa¡
(
	`P¬£Id’tif›r
());

2599 ifĞ
isSyÁaxE¼Ü
 )  
node
;

2601 
	`G‘Tok’
(&
t
);

2602 ifĞ
t
.
ty³
 !ğ
‰EndS‹m’t
 )

2604 
	`E¼Ü
(
	`Ex³ùedTok’
(";").
	`Add»ssOf
(), &
t
);

2605  
node
;

2607 
´İ
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

2611 
	`E¼Ü
(
TXT_EXPECTED_METHOD_OR_PROPERTY
, &
t
);

2612  
node
;

2615 
	`G‘Tok’
(&
t
);

2616 
	`RewšdTo
(&
t
);

2619 
	`G‘Tok’
(&
t
);

2620 ifĞ
t
.
ty³
 !ğ
‰EndS‹m’tBlock
 )

2622 
	`E¼Ü
(
	`Ex³ùedTok’
("}").
	`Add»ssOf
(), &
t
);

2623  
node
;

2625 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

2627  
node
;

2628 
	}
}

2630 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£Glob®V¬
()

2632 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢Glob®V¬
);

2633 ifĞ
node
 == 0 )  0;

2636 
node
->
	`AddChdLa¡
(
	`P¬£Ty³
(
Œue
));

2637 ifĞ
isSyÁaxE¼Ü
 )  
node
;

2639 
sTok’
 
t
;

2644 
node
->
	`AddChdLa¡
(
	`P¬£Id’tif›r
());

2645 ifĞ
isSyÁaxE¼Ü
 )  
node
;

2648 
	`G‘Tok’
(&
t
);

2649 
	`RewšdTo
(&
t
);

2650 ifĞ
t
.
ty³
 =ğ
‰Assignm’t
 ||.ty³ =ğ
‰O³nP¬ªthesis
 )

2652 
node
->
	`AddChdLa¡
(
	`Su³rficŸÎyP¬£Glob®V¬In™
());

2653 ifĞ
isSyÁaxE¼Ü
 )  
node
;

2657 
	`G‘Tok’
(&
t
);

2658 ifĞ
t
.
ty³
 =ğ
‰Li¡S•¬©Ü
 )

2660 ifĞ
t
.
ty³
 =ğ
‰EndS‹m’t
 )

2662 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

2664  
node
;

2668 
	`E¼Ü
(
	`Ex³ùedTok’s
(",", ";").
	`Add»ssOf
(), &
t
);

2669  
node
;

2672 
UNREACHABLE_RETURN
;

2673 
	}
}

2675 
	gasCP¬£r
::
	$P¬£Glob®V¬In™
(
asCSütCode
 *
süt
, 
asCSütNode
 *
š™
)

2677 
	`Re£t
();

2680 
checkV®idTy³s
 = 
Œue
;

2682 
this
->
süt
 = script;

2683 
sourûPos
 = 
š™
->
tok’Pos
;

2686 
sTok’
 
t
;

2687 
	`G‘Tok’
(&
t
);

2688 ifĞ
t
.
ty³
 =ğ
‰Assignm’t
 )

2690 
	`G‘Tok’
(&
t
);

2691 
	`RewšdTo
(&
t
);

2692 ifĞ
t
.
ty³
 =ğ
‰S¹S‹m’tBlock
 )

2693 
sütNode
 = 
	`P¬£In™Li¡
();

2695 
sütNode
 = 
	`P¬£Assignm’t
();

2697 ifĞ
t
.
ty³
 =ğ
‰O³nP¬ªthesis
 )

2699 
	`RewšdTo
(&
t
);

2700 
sütNode
 = 
	`P¬£ArgLi¡
();

2704 
tok’s
[] = {
‰Assignm’t
, 
‰O³nP¬ªthesis
};

2705 
	`E¼Ü
(
	`Ex³ùedOÃOf
(
tok’s
, 2).
	`Add»ssOf
(), &
t
);

2709 
	`G‘Tok’
(&
t
);

2710 ifĞ
t
.
ty³
 !ğ
‰End
 &&.ty³ !ğ
‰EndS‹m’t
 &&.ty³ !ğ
‰Li¡S•¬©Ü
 &&.ty³ !ğ
‰EndS‹m’tBlock
 )

2712 
asCSŒšg
 
msg
;

2713 
msg
.
	`FÜm©
(
TXT_UNEXPECTED_TOKEN_s
, 
asCTok’iz”
::
	`G‘Defš™iÚ
(
t
.
ty³
));

2714 
	`E¼Ü
(
msg
.
	`Add»ssOf
(), &
t
);

2717 ifĞ
isSyÁaxE¼Ü
 || 
”rÜWheP¬sšg
 )

2721 
	}
}

2723 
asCSütNode
 *
	gasCP¬£r
::
	$Su³rficŸÎyP¬£Glob®V¬In™
()

2725 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢Assignm’t
);

2726 ifĞ
node
 == 0 )  0;

2728 
sTok’
 
t
;

2729 
	`G‘Tok’
(&
t
);

2730 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

2732 ifĞ
t
.
ty³
 =ğ
‰Assignm’t
 )

2734 
	`G‘Tok’
(&
t
);

2735 ifĞ
t
.
ty³
 =ğ
‰S¹S‹m’tBlock
 )

2738 
šd’t
 = 1;

2739  
šd’t
 )

2741 
	`G‘Tok’
(&
t
);

2742 ifĞ
t
.
ty³
 =ğ
‰S¹S‹m’tBlock
 )

2743 
šd’t
++;

2744 ifĞ
t
.
ty³
 =ğ
‰EndS‹m’tBlock
 )

2745 
šd’t
--;

2746 ifĞ
t
.
ty³
 =ğ
‰End
 )

2748 
	`E¼Ü
(
TXT_UNEXPECTED_END_OF_FILE
, &
t
);

2756 
šd’t
 = 0;

2757  
šd’t
 || (
t
.
ty³
 !ğ
‰Li¡S•¬©Ü
 &&.ty³ !ğ
‰EndS‹m’t
 &&.ty³ !ğ
‰EndS‹m’tBlock
) )

2759 ifĞ
t
.
ty³
 =ğ
‰O³nP¬ªthesis
 )

2760 
šd’t
++;

2761 ifĞ
t
.
ty³
 =ğ
‰Clo£P¬ªthesis
 )

2762 
šd’t
--;

2763 ifĞ
t
.
ty³
 =ğ
‰End
 )

2765 
	`E¼Ü
(
TXT_UNEXPECTED_END_OF_FILE
, &
t
);

2768 
	`G‘Tok’
(&
t
);

2772 
	`RewšdTo
(&
t
);

2775 ifĞ
t
.
ty³
 =ğ
‰O³nP¬ªthesis
 )

2778 
šd’t
 = 1;

2779  
šd’t
 )

2781 
	`G‘Tok’
(&
t
);

2782 ifĞ
t
.
ty³
 =ğ
‰O³nP¬ªthesis
 )

2783 
šd’t
++;

2784 ifĞ
t
.
ty³
 =ğ
‰Clo£P¬ªthesis
 )

2785 
šd’t
--;

2786 ifĞ
t
.
ty³
 =ğ
‰End
 )

2788 
	`E¼Ü
(
TXT_UNEXPECTED_END_OF_FILE
, &
t
);

2795 
tok’s
[] = {
‰Assignm’t
, 
‰O³nP¬ªthesis
};

2796 
	`E¼Ü
(
	`Ex³ùedOÃOf
(
tok’s
, 2).
	`Add»ssOf
(), &
t
);

2799  
node
;

2800 
	}
}

2802 
asCSütNode
 *
	gasCP¬£r
::
	$Su³rficŸÎyP¬£S‹m’tBlock
()

2804 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢S‹m’tBlock
);

2805 ifĞ
node
 == 0 )  0;

2808 
sTok’
 
t1
;

2810 
	`G‘Tok’
(&
t1
);

2811 ifĞ
t1
.
ty³
 !ğ
‰S¹S‹m’tBlock
 )

2813 
	`E¼Ü
(
	`Ex³ùedTok’
("{").
	`Add»ssOf
(), &
t1
);

2814  
node
;

2817 
node
->
	`Upd©eSourûPos
(
t1
.
pos
,1.
Ëngth
);

2819 
Ëv–
 = 1;

2820  
Ëv–
 > 0 && !
isSyÁaxE¼Ü
 )

2822 
	`G‘Tok’
(&
t1
);

2823 ifĞ
t1
.
ty³
 =ğ
‰EndS‹m’tBlock
 )

2824 
Ëv–
--;

2825 ifĞ
t1
.
ty³
 =ğ
‰S¹S‹m’tBlock
 )

2826 
Ëv–
++;

2827 ifĞ
t1
.
ty³
 =ğ
‰End
 )

2828 
	`E¼Ü
(
TXT_UNEXPECTED_END_OF_FILE
, &
t1
);

2831 
node
->
	`Upd©eSourûPos
(
t1
.
pos
,1.
Ëngth
);

2833  
node
;

2834 
	}
}

2836 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£S‹m’tBlock
()

2838 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢S‹m’tBlock
);

2839 ifĞ
node
 == 0 )  0;

2841 
sTok’
 
t1
;

2843 
	`G‘Tok’
(&
t1
);

2844 ifĞ
t1
.
ty³
 !ğ
‰S¹S‹m’tBlock
 )

2846 
	`E¼Ü
(
	`Ex³ùedTok’
("{").
	`Add»ssOf
(), &
t1
);

2847  
node
;

2850 
node
->
	`Upd©eSourûPos
(
t1
.
pos
,1.
Ëngth
);

2854  !
isSyÁaxE¼Ü
 )

2856 
	`G‘Tok’
(&
t1
);

2857 ifĞ
t1
.
ty³
 =ğ
‰EndS‹m’tBlock
 )

2859 
node
->
	`Upd©eSourûPos
(
t1
.
pos
,1.
Ëngth
);

2862  
node
;

2866 
	`RewšdTo
(&
t1
);

2868 ifĞ
	`IsV¬Deş
() )

2869 
node
->
	`AddChdLa¡
(
	`P¬£Deş¬©iÚ
());

2871 
node
->
	`AddChdLa¡
(
	`P¬£S‹m’t
());

2875 ifĞ
isSyÁaxE¼Ü
 )

2878 
	`G‘Tok’
(&
t1
);

2879  
t1
.
ty³
 !ğ
‰EndS‹m’t
 &&1.ty³ !ğ
‰End
 &&

2880 
t1
.
ty³
 !ğ
‰S¹S‹m’tBlock
 &&1.ty³ !ğ
‰EndS‹m’tBlock
 )

2882 
	`G‘Tok’
(&
t1
);

2886 ifĞ
t1
.
ty³
 =ğ
‰S¹S‹m’tBlock
 )

2889 
Ëv–
 = 1;

2890  
Ëv–
 > 0 )

2892 
	`G‘Tok’
(&
t1
);

2893 ifĞ
t1
.
ty³
 =ğ
‰S¹S‹m’tBlock
 ) 
Ëv–
++;

2894 ifĞ
t1
.
ty³
 =ğ
‰EndS‹m’tBlock
 ) 
Ëv–
--;

2895 ifĞ
t1
.
ty³
 =ğ
‰End
 ) ;

2898 ifĞ
t1
.
ty³
 =ğ
‰EndS‹m’tBlock
 )

2900 
	`RewšdTo
(&
t1
);

2902 ifĞ
t1
.
ty³
 =ğ
‰End
 )

2904 
	`E¼Ü
(
TXT_UNEXPECTED_END_OF_FILE
, &
t1
);

2905  
node
;

2908 
isSyÁaxE¼Ü
 = 
çl£
;

2911 
UNREACHABLE_RETURN
;

2912 
	}
}

2914 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£In™Li¡
()

2916 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢In™Li¡
);

2917 ifĞ
node
 == 0 )  0;

2919 
sTok’
 
t1
;

2921 
	`G‘Tok’
(&
t1
);

2922 ifĞ
t1
.
ty³
 !ğ
‰S¹S‹m’tBlock
 )

2924 
	`E¼Ü
(
	`Ex³ùedTok’
("{").
	`Add»ssOf
(), &
t1
);

2925  
node
;

2928 
node
->
	`Upd©eSourûPos
(
t1
.
pos
,1.
Ëngth
);

2930 
	`G‘Tok’
(&
t1
);

2931 ifĞ
t1
.
ty³
 =ğ
‰EndS‹m’tBlock
 )

2933 
node
->
	`Upd©eSourûPos
(
t1
.
pos
,1.
Ëngth
);

2936  
node
;

2940 
	`RewšdTo
(&
t1
);

2943 
	`G‘Tok’
(&
t1
);

2944 ifĞ
t1
.
ty³
 =ğ
‰Li¡S•¬©Ü
 )

2947 
node
->
	`AddChdLa¡
(
	`C»©eNode
(
¢Undefšed
));

2949 
	`G‘Tok’
(&
t1
);

2950 ifĞ
t1
.
ty³
 =ğ
‰EndS‹m’tBlock
 )

2953 
node
->
	`AddChdLa¡
(
	`C»©eNode
(
¢Undefšed
));

2954 
node
->
	`Upd©eSourûPos
(
t1
.
pos
,1.
Ëngth
);

2955  
node
;

2957 
	`RewšdTo
(&
t1
);

2959 ifĞ
t1
.
ty³
 =ğ
‰EndS‹m’tBlock
 )

2962 
node
->
	`AddChdLa¡
(
	`C»©eNode
(
¢Undefšed
));

2964 
node
->
	`Upd©eSourûPos
(
t1
.
pos
,1.
Ëngth
);

2967  
node
;

2969 ifĞ
t1
.
ty³
 =ğ
‰S¹S‹m’tBlock
 )

2971 
	`RewšdTo
(&
t1
);

2972 
node
->
	`AddChdLa¡
(
	`P¬£In™Li¡
());

2973 ifĞ
isSyÁaxE¼Ü
 )  
node
;

2975 
	`G‘Tok’
(&
t1
);

2976 ifĞ
t1
.
ty³
 =ğ
‰Li¡S•¬©Ü
 )

2978 ifĞ
t1
.
ty³
 =ğ
‰EndS‹m’tBlock
 )

2980 
node
->
	`Upd©eSourûPos
(
t1
.
pos
,1.
Ëngth
);

2983  
node
;

2987 
	`E¼Ü
(
	`Ex³ùedTok’s
("}", ",").
	`Add»ssOf
(), &
t1
);

2988  
node
;

2993 
	`RewšdTo
(&
t1
);

2994 
node
->
	`AddChdLa¡
(
	`P¬£Assignm’t
());

2995 ifĞ
isSyÁaxE¼Ü
 )  
node
;

2998 
	`G‘Tok’
(&
t1
);

2999 ifĞ
t1
.
ty³
 =ğ
‰Li¡S•¬©Ü
 )

3001 ifĞ
t1
.
ty³
 =ğ
‰EndS‹m’tBlock
 )

3003 
node
->
	`Upd©eSourûPos
(
t1
.
pos
,1.
Ëngth
);

3006  
node
;

3010 
	`E¼Ü
(
	`Ex³ùedTok’s
("}", ",").
	`Add»ssOf
(), &
t1
);

3011  
node
;

3016 
UNREACHABLE_RETURN
;

3017 
	}
}

3019 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£Deş¬©iÚ
()

3021 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢Deş¬©iÚ
);

3022 ifĞ
node
 == 0 )  0;

3025 
node
->
	`AddChdLa¡
(
	`P¬£Ty³
(
Œue
));

3026 ifĞ
isSyÁaxE¼Ü
 )  
node
;

3028 
sTok’
 
t
;

3033 
node
->
	`AddChdLa¡
(
	`P¬£Id’tif›r
());

3034 ifĞ
isSyÁaxE¼Ü
 )  
node
;

3037 
	`G‘Tok’
(&
t
);

3038 ifĞ
t
.
ty³
 =ğ
‰O³nP¬ªthesis
 )

3040 
	`RewšdTo
(&
t
);

3041 
node
->
	`AddChdLa¡
(
	`P¬£ArgLi¡
());

3042 ifĞ
isSyÁaxE¼Ü
 )  
node
;

3044 ifĞ
t
.
ty³
 =ğ
‰Assignm’t
 )

3046 
	`G‘Tok’
(&
t
);

3047 
	`RewšdTo
(&
t
);

3048 ifĞ
t
.
ty³
 =ğ
‰S¹S‹m’tBlock
 )

3050 
node
->
	`AddChdLa¡
(
	`P¬£In™Li¡
());

3051 ifĞ
isSyÁaxE¼Ü
 )  
node
;

3055 
node
->
	`AddChdLa¡
(
	`P¬£Assignm’t
());

3056 ifĞ
isSyÁaxE¼Ü
 )  
node
;

3060 
	`RewšdTo
(&
t
);

3063 
	`G‘Tok’
(&
t
);

3064 ifĞ
t
.
ty³
 =ğ
‰Li¡S•¬©Ü
 )

3066 ifĞ
t
.
ty³
 =ğ
‰EndS‹m’t
 )

3068 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

3070  
node
;

3074 
	`E¼Ü
(
	`Ex³ùedTok’s
(",", ";").
	`Add»ssOf
(), &
t
);

3075  
node
;

3078 
UNREACHABLE_RETURN
;

3079 
	}
}

3081 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£S‹m’t
()

3083 
sTok’
 
t1
;

3085 
	`G‘Tok’
(&
t1
);

3086 
	`RewšdTo
(&
t1
);

3088 ifĞ
t1
.
ty³
 =ğ
‰If
 )

3089  
	`P¬£If
();

3090 ifĞ
t1
.
ty³
 =ğ
‰FÜ
 )

3091  
	`P¬£FÜ
();

3092 ifĞ
t1
.
ty³
 =ğ
‰Whe
 )

3093  
	`P¬£Whe
();

3094 ifĞ
t1
.
ty³
 =ğ
‰R‘uº
 )

3095  
	`P¬£R‘uº
();

3096 ifĞ
t1
.
ty³
 =ğ
‰S¹S‹m’tBlock
 )

3097  
	`P¬£S‹m’tBlock
();

3098 ifĞ
t1
.
ty³
 =ğ
‰B»ak
 )

3099  
	`P¬£B»ak
();

3100 ifĞ
t1
.
ty³
 =ğ
‰CÚtšue
 )

3101  
	`P¬£CÚtšue
();

3102 ifĞ
t1
.
ty³
 =ğ
‰Do
 )

3103  
	`P¬£DoWhe
();

3104 ifĞ
t1
.
ty³
 =ğ
‰Sw™ch
 )

3105  
	`P¬£Sw™ch
();

3107  
	`P¬£Ex´essiÚS‹m’t
();

3108 
	}
}

3110 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£Ex´essiÚS‹m’t
()

3112 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢Ex´essiÚS‹m’t
);

3113 ifĞ
node
 == 0 )  0;

3115 
sTok’
 
t
;

3116 
	`G‘Tok’
(&
t
);

3117 ifĞ
t
.
ty³
 =ğ
‰EndS‹m’t
 )

3119 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

3121  
node
;

3124 
	`RewšdTo
(&
t
);

3126 
node
->
	`AddChdLa¡
(
	`P¬£Assignm’t
());

3127 ifĞ
isSyÁaxE¼Ü
 )  
node
;

3129 
	`G‘Tok’
(&
t
);

3130 ifĞ
t
.
ty³
 !ğ
‰EndS‹m’t
 )

3132 
	`E¼Ü
(
	`Ex³ùedTok’
(";").
	`Add»ssOf
(), &
t
);

3133  
node
;

3136 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

3138  
node
;

3139 
	}
}

3141 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£Sw™ch
()

3143 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢Sw™ch
);

3144 ifĞ
node
 == 0 )  0;

3146 
sTok’
 
t
;

3147 
	`G‘Tok’
(&
t
);

3148 ifĞ
t
.
ty³
 !ğ
‰Sw™ch
 )

3150 
	`E¼Ü
(
	`Ex³ùedTok’
("sw™ch").
	`Add»ssOf
(), &
t
);

3151  
node
;

3154 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

3156 
	`G‘Tok’
(&
t
);

3157 ifĞ
t
.
ty³
 !ğ
‰O³nP¬ªthesis
 )

3159 
	`E¼Ü
(
	`Ex³ùedTok’
("(").
	`Add»ssOf
(), &
t
);

3160  
node
;

3163 
node
->
	`AddChdLa¡
(
	`P¬£Assignm’t
());

3164 ifĞ
isSyÁaxE¼Ü
 )  
node
;

3166 
	`G‘Tok’
(&
t
);

3167 ifĞ
t
.
ty³
 !ğ
‰Clo£P¬ªthesis
 )

3169 
	`E¼Ü
(
	`Ex³ùedTok’
(")").
	`Add»ssOf
(), &
t
);

3170  
node
;

3173 
	`G‘Tok’
(&
t
);

3174 ifĞ
t
.
ty³
 !ğ
‰S¹S‹m’tBlock
 )

3176 
	`E¼Ü
(
	`Ex³ùedTok’
("{").
	`Add»ssOf
(), &
t
);

3177  
node
;

3180  !
isSyÁaxE¼Ü
 )

3182 
	`G‘Tok’
(&
t
);

3184 ifĞ
t
.
ty³
 =ğ
‰EndS‹m’tBlock
 ||.ty³ =ğ
‰DeçuÉ
)

3187 
	`RewšdTo
(&
t
);

3189 ifĞ
t
.
ty³
 !ğ
‰Ca£
 )

3191 
	`E¼Ü
(
	`Ex³ùedTok’
("ÿ£").
	`Add»ssOf
(), &
t
);

3192  
node
;

3195 
node
->
	`AddChdLa¡
(
	`P¬£Ca£
());

3196 ifĞ
isSyÁaxE¼Ü
 )  
node
;

3199 ifĞ
t
.
ty³
 =ğ
‰DeçuÉ
)

3201 
	`RewšdTo
(&
t
);

3203 
node
->
	`AddChdLa¡
(
	`P¬£Ca£
());

3204 ifĞ
isSyÁaxE¼Ü
 )  
node
;

3206 
	`G‘Tok’
(&
t
);

3209 ifĞ
t
.
ty³
 !ğ
‰EndS‹m’tBlock
 )

3211 
	`E¼Ü
(
	`Ex³ùedTok’
("}").
	`Add»ssOf
(), &
t
);

3212  
node
;

3215  
node
;

3216 
	}
}

3218 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£Ca£
()

3220 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢Ca£
);

3221 ifĞ
node
 == 0 )  0;

3223 
sTok’
 
t
;

3224 
	`G‘Tok’
(&
t
);

3225 ifĞ
t
.
ty³
 !ğ
‰Ca£
 &&.ty³ !ğ
‰DeçuÉ
 )

3227 
	`E¼Ü
(
	`Ex³ùedTok’s
("ÿ£", "deçuÉ").
	`Add»ssOf
(), &
t
);

3228  
node
;

3231 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

3233 if(
t
.
ty³
 =ğ
‰Ca£
)

3235 
node
->
	`AddChdLa¡
(
	`P¬£Ex´essiÚ
());

3238 
	`G‘Tok’
(&
t
);

3239 ifĞ
t
.
ty³
 !ğ
‰CŞÚ
 )

3241 
	`E¼Ü
(
	`Ex³ùedTok’
(":").
	`Add»ssOf
(), &
t
);

3242  
node
;

3246 
	`G‘Tok’
(&
t
);

3247 
	`RewšdTo
(&
t
);

3248  
t
.
ty³
 !ğ
‰Ca£
 &&

3249 
t
.
ty³
 !ğ
‰DeçuÉ
 &&

3250 
t
.
ty³
 !ğ
‰EndS‹m’tBlock
 &&

3251 
t
.
ty³
 !ğ
‰B»ak
 )

3253 ifĞ
	`IsV¬Deş
() )

3255 
node
->
	`AddChdLa¡
(
	`P¬£Deş¬©iÚ
());

3257 
node
->
	`AddChdLa¡
(
	`P¬£S‹m’t
());

3258 ifĞ
isSyÁaxE¼Ü
 )  
node
;

3260 
	`G‘Tok’
(&
t
);

3261 
	`RewšdTo
(&
t
);

3265 ifĞ
t
.
ty³
 =ğ
‰B»ak
 )

3266 
node
->
	`AddChdLa¡
(
	`P¬£B»ak
());

3268  
node
;

3269 
	}
}

3271 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£If
()

3273 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢If
);

3274 ifĞ
node
 == 0 )  0;

3276 
sTok’
 
t
;

3277 
	`G‘Tok’
(&
t
);

3278 ifĞ
t
.
ty³
 !ğ
‰If
 )

3280 
	`E¼Ü
(
	`Ex³ùedTok’
("if").
	`Add»ssOf
(), &
t
);

3281  
node
;

3284 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

3286 
	`G‘Tok’
(&
t
);

3287 ifĞ
t
.
ty³
 !ğ
‰O³nP¬ªthesis
 )

3289 
	`E¼Ü
(
	`Ex³ùedTok’
("(").
	`Add»ssOf
(), &
t
);

3290  
node
;

3293 
node
->
	`AddChdLa¡
(
	`P¬£Assignm’t
());

3294 ifĞ
isSyÁaxE¼Ü
 )  
node
;

3296 
	`G‘Tok’
(&
t
);

3297 ifĞ
t
.
ty³
 !ğ
‰Clo£P¬ªthesis
 )

3299 
	`E¼Ü
(
	`Ex³ùedTok’
(")").
	`Add»ssOf
(), &
t
);

3300  
node
;

3303 
node
->
	`AddChdLa¡
(
	`P¬£S‹m’t
());

3304 ifĞ
isSyÁaxE¼Ü
 )  
node
;

3306 
	`G‘Tok’
(&
t
);

3307 ifĞ
t
.
ty³
 !ğ
‰El£
 )

3310 
	`RewšdTo
(&
t
);

3311  
node
;

3314 
node
->
	`AddChdLa¡
(
	`P¬£S‹m’t
());

3316  
node
;

3317 
	}
}

3319 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£FÜ
()

3321 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢FÜ
);

3322 ifĞ
node
 == 0 )  0;

3324 
sTok’
 
t
;

3325 
	`G‘Tok’
(&
t
);

3326 ifĞ
t
.
ty³
 !ğ
‰FÜ
 )

3328 
	`E¼Ü
(
	`Ex³ùedTok’
("fÜ").
	`Add»ssOf
(), &
t
);

3329  
node
;

3332 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

3334 
	`G‘Tok’
(&
t
);

3335 ifĞ
t
.
ty³
 !ğ
‰O³nP¬ªthesis
 )

3337 
	`E¼Ü
(
	`Ex³ùedTok’
("(").
	`Add»ssOf
(), &
t
);

3338  
node
;

3341 ifĞ
	`IsV¬Deş
() )

3342 
node
->
	`AddChdLa¡
(
	`P¬£Deş¬©iÚ
());

3344 
node
->
	`AddChdLa¡
(
	`P¬£Ex´essiÚS‹m’t
());

3345 ifĞ
isSyÁaxE¼Ü
 )  
node
;

3347 
node
->
	`AddChdLa¡
(
	`P¬£Ex´essiÚS‹m’t
());

3348 ifĞ
isSyÁaxE¼Ü
 )  
node
;

3350 
	`G‘Tok’
(&
t
);

3351 ifĞ
t
.
ty³
 !ğ
‰Clo£P¬ªthesis
 )

3353 
	`RewšdTo
(&
t
);

3355 
asCSütNode
 *
n
 = 
	`C»©eNode
(
¢Ex´essiÚS‹m’t
);

3356 ifĞ
n
 == 0 )  0;

3357 
node
->
	`AddChdLa¡
(
n
);

3358 
n
->
	`AddChdLa¡
(
	`P¬£Assignm’t
());

3359 ifĞ
isSyÁaxE¼Ü
 )  
node
;

3361 
	`G‘Tok’
(&
t
);

3362 ifĞ
t
.
ty³
 !ğ
‰Clo£P¬ªthesis
 )

3364 
	`E¼Ü
(
	`Ex³ùedTok’
(")").
	`Add»ssOf
(), &
t
);

3365  
node
;

3369 
node
->
	`AddChdLa¡
(
	`P¬£S‹m’t
());

3371  
node
;

3372 
	}
}

3374 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£Whe
()

3376 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢Whe
);

3377 ifĞ
node
 == 0 )  0;

3379 
sTok’
 
t
;

3380 
	`G‘Tok’
(&
t
);

3381 ifĞ
t
.
ty³
 !ğ
‰Whe
 )

3383 
	`E¼Ü
(
	`Ex³ùedTok’
("whe").
	`Add»ssOf
(), &
t
);

3384  
node
;

3387 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

3389 
	`G‘Tok’
(&
t
);

3390 ifĞ
t
.
ty³
 !ğ
‰O³nP¬ªthesis
 )

3392 
	`E¼Ü
(
	`Ex³ùedTok’
("(").
	`Add»ssOf
(), &
t
);

3393  
node
;

3396 
node
->
	`AddChdLa¡
(
	`P¬£Assignm’t
());

3397 ifĞ
isSyÁaxE¼Ü
 )  
node
;

3399 
	`G‘Tok’
(&
t
);

3400 ifĞ
t
.
ty³
 !ğ
‰Clo£P¬ªthesis
 )

3402 
	`E¼Ü
(
	`Ex³ùedTok’
(")").
	`Add»ssOf
(), &
t
);

3403  
node
;

3406 
node
->
	`AddChdLa¡
(
	`P¬£S‹m’t
());

3408  
node
;

3409 
	}
}

3411 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£DoWhe
()

3413 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢DoWhe
);

3414 ifĞ
node
 == 0 )  0;

3416 
sTok’
 
t
;

3417 
	`G‘Tok’
(&
t
);

3418 ifĞ
t
.
ty³
 !ğ
‰Do
 )

3420 
	`E¼Ü
(
	`Ex³ùedTok’
("do").
	`Add»ssOf
(), &
t
);

3421  
node
;

3424 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

3426 
node
->
	`AddChdLa¡
(
	`P¬£S‹m’t
());

3427 ifĞ
isSyÁaxE¼Ü
 )  
node
;

3429 
	`G‘Tok’
(&
t
);

3430 ifĞ
t
.
ty³
 !ğ
‰Whe
 )

3432 
	`E¼Ü
(
	`Ex³ùedTok’
("whe").
	`Add»ssOf
(), &
t
);

3433  
node
;

3436 
	`G‘Tok’
(&
t
);

3437 ifĞ
t
.
ty³
 !ğ
‰O³nP¬ªthesis
 )

3439 
	`E¼Ü
(
	`Ex³ùedTok’
("(").
	`Add»ssOf
(), &
t
);

3440  
node
;

3443 
node
->
	`AddChdLa¡
(
	`P¬£Assignm’t
());

3444 ifĞ
isSyÁaxE¼Ü
 )  
node
;

3446 
	`G‘Tok’
(&
t
);

3447 ifĞ
t
.
ty³
 !ğ
‰Clo£P¬ªthesis
 )

3449 
	`E¼Ü
(
	`Ex³ùedTok’
(")").
	`Add»ssOf
(), &
t
);

3450  
node
;

3453 
	`G‘Tok’
(&
t
);

3454 ifĞ
t
.
ty³
 !ğ
‰EndS‹m’t
 )

3456 
	`E¼Ü
(
	`Ex³ùedTok’
(";").
	`Add»ssOf
(), &
t
);

3457  
node
;

3459 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

3461  
node
;

3462 
	}
}

3464 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£R‘uº
()

3466 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢R‘uº
);

3467 ifĞ
node
 == 0 )  0;

3469 
sTok’
 
t
;

3470 
	`G‘Tok’
(&
t
);

3471 ifĞ
t
.
ty³
 !ğ
‰R‘uº
 )

3473 
	`E¼Ü
(
	`Ex³ùedTok’
("»tuº").
	`Add»ssOf
(), &
t
);

3474  
node
;

3477 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

3479 
	`G‘Tok’
(&
t
);

3480 ifĞ
t
.
ty³
 =ğ
‰EndS‹m’t
 )

3482 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

3483  
node
;

3486 
	`RewšdTo
(&
t
);

3488 
node
->
	`AddChdLa¡
(
	`P¬£Assignm’t
());

3489 ifĞ
isSyÁaxE¼Ü
 )  
node
;

3491 
	`G‘Tok’
(&
t
);

3492 ifĞ
t
.
ty³
 !ğ
‰EndS‹m’t
 )

3494 
	`E¼Ü
(
	`Ex³ùedTok’
(";").
	`Add»ssOf
(), &
t
);

3495  
node
;

3498 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

3500  
node
;

3501 
	}
}

3503 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£B»ak
()

3505 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢B»ak
);

3506 ifĞ
node
 == 0 )  0;

3508 
sTok’
 
t
;

3509 
	`G‘Tok’
(&
t
);

3510 ifĞ
t
.
ty³
 !ğ
‰B»ak
 )

3512 
	`E¼Ü
(
	`Ex³ùedTok’
("b»ak").
	`Add»ssOf
(), &
t
);

3513  
node
;

3516 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

3518 
	`G‘Tok’
(&
t
);

3519 ifĞ
t
.
ty³
 !ğ
‰EndS‹m’t
 )

3520 
	`E¼Ü
(
	`Ex³ùedTok’
(";").
	`Add»ssOf
(), &
t
);

3522 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

3524  
node
;

3525 
	}
}

3527 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£CÚtšue
()

3529 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢CÚtšue
);

3530 ifĞ
node
 == 0 )  0;

3532 
sTok’
 
t
;

3533 
	`G‘Tok’
(&
t
);

3534 ifĞ
t
.
ty³
 !ğ
‰CÚtšue
 )

3536 
	`E¼Ü
(
	`Ex³ùedTok’
("cÚtšue").
	`Add»ssOf
(), &
t
);

3537  
node
;

3540 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

3542 
	`G‘Tok’
(&
t
);

3543 ifĞ
t
.
ty³
 !ğ
‰EndS‹m’t
 )

3544 
	`E¼Ü
(
	`Ex³ùedTok’
(";").
	`Add»ssOf
(), &
t
);

3546 
node
->
	`Upd©eSourûPos
(
t
.
pos
,.
Ëngth
);

3548  
node
;

3549 
	}
}

3552 
asCSütNode
 *
	gasCP¬£r
::
	$P¬£Ty³def
()

3555 
asCSütNode
 *
node
 = 
	`C»©eNode
(
¢Ty³def
);

3556 ifĞ
node
 == 0 )  0;

3558 
sTok’
 
tok’
;

3560 
	`G‘Tok’
(&
tok’
);

3561 ifĞ
tok’
.
ty³
 !ğ
‰Ty³def
)

3563 
	`E¼Ü
(
	`Ex³ùedTok’
(
asCTok’iz”
::
	`G‘Defš™iÚ
(
tok’
.
ty³
)).
	`Add»ssOf
(), &token);

3564  
node
;

3567 
node
->
	`S‘Tok’
(&
tok’
);

3568 
node
->
	`Upd©eSourûPos
(
tok’
.
pos
,ok’.
Ëngth
);

3571 
	`G‘Tok’
(&
tok’
);

3572 
	`RewšdTo
(&
tok’
);

3575 ifĞ!
	`IsR—lTy³
(
tok’
.
ty³
è||ok’.ty³ =ğ
‰Void
 )

3577 
asCSŒšg
 
¡r
;

3578 
¡r
.
	`FÜm©
(
TXT_UNEXPECTED_TOKEN_s
, 
asCTok’iz”
::
	`G‘Defš™iÚ
(
tok’
.
ty³
));

3579 
	`E¼Ü
(
¡r
.
	`Add»ssOf
(), &
tok’
);

3580  
node
;

3583 
node
->
	`AddChdLa¡
(
	`P¬£R—lTy³
());

3584 
node
->
	`AddChdLa¡
(
	`P¬£Id’tif›r
());

3587 
	`G‘Tok’
(&
tok’
);

3588 ifĞ
tok’
.
ty³
 !ğ
‰EndS‹m’t
 )

3590 
	`RewšdTo
(&
tok’
);

3591 
	`E¼Ü
(
	`Ex³ùedTok’
(
asCTok’iz”
::
	`G‘Defš™iÚ
(
tok’
.
ty³
)).
	`Add»ssOf
(), &token);

3594  
node
;

3595 
	}
}

3597 
	gasCP¬£r
::
	$P¬£M‘hodOv”rideBehaviÜs
(
asCSütNode
 *
funcNode
)

3599 
sTok’
 
t1
;

3603 
	`G‘Tok’
(&
t1
);

3604 
	`RewšdTo
(&
t1
);

3606 ifĞ
	`Id’tif›rIs
(
t1
, 
FINAL_TOKEN
è|| Id’tif›rIsÑ1, 
OVERRIDE_TOKEN
) )

3607 
funcNode
->
	`AddChdLa¡
(
	`P¬£Id’tif›r
());

3611 
	}
}

3614 
	gEND_AS_NAMESPACE


	@../src/script/as_restore.cpp

38 
	~"as_cÚfig.h
"

39 
	~"as_»¡Üe.h
"

40 
	~"as_by‹code.h
"

41 
	~"as_sütobjeù.h
"

42 
	~"as_‹xts.h
"

44 
BEGIN_AS_NAMESPACE


46 
	gasCR—d”
::
	$asCR—d”
(
asCModuË
* 
_moduË
, 
asIBš¬ySŒ—m
* 
_¡»am
, 
asCSütEngše
* 
_’gše
)

47 : 
	`moduË
(
_moduË
), 
	`¡»am
(
_¡»am
), 
	$’gše
(
_’gše
)

49 
”rÜ
 = 
çl£
;

50 
	}
}

52 
	gasCR—d”
::
	$R—dD©a
(*
d©a
, 
asUINT
 
size
)

54 
	`asASSERT
(
size
 == 1 || size == 2 || size == 4 || size == 8);

55 #ià
	`defšed
(
AS_BIG_ENDIAN
)

56  
asUINT
 
n
 = 0;‚ < 
size
;‚++ )

57 
¡»am
->
	`R—d
(((
asBYTE
*)
d©a
)+
n
, 1);

59  
n
 = 
size
-1;‚ >= 0;‚-- )

60 
¡»am
->
	`R—d
(((
asBYTE
*)
d©a
)+
n
, 1);

62 
	}
}

64 
	gasCR—d”
::
	$R—d
()

68 
moduË
->
	`IÁ”ÇlRe£t
();

71 
r
 = 
	`R—dIÂ”
();

72 ifĞ
r
 < 0 )

79 
asUINT
 
i
;

80  
i
 = 0; i < 
moduË
->
sütFunùiÚs
.
	`G‘L’gth
(); i++ )

81 ifĞ!
dÚtT¿n¦©e
.
	`MoveTo
(0, 
moduË
->
sütFunùiÚs
[
i
]) )

82 
moduË
->
sütFunùiÚs
[
i
]->
by‹Code
.
	`S‘L’gth
(0);

83  
i
 = 0; i < 
moduË
->
sütGlob®s
.
	`G‘L’gth
(); i++ )

84 ifĞ
moduË
->
sütGlob®s
[
i
]->
	`G‘In™Func
() )

85 
moduË
->
sütGlob®s
[
i
]->
	`G‘In™Func
()->
by‹Code
.
	`S‘L’gth
(0);

87 
moduË
->
	`IÁ”ÇlRe£t
();

92 
’gše
->
	`P»·»Engše
();

95 ifĞ
’gše
->
•
.
š™Glob®V¬sAá”Bud
 )

96 
r
 = 
moduË
->
	`Re£tGlob®V¬s
(0);

99  
r
;

100 
	}
}

102 
	gasCR—d”
::
	$R—dIÂ”
()

108 
’gše
->
deãrV®id©iÚOfTem¶©eTy³s
 = 
Œue
;

110 
i
, 
couÁ
;

112 
asCSütFunùiÚ
* 
func
;

115 
couÁ
 = 
	`R—dEncodedUIÁ
();

116 
moduË
->
’umTy³s
.
	`AÎoÿ‹
(
couÁ
, 0);

117  
i
 = 0; i < 
couÁ
 && !
”rÜ
; i++ )

119 
asCObjeùTy³
 *
Ù
 = 
	`asNEW
×sCObjeùTy³)(
’gše
);

120 ifĞ
Ù
 == 0 )

121  
asOUT_OF_MEMORY
;

123 
	`R—dObjeùTy³Deş¬©iÚ
(
Ù
, 1);

124 
’gše
->
şassTy³s
.
	`PushLa¡
(
Ù
);

125 
moduË
->
’umTy³s
.
	`PushLa¡
(
Ù
);

126 
Ù
->
	`AddRef
();

127 
	`R—dObjeùTy³Deş¬©iÚ
(
Ù
, 2);

130 ifĞ
”rÜ
 )  
asERROR
;

134 
couÁ
 = 
	`R—dEncodedUIÁ
();

135 
moduË
->
şassTy³s
.
	`AÎoÿ‹
(
couÁ
, 0);

136  
i
 = 0; i < 
couÁ
 && !
”rÜ
; ++i )

138 
asCObjeùTy³
 *
Ù
 = 
	`asNEW
×sCObjeùTy³)(
’gše
);

139 ifĞ
Ù
 == 0 )

140  
asOUT_OF_MEMORY
;

142 
	`R—dObjeùTy³Deş¬©iÚ
(
Ù
, 1);

145 
boŞ
 
sh¬edExi¡s
 = 
çl£
;

146 ifĞ
Ù
->
	`IsSh¬ed
() )

148  
asUINT
 
n
 = 0;‚ < 
’gše
->
şassTy³s
.
	`G‘L’gth
();‚++ )

150 
asCObjeùTy³
 *
t
 = 
’gše
->
şassTy³s
[
n
];

151 ifĞ
t
 &&

152 
t
->
	`IsSh¬ed
() &&

153 
t
->
Çme
 =ğ
Ù
->name &&

154 
t
->
	`IsIÁ”çû
(è=ğ
Ù
->IsInterface() )

156 
	`asDELETE
(
Ù
, 
asCObjeùTy³
);

157 
Ù
 = 
t
;

158 
sh¬edExi¡s
 = 
Œue
;

164 ifĞ
sh¬edExi¡s
 )

165 
exi¡šgSh¬ed
.
	`In£¹
(
Ù
, 
Œue
);

168 
’gše
->
şassTy³s
.
	`PushLa¡
(
Ù
);

171 ifĞ(
Ù
->
	`G‘FÏgs
(è& 
asOBJ_SCRIPT_OBJECT
è&& !Ù->
	`IsIÁ”çû
() )

172 
’gše
->
gc
.
	`AddSütObjeùToGC
(
Ù
, &’gše->
objeùTy³Behaviours
);

174 
moduË
->
şassTy³s
.
	`PushLa¡
(
Ù
);

175 
Ù
->
	`AddRef
();

178 ifĞ
”rÜ
 )  
asERROR
;

181 
couÁ
 = 
	`R—dEncodedUIÁ
();

182 
moduË
->
funcDefs
.
	`AÎoÿ‹
(
couÁ
, 0);

183  
i
 = 0; i < 
couÁ
 && !
”rÜ
; i++ )

185 
asCSütFunùiÚ
 *
func
 = 
	`R—dFunùiÚ
(
çl£
, 
Œue
);

186 ifĞ
func
 )

187 
moduË
->
funcDefs
.
	`PushLa¡
(
func
);

189 
”rÜ
 = 
Œue
;

193  
i
 = 0; i < 
moduË
->
şassTy³s
.
	`G‘L’gth
(è&& !
”rÜ
; i++ )

195 ifĞ
moduË
->
şassTy³s
[
i
]->
	`IsIÁ”çû
() )

196 
	`R—dObjeùTy³Deş¬©iÚ
(
moduË
->
şassTy³s
[
i
], 2);

200  
i
 = 0; i < 
moduË
->
şassTy³s
.
	`G‘L’gth
(è&& !
”rÜ
; ++i )

202 ifĞ!
moduË
->
şassTy³s
[
i
]->
	`IsIÁ”çû
() )

203 
	`R—dObjeùTy³Deş¬©iÚ
(
moduË
->
şassTy³s
[
i
], 2);

207  
i
 = 0; i < 
moduË
->
şassTy³s
.
	`G‘L’gth
(è&& !
”rÜ
; ++i )

209 ifĞ!
moduË
->
şassTy³s
[
i
]->
	`IsIÁ”çû
() )

210 
	`R—dObjeùTy³Deş¬©iÚ
(
moduË
->
şassTy³s
[
i
], 3);

213 ifĞ
”rÜ
 )  
asERROR
;

216 
couÁ
 = 
	`R—dEncodedUIÁ
();

217 
moduË
->
ty³Defs
.
	`AÎoÿ‹
(
couÁ
, 0);

218  
i
 = 0; i < 
couÁ
 && !
”rÜ
; i++ )

220 
asCObjeùTy³
 *
Ù
 = 
	`asNEW
×sCObjeùTy³)(
’gše
);

221 ifĞ
Ù
 == 0 )

222  
asOUT_OF_MEMORY
;

224 
	`R—dObjeùTy³Deş¬©iÚ
(
Ù
, 1);

225 
’gše
->
şassTy³s
.
	`PushLa¡
(
Ù
);

226 
moduË
->
ty³Defs
.
	`PushLa¡
(
Ù
);

227 
Ù
->
	`AddRef
();

228 
	`R—dObjeùTy³Deş¬©iÚ
(
Ù
, 2);

231 ifĞ
”rÜ
 )  
asERROR
;

234 
couÁ
 = 
	`R—dEncodedUIÁ
();

235 ifĞ
’gše
->
•
.
di§ÎowGlob®V¬s
 )

237 
’gše
->
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_ERROR
, 
TXT_GLOBAL_VARS_NOT_ALLOWED
);

238 
”rÜ
 = 
Œue
;

240 
moduË
->
sütGlob®s
.
	`AÎoÿ‹
(
couÁ
, 0);

241  
i
 = 0; i < 
couÁ
 && !
”rÜ
; ++i )

243 
	`R—dGlob®Prİ”ty
();

247 
couÁ
 = 
	`R—dEncodedUIÁ
();

248  
i
 = 0; i < 
couÁ
 && !
”rÜ
; ++i )

250 
size_t
 
Ën
 = 
moduË
->
sütFunùiÚs
.
	`G‘L’gth
();

251 
func
 = 
	`R—dFunùiÚ
();

252 ifĞ
func
 == 0 )

254 
”rÜ
 = 
Œue
;

259 ifĞ
func
->
isSh¬ed
 && 
Ën
 !ğ
moduË
->
sütFunùiÚs
.
	`G‘L’gth
() )

263  
asUINT
 
n
 = 0;‚ < 
’gše
->
sütFunùiÚs
.
	`G‘L’gth
(è&& !
”rÜ
;‚++ )

265 
asCSütFunùiÚ
 *
»®Func
 = 
’gše
->
sütFunùiÚs
[
n
];

266 ifĞ
»®Func
 &&

267 
»®Func
 !ğ
func
 &&

268 
»®Func
->
	`IsSh¬ed
() &&

269 
»®Func
->
	`IsSigÇtu»Equ®
(
func
) )

272 
moduË
->
sütFunùiÚs
[moduË->sütFunùiÚs.
	`G‘L’gth
()-1] = 
»®Func
;

273 
»®Func
->
	`AddRef
();

274 
§vedFunùiÚs
[§vedFunùiÚs.
	`G‘L’gth
()-1] = 
»®Func
;

275 
’gše
->
	`F»eSütFunùiÚId
(
func
->
id
);

278 
dÚtT¿n¦©e
.
	`In£¹
(
»®Func
, 
Œue
);

281 
func
->
id
 = 0;

282 
func
->
by‹Code
.
	`S‘L’gth
(0);

283 
func
->
	`R–—£
();

290 
couÁ
 = 
	`R—dEncodedUIÁ
();

291  
i
 = 0; i < 
couÁ
 && !
”rÜ
; ++i )

293 
func
 = 
	`R—dFunùiÚ
(
çl£
, false);

294 ifĞ
func
 )

296 
moduË
->
glob®FunùiÚs
.
	`PushLa¡
(
func
);

297 
func
->
	`AddRef
();

300 
”rÜ
 = 
Œue
;

303 ifĞ
”rÜ
 )  
asERROR
;

306 
couÁ
 = 
	`R—dEncodedUIÁ
();

307 
moduË
->
bšdInfÜm©iÚs
.
	`AÎoÿ‹
(
couÁ
, 0);

308  
i
 = 0; i < 
couÁ
 && !
”rÜ
; ++i )

310 
sBšdInfo
 *
šfo
 = 
	`asNEW
(sBindInfo);

311 ifĞ
šfo
 == 0 )

312  
asOUT_OF_MEMORY
;

314 
šfo
->
impÜ‹dFunùiÚSigÇtu»
 = 
	`R—dFunùiÚ
(
çl£
, false);

315 ifĞ
šfo
->
impÜ‹dFunùiÚSigÇtu»
 == 0 )

317 
”rÜ
 = 
Œue
;

321 ifĞ
’gše
->
ä“ImpÜ‹dFunùiÚIdxs
.
	`G‘L’gth
() )

323 
id
 = 
’gše
->
ä“ImpÜ‹dFunùiÚIdxs
.
	`PİLa¡
();

324 
šfo
->
impÜ‹dFunùiÚSigÇtu»
->
id
 = (
FUNC_IMPORTED
 + id);

325 
’gše
->
impÜ‹dFunùiÚs
[
id
] = 
šfo
;

329 
šfo
->
impÜ‹dFunùiÚSigÇtu»
->
id
 = (
FUNC_IMPORTED
 + 
’gše
->
impÜ‹dFunùiÚs
.
	`G‘L’gth
());

330 
’gše
->
impÜ‹dFunùiÚs
.
	`PushLa¡
(
šfo
);

332 
	`R—dSŒšg
(&
šfo
->
impÜtFromModuË
);

333 
šfo
->
boundFunùiÚId
 = -1;

334 
moduË
->
bšdInfÜm©iÚs
.
	`PushLa¡
(
šfo
);

337 ifĞ
”rÜ
 )  
asERROR
;

340 
couÁ
 = 
	`R—dEncodedUIÁ
();

341 
u£dTy³s
.
	`AÎoÿ‹
(
couÁ
, 0);

342  
i
 = 0; i < 
couÁ
 && !
”rÜ
; ++i )

344 
asCObjeùTy³
 *
Ù
 = 
	`R—dObjeùTy³
();

345 
u£dTy³s
.
	`PushLa¡
(
Ù
);

349 ifĞ!
”rÜ
 )

350 
	`R—dU£dTy³Ids
();

353 ifĞ!
”rÜ
 )

354 
	`R—dU£dFunùiÚs
();

357 ifĞ!
”rÜ
 )

358 
	`R—dU£dGlob®Prİs
();

361 ifĞ!
”rÜ
 )

362 
	`R—dU£dSŒšgCÚ¡ªts
();

365 ifĞ!
”rÜ
 )

366 
	`R—dU£dObjeùPrİs
();

369  
i
 = 0; i < 
u£dTy³s
.
	`G‘L’gth
(è&& !
”rÜ
; i++ )

371 ifĞ(
u£dTy³s
[
i
]->
æags
 & 
asOBJ_TEMPLATE
) &&

372 
u£dTy³s
[
i
]->
‹m¶©eSubTy³
.
	`IsV®id
() &&

373 
u£dTy³s
[
i
]->
beh
.
‹m¶©eC®lback
 )

375 
asCSütFunùiÚ
 *
ÿÎback
 = 
’gše
->
sütFunùiÚs
[
u£dTy³s
[
i
]->
beh
.
‹m¶©eC®lback
];

376 ifĞ!
’gše
->
	`C®lGlob®FunùiÚR‘BoŞ
(
u£dTy³s
[
i
], 0, 
ÿÎback
->
sysFuncIÁf
, callback) )

378 
asCSŒšg
 
¡r
;

379 
¡r
.
	`FÜm©
(
TXT_INSTANCING_INVLD_TMPL_TYPE_s_s
, 
u£dTy³s
[
i
]->
Çme
.
	`Add»ssOf
(), u£dTy³s[i]->
‹m¶©eSubTy³
.Format().AddressOf());

380 
’gše
->
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_ERROR
, 
¡r
.
	`Add»ssOf
());

381 
”rÜ
 = 
Œue
;

385 
’gše
->
deãrV®id©iÚOfTem¶©eTy³s
 = 
çl£
;

387 ifĞ
”rÜ
 )  
asERROR
;

391  
i
 = 0; i < 
moduË
->
sütFunùiÚs
.
	`G‘L’gth
(è&& !
”rÜ
; i++ )

392 ifĞ
moduË
->
sütFunùiÚs
[
i
]->
funcTy³
 =ğ
asFUNC_SCRIPT
 )

393 
	`T¿n¦©eFunùiÚ
(
moduË
->
sütFunùiÚs
[
i
]);

394  
i
 = 0; i < 
moduË
->
sütGlob®s
.
	`G‘L’gth
(è&& !
”rÜ
; i++ )

395 ifĞ
moduË
->
sütGlob®s
[
i
]->
	`G‘In™Func
() )

396 
	`T¿n¦©eFunùiÚ
(
moduË
->
sütGlob®s
[
i
]->
	`G‘In™Func
());

398 ifĞ
”rÜ
 )  
asERROR
;

401  
i
 = 0; i < 
moduË
->
sütFunùiÚs
.
	`G‘L’gth
(); i++ )

402 ifĞ!
dÚtT¿n¦©e
.
	`MoveTo
(0, 
moduË
->
sütFunùiÚs
[
i
]) )

403 
moduË
->
sütFunùiÚs
[
i
]->
	`AddReã»nûs
();

404  
i
 = 0; i < 
moduË
->
sütGlob®s
.
	`G‘L’gth
(); i++ )

405 ifĞ
moduË
->
sütGlob®s
[
i
]->
	`G‘In™Func
() )

406 
moduË
->
sütGlob®s
[
i
]->
	`G‘In™Func
()->
	`AddReã»nûs
();

408  
”rÜ
 ? 
asERROR
 : 
asSUCCESS
;

409 
	}
}

411 
	gasCR—d”
::
	$R—dU£dSŒšgCÚ¡ªts
()

413 
asCSŒšg
 
¡r
;

415 
asUINT
 
couÁ
;

416 
couÁ
 = 
	`R—dEncodedUIÁ
();

417 
u£dSŒšgCÚ¡ªts
.
	`AÎoÿ‹
(
couÁ
, 0);

418  
asUINT
 
i
 = 0; i < 
couÁ
; ++i )

420 
	`R—dSŒšg
(&
¡r
);

421 
u£dSŒšgCÚ¡ªts
.
	`PushLa¡
(
’gše
->
	`AddCÚ¡ªtSŒšg
(
¡r
.
	`Add»ssOf
(), sŒ.
	`G‘L’gth
()));

423 
	}
}

425 
	gasCR—d”
::
	$R—dU£dFunùiÚs
()

427 
asUINT
 
couÁ
;

428 
couÁ
 = 
	`R—dEncodedUIÁ
();

429 
u£dFunùiÚs
.
	`S‘L’gth
(
couÁ
);

430 
	`mem£t
(
u£dFunùiÚs
.
	`Add»ssOf
(), 0, (
asCSütFunùiÚ
 *)*
couÁ
);

432  
asUINT
 
n
 = 0;‚ < 
u£dFunùiÚs
.
	`G‘L’gth
();‚++ )

434 
c
;

439 
	`R—dD©a
(&
c
, 1);

441 ifĞ
c
 == 'n' )

444 
u£dFunùiÚs
[
n
] = 0;

448 
asCSütFunùiÚ
 
	`func
(
’gše
, 
c
 =ğ'm' ? 
moduË
 : 0, 
asFUNC_DUMMY
);

449 
	`R—dFunùiÚSigÇtu»
(&
func
);

452 ifĞ
c
 == 'm' )

454  
asUINT
 
i
 = 0; i < 
moduË
->
sütFunùiÚs
.
	`G‘L’gth
(); i++ )

456 
asCSütFunùiÚ
 *
f
 = 
moduË
->
sütFunùiÚs
[
i
];

457 ifĞ!
func
.
	`IsSigÇtu»Equ®
(
f
) ||

458 
func
.
objeùTy³
 !ğ
f
->objectType ||

459 
func
.
funcTy³
 !ğ
f
->funcType ||

460 
func
.
ÇmeS·û
 !ğ
f
->nameSpace )

463 
u£dFunùiÚs
[
n
] = 
f
;

469  
asUINT
 
i
 = 0; i < 
’gše
->
sütFunùiÚs
.
	`G‘L’gth
(); i++ )

471 
asCSütFunùiÚ
 *
f
 = 
’gše
->
sütFunùiÚs
[
i
];

472 ifĞ
f
 == 0 ||

473 !
func
.
	`IsSigÇtu»Equ®
(
f
) ||

474 
func
.
objeùTy³
 !ğ
f
->objectType ||

475 
func
.
ÇmeS·û
 !ğ
f
->nameSpace )

478 
u£dFunùiÚs
[
n
] = 
f
;

484 
func
.
funcTy³
 = 
asFUNC_DUMMY
;

487 
	}
}

489 
	gasCR—d”
::
	$R—dFunùiÚSigÇtu»
(
asCSütFunùiÚ
 *
func
)

491 
i
, 
couÁ
;

492 
asCD©aTy³
 
dt
;

493 
num
;

495 
	`R—dSŒšg
(&
func
->
Çme
);

496 
	`R—dD©aTy³
(&
func
->
»tuºTy³
);

498 
couÁ
 = 
	`R—dEncodedUIÁ
();

499 
func
->
·¿m‘”Ty³s
.
	`AÎoÿ‹
(
couÁ
, 0);

500  
i
 = 0; i < 
couÁ
; ++i )

502 
	`R—dD©aTy³
(&
dt
);

503 
func
->
·¿m‘”Ty³s
.
	`PushLa¡
(
dt
);

506 
couÁ
 = 
	`R—dEncodedUIÁ
();

507 
func
->
šOutFÏgs
.
	`AÎoÿ‹
(
couÁ
, 0);

508  
i
 = 0; i < 
couÁ
; ++i )

510 
num
 = 
	`R—dEncodedUIÁ
();

511 
func
->
šOutFÏgs
.
	`PushLa¡
(
¡©ic_ÿ¡
<
asETy³Modif›rs
>(
num
));

514 
func
->
funcTy³
 = (
asEFuncTy³
)
	`R—dEncodedUIÁ
();

517 
couÁ
 = 
	`R—dEncodedUIÁ
();

518 ifĞ
couÁ
 )

520 
func
->
deçuÉArgs
.
	`S‘L’gth
(func->
·¿m‘”Ty³s
.
	`G‘L’gth
());

521 
	`mem£t
(
func
->
deçuÉArgs
.
	`Add»ssOf
(), 0, (
asCSŒšg
*)*func->
·¿m‘”Ty³s
.
	`G‘L’gth
());

522  
i
 = 0; i < 
couÁ
; i++ )

524 
asCSŒšg
 *
¡r
 = 
	`asNEW
(asCString);

525 ifĞ
¡r
 == 0 )

528 
”rÜ
 = 
Œue
;

531 
func
->
deçuÉArgs
[func->deçuÉArgs.
	`G‘L’gth
()-1-
i
] = 
¡r
;

532 
	`R—dSŒšg
(
¡r
);

536 
func
->
objeùTy³
 = 
	`R—dObjeùTy³
();

537 ifĞ
func
->
objeùTy³
 )

539 
asBYTE
 
b
;

540 
	`R—dD©a
(&
b
, 1);

541 
func
->
isR—dOÆy
 = (
b
 & 1è? 
Œue
 : 
çl£
;

542 
func
->
isPriv©e
 = (
b
 & 2è? 
Œue
 : 
çl£
;

543 
func
->
ÇmeS·û
 = 
’gše
->
ÇmeS·ûs
[0];

547 
asCSŒšg
 
ns
;

548 
	`R—dSŒšg
(&
ns
);

549 
func
->
ÇmeS·û
 = 
’gše
->
	`AddNameS·û
(
ns
.
	`Add»ssOf
());

551 
	}
}

553 
asCSütFunùiÚ
 *
	gasCR—d”
::
	$R—dFunùiÚ
(
boŞ
 
addToModuË
, boŞ 
addToEngše
, boŞ 
addToGC
)

555 ifĞ
”rÜ
 )  0;

557 
c
;

558 
	`R—dD©a
(&
c
, 1);

560 ifĞ
c
 == '\0' )

566 ifĞ
c
 == 'r' )

569 
asUINT
 
šdex
 = 
	`R—dEncodedUIÁ
();

570 ifĞ
šdex
 < 
§vedFunùiÚs
.
	`G‘L’gth
() )

571  
§vedFunùiÚs
[
šdex
];

574 
”rÜ
 = 
Œue
;

580 
asCSütFunùiÚ
 *
func
 = 
	`asNEW
×sCSütFunùiÚ)(
’gše
,
moduË
,
asFUNC_DUMMY
);

581 ifĞ
func
 == 0 )

584 
”rÜ
 = 
Œue
;

587 
§vedFunùiÚs
.
	`PushLa¡
(
func
);

589 
i
, 
couÁ
;

590 
asCD©aTy³
 
dt
;

591 
num
;

593 
	`R—dFunùiÚSigÇtu»
(
func
);

595 
func
->
id
 = 
’gše
->
	`G‘NextSütFunùiÚId
();

597 ifĞ
func
->
funcTy³
 =ğ
asFUNC_SCRIPT
 )

599 ifĞ
addToGC
 )

600 
’gše
->
gc
.
	`AddSütObjeùToGC
(
func
, &’gše->
funùiÚBehaviours
);

602 
	`R—dBy‹Code
(
func
);

604 
func
->
v¬ŸbËS·û
 = 
	`R—dEncodedUIÁ
();

606 
couÁ
 = 
	`R—dEncodedUIÁ
();

607 
func
->
objV¬ŸbËPos
.
	`AÎoÿ‹
(
couÁ
, 0);

608 
func
->
objV¬ŸbËTy³s
.
	`AÎoÿ‹
(
couÁ
, 0);

609 
func
->
funcV¬ŸbËTy³s
.
	`AÎoÿ‹
(
couÁ
, 0);

610  
i
 = 0; i < 
couÁ
; ++i )

612 
func
->
objV¬ŸbËTy³s
.
	`PushLa¡
(
	`R—dObjeùTy³
());

613 
asUINT
 
idx
 = 
	`R—dEncodedUIÁ
();

614 
func
->
funcV¬ŸbËTy³s
.
	`PushLa¡
((
asCSütFunùiÚ
*)(
asPWORD
)
idx
);

615 
num
 = 
	`R—dEncodedUIÁ
();

616 
func
->
objV¬ŸbËPos
.
	`PushLa¡
(
num
);

618 ifĞ
couÁ
 > 0 )

619 
func
->
objV¬ŸbËsOnH—p
 = 
	`R—dEncodedUIÁ
();

621 
func
->
objV¬ŸbËsOnH—p
 = 0;

623 
Ëngth
 = 
	`R—dEncodedUIÁ
();

624 
func
->
objV¬ŸbËInfo
.
	`S‘L’gth
(
Ëngth
);

625  
i
 = 0; i < 
Ëngth
; ++i )

627 
func
->
objV¬ŸbËInfo
[
i
].
´og¿mPos
 = 
	`R—dEncodedUIÁ
();

628 
func
->
objV¬ŸbËInfo
[
i
].
v¬ŸbËOff£t
 = 
	`R—dEncodedUIÁ
();

629 
func
->
objV¬ŸbËInfo
[
i
].
İtiÚ
 = 
	`R—dEncodedUIÁ
();

632 
Ëngth
 = 
	`R—dEncodedUIÁ
();

633 
func
->
lšeNumb”s
.
	`S‘L’gth
(
Ëngth
);

634  
i
 = 0; i < 
Ëngth
; ++i )

635 
func
->
lšeNumb”s
[
i
] = 
	`R—dEncodedUIÁ
();

637 
	`R—dD©a
(&
func
->
isSh¬ed
, 1);

640 
Ëngth
 = 
	`R—dEncodedUIÁ
();

641 
func
->
v¬ŸbËs
.
	`AÎoÿ‹
(
Ëngth
, 0);

642  
i
 = 0; i < 
Ëngth
; i++ )

644 
asSSütV¬ŸbË
 *
v¬
 = 
	`asNEW
(asSScriptVariable);

645 ifĞ
v¬
 == 0 )

648 
”rÜ
 = 
Œue
;

651 
func
->
v¬ŸbËs
.
	`PushLa¡
(
v¬
);

653 
v¬
->
deş¬edAtProg¿mPos
 = 
	`R—dEncodedUIÁ
();

654 
v¬
->
¡ackOff£t
 = 
	`R—dEncodedUIÁ
();

655 
	`R—dSŒšg
(&
v¬
->
Çme
);

656 
	`R—dD©aTy³
(&
v¬
->
ty³
);

659 ifĞ
func
->
funcTy³
 =ğ
asFUNC_VIRTUAL
 )

661 
func
->
vfTabËIdx
 = 
	`R—dEncodedUIÁ
();

665 
asCSŒšg
 
Çme
;

666 
	`R—dSŒšg
(&
Çme
);

667 
func
->
sütSeùiÚIdx
 = 
’gše
->
	`G‘SütSeùiÚNameIndex
(
Çme
.
	`Add»ssOf
());

669 ifĞ
addToModuË
 )

672 
moduË
->
sütFunùiÚs
.
	`PushLa¡
(
func
);

674 ifĞ
addToEngše
 )

675 
’gše
->
	`S‘SütFunùiÚ
(
func
);

676 ifĞ
func
->
objeùTy³
 )

677 
func
->
	`Compu‹SigÇtu»Id
();

679  
func
;

680 
	}
}

682 
	gasCR—d”
::
	$R—dObjeùTy³Deş¬©iÚ
(
asCObjeùTy³
 *
Ù
, 
pha£
)

684 ifĞ
pha£
 == 1 )

687 
	`R—dSŒšg
(&
Ù
->
Çme
);

688 
	`R—dD©a
(&
Ù
->
æags
, 4);

689 
Ù
->
size
 = 
	`R—dEncodedUIÁ
();

690 
asCSŒšg
 
ns
;

691 
	`R—dSŒšg
(&
ns
);

692 
Ù
->
ÇmeS·û
 = 
’gše
->
	`AddNameS·û
(
ns
.
	`Add»ssOf
());

695 ifĞ(
Ù
->
æags
 & 
asOBJ_SCRIPT_OBJECT
è&& ot->
size
 != 0 )

696 
Ù
->
size
 = (
asCSütObjeù
);

699 
Ù
->
beh
 = 
’gše
->
sütTy³Behaviours
.beh;

700 
Ù
->
beh
.
cÚ¡ruù
 = 0;

701 
Ù
->
beh
.
çùÜy
 = 0;

702 
Ù
->
beh
.
cÚ¡ruùÜs
.
	`PİLa¡
();

703 
Ù
->
beh
.
çùÜ›s
.
	`PİLa¡
();

704 
’gše
->
sütFunùiÚs
[
Ù
->
beh
.
add»f
]->
	`AddRef
();

705 
’gše
->
sütFunùiÚs
[
Ù
->
beh
.
»Ëa£
]->
	`AddRef
();

706 
’gše
->
sütFunùiÚs
[
Ù
->
beh
.
gcEnumReã»nûs
]->
	`AddRef
();

707 
’gše
->
sütFunùiÚs
[
Ù
->
beh
.
gcG‘FÏg
]->
	`AddRef
();

708 
’gše
->
sütFunùiÚs
[
Ù
->
beh
.
gcG‘RefCouÁ
]->
	`AddRef
();

709 
’gše
->
sütFunùiÚs
[
Ù
->
beh
.
gcR–—£AÎReã»nûs
]->
	`AddRef
();

710 
’gše
->
sütFunùiÚs
[
Ù
->
beh
.
gcS‘FÏg
]->
	`AddRef
();

711 
’gše
->
sütFunùiÚs
[
Ù
->
beh
.
cİy
]->
	`AddRef
();

712  
asUINT
 
i
 = 1; i < 
Ù
->
beh
.
İ”©Üs
.
	`G‘L’gth
(); i += 2 )

713 
’gše
->
sütFunùiÚs
[
Ù
->
beh
.
İ”©Üs
[
i
]]->
	`AddRef
();

715 ifĞ
pha£
 == 2 )

717 ifĞ
Ù
->
æags
 & 
asOBJ_ENUM
 )

719 
couÁ
 = 
	`R—dEncodedUIÁ
();

720 
Ù
->
’umV®ues
.
	`AÎoÿ‹
(
couÁ
, 0);

721  
n
 = 0;‚ < 
couÁ
;‚++ )

723 
asSEnumV®ue
 *
e
 = 
	`asNEW
(asSEnumValue);

724 ifĞ
e
 == 0 )

727 
”rÜ
 = 
Œue
;

730 
	`R—dSŒšg
(&
e
->
Çme
);

731 
	`R—dD©a
(&
e
->
v®ue
, 4);

732 
Ù
->
’umV®ues
.
	`PushLa¡
(
e
);

735 ifĞ
Ù
->
æags
 & 
asOBJ_TYPEDEF
 )

737 
eTok’Ty³
 
t
 = (eTok’Ty³)
	`R—dEncodedUIÁ
();

738 
Ù
->
‹m¶©eSubTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
t
, 
çl£
);

744 
boŞ
 
sh¬edExi¡s
 = 
exi¡šgSh¬ed
.
	`MoveTo
(0, 
Ù
);

745 ifĞ
sh¬edExi¡s
 )

747 
asCObjeùTy³
 *
dt
 = 
	`R—dObjeùTy³
();

748 ifĞ
Ù
->
d”ivedFrom
 !ğ
dt
 )

751 
”rÜ
 = 
Œue
;

756 
Ù
->
d”ivedFrom
 = 
	`R—dObjeùTy³
();

757 ifĞ
Ù
->
d”ivedFrom
 )

758 
Ù
->
d”ivedFrom
->
	`AddRef
();

762 
size
 = 
	`R—dEncodedUIÁ
();

763 ifĞ
sh¬edExi¡s
 )

765  
n
 = 0;‚ < 
size
;‚++ )

767 
asCObjeùTy³
 *
štf
 = 
	`R—dObjeùTy³
();

768 ifĞ!
Ù
->
	`Im¶em’ts
(
štf
) )

771 
”rÜ
 = 
Œue
;

777 
Ù
->
š‹rçûs
.
	`AÎoÿ‹
(
size
,0);

778  
n
 = 0;‚ < 
size
;‚++ )

780 
asCObjeùTy³
 *
štf
 = 
	`R—dObjeùTy³
();

781 
Ù
->
š‹rçûs
.
	`PushLa¡
(
štf
);

786 ifĞ!
Ù
->
	`IsIÁ”çû
(è&& ot->
æags
 !ğ
asOBJ_TYPEDEF
 && ot->æag !ğ
asOBJ_ENUM
 )

788 
asCSütFunùiÚ
 *
func
 = 
	`R—dFunùiÚ
(!
sh¬edExi¡s
, !sharedExists, !sharedExists);

789 ifĞ
sh¬edExi¡s
 )

792 
asCSütFunùiÚ
 *
»®Func
 = 
’gše
->
	`G‘SütFunùiÚ
(
Ù
->
beh
.
de¡ruù
);

793 ifĞ(
»®Func
 =ğ0 && 
func
 =ğ0è||„—lFunc->
	`IsSigÇtu»Equ®
(func) )

796 ifĞ
func
 && 
§vedFunùiÚs
[§vedFunùiÚs.
	`G‘L’gth
()-1] == func )

797 
§vedFunùiÚs
[§vedFunùiÚs.
	`G‘L’gth
()-1] = 
»®Func
;

802 
”rÜ
 = 
Œue
;

805 ifĞ
func
 )

807 
func
->
id
 = 0;

808 
func
->
by‹Code
.
	`S‘L’gth
(0);

809 
func
->
	`R–—£
();

810 
moduË
->
sütFunùiÚs
.
	`PushLa¡
(
»®Func
);

811 
»®Func
->
	`AddRef
();

812 
dÚtT¿n¦©e
.
	`In£¹
(
»®Func
, 
Œue
);

817 ifĞ
func
 )

819 
Ù
->
beh
.
de¡ruù
 = 
func
->
id
;

820 
func
->
	`AddRef
();

823 
Ù
->
beh
.
de¡ruù
 = 0;

826 
size
 = 
	`R—dEncodedUIÁ
();

827  
n
 = 0;‚ < 
size
;‚++ )

829 
asCSütFunùiÚ
 *
func
 = 
	`R—dFunùiÚ
(!
sh¬edExi¡s
, !sharedExists, !sharedExists);

830 ifĞ
func
 )

832 ifĞ
sh¬edExi¡s
 )

835 
boŞ
 
found
 = 
çl£
;

836  
asUINT
 
n
 = 0;‚ < 
Ù
->
beh
.
cÚ¡ruùÜs
.
	`G‘L’gth
();‚++ )

838 
asCSütFunùiÚ
 *
»®Func
 = 
’gše
->
	`G‘SütFunùiÚ
(
Ù
->
beh
.
cÚ¡ruùÜs
[
n
]);

839 ifĞ
»®Func
->
	`IsSigÇtu»Equ®
(
func
) )

842 ifĞ
§vedFunùiÚs
[§vedFunùiÚs.
	`G‘L’gth
()-1] =ğ
func
 )

843 
§vedFunùiÚs
[§vedFunùiÚs.
	`G‘L’gth
()-1] = 
»®Func
;

844 
found
 = 
Œue
;

845 
moduË
->
sütFunùiÚs
.
	`PushLa¡
(
»®Func
);

846 
»®Func
->
	`AddRef
();

847 
dÚtT¿n¦©e
.
	`In£¹
(
»®Func
, 
Œue
);

851 ifĞ!
found
 )

854 
”rÜ
 = 
Œue
;

857 
func
->
id
 = 0;

858 
func
->
by‹Code
.
	`S‘L’gth
(0);

859 
func
->
	`R–—£
();

863 
Ù
->
beh
.
cÚ¡ruùÜs
.
	`PushLa¡
(
func
->
id
);

864 
func
->
	`AddRef
();

866 ifĞ
func
->
·¿m‘”Ty³s
.
	`G‘L’gth
() == 0 )

867 
Ù
->
beh
.
cÚ¡ruù
 = 
func
->
id
;

873 
”rÜ
 = 
Œue
;

876 
func
 = 
	`R—dFunùiÚ
(!
sh¬edExi¡s
, !sharedExists, !sharedExists);

877 ifĞ
func
 )

879 ifĞ
sh¬edExi¡s
 )

882 
boŞ
 
found
 = 
çl£
;

883  
asUINT
 
n
 = 0;‚ < 
Ù
->
beh
.
çùÜ›s
.
	`G‘L’gth
();‚++ )

885 
asCSütFunùiÚ
 *
»®Func
 = 
’gše
->
	`G‘SütFunùiÚ
(
Ù
->
beh
.
çùÜ›s
[
n
]);

886 ifĞ
»®Func
->
	`IsSigÇtu»Equ®
(
func
) )

889 ifĞ
§vedFunùiÚs
[§vedFunùiÚs.
	`G‘L’gth
()-1] =ğ
func
 )

890 
§vedFunùiÚs
[§vedFunùiÚs.
	`G‘L’gth
()-1] = 
»®Func
;

891 
found
 = 
Œue
;

892 
moduË
->
sütFunùiÚs
.
	`PushLa¡
(
»®Func
);

893 
»®Func
->
	`AddRef
();

894 
dÚtT¿n¦©e
.
	`In£¹
(
»®Func
, 
Œue
);

898 ifĞ!
found
 )

901 
”rÜ
 = 
Œue
;

904 
func
->
id
 = 0;

905 
func
->
by‹Code
.
	`S‘L’gth
(0);

906 
func
->
	`R–—£
();

910 
Ù
->
beh
.
çùÜ›s
.
	`PushLa¡
(
func
->
id
);

911 
func
->
	`AddRef
();

913 ifĞ
func
->
·¿m‘”Ty³s
.
	`G‘L’gth
() == 0 )

914 
Ù
->
beh
.
çùÜy
 = 
func
->
id
;

920 
”rÜ
 = 
Œue
;

926 
size
 = 
	`R—dEncodedUIÁ
();

927 
n
;

928  
n
 = 0;‚ < 
size
;‚++ )

930 
asCSütFunùiÚ
 *
func
 = 
	`R—dFunùiÚ
(!
sh¬edExi¡s
, !sharedExists, !sharedExists);

931 ifĞ
func
 )

933 ifĞ
sh¬edExi¡s
 )

936 
boŞ
 
found
 = 
çl£
;

937  
asUINT
 
n
 = 0;‚ < 
Ù
->
m‘hods
.
	`G‘L’gth
();‚++ )

939 
asCSütFunùiÚ
 *
»®Func
 = 
’gše
->
	`G‘SütFunùiÚ
(
Ù
->
m‘hods
[
n
]);

940 ifĞ
»®Func
->
	`IsSigÇtu»Equ®
(
func
) )

943 ifĞ
§vedFunùiÚs
[§vedFunùiÚs.
	`G‘L’gth
()-1] =ğ
func
 )

944 
§vedFunùiÚs
[§vedFunùiÚs.
	`G‘L’gth
()-1] = 
»®Func
;

945 
found
 = 
Œue
;

946 
moduË
->
sütFunùiÚs
.
	`PushLa¡
(
»®Func
);

947 
»®Func
->
	`AddRef
();

948 
dÚtT¿n¦©e
.
	`In£¹
(
»®Func
, 
Œue
);

952 ifĞ!
found
 )

955 
”rÜ
 = 
Œue
;

959 ifĞ!
§vedFunùiÚs
.
	`Exi¡s
(
func
) )

962 
func
->
id
 = 0;

963 
func
->
by‹Code
.
	`S‘L’gth
(0);

964 
func
->
	`R–—£
();

969 
Ù
->
m‘hods
.
	`PushLa¡
(
func
->
id
);

970 
func
->
	`AddRef
();

976 
”rÜ
 = 
Œue
;

981 
size
 = 
	`R—dEncodedUIÁ
();

982  
n
 = 0;‚ < 
size
;‚++ )

984 
asCSütFunùiÚ
 *
func
 = 
	`R—dFunùiÚ
(!
sh¬edExi¡s
, !sharedExists, !sharedExists);

985 ifĞ
func
 )

987 ifĞ
sh¬edExi¡s
 )

990 
boŞ
 
found
 = 
çl£
;

991  
asUINT
 
n
 = 0;‚ < 
Ù
->
vœtu®FunùiÚTabË
.
	`G‘L’gth
();‚++ )

993 
asCSütFunùiÚ
 *
»®Func
 = 
Ù
->
vœtu®FunùiÚTabË
[
n
];

994 ifĞ
»®Func
->
	`IsSigÇtu»Equ®
(
func
) )

997 ifĞ
§vedFunùiÚs
[§vedFunùiÚs.
	`G‘L’gth
()-1] =ğ
func
 )

998 
§vedFunùiÚs
[§vedFunùiÚs.
	`G‘L’gth
()-1] = 
»®Func
;

999 
found
 = 
Œue
;

1000 
moduË
->
sütFunùiÚs
.
	`PushLa¡
(
»®Func
);

1001 
»®Func
->
	`AddRef
();

1002 
dÚtT¿n¦©e
.
	`In£¹
(
»®Func
, 
Œue
);

1006 ifĞ!
found
 )

1009 
”rÜ
 = 
Œue
;

1013 ifĞ!
§vedFunùiÚs
.
	`Exi¡s
(
func
) )

1016 
func
->
id
 = 0;

1017 
func
->
by‹Code
.
	`S‘L’gth
(0);

1018 
func
->
	`R–—£
();

1023 
Ù
->
vœtu®FunùiÚTabË
.
	`PushLa¡
(
func
);

1024 
func
->
	`AddRef
();

1030 
”rÜ
 = 
Œue
;

1035 ifĞ
pha£
 == 3 )

1038 
asUINT
 
size
 = 
	`R—dEncodedUIÁ
();

1039  
asUINT
 
n
 = 0;‚ < 
size
;‚++ )

1040 
	`R—dObjeùPrİ”ty
(
Ù
);

1042 
	}
}

1044 
asWORD
 
	gasCR—d”
::
	$R—dEncodedUIÁ16
()

1046 
asDWORD
 
dw
 = 
	`R—dEncodedUIÁ
();

1047 ifĞ(
dw
>>16) != 0 && (dw>>16) != 0xFFFF )

1050 
”rÜ
 = 
Œue
;

1053  
	`asWORD
(
dw
 & 0xFFFF);

1054 
	}
}

1056 
asUINT
 
	gasCR—d”
::
	$R—dEncodedUIÁ
()

1058 
asQWORD
 
qw
 = 
	`R—dEncodedUIÁ64
();

1059 ifĞ(
qw
>>32) != 0 && (qw>>32) != 0xFFFFFFFF )

1062 
”rÜ
 = 
Œue
;

1065  
	`asUINT
(
qw
 & 0xFFFFFFFFu);

1066 
	}
}

1068 
asQWORD
 
	gasCR—d”
::
	$R—dEncodedUIÁ64
()

1070 
asQWORD
 
i
 = 0;

1071 
asBYTE
 
b
;

1072 
	`R—dD©a
(&
b
, 1);

1073 
boŞ
 
isNeg©ive
 = ( 
b
 & 0x80 ) ? 
Œue
 : 
çl£
;

1074 
b
 &= 0x7F;

1076 ifĞ(
b
 & 0x7F) == 0x7F )

1078 
	`R—dD©a
(&
b
, 1); 
i
 = 
	`asQWORD
(b) << 56;

1079 
	`R—dD©a
(&
b
, 1); 
i
 +ğ
	`asQWORD
(b) << 48;

1080 
	`R—dD©a
(&
b
, 1); 
i
 +ğ
	`asQWORD
(b) << 40;

1081 
	`R—dD©a
(&
b
, 1); 
i
 +ğ
	`asQWORD
(b) << 32;

1082 
	`R—dD©a
(&
b
, 1); 
i
 +ğ
	`asUINT
(b) << 24;

1083 
	`R—dD©a
(&
b
, 1); 
i
 +ğ
	`asUINT
(b) << 16;

1084 
	`R—dD©a
(&
b
, 1); 
i
 +ğ
	`asUINT
(b) << 8;

1085 
	`R—dD©a
(&
b
, 1); 
i
 += b;

1087 ifĞ(
b
 & 0x7E) == 0x7E )

1089 
i
 = 
	`asQWORD
(
b
 & 0x01) << 48;

1090 
	`R—dD©a
(&
b
, 1); 
i
 +ğ
	`asQWORD
(b) << 40;

1091 
	`R—dD©a
(&
b
, 1); 
i
 +ğ
	`asQWORD
(b) << 32;

1092 
	`R—dD©a
(&
b
, 1); 
i
 +ğ
	`asUINT
(b) << 24;

1093 
	`R—dD©a
(&
b
, 1); 
i
 +ğ
	`asUINT
(b) << 16;

1094 
	`R—dD©a
(&
b
, 1); 
i
 +ğ
	`asUINT
(b) << 8;

1095 
	`R—dD©a
(&
b
, 1); 
i
 += b;

1097 ifĞ(
b
 & 0x7C) == 0x7C )

1099 
i
 = 
	`asQWORD
(
b
 & 0x03) << 40;

1100 
	`R—dD©a
(&
b
, 1); 
i
 +ğ
	`asQWORD
(b) << 32;

1101 
	`R—dD©a
(&
b
, 1); 
i
 +ğ
	`asUINT
(b) << 24;

1102 
	`R—dD©a
(&
b
, 1); 
i
 +ğ
	`asUINT
(b) << 16;

1103 
	`R—dD©a
(&
b
, 1); 
i
 +ğ
	`asUINT
(b) << 8;

1104 
	`R—dD©a
(&
b
, 1); 
i
 += b;

1106 ifĞ(
b
 & 0x78) == 0x78 )

1108 
i
 = 
	`asQWORD
(
b
 & 0x07) << 32;

1109 
	`R—dD©a
(&
b
, 1); 
i
 +ğ
	`asUINT
(b) << 24;

1110 
	`R—dD©a
(&
b
, 1); 
i
 +ğ
	`asUINT
(b) << 16;

1111 
	`R—dD©a
(&
b
, 1); 
i
 +ğ
	`asUINT
(b) << 8;

1112 
	`R—dD©a
(&
b
, 1); 
i
 += b;

1114 ifĞ(
b
 & 0x70) == 0x70 )

1116 
i
 = 
	`asUINT
(
b
 & 0x0F) << 24;

1117 
	`R—dD©a
(&
b
, 1); 
i
 +ğ
	`asUINT
(b) << 16;

1118 
	`R—dD©a
(&
b
, 1); 
i
 +ğ
	`asUINT
(b) << 8;

1119 
	`R—dD©a
(&
b
, 1); 
i
 += b;

1121 ifĞ(
b
 & 0x60) == 0x60 )

1123 
i
 = 
	`asUINT
(
b
 & 0x1F) << 16;

1124 
	`R—dD©a
(&
b
, 1); 
i
 +ğ
	`asUINT
(b) << 8;

1125 
	`R—dD©a
(&
b
, 1); 
i
 += b;

1127 ifĞ(
b
 & 0x40) == 0x40 )

1129 
i
 = 
	`asUINT
(
b
 & 0x3F) << 8;

1130 
	`R—dD©a
(&
b
, 1); 
i
 += b;

1134 
i
 = 
b
;

1136 ifĞ
isNeg©ive
 )

1137 
i
 = (
asQWORD
)(-
	`asINT64
(i));

1139  
i
;

1140 
	}
}

1142 
	gasCR—d”
::
	$R—dSŒšg
(
asCSŒšg
* 
¡r
)

1144 
b
;

1145 
	`R—dD©a
(&
b
, 1);

1146 ifĞ
b
 == '\0' )

1148 
¡r
->
	`S‘L’gth
(0);

1150 ifĞ
b
 == 'n' )

1152 
asUINT
 
Ën
 = 
	`R—dEncodedUIÁ
();

1153 
¡r
->
	`S‘L’gth
(
Ën
);

1154 
¡»am
->
	`R—d
(
¡r
->
	`Add»ssOf
(), 
Ën
);

1156 
§vedSŒšgs
.
	`PushLa¡
(*
¡r
);

1160 
asUINT
 
n
 = 
	`R—dEncodedUIÁ
();

1161 ifĞ
n
 < 
§vedSŒšgs
.
	`G‘L’gth
() )

1162 *
¡r
 = 
§vedSŒšgs
[
n
];

1164 
”rÜ
 = 
Œue
;

1166 
	}
}

1168 
	gasCR—d”
::
	$R—dGlob®Prİ”ty
()

1170 
asCSŒšg
 
Çme
;

1171 
asCD©aTy³
 
ty³
;

1173 
	`R—dSŒšg
(&
Çme
);

1175 
asCSŒšg
 
ns
;

1176 
	`R—dSŒšg
(&
ns
);

1177 
asSNameS·û
 *
ÇmeS·û
 = 
’gše
->
	`AddNameS·û
(
ns
.
	`Add»ssOf
());

1179 
	`R—dD©aTy³
(&
ty³
);

1181 
asCGlob®Prİ”ty
 *
´İ
 = 
moduË
->
	`AÎoÿ‹Glob®Prİ”ty
(
Çme
.
	`Add»ssOf
(), 
ty³
, 
ÇmeS·û
);

1184 
boŞ
 
f
;

1185 
	`R—dD©a
(&
f
, 1);

1186 ifĞ
f
 )

1188 
asCSütFunùiÚ
 *
func
 = 
	`R—dFunùiÚ
(
çl£
, 
Œue
);

1189 ifĞ
func
 )

1191 
´İ
->
	`S‘In™Func
(
func
);

1192 
func
->
	`R–—£
();

1195 
”rÜ
 = 
Œue
;

1197 
	}
}

1199 
	gasCR—d”
::
	$R—dObjeùPrİ”ty
(
asCObjeùTy³
 *
Ù
)

1201 
asCSŒšg
 
Çme
;

1202 
	`R—dSŒšg
(&
Çme
);

1203 
asCD©aTy³
 
dt
;

1204 
	`R—dD©aTy³
(&
dt
);

1205 
boŞ
 
isPriv©e
;

1206 
	`R—dD©a
(&
isPriv©e
, 1);

1210 ifĞ!
exi¡šgSh¬ed
.
	`MoveTo
(0, 
Ù
) )

1211 
Ù
->
	`AddPrİ”tyToCÏss
(
Çme
, 
dt
, 
isPriv©e
);

1212 
	}
}

1214 
	gasCR—d”
::
	$R—dD©aTy³
(
asCD©aTy³
 *
dt
)

1216 
eTok’Ty³
 
tok’Ty³
;

1218 
tok’Ty³
 = (
eTok’Ty³
)
	`R—dEncodedUIÁ
();

1219 ifĞ
tok’Ty³
 == 0 )

1222 
asUINT
 
n
 = 
	`R—dEncodedUIÁ
();

1223 *
dt
 = 
§vedD©aTy³s
[
n
];

1228 
size_t
 
§veSlÙ
 = 
§vedD©aTy³s
.
	`G‘L’gth
();

1229 
§vedD©aTy³s
.
	`PushLa¡
(
	`asCD©aTy³
());

1232 
asCObjeùTy³
 *
objTy³
 = 0;

1233 
boŞ
 
isObjeùHªdË
 = 
çl£
;

1234 
boŞ
 
isR—dOÆy
 = 
çl£
;

1235 
boŞ
 
isHªdËToCÚ¡
 = 
çl£
;

1236 
boŞ
 
isReã»nû
 = 
çl£
;

1238 ifĞ
tok’Ty³
 =ğ
‰Id’tif›r
 )

1240 
objTy³
 = 
	`R—dObjeùTy³
();

1241 
	`R—dD©a
(&
isObjeùHªdË
, 1);

1242 
	`R—dD©a
(&
isHªdËToCÚ¡
, 1);

1244 
	`R—dD©a
(&
isReã»nû
, 1);

1245 
	`R—dD©a
(&
isR—dOÆy
, 1);

1247 
asCSütFunùiÚ
 *
funcDef
 = 0;

1248 ifĞ
tok’Ty³
 =ğ
‰Id’tif›r
 && 
objTy³
 && objTy³->
Çme
 == "_builtin_function_" )

1250 
asCSütFunùiÚ
 
	`func
(
’gše
, 
moduË
, 
asFUNC_DUMMY
);

1251 
	`R—dFunùiÚSigÇtu»
(&
func
);

1252  
asUINT
 
n
 = 0;‚ < 
’gše
->
»gi¡”edFuncDefs
.
	`G‘L’gth
();‚++ )

1255 ifĞ
’gše
->
»gi¡”edFuncDefs
[
n
]->
Çme
 =ğ
func
.name &&

1256 
’gše
->
»gi¡”edFuncDefs
[
n
]->
ÇmeS·û
 =ğ
func
.nameSpace )

1258 
funcDef
 = 
’gše
->
»gi¡”edFuncDefs
[
n
];

1263 ifĞ!
funcDef
 && 
moduË
 )

1265  
asUINT
 
n
 = 0;‚ < 
moduË
->
funcDefs
.
	`G‘L’gth
();‚++ )

1267 ifĞ
moduË
->
funcDefs
[
n
]->
Çme
 =ğ
func
.name &&

1268 
moduË
->
funcDefs
[
n
]->
ÇmeS·û
 =ğ
func
.nameSpace )

1270 
funcDef
 = 
moduË
->
funcDefs
[
n
];

1277 
func
.
funcTy³
 = 
asFUNC_DUMMY
;

1280 ifĞ
funcDef
 )

1281 *
dt
 = 
asCD©aTy³
::
	`C»©eFuncDef
(
funcDef
);

1282 ifĞ
tok’Ty³
 =ğ
‰Id’tif›r
 )

1283 *
dt
 = 
asCD©aTy³
::
	`C»©eObjeù
(
objTy³
, 
çl£
);

1285 *
dt
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
tok’Ty³
, 
çl£
);

1286 ifĞ
isObjeùHªdË
 )

1288 
dt
->
	`MakeR—dOÆy
(
isHªdËToCÚ¡
);

1289 
dt
->
	`MakeHªdË
(
Œue
);

1291 
dt
->
	`MakeR—dOÆy
(
isR—dOÆy
);

1292 
dt
->
	`MakeReã»nû
(
isReã»nû
);

1295 
§vedD©aTy³s
[
§veSlÙ
] = *
dt
;

1296 
	}
}

1298 
asCObjeùTy³
* 
	gasCR—d”
::
	$R—dObjeùTy³
()

1300 
asCObjeùTy³
 *
Ù
 = 0;

1301 
ch
;

1302 
	`R—dD©a
(&
ch
, 1);

1303 ifĞ
ch
 == 'a' )

1306 
asCSŒšg
 
ty³Name
;

1307 
	`R—dSŒšg
(&
ty³Name
);

1308 
asCObjeùTy³
 *
tm¶
 = 
’gše
->
	`G‘ObjeùTy³
(
ty³Name
.
	`Add»ssOf
(),ƒngše->
ÇmeS·ûs
[0]);

1309 ifĞ
tm¶
 == 0 )

1311 
asCSŒšg
 
¡r
;

1312 
¡r
.
	`FÜm©
(
TXT_TEMPLATE_TYPE_s_DOESNT_EXIST
, 
ty³Name
.
	`Add»ssOf
());

1313 
’gše
->
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_ERROR
, 
¡r
.
	`Add»ssOf
());

1314 
”rÜ
 = 
Œue
;

1318 
	`R—dD©a
(&
ch
, 1);

1319 ifĞ
ch
 == 's' )

1321 
asCD©aTy³
 
dt
;

1322 
	`R—dD©aTy³
(&
dt
);

1324 ifĞ
tm¶
->
‹m¶©eSubTy³
.
	`G‘ObjeùTy³
(è=ğ
dt
.GetObjectType() )

1325 
Ù
 = 
tm¶
;

1327 
Ù
 = 
’gše
->
	`G‘Tem¶©eIn¡ªûTy³
(
tm¶
, 
dt
);

1329 ifĞ
Ù
 == 0 )

1331 
asCSŒšg
 
¡r
;

1332 
¡r
.
	`FÜm©
(
TXT_INSTANCING_INVLD_TMPL_TYPE_s_s
, 
ty³Name
.
	`Add»ssOf
(), 
dt
.Format().AddressOf());

1333 
’gše
->
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_ERROR
, 
¡r
.
	`Add»ssOf
());

1334 
”rÜ
 = 
Œue
;

1340 
eTok’Ty³
 
tok’Ty³
 = (eTok’Ty³)
	`R—dEncodedUIÁ
();

1341 
asCD©aTy³
 
dt
 =‡sCD©aTy³::
	`C»©ePrim™ive
(
tok’Ty³
, 
çl£
);

1343 
Ù
 = 
’gše
->
	`G‘Tem¶©eIn¡ªûTy³
(
tm¶
, 
dt
);

1345 ifĞ
Ù
 == 0 )

1347 
asCSŒšg
 
¡r
;

1348 
¡r
.
	`FÜm©
(
TXT_INSTANCING_INVLD_TMPL_TYPE_s_s
, 
ty³Name
.
	`Add»ssOf
(), 
dt
.Format().AddressOf());

1349 
’gše
->
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_ERROR
, 
¡r
.
	`Add»ssOf
());

1350 
”rÜ
 = 
Œue
;

1355 ifĞ
ch
 == 's' )

1358 
asCSŒšg
 
ty³Name
;

1359 
	`R—dSŒšg
(&
ty³Name
);

1362 
Ù
 = 0;

1363  
asUINT
 
n
 = 0;‚ < 
’gše
->
‹m¶©eSubTy³s
.
	`G‘L’gth
();‚++ )

1365 ifĞ
’gše
->
‹m¶©eSubTy³s
[
n
] &&ƒngše->‹m¶©eSubTy³s[n]->
Çme
 =ğ
ty³Name
 )

1367 
Ù
 = 
’gše
->
‹m¶©eSubTy³s
[
n
];

1372 ifĞ
Ù
 == 0 )

1374 
asCSŒšg
 
¡r
;

1375 
¡r
.
	`FÜm©
(
TXT_TEMPLATE_SUBTYPE_s_DOESNT_EXIST
, 
ty³Name
.
	`Add»ssOf
());

1376 
’gše
->
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_ERROR
, 
¡r
.
	`Add»ssOf
());

1377 
”rÜ
 = 
Œue
;

1381 ifĞ
ch
 == 'o' )

1384 
asCSŒšg
 
ty³Name
, 
ns
;

1385 
	`R—dSŒšg
(&
ty³Name
);

1386 
	`R—dSŒšg
(&
ns
);

1387 
asSNameS·û
 *
ÇmeS·û
 = 
’gše
->
	`AddNameS·û
(
ns
.
	`Add»ssOf
());

1390 ifĞ
ty³Name
.
	`G‘L’gth
() &&ypeName != "_builtin_object_" &&ypeName != "_builtin_function_" )

1393 
Ù
 = 
moduË
->
	`G‘ObjeùTy³
(
ty³Name
.
	`Add»ssOf
(), 
ÇmeS·û
);

1394 ifĞ!
Ù
 )

1395 
Ù
 = 
’gše
->
	`G‘ObjeùTy³
(
ty³Name
.
	`Add»ssOf
(), 
ÇmeS·û
);

1397 ifĞ
Ù
 == 0 )

1399 
asCSŒšg
 
¡r
;

1400 
¡r
.
	`FÜm©
(
TXT_OBJECT_TYPE_s_DOESNT_EXIST
, 
ty³Name
.
	`Add»ssOf
());

1401 
’gše
->
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_ERROR
, 
¡r
.
	`Add»ssOf
());

1402 
”rÜ
 = 
Œue
;

1406 ifĞ
ty³Name
 == "_builtin_object_" )

1408 
Ù
 = &
’gše
->
sütTy³Behaviours
;

1410 ifĞ
ty³Name
 == "_builtin_function_" )

1412 
Ù
 = &
’gše
->
funùiÚBehaviours
;

1415 
	`asASSERT
Ğ
çl£
 );

1420 
	`asASSERT
Ğ
ch
 == '\0' );

1421 
Ù
 = 0;

1424  
Ù
;

1425 
	}
}

1427 
	gasCR—d”
::
	$R—dBy‹Code
(
asCSütFunùiÚ
 *
func
)

1430 
asUINT
 
numIn¡ruùiÚs
 = 
	`R—dEncodedUIÁ
();

1437 
func
->
by‹Code
.
	`AÎoÿ‹
(
numIn¡ruùiÚs
, 0);

1439 
asUINT
 
pos
 = 0;

1440  
numIn¡ruùiÚs
 )

1442 
asBYTE
 
b
;

1443 
	`R—dD©a
(&
b
, 1);

1446 
asUINT
 
Ën
 = 
asBCTy³Size
[
asBCInfo
[
b
].
ty³
];

1447 
func
->
by‹Code
.
	`S‘L’gth
(func->by‹Code.
	`G‘L’gth
(è+ 
Ën
);

1448 
asDWORD
 *
bc
 = 
func
->
by‹Code
.
	`Add»ssOf
(è+ 
pos
;

1449 
pos
 +ğ
Ën
;

1451  
asBCInfo
[
b
].
ty³
 )

1453 
asBCTYPE_NO_ARG
:

1455 *(
asBYTE
*)(
bc
èğ
b
;

1456 
bc
++;

1459 
asBCTYPE_W_ARG
:

1460 
asBCTYPE_wW_ARG
:

1461 
asBCTYPE_rW_ARG
:

1463 *(
asBYTE
*)(
bc
èğ
b
;

1466 
asWORD
 
w
 = 
	`R—dEncodedUIÁ16
();

1467 *(((
asWORD
*)
bc
)+1èğ
w
;

1469 
bc
++;

1472 
asBCTYPE_rW_DW_ARG
:

1473 
asBCTYPE_wW_DW_ARG
:

1474 
asBCTYPE_W_DW_ARG
:

1476 *(
asBYTE
*)(
bc
èğ
b
;

1479 
asWORD
 
w
 = 
	`R—dEncodedUIÁ16
();

1480 *(((
asWORD
*)
bc
)+1èğ
w
;

1481 
bc
++;

1484 *
bc
++ = 
	`R—dEncodedUIÁ
();

1487 
asBCTYPE_DW_ARG
:

1489 *(
asBYTE
*)(
bc
èğ
b
;

1490 
bc
++;

1493 *
bc
++ = 
	`R—dEncodedUIÁ
();

1496 
asBCTYPE_DW_DW_ARG
:

1498 *(
asBYTE
*)(
bc
èğ
b
;

1499 
bc
++;

1502 *
bc
++ = 
	`R—dEncodedUIÁ
();

1505 *
bc
++ = 
	`R—dEncodedUIÁ
();

1508 
asBCTYPE_wW_rW_rW_ARG
:

1510 *(
asBYTE
*)(
bc
èğ
b
;

1513 
asWORD
 
w
 = 
	`R—dEncodedUIÁ16
();

1514 *(((
asWORD
*)
bc
)+1èğ
w
;

1515 
bc
++;

1518 
w
 = 
	`R—dEncodedUIÁ16
();

1519 *(
asWORD
*)
bc
 = 
w
;

1522 
w
 = 
	`R—dEncodedUIÁ16
();

1523 *(((
asWORD
*)
bc
)+1èğ
w
;

1525 
bc
++;

1528 
asBCTYPE_wW_rW_ARG
:

1529 
asBCTYPE_rW_rW_ARG
:

1530 
asBCTYPE_wW_W_ARG
:

1532 *(
asBYTE
*)(
bc
èğ
b
;

1535 
asWORD
 
w
 = 
	`R—dEncodedUIÁ16
();

1536 *(((
asWORD
*)
bc
)+1èğ
w
;

1537 
bc
++;

1540 
w
 = 
	`R—dEncodedUIÁ16
();

1541 *(
asWORD
*)
bc
 = 
w
;

1543 
bc
++;

1546 
asBCTYPE_wW_rW_DW_ARG
:

1547 
asBCTYPE_rW_W_DW_ARG
:

1549 *(
asBYTE
*)(
bc
èğ
b
;

1552 
asWORD
 
w
 = 
	`R—dEncodedUIÁ16
();

1553 *(((
asWORD
*)
bc
)+1èğ
w
;

1554 
bc
++;

1557 
w
 = 
	`R—dEncodedUIÁ16
();

1558 *(
asWORD
*)
bc
 = 
w
;

1559 
bc
++;

1562 
asDWORD
 
dw
 = 
	`R—dEncodedUIÁ
();

1563 *
bc
++ = 
dw
;

1566 
asBCTYPE_QW_ARG
:

1568 *(
asBYTE
*)(
bc
èğ
b
;

1569 
bc
++;

1572 
asQWORD
 
qw
 = 
	`R—dEncodedUIÁ64
();

1573 *(
asQWORD
*)
bc
 = 
qw
;

1574 
bc
 += 2;

1577 
asBCTYPE_QW_DW_ARG
:

1579 *(
asBYTE
*)(
bc
èğ
b
;

1580 
bc
++;

1583 
asQWORD
 
qw
 = 
	`R—dEncodedUIÁ64
();

1584 *(
asQWORD
*)
bc
 = 
qw
;

1585 
bc
 += 2;

1588 
asDWORD
 
dw
 = 
	`R—dEncodedUIÁ
();

1589 *
bc
++ = 
dw
;

1592 
asBCTYPE_rW_QW_ARG
:

1593 
asBCTYPE_wW_QW_ARG
:

1595 *(
asBYTE
*)(
bc
èğ
b
;

1598 
asWORD
 
w
 = 
	`R—dEncodedUIÁ16
();

1599 *(((
asWORD
*)
bc
)+1èğ
w
;

1600 
bc
++;

1603 
asQWORD
 
qw
 = 
	`R—dEncodedUIÁ64
();

1604 *(
asQWORD
*)
bc
 = 
qw
;

1605 
bc
 += 2;

1611 
	`asASSERT
(
çl£
);

1614 
asDWORD
 
c
; 
asBYTE
 
t
;

1615 #ià
	`defšed
(
AS_BIG_ENDIAN
)

1616 
c
 = 
b
 << 24;

1617 
	`R—dD©a
(&
t
, 1); 
c
 += << 16;

1618 
	`R—dD©a
(&
t
, 1); 
c
 += << 8;

1619 
	`R—dD©a
(&
t
, 1); 
c
 +=;

1621 
c
 = 
b
;

1622 
	`R—dD©a
(&
t
, 1); 
c
 += << 8;

1623 
	`R—dD©a
(&
t
, 1); 
c
 += << 16;

1624 
	`R—dD©a
(&
t
, 1); 
c
 += << 24;

1627 *
bc
++ = 
c
;

1628 
c
 = *(
asBYTE
*)&c;

1631  
n
 = 1;‚ < 
asBCTy³Size
[
asBCInfo
[
c
].
ty³
];‚++ )

1632 
	`R—dD©a
(&*
bc
++, 4);

1636 
numIn¡ruùiÚs
--;

1638 
	}
}

1640 
	gasCR—d”
::
	$R—dU£dTy³Ids
()

1642 
asUINT
 
couÁ
 = 
	`R—dEncodedUIÁ
();

1643 
u£dTy³Ids
.
	`AÎoÿ‹
(
couÁ
, 0);

1644  
asUINT
 
n
 = 0;‚ < 
couÁ
;‚++ )

1646 
asCD©aTy³
 
dt
;

1647 
	`R—dD©aTy³
(&
dt
);

1648 
u£dTy³Ids
.
	`PushLa¡
(
’gše
->
	`G‘Ty³IdFromD©aTy³
(
dt
));

1650 
	}
}

1652 
	gasCR—d”
::
	$R—dU£dGlob®Prİs
()

1654 
c
 = 
	`R—dEncodedUIÁ
();

1656 
u£dGlob®Prİ”t›s
.
	`AÎoÿ‹
(
c
, 0);

1658  
n
 = 0;‚ < 
c
;‚++ )

1660 
asCSŒšg
 
Çme
, 
ns
;

1661 
asCD©aTy³
 
ty³
;

1662 
moduËPrİ
;

1664 
	`R—dSŒšg
(&
Çme
);

1665 
	`R—dSŒšg
(&
ns
);

1666 
	`R—dD©aTy³
(&
ty³
);

1667 
	`R—dD©a
(&
moduËPrİ
, 1);

1669 
asSNameS·û
 *
ÇmeS·û
 = 
’gše
->
	`AddNameS·û
(
ns
.
	`Add»ssOf
());

1672 *
´İ
 = 0;

1673 ifĞ
moduËPrİ
 )

1675  
asUINT
 
p
 = 0;… < 
moduË
->
sütGlob®s
.
	`G‘L’gth
();…++ )

1677 ifĞ
moduË
->
sütGlob®s
[
p
]->
Çme
 ==‚ame &&

1678 
moduË
->
sütGlob®s
[
p
]->
ÇmeS·û
 ==‚ameSpace &&

1679 
moduË
->
sütGlob®s
[
p
]->
ty³
 ==ype )

1681 
´İ
 = 
moduË
->
sütGlob®s
[
p
]->
	`G‘Add»ssOfV®ue
();

1688  
asUINT
 
p
 = 0;… < 
’gše
->
»gi¡”edGlob®Prİs
.
	`G‘L’gth
();…++ )

1690 ifĞ
’gše
->
»gi¡”edGlob®Prİs
[
p
] &&

1691 
’gše
->
»gi¡”edGlob®Prİs
[
p
]->
Çme
 ==‚ame &&

1692 
’gše
->
»gi¡”edGlob®Prİs
[
p
]->
ÇmeS·û
 ==‚ameSpace &&

1693 
’gše
->
»gi¡”edGlob®Prİs
[
p
]->
ty³
 ==ype )

1695 
´İ
 = 
’gše
->
»gi¡”edGlob®Prİs
[
p
]->
	`G‘Add»ssOfV®ue
();

1701 
u£dGlob®Prİ”t›s
.
	`PushLa¡
(
´İ
);

1703 ifĞ
´İ
 == 0 )

1706 
”rÜ
 = 
Œue
;

1709 
	}
}

1711 
	gasCR—d”
::
	$R—dU£dObjeùPrİs
()

1713 
asUINT
 
c
 = 
	`R—dEncodedUIÁ
();

1715 
u£dObjeùPrİ”t›s
.
	`S‘L’gth
(
c
);

1716  
asUINT
 
n
 = 0;‚ < 
c
;‚++ )

1718 
asCObjeùTy³
 *
objTy³
 = 
	`R—dObjeùTy³
();

1719 ifĞ
objTy³
 == 0 )

1722 
”rÜ
 = 
Œue
;

1726 
asCSŒšg
 
Çme
;

1727 
	`R—dSŒšg
(&
Çme
);

1730 
boŞ
 
found
 = 
çl£
;

1731  
asUINT
 
p
 = 0;… < 
objTy³
->
´İ”t›s
.
	`G‘L’gth
();…++ )

1733 ifĞ
objTy³
->
´İ”t›s
[
p
]->
Çme
 ==‚ame )

1735 
u£dObjeùPrİ”t›s
[
n
].
objTy³
 = objType;

1736 
u£dObjeùPrİ”t›s
[
n
].
off£t
 = 
objTy³
->
´İ”t›s
[
p
]->
by‹Off£t
;

1737 
found
 = 
Œue
;

1742 ifĞ!
found
 )

1745 
”rÜ
 = 
Œue
;

1749 
	}
}

1751 
	gasCR—d”
::
	$FšdObjeùPrİOff£t
(
asWORD
 
šdex
)

1753 ifĞ
šdex
 >ğ
u£dObjeùPrİ”t›s
.
	`G‘L’gth
() )

1756 
	`asASSERT
(
çl£
);

1757 
”rÜ
 = 
Œue
;

1761  ()
u£dObjeùPrİ”t›s
[
šdex
].
off£t
;

1762 
	}
}

1764 
asCSütFunùiÚ
 *
	gasCR—d”
::
	$FšdFunùiÚ
(
idx
)

1766 ifĞ
idx
 >ğ0 && idx < ()
u£dFunùiÚs
.
	`G‘L’gth
() )

1767  
u£dFunùiÚs
[
idx
];

1771 
”rÜ
 = 
Œue
;

1774 
	}
}

1776 
	gasCR—d”
::
	$T¿n¦©eFunùiÚ
(
asCSütFunùiÚ
 *
func
)

1779 ifĞ
dÚtT¿n¦©e
.
	`MoveTo
(0, 
func
) ) ;

1782 
asUINT
 
n
;

1783 
asDWORD
 *
bc
 = 
func
->
by‹Code
.
	`Add»ssOf
();

1784 
asCA¼ay
<
asUINT
> 
	`bcSizes
(
func
->
by‹Code
.
	`G‘L’gth
());

1785 
asCA¼ay
<
asUINT
> 
	`š¡ruùiÚNbrToPos
(
func
->
by‹Code
.
	`G‘L’gth
());

1786  
n
 = 0;‚ < 
func
->
by‹Code
.
	`G‘L’gth
(); )

1788 
c
 = *(
asBYTE
*)&
bc
[
n
];

1789 
asUINT
 
size
 = 
asBCTy³Size
[
asBCInfo
[
c
].
ty³
];

1790 
bcSizes
.
	`PushLa¡
(
size
);

1791 
š¡ruùiÚNbrToPos
.
	`PushLa¡
(
n
);

1792 
n
 +ğ
size
;

1795 
asUINT
 
bcNum
 = 0;

1796  
n
 = 0;‚ < 
func
->
by‹Code
.
	`G‘L’gth
(); 
bcNum
++ )

1798 
c
 = *(
asBYTE
*)&
bc
[
n
];

1799 ifĞ
c
 =ğ
asBC_FREE
 ||

1800 
c
 =ğ
asBC_REFCPY
 ||

1801 
c
 =ğ
asBC_RefCpyV
 ||

1802 
c
 =ğ
asBC_OBJTYPE
 )

1805 
asPWORD
 *
Ù
 = (asPWORD*)&
bc
[
n
+1];

1806 *(
asCObjeùTy³
**)
Ù
 = 
	`FšdObjeùTy³
(*(*)ot);

1808 ifĞ
c
 =ğ
asBC_TYPEID
 ||

1809 
c
 =ğ
asBC_Ca¡
 )

1812 *
tid
 = (*)&
bc
[
n
+1];

1813 *
tid
 = 
	`FšdTy³Id
(*tid);

1815 ifĞ
c
 =ğ
asBC_ADDSi
 ||

1816 
c
 =ğ
asBC_LßdThisR
 )

1819 *
tid
 = (*)&
bc
[
n
+1];

1820 *
tid
 = 
	`FšdTy³Id
(*tid);

1823 *(((*)&
bc
[
n
])+1èğ
	`FšdObjeùPrİOff£t
(*(((*)&bc[n])+1));

1825 ifĞ
c
 =ğ
asBC_LßdRObjR
 ||

1826 
c
 =ğ
asBC_LßdVObjR
 )

1829 *
tid
 = (*)&
bc
[
n
+2];

1830 *
tid
 = 
	`FšdTy³Id
(*tid);

1833 *(((*)&
bc
[
n
])+2èğ
	`FšdObjeùPrİOff£t
(*(((*)&bc[n])+2));

1835 ifĞ
c
 =ğ
asBC_COPY
 )

1838 *
tid
 = (*)&
bc
[
n
+1];

1839 *
tid
 = 
	`FšdTy³Id
(*tid);

1843 
asCD©aTy³
 
dt
 = 
’gše
->
	`G‘D©aTy³FromTy³Id
(*
tid
);

1844 ifĞ!
dt
.
	`IsV®id
() )

1847 
”rÜ
 = 
Œue
;

1850 
	`asBC_SWORDARG0
(&
bc
[
n
]èğ()
dt
.
	`G‘SizeInMemÜyDWÜds
();

1852 ifĞ
c
 =ğ
asBC_RET
 )

1855 
asWORD
 
dw
 = (asWORD)
func
->
	`G‘S·ûN“dedFÜArgum’ts
();

1856 ifĞ
func
->
	`DÛsR‘uºOnSck
(èè
dw
 +ğ
AS_PTR_SIZE
;

1857 ifĞ
func
->
objeùTy³
 ) 
dw
 +ğ
AS_PTR_SIZE
;

1858 
	`asBC_WORDARG0
(&
bc
[
n
]èğ
dw
;

1860 ifĞ
c
 =ğ
asBC_CALL
 ||

1861 
c
 =ğ
asBC_CALLINTF
 ||

1862 
c
 =ğ
asBC_CALLSYS
 )

1865 *
fid
 = (*)&
bc
[
n
+1];

1866 
asCSütFunùiÚ
 *
f
 = 
	`FšdFunùiÚ
(*
fid
);

1867 ifĞ
f
 )

1868 *
fid
 = 
f
->
id
;

1872 
”rÜ
 = 
Œue
;

1876 ifĞ
c
 =ğ
asBC_FuncPŒ
 )

1879 
asPWORD
 *
fid
 = (asPWORD*)&
bc
[
n
+1];

1880 *
fid
 = (
asPWORD
)
	`FšdFunùiÚ
(()*fid);

1882 ifĞ
c
 =ğ
asBC_ALLOC
 )

1885 
asPWORD
 *
¬g
 = (asPWORD*)&
bc
[
n
+1];

1886 *(
asCObjeùTy³
**)
¬g
 = 
	`FšdObjeùTy³
(*(*)arg);

1889 
asCObjeùTy³
 *
Ù
 = *×sCObjeùTy³**)
¬g
;

1890 ifĞ
Ù
 && (Ù->
æags
 & 
asOBJ_SCRIPT_OBJECT
) )

1892 *
fid
 = (*)&
bc
[
n
+1+
AS_PTR_SIZE
];

1893 
asCSütFunùiÚ
 *
f
 = 
	`FšdFunùiÚ
(*
fid
);

1894 ifĞ
f
 )

1895 *
fid
 = 
f
->
id
;

1899 
”rÜ
 = 
Œue
;

1904 ifĞ
c
 =ğ
asBC_STR
 )

1907 
asWORD
 *
¬g
 = (×sWORD*)&
bc
[
n
])+1;

1909 ifĞ*
¬g
 < 
u£dSŒšgCÚ¡ªts
.
	`G‘L’gth
() )

1910 *
¬g
 = (
asWORD
)
u£dSŒšgCÚ¡ªts
[*arg];

1914 
”rÜ
 = 
Œue
;

1918 ifĞ
c
 =ğ
asBC_CALLBND
 )

1921 
asUINT
 *
fid
 = (asUINT*)&
bc
[
n
+1];

1922 ifĞ*
fid
 < 
moduË
->
bšdInfÜm©iÚs
.
	`G‘L’gth
() )

1924 
sBšdInfo
 *
bi
 = 
moduË
->
bšdInfÜm©iÚs
[*
fid
];

1925 ifĞ
bi
 )

1926 *
fid
 = 
bi
->
impÜ‹dFunùiÚSigÇtu»
->
id
;

1930 
”rÜ
 = 
Œue
;

1937 
”rÜ
 = 
Œue
;

1941 ifĞ
c
 =ğ
asBC_PGA
 ||

1942 
c
 =ğ
asBC_PshGPŒ
 ||

1943 
c
 =ğ
asBC_LDG
 ||

1944 
c
 =ğ
asBC_PshG4
 ||

1945 
c
 =ğ
asBC_LdGRdR4
 ||

1946 
c
 =ğ
asBC_CpyGtoV4
 ||

1947 
c
 =ğ
asBC_CpyVtoG4
 ||

1948 
c
 =ğ
asBC_S‘G4
 )

1951 
asPWORD
 *
šdex
 = (asPWORD*)&
bc
[
n
+1];

1952 ifĞ*(
asUINT
*)
šdex
 < 
u£dGlob®Prİ”t›s
.
	`G‘L’gth
() )

1953 *(**)
šdex
 = 
u£dGlob®Prİ”t›s
[*(
asUINT
*)index];

1957 
”rÜ
 = 
Œue
;

1961 ifĞ
c
 =ğ
asBC_JMP
 ||

1962 
c
 =ğ
asBC_JZ
 ||

1963 
c
 =ğ
asBC_JNZ
 ||

1964 
c
 =ğ
asBC_JLowZ
 ||

1965 
c
 =ğ
asBC_JLowNZ
 ||

1966 
c
 =ğ
asBC_JS
 ||

1967 
c
 =ğ
asBC_JNS
 ||

1968 
c
 =ğ
asBC_JP
 ||

1969 
c
 =ğ
asBC_JNP
 )

1972 
off£t
 = (
bc
[
n
+1]);

1975 
size
 = 0;

1976 ifĞ
off£t
 >= 0 )

1978  
asUINT
 
num
 = 
bcNum
+1; 
off£t
-- > 0;‚um++ )

1979 
size
 +ğ
bcSizes
[
num
];

1982  
asUINT
 
num
 = 
bcNum
; 
off£t
++ < 0;‚um-- )

1983 
size
 -ğ
bcSizes
[
num
];

1986 
bc
[
n
+1] = 
size
;

1989 
n
 +ğ
asBCTy³Size
[
asBCInfo
[
c
].
ty³
];

1993 
	`C®cuÏ‹Adju¡m’tByPos
(
func
);

1996 
bc
 = 
func
->
by‹Code
.
	`Add»ssOf
();

1997  
n
 = 0;‚ < 
func
->
by‹Code
.
	`G‘L’gth
(); )

1999 
c
 = *(
asBYTE
*)&
bc
[
n
];

2000  
asBCInfo
[
c
].
ty³
 )

2002 
asBCTYPE_wW_ARG
:

2003 
asBCTYPE_rW_DW_ARG
:

2004 
asBCTYPE_wW_QW_ARG
:

2005 
asBCTYPE_rW_ARG
:

2006 
asBCTYPE_wW_DW_ARG
:

2007 
asBCTYPE_wW_W_ARG
:

2008 
asBCTYPE_rW_QW_ARG
:

2009 
asBCTYPE_rW_W_DW_ARG
:

2011 
	`asBC_SWORDARG0
(&
bc
[
n
]èğ()
	`Adju¡SckPos™iÚ
(asBC_SWORDARG0(&bc[n]));

2015 
asBCTYPE_wW_rW_ARG
:

2016 
asBCTYPE_wW_rW_DW_ARG
:

2017 
asBCTYPE_rW_rW_ARG
:

2019 
	`asBC_SWORDARG0
(&
bc
[
n
]èğ()
	`Adju¡SckPos™iÚ
(asBC_SWORDARG0(&bc[n]));

2020 
	`asBC_SWORDARG1
(&
bc
[
n
]èğ()
	`Adju¡SckPos™iÚ
(asBC_SWORDARG1(&bc[n]));

2024 
asBCTYPE_wW_rW_rW_ARG
:

2026 
	`asBC_SWORDARG0
(&
bc
[
n
]èğ()
	`Adju¡SckPos™iÚ
(asBC_SWORDARG0(&bc[n]));

2027 
	`asBC_SWORDARG1
(&
bc
[
n
]èğ()
	`Adju¡SckPos™iÚ
(asBC_SWORDARG1(&bc[n]));

2028 
	`asBC_SWORDARG2
(&
bc
[
n
]èğ()
	`Adju¡SckPos™iÚ
(asBC_SWORDARG2(&bc[n]));

2037 
n
 +ğ
asBCTy³Size
[
asBCInfo
[
c
].
ty³
];

2041 
func
->
v¬ŸbËS·û
 = 
	`Adju¡SckPos™iÚ
(func->variableSpace);

2044  
n
 = 0;‚ < 
func
->
v¬ŸbËs
.
	`G‘L’gth
();‚++ )

2046 
func
->
v¬ŸbËs
[
n
]->
deş¬edAtProg¿mPos
 = 
š¡ruùiÚNbrToPos
[func->variables[n]->declaredAtProgramPos];

2047 
func
->
v¬ŸbËs
[
n
]->
¡ackOff£t
 = 
	`Adju¡SckPos™iÚ
(func->variables[n]->stackOffset);

2051  
n
 = 0;‚ < 
func
->
objV¬ŸbËPos
.
	`G‘L’gth
();‚++ )

2053 
func
->
objV¬ŸbËPos
[
n
] = 
	`Adju¡SckPos™iÚ
(func->objVariablePos[n]);

2054 
func
->
funcV¬ŸbËTy³s
[
n
] = 
	`FšdFunùiÚ
(()(
asPWORD
)func->funcVariableTypes[n]);

2064 
bc
 = 
func
->
by‹Code
.
	`Add»ssOf
();

2065  
n
 = 0;‚ < 
func
->
by‹Code
.
	`G‘L’gth
(); )

2067 
c
 = *(
asBYTE
*)&
bc
[
n
];

2069 ifĞ
c
 =ğ
asBC_GETREF
 ||

2070 
c
 =ğ
asBC_GETOBJ
 ||

2071 
c
 =ğ
asBC_GETOBJREF
 )

2073 
	`asBC_WORDARG0
(&
bc
[
n
]èğ(
asWORD
)
	`Adju¡G‘Off£t
×sBC_WORDARG0(&bc[n]), 
func
,‚);

2076 
n
 +ğ
asBCTy³Size
[
asBCInfo
[
c
].
ty³
];

2079  
n
 = 0;‚ < 
func
->
objV¬ŸbËInfo
.
	`G‘L’gth
();‚++ )

2082 
func
->
objV¬ŸbËInfo
[
n
].
´og¿mPos
 = 
š¡ruùiÚNbrToPos
[func->objVariableInfo[n].programPos];

2083 
func
->
objV¬ŸbËInfo
[
n
].
v¬ŸbËOff£t
 = 
	`Adju¡SckPos™iÚ
(func->objVariableInfo[n].variableOffset);

2088  
n
 = 0;‚ < 
func
->
lšeNumb”s
.
	`G‘L’gth
();‚ += 2 )

2090 
func
->
lšeNumb”s
[
n
] = 
š¡ruùiÚNbrToPos
[func->lineNumbers[n]];

2093 
	`C®cuÏ‹SckN“ded
(
func
);

2094 
	}
}

2096 
	gasCR—d”
::
	$C®cuÏ‹SckN“ded
(
asCSütFunùiÚ
 *
func
)

2098 
Ïrge¡SckU£d
 = 0;

2101 
asCA¼ay
<> 
¡ackSize
;

2102 
¡ackSize
.
	`S‘L’gth
(
func
->
by‹Code
.
	`G‘L’gth
());

2103 
	`mem£t
(&
¡ackSize
[0], -1, sckSize.
	`G‘L’gth
()*4);

2107 
asCA¼ay
<
asUINT
> 
·ths
;

2108 
·ths
.
	`PushLa¡
(0);

2109 
¡ackSize
[0] = 
func
->
v¬ŸbËS·û
;

2112  
asUINT
 
p
 = 0;… < 
·ths
.
	`G‘L’gth
(); ++p )

2114 
asUINT
 
pos
 = 
·ths
[
p
];

2115 
cu¼SckSize
 = 
¡ackSize
[
pos
];

2117 
asBYTE
 
bc
 = *×sBYTE*)&
func
->
by‹Code
[
pos
];

2118 ifĞ
bc
 =ğ
asBC_RET
 )

2122 
¡ackInc
 = 
asBCInfo
[
bc
].stackInc;

2123 ifĞ
¡ackInc
 == 0xFFFF )

2126 ifĞ
bc
 =ğ
asBC_CALL
 ||

2127 
bc
 =ğ
asBC_CALLSYS
 ||

2128 
bc
 =ğ
asBC_CALLBND
 ||

2129 
bc
 =ğ
asBC_ALLOC
 ||

2130 
bc
 =ğ
asBC_CALLINTF
 ||

2131 
bc
 =ğ
asBC_C®lPŒ
 )

2133 
asCSütFunùiÚ
 *
ÿÎed
 = 
	`G‘C®ËdFunùiÚ
(
func
, 
pos
);

2134 ifĞ
ÿÎed
 )

2136 
¡ackInc
 = -
ÿÎed
->
	`G‘S·ûN“dedFÜArgum’ts
();

2137 ifĞ
ÿÎed
->
objeùTy³
 )

2138 
¡ackInc
 -ğ
AS_PTR_SIZE
;

2139 ifĞ
ÿÎed
->
	`DÛsR‘uºOnSck
() )

2140 
¡ackInc
 -ğ
AS_PTR_SIZE
;

2145 
	`asASSERT
Ğ
bc
 =ğ
asBC_ALLOC
 );

2146 
¡ackInc
 = -
AS_PTR_SIZE
;

2151 
cu¼SckSize
 +ğ
¡ackInc
;

2152 
	`asASSERT
Ğ
cu¼SckSize
 >= 0 );

2154 ifĞ
cu¼SckSize
 > 
Ïrge¡SckU£d
 )

2155 
Ïrge¡SckU£d
 = 
cu¼SckSize
;

2157 ifĞ
bc
 =ğ
asBC_JMP
 )

2160 
off£t
 = 
	`asBC_INTARG
(&
func
->
by‹Code
[
pos
]);

2161 
pos
 +ğ2 + 
off£t
;

2164 ifĞ
¡ackSize
[
pos
] == -1 )

2166 
¡ackSize
[
pos
] = 
cu¼SckSize
;

2167 
·ths
.
	`PushLa¡
(
pos
);

2170 
	`asASSERT
(
¡ackSize
[
pos
] =ğ
cu¼SckSize
);

2173 ifĞ
bc
 =ğ
asBC_JZ
 || bø=ğ
asBC_JNZ
 ||

2174 
bc
 =ğ
asBC_JLowZ
 || bø=ğ
asBC_JLowNZ
 ||

2175 
bc
 =ğ
asBC_JS
 || bø=ğ
asBC_JNS
 ||

2176 
bc
 =ğ
asBC_JP
 || bø=ğ
asBC_JNP
 )

2179 
off£t
 = 
	`asBC_INTARG
(&
func
->
by‹Code
[
pos
]);

2182 
pos
 += 2;

2183 ifĞ
¡ackSize
[
pos
] == -1 )

2185 
¡ackSize
[
pos
] = 
cu¼SckSize
;

2186 
·ths
.
	`PushLa¡
(
pos
);

2189 
	`asASSERT
(
¡ackSize
[
pos
] =ğ
cu¼SckSize
);

2191 
pos
 +ğ
off£t
;

2192 ifĞ
¡ackSize
[
pos
] == -1 )

2194 
¡ackSize
[
pos
] = 
cu¼SckSize
;

2195 
·ths
.
	`PushLa¡
(
pos
);

2198 
	`asASSERT
(
¡ackSize
[
pos
] =ğ
cu¼SckSize
);

2202 ifĞ
bc
 =ğ
asBC_JMPP
 )

2204 
pos
++;

2207  *(
asBYTE
*)&
func
->
by‹Code
[
pos
] =ğ
asBC_JMP
 )

2209 ifĞ
¡ackSize
[
pos
] == -1 )

2211 
¡ackSize
[
pos
] = 
cu¼SckSize
;

2212 
·ths
.
	`PushLa¡
(
pos
);

2215 
	`asASSERT
(
¡ackSize
[
pos
] =ğ
cu¼SckSize
);

2216 
pos
 += 2;

2223 
pos
 +ğ
asBCTy³Size
[
asBCInfo
[
bc
].
ty³
];

2224 ifĞ
¡ackSize
[
pos
] == -1 )

2226 
¡ackSize
[
pos
] = 
cu¼SckSize
;

2227 
·ths
.
	`PushLa¡
(
pos
);

2230 
	`asASSERT
(
¡ackSize
[
pos
] =ğ
cu¼SckSize
);

2236 
func
->
¡ackN“ded
 = 
Ïrge¡SckU£d
;

2237 
	}
}

2239 
	gasCR—d”
::
	$C®cuÏ‹Adju¡m’tByPos
(
asCSütFunùiÚ
 *
func
)

2243 
asUINT
 
n
;

2244 
asCA¼ay
<> 
adju¡m’ts
;

2245 
asUINT
 
off£t
 = 0;

2246 ifĞ
func
->
objeùTy³
 )

2248 
adju¡m’ts
.
	`PushLa¡
(
off£t
);

2249 
adju¡m’ts
.
	`PushLa¡
(1-
AS_PTR_SIZE
);

2250 
off£t
 += 1;

2252 ifĞ
func
->
	`DÛsR‘uºOnSck
() )

2254 
adju¡m’ts
.
	`PushLa¡
(
off£t
);

2255 
adju¡m’ts
.
	`PushLa¡
(1-
AS_PTR_SIZE
);

2256 
off£t
 += 1;

2258  
n
 = 0;‚ < 
func
->
·¿m‘”Ty³s
.
	`G‘L’gth
();‚++ )

2260 ifĞ!
func
->
·¿m‘”Ty³s
[
n
].
	`IsPrim™ive
() ||

2261 
func
->
·¿m‘”Ty³s
[
n
].
	`IsReã»nû
() )

2263 
adju¡m’ts
.
	`PushLa¡
(
off£t
);

2264 
adju¡m’ts
.
	`PushLa¡
(1-
AS_PTR_SIZE
);

2265 
off£t
 += 1;

2269 
	`asASSERT
Ğ
func
->
·¿m‘”Ty³s
[
n
].
	`IsPrim™ive
() );

2270 
off£t
 +ğ
func
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

2275 
adju¡Neg©iveSckByPos
.
	`S‘L’gth
(
off£t
);

2276 
	`mem£t
(
adju¡Neg©iveSckByPos
.
	`Add»ssOf
(), 0,‡dju¡Neg©iveSckByPos.
	`G‘L’gth
()*());

2277  
n
 = 0;‚ < 
adju¡m’ts
.
	`G‘L’gth
();‚+=2 )

2279 
pos
 = 
adju¡m’ts
[
n
];

2280 
adju¡
 = 
adju¡m’ts
[
n
+1];

2282  
asUINT
 
i
 = 
pos
+1; i < 
adju¡Neg©iveSckByPos
.
	`G‘L’gth
(); i++ )

2283 
adju¡Neg©iveSckByPos
[
i
] +ğ
adju¡
;

2288 
adju¡m’ts
.
	`S‘L’gth
(0);

2289 
highe¡Pos
 = 0;

2290  
n
 = 0;‚ < 
func
->
objV¬ŸbËTy³s
.
	`G‘L’gth
();‚++ )

2292 ifĞ
func
->
objV¬ŸbËTy³s
[
n
] )

2295 
size
 = 
AS_PTR_SIZE
;

2296 ifĞ(
func
->
objV¬ŸbËTy³s
[
n
]->
	`G‘FÏgs
(è& 
asOBJ_VALUE
) &&

2297 
n
 >ğ
func
->
objV¬ŸbËsOnH—p
 )

2299 
size
 = 
func
->
objV¬ŸbËTy³s
[
n
]->
	`G‘Size
();

2300 ifĞ
size
 < 4 )

2301 
size
 = 1;

2303 
size
 /= 4;

2307 ifĞ
size
 > 1 )

2309 ifĞ
func
->
objV¬ŸbËPos
[
n
] > 
highe¡Pos
 )

2310 
highe¡Pos
 = 
func
->
objV¬ŸbËPos
[
n
];

2312 
adju¡m’ts
.
	`PushLa¡
(
func
->
objV¬ŸbËPos
[
n
]);

2313 
adju¡m’ts
.
	`PushLa¡
(
size
-1);

2319 
adju¡ByPos
.
	`S‘L’gth
(
highe¡Pos
+1);

2320 
	`mem£t
(
adju¡ByPos
.
	`Add»ssOf
(), 0,‡dju¡ByPos.
	`G‘L’gth
()*());

2323  
n
 = 0;‚ < 
adju¡m’ts
.
	`G‘L’gth
();‚+=2 )

2325 
pos
 = 
adju¡m’ts
[
n
];

2326 
adju¡
 = 
adju¡m’ts
[
n
+1];

2328  
asUINT
 
i
 = 
pos
; i < 
adju¡ByPos
.
	`G‘L’gth
(); i++ )

2329 
adju¡ByPos
[
i
] +ğ
adju¡
;

2331 
	}
}

2333 
	gasCR—d”
::
	$Adju¡SckPos™iÚ
(
pos
)

2335 ifĞ
pos
 >ğ()
adju¡ByPos
.
	`G‘L’gth
() )

2338 ifĞ
adju¡ByPos
.
	`G‘L’gth
() )

2339 
pos
 +ğ()
adju¡ByPos
[adju¡ByPos.
	`G‘L’gth
()-1];

2341 ifĞ
pos
 >= 0 )

2342 
pos
 +ğ()
adju¡ByPos
[pos];

2343 ifĞ-
pos
 >ğ()
adju¡Neg©iveSckByPos
.
	`G‘L’gth
() )

2344 
”rÜ
 = 
Œue
;

2346 
pos
 +ğ()
adju¡Neg©iveSckByPos
[-pos];

2348  
pos
;

2349 
	}
}

2351 
asCSütFunùiÚ
 *
	gasCR—d”
::
	$G‘C®ËdFunùiÚ
(
asCSütFunùiÚ
 *
func
, 
asDWORD
 
´og¿mPos
)

2353 
asBYTE
 
bc
 = *×sBYTE*)&
func
->
by‹Code
[
´og¿mPos
];

2355 ifĞ
bc
 =ğ
asBC_CALL
 ||

2356 
bc
 =ğ
asBC_CALLSYS
 ||

2357 
bc
 =ğ
asBC_CALLINTF
 )

2360 
funcId
 = 
	`asBC_INTARG
(&
func
->
by‹Code
[
´og¿mPos
]);

2361  
’gše
->
sütFunùiÚs
[
funcId
];

2363 ifĞ
bc
 =ğ
asBC_ALLOC
 )

2366 
funcId
 = 
	`asBC_INTARG
(&
func
->
by‹Code
[
´og¿mPos
+
AS_PTR_SIZE
]);

2367  
’gše
->
sütFunùiÚs
[
funcId
];

2369 ifĞ
bc
 =ğ
asBC_CALLBND
 )

2372 
funcId
 = 
	`asBC_INTARG
(&
func
->
by‹Code
[
´og¿mPos
]);

2373  
’gše
->
impÜ‹dFunùiÚs
[
funcId
&0xFFFF]->
impÜ‹dFunùiÚSigÇtu»
;

2375 ifĞ
bc
 =ğ
asBC_C®lPŒ
 )

2378 
v¬
 = 
	`asBC_SWORDARG0
(&
func
->
by‹Code
[
´og¿mPos
]);

2379  
asUINT
 
v
 = 0; v < 
func
->
objV¬ŸbËPos
.
	`G‘L’gth
(); v++ )

2380 ifĞ
func
->
objV¬ŸbËPos
[
v
] =ğ
v¬
 )

2381  
func
->
funcV¬ŸbËTy³s
[
v
];

2385 
	}
}

2387 
	gasCR—d”
::
	$Adju¡G‘Off£t
(
off£t
, 
asCSütFunùiÚ
 *
func
, 
asDWORD
 
´og¿mPos
)

2393 ifĞ
off£t
 == 0 )  0;

2396 
asCSütFunùiÚ
 *
ÿÎedFunc
 = 0;

2397  
asUINT
 
n
 = 
´og¿mPos
; 
func
->
by‹Code
.
	`G‘L’gth
(); )

2399 
asBYTE
 
bc
 = *×sBYTE*)&
func
->
by‹Code
[
n
];

2400 ifĞ
bc
 =ğ
asBC_CALL
 ||

2401 
bc
 =ğ
asBC_CALLSYS
 ||

2402 
bc
 =ğ
asBC_CALLINTF
 ||

2403 
bc
 =ğ
asBC_ALLOC
 ||

2404 
bc
 =ğ
asBC_CALLBND
 ||

2405 
bc
 =ğ
asBC_C®lPŒ
 )

2407 
ÿÎedFunc
 = 
	`G‘C®ËdFunùiÚ
(
func
, 
n
);

2410 ifĞ
bc
 =ğ
asBC_REFCPY
 ||

2411 
bc
 =ğ
asBC_COPY
 )

2414 
	`asASSERT
Ğ
off£t
 == 1 );

2415  
off£t
 - (1 - 
AS_PTR_SIZE
);

2418 
n
 +ğ
asBCTy³Size
[
asBCInfo
[
bc
].
ty³
];

2421 ifĞ
ÿÎedFunc
 == 0 )

2424 
”rÜ
 = 
Œue
;

2425  
off£t
;

2430 
asUINT
 
numPŒs
 = 0;

2431 
cu¼Off£t
 = 0;

2432 ifĞ
off£t
 > 
cu¼Off£t
 && 
ÿÎedFunc
->
	`G‘ObjeùTy³
() )

2434 
numPŒs
++;

2435 
cu¼Off£t
++;

2437 ifĞ
off£t
 > 
cu¼Off£t
 && 
ÿÎedFunc
->
	`DÛsR‘uºOnSck
() )

2439 
numPŒs
++;

2440 
cu¼Off£t
++;

2442  
asUINT
 
p
 = 0;… < 
ÿÎedFunc
->
·¿m‘”Ty³s
.
	`G‘L’gth
();…++ )

2444 ifĞ
off£t
 <ğ
cu¼Off£t
 ) ;

2446 ifĞ!
ÿÎedFunc
->
·¿m‘”Ty³s
[
p
].
	`IsPrim™ive
() ||

2447 
ÿÎedFunc
->
·¿m‘”Ty³s
[
p
].
	`IsReã»nû
() )

2449 
numPŒs
++;

2450 
cu¼Off£t
++;

2455 
	`asASSERT
Ğ
ÿÎedFunc
->
·¿m‘”Ty³s
[
p
].
	`IsPrim™ive
() );

2456 
cu¼Off£t
 +ğ
ÿÎedFunc
->
·¿m‘”Ty³s
[
p
].
	`G‘SizeOnSckDWÜds
();

2460  
off£t
 - 
numPŒs
 * (1 - 
AS_PTR_SIZE
);

2461 
	}
}

2463 
	gasCR—d”
::
	$FšdTy³Id
(
idx
)

2465 ifĞ
idx
 >ğ0 && idx < ()
u£dTy³Ids
.
	`G‘L’gth
() )

2466  
u£dTy³Ids
[
idx
];

2470 
”rÜ
 = 
Œue
;

2473 
	}
}

2475 
asCObjeùTy³
 *
	gasCR—d”
::
	$FšdObjeùTy³
(
idx
)

2477 ifĞ
idx
 < 0 || idx >ğ()
u£dTy³s
.
	`G‘L’gth
() )

2480 
”rÜ
 = 
Œue
;

2484  
u£dTy³s
[
idx
];

2485 
	}
}

2487 #iâdeà
AS_NO_COMPILER


2489 
	gasCWr™”
::
	$asCWr™”
(
asCModuË
* 
_moduË
, 
asIBš¬ySŒ—m
* 
_¡»am
, 
asCSütEngše
* 
_’gše
)

2490 : 
	`moduË
(
_moduË
), 
	`¡»am
(
_¡»am
), 
	$’gše
(
_’gše
)

2492 
	}
}

2494 
	gasCWr™”
::
	$Wr™eD©a
(cÚ¡ *
d©a
, 
asUINT
 
size
)

2496 
	`asASSERT
(
size
 == 1 || size == 2 || size == 4 || size == 8);

2497 #ià
	`defšed
(
AS_BIG_ENDIAN
)

2498  
asUINT
 
n
 = 0;‚ < 
size
;‚++ )

2499 
¡»am
->
	`Wr™e
(((
asBYTE
*)
d©a
)+
n
, 1);

2501  
n
 = 
size
-1;‚ >= 0;‚-- )

2502 
¡»am
->
	`Wr™e
(((
asBYTE
*)
d©a
)+
n
, 1);

2504 
	}
}

2506 
	gasCWr™”
::
	$Wr™e
()

2508 
i
, 
couÁ
;

2513 
couÁ
 = (
asUINT
)
moduË
->
’umTy³s
.
	`G‘L’gth
();

2514 
	`Wr™eEncodedIÁ64
(
couÁ
);

2515  
i
 = 0; i < 
couÁ
; i++ )

2517 
	`Wr™eObjeùTy³Deş¬©iÚ
(
moduË
->
’umTy³s
[
i
], 1);

2518 
	`Wr™eObjeùTy³Deş¬©iÚ
(
moduË
->
’umTy³s
[
i
], 2);

2522 
couÁ
 = (
asUINT
)
moduË
->
şassTy³s
.
	`G‘L’gth
();

2523 
	`Wr™eEncodedIÁ64
(
couÁ
);

2524  
i
 = 0; i < 
couÁ
; i++ )

2527 
	`Wr™eObjeùTy³Deş¬©iÚ
(
moduË
->
şassTy³s
[
i
], 1);

2531 
couÁ
 = (
asUINT
)
moduË
->
funcDefs
.
	`G‘L’gth
();

2532 
	`Wr™eEncodedIÁ64
(
couÁ
);

2533  
i
 = 0; i < 
couÁ
; i++ )

2535 
	`Wr™eFunùiÚ
(
moduË
->
funcDefs
[
i
]);

2539 
couÁ
 = (
asUINT
)
moduË
->
şassTy³s
.
	`G‘L’gth
();

2540  
i
 = 0; i < 
couÁ
; i++ )

2542 ifĞ
moduË
->
şassTy³s
[
i
]->
	`IsIÁ”çû
() )

2543 
	`Wr™eObjeùTy³Deş¬©iÚ
(
moduË
->
şassTy³s
[
i
], 2);

2547  
i
 = 0; i < 
couÁ
; ++i )

2549 ifĞ!
moduË
->
şassTy³s
[
i
]->
	`IsIÁ”çû
() )

2550 
	`Wr™eObjeùTy³Deş¬©iÚ
(
moduË
->
şassTy³s
[
i
], 2);

2554  
i
 = 0; i < 
couÁ
; ++i )

2556 ifĞ!
moduË
->
şassTy³s
[
i
]->
	`IsIÁ”çû
() )

2557 
	`Wr™eObjeùTy³Deş¬©iÚ
(
moduË
->
şassTy³s
[
i
], 3);

2561 
couÁ
 = (
asUINT
)
moduË
->
ty³Defs
.
	`G‘L’gth
();

2562 
	`Wr™eEncodedIÁ64
(
couÁ
);

2563  
i
 = 0; i < 
couÁ
; i++ )

2565 
	`Wr™eObjeùTy³Deş¬©iÚ
(
moduË
->
ty³Defs
[
i
], 1);

2566 
	`Wr™eObjeùTy³Deş¬©iÚ
(
moduË
->
ty³Defs
[
i
], 2);

2570 
couÁ
 = (
asUINT
)
moduË
->
sütGlob®s
.
	`G‘L’gth
();

2571 
	`Wr™eEncodedIÁ64
(
couÁ
);

2572  
i
 = 0; i < 
couÁ
; ++i )

2573 
	`Wr™eGlob®Prİ”ty
(
moduË
->
sütGlob®s
[
i
]);

2576 
couÁ
 = 0;

2577  
i
 = 0; i < 
moduË
->
sütFunùiÚs
.
	`G‘L’gth
(); i++ )

2578 ifĞ
moduË
->
sütFunùiÚs
[
i
]->
objeùTy³
 == 0 )

2579 
couÁ
++;

2580 
	`Wr™eEncodedIÁ64
(
couÁ
);

2581  
i
 = 0; i < 
moduË
->
sütFunùiÚs
.
	`G‘L’gth
(); ++i )

2582 ifĞ
moduË
->
sütFunùiÚs
[
i
]->
objeùTy³
 == 0 )

2583 
	`Wr™eFunùiÚ
(
moduË
->
sütFunùiÚs
[
i
]);

2586 
couÁ
 = ()
moduË
->
glob®FunùiÚs
.
	`G‘L’gth
();

2587 
	`Wr™eEncodedIÁ64
(
couÁ
);

2588  
i
 = 0; i < 
couÁ
; i++ )

2590 
	`Wr™eFunùiÚ
(
moduË
->
glob®FunùiÚs
[
i
]);

2594 
couÁ
 = (
asUINT
)
moduË
->
bšdInfÜm©iÚs
.
	`G‘L’gth
();

2595 
	`Wr™eEncodedIÁ64
(
couÁ
);

2596  
i
 = 0; i < 
couÁ
; ++i )

2598 
	`Wr™eFunùiÚ
(
moduË
->
bšdInfÜm©iÚs
[
i
]->
impÜ‹dFunùiÚSigÇtu»
);

2599 
	`Wr™eSŒšg
(&
moduË
->
bšdInfÜm©iÚs
[
i
]->
impÜtFromModuË
);

2603 
couÁ
 = (
asUINT
)
u£dTy³s
.
	`G‘L’gth
();

2604 
	`Wr™eEncodedIÁ64
(
couÁ
);

2605  
i
 = 0; i < 
couÁ
; ++i )

2606 
	`Wr™eObjeùTy³
(
u£dTy³s
[
i
]);

2609 
	`Wr™eU£dTy³Ids
();

2612 
	`Wr™eU£dFunùiÚs
();

2615 
	`Wr™eU£dGlob®Prİs
();

2618 
	`Wr™eU£dSŒšgCÚ¡ªts
();

2621 
	`Wr™eU£dObjeùPrİs
();

2623  
asSUCCESS
;

2624 
	}
}

2626 
	gasCWr™”
::
	$FšdSŒšgCÚ¡ªtIndex
(
id
)

2628 
asSM­Node
<,> *
cursÜ
 = 0;

2629 ià(
¡ršgIdToIndexM­
.
	`MoveTo
(&
cursÜ
, 
id
))

2630  
cursÜ
->
v®ue
;

2632 
u£dSŒšgCÚ¡ªts
.
	`PushLa¡
(
id
);

2633 
šdex
 = (
u£dSŒšgCÚ¡ªts
.
	`G‘L’gth
() - 1);

2634 
¡ršgIdToIndexM­
.
	`In£¹
(
id
, 
šdex
);

2635  
šdex
;

2636 
	}
}

2638 
	gasCWr™”
::
	$Wr™eU£dSŒšgCÚ¡ªts
()

2640 
asUINT
 
couÁ
 = (asUINT)
u£dSŒšgCÚ¡ªts
.
	`G‘L’gth
();

2641 
	`Wr™eEncodedIÁ64
(
couÁ
);

2642  
asUINT
 
i
 = 0; i < 
couÁ
; ++i )

2643 
	`Wr™eSŒšg
(
’gše
->
¡ršgCÚ¡ªts
[
u£dSŒšgCÚ¡ªts
[
i
]]);

2644 
	}
}

2646 
	gasCWr™”
::
	$Wr™eU£dFunùiÚs
()

2648 
asUINT
 
couÁ
 = (asUINT)
u£dFunùiÚs
.
	`G‘L’gth
();

2649 
	`Wr™eEncodedIÁ64
(
couÁ
);

2651  
asUINT
 
n
 = 0;‚ < 
u£dFunùiÚs
.
	`G‘L’gth
();‚++ )

2653 
c
;

2657 ifĞ
u£dFunùiÚs
[
n
] )

2660 
c
 = 
u£dFunùiÚs
[
n
]->
moduË
 ? 'm' : 'a';

2661 
	`Wr™eD©a
(&
c
, 1);

2662 
	`Wr™eFunùiÚSigÇtu»
(
u£dFunùiÚs
[
n
]);

2667 
c
 = 'n';

2668 
	`Wr™eD©a
(&
c
, 1);

2671 
	}
}

2673 
	gasCWr™”
::
	$Wr™eFunùiÚSigÇtu»
(
asCSütFunùiÚ
 *
func
)

2675 
asUINT
 
i
, 
couÁ
;

2677 
	`Wr™eSŒšg
(&
func
->
Çme
);

2678 
	`Wr™eD©aTy³
(&
func
->
»tuºTy³
);

2680 
couÁ
 = (
asUINT
)
func
->
·¿m‘”Ty³s
.
	`G‘L’gth
();

2681 
	`Wr™eEncodedIÁ64
(
couÁ
);

2682  
i
 = 0; i < 
couÁ
; ++i )

2683 
	`Wr™eD©aTy³
(&
func
->
·¿m‘”Ty³s
[
i
]);

2685 
couÁ
 = (
asUINT
)
func
->
šOutFÏgs
.
	`G‘L’gth
();

2686 
	`Wr™eEncodedIÁ64
(
couÁ
);

2687  
i
 = 0; i < 
couÁ
; ++i )

2688 
	`Wr™eEncodedIÁ64
(
func
->
šOutFÏgs
[
i
]);

2690 
	`Wr™eEncodedIÁ64
(
func
->
funcTy³
);

2693 
couÁ
 = 0;

2694  
i
 = (
asUINT
)
func
->
deçuÉArgs
.
	`G‘L’gth
(); i-- > 0; )

2695 ifĞ
func
->
deçuÉArgs
[
i
] )

2696 
couÁ
++;

2697 
	`Wr™eEncodedIÁ64
(
couÁ
);

2698  
i
 = (
asUINT
)
func
->
deçuÉArgs
.
	`G‘L’gth
(); i-- > 0; )

2699 ifĞ
func
->
deçuÉArgs
[
i
] )

2700 
	`Wr™eSŒšg
(
func
->
deçuÉArgs
[
i
]);

2702 
	`Wr™eObjeùTy³
(
func
->
objeùTy³
);

2704 ifĞ
func
->
objeùTy³
 )

2706 
asBYTE
 
b
 = 0;

2707 
b
 +ğ
func
->
isR—dOÆy
 ? 1 : 0;

2708 
b
 +ğ
func
->
isPriv©e
 ? 2 : 0;

2709 
	`Wr™eD©a
(&
b
, 1);

2713 
	`Wr™eSŒšg
(&
func
->
ÇmeS·û
->
Çme
);

2715 
	}
}

2717 
	gasCWr™”
::
	$Wr™eFunùiÚ
(
asCSütFunùiÚ
* 
func
)

2719 
c
;

2722 ifĞ
func
 == 0 )

2724 
c
 = '\0';

2725 
	`Wr™eD©a
(&
c
, 1);

2730  
asUINT
 
f
 = 0; f < 
§vedFunùiÚs
.
	`G‘L’gth
(); f++ )

2732 ifĞ
§vedFunùiÚs
[
f
] =ğ
func
 )

2734 
c
 = 'r';

2735 
	`Wr™eD©a
(&
c
, 1);

2736 
	`Wr™eEncodedIÁ64
(
f
);

2742 
§vedFunùiÚs
.
	`PushLa¡
(
func
);

2744 
c
 = 'f';

2745 
	`Wr™eD©a
(&
c
, 1);

2747 
asUINT
 
i
, 
couÁ
;

2749 
	`Wr™eFunùiÚSigÇtu»
(
func
);

2751 ifĞ
func
->
funcTy³
 =ğ
asFUNC_SCRIPT
 )

2754 
	`C®cuÏ‹Adju¡m’tByPos
(
func
);

2756 
	`Wr™eBy‹Code
(
func
);

2758 
asDWORD
 
v¬S·û
 = 
	`Adju¡SckPos™iÚ
(
func
->
v¬ŸbËS·û
);

2759 
	`Wr™eEncodedIÁ64
(
v¬S·û
);

2761 
couÁ
 = (
asUINT
)
func
->
objV¬ŸbËPos
.
	`G‘L’gth
();

2762 
	`Wr™eEncodedIÁ64
(
couÁ
);

2763  
i
 = 0; i < 
couÁ
; ++i )

2765 
	`Wr™eObjeùTy³
(
func
->
objV¬ŸbËTy³s
[
i
]);

2767 
	`Wr™eEncodedIÁ64
(
	`FšdFunùiÚIndex
(
func
->
funcV¬ŸbËTy³s
[
i
]));

2768 
	`Wr™eEncodedIÁ64
(
	`Adju¡SckPos™iÚ
(
func
->
objV¬ŸbËPos
[
i
]));

2770 ifĞ
couÁ
 > 0 )

2771 
	`Wr™eEncodedIÁ64
(
func
->
objV¬ŸbËsOnH—p
);

2773 
	`Wr™eEncodedIÁ64
((
asUINT
)
func
->
objV¬ŸbËInfo
.
	`G‘L’gth
());

2774  
i
 = 0; i < 
func
->
objV¬ŸbËInfo
.
	`G‘L’gth
(); ++i )

2777 
	`Wr™eEncodedIÁ64
(
by‹codeNbrByPos
[
func
->
objV¬ŸbËInfo
[
i
].
´og¿mPos
]);

2778 
	`Wr™eEncodedIÁ64
(
	`Adju¡SckPos™iÚ
(
func
->
objV¬ŸbËInfo
[
i
].
v¬ŸbËOff£t
));

2779 
	`Wr™eEncodedIÁ64
(
func
->
objV¬ŸbËInfo
[
i
].
İtiÚ
);

2784 
asUINT
 
Ëngth
 = (asUINT)
func
->
lšeNumb”s
.
	`G‘L’gth
();

2785 
	`Wr™eEncodedIÁ64
(
Ëngth
);

2786  
i
 = 0; i < 
Ëngth
; ++i )

2788 ifĞ(
i
 & 1) == 0 )

2789 
	`Wr™eEncodedIÁ64
(
by‹codeNbrByPos
[
func
->
lšeNumb”s
[
i
]]);

2791 
	`Wr™eEncodedIÁ64
(
func
->
lšeNumb”s
[
i
]);

2794 
	`Wr™eD©a
(&
func
->
isSh¬ed
, 1);

2797 
	`Wr™eEncodedIÁ64
((
asUINT
)
func
->
v¬ŸbËs
.
	`G‘L’gth
());

2798  
i
 = 0; i < 
func
->
v¬ŸbËs
.
	`G‘L’gth
(); i++ )

2801 
	`Wr™eEncodedIÁ64
(
by‹codeNbrByPos
[
func
->
v¬ŸbËs
[
i
]->
deş¬edAtProg¿mPos
]);

2803 
	`Wr™eEncodedIÁ64
(
	`Adju¡SckPos™iÚ
(
func
->
v¬ŸbËs
[
i
]->
¡ackOff£t
));

2804 
	`Wr™eSŒšg
(&
func
->
v¬ŸbËs
[
i
]->
Çme
);

2805 
	`Wr™eD©aTy³
(&
func
->
v¬ŸbËs
[
i
]->
ty³
);

2808 ifĞ
func
->
funcTy³
 =ğ
asFUNC_VIRTUAL
 )

2810 
	`Wr™eEncodedIÁ64
(
func
->
vfTabËIdx
);

2814 ifĞ
func
->
sütSeùiÚIdx
 >= 0 )

2815 
	`Wr™eSŒšg
(
’gše
->
sütSeùiÚNames
[
func
->
sütSeùiÚIdx
]);

2818 
c
 = 0;

2819 
	`Wr™eD©a
(&
c
, 1);

2821 
	}
}

2823 
	gasCWr™”
::
	$Wr™eObjeùTy³Deş¬©iÚ
(
asCObjeùTy³
 *
Ù
, 
pha£
)

2825 ifĞ
pha£
 == 1 )

2828 
	`Wr™eSŒšg
(&
Ù
->
Çme
);

2830 
	`Wr™eD©a
(&
Ù
->
æags
, 4);

2833 ifĞ(
Ù
->
æags
 & 
asOBJ_SCRIPT_OBJECT
è&& ot->
size
 > 0 )

2837 
	`Wr™eEncodedIÁ64
(1);

2843 
	`Wr™eEncodedIÁ64
(
Ù
->
size
);

2847 
	`Wr™eSŒšg
(&
Ù
->
ÇmeS·û
->
Çme
);

2849 ifĞ
pha£
 == 2 )

2851 ifĞ
Ù
->
æags
 & 
asOBJ_ENUM
 )

2854 
size
 = ()
Ù
->
’umV®ues
.
	`G‘L’gth
();

2855 
	`Wr™eEncodedIÁ64
(
size
);

2857  
n
 = 0;‚ < 
size
;‚++ )

2859 
	`Wr™eSŒšg
(&
Ù
->
’umV®ues
[
n
]->
Çme
);

2860 
	`Wr™eD©a
(&
Ù
->
’umV®ues
[
n
]->
v®ue
, 4);

2863 ifĞ
Ù
->
æags
 & 
asOBJ_TYPEDEF
 )

2865 
eTok’Ty³
 
t
 = 
Ù
->
‹m¶©eSubTy³
.
	`G‘Tok’Ty³
();

2866 
	`Wr™eEncodedIÁ64
(
t
);

2870 
	`Wr™eObjeùTy³
(
Ù
->
d”ivedFrom
);

2873 
size
 = (
asUINT
)
Ù
->
š‹rçûs
.
	`G‘L’gth
();

2874 
	`Wr™eEncodedIÁ64
(
size
);

2875 
asUINT
 
n
;

2876  
n
 = 0;‚ < 
Ù
->
š‹rçûs
.
	`G‘L’gth
();‚++ )

2878 
	`Wr™eObjeùTy³
(
Ù
->
š‹rçûs
[
n
]);

2882 ifĞ!
Ù
->
	`IsIÁ”çû
(è&& ot->
æags
 !ğ
asOBJ_TYPEDEF
 && ot->æag !ğ
asOBJ_ENUM
 )

2884 
	`Wr™eFunùiÚ
(
’gše
->
sütFunùiÚs
[
Ù
->
beh
.
de¡ruù
]);

2885 
size
 = ()
Ù
->
beh
.
cÚ¡ruùÜs
.
	`G‘L’gth
();

2886 
	`Wr™eEncodedIÁ64
(
size
);

2887  
n
 = 0;‚ < 
Ù
->
beh
.
cÚ¡ruùÜs
.
	`G‘L’gth
();‚++ )

2889 
	`Wr™eFunùiÚ
(
’gše
->
sütFunùiÚs
[
Ù
->
beh
.
cÚ¡ruùÜs
[
n
]]);

2890 
	`Wr™eFunùiÚ
(
’gše
->
sütFunùiÚs
[
Ù
->
beh
.
çùÜ›s
[
n
]]);

2895 
size
 = ()
Ù
->
m‘hods
.
	`G‘L’gth
();

2896 
	`Wr™eEncodedIÁ64
(
size
);

2897  
n
 = 0;‚ < 
Ù
->
m‘hods
.
	`G‘L’gth
();‚++ )

2899 
	`Wr™eFunùiÚ
(
’gše
->
sütFunùiÚs
[
Ù
->
m‘hods
[
n
]]);

2903 
size
 = ()
Ù
->
vœtu®FunùiÚTabË
.
	`G‘L’gth
();

2904 
	`Wr™eEncodedIÁ64
(
size
);

2905  
n
 = 0;‚ < (
asUINT
)
size
;‚++ )

2907 
	`Wr™eFunùiÚ
(
Ù
->
vœtu®FunùiÚTabË
[
n
]);

2911 ifĞ
pha£
 == 3 )

2914 
asUINT
 
size
 = (asUINT)
Ù
->
´İ”t›s
.
	`G‘L’gth
();

2915 
	`Wr™eEncodedIÁ64
(
size
);

2916  
asUINT
 
n
 = 0;‚ < 
Ù
->
´İ”t›s
.
	`G‘L’gth
();‚++ )

2918 
	`Wr™eObjeùPrİ”ty
(
Ù
->
´İ”t›s
[
n
]);

2921 
	}
}

2923 
	gasCWr™”
::
	$Wr™eEncodedIÁ64
(
asINT64
 
i
)

2925 
asBYTE
 
signB™
 = ( 
i
 & 
	`asINT64
(1)<<63 ) ? 0x80 : 0;

2926 ifĞ
signB™
 ) 
i
 = -i;

2928 
asBYTE
 
b
;

2929 ifĞ
i
 < (1<<6) )

2931 
b
 = (
asBYTE
)(
signB™
 + 
i
); 
	`Wr™eD©a
(&b, 1);

2933 ifĞ
i
 < (1<<13) )

2935 
b
 = 
	`asBYTE
(0x40 + 
signB™
 + (
i
 >> 8)); 
	`Wr™eD©a
(&b, 1);

2936 
b
 = 
	`asBYTE
(
i
 & 0xFF); 
	`Wr™eD©a
(&b, 1);

2938 ifĞ
i
 < (1<<20) )

2940 
b
 = 
	`asBYTE
(0x60 + 
signB™
 + (
i
 >> 16)); 
	`Wr™eD©a
(&b, 1);

2941 
b
 = 
	`asBYTE
((
i
 >> 8è& 0xFF); 
	`Wr™eD©a
(&b, 1);

2942 
b
 = 
	`asBYTE
(
i
 & 0xFF); 
	`Wr™eD©a
(&b, 1);

2944 ifĞ
i
 < (1<<27) )

2946 
b
 = 
	`asBYTE
(0x70 + 
signB™
 + (
i
 >> 24)); 
	`Wr™eD©a
(&b, 1);

2947 
b
 = 
	`asBYTE
((
i
 >> 16è& 0xFF); 
	`Wr™eD©a
(&b, 1);

2948 
b
 = 
	`asBYTE
((
i
 >> 8è& 0xFF); 
	`Wr™eD©a
(&b, 1);

2949 
b
 = 
	`asBYTE
(
i
 & 0xFF); 
	`Wr™eD©a
(&b, 1);

2951 ifĞ
i
 < (
	`asINT64
(1)<<34) )

2953 
b
 = 
	`asBYTE
(0x78 + 
signB™
 + (
i
 >> 32)); 
	`Wr™eD©a
(&b, 1);

2954 
b
 = 
	`asBYTE
((
i
 >> 24è& 0xFF); 
	`Wr™eD©a
(&b, 1);

2955 
b
 = 
	`asBYTE
((
i
 >> 16è& 0xFF); 
	`Wr™eD©a
(&b, 1);

2956 
b
 = 
	`asBYTE
((
i
 >> 8è& 0xFF); 
	`Wr™eD©a
(&b, 1);

2957 
b
 = 
	`asBYTE
(
i
 & 0xFF); 
	`Wr™eD©a
(&b, 1);

2959 ifĞ
i
 < (
	`asINT64
(1)<<41) )

2961 
b
 = 
	`asBYTE
(0x7C + 
signB™
 + (
i
 >> 40)); 
	`Wr™eD©a
(&b, 1);

2962 
b
 = 
	`asBYTE
((
i
 >> 32è& 0xFF); 
	`Wr™eD©a
(&b, 1);

2963 
b
 = 
	`asBYTE
((
i
 >> 24è& 0xFF); 
	`Wr™eD©a
(&b, 1);

2964 
b
 = 
	`asBYTE
((
i
 >> 16è& 0xFF); 
	`Wr™eD©a
(&b, 1);

2965 
b
 = 
	`asBYTE
((
i
 >> 8è& 0xFF); 
	`Wr™eD©a
(&b, 1);

2966 
b
 = 
	`asBYTE
(
i
 & 0xFF); 
	`Wr™eD©a
(&b, 1);

2968 ifĞ
i
 < (
	`asINT64
(1)<<48) )

2970 
b
 = 
	`asBYTE
(0x7E + 
signB™
 + (
i
 >> 48)); 
	`Wr™eD©a
(&b, 1);

2971 
b
 = 
	`asBYTE
((
i
 >> 40è& 0xFF); 
	`Wr™eD©a
(&b, 1);

2972 
b
 = 
	`asBYTE
((
i
 >> 32è& 0xFF); 
	`Wr™eD©a
(&b, 1);

2973 
b
 = 
	`asBYTE
((
i
 >> 24è& 0xFF); 
	`Wr™eD©a
(&b, 1);

2974 
b
 = 
	`asBYTE
((
i
 >> 16è& 0xFF); 
	`Wr™eD©a
(&b, 1);

2975 
b
 = 
	`asBYTE
((
i
 >> 8è& 0xFF); 
	`Wr™eD©a
(&b, 1);

2976 
b
 = 
	`asBYTE
(
i
 & 0xFF); 
	`Wr™eD©a
(&b, 1);

2980 
b
 = 
	`asBYTE
(0x7F + 
signB™
); 
	`Wr™eD©a
(&b, 1);

2981 
b
 = 
	`asBYTE
((
i
 >> 56è& 0xFF); 
	`Wr™eD©a
(&b, 1);

2982 
b
 = 
	`asBYTE
((
i
 >> 48è& 0xFF); 
	`Wr™eD©a
(&b, 1);

2983 
b
 = 
	`asBYTE
((
i
 >> 40è& 0xFF); 
	`Wr™eD©a
(&b, 1);

2984 
b
 = 
	`asBYTE
((
i
 >> 32è& 0xFF); 
	`Wr™eD©a
(&b, 1);

2985 
b
 = 
	`asBYTE
((
i
 >> 24è& 0xFF); 
	`Wr™eD©a
(&b, 1);

2986 
b
 = 
	`asBYTE
((
i
 >> 16è& 0xFF); 
	`Wr™eD©a
(&b, 1);

2987 
b
 = 
	`asBYTE
((
i
 >> 8è& 0xFF); 
	`Wr™eD©a
(&b, 1);

2988 
b
 = 
	`asBYTE
(
i
 & 0xFF); 
	`Wr™eD©a
(&b, 1);

2990 
	}
}

2992 
	gasCWr™”
::
	$Wr™eSŒšg
(
asCSŒšg
* 
¡r
)

2999 ifĞ
¡r
->
	`G‘L’gth
() == 0 )

3001 
z
 = '\0';

3002 
	`Wr™eD©a
(&
z
, 1);

3007 
asSM­Node
<
asCSŒšgPoš‹r
, > *
cursÜ
 = 0;

3008 ià(
¡ršgToIdM­
.
	`MoveTo
(&
cursÜ
, 
	`asCSŒšgPoš‹r
(
¡r
)))

3011 
b
 = 'r';

3012 
	`Wr™eD©a
(&
b
, 1);

3013 
	`Wr™eEncodedIÁ64
(
cursÜ
->
v®ue
);

3018 
b
 = 'n';

3019 
	`Wr™eD©a
(&
b
, 1);

3021 
asUINT
 
Ën
 = (asUINT)
¡r
->
	`G‘L’gth
();

3022 
	`Wr™eEncodedIÁ64
(
Ën
);

3023 
¡»am
->
	`Wr™e
(
¡r
->
	`Add»ssOf
(), (
asUINT
)
Ën
);

3025 
§vedSŒšgs
.
	`PushLa¡
(*
¡r
);

3026 
¡ršgToIdM­
.
	`In£¹
(
	`asCSŒšgPoš‹r
(
¡r
), (
§vedSŒšgs
.
	`G‘L’gth
()) - 1);

3027 
	}
}

3029 
	gasCWr™”
::
	$Wr™eGlob®Prİ”ty
(
asCGlob®Prİ”ty
* 
´İ
)

3033 
	`Wr™eSŒšg
(&
´İ
->
Çme
);

3034 
	`Wr™eSŒšg
(&
´İ
->
ÇmeS·û
->
Çme
);

3035 
	`Wr™eD©aTy³
(&
´İ
->
ty³
);

3038 ifĞ
´İ
->
	`G‘In™Func
() )

3040 
boŞ
 
f
 = 
Œue
;

3041 
	`Wr™eD©a
(&
f
, 1);

3043 
	`Wr™eFunùiÚ
(
´İ
->
	`G‘In™Func
());

3047 
boŞ
 
f
 = 
çl£
;

3048 
	`Wr™eD©a
(&
f
, 1);

3050 
	}
}

3052 
	gasCWr™”
::
	$Wr™eObjeùPrİ”ty
(
asCObjeùPrİ”ty
* 
´İ
)

3054 
	`Wr™eSŒšg
(&
´İ
->
Çme
);

3055 
	`Wr™eD©aTy³
(&
´İ
->
ty³
);

3056 
	`Wr™eD©a
(&
´İ
->
isPriv©e
, 1);

3057 
	}
}

3059 
	gasCWr™”
::
	$Wr™eD©aTy³
(cÚ¡ 
asCD©aTy³
 *
dt
)

3062  
asUINT
 
n
 = 0;‚ < 
§vedD©aTy³s
.
	`G‘L’gth
();‚++ )

3064 ifĞ*
dt
 =ğ
§vedD©aTy³s
[
n
] )

3066 
asUINT
 
c
 = 0;

3067 
	`Wr™eEncodedIÁ64
(
c
);

3068 
	`Wr™eEncodedIÁ64
(
n
);

3074 
§vedD©aTy³s
.
	`PushLa¡
(*
dt
);

3076 
boŞ
 
b
;

3077 
t
 = 
dt
->
	`G‘Tok’Ty³
();

3078 
	`Wr™eEncodedIÁ64
(
t
);

3079 ifĞ
t
 =ğ
‰Id’tif›r
 )

3081 
	`Wr™eObjeùTy³
(
dt
->
	`G‘ObjeùTy³
());

3082 
b
 = 
dt
->
	`IsObjeùHªdË
();

3083 
	`Wr™eD©a
(&
b
, 1);

3084 
b
 = 
dt
->
	`IsHªdËToCÚ¡
();

3085 
	`Wr™eD©a
(&
b
, 1);

3087 
b
 = 
dt
->
	`IsReã»nû
();

3088 
	`Wr™eD©a
(&
b
, 1);

3089 
b
 = 
dt
->
	`IsR—dOÆy
();

3090 
	`Wr™eD©a
(&
b
, 1);

3092 ifĞ
t
 =ğ
‰Id’tif›r
 && 
dt
->
	`G‘ObjeùTy³
()->
Çme
 == "_builtin_function_" )

3094 
	`Wr™eFunùiÚSigÇtu»
(
dt
->
	`G‘FuncDef
());

3096 
	}
}

3098 
	gasCWr™”
::
	$Wr™eObjeùTy³
(
asCObjeùTy³
* 
Ù
)

3100 
ch
;

3102 ifĞ
Ù
 )

3105 ifĞ
Ù
->
‹m¶©eSubTy³
.
	`G‘Tok’Ty³
(è!ğ
‰UÄecognizedTok’
 )

3107 
ch
 = 'a';

3108 
	`Wr™eD©a
(&
ch
, 1);

3109 
	`Wr™eSŒšg
(&
Ù
->
Çme
);

3111 ifĞ
Ù
->
‹m¶©eSubTy³
.
	`IsObjeù
(è|| ot->‹m¶©eSubTy³.
	`IsEnumTy³
() )

3113 
ch
 = 's';

3114 
	`Wr™eD©a
(&
ch
, 1);

3115 
	`Wr™eD©aTy³
(&
Ù
->
‹m¶©eSubTy³
);

3119 
ch
 = 't';

3120 
	`Wr™eD©a
(&
ch
, 1);

3121 
eTok’Ty³
 
t
 = 
Ù
->
‹m¶©eSubTy³
.
	`G‘Tok’Ty³
();

3122 
	`Wr™eEncodedIÁ64
(
t
);

3125 ifĞ
Ù
->
æags
 & 
asOBJ_TEMPLATE_SUBTYPE
 )

3127 
ch
 = 's';

3128 
	`Wr™eD©a
(&
ch
, 1);

3129 
	`Wr™eSŒšg
(&
Ù
->
Çme
);

3133 
ch
 = 'o';

3134 
	`Wr™eD©a
(&
ch
, 1);

3135 
	`Wr™eSŒšg
(&
Ù
->
Çme
);

3136 
	`Wr™eSŒšg
(&
Ù
->
ÇmeS·û
->
Çme
);

3141 
ch
 = '\0';

3142 
	`Wr™eD©a
(&
ch
, 1);

3144 
	}
}

3146 
	gasCWr™”
::
	$C®cuÏ‹Adju¡m’tByPos
(
asCSütFunùiÚ
 *
func
)

3149 
asUINT
 
n
;

3150 
asCA¼ay
<> 
adju¡m’ts
;

3151 
asUINT
 
off£t
 = 0;

3152 ifĞ
func
->
objeùTy³
 )

3154 
adju¡m’ts
.
	`PushLa¡
(
off£t
);

3155 
adju¡m’ts
.
	`PushLa¡
(1-
AS_PTR_SIZE
);

3156 
off£t
 +ğ
AS_PTR_SIZE
;

3158 ifĞ
func
->
	`DÛsR‘uºOnSck
() )

3160 
adju¡m’ts
.
	`PushLa¡
(
off£t
);

3161 
adju¡m’ts
.
	`PushLa¡
(1-
AS_PTR_SIZE
);

3162 
off£t
 +ğ
AS_PTR_SIZE
;

3164  
n
 = 0;‚ < 
func
->
·¿m‘”Ty³s
.
	`G‘L’gth
();‚++ )

3166 ifĞ!
func
->
·¿m‘”Ty³s
[
n
].
	`IsPrim™ive
() ||

3167 
func
->
·¿m‘”Ty³s
[
n
].
	`IsReã»nû
() )

3169 
adju¡m’ts
.
	`PushLa¡
(
off£t
);

3170 
adju¡m’ts
.
	`PushLa¡
(1-
AS_PTR_SIZE
);

3171 
off£t
 +ğ
AS_PTR_SIZE
;

3175 
	`asASSERT
Ğ
func
->
·¿m‘”Ty³s
[
n
].
	`IsPrim™ive
() );

3176 
off£t
 +ğ
func
->
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

3181 
adju¡Neg©iveSckByPos
.
	`S‘L’gth
(
off£t
);

3182 
	`mem£t
(
adju¡Neg©iveSckByPos
.
	`Add»ssOf
(), 0,‡dju¡Neg©iveSckByPos.
	`G‘L’gth
()*());

3183  
n
 = 0;‚ < 
adju¡m’ts
.
	`G‘L’gth
();‚+=2 )

3185 
pos
 = 
adju¡m’ts
[
n
];

3186 
adju¡
 = 
adju¡m’ts
[
n
+1];

3188  
asUINT
 
i
 = 
pos
+1; i < 
adju¡Neg©iveSckByPos
.
	`G‘L’gth
(); i++ )

3189 
adju¡Neg©iveSckByPos
[
i
] +ğ
adju¡
;

3194 
adju¡m’ts
.
	`S‘L’gth
(0);

3195  
n
 = 0;‚ < 
func
->
objV¬ŸbËTy³s
.
	`G‘L’gth
();‚++ )

3197 ifĞ
func
->
objV¬ŸbËTy³s
[
n
] )

3200 
size
 = 
AS_PTR_SIZE
;

3201 ifĞ(
func
->
objV¬ŸbËTy³s
[
n
]->
	`G‘FÏgs
(è& 
asOBJ_VALUE
) &&

3202 
n
 >ğ
func
->
objV¬ŸbËsOnH—p
 )

3204 
size
 = 
func
->
objV¬ŸbËTy³s
[
n
]->
	`G‘Size
();

3205 ifĞ
size
 < 4 )

3206 
size
 = 1;

3208 
size
 /= 4;

3212 ifĞ
size
 > 1 )

3215 
adju¡m’ts
.
	`PushLa¡
(
func
->
objV¬ŸbËPos
[
n
]);

3216 
adju¡m’ts
.
	`PushLa¡
(-(
size
-1));

3222 
adju¡SckByPos
.
	`S‘L’gth
(
func
->
¡ackN“ded
);

3223 
	`mem£t
(
adju¡SckByPos
.
	`Add»ssOf
(), 0,‡dju¡SckByPos.
	`G‘L’gth
()*());

3224  
n
 = 0;‚ < 
adju¡m’ts
.
	`G‘L’gth
();‚+=2 )

3226 
pos
 = 
adju¡m’ts
[
n
];

3227 
adju¡
 = 
adju¡m’ts
[
n
+1];

3229  
asUINT
 
i
 = 
pos
; i < 
adju¡SckByPos
.
	`G‘L’gth
(); i++ )

3230 
adju¡SckByPos
[
i
] +ğ
adju¡
;

3234 
size_t
 
Ëngth
 = 
func
->
by‹Code
.
	`G‘L’gth
();

3235 
asDWORD
 *
bc
 = 
func
->
by‹Code
.
	`Add»ssOf
();

3236 
by‹codeNbrByPos
.
	`S‘L’gth
(
Ëngth
);

3237 
asUINT
 
num
;

3238  
off£t
 = 0, 
num
 = 0; off£ˆ< 
Ëngth
; )

3240 
by‹codeNbrByPos
[
off£t
] = 
num
;

3241 
off£t
 +ğ
asBCTy³Size
[
asBCInfo
[*(
asBYTE
*)(
bc
+off£t)].
ty³
];

3242 
num
++;

3246 
	`asASSERT
(*(
asBYTE
*)(
bc
+
Ëngth
-1è=ğ
asBC_RET
);

3247 
	}
}

3249 
	gasCWr™”
::
	$Adju¡SckPos™iÚ
(
pos
)

3251 ifĞ
pos
 >ğ()
adju¡SckByPos
.
	`G‘L’gth
() )

3255 ifĞ
adju¡SckByPos
.
	`G‘L’gth
() > 0 )

3256 
pos
 +ğ
adju¡SckByPos
[adju¡SckByPos.
	`G‘L’gth
()-1];

3258 ifĞ
pos
 >= 0 )

3259 
pos
 +ğ
adju¡SckByPos
[pos];

3262 
	`asASSERT
Ğ-
pos
 < ()
adju¡Neg©iveSckByPos
.
	`G‘L’gth
() );

3263 
pos
 -ğ()
adju¡Neg©iveSckByPos
[-pos];

3266  
pos
;

3267 
	}
}

3269 
	gasCWr™”
::
	$Adju¡G‘Off£t
(
off£t
, 
asCSütFunùiÚ
 *
func
, 
asDWORD
 
´og¿mPos
)

3275 ifĞ
off£t
 == 0 )  0;

3278 
asCSütFunùiÚ
 *
ÿÎedFunc
 = 0;

3279  
asUINT
 
n
 = 
´og¿mPos
;‚ < 
func
->
by‹Code
.
	`G‘L’gth
(); )

3281 
asBYTE
 
bc
 = *×sBYTE*)&
func
->
by‹Code
[
n
];

3282 ifĞ
bc
 =ğ
asBC_CALL
 ||

3283 
bc
 =ğ
asBC_CALLSYS
 ||

3284 
bc
 =ğ
asBC_CALLINTF
 )

3287 
funcId
 = 
	`asBC_INTARG
(&
func
->
by‹Code
[
n
]);

3288 
ÿÎedFunc
 = 
’gše
->
sütFunùiÚs
[
funcId
];

3291 ifĞ
bc
 =ğ
asBC_ALLOC
 )

3294 
funcId
 = 
	`asBC_INTARG
(&
func
->
by‹Code
[
n
+
AS_PTR_SIZE
]);

3295 
ÿÎedFunc
 = 
’gše
->
sütFunùiÚs
[
funcId
];

3298 ifĞ
bc
 =ğ
asBC_CALLBND
 )

3301 
funcId
 = 
	`asBC_INTARG
(&
func
->
by‹Code
[
n
]);

3302 
ÿÎedFunc
 = 
’gše
->
impÜ‹dFunùiÚs
[
funcId
&0xFFFF]->
impÜ‹dFunùiÚSigÇtu»
;

3305 ifĞ
bc
 =ğ
asBC_C®lPŒ
 )

3308 
v¬
 = 
	`asBC_SWORDARG0
(&
func
->
by‹Code
[
n
]);

3309  
asUINT
 
v
 = 0; v < 
func
->
objV¬ŸbËPos
.
	`G‘L’gth
(); v++ )

3310 ifĞ
func
->
objV¬ŸbËPos
[
v
] =ğ
v¬
 )

3312 
ÿÎedFunc
 = 
func
->
funcV¬ŸbËTy³s
[
v
];

3317 ifĞ
bc
 =ğ
asBC_REFCPY
 ||

3318 
bc
 =ğ
asBC_COPY
 )

3321 
	`asASSERT
Ğ
off£t
 =ğ
AS_PTR_SIZE
 );

3322  
off£t
 + (1 - 
AS_PTR_SIZE
);

3325 
n
 +ğ
asBCTy³Size
[
asBCInfo
[
bc
].
ty³
];

3328 
	`asASSERT
Ğ
ÿÎedFunc
 );

3332 
asUINT
 
numPŒs
 = 0;

3333 
cu¼Off£t
 = 0;

3334 ifĞ
off£t
 > 
cu¼Off£t
 && 
ÿÎedFunc
->
	`G‘ObjeùTy³
() )

3336 
numPŒs
++;

3337 
cu¼Off£t
 +ğ
AS_PTR_SIZE
;

3339 ifĞ
off£t
 > 
cu¼Off£t
 && 
ÿÎedFunc
->
	`DÛsR‘uºOnSck
() )

3341 
numPŒs
++;

3342 
cu¼Off£t
 +ğ
AS_PTR_SIZE
;

3344  
asUINT
 
p
 = 0;… < 
ÿÎedFunc
->
·¿m‘”Ty³s
.
	`G‘L’gth
();…++ )

3346 ifĞ
off£t
 <ğ
cu¼Off£t
 ) ;

3348 ifĞ!
ÿÎedFunc
->
·¿m‘”Ty³s
[
p
].
	`IsPrim™ive
() ||

3349 
ÿÎedFunc
->
·¿m‘”Ty³s
[
p
].
	`IsReã»nû
() )

3352 
numPŒs
++;

3353 
cu¼Off£t
 +ğ
AS_PTR_SIZE
;

3358 
	`asASSERT
Ğ
ÿÎedFunc
->
·¿m‘”Ty³s
[
p
].
	`IsPrim™ive
() );

3359 
cu¼Off£t
 +ğ
ÿÎedFunc
->
·¿m‘”Ty³s
[
p
].
	`G‘SizeOnSckDWÜds
();

3364 
	`asASSERT
Ğ
off£t
 =ğ
cu¼Off£t
 );

3366  
off£t
 + 
numPŒs
 * (1 - 
AS_PTR_SIZE
);

3367 
	}
}

3369 
	gasCWr™”
::
	$Wr™eBy‹Code
(
asCSütFunùiÚ
 *
func
)

3371 
asDWORD
 *
bc
 = 
func
->
by‹Code
.
	`Add»ssOf
();

3372 
size_t
 
Ëngth
 = 
func
->
by‹Code
.
	`G‘L’gth
();

3376 
asUINT
 
couÁ
 = 
by‹codeNbrByPos
[by‹codeNbrByPos.
	`G‘L’gth
()-1] + 1;

3377 
	`Wr™eEncodedIÁ64
(
couÁ
);

3379 
asDWORD
 *
¡¬tBC
 = 
bc
;

3380  
Ëngth
 )

3382 
asDWORD
 
tmp
[4];

3383 
asDWORD
 
c
 = *(
asBYTE
*)
bc
;

3386 
	`memıy
(
tmp
, 
bc
, 
asBCTy³Size
[
asBCInfo
[
c
].
ty³
]*(
asDWORD
));

3388 ifĞ
c
 =ğ
asBC_ALLOC
 )

3391 
asCObjeùTy³
 *
Ù
 = *×sCObjeùTy³**)(
tmp
+1);

3392 *(
asPWORD
*)(
tmp
+1èğ
	`FšdObjeùTy³Idx
(
Ù
);

3395 ifĞ
Ù
->
æags
 & 
asOBJ_SCRIPT_OBJECT
 )

3396 *(*)&
tmp
[1+
AS_PTR_SIZE
] = 
	`FšdFunùiÚIndex
(
’gše
->
sütFunùiÚs
[*(*)&tmp[1+AS_PTR_SIZE]]);

3398 ifĞ
c
 =ğ
asBC_FREE
 ||

3399 
c
 =ğ
asBC_REFCPY
 ||

3400 
c
 =ğ
asBC_RefCpyV
 ||

3401 
c
 =ğ
asBC_OBJTYPE
 )

3404 *(
asPWORD
*)(
tmp
+1èğ
	`FšdObjeùTy³Idx
(*(
asCObjeùTy³
**)(tmp+1));

3406 ifĞ
c
 =ğ
asBC_J™EÁry
 )

3409 *(
asPWORD
*)(
tmp
+1) = 0;

3411 ifĞ
c
 =ğ
asBC_TYPEID
 ||

3412 
c
 =ğ
asBC_Ca¡
 )

3415 *(*)(
tmp
+1èğ
	`FšdTy³IdIdx
(*(*)(tmp+1));

3417 ifĞ
c
 =ğ
asBC_ADDSi
 ||

3418 
c
 =ğ
asBC_LßdThisR
 )

3421 *(((*)
tmp
)+1èğ()
	`FšdObjeùPrİIndex
(*(((*)tmp)+1), *(*)(tmp+1));

3424 *(*)(
tmp
+1èğ
	`FšdTy³IdIdx
(*(*)(tmp+1));

3426 ifĞ
c
 =ğ
asBC_LßdRObjR
 ||

3427 
c
 =ğ
asBC_LßdVObjR
 )

3430 *(((*)
tmp
)+2èğ()
	`FšdObjeùPrİIndex
(*(((*)tmp)+2), *(*)(tmp+2));

3433 *(*)(
tmp
+2èğ
	`FšdTy³IdIdx
(*(*)(tmp+2));

3435 ifĞ
c
 =ğ
asBC_COPY
 )

3438 *(*)(
tmp
+1èğ
	`FšdTy³IdIdx
(*(*)(tmp+1));

3441 
	`asBC_WORDARG0
(
tmp
) = 0;

3443 ifĞ
c
 =ğ
asBC_RET
 )

3446 
	`asBC_WORDARG0
(
tmp
) = 0;

3448 ifĞ
c
 =ğ
asBC_CALL
 ||

3449 
c
 =ğ
asBC_CALLINTF
 ||

3450 
c
 =ğ
asBC_CALLSYS
 )

3453 *(*)(
tmp
+1èğ
	`FšdFunùiÚIndex
(
’gše
->
sütFunùiÚs
[*(*)(tmp+1)]);

3455 ifĞ
c
 =ğ
asBC_FuncPŒ
 )

3458 *(
asPWORD
*)(
tmp
+1èğ
	`FšdFunùiÚIndex
(*(
asCSütFunùiÚ
**)(tmp+1));

3460 ifĞ
c
 =ğ
asBC_STR
 )

3463 
asWORD
 *
¬g
 = (×sWORD*)
tmp
)+1;

3464 *
¬g
 = (
asWORD
)
	`FšdSŒšgCÚ¡ªtIndex
(*arg);

3466 ifĞ
c
 =ğ
asBC_CALLBND
 )

3469 
funcId
 = 
tmp
[1];

3470  
asUINT
 
n
 = 0;‚ < 
moduË
->
bšdInfÜm©iÚs
.
	`G‘L’gth
();‚++ )

3471 ifĞ
moduË
->
bšdInfÜm©iÚs
[
n
]->
impÜ‹dFunùiÚSigÇtu»
->
id
 =ğ
funcId
 )

3473 
funcId
 = 
n
;

3477 
tmp
[1] = 
funcId
;

3479 ifĞ
c
 =ğ
asBC_PGA
 ||

3480 
c
 =ğ
asBC_PshGPŒ
 ||

3481 
c
 =ğ
asBC_LDG
 ||

3482 
c
 =ğ
asBC_PshG4
 ||

3483 
c
 =ğ
asBC_LdGRdR4
 ||

3484 
c
 =ğ
asBC_CpyGtoV4
 ||

3485 
c
 =ğ
asBC_CpyVtoG4
 ||

3486 
c
 =ğ
asBC_S‘G4
 )

3489 *(
asPWORD
*)(
tmp
+1èğ
	`FšdGlob®PrİPŒIndex
(*(**)(tmp+1));

3491 ifĞ
c
 =ğ
asBC_JMP
 ||

3492 
c
 =ğ
asBC_JZ
 ||

3493 
c
 =ğ
asBC_JNZ
 ||

3494 
c
 =ğ
asBC_JLowZ
 ||

3495 
c
 =ğ
asBC_JLowNZ
 ||

3496 
c
 =ğ
asBC_JS
 ||

3497 
c
 =ğ
asBC_JNS
 ||

3498 
c
 =ğ
asBC_JP
 ||

3499 
c
 =ğ
asBC_JNP
 )

3502 
off£t
 = *(*)(
tmp
+1);

3505 
bcSeqNum
 = 
by‹codeNbrByPos
[
bc
 - 
¡¬tBC
] + 1;

3506 
asDWORD
 *
rg‘BC
 = 
bc
 + 2 + 
off£t
;

3507 
rg‘BcSeqNum
 = 
by‹codeNbrByPos
[
rg‘BC
 - 
¡¬tBC
];

3510 *(*)(
tmp
+1èğ
rg‘BcSeqNum
 - 
bcSeqNum
;

3512 ifĞ
c
 =ğ
asBC_GETOBJ
 ||

3513 
c
 =ğ
asBC_GETOBJREF
 ||

3514 
c
 =ğ
asBC_GETREF
 )

3517 
	`asBC_WORDARG0
(
tmp
èğ(
asWORD
)
	`Adju¡G‘Off£t
×sBC_WORDARG0Ñmp), 
func
, 
	`asDWORD
(
bc
 - 
¡¬tBC
));

3521  
asBCInfo
[
c
].
ty³
 )

3523 
asBCTYPE_wW_ARG
:

3524 
asBCTYPE_rW_DW_ARG
:

3525 
asBCTYPE_wW_QW_ARG
:

3526 
asBCTYPE_rW_ARG
:

3527 
asBCTYPE_wW_DW_ARG
:

3528 
asBCTYPE_wW_W_ARG
:

3529 
asBCTYPE_rW_QW_ARG
:

3530 
asBCTYPE_rW_W_DW_ARG
:

3532 
	`asBC_SWORDARG0
(
tmp
èğ()
	`Adju¡SckPos™iÚ
(asBC_SWORDARG0(tmp));

3536 
asBCTYPE_wW_rW_ARG
:

3537 
asBCTYPE_wW_rW_DW_ARG
:

3538 
asBCTYPE_rW_rW_ARG
:

3540 
	`asBC_SWORDARG0
(
tmp
èğ()
	`Adju¡SckPos™iÚ
(asBC_SWORDARG0(tmp));

3541 
	`asBC_SWORDARG1
(
tmp
èğ()
	`Adju¡SckPos™iÚ
(asBC_SWORDARG1(tmp));

3545 
asBCTYPE_wW_rW_rW_ARG
:

3547 
	`asBC_SWORDARG0
(
tmp
èğ()
	`Adju¡SckPos™iÚ
(asBC_SWORDARG0(tmp));

3548 
	`asBC_SWORDARG1
(
tmp
èğ()
	`Adju¡SckPos™iÚ
(asBC_SWORDARG1(tmp));

3549 
	`asBC_SWORDARG2
(
tmp
èğ()
	`Adju¡SckPos™iÚ
(asBC_SWORDARG2(tmp));

3562  
asBCInfo
[
c
].
ty³
 )

3564 
asBCTYPE_NO_ARG
:

3567 
asBYTE
 
b
 = (asBYTE)
c
;

3568 
	`Wr™eD©a
(&
b
, 1);

3571 
asBCTYPE_W_ARG
:

3572 
asBCTYPE_wW_ARG
:

3573 
asBCTYPE_rW_ARG
:

3576 
asBYTE
 
b
 = (asBYTE)
c
;

3577 
	`Wr™eD©a
(&
b
, 1);

3580 
w
 = *(((*)
tmp
)+1);

3581 
	`Wr™eEncodedIÁ64
(
w
);

3584 
asBCTYPE_rW_DW_ARG
:

3585 
asBCTYPE_wW_DW_ARG
:

3586 
asBCTYPE_W_DW_ARG
:

3589 
asBYTE
 
b
 = (asBYTE)
c
;

3590 
	`Wr™eD©a
(&
b
, 1);

3593 
w
 = *(((*)
tmp
)+1);

3594 
	`Wr™eEncodedIÁ64
(
w
);

3597 
	`Wr™eEncodedIÁ64
(()
tmp
[1]);

3600 
asBCTYPE_DW_ARG
:

3603 
asBYTE
 
b
 = (asBYTE)
c
;

3604 
	`Wr™eD©a
(&
b
, 1);

3607 
	`Wr™eEncodedIÁ64
(()
tmp
[1]);

3610 
asBCTYPE_DW_DW_ARG
:

3613 
asBYTE
 
b
 = (asBYTE)
c
;

3614 
	`Wr™eD©a
(&
b
, 1);

3617 
	`Wr™eEncodedIÁ64
(()
tmp
[1]);

3620 
	`Wr™eEncodedIÁ64
(()
tmp
[2]);

3623 
asBCTYPE_wW_rW_rW_ARG
:

3626 
asBYTE
 
b
 = (asBYTE)
c
;

3627 
	`Wr™eD©a
(&
b
, 1);

3630 
w
 = *(((*)
tmp
)+1);

3631 
	`Wr™eEncodedIÁ64
(
w
);

3634 
w
 = *(((*)
tmp
)+2);

3635 
	`Wr™eEncodedIÁ64
(
w
);

3638 
w
 = *(((*)
tmp
)+3);

3639 
	`Wr™eEncodedIÁ64
(
w
);

3642 
asBCTYPE_wW_rW_ARG
:

3643 
asBCTYPE_rW_rW_ARG
:

3644 
asBCTYPE_wW_W_ARG
:

3647 
asBYTE
 
b
 = (asBYTE)
c
;

3648 
	`Wr™eD©a
(&
b
, 1);

3651 
w
 = *(((*)
tmp
)+1);

3652 
	`Wr™eEncodedIÁ64
(
w
);

3655 
w
 = *(((*)
tmp
)+2);

3656 
	`Wr™eEncodedIÁ64
(
w
);

3659 
asBCTYPE_wW_rW_DW_ARG
:

3660 
asBCTYPE_rW_W_DW_ARG
:

3663 
asBYTE
 
b
 = (asBYTE)
c
;

3664 
	`Wr™eD©a
(&
b
, 1);

3667 
w
 = *(((*)
tmp
)+1);

3668 
	`Wr™eEncodedIÁ64
(
w
);

3671 
w
 = *(((*)
tmp
)+2);

3672 
	`Wr™eEncodedIÁ64
(
w
);

3675 
dw
 = 
tmp
[2];

3676 
	`Wr™eEncodedIÁ64
(
dw
);

3679 
asBCTYPE_QW_ARG
:

3682 
asBYTE
 
b
 = (asBYTE)
c
;

3683 
	`Wr™eD©a
(&
b
, 1);

3686 
asQWORD
 
qw
 = *×sQWORD*)&
tmp
[1];

3687 
	`Wr™eEncodedIÁ64
(
qw
);

3690 
asBCTYPE_QW_DW_ARG
:

3693 
asBYTE
 
b
 = (asBYTE)
c
;

3694 
	`Wr™eD©a
(&
b
, 1);

3697 
asQWORD
 
qw
 = *×sQWORD*)&
tmp
[1];

3698 
	`Wr™eEncodedIÁ64
(
qw
);

3701 
dw
 = 
tmp
[3];

3702 
	`Wr™eEncodedIÁ64
(
dw
);

3705 
asBCTYPE_rW_QW_ARG
:

3706 
asBCTYPE_wW_QW_ARG
:

3709 
asBYTE
 
b
 = (asBYTE)
c
;

3710 
	`Wr™eD©a
(&
b
, 1);

3713 
w
 = *(((*)
tmp
)+1);

3714 
	`Wr™eEncodedIÁ64
(
w
);

3717 
asQWORD
 
qw
 = *×sQWORD*)&
tmp
[1];

3718 
	`Wr™eEncodedIÁ64
(
qw
);

3724 
	`asASSERT
(
çl£
);

3727  
n
 = 0;‚ < 
asBCTy³Size
[
asBCInfo
[
c
].
ty³
];‚++ )

3728 
	`Wr™eD©a
(&
tmp
[
n
], 4);

3733 
bc
 +ğ
asBCTy³Size
[
asBCInfo
[
c
].
ty³
];

3734 
Ëngth
 -ğ
asBCTy³Size
[
asBCInfo
[
c
].
ty³
];

3736 
	}
}

3738 
	gasCWr™”
::
	$Wr™eU£dTy³Ids
()

3740 
asUINT
 
couÁ
 = (asUINT)
u£dTy³Ids
.
	`G‘L’gth
();

3741 
	`Wr™eEncodedIÁ64
(
couÁ
);

3742  
asUINT
 
n
 = 0;‚ < 
couÁ
;‚++ )

3744 
asCD©aTy³
 
dt
 = 
’gše
->
	`G‘D©aTy³FromTy³Id
(
u£dTy³Ids
[
n
]);

3745 
	`Wr™eD©aTy³
(&
dt
);

3747 
	}
}

3749 
	gasCWr™”
::
	$FšdGlob®PrİPŒIndex
(*
±r
)

3751 
i
 = 
u£dGlob®Prİ”t›s
.
	`IndexOf
(
±r
);

3752 ifĞ
i
 >= 0 )  i;

3754 
u£dGlob®Prİ”t›s
.
	`PushLa¡
(
±r
);

3755  ()
u£dGlob®Prİ”t›s
.
	`G‘L’gth
()-1;

3756 
	}
}

3758 
	gasCWr™”
::
	$Wr™eU£dGlob®Prİs
()

3760 
c
 = ()
u£dGlob®Prİ”t›s
.
	`G‘L’gth
();

3761 
	`Wr™eEncodedIÁ64
(
c
);

3763  
n
 = 0;‚ < 
c
;‚++ )

3765 
asPWORD
 *
p
 = (asPWORD*)
u£dGlob®Prİ”t›s
[
n
];

3768 
moduËPrİ
 = 0;

3769 
asCGlob®Prİ”ty
 *
´İ
 = 0;

3770  
i
 = 0; i < (sigÃd)
moduË
->
sütGlob®s
.
	`G‘L’gth
(); i++ )

3772 ifĞ
p
 =ğ
moduË
->
sütGlob®s
[
i
]->
	`G‘Add»ssOfV®ue
() )

3774 
´İ
 = 
moduË
->
sütGlob®s
[
i
];

3775 
moduËPrİ
 = 1;

3781 ifĞ!
´İ
 )

3783  
i
 = 0; i < (sigÃd)
’gše
->
»gi¡”edGlob®Prİs
.
	`G‘L’gth
(); i++ )

3785 ifĞ
’gše
->
»gi¡”edGlob®Prİs
[
i
]->
	`G‘Add»ssOfV®ue
(è=ğ
p
 )

3787 
´İ
 = 
’gše
->
»gi¡”edGlob®Prİs
[
i
];

3793 
	`asASSERT
(
´İ
);

3796 
	`Wr™eSŒšg
(&
´İ
->
Çme
);

3797 
	`Wr™eSŒšg
(&
´İ
->
ÇmeS·û
->
Çme
);

3798 
	`Wr™eD©aTy³
(&
´İ
->
ty³
);

3801 
	`Wr™eD©a
(&
moduËPrİ
, 1);

3803 
	}
}

3805 
	gasCWr™”
::
	$Wr™eU£dObjeùPrİs
()

3807 
c
 = ()
u£dObjeùPrİ”t›s
.
	`G‘L’gth
();

3808 
	`Wr™eEncodedIÁ64
(
c
);

3810  
asUINT
 
n
 = 0;‚ < 
u£dObjeùPrİ”t›s
.
	`G‘L’gth
();‚++ )

3812 
asCObjeùTy³
 *
objTy³
 = 
u£dObjeùPrİ”t›s
[
n
].objType;

3813 
	`Wr™eObjeùTy³
(
objTy³
);

3816  
asUINT
 
p
 = 0;… < 
objTy³
->
´İ”t›s
.
	`G‘L’gth
();…++ )

3818 ifĞ
objTy³
->
´İ”t›s
[
p
]->
by‹Off£t
 =ğ
u£dObjeùPrİ”t›s
[
n
].
off£t
 )

3820 
	`Wr™eSŒšg
(&
objTy³
->
´İ”t›s
[
p
]->
Çme
);

3825 
	}
}

3827 
	gasCWr™”
::
	$FšdObjeùPrİIndex
(
off£t
, 
ty³Id
)

3829 
asCObjeùTy³
 *
objTy³
 = 
’gše
->
	`G‘ObjeùTy³FromTy³Id
(
ty³Id
);

3830  
asUINT
 
n
 = 0;‚ < 
u£dObjeùPrİ”t›s
.
	`G‘L’gth
();‚++ )

3832 ifĞ
u£dObjeùPrİ”t›s
[
n
].
objTy³
 == objType &&

3833 
u£dObjeùPrİ”t›s
[
n
].
off£t
 == offset )

3834  
n
;

3837 
SObjPrİ
 
´İ
 = {
objTy³
, 
off£t
};

3838 
u£dObjeùPrİ”t›s
.
	`PushLa¡
(
´İ
);

3839  ()
u£dObjeùPrİ”t›s
.
	`G‘L’gth
() - 1;

3840 
	}
}

3842 
	gasCWr™”
::
	$FšdFunùiÚIndex
(
asCSütFunùiÚ
 *
func
)

3844  
asUINT
 
n
 = 0;‚ < 
u£dFunùiÚs
.
	`G‘L’gth
();‚++ )

3846 ifĞ
u£dFunùiÚs
[
n
] =ğ
func
 )

3847  
n
;

3850 
u£dFunùiÚs
.
	`PushLa¡
(
func
);

3851  ()
u£dFunùiÚs
.
	`G‘L’gth
() - 1;

3852 
	}
}

3854 
	gasCWr™”
::
	$FšdTy³IdIdx
(
ty³Id
)

3856 
asUINT
 
n
;

3857  
n
 = 0;‚ < 
u£dTy³Ids
.
	`G‘L’gth
();‚++ )

3859 ifĞ
u£dTy³Ids
[
n
] =ğ
ty³Id
 )

3860  
n
;

3863 
u£dTy³Ids
.
	`PushLa¡
(
ty³Id
);

3864  ()
u£dTy³Ids
.
	`G‘L’gth
() - 1;

3865 
	}
}

3867 
	gasCWr™”
::
	$FšdObjeùTy³Idx
(
asCObjeùTy³
 *
obj
)

3869 
asUINT
 
n
;

3870  
n
 = 0;‚ < 
u£dTy³s
.
	`G‘L’gth
();‚++ )

3872 ifĞ
u£dTy³s
[
n
] =ğ
obj
 )

3873  
n
;

3876 
u£dTy³s
.
	`PushLa¡
(
obj
);

3877  ()
u£dTy³s
.
	`G‘L’gth
() - 1;

3878 
	}
}

3882 
	gEND_AS_NAMESPACE


	@../src/script/as_scriptcode.cpp

40 
	~"as_cÚfig.h
"

41 
	~"as_sütcode.h
"

43 
BEGIN_AS_NAMESPACE


45 
	gasCSütCode
::
	$asCSütCode
()

47 
lšeOff£t
 = 0;

48 
code
 = 0;

49 
codeL’gth
 = 0;

50 
sh¬edCode
 = 
çl£
;

51 
	}
}

53 
	gasCSütCode
::~
	$asCSütCode
()

55 ifĞ!
sh¬edCode
 && 
code
 )

57 
	`asDELETEARRAY
(
code
);

59 
	}
}

61 
	gasCSütCode
::
	$S‘Code
(cÚ¡ *
Çme
, cÚ¡ *
code
, 
boŞ
 
makeCİy
)

63  
	`S‘Code
(
Çme
, 
code
, 0, 
makeCİy
);

64 
	}
}

66 
	gasCSütCode
::
	$S‘Code
(cÚ¡ *
Çme
, cÚ¡ *
code
, 
size_t
 
Ëngth
, 
boŞ
 
makeCİy
)

68 ifĞ!
code
 )  
asINVALID_ARG
;

69 
this
->
Çme
 =‚ame ?‚ame : "";

70 ifĞ!
sh¬edCode
 && 
this
->
code
 )

72 
	`asDELETEARRAY
(
this
->
code
);

74 ifĞ
Ëngth
 == 0 )

75 
Ëngth
 = 
	`¡¾’
(
code
);

76 ifĞ
makeCİy
 )

78 
this
->
code
 = 
	`asNEWARRAY
(,
Ëngth
);

79 ifĞ
this
->
code
 == 0 )

80  
asOUT_OF_MEMORY
;

81 
	`memıy
((*)
this
->
code
, code, 
Ëngth
);

82 
codeL’gth
 = 
Ëngth
;

83 
sh¬edCode
 = 
çl£
;

87 
codeL’gth
 = 
Ëngth
;

88 
this
->
code
 = 
cÚ¡_ÿ¡
<*>(code);

89 
sh¬edCode
 = 
Œue
;

93 
lšePos™iÚs
.
	`PushLa¡
(0);

94  
size_t
 
n
 = 0;‚ < 
Ëngth
;‚++ )

95 ifĞ
code
[
n
] =ğ'\n' ) 
lšePos™iÚs
.
	`PushLa¡
(n+1);

96 
lšePos™iÚs
.
	`PushLa¡
(
Ëngth
);

98  
asSUCCESS
;

99 
	}
}

101 
	gasCSütCode
::
	$CÚv”tPosToRowCŞ
(
size_t
 
pos
, *
row
, *
cŞ
)

103 ifĞ
lšePos™iÚs
.
	`G‘L’gth
() == 0 )

105 ifĞ
row
 ) *row = 
lšeOff£t
;

106 ifĞ
cŞ
 ) *col = 1;

111 
max
 = ()
lšePos™iÚs
.
	`G‘L’gth
() - 1;

112 
mš
 = 0;

113 
i
 = 
max
/2;

117 ifĞ
lšePos™iÚs
[
i
] < 
pos
 )

120 ifĞ
mš
 =ğ
i
 ) ;

122 
mš
 = 
i
;

123 
i
 = (
max
 + 
mš
)/2;

125 ifĞ
lšePos™iÚs
[
i
] > 
pos
 )

128 ifĞ
max
 =ğ
i
 ) ;

130 
max
 = 
i
;

131 
i
 = (
max
 + 
mš
)/2;

140 ifĞ
row
 ) *row = 
i
 + 1 + 
lšeOff£t
;

141 ifĞ
cŞ
 ) *cŞ = ()(
pos
 - 
lšePos™iÚs
[
i
]) + 1;

142 
	}
}

144 
boŞ
 
	gasCSütCode
::
	$Tok’Equ®s
(
size_t
 
pos
, size_ˆ
Ën
, cÚ¡ *
¡r
)

146 ifĞ
pos
 + 
Ën
 > 
codeL’gth
 )  
çl£
;

147 ifĞ
	`¡ºcmp
(
code
 + 
pos
, 
¡r
, 
Ën
è=ğ0 && 
	`¡¾’
(str) ==†en )

148  
Œue
;

149  
çl£
;

150 
	}
}

152 
	gEND_AS_NAMESPACE


	@../src/script/as_scriptengine.cpp

39 
	~<¡dlib.h
>

41 
	~"as_cÚfig.h
"

42 
	~"as_sü‹ngše.h
"

43 
	~"as_bud”.h
"

44 
	~"as_cÚ‹xt.h
"

45 
	~"as_¡ršg_ut.h
"

46 
	~"as_tok’iz”.h
"

47 
	~"as_‹xts.h
"

48 
	~"as_moduË.h
"

49 
	~"as_ÿÎfunc.h
"

50 
	~"as_g’”ic.h
"

51 
	~"as_sütobjeù.h
"

52 
	~"as_comp”.h
"

53 
	~"as_by‹code.h
"

55 
BEGIN_AS_NAMESPACE


60 
AS_API
 cÚ¡ * 
asG‘Lib¿ryV”siÚ
()

62 #ifdeà
_DEBUG


63  
ANGELSCRIPT_VERSION_STRING
 " DEBUG";

65  
ANGELSCRIPT_VERSION_STRING
;

69 
AS_API
 cÚ¡ * 
asG‘Lib¿ryO±iÚs
()

71 cÚ¡ *
¡ršg
 = " "

74 #ifdeà
AS_MAX_PORTABILITY


77 #ifdeà
AS_DEBUG


80 #ifdeà
AS_NO_CLASS_METHODS


83 #ifdeà
AS_USE_DOUBLE_AS_FLOAT


86 #ifdeà
AS_64BIT_PTR


89 #ifdeà
AS_NO_THREADS


92 #ifdeà
AS_NO_ATOMIC


95 #ifdeà
AS_NO_COMPILER


100 #ifdeà
AS_WIN


103 #ifdeà
AS_LINUX


106 #ifdeà
AS_MAC


109 #ifdeà
AS_BSD


112 #ifdeà
AS_XBOX


115 #ifdeà
AS_XBOX360


118 #ifdeà
AS_PSP


121 #ifdeà
AS_PS2


124 #ifdeà
AS_PS3


127 #ifdeà
AS_DC


130 #ifdeà
AS_GC


133 #ifdeà
AS_WII


136 #ifdeà
AS_IPHONE


139 #ifdeà
AS_ANDROID


142 #ifdeà
AS_HAIKU


145 #ifdeà
AS_ILLUMOS


151 #ifdeà
AS_PPC


154 #ifdeà
AS_PPC_64


157 #ifdeà
AS_X86


160 #ifdeà
AS_MIPS


163 #ifdeà
AS_SH4


166 #ifdeà
AS_XENON


169 #ifdeà
AS_ARM


172 #ifdeà
AS_X64_GCC


175 #ifdeà
AS_X64_MSVC


180  
¡ršg
;

183 
AS_API
 
asISütEngše
 *
asC»©eSütEngše
(
asDWORD
 
v”siÚ
)

186 ifĞ(
v”siÚ
/10000è!ğ(
ANGELSCRIPT_VERSION
/10000) )

189 ifĞ(
v”siÚ
/100)%100 !ğ(
ANGELSCRIPT_VERSION
/100)%100 )

192 ifĞ(
v”siÚ
%100è> (
ANGELSCRIPT_VERSION
%100) )

196 
asASSERT
Ğ(
asBYTE
) == 1 );

197 
asASSERT
Ğ(
asWORD
) == 2 );

198 
asASSERT
Ğ(
asDWORD
) == 4 );

199 
asASSERT
Ğ(
asQWORD
) == 8 );

200 
asASSERT
Ğ(
asPWORD
) == (*) );

203 
asASSERT
Ğ(
boŞ
è=ğ
AS_SIZEOF_BOOL
 );

204 
asASSERT
Ğ
Œue
 =ğ
VALUE_OF_BOOLEAN_TRUE
 );

207 #ifdeà
AS_BIG_ENDIAN


208 
asASSERT
Ğ*(
asDWORD
*)"\x00\x01\x02\x03" == 0x00010203 );

209 
asASSERT
Ğ*(
asQWORD
*)"\x00\x01\x02\x03\x04\x05\x06\x07" == ((asQWORD(0x00010203)<<32)|asQWORD(0x04050607)) );

211 
asASSERT
Ğ*(
asDWORD
*)"\x00\x01\x02\x03" == 0x03020100 );

215 
asASSERT
Ğ*(
asQWORD
*)"\x00\x01\x02\x03\x04\x05\x06\x07" == ((asQWORD(0x07060504)<<32)|asQWORD(0x03020100)) );

218  
asNEW
(
asCSütEngše
)();

221 
asCSütEngše
::
S‘EngšePrİ”ty
(
asEEngšePrİ
 
´İ”ty
, 
asPWORD
 
v®ue
)

223  
´İ”ty
 )

225 
asEP_ALLOW_UNSAFE_REFERENCES
:

226 
•
.
®lowUn§ãReã»nûs
 = 
v®ue
 ? 
Œue
 : 
çl£
;

229 
asEP_OPTIMIZE_BYTECODE
:

230 
•
.
İtimizeBy‹Code
 = 
v®ue
 ? 
Œue
 : 
çl£
;

233 
asEP_COPY_SCRIPT_SECTIONS
:

234 
•
.
cİySütSeùiÚs
 = 
v®ue
 ? 
Œue
 : 
çl£
;

237 
asEP_MAX_STACK_SIZE
:

238 ifĞ
v®ue
 == 0 )

241 
•
.
maximumCÚ‹xtSckSize
 = 0;

242 
š™ŸlCÚ‹xtSckSize
 = 1024;

247 
•
.
maximumCÚ‹xtSckSize
 = (
asUINT
)
v®ue
/4;

248 ifĞ
š™ŸlCÚ‹xtSckSize
 > 
•
.
maximumCÚ‹xtSckSize
 )

250 
š™ŸlCÚ‹xtSckSize
 = 
•
.
maximumCÚ‹xtSckSize
;

251 ifĞ
š™ŸlCÚ‹xtSckSize
 == 0 )

252 
š™ŸlCÚ‹xtSckSize
 = 1;

257 
asEP_USE_CHARACTER_LITERALS
:

258 
•
.
u£Ch¬aù”L™”®s
 = 
v®ue
 ? 
Œue
 : 
çl£
;

261 
asEP_ALLOW_MULTILINE_STRINGS
:

262 
•
.
®lowMuÉšeSŒšgs
 = 
v®ue
 ? 
Œue
 : 
çl£
;

265 
asEP_ALLOW_IMPLICIT_HANDLE_TYPES
:

266 
•
.
®lowIm¶ic™HªdËTy³s
 = 
v®ue
 ? 
Œue
 : 
çl£
;

269 
asEP_BUILD_WITHOUT_LINE_CUES
:

270 
•
.
budW™houtLšeCues
 = 
v®ue
 ? 
Œue
 : 
çl£
;

273 
asEP_INIT_GLOBAL_VARS_AFTER_BUILD
:

274 
•
.
š™Glob®V¬sAá”Bud
 = 
v®ue
 ? 
Œue
 : 
çl£
;

277 
asEP_REQUIRE_ENUM_SCOPE
:

278 
•
.
»quœeEnumScİe
 = 
v®ue
 ? 
Œue
 : 
çl£
;

281 
asEP_SCRIPT_SCANNER
:

282 ifĞ
v®ue
 <= 1 )

283 
•
.
sÿÂ”
 = ()
v®ue
;

285  
asINVALID_ARG
;

288 
asEP_INCLUDE_JIT_INSTRUCTIONS
:

289 
•
.
šşudeJ™In¡ruùiÚs
 = 
v®ue
 ? 
Œue
 : 
çl£
;

292 
asEP_STRING_ENCODING
:

293 ifĞ
v®ue
 <= 1 )

294 
•
.
¡ršgEncodšg
 = ()
v®ue
;

296  
asINVALID_ARG
;

299 
asEP_PROPERTY_ACCESSOR_MODE
:

300 ifĞ
v®ue
 <= 2 )

301 
•
.
´İ”tyAcûssÜMode
 = ()
v®ue
;

303  
asINVALID_ARG
;

306 
asEP_EXPAND_DEF_ARRAY_TO_TMPL
:

307 
•
.
ex·ndDeçuÉA¼ayToTem¶©e
 = 
v®ue
 ? 
Œue
 : 
çl£
;

310 
asEP_AUTO_GARBAGE_COLLECT
:

311 
•
.
autoG¬bageCŞËù
 = 
v®ue
 ? 
Œue
 : 
çl£
;

314 
asEP_DISALLOW_GLOBAL_VARS
:

315 
•
.
di§ÎowGlob®V¬s
 = 
v®ue
 ? 
Œue
 : 
çl£
;

318 
asEP_ALWAYS_IMPL_DEFAULT_CONSTRUCT
:

319 
•
.
®waysIm¶DeçuÉCÚ¡ruù
 = 
v®ue
 ? 
Œue
 : 
çl£
;

323  
asINVALID_ARG
;

326  
asSUCCESS
;

329 
asPWORD
 
asCSütEngše
::
G‘EngšePrİ”ty
(
asEEngšePrİ
 
´İ”ty
) const

331  
´İ”ty
 )

333 
asEP_ALLOW_UNSAFE_REFERENCES
:

334  
•
.
®lowUn§ãReã»nûs
;

336 
asEP_OPTIMIZE_BYTECODE
:

337  
•
.
İtimizeBy‹Code
;

339 
asEP_COPY_SCRIPT_SECTIONS
:

340  
•
.
cİySütSeùiÚs
;

342 
asEP_MAX_STACK_SIZE
:

343  
•
.
maximumCÚ‹xtSckSize
*4;

345 
asEP_USE_CHARACTER_LITERALS
:

346  
•
.
u£Ch¬aù”L™”®s
;

348 
asEP_ALLOW_MULTILINE_STRINGS
:

349  
•
.
®lowMuÉšeSŒšgs
;

351 
asEP_ALLOW_IMPLICIT_HANDLE_TYPES
:

352  
•
.
®lowIm¶ic™HªdËTy³s
;

354 
asEP_BUILD_WITHOUT_LINE_CUES
:

355  
•
.
budW™houtLšeCues
;

357 
asEP_INIT_GLOBAL_VARS_AFTER_BUILD
:

358  
•
.
š™Glob®V¬sAá”Bud
;

360 
asEP_REQUIRE_ENUM_SCOPE
:

361  
•
.
»quœeEnumScİe
;

363 
asEP_SCRIPT_SCANNER
:

364  
•
.
sÿÂ”
;

366 
asEP_INCLUDE_JIT_INSTRUCTIONS
:

367  
•
.
šşudeJ™In¡ruùiÚs
;

369 
asEP_STRING_ENCODING
:

370  
•
.
¡ršgEncodšg
;

372 
asEP_PROPERTY_ACCESSOR_MODE
:

373  
•
.
´İ”tyAcûssÜMode
;

375 
asEP_EXPAND_DEF_ARRAY_TO_TMPL
:

376  
•
.
ex·ndDeçuÉA¼ayToTem¶©e
;

378 
asEP_AUTO_GARBAGE_COLLECT
:

379  
•
.
autoG¬bageCŞËù
;

381 
asEP_DISALLOW_GLOBAL_VARS
:

382  
•
.
di§ÎowGlob®V¬s
;

384 
asEP_ALWAYS_IMPL_DEFAULT_CONSTRUCT
:

385  
•
.
®waysIm¶DeçuÉCÚ¡ruù
;

397 
asCSütEngše
::
	$asCSütEngše
()

399 
asCTh»adMªag”
::
	`P»·»
();

403 
•
.
®lowUn§ãReã»nûs
 = 
çl£
;

404 
•
.
İtimizeBy‹Code
 = 
Œue
;

405 
•
.
cİySütSeùiÚs
 = 
Œue
;

406 
•
.
maximumCÚ‹xtSckSize
 = 0;

407 
•
.
u£Ch¬aù”L™”®s
 = 
çl£
;

408 
•
.
®lowMuÉšeSŒšgs
 = 
çl£
;

409 
•
.
®lowIm¶ic™HªdËTy³s
 = 
çl£
;

414 
•
.
budW™houtLšeCues
 = 
çl£
;

415 
•
.
š™Glob®V¬sAá”Bud
 = 
Œue
;

416 
•
.
»quœeEnumScİe
 = 
çl£
;

417 
•
.
sÿÂ”
 = 1;

418 
•
.
šşudeJ™In¡ruùiÚs
 = 
çl£
;

419 
•
.
¡ršgEncodšg
 = 0;

420 
•
.
´İ”tyAcûssÜMode
 = 2;

421 
•
.
ex·ndDeçuÉA¼ayToTem¶©e
 = 
çl£
;

422 
•
.
autoG¬bageCŞËù
 = 
Œue
;

423 
•
.
di§ÎowGlob®V¬s
 = 
çl£
;

424 
•
.
®waysIm¶DeçuÉCÚ¡ruù
 = 
çl£
;

427 
gc
.
’gše
 = 
this
;

428 
tok
.
’gše
 = 
this
;

430 
»fCouÁ
.
	`£t
(1);

431 
¡ršgFaùÜy
 = 0;

432 
cÚfigFaed
 = 
çl£
;

433 
isP»·»d
 = 
çl£
;

434 
isBudšg
 = 
çl£
;

435 
deãrV®id©iÚOfTem¶©eTy³s
 = 
çl£
;

436 
Ï¡ModuË
 = 0;

439 
ş—nModuËFunc
 = 0;

440 
ş—nCÚ‹xtFunc
 = 0;

441 
ş—nFunùiÚFunc
 = 0;

444 
š™ŸlCÚ‹xtSckSize
 = 1024;

447 
ty³IdSeqNbr
 = 0;

448 
cu¼’tGroup
 = &
deçuÉGroup
;

449 
deçuÉAcûssMask
 = 1;

451 
msgC®lback
 = 0;

452 
j™Comp”
 = 0;

455 
deçuÉName¥aû
 = 
	`AddNameS·û
("");

460 
sütTy³Behaviours
.
ÇmeS·û
 = 
deçuÉName¥aû
;

461 
funùiÚBehaviours
.
ÇmeS·û
 = 
deçuÉName¥aû
;

462 
objeùTy³Behaviours
.
ÇmeS·û
 = 
deçuÉName¥aû
;

463 
glob®Prİ”tyBehaviours
.
ÇmeS·û
 = 
deçuÉName¥aû
;

466 
sütFunùiÚs
.
	`PushLa¡
(0);

469 
id
 = 0;

470 
	`UNUSED_VAR
(
id
);

471 
id
 = 
	`G‘Ty³IdFromD©aTy³
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰Void
, 
çl£
)); 
	`asASSERT
Ğid =ğ
asTYPEID_VOID
 );

472 
id
 = 
	`G‘Ty³IdFromD©aTy³
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
çl£
)); 
	`asASSERT
Ğid =ğ
asTYPEID_BOOL
 );

473 
id
 = 
	`G‘Ty³IdFromD©aTy³
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ8
, 
çl£
)); 
	`asASSERT
Ğid =ğ
asTYPEID_INT8
 );

474 
id
 = 
	`G‘Ty³IdFromD©aTy³
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ16
, 
çl£
)); 
	`asASSERT
Ğid =ğ
asTYPEID_INT16
 );

475 
id
 = 
	`G‘Ty³IdFromD©aTy³
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ
, 
çl£
)); 
	`asASSERT
Ğid =ğ
asTYPEID_INT32
 );

476 
id
 = 
	`G‘Ty³IdFromD©aTy³
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ64
, 
çl£
)); 
	`asASSERT
Ğid =ğ
asTYPEID_INT64
 );

477 
id
 = 
	`G‘Ty³IdFromD©aTy³
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ8
, 
çl£
)); 
	`asASSERT
Ğid =ğ
asTYPEID_UINT8
 );

478 
id
 = 
	`G‘Ty³IdFromD©aTy³
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ16
, 
çl£
)); 
	`asASSERT
Ğid =ğ
asTYPEID_UINT16
 );

479 
id
 = 
	`G‘Ty³IdFromD©aTy³
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ
, 
çl£
)); 
	`asASSERT
Ğid =ğ
asTYPEID_UINT32
 );

480 
id
 = 
	`G‘Ty³IdFromD©aTy³
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰UIÁ64
, 
çl£
)); 
	`asASSERT
Ğid =ğ
asTYPEID_UINT64
 );

481 
id
 = 
	`G‘Ty³IdFromD©aTy³
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰Flßt
, 
çl£
)); 
	`asASSERT
Ğid =ğ
asTYPEID_FLOAT
 );

482 
id
 = 
	`G‘Ty³IdFromD©aTy³
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰DoubË
, 
çl£
)); 
	`asASSERT
Ğid =ğ
asTYPEID_DOUBLE
 );

484 
deçuÉA¼ayObjeùTy³
 = 0;

486 
	`Regi¡”SütObjeù
(
this
);

487 
	`Regi¡”SütFunùiÚ
(
this
);

488 
	`Regi¡”ObjeùTy³GCBehaviours
(
this
);

489 
asCGlob®Prİ”ty
::
	`Regi¡”GCBehaviours
(
this
);

490 
	}
}

492 
asCSütEngše
::~
	$asCSütEngše
()

494 
	`asASSERT
(
»fCouÁ
.
	`g‘
() == 0);

495 
asUINT
 
n
;

499  
n
 = (
asUINT
)
sütModuËs
.
	`G‘L’gth
();‚-- > 0; )

500 ifĞ
sütModuËs
[
n
] )

501 
	`asDELETE
(
sütModuËs
[
n
],
asCModuË
);

502 
sütModuËs
.
	`S‘L’gth
(0);

504 
	`G¬bageCŞËù
(
asGC_FULL_CYCLE
);

507  
n
 = 0;‚ < 
‹m¶©eTy³s
.
	`G‘L’gth
();‚++ )

509 ifĞ
‹m¶©eTy³s
[
n
] )

511 
asUINT
 
f
;

514  
f
 = 0; f < 
‹m¶©eTy³s
[
n
]->
beh
.
çùÜ›s
.
	`G‘L’gth
(); f++ )

515 
sütFunùiÚs
[
‹m¶©eTy³s
[
n
]->
beh
.
çùÜ›s
[
f
]]->
	`R–—£
();

516 
‹m¶©eTy³s
[
n
]->
beh
.
çùÜ›s
.
	`AÎoÿ‹
(0, 
çl£
);

519 ifĞ
‹m¶©eTy³s
[
n
]->
beh
.
li¡FaùÜy
 )

521 
sütFunùiÚs
[
‹m¶©eTy³s
[
n
]->
beh
.
li¡FaùÜy
]->
	`R–—£
();

522 
‹m¶©eTy³s
[
n
]->
beh
.
li¡FaùÜy
 = 0;

526  
f
 = 1; f < 
‹m¶©eTy³s
[
n
]->
beh
.
İ”©Üs
.
	`G‘L’gth
(); f += 2 )

528 ifĞ
sütFunùiÚs
[
‹m¶©eTy³s
[
n
]->
beh
.
İ”©Üs
[
f
]]->
objeùTy³
 ==emplateTypes[n] )

530 
sütFunùiÚs
[
‹m¶©eTy³s
[
n
]->
beh
.
İ”©Üs
[
f
]]->
	`R–—£
();

531 
‹m¶©eTy³s
[
n
]->
beh
.
İ”©Üs
[
f
] = 0;

534  
f
 = 0; f < 
‹m¶©eTy³s
[
n
]->
m‘hods
.
	`G‘L’gth
(); f++ )

536 ifĞ
sütFunùiÚs
[
‹m¶©eTy³s
[
n
]->
m‘hods
[
f
]]->
objeùTy³
 ==emplateTypes[n] )

538 
sütFunùiÚs
[
‹m¶©eTy³s
[
n
]->
m‘hods
[
f
]]->
	`R–—£
();

539 
‹m¶©eTy³s
[
n
]->
m‘hods
[
f
] = 0;

546 
	`G¬bageCŞËù
(
asGC_FULL_CYCLE
);

547 
	`F»eUnu£dGlob®Prİ”t›s
();

548 
	`CË¬Unu£dTy³s
();

551  
n
 = 0;‚ < 
şassTy³s
.
	`G‘L’gth
();‚++ )

553 ifĞ
şassTy³s
[
n
] )

554 
şassTy³s
[
n
]->
	`R–—£AÎFunùiÚs
();

556 ifĞ
şassTy³s
[
n
]->
d”ivedFrom
 )

558 
şassTy³s
[
n
]->
d”ivedFrom
->
	`R–—£
();

559 
şassTy³s
[
n
]->
d”ivedFrom
 = 0;

563 
	`G¬bageCŞËù
(
asGC_FULL_CYCLE
);

564 
	`F»eUnu£dGlob®Prİ”t›s
();

565 
	`CË¬Unu£dTy³s
();

568  
n
 = 0;‚ < 
sütFunùiÚs
.
	`G‘L’gth
();‚++ )

569 ifĞ
sütFunùiÚs
[
n
] && sütFunùiÚs[n]->
funcTy³
 =ğ
asFUNC_SCRIPT
 )

570 
sütFunùiÚs
[
n
]->
	`De¡royIÁ”Çl
();

573 
	`G¬bageCŞËù
(
asGC_FULL_CYCLE
);

574 
	`CË¬Unu£dTy³s
();

579 ifĞ
gc
.
	`R•ÜtAndR–—£Unde¡royedObjeùs
() > 0 )

584  
n
 = 0;‚ < 
sütFunùiÚs
.
	`G‘L’gth
();‚++ )

585 ifĞ
sütFunùiÚs
[
n
] && sütFunùiÚs[n]->
funcTy³
 =ğ
asFUNC_SCRIPT
 )

586 
sütFunùiÚs
[
n
]->
’gše
 = 0;

589 
asSM­Node
<,
asCD©aTy³
*> *
cursÜ
 = 0;

590  
m­Ty³IdToD©aTy³
.
	`MoveFœ¡
(&
cursÜ
) )

592 
	`asDELETE
(
m­Ty³IdToD©aTy³
.
	`G‘V®ue
(
cursÜ
),
asCD©aTy³
);

593 
m­Ty³IdToD©aTy³
.
	`E¿£
(
cursÜ
);

597 
deçuÉGroup
.
	`RemoveCÚfigu¿tiÚ
(
this
, 
Œue
);

598  
cÚfigGroups
.
	`G‘L’gth
() )

601 
asCCÚfigGroup
 *
g½
 = 
cÚfigGroups
.
	`PİLa¡
();

602 ifĞ
g½
 )

604 
g½
->
	`RemoveCÚfigu¿tiÚ
(
this
);

605 
	`asDELETE
(
g½
,
asCCÚfigGroup
);

609 
deçuÉGroup
.
	`RemoveCÚfigu¿tiÚ
(
this
);

611  
n
 = 0;‚ < 
»gi¡”edGlob®Prİs
.
	`G‘L’gth
();‚++ )

613 ifĞ
»gi¡”edGlob®Prİs
[
n
] )

614 
»gi¡”edGlob®Prİs
[
n
]->
	`R–—£
();

616 
»gi¡”edGlob®Prİs
.
	`S‘L’gth
(0);

617 
	`F»eUnu£dGlob®Prİ”t›s
();

619  
n
 = 0;‚ < 
‹m¶©eTy³s
.
	`G‘L’gth
();‚++ )

621 ifĞ
‹m¶©eTy³s
[
n
] )

624 
‹m¶©eTy³s
[
n
]->
‹m¶©eSubTy³
 = 
asCD©aTy³
::
	`C»©eNuÎHªdË
();

625 
	`asDELETE
(
‹m¶©eTy³s
[
n
],
asCObjeùTy³
);

628 
‹m¶©eTy³s
.
	`S‘L’gth
(0);

630  
n
 = 0;‚ < 
objeùTy³s
.
	`G‘L’gth
();‚++ )

632 ifĞ
objeùTy³s
[
n
] )

635 
objeùTy³s
[
n
]->
‹m¶©eSubTy³
 = 
asCD©aTy³
::
	`C»©eNuÎHªdË
();

636 
	`asDELETE
(
objeùTy³s
[
n
],
asCObjeùTy³
);

639 
objeùTy³s
.
	`S‘L’gth
(0);

640  
n
 = 0;‚ < 
‹m¶©eSubTy³s
.
	`G‘L’gth
();‚++ )

642 ifĞ
‹m¶©eSubTy³s
[
n
] )

643 
	`asDELETE
(
‹m¶©eSubTy³s
[
n
], 
asCObjeùTy³
);

645 
‹m¶©eSubTy³s
.
	`S‘L’gth
(0);

646 
»gi¡”edTy³Defs
.
	`S‘L’gth
(0);

647 
»gi¡”edEnums
.
	`S‘L’gth
(0);

648 
»gi¡”edObjTy³s
.
	`S‘L’gth
(0);

650  
n
 = 0;‚ < 
»gi¡”edGlob®Funcs
.
	`G‘L’gth
();‚++ )

652 ifĞ
»gi¡”edGlob®Funcs
[
n
] )

653 
»gi¡”edGlob®Funcs
[
n
]->
	`R–—£
();

655 
»gi¡”edGlob®Funcs
.
	`S‘L’gth
(0);

657 
sütTy³Behaviours
.
	`R–—£AÎFunùiÚs
();

658 
funùiÚBehaviours
.
	`R–—£AÎFunùiÚs
();

659 
objeùTy³Behaviours
.
	`R–—£AÎFunùiÚs
();

660 
glob®Prİ”tyBehaviours
.
	`R–—£AÎFunùiÚs
();

663  
n
 = 0;‚ < 
¡ršgCÚ¡ªts
.
	`G‘L’gth
();‚++ )

664 
	`asDELETE
(
¡ršgCÚ¡ªts
[
n
],
asCSŒšg
);

665 
¡ršgCÚ¡ªts
.
	`S‘L’gth
(0);

666 
¡ršgToIdM­
.
	`E¿£AÎ
();

669  
n
 = 0;‚ < 
sütSeùiÚNames
.
	`G‘L’gth
();‚++ )

670 
	`asDELETE
(
sütSeùiÚNames
[
n
],
asCSŒšg
);

671 
sütSeùiÚNames
.
	`S‘L’gth
(0);

674  
n
 = 0;‚ < 
u£rD©a
.
	`G‘L’gth
();‚ += 2 )

676 ifĞ
u£rD©a
[
n
+1] )

678  
asUINT
 
c
 = 0; c < 
ş—nEngšeFuncs
.
	`G‘L’gth
(); c++ )

679 ifĞ
ş—nEngšeFuncs
[
c
].
ty³
 =ğ
u£rD©a
[
n
] )

680 
ş—nEngšeFuncs
[
c
].
	`ş—nFunc
(
this
);

685  
n
 = 0;‚ < 
ÇmeS·ûs
.
	`G‘L’gth
();‚++ )

686 
	`asDELETE
(
ÇmeS·ûs
[
n
], 
asSNameS·û
);

687 
ÇmeS·ûs
.
	`S‘L’gth
(0);

689 
asCTh»adMªag”
::
	`UÅ»·»
();

690 
	}
}

693 
asCSütEngše
::
	$AddRef
() const

695  
»fCouÁ
.
	`©omicInc
();

696 
	}
}

699 
asCSütEngše
::
	$R–—£
() const

701 
r
 = 
»fCouÁ
.
	`©omicDec
();

703 ifĞ
r
 == 0 )

705 
	`asDELETE
(
cÚ¡_ÿ¡
<
asCSütEngše
*>(
this
),asCScriptEngine);

709  
r
;

710 
	}
}

713 
asSNameS·û
 *
asCSütEngše
::
	$AddNameS·û
(cÚ¡ *
Çme
)

716 
asSNameS·û
 *
ns
 = 
	`FšdNameS·û
(
Çme
);

717 ifĞ
ns
 ) ‚s;

719 
ns
 = 
	`asNEW
(
asSNameS·û
);

720 ifĞ
ns
 == 0 )

725 
ns
->
Çme
 =‚ame;

727 
ÇmeS·ûs
.
	`PushLa¡
(
ns
);

729  
ns
;

730 
	}
}

733 
asSNameS·û
 *
asCSütEngše
::
	$FšdNameS·û
(cÚ¡ *
Çme
)

736  
asUINT
 
n
 = 0;‚ < 
ÇmeS·ûs
.
	`G‘L’gth
();‚++ )

737 ifĞ
ÇmeS·ûs
[
n
]->
Çme
 ==‚ame )

738  
ÇmeS·ûs
[
n
];

741 
	}
}

744 
asCSütEngše
::
	$S‘DeçuÉName¥aû
(cÚ¡ *
ÇmeS·û
)

746 ifĞ
ÇmeS·û
 == 0 )

747  
	`CÚfigE¼Ü
(
asINVALID_ARG
, "S‘DeçuÉName¥aû", 
ÇmeS·û
, 0);

749 
asCSŒšg
 
ns
 = 
ÇmeS·û
;

750 ifĞ
ns
 != "" )

753 
size_t
 
pos
 = 0;

754 
boŞ
 
ex³ùId’tif›r
 = 
Œue
;

755 
size_t
 
Ën
;

756 
eTok’Ty³
 
t
 = 
‰Id’tif›r
;

758  ; 
pos
 < 
ns
.
	`G‘L’gth
();…o +ğ
Ën
)

760 
t
 = 
tok
.
	`G‘Tok’
(
ns
.
	`Add»ssOf
(è+ 
pos
,‚s.
	`G‘L’gth
(è-…os, &
Ën
);

761 ifĞ(
ex³ùId’tif›r
 && 
t
 !ğ
‰Id’tif›r
è|| (!ex³ùId’tif›¸&& !ğ
‰Scİe
) )

762  
	`CÚfigE¼Ü
(
asINVALID_DECLARATION
, "S‘DeçuÉName¥aû", 
ÇmeS·û
, 0);

764 
ex³ùId’tif›r
 = !expectIdentifier;

768 ifĞ
t
 =ğ
‰Scİe
 )

769 
ns
.
	`S‘L’gth
Òs.
	`G‘L’gth
()-2);

772 
deçuÉName¥aû
 = 
	`AddNameS·û
(
ns
.
	`Add»ssOf
());

775 
	}
}

778 *
asCSütEngše
::
	$S‘U£rD©a
(*
d©a
, 
asPWORD
 
ty³
)

782 
	`ACQUIREEXCLUSIVE
(
’gšeRWLock
);

787  
asUINT
 
n
 = 0;‚ < 
u£rD©a
.
	`G‘L’gth
();‚ += 2 )

789 ifĞ
u£rD©a
[
n
] =ğ
ty³
 )

791 *
ŞdD©a
 = 
»š‹½»t_ÿ¡
<*>(
u£rD©a
[
n
+1]);

792 
u£rD©a
[
n
+1] = 
»š‹½»t_ÿ¡
<
asPWORD
>(
d©a
);

794 
	`RELEASEEXCLUSIVE
(
’gšeRWLock
);

796  
ŞdD©a
;

800 
u£rD©a
.
	`PushLa¡
(
ty³
);

801 
u£rD©a
.
	`PushLa¡
(
»š‹½»t_ÿ¡
<
asPWORD
>(
d©a
));

803 
	`RELEASEEXCLUSIVE
(
’gšeRWLock
);

806 
	}
}

809 *
asCSütEngše
::
	$G‘U£rD©a
(
asPWORD
 
ty³
) const

813 
	`ACQUIRESHARED
(
’gšeRWLock
);

815  
asUINT
 
n
 = 0;‚ < 
u£rD©a
.
	`G‘L’gth
();‚ += 2 )

817 ifĞ
u£rD©a
[
n
] =ğ
ty³
 )

819 
	`RELEASESHARED
(
’gšeRWLock
);

820  
»š‹½»t_ÿ¡
<*>(
u£rD©a
[
n
+1]);

824 
	`RELEASESHARED
(
’gšeRWLock
);

827 
	}
}

830 
asCSütEngše
::
	$S‘Mes§geC®lback
(cÚ¡ 
asSFuncPŒ
 &
ÿÎback
, *
obj
, 
asDWORD
 
ÿÎCÚv
)

832 
msgC®lback
 = 
Œue
;

833 
msgC®lbackObj
 = 
obj
;

834 
boŞ
 
isObj
 = 
çl£
;

835 ifĞ()
ÿÎCÚv
 =ğ
asCALL_GENERIC
 )

837 
msgC®lback
 = 
çl£
;

838  
asNOT_SUPPORTED
;

840 ifĞ()
ÿÎCÚv
 >ğ
asCALL_THISCALL
 )

842 
isObj
 = 
Œue
;

843 ifĞ
obj
 == 0 )

845 
msgC®lback
 = 
çl£
;

846  
asINVALID_ARG
;

849 
r
 = 
	`D‘eùC®lšgCÚv’tiÚ
(
isObj
, 
ÿÎback
, 
ÿÎCÚv
, &
msgC®lbackFunc
);

850 ifĞ
r
 < 0 ) 
msgC®lback
 = 
çl£
;

851  
r
;

852 
	}
}

855 
asCSütEngše
::
	$CË¬Mes§geC®lback
()

857 
msgC®lback
 = 
çl£
;

859 
	}
}

862 
asCSütEngše
::
	$Wr™eMes§ge
(cÚ¡ *
£ùiÚ
, 
row
, 
cŞ
, 
asEMsgTy³
 
ty³
, cÚ¡ *
mes§ge
)

865 ifĞ
£ùiÚ
 == 0 ||

866 
mes§ge
 == 0 )

867  
asINVALID_ARG
;

870 ifĞ!
msgC®lback
 )

873 
asSMes§geInfo
 
msg
;

874 
msg
.
£ùiÚ
 = section;

875 
msg
.
row
 =„ow;

876 
msg
.
cŞ
 = col;

877 
msg
.
ty³
 =ype;

878 
msg
.
mes§ge
 = message;

880 ifĞ
msgC®lbackFunc
.
ÿÎCÚv
 < 
ICC_THISCALL
 )

881 
	`C®lGlob®FunùiÚ
(&
msg
, 
msgC®lbackObj
, &
msgC®lbackFunc
, 0);

883 
	`C®lObjeùM‘hod
(
msgC®lbackObj
, &
msg
, &
msgC®lbackFunc
, 0);

886 
	}
}

888 
asCSütEngše
::
	$S‘JITComp”
(
asIJITComp”
 *
comp”
)

890 
j™Comp”
 = 
comp”
;

891  
asSUCCESS
;

892 
	}
}

894 
asIJITComp”
 *
asCSütEngše
::
	$G‘JITComp”
() const

896  
j™Comp”
;

897 
	}
}

900 
asETok’CÏss
 
asCSütEngše
::
	$P¬£Tok’
(cÚ¡ *
¡ršg
, 
size_t
 
¡ršgL’gth
, *
tok’L’gth
) const

902 ifĞ
¡ršgL’gth
 == 0 )

903 
¡ršgL’gth
 = 
	`¡¾’
(
¡ršg
);

905 
size_t
 
Ën
;

906 
asETok’CÏss
 
tc
;

907 
tok
.
	`G‘Tok’
(
¡ršg
, 
¡ršgL’gth
, &
Ën
, &
tc
);

909 ifĞ
tok’L’gth
 )

910 *
tok’L’gth
 = ()
Ën
;

912  
tc
;

913 
	}
}

916 
asISütModuË
 *
asCSütEngše
::
	$G‘ModuË
(cÚ¡ *
moduË
, 
asEGMFÏgs
 
æag
)

918 
asCModuË
 *
mod
 = 
	`G‘ModuË
(
moduË
, 
çl£
);

920 ifĞ
æag
 =ğ
asGM_ALWAYS_CREATE
 )

922 ifĞ
mod
 != 0 )

924 
	`asDELETE
(
mod
, 
asCModuË
);

926  
	`G‘ModuË
(
moduË
, 
Œue
);

929 ifĞ
mod
 =ğ0 && 
æag
 =ğ
asGM_CREATE_IF_NOT_EXISTS
 )

931  
	`G‘ModuË
(
moduË
, 
Œue
);

934  
mod
;

935 
	}
}

938 
asCSütEngše
::
	$DisÿrdModuË
(cÚ¡ *
moduË
)

940 
asCModuË
 *
mod
 = 
	`G‘ModuË
(
moduË
, 
çl£
);

941 ifĞ
mod
 =ğ0 )  
asNO_MODULE
;

943 
	`asDELETE
(
mod
, 
asCModuË
);

945 
	`F»eUnu£dGlob®Prİ”t›s
();

946 
	`CË¬Unu£dTy³s
();

948 ifĞ
•
.
autoG¬bageCŞËù
 )

949 
	`G¬bageCŞËù
();

952 
	}
}

955 
asCSütEngše
::
	$CË¬Unu£dTy³s
()

958 
asCA¼ay
<
asCObjeùTy³
*> 
ty³s
;

959 
ty³s
 = 
şassTy³s
;

960 
ty³s
.
	`CÚÿ‹Ç‹
(
‹m¶©eIn¡ªûTy³s
);

963 
asUINT
 
n
;

964  
n
 = 0;‚ < 
sütModuËs
.
	`G‘L’gth
(è&& 
ty³s
.GetLength();‚++ )

966 
asCModuË
 *
mod
 = 
sütModuËs
[
n
];

967 ifĞ
mod
 )

972 
asUINT
 
m
;

973  
m
 = 0; m < 
mod
->
şassTy³s
.
	`G‘L’gth
(è&& 
ty³s
.GetLength(); m++ )

974 
	`RemoveTy³AndR–©edFromLi¡
(
ty³s
, 
mod
->
şassTy³s
[
m
]);

975  
m
 = 0; m < 
mod
->
’umTy³s
.
	`G‘L’gth
(è&& 
ty³s
.GetLength(); m++ )

976 
	`RemoveTy³AndR–©edFromLi¡
(
ty³s
, 
mod
->
’umTy³s
[
m
]);

977  
m
 = 0; m < 
mod
->
ty³Defs
.
	`G‘L’gth
(è&& 
ty³s
.GetLength(); m++ )

978 
	`RemoveTy³AndR–©edFromLi¡
(
ty³s
, 
mod
->
ty³Defs
[
m
]);

983  
n
 = 0;‚ < 
sütFunùiÚs
.
	`G‘L’gth
(è&& 
ty³s
.GetLength();‚++ )

985 
asCSütFunùiÚ
 *
func
 = 
sütFunùiÚs
[
n
];

986 ifĞ
func
 )

989 ifĞ
func
->
Çme
 == "factstub" )

992 
asCObjeùTy³
 *
Ù
 = 
func
->
»tuºTy³
.
	`G‘ObjeùTy³
();

993 ifĞ
Ù
 !ğ0 && oˆ!ğ
func
->
objeùTy³
 )

994 ifĞ
func
->
Çme
 !ğ
Ù
->name )

995 
	`RemoveTy³AndR–©edFromLi¡
(
ty³s
, 
Ù
);

997  
asUINT
 
p
 = 0;… < 
func
->
·¿m‘”Ty³s
.
	`G‘L’gth
();…++ )

999 
Ù
 = 
func
->
·¿m‘”Ty³s
[
p
].
	`G‘ObjeùTy³
();

1000 ifĞ
Ù
 !ğ0 && oˆ!ğ
func
->
objeùTy³
 )

1001 ifĞ
func
->
Çme
 !ğ
Ù
->name )

1002 
	`RemoveTy³AndR–©edFromLi¡
(
ty³s
, 
Ù
);

1008  
n
 = 0;‚ < 
glob®Prİ”t›s
.
	`G‘L’gth
(è&& 
ty³s
.GetLength();‚++ )

1010 ifĞ
glob®Prİ”t›s
[
n
] && glob®Prİ”t›s[n]->
ty³
.
	`G‘ObjeùTy³
() )

1011 
	`RemoveTy³AndR–©edFromLi¡
(
ty³s
, 
glob®Prİ”t›s
[
n
]->
ty³
.
	`G‘ObjeùTy³
());

1017 
boŞ
 
didCË¬Tem¶©eIn¡ªûTy³
 = 
çl£
;

1019  
n
 = 0;‚ < 
ty³s
.
	`G‘L’gth
();‚++ )

1022 
»fCouÁ
 = 0;

1023 ifĞ(
ty³s
[
n
]->
æags
 & 
asOBJ_TEMPLATE
è|| (ty³s[n]->æag & 
asOBJ_SCRIPT_OBJECT
) )

1025 
»fCouÁ
 = 2*()
ty³s
[
n
]->
beh
.
çùÜ›s
.
	`G‘L’gth
();

1026 ifĞ
ty³s
[
n
]->
beh
.
li¡FaùÜy
 )

1027 
»fCouÁ
 += 2;

1030 ifĞ
ty³s
[
n
]->
	`G‘RefCouÁ
(è=ğ
»fCouÁ
 )

1032 ifĞ
ty³s
[
n
]->
æags
 & 
asOBJ_TEMPLATE
 )

1034 
didCË¬Tem¶©eIn¡ªûTy³
 = 
Œue
;

1035 
	`RemoveTem¶©eIn¡ªûTy³
(
ty³s
[
n
]);

1039 
	`RemoveFromTy³IdM­
(
ty³s
[
n
]);

1040 
	`asDELETE
(
ty³s
[
n
],
asCObjeùTy³
);

1042 
i
 = 
şassTy³s
.
	`IndexOf
(
ty³s
[
n
]);

1043 ifĞ
i
 =ğ(sigÃd)
şassTy³s
.
	`G‘L’gth
() - 1 )

1044 
şassTy³s
.
	`PİLa¡
();

1046 
şassTy³s
[
i
] = cÏssTy³s.
	`PİLa¡
();

1050 ifĞ
n
 < 
ty³s
.
	`G‘L’gth
() - 1 )

1051 
ty³s
[
n
] =y³s.
	`PİLa¡
();

1053 
ty³s
.
	`PİLa¡
();

1054 
n
--;

1058 ifĞ
didCË¬Tem¶©eIn¡ªûTy³
 =ğ
çl£
 )

1061 
	}
}

1064 
asCSütEngše
::
RemoveTy³AndR–©edFromLi¡
(
asCA¼ay
<
asCObjeùTy³
*> &
ty³s
,‡sCObjeùTy³ *
Ù
)

1067 
i
 = 
ty³s
.
IndexOf
(
Ù
);

1068 ifĞ
i
 == -1 ) ;

1070 ifĞ
i
 =ğ(sigÃd)
ty³s
.
G‘L’gth
() - 1 )

1071 
ty³s
.
PİLa¡
();

1073 
ty³s
[
i
] =y³s.
PİLa¡
();

1076 ifĞ
Ù
->
‹m¶©eSubTy³
.
G‘ObjeùTy³
() )

1078  
Ù
->
‹m¶©eSubTy³
.
G‘ObjeùTy³
() )

1080 
Ù
 = ot->
‹m¶©eSubTy³
.
G‘ObjeùTy³
();

1081 
RemoveTy³AndR–©edFromLi¡
(
ty³s
, 
Ù
);

1087 ifĞ
Ù
->
´İ”t›s
.
G‘L’gth
() )

1089  
asUINT
 
n
 = 0;‚ < 
Ù
->
´İ”t›s
.
G‘L’gth
();‚++ )

1090 
RemoveTy³AndR–©edFromLi¡
(
ty³s
, 
Ù
->
´İ”t›s
[
n
]->
ty³
.
G‘ObjeùTy³
());

1096 
asCSütEngše
::
	$G‘FaùÜyIdByDeş
(cÚ¡ 
asCObjeùTy³
 *
Ù
, cÚ¡ *
deş
)

1098 
asCModuË
 *
mod
 = 0;

1101 ifĞ
Ù
->
æags
 & 
asOBJ_SCRIPT_OBJECT
 && ot->
size
 > 0 )

1102 
mod
 = 
sütFunùiÚs
[
Ù
->
beh
.
çùÜ›s
[0]]->
moduË
;

1104 
asCBud”
 
	`bld
(
this
, 
mod
);

1106 
asCSütFunùiÚ
 
	`func
(
this
, 
mod
, 
asFUNC_DUMMY
);

1107 
r
 = 
bld
.
	`P¬£FunùiÚDeş¬©iÚ
(0, 
deş
, &
func
, 
çl£
, 0, 0, 
deçuÉName¥aû
);

1108 ifĞ
r
 < 0 )

1109  
asINVALID_DECLARATION
;

1112 
id
 = -1;

1113  
size_t
 
n
 = 0;‚ < 
Ù
->
beh
.
çùÜ›s
.
	`G‘L’gth
();‚++ )

1115 
asCSütFunùiÚ
 *
f
 = 
sütFunùiÚs
[
Ù
->
beh
.
çùÜ›s
[
n
]];

1116 ifĞ
f
->
	`IsSigÇtu»Equ®
(&
func
) )

1118 
id
 = 
Ù
->
beh
.
çùÜ›s
[
n
];

1123 ifĞ
id
 =ğ-1 )  
asNO_FUNCTION
;

1125  
id
;

1126 
	}
}

1130 
asCSütEngše
::
	$G‘M‘hodIdByDeş
(cÚ¡ 
asCObjeùTy³
 *
Ù
, cÚ¡ *
deş
, 
asCModuË
 *
mod
)

1132 
asCBud”
 
	`bld
(
this
, 
mod
);

1134 
asCSütFunùiÚ
 
	`func
(
this
, 
mod
, 
asFUNC_DUMMY
);

1138 
func
.
objeùTy³
 = 
cÚ¡_ÿ¡
<
asCObjeùTy³
*>(
Ù
);

1140 
r
 = 
bld
.
	`P¬£FunùiÚDeş¬©iÚ
(
func
.
objeùTy³
, 
deş
, &func, 
çl£
);

1141 ifĞ
r
 < 0 )

1142  
asINVALID_DECLARATION
;

1145 
id
 = -1;

1146  
size_t
 
n
 = 0;‚ < 
Ù
->
m‘hods
.
	`G‘L’gth
(); ++n )

1148 ifĞ
func
.
	`IsSigÇtu»Equ®
(
sütFunùiÚs
[
Ù
->
m‘hods
[
n
]]) )

1150 ifĞ
id
 == -1 )

1151 
id
 = 
Ù
->
m‘hods
[
n
];

1153  
asMULTIPLE_FUNCTIONS
;

1157 ifĞ
id
 =ğ-1 )  
asNO_FUNCTION
;

1159  
id
;

1160 
	}
}

1164 
asCSŒšg
 
asCSütEngše
::
	$G‘FunùiÚDeş¬©iÚ
(
funcId
)

1166 
asCSŒšg
 
¡r
;

1167 
asCSütFunùiÚ
 *
func
 = 
	`G‘SütFunùiÚ
(
funcId
);

1168 ifĞ
func
 )

1169 
¡r
 = 
func
->
	`G‘Deş¬©iÚSŒ
();

1171  
¡r
;

1172 
	}
}

1175 
asCSütFunùiÚ
 *
asCSütEngše
::
	$G‘SütFunùiÚ
(
funcId
) const

1177 ifĞ
funcId
 < 0 || funcId >ğ()
sütFunùiÚs
.
	`G‘L’gth
() )

1180  
sütFunùiÚs
[
funcId
];

1181 
	}
}

1185 
asISütCÚ‹xt
 *
asCSütEngše
::
	$C»©eCÚ‹xt
()

1187 
asISütCÚ‹xt
 *
ùx
 = 0;

1188 
	`C»©eCÚ‹xt
(&
ùx
, 
çl£
);

1189  
ùx
;

1190 
	}
}

1193 
asCSütEngše
::
	$C»©eCÚ‹xt
(
asISütCÚ‹xt
 **
cÚ‹xt
, 
boŞ
 
isIÁ”Çl
)

1195 *
cÚ‹xt
 = 
	`asNEW
(
asCCÚ‹xt
)(
this
, !
isIÁ”Çl
);

1196 ifĞ*
cÚ‹xt
 == 0 )

1197  
asOUT_OF_MEMORY
;

1201 
	`P»·»Engše
();

1204 
	}
}

1207 
asCSütEngše
::
	$Regi¡”ObjeùPrİ”ty
(cÚ¡ *
obj
, cÚ¡ *
deş¬©iÚ
, 
by‹Off£t
)

1209 
r
;

1210 
asCD©aTy³
 
dt
;

1211 
asCBud”
 
	`bld
(
this
, 0);

1212 
r
 = 
bld
.
	`P¬£D©aTy³
(
obj
, &
dt
, 
deçuÉName¥aû
);

1213 ifĞ
r
 < 0 )

1214  
	`CÚfigE¼Ü
(
r
, "Regi¡”ObjeùPrİ”ty", 
obj
, 
deş¬©iÚ
);

1217 ifĞ
cu¼’tGroup
->
	`FšdTy³
(
dt
.
	`G‘ObjeùTy³
()->
Çme
.
	`Add»ssOf
()) == 0 )

1218  
	`CÚfigE¼Ü
(
asWRONG_CONFIG_GROUP
, "Regi¡”ObjeùPrİ”ty", 
obj
, 
deş¬©iÚ
);

1220 
asCD©aTy³
 
ty³
;

1221 
asCSŒšg
 
Çme
;

1223 ifĞ(
r
 = 
bld
.
	`V”ifyPrİ”ty
(&
dt
, 
deş¬©iÚ
, 
Çme
, 
ty³
, 0)) < 0 )

1224  
	`CÚfigE¼Ü
(
r
, "Regi¡”ObjeùPrİ”ty", 
obj
, 
deş¬©iÚ
);

1227 ifĞ
dt
.
	`G‘ObjeùTy³
() == 0 )

1228  
	`CÚfigE¼Ü
(
asINVALID_OBJECT
, "Regi¡”ObjeùPrİ”ty", 
obj
, 
deş¬©iÚ
);

1230 
asCObjeùPrİ”ty
 *
´İ
 = 
	`asNEW
(asCObjectProperty);

1231 ifĞ
´İ
 == 0 )

1232  
	`CÚfigE¼Ü
(
asOUT_OF_MEMORY
, "Regi¡”ObjeùPrİ”ty", 
obj
, 
deş¬©iÚ
);

1234 
´İ
->
Çme
 =‚ame;

1235 
´İ
->
ty³
 =ype;

1236 
´İ
->
by‹Off£t
 = byteOffset;

1237 
´İ
->
isPriv©e
 = 
çl£
;

1238 
´İ
->
acûssMask
 = 
deçuÉAcûssMask
;

1240 
dt
.
	`G‘ObjeùTy³
()->
´İ”t›s
.
	`PushLa¡
(
´İ
);

1242 
cu¼’tGroup
->
	`RefCÚfigGroup
(
	`FšdCÚfigGroupFÜObjeùTy³
(
ty³
.
	`G‘ObjeùTy³
()));

1244  
asSUCCESS
;

1245 
	}
}

1248 
asCSütEngše
::
	$Regi¡”IÁ”çû
(cÚ¡ *
Çme
)

1250 ifĞ
Çme
 =ğ0 )  
	`CÚfigE¼Ü
(
asINVALID_NAME
, "RegisterInterface", 0, 0);

1253 
asUINT
 
n
;

1254  
n
 = 0;‚ < 
objeùTy³s
.
	`G‘L’gth
();‚++ )

1256 ifĞ
objeùTy³s
[
n
] && objeùTy³s[n]->
Çme
 =ğÇm&& objeùTy³s[n]->
ÇmeS·û
 =ğ
deçuÉName¥aû
 )

1257  
asALREADY_REGISTERED
;

1261 
asCD©aTy³
 
dt
;

1262 
asCBud”
 
	`bld
(
this
, 0);

1263 
boŞ
 
ŞdMsgC®lback
 = 
msgC®lback
; msgC®lback = 
çl£
;

1264 
r
 = 
bld
.
	`P¬£D©aTy³
(
Çme
, &
dt
, 
deçuÉName¥aû
);

1265 
msgC®lback
 = 
ŞdMsgC®lback
;

1266 ifĞ
r
 >ğ0 )  
	`CÚfigE¼Ü
(
asERROR
, "Regi¡”IÁ”çû", 
Çme
, 0);

1269 
size_t
 
tok’L’
;

1270 
tok’
 = 
tok
.
	`G‘Tok’
(
Çme
, 
	`¡¾’
Òame), &
tok’L’
);

1271 ifĞ
tok’
 !ğ
‰Id’tif›r
 || 
	`¡¾’
(
Çme
è!ğ
tok’L’
 )

1272  
	`CÚfigE¼Ü
(
asINVALID_NAME
, "Regi¡”IÁ”çû", 
Çme
, 0);

1274 
r
 = 
bld
.
	`CheckNameCÚæiù
(
Çme
, 0, 0, 
deçuÉName¥aû
);

1275 ifĞ
r
 < 0 )

1276  
	`CÚfigE¼Ü
(
asNAME_TAKEN
, "Regi¡”IÁ”çû", 
Çme
, 0);

1282 
asCObjeùTy³
 *
¡
 = 
	`asNEW
×sCObjeùTy³)(
this
);

1283 ifĞ
¡
 == 0 )

1284  
	`CÚfigE¼Ü
(
asOUT_OF_MEMORY
, "Regi¡”IÁ”çû", 
Çme
, 0);

1286 
¡
->
æags
 = 
asOBJ_REF
 | 
asOBJ_SCRIPT_OBJECT
 | 
asOBJ_SHARED
;

1287 
¡
->
size
 = 0;

1288 
¡
->
Çme
 =‚ame;

1289 
¡
->
ÇmeS·û
 = 
deçuÉName¥aû
;

1292 
¡
->
beh
.
çùÜy
 = 0;

1293 
¡
->
beh
.
add»f
 = 
sütTy³Behaviours
.beh.addref;

1294 
sütFunùiÚs
[
¡
->
beh
.
add»f
]->
	`AddRef
();

1295 
¡
->
beh
.
»Ëa£
 = 
sütTy³Behaviours
.beh.release;

1296 
sütFunùiÚs
[
¡
->
beh
.
»Ëa£
]->
	`AddRef
();

1297 
¡
->
beh
.
cİy
 = 0;

1299 
objeùTy³s
.
	`PushLa¡
(
¡
);

1300 
»gi¡”edObjTy³s
.
	`PushLa¡
(
¡
);

1302 
cu¼’tGroup
->
objTy³s
.
	`PushLa¡
(
¡
);

1304  
asSUCCESS
;

1305 
	}
}

1308 
asCSütEngše
::
	$Regi¡”IÁ”çûM‘hod
(cÚ¡ *
štf
, cÚ¡ *
deş¬©iÚ
)

1311 ifĞ
cu¼’tGroup
->
	`FšdTy³
(
štf
) == 0 )

1312  
	`CÚfigE¼Ü
(
asWRONG_CONFIG_GROUP
, "Regi¡”IÁ”çûM‘hod", 
štf
, 
deş¬©iÚ
);

1314 
asCD©aTy³
 
dt
;

1315 
asCBud”
 
	`bld
(
this
, 0);

1316 
r
 = 
bld
.
	`P¬£D©aTy³
(
štf
, &
dt
, 
deçuÉName¥aû
);

1317 ifĞ
r
 < 0 )

1318  
	`CÚfigE¼Ü
(
r
, "Regi¡”IÁ”çûM‘hod", 
štf
, 
deş¬©iÚ
);

1320 
asCSütFunùiÚ
 *
func
 = 
	`asNEW
×sCSütFunùiÚ)(
this
, 0, 
asFUNC_INTERFACE
);

1321 ifĞ
func
 == 0 )

1322  
	`CÚfigE¼Ü
(
asOUT_OF_MEMORY
, "Regi¡”IÁ”çûM‘hod", 
štf
, 
deş¬©iÚ
);

1324 
func
->
objeùTy³
 = 
dt
.
	`G‘ObjeùTy³
();

1326 
r
 = 
bld
.
	`P¬£FunùiÚDeş¬©iÚ
(
func
->
objeùTy³
, 
deş¬©iÚ
, func, 
çl£
);

1327 ifĞ
r
 < 0 )

1329 
	`asDELETE
(
func
,
asCSütFunùiÚ
);

1330  
	`CÚfigE¼Ü
(
asINVALID_DECLARATION
, "Regi¡”IÁ”çûM‘hod", 
štf
, 
deş¬©iÚ
);

1334 
r
 = 
bld
.
	`CheckNameCÚæiùMemb”
(
dt
.
	`G‘ObjeùTy³
(), 
func
->
Çme
.
	`Add»ssOf
(), 0, 0, 
çl£
);

1335 ifĞ
r
 < 0 )

1337 
	`asDELETE
(
func
,
asCSütFunùiÚ
);

1338  
	`CÚfigE¼Ü
(
asNAME_TAKEN
, "Regi¡”IÁ”çûM‘hod", 
štf
, 
deş¬©iÚ
);

1341 
func
->
id
 = 
	`G‘NextSütFunùiÚId
();

1342 
	`S‘SütFunùiÚ
(
func
);

1343 
func
->
objeùTy³
->
m‘hods
.
	`PushLa¡
(func->
id
);

1346 
func
->
	`Compu‹SigÇtu»Id
();

1350 ifĞ
func
->
»tuºTy³
.
	`G‘ObjeùTy³
() )

1352 
asCCÚfigGroup
 *
group
 = 
	`FšdCÚfigGroupFÜObjeùTy³
(
func
->
»tuºTy³
.
	`G‘ObjeùTy³
());

1353 
cu¼’tGroup
->
	`RefCÚfigGroup
(
group
);

1355  
asUINT
 
n
 = 0;‚ < 
func
->
·¿m‘”Ty³s
.
	`G‘L’gth
();‚++ )

1357 ifĞ
func
->
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
() )

1359 
asCCÚfigGroup
 *
group
 = 
	`FšdCÚfigGroupFÜObjeùTy³
(
func
->
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
());

1360 
cu¼’tGroup
->
	`RefCÚfigGroup
(
group
);

1365  
func
->
id
;

1366 
	}
}

1368 
asCSütEngše
::
	$Regi¡”ObjeùTy³
(cÚ¡ *
Çme
, 
by‹Size
, 
asDWORD
 
æags
)

1370 
r
;

1372 
isP»·»d
 = 
çl£
;

1376 ifĞ
æags
 & 
asOBJ_REF
 )

1379 ifĞ
æags
 & ~(
asOBJ_REF
 | 
asOBJ_GC
 | 
asOBJ_NOHANDLE
 | 
asOBJ_SCOPED
 | 
asOBJ_TEMPLATE
 | 
asOBJ_NOCOUNT
) )

1380  
	`CÚfigE¼Ü
(
asINVALID_ARG
, "Regi¡”ObjeùTy³", 
Çme
, 0);

1383 ifĞ(
æags
 & 
asOBJ_GC
è&& (æag & (
asOBJ_NOHANDLE
|
asOBJ_SCOPED
|
asOBJ_NOCOUNT
)) )

1384  
	`CÚfigE¼Ü
(
asINVALID_ARG
, "Regi¡”ObjeùTy³", 
Çme
, 0);

1385 ifĞ(
æags
 & 
asOBJ_NOHANDLE
è&& (æag & (
asOBJ_GC
|
asOBJ_SCOPED
|
asOBJ_NOCOUNT
)) )

1386  
	`CÚfigE¼Ü
(
asINVALID_ARG
, "Regi¡”ObjeùTy³", 
Çme
, 0);

1387 ifĞ(
æags
 & 
asOBJ_SCOPED
è&& (æag & (
asOBJ_GC
|
asOBJ_NOHANDLE
|
asOBJ_NOCOUNT
)) )

1388  
	`CÚfigE¼Ü
(
asINVALID_ARG
, "Regi¡”ObjeùTy³", 
Çme
, 0);

1389 ifĞ(
æags
 & 
asOBJ_NOCOUNT
è&& (æag & (
asOBJ_GC
|
asOBJ_NOHANDLE
|
asOBJ_SCOPED
)) )

1390  
	`CÚfigE¼Ü
(
asINVALID_ARG
, "Regi¡”ObjeùTy³", 
Çme
, 0);

1392 ifĞ
æags
 & 
asOBJ_VALUE
 )

1396 ifĞ
æags
 & (
asOBJ_REF
 | 
asOBJ_GC
 | 
asOBJ_SCOPED
 | 
asOBJ_TEMPLATE
 | 
asOBJ_NOCOUNT
) )

1397  
	`CÚfigE¼Ü
(
asINVALID_ARG
, "Regi¡”ObjeùTy³", 
Çme
, 0);

1400 ifĞ(
æags
 & 
asOBJ_POD
è&& (æag & 
asOBJ_ASHANDLE
) )

1401  
	`CÚfigE¼Ü
(
asINVALID_ARG
, "Regi¡”ObjeùTy³", 
Çme
, 0);

1404 ifĞ
æags
 & 
asOBJ_APP_CLASS
 )

1407 ifĞ
æags
 & (
asOBJ_APP_PRIMITIVE
 | 
asOBJ_APP_FLOAT
) )

1408  
	`CÚfigE¼Ü
(
asINVALID_ARG
, "Regi¡”ObjeùTy³", 
Çme
, 0);

1410 ifĞ
æags
 & 
asOBJ_APP_PRIMITIVE
 )

1413 ifĞ
æags
 & (
asOBJ_APP_CLASS
 |

1414 
asOBJ_APP_CLASS_CONSTRUCTOR
 |

1415 
asOBJ_APP_CLASS_DESTRUCTOR
 |

1416 
asOBJ_APP_CLASS_ASSIGNMENT
 |

1417 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
 |

1418 
asOBJ_APP_FLOAT
 |

1419 
asOBJ_APP_CLASS_ALLINTS
 |

1420 
asOBJ_APP_CLASS_ALLFLOATS
) )

1421  
	`CÚfigE¼Ü
(
asINVALID_ARG
, "Regi¡”ObjeùTy³", 
Çme
, 0);

1423 ifĞ
æags
 & 
asOBJ_APP_FLOAT
 )

1426 ifĞ
æags
 & (
asOBJ_APP_CLASS
 |

1427 
asOBJ_APP_CLASS_CONSTRUCTOR
 |

1428 
asOBJ_APP_CLASS_DESTRUCTOR
 |

1429 
asOBJ_APP_CLASS_ASSIGNMENT
 |

1430 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
 |

1431 
asOBJ_APP_PRIMITIVE
 |

1432 
asOBJ_APP_CLASS_ALLINTS
 |

1433 
asOBJ_APP_CLASS_ALLFLOATS
) )

1434  
	`CÚfigE¼Ü
(
asINVALID_ARG
, "Regi¡”ObjeùTy³", 
Çme
, 0);

1436 ifĞ
æags
 & (
asOBJ_APP_CLASS_CONSTRUCTOR
 |

1437 
asOBJ_APP_CLASS_DESTRUCTOR
 |

1438 
asOBJ_APP_CLASS_ASSIGNMENT
 |

1439 
asOBJ_APP_CLASS_COPY_CONSTRUCTOR
 |

1440 
asOBJ_APP_CLASS_ALLINTS
 |

1441 
asOBJ_APP_CLASS_ALLFLOATS
) )

1444  
	`CÚfigE¼Ü
(
asINVALID_ARG
, "Regi¡”ObjeùTy³", 
Çme
, 0);

1448  
	`CÚfigE¼Ü
(
asINVALID_ARG
, "Regi¡”ObjeùTy³", 
Çme
, 0);

1451 ifĞ
æags
 - (æag & 
asOBJ_MASK_VALID_FLAGS
) )

1452  
	`CÚfigE¼Ü
(
asINVALID_ARG
, "Regi¡”ObjeùTy³", 
Çme
, 0);

1455 ifĞ(
æags
 & 
asOBJ_VALUE
è&& 
by‹Size
 == 0 )

1457 
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_ERROR
, 
TXT_VALUE_TYPE_MUST_HAVE_SIZE
);

1458  
	`CÚfigE¼Ü
(
asINVALID_ARG
, "Regi¡”ObjeùTy³", 
Çme
, 0);

1462 ifĞ
Çme
 == 0 )

1463  
	`CÚfigE¼Ü
(
asINVALID_NAME
, "Regi¡”ObjeùTy³", 
Çme
, 0);

1465 
asCSŒšg
 
ty³Name
;

1466 
asCBud”
 
	`bld
(
this
, 0);

1467 ifĞ
æags
 & 
asOBJ_TEMPLATE
 )

1469 
asCSŒšg
 
subty³Name
;

1470 
r
 = 
bld
.
	`P¬£Tem¶©eDeş
(
Çme
, &
ty³Name
, &
subty³Name
);

1471 ifĞ
r
 < 0 )

1472  
	`CÚfigE¼Ü
(
r
, "Regi¡”ObjeùTy³", 
Çme
, 0);

1475 
asUINT
 
n
;

1476  
n
 = 0;‚ < 
objeùTy³s
.
	`G‘L’gth
();‚++ )

1478 ifĞ
objeùTy³s
[
n
] && objeùTy³s[n]->
Çme
 =ğ
ty³Name
 && objeùTy³s[n]->
ÇmeS·û
 =ğ
deçuÉName¥aû
 )

1480  
asALREADY_REGISTERED
;

1483 
asCObjeùTy³
 *
ty³
 = 
	`asNEW
×sCObjeùTy³)(
this
);

1484 ifĞ
ty³
 == 0 )

1485  
	`CÚfigE¼Ü
(
asOUT_OF_MEMORY
, "Regi¡”ObjeùTy³", 
Çme
, 0);

1487 
ty³
->
Çme
 = 
ty³Name
;

1488 
ty³
->
ÇmeS·û
 = 
deçuÉName¥aû
;

1489 
ty³
->
size
 = 
by‹Size
;

1490 
ty³
->
æags
 = flags;

1491 
ty³
->
acûssMask
 = 
deçuÉAcûssMask
;

1494 
objeùTy³s
.
	`PushLa¡
(
ty³
);

1497 
asCObjeùTy³
 *
subty³
 = 0;

1498  
n
 = 0;‚ < 
‹m¶©eSubTy³s
.
	`G‘L’gth
();‚++ )

1500 ifĞ
‹m¶©eSubTy³s
[
n
]->
Çme
 =ğ
subty³Name
 )

1502 
subty³
 = 
‹m¶©eSubTy³s
[
n
];

1506 ifĞ
subty³
 == 0 )

1509 
subty³
 = 
	`asNEW
(
asCObjeùTy³
)(
this
);

1510 ifĞ
subty³
 == 0 )

1511  
	`CÚfigE¼Ü
(
asOUT_OF_MEMORY
, "Regi¡”ObjeùTy³", 
Çme
, 0);

1513 
subty³
->
Çme
 = 
subty³Name
;

1514 
subty³
->
size
 = 0;

1515 
subty³
->
æags
 = 
asOBJ_TEMPLATE_SUBTYPE
;

1516 
‹m¶©eSubTy³s
.
	`PushLa¡
(
subty³
);

1517 
subty³
->
	`AddRef
();

1519 
ty³
->
‹m¶©eSubTy³
 = 
asCD©aTy³
::
	`C»©eObjeù
(
subty³
, 
çl£
);

1520 
subty³
->
	`AddRef
();

1522 
cu¼’tGroup
->
objTy³s
.
	`PushLa¡
(
ty³
);

1524 
»gi¡”edObjTy³s
.
	`PushLa¡
(
ty³
);

1528 
ty³Name
 = 
Çme
;

1531 
asUINT
 
n
;

1532  
n
 = 0;‚ < 
objeùTy³s
.
	`G‘L’gth
();‚++ )

1534 ifĞ
objeùTy³s
[
n
] &&

1535 
objeùTy³s
[
n
]->
Çme
 =ğ
ty³Name
 &&

1536 
objeùTy³s
[
n
]->
ÇmeS·û
 =ğ
deçuÉName¥aû
 )

1538  
asALREADY_REGISTERED
;

1541  
n
 = 0;‚ < 
‹m¶©eTy³s
.
	`G‘L’gth
();‚++ )

1543 ifĞ
‹m¶©eTy³s
[
n
] &&

1544 
‹m¶©eTy³s
[
n
]->
Çme
 =ğ
ty³Name
 &&

1545 
‹m¶©eTy³s
[
n
]->
ÇmeS·û
 =ğ
deçuÉName¥aû
 )

1547  
asALREADY_REGISTERED
;

1551 
asCObjeùTy³
 *
mo¡ReûÁTem¶©eIn¡ªûTy³
 = 0;

1552 ifĞ
‹m¶©eIn¡ªûTy³s
.
	`G‘L’gth
() )

1553 
mo¡ReûÁTem¶©eIn¡ªûTy³
 = 
‹m¶©eIn¡ªûTy³s
[‹m¶©eIn¡ªûTy³s.
	`G‘L’gth
()-1];

1556 
asCD©aTy³
 
dt
;

1557 
boŞ
 
ŞdMsgC®lback
 = 
msgC®lback
; msgC®lback = 
çl£
;

1558 
r
 = 
bld
.
	`P¬£D©aTy³
(
Çme
, &
dt
, 
deçuÉName¥aû
);

1559 
msgC®lback
 = 
ŞdMsgC®lback
;

1563 ifĞ
r
 < 0 )

1566 
size_t
 
tok’L’
;

1567 
tok’
 = 
tok
.
	`G‘Tok’
(
Çme
, 
ty³Name
.
	`G‘L’gth
(), &
tok’L’
);

1568 ifĞ
tok’
 !ğ
‰Id’tif›r
 || 
ty³Name
.
	`G‘L’gth
(è!ğ
tok’L’
 )

1569  
	`CÚfigE¼Ü
(
asINVALID_NAME
, "Regi¡”ObjeùTy³", 
Çme
, 0);

1571 
r
 = 
bld
.
	`CheckNameCÚæiù
(
Çme
, 0, 0, 
deçuÉName¥aû
);

1572 ifĞ
r
 < 0 )

1573  
	`CÚfigE¼Ü
(
asNAME_TAKEN
, "Regi¡”ObjeùTy³", 
Çme
, 0);

1579 
asCObjeùTy³
 *
ty³
 = 
	`asNEW
×sCObjeùTy³)(
this
);

1580 ifĞ
ty³
 == 0 )

1581  
	`CÚfigE¼Ü
(
asOUT_OF_MEMORY
, "Regi¡”ObjeùTy³", 
Çme
, 0);

1583 
ty³
->
Çme
 = 
ty³Name
;

1584 
ty³
->
ÇmeS·û
 = 
deçuÉName¥aû
;

1585 
ty³
->
size
 = 
by‹Size
;

1586 
ty³
->
æags
 = flags;

1587 
ty³
->
acûssMask
 = 
deçuÉAcûssMask
;

1589 
objeùTy³s
.
	`PushLa¡
(
ty³
);

1590 
»gi¡”edObjTy³s
.
	`PushLa¡
(
ty³
);

1592 
cu¼’tGroup
->
objTy³s
.
	`PushLa¡
(
ty³
);

1602 ifĞ
dt
.
	`G‘SubTy³
().
	`IsTem¶©e
() )

1603  
	`CÚfigE¼Ü
(
asLOWER_ARRAY_DIMENSION_NOT_REGISTERED
, "Regi¡”ObjeùTy³", 
Çme
, 0);

1605 ifĞ
dt
.
	`IsR—dOÆy
() ||

1606 
dt
.
	`IsReã»nû
() )

1607  
	`CÚfigE¼Ü
(
asINVALID_TYPE
, "Regi¡”ObjeùTy³", 
Çme
, 0);

1610 ifĞ
‹m¶©eIn¡ªûTy³s
[‹m¶©eIn¡ªûTy³s.
	`G‘L’gth
()-1] =ğ
mo¡ReûÁTem¶©eIn¡ªûTy³
 ||

1611 
mo¡ReûÁTem¶©eIn¡ªûTy³
 =ğ
dt
.
	`G‘ObjeùTy³
() )

1613  
	`CÚfigE¼Ü
(
asNOT_SUPPORTED
, "Regi¡”ObjeùTy³", 
Çme
, 0);

1621 
asCObjeùTy³
 *
ty³
 = 
	`asNEW
×sCObjeùTy³)(
this
);

1622 ifĞ
ty³
 == 0 )

1623  
	`CÚfigE¼Ü
(
asOUT_OF_MEMORY
, "Regi¡”ObjeùTy³", 
Çme
, 0);

1625 
ty³
->
Çme
 = 
dt
.
	`G‘ObjeùTy³
()->name;

1627 
ty³
->
ÇmeS·û
 = 
dt
.
	`G‘ObjeùTy³
()->nameSpace;

1628 
ty³
->
‹m¶©eSubTy³
 = 
dt
.
	`G‘SubTy³
();

1629 ifĞ
ty³
->
‹m¶©eSubTy³
.
	`G‘ObjeùTy³
(èèty³->‹m¶©eSubTy³.G‘ObjeùTy³()->
	`AddRef
();

1630 
ty³
->
size
 = 
by‹Size
;

1631 
ty³
->
æags
 = flags;

1632 
ty³
->
acûssMask
 = 
deçuÉAcûssMask
;

1634 
‹m¶©eTy³s
.
	`PushLa¡
(
ty³
);

1636 
cu¼’tGroup
->
objTy³s
.
	`PushLa¡
(
ty³
);

1639 
	`RemoveTem¶©eIn¡ªûTy³
(
dt
.
	`G‘ObjeùTy³
());

1644 ifĞ
æags
 & 
asOBJ_TEMPLATE
 )

1645  
asSUCCESS
;

1647  
	`G‘Ty³IdByDeş
(
Çme
);

1648 
	}
}

1651 
asCSütEngše
::
	$Regi¡”ObjeùBehaviour
(cÚ¡ *
d©©y³
, 
asEBehaviours
 
behaviour
, cÚ¡ *
deş
, cÚ¡ 
asSFuncPŒ
 &
funcPoš‹r
, 
asDWORD
 
ÿÎCÚv
)

1653 ifĞ
d©©y³
 =ğ0 )  
	`CÚfigE¼Ü
(
asINVALID_ARG
, "Regi¡”ObjeùBehaviour", d©©y³, 
deş
);

1656 
asCBud”
 
	`bld
(
this
, 0);

1657 
asCD©aTy³
 
ty³
;

1658 
r
 = 
bld
.
	`P¬£D©aTy³
(
d©©y³
, &
ty³
, 
deçuÉName¥aû
);

1659 ifĞ
r
 < 0 )

1660  
	`CÚfigE¼Ü
(
r
, "Regi¡”ObjeùBehaviour", 
d©©y³
, 
deş
);

1662 ifĞ
ty³
.
	`G‘ObjeùTy³
() == 0 )

1663  
	`CÚfigE¼Ü
(
asINVALID_TYPE
, "Regi¡”ObjeùBehaviour", 
d©©y³
, 
deş
);

1665 ifĞ
ty³
.
	`IsR—dOÆy
(è||y³.
	`IsReã»nû
() )

1666  
	`CÚfigE¼Ü
(
asINVALID_TYPE
, "Regi¡”ObjeùBehaviour", 
d©©y³
, 
deş
);

1668  
	`Regi¡”BehaviourToObjeùTy³
(
ty³
.
	`G‘ObjeùTy³
(), 
behaviour
, 
deş
, 
funcPoš‹r
, 
ÿÎCÚv
);

1669 
	}
}

1672 
asCSütEngše
::
	$Regi¡”BehaviourToObjeùTy³
(
asCObjeùTy³
 *
objeùTy³
, 
asEBehaviours
 
behaviour
, cÚ¡ *
deş
, cÚ¡ 
asSFuncPŒ
 &
funcPoš‹r
, 
asDWORD
 
ÿÎCÚv
)

1674 
asSSy¡emFunùiÚIÁ”çû
 
š‹º®
;

1675 ifĞ
behaviour
 =ğ
asBEHAVE_FACTORY
 ||

1676 
behaviour
 =ğ
asBEHAVE_LIST_FACTORY
 ||

1677 
behaviour
 =ğ
asBEHAVE_TEMPLATE_CALLBACK
 )

1679 #ifdeà
AS_MAX_PORTABILITY


1680 ifĞ
ÿÎCÚv
 !ğ
asCALL_GENERIC
 )

1681  
	`CÚfigE¼Ü
(
asNOT_SUPPORTED
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1683 
r
 = 
	`D‘eùC®lšgCÚv’tiÚ
(
çl£
, 
funcPoš‹r
, 
ÿÎCÚv
, &
š‹º®
);

1684 ifĞ
r
 < 0 )

1685  
	`CÚfigE¼Ü
(
r
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1689 #ifdeà
AS_MAX_PORTABILITY


1690 ifĞ
ÿÎCÚv
 !ğ
asCALL_GENERIC
 )

1691  
	`CÚfigE¼Ü
(
asNOT_SUPPORTED
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1693 ifĞ
ÿÎCÚv
 !ğ
asCALL_THISCALL
 &&

1694 
ÿÎCÚv
 !ğ
asCALL_CDECL_OBJLAST
 &&

1695 
ÿÎCÚv
 !ğ
asCALL_CDECL_OBJFIRST
 &&

1696 
ÿÎCÚv
 !ğ
asCALL_GENERIC
 )

1697  
	`CÚfigE¼Ü
(
asNOT_SUPPORTED
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1700 
r
 = 
	`D‘eùC®lšgCÚv’tiÚ
(
Œue
, 
funcPoš‹r
, 
ÿÎCÚv
, &
š‹º®
);

1701 ifĞ
r
 < 0 )

1702  
	`CÚfigE¼Ü
(
r
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1705 
isP»·»d
 = 
çl£
;

1707 
asSTy³Behaviour
 *
beh
 = &
objeùTy³
->beh;

1710 
asCSütFunùiÚ
 
	`func
(
this
, 0, 
asFUNC_DUMMY
);

1712 
asCBud”
 
	`bld
(
this
, 0);

1713 
r
 = 
bld
.
	`P¬£FunùiÚDeş¬©iÚ
(
objeùTy³
, 
deş
, &
func
, 
Œue
, &
š‹º®
.
·¿mAutoHªdËs
, &š‹º®.
»tuºAutoHªdË
);

1714 ifĞ
r
 < 0 )

1715  
	`CÚfigE¼Ü
(
asINVALID_DECLARATION
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1716 
func
.
Çme
.
	`FÜm©
("_beh_%d_", 
behaviour
);

1718 ifĞ
behaviour
 !ğ
asBEHAVE_FACTORY
 && behaviou¸!ğ
asBEHAVE_LIST_FACTORY
 )

1719 
func
.
objeùTy³
 = objectType;

1722 ifĞ
objeùTy³
->
æags
 & 
asOBJ_TEMPLATE
 )

1724 ifĞ
func
.
»tuºTy³
.
	`G‘ObjeùTy³
(è=ğ
objeùTy³
->
‹m¶©eSubTy³
.GetObjectType() )

1726 ifĞ
func
.
»tuºTy³
.
	`IsObjeùHªdË
() )

1727 
objeùTy³
->
acû±V®ueSubTy³
 = 
çl£
;

1728 ifĞ!
func
.
»tuºTy³
.
	`IsReã»nû
() )

1729 
objeùTy³
->
acû±RefSubTy³
 = 
çl£
;

1732  
asUINT
 
n
 = 0;‚ < 
func
.
·¿m‘”Ty³s
.
	`G‘L’gth
();‚++ )

1734 ifĞ
func
.
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
(è=ğ
objeùTy³
->
‹m¶©eSubTy³
.GetObjectType() )

1737 ifĞ
func
.
·¿m‘”Ty³s
[
n
].
	`IsObjeùHªdË
(è|| (func.·¿m‘”Ty³s[n].
	`IsReã»nû
(è&& func.
šOutFÏgs
[n] =ğ
asTM_INOUTREF
) )

1738 
objeùTy³
->
acû±V®ueSubTy³
 = 
çl£
;

1739 ifĞ!
func
.
·¿m‘”Ty³s
[
n
].
	`IsReã»nû
() )

1740 
objeùTy³
->
acû±RefSubTy³
 = 
çl£
;

1745 ifĞ
behaviour
 =ğ
asBEHAVE_CONSTRUCT
 )

1750 ifĞ
func
.
»tuºTy³
 !ğ
asCD©aTy³
::
	`C»©ePrim™ive
(
‰Void
, 
çl£
) )

1751  
	`CÚfigE¼Ü
(
asINVALID_DECLARATION
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1753 ifĞ
objeùTy³
->
æags
 & 
asOBJ_SCRIPT_OBJECT
 )

1756 
	`asASSERT
(
func
.
·¿m‘”Ty³s
.
	`G‘L’gth
() == 1);

1758 
beh
->
cÚ¡ruù
 = 
	`AddBehaviourFunùiÚ
(
func
, 
š‹º®
);

1759 
beh
->
çùÜy
 = beh->
cÚ¡ruù
;

1760 
sütFunùiÚs
[
beh
->
çùÜy
]->
	`AddRef
();

1761 
beh
->
cÚ¡ruùÜs
.
	`PushLa¡
(beh->
cÚ¡ruù
);

1762 
beh
->
çùÜ›s
.
	`PushLa¡
(beh->
çùÜy
);

1763 
func
.
id
 = 
beh
->
cÚ¡ruù
;

1768 ifĞ!(
func
.
objeùTy³
->
æags
 & 
asOBJ_VALUE
) )

1770 
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_ERROR
, 
TXT_ILLEGAL_BEHAVIOUR_FOR_TYPE
);

1771  
	`CÚfigE¼Ü
(
asILLEGAL_BEHAVIOUR_FOR_TYPE
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1779 
func
.
id
 = 
	`AddBehaviourFunùiÚ
(func, 
š‹º®
);

1780 
beh
->
cÚ¡ruùÜs
.
	`PushLa¡
(
func
.
id
);

1781 ifĞ
func
.
·¿m‘”Ty³s
.
	`G‘L’gth
() == 0 )

1783 
beh
->
cÚ¡ruù
 = 
func
.
id
;

1785 ifĞ
func
.
·¿m‘”Ty³s
.
	`G‘L’gth
() == 1 )

1788 
asCD©aTy³
 
·¿mTy³
 = 
func
.
·¿m‘”Ty³s
[0];

1792 ifĞ
·¿mTy³
.
	`IsObjeù
(è&&…¬amTy³.
	`IsReã»nû
(è&&…¬amTy³.
	`IsR—dOÆy
(è&& 
func
.
šOutFÏgs
[0] =ğ
asTM_INREF
 &&…¬amTy³.
	`G‘ObjeùTy³
(è=ğ
objeùTy³
 )

1793 
beh
->
cİycÚ¡ruù
 = 
func
.
id
;

1797 ifĞ
behaviour
 =ğ
asBEHAVE_DESTRUCT
 )

1800 ifĞ!(
func
.
objeùTy³
->
æags
 & 
asOBJ_VALUE
) )

1802 
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_ERROR
, 
TXT_ILLEGAL_BEHAVIOUR_FOR_TYPE
);

1803  
	`CÚfigE¼Ü
(
asILLEGAL_BEHAVIOUR_FOR_TYPE
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1806 ifĞ
beh
->
de¡ruù
 )

1807  
	`CÚfigE¼Ü
(
asALREADY_REGISTERED
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1810 ifĞ
func
.
»tuºTy³
 !ğ
asCD©aTy³
::
	`C»©ePrim™ive
(
‰Void
, 
çl£
) )

1811  
	`CÚfigE¼Ü
(
asINVALID_DECLARATION
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1814 ifĞ
func
.
·¿m‘”Ty³s
.
	`G‘L’gth
() > 0 )

1815  
	`CÚfigE¼Ü
(
asINVALID_DECLARATION
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1817 
func
.
id
 = 
beh
->
de¡ruù
 = 
	`AddBehaviourFunùiÚ
(func, 
š‹º®
);

1819 ifĞ
behaviour
 =ğ
asBEHAVE_FACTORY
 || behaviou¸=ğ
asBEHAVE_LIST_FACTORY
 )

1822 ifĞ!(
objeùTy³
->
æags
 & 
asOBJ_REF
è|| (objeùTy³->æag & 
asOBJ_NOHANDLE
) )

1824 
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_ERROR
, 
TXT_ILLEGAL_BEHAVIOUR_FOR_TYPE
);

1825  
	`CÚfigE¼Ü
(
asILLEGAL_BEHAVIOUR_FOR_TYPE
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1829 ifĞ
func
.
»tuºTy³
 !ğ
asCD©aTy³
::
	`C»©eObjeùHªdË
(
objeùTy³
, 
çl£
) )

1830  
	`CÚfigE¼Ü
(
asINVALID_DECLARATION
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1837 ifĞ(
objeùTy³
->
æags
 & 
asOBJ_TEMPLATE
) &&

1838 (
func
.
·¿m‘”Ty³s
.
	`G‘L’gth
() == 0 ||

1839 !
func
.
·¿m‘”Ty³s
[0].
	`IsReã»nû
()) )

1843  
	`CÚfigE¼Ü
(
asINVALID_DECLARATION
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1847 
func
.
id
 = 
	`AddBehaviourFunùiÚ
(func, 
š‹º®
);

1850 ifĞ
behaviour
 !ğ
asBEHAVE_LIST_FACTORY
 )

1851 
beh
->
çùÜ›s
.
	`PushLa¡
(
func
.
id
);

1853 ifĞ(
func
.
·¿m‘”Ty³s
.
	`G‘L’gth
() == 0) ||

1854 (
func
.
·¿m‘”Ty³s
.
	`G‘L’gth
(è=ğ1 && (
objeùTy³
->
æags
 & 
asOBJ_TEMPLATE
)) )

1856 
beh
->
çùÜy
 = 
func
.
id
;

1858 ifĞ(
func
.
·¿m‘”Ty³s
.
	`G‘L’gth
() == 1) ||

1859 (
func
.
·¿m‘”Ty³s
.
	`G‘L’gth
(è=ğ2 && (
objeùTy³
->
æags
 & 
asOBJ_TEMPLATE
)) )

1861 ifĞ
behaviour
 =ğ
asBEHAVE_LIST_FACTORY
 )

1862 
beh
->
li¡FaùÜy
 = 
func
.
id
;

1866 
asCD©aTy³
 
·¿mTy³
 = 
func
.
·¿m‘”Ty³s
[func.·¿m‘”Ty³s.
	`G‘L’gth
()-1];

1870 ifĞ
·¿mTy³
.
	`IsObjeù
(è&&…¬amTy³.
	`IsReã»nû
(è&&…¬amTy³.
	`IsR—dOÆy
(è&& 
func
.
šOutFÏgs
[func.
·¿m‘”Ty³s
.
	`G‘L’gth
()-1] =ğ
asTM_INREF
 &&…¬amTy³.
	`G‘ObjeùTy³
(è=ğ
objeùTy³
 )

1871 
beh
->
cİyçùÜy
 = 
func
.
id
;

1875 ifĞ
behaviour
 =ğ
asBEHAVE_ADDREF
 )

1878 ifĞ!(
func
.
objeùTy³
->
æags
 & 
asOBJ_REF
) ||

1879 (
func
.
objeùTy³
->
æags
 & 
asOBJ_NOHANDLE
) ||

1880 (
func
.
objeùTy³
->
æags
 & 
asOBJ_SCOPED
) ||

1881 (
func
.
objeùTy³
->
æags
 & 
asOBJ_NOCOUNT
) )

1883 
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_ERROR
, 
TXT_ILLEGAL_BEHAVIOUR_FOR_TYPE
);

1884  
	`CÚfigE¼Ü
(
asILLEGAL_BEHAVIOUR_FOR_TYPE
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1887 ifĞ
beh
->
add»f
 )

1888  
	`CÚfigE¼Ü
(
asALREADY_REGISTERED
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1891 ifĞ
func
.
»tuºTy³
 !ğ
asCD©aTy³
::
	`C»©ePrim™ive
(
‰Void
, 
çl£
) )

1892  
	`CÚfigE¼Ü
(
asINVALID_DECLARATION
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1895 ifĞ
func
.
·¿m‘”Ty³s
.
	`G‘L’gth
() > 0 )

1896  
	`CÚfigE¼Ü
(
asINVALID_DECLARATION
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1898 
func
.
id
 = 
beh
->
add»f
 = 
	`AddBehaviourFunùiÚ
(func, 
š‹º®
);

1900 ifĞ
behaviour
 =ğ
asBEHAVE_RELEASE
 )

1903 ifĞ!(
func
.
objeùTy³
->
æags
 & 
asOBJ_REF
) ||

1904 (
func
.
objeùTy³
->
æags
 & 
asOBJ_NOHANDLE
) ||

1905 (
func
.
objeùTy³
->
æags
 & 
asOBJ_NOCOUNT
) )

1907 
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_ERROR
, 
TXT_ILLEGAL_BEHAVIOUR_FOR_TYPE
);

1908  
	`CÚfigE¼Ü
(
asILLEGAL_BEHAVIOUR_FOR_TYPE
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1911 ifĞ
beh
->
»Ëa£
 )

1912  
	`CÚfigE¼Ü
(
asALREADY_REGISTERED
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1915 ifĞ
func
.
»tuºTy³
 !ğ
asCD©aTy³
::
	`C»©ePrim™ive
(
‰Void
, 
çl£
) )

1916  
	`CÚfigE¼Ü
(
asINVALID_DECLARATION
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1919 ifĞ
func
.
·¿m‘”Ty³s
.
	`G‘L’gth
() > 0 )

1920  
	`CÚfigE¼Ü
(
asINVALID_DECLARATION
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1922 
func
.
id
 = 
beh
->
»Ëa£
 = 
	`AddBehaviourFunùiÚ
(func, 
š‹º®
);

1924 ifĞ
behaviour
 =ğ
asBEHAVE_TEMPLATE_CALLBACK
 )

1927 ifĞ!(
func
.
objeùTy³
->
æags
 & 
asOBJ_TEMPLATE
) )

1929 
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_ERROR
, 
TXT_ILLEGAL_BEHAVIOUR_FOR_TYPE
);

1930  
	`CÚfigE¼Ü
(
asILLEGAL_BEHAVIOUR_FOR_TYPE
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1933 ifĞ
beh
->
‹m¶©eC®lback
 )

1934  
	`CÚfigE¼Ü
(
asALREADY_REGISTERED
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1937 ifĞ
func
.
»tuºTy³
 !ğ
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
çl£
) )

1938  
	`CÚfigE¼Ü
(
asINVALID_DECLARATION
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1941 ifĞ
func
.
·¿m‘”Ty³s
.
	`G‘L’gth
() != 1 )

1942  
	`CÚfigE¼Ü
(
asINVALID_DECLARATION
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1944 
func
.
id
 = 
beh
->
‹m¶©eC®lback
 = 
	`AddBehaviourFunùiÚ
(func, 
š‹º®
);

1946 ifĞ
behaviour
 >ğ
asBEHAVE_FIRST_GC
 &&

1947 
behaviour
 <ğ
asBEHAVE_LAST_GC
 )

1950 ifĞ!(
func
.
objeùTy³
->
æags
 & 
asOBJ_GC
) )

1952 
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_ERROR
, 
TXT_ILLEGAL_BEHAVIOUR_FOR_TYPE
);

1953  
	`CÚfigE¼Ü
(
asILLEGAL_BEHAVIOUR_FOR_TYPE
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1957 ifĞ(
behaviour
 =ğ
asBEHAVE_GETREFCOUNT
 ||

1958 
behaviour
 =ğ
asBEHAVE_SETGCFLAG
 ||

1959 
behaviour
 =ğ
asBEHAVE_GETGCFLAG
) &&

1960 
func
.
·¿m‘”Ty³s
.
	`G‘L’gth
() != 0 )

1961  
	`CÚfigE¼Ü
(
asINVALID_DECLARATION
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1963 ifĞ(
behaviour
 =ğ
asBEHAVE_ENUMREFS
 ||

1964 
behaviour
 =ğ
asBEHAVE_RELEASEREFS
) &&

1965 
func
.
·¿m‘”Ty³s
.
	`G‘L’gth
() != 1 )

1966  
	`CÚfigE¼Ü
(
asINVALID_DECLARATION
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1969 ifĞ
behaviour
 =ğ
asBEHAVE_GETREFCOUNT
 &&

1970 
func
.
»tuºTy³
 !ğ
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ
, 
çl£
) )

1971  
	`CÚfigE¼Ü
(
asINVALID_DECLARATION
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1973 ifĞ
behaviour
 =ğ
asBEHAVE_GETGCFLAG
 &&

1974 
func
.
»tuºTy³
 !ğ
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
çl£
) )

1975  
	`CÚfigE¼Ü
(
asINVALID_DECLARATION
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1977 ifĞ(
behaviour
 =ğ
asBEHAVE_SETGCFLAG
 ||

1978 
behaviour
 =ğ
asBEHAVE_ENUMREFS
 ||

1979 
behaviour
 =ğ
asBEHAVE_RELEASEREFS
) &&

1980 
func
.
»tuºTy³
 !ğ
asCD©aTy³
::
	`C»©ePrim™ive
(
‰Void
, 
çl£
) )

1981  
	`CÚfigE¼Ü
(
asINVALID_DECLARATION
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

1983 ifĞ
behaviour
 =ğ
asBEHAVE_GETREFCOUNT
 )

1984 
func
.
id
 = 
beh
->
gcG‘RefCouÁ
 = 
	`AddBehaviourFunùiÚ
(func, 
š‹º®
);

1985 ifĞ
behaviour
 =ğ
asBEHAVE_SETGCFLAG
 )

1986 
func
.
id
 = 
beh
->
gcS‘FÏg
 = 
	`AddBehaviourFunùiÚ
(func, 
š‹º®
);

1987 ifĞ
behaviour
 =ğ
asBEHAVE_GETGCFLAG
 )

1988 
func
.
id
 = 
beh
->
gcG‘FÏg
 = 
	`AddBehaviourFunùiÚ
(func, 
š‹º®
);

1989 ifĞ
behaviour
 =ğ
asBEHAVE_ENUMREFS
 )

1990 
func
.
id
 = 
beh
->
gcEnumReã»nûs
 = 
	`AddBehaviourFunùiÚ
(func, 
š‹º®
);

1991 ifĞ
behaviour
 =ğ
asBEHAVE_RELEASEREFS
 )

1992 
func
.
id
 = 
beh
->
gcR–—£AÎReã»nûs
 = 
	`AddBehaviourFunùiÚ
(func, 
š‹º®
);

1994 ifĞ
behaviour
 =ğ
asBEHAVE_IMPLICIT_VALUE_CAST
 ||

1995 
behaviour
 =ğ
asBEHAVE_VALUE_CAST
 )

1998 ifĞ
func
.
·¿m‘”Ty³s
.
	`G‘L’gth
() != 0 )

1999  
	`CÚfigE¼Ü
(
asINVALID_DECLARATION
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

2002 ifĞ
func
.
»tuºTy³
.
	`IsEqu®Exû±RefAndCÚ¡
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰BoŞ
, 
çl£
)) )

2003  
	`CÚfigE¼Ü
(
asNOT_SUPPORTED
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

2005 ifĞ
func
.
»tuºTy³
.
	`IsEqu®Exû±RefAndCÚ¡
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰Void
, 
çl£
)) )

2006  
	`CÚfigE¼Ü
(
asINVALID_DECLARATION
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

2010 
beh
->
İ”©Üs
.
	`PushLa¡
(
behaviour
);

2011 
func
.
id
 = 
	`AddBehaviourFunùiÚ
(func, 
š‹º®
);

2012 
beh
->
İ”©Üs
.
	`PushLa¡
(
func
.
id
);

2014 ifĞ
behaviour
 =ğ
asBEHAVE_REF_CAST
 ||

2015 
behaviour
 =ğ
asBEHAVE_IMPLICIT_REF_CAST
 )

2021 ifĞ!(
func
.
·¿m‘”Ty³s
.
	`G‘L’gth
(è=ğ0 && func.
»tuºTy³
.
	`IsObjeùHªdË
()) &&

2022 !(
func
.
·¿m‘”Ty³s
.
	`G‘L’gth
(è=ğ1 && func.·¿m‘”Ty³s[0].
	`G‘Tok’Ty³
(è=ğ
‰Que¡iÚ
 && func.
šOutFÏgs
[0] =ğ
asTM_OUTREF
 && func.
»tuºTy³
.G‘Tok’Ty³(è=ğ
‰Void
) )

2023  
	`CÚfigE¼Ü
(
asINVALID_DECLARATION
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

2026 ifĞ
func
.
	`IsR—dOÆy
() )

2027  
	`CÚfigE¼Ü
(
asINVALID_DECLARATION
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

2031 ifĞ
func
.
·¿m‘”Ty³s
.
	`G‘L’gth
() == 1 )

2034  
asUINT
 
n
 = 0;‚ < 
beh
->
İ”©Üs
.
	`G‘L’gth
();‚+= 2 )

2036 ifĞ
beh
->
İ”©Üs
[
n
] =ğ
asBEHAVE_REF_CAST
 ||

2037 
beh
->
İ”©Üs
[
n
] =ğ
asBEHAVE_IMPLICIT_REF_CAST
 )

2039 
asCSütFunùiÚ
 *
f
 = 
sütFunùiÚs
[
beh
->
İ”©Üs
[
n
+1]];

2040 ifĞ
f
->
·¿m‘”Ty³s
.
	`G‘L’gth
() == 1 )

2041  
	`CÚfigE¼Ü
(
asALREADY_REGISTERED
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

2048  
asUINT
 
n
 = 0;‚ < 
beh
->
İ”©Üs
.
	`G‘L’gth
();‚+= 2 )

2050 ifĞ
beh
->
İ”©Üs
[
n
] =ğ
asBEHAVE_REF_CAST
 ||

2051 
beh
->
İ”©Üs
[
n
] =ğ
asBEHAVE_IMPLICIT_REF_CAST
 )

2053 
asCSütFunùiÚ
 *
f
 = 
sütFunùiÚs
[
beh
->
İ”©Üs
[
n
+1]];

2054 ifĞ
f
->
»tuºTy³
.
	`G‘ObjeùTy³
(è=ğ
func
.returnType.GetObjectType() )

2055  
	`CÚfigE¼Ü
(
asALREADY_REGISTERED
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

2060 
beh
->
İ”©Üs
.
	`PushLa¡
(
behaviour
);

2061 
func
.
id
 = 
	`AddBehaviourFunùiÚ
(func, 
š‹º®
);

2062 
beh
->
İ”©Üs
.
	`PushLa¡
(
func
.
id
);

2066 
	`asASSERT
(
çl£
);

2068  
	`CÚfigE¼Ü
(
asINVALID_ARG
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

2071 ifĞ
func
.
id
 < 0 )

2072  
	`CÚfigE¼Ü
(
func
.
id
, "Regi¡”ObjeùBehaviour", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş
);

2075  
func
.
id
;

2076 
	}
}

2079 
asCSütEngše
::
	$V”ifyV¬Ty³NÙInFunùiÚ
(
asCSütFunùiÚ
 *
func
)

2082 ifĞ
func
->
»tuºTy³
.
	`G‘Tok’Ty³
(è=ğ
‰Que¡iÚ
 )

2083  
asINVALID_DECLARATION
;

2085  
n
 = 0;‚ < 
func
->
·¿m‘”Ty³s
.
	`G‘L’gth
();‚++ )

2086 ifĞ
func
->
·¿m‘”Ty³s
[
n
].
	`G‘Tok’Ty³
(è=ğ
‰Que¡iÚ
 )

2087  
asINVALID_DECLARATION
;

2090 
	}
}

2092 
asCSütEngše
::
	$AddBehaviourFunùiÚ
(
asCSütFunùiÚ
 &
func
, 
asSSy¡emFunùiÚIÁ”çû
 &
š‹º®
)

2094 
asUINT
 
n
;

2096 
id
 = 
	`G‘NextSütFunùiÚId
();

2098 
asSSy¡emFunùiÚIÁ”çû
 *
ÃwIÁ”çû
 = 
	`asNEW
(asSSystemFunctionInterface);

2099 ifĞ
ÃwIÁ”çû
 == 0 )

2100  
asOUT_OF_MEMORY
;

2102 
ÃwIÁ”çû
->
func
 = 
š‹º®
.func;

2103 
ÃwIÁ”çû
->
ba£Off£t
 = 
š‹º®
.baseOffset;

2104 
ÃwIÁ”çû
->
ÿÎCÚv
 = 
š‹º®
.callConv;

2105 
ÃwIÁ”çû
->
sütR‘uºSize
 = 
š‹º®
.scriptReturnSize;

2106 
ÃwIÁ”çû
->
ho¡R‘uºInMemÜy
 = 
š‹º®
.hostReturnInMemory;

2107 
ÃwIÁ”çû
->
ho¡R‘uºFlßt
 = 
š‹º®
.hostReturnFloat;

2108 
ÃwIÁ”çû
->
ho¡R‘uºSize
 = 
š‹º®
.hostReturnSize;

2109 
ÃwIÁ”çû
->
·¿mSize
 = 
š‹º®
.paramSize;

2110 
ÃwIÁ”çû
->
kesObjByV®
 = 
š‹º®
.takesObjByVal;

2111 
ÃwIÁ”çû
->
·¿mAutoHªdËs
 = 
š‹º®
.paramAutoHandles;

2112 
ÃwIÁ”çû
->
»tuºAutoHªdË
 = 
š‹º®
.returnAutoHandle;

2113 
ÃwIÁ”çû
->
hasAutoHªdËs
 = 
š‹º®
.hasAutoHandles;

2115 
asCSütFunùiÚ
 *
f
 = 
	`asNEW
×sCSütFunùiÚ)(
this
, 0, 
asFUNC_SYSTEM
);

2116 ifĞ
f
 == 0 )

2118 
	`asDELETE
(
ÃwIÁ”çû
, 
asSSy¡emFunùiÚIÁ”çû
);

2119  
asOUT_OF_MEMORY
;

2122 
	`asASSERT
(
func
.
Çme
 != "" && func.name != "f");

2123 
f
->
Çme
 = 
func
.name;

2124 
f
->
sysFuncIÁf
 = 
ÃwIÁ”çû
;

2125 
f
->
»tuºTy³
 = 
func
.returnType;

2126 
f
->
objeùTy³
 = 
func
.objectType;

2127 
f
->
id
 = id;

2128 
f
->
isR—dOÆy
 = 
func
.isReadOnly;

2129 
f
->
acûssMask
 = 
deçuÉAcûssMask
;

2130 
f
->
·¿m‘”Ty³s
 = 
func
.parameterTypes;

2131 
f
->
šOutFÏgs
 = 
func
.inOutFlags;

2132  
n
 = 0;‚ < 
func
.
deçuÉArgs
.
	`G‘L’gth
();‚++ )

2133 ifĞ
func
.
deçuÉArgs
[
n
] )

2134 
f
->
deçuÉArgs
.
	`PushLa¡
(
	`asNEW
(
asCSŒšg
)(*
func
.deçuÉArgs[
n
]));

2136 
f
->
deçuÉArgs
.
	`PushLa¡
(0);

2138 
	`S‘SütFunùiÚ
(
f
);

2141 ifĞ
f
->
»tuºTy³
.
	`G‘ObjeùTy³
() )

2143 
asCCÚfigGroup
 *
group
 = 
	`FšdCÚfigGroupFÜObjeùTy³
(
f
->
»tuºTy³
.
	`G‘ObjeùTy³
());

2144 
cu¼’tGroup
->
	`RefCÚfigGroup
(
group
);

2146  
n
 = 0;‚ < 
f
->
·¿m‘”Ty³s
.
	`G‘L’gth
();‚++ )

2148 ifĞ
f
->
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
() )

2150 
asCCÚfigGroup
 *
group
 = 
	`FšdCÚfigGroupFÜObjeùTy³
(
f
->
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
());

2151 
cu¼’tGroup
->
	`RefCÚfigGroup
(
group
);

2155  
id
;

2156 
	}
}

2159 
asCSütEngše
::
	$Regi¡”Glob®Prİ”ty
(cÚ¡ *
deş¬©iÚ
, *
poš‹r
)

2162 ifĞ
poš‹r
 == 0 )

2163  
	`CÚfigE¼Ü
(
asINVALID_ARG
, "Regi¡”Glob®Prİ”ty", 
deş¬©iÚ
, 0);

2165 
asCD©aTy³
 
ty³
;

2166 
asCSŒšg
 
Çme
;

2168 
r
;

2169 
asCBud”
 
	`bld
(
this
, 0);

2170 ifĞ(
r
 = 
bld
.
	`V”ifyPrİ”ty
(0, 
deş¬©iÚ
, 
Çme
, 
ty³
, 
deçuÉName¥aû
)) < 0 )

2171  
	`CÚfigE¼Ü
(
r
, "Regi¡”Glob®Prİ”ty", 
deş¬©iÚ
, 0);

2174 ifĞ
ty³
.
	`IsReã»nû
() )

2175  
	`CÚfigE¼Ü
(
asINVALID_TYPE
, "Regi¡”Glob®Prİ”ty", 
deş¬©iÚ
, 0);

2178 
asCGlob®Prİ”ty
 *
´İ
 = 
	`AÎoÿ‹Glob®Prİ”ty
();

2179 
´İ
->
Çme
 =‚ame;

2180 
´İ
->
ÇmeS·û
 = 
deçuÉName¥aû
;

2181 
´İ
->
ty³
 =ype;

2182 
´İ
->
acûssMask
 = 
deçuÉAcûssMask
;

2184 
´İ
->
	`S‘Regi¡”edAdd»ss
(
poš‹r
);

2186 
»gi¡”edGlob®Prİs
.
	`PushLa¡
(
´İ
);

2187 
cu¼’tGroup
->
glob®Prİs
.
	`PushLa¡
(
´İ
);

2190 ifĞ
ty³
.
	`G‘ObjeùTy³
() )

2192 
asCCÚfigGroup
 *
group
 = 
	`FšdCÚfigGroupFÜObjeùTy³
(
ty³
.
	`G‘ObjeùTy³
());

2193 
cu¼’tGroup
->
	`RefCÚfigGroup
(
group
);

2196  
asSUCCESS
;

2197 
	}
}

2200 
asCGlob®Prİ”ty
 *
asCSütEngše
::
	$AÎoÿ‹Glob®Prİ”ty
()

2202 
asCGlob®Prİ”ty
 *
´İ
 = 
	`asNEW
(asCGlobalProperty);

2203 ifĞ
´İ
 == 0 )

2210 ifĞ
ä“Glob®Prİ”tyIds
.
	`G‘L’gth
() )

2212 
´İ
->
id
 = 
ä“Glob®Prİ”tyIds
.
	`PİLa¡
();

2213 
glob®Prİ”t›s
[
´İ
->
id
] =…rop;

2214  
´İ
;

2217 
´İ
->
id
 = (
asUINT
)
glob®Prİ”t›s
.
	`G‘L’gth
();

2218 
glob®Prİ”t›s
.
	`PushLa¡
(
´İ
);

2219  
´İ
;

2220 
	}
}

2223 
asCSütEngše
::
	$F»eUnu£dGlob®Prİ”t›s
()

2225  
asUINT
 
n
 = 0;‚ < 
glob®Prİ”t›s
.
	`G‘L’gth
();‚++ )

2227 ifĞ
glob®Prİ”t›s
[
n
] && glob®Prİ”t›s[n]->
	`G‘RefCouÁ
() == 0 )

2229 
ä“Glob®Prİ”tyIds
.
	`PushLa¡
(
n
);

2230 
	`asDELETE
(
glob®Prİ”t›s
[
n
], 
asCGlob®Prİ”ty
);

2231 
glob®Prİ”t›s
[
n
] = 0;

2234 
	}
}

2237 
asUINT
 
asCSütEngše
::
	$G‘Glob®Prİ”tyCouÁ
() const

2239  
	`asUINT
(
»gi¡”edGlob®Prİs
.
	`G‘L’gth
());

2240 
	}
}

2244 
asCSütEngše
::
	$G‘Glob®Prİ”tyByIndex
(
asUINT
 
šdex
, cÚ¡ **
Çme
, cÚ¡ **
ÇmeS·û
, *
ty³Id
, 
boŞ
 *
isCÚ¡
, cÚ¡ **
cÚfigGroup
, **
poš‹r
, 
asDWORD
 *
acûssMask
) const

2246 ifĞ
šdex
 >ğ
»gi¡”edGlob®Prİs
.
	`G‘L’gth
() )

2247  
asINVALID_ARG
;

2249 ifĞ
Çme
 )

2250 *
Çme
 = 
»gi¡”edGlob®Prİs
[
šdex
]->Çme.
	`Add»ssOf
();

2251 ifĞ
ÇmeS·û
 )

2252 *
ÇmeS·û
 = 
»gi¡”edGlob®Prİs
[
šdex
]->ÇmeS·û->
Çme
.
	`Add»ssOf
();

2254 ifĞ
cÚfigGroup
 )

2256 
asCCÚfigGroup
 *
group
 = 
	`FšdCÚfigGroupFÜGlob®V¬
(
šdex
);

2257 ifĞ
group
 )

2258 *
cÚfigGroup
 = 
group
->
groupName
.
	`Add»ssOf
();

2260 *
cÚfigGroup
 = 0;

2263 ifĞ
ty³Id
 )

2264 *
ty³Id
 = 
	`G‘Ty³IdFromD©aTy³
(
»gi¡”edGlob®Prİs
[
šdex
]->
ty³
);

2266 ifĞ
isCÚ¡
 )

2267 *
isCÚ¡
 = 
»gi¡”edGlob®Prİs
[
šdex
]->
ty³
.
	`IsR—dOÆy
();

2269 ifĞ
poš‹r
 )

2270 *
poš‹r
 = 
»gi¡”edGlob®Prİs
[
šdex
]->
	`G‘Regi¡”edAdd»ss
();

2272 ifĞ
acûssMask
 )

2273 *
acûssMask
 = 
»gi¡”edGlob®Prİs
[
šdex
]->accessMask;

2275  
asSUCCESS
;

2276 
	}
}

2279 
asCSütEngše
::
	$G‘Glob®Prİ”tyIndexByName
(cÚ¡ *
Çme
) const

2282 
id
 = -1;

2283  
size_t
 
n
 = 0;‚ < 
»gi¡”edGlob®Prİs
.
	`G‘L’gth
();‚++ )

2285 ifĞ
»gi¡”edGlob®Prİs
[
n
]->
Çme
 ==‚ame &&

2286 
»gi¡”edGlob®Prİs
[
n
]->
ÇmeS·û
 =ğ
deçuÉName¥aû
 )

2288 
id
 = ()
n
;

2293 ifĞ
id
 =ğ-1 )  
asNO_GLOBAL_VAR
;

2295  
id
;

2296 
	}
}

2299 
asCSütEngše
::
	$G‘Glob®Prİ”tyIndexByDeş
(cÚ¡ *
deş
) const

2302 
asCBud”
 
	`bld
(
cÚ¡_ÿ¡
<
asCSütEngše
*>(
this
), 0);

2304 
asCSŒšg
 
Çme
;

2305 
asSNameS·û
 *
ns
;

2306 
asCD©aTy³
 
dt
;

2307 
bld
.
	`P¬£V¬ŸbËDeş¬©iÚ
(
deş
, 
deçuÉName¥aû
, 
Çme
, 
ns
, 
dt
);

2311 
id
 = -1;

2312  
size_t
 
n
 = 0;‚ < 
»gi¡”edGlob®Prİs
.
	`G‘L’gth
(); ++n )

2314 ifĞ
Çme
 =ğ
»gi¡”edGlob®Prİs
[
n
]->name &&

2315 
dt
 =ğ
»gi¡”edGlob®Prİs
[
n
]->
ty³
 &&

2316 
ns
 =ğ
»gi¡”edGlob®Prİs
[
n
]->
ÇmeS·û
 )

2318 
id
 = ()
n
;

2323 ifĞ
id
 =ğ-1 )  
asNO_GLOBAL_VAR
;

2325  
id
;

2326 
	}
}

2329 
asCSütEngše
::
	$Regi¡”ObjeùM‘hod
(cÚ¡ *
obj
, cÚ¡ *
deş¬©iÚ
, cÚ¡ 
asSFuncPŒ
 &
funcPoš‹r
, 
asDWORD
 
ÿÎCÚv
)

2331 ifĞ
obj
 == 0 )

2332  
	`CÚfigE¼Ü
(
asINVALID_ARG
, "Regi¡”ObjeùM‘hod", 
obj
, 
deş¬©iÚ
);

2335 
asCD©aTy³
 
dt
;

2336 
asCBud”
 
	`bld
(
this
, 0);

2337 
r
 = 
bld
.
	`P¬£D©aTy³
(
obj
, &
dt
, 
deçuÉName¥aû
);

2338 ifĞ
r
 < 0 )

2339  
	`CÚfigE¼Ü
(
r
, "Regi¡”ObjeùM‘hod", 
obj
, 
deş¬©iÚ
);

2341 ifĞ
dt
.
	`G‘ObjeùTy³
() == 0 )

2342  
	`CÚfigE¼Ü
(
asINVALID_ARG
, "Regi¡”ObjeùM‘hod", 
obj
, 
deş¬©iÚ
);

2344  
	`Regi¡”M‘hodToObjeùTy³
(
dt
.
	`G‘ObjeùTy³
(), 
deş¬©iÚ
, 
funcPoš‹r
, 
ÿÎCÚv
);

2345 
	}
}

2348 
asCSütEngše
::
	$Regi¡”M‘hodToObjeùTy³
(
asCObjeùTy³
 *
objeùTy³
, cÚ¡ *
deş¬©iÚ
, cÚ¡ 
asSFuncPŒ
 &
funcPoš‹r
, 
asDWORD
 
ÿÎCÚv
)

2350 
asSSy¡emFunùiÚIÁ”çû
 
š‹º®
;

2351 
r
 = 
	`D‘eùC®lšgCÚv’tiÚ
(
Œue
, 
funcPoš‹r
, 
ÿÎCÚv
, &
š‹º®
);

2352 ifĞ
r
 < 0 )

2353  
	`CÚfigE¼Ü
(
r
, "Regi¡”ObjeùM‘hod", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş¬©iÚ
);

2356 #ifdeà
AS_MAX_PORTABILITY


2357 ifĞ
ÿÎCÚv
 !ğ
asCALL_GENERIC
 )

2358  
	`CÚfigE¼Ü
(
asNOT_SUPPORTED
, "Regi¡”ObjeùM‘hod", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş¬©iÚ
);

2360 ifĞ
ÿÎCÚv
 !ğ
asCALL_THISCALL
 &&

2361 
ÿÎCÚv
 !ğ
asCALL_CDECL_OBJLAST
 &&

2362 
ÿÎCÚv
 !ğ
asCALL_CDECL_OBJFIRST
 &&

2363 
ÿÎCÚv
 !ğ
asCALL_GENERIC
 )

2364  
	`CÚfigE¼Ü
(
asNOT_SUPPORTED
, "Regi¡”ObjeùM‘hod", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş¬©iÚ
);

2367 
isP»·»d
 = 
çl£
;

2370 
asSSy¡emFunùiÚIÁ”çû
 *
ÃwIÁ”çû
 = 
	`asNEW
×sSSy¡emFunùiÚIÁ”çû)(
š‹º®
);

2371 ifĞ
ÃwIÁ”çû
 == 0 )

2372  
	`CÚfigE¼Ü
(
asOUT_OF_MEMORY
, "Regi¡”ObjeùM‘hod", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş¬©iÚ
);

2374 
asCSütFunùiÚ
 *
func
 = 
	`asNEW
×sCSütFunùiÚ)(
this
, 0, 
asFUNC_SYSTEM
);

2375 ifĞ
func
 == 0 )

2377 
	`asDELETE
(
ÃwIÁ”çû
, 
asSSy¡emFunùiÚIÁ”çû
);

2378  
	`CÚfigE¼Ü
(
asOUT_OF_MEMORY
, "Regi¡”ObjeùM‘hod", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş¬©iÚ
);

2381 
func
->
sysFuncIÁf
 = 
ÃwIÁ”çû
;

2382 
func
->
objeùTy³
 = objectType;

2384 
asCBud”
 
	`bld
(
this
, 0);

2385 
r
 = 
bld
.
	`P¬£FunùiÚDeş¬©iÚ
(
func
->
objeùTy³
, 
deş¬©iÚ
, func, 
Œue
, &
ÃwIÁ”çû
->
·¿mAutoHªdËs
, &ÃwIÁ”çû->
»tuºAutoHªdË
);

2386 ifĞ
r
 < 0 )

2389 
func
->
funcTy³
 = 
asFUNC_DUMMY
;

2390 
	`asDELETE
(
func
,
asCSütFunùiÚ
);

2391  
	`CÚfigE¼Ü
(
asINVALID_DECLARATION
, "Regi¡”ObjeùM‘hod", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş¬©iÚ
);

2395 
r
 = 
bld
.
	`CheckNameCÚæiùMemb”
(
objeùTy³
, 
func
->
Çme
.
	`Add»ssOf
(), 0, 0, 
çl£
);

2396 ifĞ
r
 < 0 )

2398 
	`asDELETE
(
func
,
asCSütFunùiÚ
);

2399  
	`CÚfigE¼Ü
(
asNAME_TAKEN
, "Regi¡”ObjeùM‘hod", 
objeùTy³
->
Çme
.
	`Add»ssOf
(), 
deş¬©iÚ
);

2402 
func
->
id
 = 
	`G‘NextSütFunùiÚId
();

2403 
func
->
objeùTy³
->
m‘hods
.
	`PushLa¡
(func->
id
);

2404 
func
->
acûssMask
 = 
deçuÉAcûssMask
;

2405 
	`S‘SütFunùiÚ
(
func
);

2409 ifĞ
func
->
»tuºTy³
.
	`G‘ObjeùTy³
() )

2411 
asCCÚfigGroup
 *
group
 = 
	`FšdCÚfigGroupFÜObjeùTy³
(
func
->
»tuºTy³
.
	`G‘ObjeùTy³
());

2412 
cu¼’tGroup
->
	`RefCÚfigGroup
(
group
);

2414  
asUINT
 
n
 = 0;‚ < 
func
->
·¿m‘”Ty³s
.
	`G‘L’gth
();‚++ )

2416 ifĞ
func
->
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
() )

2418 
asCCÚfigGroup
 *
group
 = 
	`FšdCÚfigGroupFÜObjeùTy³
(
func
->
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
());

2419 
cu¼’tGroup
->
	`RefCÚfigGroup
(
group
);

2424 ifĞ
func
->
objeùTy³
->
æags
 & 
asOBJ_TEMPLATE
 )

2426 ifĞ
func
->
»tuºTy³
.
	`G‘ObjeùTy³
(è=ğfunc->
objeùTy³
->
‹m¶©eSubTy³
.GetObjectType() )

2428 ifĞ
func
->
»tuºTy³
.
	`IsObjeùHªdË
() )

2429 
func
->
objeùTy³
->
acû±V®ueSubTy³
 = 
çl£
;

2430 ifĞ!
func
->
»tuºTy³
.
	`IsReã»nû
() )

2431 
func
->
objeùTy³
->
acû±RefSubTy³
 = 
çl£
;

2434  
asUINT
 
n
 = 0;‚ < 
func
->
·¿m‘”Ty³s
.
	`G‘L’gth
();‚++ )

2436 ifĞ
func
->
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
(è=ğfunc->
objeùTy³
->
‹m¶©eSubTy³
.GetObjectType() )

2439 ifĞ
func
->
·¿m‘”Ty³s
[
n
].
	`IsObjeùHªdË
(è|| (func->·¿m‘”Ty³s[n].
	`IsReã»nû
(è&& func->
šOutFÏgs
[n] =ğ
asTM_INOUTREF
) )

2440 
func
->
objeùTy³
->
acû±V®ueSubTy³
 = 
çl£
;

2441 ifĞ!
func
->
·¿m‘”Ty³s
[
n
].
	`IsReã»nû
() )

2442 
func
->
objeùTy³
->
acû±RefSubTy³
 = 
çl£
;

2449 ifĞ
func
->
Çme
 =ğ"İAssign" && func->
·¿m‘”Ty³s
.
	`G‘L’gth
(è=ğ1 && func->
isR—dOÆy
 =ğ
çl£
 &&

2450 (
objeùTy³
->
æags
 & 
asOBJ_SCRIPT_OBJECT
 || 
func
->
·¿m‘”Ty³s
[0].
	`IsEqu®Exû±RefAndCÚ¡
(
asCD©aTy³
::
	`C»©eObjeù
(func->objeùTy³, 
çl£
))) )

2452 
func
->
objeùTy³
->
beh
.
cİy
 = func->
id
;

2453 
func
->
	`AddRef
();

2457  
func
->
id
;

2458 
	}
}

2461 
asCSütEngše
::
	$Regi¡”Glob®FunùiÚ
(cÚ¡ *
deş¬©iÚ
, cÚ¡ 
asSFuncPŒ
 &
funcPoš‹r
, 
asDWORD
 
ÿÎCÚv
)

2463 
asSSy¡emFunùiÚIÁ”çû
 
š‹º®
;

2464 
r
 = 
	`D‘eùC®lšgCÚv’tiÚ
(
çl£
, 
funcPoš‹r
, 
ÿÎCÚv
, &
š‹º®
);

2465 ifĞ
r
 < 0 )

2466  
	`CÚfigE¼Ü
(
r
, "Regi¡”Glob®FunùiÚ", 
deş¬©iÚ
, 0);

2468 #ifdeà
AS_MAX_PORTABILITY


2469 ifĞ
ÿÎCÚv
 !ğ
asCALL_GENERIC
 )

2470  
	`CÚfigE¼Ü
(
asNOT_SUPPORTED
, "Regi¡”Glob®FunùiÚ", 
deş¬©iÚ
, 0);

2472 ifĞ
ÿÎCÚv
 !ğ
asCALL_CDECL
 &&

2473 
ÿÎCÚv
 !ğ
asCALL_STDCALL
 &&

2474 
ÿÎCÚv
 !ğ
asCALL_GENERIC
 )

2475  
	`CÚfigE¼Ü
(
asNOT_SUPPORTED
, "Regi¡”Glob®FunùiÚ", 
deş¬©iÚ
, 0);

2478 
isP»·»d
 = 
çl£
;

2481 
asSSy¡emFunùiÚIÁ”çû
 *
ÃwIÁ”çû
 = 
	`asNEW
×sSSy¡emFunùiÚIÁ”çû)(
š‹º®
);

2482 ifĞ
ÃwIÁ”çû
 == 0 )

2483  
	`CÚfigE¼Ü
(
asOUT_OF_MEMORY
, "Regi¡”Glob®FunùiÚ", 
deş¬©iÚ
, 0);

2485 
asCSütFunùiÚ
 *
func
 = 
	`asNEW
×sCSütFunùiÚ)(
this
, 0, 
asFUNC_SYSTEM
);

2486 ifĞ
func
 == 0 )

2488 
	`asDELETE
(
ÃwIÁ”çû
, 
asSSy¡emFunùiÚIÁ”çû
);

2489  
	`CÚfigE¼Ü
(
asOUT_OF_MEMORY
, "Regi¡”Glob®FunùiÚ", 
deş¬©iÚ
, 0);

2492 
func
->
sysFuncIÁf
 = 
ÃwIÁ”çû
;

2494 
asCBud”
 
	`bld
(
this
, 0);

2495 
r
 = 
bld
.
	`P¬£FunùiÚDeş¬©iÚ
(0, 
deş¬©iÚ
, 
func
, 
Œue
, &
ÃwIÁ”çû
->
·¿mAutoHªdËs
, &ÃwIÁ”çû->
»tuºAutoHªdË
, 
deçuÉName¥aû
);

2496 ifĞ
r
 < 0 )

2499 
func
->
funcTy³
 = 
asFUNC_DUMMY
;

2500 
	`asDELETE
(
func
,
asCSütFunùiÚ
);

2501  
	`CÚfigE¼Ü
(
asINVALID_DECLARATION
, "Regi¡”Glob®FunùiÚ", 
deş¬©iÚ
, 0);

2505 
func
->
ÇmeS·û
 = 
deçuÉName¥aû
;

2508 
r
 = 
bld
.
	`CheckNameCÚæiù
(
func
->
Çme
.
	`Add»ssOf
(), 0, 0, 
deçuÉName¥aû
);

2509 ifĞ
r
 < 0 )

2511 
	`asDELETE
(
func
,
asCSütFunùiÚ
);

2512  
	`CÚfigE¼Ü
(
asNAME_TAKEN
, "Regi¡”Glob®FunùiÚ", 
deş¬©iÚ
, 0);

2515 
func
->
id
 = 
	`G‘NextSütFunùiÚId
();

2516 
	`S‘SütFunùiÚ
(
func
);

2518 
cu¼’tGroup
->
sütFunùiÚs
.
	`PushLa¡
(
func
);

2519 
func
->
acûssMask
 = 
deçuÉAcûssMask
;

2520 
»gi¡”edGlob®Funcs
.
	`PushLa¡
(
func
);

2523 ifĞ
func
->
»tuºTy³
.
	`G‘ObjeùTy³
() )

2525 
asCCÚfigGroup
 *
group
 = 
	`FšdCÚfigGroupFÜObjeùTy³
(
func
->
»tuºTy³
.
	`G‘ObjeùTy³
());

2526 
cu¼’tGroup
->
	`RefCÚfigGroup
(
group
);

2528  
asUINT
 
n
 = 0;‚ < 
func
->
·¿m‘”Ty³s
.
	`G‘L’gth
();‚++ )

2530 ifĞ
func
->
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
() )

2532 
asCCÚfigGroup
 *
group
 = 
	`FšdCÚfigGroupFÜObjeùTy³
(
func
->
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
());

2533 
cu¼’tGroup
->
	`RefCÚfigGroup
(
group
);

2538  
func
->
id
;

2539 
	}
}

2542 
asUINT
 
asCSütEngše
::
	$G‘Glob®FunùiÚCouÁ
() const

2544  
	`asUINT
(
»gi¡”edGlob®Funcs
.
	`G‘L’gth
());

2545 
	}
}

2547 #ifdeà
AS_DEPRECATED


2550 
asCSütEngše
::
	$G‘Glob®FunùiÚIdByIndex
(
asUINT
 
šdex
) const

2552 ifĞ
šdex
 >ğ
»gi¡”edGlob®Funcs
.
	`G‘L’gth
() )

2553  
asINVALID_ARG
;

2555  
»gi¡”edGlob®Funcs
[
šdex
]->
id
;

2556 
	}
}

2560 
asISütFunùiÚ
 *
asCSütEngše
::
	$G‘Glob®FunùiÚByIndex
(
asUINT
 
šdex
) const

2562 ifĞ
šdex
 >ğ
»gi¡”edGlob®Funcs
.
	`G‘L’gth
() )

2565  
»gi¡”edGlob®Funcs
[
šdex
];

2566 
	}
}

2569 
asISütFunùiÚ
 *
asCSütEngše
::
	$G‘Glob®FunùiÚByDeş
(cÚ¡ *
deş
) const

2571 
asCBud”
 
	`bld
(
cÚ¡_ÿ¡
<
asCSütEngše
*>(
this
), 0);

2573 
asCSütFunùiÚ
 
	`func
(
cÚ¡_ÿ¡
<
asCSütEngše
*>(
this
), 0, 
asFUNC_DUMMY
);

2574 
r
 = 
bld
.
	`P¬£FunùiÚDeş¬©iÚ
(0, 
deş
, &
func
, 
çl£
, 0, 0, 
deçuÉName¥aû
);

2575 ifĞ
r
 < 0 )

2580 
id
 = -1;

2581  
size_t
 
n
 = 0;‚ < 
»gi¡”edGlob®Funcs
.
	`G‘L’gth
(); ++n )

2583 ifĞ
»gi¡”edGlob®Funcs
[
n
]->
objeùTy³
 == 0 &&

2584 
func
.
Çme
 =ğ
»gi¡”edGlob®Funcs
[
n
]->name &&

2585 
func
.
»tuºTy³
 =ğ
»gi¡”edGlob®Funcs
[
n
]->returnType &&

2586 
func
.
·¿m‘”Ty³s
.
	`G‘L’gth
(è=ğ
»gi¡”edGlob®Funcs
[
n
]->parameterTypes.GetLength() )

2588 
boŞ
 
m©ch
 = 
Œue
;

2589  
size_t
 
p
 = 0;… < 
func
.
·¿m‘”Ty³s
.
	`G‘L’gth
(); ++p )

2591 ifĞ
func
.
·¿m‘”Ty³s
[
p
] !ğ
»gi¡”edGlob®Funcs
[
n
]->parameterTypes[p] )

2593 
m©ch
 = 
çl£
;

2598 ifĞ
m©ch
 )

2600 ifĞ
id
 == -1 )

2601 
id
 = 
»gi¡”edGlob®Funcs
[
n
]->id;

2608 ifĞ
id
 < 0 )  0;

2610  
sütFunùiÚs
[
id
];

2611 
	}
}

2614 
asCObjeùTy³
 *
asCSütEngše
::
	$G‘ObjeùTy³
(cÚ¡ *
ty³
, 
asSNameS·û
 *
ns
)

2617  
asUINT
 
n
 = 0;‚ < 
objeùTy³s
.
	`G‘L’gth
();‚++ )

2618 ifĞ
objeùTy³s
[
n
] &&

2619 
objeùTy³s
[
n
]->
Çme
 =ğ
ty³
 &&

2620 
objeùTy³s
[
n
]->
ÇmeS·û
 =ğ
ns
 )

2621  
objeùTy³s
[
n
];

2624 
	}
}

2629 
asCSütEngše
::
	$P»·»Engše
()

2631 ifĞ
isP»·»d
 ) ;

2632 ifĞ
cÚfigFaed
 ) ;

2634 
asUINT
 
n
;

2635  
n
 = 0;‚ < 
sütFunùiÚs
.
	`G‘L’gth
();‚++ )

2638 ifĞ
sütFunùiÚs
[
n
] && sütFunùiÚs[n]->
funcTy³
 =ğ
asFUNC_SYSTEM
 )

2640 ifĞ
sütFunùiÚs
[
n
]->
sysFuncIÁf
->
ÿÎCÚv
 =ğ
ICC_GENERIC_FUNC
 ||

2641 
sütFunùiÚs
[
n
]->
sysFuncIÁf
->
ÿÎCÚv
 =ğ
ICC_GENERIC_METHOD
 )

2642 
	`P»·»Sy¡emFunùiÚG’”ic
(
sütFunùiÚs
[
n
], sütFunùiÚs[n]->
sysFuncIÁf
, 
this
);

2644 
	`P»·»Sy¡emFunùiÚ
(
sütFunùiÚs
[
n
], sütFunùiÚs[n]->
sysFuncIÁf
, 
this
);

2649  
n
 = 0;‚ < 
objeùTy³s
.
	`G‘L’gth
();‚++ )

2651 ifĞ
objeùTy³s
[
n
] && !(objeùTy³s[n]->
æags
 & 
asOBJ_SCRIPT_OBJECT
) )

2653 
boŞ
 
missšgBehaviour
 = 
çl£
;

2654 cÚ¡ *
šfoMsg
 = 0;

2657 ifĞ
objeùTy³s
[
n
]->
æags
 & 
asOBJ_GC
 )

2659 ifĞ
objeùTy³s
[
n
]->
beh
.
add»f
 == 0 ||

2660 
objeùTy³s
[
n
]->
beh
.
»Ëa£
 == 0 ||

2661 
objeùTy³s
[
n
]->
beh
.
gcG‘RefCouÁ
 == 0 ||

2662 
objeùTy³s
[
n
]->
beh
.
gcS‘FÏg
 == 0 ||

2663 
objeùTy³s
[
n
]->
beh
.
gcG‘FÏg
 == 0 ||

2664 
objeùTy³s
[
n
]->
beh
.
gcEnumReã»nûs
 == 0 ||

2665 
objeùTy³s
[
n
]->
beh
.
gcR–—£AÎReã»nûs
 == 0 )

2667 
šfoMsg
 = 
TXT_GC_REQUIRE_ADD_REL_GC_BEHAVIOUR
;

2668 
missšgBehaviour
 = 
Œue
;

2672 ifĞ
objeùTy³s
[
n
]->
æags
 & 
asOBJ_SCOPED
 )

2674 ifĞ
objeùTy³s
[
n
]->
beh
.
»Ëa£
 == 0 )

2676 
šfoMsg
 = 
TXT_SCOPE_REQUIRE_REL_BEHAVIOUR
;

2677 
missšgBehaviour
 = 
Œue
;

2681 ifĞ(
objeùTy³s
[
n
]->
æags
 & 
asOBJ_REF
) &&

2682 !(
objeùTy³s
[
n
]->
æags
 & 
asOBJ_NOHANDLE
) &&

2683 !(
objeùTy³s
[
n
]->
æags
 & 
asOBJ_NOCOUNT
) )

2685 ifĞ
objeùTy³s
[
n
]->
beh
.
add»f
 == 0 ||

2686 
objeùTy³s
[
n
]->
beh
.
»Ëa£
 == 0 )

2688 
šfoMsg
 = 
TXT_REF_REQUIRE_ADD_REL_BEHAVIOUR
;

2689 
missšgBehaviour
 = 
Œue
;

2693 ifĞ(
objeùTy³s
[
n
]->
æags
 & 
asOBJ_VALUE
) &&

2694 !(
objeùTy³s
[
n
]->
æags
 & 
asOBJ_POD
) )

2696 ifĞ
objeùTy³s
[
n
]->
beh
.
cÚ¡ruù
 == 0 ||

2697 
objeùTy³s
[
n
]->
beh
.
de¡ruù
 == 0 )

2699 
šfoMsg
 = 
TXT_NON_POD_REQUIRE_CONSTR_DESTR_BEHAVIOUR
;

2700 
missšgBehaviour
 = 
Œue
;

2704 ifĞ
missšgBehaviour
 )

2706 
asCSŒšg
 
¡r
;

2707 
¡r
.
	`FÜm©
(
TXT_TYPE_s_IS_MISSING_BEHAVIOURS
, 
objeùTy³s
[
n
]->
Çme
.
	`Add»ssOf
());

2708 
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_ERROR
, 
¡r
.
	`Add»ssOf
());

2709 
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_INFORMATION
, 
šfoMsg
);

2710 
	`CÚfigE¼Ü
(
asINVALID_CONFIGURATION
, 0, 0, 0);

2715 
isP»·»d
 = 
Œue
;

2716 
	}
}

2718 
asCSütEngše
::
	$CÚfigE¼Ü
(
”r
, cÚ¡ *
funcName
, cÚ¡ *
¬g1
, cÚ¡ *
¬g2
)

2720 
cÚfigFaed
 = 
Œue
;

2721 ifĞ
funcName
 )

2723 
asCSŒšg
 
¡r
;

2724 ifĞ
¬g1
 )

2726 ifĞ
¬g2
 )

2727 
¡r
.
	`FÜm©
(
TXT_FAILED_IN_FUNC_s_WITH_s_AND_s
, 
funcName
, 
¬g1
, 
¬g2
);

2729 
¡r
.
	`FÜm©
(
TXT_FAILED_IN_FUNC_s_WITH_s
, 
funcName
, 
¬g1
);

2732 
¡r
.
	`FÜm©
(
TXT_FAILED_IN_FUNC_s
, 
funcName
);

2734 
	`Wr™eMes§ge
("", 0, 0, 
asMSGTYPE_ERROR
, 
¡r
.
	`Add»ssOf
());

2736  
”r
;

2737 
	}
}

2740 
asCSütEngše
::
	$Regi¡”DeçuÉA¼ayTy³
(cÚ¡ *
ty³
)

2742 
asCBud”
 
	`bld
(
this
, 0);

2743 
asCD©aTy³
 
dt
;

2744 
r
 = 
bld
.
	`P¬£D©aTy³
(
ty³
, &
dt
, 
deçuÉName¥aû
);

2745 ifĞ
r
 < 0 ) „;

2747 ifĞ
dt
.
	`G‘ObjeùTy³
() == 0 ||

2748 !(
dt
.
	`G‘ObjeùTy³
()->
	`G‘FÏgs
(è& 
asOBJ_TEMPLATE
) )

2749  
asINVALID_TYPE
;

2751 
deçuÉA¼ayObjeùTy³
 = 
dt
.
	`G‘ObjeùTy³
();

2752 
deçuÉA¼ayObjeùTy³
->
	`AddRef
();

2755 
	}
}

2758 
asCSütEngše
::
	$G‘DeçuÉA¼ayTy³Id
() const

2760 ifĞ
deçuÉA¼ayObjeùTy³
 )

2761  
	`G‘Ty³IdFromD©aTy³
(
asCD©aTy³
::
	`C»©eObjeù
(
deçuÉA¼ayObjeùTy³
, 
çl£
));

2763  
asINVALID_TYPE
;

2764 
	}
}

2767 
asCSütEngše
::
	$Regi¡”SŒšgFaùÜy
(cÚ¡ *
d©©y³
, cÚ¡ 
asSFuncPŒ
 &
funcPoš‹r
, 
asDWORD
 
ÿÎCÚv
)

2769 
asSSy¡emFunùiÚIÁ”çû
 
š‹º®
;

2770 
r
 = 
	`D‘eùC®lšgCÚv’tiÚ
(
çl£
, 
funcPoš‹r
, 
ÿÎCÚv
, &
š‹º®
);

2771 ifĞ
r
 < 0 )

2772  
	`CÚfigE¼Ü
(
r
, "Regi¡”SŒšgFaùÜy", 
d©©y³
, 0);

2774 #ifdeà
AS_MAX_PORTABILITY


2775 ifĞ
ÿÎCÚv
 !ğ
asCALL_GENERIC
 )

2776  
	`CÚfigE¼Ü
(
asNOT_SUPPORTED
, "Regi¡”SŒšgFaùÜy", 
d©©y³
, 0);

2778 ifĞ
ÿÎCÚv
 !ğ
asCALL_CDECL
 &&

2779 
ÿÎCÚv
 !ğ
asCALL_STDCALL
 &&

2780 
ÿÎCÚv
 !ğ
asCALL_GENERIC
 )

2781  
	`CÚfigE¼Ü
(
asNOT_SUPPORTED
, "Regi¡”SŒšgFaùÜy", 
d©©y³
, 0);

2785 
asSSy¡emFunùiÚIÁ”çû
 *
ÃwIÁ”çû
 = 
	`asNEW
×sSSy¡emFunùiÚIÁ”çû)(
š‹º®
);

2786 ifĞ
ÃwIÁ”çû
 == 0 )

2787  
	`CÚfigE¼Ü
(
asOUT_OF_MEMORY
, "Regi¡”SŒšgFaùÜy", 
d©©y³
, 0);

2789 
asCSütFunùiÚ
 *
func
 = 
	`asNEW
×sCSütFunùiÚ)(
this
, 0, 
asFUNC_SYSTEM
);

2790 ifĞ
func
 == 0 )

2792 
	`asDELETE
(
ÃwIÁ”çû
, 
asSSy¡emFunùiÚIÁ”çû
);

2793  
	`CÚfigE¼Ü
(
asOUT_OF_MEMORY
, "Regi¡”SŒšgFaùÜy", 
d©©y³
, 0);

2796 
func
->
Çme
 = "_string_factory_";

2797 
func
->
sysFuncIÁf
 = 
ÃwIÁ”çû
;

2799 
asCBud”
 
	`bld
(
this
, 0);

2801 
asCD©aTy³
 
dt
;

2802 
r
 = 
bld
.
	`P¬£D©aTy³
(
d©©y³
, &
dt
, 
deçuÉName¥aû
, 
Œue
);

2803 ifĞ
r
 < 0 )

2806 
func
->
funcTy³
 = 
asFUNC_DUMMY
;

2807 
	`asDELETE
(
func
,
asCSütFunùiÚ
);

2808  
	`CÚfigE¼Ü
(
asINVALID_TYPE
, "Regi¡”SŒšgFaùÜy", 
d©©y³
, 0);

2811 
func
->
»tuºTy³
 = 
dt
;

2812 
func
->
·¿m‘”Ty³s
.
	`PushLa¡
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ
, 
Œue
));

2813 
asCD©aTy³
 
·rm1
 =‡sCD©aTy³::
	`C»©ePrim™ive
(
‰UIÁ8
, 
Œue
);

2814 
·rm1
.
	`MakeReã»nû
(
Œue
);

2815 
func
->
·¿m‘”Ty³s
.
	`PushLa¡
(
·rm1
);

2816 
func
->
id
 = 
	`G‘NextSütFunùiÚId
();

2817 
	`S‘SütFunùiÚ
(
func
);

2819 
¡ršgFaùÜy
 = 
func
;

2821 ifĞ
func
->
»tuºTy³
.
	`G‘ObjeùTy³
() )

2823 
asCCÚfigGroup
 *
group
 = 
	`FšdCÚfigGroupFÜObjeùTy³
(
func
->
»tuºTy³
.
	`G‘ObjeùTy³
());

2824 ifĞ
group
 =ğ0 ) grou°ğ&
deçuÉGroup
;

2825 
group
->
sütFunùiÚs
.
	`PushLa¡
(
func
);

2829  
func
->
id
;

2830 
	}
}

2833 
asCSütEngše
::
	$G‘SŒšgFaùÜyR‘uºTy³Id
() const

2835 ifĞ
¡ršgFaùÜy
 == 0 )

2836  
asNO_FUNCTION
;

2838  
	`G‘Ty³IdFromD©aTy³
(
¡ršgFaùÜy
->
»tuºTy³
);

2839 
	}
}

2842 
asCModuË
 *
asCSütEngše
::
	$G‘ModuË
(cÚ¡ *
_Çme
, 
boŞ
 
ü—‹
)

2845 cÚ¡ *
Çme
 = "";

2846 ifĞ
_Çme
 !ğ0 ) 
Çme
 = _name;

2848 ifĞ
Ï¡ModuË
 &&†a¡ModuË->
Çme
 ==‚ame )

2849  
Ï¡ModuË
;

2852  
asUINT
 
n
 = 0;‚ < 
sütModuËs
.
	`G‘L’gth
(); ++n )

2853 ifĞ
sütModuËs
[
n
] && sütModuËs[n]->
Çme
 ==‚ame )

2855 
Ï¡ModuË
 = 
sütModuËs
[
n
];

2856  
Ï¡ModuË
;

2859 ifĞ
ü—‹
 )

2861 
asCModuË
 *
moduË
 = 
	`asNEW
×sCModuË)(
Çme
, 
this
);

2862 ifĞ
moduË
 == 0 )

2868 
sütModuËs
.
	`PushLa¡
(
moduË
);

2870 
Ï¡ModuË
 = 
moduË
;

2872  
Ï¡ModuË
;

2876 
	}
}

2878 
asCModuË
 *
asCSütEngše
::
	$G‘ModuËFromFuncId
(
id
)

2880 ifĞ
id
 < 0 )  0;

2881 ifĞ
id
 >ğ()
sütFunùiÚs
.
	`G‘L’gth
() )  0;

2882 
asCSütFunùiÚ
 *
func
 = 
sütFunùiÚs
[
id
];

2883 ifĞ
func
 == 0 )  0;

2884  
func
->
moduË
;

2885 
	}
}

2888 
asCSütEngše
::
	$Reque¡Bud
()

2890 
	`ACQUIREEXCLUSIVE
(
’gšeRWLock
);

2891 ifĞ
isBudšg
 )

2893 
	`RELEASEEXCLUSIVE
(
’gšeRWLock
);

2894  
asBUILD_IN_PROGRESS
;

2896 
isBudšg
 = 
Œue
;

2897 
	`RELEASEEXCLUSIVE
(
’gšeRWLock
);

2900 
	}
}

2903 
asCSütEngše
::
	$BudCom¶‘ed
()

2906 
memÜyMgr
.
	`F»eUnu£dMemÜy
();

2908 
isBudšg
 = 
çl£
;

2909 
	}
}

2911 
asCSütEngše
::
	$RemoveTem¶©eIn¡ªûTy³
(
asCObjeùTy³
 *
t
)

2913 
n
;

2916  
n
 = 0;‚ < ()
t
->
beh
.
çùÜ›s
.
	`G‘L’gth
();‚++ )

2919 
sütFunùiÚs
[
t
->
beh
.
çùÜ›s
[
n
]]->
	`R–—£AÎHªdËs
(
this
);

2920 
sütFunùiÚs
[
t
->
beh
.
çùÜ›s
[
n
]]->
	`R–—£
();

2922 
t
->
beh
.
çùÜ›s
.
	`S‘L’gth
(0);

2925 ifĞ
t
->
beh
.
li¡FaùÜy
 )

2927 
sütFunùiÚs
[
t
->
beh
.
li¡FaùÜy
]->
	`R–—£AÎHªdËs
(
this
);

2928 
sütFunùiÚs
[
t
->
beh
.
li¡FaùÜy
]->
	`R–—£
();

2929 
t
->
beh
.
li¡FaùÜy
 = 0;

2933  
n
 = 1;‚ < ()
t
->
beh
.
İ”©Üs
.
	`G‘L’gth
();‚ += 2 )

2935 ifĞ
t
->
beh
.
İ”©Üs
[
n
] && 
sütFunùiÚs
[t->beh.İ”©Üs[n]]->
objeùTy³
 == )

2937 
sütFunùiÚs
[
t
->
beh
.
İ”©Üs
[
n
]]->
	`R–—£
();

2940 
t
->
beh
.
İ”©Üs
.
	`S‘L’gth
(0);

2944  
n
 = ()
‹m¶©eTy³s
.
	`G‘L’gth
()-1;‚ >= 0;‚-- )

2946 ifĞ
‹m¶©eTy³s
[
n
] =ğ
t
 )

2948 ifĞ
n
 =ğ(sigÃd)
‹m¶©eTy³s
.
	`G‘L’gth
()-1 )

2949 
‹m¶©eTy³s
.
	`PİLa¡
();

2951 
‹m¶©eTy³s
[
n
] =em¶©eTy³s.
	`PİLa¡
();

2955  
n
 = ()
‹m¶©eIn¡ªûTy³s
.
	`G‘L’gth
()-1;‚ >= 0;‚-- )

2957 ifĞ
‹m¶©eIn¡ªûTy³s
[
n
] =ğ
t
 )

2959 ifĞ
n
 =ğ(sigÃd)
‹m¶©eIn¡ªûTy³s
.
	`G‘L’gth
()-1 )

2960 
‹m¶©eIn¡ªûTy³s
.
	`PİLa¡
();

2962 
‹m¶©eIn¡ªûTy³s
[
n
] =em¶©eIn¡ªûTy³s.
	`PİLa¡
();

2966 
	`asDELETE
(
t
,
asCObjeùTy³
);

2967 
	}
}

2970 
asCObjeùTy³
 *
asCSütEngše
::
	$G‘Tem¶©eIn¡ªûTy³
(
asCObjeùTy³
 *
‹m¶©eTy³
, 
asCD©aTy³
 &
subTy³
)

2972 
asUINT
 
n
;

2975  
n
 = 0;‚ < 
‹m¶©eTy³s
.
	`G‘L’gth
();‚++ )

2977 ifĞ
‹m¶©eTy³s
[
n
] &&

2978 
‹m¶©eTy³s
[
n
]->
Çme
 =ğ
‹m¶©eTy³
->name &&

2979 
‹m¶©eTy³s
[
n
]->
‹m¶©eSubTy³
 =ğ
subTy³
 )

2980  
‹m¶©eTy³s
[
n
];

2986 ifĞ
‹m¶©eTy³
->
beh
.
çùÜ›s
.
	`G‘L’gth
() == 0 )

2990 ifĞ!
‹m¶©eTy³
->
acû±V®ueSubTy³
 && (
subTy³
.
	`IsPrim™ive
(è|| (subTy³.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_VALUE
)) )

2993 ifĞ!
‹m¶©eTy³
->
acû±RefSubTy³
 && (
subTy³
.
	`IsObjeù
(è&& (subTy³.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_REF
)) )

2997 
asCObjeùTy³
 *
Ù
 = 
	`asNEW
×sCObjeùTy³)(
this
);

2998 ifĞ
Ù
 == 0 )

3004 
Ù
->
‹m¶©eSubTy³
 = 
subTy³
;

3005 
Ù
->
æags
 = 
‹m¶©eTy³
->flags;

3006 
Ù
->
size
 = 
‹m¶©eTy³
->size;

3007 
Ù
->
Çme
 = 
‹m¶©eTy³
->name;

3010 ifĞ
‹m¶©eTy³
->
beh
.
‹m¶©eC®lback
 )

3012 
asCSütFunùiÚ
 *
ÿÎback
 = 
sütFunùiÚs
[
‹m¶©eTy³
->
beh
.
‹m¶©eC®lback
];

3013 ifĞ!
deãrV®id©iÚOfTem¶©eTy³s
 && !
	`C®lGlob®FunùiÚR‘BoŞ
(
Ù
, 0, 
ÿÎback
->
sysFuncIÁf
, callback) )

3016 
Ù
->
‹m¶©eSubTy³
 = 
	`asCD©aTy³
();

3017 
	`asDELETE
(
Ù
, 
asCObjeùTy³
);

3021 
Ù
->
beh
.
‹m¶©eC®lback
 = 
‹m¶©eTy³
->beh.templateCallback;

3022 
sütFunùiÚs
[
Ù
->
beh
.
‹m¶©eC®lback
]->
	`AddRef
();

3025 
Ù
->
m‘hods
 = 
‹m¶©eTy³
->methods;

3026  
n
 = 0;‚ < 
Ù
->
m‘hods
.
	`G‘L’gth
();‚++ )

3027 
sütFunùiÚs
[
Ù
->
m‘hods
[
n
]]->
	`AddRef
();

3031 
Ù
->
beh
.
cÚ¡ruù
 = 
‹m¶©eTy³
->beh.
çùÜy
;

3032 
Ù
->
beh
.
cÚ¡ruùÜs
 = 
‹m¶©eTy³
->beh.
çùÜ›s
;

3033  
n
 = 0;‚ < 
Ù
->
beh
.
cÚ¡ruùÜs
.
	`G‘L’gth
();‚++ )

3034 
sütFunùiÚs
[
Ù
->
beh
.
cÚ¡ruùÜs
[
n
]]->
	`AddRef
();

3037  
n
 = 0;‚ < 
‹m¶©eTy³
->
beh
.
çùÜ›s
.
	`G‘L’gth
();‚++ )

3039 
asCSütFunùiÚ
 *
func
 = 
	`G’”©eTem¶©eFaùÜyStub
(
‹m¶©eTy³
, 
Ù
,em¶©eTy³->
beh
.
çùÜ›s
[
n
]);

3042 
Ù
->
beh
.
çùÜ›s
.
	`PushLa¡
(
func
->
id
);

3045 ifĞ
Ù
->
beh
.
çùÜ›s
.
	`G‘L’gth
(è&& 
sütFunùiÚs
[Ù->beh.çùÜ›s[0]]->
·¿m‘”Ty³s
.GetLength() == 0 )

3046 
Ù
->
beh
.
çùÜy
 = ot->beh.
çùÜ›s
[0];

3048 
Ù
->
beh
.
çùÜy
 = 0;

3051 ifĞ
‹m¶©eTy³
->
beh
.
li¡FaùÜy
 )

3053 
asCSütFunùiÚ
 *
func
 = 
	`G’”©eTem¶©eFaùÜyStub
(
‹m¶©eTy³
, 
Ù
,em¶©eTy³->
beh
.
li¡FaùÜy
);

3056 
Ù
->
beh
.
li¡FaùÜy
 = 
func
->
id
;

3059 
Ù
->
beh
.
add»f
 = 
‹m¶©eTy³
->beh.addref;

3060 ifĞ
sütFunùiÚs
[
Ù
->
beh
.
add»f
] ) sütFunùiÚs[Ù->beh.add»f]->
	`AddRef
();

3061 
Ù
->
beh
.
»Ëa£
 = 
‹m¶©eTy³
->beh.release;

3062 ifĞ
sütFunùiÚs
[
Ù
->
beh
.
»Ëa£
] ) sütFunùiÚs[Ù->beh.»Ëa£]->
	`AddRef
();

3063 
Ù
->
beh
.
cİy
 = 
‹m¶©eTy³
->beh.copy;

3064 ifĞ
sütFunùiÚs
[
Ù
->
beh
.
cİy
] ) sütFunùiÚs[Ù->beh.cİy]->
	`AddRef
();

3065 
Ù
->
beh
.
İ”©Üs
 = 
‹m¶©eTy³
->beh.operators;

3066  
n
 = 1;‚ < 
Ù
->
beh
.
İ”©Üs
.
	`G‘L’gth
();‚ += 2 )

3068 
sütFunùiÚs
[
Ù
->
beh
.
İ”©Üs
[
n
]]->
	`AddRef
();

3070 
Ù
->
beh
.
gcG‘RefCouÁ
 = 
‹m¶©eTy³
->beh.gcGetRefCount;

3071 ifĞ
sütFunùiÚs
[
Ù
->
beh
.
gcG‘RefCouÁ
] ) sütFunùiÚs[Ù->beh.gcG‘RefCouÁ]->
	`AddRef
();

3072 
Ù
->
beh
.
gcS‘FÏg
 = 
‹m¶©eTy³
->beh.gcSetFlag;

3073 ifĞ
sütFunùiÚs
[
Ù
->
beh
.
gcS‘FÏg
] ) sütFunùiÚs[Ù->beh.gcS‘FÏg]->
	`AddRef
();

3074 
Ù
->
beh
.
gcG‘FÏg
 = 
‹m¶©eTy³
->beh.gcGetFlag;

3075 ifĞ
sütFunùiÚs
[
Ù
->
beh
.
gcG‘FÏg
] ) sütFunùiÚs[Ù->beh.gcG‘FÏg]->
	`AddRef
();

3076 
Ù
->
beh
.
gcEnumReã»nûs
 = 
‹m¶©eTy³
->beh.gcEnumReferences;

3077 ifĞ
sütFunùiÚs
[
Ù
->
beh
.
gcEnumReã»nûs
] ) sütFunùiÚs[Ù->beh.gcEnumReã»nûs]->
	`AddRef
();

3078 
Ù
->
beh
.
gcR–—£AÎReã»nûs
 = 
‹m¶©eTy³
->beh.gcReleaseAllReferences;

3079 ifĞ
sütFunùiÚs
[
Ù
->
beh
.
gcR–—£AÎReã»nûs
] ) sütFunùiÚs[Ù->beh.gcR–—£AÎReã»nûs]->
	`AddRef
();

3083  
n
 = 1;‚ < 
Ù
->
beh
.
İ”©Üs
.
	`G‘L’gth
();‚ += 2 )

3085 
funcId
 = 
Ù
->
beh
.
İ”©Üs
[
n
];

3086 
asCSütFunùiÚ
 *
func
 = 
sütFunùiÚs
[
funcId
];

3088 ifĞ
	`G’”©eNewTem¶©eFunùiÚ
(
‹m¶©eTy³
, 
Ù
, 
subTy³
, 
func
, &func) )

3091 
sütFunùiÚs
[
Ù
->
beh
.
İ”©Üs
[
n
]]->
	`R–—£
();

3092 
Ù
->
beh
.
İ”©Üs
[
n
] = 
func
->
id
;

3098  
n
 = 0;‚ < 
Ù
->
m‘hods
.
	`G‘L’gth
();‚++ )

3100 
funcId
 = 
Ù
->
m‘hods
[
n
];

3101 
asCSütFunùiÚ
 *
func
 = 
sütFunùiÚs
[
funcId
];

3103 ifĞ
	`G’”©eNewTem¶©eFunùiÚ
(
‹m¶©eTy³
, 
Ù
, 
subTy³
, 
func
, &func) )

3106 
sütFunùiÚs
[
Ù
->
m‘hods
[
n
]]->
	`R–—£
();

3107 
Ù
->
m‘hods
[
n
] = 
func
->
id
;

3112 ifĞ
Ù
->
‹m¶©eSubTy³
.
	`G‘ObjeùTy³
(èèÙ->‹m¶©eSubTy³.G‘ObjeùTy³()->
	`AddRef
();

3116 ifĞ
Ù
->
‹m¶©eSubTy³
.
	`IsObjeùHªdË
(è|| (Ù->‹m¶©eSubTy³.
	`G‘ObjeùTy³
(è&& (Ù->‹m¶©eSubTy³.G‘ObjeùTy³()->
æags
 & 
asOBJ_GC
)) )

3117 
Ù
->
æags
 |ğ
asOBJ_GC
;

3119 
‹m¶©eTy³s
.
	`PushLa¡
(
Ù
);

3123 
‹m¶©eIn¡ªûTy³s
.
	`PushLa¡
(
Ù
);

3125  
Ù
;

3126 
	}
}

3129 
asCSütFunùiÚ
 *
asCSütEngše
::
	$G’”©eTem¶©eFaùÜyStub
(
asCObjeùTy³
 *
‹m¶©eTy³
,‡sCObjeùTy³ *
Ù
, 
çùÜyId
)

3131 
asCSütFunùiÚ
 *
çùÜy
 = 
sütFunùiÚs
[
çùÜyId
];

3133 
asCSütFunùiÚ
 *
func
 = 
	`asNEW
×sCSütFunùiÚ)(
this
, 0, 
asFUNC_SCRIPT
);

3134 ifĞ
func
 == 0 )

3140 
func
->
Çme
 = "factstub";

3141 
func
->
id
 = 
	`G‘NextSütFunùiÚId
();

3142 
func
->
»tuºTy³
 = 
asCD©aTy³
::
	`C»©eObjeùHªdË
(
Ù
, 
çl£
);

3143 
func
->
isSh¬ed
 = 
Œue
;

3146 
func
->
·¿m‘”Ty³s
.
	`S‘L’gth
(
çùÜy
->·¿m‘”Ty³s.
	`G‘L’gth
()-1);

3147 
func
->
šOutFÏgs
.
	`S‘L’gth
(
çùÜy
->šOutFÏgs.
	`G‘L’gth
()-1);

3148  
asUINT
 
p
 = 1;… < 
çùÜy
->
·¿m‘”Ty³s
.
	`G‘L’gth
();…++ )

3150 ifĞ
çùÜy
->
·¿m‘”Ty³s
[
p
].
	`G‘ObjeùTy³
(è=ğ
‹m¶©eTy³
->
‹m¶©eSubTy³
.GetObjectType() )

3152 
func
->
·¿m‘”Ty³s
[
p
-1] = 
Ù
->
‹m¶©eSubTy³
;

3153 ifĞ
çùÜy
->
·¿m‘”Ty³s
[
p
].
	`IsObjeùHªdË
() )

3154 
func
->
·¿m‘”Ty³s
[
p
-1].
	`MakeHªdË
(
Œue
);

3155 
func
->
·¿m‘”Ty³s
[
p
-1].
	`MakeReã»nû
(
çùÜy
->·¿m‘”Ty³s[p].
	`IsReã»nû
());

3156 
func
->
·¿m‘”Ty³s
[
p
-1].
	`MakeR—dOÆy
(
çùÜy
->·¿m‘”Ty³s[p].
	`IsReã»nû
());

3158 ifĞ
çùÜy
->
·¿m‘”Ty³s
[
p
].
	`G‘ObjeùTy³
(è=ğ
‹m¶©eTy³
 )

3160 ifĞ
çùÜy
->
·¿m‘”Ty³s
[
p
].
	`IsObjeùHªdË
() )

3161 
func
->
·¿m‘”Ty³s
[
p
-1] = 
asCD©aTy³
::
	`C»©eObjeùHªdË
(
Ù
, 
çl£
);

3163 
func
->
·¿m‘”Ty³s
[
p
-1] = 
asCD©aTy³
::
	`C»©eObjeù
(
Ù
, 
çl£
);

3165 
func
->
·¿m‘”Ty³s
[
p
-1].
	`MakeReã»nû
(
çùÜy
->·¿m‘”Ty³s[p].
	`IsReã»nû
());

3166 
func
->
·¿m‘”Ty³s
[
p
-1].
	`MakeR—dOÆy
(
çùÜy
->·¿m‘”Ty³s[p].
	`IsR—dOÆy
());

3170 
func
->
·¿m‘”Ty³s
[
p
-1] = 
çùÜy
->parameterTypes[p];

3172 
func
->
šOutFÏgs
[
p
-1] = 
çùÜy
->inOutFlags[p];

3174 
func
->
objV¬ŸbËsOnH—p
 = 0;

3176 
	`S‘SütFunùiÚ
(
func
);

3179 
asUINT
 
bcL’gth
 = 
asBCTy³Size
[
asBCInfo
[
asBC_OBJTYPE
].
ty³
] +

3180 
asBCTy³Size
[
asBCInfo
[
asBC_CALLSYS
].
ty³
] +

3181 
asBCTy³Size
[
asBCInfo
[
asBC_RET
].
ty³
];

3183 ifĞ
•
.
šşudeJ™In¡ruùiÚs
 )

3184 
bcL’gth
 +ğ
asBCTy³Size
[
asBCInfo
[
asBC_J™EÁry
].
ty³
];

3186 
func
->
by‹Code
.
	`S‘L’gth
(
bcL’gth
);

3187 
asDWORD
 *
bc
 = 
func
->
by‹Code
.
	`Add»ssOf
();

3189 ifĞ
•
.
šşudeJ™In¡ruùiÚs
 )

3191 *(
asBYTE
*)
bc
 = 
asBC_J™EÁry
;

3192 *(
asPWORD
*)(
bc
+1) = 0;

3193 
bc
 +ğ
asBCTy³Size
[
asBCInfo
[
asBC_J™EÁry
].
ty³
];

3196 *(
asBYTE
*)
bc
 = 
asBC_OBJTYPE
;

3197 *(
asPWORD
*)(
bc
+1èğ×sPWORD)
Ù
;

3198 
bc
 +ğ
asBCTy³Size
[
asBCInfo
[
asBC_OBJTYPE
].
ty³
];

3199 *(
asBYTE
*)
bc
 = 
asBC_CALLSYS
;

3200 *(
asDWORD
*)(
bc
+1èğ
çùÜyId
;

3201 
bc
 +ğ
asBCTy³Size
[
asBCInfo
[
asBC_CALLSYS
].
ty³
];

3202 *(
asBYTE
*)
bc
 = 
asBC_RET
;

3203 *(((
asWORD
*)
bc
)+1èğ×sWORD)
func
->
	`G‘S·ûN“dedFÜArgum’ts
();

3205 
func
->
	`AddReã»nûs
();

3206 
func
->
¡ackN“ded
 = 
AS_PTR_SIZE
;

3209 
func
->
dÚtCËªUpOnExû±iÚ
 = 
Œue
;

3211 
func
->
	`JITCompe
();

3213  
func
;

3214 
	}
}

3216 
boŞ
 
asCSütEngše
::
	$G’”©eNewTem¶©eFunùiÚ
(
asCObjeùTy³
 *
‹m¶©eTy³
,‡sCObjeùTy³ *
Ù
, 
asCD©aTy³
 &
subTy³
, 
asCSütFunùiÚ
 *
func
,‡sCSütFunùiÚ **
ÃwFunc
)

3218 
boŞ
 
ÃedNewFunc
 = 
çl£
;

3219 ifĞ
func
->
»tuºTy³
.
	`G‘ObjeùTy³
(è=ğ
‹m¶©eTy³
->
‹m¶©eSubTy³
.GetObjectType() ||

3220 
func
->
»tuºTy³
.
	`G‘ObjeùTy³
(è=ğ
‹m¶©eTy³
 )

3221 
ÃedNewFunc
 = 
Œue
;

3224  
asUINT
 
p
 = 0;… < 
func
->
·¿m‘”Ty³s
.
	`G‘L’gth
();…++ )

3226 ifĞ
func
->
·¿m‘”Ty³s
[
p
].
	`G‘ObjeùTy³
(è=ğ
‹m¶©eTy³
->
‹m¶©eSubTy³
.GetObjectType() ||

3227 
func
->
·¿m‘”Ty³s
[
p
].
	`G‘ObjeùTy³
(è=ğ
‹m¶©eTy³
 )

3229 
ÃedNewFunc
 = 
Œue
;

3235 ifĞ
ÃedNewFunc
 )

3237 
asCSütFunùiÚ
 *
func2
 = 
	`asNEW
×sCSütFunùiÚ)(
this
, 0, 
func
->
funcTy³
);

3238 ifĞ
func2
 == 0 )

3241  
çl£
;

3244 
func2
->
Çme
 = 
func
->name;

3245 
func2
->
id
 = 
	`G‘NextSütFunùiÚId
();

3247 ifĞ
func
->
»tuºTy³
.
	`G‘ObjeùTy³
(è=ğ
‹m¶©eTy³
->
‹m¶©eSubTy³
.GetObjectType() )

3249 
func2
->
»tuºTy³
 = 
subTy³
;

3250 ifĞ
func
->
»tuºTy³
.
	`IsObjeùHªdË
(è&& !
subTy³
.IsObjectHandle() )

3253 
func2
->
»tuºTy³
.
	`MakeHªdË
(
Œue
,rue);

3254 
func2
->
»tuºTy³
.
	`MakeReã»nû
(
func
->»tuºTy³.
	`IsReã»nû
());

3255 
func2
->
»tuºTy³
.
	`MakeR—dOÆy
(
func
->»tuºTy³.
	`IsR—dOÆy
());

3260 
func2
->
»tuºTy³
.
	`MakeReã»nû
(
func
->»tuºTy³.
	`IsReã»nû
());

3261 
func2
->
»tuºTy³
.
	`MakeR—dOÆy
(
subTy³
.
	`IsR—dOÆy
(è|| 
func
->returnType.IsReadOnly());

3264 ifĞ
func
->
»tuºTy³
.
	`G‘ObjeùTy³
(è=ğ
‹m¶©eTy³
 )

3266 ifĞ
func2
->
»tuºTy³
.
	`IsObjeùHªdË
() )

3267 
func2
->
»tuºTy³
 = 
asCD©aTy³
::
	`C»©eObjeùHªdË
(
Ù
, 
çl£
);

3269 
func2
->
»tuºTy³
 = 
asCD©aTy³
::
	`C»©eObjeù
(
Ù
, 
çl£
);

3271 
func2
->
»tuºTy³
.
	`MakeReã»nû
(
func
->»tuºTy³.
	`IsReã»nû
());

3272 
func2
->
»tuºTy³
.
	`MakeR—dOÆy
(
func
->»tuºTy³.
	`IsR—dOÆy
());

3275 
func2
->
»tuºTy³
 = 
func
->returnType;

3277 
func2
->
·¿m‘”Ty³s
.
	`S‘L’gth
(
func
->·¿m‘”Ty³s.
	`G‘L’gth
());

3278  
asUINT
 
p
 = 0;… < 
func
->
·¿m‘”Ty³s
.
	`G‘L’gth
();…++ )

3280 ifĞ
func
->
·¿m‘”Ty³s
[
p
].
	`G‘ObjeùTy³
(è=ğ
‹m¶©eTy³
->
‹m¶©eSubTy³
.GetObjectType() )

3282 
func2
->
·¿m‘”Ty³s
[
p
] = 
subTy³
;

3283 ifĞ
func
->
·¿m‘”Ty³s
[
p
].
	`IsObjeùHªdË
() )

3286 
func2
->
·¿m‘”Ty³s
[
p
].
	`MakeHªdË
(
Œue
);

3287 
func2
->
·¿m‘”Ty³s
[
p
].
	`MakeReã»nû
(
func
->·¿m‘”Ty³s[p].
	`IsReã»nû
());

3288 
func2
->
·¿m‘”Ty³s
[
p
].
	`MakeR—dOÆy
(
func
->·¿m‘”Ty³s[p].
	`IsR—dOÆy
());

3293 
func2
->
·¿m‘”Ty³s
[
p
].
	`MakeReã»nû
(
func
->·¿m‘”Ty³s[p].
	`IsReã»nû
());

3294 
func2
->
·¿m‘”Ty³s
[
p
].
	`MakeR—dOÆy
(
subTy³
.
	`IsR—dOÆy
(è|| 
func
->·¿m‘”Ty³s[p].
	`IsReã»nû
());

3297 ifĞ
func
->
·¿m‘”Ty³s
[
p
].
	`G‘ObjeùTy³
(è=ğ
‹m¶©eTy³
 )

3299 ifĞ
func
->
·¿m‘”Ty³s
[
p
].
	`IsObjeùHªdË
() )

3300 
func2
->
·¿m‘”Ty³s
[
p
] = 
asCD©aTy³
::
	`C»©eObjeùHªdË
(
Ù
, 
çl£
);

3302 
func2
->
·¿m‘”Ty³s
[
p
] = 
asCD©aTy³
::
	`C»©eObjeù
(
Ù
, 
çl£
);

3304 
func2
->
·¿m‘”Ty³s
[
p
].
	`MakeReã»nû
(
func
->·¿m‘”Ty³s[p].
	`IsReã»nû
());

3305 
func2
->
·¿m‘”Ty³s
[
p
].
	`MakeR—dOÆy
(
func
->·¿m‘”Ty³s[p].
	`IsR—dOÆy
());

3308 
func2
->
·¿m‘”Ty³s
[
p
] = 
func
->parameterTypes[p];

3316 
func2
->
šOutFÏgs
 = 
func
->inOutFlags;

3317 
func2
->
isR—dOÆy
 = 
func
->isReadOnly;

3318 
func2
->
objeùTy³
 = 
Ù
;

3319 
func2
->
¡ackN“ded
 = 
func
->stackNeeded;

3320 
func2
->
sysFuncIÁf
 = 
	`asNEW
(
asSSy¡emFunùiÚIÁ”çû
)(*
func
->sysFuncIntf);

3322 
	`S‘SütFunùiÚ
(
func2
);

3325 *
ÃwFunc
 = 
func2
;

3328  
ÃedNewFunc
;

3329 
	}
}

3331 
asCSütEngše
::
	$C®lObjeùM‘hod
(*
obj
, 
func
)

3333 
asCSütFunùiÚ
 *
s
 = 
sütFunùiÚs
[
func
];

3334 
	`asASSERT
Ğ
s
 != 0 );

3335 
	`C®lObjeùM‘hod
(
obj
, 
s
->
sysFuncIÁf
, s);

3336 
	}
}

3338 
asCSütEngše
::
	$C®lObjeùM‘hod
(*
obj
, 
asSSy¡emFunùiÚIÁ”çû
 *
i
, 
asCSütFunùiÚ
 *
s
)

3340 #ifdeà
__GNUC__


3341 ifĞ
i
->
ÿÎCÚv
 =ğ
ICC_GENERIC_METHOD
 )

3343 
asCG’”ic
 
	`g’
(
this
, 
s
, 
obj
, 0);

3344 (*
f
)(
asISütG’”ic
 *èğ((*)×sISütG’”iø*))(
i
->
func
);

3345 
	`f
(&
g’
);

3347 ifĞ
i
->
ÿÎCÚv
 =ğ
ICC_VIRTUAL_THISCALL
 )

3353 
asSIMPLEMETHOD_t
 
mthd
;

3356 
asFUNCTION_t
 
func
;

3357 
asPWORD
 
ba£Off£t
;

3358 } 
f
;

3359 } 
p
;

3360 
p
.
f
.
func
 = ((*)())(
i
->func);

3361 
p
.
f
.
ba£Off£t
 = 
	`asPWORD
(
i
->baseOffset);

3362 (
asCSim¶eDummy
::*
f
)(èğ
p
.
mthd
;

3363 (((
asCSim¶eDummy
*)
obj
)->*
f
)();

3368 (*
f
)(*èğ((*)(*))(
i
->
func
);

3369 
	`f
(
obj
);

3372 #iâdeà
AS_NO_CLASS_METHODS


3373 ifĞ
i
->
ÿÎCÚv
 =ğ
ICC_THISCALL
 )

3377 
asSIMPLEMETHOD_t
 
mthd
;

3378 
asFUNCTION_t
 
func
;

3379 } 
p
;

3380 
p
.
func
 = ((*)())(
i
->func);

3381 (
asCSim¶eDummy
::*
f
)(èğ
p
.
mthd
;

3382 
obj
 = (*)(
	`asPWORD
(objè+ 
i
->
ba£Off£t
);

3383 (((
asCSim¶eDummy
*)
obj
)->*
f
)();

3387 ifĞ
i
->
ÿÎCÚv
 =ğ
ICC_GENERIC_METHOD
 )

3389 
asCG’”ic
 
	`g’
(
this
, 
s
, 
obj
, 0);

3390 (*
f
)(
asISütG’”ic
 *èğ((*)×sISütG’”iø*))(
i
->
func
);

3391 
	`f
(&
g’
);

3395 (*
f
)(*èğ((*)(*))(
i
->
func
);

3396 
	`f
(
obj
);

3399 
	}
}

3401 
boŞ
 
asCSütEngše
::
	$C®lObjeùM‘hodR‘BoŞ
(*
obj
, 
func
)

3403 
asCSütFunùiÚ
 *
s
 = 
sütFunùiÚs
[
func
];

3404 
	`asASSERT
Ğ
s
 != 0 );

3405 
asSSy¡emFunùiÚIÁ”çû
 *
i
 = 
s
->
sysFuncIÁf
;

3407 #ifdeà
__GNUC__


3408 ifĞ
i
->
ÿÎCÚv
 =ğ
ICC_GENERIC_METHOD
 )

3410 
asCG’”ic
 
	`g’
(
this
, 
s
, 
obj
, 0);

3411 (*
f
)(
asISütG’”ic
 *èğ((*)×sISütG’”iø*))(
i
->
func
);

3412 
	`f
(&
g’
);

3413  *(
boŞ
*)
g’
.
	`G‘R‘uºPoš‹r
();

3415 ifĞ
i
->
ÿÎCÚv
 =ğ
ICC_VIRTUAL_THISCALL
 )

3420 
asSIMPLEMETHOD_t
 
mthd
;

3423 
asFUNCTION_t
 
func
;

3424 
asDWORD
 
ba£Off£t
;

3425 } 
f
;

3426 } 
p
;

3427 
p
.
f
.
func
 = ((*)())(
i
->func);

3428 
p
.
f
.
ba£Off£t
 = 
i
->baseOffset;

3429 
	`boŞ
 (
asCSim¶eDummy
::*
f
)(èğ(boŞ (asCSim¶eDummy::*)())(
p
.
mthd
);

3430  (((
asCSim¶eDummy
*)
obj
)->*
f
)();

3435 
	`boŞ
 (*
f
)(*èğ(boŞ (*)(*))(
i
->
func
);

3436  
	`f
(
obj
);

3439 #iâdeà
AS_NO_CLASS_METHODS


3440 ifĞ
i
->
ÿÎCÚv
 =ğ
ICC_THISCALL
 )

3444 
asSIMPLEMETHOD_t
 
mthd
;

3445 
asFUNCTION_t
 
func
;

3446 } 
p
;

3447 
p
.
func
 = ((*)())(
i
->func);

3448 
	`boŞ
 (
asCSim¶eDummy
::*
f
)(èğ(boŞ (asCSim¶eDummy::*)())
p
.
mthd
;

3449 
obj
 = (*)(
	`asPWORD
(objè+ 
i
->
ba£Off£t
);

3450  (((
asCSim¶eDummy
*)
obj
)->*
f
)();

3454 ifĞ
i
->
ÿÎCÚv
 =ğ
ICC_GENERIC_METHOD
 )

3456 
asCG’”ic
 
	`g’
(
this
, 
s
, 
obj
, 0);

3457 (*
f
)(
asISütG’”ic
 *èğ((*)×sISütG’”iø*))(
i
->
func
);

3458 
	`f
(&
g’
);

3459  *(
boŞ
*)
g’
.
	`G‘R‘uºPoš‹r
();

3463 
	`boŞ
 (*
f
)(*èğ(boŞ (*)(*))(
i
->
func
);

3464  
	`f
(
obj
);

3467 
	}
}

3469 
asCSütEngše
::
	$C®lObjeùM‘hodR‘IÁ
(*
obj
, 
func
)

3471 
asCSütFunùiÚ
 *
s
 = 
sütFunùiÚs
[
func
];

3472 
	`asASSERT
Ğ
s
 != 0 );

3473 
asSSy¡emFunùiÚIÁ”çû
 *
i
 = 
s
->
sysFuncIÁf
;

3475 #ifdeà
__GNUC__


3476 ifĞ
i
->
ÿÎCÚv
 =ğ
ICC_GENERIC_METHOD
 )

3478 
asCG’”ic
 
	`g’
(
this
, 
s
, 
obj
, 0);

3479 (*
f
)(
asISütG’”ic
 *èğ((*)×sISütG’”iø*))(
i
->
func
);

3480 
	`f
(&
g’
);

3481  *(*)
g’
.
	`G‘R‘uºPoš‹r
();

3483 ifĞ
i
->
ÿÎCÚv
 =ğ
ICC_VIRTUAL_THISCALL
 )

3488 
asSIMPLEMETHOD_t
 
mthd
;

3491 
asFUNCTION_t
 
func
;

3492 
asDWORD
 
ba£Off£t
;

3493 } 
f
;

3494 } 
p
;

3495 
p
.
f
.
func
 = ((*)())(
i
->func);

3496 
p
.
f
.
ba£Off£t
 = 
i
->baseOffset;

3497 (
asCSim¶eDummy
::*
f
)(èğ(×sCSim¶eDummy::*)())(
p
.
mthd
);

3498  (((
asCSim¶eDummy
*)
obj
)->*
f
)();

3503 (*
f
)(*èğ((*)(*))(
i
->
func
);

3504  
	`f
(
obj
);

3507 #iâdeà
AS_NO_CLASS_METHODS


3508 ifĞ
i
->
ÿÎCÚv
 =ğ
ICC_THISCALL
 )

3512 
asSIMPLEMETHOD_t
 
mthd
;

3513 
asFUNCTION_t
 
func
;

3514 } 
p
;

3515 
p
.
func
 = ((*)())(
i
->func);

3516 (
asCSim¶eDummy
::*
f
)(èğ(×sCSim¶eDummy::*)())
p
.
mthd
;

3517 
obj
 = (*)(
	`asPWORD
(objè+ 
i
->
ba£Off£t
);

3518  (((
asCSim¶eDummy
*)
obj
)->*
f
)();

3522 ifĞ
i
->
ÿÎCÚv
 =ğ
ICC_GENERIC_METHOD
 )

3524 
asCG’”ic
 
	`g’
(
this
, 
s
, 
obj
, 0);

3525 (*
f
)(
asISütG’”ic
 *èğ((*)×sISütG’”iø*))(
i
->
func
);

3526 
	`f
(&
g’
);

3527  *(*)
g’
.
	`G‘R‘uºPoš‹r
();

3531 (*
f
)(*èğ((*)(*))(
i
->
func
);

3532  
	`f
(
obj
);

3535 
	}
}

3537 *
asCSütEngše
::
	$C®lGlob®FunùiÚR‘PŒ
(
func
)

3539 
asCSütFunùiÚ
 *
s
 = 
sütFunùiÚs
[
func
];

3540 
	`asASSERT
Ğ
s
 != 0 );

3541  
	`C®lGlob®FunùiÚR‘PŒ
(
s
->
sysFuncIÁf
, s);

3542 
	}
}

3544 *
asCSütEngše
::
	$C®lGlob®FunùiÚR‘PŒ
(
func
, *
·¿m1
)

3546 
asCSütFunùiÚ
 *
s
 = 
sütFunùiÚs
[
func
];

3547 
	`asASSERT
Ğ
s
 != 0 );

3548  
	`C®lGlob®FunùiÚR‘PŒ
(
s
->
sysFuncIÁf
, s, 
·¿m1
);

3549 
	}
}

3551 *
asCSütEngše
::
	$C®lGlob®FunùiÚR‘PŒ
(
asSSy¡emFunùiÚIÁ”çû
 *
i
, 
asCSütFunùiÚ
 *
s
)

3553 ifĞ
i
->
ÿÎCÚv
 =ğ
ICC_CDECL
 )

3555 *(*
f
)(èğ(*(*)())(
i
->
func
);

3556  
	`f
();

3558 ifĞ
i
->
ÿÎCÚv
 =ğ
ICC_STDCALL
 )

3560 *(
STDCALL
 *
f
)(èğ(*(STDCALL *)())(
i
->
func
);

3561  
	`f
();

3565 
asCG’”ic
 
	`g’
(
this
, 
s
, 0, 0);

3566 (*
f
)(
asISütG’”ic
 *èğ((*)×sISütG’”iø*))(
i
->
func
);

3567 
	`f
(&
g’
);

3568  *(**)
g’
.
	`G‘R‘uºPoš‹r
();

3570 
	}
}

3572 *
asCSütEngše
::
	$C®lGlob®FunùiÚR‘PŒ
(
asSSy¡emFunùiÚIÁ”çû
 *
i
, 
asCSütFunùiÚ
 *
s
, *
·¿m1
)

3574 ifĞ
i
->
ÿÎCÚv
 =ğ
ICC_CDECL
 )

3576 *(*
f
)(*èğ(*(*)(*))(
i
->
func
);

3577  
	`f
(
·¿m1
);

3579 ifĞ
i
->
ÿÎCÚv
 =ğ
ICC_STDCALL
 )

3581 *(
STDCALL
 *
f
)(*èğ(*(STDCALL *)(*))(
i
->
func
);

3582  
	`f
(
·¿m1
);

3586 
asCG’”ic
 
	`g’
(
this
, 
s
, 0, (
asDWORD
*)&
·¿m1
);

3587 (*
f
)(
asISütG’”ic
 *èğ((*)×sISütG’”iø*))(
i
->
func
);

3588 
	`f
(&
g’
);

3589  *(**)
g’
.
	`G‘R‘uºPoš‹r
();

3591 
	}
}

3593 
asCSütEngše
::
	$C®lObjeùM‘hod
(*
obj
, *
·¿m
, 
func
)

3595 
asCSütFunùiÚ
 *
s
 = 
sütFunùiÚs
[
func
];

3596 
	`asASSERT
Ğ
s
 != 0 );

3597 
	`C®lObjeùM‘hod
(
obj
, 
·¿m
, 
s
->
sysFuncIÁf
, s);

3598 
	}
}

3600 
asCSütEngše
::
	$C®lObjeùM‘hod
(*
obj
, *
·¿m
, 
asSSy¡emFunùiÚIÁ”çû
 *
i
, 
asCSütFunùiÚ
 *
s
)

3602 #ifdeà
__GNUC__


3603 ifĞ
i
->
ÿÎCÚv
 =ğ
ICC_CDECL_OBJLAST
 )

3605 (*
f
)(*, *èğ((*)(*, *))(
i
->
func
);

3606 
	`f
(
·¿m
, 
obj
);

3608 ifĞ
i
->
ÿÎCÚv
 =ğ
ICC_GENERIC_METHOD
 )

3610 
asCG’”ic
 
	`g’
(
this
, 
s
, 
obj
, (
asDWORD
*)&
·¿m
);

3611 (*
f
)(
asISütG’”ic
 *èğ((*)×sISütG’”iø*))(
i
->
func
);

3612 
	`f
(&
g’
);

3614 ifĞ
i
->
ÿÎCÚv
 =ğ
ICC_VIRTUAL_THISCALL
 )

3620 
asSIMPLEMETHOD_t
 
mthd
;

3623 
asFUNCTION_t
 
func
;

3624 
asPWORD
 
ba£Off£t
;

3625 } 
f
;

3626 } 
p
;

3627 
p
.
f
.
func
 = ((*)())(
i
->func);

3628 
p
.
f
.
ba£Off£t
 = 
	`asPWORD
(
i
->baseOffset);

3629 (
asCSim¶eDummy
::*
f
)(*èğ(×sCSim¶eDummy::*)(*))(
p
.
mthd
);

3630 (((
asCSim¶eDummy
*)
obj
)->*
f
)(
·¿m
);

3634 (*
f
)(*, *èğ((*)(*, *))(
i
->
func
);

3635 
	`f
(
obj
, 
·¿m
);

3638 #iâdeà
AS_NO_CLASS_METHODS


3639 ifĞ
i
->
ÿÎCÚv
 =ğ
ICC_THISCALL
 )

3643 
asSIMPLEMETHOD_t
 
mthd
;

3644 
asFUNCTION_t
 
func
;

3645 } 
p
;

3646 
p
.
func
 = ((*)())(
i
->func);

3647 (
asCSim¶eDummy
::*
f
)(*èğ(×sCSim¶eDummy::*)(*))(
p
.
mthd
);

3648 
obj
 = (*)(
	`asPWORD
(objè+ 
i
->
ba£Off£t
);

3649 (((
asCSim¶eDummy
*)
obj
)->*
f
)(
·¿m
);

3653 ifĞ
i
->
ÿÎCÚv
 =ğ
ICC_CDECL_OBJLAST
 )

3655 (*
f
)(*, *èğ((*)(*, *))(
i
->
func
);

3656 
	`f
(
·¿m
, 
obj
);

3658 ifĞ
i
->
ÿÎCÚv
 =ğ
ICC_GENERIC_METHOD
 )

3660 
asCG’”ic
 
	`g’
(
this
, 
s
, 
obj
, (
asDWORD
*)&
·¿m
);

3661 (*
f
)(
asISütG’”ic
 *èğ((*)×sISütG’”iø*))(
i
->
func
);

3662 
	`f
(&
g’
);

3666 (*
f
)(*, *èğ((*)(*, *))(
i
->
func
);

3667 
	`f
(
obj
, 
·¿m
);

3670 
	}
}

3672 
asCSütEngše
::
	$C®lGlob®FunùiÚ
(*
·¿m1
, *
·¿m2
, 
asSSy¡emFunùiÚIÁ”çû
 *
i
, 
asCSütFunùiÚ
 *
s
)

3674 ifĞ
i
->
ÿÎCÚv
 =ğ
ICC_CDECL
 )

3676 (*
f
)(*, *èğ((*)(*, *))(
i
->
func
);

3677 
	`f
(
·¿m1
, 
·¿m2
);

3679 ifĞ
i
->
ÿÎCÚv
 =ğ
ICC_STDCALL
 )

3681 (
STDCALL
 *
f
)(*, *èğ((STDCALL *)(*, *))(
i
->
func
);

3682 
	`f
(
·¿m1
, 
·¿m2
);

3686 
asCG’”ic
 
	`g’
(
this
, 
s
, 0, (
asDWORD
*)&
·¿m1
);

3687 (*
f
)(
asISütG’”ic
 *èğ((*)×sISütG’”iø*))(
i
->
func
);

3688 
	`f
(&
g’
);

3690 
	}
}

3692 
boŞ
 
asCSütEngše
::
	$C®lGlob®FunùiÚR‘BoŞ
(*
·¿m1
, *
·¿m2
, 
asSSy¡emFunùiÚIÁ”çû
 *
i
, 
asCSütFunùiÚ
 *
s
)

3694 ifĞ
i
->
ÿÎCÚv
 =ğ
ICC_CDECL
 )

3696 
	`boŞ
 (*
f
)(*, *èğ(boŞ (*)(*, *))(
i
->
func
);

3697  
	`f
(
·¿m1
, 
·¿m2
);

3699 ifĞ
i
->
ÿÎCÚv
 =ğ
ICC_STDCALL
 )

3701 
	`boŞ
 (
STDCALL
 *
f
)(*, *èğ(boŞ (STDCALL *)(*, *))(
i
->
func
);

3702  
	`f
(
·¿m1
, 
·¿m2
);

3708 
asCG’”ic
 
	`g’
(
this
, 
s
, 0, (
asDWORD
*)&
·¿m1
);

3709 (*
f
)(
asISütG’”ic
 *èğ((*)×sISütG’”iø*))(
i
->
func
);

3710 
	`f
(&
g’
);

3711  *(
boŞ
*)
g’
.
	`G‘R‘uºPoš‹r
();

3713 
	}
}

3715 *
asCSütEngše
::
	$C®lAÎoc
(
asCObjeùTy³
 *
ty³
) const

3719 #ià
	`defšed
(
AS_DEBUG
)

3720  ((
asALLOCFUNCDEBUG_t
)(
u£rAÎoc
))(
ty³
->
size
 < 4 ? 4 :y³->size, 
__FILE__
, 
__LINE__
);

3722  
	`u£rAÎoc
(
ty³
->
size
 < 4 ? 4 :ype->size);

3724 
	}
}

3726 
asCSütEngše
::
	$C®lF»e
(*
obj
) const

3728 
	`u£rF»e
(
obj
);

3729 
	}
}

3732 
asCSütEngše
::
	$NÙifyG¬bageCŞËùÜOfNewObjeù
(*
obj
, 
asIObjeùTy³
 *
ty³
)

3734 
gc
.
	`AddSütObjeùToGC
(
obj
, 
¡©ic_ÿ¡
<
asCObjeùTy³
*>(
ty³
));

3735 
	}
}

3738 
asCSütEngše
::
	$G¬bageCŞËù
(
asDWORD
 
æags
)

3740  
gc
.
	`G¬bageCŞËù
(
æags
);

3741 
	}
}

3744 
asCSütEngše
::
	$G‘GCSti¡ics
(
asUINT
 *
cu¼’tSize
,‡sUINT *
tÙ®De¡royed
,‡sUINT *
tÙ®D‘eùed
,‡sUINT *
ÃwObjeùs
,‡sUINT *
tÙ®NewDe¡royed
) const

3746 
gc
.
	`G‘Sti¡ics
(
cu¼’tSize
, 
tÙ®De¡royed
, 
tÙ®D‘eùed
, 
ÃwObjeùs
, 
tÙ®NewDe¡royed
);

3747 
	}
}

3750 
asCSütEngše
::
	$GCEnumC®lback
(*
»ã»nû
)

3752 
gc
.
	`GCEnumC®lback
(
»ã»nû
);

3753 
	}
}

3757 
asCSütEngše
::
	$G‘Ty³IdFromD©aTy³
(cÚ¡ 
asCD©aTy³
 &
dtIn
) const

3759 ifĞ
dtIn
.
	`IsNuÎHªdË
() )  0;

3762 
asCD©aTy³
 
	`dt
(
dtIn
);

3763 ifĞ
dt
.
	`G‘ObjeùTy³
() )

3764 
dt
.
	`MakeHªdË
(
çl£
);

3767 
asSM­Node
<,
asCD©aTy³
*> *
cursÜ
 = 0;

3768 
m­Ty³IdToD©aTy³
.
	`MoveFœ¡
(&
cursÜ
);

3769  
cursÜ
 )

3771 ifĞ
m­Ty³IdToD©aTy³
.
	`G‘V®ue
(
cursÜ
)->
	`IsEqu®Exû±RefAndCÚ¡
(
dt
) )

3773 
ty³Id
 = 
m­Ty³IdToD©aTy³
.
	`G‘Key
(
cursÜ
);

3774 ifĞ
dtIn
.
	`G‘ObjeùTy³
(è&& !(dtIn.G‘ObjeùTy³()->
æags
 & 
asOBJ_ASHANDLE
) )

3778 ifĞ
dtIn
.
	`IsObjeùHªdË
() )

3779 
ty³Id
 |ğ
asTYPEID_OBJHANDLE
;

3780 ifĞ
dtIn
.
	`IsHªdËToCÚ¡
() )

3781 
ty³Id
 |ğ
asTYPEID_HANDLETOCONST
;

3784  
ty³Id
;

3787 
m­Ty³IdToD©aTy³
.
	`MoveNext
(&
cursÜ
, cursor);

3793 
ty³Id
 = 
ty³IdSeqNbr
++;

3794 ifĞ
dt
.
	`G‘ObjeùTy³
() )

3796 ifĞ
dt
.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_SCRIPT_OBJECT
 ) 
ty³Id
 |ğ
asTYPEID_SCRIPTOBJECT
;

3797 ifĞ
dt
.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_TEMPLATE
 ) 
ty³Id
 |ğ
asTYPEID_TEMPLATE
;

3798 ifĞ
dt
.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_ENUM
 ) {}

3799 
ty³Id
 |ğ
asTYPEID_APPOBJECT
;

3803 
asCD©aTy³
 *
ÃwDt
 = 
	`asNEW
×sCD©aTy³)(
dt
);

3804 ifĞ
ÃwDt
 == 0 )

3810 
ÃwDt
->
	`MakeReã»nû
(
çl£
);

3811 
ÃwDt
->
	`MakeR—dOÆy
(
çl£
);

3812 
ÃwDt
->
	`MakeHªdË
(
çl£
);

3814 
m­Ty³IdToD©aTy³
.
	`In£¹
(
ty³Id
, 
ÃwDt
);

3817  
	`G‘Ty³IdFromD©aTy³
(
dtIn
);

3818 
	}
}

3820 
asCD©aTy³
 
asCSütEngše
::
	$G‘D©aTy³FromTy³Id
(
ty³Id
) const

3822 
ba£Id
 = 
ty³Id
 & (
asTYPEID_MASK_OBJECT
 | 
asTYPEID_MASK_SEQNBR
);

3824 
asSM­Node
<,
asCD©aTy³
*> *
cursÜ
 = 0;

3825 ifĞ
m­Ty³IdToD©aTy³
.
	`MoveTo
(&
cursÜ
, 
ba£Id
) )

3827 
asCD©aTy³
 
	`dt
(*
m­Ty³IdToD©aTy³
.
	`G‘V®ue
(
cursÜ
));

3828 ifĞ
ty³Id
 & 
asTYPEID_OBJHANDLE
 )

3829 
dt
.
	`MakeHªdË
(
Œue
);

3830 ifĞ
ty³Id
 & 
asTYPEID_HANDLETOCONST
 )

3831 
dt
.
	`MakeHªdËToCÚ¡
(
Œue
);

3832  
dt
;

3835  
	`asCD©aTy³
();

3836 
	}
}

3838 
asCObjeùTy³
 *
asCSütEngše
::
	$G‘ObjeùTy³FromTy³Id
(
ty³Id
) const

3840 
asCD©aTy³
 
dt
 = 
	`G‘D©aTy³FromTy³Id
(
ty³Id
);

3841  
dt
.
	`G‘ObjeùTy³
();

3842 
	}
}

3844 
asCSütEngše
::
	$RemoveFromTy³IdM­
(
asCObjeùTy³
 *
ty³
)

3846 
asSM­Node
<,
asCD©aTy³
*> *
cursÜ
 = 0;

3847 
m­Ty³IdToD©aTy³
.
	`MoveFœ¡
(&
cursÜ
);

3848  
cursÜ
 )

3850 
asCD©aTy³
 *
dt
 = 
m­Ty³IdToD©aTy³
.
	`G‘V®ue
(
cursÜ
);

3851 
asSM­Node
<,
asCD©aTy³
*> *
Şd
 = 
cursÜ
;

3852 
m­Ty³IdToD©aTy³
.
	`MoveNext
(&
cursÜ
, cursor);

3853 ifĞ
dt
->
	`G‘ObjeùTy³
(è=ğ
ty³
 )

3855 
	`asDELETE
(
dt
,
asCD©aTy³
);

3856 
m­Ty³IdToD©aTy³
.
	`E¿£
(
Şd
);

3859 
	}
}

3862 
asCSütEngše
::
	$G‘Ty³IdByDeş
(cÚ¡ *
deş
) const

3864 
asCD©aTy³
 
dt
;

3866 
asCBud”
 
	`bld
(
cÚ¡_ÿ¡
<
asCSütEngše
*>(
this
), 0);

3867 
r
 = 
bld
.
	`P¬£D©aTy³
(
deş
, &
dt
, 
deçuÉName¥aû
);

3868 ifĞ
r
 < 0 )

3869  
asINVALID_TYPE
;

3871  
	`G‘Ty³IdFromD©aTy³
(
dt
);

3872 
	}
}

3875 cÚ¡ *
asCSütEngše
::
	$G‘Ty³Deş¬©iÚ
(
ty³Id
, 
boŞ
 
šşudeName¥aû
) const

3877 
asCD©aTy³
 
dt
 = 
	`G‘D©aTy³FromTy³Id
(
ty³Id
);

3879 
asCSŒšg
 *
‹mpSŒšg
 = &
asCTh»adMªag”
::
	`G‘LoÿlD©a
()->
¡ršg
;

3880 *
‹mpSŒšg
 = 
dt
.
	`FÜm©
(
šşudeName¥aû
);

3882  
‹mpSŒšg
->
	`Add»ssOf
();

3883 
	}
}

3886 
asCSütEngše
::
	$G‘SizeOfPrim™iveTy³
(
ty³Id
) const

3888 
asCD©aTy³
 
dt
 = 
	`G‘D©aTy³FromTy³Id
(
ty³Id
);

3889 ifĞ!
dt
.
	`IsPrim™ive
() )  0;

3891  
dt
.
	`G‘SizeInMemÜyBy‹s
();

3892 
	}
}

3895 *
asCSütEngše
::
	$C»©eSütObjeù
(
ty³Id
)

3898 ifĞ(
ty³Id
 & (
asTYPEID_MASK_OBJECT
 | 
asTYPEID_MASK_SEQNBR
)) !=ypeId )  0;

3899 ifĞ(
ty³Id
 & 
asTYPEID_MASK_OBJECT
) == 0 )  0;

3901 
asCD©aTy³
 
dt
 = 
	`G‘D©aTy³FromTy³Id
(
ty³Id
);

3904 ifĞ!
dt
.
	`IsV®id
() )  0;

3906 
asCObjeùTy³
 *
objTy³
 = 
dt
.
	`G‘ObjeùTy³
();

3907 *
±r
 = 0;

3910 ifĞ
objTy³
->
æags
 & 
asOBJ_SCRIPT_OBJECT
 )

3913 
±r
 = 
	`SütObjeùFaùÜy
(
objTy³
, 
this
);

3915 ifĞ
objTy³
->
æags
 & 
asOBJ_TEMPLATE
 )

3919 
±r
 = 
	`C®lGlob®FunùiÚR‘PŒ
(
objTy³
->
beh
.
cÚ¡ruù
, objType);

3921 ifĞ
objTy³
->
æags
 & 
asOBJ_REF
 )

3924 
±r
 = 
	`C®lGlob®FunùiÚR‘PŒ
(
objTy³
->
beh
.
çùÜy
);

3930 
±r
 = 
	`C®lAÎoc
(
objTy³
);

3931 
funcIndex
 = 
objTy³
->
beh
.
cÚ¡ruù
;

3932 ifĞ
funcIndex
 )

3933 
	`C®lObjeùM‘hod
(
±r
, 
funcIndex
);

3936  
±r
;

3937 
	}
}

3940 *
asCSütEngše
::
	$C»©eUnš™ŸlizedSütObjeù
(
ty³Id
)

3944 ifĞ(
ty³Id
 & (
asTYPEID_MASK_OBJECT
 | 
asTYPEID_MASK_SEQNBR
)) !=ypeId )  0;

3945 ifĞ(
ty³Id
 & 
asTYPEID_MASK_OBJECT
) == 0 )  0;

3946 ifĞ(
ty³Id
 & 
asTYPEID_SCRIPTOBJECT
) == 0 )  0;

3948 
asCD©aTy³
 
dt
 = 
	`G‘D©aTy³FromTy³Id
(
ty³Id
);

3951 ifĞ!
dt
.
	`IsV®id
() )  0;

3953 
asCObjeùTy³
 *
objTy³
 = 
dt
.
	`G‘ObjeùTy³
();

3955 
	`asASSERT
Ğ
objTy³
->
æags
 & 
asOBJ_SCRIPT_OBJECT
 );

3959 
asCSütObjeù
 *
obj
 = 
»š‹½»t_ÿ¡
<asCSütObjeù*>(
	`C®lAÎoc
(
objTy³
));

3962 
	`SütObjeù_CÚ¡ruùUn™Ÿlized
(
objTy³
, 
obj
);

3964  
obj
;

3965 
	}
}

3968 *
asCSütEngše
::
	$C»©eSütObjeùCİy
(*
ÜigObj
, 
ty³Id
)

3970 *
ÃwObj
 = 
	`C»©eSütObjeù
(
ty³Id
);

3971 ifĞ
ÃwObj
 == 0 )  0;

3973 
	`AssignSütObjeù
(
ÃwObj
, 
ÜigObj
, 
ty³Id
);

3975  
ÃwObj
;

3976 
	}
}

3979 
asCSütEngše
::
	$CÚ¡ruùSütObjeùCİy
(*
mem
, *
obj
, 
asCObjeùTy³
 *
ty³
)

3982 
	`asASSERT
Ğ
ty³
->
æags
 & 
asOBJ_VALUE
 );

3985 
funcIndex
 = 
ty³
->
beh
.
cÚ¡ruù
;

3986 ifĞ
funcIndex
 )

3987 
	`C®lObjeùM‘hod
(
mem
, 
funcIndex
);

3989 
	`AssignSütObjeù
(
mem
, 
obj
, 
ty³
->
	`G‘Ty³Id
());

3990 
	}
}

3992 #ifdeà
AS_DEPRECATED


3994 
asCSütEngše
::
	$CİySütObjeù
(*
d¡Obj
, *
¤cObj
, 
ty³Id
)

3996 
	`AssignSütObjeù
(
d¡Obj
, 
¤cObj
, 
ty³Id
);

3997 
	}
}

4001 
asCSütEngše
::
	$AssignSütObjeù
(*
d¡Obj
, *
¤cObj
, 
ty³Id
)

4004 ifĞ(
ty³Id
 & (
asTYPEID_MASK_OBJECT
 | 
asTYPEID_MASK_SEQNBR
)) !=ypeId ) ;

4005 ifĞ(
ty³Id
 & 
asTYPEID_MASK_OBJECT
) == 0 ) ;

4008 
asCD©aTy³
 
dt
 = 
	`G‘D©aTy³FromTy³Id
(
ty³Id
);

4011 ifĞ!
dt
.
	`IsV®id
() ) ;

4013 
asCObjeùTy³
 *
objTy³
 = 
dt
.
	`G‘ObjeùTy³
();

4016 ifĞ
objTy³
->
beh
.
cİy
 )

4018 
	`C®lObjeùM‘hod
(
d¡Obj
, 
¤cObj
, 
objTy³
->
beh
.
cİy
);

4020 ifĞ
objTy³
->
size
 && (objTy³->
æags
 & 
asOBJ_POD
) )

4022 
	`memıy
(
d¡Obj
, 
¤cObj
, 
objTy³
->
size
);

4024 
	}
}

4027 
asCSütEngše
::
	$AddRefSütObjeù
(*
obj
, 
ty³Id
)

4030 ifĞ
obj
 == 0 ) ;

4033 ifĞ(
ty³Id
 & 
asTYPEID_MASK_OBJECT
) == 0 ) ;

4035 
asCD©aTy³
 
dt
 = 
	`G‘D©aTy³FromTy³Id
(
ty³Id
);

4038 ifĞ!
dt
.
	`IsV®id
() ) ;

4040 
asCObjeùTy³
 *
objTy³
 = 
dt
.
	`G‘ObjeùTy³
();

4042 ifĞ
objTy³
->
beh
.
add»f
 )

4045 
	`C®lObjeùM‘hod
(
obj
, 
objTy³
->
beh
.
add»f
);

4047 
	}
}

4050 
asCSütEngše
::
	$AddRefSütObjeù
(*
obj
, cÚ¡ 
asIObjeùTy³
 *
ty³
)

4053 ifĞ
obj
 == 0 ) ;

4055 cÚ¡ 
asCObjeùTy³
 *
objTy³
 = 
¡©ic_ÿ¡
<cÚ¡‡sCObjeùTy³ *>(
ty³
);

4056 ifĞ
objTy³
->
beh
.
add»f
 )

4059 
	`C®lObjeùM‘hod
(
obj
, 
objTy³
->
beh
.
add»f
);

4061 
	}
}

4064 
asCSütEngše
::
	$R–—£SütObjeù
(*
obj
, 
ty³Id
)

4067 ifĞ
obj
 == 0 ) ;

4070 ifĞ(
ty³Id
 & 
asTYPEID_MASK_OBJECT
) == 0 ) ;

4072 
asCD©aTy³
 
dt
 = 
	`G‘D©aTy³FromTy³Id
(
ty³Id
);

4075 ifĞ!
dt
.
	`IsV®id
() ) ;

4077 
asCObjeùTy³
 *
objTy³
 = 
dt
.
	`G‘ObjeùTy³
();

4079 
	`R–—£SütObjeù
(
obj
, 
objTy³
);

4080 
	}
}

4083 
asCSütEngše
::
	$R–—£SütObjeù
(*
obj
, cÚ¡ 
asIObjeùTy³
 *
ty³
)

4086 ifĞ
obj
 == 0 ) ;

4088 cÚ¡ 
asCObjeùTy³
 *
objTy³
 = 
¡©ic_ÿ¡
<cÚ¡‡sCObjeùTy³ *>(
ty³
);

4089 ifĞ
objTy³
->
æags
 & 
asOBJ_REF
 )

4091 
	`asASSERT
Ğ(
objTy³
->
æags
 & 
asOBJ_NOCOUNT
è|| objTy³->
beh
.
»Ëa£
 );

4092 ifĞ
objTy³
->
beh
.
»Ëa£
 )

4095 
	`C®lObjeùM‘hod
(
obj
, 
objTy³
->
beh
.
»Ëa£
);

4103 ifĞ
objTy³
->
beh
.
de¡ruù
 )

4104 
	`C®lObjeùM‘hod
(
obj
, 
objTy³
->
beh
.
de¡ruù
);

4107 
	`C®lF»e
(
obj
);

4109 
	}
}

4112 
boŞ
 
asCSütEngše
::
	$IsHªdËCom·tibËW™hObjeù
(*
obj
, 
objTy³Id
, 
hªdËTy³Id
) const

4115 ifĞ
objTy³Id
 =ğ
hªdËTy³Id
 )

4116  
Œue
;

4119 
asCD©aTy³
 
objDt
 = 
	`G‘D©aTy³FromTy³Id
(
objTy³Id
);

4120 
asCD©aTy³
 
hdlDt
 = 
	`G‘D©aTy³FromTy³Id
(
hªdËTy³Id
);

4123 ifĞ
objDt
.
	`IsHªdËToCÚ¡
(è&& !
hdlDt
.IsHandleToConst() )

4124  
çl£
;

4126 ifĞ
objDt
.
	`G‘ObjeùTy³
(è=ğ
hdlDt
.GetObjectType() )

4129  
Œue
;

4131 ifĞ
objDt
.
	`IsSütObjeù
(è&& 
obj
 )

4134 
asCObjeùTy³
 *
objTy³
 = ((
asCSütObjeù
*)
obj
)->objType;

4138 ifĞ
objTy³
->
	`Im¶em’ts
(
hdlDt
.
	`G‘ObjeùTy³
()) ||

4139 
objTy³
->
	`D”ivesFrom
(
hdlDt
.
	`G‘ObjeùTy³
()) )

4140  
Œue
;

4143  
çl£
;

4144 
	}
}

4147 
asCSütEngše
::
	$BegšCÚfigGroup
(cÚ¡ *
groupName
)

4150  
asUINT
 
n
 = 0;‚ < 
cÚfigGroups
.
	`G‘L’gth
();‚++ )

4152 ifĞ
cÚfigGroups
[
n
]->
groupName
 == groupName )

4153  
asNAME_TAKEN
;

4156 ifĞ
cu¼’tGroup
 !ğ&
deçuÉGroup
 )

4157  
asNOT_SUPPORTED
;

4159 
asCCÚfigGroup
 *
group
 = 
	`asNEW
(asCConfigGroup)();

4160 ifĞ
group
 == 0 )

4161  
asOUT_OF_MEMORY
;

4163 
group
->
groupName
 = groupName;

4165 
cÚfigGroups
.
	`PushLa¡
(
group
);

4166 
cu¼’tGroup
 = 
group
;

4169 
	}
}

4172 
asCSütEngše
::
	$EndCÚfigGroup
()

4175 ifĞ
cu¼’tGroup
 =ğ&
deçuÉGroup
 )

4176  
asERROR
;

4178 
cu¼’tGroup
 = &
deçuÉGroup
;

4181 
	}
}

4184 
asCSütEngše
::
	$RemoveCÚfigGroup
(cÚ¡ *
groupName
)

4195  
asUINT
 
n
 = 0;‚ < 
cÚfigGroups
.
	`G‘L’gth
();‚++ )

4197 ifĞ
cÚfigGroups
[
n
]->
groupName
 == groupName )

4199 
asCCÚfigGroup
 *
group
 = 
cÚfigGroups
[
n
];

4202 ifĞ
group
->
»fCouÁ
 > 0 )

4203  
asCONFIG_GROUP_IS_IN_USE
;

4206 ifĞ
group
->
	`HasLiveObjeùs
() )

4207  
asCONFIG_GROUP_IS_IN_USE
;

4210 ifĞ
n
 =ğ
cÚfigGroups
.
	`G‘L’gth
() - 1 )

4211 
cÚfigGroups
.
	`PİLa¡
();

4213 
cÚfigGroups
[
n
] = cÚfigGroups.
	`PİLa¡
();

4216 
group
->
	`RemoveCÚfigu¿tiÚ
(
this
);

4218 
	`asDELETE
(
group
,
asCCÚfigGroup
);

4223 
	}
}

4225 
asCCÚfigGroup
 *
asCSütEngše
::
	$FšdCÚfigGroupFÜFunùiÚ
(
funcId
) const

4227  
asUINT
 
n
 = 0;‚ < 
cÚfigGroups
.
	`G‘L’gth
();‚++ )

4230 
asUINT
 
m
;

4231  
m
 = 0; m < 
cÚfigGroups
[
n
]->
sütFunùiÚs
.
	`G‘L’gth
(); m++ )

4233 ifĞ
cÚfigGroups
[
n
]->
sütFunùiÚs
[
m
]->
id
 =ğ
funcId
 )

4234  
cÚfigGroups
[
n
];

4239 
	}
}

4242 
asCCÚfigGroup
 *
asCSütEngše
::
	$FšdCÚfigGroupFÜGlob®V¬
(
gv¬Id
) const

4244  
asUINT
 
n
 = 0;‚ < 
cÚfigGroups
.
	`G‘L’gth
();‚++ )

4246  
asUINT
 
m
 = 0; m < 
cÚfigGroups
[
n
]->
glob®Prİs
.
	`G‘L’gth
(); m++ )

4248 ifĞ(
cÚfigGroups
[
n
]->
glob®Prİs
[
m
]->
id
è=ğ
gv¬Id
 )

4249  
cÚfigGroups
[
n
];

4254 
	}
}

4256 
asCCÚfigGroup
 *
asCSütEngše
::
	$FšdCÚfigGroupFÜObjeùTy³
(cÚ¡ 
asCObjeùTy³
 *
objTy³
) const

4258  
asUINT
 
n
 = 0;‚ < 
cÚfigGroups
.
	`G‘L’gth
();‚++ )

4260  
asUINT
 
m
 = 0; m < 
cÚfigGroups
[
n
]->
objTy³s
.
	`G‘L’gth
(); m++ )

4262 ifĞ
cÚfigGroups
[
n
]->
objTy³s
[
m
] =ğ
objTy³
 )

4263  
cÚfigGroups
[
n
];

4268 
	}
}

4270 
asCCÚfigGroup
 *
asCSütEngše
::
	$FšdCÚfigGroupFÜFuncDef
(cÚ¡ 
asCSütFunùiÚ
 *
funcDef
) const

4272  
asUINT
 
n
 = 0;‚ < 
cÚfigGroups
.
	`G‘L’gth
();‚++ )

4274 
asCSütFunùiÚ
 *
f
 = 
cÚ¡_ÿ¡
<asCSütFunùiÚ*>(
funcDef
);

4275 ifĞ
cÚfigGroups
[
n
]->
funcDefs
.
	`Exi¡s
(
f
) )

4276  
cÚfigGroups
[
n
];

4280 
	}
}

4283 
asDWORD
 
asCSütEngše
::
	$S‘DeçuÉAcûssMask
(
asDWORD
 
deçuÉMask
)

4285 
asDWORD
 
Şd
 = 
deçuÉAcûssMask
;

4286 
deçuÉAcûssMask
 = 
deçuÉMask
;

4287  
Şd
;

4288 
	}
}

4290 
asCSütEngše
::
	$G‘NextSütFunùiÚId
()

4292 ifĞ
ä“SütFunùiÚIds
.
	`G‘L’gth
() )

4293  
ä“SütFunùiÚIds
.
	`PİLa¡
();

4295 
id
 = ()
sütFunùiÚs
.
	`G‘L’gth
();

4296 
sütFunùiÚs
.
	`PushLa¡
(0);

4297  
id
;

4298 
	}
}

4300 
asCSütEngše
::
	$S‘SütFunùiÚ
(
asCSütFunùiÚ
 *
func
)

4302 
sütFunùiÚs
[
func
->
id
] = func;

4303 
	}
}

4305 
asCSütEngše
::
	$F»eSütFunùiÚId
(
id
)

4307 ifĞ
id
 < 0 ) ;

4308 
id
 &= 0xFFFF;

4309 ifĞ
id
 >ğ()
sütFunùiÚs
.
	`G‘L’gth
() ) ;

4311 ifĞ
sütFunùiÚs
[
id
] )

4313 
asCSütFunùiÚ
 *
func
 = 
sütFunùiÚs
[
id
];

4316 ifĞ
id
 =ğ()
sütFunùiÚs
.
	`G‘L’gth
() - 1 )

4318 
sütFunùiÚs
.
	`PİLa¡
();

4322 
sütFunùiÚs
[
id
] = 0;

4323 
ä“SütFunùiÚIds
.
	`PushLa¡
(
id
);

4327 ifĞ
func
->
sigÇtu»Id
 =ğ
id
 )

4330 
sigÇtu»Ids
.
	`RemoveV®ue
(
func
);

4333 
ÃwSigId
 = 0;

4334  
asUINT
 
n
 = 0;‚ < 
sütFunùiÚs
.
	`G‘L’gth
();‚++ )

4336 ifĞ
sütFunùiÚs
[
n
] && sütFunùiÚs[n]->
sigÇtu»Id
 =ğ
id
 )

4338 ifĞ
ÃwSigId
 == 0 )

4340 
ÃwSigId
 = 
sütFunùiÚs
[
n
]->
id
;

4341 
sigÇtu»Ids
.
	`PushLa¡
(
sütFunùiÚs
[
n
]);

4344 
sütFunùiÚs
[
n
]->
sigÇtu»Id
 = 
ÃwSigId
;

4349 
	}
}

4352 
asCSütEngše
::
	$Regi¡”Funcdef
(cÚ¡ *
deş
)

4354 ifĞ
deş
 =ğ0 )  
	`CÚfigE¼Ü
(
asINVALID_ARG
, "RegisterFuncdef", decl, 0);

4357 
asCSütFunùiÚ
 *
func
 = 
	`asNEW
×sCSütFunùiÚ)(
this
, 0, 
asFUNC_FUNCDEF
);

4358 ifĞ
func
 == 0 )

4359  
	`CÚfigE¼Ü
(
asOUT_OF_MEMORY
, "Regi¡”Funcdef", 
deş
, 0);

4361 
asCBud”
 
	`bld
(
this
, 0);

4362 
r
 = 
bld
.
	`P¬£FunùiÚDeş¬©iÚ
(0, 
deş
, 
func
, 
çl£
, 0, 0, 
deçuÉName¥aû
);

4363 ifĞ
r
 < 0 )

4366 
func
->
funcTy³
 = 
asFUNC_DUMMY
;

4367 
	`asDELETE
(
func
,
asCSütFunùiÚ
);

4368  
	`CÚfigE¼Ü
(
asINVALID_DECLARATION
, "Regi¡”Funcdef", 
deş
, 0);

4372 
r
 = 
bld
.
	`CheckNameCÚæiù
(
func
->
Çme
.
	`Add»ssOf
(), 0, 0, 
deçuÉName¥aû
);

4373 ifĞ
r
 < 0 )

4375 
	`asDELETE
(
func
,
asCSütFunùiÚ
);

4376  
	`CÚfigE¼Ü
(
asNAME_TAKEN
, "Regi¡”Funcdef", 
deş
, 0);

4379 
func
->
id
 = 
	`G‘NextSütFunùiÚId
();

4380 
	`S‘SütFunùiÚ
(
func
);

4382 
funcDefs
.
	`PushLa¡
(
func
);

4383 
»gi¡”edFuncDefs
.
	`PushLa¡
(
func
);

4384 
cu¼’tGroup
->
funcDefs
.
	`PushLa¡
(
func
);

4387 ifĞ
func
->
»tuºTy³
.
	`G‘ObjeùTy³
() )

4389 
asCCÚfigGroup
 *
group
 = 
	`FšdCÚfigGroupFÜObjeùTy³
(
func
->
»tuºTy³
.
	`G‘ObjeùTy³
());

4390 
cu¼’tGroup
->
	`RefCÚfigGroup
(
group
);

4392  
asUINT
 
n
 = 0;‚ < 
func
->
·¿m‘”Ty³s
.
	`G‘L’gth
();‚++ )

4394 ifĞ
func
->
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
() )

4396 
asCCÚfigGroup
 *
group
 = 
	`FšdCÚfigGroupFÜObjeùTy³
(
func
->
·¿m‘”Ty³s
[
n
].
	`G‘ObjeùTy³
());

4397 
cu¼’tGroup
->
	`RefCÚfigGroup
(
group
);

4402  
func
->
id
;

4403 
	}
}

4406 
asUINT
 
asCSütEngše
::
	$G‘FuncdefCouÁ
() const

4408  
	`asUINT
(
»gi¡”edFuncDefs
.
	`G‘L’gth
());

4409 
	}
}

4412 
asISütFunùiÚ
 *
asCSütEngše
::
	$G‘FuncdefByIndex
(
asUINT
 
šdex
) const

4414 ifĞ
šdex
 >ğ
»gi¡”edFuncDefs
.
	`G‘L’gth
() )

4417  
»gi¡”edFuncDefs
[
šdex
];

4418 
	}
}

4422 
asCSütEngše
::
	$Regi¡”Ty³def
(cÚ¡ *
ty³
, cÚ¡ *
deş
)

4424 ifĞ
ty³
 =ğ0 )  
	`CÚfigE¼Ü
(
asINVALID_NAME
, "Regi¡”Ty³def",y³, 
deş
);

4427 
asUINT
 
n
;

4428  
n
 = 0;‚ < 
objeùTy³s
.
	`G‘L’gth
();‚++ )

4430 ifĞ
objeùTy³s
[
n
] && objeùTy³s[n]->
Çme
 =ğ
ty³
 && objeùTy³s[n]->
ÇmeS·û
 =ğ
deçuÉName¥aû
 )

4432  
asALREADY_REGISTERED
;

4436 
size_t
 
tok’L’
;

4437 
eTok’Ty³
 
tok’
;

4438 
asCD©aTy³
 
d©aTy³
;

4441 
tok’
 = 
tok
.
	`G‘Tok’
(
deş
, 
	`¡¾’
(deş), &
tok’L’
);

4442 
tok’
)

4444 
‰BoŞ
:

4445 
‰IÁ
:

4446 
‰IÁ8
:

4447 
‰IÁ16
:

4448 
‰IÁ64
:

4449 
‰UIÁ
:

4450 
‰UIÁ8
:

4451 
‰UIÁ16
:

4452 
‰UIÁ64
:

4453 
‰Flßt
:

4454 
‰DoubË
:

4455 ifĞ
	`¡¾’
(
deş
è!ğ
tok’L’
 )

4457  
	`CÚfigE¼Ü
(
asINVALID_TYPE
, "Regi¡”Ty³def", 
ty³
, 
deş
);

4462  
	`CÚfigE¼Ü
(
asINVALID_TYPE
, "Regi¡”Ty³def", 
ty³
, 
deş
);

4465 
d©aTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
tok’
, 
çl£
);

4468 
tok’
 = 
tok
.
	`G‘Tok’
(
ty³
, 
	`¡¾’
Ñy³), &
tok’L’
);

4469 ifĞ
tok’
 !ğ
‰Id’tif›r
 || 
	`¡¾’
(
ty³
è!ğ
tok’L’
 )

4470  
	`CÚfigE¼Ü
(
asINVALID_NAME
, "Regi¡”Ty³def", 
ty³
, 
deş
);

4472 
asCBud”
 
	`bld
(
this
, 0);

4473 
r
 = 
bld
.
	`CheckNameCÚæiù
(
ty³
, 0, 0, 
deçuÉName¥aû
);

4474 ifĞ
r
 < 0 )

4475  
	`CÚfigE¼Ü
(
asNAME_TAKEN
, "Regi¡”Ty³def", 
ty³
, 
deş
);

4481 
asCObjeùTy³
 *
objeù
 = 
	`asNEW
×sCObjeùTy³)(
this
);

4482 ifĞ
objeù
 == 0 )

4483  
	`CÚfigE¼Ü
(
asOUT_OF_MEMORY
, "Regi¡”Ty³def", 
ty³
, 
deş
);

4485 
objeù
->
æags
 = 
asOBJ_TYPEDEF
;

4486 
objeù
->
size
 = 
d©aTy³
.
	`G‘SizeInMemÜyBy‹s
();

4487 
objeù
->
Çme
 = 
ty³
;

4488 
objeù
->
ÇmeS·û
 = 
deçuÉName¥aû
;

4489 
objeù
->
‹m¶©eSubTy³
 = 
d©aTy³
;

4491 
objeùTy³s
.
	`PushLa¡
(
objeù
);

4492 
»gi¡”edTy³Defs
.
	`PushLa¡
(
objeù
);

4494 
cu¼’tGroup
->
objTy³s
.
	`PushLa¡
(
objeù
);

4496  
asSUCCESS
;

4497 
	}
}

4500 
asUINT
 
asCSütEngše
::
	$G‘Ty³defCouÁ
() const

4502  
	`asUINT
(
»gi¡”edTy³Defs
.
	`G‘L’gth
());

4503 
	}
}

4506 cÚ¡ *
asCSütEngše
::
	$G‘Ty³defByIndex
(
asUINT
 
šdex
, *
ty³Id
, cÚ¡ **
ÇmeS·û
, cÚ¡ **
cÚfigGroup
, 
asDWORD
 *
acûssMask
) const

4508 ifĞ
šdex
 >ğ
»gi¡”edTy³Defs
.
	`G‘L’gth
() )

4511 ifĞ
ty³Id
 )

4512 *
ty³Id
 = 
	`G‘Ty³IdByDeş
(
»gi¡”edTy³Defs
[
šdex
]->
Çme
.
	`Add»ssOf
());

4514 ifĞ
cÚfigGroup
 )

4516 
asCCÚfigGroup
 *
group
 = 
	`FšdCÚfigGroupFÜObjeùTy³
(
»gi¡”edTy³Defs
[
šdex
]);

4517 ifĞ
group
 )

4518 *
cÚfigGroup
 = 
group
->
groupName
.
	`Add»ssOf
();

4520 *
cÚfigGroup
 = 0;

4523 ifĞ
acûssMask
 )

4524 *
acûssMask
 = 
»gi¡”edTy³Defs
[
šdex
]->accessMask;

4526 ifĞ
ÇmeS·û
 )

4527 *
ÇmeS·û
 = 
»gi¡”edTy³Defs
[
šdex
]->ÇmeS·û->
Çme
.
	`Add»ssOf
();

4529  
»gi¡”edTy³Defs
[
šdex
]->
Çme
.
	`Add»ssOf
();

4530 
	}
}

4533 
asCSütEngše
::
	$Regi¡”Enum
(cÚ¡ *
Çme
)

4536 ifĞ
NULL
 =ğ
Çme
 )

4537  
	`CÚfigE¼Ü
(
asINVALID_NAME
, "Regi¡”Enum", 
Çme
, 0);

4540 
asUINT
 
n
;

4541  
n
 = 0;‚ < 
objeùTy³s
.
	`G‘L’gth
();‚++ )

4542 ifĞ
objeùTy³s
[
n
] && objeùTy³s[n]->
Çme
 =ğÇm&& objeùTy³s[n]->
ÇmeS·û
 =ğ
deçuÉName¥aû
 )

4543  
asALREADY_REGISTERED
;

4546 
asCD©aTy³
 
dt
;

4547 
asCBud”
 
	`bld
(
this
, 0);

4548 
boŞ
 
ŞdMsgC®lback
 = 
msgC®lback
; msgC®lback = 
çl£
;

4549 
r
 = 
bld
.
	`P¬£D©aTy³
(
Çme
, &
dt
, 
deçuÉName¥aû
);

4550 
msgC®lback
 = 
ŞdMsgC®lback
;

4551 ifĞ
r
 >= 0 )

4552  
	`CÚfigE¼Ü
(
asERROR
, "Regi¡”Enum", 
Çme
, 0);

4555 
size_t
 
tok’L’
;

4556 
tok’
 = 
tok
.
	`G‘Tok’
(
Çme
, 
	`¡¾’
Òame), &
tok’L’
);

4557 ifĞ
tok’
 !ğ
‰Id’tif›r
 || 
	`¡¾’
(
Çme
è!ğ
tok’L’
 )

4558  
	`CÚfigE¼Ü
(
asINVALID_NAME
, "Regi¡”Enum", 
Çme
, 0);

4560 
r
 = 
bld
.
	`CheckNameCÚæiù
(
Çme
, 0, 0, 
deçuÉName¥aû
);

4561 ifĞ
r
 < 0 )

4562  
	`CÚfigE¼Ü
(
asNAME_TAKEN
, "Regi¡”Enum", 
Çme
, 0);

4564 
asCObjeùTy³
 *
¡
 = 
	`asNEW
×sCObjeùTy³)(
this
);

4565 ifĞ
¡
 == 0 )

4566  
	`CÚfigE¼Ü
(
asOUT_OF_MEMORY
, "Regi¡”Enum", 
Çme
, 0);

4568 
asCD©aTy³
 
d©aTy³
;

4569 
d©aTy³
.
	`C»©ePrim™ive
(
‰IÁ
, 
çl£
);

4571 
¡
->
æags
 = 
asOBJ_ENUM
 | 
asOBJ_SHARED
;

4572 
¡
->
size
 = 4;

4573 
¡
->
Çme
 =‚ame;

4574 
¡
->
ÇmeS·û
 = 
deçuÉName¥aû
;

4576 
objeùTy³s
.
	`PushLa¡
(
¡
);

4577 
»gi¡”edEnums
.
	`PushLa¡
(
¡
);

4579 
cu¼’tGroup
->
objTy³s
.
	`PushLa¡
(
¡
);

4581  
asSUCCESS
;

4582 
	}
}

4585 
asCSütEngše
::
	$Regi¡”EnumV®ue
(cÚ¡ *
ty³Name
, cÚ¡ *
v®ueName
, 
v®ue
)

4588 ifĞ
cu¼’tGroup
->
	`FšdTy³
(
ty³Name
) == 0 )

4589  
	`CÚfigE¼Ü
(
asWRONG_CONFIG_GROUP
, "Regi¡”EnumV®ue", 
ty³Name
, 
v®ueName
);

4591 
asCD©aTy³
 
dt
;

4592 
r
;

4593 
asCBud”
 
	`bld
(
this
, 0);

4594 
r
 = 
bld
.
	`P¬£D©aTy³
(
ty³Name
, &
dt
, 
deçuÉName¥aû
);

4595 ifĞ
r
 < 0 )

4596  
	`CÚfigE¼Ü
(
r
, "Regi¡”EnumV®ue", 
ty³Name
, 
v®ueName
);

4599 
asCObjeùTy³
 *
Ù
 = 
dt
.
	`G‘ObjeùTy³
();

4600 ifĞ
Ù
 =ğ0 || !(Ù->
æags
 & 
asOBJ_ENUM
) )

4601  
	`CÚfigE¼Ü
(
asINVALID_TYPE
, "Regi¡”EnumV®ue", 
ty³Name
, 
v®ueName
);

4603 ifĞ
NULL
 =ğ
v®ueName
 )

4604  
	`CÚfigE¼Ü
(
asINVALID_NAME
, "Regi¡”EnumV®ue", 
ty³Name
, 
v®ueName
);

4606 
tok’L’
;

4607 
asETok’CÏss
 
tok’CÏss
 = 
	`P¬£Tok’
(
v®ueName
, 0, &
tok’L’
);

4608 ifĞ
tok’CÏss
 !ğ
asTC_IDENTIFIER
 || 
tok’L’
 !ğ()
	`¡¾’
(
v®ueName
) )

4609  
	`CÚfigE¼Ü
(
asINVALID_NAME
, "Regi¡”EnumV®ue", 
ty³Name
, 
v®ueName
);

4611  
n
 = 0;‚ < 
Ù
->
’umV®ues
.
	`G‘L’gth
();‚++ )

4613 ifĞ
Ù
->
’umV®ues
[
n
]->
Çme
 =ğ
v®ueName
 )

4614  
	`CÚfigE¼Ü
(
asALREADY_REGISTERED
, "Regi¡”EnumV®ue", 
ty³Name
, 
v®ueName
);

4617 
asSEnumV®ue
 *
e
 = 
	`asNEW
(asSEnumValue);

4618 ifĞ
e
 == 0 )

4619  
	`CÚfigE¼Ü
(
asOUT_OF_MEMORY
, "Regi¡”EnumV®ue", 
ty³Name
, 
v®ueName
);

4621 
e
->
Çme
 = 
v®ueName
;

4622 
e
->
v®ue
 = value;

4624 
Ù
->
’umV®ues
.
	`PushLa¡
(
e
);

4626  
asSUCCESS
;

4627 
	}
}

4630 
asUINT
 
asCSütEngše
::
	$G‘EnumCouÁ
() const

4632  
	`asUINT
(
»gi¡”edEnums
.
	`G‘L’gth
());

4633 
	}
}

4636 cÚ¡ *
asCSütEngše
::
	$G‘EnumByIndex
(
asUINT
 
šdex
, *
’umTy³Id
, cÚ¡ **
ÇmeS·û
, cÚ¡ **
cÚfigGroup
, 
asDWORD
 *
acûssMask
) const

4638 ifĞ
šdex
 >ğ
»gi¡”edEnums
.
	`G‘L’gth
() )

4641 ifĞ
cÚfigGroup
 )

4643 
asCCÚfigGroup
 *
group
 = 
	`FšdCÚfigGroupFÜObjeùTy³
(
»gi¡”edEnums
[
šdex
]);

4644 ifĞ
group
 )

4645 *
cÚfigGroup
 = 
group
->
groupName
.
	`Add»ssOf
();

4647 *
cÚfigGroup
 = 0;

4650 ifĞ
acûssMask
 )

4651 *
acûssMask
 = 
»gi¡”edEnums
[
šdex
]->accessMask;

4653 ifĞ
’umTy³Id
 )

4654 *
’umTy³Id
 = 
	`G‘Ty³IdByDeş
(
»gi¡”edEnums
[
šdex
]->
Çme
.
	`Add»ssOf
());

4656 ifĞ
ÇmeS·û
 )

4657 *
ÇmeS·û
 = 
»gi¡”edEnums
[
šdex
]->ÇmeS·û->
Çme
.
	`Add»ssOf
();

4659  
»gi¡”edEnums
[
šdex
]->
Çme
.
	`Add»ssOf
();

4660 
	}
}

4663 
asCSütEngše
::
	$G‘EnumV®ueCouÁ
(
’umTy³Id
) const

4665 
asCD©aTy³
 
dt
 = 
	`G‘D©aTy³FromTy³Id
(
’umTy³Id
);

4666 
asCObjeùTy³
 *
t
 = 
dt
.
	`G‘ObjeùTy³
();

4667 ifĞ
t
 =ğ0 || !Ñ->
	`G‘FÏgs
(è& 
asOBJ_ENUM
) )

4668  
asINVALID_TYPE
;

4670  ()
t
->
’umV®ues
.
	`G‘L’gth
();

4671 
	}
}

4674 cÚ¡ *
asCSütEngše
::
	$G‘EnumV®ueByIndex
(
’umTy³Id
, 
asUINT
 
šdex
, *
outV®ue
) const

4677 
asCD©aTy³
 
dt
 = 
	`G‘D©aTy³FromTy³Id
(
’umTy³Id
);

4678 
asCObjeùTy³
 *
t
 = 
dt
.
	`G‘ObjeùTy³
();

4679 ifĞ
t
 =ğ0 || !Ñ->
	`G‘FÏgs
(è& 
asOBJ_ENUM
) )

4682 ifĞ
šdex
 >ğ
t
->
’umV®ues
.
	`G‘L’gth
() )

4685 ifĞ
outV®ue
 )

4686 *
outV®ue
 = 
t
->
’umV®ues
[
šdex
]->
v®ue
;

4688  
t
->
’umV®ues
[
šdex
]->
Çme
.
	`Add»ssOf
();

4689 
	}
}

4692 
asUINT
 
asCSütEngše
::
	$G‘ObjeùTy³CouÁ
() const

4694  
	`asUINT
(
»gi¡”edObjTy³s
.
	`G‘L’gth
());

4695 
	}
}

4698 
asIObjeùTy³
 *
asCSütEngše
::
	$G‘ObjeùTy³ByIndex
(
asUINT
 
šdex
) const

4700 ifĞ
šdex
 >ğ
»gi¡”edObjTy³s
.
	`G‘L’gth
() )

4703  
»gi¡”edObjTy³s
[
šdex
];

4704 
	}
}

4707 
asIObjeùTy³
 *
asCSütEngše
::
	$G‘ObjeùTy³ByName
(cÚ¡ *
Çme
) const

4709  
asUINT
 
n
 = 0;‚ < 
»gi¡”edObjTy³s
.
	`G‘L’gth
();‚++ )

4711 ifĞ
»gi¡”edObjTy³s
[
n
]->
Çme
 ==‚ame &&

4712 
»gi¡”edObjTy³s
[
n
]->
ÇmeS·û
 =ğ
deçuÉName¥aû
 )

4713  
»gi¡”edObjTy³s
[
n
];

4717 
	}
}

4720 
asIObjeùTy³
 *
asCSütEngše
::
	$G‘ObjeùTy³ById
(
ty³Id
) const

4722 
asCD©aTy³
 
dt
 = 
	`G‘D©aTy³FromTy³Id
(
ty³Id
);

4725 ifĞ!
dt
.
	`IsV®id
() )  0;

4728 ifĞ
dt
.
	`G‘ObjeùTy³
(è&& dt.G‘ObjeùTy³()->
	`G‘FÏgs
(è& 
asOBJ_ENUM
 )

4731  
dt
.
	`G‘ObjeùTy³
();

4732 
	}
}

4735 
asISütFunùiÚ
 *
asCSütEngše
::
	$G‘FunùiÚById
(
funcId
) const

4737  
	`G‘SütFunùiÚ
(
funcId
);

4738 
	}
}

4741 
boŞ
 
asCSütEngše
::
	$IsTem¶©eTy³
(cÚ¡ *
Çme
) const

4744  
n
 = 0;‚ < 
objeùTy³s
.
	`G‘L’gth
();‚++ )

4746 ifĞ
objeùTy³s
[
n
] && objeùTy³s[n]->
Çme
 ==‚ame )

4748  
objeùTy³s
[
n
]->
æags
 & 
asOBJ_TEMPLATE
 ? 
Œue
 : 
çl£
;

4752  
çl£
;

4753 
	}
}

4756 
asCSütEngše
::
	$AddCÚ¡ªtSŒšg
(cÚ¡ *
¡r
, 
size_t
 
Ën
)

4760 
	`asASSERT
Ğ
isBudšg
 );

4765 
asSM­Node
<
asCSŒšgPoš‹r
, > *
cursÜ
 = 0;

4766 ià(
¡ršgToIdM­
.
	`MoveTo
(&
cursÜ
, 
	`asCSŒšgPoš‹r
(
¡r
, 
Ën
)))

4767  
cursÜ
->
v®ue
;

4770 
asCSŒšg
 *
c¡r
 = 
	`asNEW
×sCSŒšg)(
¡r
, 
Ën
);

4771 ifĞ
c¡r
 )

4773 
¡ršgCÚ¡ªts
.
	`PushLa¡
(
c¡r
);

4774 
šdex
 = ()
¡ršgCÚ¡ªts
.
	`G‘L’gth
() - 1;

4775 
¡ršgToIdM­
.
	`In£¹
(
	`asCSŒšgPoš‹r
(
c¡r
), 
šdex
);

4778 
	`asASSERT
(
¡ršgCÚ¡ªts
.
	`G‘L’gth
() <= 65536);

4780  
šdex
;

4784 
	}
}

4787 cÚ¡ 
asCSŒšg
 &
asCSütEngše
::
	$G‘CÚ¡ªtSŒšg
(
id
)

4789  *
¡ršgCÚ¡ªts
[
id
];

4790 
	}
}

4793 
asCSütEngše
::
	$G‘SütSeùiÚNameIndex
(cÚ¡ *
Çme
)

4795 
	`ACQUIREEXCLUSIVE
(
’gšeRWLock
);

4802  
asUINT
 
n
 = 0;‚ < 
sütSeùiÚNames
.
	`G‘L’gth
();‚++ )

4804 ifĞ
sütSeùiÚNames
[
n
]->
	`Com·»
(
Çme
) == 0 )

4806 
	`RELEASEEXCLUSIVE
(
’gšeRWLock
);

4807  
n
;

4811 
asCSŒšg
 *
¡r
 = 
	`asNEW
×sCSŒšg)(
Çme
);

4812 ifĞ
¡r
 )

4813 
sütSeùiÚNames
.
	`PushLa¡
(
¡r
);

4814 
r
 = (
sütSeùiÚNames
.
	`G‘L’gth
()-1);

4816 
	`RELEASEEXCLUSIVE
(
’gšeRWLock
);

4818  
r
;

4819 
	}
}

4822 
asCSütEngše
::
	$S‘EngšeU£rD©aCËªupC®lback
(
asCLEANENGINEFUNC_t
 
ÿÎback
, 
asPWORD
 
ty³
)

4824 
	`ACQUIREEXCLUSIVE
(
’gšeRWLock
);

4826  
asUINT
 
n
 = 0;‚ < 
ş—nEngšeFuncs
.
	`G‘L’gth
();‚++ )

4828 ifĞ
ş—nEngšeFuncs
[
n
].
ty³
 ==ype )

4830 
ş—nEngšeFuncs
[
n
].
ş—nFunc
 = 
ÿÎback
;

4832 
	`RELEASEEXCLUSIVE
(
’gšeRWLock
);

4837 
SEngšeCËª
 
Ùc
 = {
ty³
, 
ÿÎback
};

4838 
ş—nEngšeFuncs
.
	`PushLa¡
(
Ùc
);

4840 
	`RELEASEEXCLUSIVE
(
’gšeRWLock
);

4841 
	}
}

4844 
asCSütEngše
::
	$S‘ModuËU£rD©aCËªupC®lback
(
asCLEANMODULEFUNC_t
 
ÿÎback
)

4846 
ş—nModuËFunc
 = 
ÿÎback
;

4847 
	}
}

4850 
asCSütEngše
::
	$S‘CÚ‹xtU£rD©aCËªupC®lback
(
asCLEANCONTEXTFUNC_t
 
ÿÎback
)

4852 
ş—nCÚ‹xtFunc
 = 
ÿÎback
;

4853 
	}
}

4856 
asCSütEngše
::
	$S‘FunùiÚU£rD©aCËªupC®lback
(
asCLEANFUNCTIONFUNC_t
 
ÿÎback
)

4858 
ş—nFunùiÚFunc
 = 
ÿÎback
;

4859 
	}
}

4862 
asCSütEngše
::
	$S‘ObjeùTy³U£rD©aCËªupC®lback
(
asCLEANOBJECTTYPEFUNC_t
 
ÿÎback
, 
asPWORD
 
ty³
)

4864 
	`ACQUIREEXCLUSIVE
(
’gšeRWLock
);

4866  
asUINT
 
n
 = 0;‚ < 
ş—nObjeùTy³Funcs
.
	`G‘L’gth
();‚++ )

4868 ifĞ
ş—nObjeùTy³Funcs
[
n
].
ty³
 ==ype )

4870 
ş—nObjeùTy³Funcs
[
n
].
ş—nFunc
 = 
ÿÎback
;

4872 
	`RELEASEEXCLUSIVE
(
’gšeRWLock
);

4877 
SObjTy³CËª
 
Ùc
 = {
ty³
, 
ÿÎback
};

4878 
ş—nObjeùTy³Funcs
.
	`PushLa¡
(
Ùc
);

4880 
	`RELEASEEXCLUSIVE
(
’gšeRWLock
);

4881 
	}
}

4883 
END_AS_NAMESPACE


	@../src/script/as_scriptfunction.cpp

40 
	~"as_cÚfig.h
"

41 
	~"as_sütfunùiÚ.h
"

42 
	~"as_tok’def.h
"

43 
	~"as_sü‹ngše.h
"

44 
	~"as_ÿÎfunc.h
"

45 
	~"as_by‹code.h
"

46 
	~"as_‹xts.h
"

48 
	gBEGIN_AS_NAMESPACE


50 #ifdeà
AS_MAX_PORTABILITY


52 
	$SütFunùiÚ_AddRef_G’”ic
(
asISütG’”ic
 *
g’
)

54 
asCSütFunùiÚ
 *
£lf
 = (asCSütFunùiÚ*)
g’
->
	`G‘Objeù
();

55 
£lf
->
	`AddRef
();

56 
	}
}

58 
	$SütFunùiÚ_R–—£_G’”ic
(
asISütG’”ic
 *
g’
)

60 
asCSütFunùiÚ
 *
£lf
 = (asCSütFunùiÚ*)
g’
->
	`G‘Objeù
();

61 
£lf
->
	`R–—£
();

62 
	}
}

64 
	$SütFunùiÚ_G‘RefCouÁ_G’”ic
(
asISütG’”ic
 *
g’
)

66 
asCSütFunùiÚ
 *
£lf
 = (asCSütFunùiÚ*)
g’
->
	`G‘Objeù
();

67 *(*)
g’
->
	`G‘Add»ssOfR‘uºLoÿtiÚ
(èğ
£lf
->
	`G‘RefCouÁ
();

68 
	}
}

70 
	$SütFunùiÚ_S‘FÏg_G’”ic
(
asISütG’”ic
 *
g’
)

72 
asCSütFunùiÚ
 *
£lf
 = (asCSütFunùiÚ*)
g’
->
	`G‘Objeù
();

73 
£lf
->
	`S‘FÏg
();

74 
	}
}

76 
	$SütFunùiÚ_G‘FÏg_G’”ic
(
asISütG’”ic
 *
g’
)

78 
asCSütFunùiÚ
 *
£lf
 = (asCSütFunùiÚ*)
g’
->
	`G‘Objeù
();

79 *(
boŞ
*)
g’
->
	`G‘Add»ssOfR‘uºLoÿtiÚ
(èğ
£lf
->
	`G‘FÏg
();

80 
	}
}

82 
	$SütFunùiÚ_EnumReã»nûs_G’”ic
(
asISütG’”ic
 *
g’
)

84 
asCSütFunùiÚ
 *
£lf
 = (asCSütFunùiÚ*)
g’
->
	`G‘Objeù
();

85 
asISütEngše
 *
’gše
 = *×sISütEngše**)
g’
->
	`G‘Add»ssOfArg
(0);

86 
£lf
->
	`EnumReã»nûs
(
’gše
);

87 
	}
}

89 
	$SütFunùiÚ_R–—£AÎHªdËs_G’”ic
(
asISütG’”ic
 *
g’
)

91 
asCSütFunùiÚ
 *
£lf
 = (asCSütFunùiÚ*)
g’
->
	`G‘Objeù
();

92 
asISütEngše
 *
’gše
 = *×sISütEngše**)
g’
->
	`G‘Add»ssOfArg
(0);

93 
£lf
->
	`R–—£AÎHªdËs
(
’gše
);

94 
	}
}

99 
	$Regi¡”SütFunùiÚ
(
asCSütEngše
 *
’gše
)

102 
r
 = 0;

103 
	`UNUSED_VAR
(
r
);

104 
’gše
->
funùiÚBehaviours
.engine =ƒngine;

105 
’gše
->
funùiÚBehaviours
.
æags
 = 
asOBJ_REF
 | 
asOBJ_GC
;

106 
’gše
->
funùiÚBehaviours
.
Çme
 = "_builtin_function_";

107 #iâdeà
AS_MAX_PORTABILITY


108 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
funùiÚBehaviours
, 
asBEHAVE_ADDREF
, "void f()", 
	`asMETHOD
(
asCSütFunùiÚ
,
AddRef
), 
asCALL_THISCALL
); 
	`asASSERT
(„ >= 0 );

109 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
funùiÚBehaviours
, 
asBEHAVE_RELEASE
, "void f()", 
	`asMETHOD
(
asCSütFunùiÚ
,
R–—£
), 
asCALL_THISCALL
); 
	`asASSERT
(„ >= 0 );

110 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
funùiÚBehaviours
, 
asBEHAVE_GETREFCOUNT
, "šˆf()", 
	`asMETHOD
(
asCSütFunùiÚ
,
G‘RefCouÁ
), 
asCALL_THISCALL
); 
	`asASSERT
(„ >= 0 );

111 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
funùiÚBehaviours
, 
asBEHAVE_SETGCFLAG
, "void f()", 
	`asMETHOD
(
asCSütFunùiÚ
,
S‘FÏg
), 
asCALL_THISCALL
); 
	`asASSERT
(„ >= 0 );

112 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
funùiÚBehaviours
, 
asBEHAVE_GETGCFLAG
, "boŞ f()", 
	`asMETHOD
(
asCSütFunùiÚ
,
G‘FÏg
), 
asCALL_THISCALL
); 
	`asASSERT
(„ >= 0 );

113 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
funùiÚBehaviours
, 
asBEHAVE_ENUMREFS
, "void f(št&š)", 
	`asMETHOD
(
asCSütFunùiÚ
,
EnumReã»nûs
), 
asCALL_THISCALL
); 
	`asASSERT
(„ >= 0 );

114 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
funùiÚBehaviours
, 
asBEHAVE_RELEASEREFS
, "void f(št&š)", 
	`asMETHOD
(
asCSütFunùiÚ
,
R–—£AÎHªdËs
), 
asCALL_THISCALL
); 
	`asASSERT
(„ >= 0 );

116 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
funùiÚBehaviours
, 
asBEHAVE_ADDREF
, "void f()", 
	`asFUNCTION
(
SütFunùiÚ_AddRef_G’”ic
), 
asCALL_GENERIC
); 
	`asASSERT
(„ >= 0 );

117 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
funùiÚBehaviours
, 
asBEHAVE_RELEASE
, "void f()", 
	`asFUNCTION
(
SütFunùiÚ_R–—£_G’”ic
), 
asCALL_GENERIC
); 
	`asASSERT
(„ >= 0 );

118 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
funùiÚBehaviours
, 
asBEHAVE_GETREFCOUNT
, "šˆf()", 
	`asFUNCTION
(
SütFunùiÚ_G‘RefCouÁ_G’”ic
), 
asCALL_GENERIC
); 
	`asASSERT
(„ >= 0 );

119 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
funùiÚBehaviours
, 
asBEHAVE_SETGCFLAG
, "void f()", 
	`asFUNCTION
(
SütFunùiÚ_S‘FÏg_G’”ic
), 
asCALL_GENERIC
); 
	`asASSERT
(„ >= 0 );

120 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
funùiÚBehaviours
, 
asBEHAVE_GETGCFLAG
, "boŞ f()", 
	`asFUNCTION
(
SütFunùiÚ_G‘FÏg_G’”ic
), 
asCALL_GENERIC
); 
	`asASSERT
(„ >= 0 );

121 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
funùiÚBehaviours
, 
asBEHAVE_ENUMREFS
, "void f(št&š)", 
	`asFUNCTION
(
SütFunùiÚ_EnumReã»nûs_G’”ic
), 
asCALL_GENERIC
); 
	`asASSERT
(„ >= 0 );

122 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
funùiÚBehaviours
, 
asBEHAVE_RELEASEREFS
, "void f(št&š)", 
	`asFUNCTION
(
SütFunùiÚ_R–—£AÎHªdËs_G’”ic
), 
asCALL_GENERIC
); 
	`asASSERT
(„ >= 0 );

124 
	}
}

127 
	gasCSütFunùiÚ
::
	$asCSütFunùiÚ
(
asCSütEngše
 *
’gše
, 
asCModuË
 *
mod
, 
asEFuncTy³
 
_funcTy³
)

129 
»fCouÁ
.
	`£t
(1);

130 
this
->
’gše
 =ƒngine;

131 
funcTy³
 = 
_funcTy³
;

132 
moduË
 = 
mod
;

133 
objeùTy³
 = 0;

134 
Çme
 = "";

135 
isR—dOÆy
 = 
çl£
;

136 
isPriv©e
 = 
çl£
;

137 
isFš®
 = 
çl£
;

138 
isOv”ride
 = 
çl£
;

139 
¡ackN“ded
 = 0;

140 
sysFuncIÁf
 = 0;

141 
sigÇtu»Id
 = 0;

142 
sütSeùiÚIdx
 = -1;

143 
dÚtCËªUpOnExû±iÚ
 = 
çl£
;

144 
vfTabËIdx
 = -1;

145 
j™FunùiÚ
 = 0;

146 
gcFÏg
 = 
çl£
;

147 
u£rD©a
 = 0;

148 
id
 = 0;

149 
acûssMask
 = 0xFFFFFFFF;

150 
isSh¬ed
 = 
çl£
;

151 
v¬ŸbËS·û
 = 0;

152 
ÇmeS·û
 = 
’gše
->
ÇmeS·ûs
[0];

159 ifĞ
funcTy³
 =ğ
asFUNC_SCRIPT
 )

160 
’gše
->
gc
.
	`AddSütObjeùToGC
(
this
, &’gše->
funùiÚBehaviours
);

161 
	}
}

164 
	gasCSütFunùiÚ
::~
	$asCSütFunùiÚ
()

168 
	`asASSERT
Ğ
funcTy³
 =ğ
asFUNC_DUMMY
 ||

169 
funcTy³
 =ğ
asFUNC_IMPORTED
 ||

170 
»fCouÁ
.
	`g‘
() == 0 );

173 ifĞ
’gše
 == 0 ) ;

175 
	`De¡royIÁ”Çl
();

180 ifĞ
funcTy³
 !ğ-1 && funcTy³ !ğ
asFUNC_IMPORTED
 && 
id
 )

181 
’gše
->
	`F»eSütFunùiÚId
(
id
);

182 
id
 = 0;

185 
’gše
 = 0;

186 
	}
}

189 
	gasCSütFunùiÚ
::
	$De¡royIÁ”Çl
()

192 ifĞ
u£rD©a
 && 
’gše
->
ş—nFunùiÚFunc
 )

193 
’gše
->
	`ş—nFunùiÚFunc
(
this
);

194 
u£rD©a
 = 0;

197 
	`R–—£Reã»nûs
();

198 
·¿m‘”Ty³s
.
	`S‘L’gth
(0);

199 
»tuºTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰Void
, 
çl£
);

200 
by‹Code
.
	`S‘L’gth
(0);

202  
asUINT
 
n
 = 0;‚ < 
v¬ŸbËs
.
	`G‘L’gth
();‚++ )

203 
	`asDELETE
(
v¬ŸbËs
[
n
],
asSSütV¬ŸbË
);

204 
v¬ŸbËs
.
	`S‘L’gth
(0);

206  
asUINT
 
p
 = 0;… < 
deçuÉArgs
.
	`G‘L’gth
();…++ )

207 ifĞ
deçuÉArgs
[
p
] )

208 
	`asDELETE
(
deçuÉArgs
[
p
], 
asCSŒšg
);

209 
deçuÉArgs
.
	`S‘L’gth
(0);

211 ifĞ
sysFuncIÁf
 )

212 
	`asDELETE
(
sysFuncIÁf
,
asSSy¡emFunùiÚIÁ”çû
);

213 
sysFuncIÁf
 = 0;

214 
	}
}

217 
	gasCSütFunùiÚ
::
	$G‘Id
() const

219  
id
;

220 
	}
}

223 
	gasCSütFunùiÚ
::
	$AddRef
() const

225 
gcFÏg
 = 
çl£
;

226 
	`asASSERT
Ğ
funcTy³
 !ğ
asFUNC_IMPORTED
 );

227  
»fCouÁ
.
	`©omicInc
();

228 
	}
}

231 
	gasCSütFunùiÚ
::
	$R–—£
() const

233 
gcFÏg
 = 
çl£
;

234 
	`asASSERT
Ğ
funcTy³
 !ğ
asFUNC_IMPORTED
 );

235 
r
 = 
»fCouÁ
.
	`©omicDec
();

236 ifĞ
r
 =ğ0 && 
funcTy³
 !ğ
asFUNC_DUMMY
 )

237 
	`asDELETE
(
cÚ¡_ÿ¡
<
asCSütFunùiÚ
*>(
this
),asCScriptFunction);

239  
r
;

240 
	}
}

243 cÚ¡ *
	gasCSütFunùiÚ
::
	$G‘ModuËName
() const

245 ifĞ
moduË
 )

247  
moduË
->
Çme
.
	`Add»ssOf
();

251 
	}
}

254 
asIObjeùTy³
 *
	gasCSütFunùiÚ
::
	$G‘ObjeùTy³
() const

256  
objeùTy³
;

257 
	}
}

260 cÚ¡ *
	gasCSütFunùiÚ
::
	$G‘ObjeùName
() const

262 ifĞ
objeùTy³
 )

263  
objeùTy³
->
	`G‘Name
();

266 
	}
}

269 cÚ¡ *
	gasCSütFunùiÚ
::
	$G‘Name
() const

271  
Çme
.
	`Add»ssOf
();

272 
	}
}

275 cÚ¡ *
	gasCSütFunùiÚ
::
	$G‘Name¥aû
() const

277  
ÇmeS·û
->
Çme
.
	`Add»ssOf
();

278 
	}
}

281 
boŞ
 
	gasCSütFunùiÚ
::
	$IsR—dOÆy
() const

283  
isR—dOÆy
;

284 
	}
}

287 
boŞ
 
	gasCSütFunùiÚ
::
	$IsPriv©e
() const

289  
isPriv©e
;

290 
	}
}

293 
	gasCSütFunùiÚ
::
	$G‘S·ûN“dedFÜArgum’ts
()

296 
s
 = 0;

297  
asUINT
 
n
 = 0;‚ < 
·¿m‘”Ty³s
.
	`G‘L’gth
();‚++ )

298 
s
 +ğ
·¿m‘”Ty³s
[
n
].
	`G‘SizeOnSckDWÜds
();

300  
s
;

301 
	}
}

304 
	gasCSütFunùiÚ
::
	$G‘S·ûN“dedFÜR‘uºV®ue
()

306  
»tuºTy³
.
	`G‘SizeOnSckDWÜds
();

307 
	}
}

310 
boŞ
 
	gasCSütFunùiÚ
::
	$DÛsR‘uºOnSck
() const

312 ifĞ
»tuºTy³
.
	`G‘ObjeùTy³
() &&

313 (
»tuºTy³
.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_VALUE
) &&

314 !
»tuºTy³
.
	`IsReã»nû
() )

315  
Œue
;

317  
çl£
;

318 
	}
}

321 
asCSŒšg
 
	gasCSütFunùiÚ
::
	$G‘Deş¬©iÚSŒ
(
boŞ
 
šşudeObjeùName
, boŞ 
šşudeName¥aû
) const

323 
asCSŒšg
 
¡r
;

328 ifĞ!(
»tuºTy³
.
	`G‘Tok’Ty³
(è=ğ
‰Void
 &&

329 
objeùTy³
 &&

330 (
Çme
 =ğ
objeùTy³
->Çm|| (Çme.
	`G‘L’gth
() > 0 &&‚ame[0] == '~'))) )

332 
¡r
 = 
»tuºTy³
.
	`FÜm©
();

333 
¡r
 += " ";

335 ifĞ
objeùTy³
 && 
šşudeObjeùName
 )

337 ifĞ
šşudeName¥aû
 )

338 
¡r
 +ğ
objeùTy³
->
ÇmeS·û
->
Çme
 + "::";

340 ifĞ
objeùTy³
->
Çme
 != "" )

341 
¡r
 +ğ
objeùTy³
->
Çme
 + "::";

343 
¡r
 += "_unnamed_type_::";

345 ifĞ
šşudeName¥aû
 )

347 
¡r
 +ğ
ÇmeS·û
->
Çme
 + "::";

349 ifĞ
Çme
 == "" )

350 
¡r
 += "_unnamed_function_(";

352 
¡r
 +ğ
Çme
 + "(";

354 ifĞ
·¿m‘”Ty³s
.
	`G‘L’gth
() > 0 )

356 
asUINT
 
n
;

357  
n
 = 0;‚ < 
·¿m‘”Ty³s
.
	`G‘L’gth
() - 1;‚++ )

359 
¡r
 +ğ
·¿m‘”Ty³s
[
n
].
	`FÜm©
();

360 ifĞ
·¿m‘”Ty³s
[
n
].
	`IsReã»nû
(è&& 
šOutFÏgs
.
	`G‘L’gth
() >‚ )

362 ifĞ
šOutFÏgs
[
n
] =ğ
asTM_INREF
 ) 
¡r
 += "in";

363 ifĞ
šOutFÏgs
[
n
] =ğ
asTM_OUTREF
 ) 
¡r
 += "out";

364 ifĞ
šOutFÏgs
[
n
] =ğ
asTM_INOUTREF
 ) 
¡r
 += "inout";

367 ifĞ
deçuÉArgs
.
	`G‘L’gth
(è> 
n
 && defaultArgs[n] )

369 
asCSŒšg
 
tmp
;

370 
tmp
.
	`FÜm©
("‡rg%d = %s", 
n
, 
deçuÉArgs
[n]->
	`Add»ssOf
());

371 
¡r
 +ğ
tmp
;

374 
¡r
 += ", ";

378 
¡r
 +ğ
·¿m‘”Ty³s
[
n
].
	`FÜm©
();

379 ifĞ
·¿m‘”Ty³s
[
n
].
	`IsReã»nû
(è&& 
šOutFÏgs
.
	`G‘L’gth
() >‚ )

381 ifĞ
šOutFÏgs
[
n
] =ğ
asTM_INREF
 ) 
¡r
 += "in";

382 ifĞ
šOutFÏgs
[
n
] =ğ
asTM_OUTREF
 ) 
¡r
 += "out";

383 ifĞ
šOutFÏgs
[
n
] =ğ
asTM_INOUTREF
 ) 
¡r
 += "inout";

386 ifĞ
deçuÉArgs
.
	`G‘L’gth
(è> 
n
 && defaultArgs[n] )

388 
asCSŒšg
 
tmp
;

389 
tmp
.
	`FÜm©
("‡rg%d = %s", 
n
, 
deçuÉArgs
[n]->
	`Add»ssOf
());

390 
¡r
 +ğ
tmp
;

394 
¡r
 += ")";

396 ifĞ
isR—dOÆy
 )

397 
¡r
 += " const";

399  
¡r
;

400 
	}
}

403 
	gasCSütFunùiÚ
::
	$FšdNextLšeW™hCode
(
lše
) const

405 ifĞ
lšeNumb”s
.
	`G‘L’gth
() == 0 )  -1;

409 ifĞ
lše
 < (
lšeNumb”s
[1]&0xFFFFF) )  -1;

410 ifĞ
lše
 > (
lšeNumb”s
[lšeNumb”s.
	`G‘L’gth
()-1]&0xFFFFF) )  -1;

414 ifĞ
lše
 =ğ(
lšeNumb”s
[1]&0xFFFFF) ) †ine;

415  
asUINT
 
n
 = 3;‚ < 
lšeNumb”s
.
	`G‘L’gth
();‚ += 2 )

417 ifĞ
lše
 <ğ(
lšeNumb”s
[
n
]&0xFFFFF) )

418  (
lšeNumb”s
[
n
]&0xFFFFF);

422 
	}
}

425 
	gasCSütFunùiÚ
::
	$G‘LšeNumb”
(
´og¿mPos™iÚ
)

427 ifĞ
lšeNumb”s
.
	`G‘L’gth
() == 0 )  0;

430 
max
 = ()
lšeNumb”s
.
	`G‘L’gth
()/2 - 1;

431 
mš
 = 0;

432 
i
 = 
max
/2;

436 ifĞ
lšeNumb”s
[
i
*2] < 
´og¿mPos™iÚ
 )

439 ifĞ
max
 =ğ
i
 )  
lšeNumb”s
[i*2+1];

440 ifĞ
lšeNumb”s
[
i
*2+2] > 
´og¿mPos™iÚ
 ) †ineNumbers[i*2+1];

442 
mš
 = 
i
 + 1;

443 
i
 = (
max
 + 
mš
)/2;

445 ifĞ
lšeNumb”s
[
i
*2] > 
´og¿mPos™iÚ
 )

448 ifĞ
mš
 =ğ
i
 )  
lšeNumb”s
[i*2+1];

450 
max
 = 
i
 - 1;

451 
i
 = (
max
 + 
mš
)/2;

456  
lšeNumb”s
[
i
*2+1];

459 
	}
}

462 
asEFuncTy³
 
	gasCSütFunùiÚ
::
	$G‘FuncTy³
() const

464  
funcTy³
;

465 
	}
}

468 
asUINT
 
	gasCSütFunùiÚ
::
	$G‘V¬CouÁ
() const

470  (
v¬ŸbËs
.
	`G‘L’gth
());

471 
	}
}

474 
	gasCSütFunùiÚ
::
	$G‘V¬
(
asUINT
 
šdex
, cÚ¡ **
Çme
, *
ty³Id
) const

476 ifĞ
šdex
 >ğ
v¬ŸbËs
.
	`G‘L’gth
() )

477  
asINVALID_ARG
;

479 ifĞ
Çme
 )

480 *
Çme
 = 
v¬ŸbËs
[
šdex
]->Çme.
	`Add»ssOf
();

481 ifĞ
ty³Id
 )

482 *
ty³Id
 = 
’gše
->
	`G‘Ty³IdFromD©aTy³
(
v¬ŸbËs
[
šdex
]->
ty³
);

484  
asSUCCESS
;

485 
	}
}

488 cÚ¡ *
	gasCSütFunùiÚ
::
	$G‘V¬Deş
(
asUINT
 
šdex
) const

490 ifĞ
šdex
 >ğ
v¬ŸbËs
.
	`G‘L’gth
() )

493 
asCSŒšg
 *
‹mpSŒšg
 = &
asCTh»adMªag”
::
	`G‘LoÿlD©a
()->
¡ršg
;

494 *
‹mpSŒšg
 = 
v¬ŸbËs
[
šdex
]->
ty³
.
	`FÜm©
();

495 *
‹mpSŒšg
 +ğ" " + 
v¬ŸbËs
[
šdex
]->
Çme
;

497  
‹mpSŒšg
->
	`Add»ssOf
();

498 
	}
}

501 
	gasCSütFunùiÚ
::
	$AddV¬ŸbË
(
asCSŒšg
 &
Çme
, 
asCD©aTy³
 &
ty³
, 
¡ackOff£t
)

503 
asSSütV¬ŸbË
 *
v¬
 = 
	`asNEW
(asSScriptVariable);

504 ifĞ
v¬
 == 0 )

509 
v¬
->
Çme
 =‚ame;

510 
v¬
->
ty³
 =ype;

511 
v¬
->
¡ackOff£t
 = stackOffset;

512 
v¬
->
deş¬edAtProg¿mPos
 = 0;

513 
v¬ŸbËs
.
	`PushLa¡
(
v¬
);

514 
	}
}

517 
	gasCSütFunùiÚ
::
	$Compu‹SigÇtu»Id
()

523  
asUINT
 
n
 = 0;‚ < 
’gše
->
sigÇtu»Ids
.
	`G‘L’gth
();‚++ )

525 ifĞ!
	`IsSigÇtu»Equ®
(
’gše
->
sigÇtu»Ids
[
n
]) ) ;

530 
sigÇtu»Id
 = 
’gše
->
sigÇtu»Ids
[
n
]->signatureId;

534 
sigÇtu»Id
 = 
id
;

535 
’gše
->
sigÇtu»Ids
.
	`PushLa¡
(
this
);

536 
	}
}

539 
boŞ
 
	gasCSütFunùiÚ
::
	$IsSigÇtu»Equ®
(cÚ¡ 
asCSütFunùiÚ
 *
func
) const

541 ifĞ!
	`IsSigÇtu»Exû±NameEqu®
(
func
è|| 
Çme
 !ğfunc->Çmè 
çl£
;

543  
Œue
;

544 
	}
}

547 
boŞ
 
	gasCSütFunùiÚ
::
	$IsSigÇtu»Exû±NameEqu®
(cÚ¡ 
asCSütFunùiÚ
 *
func
) const

549  
	`IsSigÇtu»Exû±NameEqu®
(
func
->
»tuºTy³
, func->
·¿m‘”Ty³s
, func->
šOutFÏgs
, func->
objeùTy³
, func->
isR—dOÆy
);

550 
	}
}

553 
boŞ
 
	gasCSütFunùiÚ
::
IsSigÇtu»Exû±NameEqu®
(cÚ¡ 
asCD©aTy³
 &
»tTy³
, cÚ¡ 
asCA¼ay
<asCD©aTy³> &
·¿mTy³s
, cÚ¡‡sCA¼ay<
asETy³Modif›rs
> &
·¿mInOut
, cÚ¡ 
asCObjeùTy³
 *
objTy³
, boŞ 
»adOÆy
) const

555 ifĞ
	gthis
->
	g»tuºTy³
 !ğ
»tTy³
 )  
çl£
;

557  
IsSigÇtu»Exû±NameAndR‘uºTy³Equ®
(
·¿mTy³s
, 
·¿mInOut
, 
objTy³
, 
»adOÆy
);

561 
boŞ
 
	gasCSütFunùiÚ
::
IsSigÇtu»Exû±NameAndR‘uºTy³Equ®
(cÚ¡ 
asCA¼ay
<
asCD©aTy³
> &
·¿mTy³s
, cÚ¡‡sCA¼ay<
asETy³Modif›rs
> &
·¿mInOut
, cÚ¡ 
asCObjeùTy³
 *
objTy³
, boŞ 
»adOÆy
) const

563 ifĞ
	gthis
->
	gisR—dOÆy
 !ğ
»adOÆy
 )  
çl£
;

564 ifĞ
	gthis
->
	gšOutFÏgs
 !ğ
·¿mInOut
 )  
çl£
;

565 ifĞ
	gthis
->
	g·¿m‘”Ty³s
 !ğ
·¿mTy³s
 )  
çl£
;

566 ifĞ(
	gthis
->
	gobjeùTy³
 !ğ0è!ğ(
objTy³
 !ğ0èè 
çl£
;

568  
	gŒue
;

572 
	gasCSütFunùiÚ
::
	$AddReã»nûs
()

574 
asUINT
 
n
;

581 
asCA¼ay
<*> 
±rs
;

584 ifĞ
by‹Code
.
	`G‘L’gth
() )

586 ifĞ
»tuºTy³
.
	`IsObjeù
() )

587 
»tuºTy³
.
	`G‘ObjeùTy³
()->
	`AddRef
();

589  
asUINT
 
p
 = 0;… < 
·¿m‘”Ty³s
.
	`G‘L’gth
();…++ )

590 ifĞ
·¿m‘”Ty³s
[
p
].
	`IsObjeù
() )

591 
·¿m‘”Ty³s
[
p
].
	`G‘ObjeùTy³
()->
	`AddRef
();

593  
asUINT
 
n
 = 0;‚ < 
objV¬ŸbËTy³s
.
	`G‘L’gth
();‚++ )

594 
objV¬ŸbËTy³s
[
n
]->
	`AddRef
();

598  
n
 = 0;‚ < 
by‹Code
.
	`G‘L’gth
();‚ +ğ
asBCTy³Size
[
asBCInfo
[*(
asBYTE
*)&by‹Code[n]].
ty³
] )

600  *(
asBYTE
*)&
by‹Code
[
n
] )

603 
asBC_OBJTYPE
:

604 
asBC_FREE
:

605 
asBC_REFCPY
:

606 
asBC_RefCpyV
:

608 
asCObjeùTy³
 *
objTy³
 = (asCObjeùTy³*)
	`asBC_PTRARG
(&
by‹Code
[
n
]);

609 
objTy³
->
	`AddRef
();

614 
asBC_ALLOC
:

616 
asCObjeùTy³
 *
objTy³
 = (asCObjeùTy³*)
	`asBC_PTRARG
(&
by‹Code
[
n
]);

617 
objTy³
->
	`AddRef
();

619 
func
 = 
	`asBC_INTARG
(&
by‹Code
[
n
]+
AS_PTR_SIZE
);

620 ifĞ
func
 )

621 
’gše
->
sütFunùiÚs
[
func
]->
	`AddRef
();

626 
asBC_PGA
:

627 
asBC_PshGPŒ
:

628 
asBC_LDG
:

629 
asBC_PshG4
:

630 
asBC_LdGRdR4
:

631 
asBC_CpyGtoV4
:

632 
asBC_CpyVtoG4
:

633 
asBC_S‘G4
:

636 *
gv¬PŒ
 = (*)
	`asBC_PTRARG
(&
by‹Code
[
n
]);

637 ifĞ!
gv¬PŒ
 ) ;

638 
asCGlob®Prİ”ty
 *
´İ
 = 
	`G‘Prİ”tyByGlob®V¬PŒ
(
gv¬PŒ
);

639 ifĞ!
´İ
 ) ;

642 ifĞ!
±rs
.
	`Exi¡s
(
gv¬PŒ
) )

644 
´İ
->
	`AddRef
();

645 
±rs
.
	`PushLa¡
(
gv¬PŒ
);

648 
asCCÚfigGroup
 *
group
 = 
’gše
->
	`FšdCÚfigGroupFÜGlob®V¬
(
´İ
->
id
);

649 ifĞ
group
 !ğ0 ) group->
	`AddRef
();

654 
asBC_CALLSYS
:

656 
funcId
 = 
	`asBC_INTARG
(&
by‹Code
[
n
]);

657 
asCCÚfigGroup
 *
group
 = 
’gše
->
	`FšdCÚfigGroupFÜFunùiÚ
(
funcId
);

658 ifĞ
group
 !ğ0 ) group->
	`AddRef
();

660 
’gše
->
sütFunùiÚs
[
funcId
]->
	`AddRef
();

665 
asBC_CALL
:

666 
asBC_CALLINTF
:

668 
func
 = 
	`asBC_INTARG
(&
by‹Code
[
n
]);

669 
’gše
->
sütFunùiÚs
[
func
]->
	`AddRef
();

674 
asBC_FuncPŒ
:

676 
asCSütFunùiÚ
 *
func
 = (asCSütFunùiÚ*)
	`asBC_PTRARG
(&
by‹Code
[
n
]);

677 
func
->
	`AddRef
();

682 
	}
}

685 
	gasCSütFunùiÚ
::
	$R–—£Reã»nûs
()

687 
asUINT
 
n
;

689 
asCA¼ay
<*> 
±rs
;

692 ifĞ
by‹Code
.
	`G‘L’gth
() )

694 ifĞ
»tuºTy³
.
	`IsObjeù
() )

695 
»tuºTy³
.
	`G‘ObjeùTy³
()->
	`R–—£
();

697  
asUINT
 
p
 = 0;… < 
·¿m‘”Ty³s
.
	`G‘L’gth
();…++ )

698 ifĞ
·¿m‘”Ty³s
[
p
].
	`IsObjeù
() )

699 
·¿m‘”Ty³s
[
p
].
	`G‘ObjeùTy³
()->
	`R–—£
();

701  
asUINT
 
n
 = 0;‚ < 
objV¬ŸbËTy³s
.
	`G‘L’gth
();‚++ )

702 ifĞ
objV¬ŸbËTy³s
[
n
] )

703 
objV¬ŸbËTy³s
[
n
]->
	`R–—£
();

707  
n
 = 0;‚ < 
by‹Code
.
	`G‘L’gth
();‚ +ğ
asBCTy³Size
[
asBCInfo
[*(
asBYTE
*)&by‹Code[n]].
ty³
] )

709  *(
asBYTE
*)&
by‹Code
[
n
] )

712 
asBC_OBJTYPE
:

713 
asBC_FREE
:

714 
asBC_REFCPY
:

715 
asBC_RefCpyV
:

717 
asCObjeùTy³
 *
objTy³
 = (asCObjeùTy³*)
	`asBC_PTRARG
(&
by‹Code
[
n
]);

718 ifĞ
objTy³
 )

719 
objTy³
->
	`R–—£
();

724 
asBC_ALLOC
:

726 
asCObjeùTy³
 *
objTy³
 = (asCObjeùTy³*)
	`asBC_PTRARG
(&
by‹Code
[
n
]);

727 ifĞ
objTy³
 )

728 
objTy³
->
	`R–—£
();

730 
func
 = 
	`asBC_INTARG
(&
by‹Code
[
n
]+
AS_PTR_SIZE
);

731 ifĞ
func
 )

733 
asCSütFunùiÚ
 *
åŒ
 = 
’gše
->
sütFunùiÚs
[
func
];

734 ifĞ
åŒ
 )

735 
åŒ
->
	`R–—£
();

747 
asBC_PGA
:

748 
asBC_PshGPŒ
:

749 
asBC_LDG
:

750 
asBC_PshG4
:

751 
asBC_LdGRdR4
:

752 
asBC_CpyGtoV4
:

753 
asBC_CpyVtoG4
:

754 
asBC_S‘G4
:

757 *
gv¬PŒ
 = (*)
	`asBC_PTRARG
(&
by‹Code
[
n
]);

758 ifĞ!
gv¬PŒ
 ) ;

759 
asCGlob®Prİ”ty
 *
´İ
 = 
	`G‘Prİ”tyByGlob®V¬PŒ
(
gv¬PŒ
);

760 ifĞ!
´İ
 ) ;

763 ifĞ!
±rs
.
	`Exi¡s
(
gv¬PŒ
) )

765 
´İ
->
	`R–—£
();

766 
±rs
.
	`PushLa¡
(
gv¬PŒ
);

769 
asCCÚfigGroup
 *
group
 = 
’gše
->
	`FšdCÚfigGroupFÜGlob®V¬
(
´İ
->
id
);

770 ifĞ
group
 !ğ0 ) group->
	`R–—£
();

775 
asBC_CALLSYS
:

777 
funcId
 = 
	`asBC_INTARG
(&
by‹Code
[
n
]);

778 
asCCÚfigGroup
 *
group
 = 
’gše
->
	`FšdCÚfigGroupFÜFunùiÚ
(
funcId
);

779 ifĞ
group
 !ğ0 ) group->
	`R–—£
();

781 ifĞ
funcId
 )

782 
’gše
->
sütFunùiÚs
[
funcId
]->
	`R–—£
();

787 
asBC_CALL
:

788 
asBC_CALLINTF
:

790 
func
 = 
	`asBC_INTARG
(&
by‹Code
[
n
]);

791 ifĞ
func
 )

793 
asCSütFunùiÚ
 *
åŒ
 = 
’gše
->
sütFunùiÚs
[
func
];

794 ifĞ
åŒ
 )

795 
åŒ
->
	`R–—£
();

807 
asBC_FuncPŒ
:

809 
asCSütFunùiÚ
 *
func
 = (asCSütFunùiÚ*)
	`asBC_PTRARG
(&
by‹Code
[
n
]);

810 ifĞ
func
 )

811 
func
->
	`R–—£
();

818 ifĞ
j™FunùiÚ
 )

819 
’gše
->
j™Comp”
->
	`R–—£JITFunùiÚ
(
j™FunùiÚ
);

820 
j™FunùiÚ
 = 0;

821 
	}
}

824 
	gasCSütFunùiÚ
::
	$G‘R‘uºTy³Id
() const

826  
’gše
->
	`G‘Ty³IdFromD©aTy³
(
»tuºTy³
);

827 
	}
}

830 
asUINT
 
	gasCSütFunùiÚ
::
	$G‘P¬amCouÁ
() const

832  (
asUINT
)
·¿m‘”Ty³s
.
	`G‘L’gth
();

833 
	}
}

836 
	gasCSütFunùiÚ
::
	$G‘P¬amTy³Id
(
asUINT
 
šdex
, 
asDWORD
 *
æags
) const

838 ifĞ
šdex
 >ğ
·¿m‘”Ty³s
.
	`G‘L’gth
() )

839  
asINVALID_ARG
;

841 ifĞ
æags
 )

842 *
æags
 = 
šOutFÏgs
[
šdex
];

844  
’gše
->
	`G‘Ty³IdFromD©aTy³
(
·¿m‘”Ty³s
[
šdex
]);

845 
	}
}

848 
asISütEngše
 *
	gasCSütFunùiÚ
::
	$G‘Engše
() const

850  
’gše
;

851 
	}
}

854 cÚ¡ *
	gasCSütFunùiÚ
::
	$G‘Deş¬©iÚ
(
boŞ
 
šşudeObjeùName
, boŞ 
šşudeName¥aû
) const

856 
asCSŒšg
 *
‹mpSŒšg
 = &
asCTh»adMªag”
::
	`G‘LoÿlD©a
()->
¡ršg
;

857 *
‹mpSŒšg
 = 
	`G‘Deş¬©iÚSŒ
(
šşudeObjeùName
, 
šşudeName¥aû
);

858  
‹mpSŒšg
->
	`Add»ssOf
();

859 
	}
}

862 cÚ¡ *
	gasCSütFunùiÚ
::
	$G‘SütSeùiÚName
() const

864 ifĞ
sütSeùiÚIdx
 >= 0 )

865  
’gše
->
sütSeùiÚNames
[
sütSeùiÚIdx
]->
	`Add»ssOf
();

868 
	}
}

871 cÚ¡ *
	gasCSütFunùiÚ
::
	$G‘CÚfigGroup
() const

873 
asCCÚfigGroup
 *
group
 = 0;

874 ifĞ
funcTy³
 !ğ
asFUNC_FUNCDEF
 )

875 
group
 = 
’gše
->
	`FšdCÚfigGroupFÜFunùiÚ
(
id
);

877 
group
 = 
’gše
->
	`FšdCÚfigGroupFÜFuncDef
(
this
);

879 ifĞ
group
 == 0 )

882  
group
->
groupName
.
	`Add»ssOf
();

883 
	}
}

886 
asDWORD
 
	gasCSütFunùiÚ
::
	$G‘AcûssMask
() const

888  
acûssMask
;

889 
	}
}

892 
	gasCSütFunùiÚ
::
	$JITCompe
()

894 
asIJITComp”
 *
j™
 = 
’gše
->
	`G‘JITComp”
();

895 ifĞ!
j™
 )

899 ifĞ
j™FunùiÚ
 )

901 
’gše
->
j™Comp”
->
	`R–—£JITFunùiÚ
(
j™FunùiÚ
);

902 
j™FunùiÚ
 = 0;

906 
r
 = 
j™
->
	`CompeFunùiÚ
(
this
, &
j™FunùiÚ
);

907 ifĞ
r
 < 0 )

909 
	`asASSERT
Ğ
j™FunùiÚ
 == 0 );

911 
	}
}

914 
asDWORD
 *
	gasCSütFunùiÚ
::
	$G‘By‹Code
(
asUINT
 *
Ëngth
)

916 ifĞ
Ëngth
 )

917 *
Ëngth
 = (
asUINT
)
by‹Code
.
	`G‘L’gth
();

919 ifĞ
by‹Code
.
	`G‘L’gth
() )

921  
by‹Code
.
	`Add»ssOf
();

925 
	}
}

928 *
	gasCSütFunùiÚ
::
	$S‘U£rD©a
(*
d©a
)

930 *
ŞdD©a
 = 
u£rD©a
;

931 
u£rD©a
 = 
d©a
;

932  
ŞdD©a
;

933 
	}
}

936 *
	gasCSütFunùiÚ
::
	$G‘U£rD©a
() const

938  
u£rD©a
;

939 
	}
}

942 
asCGlob®Prİ”ty
 *
	gasCSütFunùiÚ
::
	$G‘Prİ”tyByGlob®V¬PŒ
(*
gv¬PŒ
)

944  
asUINT
 
g
 = 0; g < 
’gše
->
glob®Prİ”t›s
.
	`G‘L’gth
(); g++ )

945 ifĞ
’gše
->
glob®Prİ”t›s
[
g
] &&ƒngše->glob®Prİ”t›s[g]->
	`G‘Add»ssOfV®ue
(è=ğ
gv¬PŒ
 )

946  
’gše
->
glob®Prİ”t›s
[
g
];

949 
	}
}

952 
	gasCSütFunùiÚ
::
	$G‘RefCouÁ
()

954  
»fCouÁ
.
	`g‘
();

955 
	}
}

958 
	gasCSütFunùiÚ
::
	$S‘FÏg
()

960 
gcFÏg
 = 
Œue
;

961 
	}
}

964 
boŞ
 
	gasCSütFunùiÚ
::
	$G‘FÏg
()

966  
gcFÏg
;

967 
	}
}

970 
	gasCSütFunùiÚ
::
	$EnumReã»nûs
(
asISütEngše
 *)

973 ifĞ
»tuºTy³
.
	`IsObjeù
() )

974 
’gše
->
	`GCEnumC®lback
(
»tuºTy³
.
	`G‘ObjeùTy³
());

976  
asUINT
 
p
 = 0;… < 
·¿m‘”Ty³s
.
	`G‘L’gth
();…++ )

977 ifĞ
·¿m‘”Ty³s
[
p
].
	`IsObjeù
() )

978 
’gše
->
	`GCEnumC®lback
(
·¿m‘”Ty³s
[
p
].
	`G‘ObjeùTy³
());

980  
asUINT
 
t
 = 0; < 
objV¬ŸbËTy³s
.
	`G‘L’gth
();++ )

981 
’gše
->
	`GCEnumC®lback
(
objV¬ŸbËTy³s
[
t
]);

984  
asUINT
 
n
 = 0;‚ < 
by‹Code
.
	`G‘L’gth
();‚ +ğ
asBCTy³Size
[
asBCInfo
[*(
asBYTE
*)&by‹Code[n]].
ty³
] )

986  *(
asBYTE
*)&
by‹Code
[
n
] )

988 
asBC_OBJTYPE
:

989 
asBC_FREE
:

990 
asBC_REFCPY
:

991 
asBC_RefCpyV
:

993 
asCObjeùTy³
 *
objTy³
 = (asCObjeùTy³*)
	`asBC_PTRARG
(&
by‹Code
[
n
]);

994 
’gše
->
	`GCEnumC®lback
(
objTy³
);

998 
asBC_ALLOC
:

1000 
asCObjeùTy³
 *
objTy³
 = (asCObjeùTy³*)
	`asBC_PTRARG
(&
by‹Code
[
n
]);

1001 
’gše
->
	`GCEnumC®lback
(
objTy³
);

1003 
func
 = 
	`asBC_INTARG
(&
by‹Code
[
n
]+
AS_PTR_SIZE
);

1004 ifĞ
func
 )

1005 
’gše
->
	`GCEnumC®lback
Óngše->
sütFunùiÚs
[
func
]);

1009 
asBC_CALL
:

1010 
asBC_CALLINTF
:

1012 
func
 = 
	`asBC_INTARG
(&
by‹Code
[
n
]);

1013 ifĞ
func
 )

1014 
’gše
->
	`GCEnumC®lback
Óngše->
sütFunùiÚs
[
func
]);

1019 
asBC_FuncPŒ
:

1021 
asCSütFunùiÚ
 *
func
 = (asCSütFunùiÚ*)
	`asBC_PTRARG
(&
by‹Code
[
n
]);

1022 ifĞ
func
 )

1023 
’gše
->
	`GCEnumC®lback
(
func
);

1028 
asBC_PGA
:

1029 
asBC_PshGPŒ
:

1030 
asBC_LDG
:

1031 
asBC_PshG4
:

1032 
asBC_LdGRdR4
:

1033 
asBC_CpyGtoV4
:

1034 
asBC_CpyVtoG4
:

1035 
asBC_S‘G4
:

1039 *
gv¬PŒ
 = (*)
	`asBC_PTRARG
(&
by‹Code
[
n
]);

1040 
asCGlob®Prİ”ty
 *
´İ
 = 
	`G‘Prİ”tyByGlob®V¬PŒ
(
gv¬PŒ
);

1042 
’gše
->
	`GCEnumC®lback
(
´İ
);

1047 
	}
}

1050 
	gasCSütFunùiÚ
::
	$R–—£AÎHªdËs
(
asISütEngše
 *)

1053 ifĞ
by‹Code
.
	`G‘L’gth
() )

1055 ifĞ
»tuºTy³
.
	`IsObjeù
() )

1057 
»tuºTy³
.
	`G‘ObjeùTy³
()->
	`R–—£
();

1058 
»tuºTy³
 = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰Void
, 
çl£
);

1061  
asUINT
 
p
 = 0;… < 
·¿m‘”Ty³s
.
	`G‘L’gth
();…++ )

1062 ifĞ
·¿m‘”Ty³s
[
p
].
	`IsObjeù
() )

1064 
·¿m‘”Ty³s
[
p
].
	`G‘ObjeùTy³
()->
	`R–—£
();

1065 
·¿m‘”Ty³s
[
p
] = 
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ
, 
çl£
);

1068  
asUINT
 
n
 = 0;‚ < 
objV¬ŸbËTy³s
.
	`G‘L’gth
();‚++ )

1069 
objV¬ŸbËTy³s
[
n
]->
	`R–—£
();

1070 
objV¬ŸbËTy³s
.
	`S‘L’gth
(0);

1074  
asUINT
 
n
 = 0;‚ < 
by‹Code
.
	`G‘L’gth
();‚ +ğ
asBCTy³Size
[
asBCInfo
[*(
asBYTE
*)&by‹Code[n]].
ty³
] )

1076  *(
asBYTE
*)&
by‹Code
[
n
] )

1079 
asBC_OBJTYPE
:

1080 
asBC_FREE
:

1081 
asBC_REFCPY
:

1082 
asBC_RefCpyV
:

1084 
asCObjeùTy³
 *
objTy³
 = (asCObjeùTy³*)
	`asBC_PTRARG
(&
by‹Code
[
n
]);

1085 ifĞ
objTy³
 )

1087 
objTy³
->
	`R–—£
();

1088 *(**)&
by‹Code
[
n
+1] = 0;

1093 
asBC_ALLOC
:

1095 
asCObjeùTy³
 *
objTy³
 = (asCObjeùTy³*)
	`asBC_PTRARG
(&
by‹Code
[
n
]);

1096 ifĞ
objTy³
 )

1098 
objTy³
->
	`R–—£
();

1099 * (**)&
by‹Code
[
n
+1] = 0;

1102 
func
 = 
	`asBC_INTARG
(&
by‹Code
[
n
]+
AS_PTR_SIZE
);

1103 ifĞ
func
 )

1105 
’gše
->
sütFunùiÚs
[
func
]->
	`R–—£
();

1106 
by‹Code
[
n
+
AS_PTR_SIZE
+1] = 0;

1111 
asBC_CALL
:

1112 
asBC_CALLINTF
:

1114 
func
 = 
	`asBC_INTARG
(&
by‹Code
[
n
]);

1115 ifĞ
func
 )

1117 
’gše
->
sütFunùiÚs
[
func
]->
	`R–—£
();

1118 
by‹Code
[
n
+1] = 0;

1124 
asBC_FuncPŒ
:

1126 
asCSütFunùiÚ
 *
func
 = (asCSütFunùiÚ*)
	`asBC_PTRARG
(&
by‹Code
[
n
]);

1127 ifĞ
func
 )

1129 
func
->
	`R–—£
();

1130 *(
asPWORD
*)&
by‹Code
[
n
+1] = 0;

1139 
	}
}

1142 
boŞ
 
	gasCSütFunùiÚ
::
	$IsSh¬ed
() const

1145 ifĞ
funcTy³
 =ğ
asFUNC_SYSTEM
 )  
Œue
;

1148 ifĞ
objeùTy³
 && (objeùTy³->
æags
 & 
asOBJ_SHARED
èè 
Œue
;

1151  
isSh¬ed
;

1152 
	}
}

1155 
boŞ
 
	gasCSütFunùiÚ
::
	$IsFš®
() const

1157  
isFš®
;

1158 
	}
}

1161 
boŞ
 
	gasCSütFunùiÚ
::
	$IsOv”ride
() const

1163  
isOv”ride
;

1164 
	}
}

1166 
	gEND_AS_NAMESPACE


	@../src/script/as_scriptnode.cpp

40 
	~"as_süŠode.h
"

41 
	~"as_sü‹ngše.h
"

43 
BEGIN_AS_NAMESPACE


45 
	gasCSütNode
::
	$asCSütNode
(
eSütNode
 
ty³
)

47 
nodeTy³
 = 
ty³
;

48 
tok’Ty³
 = 
‰UÄecognizedTok’
;

49 
tok’Pos
 = 0;

50 
tok’L’gth
 = 0;

52 
·»Á
 = 0;

53 
Ãxt
 = 0;

54 
´ev
 = 0;

55 
fœ¡Chd
 = 0;

56 
Ï¡Chd
 = 0;

57 
	}
}

59 
	gasCSütNode
::
	$De¡roy
(
asCSütEngše
 *
’gše
)

62 
asCSütNode
 *
node
 = 
fœ¡Chd
;

63 
asCSütNode
 *
Ãxt
;

65  
node
 )

67 
Ãxt
 = 
node
->next;

68 
node
->
	`De¡roy
(
’gše
);

69 
node
 = 
Ãxt
;

73 
’gše
->
memÜyMgr
.
	`F»eSütNode
(
this
);

74 
	}
}

76 
	gasCSütNode
::
	$S‘Tok’
(
sTok’
 *
tok’
)

78 
tok’Ty³
 = 
tok’
->
ty³
;

79 
	}
}

81 
	gasCSütNode
::
	$Upd©eSourûPos
(
size_t
 
pos
, size_ˆ
Ëngth
)

83 ifĞ
pos
 =ğ0 && 
Ëngth
 == 0 ) ;

85 ifĞ
tok’Pos
 =ğ0 && 
tok’L’gth
 == 0 )

87 
tok’Pos
 = 
pos
;

88 
tok’L’gth
 = 
Ëngth
;

92 ifĞ
tok’Pos
 > 
pos
 )

94 
tok’L’gth
 = 
tok’Pos
 +ok’L’gth - 
pos
;

95 
tok’Pos
 = 
pos
;

98 ifĞ
pos
 + 
Ëngth
 > 
tok’Pos
 + 
tok’L’gth
 )

100 
tok’L’gth
 = 
pos
 + 
Ëngth
 - 
tok’Pos
;

103 
	}
}

105 
	gasCSütNode
::
	$AddChdLa¡
(
asCSütNode
 *
node
)

108 ifĞ
node
 == 0 ) ;

110 ifĞ
Ï¡Chd
 )

112 
Ï¡Chd
->
Ãxt
 = 
node
;

113 
node
->
Ãxt
 = 0;

114 
node
->
´ev
 = 
Ï¡Chd
;

115 
node
->
·»Á
 = 
this
;

116 
Ï¡Chd
 = 
node
;

120 
fœ¡Chd
 = 
node
;

121 
Ï¡Chd
 = 
node
;

122 
node
->
Ãxt
 = 0;

123 
node
->
´ev
 = 0;

124 
node
->
·»Á
 = 
this
;

127 
	`Upd©eSourûPos
(
node
->
tok’Pos
,‚ode->
tok’L’gth
);

128 
	}
}

130 
	gasCSütNode
::
	$DiscÚÃùP¬’t
()

132 ifĞ
·»Á
 )

134 ifĞ
·»Á
->
fœ¡Chd
 =ğ
this
 )

135 
·»Á
->
fœ¡Chd
 = 
Ãxt
;

136 ifĞ
·»Á
->
Ï¡Chd
 =ğ
this
 )

137 
·»Á
->
Ï¡Chd
 = 
´ev
;

140 ifĞ
Ãxt
 )

141 
Ãxt
->
´ev
 =…rev;

143 ifĞ
´ev
 )

144 
´ev
->
Ãxt
 =‚ext;

146 
·»Á
 = 0;

147 
Ãxt
 = 0;

148 
´ev
 = 0;

149 
	}
}

151 
	gEND_AS_NAMESPACE


	@../src/script/as_scriptobject.cpp

32 
	~<Ãw
>

33 
	~"as_cÚfig.h
"

34 
	~"as_sü‹ngše.h
"

35 
	~"as_sütobjeù.h
"

36 
	~"as_‹xts.h
"

38 
BEGIN_AS_NAMESPACE


41 
asISütObjeù
 *
	$SütObjeùFaùÜy
(cÚ¡ 
asCObjeùTy³
 *
objTy³
, 
asCSütEngše
 *
’gše
)

43 
asISütCÚ‹xt
 *
ùx
 = 0;

44 
r
 = 0;

45 
boŞ
 
isNe¡ed
 = 
çl£
;

53 
ùx
 = 
	`asG‘AùiveCÚ‹xt
();

54 ifĞ
ùx
 )

56 
r
 = 
ùx
->
	`PushS‹
();

60 ifĞ
r
 =ğ
asSUCCESS
 )

61 
isNe¡ed
 = 
Œue
;

63 
ùx
 = 0;

66 ifĞ
ùx
 == 0 )

68 
r
 = 
’gše
->
	`C»©eCÚ‹xt
(&
ùx
, 
Œue
);

69 ifĞ
r
 < 0 )

73 
r
 = 
ùx
->
	`P»·»
(
’gše
->
sütFunùiÚs
[
objTy³
->
beh
.
çùÜy
]);

74 ifĞ
r
 < 0 )

76 ifĞ
isNe¡ed
 )

77 
ùx
->
	`PİS‹
();

79 
ùx
->
	`R–—£
();

85 
r
 = 
ùx
->
	`Execu‹
();

89 ifĞ
r
 !ğ
asEXECUTION_SUSPENDED
 )

93 ifĞ
r
 !ğ
asEXECUTION_FINISHED
 )

95 ifĞ
isNe¡ed
 )

97 
ùx
->
	`PİS‹
();

101 ifĞ
r
 =ğ
asEXECUTION_EXCEPTION
 )

104 
ùx
->
	`S‘Exû±iÚ
(
TXT_EXCEPTION_IN_NESTED_CALL
);

106 ifĞ
r
 =ğ
asEXECUTION_ABORTED
 )

107 
ùx
->
	`AbÜt
();

110 
ùx
->
	`R–—£
();

114 
asISütObjeù
 *
±r
 = (asISütObjeù*)
ùx
->
	`G‘R‘uºAdd»ss
();

117 
±r
->
	`AddRef
();

119 ifĞ
isNe¡ed
 )

120 
ùx
->
	`PİS‹
();

122 
ùx
->
	`R–—£
();

124  
±r
;

125 
	}
}

127 #ifdeà
AS_MAX_PORTABILITY


129 
	$SütObjeù_AddRef_G’”ic
(
asISütG’”ic
 *
g’
)

131 
asCSütObjeù
 *
£lf
 = (asCSütObjeù*)
g’
->
	`G‘Objeù
();

132 
£lf
->
	`AddRef
();

133 
	}
}

135 
	$SütObjeù_R–—£_G’”ic
(
asISütG’”ic
 *
g’
)

137 
asCSütObjeù
 *
£lf
 = (asCSütObjeù*)
g’
->
	`G‘Objeù
();

138 
£lf
->
	`R–—£
();

139 
	}
}

141 
	$SütObjeù_G‘RefCouÁ_G’”ic
(
asISütG’”ic
 *
g’
)

143 
asCSütObjeù
 *
£lf
 = (asCSütObjeù*)
g’
->
	`G‘Objeù
();

144 *(*)
g’
->
	`G‘Add»ssOfR‘uºLoÿtiÚ
(èğ
£lf
->
	`G‘RefCouÁ
();

145 
	}
}

147 
	$SütObjeù_S‘FÏg_G’”ic
(
asISütG’”ic
 *
g’
)

149 
asCSütObjeù
 *
£lf
 = (asCSütObjeù*)
g’
->
	`G‘Objeù
();

150 
£lf
->
	`S‘FÏg
();

151 
	}
}

153 
	$SütObjeù_G‘FÏg_G’”ic
(
asISütG’”ic
 *
g’
)

155 
asCSütObjeù
 *
£lf
 = (asCSütObjeù*)
g’
->
	`G‘Objeù
();

156 *(
boŞ
*)
g’
->
	`G‘Add»ssOfR‘uºLoÿtiÚ
(èğ
£lf
->
	`G‘FÏg
();

157 
	}
}

159 
	$SütObjeù_EnumReã»nûs_G’”ic
(
asISütG’”ic
 *
g’
)

161 
asCSütObjeù
 *
£lf
 = (asCSütObjeù*)
g’
->
	`G‘Objeù
();

162 
asISütEngše
 *
’gše
 = *×sISütEngše**)
g’
->
	`G‘Add»ssOfArg
(0);

163 
£lf
->
	`EnumReã»nûs
(
’gše
);

164 
	}
}

166 
	$SütObjeù_R–—£AÎHªdËs_G’”ic
(
asISütG’”ic
 *
g’
)

168 
asCSütObjeù
 *
£lf
 = (asCSütObjeù*)
g’
->
	`G‘Objeù
();

169 
asISütEngše
 *
’gše
 = *×sISütEngše**)
g’
->
	`G‘Add»ssOfArg
(0);

170 
£lf
->
	`R–—£AÎHªdËs
(
’gše
);

171 
	}
}

175 
	$Regi¡”SütObjeù
(
asCSütEngše
 *
’gše
)

178 
r
 = 0;

179 
	`UNUSED_VAR
(
r
);

180 
’gše
->
sütTy³Behaviours
.engine =ƒngine;

181 
’gše
->
sütTy³Behaviours
.
æags
 = 
asOBJ_SCRIPT_OBJECT
 | 
asOBJ_REF
 | 
asOBJ_GC
;

182 
’gše
->
sütTy³Behaviours
.
Çme
 = "_builtin_object_";

183 #iâdeà
AS_MAX_PORTABILITY


184 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
sütTy³Behaviours
, 
asBEHAVE_CONSTRUCT
, "void f(št&š)", 
	`asFUNCTION
(
SütObjeù_CÚ¡ruù
), 
asCALL_CDECL_OBJLAST
); 
	`asASSERT
(„ >= 0 );

185 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
sütTy³Behaviours
, 
asBEHAVE_ADDREF
, "void f()", 
	`asMETHOD
(
asCSütObjeù
,
AddRef
), 
asCALL_THISCALL
); 
	`asASSERT
(„ >= 0 );

186 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
sütTy³Behaviours
, 
asBEHAVE_RELEASE
, "void f()", 
	`asMETHOD
(
asCSütObjeù
,
R–—£
), 
asCALL_THISCALL
); 
	`asASSERT
(„ >= 0 );

187 
r
 = 
’gše
->
	`Regi¡”M‘hodToObjeùTy³
(&’gše->
sütTy³Behaviours
, "šˆ&İAssign(šˆ&š)", 
	`asFUNCTION
(
SütObjeù_Assignm’t
), 
asCALL_CDECL_OBJLAST
); 
	`asASSERT
(„ >= 0 );

190 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
sütTy³Behaviours
, 
asBEHAVE_GETREFCOUNT
, "šˆf()", 
	`asMETHOD
(
asCSütObjeù
,
G‘RefCouÁ
), 
asCALL_THISCALL
); 
	`asASSERT
(„ >= 0 );

191 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
sütTy³Behaviours
, 
asBEHAVE_SETGCFLAG
, "void f()", 
	`asMETHOD
(
asCSütObjeù
,
S‘FÏg
), 
asCALL_THISCALL
); 
	`asASSERT
(„ >= 0 );

192 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
sütTy³Behaviours
, 
asBEHAVE_GETGCFLAG
, "boŞ f()", 
	`asMETHOD
(
asCSütObjeù
,
G‘FÏg
), 
asCALL_THISCALL
); 
	`asASSERT
(„ >= 0 );

193 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
sütTy³Behaviours
, 
asBEHAVE_ENUMREFS
, "void f(št&š)", 
	`asMETHOD
(
asCSütObjeù
,
EnumReã»nûs
), 
asCALL_THISCALL
); 
	`asASSERT
(„ >= 0 );

194 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
sütTy³Behaviours
, 
asBEHAVE_RELEASEREFS
, "void f(št&š)", 
	`asMETHOD
(
asCSütObjeù
,
R–—£AÎHªdËs
), 
asCALL_THISCALL
); 
	`asASSERT
(„ >= 0 );

196 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
sütTy³Behaviours
, 
asBEHAVE_CONSTRUCT
, "void f(št&š)", 
	`asFUNCTION
(
SütObjeù_CÚ¡ruù_G’”ic
), 
asCALL_GENERIC
); 
	`asASSERT
(„ >= 0 );

197 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
sütTy³Behaviours
, 
asBEHAVE_ADDREF
, "void f()", 
	`asFUNCTION
(
SütObjeù_AddRef_G’”ic
), 
asCALL_GENERIC
); 
	`asASSERT
(„ >= 0 );

198 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
sütTy³Behaviours
, 
asBEHAVE_RELEASE
, "void f()", 
	`asFUNCTION
(
SütObjeù_R–—£_G’”ic
), 
asCALL_GENERIC
); 
	`asASSERT
(„ >= 0 );

199 
r
 = 
’gše
->
	`Regi¡”M‘hodToObjeùTy³
(&’gše->
sütTy³Behaviours
, "šˆ&İAssign(šˆ&š)", 
	`asFUNCTION
(
SütObjeù_Assignm’t_G’”ic
), 
asCALL_GENERIC
); 
	`asASSERT
(„ >= 0 );

202 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
sütTy³Behaviours
, 
asBEHAVE_GETREFCOUNT
, "šˆf()", 
	`asFUNCTION
(
SütObjeù_G‘RefCouÁ_G’”ic
), 
asCALL_GENERIC
); 
	`asASSERT
(„ >= 0 );

203 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
sütTy³Behaviours
, 
asBEHAVE_SETGCFLAG
, "void f()", 
	`asFUNCTION
(
SütObjeù_S‘FÏg_G’”ic
), 
asCALL_GENERIC
); 
	`asASSERT
(„ >= 0 );

204 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
sütTy³Behaviours
, 
asBEHAVE_GETGCFLAG
, "boŞ f()", 
	`asFUNCTION
(
SütObjeù_G‘FÏg_G’”ic
), 
asCALL_GENERIC
); 
	`asASSERT
(„ >= 0 );

205 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
sütTy³Behaviours
, 
asBEHAVE_ENUMREFS
, "void f(št&š)", 
	`asFUNCTION
(
SütObjeù_EnumReã»nûs_G’”ic
), 
asCALL_GENERIC
); 
	`asASSERT
(„ >= 0 );

206 
r
 = 
’gše
->
	`Regi¡”BehaviourToObjeùTy³
(&’gše->
sütTy³Behaviours
, 
asBEHAVE_RELEASEREFS
, "void f(št&š)", 
	`asFUNCTION
(
SütObjeù_R–—£AÎHªdËs_G’”ic
), 
asCALL_GENERIC
); 
	`asASSERT
(„ >= 0 );

208 
	}
}

210 
	$SütObjeù_CÚ¡ruù_G’”ic
(
asISütG’”ic
 *
g’
)

212 
asCObjeùTy³
 *
objTy³
 = *×sCObjeùTy³**)
g’
->
	`G‘Add»ssOfArg
(0);

213 
asCSütObjeù
 *
£lf
 = (asCSütObjeù*)
g’
->
	`G‘Objeù
();

215 
	`SütObjeù_CÚ¡ruù
(
objTy³
, 
£lf
);

216 
	}
}

218 
	$SütObjeù_CÚ¡ruù
(
asCObjeùTy³
 *
objTy³
, 
asCSütObjeù
 *
£lf
)

220 
	`Ãw
(
£lf
è
	`asCSütObjeù
(
objTy³
);

221 
	}
}

223 
	$SütObjeù_CÚ¡ruùUn™Ÿlized
(
asCObjeùTy³
 *
objTy³
, 
asCSütObjeù
 *
£lf
)

225 
	`Ãw
(
£lf
è
	`asCSütObjeù
(
objTy³
, 
çl£
);

226 
	}
}

228 
	gasCSütObjeù
::
	$asCSütObjeù
(
asCObjeùTy³
 *
Ù
, 
boŞ
 
doIn™Ÿlize
)

230 
»fCouÁ
.
	`£t
(1);

231 
objTy³
 = 
Ù
;

232 
objTy³
->
	`AddRef
();

233 
isDe¡ruùC®Ëd
 = 
çl£
;

236 ifĞ
objTy³
->
æags
 & 
asOBJ_GC
 )

237 
objTy³
->
’gše
->
gc
.
	`AddSütObjeùToGC
(
this
, objType);

240 
asCSütEngše
 *
’gše
 = 
objTy³
->engine;

241  
asUINT
 
n
 = 0;‚ < 
objTy³
->
´İ”t›s
.
	`G‘L’gth
();‚++ )

243 
asCObjeùPrİ”ty
 *
´İ
 = 
objTy³
->
´İ”t›s
[
n
];

244 ifĞ
´İ
->
ty³
.
	`IsObjeù
() )

246 
asPWORD
 *
±r
 = (asPWORD*)(((*)
this
è+ 
´İ
->
by‹Off£t
);

248 ifĞ
´İ
->
ty³
.
	`IsObjeùHªdË
() )

249 *
±r
 = 0;

253 *
±r
 = (
asPWORD
)
	`AÎoÿ‹Objeù
(
´İ
->
ty³
.
	`G‘ObjeùTy³
(), 
’gše
, 
doIn™Ÿlize
);

257 
	}
}

259 
	gasCSütObjeù
::
	$De¡ruù
()

262 
this
->~
	`asCSütObjeù
();

265 
	`u£rF»e
(
this
);

266 
	}
}

268 
	gasCSütObjeù
::~
	$asCSütObjeù
()

270 
objTy³
->
	`R–—£
();

273 
asCSütEngše
 *
’gše
 = 
objTy³
->engine;

276  
asUINT
 
n
 = 0;‚ < 
objTy³
->
´İ”t›s
.
	`G‘L’gth
();‚++ )

278 
asCObjeùPrİ”ty
 *
´İ
 = 
objTy³
->
´İ”t›s
[
n
];

279 ifĞ
´İ
->
ty³
.
	`IsObjeù
() )

282 **
±r
 = (**)(((*)
this
è+ 
´İ
->
by‹Off£t
);

283 ifĞ*
±r
 )

285 
	`F»eObjeù
(*
±r
, 
´İ
->
ty³
.
	`G‘ObjeùTy³
(), 
’gše
);

286 *(
asDWORD
*)
±r
 = 0;

290 
	}
}

292 
asISütEngše
 *
	gasCSütObjeù
::
	$G‘Engše
() const

294  
objTy³
->
’gše
;

295 
	}
}

297 
	gasCSütObjeù
::
	$AddRef
() const

300 
gcFÏg
 = 
çl£
;

301  
»fCouÁ
.
	`©omicInc
();

302 
	}
}

304 
	gasCSütObjeù
::
	$R–—£
() const

307 
gcFÏg
 = 
çl£
;

310 ifĞ
»fCouÁ
.
	`g‘
(è=ğ1 && !
isDe¡ruùC®Ëd
 )

313 
cÚ¡_ÿ¡
<
asCSütObjeù
*>(
this
)->
	`C®lDe¡ruùÜ
();

317 
r
 = 
»fCouÁ
.
	`©omicDec
();

318 ifĞ
r
 == 0 )

321 
cÚ¡_ÿ¡
<
asCSütObjeù
*>(
this
)->
	`De¡ruù
();

325  
r
;

326 
	}
}

328 
	gasCSütObjeù
::
	$C®lDe¡ruùÜ
()

330 
asISütCÚ‹xt
 *
ùx
 = 0;

331 
boŞ
 
isNe¡ed
 = 
çl£
;

332 
boŞ
 
doAbÜt
 = 
çl£
;

336 
isDe¡ruùC®Ëd
 = 
Œue
;

339 
asCObjeùTy³
 *
Ù
 = 
objTy³
;

340  
Ù
 )

342 
funcIndex
 = 
Ù
->
beh
.
de¡ruù
;

343 ifĞ
funcIndex
 )

345 ifĞ
ùx
 == 0 )

349 
ùx
 = 
	`asG‘AùiveCÚ‹xt
();

350 ifĞ
ùx
 )

352 
r
 = 
ùx
->
	`PushS‹
();

353 ifĞ
r
 =ğ
asSUCCESS
 )

354 
isNe¡ed
 = 
Œue
;

356 
ùx
 = 0;

359 ifĞ
ùx
 == 0 )

362 
asCSütEngše
 *
’gše
 = 
objTy³
->engine;

363 
r
 = 
’gše
->
	`C»©eCÚ‹xt
(&
ùx
, 
Œue
);

364 ifĞ
r
 < 0 ) ;

368 
r
 = 
ùx
->
	`P»·»
(
objTy³
->
’gše
->
sütFunùiÚs
[
funcIndex
]);

369 ifĞ
r
 >= 0 )

371 
ùx
->
	`S‘Objeù
(
this
);

375 
r
 = 
ùx
->
	`Execu‹
();

378 ifĞ
r
 !ğ
asEXECUTION_SUSPENDED
 )

385 ifĞ
r
 =ğ
asEXECUTION_ABORTED
 )

386 
doAbÜt
 = 
Œue
;

394 
Ù
 = ot->
d”ivedFrom
;

397 ifĞ
ùx
 )

399 ifĞ
isNe¡ed
 )

401 
ùx
->
	`PİS‹
();

404 ifĞ
doAbÜt
 )

405 
ùx
->
	`AbÜt
();

408 
ùx
->
	`R–—£
();

410 
	}
}

412 
asIObjeùTy³
 *
	gasCSütObjeù
::
	$G‘ObjeùTy³
() const

414  
objTy³
;

415 
	}
}

417 
	gasCSütObjeù
::
	$G‘RefCouÁ
()

419  
»fCouÁ
.
	`g‘
();

420 
	}
}

422 
	gasCSütObjeù
::
	$S‘FÏg
()

424 
gcFÏg
 = 
Œue
;

425 
	}
}

427 
boŞ
 
	gasCSütObjeù
::
	$G‘FÏg
()

429  
gcFÏg
;

430 
	}
}

433 
	gasCSütObjeù
::
	$G‘Ty³Id
() const

435 
asCD©aTy³
 
dt
 =‡sCD©aTy³::
	`C»©eObjeù
(
objTy³
, 
çl£
);

436  
objTy³
->
’gše
->
	`G‘Ty³IdFromD©aTy³
(
dt
);

437 
	}
}

439 
asUINT
 
	gasCSütObjeù
::
	$G‘Prİ”tyCouÁ
() const

441  
	`asUINT
(
objTy³
->
´İ”t›s
.
	`G‘L’gth
());

442 
	}
}

444 
	gasCSütObjeù
::
	$G‘Prİ”tyTy³Id
(
asUINT
 
´İ
) const

446 ifĞ
´İ
 >ğ
objTy³
->
´İ”t›s
.
	`G‘L’gth
() )

447  
asINVALID_ARG
;

449  
objTy³
->
’gše
->
	`G‘Ty³IdFromD©aTy³
(objTy³->
´İ”t›s
[
´İ
]->
ty³
);

450 
	}
}

452 cÚ¡ *
	gasCSütObjeù
::
	$G‘Prİ”tyName
(
asUINT
 
´İ
) const

454 ifĞ
´İ
 >ğ
objTy³
->
´İ”t›s
.
	`G‘L’gth
() )

457  
objTy³
->
´İ”t›s
[
´İ
]->
Çme
.
	`Add»ssOf
();

458 
	}
}

460 *
	gasCSütObjeù
::
	$G‘Add»ssOfPrİ”ty
(
asUINT
 
´İ
)

462 ifĞ
´İ
 >ğ
objTy³
->
´İ”t›s
.
	`G‘L’gth
() )

466 
asCD©aTy³
 *
dt
 = &
objTy³
->
´İ”t›s
[
´İ
]->
ty³
;

467 ifĞ
dt
->
	`IsObjeù
(è&& !dt->
	`IsObjeùHªdË
() )

468  *(**)(((*)
this
è+ 
objTy³
->
´İ”t›s
[
´İ
]->
by‹Off£t
);

470  (*)(((*)
this
è+ 
objTy³
->
´İ”t›s
[
´İ
]->
by‹Off£t
);

471 
	}
}

473 
	gasCSütObjeù
::
	$EnumReã»nûs
(
asISütEngše
 *
’gše
)

476  
asUINT
 
n
 = 0;‚ < 
objTy³
->
´İ”t›s
.
	`G‘L’gth
();‚++ )

478 
asCObjeùPrİ”ty
 *
´İ
 = 
objTy³
->
´İ”t›s
[
n
];

479 ifĞ
´İ
->
ty³
.
	`IsObjeù
() )

481 *
±r
 = *(**)(((*)
this
è+ 
´İ
->
by‹Off£t
);

482 ifĞ
±r
 )

483 ((
asCSütEngše
*)
’gše
)->
	`GCEnumC®lback
(
±r
);

486 
	}
}

488 
	gasCSütObjeù
::
	$R–—£AÎHªdËs
(
asISütEngše
 *
’gše
)

490  
asUINT
 
n
 = 0;‚ < 
objTy³
->
´İ”t›s
.
	`G‘L’gth
();‚++ )

492 
asCObjeùPrİ”ty
 *
´İ
 = 
objTy³
->
´İ”t›s
[
n
];

493 ifĞ
´İ
->
ty³
.
	`IsObjeù
(è&&…rİ->ty³.
	`IsObjeùHªdË
() )

495 **
±r
 = (**)(((*)
this
è+ 
´İ
->
by‹Off£t
);

496 ifĞ*
±r
 )

498 
	`asASSERT
Ğ(
´İ
->
ty³
.
	`G‘ObjeùTy³
()->
æags
 & 
asOBJ_NOCOUNT
è||…rİ->ty³.
	`G‘Behaviour
()->
»Ëa£
 );

499 ifĞ
´İ
->
ty³
.
	`G‘Behaviour
()->
»Ëa£
 )

500 ((
asCSütEngše
*)
’gše
)->
	`C®lObjeùM‘hod
(*
±r
, 
´İ
->
ty³
.
	`G‘Behaviour
()->
»Ëa£
);

501 *
±r
 = 0;

505 
	}
}

507 
	$SütObjeù_Assignm’t_G’”ic
(
asISütG’”ic
 *
g’
)

509 
asCSütObjeù
 *
Ùh”
 = *×sCSütObjeù**)
g’
->
	`G‘Add»ssOfArg
(0);

510 
asCSütObjeù
 *
£lf
 = (asCSütObjeù*)
g’
->
	`G‘Objeù
();

512 *
£lf
 = *
Ùh”
;

514 *(
asCSütObjeù
**)
g’
->
	`G‘Add»ssOfR‘uºLoÿtiÚ
(èğ
£lf
;

515 
	}
}

517 
	gasCSütObjeù
 &
	$SütObjeù_Assignm’t
(
asCSütObjeù
 *
Ùh”
,‡sCSütObjeù *
£lf
)

519  (*
£lf
 = *
Ùh”
);

520 
	}
}

522 
	gasCSütObjeù
 &asCSütObjeù::
İ”©Ü
=(cÚ¡ 
asCSütObjeù
 &
Ùh”
)

524 ifĞ&
Ùh”
 !ğ
this
 )

526 
asASSERT
Ğ
Ùh”
.
objTy³
->
D”ivesFrom
(objType) );

528 
asCSütEngše
 *
	g’gše
 = 
objTy³
->
’gše
;

531  
asUINT
 
	gn
 = 0;‚ < 
	gobjTy³
->
	g´İ”t›s
.
G‘L’gth
();‚++ )

533 
asCObjeùPrİ”ty
 *
	g´İ
 = 
objTy³
->
´İ”t›s
[
n
];

534 ifĞ
	g´İ
->
	gty³
.
IsObjeù
() )

536 **
	gd¡
 = (**)(((*)
this
è+ 
´İ
->
by‹Off£t
);

537 **
	g¤c
 = (**)(((*)&
Ùh”
è+ 
´İ
->
by‹Off£t
);

538 ifĞ!
	g´İ
->
	gty³
.
IsObjeùHªdË
() )

539 
CİyObjeù
(*
¤c
, *
d¡
, 
´İ
->
ty³
.
G‘ObjeùTy³
(), 
’gše
);

541 
CİyHªdË
((
asPWORD
*)
¤c
, (asPWORD*)
d¡
, 
´İ
->
ty³
.
G‘ObjeùTy³
(), 
’gše
);

545 *
	gd¡
 = ((*)
this
è+ 
´İ
->
by‹Off£t
;

546 *
	g¤c
 = ((*)&
Ùh”
è+ 
´İ
->
by‹Off£t
;

547 
memıy
(
d¡
, 
¤c
, 
´İ
->
ty³
.
G‘SizeInMemÜyBy‹s
());

552  *
	gthis
;

555 
	gasCSütObjeù
::
	$CİyFrom
(
asISütObjeù
 *
Ùh”
)

557 ifĞ
Ùh”
 =ğ0 )  
asINVALID_ARG
;

559 ifĞ
	`G‘Ty³Id
(è!ğ
Ùh”
->GetTypeId() )

560  
asINVALID_TYPE
;

562 *
this
 = *(
asCSütObjeù
*)
Ùh”
;

565 
	}
}

567 *
	gasCSütObjeù
::
	$AÎoÿ‹Objeù
(
asCObjeùTy³
 *
objTy³
, 
asCSütEngše
 *
’gše
, 
boŞ
 
doIn™Ÿlize
)

569 *
±r
 = 0;

571 ifĞ
objTy³
->
æags
 & 
asOBJ_SCRIPT_OBJECT
 )

573 ifĞ
doIn™Ÿlize
 )

574 
±r
 = 
	`SütObjeùFaùÜy
(
objTy³
, 
’gše
);

577 
±r
 = 
’gše
->
	`C®lAÎoc
(
objTy³
);

578 
	`SütObjeù_CÚ¡ruùUn™Ÿlized
(
objTy³
, 
»š‹½»t_ÿ¡
<
asCSütObjeù
*>(
±r
));

581 ifĞ
objTy³
->
æags
 & 
asOBJ_TEMPLATE
 )

585 
±r
 = 
’gše
->
	`C®lGlob®FunùiÚR‘PŒ
(
objTy³
->
beh
.
cÚ¡ruù
, objType);

587 ifĞ
objTy³
->
æags
 & 
asOBJ_REF
 )

589 
±r
 = 
’gše
->
	`C®lGlob®FunùiÚR‘PŒ
(
objTy³
->
beh
.
çùÜy
);

593 
±r
 = 
’gše
->
	`C®lAÎoc
(
objTy³
);

594 
funcIndex
 = 
objTy³
->
beh
.
cÚ¡ruù
;

595 ifĞ
funcIndex
 )

596 
’gše
->
	`C®lObjeùM‘hod
(
±r
, 
funcIndex
);

599  
±r
;

600 
	}
}

602 
	gasCSütObjeù
::
	$F»eObjeù
(*
±r
, 
asCObjeùTy³
 *
objTy³
, 
asCSütEngše
 *
’gše
)

604 ifĞ
objTy³
->
æags
 & 
asOBJ_REF
 )

606 
	`asASSERT
Ğ(
objTy³
->
æags
 & 
asOBJ_NOCOUNT
è|| objTy³->
beh
.
»Ëa£
 );

607 ifĞ
objTy³
->
beh
.
»Ëa£
 )

608 
’gše
->
	`C®lObjeùM‘hod
(
±r
, 
objTy³
->
beh
.
»Ëa£
);

612 ifĞ
objTy³
->
beh
.
de¡ruù
 )

613 
’gše
->
	`C®lObjeùM‘hod
(
±r
, 
objTy³
->
beh
.
de¡ruù
);

615 
’gše
->
	`C®lF»e
(
±r
);

617 
	}
}

619 
	gasCSütObjeù
::
	$CİyObjeù
(*
¤c
, *
d¡
, 
asCObjeùTy³
 *
objTy³
, 
asCSütEngše
 *
’gše
)

623 
funcIndex
 = 
objTy³
->
beh
.
cİy
;

625 ifĞ
funcIndex
 )

626 
’gše
->
	`C®lObjeùM‘hod
(
d¡
, 
¤c
, 
funcIndex
);

628 
	`memıy
(
d¡
, 
¤c
, 
objTy³
->
size
);

629 
	}
}

631 
	gasCSütObjeù
::
	$CİyHªdË
(
asPWORD
 *
¤c
,‡sPWORD *
d¡
, 
asCObjeùTy³
 *
objTy³
, 
asCSütEngše
 *
’gše
)

633 ifĞ*
d¡
 )

634 
’gše
->
	`C®lObjeùM‘hod
(*(**)
d¡
, 
objTy³
->
beh
.
»Ëa£
);

635 *
d¡
 = *
¤c
;

636 ifĞ*
d¡
 )

637 
’gše
->
	`C®lObjeùM‘hod
(*(**)
d¡
, 
objTy³
->
beh
.
add»f
);

638 
	}
}

640 
	gEND_AS_NAMESPACE


	@../src/script/as_string.cpp

31 
	~"as_cÚfig.h
"

33 
	~<¡d¬g.h
>

34 
	~<¡dlib.h
>

35 
	~<¡ršg.h
>

37 #ià!
defšed
(
AS_NO_MEMORY_H
)

38 
	~<memÜy.h
>

41 
	~"as_¡ršg.h
"

42 
	~"as_¡ršg_ut.h
"

44 
	gasCSŒšg
::
	$asCSŒšg
()

46 
Ëngth
 = 0;

47 
loÿl
[0] = 0;

48 
	}
}

51 
	gasCSŒšg
::
	$asCSŒšg
(cÚ¡ 
asCSŒšg
 &
¡r
)

53 
Ëngth
 = 0;

54 
loÿl
[0] = 0;

56 
	`Assign
(
¡r
.
	`Add»ssOf
(), sŒ.
Ëngth
);

57 
	}
}

59 
	gasCSŒšg
::
	$asCSŒšg
(cÚ¡ *
¡r
, 
size_t
 
Ën
)

61 
Ëngth
 = 0;

62 
loÿl
[0] = 0;

64 
	`Assign
(
¡r
, 
Ën
);

65 
	}
}

67 
	gasCSŒšg
::
	$asCSŒšg
(cÚ¡ *
¡r
)

69 
Ëngth
 = 0;

70 
loÿl
[0] = 0;

72 
size_t
 
Ën
 = 
	`¡¾’
(
¡r
);

73 
	`Assign
(
¡r
, 
Ën
);

74 
	}
}

76 
	gasCSŒšg
::
	$asCSŒšg
(
ch
)

78 
Ëngth
 = 0;

79 
loÿl
[0] = 0;

81 
	`Assign
(&
ch
, 1);

82 
	}
}

84 
	gasCSŒšg
::~
	$asCSŒšg
()

86 ifĞ
Ëngth
 > 11 && 
dyÇmic
 )

88 
	`asDELETEARRAY
(
dyÇmic
);

90 
	}
}

92 *
	gasCSŒšg
::
	$Add»ssOf
()

94 ifĞ
Ëngth
 <= 11 )

95  
loÿl
;

97  
dyÇmic
;

98 
	}
}

100 cÚ¡ *
	gasCSŒšg
::
	$Add»ssOf
() const

102 ifĞ
Ëngth
 <= 11 )

103  
loÿl
;

105  
dyÇmic
;

106 
	}
}

108 
	gasCSŒšg
::
	$S‘L’gth
(
size_t
 
Ën
)

110 
	`AÎoÿ‹
(
Ën
, 
Œue
);

111 
	}
}

113 
	gasCSŒšg
::
	$AÎoÿ‹
(
size_t
 
Ën
, 
boŞ
 
k“pD©a
)

122 ifĞ
Ën
 > 11 &&†’ > 
Ëngth
 )

125 *
buf
 = 
	`asNEWARRAY
(,
Ën
+1);

126 ifĞ
buf
 == 0 )

132 ifĞ
k“pD©a
 )

134 
l
 = ()
Ën
 < ()
Ëngth
 ? ()len : ()length;

135 
	`memıy
(
buf
, 
	`Add»ssOf
(), 
l
);

138 ifĞ
Ëngth
 > 11 )

140 
	`asDELETEARRAY
(
dyÇmic
);

143 
dyÇmic
 = 
buf
;

145 ifĞ
Ën
 <ğ11 && 
Ëngth
 > 11 )

148 *
buf
 = 
dyÇmic
;

149 ifĞ
k“pD©a
 )

151 
	`memıy
(&
loÿl
, 
buf
, 
Ën
);

153 
	`asDELETEARRAY
(
buf
);

156 
Ëngth
 = ()
Ën
;

159 
	`Add»ssOf
()[
Ëngth
] = 0;

160 
	}
}

162 
	gasCSŒšg
::
	$Assign
(cÚ¡ *
¡r
, 
size_t
 
Ën
)

164 
	`AÎoÿ‹
(
Ën
, 
çl£
);

167 
	`memıy
(
	`Add»ssOf
(), 
¡r
, 
Ëngth
);

168 
	`Add»ssOf
()[
Ëngth
] = 0;

169 
	}
}

171 
	gasCSŒšg
 &asCSŒšg::
İ”©Ü
 =(cÚ¡ *
¡r
)

173 
size_t
 
Ën
 = 
¡r
 ? 
¡¾’
(str) : 0;

174 
Assign
(
¡r
, 
Ën
);

176  *
	gthis
;

179 
	gasCSŒšg
 &asCSŒšg::
İ”©Ü
 =(cÚ¡ 
asCSŒšg
 &
¡r
)

181 
Assign
(
¡r
.
Add»ssOf
(), sŒ.
Ëngth
);

183  *
	gthis
;

186 
	gasCSŒšg
 &asCSŒšg::
İ”©Ü
 =(
ch
)

188 
Assign
(&
ch
, 1);

190  *
	gthis
;

193 
	gasCSŒšg
::
	$CÚÿ‹Ç‹
(cÚ¡ *
¡r
, 
size_t
 
Ën
)

195 
asUINT
 
ŞdL’gth
 = 
Ëngth
;

196 
	`S‘L’gth
(
Ëngth
 + 
Ën
);

198 
	`memıy
(
	`Add»ssOf
(è+ 
ŞdL’gth
, 
¡r
, 
Ën
);

199 
	`Add»ssOf
()[
Ëngth
] = 0;

200 
	}
}

202 
	gasCSŒšg
 &asCSŒšg::
İ”©Ü
 +=(cÚ¡ *
¡r
)

204 
size_t
 
Ën
 = 
¡¾’
(
¡r
);

205 
CÚÿ‹Ç‹
(
¡r
, 
Ën
);

207  *
	gthis
;

210 
	gasCSŒšg
 &asCSŒšg::
İ”©Ü
 +=(cÚ¡ 
asCSŒšg
 &
¡r
)

212 
CÚÿ‹Ç‹
(
¡r
.
Add»ssOf
(), sŒ.
Ëngth
);

214  *
	gthis
;

217 
	gasCSŒšg
 &asCSŒšg::
İ”©Ü
 +=(
ch
)

219 
CÚÿ‹Ç‹
(&
ch
, 1);

221  *
	gthis
;

224 
size_t
 
	gasCSŒšg
::
	$G‘L’gth
() const

226  
Ëngth
;

227 
	}
}

230 
size_t
 
	gasCSŒšg
::
	$FÜm©
(cÚ¡ *
fÜm©
, ...)

232 
va_li¡
 
¬gs
;

233 
	`va_¡¬t
(
¬gs
, 
fÜm©
);

235 
tmp
[256];

236 
r
 = 
	`asVSNPRINTF
(
tmp
, 255, 
fÜm©
, 
¬gs
);

238 ifĞ
r
 > 0 )

240 
	`Assign
(
tmp
, 
r
);

244 
size_t
 
n
 = 512;

245 
asCSŒšg
 
¡r
;

246 
¡r
.
	`AÎoÿ‹
(
n
, 
çl£
);

248  (
r
 = 
	`asVSNPRINTF
(
¡r
.
	`Add»ssOf
(), 
n
, 
fÜm©
, 
¬gs
)) < 0 )

250 
n
 *= 2;

251 
¡r
.
	`AÎoÿ‹
(
n
, 
çl£
);

254 
	`Assign
(
¡r
.
	`Add»ssOf
(), 
r
);

257 
	`va_’d
(
¬gs
);

259  
Ëngth
;

260 
	}
}

262 &
	gasCSŒšg
::
İ”©Ü
 [](
size_t
 
šdex
)

264 
asASSERT
(
šdex
 < 
Ëngth
);

266  
Add»ssOf
()[
šdex
];

269 cÚ¡ &
	gasCSŒšg
::
İ”©Ü
 [](
size_t
 
šdex
) const

271 
asASSERT
(
šdex
 < 
Ëngth
);

273  
Add»ssOf
()[
šdex
];

276 
asCSŒšg
 
	gasCSŒšg
::
	$SubSŒšg
(
size_t
 
¡¬t
, size_ˆ
Ëngth
) const

278 ifĞ
¡¬t
 >ğ
	`G‘L’gth
(è|| 
Ëngth
 == 0 )

279  
	`asCSŒšg
("");

281 ifĞ
Ëngth
 =ğ(
size_t
)(-1èèËngth = 
	`G‘L’gth
(è- 
¡¬t
;

283 
asCSŒšg
 
tmp
;

284 
tmp
.
	`Assign
(
	`Add»ssOf
(è+ 
¡¬t
, 
Ëngth
);

286  
tmp
;

287 
	}
}

289 
	gasCSŒšg
::
	$Com·»
(cÚ¡ *
¡r
) const

291  
	`asCom·»SŒšgs
(
	`Add»ssOf
(), 
Ëngth
, 
¡r
, 
	`¡¾’
(str));

292 
	}
}

294 
	gasCSŒšg
::
	$Com·»
(cÚ¡ 
asCSŒšg
 &
¡r
) const

296  
	`asCom·»SŒšgs
(
	`Add»ssOf
(), 
Ëngth
, 
¡r
.Add»ssOf(), sŒ.
	`G‘L’gth
());

297 
	}
}

299 
	gasCSŒšg
::
	$Com·»
(cÚ¡ *
¡r
, 
size_t
 
Ën
) const

301  
	`asCom·»SŒšgs
(
	`Add»ssOf
(), 
Ëngth
, 
¡r
, 
Ën
);

302 
	}
}

304 
size_t
 
	gasCSŒšg
::
	$ReÿlcuÏ‹L’gth
()

306 
	`S‘L’gth
(
	`¡¾’
(
	`Add»ssOf
()));

308  
Ëngth
;

309 
	}
}

311 
	gasCSŒšg
::
	$FšdLa¡
(cÚ¡ *
¡r
) const

318 cÚ¡ *
Ï¡
 = 0;

319 cÚ¡ *
cu¼
 = 
	`Add»ssOf
()-1;

320  (
cu¼
 = 
	`¡r¡r
(cu¼+1, 
¡r
)) != 0 )

321 
Ï¡
 = 
cu¼
;

323 ifĞ
Ï¡
 )

324  (
Ï¡
 - 
	`Add»ssOf
());

327 
	}
}

332 
boŞ
 
	gİ”©Ü
 ==(cÚ¡ 
asCSŒšg
 &
a
, cÚ¡ *
	gb
)

334  
	ga
.
Com·»
(
b
) == 0;

337 
boŞ
 
	gİ”©Ü
 !=(cÚ¡ 
asCSŒšg
 &
a
, cÚ¡ *
	gb
)

339  
	ga
.
Com·»
(
b
) != 0;

342 
boŞ
 
	gİ”©Ü
 ==(cÚ¡ 
asCSŒšg
 &
a
, cÚ¡ 
	gasCSŒšg
 &
	gb
)

344  
	ga
.
Com·»
(
b
) == 0;

347 
boŞ
 
	gİ”©Ü
 !=(cÚ¡ 
asCSŒšg
 &
a
, cÚ¡ 
	gasCSŒšg
 &
	gb
)

349  
	ga
.
Com·»
(
b
) != 0;

352 
boŞ
 
	gİ”©Ü
 ==(cÚ¡ *
a
, cÚ¡ 
	gasCSŒšg
 &
	gb
)

354  
	gb
.
Com·»
(
a
) == 0;

357 
boŞ
 
	gİ”©Ü
 !=(cÚ¡ *
a
, cÚ¡ 
	gasCSŒšg
 &
	gb
)

359  
	gb
.
Com·»
(
a
) != 0;

362 
boŞ
 
	gİ”©Ü
 <(cÚ¡ 
	gasCSŒšg
 &
	ga
, cÚ¡‡sCSŒšg &
	gb
)

364  
	ga
.
Com·»
(
b
) < 0;

367 
asCSŒšg
 
	gİ”©Ü
 +(cÚ¡ 
	gasCSŒšg
 &
	ga
, cÚ¡‡sCSŒšg &
	gb
)

369 
asCSŒšg
 
	g»s
 = 
a
;

370 
	g»s
 +ğ
b
;

372  
	g»s
;

375 
asCSŒšg
 
	gİ”©Ü
 +(cÚ¡ *
	ga
, cÚ¡ 
	gasCSŒšg
 &
	gb
)

377 
asCSŒšg
 
	g»s
 = 
a
;

378 
	g»s
 +ğ
b
;

380  
	g»s
;

383 
asCSŒšg
 
	gİ”©Ü
 +(cÚ¡ 
	gasCSŒšg
 &
	ga
, cÚ¡ *
	gb
)

385 
asCSŒšg
 
	g»s
 = 
a
;

386 
	g»s
 +ğ
b
;

388  
	g»s
;

393 
	gasCSŒšgPoš‹r
::
	$asCSŒšgPoš‹r
()

394 : 
	`¡ršg
(0), 
	`Ëngth
(0), 
	$c¡ršg
(0)

396 
	}
}

398 
	gasCSŒšgPoš‹r
::
	$asCSŒšgPoš‹r
(cÚ¡ *
¡r
, 
size_t
 
Ën
)

399 : 
	`¡ršg
(
¡r
), 
	`Ëngth
(
Ën
), 
	$c¡ršg
(0)

401 
	}
}

403 
	gasCSŒšgPoš‹r
::
	$asCSŒšgPoš‹r
(
asCSŒšg
 *
c¡r
)

404 : 
	`¡ršg
(0), 
	`Ëngth
(0), 
	$c¡ršg
(
c¡r
)

406 
	}
}

408 cÚ¡ *
	gasCSŒšgPoš‹r
::
	$Add»ssOf
() const

410  
¡ršg
 ? sŒšg : 
c¡ršg
->
	`Add»ssOf
();

411 
	}
}

413 
size_t
 
	gasCSŒšgPoš‹r
::
	$G‘L’gth
() const

415  
¡ršg
 ? 
Ëngth
 : 
c¡ršg
->
	`G‘L’gth
();

416 
	}
}

418 
boŞ
 
	gasCSŒšgPoš‹r
::
İ”©Ü
==(cÚ¡ 
asCSŒšgPoš‹r
& 
Ùh”
) const

420  
asCom·»SŒšgs
(
Add»ssOf
(), 
G‘L’gth
(), 
Ùh”
.AddressOf(), other.GetLength()) == 0;

423 
boŞ
 
	gasCSŒšgPoš‹r
::
İ”©Ü
<(cÚ¡ 
asCSŒšgPoš‹r
& 
Ùh”
) const

425  
asCom·»SŒšgs
(
Add»ssOf
(), 
G‘L’gth
(), 
Ùh”
.AddressOf(), other.GetLength()) < 0;

	@../src/script/as_string_util.cpp

32 
	~"as_cÚfig.h
"

34 
	~<¡ršg.h
>

35 
	~<m©h.h
>

37 #ià!
defšed
(
AS_NO_MEMORY_H
)

38 
	~<memÜy.h
>

41 
	~"as_¡ršg.h
"

42 
	~"as_¡ršg_ut.h
"

44 
BEGIN_AS_NAMESPACE


46 
	$asCom·»SŒšgs
(cÚ¡ *
¡r1
, 
size_t
 
Ën1
, cÚ¡ *
¡r2
, size_ˆ
Ën2
)

48 ifĞ
Ën1
 == 0 )

50 ifĞ
¡r2
 =ğ0 || 
Ën2
 == 0 )  0;

55 ifĞ
¡r2
 == 0 )

57 ifĞ
Ën1
 == 0 )

63 ifĞ
Ën2
 < 
Ën1
 )

65 
»suÉ
 = 
	`memcmp
(
¡r1
, 
¡r2
, 
Ën2
);

66 ifĞ
»suÉ
 == 0 )  -1;

68  
»suÉ
;

71 
»suÉ
 = 
	`memcmp
(
¡r1
, 
¡r2
, 
Ën1
);

72 ifĞ
»suÉ
 =ğ0 && 
Ën1
 < 
Ën2
 )  1;

74  
»suÉ
;

75 
	}
}

77 
	$asSŒšgSÿnDoubË
(cÚ¡ *
¡ršg
, 
size_t
 *
numSÿÂed
)

88 
v®ue
 = 0;

89 
äaùiÚ
 = 0.1;

90 
expÚ’t
 = 0;

91 
boŞ
 
Ãg©iveExpÚ’t
 = 
çl£
;

92 
c
 = 0;

100 ifĞ
¡ršg
[
c
] >= '0' && string[c] <= '9' )

101 
v®ue
 = v®ue*10 + (
¡ršg
[
c
] - '0');

105 
c
++;

108 ifĞ
¡ršg
[
c
] == '.' )

110 
c
++;

115 ifĞ
¡ršg
[
c
] >= '0' && string[c] <= '9' )

116 
v®ue
 +ğ
äaùiÚ
 * (
¡ršg
[
c
] - '0');

120 
c
++;

121 
äaùiÚ
 *= 0.1;

125 ifĞ
¡ršg
[
c
] == 'e' || string[c] == 'E' )

127 
c
++;

130 ifĞ
¡ršg
[
c
] == '-' )

132 
Ãg©iveExpÚ’t
 = 
Œue
;

133 
c
++;

135 ifĞ
¡ršg
[
c
] == '+' )

136 
c
++;

141 ifĞ
¡ršg
[
c
] >= '0' && string[c] <= '9' )

142 
expÚ’t
 =ƒxpÚ’t*10 + (
¡ršg
[
c
] - '0');

146 
c
++;

150 ifĞ
expÚ’t
 )

152 ifĞ
Ãg©iveExpÚ’t
 )

153 
expÚ’t
 = -exponent;

154 
v®ue
 *ğ
	`pow
(10.0, 
expÚ’t
);

157 ifĞ
numSÿÂed
 )

158 *
numSÿÂed
 = 
c
;

160  
v®ue
;

161 
	}
}

163 
asQWORD
 
	$asSŒšgSÿnUIÁ64
(cÚ¡ *
¡ršg
, 
ba£
, 
size_t
 *
numSÿÂed
)

165 
	`asASSERT
(
ba£
 == 10 || base == 16);

167 cÚ¡ *
’d
 = 
¡ršg
;

169 
asQWORD
 
»s
 = 0;

170 ifĞ
ba£
 == 10 )

172  *
’d
 >= '0' && *end <= '9' )

174 
»s
 *= 10;

175 
»s
 +ğ*
’d
++ - '0';

178 ifĞ
ba£
 == 16 )

180  (*
’d
 >= '0' && *end <= '9') ||

181 (*
’d
 >= 'a' && *end <= 'f') ||

182 (*
’d
 >= 'A' && *end <= 'F') )

184 
»s
 *= 16;

185 ifĞ*
’d
 >= '0' && *end <= '9' )

186 
»s
 +ğ*
’d
++ - '0';

187 ifĞ*
’d
 >= 'a' && *end <= 'f' )

188 
»s
 +ğ*
’d
++ - 'a' + 10;

189 ifĞ*
’d
 >= 'A' && *end <= 'F' )

190 
»s
 +ğ*
’d
++ - 'A' + 10;

194 ifĞ
numSÿÂed
 )

195 *
numSÿÂed
 = 
’d
 - 
¡ršg
;

197  
»s
;

198 
	}
}

207 
	$asSŒšgEncodeUTF8
(
v®ue
, *
outEncodedBufãr
)

209 *
buf
 = (*)
outEncodedBufãr
;

211 
Ëngth
 = -1;

213 ifĞ
v®ue
 <= 0x7F )

215 
buf
[0] = 
¡©ic_ÿ¡
<>(
v®ue
);

218 ifĞ
v®ue
 >= 0x80 && value <= 0x7FF )

221 
buf
[0] = 
¡©ic_ÿ¡
<>(0xC0 + (
v®ue
 >> 6));

222 
Ëngth
 = 2;

224 ifĞ(
v®ue
 >= 0x800 && value <= 0xD7FF) || (value >= 0xE000 && value <= 0xFFFF) )

227 
buf
[0] = 
¡©ic_ÿ¡
<>(0xE0 + (
v®ue
 >> 12));

228 
Ëngth
 = 3;

230 ifĞ
v®ue
 >= 0x10000 && value <= 0x10FFFF )

232 
buf
[0] = 
¡©ic_ÿ¡
<>(0xF0 + (
v®ue
 >> 18));

233 
Ëngth
 = 4;

236 
n
 = 
Ëngth
-1;

237  ; 
n
 > 0;‚-- )

239 
buf
[
n
] = 
¡©ic_ÿ¡
<>(0x80 + (
v®ue
 & 0x3F));

240 
v®ue
 >>= 6;

243  
Ëngth
;

244 
	}
}

252 
	$asSŒšgDecodeUTF8
(cÚ¡ *
’codedBufãr
, *
outL’gth
)

254 cÚ¡ *
buf
 = (cÚ¡ *)
’codedBufãr
;

256 
v®ue
 = 0;

257 
Ëngth
 = -1;

258 
by‹
 = 
buf
[0];

259 ifĞ(
by‹
 & 0x80) == 0 )

262 ifĞ
outL’gth
 ) *outLength = 1;

263  
by‹
;

265 ifĞ(
by‹
 & 0xE0) == 0xC0 )

268 
v®ue
 = (
by‹
 & 0x1F);

269 
Ëngth
 = 2;

273 ifĞ
v®ue
 < 2 )

274 
Ëngth
 = -1;

276 ifĞ(
by‹
 & 0xF0) == 0xE0 )

279 
v®ue
 = (
by‹
 & 0x0F);

280 
Ëngth
 = 3;

282 ifĞ(
by‹
 & 0xF8) == 0xF0 )

285 
v®ue
 = (
by‹
 & 0x07);

286 
Ëngth
 = 4;

289 
n
 = 1;

290  ; 
n
 < 
Ëngth
;‚++ )

292 
by‹
 = 
buf
[
n
];

293 ifĞ(
by‹
 & 0xC0) == 0x80 )

294 
v®ue
 = (v®u<< 6è+ (
by‹
 & 0x3F);

299 ifĞ
n
 =ğ
Ëngth
 )

301 ifĞ
outL’gth
 ) *outL’gth = ()
Ëngth
;

302  
v®ue
;

307 
	}
}

316 
	$asSŒšgEncodeUTF16
(
v®ue
, *
outEncodedBufãr
)

318 ifĞ
v®ue
 < 0x10000 )

320 #iâdeà
AS_BIG_ENDIAN


321 
outEncodedBufãr
[0] = (
v®ue
 & 0xFF);

322 
outEncodedBufãr
[1] = ((
v®ue
 >> 8) & 0xFF);

324 
outEncodedBufãr
[1] = (
v®ue
 & 0xFF);

325 
outEncodedBufãr
[0] = ((
v®ue
 >> 8) & 0xFF);

331 
v®ue
 -= 0x10000;

332 
su¼og©e1
 = ((
v®ue
 >> 10) & 0x3FF) + 0xD800;

333 
su¼og©e2
 = (
v®ue
 & 0x3FF) + 0xDC00;

335 #iâdeà
AS_BIG_ENDIAN


336 
outEncodedBufãr
[0] = (
su¼og©e1
 & 0xFF);

337 
outEncodedBufãr
[1] = ((
su¼og©e1
 >> 8) & 0xFF);

338 
outEncodedBufãr
[2] = (
su¼og©e2
 & 0xFF);

339 
outEncodedBufãr
[3] = ((
su¼og©e2
 >> 8) & 0xFF);

341 
outEncodedBufãr
[1] = (
su¼og©e1
 & 0xFF);

342 
outEncodedBufãr
[0] = ((
su¼og©e1
 >> 8) & 0xFF);

343 
outEncodedBufãr
[3] = (
su¼og©e2
 & 0xFF);

344 
outEncodedBufãr
[2] = ((
su¼og©e2
 >> 8) & 0xFF);

349 
	}
}

352 
	gEND_AS_NAMESPACE


	@../src/script/as_thread.cpp

39 
	~"as_cÚfig.h
"

40 
	~"as_th»ad.h
"

41 
	~"as_©omic.h
"

43 
BEGIN_AS_NAMESPACE


48 
asCTh»adMªag”
 *
	gth»adMªag”
 = 0;

56 
AS_API
 
asTh»adCËªup
()

58  
asCTh»adMªag”
::
CËªupLoÿlD©a
();

61 
AS_API
 
asP»·»MuÉ™h»ad
()

63 
asCTh»adMªag”
::
P»·»
();

66 
AS_API
 
asUÅ»·»MuÉ™h»ad
()

68 
asCTh»adMªag”
::
UÅ»·»
();

71 
AS_API
 
asAcquœeExşusiveLock
()

73 ifĞ
th»adMªag”
 )

74 
ACQUIREEXCLUSIVE
(
th»adMªag”
->
­pRWLock
);

77 
AS_API
 
asR–—£ExşusiveLock
()

79 ifĞ
th»adMªag”
 )

80 
RELEASEEXCLUSIVE
(
th»adMªag”
->
­pRWLock
);

83 
AS_API
 
asAcquœeSh¬edLock
()

85 ifĞ
th»adMªag”
 )

86 
ACQUIRESHARED
(
th»adMªag”
->
­pRWLock
);

89 
AS_API
 
asR–—£Sh¬edLock
()

91 ifĞ
th»adMªag”
 )

92 
RELEASESHARED
(
th»adMªag”
->
­pRWLock
);

99 
asCTh»adMªag”
::
	$asCTh»adMªag”
()

103 #ifdeà
AS_NO_THREADS


104 
d
 = 0;

106 
»fCouÁ
 = 1;

107 
	}
}

109 
asCTh»adMªag”
::
	$P»·»
()

121 ifĞ
th»adMªag”
 == 0 )

122 
th»adMªag”
 = 
	`asNEW
(
asCTh»adMªag”
);

125 
	`ENTERCRITICALSECTION
(
th»adMªag”
->
ü™iÿlSeùiÚ
);

126 
th»adMªag”
->
»fCouÁ
++;

127 
	`LEAVECRITICALSECTION
(
th»adMªag”
->
ü™iÿlSeùiÚ
);

129 
	}
}

131 
asCTh»adMªag”
::
	$UÅ»·»
()

133 
	`asASSERT
(
th»adMªag”
);

135 ifĞ
th»adMªag”
 == 0 )

141 
	`ENTERCRITICALSECTION
(
th»adMªag”
->
ü™iÿlSeùiÚ
);

142 ifĞ--
th»adMªag”
->
»fCouÁ
 == 0 )

147 
asCTh»adMªag”
 *
mgr
 = 
th»adMªag”
;

148 
th»adMªag”
 = 0;

151 
	`LEAVECRITICALSECTION
(
mgr
->
ü™iÿlSeùiÚ
);

153 
	`asDELETE
(
mgr
,
asCTh»adMªag”
);

156 
	`LEAVECRITICALSECTION
(
th»adMªag”
->
ü™iÿlSeùiÚ
);

157 
	}
}

159 
asCTh»adMªag”
::~
	$asCTh»adMªag”
()

161 #iâdeà
AS_NO_THREADS


163 
asSM­Node
<
asPWORD
,
asCTh»adLoÿlD©a
*> *
cursÜ
 = 0;

164 ifĞ
dM­
.
	`MoveFœ¡
(&
cursÜ
) )

168 ifĞ
dM­
.
	`G‘V®ue
(
cursÜ
) )

170 
	`asDELETE
(
dM­
.
	`G‘V®ue
(
cursÜ
),
asCTh»adLoÿlD©a
);

172 }  
dM­
.
	`MoveNext
(&
cursÜ
, cursor) );

175 ifĞ
d
 )

177 
	`asDELETE
(
d
,
asCTh»adLoÿlD©a
);

179 
d
 = 0;

181 
	}
}

183 
asCTh»adMªag”
::
	$CËªupLoÿlD©a
()

185 ifĞ
th»adMªag”
 == 0 )

188 #iâdeà
AS_NO_THREADS


189 
r
 = 0;

190 #ià
defšed
 
AS_POSIX_THREADS


191 
asPWORD
 
id
 = (asPWORD)
	`±h»ad_£lf
();

192 #–ià
defšed
 
AS_WINDOWS_THREADS


193 
asPWORD
 
id
 = (asPWORD)
	`G‘Cu¼’tTh»adId
();

196 
	`ENTERCRITICALSECTION
(
th»adMªag”
->
ü™iÿlSeùiÚ
);

198 
asSM­Node
<
asPWORD
,
asCTh»adLoÿlD©a
*> *
cursÜ
 = 0;

199 ifĞ
th»adMªag”
->
dM­
.
	`MoveTo
(&
cursÜ
, 
id
) )

201 
asCTh»adLoÿlD©a
 *
d
 = 
th»adMªag”
->
dM­
.
	`G‘V®ue
(
cursÜ
);

204 ifĞ
d
->
aùiveCÚ‹xts
.
	`G‘L’gth
() == 0 )

206 
	`asDELETE
(
d
,
asCTh»adLoÿlD©a
);

207 
th»adMªag”
->
dM­
.
	`E¿£
(
cursÜ
);

208 
r
 = 0;

211 
r
 = 
asCONTEXT_ACTIVE
;

214 
	`LEAVECRITICALSECTION
(
th»adMªag”
->
ü™iÿlSeùiÚ
);

216  
r
;

218 ifĞ
th»adMªag”
->
d
 )

220 ifĞ
th»adMªag”
->
d
->
aùiveCÚ‹xts
.
	`G‘L’gth
() == 0 )

222 
	`asDELETE
(
th»adMªag”
->
d
,
asCTh»adLoÿlD©a
);

223 
th»adMªag”
->
d
 = 0;

226  
asCONTEXT_ACTIVE
;

230 
	}
}

232 #iâdeà
AS_NO_THREADS


233 
asCTh»adLoÿlD©a
 *
asCTh»adMªag”
::
	$G‘LoÿlD©a
(
asPWORD
 
th»adId
)

237 
asCTh»adLoÿlD©a
 *
d
 = 0;

239 
asSM­Node
<
asPWORD
,
asCTh»adLoÿlD©a
*> *
cursÜ
 = 0;

240 ifĞ
th»adMªag”
->
dM­
.
	`MoveTo
(&
cursÜ
, 
th»adId
) )

241 
d
 = 
th»adMªag”
->
dM­
.
	`G‘V®ue
(
cursÜ
);

243  
d
;

244 
	}
}

246 
asCTh»adMªag”
::
	$S‘LoÿlD©a
(
asPWORD
 
th»adId
, 
asCTh»adLoÿlD©a
 *
d
)

250 
dM­
.
	`In£¹
(
th»adId
, 
d
);

251 
	}
}

254 
asCTh»adLoÿlD©a
 *
asCTh»adMªag”
::
	$G‘LoÿlD©a
()

256 ifĞ
th»adMªag”
 == 0 )

259 #iâdeà
AS_NO_THREADS


260 #ià
defšed
 
AS_POSIX_THREADS


261 
asPWORD
 
id
 = (asPWORD)
	`±h»ad_£lf
();

262 #–ià
defšed
 
AS_WINDOWS_THREADS


263 
asPWORD
 
id
 = (asPWORD)
	`G‘Cu¼’tTh»adId
();

266 
	`ENTERCRITICALSECTION
(
th»adMªag”
->
ü™iÿlSeùiÚ
);

268 
asCTh»adLoÿlD©a
 *
d
 = 
th»adMªag”
->
	`G‘LoÿlD©a
(
id
);

269 ifĞ
d
 == 0 )

272 
d
 = 
	`asNEW
(
asCTh»adLoÿlD©a
)();

273 ifĞ
d
 )

274 
th»adMªag”
->
	`S‘LoÿlD©a
(
id
, 
d
);

277 
	`LEAVECRITICALSECTION
(
th»adMªag”
->
ü™iÿlSeùiÚ
);

279  
d
;

281 ifĞ
th»adMªag”
->
d
 == 0 )

282 
th»adMªag”
->
d
 = 
	`asNEW
(
asCTh»adLoÿlD©a
)();

284  
th»adMªag”
->
d
;

286 
	}
}

290 
asCTh»adLoÿlD©a
::
	$asCTh»adLoÿlD©a
()

292 
	}
}

294 
asCTh»adLoÿlD©a
::~
	$asCTh»adLoÿlD©a
()

296 
	}
}

300 #iâdeà
AS_NO_THREADS


301 
asCTh»adCr™iÿlSeùiÚ
::
	$asCTh»adCr™iÿlSeùiÚ
()

303 #ià
defšed
 
AS_POSIX_THREADS


304 
	`±h»ad_mu‹x_š™
(&
cs
, 0);

305 #–ià
defšed
 
AS_WINDOWS_THREADS


306 
	`In™ŸlizeCr™iÿlSeùiÚ
(&
cs
);

308 
	}
}

310 
asCTh»adCr™iÿlSeùiÚ
::~
	$asCTh»adCr™iÿlSeùiÚ
()

312 #ià
defšed
 
AS_POSIX_THREADS


313 
	`±h»ad_mu‹x_de¡roy
(&
cs
);

314 #–ià
defšed
 
AS_WINDOWS_THREADS


315 
	`D–‘eCr™iÿlSeùiÚ
(&
cs
);

317 
	}
}

319 
asCTh»adCr™iÿlSeùiÚ
::
	$EÁ”
()

321 #ià
defšed
 
AS_POSIX_THREADS


322 
	`±h»ad_mu‹x_lock
(&
cs
);

323 #–ià
defšed
 
AS_WINDOWS_THREADS


324 
	`EÁ”Cr™iÿlSeùiÚ
(&
cs
);

326 
	}
}

328 
asCTh»adCr™iÿlSeùiÚ
::
	$L—ve
()

330 #ià
defšed
 
AS_POSIX_THREADS


331 
	`±h»ad_mu‹x_uÆock
(&
cs
);

332 #–ià
defšed
 
AS_WINDOWS_THREADS


333 
	`L—veCr™iÿlSeùiÚ
(&
cs
);

335 
	}
}

337 
boŞ
 
asCTh»adCr™iÿlSeùiÚ
::
	$TryEÁ”
()

339 #ià
defšed
 
AS_POSIX_THREADS


340  !
	`±h»ad_mu‹x_Œylock
(&
cs
);

341 #–ià
defšed
 
AS_WINDOWS_THREADS


342  
	`TryEÁ”Cr™iÿlSeùiÚ
(&
cs
è? 
Œue
 : 
çl£
;

344  
Œue
;

346 
	}
}

348 
asCTh»adR—dWr™eLock
::
	$asCTh»adR—dWr™eLock
()

350 #ià
defšed
 
AS_POSIX_THREADS


351 
r
 = 
	`±h»ad_rwlock_š™
(&
lock
, 0);

352 
	`asASSERT
Ğ
r
 == 0 );

353 #–ià
defšed
 
AS_WINDOWS_THREADS


355 
»adLocks
 = 
	`C»©eSem­hÜe
(
NULL
, 
maxR—d”s
, maxReaders, 0);

357 
	`In™ŸlizeCr™iÿlSeùiÚ
(&
wr™eLock
);

359 
	}
}

361 
asCTh»adR—dWr™eLock
::~
	$asCTh»adR—dWr™eLock
()

363 #ià
defšed
 
AS_POSIX_THREADS


364 
	`±h»ad_rwlock_de¡roy
(&
lock
);

365 #–ià
defšed
 
AS_WINDOWS_THREADS


366 
	`D–‘eCr™iÿlSeùiÚ
(&
wr™eLock
);

367 
	`Clo£HªdË
(
»adLocks
);

369 
	}
}

371 
asCTh»adR—dWr™eLock
::
	$AcquœeExşusive
()

373 #ià
defšed
 
AS_POSIX_THREADS


374 
	`±h»ad_rwlock_w¾ock
(&
lock
);

375 #–ià
defšed
 
AS_WINDOWS_THREADS


377 
	`EÁ”Cr™iÿlSeùiÚ
(&
wr™eLock
);

383  
asUINT
 
n
 = 0;‚ < 
maxR—d”s
;‚++ )

384 
	`Wa™FÜSšgËObjeù
(
»adLocks
, 
INFINITE
);

388 
	`L—veCr™iÿlSeùiÚ
(&
wr™eLock
);

390 
	}
}

392 
asCTh»adR—dWr™eLock
::
	$R–—£Exşusive
()

394 #ià
defšed
 
AS_POSIX_THREADS


395 
	`±h»ad_rwlock_uÆock
(&
lock
);

396 #–ià
defšed
 
AS_WINDOWS_THREADS


398 
	`R–—£Sem­hÜe
(
»adLocks
, 
maxR—d”s
, 0);

400 
	}
}

402 
asCTh»adR—dWr™eLock
::
	$AcquœeSh¬ed
()

404 #ià
defšed
 
AS_POSIX_THREADS


405 
	`±h»ad_rwlock_rdlock
(&
lock
);

406 #–ià
defšed
 
AS_WINDOWS_THREADS


408 
	`Wa™FÜSšgËObjeù
(
»adLocks
, 
INFINITE
);

410 
	}
}

412 
asCTh»adR—dWr™eLock
::
	$R–—£Sh¬ed
()

414 #ià
defšed
 
AS_POSIX_THREADS


415 
	`±h»ad_rwlock_uÆock
(&
lock
);

416 #–ià
defšed
 
AS_WINDOWS_THREADS


418 
	`R–—£Sem­hÜe
(
»adLocks
, 1, 0);

420 
	}
}

426 
END_AS_NAMESPACE


	@../src/script/as_tokenizer.cpp

38 
	~"as_cÚfig.h
"

39 
	~"as_sü‹ngše.h
"

40 
	~"as_tok’iz”.h
"

41 
	~"as_tok’def.h
"

43 #ià!
defšed
(
AS_NO_MEMORY_H
)

44 
	~<memÜy.h
>

46 
	~<¡ršg.h
>

48 
BEGIN_AS_NAMESPACE


50 
	gasCTok’iz”
::
	$asCTok’iz”
()

52 
’gše
 = 0;

55  
asUINT
 
n
 = 0;‚ < 
numTok’WÜds
;‚++ )

57 ifĞ(
tok’WÜds
[
n
].
wÜd
[0] >= 'a' &&okenWords[n].word[0] <= 'z') ||

58 (
tok’WÜds
[
n
].
wÜd
[0] >= 'A' &&okenWords[n].word[0] <= 'Z') )

59 
®phaKeywÜdM­
.
	`In£¹
(
	`asCSŒšgPoš‹r
(
tok’WÜds
[
n
].
wÜd
, 
	`¡¾’
Ñok’WÜds[n].wÜd)),ok’WÜds[n].
tok’Ty³
);

61 
nÚAÍhaKeywÜdM­
.
	`In£¹
(
	`asCSŒšgPoš‹r
(
tok’WÜds
[
n
].
wÜd
, 
	`¡¾’
Ñok’WÜds[n].wÜd)),ok’WÜds[n].
tok’Ty³
);

63 
	}
}

65 
	gasCTok’iz”
::~
	$asCTok’iz”
()

67 
	}
}

70 cÚ¡ *
asCTok’iz”
::
	$G‘Defš™iÚ
(
tok’Ty³
)

72 ifĞ
tok’Ty³
 =ğ
‰UÄecognizedTok’
 )  "<unrecognizedoken>";

73 ifĞ
tok’Ty³
 =ğ
‰End
 )  "<end of file>";

74 ifĞ
tok’Ty³
 =ğ
‰Wh™eS·û
 )  "<white space>";

75 ifĞ
tok’Ty³
 =ğ
‰OÃlšeComm’t
 )  "<one†ine comment>";

76 ifĞ
tok’Ty³
 =ğ
‰MuÉšeComm’t
 )  "<multiple†ines comment>";

77 ifĞ
tok’Ty³
 =ğ
‰Id’tif›r
 )  "<identifier>";

78 ifĞ
tok’Ty³
 =ğ
‰IÁCÚ¡ªt
 )  "<integer constant>";

79 ifĞ
tok’Ty³
 =ğ
‰FlßtCÚ¡ªt
 )  "<float constant>";

80 ifĞ
tok’Ty³
 =ğ
‰DoubËCÚ¡ªt
 )  "<double constant>";

81 ifĞ
tok’Ty³
 =ğ
‰SŒšgCÚ¡ªt
 )  "<string constant>";

82 ifĞ
tok’Ty³
 =ğ
‰MuÉšeSŒšgCÚ¡ªt
 )  "<multiline string constant>";

83 ifĞ
tok’Ty³
 =ğ
‰NÚT”mš©edSŒšgCÚ¡ªt
 )  "<nonterminated string constant>";

84 ifĞ
tok’Ty³
 =ğ
‰B™sCÚ¡ªt
 )  "<bits constant>";

85 ifĞ
tok’Ty³
 =ğ
‰H”edocSŒšgCÚ¡ªt
 )  "<heredoc string constant>";

87  
asUINT
 
n
 = 0;‚ < 
numTok’WÜds
;‚++ )

88 ifĞ
tok’WÜds
[
n
].
tok’Ty³
 ==okenType )

89  
tok’WÜds
[
n
].
wÜd
;

92 
	}
}

94 
eTok’Ty³
 
	gasCTok’iz”
::
	$G‘Tok’
(cÚ¡ *
sourû
, 
size_t
 
sourûL’gth
, size_ˆ*
tok’L’gth
, 
asETok’CÏss
 *
tc
) const

96 
	`asASSERT
(
sourû
 != 0);

97 
	`asASSERT
(
tok’L’gth
 != 0);

99 
eTok’Ty³
 
tok’Ty³
;

100 
size_t
 
’
;

101 
asETok’CÏss
 
t
 = 
	`P¬£Tok’
(
sourû
, 
sourûL’gth
, 
’
, 
tok’Ty³
);

102 ifĞ
tc
 ) *tøğ
t
;

103 ifĞ
tok’L’gth
 ) *tok’L’gth = 
’
;

105  
tok’Ty³
;

106 
	}
}

108 
asETok’CÏss
 
	gasCTok’iz”
::
	$P¬£Tok’
(cÚ¡ *
sourû
, 
size_t
 
sourûL’gth
, size_ˆ&
tok’L’gth
, 
eTok’Ty³
 &
tok’Ty³
) const

110 ifĞ
	`IsWh™eS·û
(
sourû
, 
sourûL’gth
, 
tok’L’gth
, 
tok’Ty³
èè 
asTC_WHITESPACE
;

111 ifĞ
	`IsComm’t
(
sourû
, 
sourûL’gth
, 
tok’L’gth
, 
tok’Ty³
èè 
asTC_COMMENT
;

112 ifĞ
	`IsCÚ¡ªt
(
sourû
, 
sourûL’gth
, 
tok’L’gth
, 
tok’Ty³
èè 
asTC_VALUE
;

113 ifĞ
	`IsId’tif›r
(
sourû
, 
sourûL’gth
, 
tok’L’gth
, 
tok’Ty³
èè 
asTC_IDENTIFIER
;

114 ifĞ
	`IsKeyWÜd
(
sourû
, 
sourûL’gth
, 
tok’L’gth
, 
tok’Ty³
èè 
asTC_KEYWORD
;

119 
tok’Ty³
 = 
‰UÄecognizedTok’
;

120 
tok’L’gth
 = 1;

122  
asTC_UNKNOWN
;

123 
	}
}

125 
boŞ
 
	gasCTok’iz”
::
	$IsWh™eS·û
(cÚ¡ *
sourû
, 
size_t
 
sourûL’gth
, size_ˆ&
tok’L’gth
, 
eTok’Ty³
 &
tok’Ty³
) const

128 ifĞ
sourûL’gth
 >= 3 &&

129 
	`asBYTE
(
sourû
[0]) == 0xEFu &&

130 
	`asBYTE
(
sourû
[1]) == 0xBBu &&

131 
	`asBYTE
(
sourû
[2]) == 0xBFu )

133 
tok’Ty³
 = 
‰Wh™eS·û
;

134 
tok’L’gth
 = 3;

135  
Œue
;

139 
size_t
 
n
;

140 
numWsCh¬s
 = ()
	`¡¾’
(
wh™eS·û
);

141  
n
 = 0;‚ < 
sourûL’gth
;‚++ )

143 
boŞ
 
isWh™eS·û
 = 
çl£
;

144  
w
 = 0; w < 
numWsCh¬s
; w++ )

146 ifĞ
sourû
[
n
] =ğ
wh™eS·û
[
w
] )

148 
isWh™eS·û
 = 
Œue
;

152 ifĞ!
isWh™eS·û
 ) ;

155 ifĞ
n
 > 0 )

157 
tok’Ty³
 = 
‰Wh™eS·û
;

158 
tok’L’gth
 = 
n
;

159  
Œue
;

162  
çl£
;

163 
	}
}

165 
boŞ
 
	gasCTok’iz”
::
	$IsComm’t
(cÚ¡ *
sourû
, 
size_t
 
sourûL’gth
, size_ˆ&
tok’L’gth
, 
eTok’Ty³
 &
tok’Ty³
) const

167 ifĞ
sourûL’gth
 < 2 )

168  
çl£
;

170 ifĞ
sourû
[0] != '/' )

171  
çl£
;

173 ifĞ
sourû
[1] == '/' )

178 
size_t
 
n
;

179  
n
 = 2;‚ < 
sourûL’gth
;‚++ )

181 ifĞ
sourû
[
n
] == '\n' )

185 
tok’Ty³
 = 
‰OÃlšeComm’t
;

186 
tok’L’gth
 = 
n
+1;

188  
Œue
;

191 ifĞ
sourû
[1] == '*' )

196 
size_t
 
n
;

197  
n
 = 2;‚ < 
sourûL’gth
-1; )

199 ifĞ
sourû
[
n
++] == '*' && source[n] == '/' )

203 
tok’Ty³
 = 
‰MuÉšeComm’t
;

204 
tok’L’gth
 = 
n
+1;

206  
Œue
;

209  
çl£
;

210 
	}
}

212 
boŞ
 
	gasCTok’iz”
::
	$IsCÚ¡ªt
(cÚ¡ *
sourû
, 
size_t
 
sourûL’gth
, size_ˆ&
tok’L’gth
, 
eTok’Ty³
 &
tok’Ty³
) const

215 ifĞ(
sourû
[0] >ğ'0' && sourû[0] <ğ'9'è|| (sourû[0] =ğ'.' && 
sourûL’gth
 > 1 && source[1] >= '0' && source[1] <= '9') )

218 ifĞ
sourû
[0] =ğ'0' && 
sourûL’gth
 > 1 && (source[1] == 'x' || source[1] == 'X') )

220 
size_t
 
n
;

221  
n
 = 2;‚ < 
sourûL’gth
;‚++ )

223 ifĞ!(
sourû
[
n
] >= '0' && source[n] <= '9') &&

224 !(
sourû
[
n
] >= 'a' && source[n] <= 'f') &&

225 !(
sourû
[
n
] >= 'A' && source[n] <= 'F') )

229 
tok’Ty³
 = 
‰B™sCÚ¡ªt
;

230 
tok’L’gth
 = 
n
;

231  
Œue
;

234 
size_t
 
n
;

235  
n
 = 0;‚ < 
sourûL’gth
;‚++ )

237 ifĞ
sourû
[
n
] < '0' || source[n] > '9' )

241 ifĞ
n
 < 
sourûL’gth
 && 
sourû
[n] == '.' )

243 
n
++;

244  ; 
n
 < 
sourûL’gth
;‚++ )

246 ifĞ
sourû
[
n
] < '0' || source[n] > '9' )

250 ifĞ
n
 < 
sourûL’gth
 && (
sourû
[n] == 'e' || source[n] == 'E') )

252 
n
++;

253 ifĞ
n
 < 
sourûL’gth
 && (
sourû
[n] == '-' || source[n] == '+') )

254 
n
++;

256  ; 
n
 < 
sourûL’gth
;‚++ )

258 ifĞ
sourû
[
n
] < '0' || source[n] > '9' )

263 ifĞ
n
 < 
sourûL’gth
 && (
sourû
[n] == 'f' || source[n] == 'F') )

265 
tok’Ty³
 = 
‰FlßtCÚ¡ªt
;

266 
tok’L’gth
 = 
n
 + 1;

270 #ifdeà
AS_USE_DOUBLE_AS_FLOAT


271 
tok’Ty³
 = 
‰FlßtCÚ¡ªt
;

273 
tok’Ty³
 = 
‰DoubËCÚ¡ªt
;

275 
tok’L’gth
 = 
n
;

277  
Œue
;

280 
tok’Ty³
 = 
‰IÁCÚ¡ªt
;

281 
tok’L’gth
 = 
n
;

282  
Œue
;

286 ifĞ
sourû
[0] == '"' || source[0] == '\'' )

289 ifĞ
sourûL’gth
 >ğ6 && 
sourû
[0] == '"' && source[1] == '"' && source[2] == '"' )

294 
size_t
 
n
;

295  
n
 = 3;‚ < 
sourûL’gth
-2;‚++ )

297 ifĞ
sourû
[
n
] == '"' && source[n+1] == '"' && source[n+2] == '"' )

301 
tok’Ty³
 = 
‰H”edocSŒšgCÚ¡ªt
;

302 
tok’L’gth
 = 
n
+3;

307 
tok’Ty³
 = 
‰SŒšgCÚ¡ªt
;

308 
quÙe
 = 
sourû
[0];

309 
boŞ
 
ev’SÏshes
 = 
Œue
;

310 
size_t
 
n
;

311  
n
 = 1;‚ < 
sourûL’gth
;‚++ )

313 #ifdeà
AS_DOUBLEBYTE_CHARSET


315 ifĞ(
sourû
[
n
] & 0x80è&& 
’gše
->
•
.
sÿÂ”
 == 0 )

319 
n
++;

324 ifĞ
sourû
[
n
] == '\n' )

325 
tok’Ty³
 = 
‰MuÉšeSŒšgCÚ¡ªt
;

326 ifĞ
sourû
[
n
] =ğ
quÙe
 && 
ev’SÏshes
 )

328 
tok’L’gth
 = 
n
+1;

329  
Œue
;

331 ifĞ
sourû
[
n
] =ğ'\\' ) 
ev’SÏshes
 = !ev’SÏshes; ev’SÏshe ğ
Œue
;

334 
tok’Ty³
 = 
‰NÚT”mš©edSŒšgCÚ¡ªt
;

335 
tok’L’gth
 = 
n
;

338  
Œue
;

341  
çl£
;

342 
	}
}

344 
boŞ
 
	gasCTok’iz”
::
	$IsId’tif›r
(cÚ¡ *
sourû
, 
size_t
 
sourûL’gth
, size_ˆ&
tok’L’gth
, 
eTok’Ty³
 &
tok’Ty³
) const

347 ifĞ(
sourû
[0] >= 'a' && source[0] <= 'z') ||

348 (
sourû
[0] >= 'A' && source[0] <= 'Z') ||

349 
sourû
[0] == '_' )

351 
tok’Ty³
 = 
‰Id’tif›r
;

352 
tok’L’gth
 = 1;

354  
size_t
 
n
 = 1;‚ < 
sourûL’gth
;‚++ )

356 ifĞ(
sourû
[
n
] >= 'a' && source[n] <= 'z') ||

357 (
sourû
[
n
] >= 'A' && source[n] <= 'Z') ||

358 (
sourû
[
n
] >= '0' && source[n] <= '9') ||

359 
sourû
[
n
] == '_' )

360 
tok’L’gth
++;

366 ifĞ
®phaKeywÜdM­
.
	`MoveTo
(0, 
	`asCSŒšgPoš‹r
(
sourû
, 
tok’L’gth
)) )

367  
çl£
;

369  
Œue
;

372  
çl£
;

373 
	}
}

375 
boŞ
 
	gasCTok’iz”
::
	$IsKeyWÜd
(cÚ¡ *
sourû
, 
size_t
 
sourûL’gth
, size_ˆ&
tok’L’gth
, 
eTok’Ty³
 &
tok’Ty³
) const

386 cÚ¡ 
asCM­
<
asCSŒšgPoš‹r
,
eTok’Ty³
> *
m­
;

387 
maxL’gth
;

389 ifĞ(
sourû
[0] >= 'a' && source[0] <= 'z') ||

390 (
sourû
[0] >= 'A' && source[0] <= 'Z') )

392 
m­
 = &
®phaKeywÜdM­
;

394 
maxL’gth
 = 
sourûL’gth
 > 9 ? 9 : (sourceLength);

398 
m­
 = &
nÚAÍhaKeywÜdM­
;

400 
maxL’gth
 = 
sourûL’gth
 > 4 ? 4 : (sourceLength);

404  
maxL’gth
 > 0 )

406 
asSM­Node
<
asCSŒšgPoš‹r
, 
eTok’Ty³
> *
cursÜ
;

407 ifĞ
m­
->
	`MoveTo
(&
cursÜ
, 
	`asCSŒšgPoš‹r
(
sourû
, 
maxL’gth
)) )

413 ifĞ
maxL’gth
 < (
sourûL’gth
) &&

414 ((
sourû
[
maxL’gth
-1] >= 'a' && source[maxLength-1] <= 'z') ||

415 (
sourû
[
maxL’gth
-1] >= 'A' && source[maxLength-1] <= 'Z')) &&

416 ((
sourû
[
maxL’gth
] >= 'a' && source[maxLength] <= 'z') ||

417 (
sourû
[
maxL’gth
] >= 'A' && source[maxLength] <= 'Z') ||

418 (
sourû
[
maxL’gth
] >= '0' && source[maxLength] <= '9') ||

419 (
sourû
[
maxL’gth
] == '_')) )

423 
maxL’gth
--;

427 
tok’Ty³
 = 
cursÜ
->
v®ue
;

428 
tok’L’gth
 = 
maxL’gth
;

429  
Œue
;

431 
maxL’gth
--;

434  
çl£
;

435 
	}
}

437 
	gEND_AS_NAMESPACE


	@../src/script/as_typeinfo.cpp

38 
	~"as_cÚfig.h
"

39 
	~"as_ty³šfo.h
"

41 
BEGIN_AS_NAMESPACE


43 
	gasCTy³Info
::
	$asCTy³Info
()

45 
isTempÜ¬y
 = 
çl£
;

46 
¡ackOff£t
 = 0;

47 
isCÚ¡ªt
 = 
çl£
;

48 
isV¬ŸbË
 = 
çl£
;

49 
isEx¶ic™HªdË
 = 
çl£
;

50 
qwÜdV®ue
 = 0;

51 
isLV®ue
 = 
çl£
;

52 
	}
}

54 
	gasCTy³Info
::
	$S‘
(cÚ¡ 
asCD©aTy³
 &
dt
)

56 
d©aTy³
 = 
dt
;

58 
isTempÜ¬y
 = 
çl£
;

59 
¡ackOff£t
 = 0;

60 
isCÚ¡ªt
 = 
çl£
;

61 
isV¬ŸbË
 = 
çl£
;

62 
isEx¶ic™HªdË
 = 
çl£
;

63 
qwÜdV®ue
 = 0;

64 
isLV®ue
 = 
çl£
;

65 
	}
}

67 
	gasCTy³Info
::
	$S‘V¬ŸbË
(cÚ¡ 
asCD©aTy³
 &
dt
, 
¡ackOff£t
, 
boŞ
 
isTempÜ¬y
)

69 
	`S‘
(
dt
);

71 
this
->
isV¬ŸbË
 = 
Œue
;

72 
this
->
isTempÜ¬y
 = isTemporary;

73 
this
->
¡ackOff£t
 = ()stackOffset;

74 
	}
}

76 
	gasCTy³Info
::
	$S‘CÚ¡ªtQW
(cÚ¡ 
asCD©aTy³
 &
dt
, 
asQWORD
 
v®ue
)

78 
	`S‘
(
dt
);

80 
isCÚ¡ªt
 = 
Œue
;

81 
qwÜdV®ue
 = 
v®ue
;

82 
	}
}

84 
	gasCTy³Info
::
	$S‘CÚ¡ªtDW
(cÚ¡ 
asCD©aTy³
 &
dt
, 
asDWORD
 
v®ue
)

86 
	`S‘
(
dt
);

88 
isCÚ¡ªt
 = 
Œue
;

89 
dwÜdV®ue
 = 
v®ue
;

90 
	}
}

92 
	gasCTy³Info
::
	$S‘CÚ¡ªtB
(cÚ¡ 
asCD©aTy³
 &
dt
, 
asBYTE
 
v®ue
)

94 
	`S‘
(
dt
);

96 
isCÚ¡ªt
 = 
Œue
;

97 
by‹V®ue
 = 
v®ue
;

98 
	}
}

100 
	gasCTy³Info
::
	$S‘CÚ¡ªtF
(cÚ¡ 
asCD©aTy³
 &
dt
, 
v®ue
)

102 
	`S‘
(
dt
);

104 
isCÚ¡ªt
 = 
Œue
;

105 
æßtV®ue
 = 
v®ue
;

106 
	}
}

108 
	gasCTy³Info
::
	$S‘CÚ¡ªtD
(cÚ¡ 
asCD©aTy³
 &
dt
, 
v®ue
)

110 
	`S‘
(
dt
);

112 
isCÚ¡ªt
 = 
Œue
;

113 
doubËV®ue
 = 
v®ue
;

114 
	}
}

116 
	gasCTy³Info
::
	$S‘NuÎCÚ¡ªt
()

118 
	`S‘
(
asCD©aTy³
::
	`C»©eNuÎHªdË
());

119 
isCÚ¡ªt
 = 
Œue
;

120 
isEx¶ic™HªdË
 = 
Œue
;

121 
qwÜdV®ue
 = 0;

122 
	}
}

124 
	gasCTy³Info
::
	$S‘Dummy
()

126 
	`S‘CÚ¡ªtQW
(
asCD©aTy³
::
	`C»©ePrim™ive
(
‰IÁ
, 
Œue
), 0);

127 
	}
}

129 
boŞ
 
	gasCTy³Info
::
	$IsNuÎCÚ¡ªt
()

131 ifĞ
isCÚ¡ªt
 && 
d©aTy³
.
	`IsObjeùHªdË
() )

132  
Œue
;

134  
çl£
;

135 
	}
}

137 
	gEND_AS_NAMESPACE


	@../src/script/as_variablescope.cpp

39 
	~"as_cÚfig.h
"

41 #iâdeà
AS_NO_COMPILER


43 
	~"as_v¬ŸbËscİe.h
"

45 
BEGIN_AS_NAMESPACE


47 
	gasCV¬ŸbËScİe
::
	$asCV¬ŸbËScİe
(
asCV¬ŸbËScİe
 *
·»Á
)

49 
this
->
·»Á
 =…arent;

50 
	`Re£t
();

51 
	}
}

53 
	gasCV¬ŸbËScİe
::~
	$asCV¬ŸbËScİe
()

55 
	`Re£t
();

56 
	}
}

58 
	gasCV¬ŸbËScİe
::
	$Re£t
()

60 
isB»akScİe
 = 
çl£
;

61 
isCÚtšueScİe
 = 
çl£
;

63  
asUINT
 
n
 = 0;‚ < 
v¬ŸbËs
.
	`G‘L’gth
();‚++ )

64 ifĞ
v¬ŸbËs
[
n
] )

66 
	`asDELETE
(
v¬ŸbËs
[
n
],
sV¬ŸbË
);

68 
v¬ŸbËs
.
	`S‘L’gth
(0);

69 
	}
}

71 
	gasCV¬ŸbËScİe
::
	$Deş¬eV¬ŸbË
(cÚ¡ *
Çme
, cÚ¡ 
asCD©aTy³
 &
ty³
, 
¡ackOff£t
, 
boŞ
 
ÚH—p
)

75 ifĞ
	`¡rcmp
(
Çme
, "") != 0 )

77  
asUINT
 
n
 = 0;‚ < 
v¬ŸbËs
.
	`G‘L’gth
();‚++ )

79 ifĞ
v¬ŸbËs
[
n
]->
Çme
 ==‚ame )

84 
sV¬ŸbË
 *
v¬
 = 
	`asNEW
(sVariable);

85 ifĞ
v¬
 == 0 )

90 
v¬
->
Çme
 =‚ame;

91 
v¬
->
ty³
 =ype;

92 
v¬
->
¡ackOff£t
 = stackOffset;

93 
v¬
->
isIn™Ÿlized
 = 
çl£
;

94 
v¬
->
isPu»CÚ¡ªt
 = 
çl£
;

95 
v¬
->
ÚH—p
 = onHeap;

98 ifĞ
¡ackOff£t
 <= 0 )

99 
v¬
->
isIn™Ÿlized
 = 
Œue
;

101 
v¬ŸbËs
.
	`PushLa¡
(
v¬
);

104 
	}
}

106 
sV¬ŸbË
 *
	gasCV¬ŸbËScİe
::
	$G‘V¬ŸbË
(cÚ¡ *
Çme
)

110  
asUINT
 
n
 = 0;‚ < 
v¬ŸbËs
.
	`G‘L’gth
();‚++ )

112 ifĞ
v¬ŸbËs
[
n
]->
Çme
 ==‚ame )

113  
v¬ŸbËs
[
n
];

116 ifĞ
·»Á
 )

117  
·»Á
->
	`G‘V¬ŸbË
(
Çme
);

120 
	}
}

122 
sV¬ŸbË
 *
	gasCV¬ŸbËScİe
::
	$G‘V¬ŸbËByOff£t
(
off£t
)

126  
asUINT
 
n
 = 0;‚ < 
v¬ŸbËs
.
	`G‘L’gth
();‚++ )

128 ifĞ
v¬ŸbËs
[
n
]->
¡ackOff£t
 =ğ
off£t
 )

129  
v¬ŸbËs
[
n
];

132 ifĞ
·»Á
 )

133  
·»Á
->
	`G‘V¬ŸbËByOff£t
(
off£t
);

136 
	}
}

138 
	gEND_AS_NAMESPACE


	@../src/script/scriptbuilder.cpp

1 
	~"sütbud”.h
"

2 
	~<veùÜ
>

3 
	~<as£¹.h
>

4 
usšg
 
Çme¥aû
 
	g¡d
;

6 
	~<¡dio.h
>

7 #ià
defšed
(
_MSC_VER
è&& !defšed(
_WIN32_WCE
è&& !defšed(
__S3E__
)

8 
	~<dœeù.h
>

10 #ifdeà
_WIN32_WCE


11 
	~<wšdows.h
>

14 #ià
defšed
(
__S3E__
è|| defšed(
__APPLE__
è|| defšed(
__GNUC__
)

15 
	~<uni¡d.h
>

18 
BEGIN_AS_NAMESPACE


21 
¡ršg
 
G‘Cu¼’tDœ
();

22 
¡ršg
 
G‘AbsŞu‹P©h
(cÚ¡ sŒšg &
·th
);

25 
	gCSütBud”
::
	$CSütBud”
()

27 
’gše
 = 0;

28 
moduË
 = 0;

30 
šşudeC®lback
 = 0;

31 
ÿÎbackP¬am
 = 0;

32 
	}
}

34 
	gCSütBud”
::
	$S‘InşudeC®lback
(
INCLUDECALLBACK_t
 
ÿÎback
, *
u£rP¬am
)

36 
šşudeC®lback
 = 
ÿÎback
;

37 
ÿÎbackP¬am
 = 
u£rP¬am
;

38 
	}
}

40 
	gCSütBud”
::
	$S¹NewModuË
(
asISütEngše
 *
’gše
, cÚ¡ *
moduËName
)

42 ifĞ
’gše
 == 0 )  -1;

44 
this
->
’gše
 =ƒngine;

45 
moduË
 = 
’gše
->
	`G‘ModuË
(
moduËName
, 
asGM_ALWAYS_CREATE
);

46 ifĞ
moduË
 == 0 )

49 
	`CË¬AÎ
();

52 
	}
}

54 
asISütModuË
 *
	gCSütBud”
::
	$G‘ModuË
()

56  
moduË
;

57 
	}
}

59 
	gCSütBud”
::
	$G‘SeùiÚCouÁ
() const

61  ()(
šşudedSüts
.
	`size
());

62 
	}
}

64 
¡ršg
 
	gCSütBud”
::
	$G‘SeùiÚName
(
idx
) const

66 ifĞ
idx
 >ğ
šşudedSüts
.
	`size
() )  "";

68 #ifdeà
_WIN32


69 
£t
<
¡ršg
, 
ci_Ëss
>::
cÚ¡_™”©Ü
 
™
 = 
šşudedSüts
.
	`begš
();

71 
£t
<
¡ršg
>::
cÚ¡_™”©Ü
 
™
 = 
šşudedSüts
.
	`begš
();

73  
idx
-- > 0 ) 
™
++;

74  *
™
;

75 
	}
}

80 
	gCSütBud”
::
	$AddSeùiÚFromFe
(cÚ¡ *
f’ame
)

84 
¡ršg
 
fuÎ·th
 = 
	`G‘AbsŞu‹P©h
(
f’ame
);

86 ifĞ
	`InşudeIfNÙAÌ—dyInşuded
(
fuÎ·th
.
	`c_¡r
()) )

88 
r
 = 
	`LßdSütSeùiÚ
(
fuÎ·th
.
	`c_¡r
());

89 ifĞ
r
 < 0 )

90  
r
;

96 
	}
}

101 
	gCSütBud”
::
	$AddSeùiÚFromMemÜy
(cÚ¡ *
£ùiÚName
, cÚ¡ *
sütCode
, 
sütL’gth
, 
lšeOff£t
)

103 ifĞ
	`InşudeIfNÙAÌ—dyInşuded
(
£ùiÚName
) )

105 
r
 = 
	`ProûssSütSeùiÚ
(
sütCode
, 
sütL’gth
, 
£ùiÚName
, 
lšeOff£t
);

106 ifĞ
r
 < 0 )

107  
r
;

113 
	}
}

115 
	gCSütBud”
::
	$BudModuË
()

117  
	`Bud
();

118 
	}
}

120 
	gCSütBud”
::
	$DefšeWÜd
(cÚ¡ *
wÜd
)

122 
¡ršg
 
swÜd
 = 
wÜd
;

123 ifĞ
defšedWÜds
.
	`fšd
(
swÜd
è=ğdefšedWÜds.
	`’d
() )

125 
defšedWÜds
.
	`š£¹
(
swÜd
);

127 
	}
}

129 
	gCSütBud”
::
	$CË¬AÎ
()

131 
šşudedSüts
.
	`ş—r
();

133 #ià
AS_PROCESS_METADATA
 == 1

134 
cu¼’tCÏss
 = "";

135 
cu¼’tName¥aû
 = "";

137 
foundDeş¬©iÚs
.
	`ş—r
();

138 
ty³M‘ad©aM­
.
	`ş—r
();

139 
funcM‘ad©aM­
.
	`ş—r
();

140 
v¬M‘ad©aM­
.
	`ş—r
();

142 
	}
}

144 
boŞ
 
	gCSütBud”
::
	$InşudeIfNÙAÌ—dyInşuded
(cÚ¡ *
f’ame
)

146 
¡ršg
 
sütFe
 = 
f’ame
;

147 ifĞ
šşudedSüts
.
	`fšd
(
sütFe
è!ğšşudedSüts.
	`’d
() )

150  
çl£
;

154 
šşudedSüts
.
	`š£¹
(
sütFe
);

156  
Œue
;

157 
	}
}

159 
	gCSütBud”
::
	$LßdSütSeùiÚ
(cÚ¡ *
f’ame
)

162 
¡ršg
 
sütFe
 = 
f’ame
;

163 #ià
_MSC_VER
 >ğ1500 && !
	`defšed
(
__S3E__
)

164 
FILE
 *
f
 = 0;

165 
	`fİ’_s
(&
f
, 
sütFe
.
	`c_¡r
(), "rb");

167 
FILE
 *
f
 = 
	`fİ’
(
sütFe
.
	`c_¡r
(), "rb");

169 ifĞ
f
 == 0 )

172 
¡ršg
 
msg
 = "FaedØİ’ süˆf'" + 
	`G‘AbsŞu‹P©h
(
sütFe
) + "'";

173 
’gše
->
	`Wr™eMes§ge
(
f’ame
, 0, 0, 
asMSGTYPE_ERROR
, 
msg
.
	`c_¡r
());

181 
	`f£ek
(
f
, 0, 
SEEK_END
);

182 
Ën
 = 
	`á–l
(
f
);

183 
	`f£ek
(
f
, 0, 
SEEK_SET
);

189 
¡ršg
 
code
;

190 
size_t
 
c
 = 0;

191 ifĞ
Ën
 > 0 )

193 
code
.
	`»size
(
Ën
);

194 
c
 = 
	`ä—d
(&
code
[0], 
Ën
, 1, 
f
);

197 
	`fşo£
(
f
);

199 ifĞ
c
 =ğ0 && 
Ën
 > 0 )

202 
¡ršg
 
msg
 = "FaedØlßd süˆf'" + 
	`G‘AbsŞu‹P©h
(
sütFe
) + "'";

203 
’gše
->
	`Wr™eMes§ge
(
f’ame
, 0, 0, 
asMSGTYPE_ERROR
, 
msg
.
	`c_¡r
());

208  
	`ProûssSütSeùiÚ
(
code
.
	`c_¡r
(), ()(code.
	`Ëngth
()), 
f’ame
, 0);

209 
	}
}

211 
	gCSütBud”
::
	$ProûssSütSeùiÚ
(cÚ¡ *
süt
, 
Ëngth
, cÚ¡ *
£ùiÚÇme
, 
lšeOff£t
)

213 
veùÜ
<
¡ršg
> 
šşudes
;

216 ifĞ
Ëngth
 )

217 
modif›dSüt
.
	`assign
(
süt
, 
Ëngth
);

219 
modif›dSüt
 = 
süt
;

222 
pos
 = 0;

223 
Ã¡ed
 = 0;

224  
pos
 < 
modif›dSüt
.
	`size
() )

226 
asUINT
 
Ën
 = 0;

227 
asETok’CÏss
 
t
 = 
’gše
->
	`P¬£Tok’
(&
modif›dSüt
[
pos
], modif›dSüt.
	`size
(è-…os, &
Ën
);

228 ifĞ
t
 =ğ
asTC_UNKNOWN
 && 
modif›dSüt
[
pos
] =ğ'#' && (po + 1 < modif›dSüt.
	`size
()) )

230 
¡¬t
 = 
pos
++;

233 
asETok’CÏss
 
t
 = 
’gše
->
	`P¬£Tok’
(&
modif›dSüt
[
pos
], modif›dSüt.
	`size
(è-…os, &
Ën
);

235 
¡ršg
 
tok’
;

236 
tok’
.
	`assign
(&
modif›dSüt
[
pos
], 
Ën
);

238 
pos
 +ğ
Ën
;

240 ifĞ
tok’
 == "if" )

242 
t
 = 
’gše
->
	`P¬£Tok’
(&
modif›dSüt
[
pos
], modif›dSüt.
	`size
(è-…os, &
Ën
);

243 ifĞ
t
 =ğ
asTC_WHITESPACE
 )

245 
pos
 +ğ
Ën
;

246 
t
 = 
’gše
->
	`P¬£Tok’
(&
modif›dSüt
[
pos
], modif›dSüt.
	`size
(è-…os, &
Ën
);

249 ifĞ
t
 =ğ
asTC_IDENTIFIER
 )

251 
¡ršg
 
wÜd
;

252 
wÜd
.
	`assign
(&
modif›dSüt
[
pos
], 
Ën
);

255 
pos
 +ğ
Ën
;

256 
	`Ov”wr™eCode
(
¡¬t
, 
pos
-start);

259 ifĞ
defšedWÜds
.
	`fšd
(
wÜd
è=ğdefšedWÜds.
	`’d
() )

262 
pos
 = 
	`ExşudeCode
(pos);

266 
Ã¡ed
++;

270 ifĞ
tok’
 == "endif" )

273 ifĞ
Ã¡ed
 > 0 )

275 
	`Ov”wr™eCode
(
¡¬t
, 
pos
-start);

276 
Ã¡ed
--;

281 
pos
 +ğ
Ën
;

284 #ià
AS_PROCESS_METADATA
 == 1

286 
¡ršg
 
m‘ad©a
, 
deş¬©iÚ
;

287 
m‘ad©a
.
	`»£rve
(500);

288 
deş¬©iÚ
.
	`»£rve
(100);

292 
pos
 = 0;

293  
pos
 < 
modif›dSüt
.
	`size
() )

295 
asUINT
 
Ën
 = 0;

296 
asETok’CÏss
 
t
 = 
’gše
->
	`P¬£Tok’
(&
modif›dSüt
[
pos
], modif›dSüt.
	`size
(è-…os, &
Ën
);

297 ifĞ
t
 =ğ
asTC_COMMENT
 || =ğ
asTC_WHITESPACE
 )

299 
pos
 +ğ
Ën
;

303 #ià
AS_PROCESS_METADATA
 == 1

305 ifĞ
cu¼’tCÏss
 =ğ"" && 
modif›dSüt
.
	`sub¡r
(
pos
,
Ën
) == "class" )

310 
pos
 +ğ
Ën
;

311 ifĞ
pos
 >ğ
modif›dSüt
.
	`size
() )

313 
t
 = 
asTC_UNKNOWN
;

316 
t
 = 
’gše
->
	`P¬£Tok’
(&
modif›dSüt
[
pos
], modif›dSüt.
	`size
(è-…os, &
Ën
);

317 } 
t
 =ğ
asTC_COMMENT
 || =ğ
asTC_WHITESPACE
);

319 ifĞ
t
 =ğ
asTC_IDENTIFIER
 )

321 
cu¼’tCÏss
 = 
modif›dSüt
.
	`sub¡r
(
pos
,
Ën
);

324  
pos
 < 
modif›dSüt
.
	`Ëngth
() )

326 
’gše
->
	`P¬£Tok’
(&
modif›dSüt
[
pos
], modif›dSüt.
	`size
(è-…os, &
Ën
);

329 ifĞ
modif›dSüt
[
pos
] == '{' )

331 
pos
 +ğ
Ën
;

336 
pos
 +ğ
Ën
;

344 ifĞ
cu¼’tCÏss
 !ğ"" && 
modif›dSüt
[
pos
] == '}' )

346 
cu¼’tCÏss
 = "";

347 
pos
 +ğ
Ën
;

352 ifĞ
modif›dSüt
.
	`sub¡r
(
pos
,
Ën
) == "namespace" )

357 
pos
 +ğ
Ën
;

358 
t
 = 
’gše
->
	`P¬£Tok’
(&
modif›dSüt
[
pos
], modif›dSüt.
	`size
(è-…os, &
Ën
);

359 } 
t
 =ğ
asTC_COMMENT
 || =ğ
asTC_WHITESPACE
);

361 ifĞ
cu¼’tName¥aû
 != "" )

362 
cu¼’tName¥aû
 += "::";

363 
cu¼’tName¥aû
 +ğ
modif›dSüt
.
	`sub¡r
(
pos
,
Ën
);

366  
pos
 < 
modif›dSüt
.
	`Ëngth
() )

368 
’gše
->
	`P¬£Tok’
(&
modif›dSüt
[
pos
], modif›dSüt.
	`size
(è-…os, &
Ën
);

371 ifĞ
modif›dSüt
[
pos
] == '{' )

373 
pos
 +ğ
Ën
;

378 
pos
 +ğ
Ën
;

385 ifĞ
cu¼’tName¥aû
 !ğ"" && 
modif›dSüt
[
pos
] == '}' )

387 
size_t
 
found
 = 
cu¼’tName¥aû
.
	`rfšd
( "::" );

388 ifĞ
found
 !ğ
¡ršg
::
Åos
 )

390 
cu¼’tName¥aû
.
	`”a£
Ğ
found
 );

394 
cu¼’tName¥aû
 = "";

396 
pos
 +ğ
Ën
;

401 ifĞ
modif›dSüt
[
pos
] == '[' )

404 
pos
 = 
	`ExŒaùM‘ad©aSŒšg
Õos, 
m‘ad©a
);

407 
ty³
;

408 
	`ExŒaùDeş¬©iÚ
(
pos
, 
deş¬©iÚ
, 
ty³
);

411 ifĞ
ty³
 > 0 )

413 
SM‘ad©aDeş
 
	`deş
(
m‘ad©a
, 
deş¬©iÚ
, 
ty³
, 
cu¼’tCÏss
, 
cu¼’tName¥aû
);

414 
foundDeş¬©iÚs
.
	`push_back
(
deş
);

420 ifĞ
modif›dSüt
[
pos
] =ğ'#' && (po + 1 < modif›dSüt.
	`size
()) )

422 
¡¬t
 = 
pos
++;

424 
asETok’CÏss
 
t
 = 
’gše
->
	`P¬£Tok’
(&
modif›dSüt
[
pos
], modif›dSüt.
	`size
(è-…os, &
Ën
);

425 ifĞ
t
 =ğ
asTC_IDENTIFIER
 )

427 
¡ršg
 
tok’
;

428 
tok’
.
	`assign
(&
modif›dSüt
[
pos
], 
Ën
);

429 ifĞ
tok’
 == "include" )

431 
pos
 +ğ
Ën
;

432 
t
 = 
’gše
->
	`P¬£Tok’
(&
modif›dSüt
[
pos
], modif›dSüt.
	`size
(è-…os, &
Ën
);

433 ifĞ
t
 =ğ
asTC_WHITESPACE
 )

435 
pos
 +ğ
Ën
;

436 
t
 = 
’gše
->
	`P¬£Tok’
(&
modif›dSüt
[
pos
], modif›dSüt.
	`size
(è-…os, &
Ën
);

439 ifĞ
t
 =ğ
asTC_VALUE
 && 
Ën
 > 2 && (
modif›dSüt
[
pos
] == '"' || modifiedScript[pos] == '\'') )

442 
¡ršg
 
šşudefe
;

443 
šşudefe
.
	`assign
(&
modif›dSüt
[
pos
+1], 
Ën
-2);

444 
pos
 +ğ
Ën
;

447 
šşudes
.
	`push_back
(
šşudefe
);

450 
	`Ov”wr™eCode
(
¡¬t
, 
pos
-start);

458 
pos
 = 
	`SkS‹m’t
(pos);

463 
’gše
->
	`S‘EngšePrİ”ty
(
asEP_COPY_SCRIPT_SECTIONS
, 
Œue
);

464 
moduË
->
	`AddSütSeùiÚ
(
£ùiÚÇme
, 
modif›dSüt
.
	`c_¡r
(), modif›dSüt.
	`size
(), 
lšeOff£t
);

466 ifĞ
šşudes
.
	`size
() > 0 )

469 ifĞ
šşudeC®lback
 )

471  
n
 = 0;‚ < ()
šşudes
.
	`size
();‚++ )

473 
r
 = 
	`šşudeC®lback
(
šşudes
[
n
].
	`c_¡r
(), 
£ùiÚÇme
, 
this
, 
ÿÎbackP¬am
);

474 ifĞ
r
 < 0 )

475  
r
;

483 
¡ršg
 
·th
 = 
£ùiÚÇme
;

484 
size_t
 
posOfSÏsh
 = 
·th
.
	`fšd_Ï¡_of
("/\\");

485 ifĞ
posOfSÏsh
 !ğ
¡ršg
::
Åos
 )

486 
·th
.
	`»size
(
posOfSÏsh
+1);

488 
·th
 = "";

491  
n
 = 0;‚ < ()
šşudes
.
	`size
();‚++ )

494 ifĞ
šşudes
[
n
].
	`fšd_fœ¡_of
("/\\") != 0 &&

495 
šşudes
[
n
].
	`fšd_fœ¡_of
(":"è=ğ
¡ršg
::
Åos
 )

497 
šşudes
[
n
] = 
·th
 + includes[n];

501 
r
 = 
	`AddSeùiÚFromFe
(
šşudes
[
n
].
	`c_¡r
());

502 ifĞ
r
 < 0 )

503  
r
;

509 
	}
}

511 
	gCSütBud”
::
	$Bud
()

513 
r
 = 
moduË
->
	`Bud
();

514 ifĞ
r
 < 0 )

515  
r
;

517 #ià
AS_PROCESS_METADATA
 == 1

520  
n
 = 0;‚ < ()
foundDeş¬©iÚs
.
	`size
();‚++ )

522 
SM‘ad©aDeş
 *
deş
 = &
foundDeş¬©iÚs
[
n
];

523 
moduË
->
	`S‘DeçuÉName¥aû
(
deş
->
ÇmeS·û
.
	`c_¡r
());

524 ifĞ
deş
->
ty³
 == 1 )

527 
ty³Id
 = 
moduË
->
	`G‘Ty³IdByDeş
(
deş
->
deş¬©iÚ
.
	`c_¡r
());

528 
	`as£¹
Ğ
ty³Id
 >= 0 );

529 ifĞ
ty³Id
 >= 0 )

530 
ty³M‘ad©aM­
.
	`š£¹
(
m­
<, 
¡ršg
>::
	`v®ue_ty³
(
ty³Id
, 
deş
->
m‘ad©a
));

532 ifĞ
deş
->
ty³
 == 2 )

534 ifĞ
deş
->
·»ÁCÏss
 == "" )

537 
asISütFunùiÚ
 *
func
 = 
moduË
->
	`G‘FunùiÚByDeş
(
deş
->
deş¬©iÚ
.
	`c_¡r
());

538 
	`as£¹
Ğ
func
 );

539 ifĞ
func
 )

540 
funcM‘ad©aM­
.
	`š£¹
(
m­
<, 
¡ršg
>::
	`v®ue_ty³
(
func
->
	`G‘Id
(), 
deş
->
m‘ad©a
));

545 
ty³Id
 = 
moduË
->
	`G‘Ty³IdByDeş
(
deş
->
·»ÁCÏss
.
	`c_¡r
());

546 
	`as£¹
Ğ
ty³Id
 > 0 );

547 
m­
<, 
SCÏssM‘ad©a
>::
™”©Ü
 
™
 = 
şassM‘ad©aM­
.
	`fšd
(
ty³Id
);

548 ifĞ
™
 =ğ
şassM‘ad©aM­
.
	`’d
() )

550 
şassM‘ad©aM­
.
	`š£¹
(
m­
<, 
SCÏssM‘ad©a
>::
	`v®ue_ty³
(
ty³Id
, 
	`SCÏssM‘ad©a
(
deş
->
·»ÁCÏss
)));

551 
™
 = 
şassM‘ad©aM­
.
	`fšd
(
ty³Id
);

554 
asIObjeùTy³
 *
ty³
 = 
’gše
->
	`G‘ObjeùTy³ById
(
ty³Id
);

555 
asISütFunùiÚ
 *
func
 = 
ty³
->
	`G‘M‘hodByDeş
(
deş
->
deş¬©iÚ
.
	`c_¡r
());

556 
	`as£¹
Ğ
func
 );

557 ifĞ
func
 )

558 
™
->
£cÚd
.
funcM‘ad©aM­
.
	`š£¹
(
m­
<, 
¡ršg
>::
	`v®ue_ty³
(
func
->
	`G‘Id
(), 
deş
->
m‘ad©a
));

561 ifĞ
deş
->
ty³
 == 4 )

563 ifĞ
deş
->
·»ÁCÏss
 == "" )

566 
asISütFunùiÚ
 *
func
 = 
moduË
->
	`G‘FunùiÚByName
(("g‘_" + 
deş
->
deş¬©iÚ
).
	`c_¡r
());

567 ifĞ
func
 )

568 
funcM‘ad©aM­
.
	`š£¹
(
m­
<, 
¡ršg
>::
	`v®ue_ty³
(
func
->
	`G‘Id
(), 
deş
->
m‘ad©a
));

569 
func
 = 
moduË
->
	`G‘FunùiÚByName
(("£t_" + 
deş
->
deş¬©iÚ
).
	`c_¡r
());

570 ifĞ
func
 )

571 
funcM‘ad©aM­
.
	`š£¹
(
m­
<, 
¡ršg
>::
	`v®ue_ty³
(
func
->
	`G‘Id
(), 
deş
->
m‘ad©a
));

576 
ty³Id
 = 
moduË
->
	`G‘Ty³IdByDeş
(
deş
->
·»ÁCÏss
.
	`c_¡r
());

577 
	`as£¹
Ğ
ty³Id
 > 0 );

578 
m­
<, 
SCÏssM‘ad©a
>::
™”©Ü
 
™
 = 
şassM‘ad©aM­
.
	`fšd
(
ty³Id
);

579 ifĞ
™
 =ğ
şassM‘ad©aM­
.
	`’d
() )

581 
şassM‘ad©aM­
.
	`š£¹
(
m­
<, 
SCÏssM‘ad©a
>::
	`v®ue_ty³
(
ty³Id
, 
	`SCÏssM‘ad©a
(
deş
->
·»ÁCÏss
)));

582 
™
 = 
şassM‘ad©aM­
.
	`fšd
(
ty³Id
);

585 
asIObjeùTy³
 *
ty³
 = 
’gše
->
	`G‘ObjeùTy³ById
(
ty³Id
);

586 
asISütFunùiÚ
 *
func
 = 
ty³
->
	`G‘M‘hodByName
(("g‘_" + 
deş
->
deş¬©iÚ
).
	`c_¡r
());

587 ifĞ
func
 )

588 
™
->
£cÚd
.
funcM‘ad©aM­
.
	`š£¹
(
m­
<, 
¡ršg
>::
	`v®ue_ty³
(
func
->
	`G‘Id
(), 
deş
->
m‘ad©a
));

589 
func
 = 
ty³
->
	`G‘M‘hodByName
(("£t_" + 
deş
->
deş¬©iÚ
).
	`c_¡r
());

590 ifĞ
func
 )

591 
™
->
£cÚd
.
funcM‘ad©aM­
.
	`š£¹
(
m­
<, 
¡ršg
>::
	`v®ue_ty³
(
func
->
	`G‘Id
(), 
deş
->
m‘ad©a
));

595 ifĞ
deş
->
ty³
 == 3 )

597 ifĞ
deş
->
·»ÁCÏss
 == "" )

600 
v¬Idx
 = 
moduË
->
	`G‘Glob®V¬IndexByName
(
deş
->
deş¬©iÚ
.
	`c_¡r
());

601 
	`as£¹
Ğ
v¬Idx
 >= 0 );

602 ifĞ
v¬Idx
 >= 0 )

603 
v¬M‘ad©aM­
.
	`š£¹
(
m­
<, 
¡ršg
>::
	`v®ue_ty³
(
v¬Idx
, 
deş
->
m‘ad©a
));

607 
ty³Id
 = 
moduË
->
	`G‘Ty³IdByDeş
(
deş
->
·»ÁCÏss
.
	`c_¡r
());

608 
	`as£¹
Ğ
ty³Id
 > 0 );

611 
m­
<, 
SCÏssM‘ad©a
>::
™”©Ü
 
™
 = 
şassM‘ad©aM­
.
	`fšd
(
ty³Id
);

612 ifĞ
™
 =ğ
şassM‘ad©aM­
.
	`’d
() )

614 
şassM‘ad©aM­
.
	`š£¹
(
m­
<, 
SCÏssM‘ad©a
>::
	`v®ue_ty³
(
ty³Id
, 
	`SCÏssM‘ad©a
(
deş
->
·»ÁCÏss
)));

615 
™
 = 
şassM‘ad©aM­
.
	`fšd
(
ty³Id
);

619 
asIObjeùTy³
 *
objeùTy³
 = 
’gše
->
	`G‘ObjeùTy³ById
(
ty³Id
);

620 
idx
 = -1;

623  
asUINT
 
i
 = 0; i < (asUINT)
objeùTy³
->
	`G‘Prİ”tyCouÁ
(); ++i )

625 cÚ¡ *
Çme
;

626 
objeùTy³
->
	`G‘Prİ”ty
(
i
, &
Çme
);

627 ifĞ
deş
->
deş¬©iÚ
 =ğ
Çme
 )

629 
idx
 = 
i
;

635 
	`as£¹
Ğ
idx
 >= 0 );

636 ifĞ
idx
 >ğ0 ) 
™
->
£cÚd
.
v¬M‘ad©aM­
.
	`š£¹
(
m­
<, 
¡ršg
>::
	`v®ue_ty³
(idx, 
deş
->
m‘ad©a
));

640 
moduË
->
	`S‘DeçuÉName¥aû
("");

644 
	}
}

646 
	gCSütBud”
::
	$SkS‹m’t
(
pos
)

648 
asUINT
 
Ën
 = 0;

651  
pos
 < ()
modif›dSüt
.
	`Ëngth
() && modifiedScript[pos] != ';' && modifiedScript[pos] != '{' )

653 
’gše
->
	`P¬£Tok’
(&
modif›dSüt
[
pos
], modif›dSüt.
	`size
(è-…os, &
Ën
);

654 
pos
 +ğ
Ën
;

658 ifĞ
pos
 < ()
modif›dSüt
.
	`Ëngth
() && modifiedScript[pos] == '{' )

660 
pos
 += 1;

663 
Ëv–
 = 1;

664  
Ëv–
 > 0 && 
pos
 < ()
modif›dSüt
.
	`size
() )

666 
asETok’CÏss
 
t
 = 
’gše
->
	`P¬£Tok’
(&
modif›dSüt
[
pos
], modif›dSüt.
	`size
(è-…os, &
Ën
);

667 ifĞ
t
 =ğ
asTC_KEYWORD
 )

669 ifĞ
modif›dSüt
[
pos
] == '{' )

670 
Ëv–
++;

671 ifĞ
modif›dSüt
[
pos
] == '}' )

672 
Ëv–
--;

675 
pos
 +ğ
Ën
;

679 
pos
 += 1;

681  
pos
;

682 
	}
}

685 
	gCSütBud”
::
	$ExşudeCode
(
pos
)

687 
asUINT
 
Ën
 = 0;

688 
Ã¡ed
 = 0;

689  
pos
 < ()
modif›dSüt
.
	`size
() )

691 
’gše
->
	`P¬£Tok’
(&
modif›dSüt
[
pos
], modif›dSüt.
	`size
(è-…os, &
Ën
);

692 ifĞ
modif›dSüt
[
pos
] == '#' )

694 
modif›dSüt
[
pos
] = ' ';

695 
pos
++;

698 
’gše
->
	`P¬£Tok’
(&
modif›dSüt
[
pos
], modif›dSüt.
	`size
(è-…os, &
Ën
);

699 
¡ršg
 
tok’
;

700 
tok’
.
	`assign
(&
modif›dSüt
[
pos
], 
Ën
);

701 
	`Ov”wr™eCode
(
pos
, 
Ën
);

703 ifĞ
tok’
 == "if" )

705 
Ã¡ed
++;

707 ifĞ
tok’
 == "endif" )

709 ifĞ
Ã¡ed
-- == 0 )

711 
pos
 +ğ
Ën
;

716 ifĞ
modif›dSüt
[
pos
] != '\n' )

718 
	`Ov”wr™eCode
(
pos
, 
Ën
);

720 
pos
 +ğ
Ën
;

723  
pos
;

724 
	}
}

727 
	gCSütBud”
::
	$Ov”wr™eCode
(
¡¬t
, 
Ën
)

729 *
code
 = &
modif›dSüt
[
¡¬t
];

730  
n
 = 0;‚ < 
Ën
;‚++ )

732 ifĞ*
code
 != '\n' )

733 *
code
 = ' ';

734 
code
++;

736 
	}
}

738 #ià
AS_PROCESS_METADATA
 == 1

739 
	gCSütBud”
::
	$ExŒaùM‘ad©aSŒšg
(
pos
, 
¡ršg
 &
m‘ad©a
)

741 
m‘ad©a
 = "";

744 
modif›dSüt
[
pos
] = ' ';

747 
pos
 += 1;

749 
Ëv–
 = 1;

750 
asUINT
 
Ën
 = 0;

751  
Ëv–
 > 0 && 
pos
 < ()
modif›dSüt
.
	`size
() )

753 
asETok’CÏss
 
t
 = 
’gše
->
	`P¬£Tok’
(&
modif›dSüt
[
pos
], modif›dSüt.
	`size
(è-…os, &
Ën
);

754 ifĞ
t
 =ğ
asTC_KEYWORD
 )

756 ifĞ
modif›dSüt
[
pos
] == '[' )

757 
Ëv–
++;

758 ifĞ
modif›dSüt
[
pos
] == ']' )

759 
Ëv–
--;

763 ifĞ
Ëv–
 > 0 )

764 
m‘ad©a
.
	`­³nd
(&
modif›dSüt
[
pos
], 
Ën
);

767 ifĞ
t
 !ğ
asTC_WHITESPACE
 )

768 
	`Ov”wr™eCode
(
pos
, 
Ën
);

770 
pos
 +ğ
Ën
;

773  
pos
;

774 
	}
}

776 
	gCSütBud”
::
	$ExŒaùDeş¬©iÚ
(
pos
, 
¡ršg
 &
deş¬©iÚ
, &
ty³
)

778 
deş¬©iÚ
 = "";

779 
ty³
 = 0;

781 
¡¬t
 = 
pos
;

783 
¡d
::
¡ršg
 
tok’
;

784 
asUINT
 
Ën
 = 0;

785 
asETok’CÏss
 
t
 = 
asTC_WHITESPACE
;

790 
pos
 +ğ
Ën
;

791 
t
 = 
’gše
->
	`P¬£Tok’
(&
modif›dSüt
[
pos
], modif›dSüt.
	`size
(è-…os, &
Ën
);

792 }  
t
 =ğ
asTC_WHITESPACE
 || =ğ
asTC_COMMENT
 );

795 ifĞ
t
 =ğ
asTC_KEYWORD
 || =ğ
asTC_IDENTIFIER
 )

797 
tok’
.
	`assign
(&
modif›dSüt
[
pos
], 
Ën
);

798 ifĞ
tok’
 == "interface" ||oken == "class" )

803 
pos
 +ğ
Ën
;

804 
t
 = 
’gše
->
	`P¬£Tok’
(&
modif›dSüt
[
pos
], modif›dSüt.
	`size
(è-…os, &
Ën
);

805 }  
t
 =ğ
asTC_WHITESPACE
 || =ğ
asTC_COMMENT
 );

807 ifĞ
t
 =ğ
asTC_IDENTIFIER
 )

809 
ty³
 = 1;

810 
deş¬©iÚ
.
	`assign
(&
modif›dSüt
[
pos
], 
Ën
);

811 
pos
 +ğ
Ën
;

812  
pos
;

822 
boŞ
 
hasP¬’thesis
 = 
çl£
;

823 
deş¬©iÚ
.
	`­³nd
(&
modif›dSüt
[
pos
], 
Ën
);

824 
pos
 +ğ
Ën
;

825 
¡ršg
 
Çme
;

826 ; 
pos
 < ()
modif›dSüt
.
	`size
();)

828 
t
 = 
’gše
->
	`P¬£Tok’
(&
modif›dSüt
[
pos
], modif›dSüt.
	`size
(è-…os, &
Ën
);

829 ifĞ
t
 =ğ
asTC_KEYWORD
 )

831 
tok’
.
	`assign
(&
modif›dSüt
[
pos
], 
Ën
);

832 ifĞ
tok’
 == "{" )

834 ifĞ
hasP¬’thesis
 )

837 
ty³
 = 2;

842 
deş¬©iÚ
 = 
Çme
;

843 
ty³
 = 4;

845  
pos
;

847 ifĞ
tok’
 == "=" ||oken == ";" )

850 
deş¬©iÚ
 = 
Çme
;

851 
ty³
 = 3;

852  
pos
;

854 ifĞ
tok’
 == "(" )

859 
hasP¬’thesis
 = 
Œue
;

862 ifĞ
t
 =ğ
asTC_IDENTIFIER
 )

864 
Çme
.
	`assign
(&
modif›dSüt
[
pos
], 
Ën
);

867 
deş¬©iÚ
.
	`­³nd
(&
modif›dSüt
[
pos
], 
Ën
);

868 
pos
 +ğ
Ën
;

873  
¡¬t
;

874 
	}
}

876 cÚ¡ *
	gCSütBud”
::
	$G‘M‘ad©aSŒšgFÜTy³
(
ty³Id
)

878 
m­
<,
¡ršg
>::
™”©Ü
 
™
 = 
ty³M‘ad©aM­
.
	`fšd
(
ty³Id
);

879 ifĞ
™
 !ğ
ty³M‘ad©aM­
.
	`’d
() )

880  
™
->
£cÚd
.
	`c_¡r
();

883 
	}
}

885 cÚ¡ *
	gCSütBud”
::
	$G‘M‘ad©aSŒšgFÜFunc
(
asISütFunùiÚ
 *
func
)

887 ifĞ
func
 )

889 
m­
<,
¡ršg
>::
™”©Ü
 
™
 = 
funcM‘ad©aM­
.
	`fšd
(
func
->
	`G‘Id
());

890 ifĞ
™
 !ğ
funcM‘ad©aM­
.
	`’d
() )

891  
™
->
£cÚd
.
	`c_¡r
();

895 
	}
}

897 cÚ¡ *
	gCSütBud”
::
	$G‘M‘ad©aSŒšgFÜV¬
(
v¬Idx
)

899 
m­
<,
¡ršg
>::
™”©Ü
 
™
 = 
v¬M‘ad©aM­
.
	`fšd
(
v¬Idx
);

900 ifĞ
™
 !ğ
v¬M‘ad©aM­
.
	`’d
() )

901  
™
->
£cÚd
.
	`c_¡r
();

904 
	}
}

906 cÚ¡ *
	gCSütBud”
::
	$G‘M‘ad©aSŒšgFÜTy³Prİ”ty
(
ty³Id
, 
v¬Idx
)

908 
m­
<, 
SCÏssM‘ad©a
>::
™”©Ü
 
ty³It
 = 
şassM‘ad©aM­
.
	`fšd
(
ty³Id
);

909 if(
ty³It
 =ğ
şassM‘ad©aM­
.
	`’d
())  "";

911 
m­
<, 
¡ršg
>::
™”©Ü
 
´İIt
 = 
ty³It
->
£cÚd
.
v¬M‘ad©aM­
.
	`fšd
(
v¬Idx
);

912 if(
´İIt
 =ğ
ty³It
->
£cÚd
.
v¬M‘ad©aM­
.
	`’d
())  "";

914  
´İIt
->
£cÚd
.
	`c_¡r
();

915 
	}
}

917 cÚ¡ *
	gCSütBud”
::
	$G‘M‘ad©aSŒšgFÜTy³M‘hod
(
ty³Id
, 
asISütFunùiÚ
 *
m‘hod
)

919 ifĞ
m‘hod
 )

921 
m­
<, 
SCÏssM‘ad©a
>::
™”©Ü
 
ty³It
 = 
şassM‘ad©aM­
.
	`fšd
(
ty³Id
);

922 if(
ty³It
 =ğ
şassM‘ad©aM­
.
	`’d
())  "";

924 
m­
<, 
¡ršg
>::
™”©Ü
 
m‘hodIt
 = 
ty³It
->
£cÚd
.
funcM‘ad©aM­
.
	`fšd
(
m‘hod
->
	`G‘Id
());

925 if(
m‘hodIt
 =ğ
ty³It
->
£cÚd
.
funcM‘ad©aM­
.
	`’d
())  "";

927  
m‘hodIt
->
£cÚd
.
	`c_¡r
();

931 
	}
}

934 
¡ršg
 
	$G‘AbsŞu‹P©h
(cÚ¡ 
¡ršg
 &
fe
)

936 
¡ršg
 
¡r
 = 
fe
;

939 ifĞ!((
¡r
.
	`Ëngth
() > 0 && (str[0] == '/' || str[0] == '\\')) ||

940 
¡r
.
	`fšd
(":"è!ğ
¡ršg
::
Åos
) )

942 
¡r
 = 
	`G‘Cu¼’tDœ
() + "/" + str;

946 
size_t
 
pos
 = 0;

947  (
pos
 = 
¡r
.
	`fšd
("\\",…os)è!ğ
¡ršg
::
Åos
 )

948 
¡r
[
pos
] = '/';

951 
pos
 = 0;

952  (
pos
 = 
¡r
.
	`fšd
("/./",…os)è!ğ
¡ršg
::
Åos
 )

953 
¡r
.
	`”a£
(
pos
, 3);

956 
pos
 = 0;

957  (
pos
 = 
¡r
.
	`fšd
("/../")è!ğ
¡ršg
::
Åos
 )

959 
size_t
 
pos2
 = 
¡r
.
	`rfšd
("/", 
pos
-1);

960 ifĞ
pos2
 !ğ
¡ršg
::
Åos
 )

961 
¡r
.
	`”a£
(
pos2
, 
pos
+3-pos2);

969  
¡r
;

970 
	}
}

972 
¡ršg
 
	$G‘Cu¼’tDœ
()

974 
bufãr
[1024];

975 #ià
	`defšed
(
_MSC_VER
è|| defšed(
_WIN32
)

976 #ifdeà
_WIN32_WCE


977 
TCHAR
 
­µ©h
[
MAX_PATH
] = 
	`TEXT
("");

978 ià(!
­µ©h
[0])

980 
	`G‘ModuËFeName
(
NULL
, 
­µ©h
, 
MAX_PATH
);

982 
­pL’
 = 
	`_tc¦’
(
­µ©h
);

989 
­pL’
 > 1)

991 ià(
­µ©h
[
­pL’
-1] =ğ
	`TEXT
('\\'))

993 
­pL’
--;

997 
­µ©h
[
­pL’
] = 
	`TEXT
('\0');

999 #ifdeà
_UNICODE


1000 
	`wc¡ombs
(
bufãr
, 
­µ©h
, 
	`mš
(1024, 
	`wc¦’
×µ·th)*(
wch¬_t
)));

1002 
	`memıy
(
bufãr
, 
­µ©h
, 
	`mš
(1024, 
	`¡¾’
(apppath)));

1005  
bufãr
;

1006 #–ià
	`defšed
(
__S3E__
)

1008  
	`g‘cwd
(
bufãr
, ()1024);

1009 #–ià
_XBOX_VER
 >= 200

1012 #–ià
	`defšed
(
_M_ARM
)

1016  
	`_g‘cwd
(
bufãr
, ()1024);

1018 #–ià
	`defšed
(
__APPLE__
è|| defšed(
__lšux__
)

1019  
	`g‘cwd
(
bufãr
, 1024);

1023 
	}
}

1025 
	gEND_AS_NAMESPACE


	@../src/script/scriptstdstring.cpp

1 
	~"süt¡d¡ršg.h
"

2 
	~<as£¹.h
>

3 
	~<s¡»am
>

4 
	~<¡ršg.h
>

5 
	~<¡dio.h
>

6 
	~<¡dlib.h
>

7 
	~<loÿË.h
>

8 
	~<m­
>

10 
usšg
 
Çme¥aû
 
	g¡d
;

12 
	gBEGIN_AS_NAMESPACE


14 #ià
AS_USE_STRINGPOOL
 == 1

24 cÚ¡ 
asPWORD
 
	gSTRING_POOL
 = 1001;

26 cÚ¡ 
	g¡ršg
 &
	$SŒšgFaùÜy
(
asUINT
 
Ëngth
, cÚ¡ *
s
)

28 
¡ršg
 
dummy
;

31 
asISütCÚ‹xt
 *
ùx
 = 
	`asG‘AùiveCÚ‹xt
();

32 ifĞ
ùx
 == 0 )

35 
	`as£¹
Ğ
ùx
 );

36  
dummy
;

38 
asISütEngše
 *
’gše
 = 
ùx
->
	`G‘Engše
();

41 
m­
<cÚ¡ *, 
¡ršg
> *
poŞ
 = 
»š‹½»t_ÿ¡
< m­<cÚ¡ *, sŒšg>* >(
’gše
->
	`G‘U£rD©a
(
STRING_POOL
));

43 ifĞ!
poŞ
 )

46 
	`asAcquœeExşusiveLock
();

49 
poŞ
 = 
»š‹½»t_ÿ¡
< 
m­
<cÚ¡ *, 
¡ršg
>* >(
’gše
->
	`G‘U£rD©a
(
STRING_POOL
));

50 ifĞ!
poŞ
 )

52 #ià
	`defšed
(
AS_MARMALADE
)

53 
poŞ
 = 
Ãw
 
m­
<cÚ¡ *, 
¡ršg
>;

55 
poŞ
 = 
	`Ãw
 (
nÙhrow
è
m­
<cÚ¡ *, 
¡ršg
>;

57 ifĞ
poŞ
 == 0 )

59 
ùx
->
	`S‘Exû±iÚ
("Out of memory");

60 
	`asR–—£ExşusiveLock
();

61  
dummy
;

63 
’gše
->
	`S‘U£rD©a
(
poŞ
, 
STRING_POOL
);

66 
	`asR–—£ExşusiveLock
();

70 
	`asAcquœeSh¬edLock
();

73 
m­
<cÚ¡ *, 
¡ršg
>::
™”©Ü
 
™
;

74 
™
 = 
poŞ
->
	`fšd
(
s
);

75 ifĞ
™
 !ğ
poŞ
->
	`’d
() )

77 
	`asR–—£Sh¬edLock
();

78  
™
->
£cÚd
;

81 
	`asR–—£Sh¬edLock
();

84 
	`asAcquœeExşusiveLock
();

87 
™
 = 
poŞ
->
	`fšd
(
s
);

88 ifĞ
™
 =ğ
poŞ
->
	`’d
() )

91 
poŞ
->
	`š£¹
(
m­
<cÚ¡ *, 
¡ršg
>::
	`v®ue_ty³
(
s
, 
	`¡ršg
(s, 
Ëngth
)));

92 
™
 = 
poŞ
->
	`fšd
(
s
);

95 
	`asR–—£ExşusiveLock
();

96  
™
->
£cÚd
;

97 
	}
}

99 
	$CËªupEngšeSŒšgPoŞ
(
asISütEngše
 *
’gše
)

101 
m­
<cÚ¡ *, 
¡ršg
> *
poŞ
 = 
»š‹½»t_ÿ¡
< m­<cÚ¡ *, sŒšg>* >(
’gše
->
	`G‘U£rD©a
(
STRING_POOL
));

102 ifĞ
poŞ
 )

103 
d–‘e
 
poŞ
;

104 
	}
}

107 
¡ršg
 
	$SŒšgFaùÜy
(
asUINT
 
Ëngth
, cÚ¡ *
s
)

109  
	`¡ršg
(
s
, 
Ëngth
);

110 
	}
}

113 
	$CÚ¡ruùSŒšg
(
¡ršg
 *
thisPoš‹r
)

115 
	`Ãw
(
thisPoš‹r
è
	`¡ršg
();

116 
	}
}

118 
	$CİyCÚ¡ruùSŒšg
(cÚ¡ 
¡ršg
 &
Ùh”
, sŒšg *
thisPoš‹r
)

120 
	`Ãw
(
thisPoš‹r
è
	`¡ršg
(
Ùh”
);

121 
	}
}

123 
	$De¡ruùSŒšg
(
¡ršg
 *
thisPoš‹r
)

125 
thisPoš‹r
->~
	`¡ršg
();

126 
	}
}

128 
	g¡ršg
 &
	$AddAssignSŒšgToSŒšg
(cÚ¡ 
¡ršg
 &
¡r
, sŒšg &
de¡
)

134 
de¡
 +ğ
¡r
;

135  
de¡
;

136 
	}
}

140 
boŞ
 
	$SŒšgIsEm±y
(cÚ¡ 
¡ršg
 &
¡r
)

146  
¡r
.
	`em±y
();

147 
	}
}

149 
	g¡ršg
 &
	$AssignUIÁToSŒšg
(
i
, 
¡ršg
 &
de¡
)

151 
o¡ršg¡»am
 
¡»am
;

152 
¡»am
 << 
i
;

153 
de¡
 = 
¡»am
.
	`¡r
();

154  
de¡
;

155 
	}
}

157 
	g¡ršg
 &
	$AddAssignUIÁToSŒšg
(
i
, 
¡ršg
 &
de¡
)

159 
o¡ršg¡»am
 
¡»am
;

160 
¡»am
 << 
i
;

161 
de¡
 +ğ
¡»am
.
	`¡r
();

162  
de¡
;

163 
	}
}

165 
¡ršg
 
	$AddSŒšgUIÁ
(cÚ¡ 
¡ršg
 &
¡r
, 
i
)

167 
o¡ršg¡»am
 
¡»am
;

168 
¡»am
 << 
i
;

169  
¡r
 + 
¡»am
.
	`¡r
();

170 
	}
}

172 
¡ršg
 
	$AddIÁSŒšg
(
i
, cÚ¡ 
¡ršg
 &
¡r
)

174 
o¡ršg¡»am
 
¡»am
;

175 
¡»am
 << 
i
;

176  
¡»am
.
	`¡r
(è+ 
¡r
;

177 
	}
}

179 
	g¡ršg
 &
	$AssignIÁToSŒšg
(
i
, 
¡ršg
 &
de¡
)

181 
o¡ršg¡»am
 
¡»am
;

182 
¡»am
 << 
i
;

183 
de¡
 = 
¡»am
.
	`¡r
();

184  
de¡
;

185 
	}
}

187 
	g¡ršg
 &
	$AddAssignIÁToSŒšg
(
i
, 
¡ršg
 &
de¡
)

189 
o¡ršg¡»am
 
¡»am
;

190 
¡»am
 << 
i
;

191 
de¡
 +ğ
¡»am
.
	`¡r
();

192  
de¡
;

193 
	}
}

195 
¡ršg
 
	$AddSŒšgIÁ
(cÚ¡ 
¡ršg
 &
¡r
, 
i
)

197 
o¡ršg¡»am
 
¡»am
;

198 
¡»am
 << 
i
;

199  
¡r
 + 
¡»am
.
	`¡r
();

200 
	}
}

202 
¡ršg
 
	$AddUIÁSŒšg
(
i
, cÚ¡ 
¡ršg
 &
¡r
)

204 
o¡ršg¡»am
 
¡»am
;

205 
¡»am
 << 
i
;

206  
¡»am
.
	`¡r
(è+ 
¡r
;

207 
	}
}

209 
	g¡ršg
 &
	$AssignDoubËToSŒšg
(
f
, 
¡ršg
 &
de¡
)

211 
o¡ršg¡»am
 
¡»am
;

212 
¡»am
 << 
f
;

213 
de¡
 = 
¡»am
.
	`¡r
();

214  
de¡
;

215 
	}
}

217 
	g¡ršg
 &
	$AddAssignDoubËToSŒšg
(
f
, 
¡ršg
 &
de¡
)

219 
o¡ršg¡»am
 
¡»am
;

220 
¡»am
 << 
f
;

221 
de¡
 +ğ
¡»am
.
	`¡r
();

222  
de¡
;

223 
	}
}

225 
	g¡ršg
 &
	$AssignBoŞToSŒšg
(
boŞ
 
b
, 
¡ršg
 &
de¡
)

227 
o¡ršg¡»am
 
¡»am
;

228 
¡»am
 << (
b
 ? "true" : "false");

229 
de¡
 = 
¡»am
.
	`¡r
();

230  
de¡
;

231 
	}
}

233 
	g¡ršg
 &
	$AddAssignBoŞToSŒšg
(
boŞ
 
b
, 
¡ršg
 &
de¡
)

235 
o¡ršg¡»am
 
¡»am
;

236 
¡»am
 << (
b
 ? "true" : "false");

237 
de¡
 +ğ
¡»am
.
	`¡r
();

238  
de¡
;

239 
	}
}

241 
¡ršg
 
	$AddSŒšgDoubË
(cÚ¡ 
¡ršg
 &
¡r
, 
f
)

243 
o¡ršg¡»am
 
¡»am
;

244 
¡»am
 << 
f
;

245  
¡r
 + 
¡»am
.
	`¡r
();

246 
	}
}

248 
¡ršg
 
	$AddDoubËSŒšg
(
f
, cÚ¡ 
¡ršg
 &
¡r
)

250 
o¡ršg¡»am
 
¡»am
;

251 
¡»am
 << 
f
;

252  
¡»am
.
	`¡r
(è+ 
¡r
;

253 
	}
}

255 
¡ršg
 
	$AddSŒšgBoŞ
(cÚ¡ 
¡ršg
 &
¡r
, 
boŞ
 
b
)

257 
o¡ršg¡»am
 
¡»am
;

258 
¡»am
 << (
b
 ? "true" : "false");

259  
¡r
 + 
¡»am
.
	`¡r
();

260 
	}
}

262 
¡ršg
 
	$AddBoŞSŒšg
(
boŞ
 
b
, cÚ¡ 
¡ršg
 &
¡r
)

264 
o¡ršg¡»am
 
¡»am
;

265 
¡»am
 << (
b
 ? "true" : "false");

266  
¡»am
.
	`¡r
(è+ 
¡r
;

267 
	}
}

269 *
	$SŒšgCh¬At
(
i
, 
¡ršg
 &
¡r
)

271 ifĞ
i
 >ğ
¡r
.
	`size
() )

274 
asISütCÚ‹xt
 *
ùx
 = 
	`asG‘AùiveCÚ‹xt
();

275 
ùx
->
	`S‘Exû±iÚ
("Out of„ange");

281  &
¡r
[
i
];

282 
	}
}

286 
	$SŒšgCmp
(cÚ¡ 
¡ršg
 &
a
, cÚ¡ sŒšg &
b
)

288 
cmp
 = 0;

289 ifĞ
a
 < 
b
 ) 
cmp
 = -1;

290 ifĞ
a
 > 
b
 ) 
cmp
 = 1;

291  
cmp
;

292 
	}
}

300 
	$SŒšgFšdFœ¡
(cÚ¡ 
¡ršg
 &
sub
, 
asUINT
 
¡¬t
, cÚ¡ sŒšg &
¡r
)

303  ()
¡r
.
	`fšd
(
sub
, 
¡¬t
);

304 
	}
}

312 
	$SŒšgFšdLa¡
(cÚ¡ 
¡ršg
 &
sub
, 
¡¬t
, cÚ¡ sŒšg &
¡r
)

315  ()
¡r
.
	`rfšd
(
sub
, (
size_t
)
¡¬t
);

316 
	}
}

320 
asUINT
 
	$SŒšgL’gth
(cÚ¡ 
¡ršg
 &
¡r
)

323  (
asUINT
)
¡r
.
	`Ëngth
();

324 
	}
}

329 
	$SŒšgResize
(
asUINT
 
l
, 
¡ršg
 &
¡r
)

332 
¡r
.
	`»size
(
l
);

333 
	}
}

337 
¡ršg
 
	$fÜm©IÁ
(
asINT64
 
v®ue
, cÚ¡ 
¡ršg
 &
İtiÚs
, 
asUINT
 
width
)

339 
boŞ
 
ËáJu¡ify
 = 
İtiÚs
.
	`fšd
("l") != -1;

340 
boŞ
 
·dW™hZ”o
 = 
İtiÚs
.
	`fšd
("0") != -1;

341 
boŞ
 
®waysSign
 = 
İtiÚs
.
	`fšd
("+") != -1;

342 
boŞ
 
¥aûOnSign
 = 
İtiÚs
.
	`fšd
(" ") != -1;

343 
boŞ
 
hexSm®l
 = 
İtiÚs
.
	`fšd
("h") != -1;

344 
boŞ
 
hexL¬ge
 = 
İtiÚs
.
	`fšd
("H") != -1;

346 
¡ršg
 
fmt
 = "%";

347 ifĞ
ËáJu¡ify
 ) 
fmt
 += "-";

348 ifĞ
®waysSign
 ) 
fmt
 += "+";

349 ifĞ
¥aûOnSign
 ) 
fmt
 += " ";

350 ifĞ
·dW™hZ”o
 ) 
fmt
 += "0";

352 #ifdeà
__GNUC__


353 #ifdeà
_LP64


354 
fmt
 += "*l";

356 
fmt
 += "*ll";

359 
fmt
 += "*I64";

362 ifĞ
hexSm®l
 ) 
fmt
 += "x";

363 ifĞ
hexL¬ge
 ) 
fmt
 += "X";

364 
fmt
 += "d";

366 
¡ršg
 
buf
;

367 
buf
.
	`»size
(
width
+20);

368 #ià
_MSC_VER
 >ğ1400 && !
	`defšed
(
AS_MARMALADE
)

369 
	`¥rštf_s
(&
buf
[0], buf.
	`size
(), 
fmt
.
	`c_¡r
(), 
width
, 
v®ue
);

371 
	`¥rštf
(&
buf
[0], 
fmt
.
	`c_¡r
(), 
width
, 
v®ue
);

373 
buf
.
	`»size
(
	`¡¾’
(&buf[0]));

375  
buf
;

376 
	}
}

380 
¡ršg
 
	$fÜm©Flßt
(
v®ue
, cÚ¡ 
¡ršg
 &
İtiÚs
, 
asUINT
 
width
,‡sUINT 
´ecisiÚ
)

382 
boŞ
 
ËáJu¡ify
 = 
İtiÚs
.
	`fšd
("l") != -1;

383 
boŞ
 
·dW™hZ”o
 = 
İtiÚs
.
	`fšd
("0") != -1;

384 
boŞ
 
®waysSign
 = 
İtiÚs
.
	`fšd
("+") != -1;

385 
boŞ
 
¥aûOnSign
 = 
İtiÚs
.
	`fšd
(" ") != -1;

386 
boŞ
 
expSm®l
 = 
İtiÚs
.
	`fšd
("e") != -1;

387 
boŞ
 
expL¬ge
 = 
İtiÚs
.
	`fšd
("E") != -1;

389 
¡ršg
 
fmt
 = "%";

390 ifĞ
ËáJu¡ify
 ) 
fmt
 += "-";

391 ifĞ
®waysSign
 ) 
fmt
 += "+";

392 ifĞ
¥aûOnSign
 ) 
fmt
 += " ";

393 ifĞ
·dW™hZ”o
 ) 
fmt
 += "0";

395 
fmt
 += "*.*";

397 ifĞ
expSm®l
 ) 
fmt
 += "e";

398 ifĞ
expL¬ge
 ) 
fmt
 += "E";

399 
fmt
 += "f";

401 
¡ršg
 
buf
;

402 
buf
.
	`»size
(
width
+
´ecisiÚ
+50);

403 #ià
_MSC_VER
 >ğ1400 && !
	`defšed
(
AS_MARMALADE
)

404 
	`¥rštf_s
(&
buf
[0], buf.
	`size
(), 
fmt
.
	`c_¡r
(), 
width
, 
´ecisiÚ
, 
v®ue
);

406 
	`¥rštf
(&
buf
[0], 
fmt
.
	`c_¡r
(), 
width
, 
´ecisiÚ
, 
v®ue
);

408 
buf
.
	`»size
(
	`¡¾’
(&buf[0]));

410  
buf
;

411 
	}
}

415 
asINT64
 
	$·r£IÁ
(cÚ¡ 
¡ršg
 &
v®
, 
asUINT
 
ba£
,‡sUINT *
by‹CouÁ
)

418 ifĞ
ba£
 != 10 && base != 16 )

420 ifĞ
by‹CouÁ
 ) *byteCount = 0;

424 cÚ¡ *
’d
 = &
v®
[0];

427 
boŞ
 
sign
 = 
çl£
;

428 ifĞ*
’d
 == '-' )

430 
sign
 = 
Œue
;

431 *
’d
++;

433 ifĞ*
’d
 == '+' )

434 *
’d
++;

436 
asINT64
 
»s
 = 0;

437 ifĞ
ba£
 == 10 )

439  *
’d
 >= '0' && *end <= '9' )

441 
»s
 *= 10;

442 
»s
 +ğ*
’d
++ - '0';

445 ifĞ
ba£
 == 16 )

447  (*
’d
 >= '0' && *end <= '9') ||

448 (*
’d
 >= 'a' && *end <= 'f') ||

449 (*
’d
 >= 'A' && *end <= 'F') )

451 
»s
 *= 16;

452 ifĞ*
’d
 >= '0' && *end <= '9' )

453 
»s
 +ğ*
’d
++ - '0';

454 ifĞ*
’d
 >= 'a' && *end <= 'f' )

455 
»s
 +ğ*
’d
++ - 'a' + 10;

456 ifĞ*
’d
 >= 'A' && *end <= 'F' )

457 
»s
 +ğ*
’d
++ - 'A' + 10;

461 ifĞ
by‹CouÁ
 )

462 *
by‹CouÁ
 = 
	`asUINT
(
	`size_t
(
’d
 - 
v®
.
	`c_¡r
()));

464 ifĞ
sign
 )

465 
»s
 = -res;

467  
»s
;

468 
	}
}

472 
	$·r£Flßt
(cÚ¡ 
¡ršg
 &
v®
, 
asUINT
 *
by‹CouÁ
)

474 *
’d
;

479 #ià!
	`defšed
(
_WIN32_WCE
è&& !defšed(
ANDROID
)

481 *
Üig
 = 
	`£oÿË
(
LC_NUMERIC
, 0);

482 
	`£oÿË
(
LC_NUMERIC
, "C");

485 
»s
 = 
	`¡¹od
(
v®
.
	`c_¡r
(), &
’d
);

487 #ià!
	`defšed
(
_WIN32_WCE
è&& !defšed(
ANDROID
)

489 
	`£oÿË
(
LC_NUMERIC
, 
Üig
);

492 ifĞ
by‹CouÁ
 )

493 *
by‹CouÁ
 = 
	`asUINT
(
	`size_t
(
’d
 - 
v®
.
	`c_¡r
()));

495  
»s
;

496 
	}
}

503 
¡ršg
 
	$SŒšgSubSŒšg
(
asUINT
 
¡¬t
, 
couÁ
, cÚ¡ 
¡ršg
 &
¡r
)

506 
¡ršg
 
»t
;

507 ifĞ
¡¬t
 < 
¡r
.
	`Ëngth
(è&& 
couÁ
 != 0 )

508 
»t
 = 
¡r
.
	`sub¡r
(
¡¬t
, 
couÁ
);

510  
»t
;

511 
	}
}

513 
	$Regi¡”StdSŒšg_N©ive
(
asISütEngše
 *
’gše
)

515 
r
;

519 
r
 = 
’gše
->
	`Regi¡”ObjeùTy³
("¡ršg", (
¡ršg
), 
asOBJ_VALUE
 | 
asOBJ_APP_CLASS_CDAK
); 
	`as£¹
(„ >= 0 );

521 #ià
AS_USE_STRINGPOOL
 == 1

523 
r
 = 
’gše
->
	`Regi¡”SŒšgFaùÜy
("cÚ¡ sŒšg &", 
	`asFUNCTION
(
SŒšgFaùÜy
), 
asCALL_CDECL
); 
	`as£¹
(„ >= 0 );

526 
’gše
->
	`S‘EngšeU£rD©aCËªupC®lback
(
CËªupEngšeSŒšgPoŞ
, 
STRING_POOL
);

529 
r
 = 
’gše
->
	`Regi¡”SŒšgFaùÜy
("¡ršg", 
	`asFUNCTION
(
SŒšgFaùÜy
), 
asCALL_CDECL
); 
	`as£¹
(„ >= 0 );

533 
r
 = 
’gše
->
	`Regi¡”ObjeùBehaviour
("¡ršg", 
asBEHAVE_CONSTRUCT
, "void f()", 
	`asFUNCTION
(
CÚ¡ruùSŒšg
), 
asCALL_CDECL_OBJLAST
); 
	`as£¹
(„ >= 0 );

534 
r
 = 
’gše
->
	`Regi¡”ObjeùBehaviour
("¡ršg", 
asBEHAVE_CONSTRUCT
, "void f(cÚ¡ sŒšg &š)", 
	`asFUNCTION
(
CİyCÚ¡ruùSŒšg
), 
asCALL_CDECL_OBJLAST
); 
	`as£¹
(„ >= 0 );

535 
r
 = 
’gše
->
	`Regi¡”ObjeùBehaviour
("¡ršg", 
asBEHAVE_DESTRUCT
, "void f()", 
	`asFUNCTION
(
De¡ruùSŒšg
), 
asCALL_CDECL_OBJLAST
); 
	`as£¹
(„ >= 0 );

536 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg &İAssign(cÚ¡ sŒšg &š)", 
	`asMETHODPR
(
¡ršg
, 
İ”©Ü
 =, (cÚ¡ sŒšg&), sŒšg&), 
asCALL_THISCALL
); 
	`as£¹
(„ >= 0 );

538 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg &İAddAssign(cÚ¡ sŒšg &š)", 
	`asFUNCTION
(
AddAssignSŒšgToSŒšg
), 
asCALL_CDECL_OBJLAST
); 
	`as£¹
(„ >= 0 );

542 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "šˆİCmp(cÚ¡ sŒšg &šècÚ¡", 
	`asFUNCTION
(
SŒšgCmp
), 
asCALL_CDECL_OBJFIRST
); 
	`as£¹
(„ >= 0 );

543 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg opAdd(cÚ¡ sŒšg &šècÚ¡", 
	`asFUNCTIONPR
(
İ”©Ü
 +, (cÚ¡ 
¡ršg
 &, cÚ¡ sŒšg &), sŒšg), 
asCALL_CDECL_OBJFIRST
); 
	`as£¹
(„ >= 0 );

546 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "ušˆËngth(ècÚ¡", 
	`asFUNCTION
(
SŒšgL’gth
), 
asCALL_CDECL_OBJLAST
); 
	`as£¹
(„ >= 0 );

547 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "void„esize(ušt)", 
	`asFUNCTION
(
SŒšgResize
), 
asCALL_CDECL_OBJLAST
); 
	`as£¹
(„ >= 0 );

548 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "ušˆg‘_Ëngth(ècÚ¡", 
	`asFUNCTION
(
SŒšgL’gth
), 
asCALL_CDECL_OBJLAST
); 
	`as£¹
(„ >= 0 );

549 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "void s‘_Ëngth(ušt)", 
	`asFUNCTION
(
SŒšgResize
), 
asCALL_CDECL_OBJLAST
); 
	`as£¹
(„ >= 0 );

552 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "boŞ isEm±y(ècÚ¡", 
	`asFUNCTION
(
SŒšgIsEm±y
), 
asCALL_CDECL_OBJLAST
); 
	`as£¹
(„ >= 0 );

556 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "ušt8 &İIndex(ušt)", 
	`asFUNCTION
(
SŒšgCh¬At
), 
asCALL_CDECL_OBJLAST
); 
	`as£¹
(„ >= 0 );

557 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "cÚ¡ ušt8 &İIndex(uštècÚ¡", 
	`asFUNCTION
(
SŒšgCh¬At
), 
asCALL_CDECL_OBJLAST
); 
	`as£¹
(„ >= 0 );

560 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg &İAssign(doubË)", 
	`asFUNCTION
(
AssignDoubËToSŒšg
), 
asCALL_CDECL_OBJLAST
); 
	`as£¹
(„ >= 0 );

561 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg &İAddAssign(doubË)", 
	`asFUNCTION
(
AddAssignDoubËToSŒšg
), 
asCALL_CDECL_OBJLAST
); 
	`as£¹
(„ >= 0 );

562 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg opAdd(doubËècÚ¡", 
	`asFUNCTION
(
AddSŒšgDoubË
), 
asCALL_CDECL_OBJFIRST
); 
	`as£¹
(„ >= 0 );

563 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg opAdd_r(doubËècÚ¡", 
	`asFUNCTION
(
AddDoubËSŒšg
), 
asCALL_CDECL_OBJLAST
); 
	`as£¹
(„ >= 0 );

565 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg &İAssign(št)", 
	`asFUNCTION
(
AssignIÁToSŒšg
), 
asCALL_CDECL_OBJLAST
); 
	`as£¹
(„ >= 0 );

566 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg &İAddAssign(št)", 
	`asFUNCTION
(
AddAssignIÁToSŒšg
), 
asCALL_CDECL_OBJLAST
); 
	`as£¹
(„ >= 0 );

567 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg opAdd(štècÚ¡", 
	`asFUNCTION
(
AddSŒšgIÁ
), 
asCALL_CDECL_OBJFIRST
); 
	`as£¹
(„ >= 0 );

568 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg opAdd_r(štècÚ¡", 
	`asFUNCTION
(
AddIÁSŒšg
), 
asCALL_CDECL_OBJLAST
); 
	`as£¹
(„ >= 0 );

570 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg &İAssign(ušt)", 
	`asFUNCTION
(
AssignUIÁToSŒšg
), 
asCALL_CDECL_OBJLAST
); 
	`as£¹
(„ >= 0 );

571 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg &İAddAssign(ušt)", 
	`asFUNCTION
(
AddAssignUIÁToSŒšg
), 
asCALL_CDECL_OBJLAST
); 
	`as£¹
(„ >= 0 );

572 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg opAdd(uštècÚ¡", 
	`asFUNCTION
(
AddSŒšgUIÁ
), 
asCALL_CDECL_OBJFIRST
); 
	`as£¹
(„ >= 0 );

573 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg opAdd_r(uštècÚ¡", 
	`asFUNCTION
(
AddUIÁSŒšg
), 
asCALL_CDECL_OBJLAST
); 
	`as£¹
(„ >= 0 );

575 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg &İAssign(boŞ)", 
	`asFUNCTION
(
AssignBoŞToSŒšg
), 
asCALL_CDECL_OBJLAST
); 
	`as£¹
(„ >= 0 );

576 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg &İAddAssign(boŞ)", 
	`asFUNCTION
(
AddAssignBoŞToSŒšg
), 
asCALL_CDECL_OBJLAST
); 
	`as£¹
(„ >= 0 );

577 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg opAdd(boŞècÚ¡", 
	`asFUNCTION
(
AddSŒšgBoŞ
), 
asCALL_CDECL_OBJFIRST
); 
	`as£¹
(„ >= 0 );

578 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg opAdd_r(boŞècÚ¡", 
	`asFUNCTION
(
AddBoŞSŒšg
), 
asCALL_CDECL_OBJLAST
); 
	`as£¹
(„ >= 0 );

581 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg sub¡r(ušˆ¡¬ˆğ0, iÁ couÁ = -1ècÚ¡", 
	`asFUNCTION
(
SŒšgSubSŒšg
), 
asCALL_CDECL_OBJLAST
); 
	`as£¹
(„ >= 0 );

582 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "šˆfšdFœ¡(cÚ¡ sŒšg &š, ušˆ¡¬ˆğ0ècÚ¡", 
	`asFUNCTION
(
SŒšgFšdFœ¡
), 
asCALL_CDECL_OBJLAST
); 
	`as£¹
(„ >= 0 );

583 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "šˆfšdLa¡(cÚ¡ sŒšg &š, iÁ s¹ = -1ècÚ¡", 
	`asFUNCTION
(
SŒšgFšdLa¡
), 
asCALL_CDECL_OBJLAST
); 
	`as£¹
(„ >= 0 );

585 
r
 = 
’gše
->
	`Regi¡”Glob®FunùiÚ
("¡ršg fÜm©IÁ(št64 v®, cÚ¡ sŒšg &š o±iÚs, ušˆwidth = 0)", 
	`asFUNCTION
(
fÜm©IÁ
), 
asCALL_CDECL
); 
	`as£¹
(r >= 0);

586 
r
 = 
’gše
->
	`Regi¡”Glob®FunùiÚ
("¡ršg fÜm©Flßt(doubË v®, cÚ¡ sŒšg &š o±iÚs, ušˆwidth = 0, ušˆ´ecisiÚ = 0)", 
	`asFUNCTION
(
fÜm©Flßt
), 
asCALL_CDECL
); 
	`as£¹
(r >= 0);

587 
r
 = 
’gše
->
	`Regi¡”Glob®FunùiÚ
("št64…¬£IÁ(cÚ¡ sŒšg &š, ušˆba£ = 10, ušˆ&ouˆby‹CouÁ = 0)", 
	`asFUNCTION
(
·r£IÁ
), 
asCALL_CDECL
); 
	`as£¹
(r >= 0);

588 
r
 = 
’gše
->
	`Regi¡”Glob®FunùiÚ
("doubË…¬£Flßt(cÚ¡ sŒšg &š, ušˆ&ouˆby‹CouÁ = 0)", 
	`asFUNCTION
(
·r£Flßt
), 
asCALL_CDECL
); 
	`as£¹
(r >= 0);

590 #ià
AS_USE_STLNAMES
 == 1

592 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "ušˆsize(ècÚ¡", 
	`asFUNCTION
(
SŒšgL’gth
), 
asCALL_CDECL_OBJLAST
); 
	`as£¹
(„ >= 0 );

594 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "boŞƒm±y(ècÚ¡", 
	`asFUNCTION
(
SŒšgIsEm±y
), 
asCALL_CDECL_OBJLAST
); 
	`as£¹
(„ >= 0 );

596 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "šˆfšd(cÚ¡ sŒšg &š, ušˆ¡¬ˆğ0ècÚ¡", 
	`asFUNCTION
(
SŒšgFšdFœ¡
), 
asCALL_CDECL_OBJLAST
); 
	`as£¹
(„ >= 0 );

598 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "šˆrfšd(cÚ¡ sŒšg &š, iÁ s¹ = -1ècÚ¡", 
	`asFUNCTION
(
SŒšgFšdLa¡
), 
asCALL_CDECL_OBJLAST
); 
	`as£¹
(„ >= 0 );

610 
	}
}

612 #ià
AS_USE_STRINGPOOL
 == 1

613 
	$SŒšgFaùÜyG’”ic
(
asISütG’”ic
 *
g’
) {

614 
asUINT
 
Ëngth
 = 
g’
->
	`G‘ArgDWÜd
(0);

615 cÚ¡ *
s
 = (cÚ¡ *)
g’
->
	`G‘ArgAdd»ss
(1);

618 
g’
->
	`S‘R‘uºAdd»ss
(
cÚ¡_ÿ¡
<
¡ršg
*>(&
	`SŒšgFaùÜy
(
Ëngth
, 
s
)));

619 
	}
}

621 
	$SŒšgFaùÜyG’”ic
(
asISütG’”ic
 *
g’
) {

622 
asUINT
 
Ëngth
 = 
g’
->
	`G‘ArgDWÜd
(0);

623 cÚ¡ *
s
 = (cÚ¡ *)
g’
->
	`G‘ArgAdd»ss
(1);

626 
	`Ãw
 (
g’
->
	`G‘Add»ssOfR‘uºLoÿtiÚ
()è
	`¡ršg
(
	`SŒšgFaùÜy
(
Ëngth
, 
s
));

627 
	}
}

630 
	$CÚ¡ruùSŒšgG’”ic
(
asISütG’”ic
 * 
g’
) {

631 
	`Ãw
 (
g’
->
	`G‘Objeù
()è
	`¡ršg
();

632 
	}
}

634 
	$CİyCÚ¡ruùSŒšgG’”ic
(
asISütG’”ic
 * 
g’
) {

635 
¡ršg
 * 
a
 = 
¡©ic_ÿ¡
<¡ršg *>(
g’
->
	`G‘ArgObjeù
(0));

636 
	`Ãw
 (
g’
->
	`G‘Objeù
()è
	`¡ršg
(*
a
);

637 
	}
}

639 
	$De¡ruùSŒšgG’”ic
(
asISütG’”ic
 * 
g’
) {

640 
¡ršg
 * 
±r
 = 
¡©ic_ÿ¡
<¡ršg *>(
g’
->
	`G‘Objeù
());

641 
±r
->~
	`¡ršg
();

642 
	}
}

644 
	$AssignSŒšgG’”ic
(
asISütG’”ic
 *
g’
) {

645 
¡ršg
 * 
a
 = 
¡©ic_ÿ¡
<¡ršg *>(
g’
->
	`G‘ArgObjeù
(0));

646 
¡ršg
 * 
£lf
 = 
¡©ic_ÿ¡
<¡ršg *>(
g’
->
	`G‘Objeù
());

647 *
£lf
 = *
a
;

648 
g’
->
	`S‘R‘uºAdd»ss
(
£lf
);

649 
	}
}

651 
	$AddAssignSŒšgG’”ic
(
asISütG’”ic
 *
g’
) {

652 
¡ršg
 * 
a
 = 
¡©ic_ÿ¡
<¡ršg *>(
g’
->
	`G‘ArgObjeù
(0));

653 
¡ršg
 * 
£lf
 = 
¡©ic_ÿ¡
<¡ršg *>(
g’
->
	`G‘Objeù
());

654 *
£lf
 +ğ*
a
;

655 
g’
->
	`S‘R‘uºAdd»ss
(
£lf
);

656 
	}
}

658 
	$SŒšgEqu®sG’”ic
(
asISütG’”ic
 * 
g’
) {

659 
¡ršg
 * 
a
 = 
¡©ic_ÿ¡
<¡ršg *>(
g’
->
	`G‘Objeù
());

660 
¡ršg
 * 
b
 = 
¡©ic_ÿ¡
<¡ršg *>(
g’
->
	`G‘ArgAdd»ss
(0));

661 *(
boŞ
*)
g’
->
	`G‘Add»ssOfR‘uºLoÿtiÚ
(èğ(*
a
 =ğ*
b
);

662 
	}
}

664 
	$SŒšgCmpG’”ic
(
asISütG’”ic
 * 
g’
) {

665 
¡ršg
 * 
a
 = 
¡©ic_ÿ¡
<¡ršg *>(
g’
->
	`G‘Objeù
());

666 
¡ršg
 * 
b
 = 
¡©ic_ÿ¡
<¡ršg *>(
g’
->
	`G‘ArgAdd»ss
(0));

668 
cmp
 = 0;

669 ifĞ*
a
 < *
b
 ) 
cmp
 = -1;

670 ifĞ*
a
 > *
b
 ) 
cmp
 = 1;

672 *(*)
g’
->
	`G‘Add»ssOfR‘uºLoÿtiÚ
(èğ
cmp
;

673 
	}
}

675 
	$SŒšgAddG’”ic
(
asISütG’”ic
 * 
g’
) {

676 
¡ršg
 * 
a
 = 
¡©ic_ÿ¡
<¡ršg *>(
g’
->
	`G‘Objeù
());

677 
¡ršg
 * 
b
 = 
¡©ic_ÿ¡
<¡ršg *>(
g’
->
	`G‘ArgAdd»ss
(0));

678 
¡ršg
 
»t_v®
 = *
a
 + *
b
;

679 
g’
->
	`S‘R‘uºObjeù
(&
»t_v®
);

680 
	}
}

682 
	$SŒšgL’gthG’”ic
(
asISütG’”ic
 * 
g’
) {

683 
¡ršg
 * 
£lf
 = 
¡©ic_ÿ¡
<¡ršg *>(
g’
->
	`G‘Objeù
());

684 *
¡©ic_ÿ¡
<
asUINT
 *>(
g’
->
	`G‘Add»ssOfR‘uºLoÿtiÚ
()èğ×sUINT)
£lf
->
	`Ëngth
();

685 
	}
}

687 
	$SŒšgResizeG’”ic
(
asISütG’”ic
 * 
g’
) {

688 
¡ršg
 * 
£lf
 = 
¡©ic_ÿ¡
<¡ršg *>(
g’
->
	`G‘Objeù
());

689 
£lf
->
	`»size
(*
¡©ic_ÿ¡
<
asUINT
 *>(
g’
->
	`G‘Add»ssOfArg
(0)));

690 
	}
}

692 
	$SŒšgCh¬AtG’”ic
(
asISütG’”ic
 * 
g’
) {

693 
šdex
 = 
g’
->
	`G‘ArgDWÜd
(0);

694 
¡ršg
 * 
£lf
 = 
¡©ic_ÿ¡
<¡ršg *>(
g’
->
	`G‘Objeù
());

696 ià(
šdex
 >ğ
£lf
->
	`size
()) {

698 
asISütCÚ‹xt
 *
ùx
 = 
	`asG‘AùiveCÚ‹xt
();

699 
ùx
->
	`S‘Exû±iÚ
("Out of„ange");

701 
g’
->
	`S‘R‘uºAdd»ss
(0);

703 
g’
->
	`S‘R‘uºAdd»ss
(&(
£lf
->
İ”©Ü
 [](
šdex
)));

705 
	}
}

707 
	$AssignIÁ2SŒšgG’”ic
(
asISütG’”ic
 *
g’
)

709 *
a
 = 
¡©ic_ÿ¡
<*>(
g’
->
	`G‘Add»ssOfArg
(0));

710 
¡ršg
 *
£lf
 = 
¡©ic_ÿ¡
<¡ršg*>(
g’
->
	`G‘Objeù
());

711 
¡d
::
¡ršg¡»am
 
s¡r
;

712 
s¡r
 << *
a
;

713 *
£lf
 = 
s¡r
.
	`¡r
();

714 
g’
->
	`S‘R‘uºAdd»ss
(
£lf
);

715 
	}
}

717 
	$AssignUIÁ2SŒšgG’”ic
(
asISütG’”ic
 *
g’
)

719 *
a
 = 
¡©ic_ÿ¡
<*>(
g’
->
	`G‘Add»ssOfArg
(0));

720 
¡ršg
 *
£lf
 = 
¡©ic_ÿ¡
<¡ršg*>(
g’
->
	`G‘Objeù
());

721 
¡d
::
¡ršg¡»am
 
s¡r
;

722 
s¡r
 << *
a
;

723 *
£lf
 = 
s¡r
.
	`¡r
();

724 
g’
->
	`S‘R‘uºAdd»ss
(
£lf
);

725 
	}
}

727 
	$AssignDoubË2SŒšgG’”ic
(
asISütG’”ic
 *
g’
)

729 *
a
 = 
¡©ic_ÿ¡
<*>(
g’
->
	`G‘Add»ssOfArg
(0));

730 
¡ršg
 *
£lf
 = 
¡©ic_ÿ¡
<¡ršg*>(
g’
->
	`G‘Objeù
());

731 
¡d
::
¡ršg¡»am
 
s¡r
;

732 
s¡r
 << *
a
;

733 *
£lf
 = 
s¡r
.
	`¡r
();

734 
g’
->
	`S‘R‘uºAdd»ss
(
£lf
);

735 
	}
}

737 
	$AssignBoŞ2SŒšgG’”ic
(
asISütG’”ic
 *
g’
)

739 
boŞ
 *
a
 = 
¡©ic_ÿ¡
<boŞ*>(
g’
->
	`G‘Add»ssOfArg
(0));

740 
¡ršg
 *
£lf
 = 
¡©ic_ÿ¡
<¡ršg*>(
g’
->
	`G‘Objeù
());

741 
¡d
::
¡ršg¡»am
 
s¡r
;

742 
s¡r
 << (*
a
 ? "true" : "false");

743 *
£lf
 = 
s¡r
.
	`¡r
();

744 
g’
->
	`S‘R‘uºAdd»ss
(
£lf
);

745 
	}
}

747 
	$AddAssignDoubË2SŒšgG’”ic
(
asISütG’”ic
 * 
g’
) {

748 * 
a
 = 
¡©ic_ÿ¡
<*>(
g’
->
	`G‘Add»ssOfArg
(0));

749 
¡ršg
 * 
£lf
 = 
¡©ic_ÿ¡
<¡ršg *>(
g’
->
	`G‘Objeù
());

750 
¡d
::
¡ršg¡»am
 
s¡r
;

751 
s¡r
 << *
a
;

752 *
£lf
 +ğ
s¡r
.
	`¡r
();

753 
g’
->
	`S‘R‘uºAdd»ss
(
£lf
);

754 
	}
}

756 
	$AddAssignIÁ2SŒšgG’”ic
(
asISütG’”ic
 * 
g’
) {

757 * 
a
 = 
¡©ic_ÿ¡
<*>(
g’
->
	`G‘Add»ssOfArg
(0));

758 
¡ršg
 * 
£lf
 = 
¡©ic_ÿ¡
<¡ršg *>(
g’
->
	`G‘Objeù
());

759 
¡d
::
¡ršg¡»am
 
s¡r
;

760 
s¡r
 << *
a
;

761 *
£lf
 +ğ
s¡r
.
	`¡r
();

762 
g’
->
	`S‘R‘uºAdd»ss
(
£lf
);

763 
	}
}

765 
	$AddAssignUIÁ2SŒšgG’”ic
(
asISütG’”ic
 * 
g’
) {

766 * 
a
 = 
¡©ic_ÿ¡
<*>(
g’
->
	`G‘Add»ssOfArg
(0));

767 
¡ršg
 * 
£lf
 = 
¡©ic_ÿ¡
<¡ršg *>(
g’
->
	`G‘Objeù
());

768 
¡d
::
¡ršg¡»am
 
s¡r
;

769 
s¡r
 << *
a
;

770 *
£lf
 +ğ
s¡r
.
	`¡r
();

771 
g’
->
	`S‘R‘uºAdd»ss
(
£lf
);

772 
	}
}

774 
	$AddAssignBoŞ2SŒšgG’”ic
(
asISütG’”ic
 * 
g’
) {

775 
boŞ
 * 
a
 = 
¡©ic_ÿ¡
<boŞ *>(
g’
->
	`G‘Add»ssOfArg
(0));

776 
¡ršg
 * 
£lf
 = 
¡©ic_ÿ¡
<¡ršg *>(
g’
->
	`G‘Objeù
());

777 
¡d
::
¡ršg¡»am
 
s¡r
;

778 
s¡r
 << (*
a
 ? "true" : "false");

779 *
£lf
 +ğ
s¡r
.
	`¡r
();

780 
g’
->
	`S‘R‘uºAdd»ss
(
£lf
);

781 
	}
}

783 
	$AddSŒšg2DoubËG’”ic
(
asISütG’”ic
 * 
g’
) {

784 
¡ršg
 * 
a
 = 
¡©ic_ÿ¡
<¡ršg *>(
g’
->
	`G‘Objeù
());

785 * 
b
 = 
¡©ic_ÿ¡
<*>(
g’
->
	`G‘Add»ssOfArg
(0));

786 
¡d
::
¡ršg¡»am
 
s¡r
;

787 
s¡r
 << *
a
 << *
b
;

788 
¡d
::
¡ršg
 
»t_v®
 = 
s¡r
.
	`¡r
();

789 
g’
->
	`S‘R‘uºObjeù
(&
»t_v®
);

790 
	}
}

792 
	$AddSŒšg2IÁG’”ic
(
asISütG’”ic
 * 
g’
) {

793 
¡ršg
 * 
a
 = 
¡©ic_ÿ¡
<¡ršg *>(
g’
->
	`G‘Objeù
());

794 * 
b
 = 
¡©ic_ÿ¡
<*>(
g’
->
	`G‘Add»ssOfArg
(0));

795 
¡d
::
¡ršg¡»am
 
s¡r
;

796 
s¡r
 << *
a
 << *
b
;

797 
¡d
::
¡ršg
 
»t_v®
 = 
s¡r
.
	`¡r
();

798 
g’
->
	`S‘R‘uºObjeù
(&
»t_v®
);

799 
	}
}

801 
	$AddSŒšg2UIÁG’”ic
(
asISütG’”ic
 * 
g’
) {

802 
¡ršg
 * 
a
 = 
¡©ic_ÿ¡
<¡ršg *>(
g’
->
	`G‘Objeù
());

803 * 
b
 = 
¡©ic_ÿ¡
<*>(
g’
->
	`G‘Add»ssOfArg
(0));

804 
¡d
::
¡ršg¡»am
 
s¡r
;

805 
s¡r
 << *
a
 << *
b
;

806 
¡d
::
¡ršg
 
»t_v®
 = 
s¡r
.
	`¡r
();

807 
g’
->
	`S‘R‘uºObjeù
(&
»t_v®
);

808 
	}
}

810 
	$AddSŒšg2BoŞG’”ic
(
asISütG’”ic
 * 
g’
) {

811 
¡ršg
 * 
a
 = 
¡©ic_ÿ¡
<¡ršg *>(
g’
->
	`G‘Objeù
());

812 
boŞ
 * 
b
 = 
¡©ic_ÿ¡
<boŞ *>(
g’
->
	`G‘Add»ssOfArg
(0));

813 
¡d
::
¡ršg¡»am
 
s¡r
;

814 
s¡r
 << *
a
 << (*
b
 ? "true" : "false");

815 
¡d
::
¡ršg
 
»t_v®
 = 
s¡r
.
	`¡r
();

816 
g’
->
	`S‘R‘uºObjeù
(&
»t_v®
);

817 
	}
}

819 
	$AddDoubË2SŒšgG’”ic
(
asISütG’”ic
 * 
g’
) {

820 * 
a
 = 
¡©ic_ÿ¡
<*>(
g’
->
	`G‘Add»ssOfArg
(0));

821 
¡ršg
 * 
b
 = 
¡©ic_ÿ¡
<¡ršg *>(
g’
->
	`G‘Objeù
());

822 
¡d
::
¡ršg¡»am
 
s¡r
;

823 
s¡r
 << *
a
 << *
b
;

824 
¡d
::
¡ršg
 
»t_v®
 = 
s¡r
.
	`¡r
();

825 
g’
->
	`S‘R‘uºObjeù
(&
»t_v®
);

826 
	}
}

828 
	$AddIÁ2SŒšgG’”ic
(
asISütG’”ic
 * 
g’
) {

829 * 
a
 = 
¡©ic_ÿ¡
<*>(
g’
->
	`G‘Add»ssOfArg
(0));

830 
¡ršg
 * 
b
 = 
¡©ic_ÿ¡
<¡ršg *>(
g’
->
	`G‘Objeù
());

831 
¡d
::
¡ršg¡»am
 
s¡r
;

832 
s¡r
 << *
a
 << *
b
;

833 
¡d
::
¡ršg
 
»t_v®
 = 
s¡r
.
	`¡r
();

834 
g’
->
	`S‘R‘uºObjeù
(&
»t_v®
);

835 
	}
}

837 
	$AddUIÁ2SŒšgG’”ic
(
asISütG’”ic
 * 
g’
) {

838 * 
a
 = 
¡©ic_ÿ¡
<*>(
g’
->
	`G‘Add»ssOfArg
(0));

839 
¡ršg
 * 
b
 = 
¡©ic_ÿ¡
<¡ršg *>(
g’
->
	`G‘Objeù
());

840 
¡d
::
¡ršg¡»am
 
s¡r
;

841 
s¡r
 << *
a
 << *
b
;

842 
¡d
::
¡ršg
 
»t_v®
 = 
s¡r
.
	`¡r
();

843 
g’
->
	`S‘R‘uºObjeù
(&
»t_v®
);

844 
	}
}

846 
	$AddBoŞ2SŒšgG’”ic
(
asISütG’”ic
 * 
g’
) {

847 
boŞ
* 
a
 = 
¡©ic_ÿ¡
<boŞ *>(
g’
->
	`G‘Add»ssOfArg
(0));

848 
¡ršg
 * 
b
 = 
¡©ic_ÿ¡
<¡ršg *>(
g’
->
	`G‘Objeù
());

849 
¡d
::
¡ršg¡»am
 
s¡r
;

850 
s¡r
 << (*
a
 ? "Œue" : "çl£"è<< *
b
;

851 
¡d
::
¡ršg
 
»t_v®
 = 
s¡r
.
	`¡r
();

852 
g’
->
	`S‘R‘uºObjeù
(&
»t_v®
);

853 
	}
}

855 
	$SŒšgSubSŒšg_G’”ic
(
asISütG’”ic
 *
g’
)

858 
¡ršg
 *
¡r
 = (¡ršg*)
g’
->
	`G‘Objeù
();

859 
asUINT
 
¡¬t
 = *(*)
g’
->
	`G‘Add»ssOfArg
(0);

860 
couÁ
 = *(*)
g’
->
	`G‘Add»ssOfArg
(1);

863 
	`Ãw
(
g’
->
	`G‘Add»ssOfR‘uºLoÿtiÚ
()è
	`¡ršg
(
	`SŒšgSubSŒšg
(
¡¬t
, 
couÁ
, *
¡r
));

864 
	}
}

866 
	$Regi¡”StdSŒšg_G’”ic
(
asISütEngše
 *
’gše
)

868 
r
;

871 
r
 = 
’gše
->
	`Regi¡”ObjeùTy³
("¡ršg", (
¡ršg
), 
asOBJ_VALUE
 | 
asOBJ_APP_CLASS_CDAK
); 
	`as£¹
(„ >= 0 );

873 #ià
AS_USE_STRINGPOOL
 == 1

875 
r
 = 
’gše
->
	`Regi¡”SŒšgFaùÜy
("cÚ¡ sŒšg &", 
	`asFUNCTION
(
SŒšgFaùÜyG’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

878 
’gše
->
	`S‘EngšeU£rD©aCËªupC®lback
(
CËªupEngšeSŒšgPoŞ
, 
STRING_POOL
);

881 
r
 = 
’gše
->
	`Regi¡”SŒšgFaùÜy
("¡ršg", 
	`asFUNCTION
(
SŒšgFaùÜyG’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

885 
r
 = 
’gše
->
	`Regi¡”ObjeùBehaviour
("¡ršg", 
asBEHAVE_CONSTRUCT
, "void f()", 
	`asFUNCTION
(
CÚ¡ruùSŒšgG’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

886 
r
 = 
’gše
->
	`Regi¡”ObjeùBehaviour
("¡ršg", 
asBEHAVE_CONSTRUCT
, "void f(cÚ¡ sŒšg &š)", 
	`asFUNCTION
(
CİyCÚ¡ruùSŒšgG’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

887 
r
 = 
’gše
->
	`Regi¡”ObjeùBehaviour
("¡ršg", 
asBEHAVE_DESTRUCT
, "void f()", 
	`asFUNCTION
(
De¡ruùSŒšgG’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

888 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg &İAssign(cÚ¡ sŒšg &š)", 
	`asFUNCTION
(
AssignSŒšgG’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

889 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg &İAddAssign(cÚ¡ sŒšg &š)", 
	`asFUNCTION
(
AddAssignSŒšgG’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

891 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "boŞ opEqu®s(cÚ¡ sŒšg &šècÚ¡", 
	`asFUNCTION
(
SŒšgEqu®sG’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

892 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "šˆİCmp(cÚ¡ sŒšg &šècÚ¡", 
	`asFUNCTION
(
SŒšgCmpG’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

893 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg opAdd(cÚ¡ sŒšg &šècÚ¡", 
	`asFUNCTION
(
SŒšgAddG’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

896 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "ušˆËngth(ècÚ¡", 
	`asFUNCTION
(
SŒšgL’gthG’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

897 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "void„esize(ušt)", 
	`asFUNCTION
(
SŒšgResizeG’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

900 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "ušt8 &İIndex(ušt)", 
	`asFUNCTION
(
SŒšgCh¬AtG’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

901 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "cÚ¡ ušt8 &İIndex(uštècÚ¡", 
	`asFUNCTION
(
SŒšgCh¬AtG’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

904 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg &İAssign(doubË)", 
	`asFUNCTION
(
AssignDoubË2SŒšgG’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

905 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg &İAddAssign(doubË)", 
	`asFUNCTION
(
AddAssignDoubË2SŒšgG’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

906 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg opAdd(doubËècÚ¡", 
	`asFUNCTION
(
AddSŒšg2DoubËG’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

907 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg opAdd_r(doubËècÚ¡", 
	`asFUNCTION
(
AddDoubË2SŒšgG’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

909 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg &İAssign(št)", 
	`asFUNCTION
(
AssignIÁ2SŒšgG’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

910 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg &İAddAssign(št)", 
	`asFUNCTION
(
AddAssignIÁ2SŒšgG’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

911 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg opAdd(štècÚ¡", 
	`asFUNCTION
(
AddSŒšg2IÁG’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

912 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg opAdd_r(štècÚ¡", 
	`asFUNCTION
(
AddIÁ2SŒšgG’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

914 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg &İAssign(ušt)", 
	`asFUNCTION
(
AssignUIÁ2SŒšgG’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

915 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg &İAddAssign(ušt)", 
	`asFUNCTION
(
AddAssignUIÁ2SŒšgG’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

916 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg opAdd(uštècÚ¡", 
	`asFUNCTION
(
AddSŒšg2UIÁG’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

917 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg opAdd_r(uštècÚ¡", 
	`asFUNCTION
(
AddUIÁ2SŒšgG’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

919 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg &İAssign(boŞ)", 
	`asFUNCTION
(
AssignBoŞ2SŒšgG’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

920 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg &İAddAssign(boŞ)", 
	`asFUNCTION
(
AddAssignBoŞ2SŒšgG’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

921 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg opAdd(boŞècÚ¡", 
	`asFUNCTION
(
AddSŒšg2BoŞG’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

922 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg opAdd_r(boŞècÚ¡", 
	`asFUNCTION
(
AddBoŞ2SŒšgG’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

924 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¡ršg sub¡r(ušˆ¡¬ˆğ0, iÁ couÁ = -1ècÚ¡", 
	`asFUNCTION
(
SŒšgSubSŒšg_G’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(„ >= 0 );

925 
	}
}

927 
	$Regi¡”StdSŒšg
(
asISütEngše
 * 
’gše
)

929 ià(
	`¡r¡r
(
	`asG‘Lib¿ryO±iÚs
(), "AS_MAX_PORTABILITY"))

930 
	`Regi¡”StdSŒšg_G’”ic
(
’gše
);

932 
	`Regi¡”StdSŒšg_N©ive
(
’gše
);

933 
	}
}

935 
	gEND_AS_NAMESPACE


	@../src/script/scriptstdstring_utils.cpp

1 
	~<as£¹.h
>

2 
	~"süt¡d¡ršg.h
"

3 
	~"sü¼ay.h
"

4 
	~<¡dio.h
>

5 
	~<¡ršg.h
>

7 
usšg
 
Çme¥aû
 
	g¡d
;

9 
BEGIN_AS_NAMESPACE


23 
CSütA¼ay
 *
	$SŒšgS¶™
(cÚ¡ 
¡ršg
 &
d–im
, cÚ¡ sŒšg &
¡r
)

26 
asISütCÚ‹xt
 *
ùx
 = 
	`asG‘AùiveCÚ‹xt
();

27 
asISütEngše
 *
’gše
 = 
ùx
->
	`G‘Engše
();

31 
asIObjeùTy³
 *
¬¿yTy³
 = 
’gše
->
	`G‘ObjeùTy³ById
Óngše->
	`G‘Ty³IdByDeş
("array<string>"));

34 
CSütA¼ay
 *
¬¿y
 = 
Ãw
 
	`CSütA¼ay
(0, 
¬¿yTy³
);

37 
pos
 = 0, 
´ev
 = 0, 
couÁ
 = 0;

38  (
pos
 = ()
¡r
.
	`fšd
(
d–im
, 
´ev
)è!ğ()
¡ršg
::
Åos
 )

41 
¬¿y
->
	`Resize
×¼ay->
	`G‘Size
()+1);

42 ((
¡ršg
*)
¬¿y
->
	`At
(
couÁ
))->
	`assign
(&
¡r
[
´ev
], 
pos
-prev);

45 
couÁ
++;

46 
´ev
 = 
pos
 + ()
d–im
.
	`Ëngth
();

50 
¬¿y
->
	`Resize
×¼ay->
	`G‘Size
()+1);

51 ((
¡ršg
*)
¬¿y
->
	`At
(
couÁ
))->
	`assign
(&
¡r
[
´ev
]);

53  
¬¿y
;

54 
	}
}

56 
	$SŒšgS¶™_G’”ic
(
asISütG’”ic
 *
g’
)

59 
¡ršg
 *
¡r
 = (¡ršg*)
g’
->
	`G‘Objeù
();

60 
¡ršg
 *
d–im
 = *(¡ršg**)
g’
->
	`G‘Add»ssOfArg
(0);

63 *(
CSütA¼ay
**)
g’
->
	`G‘Add»ssOfR‘uºLoÿtiÚ
(èğ
	`SŒšgS¶™
(*
d–im
, *
¡r
);

64 
	}
}

81 
¡ršg
 
	$SŒšgJoš
(cÚ¡ 
CSütA¼ay
 &
¬¿y
, cÚ¡ 
¡ršg
 &
d–im
)

84 
¡ršg
 
¡r
 = "";

85 ifĞ
¬¿y
.
	`G‘Size
() )

87 
n
;

88  
n
 = 0;‚ < ()
¬¿y
.
	`G‘Size
() - 1;‚++ )

90 
¡r
 +ğ*(
¡ršg
*)
¬¿y
.
	`At
(
n
);

91 
¡r
 +ğ
d–im
;

95 
¡r
 +ğ*(
¡ršg
*)
¬¿y
.
	`At
(
n
);

98  
¡r
;

99 
	}
}

101 
	$SŒšgJoš_G’”ic
(
asISütG’”ic
 *
g’
)

104 
CSütA¼ay
 *
¬¿y
 = *(CSütA¼ay**)
g’
->
	`G‘Add»ssOfArg
(0);

105 
¡ršg
 *
d–im
 = *(¡ršg**)
g’
->
	`G‘Add»ssOfArg
(1);

108 
	`Ãw
(
g’
->
	`G‘Add»ssOfR‘uºLoÿtiÚ
()è
	`¡ršg
(
	`SŒšgJoš
(*
¬¿y
, *
d–im
));

109 
	}
}

113 
	$Regi¡”StdSŒšgUts
(
asISütEngše
 *
’gše
)

115 
r
;

117 ifĞ
	`¡r¡r
(
	`asG‘Lib¿ryO±iÚs
(), "AS_MAX_PORTABILITY") )

119 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¬¿y<¡ršg>@ s¶™(cÚ¡ sŒšg &šècÚ¡", 
	`asFUNCTION
(
SŒšgS¶™_G’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(r >= 0);

120 
r
 = 
’gše
->
	`Regi¡”Glob®FunùiÚ
("¡ršg još(cÚ¡‡¼ay<¡ršg> &š, cÚ¡ sŒšg &š)", 
	`asFUNCTION
(
SŒšgJoš_G’”ic
), 
asCALL_GENERIC
); 
	`as£¹
(r >= 0);

124 
r
 = 
’gše
->
	`Regi¡”ObjeùM‘hod
("¡ršg", "¬¿y<¡ršg>@ s¶™(cÚ¡ sŒšg &šècÚ¡", 
	`asFUNCTION
(
SŒšgS¶™
), 
asCALL_CDECL_OBJLAST
); 
	`as£¹
(r >= 0);

125 
r
 = 
’gše
->
	`Regi¡”Glob®FunùiÚ
("¡ršg još(cÚ¡‡¼ay<¡ršg> &š, cÚ¡ sŒšg &š)", 
	`asFUNCTION
(
SŒšgJoš
), 
asCALL_CDECL
); 
	`as£¹
(r >= 0);

127 
	}
}

129 
	gEND_AS_NAMESPACE


	@../src/system/sys_conCommands.cpp

1 
	~"../../hdr/sys_glob®s.h
"

2 
	~"../../hdr/sy¡em/sys_sound.h
"

7 
boŞ
 
	$sys_debugP¬tişes
()

10 
	`·r_debugP¬tişes
();

12  
Œue
;

13 
	}
}

18 
boŞ
 
	$sys_debugP©hFšdšg
()

21 
	`gam_ASrDebugP©hs
 ();

23  
Œue
;

24 
	}
}

29 
boŞ
 
	$sys_£tASrDebugIndex
(
¡ršg
 
·¿m1
)

32 
debugASrIndex
 = 
	`©oi
(
·¿m1
.
	`c_¡r
());

34  
Œue
;

35 
	}
}

40 
boŞ
 
	$sys_cÚCommªdH–p
()

43 
i
 = 0;

45 
i
 = 0; i !ğ
cÚCu¼’tNumCommªds
; i++)

47 
	`cÚ_´št
 (
Œue
,rue, "[ % ] - [ % ]", 
cÚCommªds
[
i
].
commªd
.
	`c_¡r
(), cÚCommªds[i].
u§ge
.c_str());

50 
	`cÚ_´št
(
Œue
,rue, "SüˆfunùiÚ [ %˜]", 
numSütFunùiÚs
);

51  
Œue
;

52 
	}
}

57 
boŞ
 
	$sys_cÚShowNumH—lšgTes
()

60 ià(0 =ğ
h—lšg
[0].
numOnLev–
)

61 
	`cÚ_´št
(
Œue
,rue, "Num h—lšge [ %˜]", 
h—lšg
[0].
numOnLev–
);

63 
i
 = 0; i !ğ
h—lšg
[0].
numOnLev–
; i++)

65 
	`cÚ_´št
(
Œue
,rue, "T[ %˜] Po [ %4.2à%4.2à]", 
i
, 
h—lšg
[i].
wÜldPos™iÚ
.
x
, h—lšg[i].wÜldPos™iÚ.
y
);

68  
Œue
;

69 
	}
}

74 
boŞ
 
	$sys_cÚSoundInfo
()

77 
i
 = 0; i !ğ
NUM_SOUNDS
; i++)

79 
	`cÚ_´št
(
Œue
,rue, "Lßded [ %˜] - [ % ] - [ % ]", 
i
, 
sound
[i].
feName
, sound[i].
lßdedOk
 ==rue ? "true" : "false");

81  
Œue
;

82 
	}
}

87 
boŞ
 
	$sys_cÚImageInfo
()

90 
i
 = 0; i !ğ
numImages
; i++)

92 
	`cÚ_´št
(
Œue
,rue, "Lßded [ %˜] [ % ] - W [ %˜] H [ %˜] [ % ]", 
i
, 
image
[i].
feName
,

93 
	`®_g‘_b™m­_width
(
image
[
i
].image), 
	`®_g‘_b™m­_height
(image[i].image), image[i].
lßdedOk
 =ğ
Œue
 ? "true" : "false");

95  
Œue
;

96 
	}
}

102 
	$cÚ_sütEngšeRe¡¬t
()

105 
	`sys_»¡¬tSütEngše
();

106 
	`sys_execu‹SütFunùiÚ
 ("as_initGameVars", "");

107 
	`sys_execu‹SütFunùiÚ
 ("as_addAllScriptCommands", "");

108 
	}
}

	@../src/system/sys_conVariables.cpp

2 
	~"../../hdr/sys_glob®s.h
"

3 
	~"../../hdr/sy¡em/sys_süt.h
"

4 
	~<s¡»am
>

5 
	~<io¡»am
>

7 
	#VAR_TYPE_INT
 0

	)

8 
	#VAR_TYPE_FLOAT
 1

	)

9 
	#VAR_TYPE_BOOL
 2

	)

14 
	$sys_cÚG‘V¬Ty³
(
¡ršg
 
whichTy³
)

17 ià(0 =ğ
whichTy³
.
	`size
())

18  
VAR_TYPE_INT
;

20 ià(
whichTy³
 == "int")

21  
VAR_TYPE_INT
;

23 ià(
whichTy³
 == "float")

24  
VAR_TYPE_FLOAT
;

26 ià(
whichTy³
 == "bool")

27  
VAR_TYPE_BOOL
;

30 
	}
}

36 
boŞ
 
	$sys_cÚLi¡V¬ŸbËs
()

39 
couÁ
 = 0;

40 
v¬Ty³Num
 = 0;

42 *
‹¡V¬IÁ
;

43 *
‹¡V¬Flßt
;

45 
‹mpV®ueIÁ
 = 0;

46 
‹mpV®ueFlßt
 = 0.0f;

48 
¡ršg
 
v¬Ty³
;

49 
¡ršg
 
v¬Name
;

53 
veùÜ
<
¡ršg
> 
tok’s
;

54 
¡ršg
 
bufãr
;

56 
ho¡V¬ŸbËs
[
couÁ
].
sütFunùiÚName
.
	`size
() > 1)

60 
v¬Ty³
 = "";

61 
v¬Name
 = "";

64 
i¡ršg¡»am
 
	`iss
(
ho¡V¬ŸbËs
[
couÁ
].
sütFunùiÚName
, i¡ršg¡»am::
š
);

67 
iss
 >> 
bufãr
)

69 
tok’s
.
	`push_back
(
bufãr
);

71 
v¬Ty³
 = 
tok’s
[0];

72 
v¬Name
 = 
tok’s
[1];

76 
iss
.
	`ş—r
();

77 
tok’s
.
	`ş—r
();

79 
v¬Ty³Num
 = 
	`sys_cÚG‘V¬Ty³
(
v¬Ty³
);

81 
v¬Ty³Num
)

83 
VAR_TYPE_INT
:

84 
‹¡V¬IÁ
 = 
ho¡V¬ŸbËs
[
couÁ
].
ho¡FunùiÚPŒ
;

85 
‹mpV®ueIÁ
 = *
‹¡V¬IÁ
;

86 
	`cÚ_´št
(
Œue
,rue, "V¬ŸbË - INT - [ % ] - [ %˜]", 
v¬Name
.
	`c_¡r
(), 
‹mpV®ueIÁ
);

89 
VAR_TYPE_FLOAT
:

90 
‹¡V¬Flßt
 = 
ho¡V¬ŸbËs
[
couÁ
].
ho¡FunùiÚPŒ
;

91 
‹mpV®ueFlßt
 = *
‹¡V¬Flßt
;

92 
	`cÚ_´št
(
Œue
,rue, "V¬ŸbË - FLOAT - [ % ] - [ %2.2à]", 
v¬Name
.
	`c_¡r
(), 
‹mpV®ueFlßt
);

95 
VAR_TYPE_BOOL
:

96 
‹¡V¬IÁ
 = 
ho¡V¬ŸbËs
[
couÁ
].
ho¡FunùiÚPŒ
;

97 
‹mpV®ueIÁ
 = *
‹¡V¬IÁ
;

98 ià(0 =ğ
‹mpV®ueIÁ
)

100 
	`cÚ_´št
(
Œue
,rue, "V¬ŸbË - BOOL - [ % ] - [ % ]", 
v¬Name
.
	`c_¡r
(), "false");

104 
	`cÚ_´št
(
Œue
,rue, "V¬ŸbË - BOOL - [ % ] - [ % ]", 
v¬Name
.
	`c_¡r
(), "true");

108 
couÁ
++;

110  
Œue
;

111 
	}
}

117 
boŞ
 
	$sys_cÚG‘V¬ŸbË
(
¡ršg
 
·¿m1
)

120 
couÁ
 = 0;

121 
v¬Ty³Num
 = 0;

122 
‹mpV®ue
 = 0;

124 
‹mpV®ueIÁ
 = 0;

125 
‹mpV®ueFlßt
 = 0;

127 *
‹¡V¬IÁ
;

128 *
‹¡V¬Flßt
;

130 
¡ršg
 
v¬Ty³
;

131 
¡ršg
 
v¬Name
;

135 
veùÜ
<
¡ršg
> 
tok’s
;

136 
¡ršg
 
bufãr
;

138 ià(
·¿m1
.
	`size
() == 0)

140 
	`cÚ_´št
 (
Œue
,rue, "Error: No variable specified -†isting variables");

141 
	`sys_cÚLi¡V¬ŸbËs
();

142  
Œue
;

145 
ho¡V¬ŸbËs
[
couÁ
].
sütFunùiÚName
.
	`size
() > 1)

149 
v¬Ty³
 = "";

150 
v¬Name
 = "";

153 
i¡ršg¡»am
 
	`iss
(
ho¡V¬ŸbËs
[
couÁ
].
sütFunùiÚName
, i¡ršg¡»am::
š
);

156 
iss
 >> 
bufãr
)

158 
tok’s
.
	`push_back
(
bufãr
);

160 
v¬Ty³
 = 
tok’s
[0];

161 
v¬Name
 = 
tok’s
[1];

165 
iss
.
	`ş—r
();

166 
tok’s
.
	`ş—r
();

168 ià(
·¿m1
 =ğ
v¬Name
)

170 
v¬Ty³Num
 = 
	`sys_cÚG‘V¬Ty³
(
v¬Ty³
);

171 
v¬Ty³Num
)

173 
VAR_TYPE_INT
:

174 
‹¡V¬IÁ
 = 
ho¡V¬ŸbËs
[
couÁ
].
ho¡FunùiÚPŒ
;

175 
‹mpV®ueIÁ
 = *
‹¡V¬IÁ
;

176 
	`cÚ_´št
(
Œue
,rue, "V¬ŸbË [ % ] - [ %˜]", 
v¬Name
.
	`c_¡r
(), 
‹mpV®ueIÁ
);

179 
VAR_TYPE_FLOAT
:

180 
‹¡V¬Flßt
 = 
ho¡V¬ŸbËs
[
couÁ
].
ho¡FunùiÚPŒ
;

181 
‹mpV®ueFlßt
 = *
‹¡V¬Flßt
;

182 
	`cÚ_´št
(
Œue
,rue, "V¬ŸbË [ % ] - [ %2.2à]", 
v¬Name
.
	`c_¡r
(), 
‹mpV®ueFlßt
);

185 
VAR_TYPE_BOOL
:

186 
‹¡V¬IÁ
 = 
ho¡V¬ŸbËs
[
couÁ
].
ho¡FunùiÚPŒ
;

187 
‹mpV®ueIÁ
 = *
‹¡V¬Flßt
;

188 ià(0 =ğ
‹mpV®ue
)

190 
	`cÚ_´št
(
Œue
,rue, "V¬ŸbË [ % ] - [ % ]", 
v¬Name
.
	`c_¡r
(), "false");

194 
	`cÚ_´št
(
Œue
,rue, "V¬ŸbË [ % ] - [ % ]", 
v¬Name
.
	`c_¡r
(), "true");

198  
Œue
;

201 
couÁ
++;

203 
	`cÚ_´št
 (
Œue
,rue, "E¼Ü: NØm©chšg v®ufÜ [ % ] found", 
·¿m1
);

204  
Œue
;

205 
	}
}

211 
boŞ
 
	$sys_cÚS‘V¬ŸbË
(
¡ršg
 
·¿m1
, sŒšg 
·¿m2
)

214 
couÁ
 = 0;

215 
¡ršg
 
v¬Ty³
;

216 
¡ršg
 
v¬Name
;

218 *
‹¡V¬IÁ
;

219 *
‹¡V¬Flßt
;

221 
v¬Ty³Num
;

222 
‹mpV®ue
;

224 
veùÜ
<
¡ršg
> 
tok’s
;

225 
¡ršg
 
bufãr
;

227 ià(
·¿m1
.
	`size
() == 0)

229 
	`cÚ_´št
 (
Œue
,rue, "Error: No variable specified -†isting variables");

230 
	`sys_cÚLi¡V¬ŸbËs
();

231  
Œue
;

234 ià(
·¿m2
.
	`size
() == 0)

236 
	`cÚ_´št
(
Œue
,rue, "Error: Missing…arametero setVar");

237  
çl£
;

240 
ho¡V¬ŸbËs
[
couÁ
].
sütFunùiÚName
.
	`size
() > 1)

244 
v¬Ty³
 = "";

245 
v¬Name
 = "";

248 
i¡ršg¡»am
 
	`iss
(
ho¡V¬ŸbËs
[
couÁ
].
sütFunùiÚName
, i¡ršg¡»am::
š
);

251 
iss
 >> 
bufãr
)

253 
tok’s
.
	`push_back
(
bufãr
);

255 
v¬Ty³
 = 
tok’s
[0];

256 
v¬Name
 = 
tok’s
[1];

260 
iss
.
	`ş—r
();

261 
tok’s
.
	`ş—r
();

263 ià(
·¿m1
 =ğ
v¬Name
)

265 
v¬Ty³Num
 = 
	`sys_cÚG‘V¬Ty³
(
v¬Ty³
);

266 
v¬Ty³Num
)

268 
VAR_TYPE_INT
:

269 
‹¡V¬IÁ
 = 
ho¡V¬ŸbËs
[
couÁ
].
ho¡FunùiÚPŒ
;

270 *
‹¡V¬IÁ
 = 
	`©oi
(
·¿m2
.
	`c_¡r
());

271 
	`cÚ_´št
 (
Œue
,rue, "V¬ŸbË [ % ] s‘Ø[ %˜]", 
v¬Name
.
	`c_¡r
(), *
‹¡V¬IÁ
);

274 
VAR_TYPE_FLOAT
:

275 
‹¡V¬Flßt
 = 
ho¡V¬ŸbËs
[
couÁ
].
ho¡FunùiÚPŒ
;

276 *
‹¡V¬Flßt
 = 
	`©of
(
·¿m2
.
	`c_¡r
());

277 
	`cÚ_´št
 (
Œue
,rue, "V¬ŸbË [ % ] s‘Ø[ %2.2à]", 
v¬Name
.
	`c_¡r
(), *
‹¡V¬Flßt
);

280 
VAR_TYPE_BOOL
:

281 
‹¡V¬IÁ
 = 
ho¡V¬ŸbËs
[
couÁ
].
ho¡FunùiÚPŒ
;

282 
‹mpV®ue
 = 
	`©oi
(
·¿m2
.
	`c_¡r
());

283 ià(0 =ğ
‹mpV®ue
)

285 
	`cÚ_´št
 (
Œue
,rue, "V¬ŸbË [ % ] s‘Ø[ % ]", 
v¬Name
.
	`c_¡r
(), "false");

290 
	`cÚ_´št
 (
Œue
,rue, "V¬ŸbË [ % ] s‘Ø[ % ]", 
v¬Name
.
	`c_¡r
(), "true");

294  
Œue
;

296 
couÁ
++;

298 
	`cÚ_´št
 (
Œue
,rue, "E¼Ü: NØm©chšg v®ufÜ [ % ] found", 
·¿m1
.
	`c_¡r
());

299  
Œue
;

300 
	}
}

	@../src/system/sys_console.cpp

1 
	~"../../hdr/sys_glob®s.h
"

2 
	~<s¡»am
>

3 
	~<io¡»am
>

6 
	#CON_COMMAND
 1

	)

7 
	#CON_USAGE
 2

	)

8 
	#CON_FUNC
 3

	)

9 
	#CON_PARAM
 4

	)

11 
	#CON_FONTSIZE
 16.0f

	)

13 
	gcÚNumInHi¡Üy
 = 0;

21 
	gveùÜ
<
	g_cÚCommªd
> 
	gcÚCommªds
;

22 
	gcÚCu¼’tNumCommªds
 = 0;

24 
_cÚLše
 
	gcÚLšes
[
NUM_CON_LINES
];

25 
_cÚLše
 
	gcÚP»vCommªds
[
NUM_MAX_CON_COMMANDS
];

26 
_cÚLše
 
	gcÚCu¼’tLše
;

27 
_cÚLše
 
	gcÚCu¼’tProm±
;

28 
	gcÚCu¼’tCh¬CouÁ
 = 0;

29 
	gcÚBackS·ûDown
 = 0;

30 
boŞ
 
	gcÚCursÜIsOn
 = 
Œue
;

31 
	gcÚCursÜCouÁ
 = 0;

32 
	gcÚS¹Y
;

33 
	gcÚBackS·ûD–ay
;

34 
	gcÚHi¡ÜyPŒ
 = 0;

35 
ALLEGRO_COLOR
 
	gcu¼’tCÚLšeCŞÜ
;

40 
	$cÚ_addCÚsŞeCommªds
()

43 
	`cÚ_addCommªd
("h–p", "Li¡ ouˆavaabË commªds", (
Ex‹ºFunc
)
sys_cÚCommªdH–p
);

44 
	`cÚ_addCommªd
("te£t", "S‘‚ew£t", (
Ex‹ºFunc
)
io_£tTeS‘Ty³
);

45 
	`cÚ_addCommªd
("tecŞÜ", "S‘‚ewcŞÜ", (
Ex‹ºFunc
)
io_£tTeS‘CŞÜ
);

46 
	`cÚ_addCommªd
("imageInfo", "Li¡ infØabouˆimages", (
Ex‹ºFunc
)
sys_cÚImageInfo
);

47 
	`cÚ_addCommªd
("soundInfo", "Li¡ infØabouˆsounds", (
Ex‹ºFunc
)
sys_cÚSoundInfo
);

48 
	`cÚ_addCommªd
("sütRe¡¬t", "Re¡¬ˆthsüˆ’gše", (
Ex‹ºFunc
)
cÚ_sütEngšeRe¡¬t
);

49 
	`cÚ_addCommªd
("showNumH—lšg", "Di¥Ïy‚umb” h—lšges", (
Ex‹ºFunc
)
sys_cÚShowNumH—lšgTes
);

50 
	`cÚ_addCommªd
("li¡V¬s", "Li¡ƒd™abË v¬ŸbËs", (
Ex‹ºFunc
)
sys_cÚLi¡V¬ŸbËs
);

51 
	`cÚ_addCommªd
("£tV¬", "S‘‡ v¬ŸbË", (
Ex‹ºFunc
)
sys_cÚS‘V¬ŸbË
);

52 
	`cÚ_addCommªd
("g‘V¬", "G‘‡ v¬ŸbË", (
Ex‹ºFunc
)
sys_cÚG‘V¬ŸbË
);

53 
	`cÚ_addCommªd
("debugDroids", "Show droid sts", (
Ex‹ºFunc
)
sys_debugDroidSts
);

54 
	`cÚ_addCommªd
("debugASr", "Which droidØdebug", (
Ex‹ºFunc
)
sys_£tASrDebugIndex
);

55 
	`cÚ_addCommªd
("debugP¬tişes", "Show…¬tişe šfo", (
Ex‹ºFunc
)
sys_debugP¬tişes
);

56 
	`cÚ_addCommªd
("debugP©h", "Show…©hfšdšg info", (
Ex‹ºFunc
)
sys_debugP©hFšdšg
);

57 
	}
}

62 
	$cÚ_com¶‘eCommªd
(
¡ršg
 
lookFÜ
)

65 
¡ršg
 
lookFÜK“p
;

67 
lookFÜK“p
 = 
lookFÜ
;

70 
i
 = 0; i !ğ
cÚCu¼’tNumCommªds
; i++)

72 ià(
cÚCommªds
[
i
].
commªd
.
	`fšd
(
lookFÜ
, 0è!ğ
¡ršg
::
Åos
)

74 
	`cÚ_´št
 (
çl£
, 
Œue
, "[ % ]", 
cÚCommªds
[
i
].
commªd
.
	`c_¡r
());

76 
cÚCu¼’tLše
.
cÚLše
 = "";

78 
cÚCu¼’tLše
.
cÚLše
 = 
cÚCommªds
[
i
].
commªd
;

80 
cÚCu¼’tCh¬CouÁ
 = 
cÚCommªds
[
i
].
commªd
.
	`Ëngth
();

83 
	}
}

88 
	$cÚ_´oûssBack¥aûKey
(
äameIÁ”v®
)

91 
_cÚLše
 
cÚTempLše
;

94 ià(1 =ğ
cÚBackS·ûDown
)

96 
cÚBackS·ûD–ay
 +ğ30.0à* 
thškIÁ”v®
;

97 ià(
cÚBackS·ûD–ay
 > 1.0f)

99 ià(
cÚCu¼’tCh¬CouÁ
 > 0)

100 
cÚCu¼’tCh¬CouÁ
--;

101 
cÚBackS·ûD–ay
 = 0.0f;

103 
cÚTempLše
.
cÚLše
 = 
cÚCu¼’tLše
.cÚLše.
	`sub¡r
(0, 
cÚCu¼’tCh¬CouÁ
);

104 
cÚCu¼’tLše
.
cÚLše
 = 
cÚTempLše
.conLine;

107 
	}
}

112 
	$cÚ_´oûssCursÜ
(
äameIÁ”v®
)

115 
cÚCursÜCouÁ
 +ğ()(15.0à* 
äameIÁ”v®
);

116 ià(
cÚCursÜCouÁ
 > 1.0f)

118 
cÚCursÜCouÁ
 = 0;

119 ià(
çl£
 =ğ
cÚCursÜIsOn
)

120 
cÚCursÜIsOn
 = 
Œue
;

122 
cÚCursÜIsOn
 = 
çl£
;

124 
	}
}

129 
	$cÚ_pİHi¡ÜyCommªd
()

132 
cÚCu¼’tLše
.
cÚLše
 = 
cÚP»vCommªds
[
cÚHi¡ÜyPŒ
].conLine;

133 
cÚCu¼’tCh¬CouÁ
 = 
cÚP»vCommªds
[
cÚHi¡ÜyPŒ
].
cÚLše
.
	`Ëngth
();

134 
	}
}

139 
	$cÚ_addHi¡ÜyCommªd
(
¡ršg
 
commªd
)

142 
cÚNumInHi¡Üy
++;

143 ià(
cÚNumInHi¡Üy
 > 
NUM_MAX_CON_COMMANDS
)

144 
cÚNumInHi¡Üy
 = 
NUM_MAX_CON_COMMANDS
;

146 
i
 = 
NUM_MAX_CON_COMMANDS
 - 1; i != 0; i--)

148 
cÚP»vCommªds
[
i
].
cÚLše
 = conPrevCommands[i - 1].conLine;

150 
cÚP»vCommªds
[0].
cÚLše
 = 
commªd
;

151 
cÚHi¡ÜyPŒ
 = 0;

152 
	}
}

157 
boŞ
 
	$cÚ_addCommªd
(
¡ršg
 
commªd
, sŒšg 
u§ge
, 
Ex‹ºFunc
 
funùiÚPŒ
)

160 
_cÚCommªd
 
‹mpCÚCommªd
;

165 ià(0 =ğ
commªd
.
	`Ëngth
())

166  
çl£
;

168 ià(0 =ğ
u§ge
.
	`Ëngth
())

169 
u§ge
 = "";

174 
‹mpCÚCommªd
.
commªd
 = command;

175 
‹mpCÚCommªd
.
u§ge
 = usage;

176 
‹mpCÚCommªd
.
cÚFunc
 = 
funùiÚPŒ
;

177 
‹mpCÚCommªd
.
ty³
 = 
CON_COMMAND_HOST
;

179 
cÚCommªds
.
	`push_back
(
‹mpCÚCommªd
);

181 
cÚCu¼’tNumCommªds
++;

183  
Œue
;

184 
	}
}

189 
	$cÚ_š™CÚsŞe
()

192 
i
;

194 
i
 = 0; i < 
NUM_CON_LINES
; i++)

197 
cÚLšes
[
i
].
cÚLše
 = "";

198 
cÚLšes
[
i
].
cÚLšeCŞÜ
.
r
 = 1.0f;

199 
cÚLšes
[
i
].
cÚLšeCŞÜ
.
g
 = 1.0f;

200 
cÚLšes
[
i
].
cÚLšeCŞÜ
.
b
 = 1.0f;

201 
cÚLšes
[
i
].
cÚLšeCŞÜ
.
a
 = 1.0f;

204 
cu¼’tCÚLšeCŞÜ
.
r
 = 1.0f;

205 
cu¼’tCÚLšeCŞÜ
.
g
 = 1.0f;

206 
cu¼’tCÚLšeCŞÜ
.
b
 = 1.0f;

207 
cu¼’tCÚLšeCŞÜ
.
a
 = 1.0f;

209 
i
 = 
NUM_MAX_CON_COMMANDS
 - 1; i != 0; i--)

210 
cÚP»vCommªds
[
i
].
cÚLše
 = "";

212 
cÚHi¡ÜyPŒ
 = 0;

213 
cÚNumInHi¡Üy
 = 0;

216 
cÚCu¼’tProm±
.
cÚLše
 = "]_";

217 
cÚCu¼’tLše
.
cÚLše
 = "";

219 
cÚCu¼’tCh¬CouÁ
 = 0;

221 
	`cÚ_addCÚsŞeCommªds
();

222 
	}
}

228 
	$cÚ_šcLše
(
¡ršg
 
ÃwLše
)

231 
i
;

233 
i
 = 
NUM_CON_LINES
 - 1; i != 0; i--)

235 
cÚLšes
[
i
].
cÚLše
 = conLines[i - 1].conLine;

236 
cÚLšes
[
i
].
cÚLšeCŞÜ
 = conLines[i - 1].conLineColor;

238 
cÚLšes
[0].
cÚLše
 = 
ÃwLše
;

239 
cÚLšes
[0].
cÚLšeCŞÜ
 = 
cu¼’tCÚLšeCŞÜ
;

240 
	}
}

245 
	$cÚ_´št
(
boŞ
 
logToFe
, boŞ 
upd©eNow
, cÚ¡ *
fÜm©
, ...)

248 
va_li¡
 
¬gs
;

249 
logText
[
MAX_STRING_SIZE
];

253 
	`va_¡¬t
(
¬gs
, 
fÜm©
);

254 
	`v¢´štf
(
logText
, 
MAX_STRING_SIZE
, 
fÜm©
, 
¬gs
);

255 
	`va_’d
(
¬gs
);

257 ià(
Œue
 =ğ
logToFe
)

258 
	`io_logToFe
("%s", 
logText
);

260 
	`cÚ_šcLše
(
logText
);

262 ià(
Œue
 =ğ
upd©eNow
)

263 
	`cÚ_d¿wSü“n
(
Œue
, 
thškIÁ”v®
);

265 
	}
}

270 
	$sys_sütPrštIÁ
(
¡ršg
 *
msgText
, *
štP¬am
)

273 
	`cÚ_´št
 (
Œue
,rue, "[ % ] [ %˜]", 
msgText
->
	`c_¡r
(), 
štP¬am
);

274 
	}
}

279 
	$sys_sütPrštSŒ
(
¡ršg
 *
msgText
, sŒšg *
msgP¬am
)

282 
	`cÚ_´št
 (
Œue
,rue, "[ % ] [ % ]", 
msgText
->
	`c_¡r
(), 
msgP¬am
->c_str());

283 
	}
}

289 
	$cÚ_´oûssCommªd
(
¡ršg
 
comLše
)

292 
i
;

293 
veùÜ
<
¡ršg
> 
tok’s
;

294 
¡ršg
 
bufãr
;

296 
¡ršg
 
commªd
;

297 
¡ršg
 
·¿m
;

298 
¡ršg
 
·¿m2
;

299 
boŞ
 
cÚM©chFound
 = 
çl£
;

302 
commªd
 = "";

303 
·¿m
 = "";

308 
i¡ršg¡»am
 
	`iss
(
comLše
, i¡ršg¡»am::
š
);

311 
iss
 >> 
bufãr
)

313 
tok’s
.
	`push_back
(
bufãr
);

315 
commªd
 = 
tok’s
[0];

318 ià(
tok’s
.
	`size
() > 1)

319 
·¿m
 = 
tok’s
[1];

321 
·¿m
 = "";

323 ià(
tok’s
.
	`size
() > 2)

324 
·¿m2
 = 
tok’s
[2];

326 
·¿m2
 = "";

329 
i
 = 0; i !ğ
cÚCu¼’tNumCommªds
; i++)

331 ià(
cÚCommªds
[
i
].
commªd
 == command)

333 
	`cÚ_addHi¡ÜyCommªd
(
comLše
);

334 
	`cÚ_šcLše
(
comLše
);

335 ià(
CON_COMMAND_HOST
 =ğ
cÚCommªds
[
i
].
ty³
)

336 
cÚCommªds
[
i
].
	`cÚFunc
(
·¿m
, 
·¿m2
);

339 
	`cÚ_´št
(
Œue
,rue, "M©chšg [ % ]ØruÀ[ % %s]", 
cÚCommªds
[
i
].
commªd
.
	`c_¡r
(), cÚCommªds[i].
sütFunc
.c_¡r(), 
·¿m
.c_str());

340 
	`sys_execu‹SütFunùiÚ
(
cÚCommªds
[
i
].
commªd
, 
·¿m
);

343 
cÚM©chFound
 = 
Œue
;

348 ià(
çl£
 =ğ
cÚM©chFound
)

349 
	`cÚ_´št
(
çl£
, 
Œue
, "Commªd [ % ]‚Ù found.", 
comLše
.
	`c_¡r
());

353 
cÚCu¼’tLše
.
cÚLše
 = "";

355 
cÚCu¼’tCh¬CouÁ
 = 0;

356 
	}
}

361 
	$cÚ_´štUpd©e
 (
boŞ
 
feLog
, cÚ¡ *
´štText
, ...)

364 
va_li¡
 
¬gs
;

365 
cÚText
[
MAX_STRING_SIZE
];

369 
	`va_¡¬t
(
¬gs
, 
´štText
);

370 
	`v¢´štf
(
cÚText
, 
MAX_STRING_SIZE
, 
´štText
, 
¬gs
);

371 
	`va_’d
(
¬gs
);

373 
	`cÚ_šcLše
(
cÚText
);

375 ià(
Œue
 =ğ
feLog
)

376 
	`io_logToFe
 ("%s", 
cÚText
);

377 
	}
}

382 
	$cÚ_£tCŞÜ
 (
»d
, 
g»’
, 
blue
, 
®pha
)

385 
cu¼’tCÚLšeCŞÜ
.
r
 = 
»d
;

386 
cu¼’tCÚLšeCŞÜ
.
g
 = 
g»’
;

387 
cu¼’tCÚLšeCŞÜ
.
b
 = 
blue
;

388 
cu¼’tCÚLšeCŞÜ
.
a
 = 
®pha
;

389 
	}
}

394 
	$cÚ_d¿wSü“n
(
boŞ
 
upd©eNow
, 
äameIÁ”v®
)

397 
_cÚLše
 
cÚTempLše
;

399 ià(
NULL
 =ğ
butInFÚt
)

402 
cÚS¹Y
 = 
wšHeight
 - (
CON_FONTSIZE
);

404 ià(
Œue
 =ğ
upd©eNow
)

406 
	`®_ş—r_to_cŞÜ
 (
	`®_m­_rgb
 (0,0,0) );

409 ià(
Œue
 =ğ
u£HŞdB™m­
)

410 
	`®_hŞd_b™m­_d¿wšg
(
Œue
);

412 
	`sys_£tFÚt
(
FONT_MEDIUM
);

413 
	`sys_£tFÚtCŞÜ
(1.0f, 1.0f, 1.0f, 1.0f);

415 
i
 = 0; i < 
wšHeight
 / 
CON_FONTSIZE
; i++)

417 ià(
çl£
 =ğ
fÚt
[
cu¼’tFÚt
].
v®id
)

418 
	`®_d¿w_‹xtf
 (
butInFÚt
, 
cÚLšes
[
i
].
cÚLšeCŞÜ
, 2.0f, (
cÚS¹Y
 - ((˜* 
CON_FONTSIZE
è+ CON_FONTSIZE)), 
ALLEGRO_ALIGN_LEFT
, "%s", cÚLšes[i].
cÚLše
.
	`c_¡r
());

420 
	`®_d¿w_‹xtf
 (
fÚt
[
cu¼’tFÚt
].
‰fFÚt
, 
cÚLšes
[
i
].
cÚLšeCŞÜ
, 2.0f, (
cÚS¹Y
 - ((˜* 
CON_FONTSIZE
è+ CON_FONTSIZE)), 
ALLEGRO_ALIGN_LEFT
, "%s", cÚLšes[i].
cÚLše
.
	`c_¡r
());

423 ià(
Œue
 =ğ
u£HŞdB™m­
)

424 
	`®_hŞd_b™m­_d¿wšg
(
çl£
);

426 ià(
Œue
 =ğ
upd©eNow
)

428 
	`®_æ_di¥Ïy
();

431 ià(
çl£
 =ğ
upd©eNow
)

433 
cÚTempLše
.
cÚLše
 = 
cÚCu¼’tLše
.conLine;

434 ià(
Œue
 =ğ
cÚCursÜIsOn
)

435 
cÚTempLše
.
cÚLše
 += "_";

437 
cÚTempLše
.
cÚLše
 += " ";

439 ià(
çl£
 =ğ
fÚt
[
cu¼’tFÚt
].
v®id
)

440 
	`®_d¿w_‹xtf
 (
butInFÚt
, 
cÚLšes
[0].
cÚLšeCŞÜ
, 1.0f, ()(
wšHeight
 - (
CON_FONTSIZE
)), 
ALLEGRO_ALIGN_LEFT
, "%s", 
cÚTempLše
.
cÚLše
.
	`c_¡r
());

442 
	`®_d¿w_‹xtf
 (
fÚt
[
cu¼’tFÚt
].
‰fFÚt
, 
cÚLšes
[0].
cÚLšeCŞÜ
, 1.0f, ()(
wšHeight
 - (
CON_FONTSIZE
)), 
ALLEGRO_ALIGN_LEFT
, "%s", 
cÚTempLše
.
cÚLše
.
	`c_¡r
());

444 
	}
}

449 
	$cÚ_addSütCommªd
(
¡ršg
 
commªd
, sŒšg 
u§ge
, sŒšg 
funcPŒ
, 
boŞ
 
£tP¬am
)

452 
_cÚCommªd
 
‹mpCÚCommªd
;

454 
‹mpCÚCommªd
.
ty³
 = 
CON_COMMAND_SCRIPT
;

455 
‹mpCÚCommªd
.
commªd
 = command;

456 
‹mpCÚCommªd
.
u§ge
 = usage;

457 
‹mpCÚCommªd
.
sütFunc
 = 
funcPŒ
;

459 
cÚCommªds
.
	`push_back
(
‹mpCÚCommªd
);

460 
	`sys_addSütCÚsŞeFunùiÚ
(
cÚCommªds
.
	`back
().
commªd
, cÚCommªds.back().
sütFunc
, 
£tP¬am
);

461 
cÚCu¼’tNumCommªds
++;

462 
	}
}

	@../src/system/sys_debug.cpp

1 
	~"../../hdr/sys_glob®s.h
"

2 
	~"../../hdr/game/gam_Œªsãr.h
"

4 
	gdebugCu¼’tCœcu™Ty³
 = -1;

5 
	gLOSTimeS¹
;

6 
	gLOSTimeStİ
;

7 
	gdebugASrIndex
 = 0;

12 *
	$sys_g‘AISŒšg
(
ai_cu¼’tS‹
)

15 
ai_cu¼’tS‹
)

17 
AI_STATE_HEALTH
:

21 
AI_STATE_PATROL
:

25 
	}
}

30 
	$sys_debugDroidSts
()

33 
	`cÚ_´št
(
Œue
, 
çl£
, "Lev– [ %˜] Droid ®iv[ %˜]", 
cu¼’tLev–
, 
shLev–
[cu¼’tLev–].
numEÃm›sAlive
);

34 
i
 = 0; i !ğ
shLev–
[
cu¼’tLev–
].
numDroids
; i++)

36 ià(
Œue
 =ğ
shLev–
[
cu¼’tLev–
].
droid
[
i
].
isAlive
)

38 
	`cÚ_´št
(
Œue
, 
çl£
, "Ty³ [ % ]", 
d©aBa£EÁry
[
shLev–
[
cu¼’tLev–
].
droid
[
i
].
droidTy³
].
desütiÚ
);

39 
	`cÚ_´št
(
Œue
, 
çl£
, "Droid [ %˜] CŞlisiÚ ignÜCouÁ [ %3.2à] CŞlidCouÁ [ %˜]", 
i
, 
shLev–
[
cu¼’tLev–
].
droid
[i].
ignÜeCŞlisiÚsCouÁ”
, shLev–[cu¼’tLev–].droid[i].
cŞlisiÚCouÁ
);

40 
	`cÚ_´št
(
Œue
, 
çl£
, "H—Éh [ %˜] S³ed [ %3.3à]", 
shLev–
[
cu¼’tLev–
].
droid
[
i
].
cu¼’tH—Éh
, shLev–[cu¼’tLev–].droid[i].
cu¼’tS³ed
);

41 
	`cÚ_´št
(
Œue
, 
çl£
, "AI_S‹ [ % ] CŞlided [ % ] IgnÜCŞlid[ % ]", 
	`sys_g‘AISŒšg
(
shLev–
[
cu¼’tLev–
].
droid
[
i
].
ai_cu¼’tS‹
), shLev–[cu¼’tLev–].droid[i].
hasCŞlided
 =ğŒu? "True" : "F®£", shLev–[cu¼’tLev–].droid[i].
ignÜeCŞlisiÚs
 ==rue ? "True" : "False");

42 
	`cÚ_´št
(
Œue
, 
çl£
, "------------------------");

45 
	}
}

50 
	$sys_di¥ÏySü“nMiddË
()

53 
ALLEGRO_COLOR
 
lšeCŞÜ
;

54 
ıVeù
 
lšeS¹
, 
lšeEnd
;

56 
lšeCŞÜ
 = 
	`®_m­_rgb
(255,255,255);

58 
lšeS¹
.
x
 = 
wšWidth
 / 2;

59 
lšeS¹
.
y
 = 0;

60 
lšeEnd
.
x
 = 
wšWidth
 / 2;

61 
lšeEnd
.
y
 = 
wšHeight
;

63 
	`®_d¿w_lše
(
lšeS¹
.
x
,†šeS¹.
y
, 
lšeEnd
.x,†šeEnd.y, 
lšeCŞÜ
, 2);

65 
lšeS¹
.
x
 = 0;

66 
lšeS¹
.
y
 = 
wšHeight
 / 2;

67 
lšeEnd
.
x
 = 
wšWidth
;

68 
lšeEnd
.
y
 = 
wšHeight
 / 2;

70 
	`®_d¿w_lše
(
lšeS¹
.
x
,†šeS¹.
y
, 
lšeEnd
.x,†šeEnd.y, 
lšeCŞÜ
, 2);

71 
	}
}

76 
	$sys_di¥ÏyDebug
()

79 
	`sys_´štSŒšgExt
(
wšWidth
 - 110, 75, "FPS : %i", 
åsPršt
);

81 
	`®_d¿w_‹xtf
(
butInFÚt
, 
	`®_m­_rgb_f
(1.0f, 1.0f, 1.0f), 1.0f, 
wšHeight
 - 50, 
ALLEGRO_ALIGN_LEFT
, "T[ %˜] wÜldPos™iÚ [ %3.3à] [ %3.3à]", 
¶ay”Ov”Te
, 
¶ay”WÜldPos
.
x
,…Ïy”WÜldPos.
y
);

82 
	`®_d¿w_‹xtf
(
butInFÚt
, 
	`®_m­_rgb_f
(1.0f, 1.0f, 1.0f), 1.0f, 
wšHeight
 - 40, 
ALLEGRO_ALIGN_LEFT
, "tePosX [ %˜]ePosY [ %˜] Pix– [ %3.3à%3.3à]", 
tePosX
, 
tePosY
, 
pix–X
, 
pix–Y
);

83 
	`®_d¿w_‹xtf
(
butInFÚt
, 
	`®_m­_rgb_f
(1.0f, 1.0f, 1.0f), 1.0f, 
wšHeight
 - 30, 
ALLEGRO_ALIGN_LEFT
, "LOSimšg [ %3.5à]", 
LOSTimeStİ
 - 
LOSTimeS¹
);

84 
	`®_d¿w_‹xtf
(
butInFÚt
, 
	`®_m­_rgb_f
(1.0f, 1.0f, 1.0f), 1.0f, 
wšHeight
 - 20, 
ALLEGRO_ALIGN_LEFT
, "FPS [ %˜] Thšk [ %˜]", 
åsPršt
, 
thškFpsPršt
);

85 
	`®_d¿w_‹xtf
(
butInFÚt
, 
	`®_m­_rgb_f
(1.0f, 1.0f, 1.0f), 1.0f, 
wšHeight
 - 10, 
ALLEGRO_ALIGN_LEFT
, "T[ %˜] FPS [ %˜] C®c Sk³d [ %˜] D¿wÀ[ %˜] Tim[ %2.6à]", 
teCŞlisiÚ
, 
åsPršt
, 
´ofeTeC®cSk³d
, 
´ofeTÙ®TeD¿wn
, 
´ofeTimeEnd
 - 
´ofeTimeS¹
);

86 
	}
}

91 
	$gam_debugShowDe¡š©iÚ
()

94 
ıVeù
 
¡¬tLše
;

95 
ıVeù
 
’dLše
;

97 
i
 = 0; i !ğ
shLev–
[
cu¼’tLev–
].
numDroids
; i++)

99 ià(
shLev–
[
cu¼’tLev–
].
droid
[
i
].
isAlive
 =ğ
Œue
)

101 
¡¬tLše
 = 
shLev–
[
cu¼’tLev–
].
droid
[
i
].
wÜldPosMiddË
;

102 
’dLše
 = 
shLev–
[
cu¼’tLev–
].
droid
[
i
].
de¡š©iÚCoÜds
;

104 
¡¬tLše
 = 
	`sys_wÜldToSü“n
(startLine, 100);

105 
’dLše
 = 
	`sys_wÜldToSü“n
(endLine, 100);

107 
	`®_d¿w_lše
(
¡¬tLše
.
x
, s¹Lše.
y
, 
’dLše
.x,ƒndLše.y, 
	`®_m­_rgb_f
(0.0f, 0.0f, 1.0f), 2);

110 
	}
}

115 
	$gam_debugShowWaypošts
()

118 
ıVeù
 
sü“nPosS¹
;

119 
ıVeù
 
sü“nPosEnd
;

121 
i
 = 0; i < 
shLev–
[
cu¼’tLev–
].
numWaypošts
; i++)

124 
sü“nPosS¹
.
x
 = 
shLev–
[
cu¼’tLev–
].
wayPošts
[
i
].x;

125 
sü“nPosS¹
.
y
 = 
shLev–
[
cu¼’tLev–
].
wayPošts
[
i
].y;

126 
sü“nPosS¹
 = 
	`sys_wÜldToSü“n
(screenPosStart, 100);

127 
i
++;

128 
sü“nPosEnd
.
x
 = 
shLev–
[
cu¼’tLev–
].
wayPošts
[
i
].x;

129 
sü“nPosEnd
.
y
 = 
shLev–
[
cu¼’tLev–
].
wayPošts
[
i
].y;

130 
sü“nPosEnd
 = 
	`sys_wÜldToSü“n
(screenPosEnd, 100);

132 if(
i
 =ğ
shLev–
[
cu¼’tLev–
].
numWaypošts
)

134 
sü“nPosEnd
.
x
 = 
shLev–
[
cu¼’tLev–
].
wayPošts
[0].x;

135 
sü“nPosEnd
.
y
 = 
shLev–
[
cu¼’tLev–
].
wayPošts
[0].y;

136 
sü“nPosEnd
 = 
	`sys_wÜldToSü“n
(screenPosEnd, 100);

139 
i
--;

141 
	`®_d¿w_lše
(
sü“nPosS¹
.
x
, sü“nPosS¹.
y
, 
sü“nPosEnd
.x, sü“nPosEnd.y, 
	`®_m­_rgb_f
(1.0f, 0.0f, 1.0f), 2);

144 
sü“nPosEnd
.
x
 = 
shLev–
[
cu¼’tLev–
].
wayPošts
[shLev–[cu¼’tLev–].
numWaypošts
].x;

145 
sü“nPosEnd
.
y
 = 
shLev–
[
cu¼’tLev–
].
wayPošts
[shLev–[cu¼’tLev–].
numWaypošts
].y;

146 
sü“nPosEnd
 = 
	`sys_wÜldToSü“n
(screenPosEnd, 100);

148 
sü“nPosS¹
.
x
 = 
shLev–
[
cu¼’tLev–
].
wayPošts
[0].x;

149 
sü“nPosS¹
.
y
 = 
shLev–
[
cu¼’tLev–
].
wayPošts
[0].y;

150 
sü“nPosS¹
 = 
	`sys_wÜldToSü“n
(screenPosStart, 100);

153 
	}
}

	@../src/system/sys_font.cpp

1 
	~"../../hdr/sys_glob®s.h
"

3 
ALLEGRO_COLOR
 
	gfÚtCŞÜ
;

5 
_fÚt
 
	gfÚt
[
NUM_FONTS
];

6 
	gcu¼’tFÚt
;

11 
	$sys_£tFÚtCŞÜ
(
r
, 
g
, 
b
, 
a
)

14 
fÚtCŞÜ
 = 
	`®_m­_rgba_f
(
r
, 
g
, 
b
, 
a
);

15 
	}
}

20 
	$sys_š™TTFSy¡em
()

23 
i
 = 0; i !ğ
NUM_FONTS
; i++)

25 
fÚt
[
i
].
v®id
 = 
çl£
;

26 
fÚt
[
i
].
‰fFÚt
 = 
NULL
;

27 
	`¡rıy
(
fÚt
[
i
].
feName
, "");

29 
	}
}

34 
boŞ
 
	$io_lßd‰fFÚt
(
fÚtIndex
, 
fÚtSize
, 
¡ršg
 
fÚtName
)

37 
	`¡rıy
(
fÚt
[
fÚtIndex
].
feName
, 
fÚtName
.
	`c_¡r
());

39 
fÚt
[
fÚtIndex
].
‰fFÚt
 = 
	`®_lßd_‰f_fÚt
(fÚt[fÚtIndex].
feName
, 
fÚtSize
, 0);

40 ià(
NULL
 =ğ
fÚt
[
fÚtIndex
].
‰fFÚt
)

42 
	`io_logToFe
("E¼Ü: FÚˆ[ % ]‚Ù found", 
fÚt
[
fÚtIndex
].
feName
);

43 
fÚt
[
fÚtIndex
].
v®id
 = 
çl£
;

45 
fÚt
[
fÚtIndex
].
v®id
 = 
Œue
;

46 
fÚt
[
fÚtIndex
].
fÚtSize
 = fontSize;

47 
	}
}

52 
	$sys_£tFÚt
(
ÃwFÚt
)

55 
cu¼’tFÚt
 = 
ÃwFÚt
;

56 
	}
}

63 
	$sys_´štSŒšg
(
posX
, 
posY
, 
¡ršg
 
‹xtIn
)

66 ià(
çl£
 =ğ
fÚt
[
cu¼’tFÚt
].
v®id
)

67 
	`®_d¿w_‹xtf
 (
butInFÚt
, 
fÚtCŞÜ
, 
posX
, 
posY
, 
ALLEGRO_ALIGN_LEFT
, "%s", 
‹xtIn
.
	`c_¡r
());

69 
	`®_d¿w_‹xtf
 (
fÚt
[
cu¼’tFÚt
].
‰fFÚt
, 
fÚtCŞÜ
, 
posX
, 
posY
, 
ALLEGRO_ALIGN_LEFT
, "%s", 
‹xtIn
.
	`c_¡r
());

70 
	}
}

75 
	$sys_´štSŒšgExt
(
posX
, 
posY
, cÚ¡ *
fÜm©
, ...)

79 
va_li¡
 
¬gs
;

80 
¡ršgText
[
MAX_STRING_SIZE
];

84 
	`va_¡¬t
(
¬gs
, 
fÜm©
);

85 
	`v¢´štf
(
¡ršgText
, 
MAX_STRING_SIZE
, 
fÜm©
, 
¬gs
);

86 
	`va_’d
(
¬gs
);

88 
	`sys_´štSŒšg
(
posX
, 
posY
, 
¡ršgText
);

89 
	}
}

	@../src/system/sys_frame.cpp

1 
	~"../../hdr/sys_glob®s.h
"

2 
	~"../../hdr/game/gam_Œªsãr.h
"

3 
	~"../../hdr/sy¡em/sys_sound.h
"

4 
	~"../../hdr/game/gam_‹rmš®.h
"

6 
	gcu¼’tMode
;

7 
	gtimeR’d”F¿me
;

9 
	glßdšgB¬P”ûÁ
;

10 
	glßdšgStus
[
MAX_STRING_SIZE
];

12 
boŞ
 
	ggamePau£d
 = 
çl£
;

14 
	g¥ÏshCouÁ”
 = 5.0f;

19 
	$sys_di¥ÏyLßdšgSü“n
()

22 
»ùWidth
, 
»ùHeight
;

23 
ıVeù
 
»ùTİLeá
, 
»ùBÙRight
;

25 
b¬Width
, 
b¬Height
, 
b¬Fl
;

26 
ıVeù
 
b¬TİLeá
, 
b¬BÙRight
;

27 
ıVeù
 
flTİLeá
, 
flBÙRight
;

29 
»ùWidth
 = 
wšWidth
 * 0.75;

30 
»ùHeight
 = 
wšHeight
 * 0.25;

32 
»ùTİLeá
.
x
 = (
wšWidth
 - 
»ùWidth
) / 2;

33 
»ùTİLeá
.
y
 = (
wšHeight
 - 
»ùHeight
) / 2;

35 
»ùBÙRight
.
x
 = 
»ùTİLeá
.x + 
»ùWidth
;

36 
»ùBÙRight
.
y
 = 
»ùTİLeá
.y + 
»ùHeight
;

38 
b¬Width
 = 
»ùWidth
 * 0.75;

39 
b¬Height
 = 
»ùHeight
 * 0.25;

41 
b¬TİLeá
.
x
 = ((
»ùWidth
 - 
b¬Width
è/ 2è+ 
»ùTİLeá
.x;

42 
b¬TİLeá
.
y
 = ((
»ùHeight
 - 
b¬Height
è/ 2è+ 
»ùTİLeá
.y;

44 
b¬BÙRight
.
x
 = 
b¬TİLeá
.x + 
b¬Width
;

45 
b¬BÙRight
.
y
 = 
b¬TİLeá
.y + 
b¬Height
;

48 
b¬Fl
 = 
lßdšgB¬P”ûÁ
 * 
b¬Width
;

50 
flTİLeá
 = 
b¬TİLeá
;

51 
flBÙRight
.
x
 = 
b¬TİLeá
.x + 
b¬Fl
;

52 
flBÙRight
.
y
 = 
b¬TİLeá
.y + 
b¬Height
;

54 
	`®_d¿w_fËd_rounded_»ùªgË
(
»ùTİLeá
.
x
,„eùTİLeá.
y
, 
»ùBÙRight
.x,„eùBÙRight.y, 5.0f, 5.0f, 
	`®_m­_rgb_f
(0.2, 0.2, 0.2));

55 
	`®_d¿w_rounded_»ùªgË
(
b¬TİLeá
.
x
, b¬TİLeá.
y
, 
b¬BÙRight
.x, b¬BÙRight.y, 5.0f, 5.0f, 
	`®_m­_rgb_f
(1.0, 1.0, 1.0), 2.0f);

56 
	`®_d¿w_fËd_rounded_»ùªgË
(
flTİLeá
.
x
, flTİLeá.
y
, 
flBÙRight
.x, flBÙRight.y, 5.0f, 5.0f, 
	`®_m­_rgb_f
(1.0, 0.2, 0.2));

58 
	`®_d¿w_‹xtf
(
butInFÚt
, 
	`®_m­_rgb_f
(1.0f, 1.0f, 1.0f), 
»ùTİLeá
.
x
 + 2.0f,„eùTİLeá.
y
 + 2.0f, 
ALLEGRO_ALIGN_LEFT
, "Lßdšg : [ % ]", 
lßdšgStus
);

59 
	}
}

66 
	$sys_di¥ÏyF¿me
(
š‹½Ş©iÚ
)

69 
šŒoBlockOut
 = 60.0f;

71 
timeR’d”F¿me
 = 
	`®_g‘_time
();

73 if(
Œue
 =ğ
u£BackšgB™m­
)

75 
	`®_£t_rg‘_b™m­
(
b™m­FBO
);

78 
	`®_ş—r_to_cŞÜ
(
	`®_m­_rgb
(0,0,0));

80 
cu¼’tMode
)

82 
MODE_LOADING
:

83 
	`cÚ_d¿wSü“n
(
çl£
, 
š‹½Ş©iÚ
);

84 
	`sys_di¥ÏyLßdšgSü“n
();

86 if(
Œue
 =ğ
¡İLßdšgTh»ad
)

88 
	`®_£t_th»ad_should_¡İ
(
lßdšgTh»ad
);

93 if(
Œue
 =ğ
lßdedAÎB™m­s
)

95 
	`io_cÚv”tImages
();

96 
lßdedAÎB™m­s
 = 
çl£
;

97 
	`sys_execu‹SütFunùiÚ
("as_setDefaultTileSet", "");

100 if((
Œue
 =ğ
lßdšgTh»adHasFšished
è&& (
çl£
 =ğ
´oûssFadeV®ue
))

102 
	`´štf
("Wa™šg fÜ†ßdšgh»adØfšish - [ %˜]\n", 
lßdšgTh»adHasFšished
);

103 
	`sys_chªgeMode
(
MODE_SHOW_SPLASH
, 
Œue
);

104 
	`sys_execu‹SütFunùiÚ
("as_setDefaultTileSet", "");

109 
MODE_INTRO
:

110 
	`gam_di¥ÏyIÁroText
();

112 
	`gam_d¿wHud
();

113 
	`gui_d¿wRa¡”Lšes
();

114 
	`®_d¿w_fËd_»ùªgË
(0.0f, 
wšHeight
 - 
šŒoBlockOut
, 
wšWidth
, wšHeight, 
	`®_m­_rgba_f
(0.0f, 0.0f, 0.0f, 1.0f));

117 
MODE_GUI
:

118 
	`gam_d¿wHud
();

119 
	`gui_d¿wGUI
();

122 
MODE_CONSOLE
:

123 
	`cÚ_d¿wSü“n
(
çl£
, 
š‹½Ş©iÚ
);

126 
MODE_SHOW_SPLASH
:

127 
	`gam_d¿wImage
(
¥ÏshImg
, 0.0f, 0.0f, 
æagFuÎSü“n
);

130 
MODE_PAUSED
:

131 
	`gam_d¿wAÎTes
();

132 
	`·r_d¿wP¬tişes
();

133 
	`bul_d¿wBuÎ‘s
();

134 
	`gam_d¿wAÎDroids
(
cu¼’tLev–
);

135 
	`gam_d¿wSpÙLights
();

136 
	`gam_d¿wHud
();

139 
MODE_SHOWLEVEL
:

140 
	`gam_d¿wAÎTes
();

141 
	`·r_d¿wP¬tişes
();

142 
	`bul_d¿wBuÎ‘s
();

143 
	`gam_d¿wAÎDroids
(
cu¼’tLev–
);

144 
	`gam_d¿wSpÙLights
();

145 
	`gam_d¿wHud
();

159 
	`sys_di¥ÏyDebug
();

163 
	`gam_debugShowWaypošts
();

165 
	`sys_debugLšeSegm’ts
();

172 
MODE_LIFT_VIEW
:

173 
	`¡rıy
(
¡©usText
, "Lift");

174 
	`gam_d¿wSrf›ld
();

175 
	`gam_d¿wHud
();

176 
	`gam_d¿wSideV›w
();

179 
MODE_TERMINAL_SIDEVIEW
:

180 
	`gam_£tHUDS‹
(
HUD_STATE_SHIP_VIEW
);

181 
	`gam_d¿wSrf›ld
();

182 
	`gam_d¿wHud
();

183 
	`gam_d¿wSideV›w
();

184 
	`gui_d¿wRa¡”Lšes
();

187 
MODE_TERMINAL_DB
:

188 
	`gam_£tHUDS‹
(
HUD_STATE_DATABASE
);

189 
	`gam_d¿wDB_Droid
();

190 
	`gui_d¿wSüŞlBox
(&
d©aba£SüŞlBox
);

191 
	`gui_d¿wRa¡”Lšes
();

192 
	`gam_d¿wHud
();

193 
	`®_d¿w_fËd_»ùªgË
(0, 
wšHeight
 - 48.0f, 
wšWidth
, wšHeight, 
	`®_m­_rgba_f
(0.0, 0.0, 0.0, 1));

196 
MODE_TERMINAL_LEVEL
:

197 
	`gam_£tHUDS‹
(
HUD_STATE_DECK_VIEW
);

198 
	`gam_d¿wSrf›ld
();

199 
	`gam_d¿wHud
();

200 
	`‹rm_showCu¼’tLev–
();

201 
	`gui_d¿wRa¡”Lšes
();

204 
MODE_TRANSFER_INTRO
:

205 
MODE_TRANSFER_INTRO_1
:

206 
MODE_TRANSFER_INTRO_2
:

207 
MODE_TRANSFER_FINISH
:

208 
MODE_TRANSFER_START
:

209 
MODE_TRANSFER_COPY
:

210 
MODE_TRANSFER_DRAW
:

211 
MODE_TRANSFER_SELECT
:

212 
MODE_TRANSFER_SELECT_SIDE
:

213 
	`gam_d¿wHud
();

214 
	`Œn_d¿wT¿nsãrSü“n
();

216 
	`sys_di¥ÏyDebug
();

220 
timeR’d”F¿me
 = 
	`®_g‘_time
() -imeRenderFrame;

224 if(
Œue
 =ğ
u£BackšgB™m­
)

228 
	`®_£t_rg‘_backbufãr
(
di¥Ïy
);

229 
	`®_d¿w_b™m­
(
b™m­FBO
, 0.0f, 0.0f, 0);

233 if(
Œue
 =ğ
´oûssFadeV®ue
)

234 
	`®_d¿w_fËd_»ùªgË
(0.0f, 0.0f, 
wšWidth
, 
wšHeight
, 
	`®_m­_rgba_f
(0.0f, 0.0f, 0.0f, 
çdeV®ue
));

238 
	`®_æ_di¥Ïy
();

239 
	}
}

244 
	$sys_upd©eF¿me
()

249 
cu¼’tMode
)

251 
MODE_LOADING
:

254 
MODE_CONSOLE
:

256 
	`cÚ_´oûssCursÜ
(
thškIÁ”v®
);

257 
	`cÚ_´oûssBack¥aûKey
(
thškIÁ”v®
);

260 
MODE_SHOW_SPLASH
:

261 
¥ÏshCouÁ”
 -ğ1.0à* 
thškIÁ”v®
;

263 if(
¥ÏshCouÁ”
 < 0.0f)

265 
¥ÏshCouÁ”
 = 1.0f;

266 
	`sys_chªgeMode
(
MODE_INTRO
, 
Œue
);

267 
	`sys_¶aySound
(
SND_SCROLLBEEPS
, 
SND_PAN_CENTER
, 
ALLEGRO_PLAYMODE_LOOP
);

272 
MODE_INTRO
:

273 
	`gui_ªim©eRa¡”Lše
();

274 
	`gui_süŞlSüŞlBox
(&
šŒoSüŞlBox
);

277 
MODE_SHOWLEVEL
:

278 if(
çl£
 =ğ
gamePau£d
)

280 
	`gam_´oûssPÏy”Movem’t
(
thškIÁ”v®
);

281 
	`gam_upd©eSüŞlšgV¬s
(
çl£
);

282 
	`gam_doÜCheckTrigg”A»as
();

283 
	`gam_doÜProûssAùiÚs
();

284 
	`drd_´oûssDroidAI
(
cu¼’tLev–
);

285 
	`bul_´oûssBuÎ‘s
();

286 
	`gam_w—pÚRech¬gePÏy”
();

287 
	`gam_checkT¿nsãrSound
();

288 
	`gam_checkAË¹Lev–
();

289 
	`gam_checkPÏy”H—lšgTe
(
thškIÁ”v®
);

290 
	`·r_ªim©eP¬tişes
();

293 
	`gam_ªim©eSpÙLights
();

294 
	`gam_ªim©eH—lTes
(
cu¼’tLev–
);

295 
	`lvl_LOS
();

296 
	`gam_ªim©ePÏy”S´™e
(
thškIÁ”v®
);

297 
	`gam_´oûssScÜe
(
thškIÁ”v®
);

298 
	`drd_ş—rHadCŞlidedFÏg
();

299 
	`ıS·ûS‹p
(
¥aû
, 
SKIP_TICKS
);

302 
MODE_LIFT_VIEW
:

303 
	`gam_ªim©eSrF›ld
(
thškIÁ”v®
);

304 
	`sys_·u£SoundSy¡em
(
çl£
);

307 
MODE_TERMINAL_SIDEVIEW
:

308 
MODE_TERMINAL_LEVEL
:

309 
	`gam_ªim©eSrF›ld
(
thškIÁ”v®
);

310 
	`gui_ªim©eRa¡”Lše
();

313 
MODE_TERMINAL_DB
:

314 
	`gam_ªim©eDB_Droid
();

315 
	`gui_süŞlSüŞlBox
(&
d©aba£SüŞlBox
);

316 
	`gui_ªim©eRa¡”Lše
();

319 
MODE_GUI
:

320 
	`gui_ªim©eRa¡”Lše
();

321 
	`sys_·u£SoundSy¡em
(
çl£
);

324 
MODE_TRANSFER_INTRO
:

325 
MODE_TRANSFER_INTRO_1
:

326 
MODE_TRANSFER_INTRO_2
:

327 
MODE_TRANSFER_FINISH
:

328 
MODE_TRANSFER_START
:

329 
MODE_TRANSFER_COPY
:

330 
MODE_TRANSFER_DRAW
:

331 
MODE_TRANSFER_SELECT
:

332 
MODE_TRANSFER_SELECT_SIDE
:

333 
	`Œn_´oûssT¿nsãrSü“n
(
thškIÁ”v®
);

339 
	`gam_´oûssFadeV®ue
();

340 
	}
}

	@../src/system/sys_maths.cpp

1 
	~"../../hdr/sys_glob®s.h
"

3 
	gcosTabË
[360];

4 
	gsšTabË
[360];

9 
	$sys_£tupTabËs
()

12 
i
 = 0; i < 360; i++)

14 
cosTabË
[
i
] = 
	`cos
(i * (3.14 / 180.0f));

15 
sšTabË
[
i
] = 
	`sš
(i * (3.14 / 180.0f));

17 
	}
}

22 
ıVeù
 
	$sys_rÙ©ePošt
(
ıVeù
 
pošt
, cpVeù 
Üigš
, 
deg»e
)

25 
ıVeù
 
di¥Ïûm’t
;

27 
di¥Ïûm’t
.
x
 = 
pošt
.x - 
Üigš
.x;

28 
di¥Ïûm’t
.
y
 = 
pošt
.y - 
Üigš
.y;

30 
pošt
.
x
 = 
di¥Ïûm’t
.x * 
cosTabË
[
deg»e
] + di¥Ïûm’t.
y
 * 
sšTabË
[degree];

31 
pošt
.
y
 = 
di¥Ïûm’t
.y * 
cosTabË
[
deg»e
] - di¥Ïûm’t.
x
 * 
sšTabË
[degree];

33 
pošt
.
x
 =…ošt.x + 
Üigš
.x;

34 
pošt
.
y
 =…ošt.y + 
Üigš
.y;

36  
pošt
;

37 
	}
}

42 
	$sys_CÏmp
(
d
, 
mš
, 
max
)

45 cÚ¡ 
t
 = 
d
 < 
mš
 ? min : d;

46  
t
 > 
max
 ? max :;

47 
	}
}

53 
ıVeù
 
	$sys_g‘DœeùiÚ
(
ıVeù
 
sourûPošt
, cpVeù 
de¡Pošt
)

56 
ıVeù
 
‹mpDœeùiÚ
;

58 
‹mpDœeùiÚ
 = 
	`ıvsub
(
sourûPošt
, 
de¡Pošt
);

59 
‹mpDœeùiÚ
 = 
	`ıvnÜm®ize
(tempDirection);

61  
‹mpDœeùiÚ
;

62 
	}
}

67 
	$sys_g‘Di¡ªû
(
ıVeù
 
pošt1
, cpVeù 
pošt2
)

70 
ıVeù
 
‹mpPošt
;

71 
di¡ªû
;

73 
‹mpPošt
.
x
 = 
pošt2
.x - 
pošt1
.x;

74 
‹mpPošt
.
y
 = 
pošt2
.y - 
pošt1
.y;

76 
di¡ªû
 = 
	`sq¹
(
‹mpPošt
.
x
 *empPošt.x +empPošt.
y
 *empPoint.y);

78  
di¡ªû
;

79 
	}
}

84 
ıVeù
 
	$sys_g‘VeùÜDœeùiÚ
(
ıVeù
 
veùA
, cpVeù 
veùB
)

87 
ıVeù
 
dœeùiÚ
;

89 
dœeùiÚ
.
x
 = 
veùB
.x - 
veùA
.x;

90 
dœeùiÚ
.
y
 = 
veùB
.y - 
veùA
.y;

92  
dœeùiÚ
;

93 
	}
}

98 
	$sys_dÙ
(
ıVeù
 
v1
, cpVeù 
v2
)

101  (
v1
.
x
*
v2
.xè+ (v1.
y
*v2.y);

102 
	}
}

107 
	$sys_fšdCœşeOv”Ïp
(
_droid
 *
cœşe1
, _droid *
cœşe2
, 
¿dius
)

110 
ıVeù
 
midpošt
;

111 
di¡
;

113 
di¡
 = 
	`ıvdi¡
(
cœşe1
->
wÜldPosMiddË
, 
cœşe2
->worldPosMiddle);

115 ià(
di¡
 == 0.0)

116 
di¡
 = 1.0f;

121 
midpošt
.
x
 = (
cœşe1
->
wÜldPosMiddË
.x + 
cœşe2
->worldPosMiddle.x) / 2;

122 
midpošt
.
y
 = (
cœşe1
->
wÜldPosMiddË
.y + 
cœşe2
->worldPosMiddle.y) / 2;

124 
cœşe1
->
wÜldPosMiddË
.
x
 = 
midpošt
.x + 
¿dius
 * (cœşe1->wÜldPosMiddË.x - 
cœşe2
->wÜldPosMiddË.xè/ 
di¡
;

125 
cœşe1
->
wÜldPosMiddË
.
y
 = 
midpošt
.y + 
¿dius
 * (cœşe1->wÜldPosMiddË.y - 
cœşe2
->wÜldPosMiddË.yè/ 
di¡
;

126 
cœşe2
->
wÜldPosMiddË
.
x
 = 
midpošt
.x + 
¿dius
 * (cœşe2->wÜldPosMiddË.x - 
cœşe1
->wÜldPosMiddË.xè/ 
di¡
;

127 
cœşe2
->
wÜldPosMiddË
.
y
 = 
midpošt
.y + 
¿dius
 * (cœşe2->wÜldPosMiddË.y - 
cœşe1
->wÜldPosMiddË.yè/ 
di¡
;

129 
cœşe1
->
wÜldPos
.
x
 = cœşe1->
wÜldPosMiddË
.x - 
SPRITE_SIZE
;

130 
cœşe1
->
wÜldPos
.
y
 = cœşe1->
wÜldPosMiddË
.y - 
SPRITE_SIZE
;

132 
cœşe2
->
wÜldPos
.
x
 = cœşe2->
wÜldPosMiddË
.x - 
SPRITE_SIZE
;

133 
cœşe2
->
wÜldPos
.
y
 = cœşe2->
wÜldPosMiddË
.y - 
SPRITE_SIZE
;

134 
	}
}

142 
	$sys_di¡ªûtoLšeSegm’t
(
ıVeù
 
±1
, cpVeù 
±2
, cpVeù 
pošt
)

148 
A
 = 
pošt
.
x
 - 
±1
.x;

149 
B
 = 
pošt
.
y
 - 
±1
.y;

151 
C
 = 
±2
.
x
 - 
±1
.x;

152 
D
 = 
±2
.
y
 - 
±1
.y;

154 
dÙ
 = 
A
 * 
C
 + 
B
 * 
D
;

155 
Ën_sq
 = 
C
 * C + 
D
 * D;

156 
·¿m
 = 
dÙ
 / 
Ën_sq
;

158 
xx
,
yy
;

160 if(
·¿m
 < 0)

162 
xx
 = 
±1
.
x
;

163 
yy
 = 
±1
.
y
;

165 ià(
·¿m
 > 1)

167 
xx
 = 
±2
.
x
;

168 
yy
 = 
±2
.
y
;

172 
xx
 = 
±1
.
x
 + 
·¿m
 * 
C
;

173 
yy
 = 
±1
.
y
 + 
·¿m
 * 
D
;

176 
ıVeù
 
‹mp
;

177 
‹mp
.
x
 = 
xx
;

178 
‹mp
.
y
 = 
yy
;

180 
di¡
 = 
	`ıvdi¡
(
pošt
, 
‹mp
);

182  
di¡
;

183 
	}
}

188 
ıVeù
 
	$sys_şo£¡PoštOnLše
(
ıVeù
 
±S¹
, cpVeù 
±End
, cpVeù 
±Check
)

191 
ıVeù
 
ÃwPošt
;

193 
A1
 = 
±End
.
y
 - 
±S¹
.y;

194 
B1
 = 
±S¹
.
x
 - 
±End
.x;

195 
C1
 = (
±End
.
y
 - 
±S¹
.yè*…tS¹.
x
 + (ptStart.x -…tEnd.x) *…tStart.y;

196 
C2
 = -
B1
*
±Check
.
x
 + 
A1
*±Check.
y
;

197 
d‘
 = 
A1
*A1 - -
B1
*B1;

199 
ÃwPošt
.
x
 = 0;

200 
ÃwPošt
.
y
 = 0;

202 if(
d‘
 != 0)

204 
ÃwPošt
.
x
 = ()((
A1
*
C1
 - 
B1
*
C2
)/
d‘
);

205 
ÃwPošt
.
y
 = ()((
A1
*
C2
 - -
B1
*
C1
)/
d‘
);

209 
ÃwPošt
.
x
 = 
±Check
.x;

210 
ÃwPošt
.
y
 = 
±Check
.y;

212  
ÃwPošt
;

213 
	}
}

218 
boŞ
 
	$sys_movšgTow¬ds
(
ıVeù
 
pošt1
, cpVeù 
pošt2
, cpVeù 
pošt1V–oc™y
)

221 
D
;

222 
ıVeù
 
C
;

223 
ıVeù
 
N
;

226 
N
 = 
	`ıvnÜm®ize
(
pošt1V–oc™y
);

230 
C
 = 
	`ıvsub
(
pošt2
, 
pošt1
);

231 
D
 = 
	`sys_dÙ
(
N
, 
C
);

238 if(
D
 <= 0)

240  
çl£
;

244  
Œue
;

246 
	}
}

251 
ıVeù
 
	$sys_»tuºBounû
(
_droid
 *
cœşe1
, _droid *
cœşe2
)

258 
ıVeù
 
n
 = 
	`ıvsub
(
cœşe1
->
wÜldPosMiddË
, 
cœşe2
->worldPosMiddle);

259 
n
 = 
	`ıvnÜm®ize
(n);

263 
a1
 = 
	`sys_dÙ
(
cœşe1
->
v–oc™y
, 
n
);

264 
a2
 = 
	`sys_dÙ
(
cœşe2
->
v–oc™y
, 
n
);

271 
İtimizedP
 = (2.0 * (
a1
 - 
a2
)è/ (
cœşe1
->
mass
 + 
cœşe2
->mass);

274 
ıVeù
 
v1New
;

275 
v1New
.
x
 = 
cœşe1
->
v–oc™y
.x - 
İtimizedP
 * 
cœşe2
->
mass
 * 
n
.x;

276 
v1New
.
y
 = 
cœşe1
->
v–oc™y
.y - 
İtimizedP
 * 
cœşe2
->
mass
 * 
n
.y;

280 
ıVeù
 
v2New
;

281 
v2New
.
x
 = 
cœşe2
->
v–oc™y
.x + 
İtimizedP
 * 
cœşe1
->
mass
 * 
n
.x;

282 
v2New
.
y
 = 
cœşe2
->
v–oc™y
.y + 
İtimizedP
 * 
cœşe1
->
mass
 * 
n
.y;

298 
cœşe1
->
v–oc™y
.
x
 = 
v1New
.x;

299 
cœşe1
->
v–oc™y
.
y
 = 
v1New
.y;

301 
cœşe2
->
v–oc™y
.
x
 = 
v2New
.x;

302 
cœşe2
->
v–oc™y
.
y
 = 
v2New
.y;

304  
v1New
;

305 
	}
}

311 
boŞ
 
	$sys_cœşeCŞlisiÚ
(
ıVeù
 
pos1
, 
¿dius1
, cpVeù 
pos2
, 
¿dius2
)

315 
dx
 = 
pos2
.
x
 - 
pos1
.x;

316 
dy
 = 
pos2
.
y
 - 
pos1
.y;

318 
¿dii
 = 
¿dius1
 + 
¿dius2
;

320 iàĞĞ
dx
 * dx ) + ( 
dy
 * dy ) < 
¿dii
 *„adii )

322  
Œue
;

326  
çl£
;

328 
	}
}

	@../src/system/sys_physics.cpp

1 
	~"../../hdr/sys_glob®s.h
"

2 
	~<m©h.h
>

4 
	gveùÜ
<
	g_physicObjeù
> 
	gsŞidW®ls
;

5 
_physicObjeù
 
	g¶ay”PhysicsObjeù
;

7 
ıS·û
 *
	g¥aû
 = 
NULL
;

8 
ıVeù
 
	gshG¿v™y
;

9 
	gshDampšg
;

10 
	gcŞlisiÚSlİ
;

11 
	gw®lFriùiÚ
;

12 
	gw®lRadius
;

14 
	g¶ay”Mass
;

15 
	g¶ay”Radius
;

16 
	g¶ay”FriùiÚ
;

17 
	g¶ay”EÏ¡ic
;

18 
	gbuÎ‘Mass
;

23 
	$sys_£tPÏy”PhysicsPos™iÚ
(
ıVeù
 
ÃwPos™iÚ
)

26 if(
¶ay”PhysicsObjeù
.
body
 =ğ
NULL
)

29 
	`ıBodyS‘Pos™iÚ
(
¶ay”PhysicsObjeù
.
body
, 
ÃwPos™iÚ
);

30 
	}
}

35 
	$sys_de¡royPÏy”Physics
()

38 
	`ıSh­eDe¡roy
(
¶ay”PhysicsObjeù
.
sh­e
);

40 
	`ıBodyDe¡roy
(
¶ay”PhysicsObjeù
.
body
);

41 
	}
}

46 
	$sys_£tupPÏy”Physics
()

49 
ıVeù
 
¶ay”Off£t
;

51 
¶ay”Off£t
 = {0.0f, 0.0f};

53 if(
¶ay”PhysicsObjeù
.
body
 !ğ
NULL
)

56 
¶ay”PhysicsObjeù
.
body
 = 
	`ıS·ûAddBody
(
¥aû
, 
	`ıBodyNew
(
¶ay”Mass
, 
	`ıMom’tFÜCœşe
ÕÏy”Mass, 0.0f, 
¶ay”Radius
, 
¶ay”Off£t
)));

57 
	`ıBodyS‘Mass
(
¶ay”PhysicsObjeù
.
body
, 
¶ay”Mass
);

59 
¶ay”PhysicsObjeù
.
sh­e
 = 
	`ıS·ûAddSh­e
(
¥aû
, 
	`ıCœşeSh­eNew
ÕÏy”PhysicsObjeù.
body
, 
¶ay”Radius
, 
¶ay”Off£t
));

60 
	`ıSh­eS‘FriùiÚ
(
¶ay”PhysicsObjeù
.
sh­e
, 
¶ay”FriùiÚ
);

61 
	`ıSh­eS‘EÏ¡ic™y
(
¶ay”PhysicsObjeù
.
sh­e
, 
¶ay”EÏ¡ic
);

62 
	`ıSh­eS‘CŞlisiÚTy³
(
¶ay”PhysicsObjeù
.
sh­e
, 
PHYSIC_TYPE_PLAYER
);

63 
	`ıSh­eS‘U£rD©a
(
¶ay”PhysicsObjeù
.
sh­e
, -1);

64 
	}
}

69 
boŞ
 
	$sys_£tupPhysicsEngše
()

72 
shG¿v™y
 = 
	`ıv
(0, 0);

73 
¥aû
 = 
	`ıS·ûNew
();

74 
	`ıS·ûS‘G¿v™y
(
¥aû
, 
shG¿v™y
);

75 
	`ıS·ûS‘Dampšg
(
¥aû
, 
shDampšg
);

77 
	`ıS·ûS‘CŞlisiÚSlİ
(
¥aû
, 
cŞlisiÚSlİ
);

79 
	`sys_£tupPÏy”Physics
();

81 
	`sys_£tupCŞlisiÚHªdËrs
();

83  
Œue
;

84 
	}
}

89 
	$sys_ä“PhysicsEngše
()

92 if(
NULL
 =ğ
¥aû
)

95 
	`ıS·ûF»e
(
¥aû
);

96 
	}
}

101 
	$sys_»moveDroidCPInfo
(
whichDroid
)

104 ià(
Œue
 =ğ
	`ıS·ûCÚšsSh­e
(
¥aû
, 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
sh­e
))

105 
	`ıS·ûRemoveSh­e
(
¥aû
, 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
sh­e
);

107 ià(
Œue
 =ğ
	`ıS·ûCÚšsBody
(
¥aû
, 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
body
))

108 
	`ıS·ûRemoveBody
(
¥aû
, 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid
].
body
);

109 
	}
}

114 
	$sys_de¡royPhysicObjeùs
()

117 
i
 = 0; i !ğ
shLev–
[
cu¼’tLev–
].
numLšeSegm’ts
; i++)

119 ià(
Œue
 =ğ
	`ıS·ûCÚšsSh­e
(
¥aû
, 
sŞidW®ls
[
i
].
sh­e
))

120 
	`ıS·ûRemoveSh­e
(
¥aû
, 
sŞidW®ls
[
i
].
sh­e
);

122 ià(
Œue
 =ğ
	`ıS·ûCÚšsBody
(
¥aû
, 
sŞidW®ls
[
i
].
body
))

123 
	`ıS·ûRemoveBody
(
¥aû
, 
sŞidW®ls
[
i
].
body
);

125 
sŞidW®ls
.
	`ş—r
();

127 
i
 = 0; i !ğ
shLev–
[
cu¼’tLev–
].
numDroids
; i++)

129 ià(
Œue
 =ğ
shLev–
[
cu¼’tLev–
].
droid
[
i
].
isAlive
)

131 
	`sys_»moveDroidCPInfo
(
i
);

135 
i
 = 0; i !ğ
numDoÜsOnLev–
; i++)

137 ià(
Œue
 =ğ
	`ıS·ûCÚšsSh­e
(
¥aû
, 
doÜTrigg”
[
i
].
physics
.
sh­e
))

138 
	`ıS·ûRemoveSh­e
(
¥aû
, 
doÜTrigg”
[
i
].
physics
.
sh­e
);

140 ià(
Œue
 =ğ
	`ıS·ûCÚšsBody
(
¥aû
, 
doÜTrigg”
[
i
].
physics
.
body
))

141 
	`ıS·ûRemoveBody
(
¥aû
, 
doÜTrigg”
[
i
].
physics
.
body
);

143 
	}
}

148 
	$sys_ü—‹EÃmyPhysics
()

151 
i
 = 0; i !ğ
shLev–
[
cu¼’tLev–
].
numDroids
; i++)

153 ià(
Œue
 =ğ
shLev–
[
cu¼’tLev–
].
droid
[
i
].
isAlive
)

155 
shLev–
[
cu¼’tLev–
].
droid
[
i
].
body
 = 
	`ıS·ûAddBody
(
¥aû
, 
	`ıBodyNew
(
¶ay”Mass
, 
	`ıMom’tFÜCœşe
ÕÏy”Mass, 0.0f, 
¶ay”Radius
, 
ıvz”o
)));

159 
	`ıBodyS‘Mass
(
shLev–
[
cu¼’tLev–
].
droid
[
i
].
body
, 
¶ay”Mass
);

161 
shLev–
[
cu¼’tLev–
].
droid
[
i
].
sh­e
 = 
	`ıS·ûAddSh­e
(
¥aû
, 
	`ıCœşeSh­eNew
(shLev–[cu¼’tLev–].droid[i].
body
, 
¶ay”Radius
, 
ıvz”o
));

162 
	`ıSh­eS‘FriùiÚ
(
shLev–
[
cu¼’tLev–
].
droid
[
i
].
sh­e
, 
¶ay”FriùiÚ
);

163 
	`ıSh­eS‘EÏ¡ic™y
(
shLev–
[
cu¼’tLev–
].
droid
[
i
].
sh­e
, 
¶ay”EÏ¡ic
);

165 
	`ıSh­eS‘CŞlisiÚTy³
(
shLev–
[
cu¼’tLev–
].
droid
[
i
].
sh­e
, 
PHYSIC_TYPE_ENEMY
);

167 
	`ıBodyS‘Pos™iÚ
(
shLev–
[
cu¼’tLev–
].
droid
[
i
].
body
, shLev–[cu¼’tLev–].droid[i].
wÜldPos
);

169 
	`ıSh­eS‘U£rD©a
(
shLev–
[
cu¼’tLev–
].
droid
[
i
].
sh­e
, i);

172 
	}
}

177 
	$sys_debugLšeSegm’ts
()

180 
ıVeù
 
w®lS¹
, 
w®lFšish
;

181 
ALLEGRO_COLOR
 
lšeCŞÜ
;

183 
lšeCŞÜ
 = 
	`®_m­_rgb
(255, 0, 0);

185 
i
 = 0; i !ğ
shLev–
[
cu¼’tLev–
].
numLšeSegm’ts
; i++)

187 
w®lS¹
 = 
shLev–
[
cu¼’tLev–
].
lšeSegm’ts
[
i
].
¡¬t
;

188 
w®lFšish
 = 
shLev–
[
cu¼’tLev–
].
lšeSegm’ts
[
i
].
fšish
;

190 
w®lS¹
 = 
	`sys_wÜldToSü“n
(wallStart, 200);

191 
w®lFšish
 = 
	`sys_wÜldToSü“n
(wallFinish, 200);

193 
	`®_d¿w_lše
(
w®lS¹
.
x
, w®lS¹.
y
, 
w®lFšish
.x, w®lFšish.y, 
lšeCŞÜ
, 2);

195 
	}
}

200 
	$sys_ü—‹SŞidW®ls
()

203 
ıVeù
 
w®lS¹
, 
w®lFšish
;

204 
_physicObjeù
 
‹mpW®l
;

206 ià(0 =ğ
shLev–
[
cu¼’tLev–
].
numLšeSegm’ts
)

209 
sŞidW®ls
.
	`»£rve
(
shLev–
[
cu¼’tLev–
].
numLšeSegm’ts
);

211 
i
 = 0; i !ğ
shLev–
[
cu¼’tLev–
].
numLšeSegm’ts
; i++)

213 
w®lS¹
 = 
shLev–
[
cu¼’tLev–
].
lšeSegm’ts
[
i
].
¡¬t
;

214 
w®lFšish
 = 
shLev–
[
cu¼’tLev–
].
lšeSegm’ts
[
i
].
fšish
;

216 
‹mpW®l
.
body
 = 
	`ıBodyNewStic
();

217 
‹mpW®l
.
sh­e
 = 
	`ıSegm’tSh­eNew
ÑempW®l.
body
, 
w®lS¹
, 
w®lFšish
, 
w®lRadius
);

218 
sŞidW®ls
.
	`push_back
(
‹mpW®l
);

219 
	`ıS·ûAddSh­e
(
¥aû
, 
sŞidW®ls
[
i
].
sh­e
);

220 
	`ıSh­eS‘FriùiÚ
(
sŞidW®ls
[
i
].
sh­e
, 
w®lFriùiÚ
);

222 
	`ıSh­eS‘CŞlisiÚTy³
(
sŞidW®ls
[
i
].
sh­e
, 
PHYSIC_TYPE_WALL
);

224 
	`ıSh­eS‘U£rD©a
(
sŞidW®ls
[
i
].
sh­e
, i);

227 
	`sys_ü—‹EÃmyPhysics
();

229 
	`ıS·ûRešdexStic
(
¥aû
);

230 
	}
}

235 
	$gam_upd©eSüŞlšgV¬s
(
boŞ
 
g‘PÏy”Pos
)

238 
posX
, 
posY
;

240 
	`ıBodyS‘FÜû
(
¶ay”PhysicsObjeù
.
body
, 
¶ay”V–oc™y
);

242 
¶ay”WÜldPos
 = 
	`ıBodyG‘Pos™iÚ
(
¶ay”PhysicsObjeù
.
body
);

246 
¶ay”Sü“nPos
.
x
 = (
wšWidth
 / 2è- (
SPRITE_SIZE
 / 2);

247 
¶ay”Sü“nPos
.
y
 = (
wšHeight
 / 2è- (
SPRITE_SIZE
 / 2);

251 
tePosX
 = 
	`abs
(()
¶ay”WÜldPos
.
x
 / 
TILE_SIZE
è- ((
wšWidth
 / TILE_SIZE) / 2);

252 
tePosY
 = 
	`abs
(()
¶ay”WÜldPos
.
y
 / 
TILE_SIZE
è- ((
wšHeight
 / TILE_SIZE) / 2);

254 
pix–X
 = 
	`fmod
(
¶ay”WÜldPos
.
x
, (è
TILE_SIZE
);

255 
pix–Y
 = 
	`fmod
(
¶ay”WÜldPos
.
y
, (è
TILE_SIZE
);

260 
¶ay”WÜldMiddËPos
.
x
 = (
¶ay”WÜldPos
.x - (
TILE_SIZE
 / 2)è+ (
SPRITE_SIZE
 / 2);

261 
¶ay”WÜldMiddËPos
.
y
 = 
¶ay”WÜldPos
.y + (
SPRITE_SIZE
 / 2);

263 
posX
 = 
¶ay”WÜldMiddËPos
.
x
 / 
TILE_SIZE
;

264 
posY
 = 
¶ay”WÜldMiddËPos
.
y
 / 
TILE_SIZE
;

266 
¶ay”Ov”Te
 = 
shLev–
[
cu¼’tLev–
].
tes
[(
posY
 * shLev–[cu¼’tLev–].
Ëv–Dim’siÚs
.
x
è+ 
posX
];

269 
v›wabËSü“nCoÜd
.
x
 = 
¶ay”WÜldPos
.x - (
wšWidth
 / 2);

270 
v›wabËSü“nCoÜd
.
y
 = 
¶ay”WÜldPos
.y - (
wšHeight
 / 2);

271 
	}
}

276 
	$sys_¡İPÏy”Movem’t
()

279 
¶ay”V–oc™y
.
x
 = 0.0f;

280 
¶ay”V–oc™y
.
y
 = 0.0f;

281 
	`ıBodyS‘V–oc™y
(
¶ay”PhysicsObjeù
.
body
, 
¶ay”V–oc™y
);

282 
	}
}

289 
	$sys_ü—‹DoÜS’sÜ
(
whichDoÜ
, 
ıFlßt
 
width
, cpFlßˆ
height
, 
ıVeù
 
ûÁ”
)

292 
doÜTrigg”
[
whichDoÜ
].
physics
.
body
 = 
	`ıBodyNewStic
();

293 
	`ıBodyS‘C’‹rOfG¿v™y
(
doÜTrigg”
[
whichDoÜ
].
physics
.
body
, 
ûÁ”
);

294 
	`ıBodyS‘Pos™iÚ
(
doÜTrigg”
[
whichDoÜ
].
physics
.
body
, 
ûÁ”
);

296 
doÜTrigg”
[
whichDoÜ
].
physics
.
sh­e
 = 
	`ıBoxSh­eNew
(doÜTrigg”[whichDoÜ].physics.
body
, 
width
, 
height
, 0);

297 
	`ıS·ûAddSh­e
(
¥aû
, 
doÜTrigg”
[
whichDoÜ
].
physics
.
sh­e
);

298 
	`ıSh­eS‘CŞlisiÚTy³
(
doÜTrigg”
[
whichDoÜ
].
physics
.
sh­e
, 
PHYSIC_TYPE_DOOR
);

300 
	`ıSh­eS‘U£rD©a
(
doÜTrigg”
[
whichDoÜ
].
physics
.
sh­e
, whichDoor);

302 
	`ıSh­eS‘S’sÜ
(
doÜTrigg”
[
whichDoÜ
].
physics
.
sh­e
, 
Œue
);

303 
	}
}

	@../src/system/sys_physicsCollisions.cpp

1 
	~"../../hdr/sys_glob®s.h
"

3 
ıCŞlisiÚHªdËr
 *
	ghªdËrW®lBuÎ‘
;

4 
ıCŞlisiÚHªdËr
 *
	ghªdËrEÃmyBuÎ‘
;

5 
ıCŞlisiÚHªdËr
 *
	ghªdËrEÃmyPÏy”
;

6 
ıCŞlisiÚHªdËr
 *
	ghªdËrEÃmyEÃmy
;

7 
ıCŞlisiÚHªdËr
 *
	ghªdËrPÏy”BuÎ‘
;

8 
ıCŞlisiÚHªdËr
 *
	ghªdËrW®lPÏy”
;

9 
ıCŞlisiÚHªdËr
 *
	ghªdËrDoÜBuÎ‘
;

10 
ıCŞlisiÚHªdËr
 *
	ghªdËrIgnÜeP¬tişe
;

11 
ıCŞlisiÚHªdËr
 *
	ghªdËrIgnÜeP¬tişeEÃmy
;

23 
	$po¡S‹pRemoveBuÎ‘
(
ıS·û
 *
¥aû
, 
ıSh­e
 *
sh­e
, *
unu£d
)

26 
buÎ‘Index
;

27 
ıVeù
 
wÜldPos
;

29 
buÎ‘Index
 = ()
	`ıSh­eG‘U£rD©a
(
sh­e
);

31 
	`cÚ_´št
(
Œue
, 
çl£
, "RemovbuÎ‘ index [ %˜]", 
buÎ‘Index
);

33 
	`ıS·ûRemoveSh­e
(
¥aû
, 
buÎ‘
[
buÎ‘Index
].
buÎ‘PhysicsObjeù
.
sh­e
);

34 
	`ıS·ûRemoveBody
(
¥aû
, 
buÎ‘
[
buÎ‘Index
].
buÎ‘PhysicsObjeù
.
body
);

36 
	`ıSh­eF»e
(
buÎ‘
[
buÎ‘Index
].
buÎ‘PhysicsObjeù
.
sh­e
);

37 
	`ıBodyF»e
(
buÎ‘
[
buÎ‘Index
].
buÎ‘PhysicsObjeù
.
body
);

39 
buÎ‘
[
buÎ‘Index
].
®ive
 = 
çl£
;

41 
	`·r_»moveEm™‹r
(
buÎ‘Index
);

43 ià(
NULL
 !ğ
unu£d
)

45 
	`·r_š™Em™‹r
 (
buÎ‘
[
buÎ‘Index
].
wÜldPos
, 
PARTICLE_TYPE_SPARK
, -1);

47 
	}
}

52 
boŞ
 
	$hªdËCŞlisiÚW®lPÏy”BuÎ‘
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
, *
unu£d
)

59 
ıSh­e
 *
a
, *
b
;

60 
	`ıArb™”G‘Sh­es
(
¬b
, &
a
, &
b
);

62 
ıCÚùPoštS‘
 
£t
 = 
	`ıArb™”G‘CÚùPoštS‘
(
¬b
);

63 
ıVeù
 
p
;

64 
ıVeù
 
wÜldP
;

66 
i
=0; i < 
£t
.
couÁ
; i++)

68 
p
 = 
£t
.
pošts
[
i
].
poštA
;

77 
	`ıS·ûAddPo¡S‹pC®lback
(
¥aû
, (
ıPo¡S‹pFunc
)
po¡S‹pRemoveBuÎ‘
, 
b
, 1);

80  
ıF®£
;

81 
	}
}

87 
	$hªdËDamageDroidBuÎ‘
(
ıS·û
 *
¥aû
, 
ıSh­e
 *
sh­e
, *
unu£d
)

90 
buÎ‘Index
;

92 
buÎ‘Index
 = 
unu£d
;

94 
	`drd_damageToDroid
(
cu¼’tLev–
, 
	`ıSh­eG‘U£rD©a
(
sh­e
), 
DAMAGE_BULLET
, 
buÎ‘
[
buÎ‘Index
].
sourûDroid
);

95 
	}
}

100 
boŞ
 
	$hªdËCŞlisiÚEÃmyBuÎ‘
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
, *
unu£d
)

107 
ıSh­e
 *
a
, *
b
;

108 
whichDroid
;

109 
buÎ‘Index
;

111 
	`ıArb™”G‘Sh­es
(
¬b
, &
a
, &
b
);

113 
whichDroid
 = 
	`ıSh­eG‘U£rD©a
(
a
);

114 
buÎ‘Index
 = 
	`ıSh­eG‘U£rD©a
(
b
);

120 
	`ıS·ûAddPo¡S‹pC®lback
(
¥aû
, (
ıPo¡S‹pFunc
)
hªdËDamageDroidBuÎ‘
, 
a
, 
buÎ‘Index
);

123 
	`ıS·ûAddPo¡S‹pC®lback
(
¥aû
, (
ıPo¡S‹pFunc
)
po¡S‹pRemoveBuÎ‘
, 
b
, 
NULL
);

125 
	}
}

131 
	$hªdËDamageDroidCŞlisiÚ
(
ıS·û
 *
¥aû
, 
ıSh­e
 *
sh­e
, *
unu£d
)

134 
	`drd_damageToDroid
(
cu¼’tLev–
, 
	`ıSh­eG‘U£rD©a
(
sh­e
), 
unu£d
, -1);

135 
	}
}

141 
boŞ
 
	$hªdËCŞlisiÚT¿nsãrCheck
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
, *
unu£d
)

149 
ıSh­e
 *
a
, *
b
;

150 
whichDroid_A
;

151 
whichDroid_B
;

152 
ıVeù
 
¡İV–oc™y
;

154 
	`ıArb™”G‘Sh­es
(
¬b
, &
a
, &
b
);

155 
whichDroid_A
 = 
	`ıSh­eG‘U£rD©a
(
a
);

156 
whichDroid_B
 = 
	`ıSh­eG‘U£rD©a
(
b
);

158 ià(-1 =ğ
whichDroid_B
)

160 ià(
çl£
 =ğ
šT¿nsãrMode
)

161  
ıTrue
;

167 
¡İV–oc™y
.
x
 = 0.0f;

168 
¡İV–oc™y
.
y
 = 0.0f;

169 
	`ıBodyS‘V–oc™y
(
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid_A
].
body
, 
¡İV–oc™y
);

170 
	`Œn_¡¬tT¿nsãrMode
(
whichDroid_A
);

171 
	`sys_chªgeMode
(
MODE_TRANSFER_INTRO
, 
Œue
);

173  
ıF®£
;

174 
	}
}

181 
boŞ
 
	$hªdËCŞlisiÚPÏy”W®l
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
, *
unu£d
)

184 ià(
çl£
 =ğ
u£CŞlisiÚD‘eùiÚ
)

185  
ıF®£
;

187  
ıTrue
;

188 
	}
}

193 
	$hªdËCŞlisiÚDroidToDroid
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
, *
unu£d
)

201 
ıSh­e
 *
a
, *
b
;

202 
whichDroid_A
;

203 
whichDroid_B
;

205 
	`ıArb™”G‘Sh­es
(
¬b
, &
a
, &
b
);

206 
whichDroid_A
 = 
	`ıSh­eG‘U£rD©a
(
a
);

207 
whichDroid_B
 = ()
	`ıSh­eG‘U£rD©a
(
b
);

209 ià(-1 =ğ
whichDroid_B
)

213 ià(
çl£
 =ğ
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid_A
].
isEx¶odšg
)

215 
	`ıS·ûAddPo¡S‹pC®lback
(
¥aû
, (
ıPo¡S‹pFunc
)
hªdËDamageDroidCŞlisiÚ
, 
a
, 
DAMAGE_COLLISION
);

216 
	`sys_¶aySound
(
SND_COLLIDE_1
, 0.0f, 
ALLEGRO_PLAYMODE_ONCE
);

220 
	`ıS·ûAddPo¡S‹pC®lback
(
¥aû
, (
ıPo¡S‹pFunc
)
hªdËDamageDroidCŞlisiÚ
, 
a
, 
DAMAGE_EXPLOSION
);

221 
	`sys_¶aySound
(
SND_DAMAGE
, 0.0f, 
ALLEGRO_PLAYMODE_ONCE
);

229 ià((
Œue
 =ğ
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid_A
].
isEx¶odšg
) ||

230 (
Œue
 =ğ
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid_B
].
isEx¶odšg
))

232 ià(
Œue
 =ğ
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid_A
].
isEx¶odšg
)

234 
	`sys_¶aySound
(
SND_DAMAGE
, 0.0f, 
ALLEGRO_PLAYMODE_ONCE
);

235 
	`drd_damageToDroid
(
cu¼’tLev–
, 
whichDroid_B
, 
DAMAGE_EXPLOSION
, 
whichDroid_A
);

239 
	`sys_¶aySound
(
SND_DAMAGE
, 0.0f, 
ALLEGRO_PLAYMODE_ONCE
);

240 
	`drd_damageToDroid
(
cu¼’tLev–
, 
whichDroid_A
, 
DAMAGE_EXPLOSION
, 
whichDroid_B
);

248 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid_A
].
cŞlisiÚCouÁ
++;

249 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid_B
].
cŞlisiÚCouÁ
++;

251 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid_A
].
hasCŞlided
 = 
Œue
;

252 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid_B
].
hasCŞlided
 = 
Œue
;

254 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid_A
].
cŞlidedW™h
 = 
whichDroid_B
;

255 
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid_B
].
cŞlidedW™h
 = 
whichDroid_A
;

257 
	`sys_¶aySound
(
SND_DAMAGE
, 0.0f, 
ALLEGRO_PLAYMODE_ONCE
);

258 
	`drd_damageToDroid
(
cu¼’tLev–
, 
whichDroid_A
, 
DAMAGE_COLLISION
, 
whichDroid_B
);

260 
	`sys_¶aySound
(
SND_DAMAGE
, 0.0f, 
ALLEGRO_PLAYMODE_ONCE
);

261 
	`drd_damageToDroid
(
cu¼’tLev–
, 
whichDroid_B
, 
DAMAGE_COLLISION
, 
whichDroid_A
);

264 
	}
}

270 
boŞ
 
	$hªdËCŞlisiÚDroidCheck
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
, *
unu£d
)

278 
ıSh­e
 *
a
, *
b
;

279 
whichDroid_A
;

280 
whichDroid_B
;

282 
	`ıArb™”G‘Sh­es
(
¬b
, &
a
, &
b
);

283 
whichDroid_A
 = 
	`ıSh­eG‘U£rD©a
(
a
);

284 
whichDroid_B
 = 
	`ıSh­eG‘U£rD©a
(
b
);

286 ià((
Œue
 =ğ
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid_A
].
ignÜeCŞlisiÚs
) ||

287 (
Œue
 =ğ
shLev–
[
cu¼’tLev–
].
droid
[
whichDroid_B
].
ignÜeCŞlisiÚs
))

288  
ıF®£
;

290  
ıTrue
;

291 
	}
}

296 
boŞ
 
	$hªdËPÏy”BuÎ‘
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
, *
unu£d
)

299  
ıF®£
;

300 
	}
}

305 
boŞ
 
	$hªdËIgnÜeP¬tişes
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
, *
unu£d
)

308  
ıF®£
;

309 
	}
}

314 
boŞ
 
	$hªdËDoÜBuÎ‘
(
ıArb™”
 *
¬b
, 
ıS·û
 *
¥aû
, *
unu£d
)

321 
ıSh­e
 *
a
, *
b
;

322 
whichDoÜ
;

323 
whichBuÎ‘
;

325 
	`ıArb™”G‘Sh­es
(
¬b
, &
a
, &
b
);

326 
whichDoÜ
 = 
	`ıSh­eG‘U£rD©a
(
a
);

327 
whichBuÎ‘
 = 
	`ıSh­eG‘U£rD©a
(
b
);

329 
doÜTrigg”
[
whichDoÜ
].
cu¼’tF¿me
)

331 
DOOR_ACROSS_OPENED
:

332 
DOOR_UP_OPENED
:

333  
ıTrue
;

337 
	`ıS·ûAddPo¡S‹pC®lback
(
¥aû
, (
ıPo¡S‹pFunc
)
po¡S‹pRemoveBuÎ‘
, 
b
, 1);

338  
ıF®£
;

341 
	}
}

346 
	$sys_£tupCŞlisiÚHªdËrs
()

352 
hªdËrW®lPÏy”
 = 
	`ıS·ûAddCŞlisiÚHªdËr
(
¥aû
, 
PHYSIC_TYPE_PLAYER
, 
PHYSIC_TYPE_WALL
);

353 
hªdËrW®lPÏy”
->
begšFunc
 = 
hªdËCŞlisiÚPÏy”W®l
;

357 
hªdËrW®lBuÎ‘
 = 
	`ıS·ûAddCŞlisiÚHªdËr
(
¥aû
, 
PHYSIC_TYPE_WALL
, 
PHYSIC_TYPE_BULLET
);

358 
hªdËrW®lBuÎ‘
->
po¡SŞveFunc
 = 
hªdËCŞlisiÚW®lPÏy”BuÎ‘
;

363 
hªdËrEÃmyBuÎ‘
 = 
	`ıS·ûAddCŞlisiÚHªdËr
(
¥aû
, 
PHYSIC_TYPE_ENEMY
, 
PHYSIC_TYPE_BULLET
);

364 
hªdËrEÃmyBuÎ‘
->
po¡SŞveFunc
 = 
hªdËCŞlisiÚEÃmyBuÎ‘
;

369 
hªdËrEÃmyPÏy”
 = 
	`ıS·ûAddCŞlisiÚHªdËr
(
¥aû
, 
PHYSIC_TYPE_ENEMY
, 
PHYSIC_TYPE_PLAYER
);

370 
hªdËrEÃmyPÏy”
->
begšFunc
 = 
hªdËCŞlisiÚT¿nsãrCheck
;

371 
hªdËrEÃmyPÏy”
->
po¡SŞveFunc
 = 
hªdËCŞlisiÚDroidToDroid
;

376 
hªdËrEÃmyEÃmy
 = 
	`ıS·ûAddCŞlisiÚHªdËr
(
¥aû
, 
PHYSIC_TYPE_ENEMY
, PHYSIC_TYPE_ENEMY);

377 
hªdËrEÃmyEÃmy
->
begšFunc
 = 
hªdËCŞlisiÚDroidCheck
;

378 
hªdËrEÃmyEÃmy
->
po¡SŞveFunc
 = 
hªdËCŞlisiÚDroidToDroid
;

383 
hªdËrPÏy”BuÎ‘
 = 
	`ıS·ûAddCŞlisiÚHªdËr
(
¥aû
, 
PHYSIC_TYPE_PLAYER
, 
PHYSIC_TYPE_BULLET
);

384 
hªdËrPÏy”BuÎ‘
->
begšFunc
 = 
hªdËPÏy”BuÎ‘
;

389 
hªdËrDoÜBuÎ‘
 = 
	`ıS·ûAddCŞlisiÚHªdËr
(
¥aû
, 
PHYSIC_TYPE_DOOR
, 
PHYSIC_TYPE_BULLET
);

390 
hªdËrDoÜBuÎ‘
->
begšFunc
 = 
hªdËDoÜBuÎ‘
;

394 
hªdËrIgnÜeP¬tişe
 = 
	`ıS·ûAddCŞlisiÚHªdËr
(
¥aû
, 
PHYSIC_TYPE_PLAYER
, 
PHYSIC_TYPE_PARTICLE
);

395 
hªdËrIgnÜeP¬tişeEÃmy
 = 
	`ıS·ûAddCŞlisiÚHªdËr
(
¥aû
, 
PHYSIC_TYPE_ENEMY
, 
PHYSIC_TYPE_PARTICLE
);

396 
hªdËrIgnÜeP¬tişe
->
begšFunc
 = 
hªdËIgnÜeP¬tişes
;

397 
hªdËrIgnÜeP¬tişeEÃmy
->
begšFunc
 = 
hªdËIgnÜeP¬tişes
;

402 
	}
}

	@../src/system/sys_script.cpp

1 
	~"../../hdr/sys_glob®s.h
"

2 
	~"../../hdr/game/gam_Œªsãr.h
"

3 
	~"../../hdr/sy¡em/sys_cÚsŞe.h
"

5 
	~"../../hdr/süt/sütbud”.h
"

8 
sü_Ouut
(cÚ¡ 
asSMes§geInfo
 *
msg
, *
·¿m
);

10 
ALLEGRO_CONFIG
 *
	gcÚfig
;

11 
ıVeù
 
	gpos™iÚ
;

20 
	gnumSütFunùiÚs
 = 0;

21 
boŞ
 
	gsütEngšeS¹ed
 = 
çl£
;

22 *
	gfeLoÿtiÚ
 = 
NULL
;

29 
asISütEngše
 *
	gsütEngše
;

30 
asISütCÚ‹xt
 *
	gcÚ‹xt
 = 
NULL
;

31 
CSütBud”
 
	gbud”
;

40 
¡ršg
 
	msütFeName
;

41 
¡ršg
 
	msütName
;

42 } 
	t_sütInfo
;

44 
_sütInfo
 
	gsütInfo
[] =

62 
_ho¡SütFunùiÚs
 
	gho¡SütFunùiÚs
[] =

64 {"void sys_´štCÚIÁ(¡ršg &š, ušˆ·¿m)", (*)&
sys_sütPrštIÁ
},

65 {"void sys_´štCÚSŒ(¡ršg &š, sŒšg &š)", (*)&
sys_sütPrštSŒ
},

66 {"void sys_´štSŒšg(æßˆposX, flßˆposY, sŒšg &š)", (*)&
sys_´štSŒšg
},

68 {"void sys_addSütCommªd(¡ršg &š, sŒšg &š, sŒšg &š, boŞ s‘P¬am)", (*)&
cÚ_addSütCommªd
},

72 {"void‡l_£t_Ãw_di¥Ïy_İtiÚ(šˆİtiÚ, iÁ v®ue, iÁ impÜnû)", (*)&
®_£t_Ãw_di¥Ïy_İtiÚ
},

73 {"void‡l_£t_Ãw_di¥Ïy_æags(šˆİtiÚ)", (*)&
®_£t_Ãw_di¥Ïy_æags
},

74 {"void‡l_£t_Ãw_di¥Ïy_»äesh_¿‹(šˆ»äesh_¿‹)", (*)&
®_£t_Ãw_di¥Ïy_»äesh_¿‹
},

78 {"void io_lßdCÚfigFe(¡ršg &š)", (*)&
io_lßdCÚfigFe
},

79 {"void io_şo£CÚfigFe()", (*)&
io_şo£CÚfigFe
},

80 {"void io_§veCÚfigFe(¡ršg &š)", (*)&
io_§veCÚfigFe
},

81 {"šˆio_»adCÚfigV®uesIÁ (¡ršg &š)", (*)&
io_»adCÚfigV®uesIÁ
},

82 {"æßˆio_»adCÚfigV®uesFlßˆ(¡ršg &š)", (*)&
io_»adCÚfigV®uesFlßt
},

83 {"void io_§veCÚfigV®ueSŒšg(¡ršg &š, sŒšg &š)", (*)&
io_§veCÚfigV®ueSŒšg
},

84 {"void io_§veCÚfigV®ueFlßt(¡ršg &š, flßˆkeyV®ue)",(*)&
io_§veCÚfigV®ueFlßt
},

85 {"void io_§veCÚfigV®ueIÁ(¡ršg &š, iÁ keyV®ue)", (*)&
io_§veCÚfigV®ueIÁ
},

89 {"void gam_d¿wB™m­FromSüt(šˆšdex, flßˆposX, flßˆposY, flßˆ»d, flßˆg»’, flßˆblue, flßˆ®pha)", (*)&
gam_d¿wB™m­FromSüt
},

90 {"void gam_d¿wS´™eFromSüt(šˆšdex, flßˆposX, flßˆposY, flßˆ»d, flßˆg»’, flßˆblue, flßˆ®pha)", (*)&
gam_d¿wS´™eFromSüt
},

94 {"void sys_£tFÚt(šˆÃwFÚt)", (*)&
sys_£tFÚt
},

95 {"boŞ io_lßd‰fFÚt(šˆfÚtIndex, iÁ fÚtSize, sŒšg &š)", (*)&
io_lßd‰fFÚt
},

96 {"void sys_£tFÚtCŞÜ(æßˆr, flßˆg, flßˆb, flßˆa)", (*)&
sys_£tFÚtCŞÜ
},

101 {"void sys_¶aySoundFromSüt(šˆwhichSound, flßˆ·n, boŞ†oİIt)", (*)
sys_¶aySoundFromSüt
},

105 {"void io_£tTeS‘CŞÜ(¡ršg &š)", (*)&
io_£tTeS‘CŞÜ
},

106 {"void io_£tTeS‘Ty³(¡ršg &š)", (*)&
io_£tTeS‘Ty³
},

110 {"void‡s_guiC»©eNewSü“À (¡ršg &š)", (*)&
gui_ho¡C»©eNewSü“n
},

111 {"void‡s_guiC»©eObjeù (šˆguiObjeùTy³, sŒšg &š)", (*)&
gui_ho¡C»©eObjeù
},

113 {"void‡s_guiS‘ObjeùPos™iÚ (šˆguiObjeùTy³, sŒšg &š, iÁ coÜdTy³, flßˆ¡¬tX, flßˆ¡¬tY, flßˆwidth, flßˆheight)", (*)&
gui_ho¡S‘ObjeùPos™iÚ
},

114 {"void‡s_guiS‘ObjeùLab– (šˆguiObjeùTy³, sŒšg &š, iÁ†ab–Pos, sŒšg &š)", (*)&
gui_ho¡S‘ObjeùLab–
},

115 {"void‡s_guiS‘ObjeùFunùiÚs(šˆguiObjeùTy³, sŒšg &š, sŒšg &š, sŒšg &š)", (*)&
gui_ho¡S‘ObjeùFunùiÚs
},

116 {"void‡s_guiAddObjeùToSü“À(šˆguiObjeùTy³, sŒšg &š, sŒšg &š)", (*)&
gui_ho¡AddObjeùToSü“n
},

117 {"void‡s_guiS‘ObjeùCŞÜ (šˆguiObjeùTy³, sŒšg &š, iÁ whichCŞÜ, flßˆ»d, flßˆg»’, flßˆblue, flßˆ®pha)", (*)&
gui_ho¡S‘ObjeùCŞÜ
},

118 {"void‡s_guiS‘CheckboxGrou° (¡ršg &š, iÁ whichGroup)", (*)&
gui_ho¡S‘CheckboxGroup
},

119 {"void‡s_guiS‘CheckboxTick (¡ršg &š, iÁ whichGroup)", (*)&
gui_ho¡S‘CheckboxTick
},

120 {"void‡s_guiS‘upDBText () ", (*)&
gam_£tupDBText
},

124 {"void‡s_ŒªsS‘DeçuÉV®ues(šˆûÎIndex)", (*)&
ho¡_ŒªsS‘DeçuÉV®ues
},

125 {"void‡s_ŒªsS‘C–lPos(šˆûÎIndex, iÁ…osX, iÁ…osY)", (*)&
ho¡_ŒªsS‘C–lPos
},

126 {"void‡s_ŒªsS‘C–lCŞÜ(šˆwhichC–l, iÁ cŞTy³, flßˆ»d, flßˆg»’, flßˆblue, flßˆ®pha)",(*)&
ho¡_ŒªsS‘C–lCŞÜ
},

127 {"void‡s_ŒªS‘Cœcu™Ty³(šˆwhichC–l, iÁ whichSide, iÁy³S‘)", (*)&
ho¡_ŒªS‘Cœcu™Ty³
},

128 {"void‡s_ŒªS‘EfãùTy³(šˆwhichC–l, iÁ whichSide, iÁƒfãù)", (*)&
ho¡_ŒªsS‘EfãùTy³
},

129 {"šˆas_g‘C­³dRªdomNum(šˆÿp)", (*)&
ho¡_g‘C­³dRªdomNum
},

130 {"boŞ‡s_cœcu™NÙPow”ed(šˆwhichC–l, iÁ whichSide)", (*)&
ho¡_cœcu™NÙPow”ed
},

131 {"voidº_aùiv©eCœcu™(šˆwhichC–l, iÁ whichSide)", (*)&
Œn_aùiv©eCœcu™
},

132 {"voidº_¶aûTok’(šˆwhichC–l, iÁ whichSide, iÁ…Ïy”OrDroid)", (*)&
Œn_¶aûTok’
},

136 {"void‡s_´štV¬ŸbËs()", (*)&
sys_´štV¬ŸbËs
},

137 {"void‡s_chªgeGameMode(šˆÃwMode, boŞ u£Fade)", (*)&
sys_chªgeMode
},

138 {"void gam_chªgeToLev–(šˆÃwLev–)", (*)&
gam_chªgeToLev–FromSüt
},

142 {"", (*è
NULL
},

145 
_ho¡SütFunùiÚs
 
	gho¡V¬ŸbËs
[] =

147 {"šˆwšWidth", &
wšWidth
},

148 {"šˆwšHeight", &
wšHeight
},

149 {"šˆcu¼’tMode", &
cu¼’tMode
},

150 {"boŞ gameIsRuÂšg", &
gameIsRuÂšg
},

151 {"šˆTICKS_PER_SECOND", &
TICKS_PER_SECOND
},

152 {"šˆMAX_FRAMESKIP", &
MAX_FRAMESKIP
},

153 {"æßˆSKIP_TICKS", &
SKIP_TICKS
},

154 {"boŞ u£HŞdB™m­", &
u£HŞdB™m­
},

155 {"boŞ u£BackšgB™m­", &
u£BackšgB™m­
},

156 {"boŞ u£CŞlisiÚD‘eùiÚ", &
u£CŞlisiÚD‘eùiÚ
},

157 {"šˆfuÎSü“nV®ue", &
fuÎSü“nV®ue
},

158 {"æßˆg¿v™y", &
g¿v™y
},

159 {"æßˆdoÜF¿meD–ay", &
doÜF¿meD–ay
},

160 {"æßˆ¶ay”MaxV–oc™y", &
¶ay”MaxV–oc™y
},

161 {"æßˆ¶ay”MaxS³ed", &
¶ay”MaxS³ed
},

162 {"æßˆ¶ay”AcûË¿tiÚ", &
¶ay”AcûË¿tiÚ
},

163 {"boŞ doCÏmpPÏy”V–oc™y", &
doCÏmpPÏy”V–oc™y
},

164 {"šˆcu¼’tLev–", &
cu¼’tLev–
},

165 {"æßˆg_LšeOfSightS‹p", &
g_LšeOfSightS‹p
},

166 {"boŞ‡ÎDroidsVisibË", &
®lDroidsVisibË
},

167 {"æßˆ´og»ssB¬LßdTimes", &
´og»ssB¬LßdTimes
},

168 {"æßˆwayPoštDe¡š©iÚSize", &
wayPoštDe¡š©iÚSize
},

169 {"æßt buÎ‘T¿v–S³ed", &
buÎ‘T¿v–S³ed
},

170 {"æßˆex¶odeF¿meD–ay", &
ex¶odeF¿meD–ay
},

171 {"æßˆba£DroidAnim©eV®ue", &
ba£DroidAnim©eV®ue
},

172 {"æßˆmaxDi¡ªûFromP©h", &
maxDi¡ªûFromP©h
},

173 {"æßˆmoveBackToLšeSegm’t", &
moveBackToLšeSegm’t
},

174 {"šˆ‹rm0Index", &
‹rm0Index
},

175 {"šˆ‹rm1Index", &
‹rm1Index
},

176 {"šˆ‹rm2Index", &
‹rm2Index
},

177 {"šˆ‹rm3Index", &
‹rm3Index
},

178 {"šˆcu¼’tT”mM’u", &
cu¼’tT”mM’u
},

179 {"šˆnumSrs", &
numSrs
},

180 {"šˆcu¼’tGUISü“n", &
cu¼’tGUISü“n
},

181 {"šˆcu¼’tObjeùS–eùed", &
cu¼’tObjeùS–eùed
},

182 {"šˆnumSoundDeviûs", &
numSoundDeviûs
},

184 {"æßˆbu‰ÚCurveX", &
bu‰ÚCurveX
},

185 {"æßˆbu‰ÚCurveY", &
bu‰ÚCurveY
},

186 {"æßˆšŒoS¹X", &
šŒoS¹X
},

187 {"æßˆšŒoS¹Y", &
šŒoS¹Y
},

188 {"æßˆšŒoWidth", &
šŒoWidth
},

189 {"æßˆšŒoHeight", &
šŒoHeight
},

190 {"æßˆšŒoSüŞl¥“d", &
šŒoSüŞl¥“d
},

191 {"æßˆšŒoBackRed", &
šŒoBackRed
},

192 {"æßˆšŒoBackG»’", &
šŒoBackG»’
},

193 {"æßˆšŒoBackBlue", &
šŒoBackBlue
},

194 {"æßˆšŒoBackAÍha", &
šŒoBackAÍha
},

195 {"æßˆšŒoFÚtRed", &
šŒoFÚtRed
},

196 {"æßˆšŒoFÚtG»’", &
šŒoFÚtG»’
},

197 {"æßˆšŒoFÚtBlue", &
šŒoFÚtBlue
},

198 {"æßˆšŒoFÚtAÍha", &
šŒoFÚtAÍha
},

199 {"æßˆšŒoSüŞlD–ay", &
šŒoSüŞlD–ay
},

201 {"æßˆdbS¹X", &
dbS¹X
},

202 {"æßˆdbS¹Y", &
dbS¹Y
},

203 {"æßˆdbWidth", &
dbWidth
},

204 {"æßˆdbHeight", &
dbHeight
},

205 {"æßˆdbSüŞl¥“d", &
dbSüŞl¥“d
},

206 {"æßˆdbBackRed", &
dbBackRed
},

207 {"æßˆdbBackG»’", &
dbBackG»’
},

208 {"æßˆdbBackBlue", &
dbBackBlue
},

209 {"æßˆdbBackAÍha", &
dbBackAÍha
},

210 {"æßˆdbFÚtRed", &
dbFÚtRed
},

211 {"æßˆdbFÚtG»’", &
dbFÚtG»’
},

212 {"æßˆdbFÚtBlue", &
dbFÚtBlue
},

213 {"æßˆdbFÚtAÍha", &
dbFÚtAÍha
},

214 {"æßˆdbSüŞlD–ay", &
dbSüŞlD–ay
},

216 {"šˆcu¼’tTeTy³", &
cu¼’tTeTy³
},

217 {"šˆcu¼’tTeCŞÜ", &
cu¼’tTeCŞÜ
},

218 {"æßˆdbImagePos™iÚX", &
dbImagePos™iÚX
},

219 {"æßˆdbImagePos™iÚY", &
dbImagePos™iÚY
},

220 {"æßˆ¡©usTextX", &
¡©usTextX
},

221 {"æßˆ¡©usTextY", &
¡©usTextY
},

222 {"æßˆscÜeTextX", &
scÜeTextX
},

224 {"šˆsqu¬eWidth", &
squ¬eWidth
},

225 {"šˆsqu¬eHeight", &
squ¬eHeight
},

227 {"æßˆscÜeD–ay", &
scÜeD–ay
},

228 {"æßˆscÜeD–ayV®ue", &
scÜeD–ayV®ue
},

230 {"šˆnumCÚsŞeCommªds", &
numCÚsŞeCommªds
},

232 {"šˆas_numSam¶es", &
as_numSam¶es
},

233 {"šˆas_numMuÉiSam¶es", &
as_numMuÉiSam¶es
},

234 {"boŞ‡s_u£Sound", &
as_u£Sound
},

235 {"æßˆvŞumeLev–", &
vŞumeLev–
},

236 {"šˆŒªsãrDroidPosX", &
ŒªsãrDroidPosX
},

237 {"šˆŒªsãrDroidPosY", &
ŒªsãrDroidPosY
},

238 {"šˆŒªsãrTextPosX", &
ŒªsãrTextPosX
},

239 {"šˆŒªsãrTextPosY", &
ŒªsãrTextPosY
},

240 {"šˆŒªsãrTextHeight", &
ŒªsãrTextHeight
},

241 {"šˆŒªsãrT™ËPosX", &
ŒªsãrT™ËPosX
},

242 {"šˆŒªsãrT™ËPosY", &
ŒªsãrT™ËPosY
},

244 {"šˆdroidOnSide", &
droidOnSide
},

245 {"šˆdroidBlockPos", &
droidBlockPos
},

246 {"šˆnumDroidTok’s", &
numDroidTok’s
},

247 {"šˆdroidToT¿nsãrIÁo", &
droidTy³ToT¿nsãrIÁo
},

248 {"æßˆcœcu™TimeAlive", &
cœcu™TimeAlive
},

250 {"šˆy–lowAË¹Lev–", &
y–lowAË¹Lev–
},

251 {"šˆ»dAË¹Lev–", &
»dAË¹Lev–
},

253 {"æßˆbuÎ‘Di¤u±S³ed", &
buÎ‘Di¤u±S³ed
},

255 {"æßˆh—lšgR©e", &
h—lšgR©e
},

256 {"æßˆh—lšgTim”", &
h—lšgTim”
},

258 {"šˆcŞlisiÚDamageInæiùed",&
cŞlisiÚDamageInæiùed
},

259 {"šˆcŞlisiÚEx¶osiÚDamage", &
cŞlisiÚEx¶osiÚDamage
},

263 {"æßˆshDampšg", &
shDampšg
},

264 {"æßˆcŞlisiÚSlİ", &
cŞlisiÚSlİ
},

265 {"æßˆw®lFriùiÚ", &
w®lFriùiÚ
},

266 {"æßˆw®lRadius", &
w®lRadius
},

268 {"æßˆ¶ay”Mass", &
¶ay”Mass
},

269 {"æßˆ¶ay”Radius", &
¶ay”Radius
},

270 {"æßˆ¶ay”FriùiÚ", &
¶ay”FriùiÚ
},

271 {"æßˆ¶ay”EÏ¡ic", &
¶ay”EÏ¡ic
},

272 {"æßˆbuÎ‘Mass", &
buÎ‘Mass
},

273 {"šˆËv–BÚus", &
Ëv–BÚus
},

274 {"šˆnumASrP©hs", &
numASrP©hs
},

276 {"", 
NULL
},

285 
asISütFunùiÚ
 *
	mfuncID
;

286 
boŞ
 
	mäomSüt
;

287 
¡ršg
 
	mfunùiÚName
;

288 
¡ršg
 
	msütName
;

289 
boŞ
 
	m·¿m1
;

290 } 
	t_sütFunùiÚName
;

295 
_sütFunùiÚName
 
	gsütFunùiÚName
[] =

298 {0, 
çl£
, "void‡s_initGameVars()", "as_initGameVars", false},

299 {0, 
çl£
, "void‡s_addAllScriptCommands()", "as_addAllScriptCommands", false},

300 {0, 
çl£
, "void‡s_shutdown()", "as_shutdown", false},

301 {0, 
çl£
, "void‡s_drawTerminalMenu()", "as_drawTerminalMenu", false},

302 {0, 
çl£
, "void‡s_loadFonts()", "as_loadFonts", false},

303 {0, 
çl£
, "void‡s_guiSetupGUI()", "scr_guiSetupGUI", false},

304 {0, 
çl£
, "void‡s_guiHªdËBu‰ÚP»ss(¡ršg &š)", "sü_guiHªdËBu‰ÚP»ss", 
Œue
},

305 {0, 
çl£
, "void‡s_guiHandleMouseOver(string &in)", "scr_guiHandleMouseOver", false},

306 {0, 
çl£
, "void‡s_setIntroValues()", "as_setIntroValues", false},

307 {0, 
çl£
, "void‡s_setdbValues()", "as_setdbValues", false},

308 {0, 
çl£
, "void setupDefaultCellValues()", "as_setupTransferCellValues", false},

309 {0, 
çl£
, "void‡s_processTransferAI()", "as_processTransferAI", false},

310 {0, 
çl£
, "void‡s_setDefaultTileSet()", "as_setDefaultTileSet", false},

311 {0, 
Œue
, "", "", 
çl£
},

319 
	gveùÜ
<
	g_sütFunùiÚName
> 
	gsütFunùiÚs
;

321 
	gnumCÚsŞeCommªds
;

326 cÚ¡ *
	$sys_g‘SütE¼Ü
(
”rNo
)

329 
”rNo
)

422 
	}
}

427 
	$sys_ş—nupSütEngše
(
boŞ
 
»¡¬t
)

430 if(
Œue
 =ğ
sütEngšeS¹ed
)

437 if(
çl£
 =ğ
»¡¬t
)

439 if(
sütFunùiÚName
)

445 
	}
}

450 
boŞ
 
	$sys_»gi¡”V¬ŸbËs
()

453 
»suÉ
 = 0;

454 
couÁ
 = 0;

456 if(
NULL
 =ğ
sütEngše
)

458 
	`cÚ_´št
(
Œue
,rue, "Script: Failedo„egister variables. ScriptEngine is‚ot„eady.");

459  
çl£
;

462 
ho¡V¬ŸbËs
[
couÁ
].
sütFunùiÚName
.
	`size
() > 1)

464 
»suÉ
 = 
sütEngše
->
	`Regi¡”Glob®Prİ”ty
(
ho¡V¬ŸbËs
[
couÁ
].
sütFunùiÚName
.
	`c_¡r
(), ho¡V¬ŸbËs[couÁ].
ho¡FunùiÚPŒ
);

466 if(
»suÉ
 < 0)

468 
	`cÚ_´št
(
Œue
,rue, "Süt: E¼Ü: Couldn'ˆ»gi¡” v¬ŸbË - [ % ]", 
ho¡V¬ŸbËs
[
couÁ
].
sütFunùiÚName
.
	`c_¡r
());

469  
çl£
;

472 
	`sys_£tFÚtCŞÜ
(0.0f, 1.0f, 0.0f, 1.0f);

473 
	`cÚ_´št
(
Œue
,rue, "Süt: Regi¡”ed v¬ŸbË - [ % ]", 
ho¡V¬ŸbËs
[
couÁ
].
sütFunùiÚName
.
	`c_¡r
());

474 
couÁ
++;

477  
Œue
;

478 
	}
}

483 
boŞ
 
	$sys_»gi¡”Objeù
()

486 
»tuºCode
;

488 
»tuºCode
 = 
sütEngše
->
	`Regi¡”ObjeùTy³
("ıVeù", (
ıVeù
), 
asOBJ_VALUE
 | 
asOBJ_POD
);

490 if(
»tuºCode
 < 0)

492 
	`cÚ_´št
(
Œue
,rue, "E¼Ü Regi¡”ObjeùTy³ [ % ]", 
	`sys_g‘SütE¼Ü
(
»tuºCode
));

493  
çl£
;

496 
»tuºCode
 = 
sütEngše
->
	`Regi¡”ObjeùPrİ”ty
("ıVeù", "æßˆx", 
	`asOFFSET
(
ıVeù
, 
x
));

498 if(
»tuºCode
 < 0)

500 
	`cÚ_´št
(
Œue
,rue, "E¼Ü Regi¡”ObjeùPrİ”ty [ % ]", 
	`sys_g‘SütE¼Ü
(
»tuºCode
));

501  
çl£
;

504 
»tuºCode
 = 
sütEngše
->
	`Regi¡”ObjeùPrİ”ty
("ıVeù", "æßˆy", 
	`asOFFSET
(
ıVeù
, 
y
));

506 if(
»tuºCode
 < 0)

508 
	`cÚ_´št
(
Œue
,rue, "E¼Ü Regi¡”ObjeùPrİ”ty 1 [ % ]", 
	`sys_g‘SütE¼Ü
(
»tuºCode
));

509  
çl£
;

512 
»tuºCode
 = 
sütEngše
->
	`Regi¡”Glob®Prİ”ty
("ıVeù…os™iÚ", (*è&
pos™iÚ
);

514 if(
»tuºCode
 < 0)

516 
	`cÚ_´št
(
Œue
,rue, "E¼Ü Regi¡”Glob®Prİ”ty [ % ]", 
	`sys_g‘SütE¼Ü
(
»tuºCode
));

517  
çl£
;

520  
Œue
;

521 
	}
}

526 
boŞ
 
	$sys_»gi¡”FunùiÚs
()

529 
r
 = 0;

530 
couÁ
 = 0;

532 if(
NULL
 =ğ
sütEngše
)

534 
	`cÚ_´št
(
Œue
,rue, "Failedo„egister functions. ScriptEngine is‚ot„eady.");

535  
çl£
;

538 
ho¡SütFunùiÚs
[
couÁ
].
sütFunùiÚName
.
	`size
() > 1)

540 if(!
	`¡r¡r
(
	`asG‘Lib¿ryO±iÚs
(), "AS_MAX_PORTABILITY"))

545 
r
 = 
sütEngše
->
	`Regi¡”Glob®FunùiÚ
(
ho¡SütFunùiÚs
[
couÁ
].
sütFunùiÚName
.
	`c_¡r
(), 
	`asFUNCTION
(ho¡SütFunùiÚs[couÁ].
ho¡FunùiÚPŒ
), 
asCALL_CDECL
);

549 
r
 = 
sütEngše
->
	`Regi¡”Glob®FunùiÚ
(
ho¡SütFunùiÚs
[
couÁ
].
sütFunùiÚName
.
	`c_¡r
(), 
	`asFUNCTION
(ho¡SütFunùiÚs[couÁ].
ho¡FunùiÚPŒ
), 
asCALL_STDCALL
);

552 if(
r
 < 0)

554 
	`cÚ_´št
(
Œue
,rue, "FaedØ»gi¡”Glob®FunùiÚ [ % ]", 
ho¡SütFunùiÚs
[
couÁ
].
sütFunùiÚName
.
	`c_¡r
());

555 
	`cÚ_´št
(
Œue
,rue, "E¼Ü [ % ]", 
	`sys_g‘SütE¼Ü
(
r
));

556  
çl£
;

559 
	`sys_£tFÚtCŞÜ
(0.0f, 0.0f, 1.0f, 1.0f);

560 
	`cÚ_´št
(
Œue
,rue, "Süt: Regi¡”ed funùiÚ - [ % ]", 
ho¡SütFunùiÚs
[
couÁ
].
sütFunùiÚName
.
	`c_¡r
());

561 
couÁ
++;

564  
Œue
;

565 
	}
}

571 
boŞ
 
	$sys_feIÁoMemÜy
(*
whichFe
)

574 
ALLEGRO_FILE
 *
feHªdË
 = 
NULL
;

575 
št64_t
 
feSize
;

576 
feName
[
MAX_PATH
];

578 
	`¡rıy
(
feName
, 
whichFe
);

580 
feHªdË
 = 
	`®_fİ’
(
feName
, "r");

582 if(
NULL
 =ğ
feHªdË
)

584 
	`cÚ_´štUpd©e
(
Œue
, "O³À”rÜ [ % ]", 
feName
);

585  
çl£
;

588 
feSize
 = 
	`®_fsize
(
feHªdË
);

589 
	`cÚ_´št
(
Œue
,rue, "Sizoàsüˆ[ %˜]", 
feSize
);

593 if(
feLoÿtiÚ
)

595 
	`ä“
(
feLoÿtiÚ
);

596 
feLoÿtiÚ
 = 
NULL
;

600 
feLoÿtiÚ
 = (*è
	`m®loc
((è* (è
feSize
);

602 if(
NULL
 =ğ
feLoÿtiÚ
)

604 
	`sys_”rÜF©®
((*è
__FILE__
, 
__LINE__
, (*è"MemÜy‡ÎoÿtiÚ faed fÜ [ % ]", 
feName
);

605  
çl£
;

608 if(
	`®_ä—d
(
feHªdË
, (*è
feLoÿtiÚ
, (
size_t
è
feSize
) <= 0)

609 
	`sys_”rÜF©®
("sys_feIÁoMemÜy", 
__LINE__
, (*è"R—dƒ¼Ü [ % ]", 
feName
);

611 
	`®_fşo£
(
feHªdË
);

613 
feLoÿtiÚ
[
feSize
 - 1] = '\0';

614  
Œue
;

615 
	}
}

620 
boŞ
 
	$sys_lßdAndCompeSüts
()

623 
feCouÁ”
 = 0;

624 
»tCode
 = 0;

626 
»tCode
 = 
bud”
.
	`S¹NewModuË
(
sütEngše
, 0);

628 if(
»tCode
 < 0)

630 
	`cÚ_´št
(
Œue
,rue, "Error: Failedo start‚ew module");

631  
çl£
;

634 
sütInfo
[
feCouÁ”
].
sütFeName
.
	`size
() > 1)

639 if(
	`sys_feIÁoMemÜy
(
sütInfo
[
feCouÁ”
].
sütFeName
.
	`c_¡r
()è=ğ
çl£
)

641 
	`cÚ_´št
(
Œue
,rue, "E¼Ü: FaedØlßd sütF[ % ]", 
sütInfo
[
feCouÁ”
].
sütFeName
.
	`c_¡r
());

642  
çl£
;

645 
»tCode
 = 
bud”
.
	`AddSeùiÚFromMemÜy
(
sütInfo
[
feCouÁ”
].
sütName
.
	`c_¡r
(), 
feLoÿtiÚ
, (è
	`¡¾’
(fileLocation), 0);

647 if(
»tCode
 < 0)

649 
	`cÚ_´št
(
Œue
,rue, "E¼Ü: FaedØadd süˆf[ % ]", 
sütInfo
[
feCouÁ”
].
sütFeName
.
	`c_¡r
());

650  
çl£
;

653 
feCouÁ”
++;

659 if(
bud”
.
	`BudModuË
() < 0)

661 
	`cÚ_´št
(
Œue
,rue, "Error: Failedo buildhe module.");

662  
çl£
;

669 if(
feLoÿtiÚ
)

671 
	`ä“
(
feLoÿtiÚ
);

672 
feLoÿtiÚ
 = 
NULL
;

675  
Œue
;

676 
	}
}

681 
	$sü_Ouut
(cÚ¡ 
asSMes§geInfo
 *
msg
, *
·¿m
)

684 cÚ¡ *
ty³
 = "ERR ";

686 if(
msg
->
ty³
 =ğ
asMSGTYPE_WARNING
)

687 
ty³
 = "WARN";

689 if(
msg
->
ty³
 =ğ
asMSGTYPE_INFORMATION
)

690 
ty³
 = "INFO";

692 
	`cÚ_´št
(
Œue
,rue, "% (%d, %dè: % : %s", 
msg
->
£ùiÚ
, msg->
row
, msg->
cŞ
, 
ty³
, msg->
mes§ge
);

694 if(
çl£
 =ğ
sütEngšeS¹ed
)

695 
	`´štf
("% (%d, %dè: % : %s\n", 
msg
->
£ùiÚ
, msg->
row
, msg->
cŞ
, 
ty³
, msg->
mes§ge
);

696 
	}
}

701 
boŞ
 
	$sys_š™SütEngše
()

704 
_sütFunùiÚName
 
‹mpFunùiÚName
;

706 
sütEngše
 = 
	`asC»©eSütEngše
(
ANGELSCRIPT_VERSION
);

708 if(0 =ğ
sütEngše
)

710 
sütEngšeS¹ed
 = 
çl£
;

711 
	`sys_”rÜF©®
(
__FILE__
, 
__LINE__
, "Süt: E¼Ü: FaedØü—‹ süˆ’gše- [ % ]", 
	`sys_g‘SütE¼Ü
(0));

714 
	`io_logToFe
("Script: Scriptengine started.");

716 
	`Regi¡”StdSŒšg
(
sütEngše
);

718 
	`Regi¡”SütA¼ay
(
sütEngše
, 
Œue
);

721 
sütEngše
->
	`S‘Mes§geC®lback
(
	`asFUNCTION
(
sü_Ouut
), 0, 
asCALL_CDECL
);

724 
	`io_logToFe
("Süt: SütEngšv”siÚ - [ % ]", 
	`asG‘Lib¿ryV”siÚ
());

727 
	`io_logToFe
("Süt: O±iÚ - [ % ]", 
	`asG‘Lib¿ryO±iÚs
());

729 if(
çl£
 =ğ
	`sys_»gi¡”Objeù
())

731 
	`RET_FALSE
("Script: Error: Couldn't„egister objects.", "");

735 if(
çl£
 =ğ
	`sys_»gi¡”V¬ŸbËs
())

737 
	`RET_FALSE
("Script: Error: Couldn't„egister variables.", "");

741 if(
çl£
 =ğ
	`sys_»gi¡”FunùiÚs
())

743 
	`RET_FALSE
("Script: Error: Couldn't„egister functions.", "");

746 if(
çl£
 =ğ
	`sys_lßdAndCompeSüts
())

747 
	`RET_FALSE
("Script: Error: Couldn't†oad or compile scripts.","");

749 
couÁ
 = 0;

750 
numSütFunùiÚs
 = 0;

755 
sütFunùiÚName
[
couÁ
].
funùiÚName
.
	`size
() > 1)

757 
numSütFunùiÚs
++;

758 
couÁ
++;

764 
sütFunùiÚs
.
	`»£rve
(
numSütFunùiÚs
);

765 
	`cÚ_´št
(
Œue
,rue, "Numb” oàfunùiÚ š süˆ[ %˜]", 
numSütFunùiÚs
);

770 
i
 = 0; i !ğ
numSütFunùiÚs
; i++)

772 
‹mpFunùiÚName
.
funcID
 = 
sütEngše
->
	`G‘ModuË
(0)->
	`G‘FunùiÚByDeş
(
sütFunùiÚName
[
i
].
funùiÚName
.
	`c_¡r
());

774 if(
‹mpFunùiÚName
.
funcID
 < 0)

776 
	`cÚ_´št
(
Œue
,rue, "FaedØg‘ funùiÚ ID fÜ [ % ] E¼Ü [ % ]", 
sütFunùiÚName
[
i
].
funùiÚName
.
	`c_¡r
(), 
	`sys_g‘SütE¼Ü
(
‹mpFunùiÚName
.
funcID
));

777  
çl£
;

783 
‹mpFunùiÚName
.
·¿m1
 = 
sütFunùiÚName
[
i
].param1;

784 
‹mpFunùiÚName
.
funùiÚName
 = 
sütFunùiÚName
[
i
].functionName;

785 
‹mpFunùiÚName
.
sütName
 = 
sütFunùiÚName
[
i
].scriptName;

786 
‹mpFunùiÚName
.
äomSüt
 = 
sütFunùiÚName
[
i
].fromScript;

788 
sütFunùiÚs
.
	`push_back
(
‹mpFunùiÚName
);

794 
cÚ‹xt
 = 
sütEngše
->
	`C»©eCÚ‹xt
();

796 
sütEngšeS¹ed
 = 
Œue
;

797  
Œue
;

798 
	}
}

804 
boŞ
 
	$sys_execu‹SütFunùiÚ
(
¡ršg
 
funùiÚName
, sŒšg 
funcP¬am
)

807 
i
 = 0;

811 if(
funùiÚName
.
	`size
() < 1)

813 
	`cÚ_´štUpd©e
(
Œue
, "Error: Failedo…rovide function‚ame.");

814  
çl£
;

819 if(
NULL
 =ğ
sütEngše
)

821 
	`cÚ_´štUpd©e
(
Œue
, "Couldn'ˆexecu‹ [ % ]. EngšnÙ„—dy.", 
funùiÚName
);

822  
çl£
;

825 if(
NULL
 =ğ
cÚ‹xt
)

827 
	`cÚ_´štUpd©e
(
Œue
, "Couldn'ˆexecu‹ [ % ]. SüˆcÚ‹xˆnÙ„—dy", 
funùiÚName
);

828  
çl£
;

833 
i
 = 0; i !ğ
numSütFunùiÚs
; i++)

838 #ià
	`defšed
(
WIN32
)

839 if(
	`_¡ricmp
(
sütFunùiÚs
[
i
].
sütName
, 
funùiÚName
) == 0)

841 if(
sütFunùiÚs
[
i
].
sütName
 =ğ
funùiÚName
)

846 if(
i
 =ğ
numSütFunùiÚs
)

848 
	`cÚ_´št
(
Œue
, 
çl£
, "Couldn'ˆfšd funùiÚ‚am[ % ]", 
funùiÚName
.
	`c_¡r
());

849  
çl£
;

857 
j
 = 
cÚ‹xt
->
	`P»·»
(
sütFunùiÚs
[
i
].
funcID
);

859 if(
j
 < 0)

861 
	`cÚ_´št
(
Œue
,rue, "FaedØ´•¬thcÚ‹xˆfÜ [ % ].", 
sütFunùiÚs
[
i
].
funùiÚName
.
	`c_¡r
());

862  
çl£
;

869 if(
Œue
 =ğ
sütFunùiÚs
[
i
].
·¿m1
)

871 
	`io_logToFe
("P¬am‘”Ø·s tØsüˆ[ % ]", 
funcP¬am
.
	`c_¡r
());

873 
cÚ‹xt
->
	`S‘ArgAdd»ss
(0, &
funcP¬am
);

879 
»t
 = 
cÚ‹xt
->
	`Execu‹
();

881 if(
»t
 !ğ
asEXECUTION_FINISHED
)

886 if(
»t
 =ğ
asEXECUTION_ABORTED
)

887 
	`cÚ_´št
(
Œue
,rue, "Script: Error: The script was‡borted before it could finish. Probably itimed out.");

889 if(
»t
 =ğ
asEXECUTION_EXCEPTION
)

891 
	`cÚ_´št
(
Œue
,rue, "Script: Error: The scriptƒnded with‡nƒxception.");

895 
asISütFunùiÚ
 *
func
 = 
cÚ‹xt
->
	`G‘Exû±iÚFunùiÚ
();

896 
	`cÚ_´št
(
Œue
,rue, "Func: [ % ]", 
func
->
	`G‘Deş¬©iÚ
());

897 
	`cÚ_´št
(
Œue
,rue, "ModuË: [ % ]", 
func
->
	`G‘ModuËName
());

898 
	`cÚ_´št
(
Œue
,rue, "SeùiÚ: [ % ]", 
func
->
	`G‘SütSeùiÚName
());

899 
	`cÚ_´št
(
Œue
,rue, "Lše: [ % ]", 
cÚ‹xt
->
	`G‘Exû±iÚLšeNumb”
());

900 
	`cÚ_´št
(
Œue
,rue, "Desc: [ % ]", 
cÚ‹xt
->
	`G‘Exû±iÚSŒšg
());

903 
	`cÚ_´št
(
Œue
,rue, "Thsüˆ’ded fÜ somunfÜe£’„—sÚ [ %˜]", 
»t
);

905  
çl£
;

908  
Œue
;

909 
	}
}

919 
boŞ
 
	$sys_addSütCÚsŞeFunùiÚ
(
¡ršg
 
funcName
, sŒšg 
funcPŒ
, 
boŞ
 
£tP¬am
)

922 
_sütFunùiÚName
 
‹mpSütFunùiÚ
;

924 
‹mpSütFunùiÚ
.
funùiÚName
 = 
funcPŒ
;

925 
‹mpSütFunùiÚ
.
sütName
 = 
funcName
;

926 
‹mpSütFunùiÚ
.
äomSüt
 = 
Œue
;

927 
‹mpSütFunùiÚ
.
·¿m1
 = 
£tP¬am
;

929 
‹mpSütFunùiÚ
.
funcID
 = 
sütEngše
->
	`G‘ModuË
(0)->
	`G‘FunùiÚByDeş
ÑempSütFunùiÚ.
funùiÚName
.
	`c_¡r
());

931 if(
‹mpSütFunùiÚ
.
funcID
 < 0)

933 
	`cÚ_´št
(
Œue
,rue, "E¼: FaedØg‘ funùiÚ ID fÜ [ % ]. E¼Ü [ % ]", 
‹mpSütFunùiÚ
.
funùiÚName
.
	`c_¡r
(), 
	`sys_g‘SütE¼Ü
ÑempSütFunùiÚ.
funcID
));

934  
çl£
;

941 
sütFunùiÚs
.
	`push_back
(
‹mpSütFunùiÚ
);

942 
numSütFunùiÚs
++;

943  
Œue
;

944 
	}
}

951 
boŞ
 
	$sys_»¡¬tSütEngše
()

954 
	`cÚ_´št
(
Œue
,rue, "Restarting Scriptingƒngine");

955 
	`sys_ş—nupSütEngše
(
Œue
);

957 
numSütFunùiÚs
 = 0;

958 
cÚCu¼’tNumCommªds
 = 0;

960 
	`cÚ_addCÚsŞeCommªds
();

962 
	`sys_š™SütEngše
();

963 
	`sys_execu‹SütFunùiÚ
("as_initGameVars", "");

965  
Œue
;

968 
	}
}

974 
	$sys_´štV¬ŸbËs
()

977 
asISütCÚ‹xt
 *
ùx
 = 
	`asG‘AùiveCÚ‹xt
();

978 
asISütEngše
 *
’gše
 = 
ùx
->
	`G‘Engše
();

980 
¡ackLev–
 = 0;

982 
ty³Id
 = 
ùx
->
	`G‘ThisTy³Id
();

983 *
v¬Poš‹r
 = 
ùx
->
	`G‘ThisPoš‹r
();

985 if(
ty³Id
)

987 
	`io_logToFe
("hi ğ0x%x\n", 
v¬Poš‹r
);

990 
numV¬s
 = 
ùx
->
	`G‘V¬CouÁ
();

992 
n
 = 0;‚ < 
numV¬s
;‚++)

994 
ty³Id
 = 
ùx
->
	`G‘V¬Ty³Id
(
n
);

995 *
v¬Poš‹r
 = 
ùx
->
	`G‘Add»ssOfV¬
(
n
);

997 if(
ty³Id
 =ğ
’gše
->
	`G‘Ty³IdByDeş
("int"))

999 
	`io_logToFe
(" % ğ%d\n", 
ùx
->
	`G‘V¬Deş¬©iÚ
(
n
, 
¡ackLev–
), *(*)
v¬Poš‹r
);

1001 if(
ty³Id
 =ğ
’gše
->
	`G‘Ty³IdByDeş
("string"))

1003 
¡d
::
¡ršg
 *
¡r
 = (¡d::¡ršg*)
v¬Poš‹r
;

1005 if(
¡r
)

1006 
	`io_logToFe
(" % ğ'%s'\n", 
ùx
->
	`G‘V¬Deş¬©iÚ
(
n
, 
¡ackLev–
), 
¡r
->
	`c_¡r
());

1008 
	`io_logToFe
(" % ğ<nuÎ>\n", 
ùx
->
	`G‘V¬Deş¬©iÚ
(
n
, 
¡ackLev–
));

1012 
	`io_logToFe
(" % ğ{...}\n", 
ùx
->
	`G‘V¬Deş¬©iÚ
(
n
, 
¡ackLev–
));

1015 
	}
}

	@../src/system/sys_shutdown.cpp

1 
	~"../../hdr/sys_glob®s.h
"

6 
	$sys_”rÜF©®
 (cÚ¡ *
sourûfe
, 
sourûlše
, cÚ¡ *
‹xt
, ...)

9 
‹xtBufãr
[
MAX_STRING_SIZE
];

10 
‹mpBufãr
[
MAX_STRING_SIZE
];

11 
va_li¡
 
¬gs
;

13 
	`va_¡¬t
 (
¬gs
, 
‹xt
);

14 
	`v¢´štf
 (
‹xtBufãr
, 
MAX_STRING_SIZE
, 
‹xt
, 
¬gs
);

15 
	`va_’d
 (
¬gs
);

17 ià(
	`¡¾’
 (
‹xtBufãr
è> 
MAX_STRING_SIZE
 - 1)

18 
	`¡rıy
 (
‹xtBufãr
, "The string…assedo sys_errorFatal isoo†ong.");

20 ià(
	`¡¾’
 (
sourûfe
è+ sŒËÀ(
‹xtBufãr
è> 
MAX_STRING_SIZE
 - 4)

21 
	`¡rıy
 (
‹mpBufãr
, "The string…assedo sys_errorFatal isoo†ong.");

23 
	`¥rštf
 (
‹mpBufãr
, "Fe: [ % ] Lše: [ %˜] - %s", 
sourûfe
, 
sourûlše
, 
‹xtBufãr
);

25 ià(
Œue
 =ğ
feLoggšgOn
)

26 
	`io_logToFe
 ("ERROR: %s", 
‹mpBufãr
);

28 
	`´štf
 ("Couldn'ˆ´šˆ”rÜØlogf[ % ]", 
‹xtBufãr
);

30 
	`sys_shutDown
();

32 
	`ex™
 (-1);

33 
	}
}

38 
boŞ
 
	$sys_shutDown
()

41 
	`®_de¡roy_mu‹x
(
mu‹xWayPoštsR—dy
);

43 
	`io_logToFe
("Prof- Av”agtimfÜe [ %3.6à]", 
´ofeTimeTÙ®
 / 
´ofeTimeCouÁ
);

45 
	`sys_ä“PhysicsEngše
();

47 
	`sys_execu‹SütFunùiÚ
 ("as_shutdown", "");

49 
	`gam_ä“TeTexMemÜy
();

51 
	`gam_ä“SrF›ld
();

53 
	`®_de¡roy_fÚt
 (
butInFÚt
);

55 
	`®_shutdown_fÚt_addÚ
();

57 
	`sys_»Ëa£Sound
();

59 
	`®_de¡roy_di¥Ïy
 (
di¥Ïy
);

61 
	`io_şo£LogFe
();

63 
	`sys_ş—nupSütEngše
(
çl£
);

64 
	}
}

	@../src/system/sys_sound.cpp

1 
	~"../../hdr/sys_glob®s.h
"

3 
_sounds
 
	gsound
[] =

5 {
NULL
, "cŞlosiÚ1.wav", 
çl£
},

6 {
NULL
, "’dT¿nsmissiÚ1.wav", 
çl£
},

7 {
NULL
, "g»’AË¹.wav", 
çl£
},

8 {
NULL
, "liá1.wav", 
çl£
},

9 {
NULL
, "süŞlB“ps.wav", 
çl£
},

10 {
NULL
, "Œªsãrd—dlock.wav", 
çl£
},

11 {
NULL
, "y–lowAË¹.wav", 
çl£
},

12 {
NULL
, "cÚsŞe1.wav", 
çl£
},

13 {
NULL
, "’dT¿nsmissiÚ2.wav", 
çl£
},

14 {
NULL
, "key´essBad.wav", 
çl£
},

15 {
NULL
, "liá2.wav", 
çl£
},

16 {
NULL
, "¡¬t1.wav", 
çl£
},

17 {
NULL
, "ŒªsãrMove.wav", 
çl£
},

18 {
NULL
, "cÚsŞe2.wav", 
çl£
},

19 {
NULL
, "’”gyH—l.wav", 
çl£
},

20 {
NULL
, "keyP»ssGood.wav", 
çl£
},

21 {
NULL
, "liá3.wav", 
çl£
},

22 {
NULL
, "¡¬t2.wav", 
çl£
},

23 {
NULL
, "ŒªsãrSge1.wav", 
çl£
},

24 {
NULL
, "damage.wav", 
çl£
},

25 {
NULL
, "ex¶ode1.wav", 
çl£
},

26 {
NULL
, "Ï£r.wav", 
çl£
},

27 {
NULL
, "lowEÃrgy.wav", 
çl£
},

28 {
NULL
, "¡¬tAÎ.wav", 
çl£
},

29 {
NULL
, "ŒªsãrSge2.wav", 
çl£
},

30 {
NULL
, "di¤u±Ü.wav", 
çl£
},

31 {
NULL
, "ex¶ode2.wav", 
çl£
},

32 {
NULL
, "Ëv–Shutdown.wav", 
çl£
},

33 {
NULL
, "»dAË¹.wav", 
çl£
},

34 {
NULL
, "Œªsãr1.wav", 
çl£
},

35 {
NULL
, "ŒªsãrS¹.wav", 
çl£
},

36 {
NULL
, "doÜ.wav", 
çl£
}

40 
	gnumSoundDeviûs
 = 1;

41 
boŞ
 
	gsoundAvaabË
 = 
Œue
;

42 
	gas_numSam¶es
;

43 
	gas_numMuÉiSam¶es
;

44 
boŞ
 
	gas_u£Sound
;

45 
boŞ
 
	g·u£Sound
 = 
çl£
;

46 
	gvŞumeLev–
;

47 
_muÉiSounds
 *
	gmuÉiSounds
;

52 
	$sys_·u£SoundSy¡em
(
boŞ
 
ÃwS‹
)

55 
·u£Sound
 = 
ÃwS‹
;

56 
	}
}

61 
boŞ
 
	$sys_¡¬tSound
()

64 ià(
çl£
 =ğ
as_u£Sound
)

66 
soundAvaabË
 = 
çl£
;

67 
	`io_logToFe
("WARN: Sound disabled in config file.");

68  
çl£
;

71 ià(
çl£
 =ğ
	`®_š¡®l_audio
())

73 
soundAvaabË
 = 
çl£
;

74  
çl£
;

77 ià(
çl£
 =ğ
	`®_š™_acodec_addÚ
())

79 
soundAvaabË
 = 
çl£
;

80  
çl£
;

84 
ušt32_t
 
v”siÚ
 = 
	`®_g‘_®Ëgro_acodec_v”siÚ
();

85 
majÜ
 = 
v”siÚ
 >> 24;

86 
mšÜ
 = (
v”siÚ
 >> 16) & 255;

87 
»visiÚ
 = (
v”siÚ
 >> 8) & 255;

88 
»Ëa£
 = 
v”siÚ
 & 255;

90 
	`io_logToFe
("Sound started");

91 
	`io_logToFe
("--------------");

92 
	`io_logToFe
("%i.%i.%˜R–—£: %i", 
majÜ
, 
mšÜ
, 
»visiÚ
, 
»Ëa£
);

96 ià((
as_numSam¶es
 <ğ0è|| (
as_numMuÉiSam¶es
 <= 0))

98 
	`io_logToFe
("Error:‡s_numSamples has invalid value. Check script.");

99 
soundAvaabË
 = 
çl£
;

100  
çl£
;

103 ià(
çl£
 =ğ
	`®_»£rve_§m¶es
(
as_numSam¶es
))

105 
	`cÚ_´št
(
Œue
,rue, "E¼Ü: Could‚Ù„e£rv§m¶e [ %˜]", 
as_numSam¶es
);

106 
soundAvaabË
 = 
çl£
;

107  
çl£
;

110 
muÉiSounds
 = 
	`®_m®loc
((
_muÉiSounds
è* 
as_numMuÉiSam¶es
);

111 ià(
NULL
 =ğ
muÉiSounds
)

113 
	`cÚ_´št
(
Œue
, 
çl£
, "ERROR: Failedo get memoryo hold multiSamples");

114 
soundAvaabË
 = 
çl£
;

115  
çl£
;

118 
soundAvaabË
 = 
Œue
;

119 
vŞumeLev–
 = volumeLevel / 100.0f;

121  
Œue
;

122 
	}
}

127 
	$sys_»Ëa£Sound
()

130 ià(
çl£
 =ğ
soundAvaabË
)

133 
	`sys_¡İAÎSounds
();

135 
i
 = 0; i !ğ
NUM_SOUNDS
; i++)

136 
	`®_de¡roy_§m¶e_š¡ªû
(
sound
[
i
].
š¡ªû
);

138 
	`®_ä“
(
muÉiSounds
);

140 
	`®_unš¡®l_audio
();

141 
	}
}

146 
	$sys_lßdSoundSam¶es
()

149 ià(
çl£
 =ğ
soundAvaabË
)

152 
i
 = 0; i !ğ
NUM_SOUNDS
; i++)

154 
	`¡rıy
(
lßdšgStus
, 
sound
[
i
].
feName
);

155 
lßdšgB¬P”ûÁ
 +ğ1.0à/ 
numImages
;

156 
	`®_»¡
(
´og»ssB¬LßdTimes
);

158 
sound
[
i
].
§m¶e
 = 
	`®_lßd_§m¶e
(sound[i].
feName
);

159 ià(
NULL
 =ğ
sound
[
i
].
§m¶e
)

161 
	`cÚ_´št
(
Œue
, 
çl£
, "E¼Ü: FaedØlßd sam¶[ % ]", 
sound
[
i
].
feName
);

162 
sound
[
i
].
lßdedOk
 = 
çl£
;

166 
	`cÚ_´št
(
Œue
, 
çl£
, "Lßded sam¶[ % ]", 
sound
[
i
].
feName
);

167 
sound
[
i
].
lßdedOk
 = 
Œue
;

168 
sound
[
i
].
š¡ªû
 = 
	`®_ü—‹_§m¶e_š¡ªû
(sound[i].
§m¶e
);

169 
	`®_©ch_§m¶e_š¡ªû_to_mix”
(
sound
[
i
].
š¡ªû
, 
	`®_g‘_deçuÉ_mix”
());

170 
	`®_£t_§m¶e_š¡ªû_gaš
(
sound
[
i
].
š¡ªû
, 
vŞumeLev–
);

174 
i
 = 0; i !ğ
as_numMuÉiSam¶es
; i++)

176 
muÉiSounds
[
i
].
š¡ªû
 = 
	`®_ü—‹_§m¶e_š¡ªû
(
sound
[0].
§m¶e
);

179 
lßdšgB¬P”ûÁ
 = 0.0f;

180 
	}
}

188 
	$sys_¶ayMuÉiSam¶e
(
whichSound
, 
·n
, 
ALLEGRO_PLAYMODE
 
loİ
)

191 
šdexCouÁ
 = 0; indexCouÁ !ğ
as_numMuÉiSam¶es
; indexCount++)

193 ià(
çl£
 =ğ
	`®_g‘_§m¶e_š¡ªû_¶ayšg
(
muÉiSounds
[
šdexCouÁ
].
š¡ªû
))

196 
muÉiSounds
[
šdexCouÁ
].
š¡ªû
 = 
	`®_ü—‹_§m¶e_š¡ªû
(
sound
[
whichSound
].
§m¶e
);

197 
	`®_£t_§m¶e_š¡ªû_gaš
(
muÉiSounds
[
šdexCouÁ
].
š¡ªû
, 
vŞumeLev–
);

199 
	`®_©ch_§m¶e_š¡ªû_to_mix”
(
muÉiSounds
[
šdexCouÁ
].
š¡ªû
, 
	`®_g‘_deçuÉ_mix”
());

201 
	`®_£t_§m¶e_š¡ªû_·n
(
muÉiSounds
[
šdexCouÁ
].
š¡ªû
, 
·n
);

202 
	`®_£t_§m¶e_š¡ªû_¶aymode
(
muÉiSounds
[
šdexCouÁ
].
š¡ªû
, 
loİ
);

203 
	`®_¶ay_§m¶e_š¡ªû
(
muÉiSounds
[
šdexCouÁ
].
š¡ªû
);

207 
	`cÚ_´št
(
Œue
, 
çl£
, "WARN: N“dØšü—£‡s_numMuÉiSam¶es. Süˆ£‰šg i tØlow. Cu¼’y [ %˜]", 
as_numMuÉiSam¶es
);

208 
	}
}

213 
boŞ
 
	$sys_isSoundPÏyšg
(
whichSound
)

216 ià(
çl£
 =ğ
soundAvaabË
)

217  
çl£
;

219  
	`®_g‘_§m¶e_š¡ªû_¶ayšg
(
sound
[
whichSound
].
š¡ªû
);

220 
	}
}

225 
boŞ
 
	$sys_¶aySound
(
whichSound
, 
·n
, 
ALLEGRO_PLAYMODE
 
loİ
)

228 ià((
çl£
 =ğ
soundAvaabË
è|| (
Œue
 =ğ
·u£Sound
))

229  
çl£
;

231 ià(
Œue
 =ğ
	`sys_isSoundPÏyšg
(
whichSound
))

233 
	`sys_¶ayMuÉiSam¶e
(
whichSound
, 
·n
, 
loİ
);

234  
Œue
;

237 
	`®_£t_§m¶e_š¡ªû_·n
(
sound
[
whichSound
].
š¡ªû
, 
·n
);

238 
	`®_£t_§m¶e_š¡ªû_¶aymode
(
sound
[
whichSound
].
š¡ªû
, 
loİ
);

241 
	`®_¶ay_§m¶e_š¡ªû
(
sound
[
whichSound
].
š¡ªû
);

243  
Œue
;

244 
	}
}

249 
	$sys_¡İSound
(
whichSound
)

252 ià(
çl£
 =ğ
soundAvaabË
)

255 
	`®_¡İ_§m¶e_š¡ªû
(
sound
[
whichSound
].
š¡ªû
);

256 
	}
}

261 
	$sys_¡İAÎSounds
()

264 ià(
çl£
 =ğ
soundAvaabË
)

267 
i
 = 0; i !ğ
NUM_SOUNDS
; i++)

268 
	`®_¡İ_§m¶e_š¡ªû
(
sound
[
i
].
š¡ªû
);

270 
	}
}

275 
	$sys_¶aySoundFromSüt
(
whichSound
, 
·n
, 
boŞ
 
loİIt
)

278 
ALLEGRO_PLAYMODE
 
loİV®ue
;

280 ià((
whichSound
 < 0è|| (whichSound > 
NUM_SOUNDS
))

282 
	`cÚ_´št
(
Œue
, 
çl£
, "E¼Ü: Inv®id sound index…as£dØsys_¶aySoundFromSüˆ- [ %˜]", 
whichSound
);

285 ià(
loİIt
 =ğ
Œue
)

286 
loİV®ue
 = 
ALLEGRO_PLAYMODE_LOOP
;

288 
loİV®ue
 = 
ALLEGRO_PLAYMODE_ONCE
;

290 
	`sys_¶aySound
(
whichSound
, 
·n
, 
loİV®ue
);

291 
	}
}

	@../src/system/sys_startup.cpp

1 
	~"../../hdr/sys_glob®s.h
"

2 
	~"../../hdr/sy¡em/sys_sound.h
"

4 
ALLEGRO_THREAD
 *
	glßdšgTh»ad
;

5 
boŞ
 
	g¡İLßdšgTh»ad
;

6 
boŞ
 
	glßdedAÎB™m­s
;

7 
boŞ
 
	glßdšgTh»adHasFšished
;

12 *
	$sys_runLßdTh»ad
(
ALLEGRO_THREAD
 *
th»ad
, *
¬g
)

15 
	`®_£t_physfs_fe_š‹rçû
();

17 
lßdšgTh»adHasFšished
 = 
çl£
;

19 ià(
çl£
 =ğ
	`io_lßdAÎImages
())

21 
	`cÚ_£tCŞÜ
(1.0f, 0.0f, 0.0f, 1.0f);

22 
	`cÚ_´št
(
Œue
, 
çl£
, "Failedo†oad image file");

25 
lßdedAÎB™m­s
 = 
Œue
;

27 
	`gam_g‘DBInfÜm©iÚ
();

29 
	`gam_lßdAÎLev–s
();

31 
	`sys_lßdSoundSam¶es
();

33 if(
çl£
 =ğ
	`io_lßdSideV›wD©a
("sideview.dat"))

34 
	`sys_”rÜF©®
(
__FILE__
, 
__LINE__
, "Error: Could‚ot†oad sideview data");

36 if(
çl£
 =ğ
	`io_doKeyBšdšgs
("keybind.dat"))

37 
	`sys_”rÜF©®
(
__FILE__
, 
__LINE__
, "Error: Could‚ot†oad keybind file");

39 
	`gam_ÿlcTeTexCoÜds
();

44 
	`gam_£tupPÏy”V®ues
(0);

46 
	`gam_£tupSrF›ld
();

48 
¡İLßdšgTh»ad
 = 
Œue
;

50 !
	`®_g‘_th»ad_should_¡İ
(
th»ad
))

56 
lßdšgTh»adHasFšished
 = 
Œue
;

57 
	}
}

62 
boŞ
 
	$sys_¡¬tOnû
()

65 
	`io_¡¬tLogFe
("logfile.log");

67 
	`cÚ_š™CÚsŞe
();

69 
	`ai_£tupAIT»e
();

71 if(
çl£
 =ğ
	`io_¡¬tFeSy¡em
(
Œue
))

72 
	`sys_”rÜF©®
(
__FILE__
, 
__LINE__
, "Could‚ot start…ackfile");

74 
	`®_£t_physfs_fe_š‹rçû
();

76 if(
çl£
 =ğ
	`sys_š™SütEngše
())

77 
	`sys_”rÜF©®
("sys_š™Sü±Engše", 
__LINE__
, "Could‚ot start scriptƒngine");

79 if(!
	`®_š™
())

81 
	`®_show_Çtive_mes§ge_box
(
di¥Ïy
, "E¼Ü", "E¼Ü", "FaedØš™Ÿliz®Ëgro!", 
NULL
, 
ALLEGRO_MESSAGEBOX_ERROR
);

82  
çl£
;

88 
	`sys_execu‹SütFunùiÚ
("as_initGameVars", "");

89 
	`sys_execu‹SütFunùiÚ
("as_addAllScriptCommands", "");

91 
ušt32_t
 
v”siÚ
 = 
	`®_g‘_®Ëgro_v”siÚ
();

92 
	`cÚ_£tCŞÜ
(1.0f, 1.0f, 0.0f, 1.0f);

93 
	`cÚ_´št
(
Œue
, 
çl£
, "Allegro Version");

94 
	`cÚ_´št
(
Œue
, 
çl£
, "---------------");

95 
	`cÚ_´št
(
Œue
, 
çl£
, "%i.%i.%˜R–—£ %i", 
v”siÚ
 >> 24, (version >> 16) & 255, (version >> 8) & 255, version & 255);

97 if(!
	`®_š¡®l_keybßrd
())

99 
	`®_show_Çtive_mes§ge_box
(
di¥Ïy
, "E¼Ü", "E¼Ü", "FaedØš™Ÿliz®_š¡®l_keybßrd!", 
NULL
, 
ALLEGRO_MESSAGEBOX_ERROR
);

100  
çl£
;

103 
	`io_logToFe
("INFO: Keyboard installed.");

107 
di¥Ïy
 = 
	`®_ü—‹_di¥Ïy
(
wšWidth
, 
wšHeight
);

109 if(!
di¥Ïy
)

111 
	`®_show_Çtive_mes§ge_box
(
di¥Ïy
, "E¼Ü", "E¼Ü", "FaedØš™Ÿlizdi¥Ïy!", 
NULL
, 
ALLEGRO_MESSAGEBOX_ERROR
);

112  
çl£
;

115 
	`®_š™_fÚt_addÚ
();

116 
butInFÚt
 = 
	`®_ü—‹_butš_fÚt
();

118 if(
NULL
 =ğ
butInFÚt
)

120 
	`®_show_Çtive_mes§ge_box
(
di¥Ïy
, "E¼Ü", "E¼Ü", "FaedØš™Ÿlizbuˆš fÚt", 
NULL
, 
ALLEGRO_MESSAGEBOX_ERROR
);

121  
çl£
;

124 
	`io_logToFe
("INFO: Font‡ddon installed");

126 if(!
	`®_š™_image_addÚ
())

128 
	`®_show_Çtive_mes§ge_box
(
di¥Ïy
, "E¼Ü", "E¼Ü", "FaedØš™Ÿliz®_š™_image_addÚ!", 
NULL
, 
ALLEGRO_MESSAGEBOX_ERROR
);

129  
çl£
;

132 
	`io_logToFe
("INFO: Image‡ddon installed.");

134 if(!
	`®_š™_´im™ives_addÚ
())

136 
	`®_show_Çtive_mes§ge_box
(
di¥Ïy
, "E¼Ü", "E¼Ü", "FaedØš™Ÿliz®_š™_´im™ives_addÚ", 
NULL
, 
ALLEGRO_MESSAGEBOX_ERROR
);

137  
çl£
;

140 
	`io_logToFe
("INFO: Primitives‡ddon installed.");

142 
ev’tQueue
 = 
	`®_ü—‹_ev’t_queue
();

144 if(!
ev’tQueue
)

146 
	`®_show_Çtive_mes§ge_box
(
di¥Ïy
, "E¼Ü", "E¼Ü", "FaedØ¡¬ˆev’ˆqueue", 
NULL
, 
ALLEGRO_MESSAGEBOX_ERROR
);

147  
çl£
;

150 
	`®_»gi¡”_ev’t_sourû
(
ev’tQueue
, 
	`®_g‘_keybßrd_ev’t_sourû
());

151 
	`®_»gi¡”_ev’t_sourû
(
ev’tQueue
, 
	`®_g‘_di¥Ïy_ev’t_sourû
(
di¥Ïy
));

154 
	`®_š™_fÚt_addÚ
();

156 if(!
	`®_š™_‰f_addÚ
())

158 
	`®_show_Çtive_mes§ge_box
(
di¥Ïy
, "E¼Ü", "E¼Ü", "FaedØ¡¬ˆTTF AddÚ", 
NULL
, 
ALLEGRO_MESSAGEBOX_ERROR
);

159  
çl£
;

162 
v”siÚ
 = 
	`®_g‘_®Ëgro_‰f_v”siÚ
();

163 
	`cÚ_£tCŞÜ
(1.0f, 1.0f, 0.0f, 1.0f);

164 
	`cÚ_´št
(
Œue
, 
çl£
, "Allegro TTF Version");

165 
	`cÚ_´št
(
Œue
, 
çl£
, "---------------");

166 
	`cÚ_´št
(
Œue
, 
çl£
, "%i.%i.%˜R–—£ %i", 
v”siÚ
 >> 24, (version >> 16) & 255, (version >> 8) & 255, version & 255);

167 
	`sys_£tFÚtCŞÜ
(1.0f, 1.0f, 1.0f, 1.0f);

169 
	`sys_¡¬tSound
();

173 if(
Œue
 =ğ
u£BackšgB™m­
)

175 if(
çl£
 =ğ
	`gam_£tupFBO
(
ALLEGRO_VIDEO_BITMAP
))

177 
u£BackšgB™m­
 = 
çl£
;

183 
b™m­FÏgs
 = 
	`®_g‘_b™m­_æags
(
b™m­FBO
);

185 if((
b™m­FÏgs
 & 
ALLEGRO_VIDEO_BITMAP
) == ALLEGRO_VIDEO_BITMAP)

187 
	`cÚ_´št
(
Œue
,rue, "INFO: Got hardware‡ccelerated backing bitmap");

191 
	`cÚ_´št
(
Œue
,rue, "INFO: Didn't get‡ hardware‡ccelerated backing bitmap. Use flip");

192 
u£BackšgB™m­
 = 
çl£
;

197 
	`sys_š™TTFSy¡em
();

199 
	`sys_£tFÚtCŞÜ
(1.0f, 1.0f, 1.0f, 1.0f);

201 
	`sys_execu‹SütFunùiÚ
("as_loadFonts", "");

203 
	`sys_£tFÚt
(
FONT_GUI
);

205 if(
çl£
 =ğ
	`gui_š™GUI
())

207 
	`®_show_Çtive_mes§ge_box
(
di¥Ïy
, "E¼Ü", "E¼Ü", "FaedØ¡¬ˆGUI", 
NULL
, 
ALLEGRO_MESSAGEBOX_ERROR
);

208  
çl£
;

211 
	`sys_£tupPhysicsEngše
();

213 
	`sys_£tupTabËs
();

215 
	`sys_chªgeMode
(
MODE_LOADING
, 
Œue
);

220 
¡İLßdšgTh»ad
 = 
çl£
;

221 
lßdedAÎB™m­s
 = 
çl£
;

222 
lßdšgB¬P”ûÁ
 = 0;

224 
lßdšgTh»ad
 = 
	`®_ü—‹_th»ad
(
sys_runLßdTh»ad
, 
NULL
);

225 
	`®_¡¬t_th»ad
(
lßdšgTh»ad
);

227 
cu¼’tAË¹Lev–
 = 
ALERT_GREEN_TILE
;

229  
Œue
;

230 
	}
}

	@../src/system/sys_timing.cpp

1 
	~"../../hdr/sys_glob®s.h
"

3 
	gåsPršt
;

4 
	gthškFpsPršt
;

5 
	g»nd”Tick1
;

6 
	gthškTick1
;

8 
	gTICKS_PER_SECOND
;

9 
	gSKIP_TICKS
;

10 
	gMAX_FRAMESKIP
;

12 
	gthškIÁ”v®
;

17 
	$sys_C®cuÏ‹ThškF¿meR©e
(
timeV®ue
)

20 
thškFps
 = 0;

21 
thškTick2
 = 0.0f;

22 
thškD–ayCouÁ”
 = 0.0f;

24 
thškTick2
 = 
timeV®ue
;

26 
thškIÁ”v®
 +ğĞ(
thškTick2
 - 
thškTick1
) -hinkInterval) * 0.1f;

28 
thškTick1
 = 
thškTick2
;

30 
thškFps
++;

32 
thškD–ayCouÁ”
 +ğ1.0à* 
thškIÁ”v®
;

33 ià(
thškD–ayCouÁ”
 > 1.0f)

35 
thškD–ayCouÁ”
 = 0.0f;

36 
thškFpsPršt
 = 
thškFps
;

37 
thškFps
 = 0;

39 
	}
}

44 
	$sys_C®cuÏ‹F¿meR©e
(
timeV®ue
)

47 
ås
 = 0;

48 
»nd”Tick2
 = 0.0f;

49 
tickD–ayCouÁ”
 = 0.0f;

50 
äameD–ayCouÁ”
 = 0.0f;

53 
numF¿mesR’d”ed
 = 0;

54 
tÙ®R’d”Time
 = 0.0f;

55 
av”ageås
 = 0.0f;

57 
»nd”Tick2
 = 
timeV®ue
;

59 
äameD–ayCouÁ”
 +ğĞ(
»nd”Tick2
 - 
»nd”Tick1
) - frameDelayCounter) * 0.1f;

61 
»nd”Tick1
 = 
»nd”Tick2
;

64 
ås
++;

66 
tickD–ayCouÁ”
 +ğ1.0à* 
äameD–ayCouÁ”
;

67 ià(
tickD–ayCouÁ”
 > 1.0f)

69 
tickD–ayCouÁ”
 = 0.0f;

70 
åsPršt
 = 
ås
;

71 
ås
 = 0;

73 
tÙ®R’d”Time
 +ğ
äameD–ayCouÁ”
;

74 
	}
}

	@../src/system/sys_utils.cpp

1 
	~"../../hdr/sys_glob®s.h
"

3 
ıVeù
 
	gv›wabËSü“nCoÜd
;

4 
	g¡¬tStusX
 = 0.0f;

5 
	g¡¬tScÜeX
 = 0.0f;

9 
	mx
;

10 
	my
;

11 
	mwidth
;

12 
	mheight
;

13 } 
	t_myBoundšgBox
;

18 
	$sys_ÿlcHudTextPos™iÚ
(
hudWidth
, 
hudHeight
)

24 
¡©usTextY
 = ((
hudHeight
 - 
fÚt
[
FONT_LARGE
].
fÚtSize
) / 2) - 4;

27 
¡¬tStusX
 = 
hudWidth
 * (
¡©usTextX
 / 100);

28 
¡¬tScÜeX
 = 
hudWidth
 * (
scÜeTextX
 / 100);

29 
	}
}

34 
	$sys_chªgeMode
(
ÃwMode
, 
boŞ
 
u£Fade
)

37 
´eviousMode
;

39 
	`cÚ_´št
(
Œue
, 
çl£
, "ChªgtØmod[ %˜]", 
ÃwMode
);

41 if(
Œue
 =ğ
u£Fade
)

43 
´oûssFadeV®ue
 = 
Œue
;

44 
cu¼’tFadeAùiÚ
 = 
FADE_OFF
;

45 
çdeV®ue
 = 0.0f;

46 
modeAá”FadeOff
 = 
ÃwMode
;

49 if((-1 =ğ
ÃwMode
è&& (
Œue
 =ğ
u£Fade
))

51 
modeAá”FadeOff
 = 
´eviousMode
;

55 
´eviousMode
 = 
cu¼’tMode
;

59 if(
çl£
 =ğ
u£Fade
)

60 
cu¼’tMode
 = 
ÃwMode
;

62 
	`io_»£tKeybßrdS‹s
();

64 
	`sys_¡İPÏy”Movem’t
();

65 
	}
}

70 
boŞ
 
	$sys_visibËOnSü“n
(
ıVeù
 
wÜldCoÜd
, 
sh­eSize
)

73 
_myBoundšgBox
 
sü“nA»a
;

75 
sü“nA»a
.
x
 = 
v›wabËSü“nCoÜd
.x - (
sh­eSize
 * 2);

76 
sü“nA»a
.
y
 = 
v›wabËSü“nCoÜd
.y - (
sh­eSize
 * 2);

77 
sü“nA»a
.
width
 = 
wšWidth
;

78 
sü“nA»a
.
height
 = 
wšHeight
;

80 if(
wÜldCoÜd
.
x
 < 
sü“nA»a
.x)

81  
çl£
;

83 if(
wÜldCoÜd
.
y
 < 
sü“nA»a
.y)

84  
çl£
;

86 if(
wÜldCoÜd
.
x
 > 
sü“nA»a
.x + (sü“nA»a.
width
 + (
sh­eSize
 * 2)))

87  
çl£
;

89 if(
wÜldCoÜd
.
y
 > 
sü“nA»a
.y + (sü“nA»a.
height
 + (
sh­eSize
 * 2)))

90  
çl£
;

92  
Œue
;

93 
	}
}

98 
ıVeù
 
	$sys_wÜldToSü“n
(
ıVeù
 
wÜldPos
, 
sh­eSize
)

101 
ıVeù
 
sü“nCoÜds
;

103 if(
Œue
 =ğ
	`sys_visibËOnSü“n
(
wÜldPos
, 
sh­eSize
))

105 
sü“nCoÜds
.
x
 = 
wÜldPos
.x - 
v›wabËSü“nCoÜd
.x;

106 
sü“nCoÜds
.
y
 = 
wÜldPos
.y - 
v›wabËSü“nCoÜd
.y;

110 
sü“nCoÜds
.
x
 = -1;

111 
sü“nCoÜds
.
y
 = -1;

113 
sü“nCoÜds
.
x
 = 
wÜldPos
.x - 
v›wabËSü“nCoÜd
.x;

114 
sü“nCoÜds
.
y
 = 
wÜldPos
.y - 
v›wabËSü“nCoÜd
.y;

116  
sü“nCoÜds
;

117 
	}
}

121 
size_t


122 
	$¡¾ÿt
(*
d¡
,

123 cÚ¡ *
¤c
,

124 
size_t
 
size
)

127 
size_t
 
¤ş’
;

128 
size_t
 
d¡Ën
;

132 
d¡Ën
 = 
	`¡¾’
(
d¡
);

133 
size
 -ğ
d¡Ën
 + 1;

135 ià(!
size
)

136  (
d¡Ën
);

140 
¤ş’
 = 
	`¡¾’
(
¤c
);

145 ià(
¤ş’
 > 
size
)

146 
¤ş’
 = 
size
;

148 
	`memıy
(
d¡
 + 
d¡Ën
, 
¤c
, 
¤ş’
);

149 
d¡
[
d¡Ën
 + 
¤ş’
] = '\0';

151  (
d¡Ën
 + 
¤ş’
);

152 
	}
}

159 
size_t


160 
	$¡¾ıy
(*
d¡
,

161 cÚ¡ *
¤c
,

162 
size_t
 
size
)

165 
size_t
 
¤ş’
;

169 
size
 --;

170 
¤ş’
 = 
	`¡¾’
(
¤c
);

175 ià(
¤ş’
 > 
size
)

176 
¤ş’
 = 
size
;

178 
	`memıy
(
d¡
, 
¤c
, 
¤ş’
);

179 
d¡
[
¤ş’
] = '\0';

181  (
¤ş’
);

182 
	}
}

	@/usr/include/alloca.h

18 #iâdef 
_ALLOCA_H


19 
	#_ALLOCA_H
 1

	)

21 
	~<ã©u»s.h
>

23 
	#__Ãed_size_t


	)

24 
	~<¡ddef.h
>

26 
	g__BEGIN_DECLS


29 #undeà
®loÿ


32 *
	$®loÿ
 (
size_t
 
__size
è
__THROW
;

34 #ifdef 
__GNUC__


35 
	#®loÿ
(
size
è
	`__butš_®loÿ
 (size)

	)

38 
__END_DECLS


	@/usr/include/assert.h

22 #ifdef 
_ASSERT_H


24 #undeà
_ASSERT_H


25 #undeà
as£¹


26 #undeà
__ASSERT_VOID_CAST


28 #ifdef 
__USE_GNU


29 #undeà
as£¹_³¼Ü


34 
	#_ASSERT_H
 1

	)

35 
	~<ã©u»s.h
>

37 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,95)

38 
	#__ASSERT_VOID_CAST
 
¡©ic_ÿ¡
<>

	)

40 
	#__ASSERT_VOID_CAST
 ()

	)

48 #ifdef 
NDEBUG


50 
	#as£¹
(
ex´
è(
	`__ASSERT_VOID_CAST
 (0))

	)

58 #ifdef 
__USE_GNU


59 
	#as£¹_³¼Ü
(
”ºum
è(
	`__ASSERT_VOID_CAST
 (0))

	)

64 #iâdeà
_ASSERT_H_DECLS


65 
	#_ASSERT_H_DECLS


	)

66 
__BEGIN_DECLS


69 
	$__as£¹_ç
 (cÚ¡ *
__as£¹iÚ
, cÚ¡ *
__fe
,

70 
__lše
, cÚ¡ *
__funùiÚ
)

71 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

74 
	$__as£¹_³¼Ü_ç
 (
__”ºum
, cÚ¡ *
__fe
,

75 
__lše
, cÚ¡ *
__funùiÚ
)

76 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

81 
	$__as£¹
 (cÚ¡ *
__as£¹iÚ
, cÚ¡ *
__fe
, 
__lše
)

82 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

85 
__END_DECLS


88 
	#as£¹
(
ex´
) \

89 ((
ex´
) \

90 ? 
	`__ASSERT_VOID_CAST
 (0) \

91 : 
	`__as£¹_ç
 (#ex´, 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

93 #ifdef 
__USE_GNU


94 
	#as£¹_³¼Ü
(
”ºum
) \

95 (!(
”ºum
) \

96 ? 
	`__ASSERT_VOID_CAST
 (0) \

97 : 
	`__as£¹_³¼Ü_ç
 ((
”ºum
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

105 #ià
defšed
 
__ılu¥lus
 ? 
	`__GNUC_PREREQ
 (2, 6) : __GNUC_PREREQ (2, 4)

106 
	#__ASSERT_FUNCTION
 
__PRETTY_FUNCTION__


	)

108 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

109 
	#__ASSERT_FUNCTION
 
__func__


	)

111 
	#__ASSERT_FUNCTION
 ((cÚ¡ *è0)

	)

118 #ià
defšed
 
__USE_ISOC11
 && !defšed 
__ılu¥lus


119 #undeà
¡©ic_as£¹


120 
	#¡©ic_as£¹
 
_Stic_as£¹


	)

	@/usr/include/locale.h

22 #iâdef 
_LOCALE_H


23 
	#_LOCALE_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	#__Ãed_NULL


	)

28 
	~<¡ddef.h
>

29 
	~<b™s/loÿË.h
>

31 
	g__BEGIN_DECLS


35 
	#LC_CTYPE
 
__LC_CTYPE


	)

36 
	#LC_NUMERIC
 
__LC_NUMERIC


	)

37 
	#LC_TIME
 
__LC_TIME


	)

38 
	#LC_COLLATE
 
__LC_COLLATE


	)

39 
	#LC_MONETARY
 
__LC_MONETARY


	)

40 
	#LC_MESSAGES
 
__LC_MESSAGES


	)

41 
	#LC_ALL
 
__LC_ALL


	)

42 
	#LC_PAPER
 
__LC_PAPER


	)

43 
	#LC_NAME
 
__LC_NAME


	)

44 
	#LC_ADDRESS
 
__LC_ADDRESS


	)

45 
	#LC_TELEPHONE
 
__LC_TELEPHONE


	)

46 
	#LC_MEASUREMENT
 
__LC_MEASUREMENT


	)

47 
	#LC_IDENTIFICATION
 
__LC_IDENTIFICATION


	)

50 
__BEGIN_NAMESPACE_STD


53 
	slcÚv


57 *
	mdecim®_pošt
;

58 *
	mthou§nds_£p
;

64 *
	mgroupšg
;

70 *
	mšt_cu¼_symbŞ
;

71 *
	mcu¼’cy_symbŞ
;

72 *
	mmÚ_decim®_pošt
;

73 *
	mmÚ_thou§nds_£p
;

74 *
	mmÚ_groupšg
;

75 *
	mpos™ive_sign
;

76 *
	mÃg©ive_sign
;

77 
	mšt_äac_dig™s
;

78 
	mäac_dig™s
;

80 
	mp_cs_´eûdes
;

82 
	mp_£p_by_¥aû
;

84 
	mn_cs_´eûdes
;

86 
	mn_£p_by_¥aû
;

93 
	mp_sign_po¢
;

94 
	mn_sign_po¢
;

95 #ifdeà
__USE_ISOC99


97 
	mšt_p_cs_´eûdes
;

99 
	mšt_p_£p_by_¥aû
;

101 
	mšt_n_cs_´eûdes
;

103 
	mšt_n_£p_by_¥aû
;

110 
	mšt_p_sign_po¢
;

111 
	mšt_n_sign_po¢
;

113 
	m__št_p_cs_´eûdes
;

114 
	m__št_p_£p_by_¥aû
;

115 
	m__št_n_cs_´eûdes
;

116 
	m__št_n_£p_by_¥aû
;

117 
	m__št_p_sign_po¢
;

118 
	m__št_n_sign_po¢
;

124 *
	$£oÿË
 (
__ÿ‹gÜy
, cÚ¡ *
__loÿË
è
__THROW
;

127 
lcÚv
 *
	$loÿËcÚv
 (è
__THROW
;

129 
__END_NAMESPACE_STD


132 #ifdef 
__USE_XOPEN2K8


145 
	~<xloÿË.h
>

151 
__loÿË_t
 
	$ÃwloÿË
 (
__ÿ‹gÜy_mask
, cÚ¡ *
__loÿË
,

152 
__loÿË_t
 
__ba£
è
__THROW
;

158 
	#LC_CTYPE_MASK
 (1 << 
__LC_CTYPE
)

	)

159 
	#LC_NUMERIC_MASK
 (1 << 
__LC_NUMERIC
)

	)

160 
	#LC_TIME_MASK
 (1 << 
__LC_TIME
)

	)

161 
	#LC_COLLATE_MASK
 (1 << 
__LC_COLLATE
)

	)

162 
	#LC_MONETARY_MASK
 (1 << 
__LC_MONETARY
)

	)

163 
	#LC_MESSAGES_MASK
 (1 << 
__LC_MESSAGES
)

	)

164 
	#LC_PAPER_MASK
 (1 << 
__LC_PAPER
)

	)

165 
	#LC_NAME_MASK
 (1 << 
__LC_NAME
)

	)

166 
	#LC_ADDRESS_MASK
 (1 << 
__LC_ADDRESS
)

	)

167 
	#LC_TELEPHONE_MASK
 (1 << 
__LC_TELEPHONE
)

	)

168 
	#LC_MEASUREMENT_MASK
 (1 << 
__LC_MEASUREMENT
)

	)

169 
	#LC_IDENTIFICATION_MASK
 (1 << 
__LC_IDENTIFICATION
)

	)

170 
	#LC_ALL_MASK
 (
LC_CTYPE_MASK
 \

171 | 
LC_NUMERIC_MASK
 \

172 | 
LC_TIME_MASK
 \

173 | 
LC_COLLATE_MASK
 \

174 | 
LC_MONETARY_MASK
 \

175 | 
LC_MESSAGES_MASK
 \

176 | 
LC_PAPER_MASK
 \

177 | 
LC_NAME_MASK
 \

178 | 
LC_ADDRESS_MASK
 \

179 | 
LC_TELEPHONE_MASK
 \

180 | 
LC_MEASUREMENT_MASK
 \

181 | 
LC_IDENTIFICATION_MASK
 \

182 )

	)

186 
__loÿË_t
 
	$du¶oÿË
 (
__loÿË_t
 
__d©a£t
è
__THROW
;

190 
	$ä“loÿË
 (
__loÿË_t
 
__d©a£t
è
__THROW
;

197 
__loÿË_t
 
	$u£loÿË
 (
__loÿË_t
 
__d©a£t
è
__THROW
;

201 
	#LC_GLOBAL_LOCALE
 ((
__loÿË_t
è-1L)

	)

205 
__END_DECLS


	@/usr/include/malloc.h

19 #iâdeà
_MALLOC_H


20 
	#_MALLOC_H
 1

	)

22 
	~<ã©u»s.h
>

23 
	~<¡ddef.h
>

24 
	~<¡dio.h
>

26 #ifdeà
_LIBC


27 
	#__MALLOC_HOOK_VOLATILE


	)

28 
	#__MALLOC_DEPRECATED


	)

30 
	#__MALLOC_HOOK_VOLATILE
 vŞ©e

	)

31 
	#__MALLOC_DEPRECATED
 
__©Œibu‹_d•»ÿ‹d__


	)

35 
__BEGIN_DECLS


38 *
	$m®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

41 *
	$ÿÎoc
 (
size_t
 
__nmemb
, size_ˆ
__size
)

42 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

49 *
	$»®loc
 (*
__±r
, 
size_t
 
__size
)

50 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__
;

53 
	$ä“
 (*
__±r
è
__THROW
;

56 
	$cä“
 (*
__±r
è
__THROW
;

59 *
	$mem®ign
 (
size_t
 
__®ignm’t
, size_ˆ
__size
)

60 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

63 *
	$v®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

67 *
	$pv®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

71 *(*
__mÜecÜe
è(
±rdiff_t
 
__size
);

74 *
	$__deçuÉ_mÜecÜe
 (
±rdiff_t
 
__size
)

75 
__THROW
 
__©Œibu‹_m®loc__
;

79 
	sm®lšfo


81 
¬’a
;

82 
Üdblks
;

83 
smblks
;

84 
hblks
;

85 
hblkhd
;

86 
usmblks
;

87 
fsmblks
;

88 
uÜdblks
;

89 
fÜdblks
;

90 
k“pco¡
;

94 
m®lšfo
 
	$m®lšfo
 (è
__THROW
;

97 #iâdeà
M_MXFAST


98 
	#M_MXFAST
 1

	)

100 #iâdeà
M_NLBLKS


101 
	#M_NLBLKS
 2

	)

103 #iâdeà
M_GRAIN


104 
	#M_GRAIN
 3

	)

106 #iâdeà
M_KEEP


107 
	#M_KEEP
 4

	)

111 
	#M_TRIM_THRESHOLD
 -1

	)

112 
	#M_TOP_PAD
 -2

	)

113 
	#M_MMAP_THRESHOLD
 -3

	)

114 
	#M_MMAP_MAX
 -4

	)

115 
	#M_CHECK_ACTION
 -5

	)

116 
	#M_PERTURB
 -6

	)

117 
	#M_ARENA_TEST
 -7

	)

118 
	#M_ARENA_MAX
 -8

	)

121 
	$m®lİt
 (
__·¿m
, 
__v®
è
__THROW
;

125 
	$m®loc_Œim
 (
size_t
 
__·d
è
__THROW
;

129 
size_t
 
	$m®loc_u§bË_size
 (*
__±r
è
__THROW
;

132 
	$m®loc_¡©s
 (è
__THROW
;

135 
	$m®loc_šfo
 (
__İtiÚs
, 
FILE
 *
__å
è
__THROW
;

138 *
	$m®loc_g‘_¡©e
 (è
__THROW
;

142 
	$m®loc_£t_¡©e
 (*
__±r
è
__THROW
;

147 (*
__MALLOC_HOOK_VOLATILE
 
__m®loc_š™Ÿlize_hook
) ()

148 
__MALLOC_DEPRECATED
;

150 (*
__MALLOC_HOOK_VOLATILE
 
__ä“_hook
è(*
__±r
,

152 
__MALLOC_DEPRECATED
;

153 *(*
__MALLOC_HOOK_VOLATILE
 
__m®loc_hook
)(
size_t
 
__size
,

155 
__MALLOC_DEPRECATED
;

156 *(*
__MALLOC_HOOK_VOLATILE
 
__»®loc_hook
)(*
__±r
,

157 
size_t
 
__size
,

159 
__MALLOC_DEPRECATED
;

160 *(*
__MALLOC_HOOK_VOLATILE
 
__mem®ign_hook
)(
size_t
 
__®ignm’t
,

161 
size_t
 
__size
,

163 
__MALLOC_DEPRECATED
;

164 (*
__MALLOC_HOOK_VOLATILE
 
__aá”_mÜecÜe_hook
) ();

167 
	$__m®loc_check_š™
 (è
__THROW
 
__MALLOC_DEPRECATED
;

170 
__END_DECLS


	@/usr/include/math.h

23 #iâdef 
_MATH_H


24 
	#_MATH_H
 1

	)

26 
	~<ã©u»s.h
>

28 
	g__BEGIN_DECLS


31 
	~<b™s/m©h-veùÜ.h
>

35 
	~<b™s/huge_v®.h
>

36 #ifdeà
__USE_ISOC99


37 
	~<b™s/huge_v®f.h
>

38 
	~<b™s/huge_v®l.h
>

41 
	~<b™s/šf.h
>

44 
	~<b™s/Çn.h
>

48 
	~<b™s/m©hdef.h
>

55 
	#__SIMD_DECL
(
funùiÚ
è
	`__CONCAT
 (
__DECL_SIMD_
, funùiÚ)

	)

57 
	#__MATHCALL_VEC
(
funùiÚ
, 
suffix
, 
¬gs
) \

58 
	`__SIMD_DECL
 (
	`__MATH_PRECNAME
 (
funùiÚ
, 
suffix
)) \

59 
	`__MATHCALL
 (
funùiÚ
, 
suffix
, 
¬gs
)

	)

61 
	#__MATHDECL_VEC
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

62 
	`__SIMD_DECL
 (
	`__MATH_PRECNAME
 (
funùiÚ
, 
suffix
)) \

63 
	`__MATHDECL
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
)

	)

65 
	#__MATHCALL
(
funùiÚ
,
suffix
, 
¬gs
) \

66 
	`__MATHDECL
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
)

	)

67 
	#__MATHDECL
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

68 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
); \

69 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
)

	)

70 
	#__MATHCALLX
(
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

71 
	`__MATHDECLX
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
)

	)

72 
	#__MATHDECLX
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

73 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
); \

74 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
)

	)

75 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

76 
ty³
 
	`__MATH_PRECNAME
(
funùiÚ
,
suffix
è
¬gs
 
__THROW


	)

78 
	#_MdoubË_
 

	)

79 
	#__MATH_PRECNAME
(
Çme
,
r
è
	`__CONCAT
Òame,r)

	)

80 
	#__MATH_DECLARING_DOUBLE
 1

	)

81 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_STD


	)

82 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_STD


	)

83 
	~<b™s/m©hÿÎs.h
>

84 #undeà
_MdoubË_


85 #undeà
_MdoubË_BEGIN_NAMESPACE


86 #undeà
_MdoubË_END_NAMESPACE


87 #undeà
__MATH_PRECNAME


88 #undeà
__MATH_DECLARING_DOUBLE


90 #ifdeà
__USE_ISOC99


96 #iâdeà
_Mæßt_


97 
	#_Mæßt_
 

	)

99 
	#_MdoubË_
 
_Mæßt_


	)

100 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
f
##
	)
r

101 
	#__MATH_DECLARING_DOUBLE
 0

	)

102 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

103 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

104 
	~<b™s/m©hÿÎs.h
>

105 #undeà
_MdoubË_


106 #undeà
_MdoubË_BEGIN_NAMESPACE


107 #undeà
_MdoubË_END_NAMESPACE


108 #undeà
__MATH_PRECNAME


109 #undeà
__MATH_DECLARING_DOUBLE


111 #ià!(
defšed
 
__NO_LONG_DOUBLE_MATH
 && defšed 
_LIBC
) \

112 || 
defšed
 
__LDBL_COMPAT
 \

113 || 
defšed
 
_LIBC_TEST


114 #ifdeà
__LDBL_COMPAT


116 #ifdeà
__USE_ISOC99


117 
	$__Ædbl_Ãx‰ow¬df
 (
__x
, 
__y
)

118 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

119 #ifdeà
__REDIRECT_NTH


120 
	`__REDIRECT_NTH
 (
Ãx‰ow¬df
, (
__x
, 
__y
),

121 
__Ædbl_Ãx‰ow¬df
)

122 
	`__©Œibu‹__
 ((
__cÚ¡__
));

123 
	`__REDIRECT_NTH
 (
Ãx‰ow¬d
, (
__x
, 
__y
),

124 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

125 
	`__REDIRECT_NTH
 (
Ãx‰ow¬dl
,

126 (
__x
, 
__y
),

127 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

131 #undeà
__MATHDECL_1


132 
	#__MATHDECL_2
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
®Ÿs
) \

133 
ty³
 
	`__REDIRECT_NTH
(
	`__MATH_PRECNAME
(
funùiÚ
,
suffix
), \

134 
¬gs
, 
®Ÿs
)

	)

135 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

136 
	`__MATHDECL_2
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
	`__CONCAT
(funùiÚ,suffix))

	)

142 #iâdeà
_MlÚg_doubË_


143 
	#_MlÚg_doubË_
 

	)

145 
	#_MdoubË_
 
_MlÚg_doubË_


	)

146 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
l
##
	)
r

147 
	#__MATH_DECLARING_DOUBLE
 0

	)

148 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

149 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

150 
	#__MATH_DECLARE_LDOUBLE
 1

	)

151 
	~<b™s/m©hÿÎs.h
>

152 #undeà
_MdoubË_


153 #undeà
_MdoubË_BEGIN_NAMESPACE


154 #undeà
_MdoubË_END_NAMESPACE


155 #undeà
__MATH_PRECNAME


156 #undeà
__MATH_DECLARING_DOUBLE


161 #undeà
__MATHDECL_1


162 #undeà
__MATHDECL


163 #undeà
__MATHCALL


166 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


168 
signgam
;

173 #ifdeà
__USE_ISOC99


211 
FP_NAN
 =

212 
	#FP_NAN
 0

	)

213 
FP_NAN
,

214 
FP_INFINITE
 =

215 
	#FP_INFINITE
 1

	)

216 
FP_INFINITE
,

217 
FP_ZERO
 =

218 
	#FP_ZERO
 2

	)

219 
FP_ZERO
,

220 
FP_SUBNORMAL
 =

221 
	#FP_SUBNORMAL
 3

	)

222 
FP_SUBNORMAL
,

223 
FP_NORMAL
 =

224 
	#FP_NORMAL
 4

	)

225 
FP_NORMAL


233 #ià
	`__GNUC_PREREQ
 (4,4è&& !
defšed
 
__SUPPORT_SNAN__
 \

234 && !
defšed
 
__OPTIMIZE_SIZE__


235 
	#åşassify
(
x
è
	`__butš_åşassify
 (
FP_NAN
, 
FP_INFINITE
, \

236 
FP_NORMAL
, 
FP_SUBNORMAL
, 
FP_ZERO
, 
x
)

	)

237 #–ià
defšed
 
__NO_LONG_DOUBLE_MATH


238 
	#åşassify
(
x
) \

239 ( (
x
è=ğ (è? 
	`__åşassifyf
 (xè: 
	`__åşassify
 (x))

	)

241 
	#åşassify
(
x
) \

242 ( (
x
) ==  () \

243 ? 
	`__åşassifyf
 (
x
) \

244 :  (
x
) ==  () \

245 ? 
	`__åşassify
 (
x
è: 
	`__åşassifyl
 (x))

	)

249 #ià
	`__GNUC_PREREQ
 (4,0)

250 
	#signb™
(
x
) \

251 ( (
x
) ==  () \

252 ? 
	`__butš_signb™f
 (
x
) \

253 :  (
x
) ==  () \

254 ? 
	`__butš_signb™
 (
x
è: 
	`__butš_signb™l
 (x))

	)

256 #ifdeà
__NO_LONG_DOUBLE_MATH


257 
	#signb™
(
x
) \

258 ( (
x
è=ğ (è? 
	`__signb™f
 (xè: 
	`__signb™
 (x))

	)

260 
	#signb™
(
x
) \

261 ( (
x
) ==  () \

262 ? 
	`__signb™f
 (
x
) \

263 :  (
x
) ==  () \

264 ? 
	`__signb™
 (
x
è: 
	`__signb™l
 (x))

	)

269 #ià
	`__GNUC_PREREQ
 (4,4è&& !
defšed
 
__SUPPORT_SNAN__


270 
	#isfš™e
(
x
è
	`__butš_isfš™e
 (x)

	)

271 #–ià
defšed
 
__NO_LONG_DOUBLE_MATH


272 
	#isfš™e
(
x
) \

273 ( (
x
è=ğ (è? 
	`__fš™ef
 (xè: 
	`__fš™e
 (x))

	)

275 
	#isfš™e
(
x
) \

276 ( (
x
) ==  () \

277 ? 
	`__fš™ef
 (
x
) \

278 :  (
x
) ==  () \

279 ? 
	`__fš™e
 (
x
è: 
	`__fš™–
 (x))

	)

283 #ià
	`__GNUC_PREREQ
 (4,4è&& !
defšed
 
__SUPPORT_SNAN__


284 
	#i¢Üm®
(
x
è
	`__butš_i¢Üm®
 (x)

	)

286 
	#i¢Üm®
(
x
è(
	`åşassify
 (xè=ğ
FP_NORMAL
)

	)

291 #ià
	`__GNUC_PREREQ
 (4,4è&& !
defšed
 
__SUPPORT_SNAN__


292 
	#i¢ª
(
x
è
	`__butš_i¢ª
 (x)

	)

293 #–ià
defšed
 
__NO_LONG_DOUBLE_MATH


294 
	#i¢ª
(
x
) \

295 ( (
x
è=ğ (è? 
	`__i¢ªf
 (xè: 
	`__i¢ª
 (x))

	)

297 
	#i¢ª
(
x
) \

298 ( (
x
) ==  () \

299 ? 
	`__i¢ªf
 (
x
) \

300 :  (
x
) ==  () \

301 ? 
	`__i¢ª
 (
x
è: 
	`__i¢ªl
 (x))

	)

305 #ià
	`__GNUC_PREREQ
 (4,4è&& !
defšed
 
__SUPPORT_SNAN__


306 
	#isšf
(
x
è
	`__butš_isšf_sign
 (x)

	)

307 #–ià
defšed
 
__NO_LONG_DOUBLE_MATH


308 
	#isšf
(
x
) \

309 ( (
x
è=ğ (è? 
	`__isšff
 (xè: 
	`__isšf
 (x))

	)

311 
	#isšf
(
x
) \

312 ( (
x
) ==  () \

313 ? 
	`__isšff
 (
x
) \

314 :  (
x
) ==  () \

315 ? 
	`__isšf
 (
x
è: 
	`__isšæ
 (x))

	)

319 
	#MATH_ERRNO
 1

	)

320 
	#MATH_ERREXCEPT
 2

	)

325 #iâdeà
__FAST_MATH__


326 
	#m©h_”rhªdlšg
 (
MATH_ERRNO
 | 
MATH_ERREXCEPT
)

	)

331 #ifdeà
__USE_GNU


333 #ifdeà
__NO_LONG_DOUBLE_MATH


334 
	#issigÇlšg
(
x
) \

335 ( (
x
è=ğ (è? 
	`__issigÇlšgf
 (xè: 
	`__issigÇlšg
 (x))

	)

337 
	#issigÇlšg
(
x
) \

338 ( (
x
) ==  () \

339 ? 
	`__issigÇlšgf
 (
x
) \

340 :  (
x
) ==  () \

341 ? 
	`__issigÇlšg
 (
x
è: 
	`__issigÇlšgl
 (x))

	)

345 #ifdef 
__USE_MISC


349 
_IEEE_
 = -1,

350 
_SVID_
,

351 
_XOPEN_
,

352 
_POSIX_
,

353 
_ISOC_


354 } 
	t_LIB_VERSION_TYPE
;

359 
_LIB_VERSION_TYPE
 
_LIB_VERSION
;

363 #ifdeà
__USE_MISC


369 #ifdeà
__ılu¥lus


370 
__exû±iÚ


372 
exû±iÚ


375 
ty³
;

376 *
Çme
;

377 
¬g1
;

378 
¬g2
;

379 
»tv®
;

380 
	}
};

382 #ifdeà
__ılu¥lus


383 
	$m©h”r
 (
__exû±iÚ
 *
__exc
è
	`throw
 ();

385 
	`m©h”r
 (
exû±iÚ
 *
__exc
);

388 
	#X_TLOSS
 1.41484755040568800000e+16

	)

391 
	#DOMAIN
 1

	)

392 
	#SING
 2

	)

393 
	#OVERFLOW
 3

	)

394 
	#UNDERFLOW
 4

	)

395 
	#TLOSS
 5

	)

396 
	#PLOSS
 6

	)

399 
	#HUGE
 3.40282347e+38F

	)

403 #ifdeà
__USE_XOPEN


405 
	#MAXFLOAT
 3.40282347e+38F

	)

412 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


413 
	#M_E
 2.7182818284590452354

	)

414 
	#M_LOG2E
 1.4426950408889634074

	)

415 
	#M_LOG10E
 0.43429448190325182765

	)

416 
	#M_LN2
 0.69314718055994530942

	)

417 
	#M_LN10
 2.30258509299404568402

	)

418 
	#M_PI
 3.14159265358979323846

	)

419 
	#M_PI_2
 1.57079632679489661923

	)

420 
	#M_PI_4
 0.78539816339744830962

	)

421 
	#M_1_PI
 0.31830988618379067154

	)

422 
	#M_2_PI
 0.63661977236758134308

	)

423 
	#M_2_SQRTPI
 1.12837916709551257390

	)

424 
	#M_SQRT2
 1.41421356237309504880

	)

425 
	#M_SQRT1_2
 0.70710678118654752440

	)

431 #ifdeà
__USE_GNU


432 
	#M_El
 2.718281828459045235360287471352662498L

	)

433 
	#M_LOG2El
 1.442695040888963407359924681001892137L

	)

434 
	#M_LOG10El
 0.434294481903251827651128918916605082L

	)

435 
	#M_LN2l
 0.693147180559945309417232121458176568L

	)

436 
	#M_LN10l
 2.302585092994045684017991454684364208L

	)

437 
	#M_PIl
 3.141592653589793238462643383279502884L

	)

438 
	#M_PI_2l
 1.570796326794896619231321691639751442L

	)

439 
	#M_PI_4l
 0.785398163397448309615660845819875721L

	)

440 
	#M_1_PIl
 0.318309886183790671537767526745028724L

	)

441 
	#M_2_PIl
 0.636619772367581343075535053490057448L

	)

442 
	#M_2_SQRTPIl
 1.128379167095512573896158903121545172L

	)

443 
	#M_SQRT2l
 1.414213562373095048801688724209698079L

	)

444 
	#M_SQRT1_2l
 0.707106781186547524400844362104849039L

	)

451 #ià
defšed
 
__STRICT_ANSI__
 && !defšed 
__NO_MATH_INLINES


452 
	#__NO_MATH_INLINES
 1

	)

455 #ià
defšed
 
__USE_ISOC99
 && 
	`__GNUC_PREREQ
(2,97)

462 
	#isg»©”
(
x
, 
y
è
	`__butš_isg»©”
(x, y)

	)

463 
	#isg»©”equ®
(
x
, 
y
è
	`__butš_isg»©”equ®
(x, y)

	)

464 
	#i¦ess
(
x
, 
y
è
	`__butš_i¦ess
(x, y)

	)

465 
	#i¦es£qu®
(
x
, 
y
è
	`__butš_i¦es£qu®
(x, y)

	)

466 
	#i¦essg»©”
(
x
, 
y
è
	`__butš_i¦essg»©”
(x, y)

	)

467 
	#isunÜd”ed
(
u
, 
v
è
	`__butš_isunÜd”ed
(u, v)

	)

471 #ifdeà
__USE_EXTERN_INLINES


472 
	~<b™s/m©hšlše.h
>

477 #ià
defšed
 
__FINITE_MATH_ONLY__
 && __FINITE_MATH_ONLY__ > 0

478 
	~<b™s/m©h-fš™e.h
>

481 #ifdeà
__USE_ISOC99


485 #iâdeà
isg»©”


486 
	#isg»©”
(
x
, 
y
) \

487 (
__ex‹nsiÚ__
 \

488 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

489 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x > __y; 
	}
}))

	)

493 #iâdeà
isg»©”equ®


494 
	#isg»©”equ®
(
x
, 
y
) \

495 (
__ex‹nsiÚ__
 \

496 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

497 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x >ğ__y; }))

	)

501 #iâdeà
i¦ess


502 
	#i¦ess
(
x
, 
y
) \

503 (
__ex‹nsiÚ__
 \

504 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

505 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x < __y; }))

	)

509 #iâdeà
i¦es£qu®


510 
	#i¦es£qu®
(
x
, 
y
) \

511 (
__ex‹nsiÚ__
 \

512 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

513 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x <ğ__y; }))

	)

517 #iâdeà
i¦essg»©”


518 
	#i¦essg»©”
(
x
, 
y
) \

519 (
__ex‹nsiÚ__
 \

520 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

521 !
	`isunÜd”ed
 (
__x
, 
__y
è&& (__x < __y || __y < __x); }))

	)

525 #iâdeà
isunÜd”ed


526 
	#isunÜd”ed
(
u
, 
v
) \

527 (
__ex‹nsiÚ__
 \

528 ({ 
	`__ty³of__
(
u
è
__u
 = (u); __ty³of__(
v
è
__v
 = (v); \

529 
	`åşassify
 (
__u
è=ğ
FP_NAN
 || fpşassify (
__v
è=ğFP_NAN; }))

	)

534 
	g__END_DECLS


	@/usr/include/memory.h

22 #iâdef 
_MEMORY_H


23 
	#_MEMORY_H
 1

	)

25 
	~<ã©u»s.h
>

28 #iâdef 
_STRING_H


29 
	~<¡ršg.h
>

	@/usr/include/physfs.h

216 #iâdeà
_INCLUDE_PHYSFS_H_


217 
	#_INCLUDE_PHYSFS_H_


	)

219 #ifdeà
__ılu¥lus


223 #iâdeà
DOXYGEN_SHOULD_IGNORE_THIS


224 #ià(
defšed
 
_MSC_VER
)

225 
	#__EXPORT__
 
	`__deş¥ec
(
dÎexpÜt
)

	)

226 #–ià(
__GNUC__
 >= 3)

227 
	#__EXPORT__
 
	`__©Œibu‹__
((
	`visib™y
("deçuÉ")))

	)

229 
	#__EXPORT__


	)

237 
	tPHYSFS_ušt8
;

243 sigÃd 
	tPHYSFS_sšt8
;

249 
	tPHYSFS_ušt16
;

255 sigÃd 
	tPHYSFS_sšt16
;

261 
	tPHYSFS_ušt32
;

267 sigÃd 
	tPHYSFS_sšt32
;

284 #ià(
defšed
 
PHYSFS_NO_64BIT_SUPPORT
)

285 
PHYSFS_ušt32
 
	tPHYSFS_ušt64
;

286 
PHYSFS_sšt32
 
	tPHYSFS_sšt64
;

287 #–ià(
defšed
 
_MSC_VER
)

288 sigÃd 
	t__št64
 
	tPHYSFS_sšt64
;

289 
	t__št64
 
	tPHYSFS_ušt64
;

291 
	tPHYSFS_ušt64
;

292 sigÃd 
	tPHYSFS_sšt64
;

296 #iâdeà
DOXYGEN_SHOULD_IGNORE_THIS


298 
	#PHYSFS_COMPILE_TIME_ASSERT
(
Çme
, 
x
) \

299 
	tPHYSFS_dummy_
 ## 
	tÇme
[(
x
è* 2 - 1]

	)

301 
	tPHYSFS_COMPILE_TIME_ASSERT
(
	tušt8
, (
	tPHYSFS_ušt8
) == 1);

302 
PHYSFS_COMPILE_TIME_ASSERT
(
sšt8
, (
PHYSFS_sšt8
) == 1);

303 
PHYSFS_COMPILE_TIME_ASSERT
(
ušt16
, (
PHYSFS_ušt16
) == 2);

304 
PHYSFS_COMPILE_TIME_ASSERT
(
sšt16
, (
PHYSFS_sšt16
) == 2);

305 
PHYSFS_COMPILE_TIME_ASSERT
(
ušt32
, (
PHYSFS_ušt32
) == 4);

306 
PHYSFS_COMPILE_TIME_ASSERT
(
sšt32
, (
PHYSFS_sšt32
) == 4);

308 #iâdeà
PHYSFS_NO_64BIT_SUPPORT


309 
PHYSFS_COMPILE_TIME_ASSERT
(
ušt64
, (
PHYSFS_ušt64
) == 8);

310 
PHYSFS_COMPILE_TIME_ASSERT
(
sšt64
, (
PHYSFS_sšt64
) == 8);

313 #undeà
PHYSFS_COMPILE_TIME_ASSERT


341 
	sPHYSFS_Fe


343 *
İaque
;

344 } 
	tPHYSFS_Fe
;

358 
	#PHYSFS_fe
 
PHYSFS_Fe


	)

376 
	sPHYSFS_ArchiveInfo


378 cÚ¡ *
ex‹nsiÚ
;

379 cÚ¡ *
desütiÚ
;

380 cÚ¡ *
authÜ
;

381 cÚ¡ *
u¾
;

382 } 
	tPHYSFS_ArchiveInfo
;

398 
	sPHYSFS_V”siÚ


400 
PHYSFS_ušt8
 
majÜ
;

401 
PHYSFS_ušt8
 
mšÜ
;

402 
PHYSFS_ušt8
 
·tch
;

403 } 
	tPHYSFS_V”siÚ
;

405 #iâdeà
DOXYGEN_SHOULD_IGNORE_THIS


406 
	#PHYSFS_VER_MAJOR
 2

	)

407 
	#PHYSFS_VER_MINOR
 0

	)

408 
	#PHYSFS_VER_PATCH
 3

	)

430 
	#PHYSFS_VERSION
(
x
) \

432 (
x
)->
majÜ
 = 
PHYSFS_VER_MAJOR
; \

433 (
x
)->
mšÜ
 = 
PHYSFS_VER_MINOR
; \

434 (
x
)->
·tch
 = 
PHYSFS_VER_PATCH
; \

435 }

	)

464 
__EXPORT__
 
PHYSFS_g‘LškedV”siÚ
(
PHYSFS_V”siÚ
 *
v”
);

487 
__EXPORT__
 
PHYSFS_š™
(cÚ¡ *
¬gv0
);

516 
__EXPORT__
 
PHYSFS_deš™
();

547 
__EXPORT__
 cÚ¡ 
PHYSFS_ArchiveInfo
 **
PHYSFS_suµÜ‹dArchiveTy³s
();

563 
__EXPORT__
 
PHYSFS_ä“Li¡
(*
li¡V¬
);

584 
__EXPORT__
 cÚ¡ *
PHYSFS_g‘La¡E¼Ü
();

600 
__EXPORT__
 cÚ¡ *
PHYSFS_g‘DœS•¬©Ü
();

633 
__EXPORT__
 
PHYSFS_³rm™SymbŞicLšks
(
®low
);

676 
__EXPORT__
 **
PHYSFS_g‘CdRomDœs
();

695 
__EXPORT__
 cÚ¡ *
PHYSFS_g‘Ba£Dœ
();

718 
__EXPORT__
 cÚ¡ *
PHYSFS_g‘U£rDœ
();

732 
__EXPORT__
 cÚ¡ *
PHYSFS_g‘Wr™eDœ
();

754 
__EXPORT__
 
PHYSFS_£tWr™eDœ
(cÚ¡ *
ÃwDœ
);

771 
__EXPORT__
 
PHYSFS_addToS—rchP©h
(cÚ¡ *
ÃwDœ
, 
­³ndToP©h
);

791 
__EXPORT__
 
PHYSFS_»moveFromS—rchP©h
(cÚ¡ *
ŞdDœ
);

820 
__EXPORT__
 **
PHYSFS_g‘S—rchP©h
();

880 
__EXPORT__
 
PHYSFS_£tSªeCÚfig
(cÚ¡ *
Ügªiz©iÚ
,

881 cÚ¡ *
­pName
,

882 cÚ¡ *
¬chiveExt
,

883 
šşudeCdRoms
,

884 
¬chivesFœ¡
);

910 
__EXPORT__
 
PHYSFS_mkdœ
(cÚ¡ *
dœName
);

943 
__EXPORT__
 
PHYSFS_d–‘e
(cÚ¡ *
f’ame
);

971 
__EXPORT__
 cÚ¡ *
PHYSFS_g‘R—lDœ
(cÚ¡ *
f’ame
);

1012 
__EXPORT__
 **
PHYSFS_’um”©eFes
(cÚ¡ *
dœ
);

1032 
__EXPORT__
 
PHYSFS_exi¡s
(cÚ¡ *
âame
);

1052 
__EXPORT__
 
PHYSFS_isDœeùÜy
(cÚ¡ *
âame
);

1072 
__EXPORT__
 
PHYSFS_isSymbŞicLšk
(cÚ¡ *
âame
);

1088 
__EXPORT__
 
PHYSFS_sšt64
 
PHYSFS_g‘La¡ModTime
(cÚ¡ *
f’ame
);

1115 
__EXPORT__
 
PHYSFS_Fe
 *
PHYSFS_İ’Wr™e
(cÚ¡ *
f’ame
);

1141 
__EXPORT__
 
PHYSFS_Fe
 *
PHYSFS_İ’Aµ’d
(cÚ¡ *
f’ame
);

1166 
__EXPORT__
 
PHYSFS_Fe
 *
PHYSFS_İ’R—d
(cÚ¡ *
f’ame
);

1187 
__EXPORT__
 
PHYSFS_şo£
(
PHYSFS_Fe
 *
hªdË
);

1206 
__EXPORT__
 
PHYSFS_sšt64
 
PHYSFS_»ad
(
PHYSFS_Fe
 *
hªdË
,

1207 *
bufãr
,

1208 
PHYSFS_ušt32
 
objSize
,

1209 
PHYSFS_ušt32
 
objCouÁ
);

1224 
__EXPORT__
 
PHYSFS_sšt64
 
PHYSFS_wr™e
(
PHYSFS_Fe
 *
hªdË
,

1225 cÚ¡ *
bufãr
,

1226 
PHYSFS_ušt32
 
objSize
,

1227 
PHYSFS_ušt32
 
objCouÁ
);

1244 
__EXPORT__
 
PHYSFS_eof
(
PHYSFS_Fe
 *
hªdË
);

1257 
__EXPORT__
 
PHYSFS_sšt64
 
PHYSFS_‹Î
(
PHYSFS_Fe
 *
hªdË
);

1274 
__EXPORT__
 
PHYSFS_£ek
(
PHYSFS_Fe
 *
hªdË
, 
PHYSFS_ušt64
 
pos
);

1293 
__EXPORT__
 
PHYSFS_sšt64
 
PHYSFS_feL’gth
(
PHYSFS_Fe
 *
hªdË
);

1338 
__EXPORT__
 
PHYSFS_£tBufãr
(
PHYSFS_Fe
 *
hªdË
, 
PHYSFS_ušt64
 
bufsize
);

1357 
__EXPORT__
 
PHYSFS_æush
(
PHYSFS_Fe
 *
hªdË
);

1372 
__EXPORT__
 
PHYSFS_sšt16
 
PHYSFS_sw­SLE16
(PHYSFS_sšt16 
v®
);

1385 
__EXPORT__
 
PHYSFS_ušt16
 
PHYSFS_sw­ULE16
(PHYSFS_ušt16 
v®
);

1397 
__EXPORT__
 
PHYSFS_sšt32
 
PHYSFS_sw­SLE32
(PHYSFS_sšt32 
v®
);

1410 
__EXPORT__
 
PHYSFS_ušt32
 
PHYSFS_sw­ULE32
(PHYSFS_ušt32 
v®
);

1425 
__EXPORT__
 
PHYSFS_sšt64
 
PHYSFS_sw­SLE64
(PHYSFS_sšt64 
v®
);

1441 
__EXPORT__
 
PHYSFS_ušt64
 
PHYSFS_sw­ULE64
(PHYSFS_ušt64 
v®
);

1454 
__EXPORT__
 
PHYSFS_sšt16
 
PHYSFS_sw­SBE16
(PHYSFS_sšt16 
v®
);

1467 
__EXPORT__
 
PHYSFS_ušt16
 
PHYSFS_sw­UBE16
(PHYSFS_ušt16 
v®
);

1479 
__EXPORT__
 
PHYSFS_sšt32
 
PHYSFS_sw­SBE32
(PHYSFS_sšt32 
v®
);

1492 
__EXPORT__
 
PHYSFS_ušt32
 
PHYSFS_sw­UBE32
(PHYSFS_ušt32 
v®
);

1508 
__EXPORT__
 
PHYSFS_sšt64
 
PHYSFS_sw­SBE64
(PHYSFS_sšt64 
v®
);

1524 
__EXPORT__
 
PHYSFS_ušt64
 
PHYSFS_sw­UBE64
(PHYSFS_ušt64 
v®
);

1540 
__EXPORT__
 
PHYSFS_»adSLE16
(
PHYSFS_Fe
 *
fe
, 
PHYSFS_sšt16
 *
v®
);

1557 
__EXPORT__
 
PHYSFS_»adULE16
(
PHYSFS_Fe
 *
fe
, 
PHYSFS_ušt16
 *
v®
);

1573 
__EXPORT__
 
PHYSFS_»adSBE16
(
PHYSFS_Fe
 *
fe
, 
PHYSFS_sšt16
 *
v®
);

1590 
__EXPORT__
 
PHYSFS_»adUBE16
(
PHYSFS_Fe
 *
fe
, 
PHYSFS_ušt16
 *
v®
);

1606 
__EXPORT__
 
PHYSFS_»adSLE32
(
PHYSFS_Fe
 *
fe
, 
PHYSFS_sšt32
 *
v®
);

1623 
__EXPORT__
 
PHYSFS_»adULE32
(
PHYSFS_Fe
 *
fe
, 
PHYSFS_ušt32
 *
v®
);

1639 
__EXPORT__
 
PHYSFS_»adSBE32
(
PHYSFS_Fe
 *
fe
, 
PHYSFS_sšt32
 *
v®
);

1656 
__EXPORT__
 
PHYSFS_»adUBE32
(
PHYSFS_Fe
 *
fe
, 
PHYSFS_ušt32
 *
v®
);

1675 
__EXPORT__
 
PHYSFS_»adSLE64
(
PHYSFS_Fe
 *
fe
, 
PHYSFS_sšt64
 *
v®
);

1694 
__EXPORT__
 
PHYSFS_»adULE64
(
PHYSFS_Fe
 *
fe
, 
PHYSFS_ušt64
 *
v®
);

1713 
__EXPORT__
 
PHYSFS_»adSBE64
(
PHYSFS_Fe
 *
fe
, 
PHYSFS_sšt64
 *
v®
);

1732 
__EXPORT__
 
PHYSFS_»adUBE64
(
PHYSFS_Fe
 *
fe
, 
PHYSFS_ušt64
 *
v®
);

1747 
__EXPORT__
 
PHYSFS_wr™eSLE16
(
PHYSFS_Fe
 *
fe
, 
PHYSFS_sšt16
 
v®
);

1762 
__EXPORT__
 
PHYSFS_wr™eULE16
(
PHYSFS_Fe
 *
fe
, 
PHYSFS_ušt16
 
v®
);

1777 
__EXPORT__
 
PHYSFS_wr™eSBE16
(
PHYSFS_Fe
 *
fe
, 
PHYSFS_sšt16
 
v®
);

1792 
__EXPORT__
 
PHYSFS_wr™eUBE16
(
PHYSFS_Fe
 *
fe
, 
PHYSFS_ušt16
 
v®
);

1807 
__EXPORT__
 
PHYSFS_wr™eSLE32
(
PHYSFS_Fe
 *
fe
, 
PHYSFS_sšt32
 
v®
);

1822 
__EXPORT__
 
PHYSFS_wr™eULE32
(
PHYSFS_Fe
 *
fe
, 
PHYSFS_ušt32
 
v®
);

1837 
__EXPORT__
 
PHYSFS_wr™eSBE32
(
PHYSFS_Fe
 *
fe
, 
PHYSFS_sšt32
 
v®
);

1852 
__EXPORT__
 
PHYSFS_wr™eUBE32
(
PHYSFS_Fe
 *
fe
, 
PHYSFS_ušt32
 
v®
);

1870 
__EXPORT__
 
PHYSFS_wr™eSLE64
(
PHYSFS_Fe
 *
fe
, 
PHYSFS_sšt64
 
v®
);

1888 
__EXPORT__
 
PHYSFS_wr™eULE64
(
PHYSFS_Fe
 *
fe
, 
PHYSFS_ušt64
 
v®
);

1906 
__EXPORT__
 
PHYSFS_wr™eSBE64
(
PHYSFS_Fe
 *
fe
, 
PHYSFS_sšt64
 
v®
);

1924 
__EXPORT__
 
PHYSFS_wr™eUBE64
(
PHYSFS_Fe
 *
fe
, 
PHYSFS_ušt64
 
v®
);

1943 
__EXPORT__
 
PHYSFS_isIn™
();

1958 
__EXPORT__
 
PHYSFS_symbŞicLšksP”m™‹d
();

1981 
	sPHYSFS_AÎoÿtÜ


1983 (*
In™
)();

1984 (*
Deš™
)();

1985 *(*
M®loc
)(
PHYSFS_ušt64
);

1986 *(*
R—Îoc
)(*, 
PHYSFS_ušt64
);

1987 (*
F»e
)(*);

1988 } 
	tPHYSFS_AÎoÿtÜ
;

2018 
__EXPORT__
 
PHYSFS_£tAÎoÿtÜ
(cÚ¡ 
PHYSFS_AÎoÿtÜ
 *
®loÿtÜ
);

2061 
__EXPORT__
 
PHYSFS_mouÁ
(cÚ¡ *
ÃwDœ
, cÚ¡ *
mouÁPošt
, 
­³ndToP©h
);

2085 
__EXPORT__
 cÚ¡ *
PHYSFS_g‘MouÁPošt
(cÚ¡ *
dœ
);

2112 (*
PHYSFS_SŒšgC®lback
)(*
	td©a
, cÚ¡ *
	t¡r
);

2146 (*
PHYSFS_EnumFesC®lback
)(*
	td©a
, cÚ¡ *
	tÜigdœ
,

2147 cÚ¡ *
	tâame
);

2181 
__EXPORT__
 
PHYSFS_g‘CdRomDœsC®lback
(
PHYSFS_SŒšgC®lback
 
c
, *
d
);

2217 
__EXPORT__
 
PHYSFS_g‘S—rchP©hC®lback
(
PHYSFS_SŒšgC®lback
 
c
, *
d
);

2258 
__EXPORT__
 
PHYSFS_’um”©eFesC®lback
(cÚ¡ *
dœ
,

2259 
PHYSFS_EnumFesC®lback
 
c
,

2260 *
d
);

2281 
__EXPORT__
 
PHYSFS_utf8FromUcs4
(cÚ¡ 
PHYSFS_ušt32
 *
¤c
, *
d¡
,

2282 
PHYSFS_ušt64
 
Ën
);

2303 
__EXPORT__
 
PHYSFS_utf8ToUcs4
(cÚ¡ *
¤c
, 
PHYSFS_ušt32
 *
d¡
,

2304 
PHYSFS_ušt64
 
Ën
);

2329 
__EXPORT__
 
PHYSFS_utf8FromUcs2
(cÚ¡ 
PHYSFS_ušt16
 *
¤c
, *
d¡
,

2330 
PHYSFS_ušt64
 
Ën
);

2355 
__EXPORT__
 
PHYSFS_utf8ToUcs2
(cÚ¡ *
¤c
, 
PHYSFS_ušt16
 *
d¡
,

2356 
PHYSFS_ušt64
 
Ën
);

2382 
__EXPORT__
 
PHYSFS_utf8FromL©š1
(cÚ¡ *
¤c
, *
d¡
,

2383 
PHYSFS_ušt64
 
Ën
);

2388 #ifdeà
__ılu¥lus


	@/usr/include/pthread.h

18 #iâdeà
_PTHREAD_H


19 
	#_PTHREAD_H
 1

	)

21 
	~<ã©u»s.h
>

22 
	~<’dŸn.h
>

23 
	~<sched.h
>

24 
	~<time.h
>

26 
	~<b™s/±h»adty³s.h
>

27 
	~<b™s/£tjmp.h
>

28 
	~<b™s/wÜdsize.h
>

34 
	mPTHREAD_CREATE_JOINABLE
,

35 
	#PTHREAD_CREATE_JOINABLE
 
PTHREAD_CREATE_JOINABLE


	)

36 
	mPTHREAD_CREATE_DETACHED


37 
	#PTHREAD_CREATE_DETACHED
 
PTHREAD_CREATE_DETACHED


	)

44 
	mPTHREAD_MUTEX_TIMED_NP
,

45 
	mPTHREAD_MUTEX_RECURSIVE_NP
,

46 
	mPTHREAD_MUTEX_ERRORCHECK_NP
,

47 
	mPTHREAD_MUTEX_ADAPTIVE_NP


48 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


50 
	mPTHREAD_MUTEX_NORMAL
 = 
PTHREAD_MUTEX_TIMED_NP
,

51 
	mPTHREAD_MUTEX_RECURSIVE
 = 
PTHREAD_MUTEX_RECURSIVE_NP
,

52 
	mPTHREAD_MUTEX_ERRORCHECK
 = 
PTHREAD_MUTEX_ERRORCHECK_NP
,

53 
	mPTHREAD_MUTEX_DEFAULT
 = 
PTHREAD_MUTEX_NORMAL


55 #ifdeà
__USE_GNU


57 , 
	mPTHREAD_MUTEX_FAST_NP
 = 
PTHREAD_MUTEX_TIMED_NP


62 #ifdeà
__USE_XOPEN2K


66 
	mPTHREAD_MUTEX_STALLED
,

67 
	mPTHREAD_MUTEX_STALLED_NP
 = 
PTHREAD_MUTEX_STALLED
,

68 
	mPTHREAD_MUTEX_ROBUST
,

69 
	mPTHREAD_MUTEX_ROBUST_NP
 = 
PTHREAD_MUTEX_ROBUST


74 #ià
defšed
 
__USE_POSIX199506
 || defšed 
__USE_UNIX98


78 
	mPTHREAD_PRIO_NONE
,

79 
	mPTHREAD_PRIO_INHERIT
,

80 
	mPTHREAD_PRIO_PROTECT


85 #ifdeà
__PTHREAD_MUTEX_HAVE_PREV


86 
	#PTHREAD_MUTEX_INITIALIZER
 \

87 { { 0, 0, 0, 0, 0, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

88 #ifdeà
__USE_GNU


89 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

90 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

91 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

92 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

93 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

94 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

98 
	#PTHREAD_MUTEX_INITIALIZER
 \

99 { { 0, 0, 0, 0, 0, { 
__PTHREAD_SPINS
 } } }

	)

100 #ifdeà
__USE_GNU


101 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

102 { { 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

103 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

104 { { 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

105 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

106 { { 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

113 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


116 
	mPTHREAD_RWLOCK_PREFER_READER_NP
,

117 
	mPTHREAD_RWLOCK_PREFER_WRITER_NP
,

118 
	mPTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,

119 
	mPTHREAD_RWLOCK_DEFAULT_NP
 = 
PTHREAD_RWLOCK_PREFER_READER_NP


125 #iâdeà
__PTHREAD_RWLOCK_INT_FLAGS_SHARED


126 #ià
__WORDSIZE
 == 64

127 
	#__PTHREAD_RWLOCK_INT_FLAGS_SHARED
 1

	)

132 
	#PTHREAD_RWLOCK_INITIALIZER
 \

133 { { 0, 0, 0, 0, 0, 0, 0, 0, 
__PTHREAD_RWLOCK_ELISION_EXTRA
, 0, 0 } }

	)

134 #ifdeà
__USE_GNU


135 #ifdeà
__PTHREAD_RWLOCK_INT_FLAGS_SHARED


136 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

137 { { 0, 0, 0, 0, 0, 0, 0, 0, 
__PTHREAD_RWLOCK_ELISION_EXTRA
, 0, \

138 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
 } }

	)

140 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


141 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

142 { { 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
, \

143 0, 
__PTHREAD_RWLOCK_ELISION_EXTRA
, 0, 0 } }

	)

145 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

146 { { 0, 0, 0, 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,\

147 0 } }

	)

157 
	mPTHREAD_INHERIT_SCHED
,

158 
	#PTHREAD_INHERIT_SCHED
 
PTHREAD_INHERIT_SCHED


	)

159 
	mPTHREAD_EXPLICIT_SCHED


160 
	#PTHREAD_EXPLICIT_SCHED
 
PTHREAD_EXPLICIT_SCHED


	)

167 
	mPTHREAD_SCOPE_SYSTEM
,

168 
	#PTHREAD_SCOPE_SYSTEM
 
PTHREAD_SCOPE_SYSTEM


	)

169 
	mPTHREAD_SCOPE_PROCESS


170 
	#PTHREAD_SCOPE_PROCESS
 
PTHREAD_SCOPE_PROCESS


	)

177 
	mPTHREAD_PROCESS_PRIVATE
,

178 
	#PTHREAD_PROCESS_PRIVATE
 
PTHREAD_PROCESS_PRIVATE


	)

179 
	mPTHREAD_PROCESS_SHARED


180 
	#PTHREAD_PROCESS_SHARED
 
PTHREAD_PROCESS_SHARED


	)

186 
	#PTHREAD_COND_INITIALIZER
 { { 0, 0, 0, 0, 0, (*è0, 0, 0 } }

	)

190 
	s_±h»ad_ş—nup_bufãr


192 (*
	m__routše
) (*);

193 *
	m__¬g
;

194 
	m__ÿnûÉy³
;

195 
_±h»ad_ş—nup_bufãr
 *
	m__´ev
;

201 
	mPTHREAD_CANCEL_ENABLE
,

202 
	#PTHREAD_CANCEL_ENABLE
 
PTHREAD_CANCEL_ENABLE


	)

203 
	mPTHREAD_CANCEL_DISABLE


204 
	#PTHREAD_CANCEL_DISABLE
 
PTHREAD_CANCEL_DISABLE


	)

208 
	mPTHREAD_CANCEL_DEFERRED
,

209 
	#PTHREAD_CANCEL_DEFERRED
 
PTHREAD_CANCEL_DEFERRED


	)

210 
	mPTHREAD_CANCEL_ASYNCHRONOUS


211 
	#PTHREAD_CANCEL_ASYNCHRONOUS
 
PTHREAD_CANCEL_ASYNCHRONOUS


	)

213 
	#PTHREAD_CANCELED
 ((*è-1)

	)

217 
	#PTHREAD_ONCE_INIT
 0

	)

220 #ifdeà
__USE_XOPEN2K


224 
	#PTHREAD_BARRIER_SERIAL_THREAD
 -1

	)

228 
__BEGIN_DECLS


233 
	$±h»ad_ü—‹
 (
±h»ad_t
 *
__»¡riù
 
__Ãwth»ad
,

234 cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

235 *(*
__¡¬t_routše
) (*),

236 *
__»¡riù
 
__¬g
è
__THROWNL
 
	`__nÚnuÎ
 ((1, 3));

242 
	$±h»ad_ex™
 (*
__»tv®
è
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

250 
	`±h»ad_još
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
);

252 #ifdeà
__USE_GNU


255 
	$±h»ad_Œyjoš_Å
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
è
__THROW
;

263 
	`±h»ad_timedjoš_Å
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
,

264 cÚ¡ 
time¥ec
 *
__ab¡ime
);

271 
	$±h»ad_d‘ach
 (
±h»ad_t
 
__th
è
__THROW
;

275 
±h»ad_t
 
	$±h»ad_£lf
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

278 
	$±h»ad_equ®
 (
±h»ad_t
 
__th»ad1
,…th»ad_ˆ
__th»ad2
)

279 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

287 
	$±h»ad_©Œ_š™
 (
±h»ad_©Œ_t
 *
__©Œ
è
__THROW
 
	`__nÚnuÎ
 ((1));

290 
	$±h»ad_©Œ_de¡roy
 (
±h»ad_©Œ_t
 *
__©Œ
)

291 
__THROW
 
	`__nÚnuÎ
 ((1));

294 
	$±h»ad_©Œ_g‘d‘ach¡©e
 (cÚ¡ 
±h»ad_©Œ_t
 *
__©Œ
,

295 *
__d‘ach¡©e
)

296 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

299 
	$±h»ad_©Œ_£td‘ach¡©e
 (
±h»ad_©Œ_t
 *
__©Œ
,

300 
__d‘ach¡©e
)

301 
__THROW
 
	`__nÚnuÎ
 ((1));

305 
	$±h»ad_©Œ_g‘gu¬dsize
 (cÚ¡ 
±h»ad_©Œ_t
 *
__©Œ
,

306 
size_t
 *
__gu¬dsize
)

307 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

310 
	$±h»ad_©Œ_£tgu¬dsize
 (
±h»ad_©Œ_t
 *
__©Œ
,

311 
size_t
 
__gu¬dsize
)

312 
__THROW
 
	`__nÚnuÎ
 ((1));

316 
	$±h»ad_©Œ_g‘sched·¿m
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

317 
sched_·¿m
 *
__»¡riù
 
__·¿m
)

318 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

321 
	$±h»ad_©Œ_£tsched·¿m
 (
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

322 cÚ¡ 
sched_·¿m
 *
__»¡riù


323 
__·¿m
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

326 
	$±h»ad_©Œ_g‘schedpŞicy
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


327 
__©Œ
, *
__»¡riù
 
__pŞicy
)

328 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

331 
	$±h»ad_©Œ_£tschedpŞicy
 (
±h»ad_©Œ_t
 *
__©Œ
, 
__pŞicy
)

332 
__THROW
 
	`__nÚnuÎ
 ((1));

335 
	$±h»ad_©Œ_g‘šh”™sched
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


336 
__©Œ
, *
__»¡riù
 
__šh”™
)

337 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

340 
	$±h»ad_©Œ_£tšh”™sched
 (
±h»ad_©Œ_t
 *
__©Œ
,

341 
__šh”™
)

342 
__THROW
 
	`__nÚnuÎ
 ((1));

346 
	$±h»ad_©Œ_g‘scİe
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

347 *
__»¡riù
 
__scİe
)

348 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

351 
	$±h»ad_©Œ_£tscİe
 (
±h»ad_©Œ_t
 *
__©Œ
, 
__scİe
)

352 
__THROW
 
	`__nÚnuÎ
 ((1));

355 
	$±h»ad_©Œ_g‘¡ackaddr
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


356 
__©Œ
, **
__»¡riù
 
__¡ackaddr
)

357 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__©Œibu‹_d•»ÿ‹d__
;

363 
	$±h»ad_©Œ_£t¡ackaddr
 (
±h»ad_©Œ_t
 *
__©Œ
,

364 *
__¡ackaddr
)

365 
__THROW
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
;

368 
	$±h»ad_©Œ_g‘¡acksize
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


369 
__©Œ
, 
size_t
 *
__»¡riù
 
__¡acksize
)

370 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

375 
	$±h»ad_©Œ_£t¡acksize
 (
±h»ad_©Œ_t
 *
__©Œ
,

376 
size_t
 
__¡acksize
)

377 
__THROW
 
	`__nÚnuÎ
 ((1));

379 #ifdeà
__USE_XOPEN2K


381 
	$±h»ad_©Œ_g‘¡ack
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

382 **
__»¡riù
 
__¡ackaddr
,

383 
size_t
 *
__»¡riù
 
__¡acksize
)

384 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

389 
	$±h»ad_©Œ_£t¡ack
 (
±h»ad_©Œ_t
 *
__©Œ
, *
__¡ackaddr
,

390 
size_t
 
__¡acksize
è
__THROW
 
	`__nÚnuÎ
 ((1));

393 #ifdeà
__USE_GNU


396 
	$±h»ad_©Œ_£ffš™y_Å
 (
±h»ad_©Œ_t
 *
__©Œ
,

397 
size_t
 
__ıu£tsize
,

398 cÚ¡ 
ıu_£t_t
 *
__ıu£t
)

399 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

403 
	$±h»ad_©Œ_g‘affš™y_Å
 (cÚ¡ 
±h»ad_©Œ_t
 *
__©Œ
,

404 
size_t
 
__ıu£tsize
,

405 
ıu_£t_t
 *
__ıu£t
)

406 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

409 
	$±h»ad_g‘©Œ_deçuÉ_Å
 (
±h»ad_©Œ_t
 *
__©Œ
)

410 
__THROW
 
	`__nÚnuÎ
 ((1));

414 
	$±h»ad_£‰r_deçuÉ_Å
 (cÚ¡ 
±h»ad_©Œ_t
 *
__©Œ
)

415 
__THROW
 
	`__nÚnuÎ
 ((1));

420 
	$±h»ad_g‘©Œ_Å
 (
±h»ad_t
 
__th
, 
±h»ad_©Œ_t
 *
__©Œ
)

421 
__THROW
 
	`__nÚnuÎ
 ((2));

429 
	$±h»ad_£tsched·¿m
 (
±h»ad_t
 
__rg‘_th»ad
, 
__pŞicy
,

430 cÚ¡ 
sched_·¿m
 *
__·¿m
)

431 
__THROW
 
	`__nÚnuÎ
 ((3));

434 
	$±h»ad_g‘sched·¿m
 (
±h»ad_t
 
__rg‘_th»ad
,

435 *
__»¡riù
 
__pŞicy
,

436 
sched_·¿m
 *
__»¡riù
 
__·¿m
)

437 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

440 
	$±h»ad_£tsched´io
 (
±h»ad_t
 
__rg‘_th»ad
, 
__´io
)

441 
__THROW
;

444 #ifdeà
__USE_GNU


446 
	$±h»ad_g‘Çme_Å
 (
±h»ad_t
 
__rg‘_th»ad
, *
__buf
,

447 
size_t
 
__buæ’
)

448 
__THROW
 
	`__nÚnuÎ
 ((2));

451 
	$±h»ad_£Šame_Å
 (
±h»ad_t
 
__rg‘_th»ad
, cÚ¡ *
__Çme
)

452 
__THROW
 
	`__nÚnuÎ
 ((2));

456 #ifdeà
__USE_UNIX98


458 
	$±h»ad_g‘cÚcu¼’cy
 (è
__THROW
;

461 
	$±h»ad_£tcÚcu¼’cy
 (
__Ëv–
è
__THROW
;

464 #ifdeà
__USE_GNU


469 
	$±h»ad_y›ld
 (è
__THROW
;

474 
	$±h»ad_£ffš™y_Å
 (
±h»ad_t
 
__th
, 
size_t
 
__ıu£tsize
,

475 cÚ¡ 
ıu_£t_t
 *
__ıu£t
)

476 
__THROW
 
	`__nÚnuÎ
 ((3));

479 
	$±h»ad_g‘affš™y_Å
 (
±h»ad_t
 
__th
, 
size_t
 
__ıu£tsize
,

480 
ıu_£t_t
 *
__ıu£t
)

481 
__THROW
 
	`__nÚnuÎ
 ((3));

494 
	$±h»ad_Úû
 (
±h»ad_Úû_t
 *
__Úû_cÚŒŞ
,

495 (*
__š™_routše
è()è
	`__nÚnuÎ
 ((1, 2));

506 
	`±h»ad_£tÿnûl¡©e
 (
__¡©e
, *
__Şd¡©e
);

510 
	`±h»ad_£tÿnûÉy³
 (
__ty³
, *
__Şdty³
);

513 
	`±h»ad_ÿnûl
 (
±h»ad_t
 
__th
);

518 
	`±h»ad_‹¡ÿnûl
 ();

527 
__jmp_buf
 
__ÿnûl_jmp_buf
;

528 
__mask_was_§ved
;

529 } 
__ÿnûl_jmp_buf
[1];

530 *
__·d
[4];

531 } 
	t__±h»ad_unwšd_buf_t
 
	t__©Œibu‹__
 ((
	t__®igÃd__
));

534 #iâdeà
__ş—nup_fù_©Œibu‹


535 
	#__ş—nup_fù_©Œibu‹


	)

540 
	s__±h»ad_ş—nup_äame


542 (*
__ÿnûl_routše
) (*);

543 *
__ÿnûl_¬g
;

544 
__do_™
;

545 
__ÿnûl_ty³
;

548 #ià
defšed
 
__GNUC__
 && defšed 
__EXCEPTIONS


549 #ifdeà
__ılu¥lus


551 şas 
	c__±h»ad_ş—nup_şass


553 (*
__ÿnûl_routše
) (*);

554 *
__ÿnûl_¬g
;

555 
__do_™
;

556 
__ÿnûl_ty³
;

558 
public
:

559 
	$__±h»ad_ş—nup_şass
 ((*
__fù
è(*), *
__¬g
)

560 : 
	`__ÿnûl_routše
 (
__fù
), 
	`__ÿnûl_¬g
 (
__¬g
), 
	$__do_™
 (1) { }

561 ~
	$__±h»ad_ş—nup_şass
 (è{ ià(
__do_™
è
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); 
	}
}

562 
	$__£tdo™
 (
__Ãwv®
è{ 
__do_™
 = __Ãwv®; 
	}
}

563 
	$__deãr
 (è{ 
	`±h»ad_£tÿnûÉy³
 (
PTHREAD_CANCEL_DEFERRED
,

564 &
__ÿnûl_ty³
); 
	}
}

565 
	$__»¡Üe
 (ècÚ¡ { 
	`±h»ad_£tÿnûÉy³
 (
__ÿnûl_ty³
, 0); 
	}
}

575 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

577 
__±h»ad_ş—nup_şass
 
	`__şäame
 (
routše
, 
¬g
)

	)

581 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

582 
__şäame
.
	`__£tdo™
 (
execu‹
); \

583 } 0)

	)

585 #ifdeà
__USE_GNU


589 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

591 
__±h»ad_ş—nup_şass
 
	`__şäame
 (
routše
, 
¬g
); \

592 
__şäame
.
	`__deãr
 ()

	)

597 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

598 
__şäame
.
	`__»¡Üe
 (); \

599 
__şäame
.
	`__£tdo™
 (
execu‹
); \

600 } 0)

	)

607 
__ex‹º_šlše
 

608 
	$__±h»ad_ş—nup_routše
 (
__±h»ad_ş—nup_äame
 *
__äame
)

610 ià(
__äame
->
__do_™
)

611 
__äame
->
	`__ÿnûl_routše
 (__äame->
__ÿnûl_¬g
);

612 
	}
}

621 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

623 
__±h»ad_ş—nup_äame
 
__şäame
 \

624 
	`__©Œibu‹__
 ((
	`__ş—nup__
 (
__±h»ad_ş—nup_routše
))) \

625 ğ{ .
__ÿnûl_routše
 = (
routše
), .
__ÿnûl_¬g
 = (
¬g
), \

626 .
__do_™
 = 1 };

	)

630 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

631 
__şäame
.
__do_™
 = (
execu‹
); \

632 } 0)

	)

634 #ifdeà
__USE_GNU


638 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

640 
__±h»ad_ş—nup_äame
 
__şäame
 \

641 
	`__©Œibu‹__
 ((
	`__ş—nup__
 (
__±h»ad_ş—nup_routše
))) \

642 ğ{ .
__ÿnûl_routše
 = (
routše
), .
__ÿnûl_¬g
 = (
¬g
), \

643 .
__do_™
 = 1 }; \

644 (è
	`±h»ad_£tÿnûÉy³
 (
PTHREAD_CANCEL_DEFERRED
, \

645 &
__şäame
.
__ÿnûl_ty³
)

	)

650 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

651 (è
	`±h»ad_£tÿnûÉy³
 (
__şäame
.
__ÿnûl_ty³
, 
NULL
); \

652 
__şäame
.
__do_™
 = (
execu‹
); \

653 } 0)

	)

664 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

666 
__±h»ad_unwšd_buf_t
 
__ÿnûl_buf
; \

667 (*
__ÿnûl_routše
è(*èğ(
routše
); \

668 *
__ÿnûl_¬g
 = (
¬g
); \

669 
__nÙ_fœ¡_ÿÎ
 = 
	`__sig£tjmp
 ((
__jmp_buf_g
 *) (*) \

670 
__ÿnûl_buf
.
__ÿnûl_jmp_buf
, 0); \

671 ià(
	`__glibc_uÆik–y
 (
__nÙ_fœ¡_ÿÎ
)) \

673 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

674 
	`__±h»ad_unwšd_Ãxt
 (&
__ÿnûl_buf
); \

678 
	`__±h»ad_»gi¡”_ÿnûl
 (&
__ÿnûl_buf
); \

679 dØ{

	)

680 
__±h»ad_»gi¡”_ÿnûl
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

681 
__ş—nup_fù_©Œibu‹
;

685 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

688 
	`__±h»ad_uÄegi¡”_ÿnûl
 (&
__ÿnûl_buf
); \

689 ià(
execu‹
) \

690 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

691 } 0)

	)

692 
	$__±h»ad_uÄegi¡”_ÿnûl
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

693 
__ş—nup_fù_©Œibu‹
;

695 #ifdeà
__USE_GNU


699 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

701 
__±h»ad_unwšd_buf_t
 
__ÿnûl_buf
; \

702 (*
__ÿnûl_routše
è(*èğ(
routše
); \

703 *
__ÿnûl_¬g
 = (
¬g
); \

704 
__nÙ_fœ¡_ÿÎ
 = 
	`__sig£tjmp
 ((
__jmp_buf_g
 *) (*) \

705 
__ÿnûl_buf
.
__ÿnûl_jmp_buf
, 0); \

706 ià(
	`__glibc_uÆik–y
 (
__nÙ_fœ¡_ÿÎ
)) \

708 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

709 
	`__±h»ad_unwšd_Ãxt
 (&
__ÿnûl_buf
); \

713 
	`__±h»ad_»gi¡”_ÿnûl_deãr
 (&
__ÿnûl_buf
); \

714 dØ{

	)

715 
	`__±h»ad_»gi¡”_ÿnûl_deãr
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

716 
__ş—nup_fù_©Œibu‹
;

721 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

724 
	`__±h»ad_uÄegi¡”_ÿnûl_»¡Üe
 (&
__ÿnûl_buf
); \

725 ià(
execu‹
) \

726 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

727 
	}
} 0)

	)

728 
	$__±h»ad_uÄegi¡”_ÿnûl_»¡Üe
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

729 
__ş—nup_fù_©Œibu‹
;

733 
	$__±h»ad_unwšd_Ãxt
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

734 
__ş—nup_fù_©Œibu‹
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
))

735 #iâdeà
SHARED


736 
	`__©Œibu‹__
 ((
__w—k__
))

742 
__jmp_buf_g
;

743 
	$__sig£tjmp
 (
__jmp_buf_g
 *
__’v
, 
__§vemask
è
__THROWNL
;

749 
	$±h»ad_mu‹x_š™
 (
±h»ad_mu‹x_t
 *
__mu‹x
,

750 cÚ¡ 
±h»ad_mu‹x©Œ_t
 *
__mu‹x©Œ
)

751 
__THROW
 
	`__nÚnuÎ
 ((1));

754 
	$±h»ad_mu‹x_de¡roy
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

755 
__THROW
 
	`__nÚnuÎ
 ((1));

758 
	$±h»ad_mu‹x_Œylock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

759 
__THROWNL
 
	`__nÚnuÎ
 ((1));

762 
	$±h»ad_mu‹x_lock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

763 
__THROWNL
 
	`__nÚnuÎ
 ((1));

765 #ifdeà
__USE_XOPEN2K


767 
	$±h»ad_mu‹x_timedlock
 (
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

768 cÚ¡ 
time¥ec
 *
__»¡riù


769 
__ab¡ime
è
__THROWNL
 
	`__nÚnuÎ
 ((1, 2));

773 
	$±h»ad_mu‹x_uÆock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

774 
__THROWNL
 
	`__nÚnuÎ
 ((1));

778 
	$±h»ad_mu‹x_g‘´ioûšg
 (cÚ¡ 
±h»ad_mu‹x_t
 *

779 
__»¡riù
 
__mu‹x
,

780 *
__»¡riù
 
__´ioûšg
)

781 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

785 
	$±h»ad_mu‹x_£rioûšg
 (
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

786 
__´ioûšg
,

787 *
__»¡riù
 
__Şd_ûšg
)

788 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

791 #ifdeà
__USE_XOPEN2K8


793 
	$±h»ad_mu‹x_cÚsi¡’t
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

794 
__THROW
 
	`__nÚnuÎ
 ((1));

795 #ifdeà
__USE_GNU


796 
	$±h»ad_mu‹x_cÚsi¡’t_Å
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

797 
__THROW
 
	`__nÚnuÎ
 ((1));

806 
	$±h»ad_mu‹x©Œ_š™
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
)

807 
__THROW
 
	`__nÚnuÎ
 ((1));

810 
	$±h»ad_mu‹x©Œ_de¡roy
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
)

811 
__THROW
 
	`__nÚnuÎ
 ((1));

814 
	$±h»ad_mu‹x©Œ_g‘psh¬ed
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *

815 
__»¡riù
 
__©Œ
,

816 *
__»¡riù
 
__psh¬ed
)

817 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

820 
	$±h»ad_mu‹x©Œ_£sh¬ed
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

821 
__psh¬ed
)

822 
__THROW
 
	`__nÚnuÎ
 ((1));

824 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


826 
	$±h»ad_mu‹x©Œ_g‘ty³
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *
__»¡riù


827 
__©Œ
, *
__»¡riù
 
__kšd
)

828 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

833 
	$±h»ad_mu‹x©Œ_£‰y³
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
, 
__kšd
)

834 
__THROW
 
	`__nÚnuÎ
 ((1));

838 
	$±h»ad_mu‹x©Œ_g‘´ÙocŞ
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *

839 
__»¡riù
 
__©Œ
,

840 *
__»¡riù
 
__´ÙocŞ
)

841 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

845 
	$±h»ad_mu‹x©Œ_£rÙocŞ
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

846 
__´ÙocŞ
)

847 
__THROW
 
	`__nÚnuÎ
 ((1));

850 
	$±h»ad_mu‹x©Œ_g‘´ioûšg
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *

851 
__»¡riù
 
__©Œ
,

852 *
__»¡riù
 
__´ioûšg
)

853 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

856 
	$±h»ad_mu‹x©Œ_£rioûšg
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

857 
__´ioûšg
)

858 
__THROW
 
	`__nÚnuÎ
 ((1));

860 #ifdeà
__USE_XOPEN2K


862 
	$±h»ad_mu‹x©Œ_g‘robu¡
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

863 *
__robu¡Ãss
)

864 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

865 #ifdeà
__USE_GNU


866 
	$±h»ad_mu‹x©Œ_g‘robu¡_Å
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

867 *
__robu¡Ãss
)

868 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

872 
	$±h»ad_mu‹x©Œ_£Œobu¡
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

873 
__robu¡Ãss
)

874 
__THROW
 
	`__nÚnuÎ
 ((1));

875 #ifdeà
__USE_GNU


876 
	$±h»ad_mu‹x©Œ_£Œobu¡_Å
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

877 
__robu¡Ãss
)

878 
__THROW
 
	`__nÚnuÎ
 ((1));

883 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


888 
	$±h»ad_rwlock_š™
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

889 cÚ¡ 
±h»ad_rwlock©Œ_t
 *
__»¡riù


890 
__©Œ
è
__THROW
 
	`__nÚnuÎ
 ((1));

893 
	$±h»ad_rwlock_de¡roy
 (
±h»ad_rwlock_t
 *
__rwlock
)

894 
__THROW
 
	`__nÚnuÎ
 ((1));

897 
	$±h»ad_rwlock_rdlock
 (
±h»ad_rwlock_t
 *
__rwlock
)

898 
__THROWNL
 
	`__nÚnuÎ
 ((1));

901 
	$±h»ad_rwlock_Œyrdlock
 (
±h»ad_rwlock_t
 *
__rwlock
)

902 
__THROWNL
 
	`__nÚnuÎ
 ((1));

904 #ifdeà
__USE_XOPEN2K


906 
	$±h»ad_rwlock_timedrdlock
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

907 cÚ¡ 
time¥ec
 *
__»¡riù


908 
__ab¡ime
è
__THROWNL
 
	`__nÚnuÎ
 ((1, 2));

912 
	$±h»ad_rwlock_w¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
)

913 
__THROWNL
 
	`__nÚnuÎ
 ((1));

916 
	$±h»ad_rwlock_Œyw¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
)

917 
__THROWNL
 
	`__nÚnuÎ
 ((1));

919 #ifdeà
__USE_XOPEN2K


921 
	$±h»ad_rwlock_timedw¾ock
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

922 cÚ¡ 
time¥ec
 *
__»¡riù


923 
__ab¡ime
è
__THROWNL
 
	`__nÚnuÎ
 ((1, 2));

927 
	$±h»ad_rwlock_uÆock
 (
±h»ad_rwlock_t
 *
__rwlock
)

928 
__THROWNL
 
	`__nÚnuÎ
 ((1));

934 
	$±h»ad_rwlock©Œ_š™
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
)

935 
__THROW
 
	`__nÚnuÎ
 ((1));

938 
	$±h»ad_rwlock©Œ_de¡roy
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
)

939 
__THROW
 
	`__nÚnuÎ
 ((1));

942 
	$±h»ad_rwlock©Œ_g‘psh¬ed
 (cÚ¡ 
±h»ad_rwlock©Œ_t
 *

943 
__»¡riù
 
__©Œ
,

944 *
__»¡riù
 
__psh¬ed
)

945 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

948 
	$±h»ad_rwlock©Œ_£sh¬ed
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
,

949 
__psh¬ed
)

950 
__THROW
 
	`__nÚnuÎ
 ((1));

953 
	$±h»ad_rwlock©Œ_g‘kšd_Å
 (cÚ¡ 
±h»ad_rwlock©Œ_t
 *

954 
__»¡riù
 
__©Œ
,

955 *
__»¡riù
 
__´ef
)

956 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

959 
	$±h»ad_rwlock©Œ_£tkšd_Å
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
,

960 
__´ef
è
__THROW
 
	`__nÚnuÎ
 ((1));

968 
	$±h»ad_cÚd_š™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

969 cÚ¡ 
±h»ad_cÚd©Œ_t
 *
__»¡riù
 
__cÚd_©Œ
)

970 
__THROW
 
	`__nÚnuÎ
 ((1));

973 
	$±h»ad_cÚd_de¡roy
 (
±h»ad_cÚd_t
 *
__cÚd
)

974 
__THROW
 
	`__nÚnuÎ
 ((1));

977 
	$±h»ad_cÚd_sigÇl
 (
±h»ad_cÚd_t
 *
__cÚd
)

978 
__THROWNL
 
	`__nÚnuÎ
 ((1));

981 
	$±h»ad_cÚd_brßdÿ¡
 (
±h»ad_cÚd_t
 *
__cÚd
)

982 
__THROWNL
 
	`__nÚnuÎ
 ((1));

989 
	$±h»ad_cÚd_wa™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

990 
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
)

991 
	`__nÚnuÎ
 ((1, 2));

1000 
	$±h»ad_cÚd_timedwa™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

1001 
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

1002 cÚ¡ 
time¥ec
 *
__»¡riù
 
__ab¡ime
)

1003 
	`__nÚnuÎ
 ((1, 2, 3));

1008 
	$±h»ad_cÚd©Œ_š™
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
)

1009 
__THROW
 
	`__nÚnuÎ
 ((1));

1012 
	$±h»ad_cÚd©Œ_de¡roy
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
)

1013 
__THROW
 
	`__nÚnuÎ
 ((1));

1016 
	$±h»ad_cÚd©Œ_g‘psh¬ed
 (cÚ¡ 
±h»ad_cÚd©Œ_t
 *

1017 
__»¡riù
 
__©Œ
,

1018 *
__»¡riù
 
__psh¬ed
)

1019 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1022 
	$±h»ad_cÚd©Œ_£sh¬ed
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
,

1023 
__psh¬ed
è
__THROW
 
	`__nÚnuÎ
 ((1));

1025 #ifdeà
__USE_XOPEN2K


1027 
	$±h»ad_cÚd©Œ_g‘şock
 (cÚ¡ 
±h»ad_cÚd©Œ_t
 *

1028 
__»¡riù
 
__©Œ
,

1029 
__şockid_t
 *
__»¡riù
 
__şock_id
)

1030 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1033 
	$±h»ad_cÚd©Œ_£tşock
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
,

1034 
__şockid_t
 
__şock_id
)

1035 
__THROW
 
	`__nÚnuÎ
 ((1));

1039 #ifdeà
__USE_XOPEN2K


1044 
	$±h»ad_¥š_š™
 (
±h»ad_¥šlock_t
 *
__lock
, 
__psh¬ed
)

1045 
__THROW
 
	`__nÚnuÎ
 ((1));

1048 
	$±h»ad_¥š_de¡roy
 (
±h»ad_¥šlock_t
 *
__lock
)

1049 
__THROW
 
	`__nÚnuÎ
 ((1));

1052 
	$±h»ad_¥š_lock
 (
±h»ad_¥šlock_t
 *
__lock
)

1053 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1056 
	$±h»ad_¥š_Œylock
 (
±h»ad_¥šlock_t
 *
__lock
)

1057 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1060 
	$±h»ad_¥š_uÆock
 (
±h»ad_¥šlock_t
 *
__lock
)

1061 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1068 
	$±h»ad_b¬r›r_š™
 (
±h»ad_b¬r›r_t
 *
__»¡riù
 
__b¬r›r
,

1069 cÚ¡ 
±h»ad_b¬r›¿‰r_t
 *
__»¡riù


1070 
__©Œ
, 
__couÁ
)

1071 
__THROW
 
	`__nÚnuÎ
 ((1));

1074 
	$±h»ad_b¬r›r_de¡roy
 (
±h»ad_b¬r›r_t
 *
__b¬r›r
)

1075 
__THROW
 
	`__nÚnuÎ
 ((1));

1078 
	$±h»ad_b¬r›r_wa™
 (
±h»ad_b¬r›r_t
 *
__b¬r›r
)

1079 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1083 
	$±h»ad_b¬r›¿‰r_š™
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
)

1084 
__THROW
 
	`__nÚnuÎ
 ((1));

1087 
	$±h»ad_b¬r›¿‰r_de¡roy
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
)

1088 
__THROW
 
	`__nÚnuÎ
 ((1));

1091 
	$±h»ad_b¬r›¿‰r_g‘psh¬ed
 (cÚ¡ 
±h»ad_b¬r›¿‰r_t
 *

1092 
__»¡riù
 
__©Œ
,

1093 *
__»¡riù
 
__psh¬ed
)

1094 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1097 
	$±h»ad_b¬r›¿‰r_£sh¬ed
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
,

1098 
__psh¬ed
)

1099 
__THROW
 
	`__nÚnuÎ
 ((1));

1111 
	$±h»ad_key_ü—‹
 (
±h»ad_key_t
 *
__key
,

1112 (*
__de¡r_funùiÚ
) (*))

1113 
__THROW
 
	`__nÚnuÎ
 ((1));

1116 
	$±h»ad_key_d–‘e
 (
±h»ad_key_t
 
__key
è
__THROW
;

1119 *
	$±h»ad_g‘¥ecific
 (
±h»ad_key_t
 
__key
è
__THROW
;

1122 
	$±h»ad_£t¥ecific
 (
±h»ad_key_t
 
__key
,

1123 cÚ¡ *
__poš‹r
è
__THROW
 ;

1126 #ifdeà
__USE_XOPEN2K


1128 
	$±h»ad_g‘ıuşockid
 (
±h»ad_t
 
__th»ad_id
,

1129 
__şockid_t
 *
__şock_id
)

1130 
__THROW
 
	`__nÚnuÎ
 ((2));

1145 
	$±h»ad_©fÜk
 ((*
__´•¬e
) (),

1146 (*
__·»Á
) (),

1147 (*
__chd
è()è
__THROW
;

1150 #ifdeà
__USE_EXTERN_INLINES


1152 
__ex‹º_šlše
 

1153 
	`__NTH
 (
	$±h»ad_equ®
 (
±h»ad_t
 
__th»ad1
,…th»ad_ˆ
__th»ad2
))

1155  
__th»ad1
 =ğ
__th»ad2
;

1156 
	}
}

1159 
	g__END_DECLS


	@/usr/include/stdint.h

22 #iâdeà
_STDINT_H


23 
	#_STDINT_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	~<b™s/wch¬.h
>

27 
	~<b™s/wÜdsize.h
>

34 #iâdeà
__št8_t_defšed


35 
	#__št8_t_defšed


	)

36 sigÃd 
	tšt8_t
;

37 
	tšt16_t
;

38 
	tšt32_t
;

39 #ià
__WORDSIZE
 == 64

40 
	tšt64_t
;

42 
__ex‹nsiÚ__


43 
	tšt64_t
;

48 
	tušt8_t
;

49 
	tušt16_t
;

50 #iâdeà
__ušt32_t_defšed


51 
	tušt32_t
;

52 
	#__ušt32_t_defšed


	)

54 #ià
__WORDSIZE
 == 64

55 
	tušt64_t
;

57 
__ex‹nsiÚ__


58 
	tušt64_t
;

65 sigÃd 
	tšt_Ëa¡8_t
;

66 
	tšt_Ëa¡16_t
;

67 
	tšt_Ëa¡32_t
;

68 #ià
__WORDSIZE
 == 64

69 
	tšt_Ëa¡64_t
;

71 
__ex‹nsiÚ__


72 
	tšt_Ëa¡64_t
;

76 
	tušt_Ëa¡8_t
;

77 
	tušt_Ëa¡16_t
;

78 
	tušt_Ëa¡32_t
;

79 #ià
__WORDSIZE
 == 64

80 
	tušt_Ëa¡64_t
;

82 
__ex‹nsiÚ__


83 
	tušt_Ëa¡64_t
;

90 sigÃd 
	tšt_ç¡8_t
;

91 #ià
__WORDSIZE
 == 64

92 
	tšt_ç¡16_t
;

93 
	tšt_ç¡32_t
;

94 
	tšt_ç¡64_t
;

96 
	tšt_ç¡16_t
;

97 
	tšt_ç¡32_t
;

98 
__ex‹nsiÚ__


99 
	tšt_ç¡64_t
;

103 
	tušt_ç¡8_t
;

104 #ià
__WORDSIZE
 == 64

105 
	tušt_ç¡16_t
;

106 
	tušt_ç¡32_t
;

107 
	tušt_ç¡64_t
;

109 
	tušt_ç¡16_t
;

110 
	tušt_ç¡32_t
;

111 
__ex‹nsiÚ__


112 
	tušt_ç¡64_t
;

117 #ià
__WORDSIZE
 == 64

118 #iâdeà
__šŒ_t_defšed


119 
	tšŒ_t
;

120 
	#__šŒ_t_defšed


	)

122 
	tušŒ_t
;

124 #iâdeà
__šŒ_t_defšed


125 
	tšŒ_t
;

126 
	#__šŒ_t_defšed


	)

128 
	tušŒ_t
;

133 #ià
__WORDSIZE
 == 64

134 
	tštmax_t
;

135 
	tuštmax_t
;

137 
__ex‹nsiÚ__


138 
	tštmax_t
;

139 
__ex‹nsiÚ__


140 
	tuštmax_t
;

144 #ià
__WORDSIZE
 == 64

145 
	#__INT64_C
(
c
èø## 
L


	)

146 
	#__UINT64_C
(
c
èø## 
UL


	)

148 
	#__INT64_C
(
c
èø## 
LL


	)

149 
	#__UINT64_C
(
c
èø## 
ULL


	)

155 
	#INT8_MIN
 (-128)

	)

156 
	#INT16_MIN
 (-32767-1)

	)

157 
	#INT32_MIN
 (-2147483647-1)

	)

158 
	#INT64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

160 
	#INT8_MAX
 (127)

	)

161 
	#INT16_MAX
 (32767)

	)

162 
	#INT32_MAX
 (2147483647)

	)

163 
	#INT64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

166 
	#UINT8_MAX
 (255)

	)

167 
	#UINT16_MAX
 (65535)

	)

168 
	#UINT32_MAX
 (4294967295U)

	)

169 
	#UINT64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

173 
	#INT_LEAST8_MIN
 (-128)

	)

174 
	#INT_LEAST16_MIN
 (-32767-1)

	)

175 
	#INT_LEAST32_MIN
 (-2147483647-1)

	)

176 
	#INT_LEAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

178 
	#INT_LEAST8_MAX
 (127)

	)

179 
	#INT_LEAST16_MAX
 (32767)

	)

180 
	#INT_LEAST32_MAX
 (2147483647)

	)

181 
	#INT_LEAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

184 
	#UINT_LEAST8_MAX
 (255)

	)

185 
	#UINT_LEAST16_MAX
 (65535)

	)

186 
	#UINT_LEAST32_MAX
 (4294967295U)

	)

187 
	#UINT_LEAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

191 
	#INT_FAST8_MIN
 (-128)

	)

192 #ià
__WORDSIZE
 == 64

193 
	#INT_FAST16_MIN
 (-9223372036854775807L-1)

	)

194 
	#INT_FAST32_MIN
 (-9223372036854775807L-1)

	)

196 
	#INT_FAST16_MIN
 (-2147483647-1)

	)

197 
	#INT_FAST32_MIN
 (-2147483647-1)

	)

199 
	#INT_FAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

201 
	#INT_FAST8_MAX
 (127)

	)

202 #ià
__WORDSIZE
 == 64

203 
	#INT_FAST16_MAX
 (9223372036854775807L)

	)

204 
	#INT_FAST32_MAX
 (9223372036854775807L)

	)

206 
	#INT_FAST16_MAX
 (2147483647)

	)

207 
	#INT_FAST32_MAX
 (2147483647)

	)

209 
	#INT_FAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

212 
	#UINT_FAST8_MAX
 (255)

	)

213 #ià
__WORDSIZE
 == 64

214 
	#UINT_FAST16_MAX
 (18446744073709551615UL)

	)

215 
	#UINT_FAST32_MAX
 (18446744073709551615UL)

	)

217 
	#UINT_FAST16_MAX
 (4294967295U)

	)

218 
	#UINT_FAST32_MAX
 (4294967295U)

	)

220 
	#UINT_FAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

224 #ià
__WORDSIZE
 == 64

225 
	#INTPTR_MIN
 (-9223372036854775807L-1)

	)

226 
	#INTPTR_MAX
 (9223372036854775807L)

	)

227 
	#UINTPTR_MAX
 (18446744073709551615UL)

	)

229 
	#INTPTR_MIN
 (-2147483647-1)

	)

230 
	#INTPTR_MAX
 (2147483647)

	)

231 
	#UINTPTR_MAX
 (4294967295U)

	)

236 
	#INTMAX_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

238 
	#INTMAX_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

241 
	#UINTMAX_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

247 #ià
__WORDSIZE
 == 64

248 
	#PTRDIFF_MIN
 (-9223372036854775807L-1)

	)

249 
	#PTRDIFF_MAX
 (9223372036854775807L)

	)

251 
	#PTRDIFF_MIN
 (-2147483647-1)

	)

252 
	#PTRDIFF_MAX
 (2147483647)

	)

256 
	#SIG_ATOMIC_MIN
 (-2147483647-1)

	)

257 
	#SIG_ATOMIC_MAX
 (2147483647)

	)

260 #ià
__WORDSIZE
 == 64

261 
	#SIZE_MAX
 (18446744073709551615UL)

	)

263 #ifdeà
__WORDSIZE32_SIZE_ULONG


264 
	#SIZE_MAX
 (4294967295UL)

	)

266 
	#SIZE_MAX
 (4294967295U)

	)

271 #iâdeà
WCHAR_MIN


273 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

274 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

278 
	#WINT_MIN
 (0u)

	)

279 
	#WINT_MAX
 (4294967295u)

	)

282 
	#INT8_C
(
c
è
	)
c

283 
	#INT16_C
(
c
è
	)
c

284 
	#INT32_C
(
c
è
	)
c

285 #ià
__WORDSIZE
 == 64

286 
	#INT64_C
(
c
èø## 
L


	)

288 
	#INT64_C
(
c
èø## 
LL


	)

292 
	#UINT8_C
(
c
è
	)
c

293 
	#UINT16_C
(
c
è
	)
c

294 
	#UINT32_C
(
c
èø## 
U


	)

295 #ià
__WORDSIZE
 == 64

296 
	#UINT64_C
(
c
èø## 
UL


	)

298 
	#UINT64_C
(
c
èø## 
ULL


	)

302 #ià
__WORDSIZE
 == 64

303 
	#INTMAX_C
(
c
èø## 
L


	)

304 
	#UINTMAX_C
(
c
èø## 
UL


	)

306 
	#INTMAX_C
(
c
èø## 
LL


	)

307 
	#UINTMAX_C
(
c
èø## 
ULL


	)

	@/usr/include/stdio.h

23 #iâdeà
_STDIO_H


25 #ià!
defšed
 
__Ãed_FILE
 && !defšed 
__Ãed___FILE


26 
	#_STDIO_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


31 
	#__Ãed_size_t


	)

32 
	#__Ãed_NULL


	)

33 
	~<¡ddef.h
>

35 
	~<b™s/ty³s.h
>

36 
	#__Ãed_FILE


	)

37 
	#__Ãed___FILE


	)

41 #ià!
defšed
 
__FILE_defšed
 && defšed 
__Ãed_FILE


44 
	g_IO_FILE
;

46 
__BEGIN_NAMESPACE_STD


48 
_IO_FILE
 
	tFILE
;

49 
	g__END_NAMESPACE_STD


50 #ià
defšed
 
__USE_LARGEFILE64
 || defšed 
__USE_POSIX
 \

51 || 
defšed
 
	g__USE_ISOC99
 || defšed 
	g__USE_XOPEN
 \

52 || 
defšed
 
__USE_POSIX2


53 
	$__USING_NAMESPACE_STD
(
FILE
)

56 
	#__FILE_defšed
 1

	)

58 #undeà
__Ãed_FILE


61 #ià!
defšed
 
____FILE_defšed
 && defšed 
__Ãed___FILE


64 
_IO_FILE
 
	t__FILE
;

66 
	#____FILE_defšed
 1

	)

68 #undeà
__Ãed___FILE


71 #ifdef 
_STDIO_H


72 
	#_STDIO_USES_IOSTREAM


	)

74 
	~<libio.h
>

76 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


77 #ifdeà
__GNUC__


78 #iâdeà
_VA_LIST_DEFINED


79 
_G_va_li¡
 
	tva_li¡
;

80 
	#_VA_LIST_DEFINED


	)

83 
	~<¡d¬g.h
>

87 #ifdeà
__USE_XOPEN2K8


88 #iâdeà
__off_t_defšed


89 #iâdeà
__USE_FILE_OFFSET64


90 
__off_t
 
	toff_t
;

92 
__off64_t
 
	toff_t
;

94 
	#__off_t_defšed


	)

96 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


97 
__off64_t
 
	toff64_t
;

98 
	#__off64_t_defšed


	)

101 #iâdeà
__ssize_t_defšed


102 
__ssize_t
 
	tssize_t
;

103 
	#__ssize_t_defšed


	)

108 
__BEGIN_NAMESPACE_STD


109 #iâdeà
__USE_FILE_OFFSET64


110 
_G_åos_t
 
	tåos_t
;

112 
_G_åos64_t
 
	tåos_t
;

114 
__END_NAMESPACE_STD


115 #ifdeà
__USE_LARGEFILE64


116 
_G_åos64_t
 
	tåos64_t
;

120 
	#_IOFBF
 0

	)

121 
	#_IOLBF
 1

	)

122 
	#_IONBF
 2

	)

126 #iâdeà
BUFSIZ


127 
	#BUFSIZ
 
_IO_BUFSIZ


	)

133 #iâdeà
EOF


134 
	#EOF
 (-1)

	)

140 
	#SEEK_SET
 0

	)

141 
	#SEEK_CUR
 1

	)

142 
	#SEEK_END
 2

	)

143 #ifdeà
__USE_GNU


144 
	#SEEK_DATA
 3

	)

145 
	#SEEK_HOLE
 4

	)

149 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


151 
	#P_tmpdœ
 "/tmp"

	)

164 
	~<b™s/¡dio_lim.h
>

168 
_IO_FILE
 *
¡dš
;

169 
_IO_FILE
 *
¡dout
;

170 
_IO_FILE
 *
¡d”r
;

172 
	#¡dš
 
¡dš


	)

173 
	#¡dout
 
¡dout


	)

174 
	#¡d”r
 
¡d”r


	)

176 
__BEGIN_NAMESPACE_STD


178 
	$»move
 (cÚ¡ *
__f’ame
è
__THROW
;

180 
	$»Çme
 (cÚ¡ *
__Şd
, cÚ¡ *
__Ãw
è
__THROW
;

181 
__END_NAMESPACE_STD


183 #ifdeà
__USE_ATFILE


185 
	$»Çm—t
 (
__Şdfd
, cÚ¡ *
__Şd
, 
__Ãwfd
,

186 cÚ¡ *
__Ãw
è
__THROW
;

189 
__BEGIN_NAMESPACE_STD


194 #iâdeà
__USE_FILE_OFFSET64


195 
FILE
 *
	$tmpfe
 (è
__wur
;

197 #ifdeà
__REDIRECT


198 
FILE
 *
	`__REDIRECT
 (
tmpfe
, (), 
tmpfe64
è
__wur
;

200 
	#tmpfe
 
tmpfe64


	)

204 #ifdeà
__USE_LARGEFILE64


205 
FILE
 *
	$tmpfe64
 (è
__wur
;

209 *
	$tm²am
 (*
__s
è
__THROW
 
__wur
;

210 
__END_NAMESPACE_STD


212 #ifdeà
__USE_MISC


215 *
	$tm²am_r
 (*
__s
è
__THROW
 
__wur
;

219 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


227 *
	$‹m²am
 (cÚ¡ *
__dœ
, cÚ¡ *
__pfx
)

228 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

232 
__BEGIN_NAMESPACE_STD


237 
	`fşo£
 (
FILE
 *
__¡»am
);

242 
	`fæush
 (
FILE
 *
__¡»am
);

243 
__END_NAMESPACE_STD


245 #ifdeà
__USE_MISC


252 
	`fæush_uÆocked
 (
FILE
 *
__¡»am
);

255 #ifdeà
__USE_GNU


262 
	`fşo£®l
 ();

266 
__BEGIN_NAMESPACE_STD


267 #iâdeà
__USE_FILE_OFFSET64


272 
FILE
 *
	$fİ’
 (cÚ¡ *
__»¡riù
 
__f’ame
,

273 cÚ¡ *
__»¡riù
 
__modes
è
__wur
;

278 
FILE
 *
	$äeİ’
 (cÚ¡ *
__»¡riù
 
__f’ame
,

279 cÚ¡ *
__»¡riù
 
__modes
,

280 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

282 #ifdeà
__REDIRECT


283 
FILE
 *
	`__REDIRECT
 (
fİ’
, (cÚ¡ *
__»¡riù
 
__f’ame
,

284 cÚ¡ *
__»¡riù
 
__modes
), 
fİ’64
)

285 
__wur
;

286 
FILE
 *
	`__REDIRECT
 (
äeİ’
, (cÚ¡ *
__»¡riù
 
__f’ame
,

287 cÚ¡ *
__»¡riù
 
__modes
,

288 
FILE
 *
__»¡riù
 
__¡»am
), 
äeİ’64
)

289 
__wur
;

291 
	#fİ’
 
fİ’64


	)

292 
	#äeİ’
 
äeİ’64


	)

295 
__END_NAMESPACE_STD


296 #ifdeà
__USE_LARGEFILE64


297 
FILE
 *
	$fİ’64
 (cÚ¡ *
__»¡riù
 
__f’ame
,

298 cÚ¡ *
__»¡riù
 
__modes
è
__wur
;

299 
FILE
 *
	$äeİ’64
 (cÚ¡ *
__»¡riù
 
__f’ame
,

300 cÚ¡ *
__»¡riù
 
__modes
,

301 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

304 #ifdef 
__USE_POSIX


306 
FILE
 *
	$fdİ’
 (
__fd
, cÚ¡ *
__modes
è
__THROW
 
__wur
;

309 #ifdef 
__USE_GNU


312 
FILE
 *
	$fİ’cook›
 (*
__»¡riù
 
__magic_cook›
,

313 cÚ¡ *
__»¡riù
 
__modes
,

314 
_IO_cook›_io_funùiÚs_t
 
__io_funcs
è
__THROW
 
__wur
;

317 #ifdeà
__USE_XOPEN2K8


319 
FILE
 *
	$fmemİ’
 (*
__s
, 
size_t
 
__Ën
, cÚ¡ *
__modes
)

320 
__THROW
 
__wur
;

325 
FILE
 *
	$İ’_mem¡»am
 (**
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
 
__wur
;

329 
__BEGIN_NAMESPACE_STD


332 
	$£tbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
è
__THROW
;

336 
	$£tvbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

337 
__modes
, 
size_t
 
__n
è
__THROW
;

338 
__END_NAMESPACE_STD


340 #ifdef 
__USE_MISC


343 
	$£tbufãr
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

344 
size_t
 
__size
è
__THROW
;

347 
	$£šebuf
 (
FILE
 *
__¡»am
è
__THROW
;

351 
__BEGIN_NAMESPACE_STD


356 
	`årštf
 (
FILE
 *
__»¡riù
 
__¡»am
,

357 cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

362 
	`´štf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

364 
	$¥rštf
 (*
__»¡riù
 
__s
,

365 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROWNL
;

371 
	`vårštf
 (
FILE
 *
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

372 
_G_va_li¡
 
__¬g
);

377 
	`v´štf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
);

379 
	$v¥rštf
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

380 
_G_va_li¡
 
__¬g
è
__THROWNL
;

381 
__END_NAMESPACE_STD


383 #ià
defšed
 
__USE_ISOC99
 || defšed 
__USE_UNIX98


384 
__BEGIN_NAMESPACE_C99


386 
	$¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

387 cÚ¡ *
__»¡riù
 
__fÜm©
, ...)

388 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

390 
	$v¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

391 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

392 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

393 
__END_NAMESPACE_C99


396 #ifdeà
__USE_GNU


399 
	$va¥rštf
 (**
__»¡riù
 
__±r
, cÚ¡ *__»¡riù 
__f
,

400 
_G_va_li¡
 
__¬g
)

401 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 0))è
__wur
;

402 
	$__a¥rštf
 (**
__»¡riù
 
__±r
,

403 cÚ¡ *
__»¡riù
 
__fmt
, ...)

404 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

405 
	$a¥rštf
 (**
__»¡riù
 
__±r
,

406 cÚ¡ *
__»¡riù
 
__fmt
, ...)

407 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

410 #ifdeà
__USE_XOPEN2K8


412 
	$vd´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
,

413 
_G_va_li¡
 
__¬g
)

414 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

415 
	$d´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
, ...)

416 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

420 
__BEGIN_NAMESPACE_STD


425 
	$fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

426 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

431 
	$sÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

433 
	$ssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

434 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

436 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

437 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

438 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

439 #ifdeà
__REDIRECT


443 
	`__REDIRECT
 (
fsÿnf
, (
FILE
 *
__»¡riù
 
__¡»am
,

444 cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

445 
__isoc99_fsÿnf
è
__wur
;

446 
	`__REDIRECT
 (
sÿnf
, (cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

447 
__isoc99_sÿnf
è
__wur
;

448 
	`__REDIRECT_NTH
 (
ssÿnf
, (cÚ¡ *
__»¡riù
 
__s
,

449 cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

450 
__isoc99_ssÿnf
);

452 
	$__isoc99_fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

453 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

454 
	$__isoc99_sÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

455 
	$__isoc99_ssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

456 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

457 
	#fsÿnf
 
__isoc99_fsÿnf


	)

458 
	#sÿnf
 
__isoc99_sÿnf


	)

459 
	#ssÿnf
 
__isoc99_ssÿnf


	)

463 
__END_NAMESPACE_STD


465 #ifdef 
__USE_ISOC99


466 
__BEGIN_NAMESPACE_C99


471 
	$vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

472 
_G_va_li¡
 
__¬g
)

473 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

479 
	$vsÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

480 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

483 
	$vssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

484 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

485 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

487 #ià!
defšed
 
__USE_GNU
 \

488 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

489 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

490 #ifdeà
__REDIRECT


494 
	`__REDIRECT
 (
vfsÿnf
,

495 (
FILE
 *
__»¡riù
 
__s
,

496 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
),

497 
__isoc99_vfsÿnf
)

498 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

499 
	`__REDIRECT
 (
vsÿnf
, (cÚ¡ *
__»¡riù
 
__fÜm©
,

500 
_G_va_li¡
 
__¬g
), 
__isoc99_vsÿnf
)

501 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

502 
	`__REDIRECT_NTH
 (
vssÿnf
,

503 (cÚ¡ *
__»¡riù
 
__s
,

504 cÚ¡ *
__»¡riù
 
__fÜm©
,

505 
_G_va_li¡
 
__¬g
), 
__isoc99_vssÿnf
)

506 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

508 
	$__isoc99_vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
,

509 cÚ¡ *
__»¡riù
 
__fÜm©
,

510 
_G_va_li¡
 
__¬g
è
__wur
;

511 
	$__isoc99_vsÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
,

512 
_G_va_li¡
 
__¬g
è
__wur
;

513 
	$__isoc99_vssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

514 cÚ¡ *
__»¡riù
 
__fÜm©
,

515 
_G_va_li¡
 
__¬g
è
__THROW
;

516 
	#vfsÿnf
 
__isoc99_vfsÿnf


	)

517 
	#vsÿnf
 
__isoc99_vsÿnf


	)

518 
	#vssÿnf
 
__isoc99_vssÿnf


	)

522 
__END_NAMESPACE_C99


526 
__BEGIN_NAMESPACE_STD


531 
	`fg‘c
 (
FILE
 *
__¡»am
);

532 
	`g‘c
 (
FILE
 *
__¡»am
);

538 
	`g‘ch¬
 ();

539 
__END_NAMESPACE_STD


543 
	#g‘c
(
_å
è
	`_IO_g‘c
 (_å)

	)

545 #ifdeà
__USE_POSIX


550 
	`g‘c_uÆocked
 (
FILE
 *
__¡»am
);

551 
	`g‘ch¬_uÆocked
 ();

554 #ifdeà
__USE_MISC


561 
	`fg‘c_uÆocked
 (
FILE
 *
__¡»am
);

565 
__BEGIN_NAMESPACE_STD


573 
	`åutc
 (
__c
, 
FILE
 *
__¡»am
);

574 
	`putc
 (
__c
, 
FILE
 *
__¡»am
);

580 
	`putch¬
 (
__c
);

581 
__END_NAMESPACE_STD


585 
	#putc
(
_ch
, 
_å
è
	`_IO_putc
 (_ch, _å)

	)

587 #ifdeà
__USE_MISC


594 
	`åutc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

597 #ifdeà
__USE_POSIX


602 
	`putc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

603 
	`putch¬_uÆocked
 (
__c
);

607 #ià
defšed
 
__USE_MISC
 \

608 || (
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

610 
	`g‘w
 (
FILE
 *
__¡»am
);

613 
	`putw
 (
__w
, 
FILE
 *
__¡»am
);

617 
__BEGIN_NAMESPACE_STD


622 *
	$fg‘s
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

623 
__wur
;

625 #ià!
defšed
 
__USE_ISOC11
 \

626 || (
defšed
 
__ılu¥lus
 && __cplusplus <= 201103L)

638 *
	$g‘s
 (*
__s
è
__wur
 
__©Œibu‹_d•»ÿ‹d__
;

640 
__END_NAMESPACE_STD


642 #ifdeà
__USE_GNU


649 *
	$fg‘s_uÆocked
 (*
__»¡riù
 
__s
, 
__n
,

650 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

654 #ifdef 
__USE_XOPEN2K8


665 
_IO_ssize_t
 
	$__g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

666 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

667 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

668 
_IO_ssize_t
 
	$g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

669 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

670 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

678 
_IO_ssize_t
 
	$g‘lše
 (**
__»¡riù
 
__lš•Œ
,

679 
size_t
 *
__»¡riù
 
__n
,

680 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

684 
__BEGIN_NAMESPACE_STD


689 
	`åuts
 (cÚ¡ *
__»¡riù
 
__s
, 
FILE
 *__»¡riù 
__¡»am
);

695 
	`puts
 (cÚ¡ *
__s
);

702 
	`ung‘c
 (
__c
, 
FILE
 *
__¡»am
);

709 
size_t
 
	$ä—d
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

710 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

715 
size_t
 
	`fwr™e
 (cÚ¡ *
__»¡riù
 
__±r
, size_ˆ
__size
,

716 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__s
);

717 
__END_NAMESPACE_STD


719 #ifdeà
__USE_GNU


726 
	`åuts_uÆocked
 (cÚ¡ *
__»¡riù
 
__s
,

727 
FILE
 *
__»¡riù
 
__¡»am
);

730 #ifdeà
__USE_MISC


737 
size_t
 
	$ä—d_uÆocked
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

738 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

739 
size_t
 
	`fwr™e_uÆocked
 (cÚ¡ *
__»¡riù
 
__±r
, size_ˆ
__size
,

740 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
);

744 
__BEGIN_NAMESPACE_STD


749 
	`f£ek
 (
FILE
 *
__¡»am
, 
__off
, 
__wh’û
);

754 
	$á–l
 (
FILE
 *
__¡»am
è
__wur
;

759 
	`»wšd
 (
FILE
 *
__¡»am
);

760 
__END_NAMESPACE_STD


767 #ià
defšed
 
__USE_LARGEFILE
 || defšed 
__USE_XOPEN2K


768 #iâdeà
__USE_FILE_OFFSET64


773 
	`f£eko
 (
FILE
 *
__¡»am
, 
__off_t
 
__off
, 
__wh’û
);

778 
__off_t
 
	$á–lo
 (
FILE
 *
__¡»am
è
__wur
;

780 #ifdeà
__REDIRECT


781 
	`__REDIRECT
 (
f£eko
,

782 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
),

783 
f£eko64
);

784 
__off64_t
 
	`__REDIRECT
 (
á–lo
, (
FILE
 *
__¡»am
), 
á–lo64
);

786 
	#f£eko
 
f£eko64


	)

787 
	#á–lo
 
á–lo64


	)

792 
__BEGIN_NAMESPACE_STD


793 #iâdeà
__USE_FILE_OFFSET64


798 
	`fg‘pos
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos_t
 *__»¡riù 
__pos
);

803 
	`f£os
 (
FILE
 *
__¡»am
, cÚ¡ 
åos_t
 *
__pos
);

805 #ifdeà
__REDIRECT


806 
	`__REDIRECT
 (
fg‘pos
, (
FILE
 *
__»¡riù
 
__¡»am
,

807 
åos_t
 *
__»¡riù
 
__pos
), 
fg‘pos64
);

808 
	`__REDIRECT
 (
f£os
,

809 (
FILE
 *
__¡»am
, cÚ¡ 
åos_t
 *
__pos
), 
f£os64
);

811 
	#fg‘pos
 
fg‘pos64


	)

812 
	#f£os
 
f£os64


	)

815 
__END_NAMESPACE_STD


817 #ifdeà
__USE_LARGEFILE64


818 
	`f£eko64
 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
);

819 
__off64_t
 
	$á–lo64
 (
FILE
 *
__¡»am
è
__wur
;

820 
	`fg‘pos64
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos64_t
 *__»¡riù 
__pos
);

821 
	`f£os64
 (
FILE
 *
__¡»am
, cÚ¡ 
åos64_t
 *
__pos
);

824 
__BEGIN_NAMESPACE_STD


826 
	$ş—»¼
 (
FILE
 *
__¡»am
è
__THROW
;

828 
	$ãof
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

830 
	$ã¼Ü
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

831 
__END_NAMESPACE_STD


833 #ifdeà
__USE_MISC


835 
	$ş—»¼_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
;

836 
	$ãof_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

837 
	$ã¼Ü_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

841 
__BEGIN_NAMESPACE_STD


846 
	`³¼Ü
 (cÚ¡ *
__s
);

847 
__END_NAMESPACE_STD


853 
	~<b™s/sys_”¾i¡.h
>

856 #ifdef 
__USE_POSIX


858 
	$f’o
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

861 #ifdeà
__USE_MISC


863 
	$f’o_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

867 #ifdeà
__USE_POSIX2


872 
FILE
 *
	$pİ’
 (cÚ¡ *
__commªd
, cÚ¡ *
__modes
è
__wur
;

878 
	`pşo£
 (
FILE
 *
__¡»am
);

882 #ifdef 
__USE_POSIX


884 *
	$ù”mid
 (*
__s
è
__THROW
;

888 #ifdeà
__USE_XOPEN


890 *
	`cu£rid
 (*
__s
);

894 #ifdef 
__USE_GNU


895 
ob¡ack
;

898 
	$ob¡ack_´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

899 cÚ¡ *
__»¡riù
 
__fÜm©
, ...)

900 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

901 
	$ob¡ack_v´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

902 cÚ¡ *
__»¡riù
 
__fÜm©
,

903 
_G_va_li¡
 
__¬gs
)

904 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

908 #ifdeà
__USE_POSIX


912 
	$æockfe
 (
FILE
 *
__¡»am
è
__THROW
;

916 
	$árylockfe
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

919 
	$fuÆockfe
 (
FILE
 *
__¡»am
è
__THROW
;

922 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


926 
	#__Ãed_g‘İt


	)

927 
	~<g‘İt.h
>

932 #ifdeà
__USE_EXTERN_INLINES


933 
	~<b™s/¡dio.h
>

935 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


936 
	~<b™s/¡dio2.h
>

938 #ifdeà
__LDBL_COMPAT


939 
	~<b™s/¡dio-ldbl.h
>

942 
__END_DECLS


	@/usr/include/stdlib.h

22 #iâdef 
_STDLIB_H


24 
	~<ã©u»s.h
>

27 
	#__Ãed_size_t


	)

28 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


29 
	#__Ãed_wch¬_t


	)

30 
	#__Ãed_NULL


	)

32 
	~<¡ddef.h
>

34 
	g__BEGIN_DECLS


36 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


37 
	#_STDLIB_H
 1

	)

39 #ià(
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8
è&& !defšed 
_SYS_WAIT_H


41 
	~<b™s/wa™æags.h
>

42 
	~<b™s/wa™¡©us.h
>

44 #ifdeà
__USE_MISC


49 #ià
defšed
 
__GNUC__
 && !defšed 
__ılu¥lus


50 
	#__WAIT_INT
(
¡©us
) \

51 (
	`__ex‹nsiÚ__
 (((uniÚ { 
	`__ty³of
(
¡©us
è
__š
; 
__i
; }) \

52 { .
__š
 = (
¡©us
è}).
__i
))

	)

54 
	#__WAIT_INT
(
¡©us
è(*(*è&(¡©us))

	)

62 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2 || defšed 
__ılu¥lus


63 
	#__WAIT_STATUS
 *

	)

64 
	#__WAIT_STATUS_DEFN
 *

	)

69 
wa™
 *
	m__u±r
;

70 *
	m__Œ
;

71 } 
	t__WAIT_STATUS
 
	t__©Œibu‹__
 ((
	t__Œª¥¬’t_uniÚ__
));

72 
	#__WAIT_STATUS_DEFN
 *

	)

77 
	#__WAIT_INT
(
¡©us
è(¡©us)

	)

78 
	#__WAIT_STATUS
 *

	)

79 
	#__WAIT_STATUS_DEFN
 *

	)

84 
	#WEXITSTATUS
(
¡©us
è
	`__WEXITSTATUS
 (
	`__WAIT_INT
 (¡©us))

	)

85 
	#WTERMSIG
(
¡©us
è
	`__WTERMSIG
 (
	`__WAIT_INT
 (¡©us))

	)

86 
	#WSTOPSIG
(
¡©us
è
	`__WSTOPSIG
 (
	`__WAIT_INT
 (¡©us))

	)

87 
	#WIFEXITED
(
¡©us
è
	`__WIFEXITED
 (
	`__WAIT_INT
 (¡©us))

	)

88 
	#WIFSIGNALED
(
¡©us
è
	`__WIFSIGNALED
 (
	`__WAIT_INT
 (¡©us))

	)

89 
	#WIFSTOPPED
(
¡©us
è
	`__WIFSTOPPED
 (
	`__WAIT_INT
 (¡©us))

	)

90 #ifdeà
__WIFCONTINUED


91 
	#WIFCONTINUED
(
¡©us
è
	`__WIFCONTINUED
 (
	`__WAIT_INT
 (¡©us))

	)

95 
__BEGIN_NAMESPACE_STD


99 
	mquÙ
;

100 
	m»m
;

101 } 
	tdiv_t
;

104 #iâdeà
__ldiv_t_defšed


107 
	mquÙ
;

108 
	m»m
;

109 } 
	tldiv_t
;

110 
	#__ldiv_t_defšed
 1

	)

112 
	g__END_NAMESPACE_STD


114 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__Îdiv_t_defšed


115 
__BEGIN_NAMESPACE_C99


117 
__ex‹nsiÚ__
 struct

119 
	mquÙ
;

120 
	m»m
;

121 } 
	tÎdiv_t
;

122 
	#__Îdiv_t_defšed
 1

	)

123 
	g__END_NAMESPACE_C99


128 
	#RAND_MAX
 2147483647

	)

133 
	#EXIT_FAILURE
 1

	)

134 
	#EXIT_SUCCESS
 0

	)

138 
	#MB_CUR_MAX
 (
	`__ùy³_g‘_mb_cur_max
 ())

	)

139 
size_t
 
	$__ùy³_g‘_mb_cur_max
 (è
__THROW
 
__wur
;

142 
__BEGIN_NAMESPACE_STD


144 
	$©of
 (cÚ¡ *
__ÅŒ
)

145 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

147 
	$©oi
 (cÚ¡ *
__ÅŒ
)

148 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

150 
	$©Ş
 (cÚ¡ *
__ÅŒ
)

151 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

152 
__END_NAMESPACE_STD


154 #ifdeà
__USE_ISOC99


155 
__BEGIN_NAMESPACE_C99


157 
__ex‹nsiÚ__
 
	$©Şl
 (cÚ¡ *
__ÅŒ
)

158 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

159 
__END_NAMESPACE_C99


162 
__BEGIN_NAMESPACE_STD


164 
	$¡¹od
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

165 **
__»¡riù
 
__’d±r
)

166 
__THROW
 
	`__nÚnuÎ
 ((1));

167 
__END_NAMESPACE_STD


169 #ifdef 
__USE_ISOC99


170 
__BEGIN_NAMESPACE_C99


172 
	$¡¹of
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

173 **
__»¡riù
 
__’d±r
è
__THROW
 
	`__nÚnuÎ
 ((1));

175 
	$¡¹Şd
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

176 **
__»¡riù
 
__’d±r
)

177 
__THROW
 
	`__nÚnuÎ
 ((1));

178 
__END_NAMESPACE_C99


181 
__BEGIN_NAMESPACE_STD


183 
	$¡¹Ş
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

184 **
__»¡riù
 
__’d±r
, 
__ba£
)

185 
__THROW
 
	`__nÚnuÎ
 ((1));

187 
	$¡¹oul
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

188 **
__»¡riù
 
__’d±r
, 
__ba£
)

189 
__THROW
 
	`__nÚnuÎ
 ((1));

190 
__END_NAMESPACE_STD


192 #ifdeà
__USE_MISC


194 
__ex‹nsiÚ__


195 
	$¡¹oq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

196 **
__»¡riù
 
__’d±r
, 
__ba£
)

197 
__THROW
 
	`__nÚnuÎ
 ((1));

199 
__ex‹nsiÚ__


200 
	$¡¹ouq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

201 **
__»¡riù
 
__’d±r
, 
__ba£
)

202 
__THROW
 
	`__nÚnuÎ
 ((1));

205 #ifdeà
__USE_ISOC99


206 
__BEGIN_NAMESPACE_C99


208 
__ex‹nsiÚ__


209 
	$¡¹Şl
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

210 **
__»¡riù
 
__’d±r
, 
__ba£
)

211 
__THROW
 
	`__nÚnuÎ
 ((1));

213 
__ex‹nsiÚ__


214 
	$¡¹ouÎ
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

215 **
__»¡riù
 
__’d±r
, 
__ba£
)

216 
__THROW
 
	`__nÚnuÎ
 ((1));

217 
__END_NAMESPACE_C99


221 #ifdeà
__USE_GNU


235 
	~<xloÿË.h
>

239 
	$¡¹Ş_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

240 **
__»¡riù
 
__’d±r
, 
__ba£
,

241 
__loÿË_t
 
__loc
è
__THROW
 
	`__nÚnuÎ
 ((1, 4));

243 
	$¡¹oul_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

244 **
__»¡riù
 
__’d±r
,

245 
__ba£
, 
__loÿË_t
 
__loc
)

246 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

248 
__ex‹nsiÚ__


249 
	$¡¹Şl_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

250 **
__»¡riù
 
__’d±r
, 
__ba£
,

251 
__loÿË_t
 
__loc
)

252 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

254 
__ex‹nsiÚ__


255 
	$¡¹ouÎ_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

256 **
__»¡riù
 
__’d±r
,

257 
__ba£
, 
__loÿË_t
 
__loc
)

258 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

260 
	$¡¹od_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

261 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

262 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

264 
	$¡¹of_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

265 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

266 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

268 
	$¡¹Şd_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

269 **
__»¡riù
 
__’d±r
,

270 
__loÿË_t
 
__loc
)

271 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

275 #ifdeà
__USE_EXTERN_INLINES


276 
__BEGIN_NAMESPACE_STD


277 
__ex‹º_šlše
 

278 
	`__NTH
 (
	$©oi
 (cÚ¡ *
__ÅŒ
))

280  (è
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

281 
	}
}

282 
__ex‹º_šlše
 

283 
__NTH
 (
	$©Ş
 (cÚ¡ *
__ÅŒ
))

285  
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

286 
	}
}

287 
	g__END_NAMESPACE_STD


289 #ifdeà
__USE_ISOC99


290 
__BEGIN_NAMESPACE_C99


291 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

292 
__NTH
 (
	$©Şl
 (cÚ¡ *
__ÅŒ
))

294  
	`¡¹Şl
 (
__ÅŒ
, (**è
NULL
, 10);

295 
	}
}

296 
	g__END_NAMESPACE_C99


301 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


305 *
	$l64a
 (
__n
è
__THROW
 
__wur
;

308 
	$a64l
 (cÚ¡ *
__s
)

309 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

313 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


314 
	~<sys/ty³s.h
>

321 
	$¿ndom
 (è
__THROW
;

324 
	$¤ªdom
 (
__£ed
è
__THROW
;

330 *
	$š™¡©e
 (
__£ed
, *
__¡©ebuf
,

331 
size_t
 
__¡©–’
è
__THROW
 
	`__nÚnuÎ
 ((2));

335 *
	$£t¡©e
 (*
__¡©ebuf
è
__THROW
 
	`__nÚnuÎ
 ((1));

338 #ifdeà
__USE_MISC


343 
	s¿ndom_d©a


345 
št32_t
 *
åŒ
;

346 
št32_t
 *
½Œ
;

347 
št32_t
 *
¡©e
;

348 
¿nd_ty³
;

349 
¿nd_deg
;

350 
¿nd_£p
;

351 
št32_t
 *
’d_±r
;

354 
	$¿ndom_r
 (
¿ndom_d©a
 *
__»¡riù
 
__buf
,

355 
št32_t
 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

357 
	$¤ªdom_r
 (
__£ed
, 
¿ndom_d©a
 *
__buf
)

358 
__THROW
 
	`__nÚnuÎ
 ((2));

360 
	$š™¡©e_r
 (
__£ed
, *
__»¡riù
 
__¡©ebuf
,

361 
size_t
 
__¡©–’
,

362 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

363 
__THROW
 
	`__nÚnuÎ
 ((2, 4));

365 
	$£t¡©e_r
 (*
__»¡riù
 
__¡©ebuf
,

366 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

367 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

372 
__BEGIN_NAMESPACE_STD


374 
	$¿nd
 (è
__THROW
;

376 
	$¤ªd
 (
__£ed
è
__THROW
;

377 
__END_NAMESPACE_STD


379 #ifdeà
__USE_POSIX


381 
	$¿nd_r
 (*
__£ed
è
__THROW
;

385 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


389 
	$d¿nd48
 (è
__THROW
;

390 
	$”ªd48
 (
__xsubi
[3]è
__THROW
 
	`__nÚnuÎ
 ((1));

393 
	$Ìªd48
 (è
__THROW
;

394 
	$Äªd48
 (
__xsubi
[3])

395 
__THROW
 
	`__nÚnuÎ
 ((1));

398 
	$m¿nd48
 (è
__THROW
;

399 
	$j¿nd48
 (
__xsubi
[3])

400 
__THROW
 
	`__nÚnuÎ
 ((1));

403 
	$¤ªd48
 (
__£edv®
è
__THROW
;

404 *
	$£ed48
 (
__£ed16v
[3])

405 
__THROW
 
	`__nÚnuÎ
 ((1));

406 
	$lcÚg48
 (
__·¿m
[7]è
__THROW
 
	`__nÚnuÎ
 ((1));

408 #ifdeà
__USE_MISC


412 
	sd¿nd48_d©a


414 
__x
[3];

415 
__Şd_x
[3];

416 
__c
;

417 
__š™
;

418 
__ex‹nsiÚ__
 
__a
;

423 
	$d¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

424 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

425 
	$”ªd48_r
 (
__xsubi
[3],

426 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

427 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

430 
	$Ìªd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

431 *
__»¡riù
 
__»suÉ
)

432 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

433 
	$Äªd48_r
 (
__xsubi
[3],

434 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

435 *
__»¡riù
 
__»suÉ
)

436 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

439 
	$m¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

440 *
__»¡riù
 
__»suÉ
)

441 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

442 
	$j¿nd48_r
 (
__xsubi
[3],

443 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

444 *
__»¡riù
 
__»suÉ
)

445 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

448 
	$¤ªd48_r
 (
__£edv®
, 
d¿nd48_d©a
 *
__bufãr
)

449 
__THROW
 
	`__nÚnuÎ
 ((2));

451 
	$£ed48_r
 (
__£ed16v
[3],

452 
d¿nd48_d©a
 *
__bufãr
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

454 
	$lcÚg48_r
 (
__·¿m
[7],

455 
d¿nd48_d©a
 *
__bufãr
)

456 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

462 #iâdeà
__m®loc_ªd_ÿÎoc_defšed


463 
	#__m®loc_ªd_ÿÎoc_defšed


	)

464 
__BEGIN_NAMESPACE_STD


466 *
	$m®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

468 *
	$ÿÎoc
 (
size_t
 
__nmemb
, size_ˆ
__size
)

469 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

470 
__END_NAMESPACE_STD


473 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


474 
__BEGIN_NAMESPACE_STD


480 *
	$»®loc
 (*
__±r
, 
size_t
 
__size
)

481 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__
;

483 
	$ä“
 (*
__±r
è
__THROW
;

484 
__END_NAMESPACE_STD


486 #ifdef 
__USE_MISC


488 
	$cä“
 (*
__±r
è
__THROW
;

491 #ifdeà
__USE_MISC


492 
	~<®loÿ.h
>

495 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

496 || 
defšed
 
__USE_MISC


498 *
	$v®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

501 #ifdeà
__USE_XOPEN2K


503 
	$posix_mem®ign
 (**
__mem±r
, 
size_t
 
__®ignm’t
, size_ˆ
__size
)

504 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

507 #ifdeà
__USE_ISOC11


509 *
	$®igÃd_®loc
 (
size_t
 
__®ignm’t
, size_ˆ
__size
)

510 
__THROW
 
__©Œibu‹_m®loc__
 
	`__©Œibu‹_®loc_size__
 ((2)è
__wur
;

513 
__BEGIN_NAMESPACE_STD


515 
	$abÜt
 (è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

519 
	$©ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

521 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


523 #ifdeà
__ılu¥lus


524 "C++" 
	$©_quick_ex™
 ((*
__func
) ())

525 
__THROW
 
	`__asm
 ("©_quick_ex™"è
	`__nÚnuÎ
 ((1));

527 
	$©_quick_ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

530 
__END_NAMESPACE_STD


532 #ifdef 
__USE_MISC


535 
	$Ú_ex™
 ((*
__func
è(
__¡©us
, *
__¬g
), *__arg)

536 
__THROW
 
	`__nÚnuÎ
 ((1));

539 
__BEGIN_NAMESPACE_STD


543 
	$ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

545 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


549 
	$quick_ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

551 
__END_NAMESPACE_STD


553 #ifdeà
__USE_ISOC99


554 
__BEGIN_NAMESPACE_C99


557 
	$_Ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

558 
__END_NAMESPACE_C99


562 
__BEGIN_NAMESPACE_STD


564 *
	$g‘’v
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

565 
__END_NAMESPACE_STD


567 #ifdeà
__USE_GNU


570 *
	$£cu»_g‘’v
 (cÚ¡ *
__Çme
)

571 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

574 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


578 
	$pu‹nv
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

581 #ifdeà
__USE_XOPEN2K


584 
	$£‹nv
 (cÚ¡ *
__Çme
, cÚ¡ *
__v®ue
, 
__»¶aû
)

585 
__THROW
 
	`__nÚnuÎ
 ((2));

588 
	$un£‹nv
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

591 #ifdef 
__USE_MISC


595 
	$ş—»nv
 (è
__THROW
;

599 #ià
defšed
 
__USE_MISC
 \

600 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
)

606 *
	$mk‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1));

609 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


618 #iâdeà
__USE_FILE_OFFSET64


619 
	$mk¡emp
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

621 #ifdeà
__REDIRECT


622 
	`__REDIRECT
 (
mk¡emp
, (*
__‹m¶©e
), 
mk¡emp64
)

623 
	`__nÚnuÎ
 ((1)è
__wur
;

625 
	#mk¡emp
 
mk¡emp64


	)

628 #ifdeà
__USE_LARGEFILE64


629 
	$mk¡emp64
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

633 #ifdeà
__USE_MISC


640 #iâdeà
__USE_FILE_OFFSET64


641 
	$mk¡emps
 (*
__‹m¶©e
, 
__suffixËn
è
	`__nÚnuÎ
 ((1)è
__wur
;

643 #ifdeà
__REDIRECT


644 
	`__REDIRECT
 (
mk¡emps
, (*
__‹m¶©e
, 
__suffixËn
),

645 
mk¡emps64
è
	`__nÚnuÎ
 ((1)è
__wur
;

647 
	#mk¡emps
 
mk¡emps64


	)

650 #ifdeà
__USE_LARGEFILE64


651 
	$mk¡emps64
 (*
__‹m¶©e
, 
__suffixËn
)

652 
	`__nÚnuÎ
 ((1)è
__wur
;

656 #ifdeà
__USE_XOPEN2K8


662 *
	$mkd‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

665 #ifdeà
__USE_GNU


672 #iâdeà
__USE_FILE_OFFSET64


673 
	$mko¡emp
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

675 #ifdeà
__REDIRECT


676 
	`__REDIRECT
 (
mko¡emp
, (*
__‹m¶©e
, 
__æags
), 
mko¡emp64
)

677 
	`__nÚnuÎ
 ((1)è
__wur
;

679 
	#mko¡emp
 
mko¡emp64


	)

682 #ifdeà
__USE_LARGEFILE64


683 
	$mko¡emp64
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

692 #iâdeà
__USE_FILE_OFFSET64


693 
	$mko¡emps
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

694 
	`__nÚnuÎ
 ((1)è
__wur
;

696 #ifdeà
__REDIRECT


697 
	`__REDIRECT
 (
mko¡emps
, (*
__‹m¶©e
, 
__suffixËn
,

698 
__æags
), 
mko¡emps64
)

699 
	`__nÚnuÎ
 ((1)è
__wur
;

701 
	#mko¡emps
 
mko¡emps64


	)

704 #ifdeà
__USE_LARGEFILE64


705 
	$mko¡emps64
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

706 
	`__nÚnuÎ
 ((1)è
__wur
;

711 
__BEGIN_NAMESPACE_STD


716 
	$sy¡em
 (cÚ¡ *
__commªd
è
__wur
;

717 
__END_NAMESPACE_STD


720 #ifdef 
__USE_GNU


723 *
	$ÿnÚiÿlize_fe_Çme
 (cÚ¡ *
__Çme
)

724 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

727 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


733 *
	$»®·th
 (cÚ¡ *
__»¡riù
 
__Çme
,

734 *
__»¡riù
 
__»sŞved
è
__THROW
 
__wur
;

739 #iâdeà
__COMPAR_FN_T


740 
	#__COMPAR_FN_T


	)

741 (*
	t__com·r_â_t
) (const *, const *);

743 #ifdef 
__USE_GNU


744 
__com·r_â_t
 
	tcom·risÚ_â_t
;

747 #ifdeà
__USE_GNU


748 (*
	t__com·r_d_â_t
) (const *, const *, *);

751 
__BEGIN_NAMESPACE_STD


754 *
	$b£¬ch
 (cÚ¡ *
__key
, cÚ¡ *
__ba£
,

755 
size_t
 
__nmemb
, size_ˆ
__size
, 
__com·r_â_t
 
__com·r
)

756 
	`__nÚnuÎ
 ((1, 2, 5)è
__wur
;

758 #ifdeà
__USE_EXTERN_INLINES


759 
	~<b™s/¡dlib-b£¬ch.h
>

764 
	$qsÜt
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

765 
__com·r_â_t
 
__com·r
è
	`__nÚnuÎ
 ((1, 4));

766 #ifdeà
__USE_GNU


767 
	$qsÜt_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

768 
__com·r_d_â_t
 
__com·r
, *
__¬g
)

769 
	`__nÚnuÎ
 ((1, 4));

774 
	$abs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

775 
	$Ïbs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

776 
__END_NAMESPACE_STD


778 #ifdeà
__USE_ISOC99


779 
__ex‹nsiÚ__
 
	$Îabs
 (
__x
)

780 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

784 
__BEGIN_NAMESPACE_STD


788 
div_t
 
	$div
 (
__num”
, 
__d’om
)

789 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

790 
ldiv_t
 
	$ldiv
 (
__num”
, 
__d’om
)

791 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

792 
__END_NAMESPACE_STD


794 #ifdeà
__USE_ISOC99


795 
__BEGIN_NAMESPACE_C99


796 
__ex‹nsiÚ__
 
Îdiv_t
 
	$Îdiv
 (
__num”
,

797 
__d’om
)

798 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

799 
__END_NAMESPACE_C99


803 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

804 || 
defšed
 
__USE_MISC


811 *
	$ecvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

812 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

817 *
	$fcvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

818 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

823 *
	$gcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

824 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

827 #ifdeà
__USE_MISC


829 *
	$qecvt
 (
__v®ue
, 
__ndig™
,

830 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

831 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

832 *
	$qfcvt
 (
__v®ue
, 
__ndig™
,

833 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

834 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

835 *
	$qgcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

836 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

841 
	$ecvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

842 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

843 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

844 
	$fcvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

845 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

846 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

848 
	$qecvt_r
 (
__v®ue
, 
__ndig™
,

849 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

850 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

851 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

852 
	$qfcvt_r
 (
__v®ue
, 
__ndig™
,

853 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

854 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

855 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

859 
__BEGIN_NAMESPACE_STD


862 
	$mbËn
 (cÚ¡ *
__s
, 
size_t
 
__n
è
__THROW
;

865 
	$mbtowc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

866 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

869 
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
è
__THROW
;

873 
size_t
 
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__pwcs
,

874 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

876 
size_t
 
	$wc¡ombs
 (*
__»¡riù
 
__s
,

877 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__pwcs
, 
size_t
 
__n
)

878 
__THROW
;

879 
__END_NAMESPACE_STD


882 #ifdeà
__USE_MISC


887 
	$½m©ch
 (cÚ¡ *
__»¥Ú£
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

891 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


898 
	$g‘subİt
 (**
__»¡riù
 
__İtiÚp
,

899 *cÚ¡ *
__»¡riù
 
__tok’s
,

900 **
__»¡riù
 
__v®u•
)

901 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3)è
__wur
;

905 #ifdeà
__USE_XOPEN


907 
	$£tkey
 (cÚ¡ *
__key
è
__THROW
 
	`__nÚnuÎ
 ((1));

913 #ifdeà
__USE_XOPEN2KXSI


915 
	$posix_İ’±
 (
__oæag
è
__wur
;

918 #ifdeà
__USE_XOPEN


923 
	$g¿Á±
 (
__fd
è
__THROW
;

927 
	$uÆock±
 (
__fd
è
__THROW
;

932 *
	$±¢ame
 (
__fd
è
__THROW
 
__wur
;

935 #ifdeà
__USE_GNU


939 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

940 
__THROW
 
	`__nÚnuÎ
 ((2));

943 
	`g‘±
 ();

946 #ifdeà
__USE_MISC


950 
	$g‘lßdavg
 (
__lßdavg
[], 
__ÃËm
)

951 
__THROW
 
	`__nÚnuÎ
 ((1));

954 
	~<b™s/¡dlib-æßt.h
>

957 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


958 
	~<b™s/¡dlib.h
>

960 #ifdeà
__LDBL_COMPAT


961 
	~<b™s/¡dlib-ldbl.h
>

965 #undeà
__Ãed_m®loc_ªd_ÿÎoc


967 
__END_DECLS


	@/usr/include/string.h

22 #iâdef 
_STRING_H


23 
	#_STRING_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


30 
	#__Ãed_size_t


	)

31 
	#__Ãed_NULL


	)

32 
	~<¡ddef.h
>

35 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

36 
	#__CORRECT_ISO_CPP_STRING_H_PROTO


	)

40 
__BEGIN_NAMESPACE_STD


42 *
	$memıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

43 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

46 *
	$memmove
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

47 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

48 
__END_NAMESPACE_STD


53 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


54 *
	$memcıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

55 
__c
, 
size_t
 
__n
)

56 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

60 
__BEGIN_NAMESPACE_STD


62 *
	$mem£t
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

65 
	$memcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

66 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

69 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


72 *
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

73 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

74 cÚ¡ *
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

75 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

77 #ifdeà
__OPTIMIZE__


78 
__ex‹º_®ways_šlše
 *

79 
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW


81  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

84 
__ex‹º_®ways_šlše
 const *

85 
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
è
__THROW


87  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

90 
	}
}

92 *
	$memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

93 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

95 
__END_NAMESPACE_STD


97 #ifdeà
__USE_GNU


100 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


101 "C++" *
	$¿wmemchr
 (*
__s
, 
__c
)

102 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

103 "C++" cÚ¡ *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

104 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

106 *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

107 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

111 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


112 "C++" *
	$memrchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

113 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

114 "C++" cÚ¡ *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

115 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

117 *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

118 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

123 
__BEGIN_NAMESPACE_STD


125 *
	$¡rıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

126 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

128 *
	$¡ºıy
 (*
__»¡riù
 
__de¡
,

129 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

130 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

133 *
	$¡rÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

134 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

136 *
	$¡ºÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

137 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

140 
	$¡rcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

141 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

143 
	$¡ºcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

144 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

147 
	$¡rcŞl
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

148 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

150 
size_t
 
	$¡rxäm
 (*
__»¡riù
 
__de¡
,

151 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

152 
__THROW
 
	`__nÚnuÎ
 ((2));

153 
__END_NAMESPACE_STD


155 #ifdeà
__USE_XOPEN2K8


159 
	~<xloÿË.h
>

162 
	$¡rcŞl_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
__loÿË_t
 
__l
)

163 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

165 
size_t
 
	$¡rxäm_l
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
,

166 
__loÿË_t
 
__l
è
__THROW
 
	`__nÚnuÎ
 ((2, 4));

169 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


171 *
	$¡rdup
 (cÚ¡ *
__s
)

172 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

178 #ià
defšed
 
__USE_XOPEN2K8


179 *
	$¡ºdup
 (cÚ¡ *
__¡ršg
, 
size_t
 
__n
)

180 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

183 #ià
defšed
 
__USE_GNU
 && defšed 
__GNUC__


185 
	#¡rdu·
(
s
) \

186 (
__ex‹nsiÚ__
 \

188 cÚ¡ *
__Şd
 = (
s
); \

189 
size_t
 
__Ën
 = 
	`¡¾’
 (
__Şd
) + 1; \

190 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
); \

191 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

192 
	}
}))

	)

195 
	#¡ºdu·
(
s
, 
n
) \

196 (
__ex‹nsiÚ__
 \

198 cÚ¡ *
__Şd
 = (
s
); \

199 
size_t
 
__Ën
 = 
	`¡ºËn
 (
__Şd
, (
n
)); \

200 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
 + 1); \

201 
__Ãw
[
__Ën
] = '\0'; \

202 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

203 }))

	)

206 
	g__BEGIN_NAMESPACE_STD


208 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


211 *
¡rchr
 (*
__s
, 
__c
)

212 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

213 cÚ¡ *
¡rchr
 (cÚ¡ *
__s
, 
__c
)

214 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

216 #ifdeà
__OPTIMIZE__


217 
__ex‹º_®ways_šlše
 *

218 
¡rchr
 (*
__s
, 
__c
è
	g__THROW


220  
__butš_¡rchr
 (
__s
, 
__c
);

223 
__ex‹º_®ways_šlše
 const *

224 
¡rchr
 (cÚ¡ *
__s
, 
__c
è
	g__THROW


226  
__butš_¡rchr
 (
__s
, 
__c
);

231 *
	$¡rchr
 (cÚ¡ *
__s
, 
__c
)

232 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

235 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


238 *
	`¡¼chr
 (*
__s
, 
__c
)

239 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

240 cÚ¡ *
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
)

241 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

243 #ifdeà
__OPTIMIZE__


244 
__ex‹º_®ways_šlše
 *

245 
	`¡¼chr
 (*
__s
, 
__c
è
__THROW


247  
	`__butš_¡¼chr
 (
__s
, 
__c
);

250 
__ex‹º_®ways_šlše
 const *

251 
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
è
__THROW


253  
	`__butš_¡¼chr
 (
__s
, 
__c
);

256 
	}
}

258 *
	$¡¼chr
 (cÚ¡ *
__s
, 
__c
)

259 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

261 
__END_NAMESPACE_STD


263 #ifdeà
__USE_GNU


266 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


267 "C++" *
	$¡rchºul
 (*
__s
, 
__c
)

268 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

269 "C++" cÚ¡ *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

270 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

272 *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

273 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

277 
__BEGIN_NAMESPACE_STD


280 
size_t
 
	$¡rc¥n
 (cÚ¡ *
__s
, cÚ¡ *
__»jeù
)

281 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

284 
size_t
 
	$¡r¥n
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

285 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

287 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


290 *
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
)

291 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

292 cÚ¡ *
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

293 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

295 #ifdeà
__OPTIMIZE__


296 
__ex‹º_®ways_šlše
 *

297 
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
è
__THROW


299  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

302 
__ex‹º_®ways_šlše
 const *

303 
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
è
__THROW


305  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

308 
	}
}

310 *
	$¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

311 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

314 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


317 *
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

318 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

319 cÚ¡ *
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

320 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

322 #ifdeà
__OPTIMIZE__


323 
__ex‹º_®ways_šlše
 *

324 
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


326  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

329 
__ex‹º_®ways_šlše
 const *

330 
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


332  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

335 
	}
}

337 *
	$¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

338 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

343 *
	$¡¹ok
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
)

344 
__THROW
 
	`__nÚnuÎ
 ((2));

345 
__END_NAMESPACE_STD


349 *
	$__¡¹ok_r
 (*
__»¡riù
 
__s
,

350 cÚ¡ *
__»¡riù
 
__d–im
,

351 **
__»¡riù
 
__§ve_±r
)

352 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

353 #ifdeà
__USE_POSIX


354 *
	$¡¹ok_r
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
,

355 **
__»¡riù
 
__§ve_±r
)

356 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

359 #ifdeà
__USE_GNU


361 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


362 "C++" *
	$¡rÿ£¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

363 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

364 "C++" cÚ¡ *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
,

365 cÚ¡ *
__ÃedË
)

366 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

368 *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

369 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

373 #ifdeà
__USE_GNU


377 *
	$memmem
 (cÚ¡ *
__hay¡ack
, 
size_t
 
__hay¡ackËn
,

378 cÚ¡ *
__ÃedË
, 
size_t
 
__ÃedËËn
)

379 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 3));

383 *
	$__mempıy
 (*
__»¡riù
 
__de¡
,

384 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

385 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

386 *
	$mempıy
 (*
__»¡riù
 
__de¡
,

387 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

388 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

392 
__BEGIN_NAMESPACE_STD


394 
size_t
 
	$¡¾’
 (cÚ¡ *
__s
)

395 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

396 
__END_NAMESPACE_STD


398 #ifdef 
__USE_XOPEN2K8


401 
size_t
 
	$¡ºËn
 (cÚ¡ *
__¡ršg
, 
size_t
 
__maxËn
)

402 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

406 
__BEGIN_NAMESPACE_STD


408 *
	$¡»¼Ü
 (
__”ºum
è
__THROW
;

409 
__END_NAMESPACE_STD


410 #ifdeà
__USE_XOPEN2K


418 #ià
defšed
 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


421 #ifdeà
__REDIRECT_NTH


422 
	`__REDIRECT_NTH
 (
¡»¼Ü_r
,

423 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
),

424 
__xpg_¡»¼Ü_r
è
	`__nÚnuÎ
 ((2));

426 
	$__xpg_¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

427 
__THROW
 
	`__nÚnuÎ
 ((2));

428 
	#¡»¼Ü_r
 
__xpg_¡»¼Ü_r


	)

433 *
	$¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

434 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

438 #ifdeà
__USE_XOPEN2K8


440 *
	$¡»¼Ü_l
 (
__”ºum
, 
__loÿË_t
 
__l
è
__THROW
;

446 
	$__bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

448 #ifdeà
__USE_MISC


450 
	$bcİy
 (cÚ¡ *
__¤c
, *
__de¡
, 
size_t
 
__n
)

451 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

454 
	$bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

457 
	$bcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

458 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

461 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


464 *
	`šdex
 (*
__s
, 
__c
)

465 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

466 cÚ¡ *
	`šdex
 (cÚ¡ *
__s
, 
__c
)

467 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

469 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


470 
__ex‹º_®ways_šlše
 *

471 
	`šdex
 (*
__s
, 
__c
è
__THROW


473  
	`__butš_šdex
 (
__s
, 
__c
);

476 
__ex‹º_®ways_šlše
 const *

477 
	`šdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


479  
	`__butš_šdex
 (
__s
, 
__c
);

482 
	}
}

484 *
	$šdex
 (cÚ¡ *
__s
, 
__c
)

485 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

489 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


492 *
	`ršdex
 (*
__s
, 
__c
)

493 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

494 cÚ¡ *
	`ršdex
 (cÚ¡ *
__s
, 
__c
)

495 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

497 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


498 
__ex‹º_®ways_šlše
 *

499 
	`ršdex
 (*
__s
, 
__c
è
__THROW


501  
	`__butš_ršdex
 (
__s
, 
__c
);

504 
__ex‹º_®ways_šlše
 const *

505 
	`ršdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


507  
	`__butš_ršdex
 (
__s
, 
__c
);

510 
	}
}

512 *
	$ršdex
 (cÚ¡ *
__s
, 
__c
)

513 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

518 
	$ffs
 (
__i
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

522 #ifdef 
__USE_GNU


523 
	$ff¦
 (
__l
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

524 
__ex‹nsiÚ__
 
	$ff¦l
 (
__Î
)

525 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

529 
	$¡rÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

530 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

533 
	$¡ºÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

534 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

537 #ifdef 
__USE_GNU


540 
	$¡rÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

541 
__loÿË_t
 
__loc
)

542 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

544 
	$¡ºÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

545 
size_t
 
__n
, 
__loÿË_t
 
__loc
)

546 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 4));

549 #ifdef 
__USE_MISC


552 *
	$¡r£p
 (**
__»¡riù
 
__¡ršgp
,

553 cÚ¡ *
__»¡riù
 
__d–im
)

554 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

557 #ifdef 
__USE_XOPEN2K8


559 *
	$¡rsigÇl
 (
__sig
è
__THROW
;

562 *
	$__¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

563 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

564 *
	$¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

565 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

569 *
	$__¡²ıy
 (*
__»¡riù
 
__de¡
,

570 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

571 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

572 *
	$¡²ıy
 (*
__»¡riù
 
__de¡
,

573 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

574 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

577 #ifdef 
__USE_GNU


579 
	$¡rv”scmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

580 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

583 *
	$¡räy
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

586 *
	$memäob
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

588 #iâdeà
ba£Çme


593 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


594 "C++" *
	$ba£Çme
 (*
__f’ame
)

595 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

596 "C++" cÚ¡ *
	$ba£Çme
 (cÚ¡ *
__f’ame
)

597 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

599 *
	$ba£Çme
 (cÚ¡ *
__f’ame
è
__THROW
 
	`__nÚnuÎ
 ((1));

605 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

606 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__OPTIMIZE_SIZE__
 \

607 && !
defšed
 
__NO_INLINE__
 && !defšed 
__ılu¥lus


627 
	~<b™s/¡ršg.h
>

630 
	~<b™s/¡ršg2.h
>

633 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


635 
	~<b™s/¡ršg3.h
>

639 #ià
defšed
 
__USE_GNU
 && defšed 
__OPTIMIZE__
 \

640 && 
defšed
 
__ex‹º_®ways_šlše
 && 
	$__GNUC_PREREQ
 (3,2)

641 #ià!
defšed
 
_FORCE_INLINES
 && !defšed 
_HAVE_STRING_ARCH_mempıy


643 #undeà
mempıy


644 #undeà
__mempıy


645 
	#mempıy
(
de¡
, 
¤c
, 
n
è
	`__mempıy_šlše
 (de¡, src,‚)

	)

646 
	#__mempıy
(
de¡
, 
¤c
, 
n
è
	`__mempıy_šlše
 (de¡, src,‚)

	)

648 
__ex‹º_®ways_šlše
 *

649 
	$__mempıy_šlše
 (*
__»¡riù
 
__de¡
,

650 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

652  (*è
	`memıy
 (
__de¡
, 
__¤c
, 
__n
) + __n;

653 
	}
}

658 
	g__END_DECLS


	@/usr/include/time.h

22 #iâdef 
_TIME_H


24 #ià(! 
defšed
 
__Ãed_time_t
 && !defšed 
__Ãed_şock_t
 && \

25 ! 
defšed
 
	g__Ãed_time¥ec
)

26 
	#_TIME_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


33 #ifdef 
_TIME_H


35 
	#__Ãed_size_t


	)

36 
	#__Ãed_NULL


	)

37 
	~<¡ddef.h
>

41 
	~<b™s/time.h
>

44 #ià!
defšed
 
__STRICT_ANSI__
 && !defšed 
__USE_XOPEN2K


45 #iâdeà
CLK_TCK


46 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

52 #ià!
defšed
 
__şock_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_şock_t
)

53 
	#__şock_t_defšed
 1

	)

55 
	~<b™s/ty³s.h
>

57 
__BEGIN_NAMESPACE_STD


59 
__şock_t
 
	tşock_t
;

60 
	g__END_NAMESPACE_STD


61 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX


62 
	$__USING_NAMESPACE_STD
(
şock_t
)

66 #undeà
__Ãed_şock_t


68 #ià!
defšed
 
__time_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_time_t
)

69 
	#__time_t_defšed
 1

	)

71 
	~<b™s/ty³s.h
>

73 
__BEGIN_NAMESPACE_STD


75 
__time_t
 
	ttime_t
;

76 
__END_NAMESPACE_STD


77 #ifdeà
__USE_POSIX


78 
	$__USING_NAMESPACE_STD
(
time_t
)

82 #undeà
__Ãed_time_t


84 #ià!
defšed
 
__şockid_t_defšed
 && \

85 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_şockid_t
)

86 
	#__şockid_t_defšed
 1

	)

88 
	~<b™s/ty³s.h
>

91 
__şockid_t
 
	tşockid_t
;

94 #undeà
__şockid_time_t


96 #ià!
defšed
 
__tim”_t_defšed
 && \

97 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_tim”_t
)

98 
	#__tim”_t_defšed
 1

	)

100 
	~<b™s/ty³s.h
>

103 
__tim”_t
 
	ttim”_t
;

106 #undeà
__Ãed_tim”_t


109 #ià(!
defšed
 
__time¥ec_defšed
 \

110 && ((
defšed
 
_TIME_H
 \

111 && (
defšed
 
__USE_POSIX199309
 \

112 || 
defšed
 
__USE_ISOC11
)) \

113 || 
defšed
 
__Ãed_time¥ec
))

114 
	#__time¥ec_defšed
 1

	)

116 
	~<b™s/ty³s.h
>

120 
	stime¥ec


122 
__time_t
 
tv_£c
;

123 
__sysÿÎ_¦Úg_t
 
tv_n£c
;

127 #undeà
__Ãed_time¥ec


130 #ifdef 
_TIME_H


131 
__BEGIN_NAMESPACE_STD


133 
	stm


135 
tm_£c
;

136 
tm_mš
;

137 
tm_hour
;

138 
tm_mday
;

139 
tm_mÚ
;

140 
tm_y—r
;

141 
tm_wday
;

142 
tm_yday
;

143 
tm_isd¡
;

145 #ifdef 
__USE_MISC


146 
tm_gmtoff
;

147 cÚ¡ *
tm_zÚe
;

149 
__tm_gmtoff
;

150 cÚ¡ *
__tm_zÚe
;

153 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX


155 
	$__USING_NAMESPACE_STD
(
tm
)

159 #ifdeà
__USE_POSIX199309


161 
	s™im”¥ec


163 
time¥ec
 
™_š‹rv®
;

164 
time¥ec
 
™_v®ue
;

168 
sigev’t
;

172 #ifdeà
__USE_XOPEN2K


173 #iâdeà
__pid_t_defšed


174 
__pid_t
 
	tpid_t
;

175 
	#__pid_t_defšed


	)

180 #ifdeà
__USE_ISOC11


182 
	#TIME_UTC
 1

	)

186 
__BEGIN_NAMESPACE_STD


189 
şock_t
 
	$şock
 (è
__THROW
;

192 
time_t
 
	$time
 (
time_t
 *
__tim”
è
__THROW
;

195 
	$difáime
 (
time_t
 
__time1
,ime_ˆ
__time0
)

196 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

199 
time_t
 
	$mktime
 (
tm
 *
__
è
__THROW
;

205 
size_t
 
	$¡ráime
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

206 cÚ¡ *
__»¡riù
 
__fÜm©
,

207 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

208 
__END_NAMESPACE_STD


210 #ifdeà
__USE_XOPEN


213 *
	$¡½time
 (cÚ¡ *
__»¡riù
 
__s
,

214 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
)

215 
__THROW
;

218 #ifdeà
__USE_XOPEN2K8


221 
	~<xloÿË.h
>

223 
size_t
 
	$¡ráime_l
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

224 cÚ¡ *
__»¡riù
 
__fÜm©
,

225 cÚ¡ 
tm
 *
__»¡riù
 
__
,

226 
__loÿË_t
 
__loc
è
__THROW
;

229 #ifdeà
__USE_GNU


230 *
	$¡½time_l
 (cÚ¡ *
__»¡riù
 
__s
,

231 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
,

232 
__loÿË_t
 
__loc
è
__THROW
;

236 
__BEGIN_NAMESPACE_STD


239 
tm
 *
	$gmtime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

243 
tm
 *
	$loÿÉime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

244 
__END_NAMESPACE_STD


246 #ifdeà
__USE_POSIX


249 
tm
 *
	$gmtime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

250 
tm
 *
__»¡riù
 
__
è
__THROW
;

254 
tm
 *
	$loÿÉime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

255 
tm
 *
__»¡riù
 
__
è
__THROW
;

258 
__BEGIN_NAMESPACE_STD


261 *
	$asùime
 (cÚ¡ 
tm
 *
__
è
__THROW
;

264 *
	$ùime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

265 
__END_NAMESPACE_STD


267 #ifdeà
__USE_POSIX


272 *
	$asùime_r
 (cÚ¡ 
tm
 *
__»¡riù
 
__
,

273 *
__»¡riù
 
__buf
è
__THROW
;

276 *
	$ùime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

277 *
__»¡riù
 
__buf
è
__THROW
;

282 *
__tzÇme
[2];

283 
__daylight
;

284 
__timezÚe
;

287 #ifdef 
__USE_POSIX


289 *
tzÇme
[2];

293 
	$tz£t
 (è
__THROW
;

296 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


297 
daylight
;

298 
timezÚe
;

301 #ifdeà
__USE_MISC


304 
	$¡ime
 (cÚ¡ 
time_t
 *
__wh’
è
__THROW
;

310 
	#__i¦—p
(
y—r
) \

311 ((
y—r
è% 4 =ğ0 && ((y—rè% 100 !ğ0 || (y—rè% 400 =ğ0))

	)

314 #ifdeà
__USE_MISC


319 
time_t
 
	$timegm
 (
tm
 *
__
è
__THROW
;

322 
time_t
 
	$tim–oÿl
 (
tm
 *
__
è
__THROW
;

325 
	$dysize
 (
__y—r
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

329 #ifdeà
__USE_POSIX199309


334 
	`Çno¦“p
 (cÚ¡ 
time¥ec
 *
__»que¡ed_time
,

335 
time¥ec
 *
__»maššg
);

339 
	$şock_g‘»s
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__»s
è
__THROW
;

342 
	$şock_g‘time
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__
è
__THROW
;

345 
	$şock_£‰ime
 (
şockid_t
 
__şock_id
, cÚ¡ 
time¥ec
 *
__
)

346 
__THROW
;

348 #ifdeà
__USE_XOPEN2K


353 
	`şock_Çno¦“p
 (
şockid_t
 
__şock_id
, 
__æags
,

354 cÚ¡ 
time¥ec
 *
__»q
,

355 
time¥ec
 *
__»m
);

358 
	$şock_g‘ıuşockid
 (
pid_t
 
__pid
, 
şockid_t
 *
__şock_id
è
__THROW
;

363 
	$tim”_ü—‹
 (
şockid_t
 
__şock_id
,

364 
sigev’t
 *
__»¡riù
 
__evp
,

365 
tim”_t
 *
__»¡riù
 
__tim”id
è
__THROW
;

368 
	$tim”_d–‘e
 (
tim”_t
 
__tim”id
è
__THROW
;

371 
	$tim”_£‰ime
 (
tim”_t
 
__tim”id
, 
__æags
,

372 cÚ¡ 
™im”¥ec
 *
__»¡riù
 
__v®ue
,

373 
™im”¥ec
 *
__»¡riù
 
__ov®ue
è
__THROW
;

376 
	$tim”_g‘time
 (
tim”_t
 
__tim”id
, 
™im”¥ec
 *
__v®ue
)

377 
__THROW
;

380 
	$tim”_g‘ov”run
 (
tim”_t
 
__tim”id
è
__THROW
;

384 #ifdeà
__USE_ISOC11


386 
	$time¥ec_g‘
 (
time¥ec
 *
__ts
, 
__ba£
)

387 
__THROW
 
	`__nÚnuÎ
 ((1));

391 #ifdeà
__USE_XOPEN_EXTENDED


403 
g‘d©e_”r
;

412 
tm
 *
	`g‘d©e
 (cÚ¡ *
__¡ršg
);

415 #ifdeà
__USE_GNU


426 
	`g‘d©e_r
 (cÚ¡ *
__»¡riù
 
__¡ršg
,

427 
tm
 *
__»¡riù
 
__»sbuå
);

430 
__END_DECLS


	@/usr/include/unistd.h

22 #iâdef 
_UNISTD_H


23 
	#_UNISTD_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


32 #ifdeà
__USE_XOPEN2K8


34 
	#_POSIX_VERSION
 200809L

	)

35 #–ià
defšed
 
__USE_XOPEN2K


37 
	#_POSIX_VERSION
 200112L

	)

38 #–ià
defšed
 
__USE_POSIX199506


40 
	#_POSIX_VERSION
 199506L

	)

41 #–ià
defšed
 
__USE_POSIX199309


43 
	#_POSIX_VERSION
 199309L

	)

46 
	#_POSIX_VERSION
 199009L

	)

52 #ifdeà
__USE_XOPEN2K8


53 
	#__POSIX2_THIS_VERSION
 200809L

	)

55 #–ià
defšed
 
__USE_XOPEN2K


57 
	#__POSIX2_THIS_VERSION
 200112L

	)

58 #–ià
defšed
 
__USE_POSIX199506


60 
	#__POSIX2_THIS_VERSION
 199506L

	)

63 
	#__POSIX2_THIS_VERSION
 199209L

	)

67 
	#_POSIX2_VERSION
 
__POSIX2_THIS_VERSION


	)

70 
	#_POSIX2_C_VERSION
 
__POSIX2_THIS_VERSION


	)

74 
	#_POSIX2_C_BIND
 
__POSIX2_THIS_VERSION


	)

78 
	#_POSIX2_C_DEV
 
__POSIX2_THIS_VERSION


	)

82 
	#_POSIX2_SW_DEV
 
__POSIX2_THIS_VERSION


	)

86 
	#_POSIX2_LOCALEDEF
 
__POSIX2_THIS_VERSION


	)

89 #ifdeà
__USE_XOPEN2K8


90 
	#_XOPEN_VERSION
 700

	)

91 #–ià
defšed
 
__USE_XOPEN2K


92 
	#_XOPEN_VERSION
 600

	)

93 #–ià
defšed
 
__USE_UNIX98


94 
	#_XOPEN_VERSION
 500

	)

96 
	#_XOPEN_VERSION
 4

	)

100 
	#_XOPEN_XCU_VERSION
 4

	)

103 
	#_XOPEN_XPG2
 1

	)

104 
	#_XOPEN_XPG3
 1

	)

105 
	#_XOPEN_XPG4
 1

	)

108 
	#_XOPEN_UNIX
 1

	)

111 
	#_XOPEN_CRYPT
 1

	)

115 
	#_XOPEN_ENH_I18N
 1

	)

118 
	#_XOPEN_LEGACY
 1

	)

205 
	~<b™s/posix_İt.h
>

208 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


209 
	~<b™s/’vœÚm’ts.h
>

213 
	#STDIN_FILENO
 0

	)

214 
	#STDOUT_FILENO
 1

	)

215 
	#STDERR_FILENO
 2

	)

220 
	~<b™s/ty³s.h
>

222 #iâdef 
__ssize_t_defšed


223 
__ssize_t
 
	tssize_t
;

224 
	#__ssize_t_defšed


	)

227 
	#__Ãed_size_t


	)

228 
	#__Ãed_NULL


	)

229 
	~<¡ddef.h
>

231 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


234 #iâdeà
__gid_t_defšed


235 
__gid_t
 
	tgid_t
;

236 
	#__gid_t_defšed


	)

239 #iâdeà
__uid_t_defšed


240 
__uid_t
 
	tuid_t
;

241 
	#__uid_t_defšed


	)

244 #iâdeà
__off_t_defšed


245 #iâdeà
__USE_FILE_OFFSET64


246 
__off_t
 
	toff_t
;

248 
__off64_t
 
	toff_t
;

250 
	#__off_t_defšed


	)

252 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


253 
__off64_t
 
	toff64_t
;

254 
	#__off64_t_defšed


	)

257 #iâdeà
__u£cÚds_t_defšed


258 
__u£cÚds_t
 
	tu£cÚds_t
;

259 
	#__u£cÚds_t_defšed


	)

262 #iâdeà
__pid_t_defšed


263 
__pid_t
 
	tpid_t
;

264 
	#__pid_t_defšed


	)

268 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


269 #iâdeà
__šŒ_t_defšed


270 
__šŒ_t
 
	tšŒ_t
;

271 
	#__šŒ_t_defšed


	)

275 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


276 #iâdeà
__sockËn_t_defšed


277 
__sockËn_t
 
	tsockËn_t
;

278 
	#__sockËn_t_defšed


	)

284 
	#R_OK
 4

	)

285 
	#W_OK
 2

	)

286 
	#X_OK
 1

	)

287 
	#F_OK
 0

	)

290 
	$acûss
 (cÚ¡ *
__Çme
, 
__ty³
è
__THROW
 
	`__nÚnuÎ
 ((1));

292 #ifdeà
__USE_GNU


295 
	$euidacûss
 (cÚ¡ *
__Çme
, 
__ty³
)

296 
__THROW
 
	`__nÚnuÎ
 ((1));

299 
	$—cûss
 (cÚ¡ *
__Çme
, 
__ty³
)

300 
__THROW
 
	`__nÚnuÎ
 ((1));

303 #ifdeà
__USE_ATFILE


307 
	$çcûs§t
 (
__fd
, cÚ¡ *
__fe
, 
__ty³
, 
__æag
)

308 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

313 #iâdef 
_STDIO_H


314 
	#SEEK_SET
 0

	)

315 
	#SEEK_CUR
 1

	)

316 
	#SEEK_END
 2

	)

317 #ifdeà
__USE_GNU


318 
	#SEEK_DATA
 3

	)

319 
	#SEEK_HOLE
 4

	)

323 #ià
defšed
 
__USE_MISC
 && !defšed 
L_SET


325 
	#L_SET
 
SEEK_SET


	)

326 
	#L_INCR
 
SEEK_CUR


	)

327 
	#L_XTND
 
SEEK_END


	)

336 #iâdeà
__USE_FILE_OFFSET64


337 
__off_t
 
	$l£ek
 (
__fd
, 
__off_t
 
__off£t
, 
__wh’û
è
__THROW
;

339 #ifdeà
__REDIRECT_NTH


340 
__off64_t
 
	`__REDIRECT_NTH
 (
l£ek
,

341 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
),

342 
l£ek64
);

344 
	#l£ek
 
l£ek64


	)

347 #ifdeà
__USE_LARGEFILE64


348 
__off64_t
 
	$l£ek64
 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
)

349 
__THROW
;

356 
	`şo£
 (
__fd
);

363 
ssize_t
 
	$»ad
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
è
__wur
;

369 
ssize_t
 
	$wr™e
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
è
__wur
;

371 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


372 #iâdeà
__USE_FILE_OFFSET64


379 
ssize_t
 
	$´—d
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

380 
__off_t
 
__off£t
è
__wur
;

387 
ssize_t
 
	$pwr™e
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
,

388 
__off_t
 
__off£t
è
__wur
;

390 #ifdeà
__REDIRECT


391 
ssize_t
 
	`__REDIRECT
 (
´—d
, (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

392 
__off64_t
 
__off£t
),

393 
´—d64
è
__wur
;

394 
ssize_t
 
	`__REDIRECT
 (
pwr™e
, (
__fd
, cÚ¡ *
__buf
,

395 
size_t
 
__nby‹s
, 
__off64_t
 
__off£t
),

396 
pwr™e64
è
__wur
;

398 
	#´—d
 
´—d64


	)

399 
	#pwr™e
 
pwr™e64


	)

403 #ifdeà
__USE_LARGEFILE64


407 
ssize_t
 
	$´—d64
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

408 
__off64_t
 
__off£t
è
__wur
;

411 
ssize_t
 
	$pwr™e64
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
,

412 
__off64_t
 
__off£t
è
__wur
;

420 
	$pe
 (
__pedes
[2]è
__THROW
 
__wur
;

422 #ifdeà
__USE_GNU


425 
	$pe2
 (
__pedes
[2], 
__æags
è
__THROW
 
__wur
;

435 
	$®¬m
 (
__£cÚds
è
__THROW
;

447 
	`¦“p
 (
__£cÚds
);

449 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

450 || 
defšed
 
__USE_MISC


455 
__u£cÚds_t
 
	$u®¬m
 (
__u£cÚds_t
 
__v®ue
, __u£cÚds_ˆ
__š‹rv®
)

456 
__THROW
;

463 
	`u¦“p
 (
__u£cÚds_t
 
__u£cÚds
);

472 
	`·u£
 ();

476 
	$chown
 (cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

477 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

479 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


481 
	$fchown
 (
__fd
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
è
__THROW
 
__wur
;

486 
	$lchown
 (cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

487 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

491 #ifdeà
__USE_ATFILE


494 
	$fchowÇt
 (
__fd
, cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
,

495 
__gid_t
 
__group
, 
__æag
)

496 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

500 
	$chdœ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

502 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


504 
	$fchdœ
 (
__fd
è
__THROW
 
__wur
;

514 *
	$g‘cwd
 (*
__buf
, 
size_t
 
__size
è
__THROW
 
__wur
;

516 #ifdef 
__USE_GNU


520 *
	$g‘_cu¼’t_dœ_Çme
 (è
__THROW
;

523 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

524 || 
defšed
 
__USE_MISC


528 *
	$g‘wd
 (*
__buf
)

529 
__THROW
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
 
__wur
;

534 
	$dup
 (
__fd
è
__THROW
 
__wur
;

537 
	$dup2
 (
__fd
, 
__fd2
è
__THROW
;

539 #ifdeà
__USE_GNU


542 
	$dup3
 (
__fd
, 
__fd2
, 
__æags
è
__THROW
;

546 **
__’vœÚ
;

547 #ifdeà
__USE_GNU


548 **
’vœÚ
;

554 
	$execve
 (cÚ¡ *
__·th
, *cÚ¡ 
__¬gv
[],

555 *cÚ¡ 
__’vp
[]è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

557 #ifdeà
__USE_XOPEN2K8


560 
	$ãxecve
 (
__fd
, *cÚ¡ 
__¬gv
[], *cÚ¡ 
__’vp
[])

561 
__THROW
 
	`__nÚnuÎ
 ((2));

566 
	$execv
 (cÚ¡ *
__·th
, *cÚ¡ 
__¬gv
[])

567 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

571 
	$exeşe
 (cÚ¡ *
__·th
, cÚ¡ *
__¬g
, ...)

572 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

576 
	$exeş
 (cÚ¡ *
__·th
, cÚ¡ *
__¬g
, ...)

577 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

581 
	$execvp
 (cÚ¡ *
__fe
, *cÚ¡ 
__¬gv
[])

582 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

587 
	$exeşp
 (cÚ¡ *
__fe
, cÚ¡ *
__¬g
, ...)

588 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

590 #ifdeà
__USE_GNU


593 
	$execv³
 (cÚ¡ *
__fe
, *cÚ¡ 
__¬gv
[],

594 *cÚ¡ 
__’vp
[])

595 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

599 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


601 
	$niû
 (
__šc
è
__THROW
 
__wur
;

606 
	$_ex™
 (
__¡©us
è
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

612 
	~<b™s/cÚâame.h
>

615 
	$·thcÚf
 (cÚ¡ *
__·th
, 
__Çme
)

616 
__THROW
 
	`__nÚnuÎ
 ((1));

619 
	$å©hcÚf
 (
__fd
, 
__Çme
è
__THROW
;

622 
	$syscÚf
 (
__Çme
è
__THROW
;

624 #ifdef 
__USE_POSIX2


626 
size_t
 
	$cÚf¡r
 (
__Çme
, *
__buf
, 
size_t
 
__Ën
è
__THROW
;

631 
__pid_t
 
	$g‘pid
 (è
__THROW
;

634 
__pid_t
 
	$g‘µid
 (è
__THROW
;

637 
__pid_t
 
	$g‘pg½
 (è
__THROW
;

640 
__pid_t
 
	$__g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

641 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


642 
__pid_t
 
	$g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

649 
	$£gid
 (
__pid_t
 
__pid
, __pid_ˆ
__pgid
è
__THROW
;

651 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


663 
	$£g½
 (è
__THROW
;

670 
__pid_t
 
	$£tsid
 (è
__THROW
;

672 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


674 
__pid_t
 
	$g‘sid
 (
__pid_t
 
__pid
è
__THROW
;

678 
__uid_t
 
	$g‘uid
 (è
__THROW
;

681 
__uid_t
 
	$g‘euid
 (è
__THROW
;

684 
__gid_t
 
	$g‘gid
 (è
__THROW
;

687 
__gid_t
 
	$g‘egid
 (è
__THROW
;

692 
	$g‘groups
 (
__size
, 
__gid_t
 
__li¡
[]è
__THROW
 
__wur
;

694 #ifdef 
__USE_GNU


696 
	$group_memb”
 (
__gid_t
 
__gid
è
__THROW
;

703 
	$£tuid
 (
__uid_t
 
__uid
è
__THROW
 
__wur
;

705 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


708 
	$£Œeuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
è
__THROW
 
__wur
;

711 #ifdeà
__USE_XOPEN2K


713 
	$£‹uid
 (
__uid_t
 
__uid
è
__THROW
 
__wur
;

720 
	$£tgid
 (
__gid_t
 
__gid
è
__THROW
 
__wur
;

722 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


725 
	$£Œegid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
è
__THROW
 
__wur
;

728 #ifdeà
__USE_XOPEN2K


730 
	$£‹gid
 (
__gid_t
 
__gid
è
__THROW
 
__wur
;

733 #ifdeà
__USE_GNU


736 
	$g‘»suid
 (
__uid_t
 *
__ruid
, __uid_ˆ*
__euid
, __uid_ˆ*
__suid
)

737 
__THROW
;

741 
	$g‘»sgid
 (
__gid_t
 *
__rgid
, __gid_ˆ*
__egid
, __gid_ˆ*
__sgid
)

742 
__THROW
;

746 
	$£Œesuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
, __uid_ˆ
__suid
)

747 
__THROW
 
__wur
;

751 
	$£Œesgid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
, __gid_ˆ
__sgid
)

752 
__THROW
 
__wur
;

759 
__pid_t
 
	$fÜk
 (è
__THROWNL
;

761 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

762 || 
defšed
 
__USE_MISC


767 
__pid_t
 
	$vfÜk
 (è
__THROW
;

773 *
	$‰yÇme
 (
__fd
è
__THROW
;

777 
	$‰yÇme_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

778 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

782 
	$i§‰y
 (
__fd
è
__THROW
;

784 #ià
defšed
 
__USE_MISC
 \

785 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_UNIX98
)

788 
	$‰y¦Ù
 (è
__THROW
;

793 
	$lšk
 (cÚ¡ *
__äom
, cÚ¡ *
__to
)

794 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

796 #ifdeà
__USE_ATFILE


799 
	$lšk©
 (
__äomfd
, cÚ¡ *
__äom
, 
__tofd
,

800 cÚ¡ *
__to
, 
__æags
)

801 
__THROW
 
	`__nÚnuÎ
 ((2, 4)è
__wur
;

804 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


806 
	$symlšk
 (cÚ¡ *
__äom
, cÚ¡ *
__to
)

807 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

812 
ssize_t
 
	$»adlšk
 (cÚ¡ *
__»¡riù
 
__·th
,

813 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

814 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

817 #ifdeà
__USE_ATFILE


819 
	$symlšk©
 (cÚ¡ *
__äom
, 
__tofd
,

820 cÚ¡ *
__to
è
__THROW
 
	`__nÚnuÎ
 ((1, 3)è
__wur
;

823 
ssize_t
 
	$»adlšk©
 (
__fd
, cÚ¡ *
__»¡riù
 
__·th
,

824 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

825 
__THROW
 
	`__nÚnuÎ
 ((2, 3)è
__wur
;

829 
	$uÆšk
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

831 #ifdeà
__USE_ATFILE


833 
	$uÆšk©
 (
__fd
, cÚ¡ *
__Çme
, 
__æag
)

834 
__THROW
 
	`__nÚnuÎ
 ((2));

838 
	$rmdœ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1));

842 
__pid_t
 
	$tcg‘pg½
 (
__fd
è
__THROW
;

845 
	$tc£g½
 (
__fd
, 
__pid_t
 
__pg½_id
è
__THROW
;

852 *
	`g‘logš
 ();

853 #ià
defšed
 
__USE_REENTRANT
 || defšed 
__USE_POSIX199506


860 
	$g‘logš_r
 (*
__Çme
, 
size_t
 
__Çme_Ën
è
	`__nÚnuÎ
 ((1));

863 #ifdef 
__USE_MISC


865 
	$£ogš
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

869 #ifdef 
__USE_POSIX2


873 
	#__Ãed_g‘İt


	)

874 
	~<g‘İt.h
>

878 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


882 
	$g‘ho¡Çme
 (*
__Çme
, 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((1));

886 #ià
defšed
 
__USE_MISC


889 
	$£tho¡Çme
 (cÚ¡ *
__Çme
, 
size_t
 
__Ën
)

890 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

894 
	$£tho¡id
 (
__id
è
__THROW
 
__wur
;

900 
	$g‘domašÇme
 (*
__Çme
, 
size_t
 
__Ën
)

901 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

902 
	$£tdomašÇme
 (cÚ¡ *
__Çme
, 
size_t
 
__Ën
)

903 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

909 
	$vhªgup
 (è
__THROW
;

912 
	$»voke
 (cÚ¡ *
__fe
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

920 
	$´of
 (*
__§m¶e_bufãr
, 
size_t
 
__size
,

921 
size_t
 
__off£t
, 
__sÿË
)

922 
__THROW
 
	`__nÚnuÎ
 ((1));

928 
	$acù
 (cÚ¡ *
__Çme
è
__THROW
;

932 *
	$g‘u£rsh–l
 (è
__THROW
;

933 
	$’du£rsh–l
 (è
__THROW
;

934 
	$£tu£rsh–l
 (è
__THROW
;

940 
	$d«mÚ
 (
__nochdœ
, 
__noşo£
è
__THROW
 
__wur
;

944 #ià
defšed
 
__USE_MISC
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

947 
	$chroÙ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

951 *
	$g‘·ss
 (cÚ¡ *
__´om±
è
	`__nÚnuÎ
 ((1));

959 
	`fsync
 (
__fd
);

962 #ifdeà
__USE_GNU


965 
	$syncfs
 (
__fd
è
__THROW
;

969 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


972 
	`g‘ho¡id
 ();

975 
	$sync
 (è
__THROW
;

978 #ià
defšed
 
__USE_MISC
 || !defšed 
__USE_XOPEN2K


981 
	$g‘·gesize
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

986 
	$g‘dbËsize
 (è
__THROW
;

992 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


995 #iâdeà
__USE_FILE_OFFSET64


996 
	$Œunÿ‹
 (cÚ¡ *
__fe
, 
__off_t
 
__Ëngth
)

997 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

999 #ifdeà
__REDIRECT_NTH


1000 
	`__REDIRECT_NTH
 (
Œunÿ‹
,

1001 (cÚ¡ *
__fe
, 
__off64_t
 
__Ëngth
),

1002 
Œunÿ‹64
è
	`__nÚnuÎ
 ((1)è
__wur
;

1004 
	#Œunÿ‹
 
Œunÿ‹64


	)

1007 #ifdeà
__USE_LARGEFILE64


1008 
	$Œunÿ‹64
 (cÚ¡ *
__fe
, 
__off64_t
 
__Ëngth
)

1009 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

1014 #ià
defšed
 
__USE_POSIX199309
 \

1015 || 
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


1018 #iâdeà
__USE_FILE_OFFSET64


1019 
	$árunÿ‹
 (
__fd
, 
__off_t
 
__Ëngth
è
__THROW
 
__wur
;

1021 #ifdeà
__REDIRECT_NTH


1022 
	`__REDIRECT_NTH
 (
árunÿ‹
, (
__fd
, 
__off64_t
 
__Ëngth
),

1023 
árunÿ‹64
è
__wur
;

1025 
	#árunÿ‹
 
árunÿ‹64


	)

1028 #ifdeà
__USE_LARGEFILE64


1029 
	$árunÿ‹64
 (
__fd
, 
__off64_t
 
__Ëngth
è
__THROW
 
__wur
;

1035 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

1036 || 
defšed
 
__USE_MISC


1040 
	$brk
 (*
__addr
è
__THROW
 
__wur
;

1046 *
	$sbrk
 (
šŒ_t
 
__d–
è
__THROW
;

1050 #ifdeà
__USE_MISC


1061 
	$sysÿÎ
 (
__sy¢o
, ...è
__THROW
;

1066 #ià(
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
è&& !defšed 
F_LOCK


1078 
	#F_ULOCK
 0

	)

1079 
	#F_LOCK
 1

	)

1080 
	#F_TLOCK
 2

	)

1081 
	#F_TEST
 3

	)

1083 #iâdeà
__USE_FILE_OFFSET64


1084 
	$lockf
 (
__fd
, 
__cmd
, 
__off_t
 
__Ën
è
__wur
;

1086 #ifdeà
__REDIRECT


1087 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
),

1088 
lockf64
è
__wur
;

1090 
	#lockf
 
lockf64


	)

1093 #ifdeà
__USE_LARGEFILE64


1094 
	$lockf64
 (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
è
__wur
;

1099 #ifdeà
__USE_GNU


1104 
	#TEMP_FAILURE_RETRY
(
ex´essiÚ
) \

1105 (
__ex‹nsiÚ__
 \

1106 ({ 
__»suÉ
; \

1107 dØ
__»suÉ
 = (è(
ex´essiÚ
); \

1108 
__»suÉ
 =ğ-1L && 
”ºo
 =ğ
EINTR
); \

1109 
__»suÉ
; 
	}
}))

	)

1112 #ià
defšed
 
__USE_POSIX199309
 || defšed 
__USE_UNIX98


1115 
fd©async
 (
__fdes
);

1121 #ifdef 
__USE_XOPEN


1123 *
	$üy±
 (cÚ¡ *
__key
, cÚ¡ *
__§É
)

1124 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1128 
	$’üy±
 (*
__glibc_block
, 
__edæag
)

1129 
__THROW
 
	`__nÚnuÎ
 ((1));

1136 
	$swab
 (cÚ¡ *
__»¡riù
 
__äom
, *__»¡riù 
__to
,

1137 
ssize_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1143 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K


1145 *
	$ù”mid
 (*
__s
è
__THROW
;

1150 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


1151 
	~<b™s/uni¡d.h
>

1154 
__END_DECLS


	@/usr/include/endian.h

18 #iâdef 
_ENDIAN_H


19 
	#_ENDIAN_H
 1

	)

21 
	~<ã©u»s.h
>

31 
	#__LITTLE_ENDIAN
 1234

	)

32 
	#__BIG_ENDIAN
 4321

	)

33 
	#__PDP_ENDIAN
 3412

	)

36 
	~<b™s/’dŸn.h
>

40 #iâdeà
__FLOAT_WORD_ORDER


41 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

44 #ifdef 
__USE_MISC


45 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

46 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

47 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

48 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

51 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


52 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èLO, 
	)
HI

53 #–ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


54 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èHI, 
	)
LO

58 #ià
defšed
 
__USE_MISC
 && !defšed 
__ASSEMBLER__


60 
	~<b™s/by‹sw­.h
>

62 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


63 
	#htobe16
(
x
è
	`__bsw­_16
 (x)

	)

64 
	#htŞe16
(
x
è(x)

	)

65 
	#be16toh
(
x
è
	`__bsw­_16
 (x)

	)

66 
	#Ë16toh
(
x
è(x)

	)

68 
	#htobe32
(
x
è
	`__bsw­_32
 (x)

	)

69 
	#htŞe32
(
x
è(x)

	)

70 
	#be32toh
(
x
è
	`__bsw­_32
 (x)

	)

71 
	#Ë32toh
(
x
è(x)

	)

73 
	#htobe64
(
x
è
	`__bsw­_64
 (x)

	)

74 
	#htŞe64
(
x
è(x)

	)

75 
	#be64toh
(
x
è
	`__bsw­_64
 (x)

	)

76 
	#Ë64toh
(
x
è(x)

	)

79 
	#htobe16
(
x
è(x)

	)

80 
	#htŞe16
(
x
è
	`__bsw­_16
 (x)

	)

81 
	#be16toh
(
x
è(x)

	)

82 
	#Ë16toh
(
x
è
	`__bsw­_16
 (x)

	)

84 
	#htobe32
(
x
è(x)

	)

85 
	#htŞe32
(
x
è
	`__bsw­_32
 (x)

	)

86 
	#be32toh
(
x
è(x)

	)

87 
	#Ë32toh
(
x
è
	`__bsw­_32
 (x)

	)

89 
	#htobe64
(
x
è(x)

	)

90 
	#htŞe64
(
x
è
	`__bsw­_64
 (x)

	)

91 
	#be64toh
(
x
è(x)

	)

92 
	#Ë64toh
(
x
è
	`__bsw­_64
 (x)

	)

	@/usr/include/features.h

18 #iâdef 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

97 #undeà
__USE_ISOC11


98 #undeà
__USE_ISOC99


99 #undeà
__USE_ISOC95


100 #undeà
__USE_ISOCXX11


101 #undeà
__USE_POSIX


102 #undeà
__USE_POSIX2


103 #undeà
__USE_POSIX199309


104 #undeà
__USE_POSIX199506


105 #undeà
__USE_XOPEN


106 #undeà
__USE_XOPEN_EXTENDED


107 #undeà
__USE_UNIX98


108 #undeà
__USE_XOPEN2K


109 #undeà
__USE_XOPEN2KXSI


110 #undeà
__USE_XOPEN2K8


111 #undeà
__USE_XOPEN2K8XSI


112 #undeà
__USE_LARGEFILE


113 #undeà
__USE_LARGEFILE64


114 #undeà
__USE_FILE_OFFSET64


115 #undeà
__USE_MISC


116 #undeà
__USE_ATFILE


117 #undeà
__USE_GNU


118 #undeà
__USE_REENTRANT


119 #undeà
__USE_FORTIFY_LEVEL


120 #undeà
__KERNEL_STRICT_NAMES


124 #iâdeà
_LOOSE_KERNEL_NAMES


125 
	#__KERNEL_STRICT_NAMES


	)

135 #ià
defšed
 
__GNUC__
 && defšed 
__GNUC_MINOR__


136 
	#__GNUC_PREREQ
(
maj
, 
mš
) \

137 ((
__GNUC__
 << 16è+ 
__GNUC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

139 
	#__GNUC_PREREQ
(
maj
, 
mš
è0

	)

146 #ià(
defšed
 
_BSD_SOURCE
 || defšed 
_SVID_SOURCE
) \

147 && !
defšed
 
	g_DEFAULT_SOURCE


149 #undeà
_DEFAULT_SOURCE


150 
	#_DEFAULT_SOURCE
 1

	)

154 #ifdeà
_GNU_SOURCE


155 #undeà
_ISOC95_SOURCE


156 
	#_ISOC95_SOURCE
 1

	)

157 #undeà
_ISOC99_SOURCE


158 
	#_ISOC99_SOURCE
 1

	)

159 #undeà
_ISOC11_SOURCE


160 
	#_ISOC11_SOURCE
 1

	)

161 #undeà
_POSIX_SOURCE


162 
	#_POSIX_SOURCE
 1

	)

163 #undeà
_POSIX_C_SOURCE


164 
	#_POSIX_C_SOURCE
 200809L

	)

165 #undeà
_XOPEN_SOURCE


166 
	#_XOPEN_SOURCE
 700

	)

167 #undeà
_XOPEN_SOURCE_EXTENDED


168 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

169 #undeà
_LARGEFILE64_SOURCE


170 
	#_LARGEFILE64_SOURCE
 1

	)

171 #undeà
_DEFAULT_SOURCE


172 
	#_DEFAULT_SOURCE
 1

	)

173 #undeà
_ATFILE_SOURCE


174 
	#_ATFILE_SOURCE
 1

	)

179 #ià(
defšed
 
_DEFAULT_SOURCE
 \

180 || (!
defšed
 
	g__STRICT_ANSI__
 \

181 && !
defšed
 
	g_ISOC99_SOURCE
 \

182 && !
defšed
 
	g_POSIX_SOURCE
 && !defšed 
	g_POSIX_C_SOURCE
 \

183 && !
defšed
 
	g_XOPEN_SOURCE
))

184 #undeà
_DEFAULT_SOURCE


185 
	#_DEFAULT_SOURCE
 1

	)

189 #ià(
defšed
 
_ISOC11_SOURCE
 \

190 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

191 
	#__USE_ISOC11
 1

	)

195 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

196 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

197 
	#__USE_ISOC99
 1

	)

201 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

202 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

203 
	#__USE_ISOC95
 1

	)

210 #ià((
defšed
 
__ılu¥lus
 && __cplusplus >= 201103L) \

211 || 
defšed
 
__GXX_EXPERIMENTAL_CXX0X__
)

212 
	#__USE_ISOCXX11
 1

	)

218 #ifdeà
_DEFAULT_SOURCE


219 #ià!
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE


220 
	#__USE_POSIX_IMPLICITLY
 1

	)

222 #undeà
_POSIX_SOURCE


223 
	#_POSIX_SOURCE
 1

	)

224 #undeà
_POSIX_C_SOURCE


225 
	#_POSIX_C_SOURCE
 200809L

	)

227 #ià((!
defšed
 
__STRICT_ANSI__
 \

228 || (
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) >= 500)) \

229 && !
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE
)

230 
	#_POSIX_SOURCE
 1

	)

231 #ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

232 
	#_POSIX_C_SOURCE
 2

	)

233 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

234 
	#_POSIX_C_SOURCE
 199506L

	)

235 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

236 
	#_POSIX_C_SOURCE
 200112L

	)

238 
	#_POSIX_C_SOURCE
 200809L

	)

240 
	#__USE_POSIX_IMPLICITLY
 1

	)

243 #ià(
defšed
 
_POSIX_SOURCE
 \

244 || (
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >= 1) \

245 || 
defšed
 
_XOPEN_SOURCE
)

246 
	#__USE_POSIX
 1

	)

249 #ià
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >ğ2 || defšed 
_XOPEN_SOURCE


250 
	#__USE_POSIX2
 1

	)

253 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 199309L

254 
	#__USE_POSIX199309
 1

	)

257 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 199506L

258 
	#__USE_POSIX199506
 1

	)

261 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 200112L

262 
	#__USE_XOPEN2K
 1

	)

263 #undeà
__USE_ISOC95


264 
	#__USE_ISOC95
 1

	)

265 #undeà
__USE_ISOC99


266 
	#__USE_ISOC99
 1

	)

269 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 200809L

270 
	#__USE_XOPEN2K8
 1

	)

271 #undeà
_ATFILE_SOURCE


272 
	#_ATFILE_SOURCE
 1

	)

275 #ifdef 
_XOPEN_SOURCE


276 
	#__USE_XOPEN
 1

	)

277 #ià(
_XOPEN_SOURCE
 - 0) >= 500

278 
	#__USE_XOPEN_EXTENDED
 1

	)

279 
	#__USE_UNIX98
 1

	)

280 #undeà
_LARGEFILE_SOURCE


281 
	#_LARGEFILE_SOURCE
 1

	)

282 #ià(
_XOPEN_SOURCE
 - 0) >= 600

283 #ià(
_XOPEN_SOURCE
 - 0) >= 700

284 
	#__USE_XOPEN2K8
 1

	)

285 
	#__USE_XOPEN2K8XSI
 1

	)

287 
	#__USE_XOPEN2K
 1

	)

288 
	#__USE_XOPEN2KXSI
 1

	)

289 #undeà
__USE_ISOC95


290 
	#__USE_ISOC95
 1

	)

291 #undeà
__USE_ISOC99


292 
	#__USE_ISOC99
 1

	)

295 #ifdeà
_XOPEN_SOURCE_EXTENDED


296 
	#__USE_XOPEN_EXTENDED
 1

	)

301 #ifdeà
_LARGEFILE_SOURCE


302 
	#__USE_LARGEFILE
 1

	)

305 #ifdeà
_LARGEFILE64_SOURCE


306 
	#__USE_LARGEFILE64
 1

	)

309 #ià
defšed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

310 
	#__USE_FILE_OFFSET64
 1

	)

313 #ià
defšed
 
_DEFAULT_SOURCE


314 
	#__USE_MISC
 1

	)

317 #ifdef 
_ATFILE_SOURCE


318 
	#__USE_ATFILE
 1

	)

321 #ifdef 
_GNU_SOURCE


322 
	#__USE_GNU
 1

	)

325 #ià
defšed
 
_REENTRANT
 || defšed 
_THREAD_SAFE


326 
	#__USE_REENTRANT
 1

	)

329 #ià
defšed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

330 && 
__GNUC_PREREQ
 (4, 1è&& 
defšed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

331 #ià
_FORTIFY_SOURCE
 > 1

332 
	#__USE_FORTIFY_LEVEL
 2

	)

334 
	#__USE_FORTIFY_LEVEL
 1

	)

337 
	#__USE_FORTIFY_LEVEL
 0

	)

342 
	~<¡dc-´edef.h
>

350 #undeà
__GNU_LIBRARY__


351 
	#__GNU_LIBRARY__
 6

	)

355 
	#__GLIBC__
 2

	)

356 
	#__GLIBC_MINOR__
 23

	)

358 
	#__GLIBC_PREREQ
(
maj
, 
mš
) \

359 ((
__GLIBC__
 << 16è+ 
__GLIBC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

362 #iâdeà
__ASSEMBLER__


363 #iâdeà
_SYS_CDEFS_H


364 
	~<sys/cdefs.h
>

369 #ià
defšed
 
__USE_FILE_OFFSET64
 && !defšed 
__REDIRECT


370 
	#__USE_LARGEFILE
 1

	)

371 
	#__USE_LARGEFILE64
 1

	)

377 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

378 && !
defšed
 
	g__OPTIMIZE_SIZE__
 && !defšed 
	g__NO_INLINE__
 \

379 && 
defšed
 
	g__ex‹º_šlše


380 
	#__USE_EXTERN_INLINES
 1

	)

388 
	~<gnu/¡ubs.h
>

	@/usr/include/getopt.h

19 #iâdeà
_GETOPT_H


21 #iâdeà
__Ãed_g‘İt


22 
	#_GETOPT_H
 1

	)

32 #ià!
defšed
 
__GNU_LIBRARY__


33 
	~<ùy³.h
>

36 #iâdeà
__THROW


37 #iâdeà
__GNUC_PREREQ


38 
	#__GNUC_PREREQ
(
maj
, 
mš
è(0)

	)

40 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,8)

41 
	#__THROW
 
	`throw
 ()

	)

43 
	#__THROW


	)

47 #ifdef 
__ılu¥lus


57 *
İrg
;

71 
İtšd
;

76 
İ‹¼
;

80 
İtİt
;

82 #iâdeà
__Ãed_g‘İt


104 
	sİtiÚ


106 cÚ¡ *
	gÇme
;

109 
	ghas_¬g
;

110 *
	gæag
;

111 
	gv®
;

116 
	#no_¬gum’t
 0

	)

117 
	#»quœed_¬gum’t
 1

	)

118 
	#İtiÚ®_¬gum’t
 2

	)

146 #ifdeà
__GNU_LIBRARY__


150 
g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
, cÚ¡ *
__shÜtİts
)

151 
__THROW
;

153 #ià
defšed
 
__Ãed_g‘İt
 && defšed 
__USE_POSIX2
 \

154 && !
defšed
 
	g__USE_POSIX_IMPLICITLY
 && !defšed 
	g__USE_GNU


158 #ifdeà
__REDIRECT


159 
__REDIRECT_NTH
 (
g‘İt
, (
___¬gc
, *cÚ¡ *
___¬gv
,

160 cÚ¡ *
__shÜtİts
),

161 
__posix_g‘İt
);

163 
__posix_g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
,

164 cÚ¡ *
__shÜtİts
è
__THROW
;

165 
	#g‘İt
 
__posix_g‘İt


	)

169 
g‘İt
 ();

172 #iâdeà
__Ãed_g‘İt


173 
g‘İt_lÚg
 (
___¬gc
, *cÚ¡ *
___¬gv
,

174 cÚ¡ *
__shÜtİts
,

175 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

176 
__THROW
;

177 
g‘İt_lÚg_Úly
 (
___¬gc
, *cÚ¡ *
___¬gv
,

178 cÚ¡ *
__shÜtİts
,

179 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

180 
__THROW
;

184 #ifdef 
__ılu¥lus


189 #undeà
__Ãed_g‘İt


	@/usr/include/libio.h

28 #iâdeà
_IO_STDIO_H


29 
	#_IO_STDIO_H


	)

31 
	~<_G_cÚfig.h
>

33 
	#_IO_åos_t
 
_G_åos_t


	)

34 
	#_IO_åos64_t
 
_G_åos64_t


	)

35 
	#_IO_size_t
 
size_t


	)

36 
	#_IO_ssize_t
 
__ssize_t


	)

37 
	#_IO_off_t
 
__off_t


	)

38 
	#_IO_off64_t
 
__off64_t


	)

39 
	#_IO_pid_t
 
__pid_t


	)

40 
	#_IO_uid_t
 
__uid_t


	)

41 
	#_IO_icÚv_t
 
_G_icÚv_t


	)

42 
	#_IO_HAVE_ST_BLKSIZE
 
_G_HAVE_ST_BLKSIZE


	)

43 
	#_IO_BUFSIZ
 
_G_BUFSIZ


	)

44 
	#_IO_va_li¡
 
_G_va_li¡


	)

45 
	#_IO_wšt_t
 
wšt_t


	)

48 
	#__Ãed___va_li¡


	)

49 
	~<¡d¬g.h
>

50 #ifdeà
__GNUC_VA_LIST


51 #undeà
_IO_va_li¡


52 
	#_IO_va_li¡
 
__gnuc_va_li¡


	)

55 #iâdeà
__P


56 
	~<sys/cdefs.h
>

59 
	#_IO_UNIFIED_JUMPTABLES
 1

	)

61 #iâdeà
EOF


62 
	#EOF
 (-1)

	)

64 #iâdeà
NULL


65 #ià
defšed
 
__GNUG__
 && \

66 (
	g__GNUC__
 > 2 || (__GNUC__ =ğ2 && 
__GNUC_MINOR__
 >= 8))

67 
	#NULL
 (
__nuÎ
)

	)

69 #ià!
defšed
(
__ılu¥lus
)

70 
	#NULL
 ((*)0)

	)

72 
	#NULL
 (0)

	)

77 
	#_IOS_INPUT
 1

	)

78 
	#_IOS_OUTPUT
 2

	)

79 
	#_IOS_ATEND
 4

	)

80 
	#_IOS_APPEND
 8

	)

81 
	#_IOS_TRUNC
 16

	)

82 
	#_IOS_NOCREATE
 32

	)

83 
	#_IOS_NOREPLACE
 64

	)

84 
	#_IOS_BIN
 128

	)

92 
	#_IO_MAGIC
 0xFBAD0000

	)

93 
	#_OLD_STDIO_MAGIC
 0xFABC0000

	)

94 
	#_IO_MAGIC_MASK
 0xFFFF0000

	)

95 
	#_IO_USER_BUF
 1

	)

96 
	#_IO_UNBUFFERED
 2

	)

97 
	#_IO_NO_READS
 4

	)

98 
	#_IO_NO_WRITES
 8

	)

99 
	#_IO_EOF_SEEN
 0x10

	)

100 
	#_IO_ERR_SEEN
 0x20

	)

101 
	#_IO_DELETE_DONT_CLOSE
 0x40

	)

102 
	#_IO_LINKED
 0x80

	)

103 
	#_IO_IN_BACKUP
 0x100

	)

104 
	#_IO_LINE_BUF
 0x200

	)

105 
	#_IO_TIED_PUT_GET
 0x400

	)

106 
	#_IO_CURRENTLY_PUTTING
 0x800

	)

107 
	#_IO_IS_APPENDING
 0x1000

	)

108 
	#_IO_IS_FILEBUF
 0x2000

	)

109 
	#_IO_BAD_SEEN
 0x4000

	)

110 
	#_IO_USER_LOCK
 0x8000

	)

112 
	#_IO_FLAGS2_MMAP
 1

	)

113 
	#_IO_FLAGS2_NOTCANCEL
 2

	)

114 #ifdeà
_LIBC


115 
	#_IO_FLAGS2_FORTIFY
 4

	)

117 
	#_IO_FLAGS2_USER_WBUF
 8

	)

118 #ifdeà
_LIBC


119 
	#_IO_FLAGS2_SCANF_STD
 16

	)

120 
	#_IO_FLAGS2_NOCLOSE
 32

	)

121 
	#_IO_FLAGS2_CLOEXEC
 64

	)

125 
	#_IO_SKIPWS
 01

	)

126 
	#_IO_LEFT
 02

	)

127 
	#_IO_RIGHT
 04

	)

128 
	#_IO_INTERNAL
 010

	)

129 
	#_IO_DEC
 020

	)

130 
	#_IO_OCT
 040

	)

131 
	#_IO_HEX
 0100

	)

132 
	#_IO_SHOWBASE
 0200

	)

133 
	#_IO_SHOWPOINT
 0400

	)

134 
	#_IO_UPPERCASE
 01000

	)

135 
	#_IO_SHOWPOS
 02000

	)

136 
	#_IO_SCIENTIFIC
 04000

	)

137 
	#_IO_FIXED
 010000

	)

138 
	#_IO_UNITBUF
 020000

	)

139 
	#_IO_STDIO
 040000

	)

140 
	#_IO_DONT_CLOSE
 0100000

	)

141 
	#_IO_BOOLALPHA
 0200000

	)

144 
_IO_jump_t
; 
	g_IO_FILE
;

147 #ifdeà
_IO_MTSAFE_IO


150 
	t_IO_lock_t
;

156 
	s_IO_m¬k”
 {

157 
_IO_m¬k”
 *
	m_Ãxt
;

158 
_IO_FILE
 *
	m_sbuf
;

162 
	m_pos
;

164 
£t_¡»ampos
(
¡»ampos
 
¥
è{ 
	m_¥os
 = sp; }

165 
£t_off£t
(
off£t
è{ 
	m_pos
 = off£t; 
	m_¥os
 = (
¡»ampos
)(-2); }

166 
	mpublic
:

167 
¡»amm¬k”
(
¡»ambuf
 *
sb
);

168 ~
¡»amm¬k”
();

169 
§všg
(è{  
	m_¥os
 == -2; }

170 
d–
(
¡»amm¬k”
&);

171 
d–
();

176 
	e__codecvt_»suÉ


178 
	m__codecvt_ok
,

179 
	m__codecvt_·¹Ÿl
,

180 
	m__codecvt_”rÜ
,

181 
	m__codecvt_nocÚv


184 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


187 
	s_IO_codecvt


189 (*
	m__codecvt_de¡r
è(
	m_IO_codecvt
 *);

190 
__codecvt_»suÉ
 (*
__codecvt_do_out
è(
	m_IO_codecvt
 *,

191 
	m__mb¡©e_t
 *,

192 cÚ¡ 
	mwch¬_t
 *,

193 cÚ¡ 
	mwch¬_t
 *,

194 cÚ¡ 
	mwch¬_t
 **, *,

196 
__codecvt_»suÉ
 (*
__codecvt_do_unshiá
è(
	m_IO_codecvt
 *,

197 
	m__mb¡©e_t
 *, *,

199 
__codecvt_»suÉ
 (*
__codecvt_do_š
è(
	m_IO_codecvt
 *,

200 
	m__mb¡©e_t
 *,

202 cÚ¡ **, 
	mwch¬_t
 *,

203 
	mwch¬_t
 *, wchar_t **);

204 (*
	m__codecvt_do_’codšg
è(
	m_IO_codecvt
 *);

205 (*
	m__codecvt_do_®ways_nocÚv
è(
	m_IO_codecvt
 *);

206 (*
	m__codecvt_do_Ëngth
è(
	m_IO_codecvt
 *, 
	m__mb¡©e_t
 *,

207 cÚ¡ *, cÚ¡ *, 
	m_IO_size_t
);

208 (*
	m__codecvt_do_max_Ëngth
è(
	m_IO_codecvt
 *);

210 
_IO_icÚv_t
 
	m__cd_š
;

211 
_IO_icÚv_t
 
	m__cd_out
;

215 
	s_IO_wide_d©a


217 
wch¬_t
 *
	m_IO_»ad_±r
;

218 
wch¬_t
 *
	m_IO_»ad_’d
;

219 
wch¬_t
 *
	m_IO_»ad_ba£
;

220 
wch¬_t
 *
	m_IO_wr™e_ba£
;

221 
wch¬_t
 *
	m_IO_wr™e_±r
;

222 
wch¬_t
 *
	m_IO_wr™e_’d
;

223 
wch¬_t
 *
	m_IO_buf_ba£
;

224 
wch¬_t
 *
	m_IO_buf_’d
;

226 
wch¬_t
 *
	m_IO_§ve_ba£
;

227 
wch¬_t
 *
	m_IO_backup_ba£
;

229 
wch¬_t
 *
	m_IO_§ve_’d
;

231 
__mb¡©e_t
 
	m_IO_¡©e
;

232 
__mb¡©e_t
 
	m_IO_Ï¡_¡©e
;

233 
_IO_codecvt
 
	m_codecvt
;

235 
wch¬_t
 
	m_shÜtbuf
[1];

237 cÚ¡ 
_IO_jump_t
 *
	m_wide_vbË
;

241 
	s_IO_FILE
 {

242 
	m_æags
;

243 
	#_IO_fe_æags
 
_æags


	)

247 * 
	m_IO_»ad_±r
;

248 * 
	m_IO_»ad_’d
;

249 * 
	m_IO_»ad_ba£
;

250 * 
	m_IO_wr™e_ba£
;

251 * 
	m_IO_wr™e_±r
;

252 * 
	m_IO_wr™e_’d
;

253 * 
	m_IO_buf_ba£
;

254 * 
	m_IO_buf_’d
;

256 *
	m_IO_§ve_ba£
;

257 *
	m_IO_backup_ba£
;

258 *
	m_IO_§ve_’d
;

260 
_IO_m¬k”
 *
	m_m¬k”s
;

262 
_IO_FILE
 *
	m_chaš
;

264 
	m_f’o
;

266 
	m_blksize
;

268 
	m_æags2
;

270 
_IO_off_t
 
	m_Şd_off£t
;

272 
	#__HAVE_COLUMN


	)

274 
	m_cur_cŞumn
;

275 sigÃd 
	m_vbË_off£t
;

276 
	m_shÜtbuf
[1];

280 
_IO_lock_t
 *
	m_lock
;

281 #ifdeà
_IO_USE_OLD_IO_FILE


284 
	s_IO_FILE_com¶‘e


286 
_IO_FILE
 
	m_fe
;

288 #ià
defšed
 
_G_IO_IO_FILE_VERSION
 && _G_IO_IO_FILE_VERSION == 0x20001

289 
_IO_off64_t
 
	m_off£t
;

290 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


292 
_IO_codecvt
 *
	m_codecvt
;

293 
_IO_wide_d©a
 *
	m_wide_d©a
;

294 
_IO_FILE
 *
	m_ä“»s_li¡
;

295 *
	m_ä“»s_buf
;

297 *
	m__·d1
;

298 *
	m__·d2
;

299 *
	m__·d3
;

300 *
	m__·d4
;

302 
size_t
 
	m__·d5
;

303 
	m_mode
;

305 
	m_unu£d2
[15 *  (è- 4 *  (*è-  (
size_t
)];

309 #iâdeà
__ılu¥lus


310 
_IO_FILE
 
	t_IO_FILE
;

313 
	g_IO_FILE_¶us
;

315 
_IO_FILE_¶us
 
_IO_2_1_¡dš_
;

316 
_IO_FILE_¶us
 
_IO_2_1_¡dout_
;

317 
_IO_FILE_¶us
 
_IO_2_1_¡d”r_
;

318 #iâdeà
_LIBC


319 
	#_IO_¡dš
 ((
_IO_FILE
*)(&
_IO_2_1_¡dš_
))

	)

320 
	#_IO_¡dout
 ((
_IO_FILE
*)(&
_IO_2_1_¡dout_
))

	)

321 
	#_IO_¡d”r
 ((
_IO_FILE
*)(&
_IO_2_1_¡d”r_
))

	)

323 
_IO_FILE
 *
_IO_¡dš
 
©Œibu‹_hidd’
;

324 
_IO_FILE
 *
_IO_¡dout
 
©Œibu‹_hidd’
;

325 
_IO_FILE
 *
_IO_¡d”r
 
©Œibu‹_hidd’
;

333 
__ssize_t
 
	t__io_»ad_â
 (*
	t__cook›
, *
	t__buf
, 
	tsize_t
 
	t__nby‹s
);

341 
__ssize_t
 
	t__io_wr™e_â
 (*
	t__cook›
, cÚ¡ *
	t__buf
,

342 
	tsize_t
 
	t__n
);

350 
	t__io_£ek_â
 (*
	t__cook›
, 
	t_IO_off64_t
 *
	t__pos
, 
	t__w
);

353 
	t__io_şo£_â
 (*
	t__cook›
);

356 #ifdeà
_GNU_SOURCE


358 
__io_»ad_â
 
	tcook›_»ad_funùiÚ_t
;

359 
__io_wr™e_â
 
	tcook›_wr™e_funùiÚ_t
;

360 
__io_£ek_â
 
	tcook›_£ek_funùiÚ_t
;

361 
__io_şo£_â
 
	tcook›_şo£_funùiÚ_t
;

366 
__io_»ad_â
 *
	m»ad
;

367 
__io_wr™e_â
 *
	mwr™e
;

368 
__io_£ek_â
 *
	m£ek
;

369 
__io_şo£_â
 *
	mşo£
;

370 } 
	t_IO_cook›_io_funùiÚs_t
;

371 
_IO_cook›_io_funùiÚs_t
 
	tcook›_io_funùiÚs_t
;

373 
	g_IO_cook›_fe
;

376 
_IO_cook›_š™
 (
_IO_cook›_fe
 *
__cfe
, 
__»ad_wr™e
,

377 *
__cook›
, 
_IO_cook›_io_funùiÚs_t
 
__âs
);

381 #ifdeà
__ılu¥lus


385 
__und”æow
 (
_IO_FILE
 *);

386 
__uæow
 (
_IO_FILE
 *);

387 
__ov”æow
 (
_IO_FILE
 *, );

388 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


389 
_IO_wšt_t
 
__wund”æow
 (
_IO_FILE
 *);

390 
_IO_wšt_t
 
__wuæow
 (
_IO_FILE
 *);

391 
_IO_wšt_t
 
__wov”æow
 (
_IO_FILE
 *, _IO_wint_t);

394 #ià 
__GNUC__
 >= 3

395 
	#_IO_BE
(
ex´
, 
»s
è
	`__butš_ex³ù
 (Óx´),„es)

	)

397 
	#_IO_BE
(
ex´
, 
»s
èÓx´)

	)

400 
	#_IO_g‘c_uÆocked
(
_å
) \

401 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

402 ? 
	`__uæow
 (
_å
è: *(*è(_å)->
_IO_»ad_±r
++)

	)

403 
	#_IO_³ekc_uÆocked
(
_å
) \

404 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

405 && 
	`__und”æow
 (
_å
è=ğ
EOF
 ? EOF \

406 : *(*è(
_å
)->
_IO_»ad_±r
)

	)

407 
	#_IO_putc_uÆocked
(
_ch
, 
_å
) \

408 (
	`_IO_BE
 ((
_å
)->
_IO_wr™e_±r
 >ğ(_å)->
_IO_wr™e_’d
, 0) \

409 ? 
	`__ov”æow
 (
_å
, (è(
_ch
)) \

410 : (è(*(
_å
)->
_IO_wr™e_±r
++ = (
_ch
)))

	)

412 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


413 
	#_IO_g‘wc_uÆocked
(
_å
) \

414 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

415 || ((
_å
)->
_wide_d©a
->
_IO_»ad_±r
 \

416 >ğ(
_å
)->
_wide_d©a
->
_IO_»ad_’d
), 0) \

417 ? 
	`__wuæow
 (
_å
è: (
_IO_wšt_t
è*(_å)->
_wide_d©a
->
_IO_»ad_±r
++)

	)

418 
	#_IO_putwc_uÆocked
(
_wch
, 
_å
) \

419 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

420 || ((
_å
)->
_wide_d©a
->
_IO_wr™e_±r
 \

421 >ğ(
_å
)->
_wide_d©a
->
_IO_wr™e_’d
), 0) \

422 ? 
	`__wov”æow
 (
_å
, 
_wch
) \

423 : (
_IO_wšt_t
è(*(
_å
)->
_wide_d©a
->
_IO_wr™e_±r
++ = (
_wch
)))

	)

426 
	#_IO_ãof_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_EOF_SEEN
è!ğ0)

	)

427 
	#_IO_ã¼Ü_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_ERR_SEEN
è!ğ0)

	)

429 
_IO_g‘c
 (
_IO_FILE
 *
__å
);

430 
_IO_putc
 (
__c
, 
_IO_FILE
 *
__å
);

431 
_IO_ãof
 (
_IO_FILE
 *
__å
è
__THROW
;

432 
_IO_ã¼Ü
 (
_IO_FILE
 *
__å
è
__THROW
;

434 
_IO_³ekc_locked
 (
_IO_FILE
 *
__å
);

437 
	#_IO_PENDING_OUTPUT_COUNT
(
_å
) \

438 ((
_å
)->
_IO_wr™e_±r
 - (_å)->
_IO_wr™e_ba£
)

	)

440 
_IO_æockfe
 (
_IO_FILE
 *è
__THROW
;

441 
_IO_fuÆockfe
 (
_IO_FILE
 *è
__THROW
;

442 
_IO_árylockfe
 (
_IO_FILE
 *è
__THROW
;

444 #ifdeà
_IO_MTSAFE_IO


445 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_locked
 (_å)

	)

446 
	#_IO_æockfe
(
_å
) \

447 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_æockfe
 (_å)

	)

448 
	#_IO_fuÆockfe
(
_å
) \

449 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_fuÆockfe
 (_å)

	)

451 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_uÆocked
 (_å)

	)

452 
	#_IO_æockfe
(
_å
è

	)

453 
	#_IO_fuÆockfe
(
_å
è

	)

454 
	#_IO_árylockfe
(
_å
è

	)

455 
	#_IO_ş—nup_»giÚ_¡¬t
(
_fù
, 
_å
è

	)

456 
	#_IO_ş—nup_»giÚ_’d
(
_Do™
è

	)

459 
_IO_vfsÿnf
 (
_IO_FILE
 * 
__»¡riù
, const * __restrict,

460 
_IO_va_li¡
, *
__»¡riù
);

461 
_IO_vårštf
 (
_IO_FILE
 *
__»¡riù
, const *__restrict,

462 
_IO_va_li¡
);

463 
_IO_ssize_t
 
_IO_·dn
 (
_IO_FILE
 *, , _IO_ssize_t);

464 
_IO_size_t
 
_IO_sg‘n
 (
_IO_FILE
 *, *, _IO_size_t);

466 
_IO_off64_t
 
_IO_£ekoff
 (
_IO_FILE
 *, _IO_off64_t, , );

467 
_IO_off64_t
 
_IO_£ekpos
 (
_IO_FILE
 *, _IO_off64_t, );

469 
_IO_ä“_backup_¬—
 (
_IO_FILE
 *è
__THROW
;

471 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


472 
_IO_wšt_t
 
_IO_g‘wc
 (
_IO_FILE
 *
__å
);

473 
_IO_wšt_t
 
_IO_putwc
 (
wch¬_t
 
__wc
, 
_IO_FILE
 *
__å
);

474 
_IO_fwide
 (
_IO_FILE
 *
__å
, 
__mode
è
__THROW
;

475 #ià
__GNUC__
 >= 2

478 #ià
defšed
 
_LIBC
 && defšed 
SHARED


479 
	~<shlib-com·t.h
>

480 #ià
SHLIB_COMPAT
 (
libc
, 
GLIBC_2_0
, 
GLIBC_2_1
)

481 
	#_IO_fwide_maybe_šcom·tibË
 \

482 (
	`__butš_ex³ù
 (&
_IO_¡dš_u£d
 =ğ
NULL
, 0))

	)

483 cÚ¡ 
_IO_¡dš_u£d
;

484 
w—k_ex‹º
 (
_IO_¡dš_u£d
);

487 #iâdeà
_IO_fwide_maybe_šcom·tibË


488 
	#_IO_fwide_maybe_šcom·tibË
 (0)

	)

492 
	#_IO_fwide
(
__å
, 
__mode
) \

493 ({ 
__»suÉ
 = (
__mode
); \

494 ià(
__»suÉ
 < 0 && ! 
_IO_fwide_maybe_šcom·tibË
) \

496 ià((
__å
)->
_mode
 == 0) \

498 (
__å
)->
_mode
 = -1; \

499 
__»suÉ
 = (
__å
)->
_mode
; \

501 ià(
	`__butš_cÚ¡ªt_p
 (
__mode
) && (__mode) == 0) \

502 
__»suÉ
 = 
_IO_fwide_maybe_šcom·tibË
 ? -1 : (
__å
)->
_mode
; \

504 
__»suÉ
 = 
	`_IO_fwide
 (
__å
, __result); \

505 
__»suÉ
; })

	)

508 
_IO_vfwsÿnf
 (
_IO_FILE
 * 
__»¡riù
, cÚ¡ 
wch¬_t
 * __restrict,

509 
_IO_va_li¡
, *
__»¡riù
);

510 
_IO_vfw´štf
 (
_IO_FILE
 *
__»¡riù
, cÚ¡ 
wch¬_t
 *__restrict,

511 
_IO_va_li¡
);

512 
_IO_ssize_t
 
_IO_w·dn
 (
_IO_FILE
 *, 
wšt_t
, _IO_ssize_t);

513 
_IO_ä“_wbackup_¬—
 (
_IO_FILE
 *è
__THROW
;

516 #ifdeà
__LDBL_COMPAT


517 
	~<b™s/libio-ldbl.h
>

520 #ifdeà
__ılu¥lus


	@/usr/include/sched.h

19 #iâdef 
_SCHED_H


20 
	#_SCHED_H
 1

	)

22 
	~<ã©u»s.h
>

25 
	~<b™s/ty³s.h
>

27 
	#__Ãed_size_t


	)

28 
	~<¡ddef.h
>

30 #ifdeà
__USE_XOPEN2K


31 
	#__Ãed_time_t


	)

32 
	#__Ãed_time¥ec


	)

34 
	~<time.h
>

36 #iâdeà
__pid_t_defšed


37 
__pid_t
 
	tpid_t
;

38 
	#__pid_t_defšed


	)

43 
	~<b™s/sched.h
>

45 
	#sched_´iÜ™y
 
__sched_´iÜ™y


	)

48 
__BEGIN_DECLS


51 
	$sched_£¬am
 (
__pid_t
 
__pid
, cÚ¡ 
sched_·¿m
 *
__·¿m
)

52 
__THROW
;

55 
	$sched_g‘·¿m
 (
__pid_t
 
__pid
, 
sched_·¿m
 *
__·¿m
è
__THROW
;

58 
	$sched_£tscheduËr
 (
__pid_t
 
__pid
, 
__pŞicy
,

59 cÚ¡ 
sched_·¿m
 *
__·¿m
è
__THROW
;

62 
	$sched_g‘scheduËr
 (
__pid_t
 
__pid
è
__THROW
;

65 
	$sched_y›ld
 (è
__THROW
;

68 
	$sched_g‘_´iÜ™y_max
 (
__®gÜ™hm
è
__THROW
;

71 
	$sched_g‘_´iÜ™y_mš
 (
__®gÜ™hm
è
__THROW
;

74 
	$sched_¼_g‘_š‹rv®
 (
__pid_t
 
__pid
, 
time¥ec
 *
__t
è
__THROW
;

77 #ifdeà
__USE_GNU


79 
	#CPU_SETSIZE
 
__CPU_SETSIZE


	)

80 
	#CPU_SET
(
ıu
, 
ıu£
è
	`__CPU_SET_S
 (ıu,  (
ıu_£t_t
), cpu£)

	)

81 
	#CPU_CLR
(
ıu
, 
ıu£
è
	`__CPU_CLR_S
 (ıu,  (
ıu_£t_t
), cpu£)

	)

82 
	#CPU_ISSET
(
ıu
, 
ıu£
è
	`__CPU_ISSET_S
 (ıu,  (
ıu_£t_t
), \

83 
ıu£
)

	)

84 
	#CPU_ZERO
(
ıu£
è
	`__CPU_ZERO_S
 ( (
ıu_£t_t
), cpu£)

	)

85 
	#CPU_COUNT
(
ıu£
è
	`__CPU_COUNT_S
 ( (
ıu_£t_t
), cpu£)

	)

87 
	#CPU_SET_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_SET_S
 (ıu, s‘size, cpu£)

	)

88 
	#CPU_CLR_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_CLR_S
 (ıu, s‘size, cpu£)

	)

89 
	#CPU_ISSET_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_ISSET_S
 (cpu, setsize, \

90 
ıu£
)

	)

91 
	#CPU_ZERO_S
(
£tsize
, 
ıu£
è
	`__CPU_ZERO_S
 (£tsize, cpu£)

	)

92 
	#CPU_COUNT_S
(
£tsize
, 
ıu£
è
	`__CPU_COUNT_S
 (£tsize, cpu£)

	)

94 
	#CPU_EQUAL
(
ıu£1
, 
ıu£2
) \

95 
	`__CPU_EQUAL_S
 ( (
ıu_£t_t
), 
ıu£1
, 
ıu£2
)

	)

96 
	#CPU_EQUAL_S
(
£tsize
, 
ıu£1
, 
ıu£2
) \

97 
	`__CPU_EQUAL_S
 (
£tsize
, 
ıu£1
, 
ıu£2
)

	)

99 
	#CPU_AND
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

100 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, &)

	)

101 
	#CPU_OR
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

102 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, |)

	)

103 
	#CPU_XOR
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

104 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, ^)

	)

105 
	#CPU_AND_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

106 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, &)

	)

107 
	#CPU_OR_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

108 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, |)

	)

109 
	#CPU_XOR_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

110 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, ^)

	)

112 
	#CPU_ALLOC_SIZE
(
couÁ
è
	`__CPU_ALLOC_SIZE
 (couÁ)

	)

113 
	#CPU_ALLOC
(
couÁ
è
	`__CPU_ALLOC
 (couÁ)

	)

114 
	#CPU_FREE
(
ıu£t
è
	`__CPU_FREE
 (ıu£t)

	)

118 
	$sched_£ffš™y
 (
__pid_t
 
__pid
, 
size_t
 
__ıu£tsize
,

119 cÚ¡ 
ıu_£t_t
 *
__ıu£t
è
__THROW
;

122 
	$sched_g‘affš™y
 (
__pid_t
 
__pid
, 
size_t
 
__ıu£tsize
,

123 
ıu_£t_t
 *
__ıu£t
è
__THROW
;

126 
__END_DECLS


	@/usr/include/xlocale.h

20 #iâdeà
_XLOCALE_H


21 
	#_XLOCALE_H
 1

	)

27 
	s__loÿË_¡ruù


30 
__loÿË_d©a
 *
	m__loÿËs
[13];

33 cÚ¡ *
	m__ùy³_b
;

34 cÚ¡ *
	m__ùy³_tŞow”
;

35 cÚ¡ *
	m__ùy³_touµ”
;

38 cÚ¡ *
	m__Çmes
[13];

39 } *
	t__loÿË_t
;

42 
__loÿË_t
 
	tloÿË_t
;

	@/usr/include/_G_config.h

4 #iâdeà
_G_cÚfig_h


5 
	#_G_cÚfig_h
 1

	)

9 
	~<b™s/ty³s.h
>

10 
	#__Ãed_size_t


	)

11 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


12 
	#__Ãed_wch¬_t


	)

14 
	#__Ãed_NULL


	)

15 
	~<¡ddef.h
>

16 
	#__Ãed_mb¡©e_t


	)

17 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


18 
	#__Ãed_wšt_t


	)

20 
	~<wch¬.h
>

23 
__off_t
 
	m__pos
;

24 
__mb¡©e_t
 
	m__¡©e
;

25 } 
	t_G_åos_t
;

28 
__off64_t
 
	m__pos
;

29 
__mb¡©e_t
 
	m__¡©e
;

30 } 
	t_G_åos64_t
;

31 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


32 
	~<gcÚv.h
>

35 
__gcÚv_šfo
 
	m__cd
;

38 
__gcÚv_šfo
 
	m__cd
;

39 
__gcÚv_¡•_d©a
 
	m__d©a
;

40 } 
	m__combšed
;

41 } 
	t_G_icÚv_t
;

46 
	#_G_va_li¡
 
__gnuc_va_li¡


	)

48 
	#_G_HAVE_MMAP
 1

	)

49 
	#_G_HAVE_MREMAP
 1

	)

51 
	#_G_IO_IO_FILE_VERSION
 0x20001

	)

54 
	#_G_HAVE_ST_BLKSIZE
 
	`defšed
 (
_STATBUF_ST_BLKSIZE
)

	)

56 
	#_G_BUFSIZ
 8192

	)

	@/usr/include/ctype.h

22 #iâdef 
_CTYPE_H


23 
	#_CTYPE_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 
	g__BEGIN_DECLS


30 #iâdeà
_ISb™


39 
	~<’dŸn.h
>

40 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


41 
	#_ISb™
(
b™
è(1 << (b™))

	)

43 
	#_ISb™
(
b™
è((b™è< 8 ? ((1 << (b™)è<< 8è: ((1 << (b™)è>> 8))

	)

48 
	m_ISuµ”
 = 
_ISb™
 (0),

49 
	m_ISlow”
 = 
_ISb™
 (1),

50 
	m_IS®pha
 = 
_ISb™
 (2),

51 
	m_ISdig™
 = 
_ISb™
 (3),

52 
	m_ISxdig™
 = 
_ISb™
 (4),

53 
	m_IS¥aû
 = 
_ISb™
 (5),

54 
	m_IS´št
 = 
_ISb™
 (6),

55 
	m_ISg¿ph
 = 
_ISb™
 (7),

56 
	m_ISbÏnk
 = 
_ISb™
 (8),

57 
	m_ISúŒl
 = 
_ISb™
 (9),

58 
	m_ISpunù
 = 
_ISb™
 (10),

59 
	m_IS®num
 = 
_ISb™
 (11)

79 cÚ¡ **
	$__ùy³_b_loc
 ()

80 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

81 cÚ¡ 
__št32_t
 **
	$__ùy³_tŞow”_loc
 ()

82 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

83 cÚ¡ 
__št32_t
 **
	$__ùy³_touµ”_loc
 ()

84 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

87 #iâdeà
__ılu¥lus


88 
	#__isùy³
(
c
, 
ty³
) \

89 ((*
	`__ùy³_b_loc
 ())[(è(
c
)] & (è
ty³
)

	)

90 #–ià
defšed
 
__USE_EXTERN_INLINES


91 
	#__isùy³_f
(
ty³
) \

92 
__ex‹º_šlše
 \

93 
is
##
	`ty³
 (
__c
è
__THROW
 \

95  (*
	`__ùy³_b_loc
 ())[(è(
__c
)] & (è
_IS
##
ty³
; \

96 
	}

	)
}

99 
	#__i§scii
(
c
è(((cè& ~0x7fè=ğ0è

	)

100 
	#__tßscii
(
c
è((cè& 0x7fè

	)

102 
	#__exùy³
(
Çme
è
	`Çme
 (è
__THROW


	)

104 
__BEGIN_NAMESPACE_STD


110 
__exùy³
 (
i§Êum
);

111 
__exùy³
 (
i§Íha
);

112 
__exùy³
 (
isúŒl
);

113 
__exùy³
 (
isdig™
);

114 
__exùy³
 (
i¦ow”
);

115 
__exùy³
 (
isg¿ph
);

116 
__exùy³
 (
i¥ršt
);

117 
__exùy³
 (
i¥unù
);

118 
__exùy³
 (
is¥aû
);

119 
__exùy³
 (
isuµ”
);

120 
__exùy³
 (
isxdig™
);

124 
	$tŞow”
 (
__c
è
__THROW
;

127 
	$touµ”
 (
__c
è
__THROW
;

129 
__END_NAMESPACE_STD


133 #ifdef 
__USE_ISOC99


134 
__BEGIN_NAMESPACE_C99


136 
	`__exùy³
 (
isbÏnk
);

138 
__END_NAMESPACE_C99


141 #ifdeà
__USE_GNU


143 
	$isùy³
 (
__c
, 
__mask
è
__THROW
;

146 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


150 
	$i§scii
 (
__c
è
__THROW
;

154 
	$tßscii
 (
__c
è
__THROW
;

158 
	`__exùy³
 (
_touµ”
);

159 
	`__exùy³
 (
_tŞow”
);

163 
	#__tobody
(
c
, 
f
, 
a
, 
¬gs
) \

164 (
__ex‹nsiÚ__
 \

165 ({ 
__»s
; \

166 ià( (
c
) > 1) \

168 ià(
	`__butš_cÚ¡ªt_p
 (
c
)) \

170 
__c
 = (
c
); \

171 
__»s
 = 
__c
 < -128 || __ø> 255 ? __ø: (
a
)[__c]; \

174 
__»s
 = 
f
 
¬gs
; \

177 
__»s
 = (
a
)[(è(
c
)]; \

178 
__»s
; 
	}
}))

	)

180 #ià!
defšed
 
__NO_CTYPE


181 #ifdeà
__isùy³_f


182 
	$__isùy³_f
 (
®num
)

183 
	$__isùy³_f
 (
®pha
)

184 
	$__isùy³_f
 (
úŒl
)

185 
	$__isùy³_f
 (
dig™
)

186 
	$__isùy³_f
 (
low”
)

187 
	$__isùy³_f
 (
g¿ph
)

188 
	$__isùy³_f
 (
´št
)

189 
	$__isùy³_f
 (
punù
)

190 
	$__isùy³_f
 (
¥aû
)

191 
	$__isùy³_f
 (
uµ”
)

192 
	$__isùy³_f
 (
xdig™
)

193 #ifdeà
__USE_ISOC99


194 
	$__isùy³_f
 (
bÏnk
)

196 #–ià
defšed
 
__isùy³


197 
	#i§Êum
(
c
è
	`__isùy³
((c), 
_IS®num
)

	)

198 
	#i§Íha
(
c
è
	`__isùy³
((c), 
_IS®pha
)

	)

199 
	#isúŒl
(
c
è
	`__isùy³
((c), 
_ISúŒl
)

	)

200 
	#isdig™
(
c
è
	`__isùy³
((c), 
_ISdig™
)

	)

201 
	#i¦ow”
(
c
è
	`__isùy³
((c), 
_ISlow”
)

	)

202 
	#isg¿ph
(
c
è
	`__isùy³
((c), 
_ISg¿ph
)

	)

203 
	#i¥ršt
(
c
è
	`__isùy³
((c), 
_IS´št
)

	)

204 
	#i¥unù
(
c
è
	`__isùy³
((c), 
_ISpunù
)

	)

205 
	#is¥aû
(
c
è
	`__isùy³
((c), 
_IS¥aû
)

	)

206 
	#isuµ”
(
c
è
	`__isùy³
((c), 
_ISuµ”
)

	)

207 
	#isxdig™
(
c
è
	`__isùy³
((c), 
_ISxdig™
)

	)

208 #ifdeà
__USE_ISOC99


209 
	#isbÏnk
(
c
è
	`__isùy³
((c), 
_ISbÏnk
)

	)

213 #ifdeà
__USE_EXTERN_INLINES


214 
__ex‹º_šlše
 

215 
	`__NTH
 (
	$tŞow”
 (
__c
))

217  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_tŞow”_loc
 ())[__c] : __c;

218 
	}
}

220 
__ex‹º_šlše
 

221 
__NTH
 (
	$touµ”
 (
__c
))

223  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_touµ”_loc
 ())[__c] : __c;

224 
	}
}

227 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


228 
	#tŞow”
(
c
è
	`__tobody
 (c, 
tŞow”
, *
	`__ùy³_tŞow”_loc
 (), (c))

	)

229 
	#touµ”
(
c
è
	`__tobody
 (c, 
touµ”
, *
	`__ùy³_touµ”_loc
 (), (c))

	)

232 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


233 
	#i§scii
(
c
è
	`__i§scii
 (c)

	)

234 
	#tßscii
(
c
è
	`__tßscii
 (c)

	)

236 
	#_tŞow”
(
c
è((è(*
	`__ùy³_tŞow”_loc
 ())[(è(c)])

	)

237 
	#_touµ”
(
c
è((è(*
	`__ùy³_touµ”_loc
 ())[(è(c)])

	)

243 #ifdeà
__USE_XOPEN2K8


257 
	~<xloÿË.h
>

261 
	#__isùy³_l
(
c
, 
ty³
, 
loÿË
) \

262 ((
loÿË
)->
__ùy³_b
[(è(
c
)] & (è
ty³
)

	)

264 
	#__exùy³_l
(
Çme
) \

265 
	`Çme
 (, 
__loÿË_t
è
__THROW


	)

271 
__exùy³_l
 (
i§Êum_l
);

272 
__exùy³_l
 (
i§Íha_l
);

273 
__exùy³_l
 (
isúŒl_l
);

274 
__exùy³_l
 (
isdig™_l
);

275 
__exùy³_l
 (
i¦ow”_l
);

276 
__exùy³_l
 (
isg¿ph_l
);

277 
__exùy³_l
 (
i¥ršt_l
);

278 
__exùy³_l
 (
i¥unù_l
);

279 
__exùy³_l
 (
is¥aû_l
);

280 
__exùy³_l
 (
isuµ”_l
);

281 
__exùy³_l
 (
isxdig™_l
);

283 
__exùy³_l
 (
isbÏnk_l
);

287 
	$__tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

288 
	$tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

291 
	$__touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

292 
	$touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

294 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


295 
	#__tŞow”_l
(
c
, 
loÿË
) \

296 
	`__tobody
 (
c
, 
__tŞow”_l
, (
loÿË
)->
__ùy³_tŞow”
, (c,†oÿË))

	)

297 
	#__touµ”_l
(
c
, 
loÿË
) \

298 
	`__tobody
 (
c
, 
__touµ”_l
, (
loÿË
)->
__ùy³_touµ”
, (c,†oÿË))

	)

299 
	#tŞow”_l
(
c
, 
loÿË
è
	`__tŞow”_l
 ((c), (loÿË))

	)

300 
	#touµ”_l
(
c
, 
loÿË
è
	`__touµ”_l
 ((c), (loÿË))

	)

304 #iâdeà
__NO_CTYPE


305 
	#__i§Êum_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®num
, (l))

	)

306 
	#__i§Íha_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®pha
, (l))

	)

307 
	#__isúŒl_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISúŒl
, (l))

	)

308 
	#__isdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISdig™
, (l))

	)

309 
	#__i¦ow”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISlow”
, (l))

	)

310 
	#__isg¿ph_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISg¿ph
, (l))

	)

311 
	#__i¥ršt_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS´št
, (l))

	)

312 
	#__i¥unù_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISpunù
, (l))

	)

313 
	#__is¥aû_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS¥aû
, (l))

	)

314 
	#__isuµ”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISuµ”
, (l))

	)

315 
	#__isxdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISxdig™
, (l))

	)

317 
	#__isbÏnk_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISbÏnk
, (l))

	)

319 #ifdeà
__USE_MISC


320 
	#__i§scii_l
(
c
,
l
è(Ö), 
	`__i§scii
 (c))

	)

321 
	#__tßscii_l
(
c
,
l
è(Ö), 
	`__tßscii
 (c))

	)

324 
	#i§Êum_l
(
c
,
l
è
	`__i§Êum_l
 ((c), (l))

	)

325 
	#i§Íha_l
(
c
,
l
è
	`__i§Íha_l
 ((c), (l))

	)

326 
	#isúŒl_l
(
c
,
l
è
	`__isúŒl_l
 ((c), (l))

	)

327 
	#isdig™_l
(
c
,
l
è
	`__isdig™_l
 ((c), (l))

	)

328 
	#i¦ow”_l
(
c
,
l
è
	`__i¦ow”_l
 ((c), (l))

	)

329 
	#isg¿ph_l
(
c
,
l
è
	`__isg¿ph_l
 ((c), (l))

	)

330 
	#i¥ršt_l
(
c
,
l
è
	`__i¥ršt_l
 ((c), (l))

	)

331 
	#i¥unù_l
(
c
,
l
è
	`__i¥unù_l
 ((c), (l))

	)

332 
	#is¥aû_l
(
c
,
l
è
	`__is¥aû_l
 ((c), (l))

	)

333 
	#isuµ”_l
(
c
,
l
è
	`__isuµ”_l
 ((c), (l))

	)

334 
	#isxdig™_l
(
c
,
l
è
	`__isxdig™_l
 ((c), (l))

	)

336 
	#isbÏnk_l
(
c
,
l
è
	`__isbÏnk_l
 ((c), (l))

	)

338 #ifdeà
__USE_MISC


339 
	#i§scii_l
(
c
,
l
è
	`__i§scii_l
 ((c), (l))

	)

340 
	#tßscii_l
(
c
,
l
è
	`__tßscii_l
 ((c), (l))

	)

347 
__END_DECLS


	@/usr/include/stdc-predef.h

18 #iâdef 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

36 #ifdeà
__GCC_IEC_559


37 #ià
__GCC_IEC_559
 > 0

38 
	#__STDC_IEC_559__
 1

	)

41 
	#__STDC_IEC_559__
 1

	)

44 #ifdeà
__GCC_IEC_559_COMPLEX


45 #ià
__GCC_IEC_559_COMPLEX
 > 0

46 
	#__STDC_IEC_559_COMPLEX__
 1

	)

49 
	#__STDC_IEC_559_COMPLEX__
 1

	)

55 
	#__STDC_ISO_10646__
 201505L

	)

58 
	#__STDC_NO_THREADS__
 1

	)

	@/usr/include/gconv.h

22 #iâdeà
_GCONV_H


23 
	#_GCONV_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	#__Ãed_mb¡©e_t


	)

27 
	#__Ãed_wšt_t


	)

28 
	~<wch¬.h
>

29 
	#__Ãed_size_t


	)

30 
	#__Ãed_wch¬_t


	)

31 
	~<¡ddef.h
>

34 
	#__UNKNOWN_10646_CHAR
 ((
wch¬_t
è0xfffd)

	)

39 
	m__GCONV_OK
 = 0,

40 
	m__GCONV_NOCONV
,

41 
	m__GCONV_NODB
,

42 
	m__GCONV_NOMEM
,

44 
	m__GCONV_EMPTY_INPUT
,

45 
	m__GCONV_FULL_OUTPUT
,

46 
	m__GCONV_ILLEGAL_INPUT
,

47 
	m__GCONV_INCOMPLETE_INPUT
,

49 
	m__GCONV_ILLEGAL_DESCRIPTOR
,

50 
	m__GCONV_INTERNAL_ERROR


57 
	m__GCONV_IS_LAST
 = 0x0001,

58 
	m__GCONV_IGNORE_ERRORS
 = 0x0002,

59 
	m__GCONV_SWAP
 = 0x0004,

60 
	m__GCONV_TRANSLIT
 = 0x0008

65 
	g__gcÚv_¡•
;

66 
	g__gcÚv_¡•_d©a
;

67 
	g__gcÚv_lßded_objeù
;

71 (*
	t__gcÚv_fù
è(
	t__gcÚv_¡•
 *, 
	t__gcÚv_¡•_d©a
 *,

73 **, 
	tsize_t
 *, , );

76 
	$wšt_t
 (*
	t__gcÚv_btowc_fù
è(
	t__gcÚv_¡•
 *, );

79 (*
	t__gcÚv_š™_fù
è(
	t__gcÚv_¡•
 *);

80 (*
	t__gcÚv_’d_fù
è(
	t__gcÚv_¡•
 *);

84 
	s__gcÚv_¡•


86 
__gcÚv_lßded_objeù
 *
__shlib_hªdË
;

87 cÚ¡ *
__modÇme
;

89 
__couÁ”
;

91 *
__äom_Çme
;

92 *
__to_Çme
;

94 
__gcÚv_fù
 
__fù
;

95 
__gcÚv_btowc_fù
 
__btowc_fù
;

96 
__gcÚv_š™_fù
 
__š™_fù
;

97 
__gcÚv_’d_fù
 
__’d_fù
;

101 
__mš_Ãeded_äom
;

102 
__max_Ãeded_äom
;

103 
__mš_Ãeded_to
;

104 
__max_Ãeded_to
;

107 
__¡©eful
;

109 *
__d©a
;

114 
	s__gcÚv_¡•_d©a


116 *
__outbuf
;

117 *
__outbuãnd
;

121 
__æags
;

125 
__švoÿtiÚ_couÁ”
;

129 
__š‹º®_u£
;

131 
__mb¡©e_t
 *
__¡©•
;

132 
__mb¡©e_t
 
__¡©e
;

138 
	s__gcÚv_šfo


140 
size_t
 
__n¡•s
;

141 
__gcÚv_¡•
 *
__¡•s
;

142 
__ex‹nsiÚ__
 
__gcÚv_¡•_d©a
 
__d©a
 
__æex¬r
;

143 } *
	t__gcÚv_t
;

146 
	`__gcÚv_Œª¦™”©e
 (
__gcÚv_¡•
 *
¡•
,

147 
__gcÚv_¡•_d©a
 *
¡•_d©a
,

148 cÚ¡ *
šbuf¡¬t
,

149 cÚ¡ **
šbuå
,

150 cÚ¡ *
šbuãnd
,

151 **
outbuf¡¬t
,

152 
size_t
 *
œ»v”sibË
);

	@/usr/include/wchar.h

23 #iâdeà
_WCHAR_H


25 #ià!
defšed
 
__Ãed_mb¡©e_t
 && !defšed 
__Ãed_wšt_t


26 
	#_WCHAR_H
 1

	)

27 
	~<ã©u»s.h
>

30 #ifdeà
_WCHAR_H


32 
	#__Ãed___FILE


	)

33 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


34 
	#__Ãed_FILE


	)

36 
	~<¡dio.h
>

38 
	#__Ãed___va_li¡


	)

39 
	~<¡d¬g.h
>

41 
	~<b™s/wch¬.h
>

44 
	#__Ãed_size_t


	)

45 
	#__Ãed_wch¬_t


	)

46 
	#__Ãed_NULL


	)

48 #ià
defšed
 
_WCHAR_H
 || defšed 
__Ãed_wšt_t
 || !defšed 
__WINT_TYPE__


49 #undeà
__Ãed_wšt_t


50 
	#__Ãed_wšt_t


	)

51 
	~<¡ddef.h
>

55 #iâdeà
_WINT_T


60 
	#_WINT_T


	)

61 
	twšt_t
;

65 #ià
defšed
 
__ılu¥lus
 && defšed 
_GLIBCPP_USE_NAMESPACES
 \

66 && 
defšed
 
__WINT_TYPE__


67 
__BEGIN_NAMESPACE_STD


68 
__WINT_TYPE__
 
	twšt_t
;

69 
	g__END_NAMESPACE_STD


74 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

75 
	#__CORRECT_ISO_CPP_WCHAR_H_PROTO


	)

79 #ià(
defšed
 
_WCHAR_H
 || defšed 
__Ãed_mb¡©e_t
è&& !defšed 
____mb¡©e_t_defšed


80 
	#____mb¡©e_t_defšed
 1

	)

84 
	m__couÁ
;

87 #ifdeà
__WINT_TYPE__


88 
__WINT_TYPE__
 
	m__wch
;

90 
wšt_t
 
	m__wch
;

92 
	m__wchb
[4];

93 } 
	m__v®ue
;

94 } 
	t__mb¡©e_t
;

96 #undeà
__Ãed_mb¡©e_t


101 #ifdeà
_WCHAR_H


103 #iâdeà
__mb¡©e_t_defšed


104 
__BEGIN_NAMESPACE_C99


106 
__mb¡©e_t
 
	tmb¡©e_t
;

107 
	g__END_NAMESPACE_C99


108 
	#__mb¡©e_t_defšed
 1

	)

111 #ifdeà
__USE_GNU


112 
	$__USING_NAMESPACE_C99
(
mb¡©e_t
)

115 #iâdeà
WCHAR_MIN


117 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

118 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

121 #iâdeà
WEOF


122 
	#WEOF
 (0xffffffffu)

	)

127 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_UNIX98


128 
	~<wùy³.h
>

132 
__BEGIN_DECLS


134 
__BEGIN_NAMESPACE_STD


137 
tm
;

138 
__END_NAMESPACE_STD


142 
	$__USING_NAMESPACE_STD
(
tm
)

145 
__BEGIN_NAMESPACE_STD


147 
wch¬_t
 *
	$wcsıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

148 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
)

149 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

152 
wch¬_t
 *
	$wc¢ıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

153 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

154 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

157 
wch¬_t
 *
	$wcsÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

158 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
)

159 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

161 
wch¬_t
 *
	$wc¢ÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

162 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

163 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

166 
	$wcscmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
)

167 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

169 
	$wc¢cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

170 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

171 
__END_NAMESPACE_STD


173 #ifdeà
__USE_XOPEN2K8


175 
	$wcsÿ£cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

178 
	$wc¢ÿ£cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

179 
size_t
 
__n
è
__THROW
;

183 
	~<xloÿË.h
>

185 
	$wcsÿ£cmp_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

186 
__loÿË_t
 
__loc
è
__THROW
;

188 
	$wc¢ÿ£cmp_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

189 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

192 
__BEGIN_NAMESPACE_STD


195 
	$wcscŞl
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

199 
size_t
 
	$wcsxäm
 (
wch¬_t
 *
__»¡riù
 
__s1
,

200 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

201 
__END_NAMESPACE_STD


203 #ifdeà
__USE_XOPEN2K8


209 
	$wcscŞl_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

210 
__loÿË_t
 
__loc
è
__THROW
;

215 
size_t
 
	$wcsxäm_l
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

216 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

219 
wch¬_t
 *
	$wcsdup
 (cÚ¡ 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_m®loc__
;

222 
__BEGIN_NAMESPACE_STD


224 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


225 "C++" 
wch¬_t
 *
	$wcschr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

226 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

227 "C++" cÚ¡ 
wch¬_t
 *
	$wcschr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

228 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

230 
wch¬_t
 *
	$wcschr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

231 
__THROW
 
__©Œibu‹_pu»__
;

234 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


235 "C++" 
wch¬_t
 *
	$wc¤chr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

236 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

237 "C++" cÚ¡ 
wch¬_t
 *
	$wc¤chr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

238 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

240 
wch¬_t
 *
	$wc¤chr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

241 
__THROW
 
__©Œibu‹_pu»__
;

243 
__END_NAMESPACE_STD


245 #ifdeà
__USE_GNU


248 
wch¬_t
 *
	$wcschºul
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__wc
)

249 
__THROW
 
__©Œibu‹_pu»__
;

252 
__BEGIN_NAMESPACE_STD


255 
size_t
 
	$wcsc¥n
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__»jeù
)

256 
__THROW
 
__©Œibu‹_pu»__
;

259 
size_t
 
	$wcs¥n
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

260 
__THROW
 
__©Œibu‹_pu»__
;

262 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


263 "C++" 
wch¬_t
 *
	$wc¥brk
 (
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

264 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

265 "C++" cÚ¡ 
wch¬_t
 *
	$wc¥brk
 (cÚ¡ 
wch¬_t
 *
__wcs
,

266 cÚ¡ 
wch¬_t
 *
__acû±
)

267 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

269 
wch¬_t
 *
	$wc¥brk
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

270 
__THROW
 
__©Œibu‹_pu»__
;

273 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


274 "C++" 
wch¬_t
 *
	$wcs¡r
 (
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

275 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

276 "C++" cÚ¡ 
wch¬_t
 *
	$wcs¡r
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
,

277 cÚ¡ 
wch¬_t
 *
__ÃedË
)

278 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

280 
wch¬_t
 *
	$wcs¡r
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

281 
__THROW
 
__©Œibu‹_pu»__
;

285 
wch¬_t
 *
	$wc¡ok
 (
wch¬_t
 *
__»¡riù
 
__s
,

286 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__d–im
,

287 
wch¬_t
 **
__»¡riù
 
__±r
è
__THROW
;

290 
size_t
 
	$wc¦’
 (cÚ¡ 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_pu»__
;

291 
__END_NAMESPACE_STD


293 #ifdeà
__USE_XOPEN


295 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


296 "C++" 
wch¬_t
 *
	$wcswcs
 (
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

297 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

298 "C++" cÚ¡ 
wch¬_t
 *
	$wcswcs
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
,

299 cÚ¡ 
wch¬_t
 *
__ÃedË
)

300 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

302 
wch¬_t
 *
	$wcswcs
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

303 
__THROW
 
__©Œibu‹_pu»__
;

307 #ifdeà
__USE_XOPEN2K8


309 
size_t
 
	$wc¢Ën
 (cÚ¡ 
wch¬_t
 *
__s
, 
size_t
 
__maxËn
)

310 
__THROW
 
__©Œibu‹_pu»__
;

314 
__BEGIN_NAMESPACE_STD


316 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


317 "C++" 
wch¬_t
 *
	$wmemchr
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

318 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

319 "C++" cÚ¡ 
wch¬_t
 *
	$wmemchr
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__c
,

320 
size_t
 
__n
)

321 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

323 
wch¬_t
 *
	$wmemchr
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

324 
__THROW
 
__©Œibu‹_pu»__
;

328 
	$wmemcmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

329 
__THROW
 
__©Œibu‹_pu»__
;

332 
wch¬_t
 *
	$wmemıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

333 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

337 
wch¬_t
 *
	$wmemmove
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

338 
__THROW
;

341 
wch¬_t
 *
	$wmem£t
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
è
__THROW
;

342 
__END_NAMESPACE_STD


344 #ifdeà
__USE_GNU


347 
wch¬_t
 *
	$wmempıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

348 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
)

349 
__THROW
;

353 
__BEGIN_NAMESPACE_STD


356 
wšt_t
 
	$btowc
 (
__c
è
__THROW
;

360 
	$wùob
 (
wšt_t
 
__c
è
__THROW
;

364 
	$mbsš™
 (cÚ¡ 
mb¡©e_t
 *
__ps
è
__THROW
 
__©Œibu‹_pu»__
;

368 
size_t
 
	$mb¹owc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

369 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

370 
mb¡©e_t
 *
__»¡riù
 
__p
è
__THROW
;

373 
size_t
 
	$wütomb
 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wc
,

374 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

377 
size_t
 
	$__mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

378 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

379 
size_t
 
	$mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

380 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

381 
__END_NAMESPACE_STD


383 #ifdeà
__USE_EXTERN_INLINES


389 
wšt_t
 
	$__btowc_®Ÿs
 (
__c
è
	`__asm
 ("btowc");

390 
__ex‹º_šlše
 
wšt_t


391 
	`__NTH
 (
	$btowc
 (
__c
))

392 {  (
	`__butš_cÚ¡ªt_p
 (
__c
) && __c >= '\0' && __c <= '\x7f'

393 ? (
wšt_t
è
__c
 : 
	`__btowc_®Ÿs
 (__c)); 
	}
}

395 
	$__wùob_®Ÿs
 (
wšt_t
 
__c
è
	`__asm
 ("wctob");

396 
__ex‹º_šlše
 

397 
	`__NTH
 (
	$wùob
 (
wšt_t
 
__wc
))

398 {  (
	`__butš_cÚ¡ªt_p
 (
__wc
è&& __wø>ğ
L
'\0' && __wc <= L'\x7f'

399 ? (è
__wc
 : 
	`__wùob_®Ÿs
 (__wc)); 
	}
}

401 
__ex‹º_šlše
 
size_t


402 
__NTH
 (
	$mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

403 
mb¡©e_t
 *
__»¡riù
 
__ps
))

404 {  (
__ps
 !ğ
NULL


405 ? 
	`mb¹owc
 (
NULL
, 
__s
, 
__n
, 
__ps
è: 
	`__mb¾’
 (__s, __n, NULL)); 
	}
}

408 
__BEGIN_NAMESPACE_STD


411 
size_t
 
	$mb¤towcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

412 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

413 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

417 
size_t
 
	$wc¤tombs
 (*
__»¡riù
 
__d¡
,

418 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

419 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

420 
__END_NAMESPACE_STD


423 #ifdef 
__USE_XOPEN2K8


426 
size_t
 
	$mb¢¹owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

427 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

428 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

432 
size_t
 
	$wc¢¹ombs
 (*
__»¡riù
 
__d¡
,

433 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

434 
size_t
 
__nwc
, size_ˆ
__Ën
,

435 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

440 #ifdeà
__USE_XOPEN


442 
	$wcwidth
 (
wch¬_t
 
__c
è
__THROW
;

446 
	$wcswidth
 (cÚ¡ 
wch¬_t
 *
__s
, 
size_t
 
__n
è
__THROW
;

450 
__BEGIN_NAMESPACE_STD


453 
	$wc¡od
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

454 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

455 
__END_NAMESPACE_STD


457 #ifdeà
__USE_ISOC99


458 
__BEGIN_NAMESPACE_C99


460 
	$wc¡of
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

461 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

462 
	$wc¡Şd
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

463 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

464 
__END_NAMESPACE_C99


468 
__BEGIN_NAMESPACE_STD


471 
	$wc¡Ş
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

472 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

476 
	$wc¡oul
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

477 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

478 
__THROW
;

479 
__END_NAMESPACE_STD


481 #ifdeà
__USE_ISOC99


482 
__BEGIN_NAMESPACE_C99


485 
__ex‹nsiÚ__


486 
	$wc¡Şl
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

487 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

488 
__THROW
;

492 
__ex‹nsiÚ__


493 
	$wc¡ouÎ
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

494 
wch¬_t
 **
__»¡riù
 
__’d±r
,

495 
__ba£
è
__THROW
;

496 
__END_NAMESPACE_C99


499 #ifdeà
__USE_GNU


502 
__ex‹nsiÚ__


503 
	$wc¡oq
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

504 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

505 
__THROW
;

509 
__ex‹nsiÚ__


510 
	$wc¡ouq
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

511 
wch¬_t
 **
__»¡riù
 
__’d±r
,

512 
__ba£
è
__THROW
;

515 #ifdeà
__USE_GNU


529 
	~<xloÿË.h
>

533 
	$wc¡Ş_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

534 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
,

535 
__loÿË_t
 
__loc
è
__THROW
;

537 
	$wc¡oul_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

538 
wch¬_t
 **
__»¡riù
 
__’d±r
,

539 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

541 
__ex‹nsiÚ__


542 
	$wc¡Şl_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

543 
wch¬_t
 **
__»¡riù
 
__’d±r
,

544 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

546 
__ex‹nsiÚ__


547 
	$wc¡ouÎ_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

548 
wch¬_t
 **
__»¡riù
 
__’d±r
,

549 
__ba£
, 
__loÿË_t
 
__loc
)

550 
__THROW
;

552 
	$wc¡od_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

553 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

554 
__THROW
;

556 
	$wc¡of_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

557 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

558 
__THROW
;

560 
	$wc¡Şd_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

561 
wch¬_t
 **
__»¡riù
 
__’d±r
,

562 
__loÿË_t
 
__loc
è
__THROW
;

566 #ifdeà
__USE_XOPEN2K8


569 
wch¬_t
 *
	$wııy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

570 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

574 
wch¬_t
 *
	$wınıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

575 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

576 
__THROW
;

583 
__FILE
 *
	$İ’_wmem¡»am
 (
wch¬_t
 **
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
;

586 #ià
defšed
 
__USE_ISOC95
 || defšed 
__USE_UNIX98


587 
__BEGIN_NAMESPACE_STD


590 
	$fwide
 (
__FILE
 *
__å
, 
__mode
è
__THROW
;

597 
	`fw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

598 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

604 
	`w´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

607 
	$sw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

608 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

609 
__THROW
 ;

615 
	`vfw´štf
 (
__FILE
 *
__»¡riù
 
__s
,

616 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

617 
__gnuc_va_li¡
 
__¬g
)

623 
	`vw´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

624 
__gnuc_va_li¡
 
__¬g
)

628 
	$vsw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

629 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

630 
__gnuc_va_li¡
 
__¬g
)

631 
__THROW
 ;

638 
	`fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

639 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

645 
	`wsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

648 
	$swsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

649 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

650 
__THROW
 ;

652 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

653 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

654 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

655 #ifdeà
__REDIRECT


659 
	`__REDIRECT
 (
fwsÿnf
, (
__FILE
 *
__»¡riù
 
__¡»am
,

660 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

661 
__isoc99_fwsÿnf
)

663 
	`__REDIRECT
 (
wsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

664 
__isoc99_wsÿnf
)

666 
	`__REDIRECT_NTH
 (
swsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

667 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

668 ...), 
__isoc99_swsÿnf
)

671 
	`__isoc99_fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

672 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

673 
	`__isoc99_wsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

674 
	$__isoc99_swsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

675 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

676 
__THROW
;

677 
	#fwsÿnf
 
__isoc99_fwsÿnf


	)

678 
	#wsÿnf
 
__isoc99_wsÿnf


	)

679 
	#swsÿnf
 
__isoc99_swsÿnf


	)

683 
__END_NAMESPACE_STD


686 #ifdeà
__USE_ISOC99


687 
__BEGIN_NAMESPACE_C99


692 
	`vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

693 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

694 
__gnuc_va_li¡
 
__¬g
)

700 
	`vwsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

701 
__gnuc_va_li¡
 
__¬g
)

704 
	$vswsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

705 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

706 
__gnuc_va_li¡
 
__¬g
)

707 
__THROW
 ;

709 #ià!
defšed
 
__USE_GNU
 \

710 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

711 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

712 #ifdeà
__REDIRECT


713 
	`__REDIRECT
 (
vfwsÿnf
, (
__FILE
 *
__»¡riù
 
__s
,

714 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

715 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vfwsÿnf
)

717 
	`__REDIRECT
 (
vwsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

718 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vwsÿnf
)

720 
	`__REDIRECT_NTH
 (
vswsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

721 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

722 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vswsÿnf
)

725 
	`__isoc99_vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

726 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

727 
__gnuc_va_li¡
 
__¬g
);

728 
	`__isoc99_vwsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

729 
__gnuc_va_li¡
 
__¬g
);

730 
	$__isoc99_vswsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

731 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

732 
__gnuc_va_li¡
 
__¬g
è
__THROW
;

733 
	#vfwsÿnf
 
__isoc99_vfwsÿnf


	)

734 
	#vwsÿnf
 
__isoc99_vwsÿnf


	)

735 
	#vswsÿnf
 
__isoc99_vswsÿnf


	)

739 
__END_NAMESPACE_C99


743 
__BEGIN_NAMESPACE_STD


748 
wšt_t
 
	`fg‘wc
 (
__FILE
 *
__¡»am
);

749 
wšt_t
 
	`g‘wc
 (
__FILE
 *
__¡»am
);

755 
wšt_t
 
	`g‘wch¬
 ();

762 
wšt_t
 
	`åutwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

763 
wšt_t
 
	`putwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

769 
wšt_t
 
	`putwch¬
 (
wch¬_t
 
__wc
);

777 
wch¬_t
 *
	`fg‘ws
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

778 
__FILE
 *
__»¡riù
 
__¡»am
);

784 
	`åutws
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ws
,

785 
__FILE
 *
__»¡riù
 
__¡»am
);

792 
wšt_t
 
	`ung‘wc
 (wšt_ˆ
__wc
, 
__FILE
 *
__¡»am
);

793 
__END_NAMESPACE_STD


796 #ifdeà
__USE_GNU


804 
wšt_t
 
	`g‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

805 
wšt_t
 
	`g‘wch¬_uÆocked
 ();

813 
wšt_t
 
	`fg‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

821 
wšt_t
 
	`åutwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

830 
wšt_t
 
	`putwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

831 
wšt_t
 
	`putwch¬_uÆocked
 (
wch¬_t
 
__wc
);

840 
wch¬_t
 *
	`fg‘ws_uÆocked
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

841 
__FILE
 *
__»¡riù
 
__¡»am
);

849 
	`åutws_uÆocked
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ws
,

850 
__FILE
 *
__»¡riù
 
__¡»am
);

854 
__BEGIN_NAMESPACE_C99


858 
size_t
 
	$wcsáime
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

859 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

860 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

861 
__END_NAMESPACE_C99


863 #ifdeà
__USE_GNU


864 
	~<xloÿË.h
>

868 
size_t
 
	$wcsáime_l
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

869 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

870 cÚ¡ 
tm
 *
__»¡riù
 
__
,

871 
__loÿË_t
 
__loc
è
__THROW
;

880 #ià
defšed
 
__USE_UNIX98
 && !defšed 
__USE_GNU


881 
	#__Ãed_iswxxx


	)

882 
	~<wùy³.h
>

886 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


887 
	~<b™s/wch¬2.h
>

890 #ifdeà
__LDBL_COMPAT


891 
	~<b™s/wch¬-ldbl.h
>

894 
__END_DECLS


902 #undeà
__Ãed_mb¡©e_t


903 #undeà
__Ãed_wšt_t


	@/usr/include/wctype.h

23 #iâdeà
_WCTYPE_H


25 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 #iâdeà
__Ãed_iswxxx


29 
	#_WCTYPE_H
 1

	)

32 
	#__Ãed_wšt_t


	)

33 
	~<wch¬.h
>

37 #iâdeà
WEOF


38 
	#WEOF
 (0xffffffffu)

	)

41 #undeà
__Ãed_iswxxx


46 #iâdeà
__iswxxx_defšed


47 
	#__iswxxx_defšed
 1

	)

49 
__BEGIN_NAMESPACE_C99


52 
	twùy³_t
;

53 
	g__END_NAMESPACE_C99


55 #iâdeà
_ISwb™


60 
	~<’dŸn.h
>

61 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


62 
	#_ISwb™
(
b™
è(1 << (b™))

	)

64 
	#_ISwb™
(
b™
) \

65 ((
b™
) < 8 ? () ((1UL << (bit)) << 24) \

66 : ((
b™
) < 16 ? () ((1UL << (bit)) << 8) \

67 : ((
b™
) < 24 ? () ((1UL << (bit)) >> 8) \

68 : (è((1UL << (
b™
)è>> 24))))

	)

73 
	m__ISwuµ”
 = 0,

74 
	m__ISwlow”
 = 1,

75 
	m__ISw®pha
 = 2,

76 
	m__ISwdig™
 = 3,

77 
	m__ISwxdig™
 = 4,

78 
	m__ISw¥aû
 = 5,

79 
	m__ISw´št
 = 6,

80 
	m__ISwg¿ph
 = 7,

81 
	m__ISwbÏnk
 = 8,

82 
	m__ISwúŒl
 = 9,

83 
	m__ISwpunù
 = 10,

84 
	m__ISw®num
 = 11,

86 
	m_ISwuµ”
 = 
_ISwb™
 (
__ISwuµ”
),

87 
	m_ISwlow”
 = 
_ISwb™
 (
__ISwlow”
),

88 
	m_ISw®pha
 = 
_ISwb™
 (
__ISw®pha
),

89 
	m_ISwdig™
 = 
_ISwb™
 (
__ISwdig™
),

90 
	m_ISwxdig™
 = 
_ISwb™
 (
__ISwxdig™
),

91 
	m_ISw¥aû
 = 
_ISwb™
 (
__ISw¥aû
),

92 
	m_ISw´št
 = 
_ISwb™
 (
__ISw´št
),

93 
	m_ISwg¿ph
 = 
_ISwb™
 (
__ISwg¿ph
),

94 
	m_ISwbÏnk
 = 
_ISwb™
 (
__ISwbÏnk
),

95 
	m_ISwúŒl
 = 
_ISwb™
 (
__ISwúŒl
),

96 
	m_ISwpunù
 = 
_ISwb™
 (
__ISwpunù
),

97 
	m_ISw®num
 = 
_ISwb™
 (
__ISw®num
)

102 
__BEGIN_DECLS


104 
__BEGIN_NAMESPACE_C99


111 
	$isw®num
 (
wšt_t
 
__wc
è
__THROW
;

117 
	$isw®pha
 (
wšt_t
 
__wc
è
__THROW
;

120 
	$iswúŒl
 (
wšt_t
 
__wc
è
__THROW
;

124 
	$iswdig™
 (
wšt_t
 
__wc
è
__THROW
;

128 
	$iswg¿ph
 (
wšt_t
 
__wc
è
__THROW
;

133 
	$iswlow”
 (
wšt_t
 
__wc
è
__THROW
;

136 
	$isw´št
 (
wšt_t
 
__wc
è
__THROW
;

141 
	$iswpunù
 (
wšt_t
 
__wc
è
__THROW
;

146 
	$isw¥aû
 (
wšt_t
 
__wc
è
__THROW
;

151 
	$iswuµ”
 (
wšt_t
 
__wc
è
__THROW
;

156 
	$iswxdig™
 (
wšt_t
 
__wc
è
__THROW
;

161 #ifdeà
__USE_ISOC99


162 
	$iswbÏnk
 (
wšt_t
 
__wc
è
__THROW
;

171 
wùy³_t
 
	$wùy³
 (cÚ¡ *
__´İ”ty
è
__THROW
;

175 
	$iswùy³
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
è
__THROW
;

176 
__END_NAMESPACE_C99


183 
__BEGIN_NAMESPACE_C99


186 cÚ¡ 
	t__št32_t
 *
	twù¿ns_t
;

187 
__END_NAMESPACE_C99


188 #ifdeà
__USE_GNU


189 
	$__USING_NAMESPACE_C99
(
wù¿ns_t
)

192 
__BEGIN_NAMESPACE_C99


194 
wšt_t
 
	$towlow”
 (
wšt_t
 
__wc
è
__THROW
;

197 
wšt_t
 
	$towuµ”
 (
wšt_t
 
__wc
è
__THROW
;

198 
__END_NAMESPACE_C99


200 
__END_DECLS


207 #ifdeà
_WCTYPE_H


213 
__BEGIN_DECLS


215 
__BEGIN_NAMESPACE_C99


218 
wù¿ns_t
 
	$wù¿ns
 (cÚ¡ *
__´İ”ty
è
__THROW
;

221 
wšt_t
 
	$towù¿ns
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
è
__THROW
;

222 
__END_NAMESPACE_C99


224 #ifdeà
__USE_XOPEN2K8


226 
	~<xloÿË.h
>

230 
	$isw®num_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

236 
	$isw®pha_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

239 
	$iswúŒl_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

243 
	$iswdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

247 
	$iswg¿ph_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

252 
	$iswlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

255 
	$isw´št_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

260 
	$iswpunù_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

265 
	$isw¥aû_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

270 
	$iswuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

275 
	$iswxdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

280 
	$iswbÏnk_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

284 
wùy³_t
 
	$wùy³_l
 (cÚ¡ *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

285 
__THROW
;

289 
	$iswùy³_l
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
, 
__loÿË_t
 
__loÿË
)

290 
__THROW
;

298 
wšt_t
 
	$towlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

301 
wšt_t
 
	$towuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

305 
wù¿ns_t
 
	$wù¿ns_l
 (cÚ¡ *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

306 
__THROW
;

309 
wšt_t
 
	$towù¿ns_l
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
,

310 
__loÿË_t
 
__loÿË
è
__THROW
;

314 
__END_DECLS


	@
1
.
1
/usr/include
273
7793
../data/config.ini
../data/scripts/commonDefines.h
../data/scripts/conCommands.sc
../data/scripts/gui_main.sc
../data/scripts/gui_terminal.sc
../data/scripts/shutdown.sc
../data/scripts/startup.sc
../data/scripts/transferDroidAI.sc
../data/scripts/transferGame.sc
../data/todo.txt
../hdr/chipmunk/chipmunk.h
../hdr/chipmunk/chipmunk_ffi.h
../hdr/chipmunk/chipmunk_private.h
../hdr/chipmunk/chipmunk_structs.h
../hdr/chipmunk/chipmunk_types.h
../hdr/chipmunk/chipmunk_unsafe.h
../hdr/chipmunk/cpArbiter.h
../hdr/chipmunk/cpBB.h
../hdr/chipmunk/cpBody.h
../hdr/chipmunk/cpConstraint.h
../hdr/chipmunk/cpDampedRotarySpring.h
../hdr/chipmunk/cpDampedSpring.h
../hdr/chipmunk/cpGearJoint.h
../hdr/chipmunk/cpGrooveJoint.h
../hdr/chipmunk/cpHastySpace.h
../hdr/chipmunk/cpMarch.h
../hdr/chipmunk/cpPinJoint.h
../hdr/chipmunk/cpPivotJoint.h
../hdr/chipmunk/cpPolyShape.h
../hdr/chipmunk/cpPolyline.h
../hdr/chipmunk/cpRatchetJoint.h
../hdr/chipmunk/cpRobust.h
../hdr/chipmunk/cpRotaryLimitJoint.h
../hdr/chipmunk/cpShape.h
../hdr/chipmunk/cpSimpleMotor.h
../hdr/chipmunk/cpSlideJoint.h
../hdr/chipmunk/cpSpace.h
../hdr/chipmunk/cpSpatialIndex.h
../hdr/chipmunk/cpTransform.h
../hdr/chipmunk/cpVect.h
../hdr/game/gam_LOS.h
../hdr/game/gam_bullet.h
../hdr/game/gam_database.h
../hdr/game/gam_doors.h
../hdr/game/gam_droid.h
../hdr/game/gam_droidAI.h
../hdr/game/gam_droidAI_Resume.h
../hdr/game/gam_intro.h
../hdr/game/gam_levels.h
../hdr/game/gam_particles.h
../hdr/game/gam_pathFind.h
../hdr/game/gam_player.h
../hdr/game/gam_render.h
../hdr/game/gam_sideView.h
../hdr/game/gam_spotLight.h
../hdr/game/gam_starfield.h
../hdr/game/gam_terminal.h
../hdr/game/gam_transfer.h
../hdr/gui/gui_main.h
../hdr/gui/gui_scrollBox.h
../hdr/io/io_configFile.h
../hdr/io/io_images.h
../hdr/io/io_keyBind.h
../hdr/io/io_keyboard.h
../hdr/io/io_logFile.h
../hdr/io/io_packFile.h
../hdr/script/angelscript.h
../hdr/script/as_array.h
../hdr/script/as_arrayobject.h
../hdr/script/as_atomic.h
../hdr/script/as_builder.h
../hdr/script/as_bytecode.h
../hdr/script/as_callfunc.h
../hdr/script/as_compiler.h
../hdr/script/as_config.h
../hdr/script/as_configgroup.h
../hdr/script/as_context.h
../hdr/script/as_criticalsection.h
../hdr/script/as_datatype.h
../hdr/script/as_debug.h
../hdr/script/as_gc.h
../hdr/script/as_generic.h
../hdr/script/as_map.h
../hdr/script/as_memory.h
../hdr/script/as_module.h
../hdr/script/as_objecttype.h
../hdr/script/as_outputbuffer.h
../hdr/script/as_parser.h
../hdr/script/as_property.h
../hdr/script/as_restore.h
../hdr/script/as_scriptcode.h
../hdr/script/as_scriptengine.h
../hdr/script/as_scriptfunction.h
../hdr/script/as_scriptnode.h
../hdr/script/as_scriptobject.h
../hdr/script/as_string.h
../hdr/script/as_string_util.h
../hdr/script/as_texts.h
../hdr/script/as_thread.h
../hdr/script/as_tokendef.h
../hdr/script/as_tokenizer.h
../hdr/script/as_typeinfo.h
../hdr/script/as_variablescope.h
../hdr/script/scriptarray.h
../hdr/script/scriptstdstring.h
../hdr/sys_globals.h
../hdr/system/sys_conCommands.h
../hdr/system/sys_console.h
../hdr/system/sys_debug.h
../hdr/system/sys_defines.h
../hdr/system/sys_font.h
../hdr/system/sys_frame.h
../hdr/system/sys_maths.h
../hdr/system/sys_physics.h
../hdr/system/sys_physicsCollisions.h
../hdr/system/sys_pixelCollide.h
../hdr/system/sys_script.h
../hdr/system/sys_shutdown.h
../hdr/system/sys_sound.h
../hdr/system/sys_startup.h
../hdr/system/sys_timing.h
../hdr/system/sys_utils.h
../main.cpp
../src/chipmunk/chipmunk.c
../src/chipmunk/cpArbiter.c
../src/chipmunk/cpArray.c
../src/chipmunk/cpBBTree.c
../src/chipmunk/cpBody.c
../src/chipmunk/cpCollision.c
../src/chipmunk/cpConstraint.c
../src/chipmunk/cpDampedRotarySpring.c
../src/chipmunk/cpDampedSpring.c
../src/chipmunk/cpGearJoint.c
../src/chipmunk/cpGrooveJoint.c
../src/chipmunk/cpHashSet.c
../src/chipmunk/cpHastySpace.c
../src/chipmunk/cpMarch.c
../src/chipmunk/cpPinJoint.c
../src/chipmunk/cpPivotJoint.c
../src/chipmunk/cpPolyShape.c
../src/chipmunk/cpPolyline.c
../src/chipmunk/cpRatchetJoint.c
../src/chipmunk/cpRobust.c
../src/chipmunk/cpRotaryLimitJoint.c
../src/chipmunk/cpShape.c
../src/chipmunk/cpSimpleMotor.c
../src/chipmunk/cpSlideJoint.c
../src/chipmunk/cpSpace.c
../src/chipmunk/cpSpaceComponent.c
../src/chipmunk/cpSpaceDebug.c
../src/chipmunk/cpSpaceHash.c
../src/chipmunk/cpSpaceQuery.c
../src/chipmunk/cpSpaceStep.c
../src/chipmunk/cpSpatialIndex.c
../src/chipmunk/cpSweep1D.c
../src/chipmunk/prime.h
../src/game/gam_LOS.cpp
../src/game/gam_bullet.cpp
../src/game/gam_database.cpp
../src/game/gam_doors.cpp
../src/game/gam_droid.cpp
../src/game/gam_droidAI.cpp
../src/game/gam_droidAI_Health.cpp
../src/game/gam_droidAI_Patrol.cpp
../src/game/gam_droidAI_Resume.cpp
../src/game/gam_intro.cpp
../src/game/gam_levels.cpp
../src/game/gam_particles.cpp
../src/game/gam_pathFind.cpp
../src/game/gam_player.cpp
../src/game/gam_render.cpp
../src/game/gam_sideView.cpp
../src/game/gam_spotLight.cpp
../src/game/gam_terminal.cpp
../src/game/gam_transfer.cpp
../src/game/gam_transferDroidAI.cpp
../src/game/gam_transferPlayerAI.cpp
../src/game/gam_transferRender.cpp
../src/game/sys_starfield.cpp
../src/gui/gui_main.cpp
../src/gui/gui_objects.cpp
../src/gui/gui_render.cpp
../src/gui/gui_scrollBox.cpp
../src/io/io_configFile.cpp
../src/io/io_images.cpp
../src/io/io_keyBind.cpp
../src/io/io_keyboard.cpp
../src/io/io_logFile.cpp
../src/io/io_packFile.cpp
../src/io/io_sideView.cpp
../src/script/as_arrayobject.cpp
../src/script/as_atomic.cpp
../src/script/as_builder.cpp
../src/script/as_bytecode.cpp
../src/script/as_callfunc.cpp
../src/script/as_callfunc_arm.cpp
../src/script/as_callfunc_mips.cpp
../src/script/as_callfunc_ppc.cpp
../src/script/as_callfunc_ppc_64.cpp
../src/script/as_callfunc_sh4.cpp
../src/script/as_callfunc_x64_gcc.cpp
../src/script/as_callfunc_x64_mingw.cpp
../src/script/as_callfunc_x64_msvc.cpp
../src/script/as_callfunc_x86.cpp
../src/script/as_callfunc_xenon.cpp
../src/script/as_compiler.cpp
../src/script/as_configgroup.cpp
../src/script/as_context.cpp
../src/script/as_datatype.cpp
../src/script/as_gc.cpp
../src/script/as_generic.cpp
../src/script/as_globalproperty.cpp
../src/script/as_memory.cpp
../src/script/as_module.cpp
../src/script/as_objecttype.cpp
../src/script/as_outputbuffer.cpp
../src/script/as_parser.cpp
../src/script/as_restore.cpp
../src/script/as_scriptcode.cpp
../src/script/as_scriptengine.cpp
../src/script/as_scriptfunction.cpp
../src/script/as_scriptnode.cpp
../src/script/as_scriptobject.cpp
../src/script/as_string.cpp
../src/script/as_string_util.cpp
../src/script/as_thread.cpp
../src/script/as_tokenizer.cpp
../src/script/as_typeinfo.cpp
../src/script/as_variablescope.cpp
../src/script/scriptbuilder.cpp
../src/script/scriptstdstring.cpp
../src/script/scriptstdstring_utils.cpp
../src/system/sys_conCommands.cpp
../src/system/sys_conVariables.cpp
../src/system/sys_console.cpp
../src/system/sys_debug.cpp
../src/system/sys_font.cpp
../src/system/sys_frame.cpp
../src/system/sys_maths.cpp
../src/system/sys_physics.cpp
../src/system/sys_physicsCollisions.cpp
../src/system/sys_script.cpp
../src/system/sys_shutdown.cpp
../src/system/sys_sound.cpp
../src/system/sys_startup.cpp
../src/system/sys_timing.cpp
../src/system/sys_utils.cpp
/usr/include/alloca.h
/usr/include/assert.h
/usr/include/locale.h
/usr/include/malloc.h
/usr/include/math.h
/usr/include/memory.h
/usr/include/physfs.h
/usr/include/pthread.h
/usr/include/stdint.h
/usr/include/stdio.h
/usr/include/stdlib.h
/usr/include/string.h
/usr/include/time.h
/usr/include/unistd.h
/usr/include/endian.h
/usr/include/features.h
/usr/include/getopt.h
/usr/include/libio.h
/usr/include/sched.h
/usr/include/xlocale.h
/usr/include/_G_config.h
/usr/include/ctype.h
/usr/include/stdc-predef.h
/usr/include/gconv.h
/usr/include/wchar.h
/usr/include/wctype.h
